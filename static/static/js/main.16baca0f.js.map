{"version":3,"file":"static/js/main.16baca0f.js","mappings":";oBAOAA,EAAOC,QAAU,CAEfC,QAAS,CACPC,mBAAmB,G,2BCHvBH,EAAOC,QAAU,EAAjBD,IACAI,EAAQ,MACRA,EAAQ,KACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,KACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,K,gBCxBR,IAAIC,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAGR,IAAIE,EAAOD,EAAMC,KAGbC,EAAMP,EAAOC,QAAUI,EAAME,IAAMF,EAAME,KAAO,CAAC,EAWrDA,EAAIC,SAAW,SAASC,GACtB,IAAIC,EAAML,EAAMI,IAAIE,OAAOF,GAAK,GAChC,GAAGC,EAAIE,UAAkC,cAAtBF,EAAIE,SAASC,KAC9B,MAAM,IAAIC,MAAM,mDAElB,OAAOT,EAAMU,KAAKC,aAAaN,EAAIO,KACrC,EASAV,EAAIW,kBAAoB,SAAST,GAC/B,IAAIC,EAAML,EAAMI,IAAIE,OAAOF,GAAK,GAEhC,GAAgB,gBAAbC,EAAIG,MAAuC,oBAAbH,EAAIG,KAA4B,CAC/D,IAAIM,EAAQ,IAAIL,MAAM,sGAGtB,MADAK,EAAMC,WAAaV,EAAIG,KACjBM,CACR,CACA,GAAGT,EAAIE,UAAkC,cAAtBF,EAAIE,SAASC,KAC9B,MAAM,IAAIC,MAAM,6DAIlB,IAAIO,EAAMf,EAAKgB,QAAQZ,EAAIO,MAE3B,OAAOV,EAAIgB,mBAAmBF,EAChC,EAUAd,EAAIiB,gBAAkB,SAASC,EAAKC,GAElC,IAAIhB,EAAM,CACRG,KAAM,kBACNI,KAAMX,EAAKqB,MAAMpB,EAAIqB,iBAAiBH,IAAMI,YAE9C,OAAOxB,EAAMI,IAAIqB,OAAOpB,EAAK,CAACgB,QAASA,GACzC,EAUAnB,EAAIwB,oBAAsB,SAASxB,EAAKmB,GAEtC,IAAIhB,EAAM,CACRG,KAAM,cACNI,KAAMX,EAAKqB,MAAMpB,GAAKsB,YAExB,OAAOxB,EAAMI,IAAIqB,OAAOpB,EAAK,CAACgB,QAASA,GACzC,C,6BClGE1B,EAAOC,QAAU,EAAjBD,K,gBCKF,IAAIK,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MAER,IAAI4B,EAAMhC,EAAOC,QAAUI,EAAM2B,IAsCjC,SAASC,EAAoBC,EAAOC,EAAGC,GACrC,IAAIC,EAAUF,EAAEG,SAAWjC,EAAM2B,IAAIO,cAAcF,OAGnDH,EAAMM,KAAKC,YAAc,CACvBC,MAAM,EACNC,OAAQtC,EAAMsC,OAAOC,eAAe,UAAWP,EAC7CD,EAAGS,KAAKC,iBAAmBV,EAAGS,KAAKE,kBACrCC,GAAIX,EAASD,EAAGS,KAAKI,gBAAkBb,EAAGS,KAAKK,iBAEjDhB,EAAMiB,MAAMV,YAAc,CACxBC,MAAM,EACNC,OAAQtC,EAAMsC,OAAOS,aAAa,UAAWf,EAC3CD,EAAGS,KAAKE,iBAAmBX,EAAGS,KAAKC,kBACrCE,GAAIX,EAASD,EAAGS,KAAKK,gBAAkBd,EAAGS,KAAKI,iBAEjDf,EAAMM,KAAKa,eAAiBC,EAC5BpB,EAAMiB,MAAME,eAAiBE,EAG7BrB,EAAMM,KAAKgB,UAAYtB,EAAMiB,MAAMK,UAAYpB,EAAGqB,WAClDvB,EAAMM,KAAKkB,YAAcxB,EAAMiB,MAAMO,YAAc1B,EAAI2B,SACzD,CAWA,SAASJ,EAAqBK,EAAQC,GACpC,IAQIb,EARAc,GAAO,EAGPC,EAAMF,EAAEH,YAAYG,EAAEG,OAAQH,EAAEI,eAAgBL,GACpDA,EAAOM,SAASC,SAASJ,GACzBF,EAAEO,uBAOApB,EAHCY,EAAOS,QAAQC,QAAUtC,EAAIuC,SAASC,QAAQF,MAG1CT,EAAEpB,YAAYC,KAAO,KAAOmB,EAAEpB,YAAYO,GAE1C3C,EAAMoE,OAAOC,aAAa,IAGjCb,EAAEpB,YAAYC,MAAO,EAGrB,IAAIC,EAASkB,EAAEpB,YAAYE,OAiB3B,OAhBAA,EAAOgC,MAAM,CAAC3B,GAAIA,IAGfY,EAAOS,QAAQC,OAAStC,EAAIuC,SAASK,QAAQN,OAC9C3B,EAAOkC,OAAOV,SAASnB,GAIzBL,EAAOmC,OAAOlB,EAAOM,UAClBvB,EAAOoC,OAAOC,KAEfpB,EAAOM,SAAWvB,EAAOkC,OACzBjB,EAAOqB,OAASrB,EAAOM,SAASe,SAChCnB,GAAO,GAGFA,CACT,CAWA,SAASkB,EAA6BE,EAAWC,EAAOC,GAmBtD,IAAIA,EAAS,CAIX,IAAIC,EAAUH,EAAaC,EAAMF,SAAWC,EAC5CC,EAAMG,aAAaD,EAAU,EAAGA,EAClC,CACA,OAAO,CACT,CAWA,SAASE,EAA6BL,EAAWL,EAAQO,GACvD,IAAItB,GAAO,EACX,GAAGsB,EAAS,CAQV,IAFA,IAAII,EAAMX,EAAOI,SACbQ,EAAgBZ,EAAOa,OACnBC,EAAIH,EAAM,EAAIC,EAAeE,EAAIH,EAAM,IAAKG,EAClD7B,EAAOA,GAASe,EAAOe,GAAGD,IAAMF,EAE/B3B,GAEDe,EAAOgB,SAASJ,EAAgB,EAEpC,CACA,OAAO3B,CACT,CAWA,SAASR,EAAqBM,EAAQC,GACpC,IAEIb,EAFAc,GAAO,EAMTd,EAHCY,EAAOS,QAAQC,QAAUtC,EAAIuC,SAASC,QAAQF,MAG1CT,EAAEpB,YAAYC,KAAO,KAAOmB,EAAEpB,YAAYO,GAI1CY,EAAOM,SAASrC,SAAS,IAGhCgC,EAAEpB,YAAYC,MAAO,EAGrB,IAAIC,EAASkB,EAAEpB,YAAYE,OAC3BA,EAAOgC,MAAM,CAAC3B,GAAIA,IAGlBL,EAAOmC,OAAOlB,EAAOM,UACrBJ,EAAOnB,EAAOoC,OAAOQ,GAOrB,IAAIO,EAASjC,EAAEL,UAIXO,EAAM1D,EAAMoE,OAAOC,aAAaoB,GAGhCN,EAAM7C,EAAOkC,OAAOI,SACrBO,GAAOM,GACRlC,EAAOM,SAAWvB,EAAOkC,OAAOhD,SAAS2D,EAAMM,GAC/C/B,EAAMpB,EAAOkC,OAAOhD,SAASiE,IAG7BlC,EAAOM,SAAWvB,EAAOkC,OAAOhD,WAElC+B,EAAOM,SAAW7D,EAAMU,KAAKC,aAAa4C,EAAOM,UACjDN,EAAOqB,OAASrB,EAAOM,SAASe,SAGhC,IAAIc,EAAOlC,EAAEH,YAAYG,EAAEG,OAAQH,EAAEI,eAAgBL,GAGrD,OAFAC,EAAEO,uBACFN,EAkBF,SAAqBrC,EAAKuE,EAAMD,GAC9B,IAAIE,EAAO5F,EAAM4F,KAAKC,SAUtB,OARAD,EAAKtB,MAAM,OAAQlD,GACnBwE,EAAKnB,OAAOkB,GACZA,EAAOC,EAAKE,SAAStE,WAErBoE,EAAKtB,MAAM,KAAM,MACjBsB,EAAKnB,OAAOiB,GACZA,EAAOE,EAAKE,SAAStE,WAEdmE,IAASD,CAClB,CA9BSK,CAAYvC,EAAEG,OAAQD,EAAKgC,IAASjC,EACpCA,CACT,CA5OA9B,EAAIqE,aAA2C,6BAAI,CACjDC,GAAI,CAAC,EAAM,IACXC,KAAM,+BACNC,uBAAwB,SAASpE,GAC/BA,EAAGqE,sBAAwBzE,EAAI0E,oBAAoBC,IACnDvE,EAAGwE,YAAc5E,EAAI6E,WAAWC,MAChC1E,EAAG2E,eAAiB,GACpB3E,EAAG4E,aAAe,GAClB5E,EAAG6E,gBAAkB,GACrB7E,EAAG8E,iBAAmB,GACtB9E,EAAG+E,cAAgBnF,EAAIoF,aAAazD,UACpCvB,EAAGqB,WAAa,GAChBrB,EAAGiF,eAAiB,EACtB,EACApF,oBAAqBA,GAEvBD,EAAIqE,aAA2C,6BAAI,CACjDC,GAAI,CAAC,EAAM,IACXC,KAAM,+BACNC,uBAAwB,SAASpE,GAC/BA,EAAGqE,sBAAwBzE,EAAI0E,oBAAoBC,IACnDvE,EAAGwE,YAAc5E,EAAI6E,WAAWC,MAChC1E,EAAG2E,eAAiB,GACpB3E,EAAG4E,aAAe,GAClB5E,EAAG6E,gBAAkB,GACrB7E,EAAG8E,iBAAmB,GACtB9E,EAAG+E,cAAgBnF,EAAIoF,aAAazD,UACpCvB,EAAGqB,WAAa,GAChBrB,EAAGiF,eAAiB,EACtB,EACApF,oBAAqBA,E,8BCtCV,IAAIqF,EAAElH,EAAQ,MAASmH,EAAEC,OAAOC,IAAI,iBAAiBC,EAAEF,OAAOC,IAAI,kBAAkBE,EAAEC,OAAOC,UAAUC,eAAeC,EAAET,EAAEU,mDAAmDC,kBAAkBC,EAAE,CAACzG,KAAI,EAAG0G,KAAI,EAAGC,QAAO,EAAGC,UAAS,GAChP,SAASC,EAAEnG,EAAEoG,EAAEC,GAAG,IAAIC,EAAEC,EAAE,CAAC,EAAEC,EAAE,KAAKC,EAAE,KAAiF,IAAIH,UAAhF,IAASD,IAAIG,EAAE,GAAGH,QAAG,IAASD,EAAE9G,MAAMkH,EAAE,GAAGJ,EAAE9G,UAAK,IAAS8G,EAAEJ,MAAMS,EAAEL,EAAEJ,KAAcI,EAAEZ,EAAEkB,KAAKN,EAAEE,KAAKP,EAAEJ,eAAeW,KAAKC,EAAED,GAAGF,EAAEE,IAAI,GAAGtG,GAAGA,EAAE2G,aAAa,IAAIL,KAAKF,EAAEpG,EAAE2G,kBAAe,IAASJ,EAAED,KAAKC,EAAED,GAAGF,EAAEE,IAAI,MAAM,CAACM,SAASxB,EAAE1G,KAAKsB,EAAEV,IAAIkH,EAAER,IAAIS,EAAEI,MAAMN,EAAEO,OAAOlB,EAAEmB,QAAQ,CAACjJ,EAAQkJ,SAASzB,EAAEzH,EAAQmJ,IAAId,EAAErI,EAAQoJ,KAAKf,C,iBCC1W,IAAIjI,EAAQD,EAAQ,IACpBA,EAAQ,MAER,IAAIkJ,EAAU,MACXjJ,EAAMU,KAAKwI,UAAalJ,EAAMH,QAAQC,mBACtCqJ,QAAQC,SAAS,iBAClBH,EAAUlJ,EAAQ,OAITJ,EAAOC,QAAUI,EAAMqJ,KAAOrJ,EAAMqJ,MAAQ,CAAC,GAoBnDxD,OAAS,SAASyD,GAiBrB,IAhBA,IAAIC,EAAM,CACRD,OAAQA,EACRlI,IAAK,KACLoI,KAAM,KACNC,KAAM,KAENC,QAAS,EAETC,UAAW,EAEXC,SAAU,IAIRC,EAAKP,EAAOO,GACZC,EAAQ,IAAIC,MAAM,IACdzE,EAAI,EAAGA,EAAI,KAAMA,EACvBwE,EAAMxE,GAAKuE,EAAGhE,SAgJhB,SAASmE,IACP,GAAGT,EAAIO,MAAM,GAAGG,eAAiB,GAC/B,OAAOC,IAGT,IAAIC,EAAU,GAAKZ,EAAIO,MAAM,GAAGG,eAAkB,EAClDV,EAAIa,QAAQb,EAAIc,aAAaF,IAC7BD,GACF,CAKA,SAASA,IAEPX,EAAIG,QAA2B,aAAhBH,EAAIG,QAA0B,EAAIH,EAAIG,QAAU,EAO/D,IAAIG,EAAKN,EAAID,OAAOO,GAAGhE,SAGvBgE,EAAGpF,OAAO8E,EAAIK,UAKd,IADA,IAAIU,EAAS,EACLpD,EAAI,EAAGA,EAAI,KAAMA,EACpBqC,EAAIG,QAAUY,IAAW,IAC1BT,EAAGpF,OAAO8E,EAAIO,MAAM5C,GAAGpB,SAAStE,YAChC+H,EAAIO,MAAM5C,GAAG5C,SAEfgG,IAAmB,EAIrBf,EAAIK,SAAWC,EAAG/D,SAAStE,WAM3BqI,EAAGvF,QACHuF,EAAGpF,OAAO8E,EAAIK,UACd,IAAIW,EAAYV,EAAG/D,SAAStE,WAG5B+H,EAAInI,IAAMmI,EAAID,OAAOkB,UAAUjB,EAAIK,UACnCL,EAAIC,KAAOD,EAAID,OAAOmB,WAAWF,GACjChB,EAAII,UAAY,CAClB,CAUA,SAASe,EAAgBP,GAEvB,IAAIQ,EAAkB,KAClBC,EAAc5K,EAAMU,KAAKkK,YACzB3B,EAAU2B,EAAYC,QAAUD,EAAYE,SAC7C7B,GAAWA,EAAQ0B,kBACpBA,EAAkB,SAASI,GACzB,OAAO9B,EAAQ0B,gBAAgBI,EACjC,GAGF,IAAI3C,EAAIpI,EAAMU,KAAKC,eACnB,GAAGgK,EACD,KAAMvC,EAAExD,SAAWuF,GAAQ,CAGzB,IAAIa,EAAQC,KAAKC,IAAI,EAAGD,KAAKE,IAAIhB,EAAS/B,EAAExD,SAAU,OAAS,GAC3DwG,EAAU,IAAIC,YAAYJ,KAAKK,MAAMN,IACzC,IACEL,EAAgBS,GAChB,IAAI,IAAI9F,EAAI,EAAGA,EAAI8F,EAAQxG,SAAUU,EACnC8C,EAAEmD,SAASH,EAAQ9F,GAEvB,CAAE,MAAMgD,GAEN,KAAmC,qBAAvBkD,oBACVlD,aAAakD,oBACb,MAAMlD,CAEV,CACF,CAIF,GAAGF,EAAExD,SAAWuF,EAMd,IAFA,IAAIsB,EAAIC,EAAIC,EACRnC,EAAOyB,KAAKK,MAAsB,MAAhBL,KAAK7G,UACrBgE,EAAExD,SAAWuF,GAAQ,CACzBuB,EAAK,OAAgB,MAAPlC,GAEdkC,IAAY,OADZD,EAAK,OAASjC,GAAQ,OACC,GAGvBA,EAAY,YADZkC,GAAW,YADXA,GAAMD,GAAM,MACcC,GAAM,KAIhC,IAAQpG,EAAI,EAAGA,EAAI,IAAKA,EAEtBqG,EAAOnC,KAAUlE,GAAK,GACtBqG,GAAQV,KAAKK,MAAsB,IAAhBL,KAAK7G,UACxBgE,EAAEwD,QAAe,IAAPD,EAEd,CAGF,OAAOvD,EAAE5G,SAAS2I,EACpB,CA4FA,OApWAZ,EAAIO,MAAQA,EAGZP,EAAIsC,KAAO,EAYXtC,EAAIuC,SAAW,SAASd,EAAOe,GAE7B,IAAIA,EACF,OAAOxC,EAAIyC,aAAahB,GAI1B,IAAI1I,EAASiH,EAAID,OAAOhH,OACpB2J,EAAY1C,EAAID,OAAO2C,UACvBzB,EAAYjB,EAAID,OAAOkB,UACvBC,EAAalB,EAAID,OAAOmB,WACxBrC,EAAIpI,EAAMU,KAAKC,eAOnB4I,EAAInI,IAAM,KAIV,SAAS0K,EAASI,GAChB,GAAGA,EACD,OAAOH,EAASG,GAIlB,GAAG9D,EAAExD,UAAYoG,EACf,OAAOe,EAAS,KAAM3D,EAAE5G,SAASwJ,IAIhCzB,EAAII,UAAY,UACjBJ,EAAInI,IAAM,MAGZ,GAAe,OAAZmI,EAAInI,IAEL,OAAOpB,EAAMU,KAAKyL,SAAS,YAoEjC,SAAiBJ,GACf,GAAGxC,EAAIO,MAAM,GAAGG,eAAiB,GAE/B,OADAC,IACO6B,IAGT,IAAI5B,EAAU,GAAKZ,EAAIO,MAAM,GAAGG,eAAkB,EAClDV,EAAI6C,SAASjC,EAAQ,SAAS+B,EAAKG,GACjC,GAAGH,EACD,OAAOH,EAASG,GAElB3C,EAAIa,QAAQiC,GACZnC,IACA6B,GACF,EACF,CAlFQO,CAAQR,EACV,GAIF,IAAIO,EAAQ/J,EAAOiH,EAAInI,IAAKmI,EAAIC,MAChCD,EAAII,WAAa0C,EAAMzH,OACvBwD,EAAEtE,SAASuI,GAGX9C,EAAInI,IAAMoJ,EAAUlI,EAAOiH,EAAInI,IAAK6K,EAAU1C,EAAIC,QAClDD,EAAIC,KAAOiB,EAAWnI,EAAOiH,EAAInI,IAAKmI,EAAIC,OAE1CxJ,EAAMU,KAAK6L,aAAaT,EAC1B,CAlCAA,EAmCF,EASAvC,EAAIyC,aAAe,SAAShB,GAE1B,IAAI1I,EAASiH,EAAID,OAAOhH,OACpB2J,EAAY1C,EAAID,OAAO2C,UACvBzB,EAAYjB,EAAID,OAAOkB,UACvBC,EAAalB,EAAID,OAAOmB,WAO5BlB,EAAInI,IAAM,KAGV,IADA,IAAIgH,EAAIpI,EAAMU,KAAKC,eACbyH,EAAExD,SAAWoG,GAAO,CAErBzB,EAAII,UAAY,UACjBJ,EAAInI,IAAM,MAGG,OAAZmI,EAAInI,KACL4I,IAIF,IAAIqC,EAAQ/J,EAAOiH,EAAInI,IAAKmI,EAAIC,MAChCD,EAAII,WAAa0C,EAAMzH,OACvBwD,EAAEtE,SAASuI,GAGX9C,EAAInI,IAAMoJ,EAAUlI,EAAOiH,EAAInI,IAAK6K,EAAU1C,EAAIC,QAClDD,EAAIC,KAAOiB,EAAWnI,EAAOiH,EAAInI,IAAKmI,EAAIC,MAC5C,CAEA,OAAOpB,EAAE5G,SAASwJ,EACpB,EAuJG/B,GAEDM,EAAI6C,SAAW,SAASjC,EAAQ4B,GAC9B9C,EAAQuD,YAAYrC,EAAQ,SAAS+B,EAAKG,GACxC,GAAGH,EACD,OAAOH,EAASG,GAElBH,EAAS,KAAMM,EAAMI,WACvB,EACF,EAEAlD,EAAIc,aAAe,SAASF,GAC1B,OAAOlB,EAAQuD,YAAYrC,GAAQsC,UACrC,IAEAlD,EAAI6C,SAAW,SAASjC,EAAQ4B,GAC9B,IACEA,EAAS,KAAMrB,EAAgBP,GACjC,CAAE,MAAM7B,GACNyD,EAASzD,EACX,CACF,EACAiB,EAAIc,aAAeK,GAQrBnB,EAAIa,QAAU,SAASiC,GAGrB,IADA,IAAIrB,EAAQqB,EAAMzH,OACVU,EAAI,EAAGA,EAAI0F,IAAS1F,EAC1BiE,EAAIO,MAAMP,EAAIsC,MAAMpH,OAAO4H,EAAMK,OAAOpH,EAAG,IAC3CiE,EAAIsC,KAAqB,KAAbtC,EAAIsC,KAAe,EAAItC,EAAIsC,KAAO,CAElD,EAQAtC,EAAIoD,WAAa,SAASrH,EAAGoC,GAE3B,IADA,IAAI2E,EAAQ,GACJO,EAAI,EAAGA,EAAIlF,EAAGkF,GAAK,EACzBP,GAASQ,OAAOC,aAAcxH,GAAKsH,EAAK,KAE1CrD,EAAIa,QAAQiC,EACd,EAUA9C,EAAIwD,eAAiB,SAASC,GAE5B,GAAGA,IAAWC,KACZ1D,EAAI6C,SAAW,SAASjC,EAAQ4B,GAQ9BkB,KAAKC,iBAAiB,UAPtB,SAASC,EAAS7E,GAChB,IAAI8E,EAAO9E,EAAE8E,KACVA,EAAKpN,OAASoN,EAAKpN,MAAMqJ,OAC1B4D,KAAKI,oBAAoB,UAAWF,GACpCpB,EAASqB,EAAKpN,MAAMqJ,KAAK6C,IAAKkB,EAAKpN,MAAMqJ,KAAKgD,OAElD,GAEAY,KAAKK,YAAY,CAACtN,MAAO,CAACqJ,KAAM,CAACc,OAAQA,KAC3C,MACK,CAWL6C,EAAOE,iBAAiB,UATT,SAAS5E,GACtB,IAAI8E,EAAO9E,EAAE8E,KACVA,EAAKpN,OAASoN,EAAKpN,MAAMqJ,MAC1BE,EAAI6C,SAASgB,EAAKpN,MAAMqJ,KAAKc,OAAQ,SAAS+B,EAAKG,GACjDW,EAAOM,YAAY,CAACtN,MAAO,CAACqJ,KAAM,CAAC6C,IAAKA,EAAKG,MAAOA,KACtD,EAEJ,EAGF,CACF,EAEO9C,CACT,C,iBCxZA,IAAIvJ,EAAQD,EAAQ,IACpBA,EAAQ,MAER,IAAIwN,EAAU,CACZ,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAC1F,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAC1F,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,EAAM,IAAM,IAAM,GAC1F,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,GAAM,IAC1F,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAC1F,GAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAC1F,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,EAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,EAC1F,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,EAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAC1F,EAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAC1F,IAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAAM,IAC1F,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAC1F,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,EAAM,GAAM,GAAM,GAAM,GAAM,IAAM,GAC1F,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,EAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAC1F,IAAM,EAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,EAAM,GAAM,GAAM,IAAM,IAAM,IAC1F,GAAM,GAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAC1F,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,KAGxF/J,EAAI,CAAC,EAAG,EAAG,EAAG,GAYdgK,EAAM,SAASC,EAAMC,GACvB,OAASD,GAAQC,EAAQ,OAAmB,MAAPD,IAAmB,GAAKC,CAC/D,EAYIC,EAAM,SAASF,EAAMC,GACvB,OAAgB,MAAPD,IAAkBC,EAAUD,GAAS,GAAKC,EAAS,KAC9D,EAGA/N,EAAOC,QAAUI,EAAM4N,IAAM5N,EAAM4N,KAAO,CAAC,EAS3C5N,EAAM4N,IAAIC,UAAY,SAASzM,EAAK0M,GAChB,kBAAR1M,IACRA,EAAMpB,EAAMU,KAAKC,aAAaS,IAEhC0M,EAAaA,GAAc,IAG3B,IAKIxI,EALAyI,EAAI3M,EACJ4M,EAAI5M,EAAIwD,SACRqJ,EAAKH,EACLI,EAAKjD,KAAKkD,KAAKF,EAAK,GACpBG,EAAK,MAAc,EAALH,GAGlB,IAAI3I,EAAI0I,EAAG1I,EAAI,IAAKA,IAClByI,EAAEnC,QAAQ2B,EAASQ,EAAExI,GAAGD,EAAI,GAAKyI,EAAExI,GAAGD,EAAI0I,GAAM,MAKlD,IAFAD,EAAEM,MAAM,IAAMH,EAAIX,EAAQQ,EAAExI,GAAG,IAAM2I,GAAME,IAEvC9I,EAAI,IAAM4I,EAAI5I,GAAK,EAAGA,IACxByI,EAAEM,MAAM/I,EAAGiI,EAAQQ,EAAExI,GAAGD,EAAI,GAAKyI,EAAExI,GAAGD,EAAI4I,KAG5C,OAAOH,CACT,EAWA,IAAIhL,EAAe,SAAS3B,EAAKsM,EAAMY,GACrC,IACIC,EAAUC,EACVlJ,EAAGmJ,EAFHC,GAAU,EAAOC,EAAS,KAAMC,EAAU,KAAMC,EAAM,KAEhDC,EAAI,GAId,IADA1N,EAAMpB,EAAM4N,IAAIC,UAAUzM,EAAKsM,GAC3BpI,EAAI,EAAGA,EAAI,GAAIA,IACjBwJ,EAAEC,KAAK3N,EAAI4N,cAGVV,GAMDC,EAAW,SAASU,GAClB,IAAI3J,EAAI,EAAGA,EAAI,EAAGA,IAChB2J,EAAE3J,IAAMwJ,EAAEL,IAAMQ,GAAG3J,EAAI,GAAK,GAAK2J,GAAG3J,EAAI,GAAK,MACxC2J,GAAG3J,EAAI,GAAK,GAAM2J,GAAG3J,EAAI,GAAK,IACnC2J,EAAE3J,GAAKkI,EAAIyB,EAAE3J,GAAI9B,EAAE8B,IACnBmJ,GAEJ,EAOAD,EAAY,SAASS,GACnB,IAAI3J,EAAI,EAAGA,EAAI,EAAGA,IAChB2J,EAAE3J,IAAMwJ,EAAmB,GAAjBG,GAAG3J,EAAI,GAAK,GAE1B,IAOAiJ,EAAW,SAASU,GAClB,IAAI3J,EAAI,EAAGA,GAAK,EAAGA,IACjB2J,EAAE3J,GAAKqI,EAAIsB,EAAE3J,GAAI9B,EAAE8B,IACnB2J,EAAE3J,IAAMwJ,EAAEL,IAAMQ,GAAG3J,EAAI,GAAK,GAAK2J,GAAG3J,EAAI,GAAK,MACxC2J,GAAG3J,EAAI,GAAK,GAAM2J,GAAG3J,EAAI,GAAK,IACnCmJ,GAEJ,EAOAD,EAAY,SAASS,GACnB,IAAI3J,EAAI,EAAGA,GAAK,EAAGA,IACjB2J,EAAE3J,IAAMwJ,EAAmB,GAAjBG,GAAG3J,EAAI,GAAK,GAE1B,GAgBF,IAAI4J,EAAU,SAASC,GACrB,IAAIF,EAAI,GAGR,IAAI3J,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACrB,IAAI8J,EAAMT,EAAOK,aAEN,OAARH,IACEP,EAEDc,GAAOP,EAAIG,aAGXH,EAAIQ,WAAWD,IAInBH,EAAEF,KAAW,MAANK,EACT,CAGAX,EAAIH,EAAU,EAAI,GAGlB,IAAI,IAAIgB,EAAM,EAAGA,EAAMH,EAAKvK,OAAQ0K,IAClC,IAAI,IAAIC,EAAM,EAAGA,EAAMJ,EAAKG,GAAK,GAAIC,IACnCJ,EAAKG,GAAK,GAAGL,GAKjB,IAAI3J,EAAI,EAAGA,EAAI,EAAGA,IACL,OAARuJ,IACEP,EAGDO,EAAIQ,WAAWJ,EAAE3J,IAEjB2J,EAAE3J,IAAMuJ,EAAIG,cAIhBJ,EAAQS,WAAWJ,EAAE3J,GAEzB,EAGIhD,EAAS,KAuGb,OAtGAA,EAAS,CAWPgC,MAAO,SAAS3B,EAAI6B,GACf7B,GAEgB,kBAAPA,IACRA,EAAK3C,EAAMU,KAAKC,aAAagC,IAIjC+L,GAAU,EACVC,EAAS3O,EAAMU,KAAKC,eACpBiO,EAAUpK,GAAU,IAAIxE,EAAMU,KAAKC,aACnCkO,EAAMlM,EAENL,EAAOkC,OAASoK,CAClB,EAOAnK,OAAQ,SAASK,GAMf,IALI4J,GAEFC,EAAOa,UAAU1K,GAGb6J,EAAO/J,UAAY,GACvBsK,EAAQ,CACJ,CAAE,EAAGX,GACL,CAAE,EAAGC,GACL,CAAE,EAAGD,GACL,CAAE,EAAGC,GACL,CAAE,EAAGD,IAGb,EAUA7J,OAAQ,SAAS+K,GACf,IAAIhM,GAAO,EAEX,GAAG6K,EACD,GAAGmB,EACDhM,EAAOgM,EAAI,EAAGd,GAASL,OAClB,CAGL,IAAItJ,EAA+B,IAApB2J,EAAO/J,SAAkB,EAAK,EAAI+J,EAAO/J,SACxD+J,EAAO1J,aAAaD,EAASA,EAC/B,CASF,GANGvB,IAEDiL,GAAU,EACVpM,EAAOmC,WAGL6J,IAEF7K,EAA4B,IAApBkL,EAAO/J,UAEb,GAAG6K,EACDhM,EAAOgM,EAAI,EAAGb,GAAUN,OACnB,CAEL,IAAInJ,EAAMyJ,EAAQhK,SACdoG,EAAQ4D,EAAQrJ,GAAGJ,EAAM,GAE1B6F,EAAQ7F,EACT1B,GAAO,EAGPmL,EAAQpJ,SAASwF,EAErB,CAIJ,OAAOvH,CACT,EAIJ,EAgBAzD,EAAM4N,IAAI8B,gBAAkB,SAAStO,EAAKuB,EAAI6B,GAC5C,IAAIlC,EAAStC,EAAM4N,IAAI+B,uBAAuBvO,EAAK,KAEnD,OADAkB,EAAOgC,MAAM3B,EAAI6B,GACVlC,CACT,EAeAtC,EAAM4N,IAAI+B,uBAAyB,SAASvO,EAAKsM,GAC/C,OAAO3K,EAAa3B,EAAKsM,GAAM,EACjC,EAgBA1N,EAAM4N,IAAIgC,gBAAkB,SAASxO,EAAKuB,EAAI6B,GAC5C,IAAIlC,EAAStC,EAAM4N,IAAIiC,uBAAuBzO,EAAK,KAEnD,OADAkB,EAAOgC,MAAM3B,EAAI6B,GACVlC,CACT,EAeAtC,EAAM4N,IAAIiC,uBAAyB,SAASzO,EAAKsM,GAC/C,OAAO3K,EAAa3B,EAAKsM,GAAM,EACjC,C,iBClZA,IAAI1N,EAAQD,EAAQ,IACpBA,EAAQ,MAERC,EAAMsC,OAAStC,EAAMsC,QAAU,CAAC,EAGhC,IAAIwN,EAAQnQ,EAAOC,QAAUI,EAAMsC,OAAOwN,MAAQ9P,EAAMsC,OAAOwN,OAAS,CAAC,EA+6BzE,SAASC,EAAYpN,EAAIkC,GAMvB,GALiB,kBAAPlC,IAERA,EAAK3C,EAAMU,KAAKC,aAAagC,IAG5B3C,EAAMU,KAAKsP,QAAQrN,IAAOA,EAAGiC,OAAS,EAAG,CAE1C,IAAIqL,EAAMtN,EACVA,EAAK3C,EAAMU,KAAKC,eAChB,IAAI,IAAI2E,EAAI,EAAGA,EAAI2K,EAAIrL,SAAUU,EAC/B3C,EAAGiJ,QAAQqE,EAAI3K,GAEnB,CAEA,GAAG3C,EAAGiC,SAAWC,EACf,MAAM,IAAIpE,MACR,0BAA4BkC,EAAGiC,SAC/B,uBAAyBC,EAAY,WAGzC,IAAI7E,EAAMU,KAAKsP,QAAQrN,GAAK,CAE1B,IAAIuN,EAAO,GACPC,EAAStL,EAAY,EACzB,IAAQS,EAAI,EAAGA,EAAI6K,IAAU7K,EAC3B4K,EAAKnB,KAAKpM,EAAGyN,YAEfzN,EAAKuN,CACP,CAEA,OAAOvN,CACT,CAEA,SAAS0N,EAAM5J,GAEbA,EAAMA,EAAM7B,OAAS,GAAM6B,EAAMA,EAAM7B,OAAS,GAAK,EAAK,UAC5D,CAEA,SAAS0L,EAAWC,GAElB,MAAO,CAAEA,EAAM,WAAe,EAAS,WAANA,EACnC,CAr9BAT,EAAMU,IAAM,SAAS3Q,GACnBA,EAAUA,GAAW,CAAC,EACtB4Q,KAAKvK,KAAO,MACZuK,KAAKnO,OAASzC,EAAQyC,OACtBmO,KAAK5L,UAAYhF,EAAQgF,WAAa,GACtC4L,KAAKC,MAAQD,KAAK5L,UAAY,EAC9B4L,KAAKE,SAAW,IAAI5G,MAAM0G,KAAKC,OAC/BD,KAAKG,UAAY,IAAI7G,MAAM0G,KAAKC,MAClC,EAEAZ,EAAMU,IAAIhJ,UAAUlD,MAAQ,SAASzE,GAAU,EAE/CiQ,EAAMU,IAAIhJ,UAAU8G,QAAU,SAASxJ,EAAON,EAAQE,GAEpD,GAAGI,EAAMF,SAAW6L,KAAK5L,aAAeH,GAAUI,EAAMF,SAAW,GACjE,OAAO,EAIT,IAAI,IAAIU,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKE,SAASrL,GAAKR,EAAMsL,WAI3BK,KAAKnO,OAAOgM,QAAQmC,KAAKE,SAAUF,KAAKG,WAGxC,IAAQtL,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/Bd,EAAO+G,SAASkF,KAAKG,UAAUtL,GAEnC,EAEAwK,EAAMU,IAAIhJ,UAAUzC,QAAU,SAASD,EAAON,EAAQE,GAEpD,GAAGI,EAAMF,SAAW6L,KAAK5L,aAAeH,GAAUI,EAAMF,SAAW,GACjE,OAAO,EAIT,IAAI,IAAIU,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKE,SAASrL,GAAKR,EAAMsL,WAI3BK,KAAKnO,OAAOyC,QAAQ0L,KAAKE,SAAUF,KAAKG,WAGxC,IAAQtL,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/Bd,EAAO+G,SAASkF,KAAKG,UAAUtL,GAEnC,EAEAwK,EAAMU,IAAIhJ,UAAUiI,IAAM,SAAS3K,EAAOjF,GAGxC,IAAImF,EAAWF,EAAMF,WAAa6L,KAAK5L,UACrC4L,KAAK5L,UAAa4L,KAAK5L,UAAYC,EAAMF,SAE3C,OADAE,EAAMG,aAAaD,EAASA,IACrB,CACT,EAEA8K,EAAMU,IAAIhJ,UAAUqJ,MAAQ,SAASrM,EAAQ3E,GAE3C,GAAGA,EAAQiR,SAAW,EACpB,OAAO,EAIT,IAAI3L,EAAMX,EAAOI,SACboG,EAAQxG,EAAOe,GAAGJ,EAAM,GAC5B,QAAG6F,EAASyF,KAAK5L,WAAa,KAK9BL,EAAOgB,SAASwF,IACT,EACT,EAIA8E,EAAMiB,IAAM,SAASlR,GACnBA,EAAUA,GAAW,CAAC,EACtB4Q,KAAKvK,KAAO,MACZuK,KAAKnO,OAASzC,EAAQyC,OACtBmO,KAAK5L,UAAYhF,EAAQgF,WAAa,GACtC4L,KAAKC,MAAQD,KAAK5L,UAAY,EAC9B4L,KAAKE,SAAW,IAAI5G,MAAM0G,KAAKC,OAC/BD,KAAKG,UAAY,IAAI7G,MAAM0G,KAAKC,MAClC,EAEAZ,EAAMiB,IAAIvJ,UAAUlD,MAAQ,SAASzE,GAGnC,GAAkB,OAAfA,EAAQ8C,GAAa,CAEtB,IAAI8N,KAAKO,MACP,MAAM,IAAIvQ,MAAM,yBAElBgQ,KAAK5B,IAAM4B,KAAKO,MAAMC,MAAM,EAC9B,KAAO,MAAK,OAAQpR,GAClB,MAAM,IAAIY,MAAM,yBAGhBgQ,KAAK5B,IAAMkB,EAAYlQ,EAAQ8C,GAAI8N,KAAK5L,WACxC4L,KAAKO,MAAQP,KAAK5B,IAAIoC,MAAM,EAC9B,CACF,EAEAnB,EAAMiB,IAAIvJ,UAAU8G,QAAU,SAASxJ,EAAON,EAAQE,GAEpD,GAAGI,EAAMF,SAAW6L,KAAK5L,aAAeH,GAAUI,EAAMF,SAAW,GACjE,OAAO,EAKT,IAAI,IAAIU,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKE,SAASrL,GAAKmL,KAAKO,MAAM1L,GAAKR,EAAMsL,WAI3CK,KAAKnO,OAAOgM,QAAQmC,KAAKE,SAAUF,KAAKG,WAGxC,IAAQtL,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/Bd,EAAO+G,SAASkF,KAAKG,UAAUtL,IAEjCmL,KAAKO,MAAQP,KAAKG,SACpB,EAEAd,EAAMiB,IAAIvJ,UAAUzC,QAAU,SAASD,EAAON,EAAQE,GAEpD,GAAGI,EAAMF,SAAW6L,KAAK5L,aAAeH,GAAUI,EAAMF,SAAW,GACjE,OAAO,EAIT,IAAI,IAAIU,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKE,SAASrL,GAAKR,EAAMsL,WAI3BK,KAAKnO,OAAOyC,QAAQ0L,KAAKE,SAAUF,KAAKG,WAIxC,IAAQtL,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/Bd,EAAO+G,SAASkF,KAAKO,MAAM1L,GAAKmL,KAAKG,UAAUtL,IAEjDmL,KAAKO,MAAQP,KAAKE,SAASM,MAAM,EACnC,EAEAnB,EAAMiB,IAAIvJ,UAAUiI,IAAM,SAAS3K,EAAOjF,GAGxC,IAAImF,EAAWF,EAAMF,WAAa6L,KAAK5L,UACrC4L,KAAK5L,UAAa4L,KAAK5L,UAAYC,EAAMF,SAE3C,OADAE,EAAMG,aAAaD,EAASA,IACrB,CACT,EAEA8K,EAAMiB,IAAIvJ,UAAUqJ,MAAQ,SAASrM,EAAQ3E,GAE3C,GAAGA,EAAQiR,SAAW,EACpB,OAAO,EAIT,IAAI3L,EAAMX,EAAOI,SACboG,EAAQxG,EAAOe,GAAGJ,EAAM,GAC5B,QAAG6F,EAASyF,KAAK5L,WAAa,KAK9BL,EAAOgB,SAASwF,IACT,EACT,EAIA8E,EAAMoB,IAAM,SAASrR,GACnBA,EAAUA,GAAW,CAAC,EACtB4Q,KAAKvK,KAAO,MACZuK,KAAKnO,OAASzC,EAAQyC,OACtBmO,KAAK5L,UAAYhF,EAAQgF,WAAa,GACtC4L,KAAKC,MAAQD,KAAK5L,UAAY,EAC9B4L,KAAKE,SAAW,KAChBF,KAAKG,UAAY,IAAI7G,MAAM0G,KAAKC,OAChCD,KAAKU,cAAgB,IAAIpH,MAAM0G,KAAKC,OACpCD,KAAKW,eAAiBpR,EAAMU,KAAKC,eACjC8P,KAAKY,cAAgB,CACvB,EAEAvB,EAAMoB,IAAI1J,UAAUlD,MAAQ,SAASzE,GACnC,KAAK,OAAQA,GACX,MAAM,IAAIY,MAAM,yBAGlBgQ,KAAK5B,IAAMkB,EAAYlQ,EAAQ8C,GAAI8N,KAAK5L,WACxC4L,KAAKE,SAAWF,KAAK5B,IAAIoC,MAAM,GAC/BR,KAAKY,cAAgB,CACvB,EAEAvB,EAAMoB,IAAI1J,UAAU8G,QAAU,SAASxJ,EAAON,EAAQE,GAEpD,IAAI4M,EAAcxM,EAAMF,SACxB,GAAmB,IAAhB0M,EACD,OAAO,EAOT,GAHAb,KAAKnO,OAAOgM,QAAQmC,KAAKE,SAAUF,KAAKG,WAGd,IAAvBH,KAAKY,eAAuBC,GAAeb,KAAK5L,UAEjD,IAAI,IAAIS,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKE,SAASrL,GAAKR,EAAMsL,WAAaK,KAAKG,UAAUtL,GACrDd,EAAO+G,SAASkF,KAAKE,SAASrL,QAJlC,CAUA,IAAIiM,GAAgBd,KAAK5L,UAAYyM,GAAeb,KAAK5L,UACtD0M,EAAe,IAChBA,EAAed,KAAK5L,UAAY0M,GAIlCd,KAAKW,eAAeI,QACpB,IAAQlM,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKU,cAAc7L,GAAKR,EAAMsL,WAAaK,KAAKG,UAAUtL,GAC1DmL,KAAKW,eAAe7F,SAASkF,KAAKU,cAAc7L,IAGlD,GAAGiM,EAAe,EAEhBzM,EAAM3C,MAAQsO,KAAK5L,eAGnB,IAAQS,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKE,SAASrL,GAAKmL,KAAKU,cAAc7L,GAS1C,GAJGmL,KAAKY,cAAgB,GACtBZ,KAAKW,eAAe5P,SAASiP,KAAKY,eAGjCE,EAAe,IAAM7M,EAItB,OAHAF,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC+P,EAAed,KAAKY,gBACtBZ,KAAKY,cAAgBE,GACd,EAGT/M,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC8P,EAAcb,KAAKY,gBACrBZ,KAAKY,cAAgB,CAvCrB,CAwCF,EAEAvB,EAAMoB,IAAI1J,UAAUzC,QAAU,SAASD,EAAON,EAAQE,GAEpD,IAAI4M,EAAcxM,EAAMF,SACxB,GAAmB,IAAhB0M,EACD,OAAO,EAOT,GAHAb,KAAKnO,OAAOgM,QAAQmC,KAAKE,SAAUF,KAAKG,WAGd,IAAvBH,KAAKY,eAAuBC,GAAeb,KAAK5L,UAEjD,IAAI,IAAIS,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKE,SAASrL,GAAKR,EAAMsL,WACzB5L,EAAO+G,SAASkF,KAAKE,SAASrL,GAAKmL,KAAKG,UAAUtL,QAJtD,CAUA,IAAIiM,GAAgBd,KAAK5L,UAAYyM,GAAeb,KAAK5L,UACtD0M,EAAe,IAChBA,EAAed,KAAK5L,UAAY0M,GAIlCd,KAAKW,eAAeI,QACpB,IAAQlM,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKU,cAAc7L,GAAKR,EAAMsL,WAC9BK,KAAKW,eAAe7F,SAASkF,KAAKU,cAAc7L,GAAKmL,KAAKG,UAAUtL,IAGtE,GAAGiM,EAAe,EAEhBzM,EAAM3C,MAAQsO,KAAK5L,eAGnB,IAAQS,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKE,SAASrL,GAAKmL,KAAKU,cAAc7L,GAS1C,GAJGmL,KAAKY,cAAgB,GACtBZ,KAAKW,eAAe5P,SAASiP,KAAKY,eAGjCE,EAAe,IAAM7M,EAItB,OAHAF,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC+P,EAAed,KAAKY,gBACtBZ,KAAKY,cAAgBE,GACd,EAGT/M,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC8P,EAAcb,KAAKY,gBACrBZ,KAAKY,cAAgB,CAvCrB,CAwCF,EAIAvB,EAAM2B,IAAM,SAAS5R,GACnBA,EAAUA,GAAW,CAAC,EACtB4Q,KAAKvK,KAAO,MACZuK,KAAKnO,OAASzC,EAAQyC,OACtBmO,KAAK5L,UAAYhF,EAAQgF,WAAa,GACtC4L,KAAKC,MAAQD,KAAK5L,UAAY,EAC9B4L,KAAKE,SAAW,KAChBF,KAAKG,UAAY,IAAI7G,MAAM0G,KAAKC,OAChCD,KAAKW,eAAiBpR,EAAMU,KAAKC,eACjC8P,KAAKY,cAAgB,CACvB,EAEAvB,EAAM2B,IAAIjK,UAAUlD,MAAQ,SAASzE,GACnC,KAAK,OAAQA,GACX,MAAM,IAAIY,MAAM,yBAGlBgQ,KAAK5B,IAAMkB,EAAYlQ,EAAQ8C,GAAI8N,KAAK5L,WACxC4L,KAAKE,SAAWF,KAAK5B,IAAIoC,MAAM,GAC/BR,KAAKY,cAAgB,CACvB,EAEAvB,EAAM2B,IAAIjK,UAAU8G,QAAU,SAASxJ,EAAON,EAAQE,GAEpD,IAAI4M,EAAcxM,EAAMF,SACxB,GAAsB,IAAnBE,EAAMF,SACP,OAAO,EAOT,GAHA6L,KAAKnO,OAAOgM,QAAQmC,KAAKE,SAAUF,KAAKG,WAGd,IAAvBH,KAAKY,eAAuBC,GAAeb,KAAK5L,UAEjD,IAAI,IAAIS,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/Bd,EAAO+G,SAASzG,EAAMsL,WAAaK,KAAKG,UAAUtL,IAClDmL,KAAKE,SAASrL,GAAKmL,KAAKG,UAAUtL,OAJtC,CAUA,IAAIiM,GAAgBd,KAAK5L,UAAYyM,GAAeb,KAAK5L,UACtD0M,EAAe,IAChBA,EAAed,KAAK5L,UAAY0M,GAIlCd,KAAKW,eAAeI,QACpB,IAAQlM,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKW,eAAe7F,SAASzG,EAAMsL,WAAaK,KAAKG,UAAUtL,IAGjE,GAAGiM,EAAe,EAEhBzM,EAAM3C,MAAQsO,KAAK5L,eAGnB,IAAQS,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKE,SAASrL,GAAKmL,KAAKG,UAAUtL,GAStC,GAJGmL,KAAKY,cAAgB,GACtBZ,KAAKW,eAAe5P,SAASiP,KAAKY,eAGjCE,EAAe,IAAM7M,EAItB,OAHAF,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC+P,EAAed,KAAKY,gBACtBZ,KAAKY,cAAgBE,GACd,EAGT/M,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC8P,EAAcb,KAAKY,gBACrBZ,KAAKY,cAAgB,CAtCrB,CAuCF,EAEAvB,EAAM2B,IAAIjK,UAAUzC,QAAU+K,EAAM2B,IAAIjK,UAAU8G,QAIlDwB,EAAMP,IAAM,SAAS1P,GACnBA,EAAUA,GAAW,CAAC,EACtB4Q,KAAKvK,KAAO,MACZuK,KAAKnO,OAASzC,EAAQyC,OACtBmO,KAAK5L,UAAYhF,EAAQgF,WAAa,GACtC4L,KAAKC,MAAQD,KAAK5L,UAAY,EAC9B4L,KAAKE,SAAW,KAChBF,KAAKG,UAAY,IAAI7G,MAAM0G,KAAKC,OAChCD,KAAKW,eAAiBpR,EAAMU,KAAKC,eACjC8P,KAAKY,cAAgB,CACvB,EAEAvB,EAAMP,IAAI/H,UAAUlD,MAAQ,SAASzE,GACnC,KAAK,OAAQA,GACX,MAAM,IAAIY,MAAM,yBAGlBgQ,KAAK5B,IAAMkB,EAAYlQ,EAAQ8C,GAAI8N,KAAK5L,WACxC4L,KAAKE,SAAWF,KAAK5B,IAAIoC,MAAM,GAC/BR,KAAKY,cAAgB,CACvB,EAEAvB,EAAMP,IAAI/H,UAAU8G,QAAU,SAASxJ,EAAON,EAAQE,GAEpD,IAAI4M,EAAcxM,EAAMF,SACxB,GAAmB,IAAhB0M,EACD,OAAO,EAOT,GAHAb,KAAKnO,OAAOgM,QAAQmC,KAAKE,SAAUF,KAAKG,WAGd,IAAvBH,KAAKY,eAAuBC,GAAeb,KAAK5L,UAEjD,IAAI,IAAIS,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/Bd,EAAO+G,SAASzG,EAAMsL,WAAaK,KAAKG,UAAUtL,QAE/C,CAEL,IAAIiM,GAAgBd,KAAK5L,UAAYyM,GAAeb,KAAK5L,UACtD0M,EAAe,IAChBA,EAAed,KAAK5L,UAAY0M,GAIlCd,KAAKW,eAAeI,QACpB,IAAQlM,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKW,eAAe7F,SAASzG,EAAMsL,WAAaK,KAAKG,UAAUtL,IAajE,GAVGiM,EAAe,IAEhBzM,EAAM3C,MAAQsO,KAAK5L,WAIlB4L,KAAKY,cAAgB,GACtBZ,KAAKW,eAAe5P,SAASiP,KAAKY,eAGjCE,EAAe,IAAM7M,EAItB,OAHAF,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC+P,EAAed,KAAKY,gBACtBZ,KAAKY,cAAgBE,GACd,EAGT/M,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC8P,EAAcb,KAAKY,gBACrBZ,KAAKY,cAAgB,CACvB,CAGAhB,EAAMI,KAAKE,SACb,EAEAb,EAAMP,IAAI/H,UAAUzC,QAAU+K,EAAMP,IAAI/H,UAAU8G,QAIlDwB,EAAM4B,IAAM,SAAS7R,GACnBA,EAAUA,GAAW,CAAC,EACtB4Q,KAAKvK,KAAO,MACZuK,KAAKnO,OAASzC,EAAQyC,OACtBmO,KAAK5L,UAAYhF,EAAQgF,WAAa,GACtC4L,KAAKC,MAAQD,KAAK5L,UAAY,EAC9B4L,KAAKE,SAAW,IAAI5G,MAAM0G,KAAKC,OAC/BD,KAAKG,UAAY,IAAI7G,MAAM0G,KAAKC,OAChCD,KAAKW,eAAiBpR,EAAMU,KAAKC,eACjC8P,KAAKY,cAAgB,EAKrBZ,KAAKkB,GAAK,UACZ,EAEA7B,EAAM4B,IAAIlK,UAAUlD,MAAQ,SAASzE,GACnC,KAAK,OAAQA,GACX,MAAM,IAAIY,MAAM,yBAGlB,IAMImR,EANAjP,EAAK3C,EAAMU,KAAKC,aAAad,EAAQ8C,IAsBzC,GAnBA8N,KAAKoB,cAAgB,EAKnBD,EADC,mBAAoB/R,EACJG,EAAMU,KAAKC,aAAad,EAAQ+R,gBAEhC5R,EAAMU,KAAKC,eAK5B8P,KAAKqB,WADJ,cAAejS,EACEA,EAAQkS,UAER,IAIpBtB,KAAKuB,KAAO,KACTnS,EAAQkF,UAET0L,KAAKuB,KAAOhS,EAAMU,KAAKC,aAAad,EAAQoS,KAAKzQ,WAC9CiP,KAAKuB,KAAKpN,SAAY6L,KAAKqB,WAAa,GACzC,MAAM,IAAIrR,MAAM,iDAKpBgQ,KAAKyB,WAAa,IAAInI,MAAM0G,KAAKC,OAGjCD,KAAKwB,IAAM,KAIXxB,KAAK0B,YAAc,IAAIpI,MAAM0G,KAAKC,OAClCD,KAAKnO,OAAOgM,QAAQ,CAAC,EAAG,EAAG,EAAG,GAAImC,KAAK0B,aAMvC1B,KAAK2B,cAAgB,EACrB3B,KAAK4B,GAAK5B,KAAK6B,kBAAkB7B,KAAK0B,YAAa1B,KAAK2B,eAKxD,IAAIG,EAAW5P,EAAGiC,SAClB,GAAgB,KAAb2N,EAED9B,KAAK+B,IAAM,CAAC7P,EAAGyN,WAAYzN,EAAGyN,WAAYzN,EAAGyN,WAAY,OACpD,CAGL,IADAK,KAAK+B,IAAM,CAAC,EAAG,EAAG,EAAG,GACf7P,EAAGiC,SAAW,GAClB6L,KAAK+B,IAAM/B,KAAKgC,MACdhC,KAAK0B,YAAa1B,KAAK+B,IACvB,CAAC7P,EAAGyN,WAAYzN,EAAGyN,WAAYzN,EAAGyN,WAAYzN,EAAGyN,aAErDK,KAAK+B,IAAM/B,KAAKgC,MACdhC,KAAK0B,YAAa1B,KAAK+B,IAAK,CAAC,EAAG,GAAGE,OAAOpC,EAAsB,EAAXiC,IACzD,CAGA9B,KAAKE,SAAWF,KAAK+B,IAAIvB,MAAM,GAC/BZ,EAAMI,KAAKE,UACXF,KAAKY,cAAgB,EAGrBO,EAAiB5R,EAAMU,KAAKC,aAAaiR,GAEzCnB,KAAKkC,aAAerC,EAAqC,EAA1BsB,EAAehN,UAE9C,IAAIkM,EAAWc,EAAehN,SAAW6L,KAAK5L,UAK9C,IAJGiM,GACDc,EAAe3M,aAAa,EAAGwL,KAAK5L,UAAYiM,GAElDL,KAAKmC,GAAK,CAAC,EAAG,EAAG,EAAG,GACdhB,EAAehN,SAAW,GAC9B6L,KAAKmC,GAAKnC,KAAKgC,MAAMhC,KAAK0B,YAAa1B,KAAKmC,GAAI,CAC9ChB,EAAexB,WACfwB,EAAexB,WACfwB,EAAexB,WACfwB,EAAexB,YAGrB,EAEAN,EAAM4B,IAAIlK,UAAU8G,QAAU,SAASxJ,EAAON,EAAQE,GAEpD,IAAI4M,EAAcxM,EAAMF,SACxB,GAAmB,IAAhB0M,EACD,OAAO,EAOT,GAHAb,KAAKnO,OAAOgM,QAAQmC,KAAKE,SAAUF,KAAKG,WAGd,IAAvBH,KAAKY,eAAuBC,GAAeb,KAAK5L,UAAW,CAE5D,IAAI,IAAIS,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/Bd,EAAO+G,SAASkF,KAAKG,UAAUtL,IAAMR,EAAMsL,YAE7CK,KAAKoB,eAAiBpB,KAAK5L,SAC7B,KAAO,CAEL,IAAI0M,GAAgBd,KAAK5L,UAAYyM,GAAeb,KAAK5L,UACtD0M,EAAe,IAChBA,EAAed,KAAK5L,UAAY0M,GAIlCd,KAAKW,eAAeI,QACpB,IAAQlM,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKW,eAAe7F,SAASzG,EAAMsL,WAAaK,KAAKG,UAAUtL,IAGjE,GAAGiM,GAAgB,GAAK7M,EAAQ,CAE9B,GAAGA,EAAQ,CAET,IAAIoM,EAAWQ,EAAcb,KAAK5L,UAClC4L,KAAKoB,eAAiBf,EAEtBL,KAAKW,eAAe5L,SAASiL,KAAK5L,UAAYiM,EAChD,MACEL,KAAKoB,eAAiBpB,KAAK5L,UAI7B,IAAQS,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKG,UAAUtL,GAAKmL,KAAKW,eAAehB,WAE1CK,KAAKW,eAAejP,MAAQsO,KAAK5L,SACnC,CAOA,GAJG4L,KAAKY,cAAgB,GACtBZ,KAAKW,eAAe5P,SAASiP,KAAKY,eAGjCE,EAAe,IAAM7M,EAOtB,OAJAI,EAAM3C,MAAQsO,KAAK5L,UACnBL,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC+P,EAAed,KAAKY,gBACtBZ,KAAKY,cAAgBE,GACd,EAGT/M,EAAOV,SAAS2M,KAAKW,eAAe5P,SAClC8P,EAAcb,KAAKY,gBACrBZ,KAAKY,cAAgB,CACvB,CAGAZ,KAAKmC,GAAKnC,KAAKgC,MAAMhC,KAAK0B,YAAa1B,KAAKmC,GAAInC,KAAKG,WAGrDP,EAAMI,KAAKE,SACb,EAEAb,EAAM4B,IAAIlK,UAAUzC,QAAU,SAASD,EAAON,EAAQE,GAEpD,IAAI4M,EAAcxM,EAAMF,SACxB,GAAG0M,EAAcb,KAAK5L,aAAeH,GAAU4M,EAAc,GAC3D,OAAO,EAITb,KAAKnO,OAAOgM,QAAQmC,KAAKE,SAAUF,KAAKG,WAGxCP,EAAMI,KAAKE,UAGXF,KAAKyB,WAAW,GAAKpN,EAAMsL,WAC3BK,KAAKyB,WAAW,GAAKpN,EAAMsL,WAC3BK,KAAKyB,WAAW,GAAKpN,EAAMsL,WAC3BK,KAAKyB,WAAW,GAAKpN,EAAMsL,WAC3BK,KAAKmC,GAAKnC,KAAKgC,MAAMhC,KAAK0B,YAAa1B,KAAKmC,GAAInC,KAAKyB,YAGrD,IAAI,IAAI5M,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/Bd,EAAO+G,SAASkF,KAAKG,UAAUtL,GAAKmL,KAAKyB,WAAW5M,IAInDgM,EAAcb,KAAK5L,UACpB4L,KAAKoB,eAAiBP,EAAcb,KAAK5L,UAEzC4L,KAAKoB,eAAiBpB,KAAK5L,SAE/B,EAEAiL,EAAM4B,IAAIlK,UAAUqL,YAAc,SAASrO,EAAQ3E,GACjD,IAAI4D,GAAO,EAGR5D,EAAQkF,SAAWlF,EAAQiR,UAC5BtM,EAAOgB,SAASiL,KAAK5L,UAAYhF,EAAQiR,UAI3CL,KAAKwB,IAAMjS,EAAMU,KAAKC,eAGtB,IAAImS,EAAUrC,KAAKkC,aAAaD,OAAOpC,EAAgC,EAArBG,KAAKoB,gBAGvDpB,KAAKmC,GAAKnC,KAAKgC,MAAMhC,KAAK0B,YAAa1B,KAAKmC,GAAIE,GAGhD,IAAIb,EAAM,GACVxB,KAAKnO,OAAOgM,QAAQmC,KAAK+B,IAAKP,GAC9B,IAAI,IAAI3M,EAAI,EAAGA,EAAImL,KAAKC,QAASpL,EAC/BmL,KAAKwB,IAAI1G,SAASkF,KAAKmC,GAAGtN,GAAK2M,EAAI3M,IAWrC,OAPAmL,KAAKwB,IAAIzM,SAASiL,KAAKwB,IAAIrN,UAAY6L,KAAKqB,WAAa,IAGtDjS,EAAQkF,SAAW0L,KAAKwB,IAAI5F,UAAYoE,KAAKuB,OAC9CvO,GAAO,GAGFA,CACT,EA2BAqM,EAAM4B,IAAIlK,UAAUuL,SAAW,SAASnG,EAAGoG,GAKzC,IAJA,IAAIC,EAAM,CAAC,EAAG,EAAG,EAAG,GAChBC,EAAMF,EAAE/B,MAAM,GAGV3L,EAAI,EAAGA,EAAI,MAAOA,EAAG,CAIjBsH,EAAGtH,EAAI,GAAM,GAAM,GAAM,GAAKA,EAAI,KAE1C2N,EAAI,IAAMC,EAAI,GACdD,EAAI,IAAMC,EAAI,GACdD,EAAI,IAAMC,EAAI,GACdD,EAAI,IAAMC,EAAI,IAKhBzC,KAAK0C,IAAID,EAAKA,EAChB,CAEA,OAAOD,CACT,EAEAnD,EAAM4B,IAAIlK,UAAU2L,IAAM,SAASvG,EAAGwG,GASpC,IANA,IAAIC,EAAa,EAAPzG,EAAE,GAMJtH,EAAI,EAAGA,EAAI,IAAKA,EACtB8N,EAAI9N,GAAMsH,EAAEtH,KAAO,GAAkB,EAAXsH,EAAEtH,EAAI,KAAW,GAG7C8N,EAAI,GAAKxG,EAAE,KAAO,EAKfyG,IACDD,EAAI,IAAM3C,KAAKkB,GAEnB,EAEA7B,EAAM4B,IAAIlK,UAAU8L,cAAgB,SAAS1G,GAG3C,IADA,IAAI2G,EAAI,CAAC,EAAG,EAAG,EAAG,GACVjO,EAAI,EAAGA,EAAI,KAAMA,EAAG,CAC1B,IACIkO,EAAO5G,EADAtH,EAAI,EAAK,KACmB,GAAf,EAAKA,EAAI,GAAY,GACzCmO,EAAKhD,KAAK4B,GAAG/M,GAAGkO,GACpBD,EAAE,IAAME,EAAG,GACXF,EAAE,IAAME,EAAG,GACXF,EAAE,IAAME,EAAG,GACXF,EAAE,IAAME,EAAG,EACb,CACA,OAAOF,CACT,EAaAzD,EAAM4B,IAAIlK,UAAUiL,MAAQ,SAASlK,EAAGyK,EAAGpG,GAKzC,OAJAoG,EAAE,IAAMpG,EAAE,GACVoG,EAAE,IAAMpG,EAAE,GACVoG,EAAE,IAAMpG,EAAE,GACVoG,EAAE,IAAMpG,EAAE,GACH6D,KAAK6C,cAAcN,EAE5B,EAiBAlD,EAAM4B,IAAIlK,UAAU8K,kBAAoB,SAAS/J,EAAGmF,GAQlD,IAJA,IAAIgG,EAAa,EAAIhG,EACjBiG,EAAS,EAAID,EACbE,EAAO,GAAKF,EACZpM,EAAI,IAAIyC,MAAM6J,GACVtO,EAAI,EAAGA,EAAIsO,IAAQtO,EAAG,CAC5B,IAAI2K,EAAM,CAAC,EAAG,EAAG,EAAG,GAEhB4D,GAASF,EAAS,EAAKrO,EAAIqO,GAAWjG,EAC1CuC,EAFW3K,EAAIqO,EAAU,GAEb,GAAMjG,EAAO,GAAOmG,EAChCvM,EAAEhC,GAAKmL,KAAKqD,qBAAqBrD,KAAKsC,SAAS9C,EAAK1H,GAAImF,EAC1D,CACA,OAAOpG,CACT,EASAwI,EAAM4B,IAAIlK,UAAUsM,qBAAuB,SAASC,EAAKrG,GAIvD,IAAIkG,EAAO,GAAKlG,EACZsG,EAAOJ,IAAS,EAChBtM,EAAI,IAAIyC,MAAM6J,GAClBtM,EAAE0M,GAAQD,EAAI9C,MAAM,GAEpB,IADA,IAAI3L,EAAI0O,IAAS,EACX1O,EAAI,GAERmL,KAAK0C,IAAI7L,EAAE,EAAIhC,GAAIgC,EAAEhC,GAAK,IAC1BA,IAAM,EAGR,IADAA,EAAI,EACEA,EAAI0O,GAAM,CACd,IAAI,IAAIvF,EAAI,EAAGA,EAAInJ,IAAKmJ,EAAG,CACzB,IAAIwF,EAAM3M,EAAEhC,GACR4O,EAAM5M,EAAEmH,GACZnH,EAAEhC,EAAImJ,GAAK,CACTwF,EAAI,GAAKC,EAAI,GACbD,EAAI,GAAKC,EAAI,GACbD,EAAI,GAAKC,EAAI,GACbD,EAAI,GAAKC,EAAI,GAEjB,CACA5O,GAAK,CACP,CAIA,IAHAgC,EAAE,GAAK,CAAC,EAAG,EAAG,EAAG,GAGbhC,EAAI0O,EAAO,EAAG1O,EAAIsO,IAAQtO,EAAG,CAC/B,IAAIxD,EAAIwF,EAAEhC,EAAI0O,GACd1M,EAAEhC,GAAK,CAACyO,EAAI,GAAKjS,EAAE,GAAIiS,EAAI,GAAKjS,EAAE,GAAIiS,EAAI,GAAKjS,EAAE,GAAIiS,EAAI,GAAKjS,EAAE,GAClE,CACA,OAAOwF,CACT,C,iBC/6BA,IAAItH,EAAQD,EAAQ,IACpBA,EAAQ,MAERC,EAAMmU,IAAMnU,EAAMmU,KAAO,CAAC,GACfxU,EAAOC,QAAUI,EAAMmU,IAAIC,KAAOpU,EAAMoU,KAAOpU,EAAMoU,MAAQ,CAAC,GASpEvO,OAAS,SAASgE,GAiCrB,MAhCU,CAQRiC,SAAU,SAAStC,EAAM6K,GAMvB,IAJA,IAAIC,EAAI,IAAItU,EAAMU,KAAK6T,WAGnBpP,EAAM8F,KAAKkD,KAAKkG,EAAUxK,EAAG2K,cACzBlP,EAAI,EAAGA,EAAIH,EAAKG,IAAK,CAE3B,IAAIxD,EAAI,IAAI9B,EAAMU,KAAK6T,WACvBzS,EAAEyJ,SAASjG,GAIXuE,EAAGvF,QACHuF,EAAGpF,OAAO+E,EAAO1H,EAAEN,YACnB8S,EAAE9E,UAAU3F,EAAG/D,SACjB,CAIA,OADAwO,EAAE9O,SAAS8O,EAAE1P,SAAWyP,GACjBC,EAAE9S,UACX,EAIJ,C,iBCjDA,IAAIxB,EAAQD,EAAQ,IACpBA,EAAQ,MAGRJ,EAAOC,QAAUI,EAAMyU,IAAMzU,EAAMyU,KAAO,CAAC,EAe3CzU,EAAMyU,IAAIC,OAAS,CACjB,OAAQ,QAAS,UAAW,OAAQ,QAAS,UAAW,OAI1D,IAAIC,EAAa,CAAC,EAEdC,EAAW,GAKXC,EAAiB,KAQrB7U,EAAMyU,IAAIK,aAAgB,EAM1B9U,EAAMyU,IAAIM,eAAkB,EAQ5B/U,EAAMyU,IAAIO,YAAe,EAGzB,IAAI,IAAI1P,EAAI,EAAGA,EAAItF,EAAMyU,IAAIC,OAAO9P,SAAUU,EAAG,CAC/C,IAAI2P,EAAQjV,EAAMyU,IAAIC,OAAOpP,GAC7BqP,EAAWM,GAAS,CAClBC,MAAO5P,EACPY,KAAM+O,EAAME,cAEhB,CAOAnV,EAAMyU,IAAIW,WAAa,SAASC,GAE9B,IADA,IAAIC,EAAoBX,EAAWU,EAAQJ,OAAOC,MAC1C5P,EAAI,EAAGA,EAAIsP,EAAShQ,SAAUU,EAAG,CACvC,IAAIiQ,EAASX,EAAStP,GACtB,GAAGiQ,EAAOC,MAAQxV,EAAMyU,IAAIM,eAC1BQ,EAAOtO,EAAEoO,QAKNC,GAFoBX,EAAWY,EAAON,OAAOC,OAI9CK,EAAOtO,EAAEsO,EAAQF,EAGvB,CACF,EAQArV,EAAMyU,IAAIgB,gBAAkB,SAASJ,GAC9B,aAAcA,IACjBA,EAAQK,SACNf,EAAWU,EAAQJ,OAAO/O,KAE1B,KAAOmP,EAAQM,SAAW,KAC1BN,EAAQA,QAEd,EAQArV,EAAMyU,IAAImB,YAAc,SAASP,GAC/B,KAAK,SAAUA,GAAU,CAEvB,IAAIQ,EAAO,CAACR,EAAQA,SACpBQ,EAAOA,EAAKnD,OAAO,IAAM2C,GAEzBA,EAAQS,KAAO9V,EAAMU,KAAKqV,OAAOC,MAAMvF,KAAMoF,EAC/C,CACF,EAQA7V,EAAMyU,IAAIwB,oBAAsB,SAASZ,GAClC,iBAAkBA,IAErBrV,EAAMyU,IAAIgB,gBAAgBJ,GAC1BA,EAAQa,aAAeb,EAAQK,SAEnC,EAKE,IAAIhB,EAAS,CAAC,QAAS,UAAW,OAAQ,QAAS,WACnD,IAAQpP,EAAI,EAAGA,EAAIoP,EAAO9P,SAAUU,GAElC,SAAU2P,GAERjV,EAAMyU,IAAIQ,GAAS,SAASU,EAAUN,GAEpC,IAAIQ,EAAO9L,MAAMvC,UAAUyJ,MAAMzI,KAAK2N,WAAWlF,MAAM,GAGnD5Q,EAAM,CACR+V,UAAW,IAAIC,KACfpB,MAAOA,EACPU,SAAUA,EACVN,QAASA,EACT,UAAaQ,GAMf7V,EAAMyU,IAAIW,WAAW/U,EACvB,CACD,EApBD,CAoBGqU,EAAOpP,IAgFd,GA1DAtF,EAAMyU,IAAI6B,WAAa,SAASC,GAC9B,IAAIhB,EAAS,CACXC,MAAO,EACPvO,EAAGsP,GAGL,OADAvW,EAAMyU,IAAI+B,SAASjB,EAAQ,QACpBA,CACT,EAUAvV,EAAMyU,IAAI+B,SAAW,SAASjB,EAAQN,GACpC,IAAIxR,GAAO,EACX,GAAG8R,KAAYA,EAAOC,MAAQxV,EAAMyU,IAAIK,cACtC,IAAI,IAAIxP,EAAI,EAAGA,EAAItF,EAAMyU,IAAIC,OAAO9P,SAAUU,EAAG,CAE/C,GAAG2P,GADejV,EAAMyU,IAAIC,OAAOpP,GACV,CAEvBiQ,EAAON,MAAQA,EACfxR,GAAO,EACP,KACF,CACF,CAGF,OAAOA,CACT,EAQAzD,EAAMyU,IAAIgC,KAAO,SAASlB,EAAQkB,GACb,qBAATA,GAAwBA,EAChClB,EAAOC,OAASxV,EAAMyU,IAAIK,aAE1BS,EAAOC,QAAUxV,EAAMyU,IAAIK,YAE/B,EAOA9U,EAAMyU,IAAIiC,UAAY,SAASnB,GAC7BX,EAAS7F,KAAKwG,EAChB,EAGuB,qBAAboB,SAA4B,QAASA,QAAS,CACtD,IAAIpB,EACJ,GAAGoB,QAAQ7V,OAAS6V,QAAQC,MAAQD,QAAQE,MAAQF,QAAQG,MAAO,CAGjE,IAAIC,EAAgB,CAClBjW,MAAO6V,QAAQ7V,MACfkW,QAASL,QAAQC,KACjBC,KAAMF,QAAQE,KACdC,MAAOH,QAAQG,MACfG,QAASN,QAAQG,OAEf7P,EAAI,SAASsO,EAAQF,GACvBrV,EAAMyU,IAAIgB,gBAAgBJ,GAC1B,IAAI6B,EAAUH,EAAc1B,EAAQJ,OAEhCY,EAAO,CAACR,EAAQK,UACpBG,EAAOA,EAAKnD,OAAO2C,EAAmB,UAAEpE,SAExCiG,EAAQlB,MAAMW,QAASd,EACzB,EACAN,EAASvV,EAAMyU,IAAI6B,WAAWrP,EAChC,KAAO,CAEDA,EAAI,SAASsO,EAAQF,GACvBrV,EAAMyU,IAAIwB,oBAAoBZ,GAC9BsB,QAAQlC,IAAIY,EAAQa,aACtB,EACAX,EAASvV,EAAMyU,IAAI6B,WAAWrP,EAChC,CACAjH,EAAMyU,IAAI+B,SAASjB,EAAQ,SAC3BvV,EAAMyU,IAAIiC,UAAUnB,GACpBV,EAAiBU,CACnB,MAGEoB,QAAU,CACRlC,IAAK,WAAY,GAgBrB,GAAsB,OAAnBI,GACiB,qBAAXsC,QAA0BA,OAAOC,SACxC,CACA,IAAIC,EAAQ,IAAIC,IAAIH,OAAOC,SAASG,MAAMC,aAM1C,GALGH,EAAMI,IAAI,kBAEXzX,EAAMyU,IAAI+B,SACR3B,EAAgBwC,EAAMK,IAAI,iBAAiBzG,OAAO,GAAG,IAEtDoG,EAAMI,IAAI,gBAGA,QADAJ,EAAMK,IAAI,gBAAgBzG,OAAO,GAAG,IAE7CjR,EAAMyU,IAAIgC,KAAK5B,EAGrB,CAGA7U,EAAMyU,IAAIkD,cAAgB9C,C,iBCpT1B,IAAI7U,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAER,IAAI6X,EAAMjY,EAAOC,QAAUI,EAAM4X,IAAM5X,EAAM4X,KAAO,CAAC,EAwLrD,SAASC,EAAuBC,EAAQ1I,GACtC,IAAI2I,EAAS3I,EAAI3C,SAAS,IAEvBsL,EAAO,IAAM,MACdA,EAAS,KAAOA,GAElB,IAAI1L,EAAQrM,EAAMU,KAAKsX,WAAWD,GAClCD,EAAOvM,SAASc,EAAMzH,QACtBkT,EAAOhU,SAASuI,EAClB,CAQA,SAAS4L,EAAmBH,EAAQ1I,GAClC0I,EAAOvM,SAAS6D,EAAIxK,QACpBkT,EAAOI,UAAU9I,EACnB,CAOA,SAAS+I,IAGP,IAFA,IAAIC,EAAMpY,EAAM6J,GAAGwO,KAAKxS,SACpB0K,EAAM4F,UAAUvR,OACXU,EAAI,EAAGA,EAAIiL,IAAOjL,EACzB8S,EAAI3T,OAAO0R,UAAU7Q,IAEvB,OAAO8S,EAAItS,QACb,CA/MA8R,EAAIU,kBAAoB,SAASC,EAAYC,EAAYC,GAGvD,IAAIC,EAAY,UACZC,EAAsC,MAF1CH,EAAaA,GAAc,IAEqB,OAAS,aAErDI,EAAM,0BAA4BF,EAAY,OAClDE,GAAO,eAAiBD,EAAsB,OAC9CC,GAAO,aAPPH,EAAUA,GAAW,IAOU,OAG/B,IAAII,EAAY7Y,EAAMU,KAAKC,eAC3BsX,EAAmBY,EAAWH,GAC9Bb,EAAuBgB,EAAWN,EAAWjQ,GAC7CuP,EAAuBgB,EAAWN,EAAW7Q,GAG7C,IAAIoR,EAAM9Y,EAAMU,KAAKqY,SAASF,EAAUxM,QAAS,IAC7CzH,EAASqG,KAAKK,MAAMwN,EAAIlU,OAAS,IAAM,EAC3CgU,GAAO,iBAAmBhU,EAAS,OACnCgU,GAAOE,EAGP,IAOIE,EAPAC,EAAajZ,EAAMU,KAAKC,eAQ5B,GAPAkX,EAAuBoB,EAAYV,EAAWlQ,GAC9CwP,EAAuBoB,EAAYV,EAAW1Q,GAC9CgQ,EAAuBoB,EAAYV,EAAWtQ,GAC9C4P,EAAuBoB,EAAYV,EAAWW,MAI1CV,EAGG,CAEL,IAAIW,EAASF,EAAWrU,SAAW,GAAK,EACxCuU,GAAUA,EAAS,GAGnB,IAAInU,EAAUmT,EAAMc,EAAW5M,SAE/BrH,EAAQQ,SAASR,EAAQJ,SAAWuU,EAASF,EAAWrU,UACxDqU,EAAWzJ,UAAUxK,GAErB,IAAIoU,EAASpZ,EAAMU,KAAKC,eACxByY,EAAO5J,UAAU2I,EAAM,WAAoBK,IAC3CY,EAAO5J,UAAU2I,EAAM,aAAoBK,IAI3C,IAAIlW,EAAStC,EAAMsG,IAAIqJ,uBAAuByJ,EAAO5T,SAAS,GAAI,OAClElD,EAAOgC,MAAMtE,EAAMU,KAAKC,eAAesE,aAAa,EAAG,KACvD3C,EAAOmC,OAAOwU,EAAWI,QACzB/W,EAAOoC,SACP,IAAI4U,EAAYhX,EAAOkC,OAIvB8U,EAAU9T,SAAS,IAEnBwT,EAAOhZ,EAAMU,KAAKqY,SAASO,EAAUjN,QAAS,GAChD,MA7BE2M,EAAOhZ,EAAMU,KAAKqY,SAASE,EAAW5M,QAAS,IAiCjDuM,GAAO,uBADPhU,EAASqG,KAAKK,MAAM0N,EAAKpU,OAAS,IAAM,GACA,OACxCgU,GAAOI,EAGP,IAAIO,EAASpB,EAAM,iCAAkCK,GAEjDgB,EAAYxZ,EAAMU,KAAKC,eAC3BsX,EAAmBuB,EAAWd,GAC9BT,EAAmBuB,EAAWb,GAC9BV,EAAmBuB,EAAWf,GAC9Be,EAAUjO,SAASsN,EAAUjU,UAC7B4U,EAAUhK,UAAUqJ,GACpBW,EAAUjO,SAAS0N,EAAWrU,UAC9B4U,EAAUhK,UAAUyJ,GAEpB,IAAIrT,EAAO5F,EAAM4F,KAAKC,SAMtB,OALAD,EAAKtB,MAAM,OAAQiV,GACnB3T,EAAKnB,OAAO+U,EAAUnN,SAEtBuM,GAAO,oBAAsBhT,EAAKE,SAAS2T,QAAU,MAGvD,EAUA7B,EAAI8B,mBAAqB,SAAStY,EAAKqX,GACrC,IAAIjY,EAAO,UACXiY,EAAUA,GAAW,GAErB,IAAIX,EAAS9X,EAAMU,KAAKC,eAKxB,OAJAsX,EAAmBH,EAAQtX,GAC3BqX,EAAuBC,EAAQ1W,EAAIkH,GACnCuP,EAAuBC,EAAQ1W,EAAIsG,GAE5BlH,EAAO,IAAMR,EAAMU,KAAKqY,SAASjB,EAAOzL,SAAW,IAAMoM,CAClE,EAUAb,EAAI+B,oBAAsB,SAASpB,EAAYC,GAC7C,OAAIA,EAIGxY,EAAME,IAAI0Z,qBAAqBrB,EAAYC,EAChD,CAACqB,QAAQ,EAAMnB,UAAW,WAJnB1Y,EAAME,IAAIiB,gBAAgBoX,EAKrC,EAcAX,EAAIkC,wBAA0B,SAAS1Y,EAAKvB,GAE1C,IAAIgK,GADJhK,EAAUA,GAAW,CAAC,GACLgK,IAAM7J,EAAM6J,GAAGkQ,IAAIlU,SAGhCiS,EAAS9X,EAAMU,KAAKC,eACxBsX,EAAmBH,EAFR,WAGXD,EAAuBC,EAAQ1W,EAAIkH,GACnCuP,EAAuBC,EAAQ1W,EAAIsG,GAGnCmC,EAAGvF,QACHuF,EAAGpF,OAAOqT,EAAOtW,YACjB,IAAIsE,EAAS+D,EAAG/D,SAChB,GAAwB,QAArBjG,EAAQma,SAAoB,CAC7B,IAAIC,EAAMnU,EAAO2T,QACjB,OAAG5Z,EAAQqa,UACFD,EAAIE,MAAM,SAASC,KAAKva,EAAQqa,WAElCD,CACT,CAAO,GAAwB,WAArBpa,EAAQma,SAChB,OAAOlU,EAAOtE,WACT,GAAG3B,EAAQma,SAChB,MAAM,IAAIvZ,MAAM,qBAAuBZ,EAAQma,SAAW,MAE5D,OAAOlU,CACT,C,iBC1LAnG,EAAOC,QAAU,EAAjBD,MAEAI,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,K,8BCAK,IAAIsa,EAAGta,EAAQ,MAASua,EAAGva,EAAQ,MAAa,SAAS8H,EAAEK,GAAG,IAAI,IAAIE,EAAE,yDAAyDF,EAAEpG,EAAE,EAAEA,EAAEqU,UAAUvR,OAAO9C,IAAIsG,GAAG,WAAWmS,mBAAmBpE,UAAUrU,IAAI,MAAM,yBAAyBoG,EAAE,WAAWE,EAAE,gHAAgH,CAAC,IAAIoS,EAAG,IAAIC,IAAIC,EAAG,CAAC,EAAE,SAASC,EAAGzS,EAAEE,GAAGwS,EAAG1S,EAAEE,GAAGwS,EAAG1S,EAAE,UAAUE,EAAE,CACxb,SAASwS,EAAG1S,EAAEE,GAAW,IAARsS,EAAGxS,GAAGE,EAAMF,EAAE,EAAEA,EAAEE,EAAExD,OAAOsD,IAAIsS,EAAGK,IAAIzS,EAAEF,GAAG,CAC5D,IAAI4S,IAAK,qBAAqB3D,QAAQ,qBAAqBA,OAAO4D,UAAU,qBAAqB5D,OAAO4D,SAASC,eAAeC,EAAG1T,OAAOC,UAAUC,eAAeyT,EAAG,8VAA8VC,EACpgB,CAAC,EAAEC,EAAG,CAAC,EACiN,SAASC,EAAEnT,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,EAAEkB,GAAGsI,KAAK6K,gBAAgB,IAAIlT,GAAG,IAAIA,GAAG,IAAIA,EAAEqI,KAAK8K,cAAclT,EAAEoI,KAAK+K,mBAAmBlT,EAAEmI,KAAKgL,gBAAgB3Z,EAAE2O,KAAKiL,aAAaxT,EAAEuI,KAAKjQ,KAAK4H,EAAEqI,KAAKkL,YAAY1U,EAAEwJ,KAAKmL,kBAAkBzT,CAAC,CAAC,IAAIoL,EAAE,CAAC,EACpb,uIAAuIsI,MAAM,KAAKC,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE,MAAK,GAAG,EAAG,GAAG,CAAC,CAAC,gBAAgB,kBAAkB,CAAC,YAAY,SAAS,CAAC,UAAU,OAAO,CAAC,YAAY,eAAe4T,QAAQ,SAAS5T,GAAG,IAAIE,EAAEF,EAAE,GAAGqL,EAAEnL,GAAG,IAAIiT,EAAEjT,EAAE,GAAE,EAAGF,EAAE,GAAG,MAAK,GAAG,EAAG,GAAG,CAAC,kBAAkB,YAAY,aAAa,SAAS4T,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE6T,cAAc,MAAK,GAAG,EAAG,GAC1e,CAAC,cAAc,4BAA4B,YAAY,iBAAiBD,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE,MAAK,GAAG,EAAG,GAAG,8OAA8O2T,MAAM,KAAKC,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE6T,cAAc,MAAK,GAAG,EAAG,GACxb,CAAC,UAAU,WAAW,QAAQ,YAAYD,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE,MAAK,GAAG,EAAG,GAAG,CAAC,UAAU,YAAY4T,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE,MAAK,GAAG,EAAG,GAAG,CAAC,OAAO,OAAO,OAAO,QAAQ4T,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE,MAAK,GAAG,EAAG,GAAG,CAAC,UAAU,SAAS4T,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE6T,cAAc,MAAK,GAAG,EAAG,GAAG,IAAIC,EAAG,gBAAgB,SAASC,EAAG/T,GAAG,OAAOA,EAAE,GAAGiN,aAAa,CAIxZ,SAAS+G,EAAGhU,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAEiL,EAAE9L,eAAeW,GAAGmL,EAAEnL,GAAG,MAAQ,OAAOE,EAAE,IAAIA,EAAE9H,KAAK6H,KAAK,EAAED,EAAExD,SAAS,MAAMwD,EAAE,IAAI,MAAMA,EAAE,IAAI,MAAMA,EAAE,IAAI,MAAMA,EAAE,MAP9I,SAAYF,EAAEE,EAAEtG,EAAEuG,GAAG,GAAG,OAAOD,GAAG,qBAAqBA,GADqE,SAAYF,EAAEE,EAAEtG,EAAEuG,GAAG,GAAG,OAAOvG,GAAG,IAAIA,EAAEtB,KAAK,OAAM,EAAG,cAAc4H,GAAG,IAAK,WAAW,IAAK,SAAS,OAAM,EAAG,IAAK,UAAU,OAAGC,IAAc,OAAOvG,GAASA,EAAEwZ,gBAAmD,WAAnCpT,EAAEA,EAAE6T,cAAc9K,MAAM,EAAE,KAAsB,UAAU/I,GAAE,QAAQ,OAAM,EAAG,CAC/TiU,CAAGjU,EAAEE,EAAEtG,EAAEuG,GAAG,OAAM,EAAG,GAAGA,EAAE,OAAM,EAAG,GAAG,OAAOvG,EAAE,OAAOA,EAAEtB,MAAM,KAAK,EAAE,OAAO4H,EAAE,KAAK,EAAE,OAAM,IAAKA,EAAE,KAAK,EAAE,OAAOgU,MAAMhU,GAAG,KAAK,EAAE,OAAOgU,MAAMhU,IAAI,EAAEA,EAAE,OAAM,CAAE,CAOtEiU,CAAGjU,EAAEtG,EAAEwG,EAAED,KAAKvG,EAAE,MAAMuG,GAAG,OAAOC,EARxK,SAAYJ,GAAG,QAAG+S,EAAGzS,KAAK4S,EAAGlT,KAAe+S,EAAGzS,KAAK2S,EAAGjT,KAAegT,EAAGoB,KAAKpU,GAAUkT,EAAGlT,IAAG,GAAGiT,EAAGjT,IAAG,GAAS,GAAE,CAQwDqU,CAAGnU,KAAK,OAAOtG,EAAEoG,EAAEsU,gBAAgBpU,GAAGF,EAAEuU,aAAarU,EAAE,GAAGtG,IAAIwG,EAAEmT,gBAAgBvT,EAAEI,EAAEoT,cAAc,OAAO5Z,EAAE,IAAIwG,EAAE9H,MAAQ,GAAGsB,GAAGsG,EAAEE,EAAEiT,cAAclT,EAAEC,EAAEkT,mBAAmB,OAAO1Z,EAAEoG,EAAEsU,gBAAgBpU,IAAatG,EAAE,KAAXwG,EAAEA,EAAE9H,OAAc,IAAI8H,IAAG,IAAKxG,EAAE,GAAG,GAAGA,EAAEuG,EAAEH,EAAEwU,eAAerU,EAAED,EAAEtG,GAAGoG,EAAEuU,aAAarU,EAAEtG,KAAI,CAHjd,0jCAA0jC+Z,MAAM,KAAKC,QAAQ,SAAS5T,GAAG,IAAIE,EAAEF,EAAEyU,QAAQX,EACzmCC,GAAI1I,EAAEnL,GAAG,IAAIiT,EAAEjT,EAAE,GAAE,EAAGF,EAAE,MAAK,GAAG,EAAG,GAAG,2EAA2E2T,MAAM,KAAKC,QAAQ,SAAS5T,GAAG,IAAIE,EAAEF,EAAEyU,QAAQX,EAAGC,GAAI1I,EAAEnL,GAAG,IAAIiT,EAAEjT,EAAE,GAAE,EAAGF,EAAE,gCAA+B,GAAG,EAAG,GAAG,CAAC,WAAW,WAAW,aAAa4T,QAAQ,SAAS5T,GAAG,IAAIE,EAAEF,EAAEyU,QAAQX,EAAGC,GAAI1I,EAAEnL,GAAG,IAAIiT,EAAEjT,EAAE,GAAE,EAAGF,EAAE,wCAAuC,GAAG,EAAG,GAAG,CAAC,WAAW,eAAe4T,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE6T,cAAc,MAAK,GAAG,EAAG,GACldxI,EAAEqJ,UAAU,IAAIvB,EAAE,YAAY,GAAE,EAAG,aAAa,gCAA+B,GAAG,GAAI,CAAC,MAAM,OAAO,SAAS,cAAcS,QAAQ,SAAS5T,GAAGqL,EAAErL,GAAG,IAAImT,EAAEnT,EAAE,GAAE,EAAGA,EAAE6T,cAAc,MAAK,GAAG,EAAG,GAE5L,IAAIc,EAAGxC,EAAG1S,mDAAmDmV,EAAG3V,OAAOC,IAAI,iBAAiB2V,EAAG5V,OAAOC,IAAI,gBAAgB4V,EAAG7V,OAAOC,IAAI,kBAAkB6V,EAAG9V,OAAOC,IAAI,qBAAqB8V,EAAG/V,OAAOC,IAAI,kBAAkB+V,EAAGhW,OAAOC,IAAI,kBAAkBgW,EAAGjW,OAAOC,IAAI,iBAAiBiW,EAAGlW,OAAOC,IAAI,qBAAqBkW,EAAGnW,OAAOC,IAAI,kBAAkBmW,EAAGpW,OAAOC,IAAI,uBAAuBoW,EAAGrW,OAAOC,IAAI,cAAcqW,EAAGtW,OAAOC,IAAI,cAAcD,OAAOC,IAAI,eAAeD,OAAOC,IAAI,0BACje,IAAIsW,EAAGvW,OAAOC,IAAI,mBAAmBD,OAAOC,IAAI,uBAAuBD,OAAOC,IAAI,eAAeD,OAAOC,IAAI,wBAAwB,IAAIuW,EAAGxW,OAAOyW,SAAS,SAASC,EAAG3V,GAAG,OAAG,OAAOA,GAAG,kBAAkBA,EAAS,KAAwC,oBAAnCA,EAAEyV,GAAIzV,EAAEyV,IAAKzV,EAAE,eAA0CA,EAAE,IAAI,CAAC,IAAoB4V,EAAhBC,EAAExW,OAAOyW,OAAU,SAASC,EAAG/V,GAAG,QAAG,IAAS4V,EAAG,IAAI,MAAMrd,OAAQ,CAAC,MAAMqB,GAAG,IAAIsG,EAAEtG,EAAEoc,MAAMC,OAAOhE,MAAM,gBAAgB2D,EAAG1V,GAAGA,EAAE,IAAI,EAAE,CAAC,MAAM,KAAK0V,EAAG5V,CAAC,CAAC,IAAIkW,GAAG,EACzb,SAASC,EAAGnW,EAAEE,GAAG,IAAIF,GAAGkW,EAAG,MAAM,GAAGA,GAAG,EAAG,IAAItc,EAAErB,MAAM6d,kBAAkB7d,MAAM6d,uBAAkB,EAAO,IAAI,GAAGlW,EAAE,GAAGA,EAAE,WAAW,MAAM3H,OAAQ,EAAE8G,OAAOgX,eAAenW,EAAEZ,UAAU,QAAQ,CAACgX,IAAI,WAAW,MAAM/d,OAAQ,IAAI,kBAAkBge,SAASA,QAAQC,UAAU,CAAC,IAAID,QAAQC,UAAUtW,EAAE,GAAG,CAAC,MAAMf,GAAG,IAAIgB,EAAEhB,CAAC,CAACoX,QAAQC,UAAUxW,EAAE,GAAGE,EAAE,KAAK,CAAC,IAAIA,EAAEI,MAAM,CAAC,MAAMnB,GAAGgB,EAAEhB,CAAC,CAACa,EAAEM,KAAKJ,EAAEZ,UAAU,KAAK,CAAC,IAAI,MAAM/G,OAAQ,CAAC,MAAM4G,GAAGgB,EAAEhB,CAAC,CAACa,GAAG,CAAC,CAAC,MAAMb,GAAG,GAAGA,GAAGgB,GAAG,kBAAkBhB,EAAE6W,MAAM,CAAC,IAAI,IAAI5V,EAAEjB,EAAE6W,MAAMrC,MAAM,MACnf5U,EAAEoB,EAAE6V,MAAMrC,MAAM,MAAM1T,EAAEG,EAAE1D,OAAO,EAAE2D,EAAEtB,EAAErC,OAAO,EAAE,GAAGuD,GAAG,GAAGI,GAAGD,EAAEH,KAAKlB,EAAEsB,IAAIA,IAAI,KAAK,GAAGJ,GAAG,GAAGI,EAAEJ,IAAII,IAAI,GAAGD,EAAEH,KAAKlB,EAAEsB,GAAG,CAAC,GAAG,IAAIJ,GAAG,IAAII,EAAG,MAAMJ,IAAQ,IAAJI,GAASD,EAAEH,KAAKlB,EAAEsB,GAAG,CAAC,IAAIrB,EAAE,KAAKoB,EAAEH,GAAGwU,QAAQ,WAAW,QAA6F,OAArFzU,EAAEyW,aAAazX,EAAE0X,SAAS,iBAAiB1X,EAAEA,EAAEyV,QAAQ,cAAczU,EAAEyW,cAAqBzX,CAAC,QAAO,GAAGiB,GAAG,GAAGI,GAAG,KAAK,CAAC,CAAC,CAAC,QAAQ6V,GAAG,EAAG3d,MAAM6d,kBAAkBxc,CAAC,CAAC,OAAOoG,EAAEA,EAAEA,EAAEyW,aAAazW,EAAEhC,KAAK,IAAI+X,EAAG/V,GAAG,EAAE,CAC9Z,SAAS2W,EAAG3W,GAAG,OAAOA,EAAE+J,KAAK,KAAK,EAAE,OAAOgM,EAAG/V,EAAE1H,MAAM,KAAK,GAAG,OAAOyd,EAAG,QAAQ,KAAK,GAAG,OAAOA,EAAG,YAAY,KAAK,GAAG,OAAOA,EAAG,gBAAgB,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,OAAO/V,EAAEmW,EAAGnW,EAAE1H,MAAK,GAAM,KAAK,GAAG,OAAO0H,EAAEmW,EAAGnW,EAAE1H,KAAKse,QAAO,GAAM,KAAK,EAAE,OAAO5W,EAAEmW,EAAGnW,EAAE1H,MAAK,GAAM,QAAQ,MAAM,GAAG,CACxR,SAASue,EAAG7W,GAAG,GAAG,MAAMA,EAAE,OAAO,KAAK,GAAG,oBAAoBA,EAAE,OAAOA,EAAEyW,aAAazW,EAAEhC,MAAM,KAAK,GAAG,kBAAkBgC,EAAE,OAAOA,EAAE,OAAOA,GAAG,KAAK8U,EAAG,MAAM,WAAW,KAAKD,EAAG,MAAM,SAAS,KAAKG,EAAG,MAAM,WAAW,KAAKD,EAAG,MAAM,aAAa,KAAKK,EAAG,MAAM,WAAW,KAAKC,EAAG,MAAM,eAAe,GAAG,kBAAkBrV,EAAE,OAAOA,EAAEQ,UAAU,KAAK0U,EAAG,OAAOlV,EAAEyW,aAAa,WAAW,YAAY,KAAKxB,EAAG,OAAOjV,EAAE8W,SAASL,aAAa,WAAW,YAAY,KAAKtB,EAAG,IAAIjV,EAAEF,EAAE4W,OAC7Z,OADoa5W,EAAEA,EAAEyW,eACndzW,EAAE,MADieA,EAAEE,EAAEuW,aAClfvW,EAAElC,MAAM,IAAY,cAAcgC,EAAE,IAAI,cAAqBA,EAAE,KAAKsV,EAAG,OAA6B,QAAtBpV,EAAEF,EAAEyW,aAAa,MAAcvW,EAAE2W,EAAG7W,EAAE1H,OAAO,OAAO,KAAKid,EAAGrV,EAAEF,EAAE+W,SAAS/W,EAAEA,EAAEgX,MAAM,IAAI,OAAOH,EAAG7W,EAAEE,GAAG,CAAC,MAAMtG,GAAG,EAAE,OAAO,IAAI,CAC3M,SAASqd,EAAGjX,GAAG,IAAIE,EAAEF,EAAE1H,KAAK,OAAO0H,EAAE+J,KAAK,KAAK,GAAG,MAAM,QAAQ,KAAK,EAAE,OAAO7J,EAAEuW,aAAa,WAAW,YAAY,KAAK,GAAG,OAAOvW,EAAE4W,SAASL,aAAa,WAAW,YAAY,KAAK,GAAG,MAAM,qBAAqB,KAAK,GAAG,OAAkBzW,GAAXA,EAAEE,EAAE0W,QAAWH,aAAazW,EAAEhC,MAAM,GAAGkC,EAAEuW,cAAc,KAAKzW,EAAE,cAAcA,EAAE,IAAI,cAAc,KAAK,EAAE,MAAM,WAAW,KAAK,EAAE,OAAOE,EAAE,KAAK,EAAE,MAAM,SAAS,KAAK,EAAE,MAAM,OAAO,KAAK,EAAE,MAAM,OAAO,KAAK,GAAG,OAAO2W,EAAG3W,GAAG,KAAK,EAAE,OAAOA,IAAI6U,EAAG,aAAa,OAAO,KAAK,GAAG,MAAM,YACtf,KAAK,GAAG,MAAM,WAAW,KAAK,GAAG,MAAM,QAAQ,KAAK,GAAG,MAAM,WAAW,KAAK,GAAG,MAAM,eAAe,KAAK,GAAG,MAAM,gBAAgB,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,GAAG,oBAAoB7U,EAAE,OAAOA,EAAEuW,aAAavW,EAAElC,MAAM,KAAK,GAAG,kBAAkBkC,EAAE,OAAOA,EAAE,OAAO,IAAI,CAAC,SAASgX,EAAGlX,GAAG,cAAcA,GAAG,IAAK,UAAU,IAAK,SAAS,IAAK,SAAS,IAAK,YAAqB,IAAK,SAAS,OAAOA,EAAE,QAAQ,MAAM,GAAG,CACra,SAASmX,EAAGnX,GAAG,IAAIE,EAAEF,EAAE1H,KAAK,OAAO0H,EAAEA,EAAEoX,WAAW,UAAUpX,EAAE6T,gBAAgB,aAAa3T,GAAG,UAAUA,EAAE,CAEtF,SAASmX,EAAGrX,GAAGA,EAAEsX,gBAAgBtX,EAAEsX,cADvD,SAAYtX,GAAG,IAAIE,EAAEiX,EAAGnX,GAAG,UAAU,QAAQpG,EAAEyF,OAAOkY,yBAAyBvX,EAAEwX,YAAYlY,UAAUY,GAAGC,EAAE,GAAGH,EAAEE,GAAG,IAAIF,EAAET,eAAeW,IAAI,qBAAqBtG,GAAG,oBAAoBA,EAAE4V,KAAK,oBAAoB5V,EAAE0c,IAAI,CAAC,IAAIlW,EAAExG,EAAE4V,IAAIzQ,EAAEnF,EAAE0c,IAAiL,OAA7KjX,OAAOgX,eAAerW,EAAEE,EAAE,CAACuX,cAAa,EAAGjI,IAAI,WAAW,OAAOpP,EAAEE,KAAKiI,KAAK,EAAE+N,IAAI,SAAStW,GAAGG,EAAE,GAAGH,EAAEjB,EAAEuB,KAAKiI,KAAKvI,EAAE,IAAIX,OAAOgX,eAAerW,EAAEE,EAAE,CAACwX,WAAW9d,EAAE8d,aAAmB,CAACC,SAAS,WAAW,OAAOxX,CAAC,EAAEyX,SAAS,SAAS5X,GAAGG,EAAE,GAAGH,CAAC,EAAE6X,aAAa,WAAW7X,EAAEsX,cACxf,YAAYtX,EAAEE,EAAE,EAAE,CAAC,CAAkD4X,CAAG9X,GAAG,CAAC,SAAS+X,EAAG/X,GAAG,IAAIA,EAAE,OAAM,EAAG,IAAIE,EAAEF,EAAEsX,cAAc,IAAIpX,EAAE,OAAM,EAAG,IAAItG,EAAEsG,EAAEyX,WAAexX,EAAE,GAAqD,OAAlDH,IAAIG,EAAEgX,EAAGnX,GAAGA,EAAEgY,QAAQ,OAAO,QAAQhY,EAAEiY,QAAOjY,EAAEG,KAAavG,IAAGsG,EAAE0X,SAAS5X,IAAG,EAAM,CAAC,SAASkY,EAAGlY,GAAwD,GAAG,qBAAxDA,EAAEA,IAAI,qBAAqB6S,SAASA,cAAS,IAAkC,OAAO,KAAK,IAAI,OAAO7S,EAAEmY,eAAenY,EAAEtH,IAAI,CAAC,MAAMwH,GAAG,OAAOF,EAAEtH,IAAI,CAAC,CACpa,SAAS0f,EAAGpY,EAAEE,GAAG,IAAItG,EAAEsG,EAAE8X,QAAQ,OAAOnC,EAAE,CAAC,EAAE3V,EAAE,CAACmY,oBAAe,EAAOC,kBAAa,EAAOL,WAAM,EAAOD,QAAQ,MAAMpe,EAAEA,EAAEoG,EAAEuY,cAAcC,gBAAgB,CAAC,SAASC,EAAGzY,EAAEE,GAAG,IAAItG,EAAE,MAAMsG,EAAEoY,aAAa,GAAGpY,EAAEoY,aAAanY,EAAE,MAAMD,EAAE8X,QAAQ9X,EAAE8X,QAAQ9X,EAAEmY,eAAeze,EAAEsd,EAAG,MAAMhX,EAAE+X,MAAM/X,EAAE+X,MAAMre,GAAGoG,EAAEuY,cAAc,CAACC,eAAerY,EAAEuY,aAAa9e,EAAE+e,WAAW,aAAazY,EAAE5H,MAAM,UAAU4H,EAAE5H,KAAK,MAAM4H,EAAE8X,QAAQ,MAAM9X,EAAE+X,MAAM,CAAC,SAASW,EAAG5Y,EAAEE,GAAe,OAAZA,EAAEA,EAAE8X,UAAiBhE,EAAGhU,EAAE,UAAUE,GAAE,EAAG,CAC9d,SAAS2Y,EAAG7Y,EAAEE,GAAG0Y,EAAG5Y,EAAEE,GAAG,IAAItG,EAAEsd,EAAGhX,EAAE+X,OAAO9X,EAAED,EAAE5H,KAAK,GAAG,MAAMsB,EAAK,WAAWuG,GAAM,IAAIvG,GAAG,KAAKoG,EAAEiY,OAAOjY,EAAEiY,OAAOre,KAAEoG,EAAEiY,MAAM,GAAGre,GAAOoG,EAAEiY,QAAQ,GAAGre,IAAIoG,EAAEiY,MAAM,GAAGre,QAAQ,GAAG,WAAWuG,GAAG,UAAUA,EAA8B,YAA3BH,EAAEsU,gBAAgB,SAAgBpU,EAAEX,eAAe,SAASuZ,GAAG9Y,EAAEE,EAAE5H,KAAKsB,GAAGsG,EAAEX,eAAe,iBAAiBuZ,GAAG9Y,EAAEE,EAAE5H,KAAK4e,EAAGhX,EAAEoY,eAAe,MAAMpY,EAAE8X,SAAS,MAAM9X,EAAEmY,iBAAiBrY,EAAEqY,iBAAiBnY,EAAEmY,eAAe,CACla,SAASU,EAAG/Y,EAAEE,EAAEtG,GAAG,GAAGsG,EAAEX,eAAe,UAAUW,EAAEX,eAAe,gBAAgB,CAAC,IAAIY,EAAED,EAAE5H,KAAK,KAAK,WAAW6H,GAAG,UAAUA,QAAG,IAASD,EAAE+X,OAAO,OAAO/X,EAAE+X,OAAO,OAAO/X,EAAE,GAAGF,EAAEuY,cAAcG,aAAa9e,GAAGsG,IAAIF,EAAEiY,QAAQjY,EAAEiY,MAAM/X,GAAGF,EAAEsY,aAAapY,CAAC,CAAU,MAATtG,EAAEoG,EAAEhC,QAAcgC,EAAEhC,KAAK,IAAIgC,EAAEqY,iBAAiBrY,EAAEuY,cAAcC,eAAe,KAAK5e,IAAIoG,EAAEhC,KAAKpE,EAAE,CACzV,SAASkf,GAAG9Y,EAAEE,EAAEtG,GAAM,WAAWsG,GAAGgY,EAAGlY,EAAEgZ,iBAAiBhZ,IAAE,MAAMpG,EAAEoG,EAAEsY,aAAa,GAAGtY,EAAEuY,cAAcG,aAAa1Y,EAAEsY,eAAe,GAAG1e,IAAIoG,EAAEsY,aAAa,GAAG1e,GAAE,CAAC,IAAIqf,GAAGpX,MAAMiG,QAC7K,SAASoR,GAAGlZ,EAAEE,EAAEtG,EAAEuG,GAAe,GAAZH,EAAEA,EAAErI,QAAWuI,EAAE,CAACA,EAAE,CAAC,EAAE,IAAI,IAAIE,EAAE,EAAEA,EAAExG,EAAE8C,OAAO0D,IAAIF,EAAE,IAAItG,EAAEwG,KAAI,EAAG,IAAIxG,EAAE,EAAEA,EAAEoG,EAAEtD,OAAO9C,IAAIwG,EAAEF,EAAEX,eAAe,IAAIS,EAAEpG,GAAGqe,OAAOjY,EAAEpG,GAAGuf,WAAW/Y,IAAIJ,EAAEpG,GAAGuf,SAAS/Y,GAAGA,GAAGD,IAAIH,EAAEpG,GAAGwf,iBAAgB,EAAG,KAAK,CAAmB,IAAlBxf,EAAE,GAAGsd,EAAGtd,GAAGsG,EAAE,KAASE,EAAE,EAAEA,EAAEJ,EAAEtD,OAAO0D,IAAI,CAAC,GAAGJ,EAAEI,GAAG6X,QAAQre,EAAiD,OAA9CoG,EAAEI,GAAG+Y,UAAS,OAAGhZ,IAAIH,EAAEI,GAAGgZ,iBAAgB,IAAW,OAAOlZ,GAAGF,EAAEI,GAAGiZ,WAAWnZ,EAAEF,EAAEI,GAAG,CAAC,OAAOF,IAAIA,EAAEiZ,UAAS,EAAG,CAAC,CACxY,SAASG,GAAGtZ,EAAEE,GAAG,GAAG,MAAMA,EAAEqZ,wBAAwB,MAAMhhB,MAAMoH,EAAE,KAAK,OAAOkW,EAAE,CAAC,EAAE3V,EAAE,CAAC+X,WAAM,EAAOK,kBAAa,EAAOkB,SAAS,GAAGxZ,EAAEuY,cAAcG,cAAc,CAAC,SAASe,GAAGzZ,EAAEE,GAAG,IAAItG,EAAEsG,EAAE+X,MAAM,GAAG,MAAMre,EAAE,CAA+B,GAA9BA,EAAEsG,EAAEsZ,SAAStZ,EAAEA,EAAEoY,aAAgB,MAAM1e,EAAE,CAAC,GAAG,MAAMsG,EAAE,MAAM3H,MAAMoH,EAAE,KAAK,GAAGsZ,GAAGrf,GAAG,CAAC,GAAG,EAAEA,EAAE8C,OAAO,MAAMnE,MAAMoH,EAAE,KAAK/F,EAAEA,EAAE,EAAE,CAACsG,EAAEtG,CAAC,CAAC,MAAMsG,IAAIA,EAAE,IAAItG,EAAEsG,CAAC,CAACF,EAAEuY,cAAc,CAACG,aAAaxB,EAAGtd,GAAG,CACnY,SAAS8f,GAAG1Z,EAAEE,GAAG,IAAItG,EAAEsd,EAAGhX,EAAE+X,OAAO9X,EAAE+W,EAAGhX,EAAEoY,cAAc,MAAM1e,KAAIA,EAAE,GAAGA,KAAMoG,EAAEiY,QAAQjY,EAAEiY,MAAMre,GAAG,MAAMsG,EAAEoY,cAActY,EAAEsY,eAAe1e,IAAIoG,EAAEsY,aAAa1e,IAAI,MAAMuG,IAAIH,EAAEsY,aAAa,GAAGnY,EAAE,CAAC,SAASwZ,GAAG3Z,GAAG,IAAIE,EAAEF,EAAE4Z,YAAY1Z,IAAIF,EAAEuY,cAAcG,cAAc,KAAKxY,GAAG,OAAOA,IAAIF,EAAEiY,MAAM/X,EAAE,CAAC,SAAS2Z,GAAG7Z,GAAG,OAAOA,GAAG,IAAK,MAAM,MAAM,6BAA6B,IAAK,OAAO,MAAM,qCAAqC,QAAQ,MAAM,+BAA+B,CAC7c,SAAS8Z,GAAG9Z,EAAEE,GAAG,OAAO,MAAMF,GAAG,iCAAiCA,EAAE6Z,GAAG3Z,GAAG,+BAA+BF,GAAG,kBAAkBE,EAAE,+BAA+BF,CAAC,CAChK,IAAI+Z,GAAe/Z,GAAZga,IAAYha,GAAsJ,SAASA,EAAEE,GAAG,GAAG,+BAA+BF,EAAEia,cAAc,cAAcja,EAAEA,EAAEka,UAAUha,MAAM,CAA2F,KAA1F6Z,GAAGA,IAAIlH,SAASC,cAAc,QAAUoH,UAAU,QAAQha,EAAEia,UAAU5V,WAAW,SAAarE,EAAE6Z,GAAGK,WAAWpa,EAAEoa,YAAYpa,EAAEqa,YAAYra,EAAEoa,YAAY,KAAKla,EAAEka,YAAYpa,EAAEsa,YAAYpa,EAAEka,WAAW,CAAC,EAAvb,qBAAqBG,OAAOA,MAAMC,wBAAwB,SAASta,EAAEtG,EAAEuG,EAAEC,GAAGma,MAAMC,wBAAwB,WAAW,OAAOxa,GAAEE,EAAEtG,EAAM,EAAE,EAAEoG,IACtK,SAASya,GAAGza,EAAEE,GAAG,GAAGA,EAAE,CAAC,IAAItG,EAAEoG,EAAEoa,WAAW,GAAGxgB,GAAGA,IAAIoG,EAAE0a,WAAW,IAAI9gB,EAAE+gB,SAAwB,YAAd/gB,EAAEghB,UAAU1a,EAAS,CAACF,EAAE4Z,YAAY1Z,CAAC,CACtH,IAAI2a,GAAG,CAACC,yBAAwB,EAAGC,aAAY,EAAGC,mBAAkB,EAAGC,kBAAiB,EAAGC,kBAAiB,EAAGC,SAAQ,EAAGC,cAAa,EAAGC,iBAAgB,EAAGC,aAAY,EAAGC,SAAQ,EAAGC,MAAK,EAAGC,UAAS,EAAGC,cAAa,EAAGC,YAAW,EAAGC,cAAa,EAAGC,WAAU,EAAGC,UAAS,EAAGC,SAAQ,EAAGC,YAAW,EAAGC,aAAY,EAAGC,cAAa,EAAGC,YAAW,EAAGC,eAAc,EAAGC,gBAAe,EAAGC,iBAAgB,EAAGC,YAAW,EAAGC,WAAU,EAAGC,YAAW,EAAGC,SAAQ,EAAGC,OAAM,EAAGC,SAAQ,EAAGC,SAAQ,EAAGC,QAAO,EAAGC,QAAO,EAClfC,MAAK,EAAGC,aAAY,EAAGC,cAAa,EAAGC,aAAY,EAAGC,iBAAgB,EAAGC,kBAAiB,EAAGC,kBAAiB,EAAGC,eAAc,EAAGC,aAAY,GAAIC,GAAG,CAAC,SAAS,KAAK,MAAM,KAA6H,SAASC,GAAG1d,EAAEE,EAAEtG,GAAG,OAAO,MAAMsG,GAAG,mBAAmBA,GAAG,KAAKA,EAAE,GAAGtG,GAAG,kBAAkBsG,GAAG,IAAIA,GAAG2a,GAAGtb,eAAeS,IAAI6a,GAAG7a,IAAI,GAAGE,GAAG+V,OAAO/V,EAAE,IAAI,CACzb,SAASyd,GAAG3d,EAAEE,GAAa,IAAI,IAAItG,KAAlBoG,EAAEA,EAAE4d,MAAmB1d,EAAE,GAAGA,EAAEX,eAAe3F,GAAG,CAAC,IAAIuG,EAAE,IAAIvG,EAAEikB,QAAQ,MAAMzd,EAAEsd,GAAG9jB,EAAEsG,EAAEtG,GAAGuG,GAAG,UAAUvG,IAAIA,EAAE,YAAYuG,EAAEH,EAAE8d,YAAYlkB,EAAEwG,GAAGJ,EAAEpG,GAAGwG,CAAC,CAAC,CADYf,OAAO/E,KAAKugB,IAAIjH,QAAQ,SAAS5T,GAAGyd,GAAG7J,QAAQ,SAAS1T,GAAGA,EAAEA,EAAEF,EAAE+d,OAAO,GAAG9Q,cAAcjN,EAAEge,UAAU,GAAGnD,GAAG3a,GAAG2a,GAAG7a,EAAE,EAAE,GAChI,IAAIie,GAAGpI,EAAE,CAACqI,UAAS,GAAI,CAACC,MAAK,EAAGC,MAAK,EAAGC,IAAG,EAAGC,KAAI,EAAGC,OAAM,EAAGC,IAAG,EAAGC,KAAI,EAAG7hB,OAAM,EAAG8hB,QAAO,EAAGC,MAAK,EAAGC,MAAK,EAAGC,OAAM,EAAGC,QAAO,EAAGC,OAAM,EAAGC,KAAI,IAClT,SAASC,GAAGjf,EAAEE,GAAG,GAAGA,EAAE,CAAC,GAAG+d,GAAGje,KAAK,MAAME,EAAEsZ,UAAU,MAAMtZ,EAAEqZ,yBAAyB,MAAMhhB,MAAMoH,EAAE,IAAIK,IAAI,GAAG,MAAME,EAAEqZ,wBAAwB,CAAC,GAAG,MAAMrZ,EAAEsZ,SAAS,MAAMjhB,MAAMoH,EAAE,KAAK,GAAG,kBAAkBO,EAAEqZ,2BAA2B,WAAWrZ,EAAEqZ,yBAAyB,MAAMhhB,MAAMoH,EAAE,IAAK,CAAC,GAAG,MAAMO,EAAE0d,OAAO,kBAAkB1d,EAAE0d,MAAM,MAAMrlB,MAAMoH,EAAE,IAAK,CAAC,CAClW,SAASuf,GAAGlf,EAAEE,GAAG,IAAI,IAAIF,EAAE6d,QAAQ,KAAK,MAAM,kBAAkB3d,EAAEif,GAAG,OAAOnf,GAAG,IAAK,iBAAiB,IAAK,gBAAgB,IAAK,YAAY,IAAK,gBAAgB,IAAK,gBAAgB,IAAK,mBAAmB,IAAK,iBAAiB,IAAK,gBAAgB,OAAM,EAAG,QAAQ,OAAM,EAAG,CAAC,IAAIof,GAAG,KAAK,SAASC,GAAGrf,GAA6F,OAA1FA,EAAEA,EAAEsf,QAAQtf,EAAEuf,YAAYtQ,QAASuQ,0BAA0Bxf,EAAEA,EAAEwf,yBAAgC,IAAIxf,EAAE2a,SAAS3a,EAAEyf,WAAWzf,CAAC,CAAC,IAAI0f,GAAG,KAAKC,GAAG,KAAKC,GAAG,KACpc,SAASC,GAAG7f,GAAG,GAAGA,EAAE8f,GAAG9f,GAAG,CAAC,GAAG,oBAAoB0f,GAAG,MAAMnnB,MAAMoH,EAAE,MAAM,IAAIO,EAAEF,EAAE+f,UAAU7f,IAAIA,EAAE8f,GAAG9f,GAAGwf,GAAG1f,EAAE+f,UAAU/f,EAAE1H,KAAK4H,GAAG,CAAC,CAAC,SAAS+f,GAAGjgB,GAAG2f,GAAGC,GAAGA,GAAG/Y,KAAK7G,GAAG4f,GAAG,CAAC5f,GAAG2f,GAAG3f,CAAC,CAAC,SAASkgB,KAAK,GAAGP,GAAG,CAAC,IAAI3f,EAAE2f,GAAGzf,EAAE0f,GAAoB,GAAjBA,GAAGD,GAAG,KAAKE,GAAG7f,GAAME,EAAE,IAAIF,EAAE,EAAEA,EAAEE,EAAExD,OAAOsD,IAAI6f,GAAG3f,EAAEF,GAAG,CAAC,CAAC,SAASmgB,GAAGngB,EAAEE,GAAG,OAAOF,EAAEE,EAAE,CAAC,SAASkgB,KAAK,CAAC,IAAIC,IAAG,EAAG,SAASC,GAAGtgB,EAAEE,EAAEtG,GAAG,GAAGymB,GAAG,OAAOrgB,EAAEE,EAAEtG,GAAGymB,IAAG,EAAG,IAAI,OAAOF,GAAGngB,EAAEE,EAAEtG,EAAE,CAAC,QAAWymB,IAAG,GAAG,OAAOV,IAAI,OAAOC,MAAGQ,KAAKF,KAAI,CAAC,CAChb,SAASK,GAAGvgB,EAAEE,GAAG,IAAItG,EAAEoG,EAAE+f,UAAU,GAAG,OAAOnmB,EAAE,OAAO,KAAK,IAAIuG,EAAE6f,GAAGpmB,GAAG,GAAG,OAAOuG,EAAE,OAAO,KAAKvG,EAAEuG,EAAED,GAAGF,EAAE,OAAOE,GAAG,IAAK,UAAU,IAAK,iBAAiB,IAAK,gBAAgB,IAAK,uBAAuB,IAAK,cAAc,IAAK,qBAAqB,IAAK,cAAc,IAAK,qBAAqB,IAAK,YAAY,IAAK,mBAAmB,IAAK,gBAAgBC,GAAGA,EAAEkZ,YAAqBlZ,IAAI,YAAbH,EAAEA,EAAE1H,OAAuB,UAAU0H,GAAG,WAAWA,GAAG,aAAaA,IAAIA,GAAGG,EAAE,MAAMH,EAAE,QAAQA,GAAE,EAAG,GAAGA,EAAE,OAAO,KAAK,GAAGpG,GAAG,oBACleA,EAAE,MAAMrB,MAAMoH,EAAE,IAAIO,SAAStG,IAAI,OAAOA,CAAC,CAAC,IAAI4mB,IAAG,EAAG,GAAG5N,EAAG,IAAI,IAAI6N,GAAG,CAAC,EAAEphB,OAAOgX,eAAeoK,GAAG,UAAU,CAACjR,IAAI,WAAWgR,IAAG,CAAE,IAAIvR,OAAOjK,iBAAiB,OAAOyb,GAAGA,IAAIxR,OAAO9J,oBAAoB,OAAOsb,GAAGA,GAAG,CAAC,MAAMzgB,IAAGwgB,IAAG,CAAE,CAAC,SAASE,GAAG1gB,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,EAAEkB,EAAEI,EAAErB,GAAG,IAAIG,EAAE0C,MAAMvC,UAAUyJ,MAAMzI,KAAK2N,UAAU,GAAG,IAAI/N,EAAE4N,MAAMlU,EAAEuF,EAAE,CAAC,MAAMC,GAAGmJ,KAAKoY,QAAQvhB,EAAE,CAAC,CAAC,IAAIwhB,IAAG,EAAGC,GAAG,KAAKC,IAAG,EAAGC,GAAG,KAAKC,GAAG,CAACL,QAAQ,SAAS3gB,GAAG4gB,IAAG,EAAGC,GAAG7gB,CAAC,GAAG,SAASihB,GAAGjhB,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,EAAEkB,EAAEI,EAAErB,GAAG4hB,IAAG,EAAGC,GAAG,KAAKH,GAAG5S,MAAMkT,GAAG/S,UAAU,CACjW,SAASiT,GAAGlhB,GAAG,IAAIE,EAAEF,EAAEpG,EAAEoG,EAAE,GAAGA,EAAEmhB,UAAU,KAAKjhB,EAAEkhB,QAAQlhB,EAAEA,EAAEkhB,WAAW,CAACphB,EAAEE,EAAE,GAAO,KAAa,MAAjBA,EAAEF,GAASsN,SAAc1T,EAAEsG,EAAEkhB,QAAQphB,EAAEE,EAAEkhB,aAAaphB,EAAE,CAAC,OAAO,IAAIE,EAAE6J,IAAInQ,EAAE,IAAI,CAAC,SAASynB,GAAGrhB,GAAG,GAAG,KAAKA,EAAE+J,IAAI,CAAC,IAAI7J,EAAEF,EAAEshB,cAAsE,GAAxD,OAAOphB,IAAkB,QAAdF,EAAEA,EAAEmhB,aAAqBjhB,EAAEF,EAAEshB,gBAAmB,OAAOphB,EAAE,OAAOA,EAAEqhB,UAAU,CAAC,OAAO,IAAI,CAAC,SAASC,GAAGxhB,GAAG,GAAGkhB,GAAGlhB,KAAKA,EAAE,MAAMzH,MAAMoH,EAAE,KAAM,CAE1S,SAAS8hB,GAAGzhB,GAAW,OAAO,QAAfA,EADtN,SAAYA,GAAG,IAAIE,EAAEF,EAAEmhB,UAAU,IAAIjhB,EAAE,CAAS,GAAG,QAAXA,EAAEghB,GAAGlhB,IAAe,MAAMzH,MAAMoH,EAAE,MAAM,OAAOO,IAAIF,EAAE,KAAKA,CAAC,CAAC,IAAI,IAAIpG,EAAEoG,EAAEG,EAAED,IAAI,CAAC,IAAIE,EAAExG,EAAEwnB,OAAO,GAAG,OAAOhhB,EAAE,MAAM,IAAIrB,EAAEqB,EAAE+gB,UAAU,GAAG,OAAOpiB,EAAE,CAAY,GAAG,QAAdoB,EAAEC,EAAEghB,QAAmB,CAACxnB,EAAEuG,EAAE,QAAQ,CAAC,KAAK,CAAC,GAAGC,EAAEshB,QAAQ3iB,EAAE2iB,MAAM,CAAC,IAAI3iB,EAAEqB,EAAEshB,MAAM3iB,GAAG,CAAC,GAAGA,IAAInF,EAAE,OAAO4nB,GAAGphB,GAAGJ,EAAE,GAAGjB,IAAIoB,EAAE,OAAOqhB,GAAGphB,GAAGF,EAAEnB,EAAEA,EAAE4iB,OAAO,CAAC,MAAMppB,MAAMoH,EAAE,KAAM,CAAC,GAAG/F,EAAEwnB,SAASjhB,EAAEihB,OAAOxnB,EAAEwG,EAAED,EAAEpB,MAAM,CAAC,IAAI,IAAIkB,GAAE,EAAGI,EAAED,EAAEshB,MAAMrhB,GAAG,CAAC,GAAGA,IAAIzG,EAAE,CAACqG,GAAE,EAAGrG,EAAEwG,EAAED,EAAEpB,EAAE,KAAK,CAAC,GAAGsB,IAAIF,EAAE,CAACF,GAAE,EAAGE,EAAEC,EAAExG,EAAEmF,EAAE,KAAK,CAACsB,EAAEA,EAAEshB,OAAO,CAAC,IAAI1hB,EAAE,CAAC,IAAII,EAAEtB,EAAE2iB,MAAMrhB,GAAG,CAAC,GAAGA,IAC5fzG,EAAE,CAACqG,GAAE,EAAGrG,EAAEmF,EAAEoB,EAAEC,EAAE,KAAK,CAAC,GAAGC,IAAIF,EAAE,CAACF,GAAE,EAAGE,EAAEpB,EAAEnF,EAAEwG,EAAE,KAAK,CAACC,EAAEA,EAAEshB,OAAO,CAAC,IAAI1hB,EAAE,MAAM1H,MAAMoH,EAAE,KAAM,CAAC,CAAC,GAAG/F,EAAEunB,YAAYhhB,EAAE,MAAM5H,MAAMoH,EAAE,KAAM,CAAC,GAAG,IAAI/F,EAAEmQ,IAAI,MAAMxR,MAAMoH,EAAE,MAAM,OAAO/F,EAAEmmB,UAAUpf,UAAU/G,EAAEoG,EAAEE,CAAC,CAAkB0hB,CAAG5hB,IAAmB6hB,GAAG7hB,GAAG,IAAI,CAAC,SAAS6hB,GAAG7hB,GAAG,GAAG,IAAIA,EAAE+J,KAAK,IAAI/J,EAAE+J,IAAI,OAAO/J,EAAE,IAAIA,EAAEA,EAAE0hB,MAAM,OAAO1hB,GAAG,CAAC,IAAIE,EAAE2hB,GAAG7hB,GAAG,GAAG,OAAOE,EAAE,OAAOA,EAAEF,EAAEA,EAAE2hB,OAAO,CAAC,OAAO,IAAI,CAC1X,IAAIG,GAAG1P,EAAG2P,0BAA0BC,GAAG5P,EAAG6P,wBAAwBC,GAAG9P,EAAG+P,qBAAqBC,GAAGhQ,EAAGiQ,sBAAsBC,GAAElQ,EAAGmQ,aAAaC,GAAGpQ,EAAGqQ,iCAAiCC,GAAGtQ,EAAGuQ,2BAA2BC,GAAGxQ,EAAGyQ,8BAA8BC,GAAG1Q,EAAG2Q,wBAAwBC,GAAG5Q,EAAG6Q,qBAAqBC,GAAG9Q,EAAG+Q,sBAAsBC,GAAG,KAAKC,GAAG,KACvV,IAAIC,GAAGvgB,KAAKwgB,MAAMxgB,KAAKwgB,MAAiC,SAAYvjB,GAAU,OAAPA,KAAK,EAAS,IAAIA,EAAE,GAAG,IAAIwjB,GAAGxjB,GAAGyjB,GAAG,GAAG,CAAC,EAA/ED,GAAGzgB,KAAKwJ,IAAIkX,GAAG1gB,KAAK2gB,IAA4D,IAAIC,GAAG,GAAGC,GAAG,QAC7H,SAASC,GAAG7jB,GAAG,OAAOA,GAAGA,GAAG,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,GAAG,OAAO,GAAG,KAAK,GAAG,OAAO,GAAG,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,OAAS,QAAFA,EAAU,KAAK,QAAQ,KAAK,QAAQ,KAAK,SAAS,KAAK,SAAS,KAAK,SAAS,OAAS,UAAFA,EAAY,KAAK,UAAU,OAAO,UAAU,KAAK,UAAU,OAAO,UAAU,KAAK,UAAU,OAAO,UAAU,KAAK,WAAW,OAAO,WACzgB,QAAQ,OAAOA,EAAE,CAAC,SAAS8jB,GAAG9jB,EAAEE,GAAG,IAAItG,EAAEoG,EAAE+jB,aAAa,GAAG,IAAInqB,EAAE,OAAO,EAAE,IAAIuG,EAAE,EAAEC,EAAEJ,EAAEgkB,eAAejlB,EAAEiB,EAAEikB,YAAYhkB,EAAI,UAAFrG,EAAY,GAAG,IAAIqG,EAAE,CAAC,IAAII,EAAEJ,GAAGG,EAAE,IAAIC,EAAEF,EAAE0jB,GAAGxjB,GAAS,KAALtB,GAAGkB,KAAUE,EAAE0jB,GAAG9kB,GAAI,MAAa,KAAPkB,EAAErG,GAAGwG,GAAQD,EAAE0jB,GAAG5jB,GAAG,IAAIlB,IAAIoB,EAAE0jB,GAAG9kB,IAAI,GAAG,IAAIoB,EAAE,OAAO,EAAE,GAAG,IAAID,GAAGA,IAAIC,GAAG,KAAKD,EAAEE,MAAKA,EAAED,GAAGA,KAAEpB,EAAEmB,GAAGA,IAAQ,KAAKE,GAAG,KAAO,QAAFrB,IAAY,OAAOmB,EAA0C,GAAxC,KAAO,EAAFC,KAAOA,GAAK,GAAFvG,GAA4B,KAAtBsG,EAAEF,EAAEkkB,gBAAwB,IAAIlkB,EAAEA,EAAEmkB,cAAcjkB,GAAGC,EAAE,EAAED,GAAcE,EAAE,IAAbxG,EAAE,GAAG0pB,GAAGpjB,IAAUC,GAAGH,EAAEpG,GAAGsG,IAAIE,EAAE,OAAOD,CAAC,CACvc,SAASikB,GAAGpkB,EAAEE,GAAG,OAAOF,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,OAAOE,EAAE,IAAI,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,OAAOA,EAAE,IAAuJ,QAAQ,OAAO,EAAE,CACrN,SAASmkB,GAAGrkB,GAAgC,OAAO,KAApCA,GAAkB,WAAhBA,EAAE+jB,cAAsC/jB,EAAI,WAAFA,EAAa,WAAW,CAAC,CAAC,SAASskB,KAAK,IAAItkB,EAAE2jB,GAAoC,OAA1B,KAAQ,SAAfA,KAAK,MAAqBA,GAAG,IAAW3jB,CAAC,CAAC,SAASukB,GAAGvkB,GAAG,IAAI,IAAIE,EAAE,GAAGtG,EAAE,EAAE,GAAGA,EAAEA,IAAIsG,EAAE2G,KAAK7G,GAAG,OAAOE,CAAC,CAC3a,SAASskB,GAAGxkB,EAAEE,EAAEtG,GAAGoG,EAAE+jB,cAAc7jB,EAAE,YAAYA,IAAIF,EAAEgkB,eAAe,EAAEhkB,EAAEikB,YAAY,IAAGjkB,EAAEA,EAAEykB,YAAWvkB,EAAE,GAAGojB,GAAGpjB,IAAQtG,CAAC,CACzH,SAAS8qB,GAAG1kB,EAAEE,GAAG,IAAItG,EAAEoG,EAAEkkB,gBAAgBhkB,EAAE,IAAIF,EAAEA,EAAEmkB,cAAcvqB,GAAG,CAAC,IAAIuG,EAAE,GAAGmjB,GAAG1pB,GAAGwG,EAAE,GAAGD,EAAEC,EAAEF,EAAEF,EAAEG,GAAGD,IAAIF,EAAEG,IAAID,GAAGtG,IAAIwG,CAAC,CAAC,CAAC,IAAIukB,GAAE,EAAE,SAASC,GAAG5kB,GAAS,OAAO,GAAbA,IAAIA,GAAa,EAAEA,EAAE,KAAO,UAAFA,GAAa,GAAG,UAAU,EAAE,CAAC,CAAC,IAAI6kB,GAAGC,GAAGC,GAAGC,GAAGC,GAAGC,IAAG,EAAGC,GAAG,GAAGC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,IAAIC,IAAIC,GAAG,IAAID,IAAIE,GAAG,GAAGC,GAAG,6PAA6PhS,MAAM,KAChiB,SAASiS,GAAG5lB,EAAEE,GAAG,OAAOF,GAAG,IAAK,UAAU,IAAK,WAAWolB,GAAG,KAAK,MAAM,IAAK,YAAY,IAAK,YAAYC,GAAG,KAAK,MAAM,IAAK,YAAY,IAAK,WAAWC,GAAG,KAAK,MAAM,IAAK,cAAc,IAAK,aAAaC,GAAGM,OAAO3lB,EAAE4lB,WAAW,MAAM,IAAK,oBAAoB,IAAK,qBAAqBL,GAAGI,OAAO3lB,EAAE4lB,WAAW,CACnT,SAASC,GAAG/lB,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,GAAG,OAAG,OAAOiB,GAAGA,EAAEgmB,cAAcjnB,GAASiB,EAAE,CAACimB,UAAU/lB,EAAEgmB,aAAatsB,EAAEusB,iBAAiBhmB,EAAE6lB,YAAYjnB,EAAEqnB,iBAAiB,CAAChmB,IAAI,OAAOF,IAAY,QAARA,EAAE4f,GAAG5f,KAAa4kB,GAAG5kB,IAAIF,IAAEA,EAAEmmB,kBAAkBhmB,EAAED,EAAEF,EAAEomB,iBAAiB,OAAOhmB,IAAI,IAAIF,EAAE2d,QAAQzd,IAAIF,EAAE2G,KAAKzG,GAAUJ,EAAC,CAEpR,SAASqmB,GAAGrmB,GAAG,IAAIE,EAAEomB,GAAGtmB,EAAEsf,QAAQ,GAAG,OAAOpf,EAAE,CAAC,IAAItG,EAAEsnB,GAAGhhB,GAAG,GAAG,OAAOtG,EAAE,GAAW,MAARsG,EAAEtG,EAAEmQ,MAAY,GAAW,QAAR7J,EAAEmhB,GAAGznB,IAA4D,OAA/CoG,EAAEimB,UAAU/lB,OAAE+kB,GAAGjlB,EAAEumB,SAAS,WAAWxB,GAAGnrB,EAAE,QAAgB,GAAG,IAAIsG,GAAGtG,EAAEmmB,UAAUpf,QAAQ2gB,cAAckF,aAAmE,YAArDxmB,EAAEimB,UAAU,IAAIrsB,EAAEmQ,IAAInQ,EAAEmmB,UAAU0G,cAAc,KAAY,CAACzmB,EAAEimB,UAAU,IAAI,CAClT,SAASS,GAAG1mB,GAAG,GAAG,OAAOA,EAAEimB,UAAU,OAAM,EAAG,IAAI,IAAI/lB,EAAEF,EAAEomB,iBAAiB,EAAElmB,EAAExD,QAAQ,CAAC,IAAI9C,EAAE+sB,GAAG3mB,EAAEkmB,aAAalmB,EAAEmmB,iBAAiBjmB,EAAE,GAAGF,EAAEgmB,aAAa,GAAG,OAAOpsB,EAAiG,OAAe,QAARsG,EAAE4f,GAAGlmB,KAAakrB,GAAG5kB,GAAGF,EAAEimB,UAAUrsB,GAAE,EAA3H,IAAIuG,EAAE,IAAtBvG,EAAEoG,EAAEgmB,aAAwBxO,YAAY5d,EAAEtB,KAAKsB,GAAGwlB,GAAGjf,EAAEvG,EAAE0lB,OAAOsH,cAAczmB,GAAGif,GAAG,KAA0Dlf,EAAE2mB,OAAO,CAAC,OAAM,CAAE,CAAC,SAASC,GAAG9mB,EAAEE,EAAEtG,GAAG8sB,GAAG1mB,IAAIpG,EAAEisB,OAAO3lB,EAAE,CAAC,SAAS6mB,KAAK7B,IAAG,EAAG,OAAOE,IAAIsB,GAAGtB,MAAMA,GAAG,MAAM,OAAOC,IAAIqB,GAAGrB,MAAMA,GAAG,MAAM,OAAOC,IAAIoB,GAAGpB,MAAMA,GAAG,MAAMC,GAAG3R,QAAQkT,IAAIrB,GAAG7R,QAAQkT,GAAG,CACnf,SAASE,GAAGhnB,EAAEE,GAAGF,EAAEimB,YAAY/lB,IAAIF,EAAEimB,UAAU,KAAKf,KAAKA,IAAG,EAAG9S,EAAG2P,0BAA0B3P,EAAG2Q,wBAAwBgE,KAAK,CAC5H,SAASE,GAAGjnB,GAAG,SAASE,EAAEA,GAAG,OAAO8mB,GAAG9mB,EAAEF,EAAE,CAAC,GAAG,EAAEmlB,GAAGzoB,OAAO,CAACsqB,GAAG7B,GAAG,GAAGnlB,GAAG,IAAI,IAAIpG,EAAE,EAAEA,EAAEurB,GAAGzoB,OAAO9C,IAAI,CAAC,IAAIuG,EAAEglB,GAAGvrB,GAAGuG,EAAE8lB,YAAYjmB,IAAIG,EAAE8lB,UAAU,KAAK,CAAC,CAAyF,IAAxF,OAAOb,IAAI4B,GAAG5B,GAAGplB,GAAG,OAAOqlB,IAAI2B,GAAG3B,GAAGrlB,GAAG,OAAOslB,IAAI0B,GAAG1B,GAAGtlB,GAAGulB,GAAG3R,QAAQ1T,GAAGulB,GAAG7R,QAAQ1T,GAAOtG,EAAE,EAAEA,EAAE8rB,GAAGhpB,OAAO9C,KAAIuG,EAAEulB,GAAG9rB,IAAKqsB,YAAYjmB,IAAIG,EAAE8lB,UAAU,MAAM,KAAK,EAAEP,GAAGhpB,QAAiB,QAAR9C,EAAE8rB,GAAG,IAAYO,WAAYI,GAAGzsB,GAAG,OAAOA,EAAEqsB,WAAWP,GAAGmB,OAAO,CAAC,IAAIK,GAAGvS,EAAGwS,wBAAwBC,IAAG,EAC5a,SAASC,GAAGrnB,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAEukB,GAAE5lB,EAAEmoB,GAAGI,WAAWJ,GAAGI,WAAW,KAAK,IAAI3C,GAAE,EAAE4C,GAAGvnB,EAAEE,EAAEtG,EAAEuG,EAAE,CAAC,QAAQwkB,GAAEvkB,EAAE8mB,GAAGI,WAAWvoB,CAAC,CAAC,CAAC,SAASyoB,GAAGxnB,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAEukB,GAAE5lB,EAAEmoB,GAAGI,WAAWJ,GAAGI,WAAW,KAAK,IAAI3C,GAAE,EAAE4C,GAAGvnB,EAAEE,EAAEtG,EAAEuG,EAAE,CAAC,QAAQwkB,GAAEvkB,EAAE8mB,GAAGI,WAAWvoB,CAAC,CAAC,CACjO,SAASwoB,GAAGvnB,EAAEE,EAAEtG,EAAEuG,GAAG,GAAGinB,GAAG,CAAC,IAAIhnB,EAAEumB,GAAG3mB,EAAEE,EAAEtG,EAAEuG,GAAG,GAAG,OAAOC,EAAEqnB,GAAGznB,EAAEE,EAAEC,EAAEpC,GAAGnE,GAAGgsB,GAAG5lB,EAAEG,QAAQ,GANtF,SAAYH,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,OAAOF,GAAG,IAAK,UAAU,OAAOklB,GAAGW,GAAGX,GAAGplB,EAAEE,EAAEtG,EAAEuG,EAAEC,IAAG,EAAG,IAAK,YAAY,OAAOilB,GAAGU,GAAGV,GAAGrlB,EAAEE,EAAEtG,EAAEuG,EAAEC,IAAG,EAAG,IAAK,YAAY,OAAOklB,GAAGS,GAAGT,GAAGtlB,EAAEE,EAAEtG,EAAEuG,EAAEC,IAAG,EAAG,IAAK,cAAc,IAAIrB,EAAEqB,EAAE0lB,UAAkD,OAAxCP,GAAGjP,IAAIvX,EAAEgnB,GAAGR,GAAG/V,IAAIzQ,IAAI,KAAKiB,EAAEE,EAAEtG,EAAEuG,EAAEC,KAAU,EAAG,IAAK,oBAAoB,OAAOrB,EAAEqB,EAAE0lB,UAAUL,GAAGnP,IAAIvX,EAAEgnB,GAAGN,GAAGjW,IAAIzQ,IAAI,KAAKiB,EAAEE,EAAEtG,EAAEuG,EAAEC,KAAI,EAAG,OAAM,CAAE,CAM1QsnB,CAAGtnB,EAAEJ,EAAEE,EAAEtG,EAAEuG,GAAGA,EAAEwnB,uBAAuB,GAAG/B,GAAG5lB,EAAEG,GAAK,EAAFD,IAAM,EAAEylB,GAAG9H,QAAQ7d,GAAG,CAAC,KAAK,OAAOI,GAAG,CAAC,IAAIrB,EAAE+gB,GAAG1f,GAA0D,GAAvD,OAAOrB,GAAG8lB,GAAG9lB,GAAiB,QAAdA,EAAE4nB,GAAG3mB,EAAEE,EAAEtG,EAAEuG,KAAasnB,GAAGznB,EAAEE,EAAEC,EAAEpC,GAAGnE,GAAMmF,IAAIqB,EAAE,MAAMA,EAAErB,CAAC,CAAC,OAAOqB,GAAGD,EAAEwnB,iBAAiB,MAAMF,GAAGznB,EAAEE,EAAEC,EAAE,KAAKvG,EAAE,CAAC,CAAC,IAAImE,GAAG,KACpU,SAAS4oB,GAAG3mB,EAAEE,EAAEtG,EAAEuG,GAA2B,GAAxBpC,GAAG,KAAwB,QAAXiC,EAAEsmB,GAAVtmB,EAAEqf,GAAGlf,KAAuB,GAAW,QAARD,EAAEghB,GAAGlhB,IAAYA,EAAE,UAAU,GAAW,MAARpG,EAAEsG,EAAE6J,KAAW,CAAS,GAAG,QAAX/J,EAAEqhB,GAAGnhB,IAAe,OAAOF,EAAEA,EAAE,IAAI,MAAM,GAAG,IAAIpG,EAAE,CAAC,GAAGsG,EAAE6f,UAAUpf,QAAQ2gB,cAAckF,aAAa,OAAO,IAAItmB,EAAE6J,IAAI7J,EAAE6f,UAAU0G,cAAc,KAAKzmB,EAAE,IAAI,MAAME,IAAIF,IAAIA,EAAE,MAAW,OAALjC,GAAGiC,EAAS,IAAI,CAC7S,SAAS4nB,GAAG5nB,GAAG,OAAOA,GAAG,IAAK,SAAS,IAAK,QAAQ,IAAK,QAAQ,IAAK,cAAc,IAAK,OAAO,IAAK,MAAM,IAAK,WAAW,IAAK,WAAW,IAAK,UAAU,IAAK,YAAY,IAAK,OAAO,IAAK,UAAU,IAAK,WAAW,IAAK,QAAQ,IAAK,UAAU,IAAK,UAAU,IAAK,WAAW,IAAK,QAAQ,IAAK,YAAY,IAAK,UAAU,IAAK,QAAQ,IAAK,QAAQ,IAAK,OAAO,IAAK,gBAAgB,IAAK,cAAc,IAAK,YAAY,IAAK,aAAa,IAAK,QAAQ,IAAK,SAAS,IAAK,SAAS,IAAK,SAAS,IAAK,cAAc,IAAK,WAAW,IAAK,aAAa,IAAK,eAAe,IAAK,SAAS,IAAK,kBAAkB,IAAK,YAAY,IAAK,mBAAmB,IAAK,iBAAiB,IAAK,oBAAoB,IAAK,aAAa,IAAK,YAAY,IAAK,cAAc,IAAK,OAAO,IAAK,mBAAmB,IAAK,QAAQ,IAAK,aAAa,IAAK,WAAW,IAAK,SAAS,IAAK,cAAc,OAAO,EAAE,IAAK,OAAO,IAAK,YAAY,IAAK,WAAW,IAAK,YAAY,IAAK,WAAW,IAAK,YAAY,IAAK,WAAW,IAAK,YAAY,IAAK,cAAc,IAAK,aAAa,IAAK,cAAc,IAAK,SAAS,IAAK,SAAS,IAAK,YAAY,IAAK,QAAQ,IAAK,aAAa,IAAK,aAAa,IAAK,eAAe,IAAK,eAAe,OAAO,EACpqC,IAAK,UAAU,OAAOwiB,MAAM,KAAKE,GAAG,OAAO,EAAE,KAAKE,GAAG,OAAO,EAAE,KAAKE,GAAG,KAAKE,GAAG,OAAO,GAAG,KAAKE,GAAG,OAAO,UAAU,QAAQ,OAAO,GAAG,QAAQ,OAAO,GAAG,CAAC,IAAI2E,GAAG,KAAKC,GAAG,KAAKnmB,GAAG,KAAK,SAASomB,KAAK,GAAGpmB,GAAG,OAAOA,GAAG,IAAI3B,EAAkBG,EAAhBD,EAAE4nB,GAAGluB,EAAEsG,EAAExD,OAAS0D,EAAE,UAAUynB,GAAGA,GAAG5P,MAAM4P,GAAGjO,YAAY7a,EAAEqB,EAAE1D,OAAO,IAAIsD,EAAE,EAAEA,EAAEpG,GAAGsG,EAAEF,KAAKI,EAAEJ,GAAGA,KAAK,IAAIC,EAAErG,EAAEoG,EAAE,IAAIG,EAAE,EAAEA,GAAGF,GAAGC,EAAEtG,EAAEuG,KAAKC,EAAErB,EAAEoB,GAAGA,KAAK,OAAOwB,GAAGvB,EAAE2I,MAAM/I,EAAE,EAAEG,EAAE,EAAEA,OAAE,EAAO,CACxY,SAAS6nB,GAAGhoB,GAAG,IAAIE,EAAEF,EAAEioB,QAA+E,MAAvE,aAAajoB,EAAgB,KAAbA,EAAEA,EAAEkoB,WAAgB,KAAKhoB,IAAIF,EAAE,IAAKA,EAAEE,EAAE,KAAKF,IAAIA,EAAE,IAAW,IAAIA,GAAG,KAAKA,EAAEA,EAAE,CAAC,CAAC,SAASmoB,KAAK,OAAM,CAAE,CAAC,SAASC,KAAK,OAAM,CAAE,CAC5K,SAASC,GAAGroB,GAAG,SAASE,EAAEA,EAAEC,EAAEC,EAAErB,EAAEkB,GAA6G,IAAI,IAAIrG,KAAlH2O,KAAK+f,WAAWpoB,EAAEqI,KAAKggB,YAAYnoB,EAAEmI,KAAKjQ,KAAK6H,EAAEoI,KAAKyd,YAAYjnB,EAAEwJ,KAAK+W,OAAOrf,EAAEsI,KAAKigB,cAAc,KAAkBxoB,EAAEA,EAAET,eAAe3F,KAAKsG,EAAEF,EAAEpG,GAAG2O,KAAK3O,GAAGsG,EAAEA,EAAEnB,GAAGA,EAAEnF,IAAgI,OAA5H2O,KAAKkgB,oBAAoB,MAAM1pB,EAAE2pB,iBAAiB3pB,EAAE2pB,kBAAiB,IAAK3pB,EAAE4pB,aAAaR,GAAGC,GAAG7f,KAAKqgB,qBAAqBR,GAAU7f,IAAI,CAC9E,OAD+EsN,EAAE3V,EAAEZ,UAAU,CAACupB,eAAe,WAAWtgB,KAAKmgB,kBAAiB,EAAG,IAAI1oB,EAAEuI,KAAKyd,YAAYhmB,IAAIA,EAAE6oB,eAAe7oB,EAAE6oB,iBAAiB,mBAAmB7oB,EAAE2oB,cAC7e3oB,EAAE2oB,aAAY,GAAIpgB,KAAKkgB,mBAAmBN,GAAG,EAAER,gBAAgB,WAAW,IAAI3nB,EAAEuI,KAAKyd,YAAYhmB,IAAIA,EAAE2nB,gBAAgB3nB,EAAE2nB,kBAAkB,mBAAmB3nB,EAAE8oB,eAAe9oB,EAAE8oB,cAAa,GAAIvgB,KAAKqgB,qBAAqBT,GAAG,EAAEY,QAAQ,WAAW,EAAEC,aAAab,KAAYjoB,CAAC,CACjR,IAAoL+oB,GAAGC,GAAGC,GAAtLC,GAAG,CAACC,WAAW,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,UAAU,SAASxpB,GAAG,OAAOA,EAAEwpB,WAAWrb,KAAKsb,KAAK,EAAEf,iBAAiB,EAAEgB,UAAU,GAAGC,GAAGtB,GAAGe,IAAIQ,GAAG/T,EAAE,CAAC,EAAEuT,GAAG,CAACS,KAAK,EAAEC,OAAO,IAAIC,GAAG1B,GAAGuB,IAAaI,GAAGnU,EAAE,CAAC,EAAE+T,GAAG,CAACK,QAAQ,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,iBAAiBC,GAAGC,OAAO,EAAEC,QAAQ,EAAEC,cAAc,SAAS/qB,GAAG,YAAO,IAASA,EAAE+qB,cAAc/qB,EAAEgrB,cAAchrB,EAAEuf,WAAWvf,EAAEirB,UAAUjrB,EAAEgrB,YAAYhrB,EAAE+qB,aAAa,EAAEG,UAAU,SAASlrB,GAAG,MAAG,cAC3eA,EAASA,EAAEkrB,WAAUlrB,IAAImpB,KAAKA,IAAI,cAAcnpB,EAAE1H,MAAM2wB,GAAGjpB,EAAEiqB,QAAQd,GAAGc,QAAQf,GAAGlpB,EAAEkqB,QAAQf,GAAGe,SAAShB,GAAGD,GAAG,EAAEE,GAAGnpB,GAAUipB,GAAE,EAAEkC,UAAU,SAASnrB,GAAG,MAAM,cAAcA,EAAEA,EAAEmrB,UAAUjC,EAAE,IAAIkC,GAAG/C,GAAG2B,IAAiCqB,GAAGhD,GAA7BxS,EAAE,CAAC,EAAEmU,GAAG,CAACsB,aAAa,KAA4CC,GAAGlD,GAA9BxS,EAAE,CAAC,EAAE+T,GAAG,CAACmB,cAAc,KAA0ES,GAAGnD,GAA5DxS,EAAE,CAAC,EAAEuT,GAAG,CAACqC,cAAc,EAAEC,YAAY,EAAEC,cAAc,KAAcC,GAAG/V,EAAE,CAAC,EAAEuT,GAAG,CAACyC,cAAc,SAAS7rB,GAAG,MAAM,kBAAkBA,EAAEA,EAAE6rB,cAAc5c,OAAO4c,aAAa,IAAIC,GAAGzD,GAAGuD,IAAyBG,GAAG1D,GAArBxS,EAAE,CAAC,EAAEuT,GAAG,CAAClkB,KAAK,KAAc8mB,GAAG,CAACC,IAAI,SACxfC,SAAS,IAAIC,KAAK,YAAYC,GAAG,UAAUC,MAAM,aAAaC,KAAK,YAAYC,IAAI,SAASC,IAAI,KAAKC,KAAK,cAAcC,KAAK,cAAcC,OAAO,aAAaC,gBAAgB,gBAAgBC,GAAG,CAAC,EAAE,YAAY,EAAE,MAAM,GAAG,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,UAAU,GAAG,MAAM,GAAG,QAAQ,GAAG,WAAW,GAAG,SAAS,GAAG,IAAI,GAAG,SAAS,GAAG,WAAW,GAAG,MAAM,GAAG,OAAO,GAAG,YAAY,GAAG,UAAU,GAAG,aAAa,GAAG,YAAY,GAAG,SAAS,GAAG,SAAS,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KACtf,IAAI,KAAK,IAAI,KAAK,IAAI,MAAM,IAAI,MAAM,IAAI,MAAM,IAAI,UAAU,IAAI,aAAa,IAAI,QAAQC,GAAG,CAACC,IAAI,SAASC,QAAQ,UAAUC,KAAK,UAAUC,MAAM,YAAY,SAASC,GAAGntB,GAAG,IAAIE,EAAEqI,KAAKyd,YAAY,OAAO9lB,EAAEyqB,iBAAiBzqB,EAAEyqB,iBAAiB3qB,MAAIA,EAAE8sB,GAAG9sB,OAAME,EAAEF,EAAK,CAAC,SAAS4qB,KAAK,OAAOuC,EAAE,CAChS,IAAIC,GAAGvX,EAAE,CAAC,EAAE+T,GAAG,CAAC1wB,IAAI,SAAS8G,GAAG,GAAGA,EAAE9G,IAAI,CAAC,IAAIgH,EAAE8rB,GAAGhsB,EAAE9G,MAAM8G,EAAE9G,IAAI,GAAG,iBAAiBgH,EAAE,OAAOA,CAAC,CAAC,MAAM,aAAaF,EAAE1H,KAAc,MAAR0H,EAAEgoB,GAAGhoB,IAAU,QAAQ2E,OAAOC,aAAa5E,GAAI,YAAYA,EAAE1H,MAAM,UAAU0H,EAAE1H,KAAKu0B,GAAG7sB,EAAEioB,UAAU,eAAe,EAAE,EAAEoF,KAAK,EAAEne,SAAS,EAAEqb,QAAQ,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,EAAE4C,OAAO,EAAEC,OAAO,EAAE5C,iBAAiBC,GAAG1C,SAAS,SAASloB,GAAG,MAAM,aAAaA,EAAE1H,KAAK0vB,GAAGhoB,GAAG,CAAC,EAAEioB,QAAQ,SAASjoB,GAAG,MAAM,YAAYA,EAAE1H,MAAM,UAAU0H,EAAE1H,KAAK0H,EAAEioB,QAAQ,CAAC,EAAEuF,MAAM,SAASxtB,GAAG,MAAM,aAC7eA,EAAE1H,KAAK0vB,GAAGhoB,GAAG,YAAYA,EAAE1H,MAAM,UAAU0H,EAAE1H,KAAK0H,EAAEioB,QAAQ,CAAC,IAAIwF,GAAGpF,GAAG+E,IAAiIM,GAAGrF,GAA7HxS,EAAE,CAAC,EAAEmU,GAAG,CAAClE,UAAU,EAAE6H,MAAM,EAAEC,OAAO,EAAEC,SAAS,EAAEC,mBAAmB,EAAEC,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAEC,YAAY,EAAEC,UAAU,KAAmIC,GAAG/F,GAArHxS,EAAE,CAAC,EAAE+T,GAAG,CAACyE,QAAQ,EAAEC,cAAc,EAAEC,eAAe,EAAE9D,OAAO,EAAEC,QAAQ,EAAEH,QAAQ,EAAEC,SAAS,EAAEG,iBAAiBC,MAA0E4D,GAAGnG,GAA3DxS,EAAE,CAAC,EAAEuT,GAAG,CAAC5V,aAAa,EAAEkY,YAAY,EAAEC,cAAc,KAAc8C,GAAG5Y,EAAE,CAAC,EAAEmU,GAAG,CAAC0E,OAAO,SAAS1uB,GAAG,MAAM,WAAWA,EAAEA,EAAE0uB,OAAO,gBAAgB1uB,GAAGA,EAAE2uB,YAAY,CAAC,EACnfC,OAAO,SAAS5uB,GAAG,MAAM,WAAWA,EAAEA,EAAE4uB,OAAO,gBAAgB5uB,GAAGA,EAAE6uB,YAAY,eAAe7uB,GAAGA,EAAE8uB,WAAW,CAAC,EAAEC,OAAO,EAAEC,UAAU,IAAIC,GAAG5G,GAAGoG,IAAIS,GAAG,CAAC,EAAE,GAAG,GAAG,IAAIC,GAAGvc,GAAI,qBAAqB3D,OAAOmgB,GAAG,KAAKxc,GAAI,iBAAiBC,WAAWuc,GAAGvc,SAASwc,cAAc,IAAIC,GAAG1c,GAAI,cAAc3D,SAASmgB,GAAGG,GAAG3c,KAAMuc,IAAIC,IAAI,EAAEA,IAAI,IAAIA,IAAII,GAAG7qB,OAAOC,aAAa,IAAI6qB,IAAG,EAC1W,SAASC,GAAG1vB,EAAEE,GAAG,OAAOF,GAAG,IAAK,QAAQ,OAAO,IAAIkvB,GAAGrR,QAAQ3d,EAAE+nB,SAAS,IAAK,UAAU,OAAO,MAAM/nB,EAAE+nB,QAAQ,IAAK,WAAW,IAAK,YAAY,IAAK,WAAW,OAAM,EAAG,QAAQ,OAAM,EAAG,CAAC,SAAS0H,GAAG3vB,GAAc,MAAM,kBAAjBA,EAAEA,EAAE8pB,SAAkC,SAAS9pB,EAAEA,EAAEkF,KAAK,IAAI,CAAC,IAAI0qB,IAAG,EAE9Q,IAAIC,GAAG,CAACC,OAAM,EAAGC,MAAK,EAAGC,UAAS,EAAG,kBAAiB,EAAGC,OAAM,EAAGC,OAAM,EAAGC,QAAO,EAAGC,UAAS,EAAGC,OAAM,EAAGC,QAAO,EAAGC,KAAI,EAAGC,MAAK,EAAGjvB,MAAK,EAAGkvB,KAAI,EAAGC,MAAK,GAAI,SAASC,GAAG3wB,GAAG,IAAIE,EAAEF,GAAGA,EAAEoX,UAAUpX,EAAEoX,SAASvD,cAAc,MAAM,UAAU3T,IAAI2vB,GAAG7vB,EAAE1H,MAAM,aAAa4H,CAAO,CAAC,SAAS0wB,GAAG5wB,EAAEE,EAAEtG,EAAEuG,GAAG8f,GAAG9f,GAAsB,GAAnBD,EAAE2wB,GAAG3wB,EAAE,aAAgBxD,SAAS9C,EAAE,IAAI+vB,GAAG,WAAW,SAAS,KAAK/vB,EAAEuG,GAAGH,EAAE6G,KAAK,CAACiqB,MAAMl3B,EAAEm3B,UAAU7wB,IAAI,CAAC,IAAI8wB,GAAG,KAAKC,GAAG,KAAK,SAASC,GAAGlxB,GAAGmxB,GAAGnxB,EAAE,EAAE,CAAC,SAASoxB,GAAGpxB,GAAe,GAAG+X,EAATsZ,GAAGrxB,IAAY,OAAOA,CAAC,CACpe,SAASsxB,GAAGtxB,EAAEE,GAAG,GAAG,WAAWF,EAAE,OAAOE,CAAC,CAAC,IAAIqxB,IAAG,EAAG,GAAG3e,EAAG,CAAC,IAAI4e,GAAG,GAAG5e,EAAG,CAAC,IAAI6e,GAAG,YAAY5e,SAAS,IAAI4e,GAAG,CAAC,IAAIC,GAAG7e,SAASC,cAAc,OAAO4e,GAAGnd,aAAa,UAAU,WAAWkd,GAAG,oBAAoBC,GAAGC,OAAO,CAACH,GAAGC,EAAE,MAAMD,IAAG,EAAGD,GAAGC,MAAM3e,SAASwc,cAAc,EAAExc,SAASwc,aAAa,CAAC,SAASuC,KAAKZ,KAAKA,GAAGa,YAAY,mBAAmBC,IAAIb,GAAGD,GAAG,KAAK,CAAC,SAASc,GAAG9xB,GAAG,GAAG,UAAUA,EAAEwT,cAAc4d,GAAGH,IAAI,CAAC,IAAI/wB,EAAE,GAAG0wB,GAAG1wB,EAAE+wB,GAAGjxB,EAAEqf,GAAGrf,IAAIsgB,GAAG4Q,GAAGhxB,EAAE,CAAC,CAC/b,SAAS6xB,GAAG/xB,EAAEE,EAAEtG,GAAG,YAAYoG,GAAG4xB,KAAUX,GAAGr3B,GAARo3B,GAAG9wB,GAAU8xB,YAAY,mBAAmBF,KAAK,aAAa9xB,GAAG4xB,IAAI,CAAC,SAASK,GAAGjyB,GAAG,GAAG,oBAAoBA,GAAG,UAAUA,GAAG,YAAYA,EAAE,OAAOoxB,GAAGH,GAAG,CAAC,SAASiB,GAAGlyB,EAAEE,GAAG,GAAG,UAAUF,EAAE,OAAOoxB,GAAGlxB,EAAE,CAAC,SAASiyB,GAAGnyB,EAAEE,GAAG,GAAG,UAAUF,GAAG,WAAWA,EAAE,OAAOoxB,GAAGlxB,EAAE,CAAiE,IAAIkyB,GAAG,oBAAoB/yB,OAAO8f,GAAG9f,OAAO8f,GAA5G,SAAYnf,EAAEE,GAAG,OAAOF,IAAIE,IAAI,IAAIF,GAAG,EAAEA,IAAI,EAAEE,IAAIF,IAAIA,GAAGE,IAAIA,CAAC,EACtW,SAASmyB,GAAGryB,EAAEE,GAAG,GAAGkyB,GAAGpyB,EAAEE,GAAG,OAAM,EAAG,GAAG,kBAAkBF,GAAG,OAAOA,GAAG,kBAAkBE,GAAG,OAAOA,EAAE,OAAM,EAAG,IAAItG,EAAEyF,OAAO/E,KAAK0F,GAAGG,EAAEd,OAAO/E,KAAK4F,GAAG,GAAGtG,EAAE8C,SAASyD,EAAEzD,OAAO,OAAM,EAAG,IAAIyD,EAAE,EAAEA,EAAEvG,EAAE8C,OAAOyD,IAAI,CAAC,IAAIC,EAAExG,EAAEuG,GAAG,IAAI4S,EAAGzS,KAAKJ,EAAEE,KAAKgyB,GAAGpyB,EAAEI,GAAGF,EAAEE,IAAI,OAAM,CAAE,CAAC,OAAM,CAAE,CAAC,SAASkyB,GAAGtyB,GAAG,KAAKA,GAAGA,EAAEoa,YAAYpa,EAAEA,EAAEoa,WAAW,OAAOpa,CAAC,CACtU,SAASuyB,GAAGvyB,EAAEE,GAAG,IAAwBC,EAApBvG,EAAE04B,GAAGtyB,GAAO,IAAJA,EAAE,EAAYpG,GAAG,CAAC,GAAG,IAAIA,EAAE+gB,SAAS,CAA0B,GAAzBxa,EAAEH,EAAEpG,EAAEggB,YAAYld,OAAUsD,GAAGE,GAAGC,GAAGD,EAAE,MAAM,CAACsyB,KAAK54B,EAAE64B,OAAOvyB,EAAEF,GAAGA,EAAEG,CAAC,CAACH,EAAE,CAAC,KAAKpG,GAAG,CAAC,GAAGA,EAAE84B,YAAY,CAAC94B,EAAEA,EAAE84B,YAAY,MAAM1yB,CAAC,CAACpG,EAAEA,EAAE6lB,UAAU,CAAC7lB,OAAE,CAAM,CAACA,EAAE04B,GAAG14B,EAAE,CAAC,CAAC,SAAS+4B,GAAG3yB,EAAEE,GAAG,SAAOF,IAAGE,KAAEF,IAAIE,KAAKF,GAAG,IAAIA,EAAE2a,YAAYza,GAAG,IAAIA,EAAEya,SAASgY,GAAG3yB,EAAEE,EAAEuf,YAAY,aAAazf,EAAEA,EAAE4yB,SAAS1yB,KAAGF,EAAE6yB,4BAAwD,GAA7B7yB,EAAE6yB,wBAAwB3yB,KAAY,CAC9Z,SAAS4yB,KAAK,IAAI,IAAI9yB,EAAEiP,OAAO/O,EAAEgY,IAAKhY,aAAaF,EAAE+yB,mBAAmB,CAAC,IAAI,IAAIn5B,EAAE,kBAAkBsG,EAAE8yB,cAAc9jB,SAASG,IAAI,CAAC,MAAMlP,GAAGvG,GAAE,CAAE,CAAC,IAAGA,EAAyB,MAAMsG,EAAEgY,GAA/BlY,EAAEE,EAAE8yB,eAAgCngB,SAAS,CAAC,OAAO3S,CAAC,CAAC,SAAS+yB,GAAGjzB,GAAG,IAAIE,EAAEF,GAAGA,EAAEoX,UAAUpX,EAAEoX,SAASvD,cAAc,OAAO3T,IAAI,UAAUA,IAAI,SAASF,EAAE1H,MAAM,WAAW0H,EAAE1H,MAAM,QAAQ0H,EAAE1H,MAAM,QAAQ0H,EAAE1H,MAAM,aAAa0H,EAAE1H,OAAO,aAAa4H,GAAG,SAASF,EAAEkzB,gBAAgB,CACxa,SAASC,GAAGnzB,GAAG,IAAIE,EAAE4yB,KAAKl5B,EAAEoG,EAAEozB,YAAYjzB,EAAEH,EAAEqzB,eAAe,GAAGnzB,IAAItG,GAAGA,GAAGA,EAAEof,eAAe2Z,GAAG/4B,EAAEof,cAAcsa,gBAAgB15B,GAAG,CAAC,GAAG,OAAOuG,GAAG8yB,GAAGr5B,GAAG,GAAGsG,EAAEC,EAAE/D,WAAc,KAAR4D,EAAEG,EAAEozB,OAAiBvzB,EAAEE,GAAG,mBAAmBtG,EAAEA,EAAE45B,eAAetzB,EAAEtG,EAAE65B,aAAa1wB,KAAKE,IAAIjD,EAAEpG,EAAEqe,MAAMvb,aAAa,IAAGsD,GAAGE,EAAEtG,EAAEof,eAAenG,WAAW3S,EAAEwzB,aAAazkB,QAAS0kB,aAAa,CAAC3zB,EAAEA,EAAE2zB,eAAe,IAAIvzB,EAAExG,EAAEggB,YAAYld,OAAOqC,EAAEgE,KAAKE,IAAI9C,EAAE/D,MAAMgE,GAAGD,OAAE,IAASA,EAAEozB,IAAIx0B,EAAEgE,KAAKE,IAAI9C,EAAEozB,IAAInzB,IAAIJ,EAAE4zB,QAAQ70B,EAAEoB,IAAIC,EAAED,EAAEA,EAAEpB,EAAEA,EAAEqB,GAAGA,EAAEmyB,GAAG34B,EAAEmF,GAAG,IAAIkB,EAAEsyB,GAAG34B,EACvfuG,GAAGC,GAAGH,IAAI,IAAID,EAAE6zB,YAAY7zB,EAAE8zB,aAAa1zB,EAAEoyB,MAAMxyB,EAAE+zB,eAAe3zB,EAAEqyB,QAAQzyB,EAAEg0B,YAAY/zB,EAAEuyB,MAAMxyB,EAAEi0B,cAAch0B,EAAEwyB,WAAUvyB,EAAEA,EAAEg0B,eAAgBC,SAAS/zB,EAAEoyB,KAAKpyB,EAAEqyB,QAAQzyB,EAAEo0B,kBAAkBr1B,EAAEoB,GAAGH,EAAEq0B,SAASn0B,GAAGF,EAAE4zB,OAAO3zB,EAAEuyB,KAAKvyB,EAAEwyB,UAAUvyB,EAAEo0B,OAAOr0B,EAAEuyB,KAAKvyB,EAAEwyB,QAAQzyB,EAAEq0B,SAASn0B,IAAI,CAAM,IAALA,EAAE,GAAOF,EAAEpG,EAAEoG,EAAEA,EAAEyf,YAAY,IAAIzf,EAAE2a,UAAUza,EAAE2G,KAAK,CAAC0tB,QAAQv0B,EAAEw0B,KAAKx0B,EAAEy0B,WAAWC,IAAI10B,EAAE20B,YAAmD,IAAvC,oBAAoB/6B,EAAEg7B,OAAOh7B,EAAEg7B,QAAYh7B,EAAE,EAAEA,EAAEsG,EAAExD,OAAO9C,KAAIoG,EAAEE,EAAEtG,IAAK26B,QAAQE,WAAWz0B,EAAEw0B,KAAKx0B,EAAEu0B,QAAQI,UAAU30B,EAAE00B,GAAG,CAAC,CACzf,IAAIG,GAAGjiB,GAAI,iBAAiBC,UAAU,IAAIA,SAASwc,aAAayF,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,IAAG,EAC3F,SAASC,GAAGl1B,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEvG,EAAEqV,SAASrV,EAAEA,EAAEiZ,SAAS,IAAIjZ,EAAE+gB,SAAS/gB,EAAEA,EAAEof,cAAcic,IAAI,MAAMH,IAAIA,KAAK5c,EAAG/X,KAAU,mBAALA,EAAE20B,KAAyB7B,GAAG9yB,GAAGA,EAAE,CAAC/D,MAAM+D,EAAEqzB,eAAeD,IAAIpzB,EAAEszB,cAAuFtzB,EAAE,CAAC2zB,YAA3E3zB,GAAGA,EAAE6Y,eAAe7Y,EAAE6Y,cAAc0a,aAAazkB,QAAQ0kB,gBAA+BG,WAAWC,aAAa5zB,EAAE4zB,aAAaC,UAAU7zB,EAAE6zB,UAAUC,YAAY9zB,EAAE8zB,aAAce,IAAI3C,GAAG2C,GAAG70B,KAAK60B,GAAG70B,EAAsB,GAApBA,EAAE0wB,GAAGkE,GAAG,aAAgBr4B,SAASwD,EAAE,IAAIypB,GAAG,WAAW,SAAS,KAAKzpB,EAAEtG,GAAGoG,EAAE6G,KAAK,CAACiqB,MAAM5wB,EAAE6wB,UAAU5wB,IAAID,EAAEof,OAAOwV,KAAK,CACtf,SAASK,GAAGn1B,EAAEE,GAAG,IAAItG,EAAE,CAAC,EAAiF,OAA/EA,EAAEoG,EAAE6T,eAAe3T,EAAE2T,cAAcja,EAAE,SAASoG,GAAG,SAASE,EAAEtG,EAAE,MAAMoG,GAAG,MAAME,EAAStG,CAAC,CAAC,IAAIw7B,GAAG,CAACC,aAAaF,GAAG,YAAY,gBAAgBG,mBAAmBH,GAAG,YAAY,sBAAsBI,eAAeJ,GAAG,YAAY,kBAAkBK,cAAcL,GAAG,aAAa,kBAAkBM,GAAG,CAAC,EAAEC,GAAG,CAAC,EACpF,SAASC,GAAG31B,GAAG,GAAGy1B,GAAGz1B,GAAG,OAAOy1B,GAAGz1B,GAAG,IAAIo1B,GAAGp1B,GAAG,OAAOA,EAAE,IAAYpG,EAARsG,EAAEk1B,GAAGp1B,GAAK,IAAIpG,KAAKsG,EAAE,GAAGA,EAAEX,eAAe3F,IAAIA,KAAK87B,GAAG,OAAOD,GAAGz1B,GAAGE,EAAEtG,GAAG,OAAOoG,CAAC,CAA/X4S,IAAK8iB,GAAG7iB,SAASC,cAAc,OAAO8K,MAAM,mBAAmB3O,gBAAgBmmB,GAAGC,aAAaO,iBAAiBR,GAAGE,mBAAmBM,iBAAiBR,GAAGG,eAAeK,WAAW,oBAAoB3mB,eAAemmB,GAAGI,cAAclO,YAAwJ,IAAIuO,GAAGF,GAAG,gBAAgBG,GAAGH,GAAG,sBAAsBI,GAAGJ,GAAG,kBAAkBK,GAAGL,GAAG,iBAAiBM,GAAG,IAAIzQ,IAAI0Q,GAAG,smBAAsmBviB,MAAM,KAC/lC,SAASwiB,GAAGn2B,EAAEE,GAAG+1B,GAAG3f,IAAItW,EAAEE,GAAGuS,EAAGvS,EAAE,CAACF,GAAG,CAAC,IAAI,IAAIo2B,GAAG,EAAEA,GAAGF,GAAGx5B,OAAO05B,KAAK,CAAC,IAAIC,GAAGH,GAAGE,IAA2DD,GAApDE,GAAGxiB,cAAuD,MAAtCwiB,GAAG,GAAGppB,cAAcopB,GAAGttB,MAAM,IAAiB,CAACotB,GAAGN,GAAG,kBAAkBM,GAAGL,GAAG,wBAAwBK,GAAGJ,GAAG,oBAAoBI,GAAG,WAAW,iBAAiBA,GAAG,UAAU,WAAWA,GAAG,WAAW,UAAUA,GAAGH,GAAG,mBAAmBtjB,EAAG,eAAe,CAAC,WAAW,cAAcA,EAAG,eAAe,CAAC,WAAW,cAAcA,EAAG,iBAAiB,CAAC,aAAa,gBAC7cA,EAAG,iBAAiB,CAAC,aAAa,gBAAgBD,EAAG,WAAW,oEAAoEkB,MAAM,MAAMlB,EAAG,WAAW,uFAAuFkB,MAAM,MAAMlB,EAAG,gBAAgB,CAAC,iBAAiB,WAAW,YAAY,UAAUA,EAAG,mBAAmB,2DAA2DkB,MAAM,MAAMlB,EAAG,qBAAqB,6DAA6DkB,MAAM,MAC/flB,EAAG,sBAAsB,8DAA8DkB,MAAM,MAAM,IAAI2iB,GAAG,6NAA6N3iB,MAAM,KAAK4iB,GAAG,IAAIhkB,IAAI,0CAA0CoB,MAAM,KAAKnJ,OAAO8rB,KACzZ,SAASE,GAAGx2B,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEH,EAAE1H,MAAM,gBAAgB0H,EAAEwoB,cAAc5uB,EAlDjE,SAAYoG,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,EAAEkB,EAAEI,EAAErB,GAA4B,GAAzBiiB,GAAGnT,MAAMvF,KAAK0F,WAAc2S,GAAG,CAAC,IAAGA,GAAgC,MAAMroB,MAAMoH,EAAE,MAA1C,IAAIR,EAAE0hB,GAAGD,IAAG,EAAGC,GAAG,KAA8BC,KAAKA,IAAG,EAAGC,GAAG5hB,EAAE,CAAC,CAkDpEs3B,CAAGt2B,EAAED,OAAE,EAAOF,GAAGA,EAAEwoB,cAAc,IAAI,CACxG,SAAS2I,GAAGnxB,EAAEE,GAAGA,EAAE,KAAO,EAAFA,GAAK,IAAI,IAAItG,EAAE,EAAEA,EAAEoG,EAAEtD,OAAO9C,IAAI,CAAC,IAAIuG,EAAEH,EAAEpG,GAAGwG,EAAED,EAAE2wB,MAAM3wB,EAAEA,EAAE4wB,UAAU/wB,EAAE,CAAC,IAAIjB,OAAE,EAAO,GAAGmB,EAAE,IAAI,IAAID,EAAEE,EAAEzD,OAAO,EAAE,GAAGuD,EAAEA,IAAI,CAAC,IAAII,EAAEF,EAAEF,GAAGjB,EAAEqB,EAAEq2B,SAASv3B,EAAEkB,EAAEmoB,cAA2B,GAAbnoB,EAAEA,EAAE4E,SAAYjG,IAAID,GAAGqB,EAAEwoB,uBAAuB,MAAM5oB,EAAEw2B,GAAGp2B,EAAEC,EAAElB,GAAGJ,EAAEC,CAAC,MAAM,IAAIiB,EAAE,EAAEA,EAAEE,EAAEzD,OAAOuD,IAAI,CAAoD,GAA5CjB,GAAPqB,EAAEF,EAAEF,IAAOy2B,SAASv3B,EAAEkB,EAAEmoB,cAAcnoB,EAAEA,EAAE4E,SAAYjG,IAAID,GAAGqB,EAAEwoB,uBAAuB,MAAM5oB,EAAEw2B,GAAGp2B,EAAEC,EAAElB,GAAGJ,EAAEC,CAAC,CAAC,CAAC,CAAC,GAAG8hB,GAAG,MAAM9gB,EAAE+gB,GAAGD,IAAG,EAAGC,GAAG,KAAK/gB,CAAE,CAC5a,SAAS22B,GAAE32B,EAAEE,GAAG,IAAItG,EAAEsG,EAAE02B,SAAI,IAASh9B,IAAIA,EAAEsG,EAAE02B,IAAI,IAAIrkB,KAAK,IAAIpS,EAAEH,EAAE,WAAWpG,EAAE2V,IAAIpP,KAAK02B,GAAG32B,EAAEF,EAAE,GAAE,GAAIpG,EAAE+Y,IAAIxS,GAAG,CAAC,SAAS22B,GAAG92B,EAAEE,EAAEtG,GAAG,IAAIuG,EAAE,EAAED,IAAIC,GAAG,GAAG02B,GAAGj9B,EAAEoG,EAAEG,EAAED,EAAE,CAAC,IAAI62B,GAAG,kBAAkBh0B,KAAK7G,SAASqI,SAAS,IAAIwE,MAAM,GAAG,SAASiuB,GAAGh3B,GAAG,IAAIA,EAAE+2B,IAAI,CAAC/2B,EAAE+2B,KAAI,EAAGzkB,EAAGsB,QAAQ,SAAS1T,GAAG,oBAAoBA,IAAIq2B,GAAGhnB,IAAIrP,IAAI42B,GAAG52B,GAAE,EAAGF,GAAG82B,GAAG52B,GAAE,EAAGF,GAAG,GAAG,IAAIE,EAAE,IAAIF,EAAE2a,SAAS3a,EAAEA,EAAEgZ,cAAc,OAAO9Y,GAAGA,EAAE62B,MAAM72B,EAAE62B,KAAI,EAAGD,GAAG,mBAAkB,EAAG52B,GAAG,CAAC,CACjb,SAAS22B,GAAG72B,EAAEE,EAAEtG,EAAEuG,GAAG,OAAOynB,GAAG1nB,IAAI,KAAK,EAAE,IAAIE,EAAEinB,GAAG,MAAM,KAAK,EAAEjnB,EAAEonB,GAAG,MAAM,QAAQpnB,EAAEmnB,GAAG3tB,EAAEwG,EAAE62B,KAAK,KAAK/2B,EAAEtG,EAAEoG,GAAGI,OAAE,GAAQogB,IAAI,eAAetgB,GAAG,cAAcA,GAAG,UAAUA,IAAIE,GAAE,GAAID,OAAE,IAASC,EAAEJ,EAAEgF,iBAAiB9E,EAAEtG,EAAE,CAACs9B,SAAQ,EAAGC,QAAQ/2B,IAAIJ,EAAEgF,iBAAiB9E,EAAEtG,GAAE,QAAI,IAASwG,EAAEJ,EAAEgF,iBAAiB9E,EAAEtG,EAAE,CAACu9B,QAAQ/2B,IAAIJ,EAAEgF,iBAAiB9E,EAAEtG,GAAE,EAAG,CAClV,SAAS6tB,GAAGznB,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,IAAIrB,EAAEoB,EAAE,GAAG,KAAO,EAAFD,IAAM,KAAO,EAAFA,IAAM,OAAOC,EAAEH,EAAE,OAAO,CAAC,GAAG,OAAOG,EAAE,OAAO,IAAIF,EAAEE,EAAE4J,IAAI,GAAG,IAAI9J,GAAG,IAAIA,EAAE,CAAC,IAAII,EAAEF,EAAE4f,UAAU0G,cAAc,GAAGpmB,IAAID,GAAG,IAAIC,EAAEsa,UAAUta,EAAEof,aAAarf,EAAE,MAAM,GAAG,IAAIH,EAAE,IAAIA,EAAEE,EAAEihB,OAAO,OAAOnhB,GAAG,CAAC,IAAIjB,EAAEiB,EAAE8J,IAAI,IAAG,IAAI/K,GAAG,IAAIA,MAAKA,EAAEiB,EAAE8f,UAAU0G,iBAAkBrmB,GAAG,IAAIpB,EAAE2b,UAAU3b,EAAEygB,aAAarf,GAAE,OAAOH,EAAEA,EAAEmhB,MAAM,CAAC,KAAK,OAAO/gB,GAAG,CAAS,GAAG,QAAXJ,EAAEqmB,GAAGjmB,IAAe,OAAe,GAAG,KAAXrB,EAAEiB,EAAE8J,MAAc,IAAI/K,EAAE,CAACmB,EAAEpB,EAAEkB,EAAE,SAASD,CAAC,CAACK,EAAEA,EAAEof,UAAU,CAAC,CAACtf,EAAEA,EAAEihB,MAAM,CAACd,GAAG,WAAW,IAAIngB,EAAEpB,EAAEqB,EAAEif,GAAGzlB,GAAGqG,EAAE,GACpfD,EAAE,CAAC,IAAIK,EAAE41B,GAAGzmB,IAAIxP,GAAG,QAAG,IAASK,EAAE,CAAC,IAAIrB,EAAE2qB,GAAGnqB,EAAEQ,EAAE,OAAOA,GAAG,IAAK,WAAW,GAAG,IAAIgoB,GAAGpuB,GAAG,MAAMoG,EAAE,IAAK,UAAU,IAAK,QAAQhB,EAAEyuB,GAAG,MAAM,IAAK,UAAUjuB,EAAE,QAAQR,EAAEusB,GAAG,MAAM,IAAK,WAAW/rB,EAAE,OAAOR,EAAEusB,GAAG,MAAM,IAAK,aAAa,IAAK,YAAYvsB,EAAEusB,GAAG,MAAM,IAAK,QAAQ,GAAG,IAAI3xB,EAAEixB,OAAO,MAAM7qB,EAAE,IAAK,WAAW,IAAK,WAAW,IAAK,YAAY,IAAK,YAAY,IAAK,UAAU,IAAK,WAAW,IAAK,YAAY,IAAK,cAAchB,EAAEosB,GAAG,MAAM,IAAK,OAAO,IAAK,UAAU,IAAK,YAAY,IAAK,WAAW,IAAK,YAAY,IAAK,WAAW,IAAK,YAAY,IAAK,OAAOpsB,EAC1iBqsB,GAAG,MAAM,IAAK,cAAc,IAAK,WAAW,IAAK,YAAY,IAAK,aAAarsB,EAAEovB,GAAG,MAAM,KAAKyH,GAAG,KAAKC,GAAG,KAAKC,GAAG/2B,EAAEwsB,GAAG,MAAM,KAAKwK,GAAGh3B,EAAEwvB,GAAG,MAAM,IAAK,SAASxvB,EAAE+qB,GAAG,MAAM,IAAK,QAAQ/qB,EAAEiwB,GAAG,MAAM,IAAK,OAAO,IAAK,MAAM,IAAK,QAAQjwB,EAAE8sB,GAAG,MAAM,IAAK,oBAAoB,IAAK,qBAAqB,IAAK,gBAAgB,IAAK,cAAc,IAAK,cAAc,IAAK,aAAa,IAAK,cAAc,IAAK,YAAY9sB,EAAE0uB,GAAG,IAAIthB,EAAE,KAAO,EAAFlM,GAAKk3B,GAAGhrB,GAAG,WAAWpM,EAAE0E,EAAE0H,EAAE,OAAO/L,EAAEA,EAAE,UAAU,KAAKA,EAAE+L,EAAE,GAAG,IAAI,IAAQirB,EAAJC,EAAEn3B,EAAI,OAC/em3B,GAAG,CAAK,IAAIC,GAARF,EAAEC,GAAUvX,UAAsF,GAA5E,IAAIsX,EAAEttB,KAAK,OAAOwtB,IAAIF,EAAEE,EAAE,OAAO7yB,IAAc,OAAV6yB,EAAEhX,GAAG+W,EAAE5yB,KAAY0H,EAAEvF,KAAK2wB,GAAGF,EAAEC,EAAEF,MAASD,EAAE,MAAME,EAAEA,EAAElW,MAAM,CAAC,EAAEhV,EAAE1P,SAAS2D,EAAE,IAAIrB,EAAEqB,EAAEb,EAAE,KAAK5F,EAAEwG,GAAGH,EAAE4G,KAAK,CAACiqB,MAAMzwB,EAAE0wB,UAAU3kB,IAAI,CAAC,CAAC,GAAG,KAAO,EAAFlM,GAAK,CAA4E,GAAnClB,EAAE,aAAagB,GAAG,eAAeA,KAAtEK,EAAE,cAAcL,GAAG,gBAAgBA,IAA2CpG,IAAIwlB,MAAK5f,EAAE5F,EAAEmxB,eAAenxB,EAAEoxB,eAAe1E,GAAG9mB,KAAIA,EAAEi4B,OAAgBz4B,GAAGqB,KAAGA,EAAED,EAAE6O,SAAS7O,EAAEA,GAAGC,EAAED,EAAE4Y,eAAe3Y,EAAEqzB,aAAarzB,EAAEq3B,aAAazoB,OAAUjQ,GAAqCA,EAAEmB,EAAiB,QAAfX,GAAnCA,EAAE5F,EAAEmxB,eAAenxB,EAAEqxB,WAAkB3E,GAAG9mB,GAAG,QAC9dA,KAAR43B,EAAElW,GAAG1hB,KAAU,IAAIA,EAAEuK,KAAK,IAAIvK,EAAEuK,OAAKvK,EAAE,QAAUR,EAAE,KAAKQ,EAAEW,GAAKnB,IAAIQ,GAAE,CAAgU,GAA/T4M,EAAEgf,GAAGmM,EAAE,eAAe7yB,EAAE,eAAe4yB,EAAE,QAAW,eAAet3B,GAAG,gBAAgBA,IAAEoM,EAAEshB,GAAG6J,EAAE,iBAAiB7yB,EAAE,iBAAiB4yB,EAAE,WAAUF,EAAE,MAAMp4B,EAAEqB,EAAEgxB,GAAGryB,GAAGq4B,EAAE,MAAM73B,EAAEa,EAAEgxB,GAAG7xB,IAAGa,EAAE,IAAI+L,EAAEmrB,EAAED,EAAE,QAAQt4B,EAAEpF,EAAEwG,IAAKkf,OAAO8X,EAAE/2B,EAAE0qB,cAAcsM,EAAEE,EAAE,KAAKjR,GAAGlmB,KAAKD,KAAIiM,EAAE,IAAIA,EAAE1H,EAAE4yB,EAAE,QAAQ93B,EAAE5F,EAAEwG,IAAKkf,OAAO+X,EAAEjrB,EAAE2e,cAAcqM,EAAEG,EAAEnrB,GAAGgrB,EAAEG,EAAKv4B,GAAGQ,EAAEU,EAAE,CAAa,IAARwE,EAAElF,EAAE83B,EAAE,EAAMD,EAAhBjrB,EAAEpN,EAAkBq4B,EAAEA,EAAEM,GAAGN,GAAGC,IAAQ,IAAJD,EAAE,EAAME,EAAE7yB,EAAE6yB,EAAEA,EAAEI,GAAGJ,GAAGF,IAAI,KAAK,EAAEC,EAAED,GAAGjrB,EAAEurB,GAAGvrB,GAAGkrB,IAAI,KAAK,EAAED,EAAEC,GAAG5yB,EACpfizB,GAAGjzB,GAAG2yB,IAAI,KAAKC,KAAK,CAAC,GAAGlrB,IAAI1H,GAAG,OAAOA,GAAG0H,IAAI1H,EAAEyc,UAAU,MAAMjhB,EAAEkM,EAAEurB,GAAGvrB,GAAG1H,EAAEizB,GAAGjzB,EAAE,CAAC0H,EAAE,IAAI,MAAMA,EAAE,KAAK,OAAOpN,GAAG44B,GAAG33B,EAAEI,EAAErB,EAAEoN,GAAE,GAAI,OAAO5M,GAAG,OAAO43B,GAAGQ,GAAG33B,EAAEm3B,EAAE53B,EAAE4M,GAAE,EAAG,CAA8D,GAAG,YAA1CpN,GAAjBqB,EAAEF,EAAEkxB,GAAGlxB,GAAG8O,QAAWmI,UAAU/W,EAAE+W,SAASvD,gBAA+B,UAAU7U,GAAG,SAASqB,EAAE/H,KAAK,IAAIu/B,EAAGvG,QAAQ,GAAGX,GAAGtwB,GAAG,GAAGkxB,GAAGsG,EAAG1F,OAAO,CAAC0F,EAAG5F,GAAG,IAAI6F,EAAG/F,EAAE,MAAM/yB,EAAEqB,EAAE+W,WAAW,UAAUpY,EAAE6U,gBAAgB,aAAaxT,EAAE/H,MAAM,UAAU+H,EAAE/H,QAAQu/B,EAAG3F,IACrV,OAD4V2F,IAAKA,EAAGA,EAAG73B,EAAEG,IAAKywB,GAAG3wB,EAAE43B,EAAGj+B,EAAEwG,IAAW03B,GAAIA,EAAG93B,EAAEK,EAAEF,GAAG,aAAaH,IAAI83B,EAAGz3B,EAAEkY,gBAClfuf,EAAGnf,YAAY,WAAWtY,EAAE/H,MAAMwgB,GAAGzY,EAAE,SAASA,EAAE4X,QAAO6f,EAAG33B,EAAEkxB,GAAGlxB,GAAG8O,OAAcjP,GAAG,IAAK,WAAa2wB,GAAGmH,IAAK,SAASA,EAAG5E,mBAAgB4B,GAAGgD,EAAG/C,GAAG50B,EAAE60B,GAAG,MAAK,MAAM,IAAK,WAAWA,GAAGD,GAAGD,GAAG,KAAK,MAAM,IAAK,YAAYG,IAAG,EAAG,MAAM,IAAK,cAAc,IAAK,UAAU,IAAK,UAAUA,IAAG,EAAGC,GAAGj1B,EAAErG,EAAEwG,GAAG,MAAM,IAAK,kBAAkB,GAAGy0B,GAAG,MAAM,IAAK,UAAU,IAAK,QAAQK,GAAGj1B,EAAErG,EAAEwG,GAAG,IAAI23B,EAAG,GAAG5I,GAAGjvB,EAAE,CAAC,OAAOF,GAAG,IAAK,mBAAmB,IAAIg4B,EAAG,qBAAqB,MAAM93B,EAAE,IAAK,iBAAiB83B,EAAG,mBACpe,MAAM93B,EAAE,IAAK,oBAAoB83B,EAAG,sBAAsB,MAAM93B,EAAE83B,OAAG,CAAM,MAAMpI,GAAGF,GAAG1vB,EAAEpG,KAAKo+B,EAAG,oBAAoB,YAAYh4B,GAAG,MAAMpG,EAAEquB,UAAU+P,EAAG,sBAAsBA,IAAKzI,IAAI,OAAO31B,EAAE2zB,SAASqC,IAAI,uBAAuBoI,EAAG,qBAAqBA,GAAIpI,KAAKmI,EAAGhQ,OAAYD,GAAG,UAARD,GAAGznB,GAAkBynB,GAAG5P,MAAM4P,GAAGjO,YAAYgW,IAAG,IAAiB,GAAZkI,EAAGjH,GAAG1wB,EAAE63B,IAASt7B,SAASs7B,EAAG,IAAIjM,GAAGiM,EAAGh4B,EAAE,KAAKpG,EAAEwG,GAAGH,EAAE4G,KAAK,CAACiqB,MAAMkH,EAAGjH,UAAU+G,IAAKC,EAAGC,EAAG9yB,KAAK6yB,EAAa,QAATA,EAAGpI,GAAG/1B,MAAeo+B,EAAG9yB,KAAK6yB,MAAUA,EAAGzI,GA5BhM,SAAYtvB,EAAEE,GAAG,OAAOF,GAAG,IAAK,iBAAiB,OAAO2vB,GAAGzvB,GAAG,IAAK,WAAW,OAAG,KAAKA,EAAEstB,MAAa,MAAKiC,IAAG,EAAUD,IAAG,IAAK,YAAY,OAAOxvB,EAAEE,EAAEgF,QAASsqB,IAAIC,GAAG,KAAKzvB,EAAE,QAAQ,OAAO,KAAK,CA4BEi4B,CAAGj4B,EAAEpG,GA3Bzd,SAAYoG,EAAEE,GAAG,GAAG0vB,GAAG,MAAM,mBAAmB5vB,IAAImvB,IAAIO,GAAG1vB,EAAEE,IAAIF,EAAE+nB,KAAKpmB,GAAGmmB,GAAGD,GAAG,KAAK+H,IAAG,EAAG5vB,GAAG,KAAK,OAAOA,GAAG,IAAK,QAAgQ,QAAQ,OAAO,KAA3P,IAAK,WAAW,KAAKE,EAAEqqB,SAASrqB,EAAEuqB,QAAQvqB,EAAEwqB,UAAUxqB,EAAEqqB,SAASrqB,EAAEuqB,OAAO,CAAC,GAAGvqB,EAAEg4B,MAAM,EAAEh4B,EAAEg4B,KAAKx7B,OAAO,OAAOwD,EAAEg4B,KAAK,GAAGh4B,EAAEstB,MAAM,OAAO7oB,OAAOC,aAAa1E,EAAEstB,MAAM,CAAC,OAAO,KAAK,IAAK,iBAAiB,OAAO+B,IAAI,OAAOrvB,EAAEqtB,OAAO,KAAKrtB,EAAEgF,KAAyB,CA2BqFizB,CAAGn4B,EAAEpG,MACje,GADoeuG,EAAE0wB,GAAG1wB,EAAE,kBACvezD,SAAS0D,EAAE,IAAI2rB,GAAG,gBAAgB,cAAc,KAAKnyB,EAAEwG,GAAGH,EAAE4G,KAAK,CAACiqB,MAAM1wB,EAAE2wB,UAAU5wB,IAAIC,EAAE8E,KAAK6yB,GAAG,CAAC5G,GAAGlxB,EAAEC,EAAE,EAAE,CAAC,SAASs3B,GAAGx3B,EAAEE,EAAEtG,GAAG,MAAM,CAAC88B,SAAS12B,EAAEiF,SAAS/E,EAAEsoB,cAAc5uB,EAAE,CAAC,SAASi3B,GAAG7wB,EAAEE,GAAG,IAAI,IAAItG,EAAEsG,EAAE,UAAUC,EAAE,GAAG,OAAOH,GAAG,CAAC,IAAII,EAAEJ,EAAEjB,EAAEqB,EAAE2f,UAAU,IAAI3f,EAAE2J,KAAK,OAAOhL,IAAIqB,EAAErB,EAAY,OAAVA,EAAEwhB,GAAGvgB,EAAEpG,KAAYuG,EAAEi4B,QAAQZ,GAAGx3B,EAAEjB,EAAEqB,IAAc,OAAVrB,EAAEwhB,GAAGvgB,EAAEE,KAAYC,EAAE0G,KAAK2wB,GAAGx3B,EAAEjB,EAAEqB,KAAKJ,EAAEA,EAAEohB,MAAM,CAAC,OAAOjhB,CAAC,CAAC,SAASw3B,GAAG33B,GAAG,GAAG,OAAOA,EAAE,OAAO,KAAK,GAAGA,EAAEA,EAAEohB,aAAaphB,GAAG,IAAIA,EAAE+J,KAAK,OAAO/J,GAAI,IAAI,CACnd,SAAS43B,GAAG53B,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,IAAI,IAAIrB,EAAEmB,EAAEooB,WAAWroB,EAAE,GAAG,OAAOrG,GAAGA,IAAIuG,GAAG,CAAC,IAAIE,EAAEzG,EAAEoF,EAAEqB,EAAE8gB,UAAUhiB,EAAEkB,EAAE0f,UAAU,GAAG,OAAO/gB,GAAGA,IAAImB,EAAE,MAAM,IAAIE,EAAE0J,KAAK,OAAO5K,IAAIkB,EAAElB,EAAEiB,EAAa,OAAVpB,EAAEuhB,GAAG3mB,EAAEmF,KAAYkB,EAAEm4B,QAAQZ,GAAG59B,EAAEoF,EAAEqB,IAAKD,GAAc,OAAVpB,EAAEuhB,GAAG3mB,EAAEmF,KAAYkB,EAAE4G,KAAK2wB,GAAG59B,EAAEoF,EAAEqB,KAAMzG,EAAEA,EAAEwnB,MAAM,CAAC,IAAInhB,EAAEvD,QAAQsD,EAAE6G,KAAK,CAACiqB,MAAM5wB,EAAE6wB,UAAU9wB,GAAG,CAAC,IAAIo4B,GAAG,SAASC,GAAG,iBAAiB,SAASC,GAAGv4B,GAAG,OAAO,kBAAkBA,EAAEA,EAAE,GAAGA,GAAGyU,QAAQ4jB,GAAG,MAAM5jB,QAAQ6jB,GAAG,GAAG,CAAC,SAASE,GAAGx4B,EAAEE,EAAEtG,GAAW,GAARsG,EAAEq4B,GAAGr4B,GAAMq4B,GAAGv4B,KAAKE,GAAGtG,EAAE,MAAMrB,MAAMoH,EAAE,KAAM,CAAC,SAAS84B,KAAK,CAC9e,IAAIC,GAAG,KAAKC,GAAG,KAAK,SAASC,GAAG54B,EAAEE,GAAG,MAAM,aAAaF,GAAG,aAAaA,GAAG,kBAAkBE,EAAEsZ,UAAU,kBAAkBtZ,EAAEsZ,UAAU,kBAAkBtZ,EAAEqZ,yBAAyB,OAAOrZ,EAAEqZ,yBAAyB,MAAMrZ,EAAEqZ,wBAAwBsf,MAAM,CAC5P,IAAIC,GAAG,oBAAoBC,WAAWA,gBAAW,EAAOC,GAAG,oBAAoBC,aAAaA,kBAAa,EAAOC,GAAG,oBAAoBC,QAAQA,aAAQ,EAAOC,GAAG,oBAAoBC,eAAeA,eAAe,qBAAqBH,GAAG,SAASl5B,GAAG,OAAOk5B,GAAGI,QAAQ,MAAMC,KAAKv5B,GAAGw5B,MAAMC,GAAG,EAAEX,GAAG,SAASW,GAAGz5B,GAAG+4B,WAAW,WAAW,MAAM/4B,CAAE,EAAE,CACpV,SAAS05B,GAAG15B,EAAEE,GAAG,IAAItG,EAAEsG,EAAEC,EAAE,EAAE,EAAE,CAAC,IAAIC,EAAExG,EAAE84B,YAA6B,GAAjB1yB,EAAEqa,YAAYzgB,GAAMwG,GAAG,IAAIA,EAAEua,SAAS,GAAY,QAAT/gB,EAAEwG,EAAE8E,MAAc,CAAC,GAAG,IAAI/E,EAA0B,OAAvBH,EAAEqa,YAAYja,QAAG6mB,GAAG/mB,GAAUC,GAAG,KAAK,MAAMvG,GAAG,OAAOA,GAAG,OAAOA,GAAGuG,IAAIvG,EAAEwG,CAAC,OAAOxG,GAAGqtB,GAAG/mB,EAAE,CAAC,SAASy5B,GAAG35B,GAAG,KAAK,MAAMA,EAAEA,EAAEA,EAAE0yB,YAAY,CAAC,IAAIxyB,EAAEF,EAAE2a,SAAS,GAAG,IAAIza,GAAG,IAAIA,EAAE,MAAM,GAAG,IAAIA,EAAE,CAAU,GAAG,OAAZA,EAAEF,EAAEkF,OAAiB,OAAOhF,GAAG,OAAOA,EAAE,MAAM,GAAG,OAAOA,EAAE,OAAO,IAAI,CAAC,CAAC,OAAOF,CAAC,CACjY,SAAS45B,GAAG55B,GAAGA,EAAEA,EAAE65B,gBAAgB,IAAI,IAAI35B,EAAE,EAAEF,GAAG,CAAC,GAAG,IAAIA,EAAE2a,SAAS,CAAC,IAAI/gB,EAAEoG,EAAEkF,KAAK,GAAG,MAAMtL,GAAG,OAAOA,GAAG,OAAOA,EAAE,CAAC,GAAG,IAAIsG,EAAE,OAAOF,EAAEE,GAAG,KAAK,OAAOtG,GAAGsG,GAAG,CAACF,EAAEA,EAAE65B,eAAe,CAAC,OAAO,IAAI,CAAC,IAAIC,GAAG/2B,KAAK7G,SAASqI,SAAS,IAAIwE,MAAM,GAAGgxB,GAAG,gBAAgBD,GAAGE,GAAG,gBAAgBF,GAAGrC,GAAG,oBAAoBqC,GAAGlD,GAAG,iBAAiBkD,GAAGG,GAAG,oBAAoBH,GAAGI,GAAG,kBAAkBJ,GAClX,SAASxT,GAAGtmB,GAAG,IAAIE,EAAEF,EAAE+5B,IAAI,GAAG75B,EAAE,OAAOA,EAAE,IAAI,IAAItG,EAAEoG,EAAEyf,WAAW7lB,GAAG,CAAC,GAAGsG,EAAEtG,EAAE69B,KAAK79B,EAAEmgC,IAAI,CAAe,GAAdngC,EAAEsG,EAAEihB,UAAa,OAAOjhB,EAAEwhB,OAAO,OAAO9nB,GAAG,OAAOA,EAAE8nB,MAAM,IAAI1hB,EAAE45B,GAAG55B,GAAG,OAAOA,GAAG,CAAC,GAAGpG,EAAEoG,EAAE+5B,IAAI,OAAOngC,EAAEoG,EAAE45B,GAAG55B,EAAE,CAAC,OAAOE,CAAC,CAAKtG,GAAJoG,EAAEpG,GAAM6lB,UAAU,CAAC,OAAO,IAAI,CAAC,SAASK,GAAG9f,GAAkB,QAAfA,EAAEA,EAAE+5B,KAAK/5B,EAAEy3B,MAAc,IAAIz3B,EAAE+J,KAAK,IAAI/J,EAAE+J,KAAK,KAAK/J,EAAE+J,KAAK,IAAI/J,EAAE+J,IAAI,KAAK/J,CAAC,CAAC,SAASqxB,GAAGrxB,GAAG,GAAG,IAAIA,EAAE+J,KAAK,IAAI/J,EAAE+J,IAAI,OAAO/J,EAAE+f,UAAU,MAAMxnB,MAAMoH,EAAE,IAAK,CAAC,SAASqgB,GAAGhgB,GAAG,OAAOA,EAAEg6B,KAAK,IAAI,CAAC,IAAIG,GAAG,GAAGC,IAAI,EAAE,SAASC,GAAGr6B,GAAG,MAAM,CAACW,QAAQX,EAAE,CACve,SAASs6B,GAAEt6B,GAAG,EAAEo6B,KAAKp6B,EAAEW,QAAQw5B,GAAGC,IAAID,GAAGC,IAAI,KAAKA,KAAK,CAAC,SAASG,GAAEv6B,EAAEE,GAAGk6B,KAAKD,GAAGC,IAAIp6B,EAAEW,QAAQX,EAAEW,QAAQT,CAAC,CAAC,IAAIs6B,GAAG,CAAC,EAAEC,GAAEJ,GAAGG,IAAIE,GAAGL,IAAG,GAAIM,GAAGH,GAAG,SAASI,GAAG56B,EAAEE,GAAG,IAAItG,EAAEoG,EAAE1H,KAAKuiC,aAAa,IAAIjhC,EAAE,OAAO4gC,GAAG,IAAIr6B,EAAEH,EAAE+f,UAAU,GAAG5f,GAAGA,EAAE26B,8CAA8C56B,EAAE,OAAOC,EAAE46B,0CAA0C,IAASh8B,EAALqB,EAAE,CAAC,EAAI,IAAIrB,KAAKnF,EAAEwG,EAAErB,GAAGmB,EAAEnB,GAAoH,OAAjHoB,KAAIH,EAAEA,EAAE+f,WAAY+a,4CAA4C56B,EAAEF,EAAE+6B,0CAA0C36B,GAAUA,CAAC,CAC9d,SAAS46B,GAAGh7B,GAAyB,OAAO,QAA7BA,EAAEA,EAAEi7B,yBAAmC,IAASj7B,CAAC,CAAC,SAASk7B,KAAKZ,GAAEI,IAAIJ,GAAEG,GAAE,CAAC,SAASU,GAAGn7B,EAAEE,EAAEtG,GAAG,GAAG6gC,GAAE95B,UAAU65B,GAAG,MAAMjiC,MAAMoH,EAAE,MAAM46B,GAAEE,GAAEv6B,GAAGq6B,GAAEG,GAAG9gC,EAAE,CAAC,SAASwhC,GAAGp7B,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEH,EAAE+f,UAAgC,GAAtB7f,EAAEA,EAAE+6B,kBAAqB,oBAAoB96B,EAAEk7B,gBAAgB,OAAOzhC,EAAwB,IAAI,IAAIwG,KAA9BD,EAAEA,EAAEk7B,kBAAiC,KAAKj7B,KAAKF,GAAG,MAAM3H,MAAMoH,EAAE,IAAIsX,EAAGjX,IAAI,UAAUI,IAAI,OAAOyV,EAAE,CAAC,EAAEjc,EAAEuG,EAAE,CACxX,SAASm7B,GAAGt7B,GAA2G,OAAxGA,GAAGA,EAAEA,EAAE+f,YAAY/f,EAAEu7B,2CAA2Cf,GAAGG,GAAGF,GAAE95B,QAAQ45B,GAAEE,GAAEz6B,GAAGu6B,GAAEG,GAAGA,GAAG/5B,UAAe,CAAE,CAAC,SAAS66B,GAAGx7B,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEH,EAAE+f,UAAU,IAAI5f,EAAE,MAAM5H,MAAMoH,EAAE,MAAM/F,GAAGoG,EAAEo7B,GAAGp7B,EAAEE,EAAEy6B,IAAIx6B,EAAEo7B,0CAA0Cv7B,EAAEs6B,GAAEI,IAAIJ,GAAEG,IAAGF,GAAEE,GAAEz6B,IAAIs6B,GAAEI,IAAIH,GAAEG,GAAG9gC,EAAE,CAAC,IAAI6hC,GAAG,KAAKC,IAAG,EAAGC,IAAG,EAAG,SAASC,GAAG57B,GAAG,OAAOy7B,GAAGA,GAAG,CAACz7B,GAAGy7B,GAAG50B,KAAK7G,EAAE,CAChW,SAAS67B,KAAK,IAAIF,IAAI,OAAOF,GAAG,CAACE,IAAG,EAAG,IAAI37B,EAAE,EAAEE,EAAEykB,GAAE,IAAI,IAAI/qB,EAAE6hC,GAAG,IAAI9W,GAAE,EAAE3kB,EAAEpG,EAAE8C,OAAOsD,IAAI,CAAC,IAAIG,EAAEvG,EAAEoG,GAAG,GAAGG,EAAEA,GAAE,SAAU,OAAOA,EAAE,CAACs7B,GAAG,KAAKC,IAAG,CAAE,CAAC,MAAMt7B,GAAG,MAAM,OAAOq7B,KAAKA,GAAGA,GAAG1yB,MAAM/I,EAAE,IAAI8hB,GAAGY,GAAGmZ,IAAIz7B,CAAE,CAAC,QAAQukB,GAAEzkB,EAAEy7B,IAAG,CAAE,CAAC,CAAC,OAAO,IAAI,CAAC,IAAIG,GAAG,GAAGC,GAAG,EAAEC,GAAG,KAAKC,GAAG,EAAEC,GAAG,GAAGC,GAAG,EAAEC,GAAG,KAAKC,GAAG,EAAEC,GAAG,GAAG,SAASC,GAAGv8B,EAAEE,GAAG47B,GAAGC,MAAME,GAAGH,GAAGC,MAAMC,GAAGA,GAAGh8B,EAAEi8B,GAAG/7B,CAAC,CACjV,SAASs8B,GAAGx8B,EAAEE,EAAEtG,GAAGsiC,GAAGC,MAAME,GAAGH,GAAGC,MAAMG,GAAGJ,GAAGC,MAAMC,GAAGA,GAAGp8B,EAAE,IAAIG,EAAEk8B,GAAGr8B,EAAEs8B,GAAG,IAAIl8B,EAAE,GAAGkjB,GAAGnjB,GAAG,EAAEA,KAAK,GAAGC,GAAGxG,GAAG,EAAE,IAAImF,EAAE,GAAGukB,GAAGpjB,GAAGE,EAAE,GAAG,GAAGrB,EAAE,CAAC,IAAIkB,EAAEG,EAAEA,EAAE,EAAErB,GAAGoB,GAAG,GAAGF,GAAG,GAAGsE,SAAS,IAAIpE,IAAIF,EAAEG,GAAGH,EAAEo8B,GAAG,GAAG,GAAG/Y,GAAGpjB,GAAGE,EAAExG,GAAGwG,EAAED,EAAEm8B,GAAGv9B,EAAEiB,CAAC,MAAMq8B,GAAG,GAAGt9B,EAAEnF,GAAGwG,EAAED,EAAEm8B,GAAGt8B,CAAC,CAAC,SAASy8B,GAAGz8B,GAAG,OAAOA,EAAEohB,SAASmb,GAAGv8B,EAAE,GAAGw8B,GAAGx8B,EAAE,EAAE,GAAG,CAAC,SAAS08B,GAAG18B,GAAG,KAAKA,IAAIg8B,IAAIA,GAAGF,KAAKC,IAAID,GAAGC,IAAI,KAAKE,GAAGH,KAAKC,IAAID,GAAGC,IAAI,KAAK,KAAK/7B,IAAIo8B,IAAIA,GAAGF,KAAKC,IAAID,GAAGC,IAAI,KAAKG,GAAGJ,KAAKC,IAAID,GAAGC,IAAI,KAAKE,GAAGH,KAAKC,IAAID,GAAGC,IAAI,IAAI,CAAC,IAAIQ,GAAG,KAAKC,GAAG,KAAKC,IAAE,EAAGC,GAAG,KACje,SAASC,GAAG/8B,EAAEE,GAAG,IAAItG,EAAEojC,GAAG,EAAE,KAAK,KAAK,GAAGpjC,EAAEqjC,YAAY,UAAUrjC,EAAEmmB,UAAU7f,EAAEtG,EAAEwnB,OAAOphB,EAAgB,QAAdE,EAAEF,EAAEk9B,YAAoBl9B,EAAEk9B,UAAU,CAACtjC,GAAGoG,EAAEsN,OAAO,IAAIpN,EAAE2G,KAAKjN,EAAE,CACxJ,SAASujC,GAAGn9B,EAAEE,GAAG,OAAOF,EAAE+J,KAAK,KAAK,EAAE,IAAInQ,EAAEoG,EAAE1H,KAAyE,OAAO,QAA3E4H,EAAE,IAAIA,EAAEya,UAAU/gB,EAAEia,gBAAgB3T,EAAEkX,SAASvD,cAAc,KAAK3T,KAAmBF,EAAE+f,UAAU7f,EAAEy8B,GAAG38B,EAAE48B,GAAGjD,GAAGz5B,EAAEka,aAAY,GAAO,KAAK,EAAE,OAAoD,QAA7Cla,EAAE,KAAKF,EAAEo9B,cAAc,IAAIl9B,EAAEya,SAAS,KAAKza,KAAYF,EAAE+f,UAAU7f,EAAEy8B,GAAG38B,EAAE48B,GAAG,MAAK,GAAO,KAAK,GAAG,OAA+B,QAAxB18B,EAAE,IAAIA,EAAEya,SAAS,KAAKza,KAAYtG,EAAE,OAAOwiC,GAAG,CAACr+B,GAAGs+B,GAAGzzB,SAAS0zB,IAAI,KAAKt8B,EAAEshB,cAAc,CAACC,WAAWrhB,EAAEm9B,YAAYzjC,EAAE0jC,UAAU,aAAY1jC,EAAEojC,GAAG,GAAG,KAAK,KAAK,IAAKjd,UAAU7f,EAAEtG,EAAEwnB,OAAOphB,EAAEA,EAAE0hB,MAAM9nB,EAAE+iC,GAAG38B,EAAE48B,GAClf,MAAK,GAAO,QAAQ,OAAM,EAAG,CAAC,SAASW,GAAGv9B,GAAG,OAAO,KAAY,EAAPA,EAAEw9B,OAAS,KAAa,IAARx9B,EAAEsN,MAAU,CAAC,SAASmwB,GAAGz9B,GAAG,GAAG68B,GAAE,CAAC,IAAI38B,EAAE08B,GAAG,GAAG18B,EAAE,CAAC,IAAItG,EAAEsG,EAAE,IAAIi9B,GAAGn9B,EAAEE,GAAG,CAAC,GAAGq9B,GAAGv9B,GAAG,MAAMzH,MAAMoH,EAAE,MAAMO,EAAEy5B,GAAG//B,EAAE84B,aAAa,IAAIvyB,EAAEw8B,GAAGz8B,GAAGi9B,GAAGn9B,EAAEE,GAAG68B,GAAG58B,EAAEvG,IAAIoG,EAAEsN,OAAe,KAATtN,EAAEsN,MAAY,EAAEuvB,IAAE,EAAGF,GAAG38B,EAAE,CAAC,KAAK,CAAC,GAAGu9B,GAAGv9B,GAAG,MAAMzH,MAAMoH,EAAE,MAAMK,EAAEsN,OAAe,KAATtN,EAAEsN,MAAY,EAAEuvB,IAAE,EAAGF,GAAG38B,CAAC,CAAC,CAAC,CAAC,SAAS09B,GAAG19B,GAAG,IAAIA,EAAEA,EAAEohB,OAAO,OAAOphB,GAAG,IAAIA,EAAE+J,KAAK,IAAI/J,EAAE+J,KAAK,KAAK/J,EAAE+J,KAAK/J,EAAEA,EAAEohB,OAAOub,GAAG38B,CAAC,CACha,SAAS29B,GAAG39B,GAAG,GAAGA,IAAI28B,GAAG,OAAM,EAAG,IAAIE,GAAE,OAAOa,GAAG19B,GAAG68B,IAAE,GAAG,EAAG,IAAI38B,EAAkG,IAA/FA,EAAE,IAAIF,EAAE+J,QAAQ7J,EAAE,IAAIF,EAAE+J,OAAgB7J,EAAE,UAAXA,EAAEF,EAAE1H,OAAmB,SAAS4H,IAAI04B,GAAG54B,EAAE1H,KAAK0H,EAAE49B,gBAAmB19B,IAAIA,EAAE08B,IAAI,CAAC,GAAGW,GAAGv9B,GAAG,MAAM69B,KAAKtlC,MAAMoH,EAAE,MAAM,KAAKO,GAAG68B,GAAG/8B,EAAEE,GAAGA,EAAEy5B,GAAGz5B,EAAEwyB,YAAY,CAAO,GAANgL,GAAG19B,GAAM,KAAKA,EAAE+J,IAAI,CAAgD,KAA7B/J,EAAE,QAApBA,EAAEA,EAAEshB,eAAyBthB,EAAEuhB,WAAW,MAAW,MAAMhpB,MAAMoH,EAAE,MAAMK,EAAE,CAAiB,IAAhBA,EAAEA,EAAE0yB,YAAgBxyB,EAAE,EAAEF,GAAG,CAAC,GAAG,IAAIA,EAAE2a,SAAS,CAAC,IAAI/gB,EAAEoG,EAAEkF,KAAK,GAAG,OAAOtL,EAAE,CAAC,GAAG,IAAIsG,EAAE,CAAC08B,GAAGjD,GAAG35B,EAAE0yB,aAAa,MAAM1yB,CAAC,CAACE,GAAG,KAAK,MAAMtG,GAAG,OAAOA,GAAG,OAAOA,GAAGsG,GAAG,CAACF,EAAEA,EAAE0yB,WAAW,CAACkK,GACjgB,IAAI,CAAC,MAAMA,GAAGD,GAAGhD,GAAG35B,EAAE+f,UAAU2S,aAAa,KAAK,OAAM,CAAE,CAAC,SAASmL,KAAK,IAAI,IAAI79B,EAAE48B,GAAG58B,GAAGA,EAAE25B,GAAG35B,EAAE0yB,YAAY,CAAC,SAASoL,KAAKlB,GAAGD,GAAG,KAAKE,IAAE,CAAE,CAAC,SAASkB,GAAG/9B,GAAG,OAAO88B,GAAGA,GAAG,CAAC98B,GAAG88B,GAAGj2B,KAAK7G,EAAE,CAAC,IAAIg+B,GAAGrpB,EAAGwS,wBAChM,SAAS8W,GAAGj+B,EAAEE,EAAEtG,GAAW,GAAG,QAAXoG,EAAEpG,EAAEgG,MAAiB,oBAAoBI,GAAG,kBAAkBA,EAAE,CAAC,GAAGpG,EAAE8G,OAAO,CAAY,GAAX9G,EAAEA,EAAE8G,OAAY,CAAC,GAAG,IAAI9G,EAAEmQ,IAAI,MAAMxR,MAAMoH,EAAE,MAAM,IAAIQ,EAAEvG,EAAEmmB,SAAS,CAAC,IAAI5f,EAAE,MAAM5H,MAAMoH,EAAE,IAAIK,IAAI,IAAII,EAAED,EAAEpB,EAAE,GAAGiB,EAAE,OAAG,OAAOE,GAAG,OAAOA,EAAEN,KAAK,oBAAoBM,EAAEN,KAAKM,EAAEN,IAAIs+B,aAAan/B,EAASmB,EAAEN,KAAIM,EAAE,SAASF,GAAG,IAAIE,EAAEE,EAAE+9B,KAAK,OAAOn+B,SAASE,EAAEnB,GAAGmB,EAAEnB,GAAGiB,CAAC,EAAEE,EAAEg+B,WAAWn/B,EAASmB,EAAC,CAAC,GAAG,kBAAkBF,EAAE,MAAMzH,MAAMoH,EAAE,MAAM,IAAI/F,EAAE8G,OAAO,MAAMnI,MAAMoH,EAAE,IAAIK,GAAI,CAAC,OAAOA,CAAC,CAC/c,SAASo+B,GAAGp+B,EAAEE,GAAuC,MAApCF,EAAEX,OAAOC,UAAUiF,SAASjE,KAAKJ,GAAS3H,MAAMoH,EAAE,GAAG,oBAAoBK,EAAE,qBAAqBX,OAAO/E,KAAK4F,GAAGgS,KAAK,MAAM,IAAIlS,GAAI,CAAC,SAASq+B,GAAGr+B,GAAiB,OAAOE,EAAfF,EAAEgX,OAAehX,EAAE+W,SAAS,CACrM,SAASunB,GAAGt+B,GAAG,SAASE,EAAEA,EAAEtG,GAAG,GAAGoG,EAAE,CAAC,IAAIG,EAAED,EAAEg9B,UAAU,OAAO/8B,GAAGD,EAAEg9B,UAAU,CAACtjC,GAAGsG,EAAEoN,OAAO,IAAInN,EAAE0G,KAAKjN,EAAE,CAAC,CAAC,SAASA,EAAEA,EAAEuG,GAAG,IAAIH,EAAE,OAAO,KAAK,KAAK,OAAOG,GAAGD,EAAEtG,EAAEuG,GAAGA,EAAEA,EAAEwhB,QAAQ,OAAO,IAAI,CAAC,SAASxhB,EAAEH,EAAEE,GAAG,IAAIF,EAAE,IAAIwlB,IAAI,OAAOtlB,GAAG,OAAOA,EAAEhH,IAAI8G,EAAEsW,IAAIpW,EAAEhH,IAAIgH,GAAGF,EAAEsW,IAAIpW,EAAE8M,MAAM9M,GAAGA,EAAEA,EAAEyhB,QAAQ,OAAO3hB,CAAC,CAAC,SAASI,EAAEJ,EAAEE,GAAsC,OAAnCF,EAAEu+B,GAAGv+B,EAAEE,IAAK8M,MAAM,EAAEhN,EAAE2hB,QAAQ,KAAY3hB,CAAC,CAAC,SAASjB,EAAEmB,EAAEtG,EAAEuG,GAAa,OAAVD,EAAE8M,MAAM7M,EAAMH,EAA6C,QAAjBG,EAAED,EAAEihB,YAA6BhhB,EAAEA,EAAE6M,OAAQpT,GAAGsG,EAAEoN,OAAO,EAAE1T,GAAGuG,GAAED,EAAEoN,OAAO,EAAS1T,IAArGsG,EAAEoN,OAAO,QAAQ1T,EAAqF,CAAC,SAASqG,EAAEC,GACzd,OAD4dF,GAC7f,OAAOE,EAAEihB,YAAYjhB,EAAEoN,OAAO,GAAUpN,CAAC,CAAC,SAASG,EAAEL,EAAEE,EAAEtG,EAAEuG,GAAG,OAAG,OAAOD,GAAG,IAAIA,EAAE6J,MAAW7J,EAAEs+B,GAAG5kC,EAAEoG,EAAEw9B,KAAKr9B,IAAKihB,OAAOphB,EAAEE,KAAEA,EAAEE,EAAEF,EAAEtG,IAAKwnB,OAAOphB,EAASE,EAAC,CAAC,SAASlB,EAAEgB,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIpB,EAAEnF,EAAEtB,KAAK,OAAGyG,IAAI+V,EAAU1V,EAAEY,EAAEE,EAAEtG,EAAE6G,MAAM+Y,SAASrZ,EAAEvG,EAAEV,KAAQ,OAAOgH,IAAIA,EAAE+8B,cAAcl+B,GAAG,kBAAkBA,GAAG,OAAOA,GAAGA,EAAEyB,WAAW+U,GAAI8oB,GAAGt/B,KAAKmB,EAAE5H,QAAa6H,EAAEC,EAAEF,EAAEtG,EAAE6G,QAASb,IAAIq+B,GAAGj+B,EAAEE,EAAEtG,GAAGuG,EAAEihB,OAAOphB,EAAEG,KAAEA,EAAEs+B,GAAG7kC,EAAEtB,KAAKsB,EAAEV,IAAIU,EAAE6G,MAAM,KAAKT,EAAEw9B,KAAKr9B,IAAKP,IAAIq+B,GAAGj+B,EAAEE,EAAEtG,GAAGuG,EAAEihB,OAAOphB,EAASG,EAAC,CAAC,SAAShB,EAAEa,EAAEE,EAAEtG,EAAEuG,GAAG,OAAG,OAAOD,GAAG,IAAIA,EAAE6J,KACjf7J,EAAE6f,UAAU0G,gBAAgB7sB,EAAE6sB,eAAevmB,EAAE6f,UAAU2e,iBAAiB9kC,EAAE8kC,iBAAsBx+B,EAAEy+B,GAAG/kC,EAAEoG,EAAEw9B,KAAKr9B,IAAKihB,OAAOphB,EAAEE,KAAEA,EAAEE,EAAEF,EAAEtG,EAAE4f,UAAU,KAAM4H,OAAOphB,EAASE,EAAC,CAAC,SAASd,EAAEY,EAAEE,EAAEtG,EAAEuG,EAAEpB,GAAG,OAAG,OAAOmB,GAAG,IAAIA,EAAE6J,MAAW7J,EAAE0+B,GAAGhlC,EAAEoG,EAAEw9B,KAAKr9B,EAAEpB,IAAKqiB,OAAOphB,EAAEE,KAAEA,EAAEE,EAAEF,EAAEtG,IAAKwnB,OAAOphB,EAASE,EAAC,CAAC,SAASH,EAAEC,EAAEE,EAAEtG,GAAG,GAAG,kBAAkBsG,GAAG,KAAKA,GAAG,kBAAkBA,EAAE,OAAOA,EAAEs+B,GAAG,GAAGt+B,EAAEF,EAAEw9B,KAAK5jC,IAAKwnB,OAAOphB,EAAEE,EAAE,GAAG,kBAAkBA,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAEM,UAAU,KAAKoU,EAAG,OAAOhb,EAAE6kC,GAAGv+B,EAAE5H,KAAK4H,EAAEhH,IAAIgH,EAAEO,MAAM,KAAKT,EAAEw9B,KAAK5jC,IACjfgG,IAAIq+B,GAAGj+B,EAAE,KAAKE,GAAGtG,EAAEwnB,OAAOphB,EAAEpG,EAAE,KAAKib,EAAG,OAAO3U,EAAEy+B,GAAGz+B,EAAEF,EAAEw9B,KAAK5jC,IAAKwnB,OAAOphB,EAAEE,EAAE,KAAKqV,EAAiB,OAAOxV,EAAEC,GAAEG,EAAnBD,EAAE8W,OAAmB9W,EAAE6W,UAAUnd,GAAG,GAAGqf,GAAG/Y,IAAIyV,EAAGzV,GAAG,OAAOA,EAAE0+B,GAAG1+B,EAAEF,EAAEw9B,KAAK5jC,EAAE,OAAQwnB,OAAOphB,EAAEE,EAAEk+B,GAAGp+B,EAAEE,EAAE,CAAC,OAAO,IAAI,CAAC,SAAS2+B,EAAE7+B,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAE,OAAOF,EAAEA,EAAEhH,IAAI,KAAK,GAAG,kBAAkBU,GAAG,KAAKA,GAAG,kBAAkBA,EAAE,OAAO,OAAOwG,EAAE,KAAKC,EAAEL,EAAEE,EAAE,GAAGtG,EAAEuG,GAAG,GAAG,kBAAkBvG,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAE4G,UAAU,KAAKoU,EAAG,OAAOhb,EAAEV,MAAMkH,EAAEpB,EAAEgB,EAAEE,EAAEtG,EAAEuG,GAAG,KAAK,KAAK0U,EAAG,OAAOjb,EAAEV,MAAMkH,EAAEjB,EAAEa,EAAEE,EAAEtG,EAAEuG,GAAG,KAAK,KAAKoV,EAAG,OAAiBspB,EAAE7+B,EACpfE,GADweE,EAAExG,EAAEod,OACxepd,EAAEmd,UAAU5W,GAAG,GAAG8Y,GAAGrf,IAAI+b,EAAG/b,GAAG,OAAO,OAAOwG,EAAE,KAAKhB,EAAEY,EAAEE,EAAEtG,EAAEuG,EAAE,MAAMi+B,GAAGp+B,EAAEpG,EAAE,CAAC,OAAO,IAAI,CAAC,SAASkR,EAAE9K,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,GAAG,kBAAkBD,GAAG,KAAKA,GAAG,kBAAkBA,EAAE,OAAwBE,EAAEH,EAAnBF,EAAEA,EAAEwP,IAAI5V,IAAI,KAAW,GAAGuG,EAAEC,GAAG,GAAG,kBAAkBD,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAEK,UAAU,KAAKoU,EAAG,OAA2C5V,EAAEkB,EAAtCF,EAAEA,EAAEwP,IAAI,OAAOrP,EAAEjH,IAAIU,EAAEuG,EAAEjH,MAAM,KAAWiH,EAAEC,GAAG,KAAKyU,EAAG,OAA2C1V,EAAEe,EAAtCF,EAAEA,EAAEwP,IAAI,OAAOrP,EAAEjH,IAAIU,EAAEuG,EAAEjH,MAAM,KAAWiH,EAAEC,GAAG,KAAKmV,EAAiB,OAAOzK,EAAE9K,EAAEE,EAAEtG,GAAEmF,EAAvBoB,EAAE6W,OAAuB7W,EAAE4W,UAAU3W,GAAG,GAAG6Y,GAAG9Y,IAAIwV,EAAGxV,GAAG,OAAwBf,EAAEc,EAAnBF,EAAEA,EAAEwP,IAAI5V,IAAI,KAAWuG,EAAEC,EAAE,MAAMg+B,GAAGl+B,EAAEC,EAAE,CAAC,OAAO,IAAI,CAC9f,SAASX,EAAEY,EAAEH,EAAEI,EAAErB,GAAG,IAAI,IAAIG,EAAE,KAAKC,EAAE,KAAKi4B,EAAEp3B,EAAEq3B,EAAEr3B,EAAE,EAAEyE,EAAE,KAAK,OAAO2yB,GAAGC,EAAEj3B,EAAE3D,OAAO46B,IAAI,CAACD,EAAErqB,MAAMsqB,GAAG5yB,EAAE2yB,EAAEA,EAAE,MAAM3yB,EAAE2yB,EAAE1V,QAAQ,IAAIniB,EAAEq/B,EAAEz+B,EAAEi3B,EAAEh3B,EAAEi3B,GAAGt4B,GAAG,GAAG,OAAOQ,EAAE,CAAC,OAAO63B,IAAIA,EAAE3yB,GAAG,KAAK,CAAC1E,GAAGq3B,GAAG,OAAO73B,EAAE2hB,WAAWjhB,EAAEE,EAAEi3B,GAAGp3B,EAAElB,EAAES,EAAES,EAAEq3B,GAAG,OAAOl4B,EAAED,EAAEK,EAAEJ,EAAEuiB,QAAQniB,EAAEJ,EAAEI,EAAE63B,EAAE3yB,CAAC,CAAC,GAAG4yB,IAAIj3B,EAAE3D,OAAO,OAAO9C,EAAEwG,EAAEi3B,GAAGwF,IAAGN,GAAGn8B,EAAEk3B,GAAGn4B,EAAE,GAAG,OAAOk4B,EAAE,CAAC,KAAKC,EAAEj3B,EAAE3D,OAAO46B,IAAkB,QAAdD,EAAEt3B,EAAEK,EAAEC,EAAEi3B,GAAGt4B,MAAciB,EAAElB,EAAEs4B,EAAEp3B,EAAEq3B,GAAG,OAAOl4B,EAAED,EAAEk4B,EAAEj4B,EAAEuiB,QAAQ0V,EAAEj4B,EAAEi4B,GAAc,OAAXwF,IAAGN,GAAGn8B,EAAEk3B,GAAUn4B,CAAC,CAAC,IAAIk4B,EAAEl3B,EAAEC,EAAEi3B,GAAGC,EAAEj3B,EAAE3D,OAAO46B,IAAsB,QAAlB5yB,EAAEoG,EAAEusB,EAAEj3B,EAAEk3B,EAAEj3B,EAAEi3B,GAAGt4B,MAAcgB,GAAG,OAAO0E,EAAEyc,WAAWkW,EAAExR,OAAO,OACvfnhB,EAAExL,IAAIo+B,EAAE5yB,EAAExL,KAAK+G,EAAElB,EAAE2F,EAAEzE,EAAEq3B,GAAG,OAAOl4B,EAAED,EAAEuF,EAAEtF,EAAEuiB,QAAQjd,EAAEtF,EAAEsF,GAAuD,OAApD1E,GAAGq3B,EAAEzjB,QAAQ,SAAS5T,GAAG,OAAOE,EAAEE,EAAEJ,EAAE,GAAG68B,IAAGN,GAAGn8B,EAAEk3B,GAAUn4B,CAAC,CAAC,SAASiN,EAAEhM,EAAEH,EAAEI,EAAErB,GAAG,IAAIG,EAAEwW,EAAGtV,GAAG,GAAG,oBAAoBlB,EAAE,MAAM5G,MAAMoH,EAAE,MAAkB,GAAG,OAAfU,EAAElB,EAAEmB,KAAKD,IAAc,MAAM9H,MAAMoH,EAAE,MAAM,IAAI,IAAI03B,EAAEl4B,EAAE,KAAKC,EAAEa,EAAEq3B,EAAEr3B,EAAE,EAAEyE,EAAE,KAAKlF,EAAEa,EAAEoD,OAAO,OAAOrE,IAAII,EAAEs/B,KAAKxH,IAAI93B,EAAEa,EAAEoD,OAAO,CAACrE,EAAE4N,MAAMsqB,GAAG5yB,EAAEtF,EAAEA,EAAE,MAAMsF,EAAEtF,EAAEuiB,QAAQ,IAAIvV,EAAEyyB,EAAEz+B,EAAEhB,EAAEI,EAAEyY,MAAMjZ,GAAG,GAAG,OAAOoN,EAAE,CAAC,OAAOhN,IAAIA,EAAEsF,GAAG,KAAK,CAAC1E,GAAGZ,GAAG,OAAOgN,EAAE+U,WAAWjhB,EAAEE,EAAEhB,GAAGa,EAAElB,EAAEqN,EAAEnM,EAAEq3B,GAAG,OAAOD,EAAEl4B,EAAEiN,EAAEirB,EAAE1V,QAAQvV,EAAEirB,EAAEjrB,EAAEhN,EAAEsF,CAAC,CAAC,GAAGlF,EAAEs/B,KAAK,OAAOllC,EAAEwG,EACzfhB,GAAGy9B,IAAGN,GAAGn8B,EAAEk3B,GAAGn4B,EAAE,GAAG,OAAOC,EAAE,CAAC,MAAMI,EAAEs/B,KAAKxH,IAAI93B,EAAEa,EAAEoD,OAAwB,QAAjBjE,EAAEO,EAAEK,EAAEZ,EAAEyY,MAAMjZ,MAAciB,EAAElB,EAAES,EAAES,EAAEq3B,GAAG,OAAOD,EAAEl4B,EAAEK,EAAE63B,EAAE1V,QAAQniB,EAAE63B,EAAE73B,GAAc,OAAXq9B,IAAGN,GAAGn8B,EAAEk3B,GAAUn4B,CAAC,CAAC,IAAIC,EAAEe,EAAEC,EAAEhB,IAAII,EAAEs/B,KAAKxH,IAAI93B,EAAEa,EAAEoD,OAA4B,QAArBjE,EAAEsL,EAAE1L,EAAEgB,EAAEk3B,EAAE93B,EAAEyY,MAAMjZ,MAAcgB,GAAG,OAAOR,EAAE2hB,WAAW/hB,EAAEymB,OAAO,OAAOrmB,EAAEtG,IAAIo+B,EAAE93B,EAAEtG,KAAK+G,EAAElB,EAAES,EAAES,EAAEq3B,GAAG,OAAOD,EAAEl4B,EAAEK,EAAE63B,EAAE1V,QAAQniB,EAAE63B,EAAE73B,GAAuD,OAApDQ,GAAGZ,EAAEwU,QAAQ,SAAS5T,GAAG,OAAOE,EAAEE,EAAEJ,EAAE,GAAG68B,IAAGN,GAAGn8B,EAAEk3B,GAAUn4B,CAAC,CAG3T,OAH4T,SAASi4B,EAAEp3B,EAAEG,EAAEpB,EAAEsB,GAAkF,GAA/E,kBAAkBtB,GAAG,OAAOA,GAAGA,EAAEzG,OAAOwc,GAAI,OAAO/V,EAAE7F,MAAM6F,EAAEA,EAAE0B,MAAM+Y,UAAa,kBAAkBza,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAEyB,UAAU,KAAKoU,EAAG5U,EAAE,CAAC,IAAI,IAAIhB,EAC7hBD,EAAE7F,IAAIiG,EAAEgB,EAAE,OAAOhB,GAAG,CAAC,GAAGA,EAAEjG,MAAM8F,EAAE,CAAU,IAATA,EAAED,EAAEzG,QAAYwc,GAAI,GAAG,IAAI3V,EAAE4K,IAAI,CAACnQ,EAAEoG,EAAEb,EAAEwiB,UAASxhB,EAAEC,EAAEjB,EAAEJ,EAAE0B,MAAM+Y,WAAY4H,OAAOphB,EAAEA,EAAEG,EAAE,MAAMH,CAAC,OAAO,GAAGb,EAAE89B,cAAcj+B,GAAG,kBAAkBA,GAAG,OAAOA,GAAGA,EAAEwB,WAAW+U,GAAI8oB,GAAGr/B,KAAKG,EAAE7G,KAAK,CAACsB,EAAEoG,EAAEb,EAAEwiB,UAASxhB,EAAEC,EAAEjB,EAAEJ,EAAE0B,QAASb,IAAIq+B,GAAGj+B,EAAEb,EAAEJ,GAAGoB,EAAEihB,OAAOphB,EAAEA,EAAEG,EAAE,MAAMH,CAAC,CAACpG,EAAEoG,EAAEb,GAAG,KAAK,CAAMe,EAAEF,EAAEb,GAAGA,EAAEA,EAAEwiB,OAAO,CAAC5iB,EAAEzG,OAAOwc,IAAI3U,EAAEy+B,GAAG7/B,EAAE0B,MAAM+Y,SAASxZ,EAAEw9B,KAAKn9B,EAAEtB,EAAE7F,MAAOkoB,OAAOphB,EAAEA,EAAEG,KAAIE,EAAEo+B,GAAG1/B,EAAEzG,KAAKyG,EAAE7F,IAAI6F,EAAE0B,MAAM,KAAKT,EAAEw9B,KAAKn9B,IAAKT,IAAIq+B,GAAGj+B,EAAEG,EAAEpB,GAAGsB,EAAE+gB,OAAOphB,EAAEA,EAAEK,EAAE,CAAC,OAAOJ,EAAED,GAAG,KAAK6U,EAAG7U,EAAE,CAAC,IAAIb,EAAEJ,EAAE7F,IAAI,OACzfiH,GAAG,CAAC,GAAGA,EAAEjH,MAAMiG,EAAC,CAAC,GAAG,IAAIgB,EAAE4J,KAAK5J,EAAE4f,UAAU0G,gBAAgB1nB,EAAE0nB,eAAetmB,EAAE4f,UAAU2e,iBAAiB3/B,EAAE2/B,eAAe,CAAC9kC,EAAEoG,EAAEG,EAAEwhB,UAASxhB,EAAEC,EAAED,EAAEpB,EAAEya,UAAU,KAAM4H,OAAOphB,EAAEA,EAAEG,EAAE,MAAMH,CAAC,CAAMpG,EAAEoG,EAAEG,GAAG,KAAM,CAAKD,EAAEF,EAAEG,GAAGA,EAAEA,EAAEwhB,OAAO,EAACxhB,EAAEw+B,GAAG5/B,EAAEiB,EAAEw9B,KAAKn9B,IAAK+gB,OAAOphB,EAAEA,EAAEG,CAAC,CAAC,OAAOF,EAAED,GAAG,KAAKuV,EAAG,OAAiB6hB,EAAEp3B,EAAEG,GAAdhB,EAAEJ,EAAEiY,OAAcjY,EAAEgY,UAAU1W,GAAG,GAAG4Y,GAAGla,GAAG,OAAOS,EAAEQ,EAAEG,EAAEpB,EAAEsB,GAAG,GAAGsV,EAAG5W,GAAG,OAAOqN,EAAEpM,EAAEG,EAAEpB,EAAEsB,GAAG+9B,GAAGp+B,EAAEjB,EAAE,CAAC,MAAM,kBAAkBA,GAAG,KAAKA,GAAG,kBAAkBA,GAAGA,EAAE,GAAGA,EAAE,OAAOoB,GAAG,IAAIA,EAAE4J,KAAKnQ,EAAEoG,EAAEG,EAAEwhB,UAASxhB,EAAEC,EAAED,EAAEpB,IAAKqiB,OAAOphB,EAAEA,EAAEG,IACnfvG,EAAEoG,EAAEG,IAAGA,EAAEq+B,GAAGz/B,EAAEiB,EAAEw9B,KAAKn9B,IAAK+gB,OAAOphB,EAAEA,EAAEG,GAAGF,EAAED,IAAIpG,EAAEoG,EAAEG,EAAE,CAAS,CAAC,IAAI4+B,GAAGT,IAAG,GAAIU,GAAGV,IAAG,GAAIW,GAAG5E,GAAG,MAAM6E,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAK,SAASC,KAAKD,GAAGD,GAAGD,GAAG,IAAI,CAAC,SAAS3zB,GAAGvL,GAAG,IAAIE,EAAE++B,GAAGt+B,QAAQ25B,GAAE2E,IAAIj/B,EAAEs/B,cAAcp/B,CAAC,CAAC,SAASq/B,GAAGv/B,EAAEE,EAAEtG,GAAG,KAAK,OAAOoG,GAAG,CAAC,IAAIG,EAAEH,EAAEmhB,UAA+H,IAApHnhB,EAAEw/B,WAAWt/B,KAAKA,GAAGF,EAAEw/B,YAAYt/B,EAAE,OAAOC,IAAIA,EAAEq/B,YAAYt/B,IAAI,OAAOC,IAAIA,EAAEq/B,WAAWt/B,KAAKA,IAAIC,EAAEq/B,YAAYt/B,GAAMF,IAAIpG,EAAE,MAAMoG,EAAEA,EAAEohB,MAAM,CAAC,CACnZ,SAASqe,GAAGz/B,EAAEE,GAAGg/B,GAAGl/B,EAAEo/B,GAAGD,GAAG,KAAsB,QAAjBn/B,EAAEA,EAAE0/B,eAAuB,OAAO1/B,EAAE2/B,eAAe,KAAK3/B,EAAE4/B,MAAM1/B,KAAK2/B,IAAG,GAAI7/B,EAAE2/B,aAAa,KAAK,CAAC,SAASG,GAAG9/B,GAAG,IAAIE,EAAEF,EAAEs/B,cAAc,GAAGF,KAAKp/B,EAAE,GAAGA,EAAE,CAAC+/B,QAAQ//B,EAAEggC,cAAc9/B,EAAEuD,KAAK,MAAM,OAAO07B,GAAG,CAAC,GAAG,OAAOD,GAAG,MAAM3mC,MAAMoH,EAAE,MAAMw/B,GAAGn/B,EAAEk/B,GAAGQ,aAAa,CAACE,MAAM,EAAED,aAAa3/B,EAAE,MAAMm/B,GAAGA,GAAG17B,KAAKzD,EAAE,OAAOE,CAAC,CAAC,IAAI+/B,GAAG,KAAK,SAASC,GAAGlgC,GAAG,OAAOigC,GAAGA,GAAG,CAACjgC,GAAGigC,GAAGp5B,KAAK7G,EAAE,CACvY,SAASmgC,GAAGngC,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAEF,EAAEkgC,YAA+E,OAAnE,OAAOhgC,GAAGxG,EAAE6J,KAAK7J,EAAEsmC,GAAGhgC,KAAKtG,EAAE6J,KAAKrD,EAAEqD,KAAKrD,EAAEqD,KAAK7J,GAAGsG,EAAEkgC,YAAYxmC,EAASymC,GAAGrgC,EAAEG,EAAE,CAAC,SAASkgC,GAAGrgC,EAAEE,GAAGF,EAAE4/B,OAAO1/B,EAAE,IAAItG,EAAEoG,EAAEmhB,UAAqC,IAA3B,OAAOvnB,IAAIA,EAAEgmC,OAAO1/B,GAAGtG,EAAEoG,EAAMA,EAAEA,EAAEohB,OAAO,OAAOphB,GAAGA,EAAEw/B,YAAYt/B,EAAgB,QAAdtG,EAAEoG,EAAEmhB,aAAqBvnB,EAAE4lC,YAAYt/B,GAAGtG,EAAEoG,EAAEA,EAAEA,EAAEohB,OAAO,OAAO,IAAIxnB,EAAEmQ,IAAInQ,EAAEmmB,UAAU,IAAI,CAAC,IAAIugB,IAAG,EAAG,SAASC,GAAGvgC,GAAGA,EAAEwgC,YAAY,CAACC,UAAUzgC,EAAEshB,cAAcof,gBAAgB,KAAKC,eAAe,KAAKC,OAAO,CAACC,QAAQ,KAAKT,YAAY,KAAKR,MAAM,GAAGkB,QAAQ,KAAK,CAC/e,SAASC,GAAG/gC,EAAEE,GAAGF,EAAEA,EAAEwgC,YAAYtgC,EAAEsgC,cAAcxgC,IAAIE,EAAEsgC,YAAY,CAACC,UAAUzgC,EAAEygC,UAAUC,gBAAgB1gC,EAAE0gC,gBAAgBC,eAAe3gC,EAAE2gC,eAAeC,OAAO5gC,EAAE4gC,OAAOE,QAAQ9gC,EAAE8gC,SAAS,CAAC,SAASE,GAAGhhC,EAAEE,GAAG,MAAM,CAAC+gC,UAAUjhC,EAAEkhC,KAAKhhC,EAAE6J,IAAI,EAAEo3B,QAAQ,KAAKt9B,SAAS,KAAKJ,KAAK,KAAK,CACtR,SAAS29B,GAAGphC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEH,EAAEwgC,YAAY,GAAG,OAAOrgC,EAAE,OAAO,KAAgB,GAAXA,EAAEA,EAAEygC,OAAU,KAAO,EAAFh6B,IAAK,CAAC,IAAIxG,EAAED,EAAE0gC,QAA+D,OAAvD,OAAOzgC,EAAEF,EAAEuD,KAAKvD,GAAGA,EAAEuD,KAAKrD,EAAEqD,KAAKrD,EAAEqD,KAAKvD,GAAGC,EAAE0gC,QAAQ3gC,EAASmgC,GAAGrgC,EAAEpG,EAAE,CAAoF,OAAnE,QAAhBwG,EAAED,EAAEigC,cAAsBlgC,EAAEuD,KAAKvD,EAAEggC,GAAG//B,KAAKD,EAAEuD,KAAKrD,EAAEqD,KAAKrD,EAAEqD,KAAKvD,GAAGC,EAAEigC,YAAYlgC,EAASmgC,GAAGrgC,EAAEpG,EAAE,CAAC,SAASynC,GAAGrhC,EAAEE,EAAEtG,GAAmB,GAAG,QAAnBsG,EAAEA,EAAEsgC,eAA0BtgC,EAAEA,EAAE0gC,OAAO,KAAO,QAAFhnC,IAAY,CAAC,IAAIuG,EAAED,EAAE0/B,MAAwBhmC,GAAlBuG,GAAGH,EAAE+jB,aAAkB7jB,EAAE0/B,MAAMhmC,EAAE8qB,GAAG1kB,EAAEpG,EAAE,CAAC,CACrZ,SAAS0nC,GAAGthC,EAAEE,GAAG,IAAItG,EAAEoG,EAAEwgC,YAAYrgC,EAAEH,EAAEmhB,UAAU,GAAG,OAAOhhB,GAAoBvG,KAAhBuG,EAAEA,EAAEqgC,aAAmB,CAAC,IAAIpgC,EAAE,KAAKrB,EAAE,KAAyB,GAAG,QAAvBnF,EAAEA,EAAE8mC,iBAA4B,CAAC,EAAE,CAAC,IAAIzgC,EAAE,CAACghC,UAAUrnC,EAAEqnC,UAAUC,KAAKtnC,EAAEsnC,KAAKn3B,IAAInQ,EAAEmQ,IAAIo3B,QAAQvnC,EAAEunC,QAAQt9B,SAASjK,EAAEiK,SAASJ,KAAK,MAAM,OAAO1E,EAAEqB,EAAErB,EAAEkB,EAAElB,EAAEA,EAAE0E,KAAKxD,EAAErG,EAAEA,EAAE6J,IAAI,OAAO,OAAO7J,GAAG,OAAOmF,EAAEqB,EAAErB,EAAEmB,EAAEnB,EAAEA,EAAE0E,KAAKvD,CAAC,MAAME,EAAErB,EAAEmB,EAAiH,OAA/GtG,EAAE,CAAC6mC,UAAUtgC,EAAEsgC,UAAUC,gBAAgBtgC,EAAEugC,eAAe5hC,EAAE6hC,OAAOzgC,EAAEygC,OAAOE,QAAQ3gC,EAAE2gC,cAAS9gC,EAAEwgC,YAAY5mC,EAAQ,CAAoB,QAAnBoG,EAAEpG,EAAE+mC,gBAAwB/mC,EAAE8mC,gBAAgBxgC,EAAEF,EAAEyD,KACnfvD,EAAEtG,EAAE+mC,eAAezgC,CAAC,CACpB,SAASqhC,GAAGvhC,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAEJ,EAAEwgC,YAAYF,IAAG,EAAG,IAAIvhC,EAAEqB,EAAEsgC,gBAAgBzgC,EAAEG,EAAEugC,eAAetgC,EAAED,EAAEwgC,OAAOC,QAAQ,GAAG,OAAOxgC,EAAE,CAACD,EAAEwgC,OAAOC,QAAQ,KAAK,IAAI7hC,EAAEqB,EAAElB,EAAEH,EAAEyE,KAAKzE,EAAEyE,KAAK,KAAK,OAAOxD,EAAElB,EAAEI,EAAEc,EAAEwD,KAAKtE,EAAEc,EAAEjB,EAAE,IAAII,EAAEY,EAAEmhB,UAAU,OAAO/hB,KAAoBiB,GAAhBjB,EAAEA,EAAEohC,aAAgBG,kBAAmB1gC,IAAI,OAAOI,EAAEjB,EAAEshC,gBAAgBvhC,EAAEkB,EAAEoD,KAAKtE,EAAEC,EAAEuhC,eAAe3hC,GAAG,CAAC,GAAG,OAAOD,EAAE,CAAC,IAAIgB,EAAEK,EAAEqgC,UAA6B,IAAnBxgC,EAAE,EAAEb,EAAED,EAAEH,EAAE,KAAKqB,EAAEtB,IAAI,CAAC,IAAI8/B,EAAEx+B,EAAE6gC,KAAKp2B,EAAEzK,EAAE4gC,UAAU,IAAI9gC,EAAE0+B,KAAKA,EAAE,CAAC,OAAOz/B,IAAIA,EAAEA,EAAEqE,KAAK,CAACw9B,UAAUn2B,EAAEo2B,KAAK,EAAEn3B,IAAI1J,EAAE0J,IAAIo3B,QAAQ9gC,EAAE8gC,QAAQt9B,SAASxD,EAAEwD,SACvfJ,KAAK,OAAOzD,EAAE,CAAC,IAAIR,EAAEQ,EAAEoM,EAAE/L,EAAU,OAARw+B,EAAE3+B,EAAE4K,EAAElR,EAASwS,EAAErC,KAAK,KAAK,EAAc,GAAG,oBAAfvK,EAAE4M,EAAE+0B,SAAiC,CAACphC,EAAEP,EAAEc,KAAKwK,EAAE/K,EAAE8+B,GAAG,MAAM7+B,CAAC,CAACD,EAAEP,EAAE,MAAMQ,EAAE,KAAK,EAAER,EAAE8N,OAAe,MAAT9N,EAAE8N,MAAa,IAAI,KAAK,EAAsD,GAAG,QAA3CuxB,EAAE,oBAAdr/B,EAAE4M,EAAE+0B,SAAgC3hC,EAAEc,KAAKwK,EAAE/K,EAAE8+B,GAAGr/B,SAAe,IAASq/B,EAAE,MAAM7+B,EAAED,EAAE8V,EAAE,CAAC,EAAE9V,EAAE8+B,GAAG,MAAM7+B,EAAE,KAAK,EAAEsgC,IAAG,EAAG,CAAC,OAAOjgC,EAAEwD,UAAU,IAAIxD,EAAE6gC,OAAOlhC,EAAEsN,OAAO,GAAe,QAAZuxB,EAAEz+B,EAAE0gC,SAAiB1gC,EAAE0gC,QAAQ,CAACzgC,GAAGw+B,EAAEh4B,KAAKxG,GAAG,MAAMyK,EAAE,CAACm2B,UAAUn2B,EAAEo2B,KAAKrC,EAAE90B,IAAI1J,EAAE0J,IAAIo3B,QAAQ9gC,EAAE8gC,QAAQt9B,SAASxD,EAAEwD,SAASJ,KAAK,MAAM,OAAOrE,GAAGD,EAAEC,EAAE0L,EAAE9L,EAAEe,GAAGX,EAAEA,EAAEqE,KAAKqH,EAAE7K,GAAG4+B,EAC3e,GAAG,QAAZx+B,EAAEA,EAAEoD,MAAiB,IAAsB,QAAnBpD,EAAED,EAAEwgC,OAAOC,SAAiB,MAAexgC,GAAJw+B,EAAEx+B,GAAMoD,KAAKo7B,EAAEp7B,KAAK,KAAKrD,EAAEugC,eAAe9B,EAAEz+B,EAAEwgC,OAAOC,QAAQ,IAAI,EAAsG,GAA5F,OAAOzhC,IAAIJ,EAAEe,GAAGK,EAAEqgC,UAAUzhC,EAAEoB,EAAEsgC,gBAAgBvhC,EAAEiB,EAAEugC,eAAevhC,EAA4B,QAA1Bc,EAAEE,EAAEwgC,OAAOR,aAAwB,CAAChgC,EAAEF,EAAE,GAAGD,GAAGG,EAAE8gC,KAAK9gC,EAAEA,EAAEqD,WAAWrD,IAAIF,EAAE,MAAM,OAAOnB,IAAIqB,EAAEwgC,OAAOhB,MAAM,GAAG4B,IAAIvhC,EAAED,EAAE4/B,MAAM3/B,EAAED,EAAEshB,cAAcvhB,CAAC,CAAC,CAC9V,SAAS0hC,GAAGzhC,EAAEE,EAAEtG,GAA8B,GAA3BoG,EAAEE,EAAE4gC,QAAQ5gC,EAAE4gC,QAAQ,KAAQ,OAAO9gC,EAAE,IAAIE,EAAE,EAAEA,EAAEF,EAAEtD,OAAOwD,IAAI,CAAC,IAAIC,EAAEH,EAAEE,GAAGE,EAAED,EAAE0D,SAAS,GAAG,OAAOzD,EAAE,CAAqB,GAApBD,EAAE0D,SAAS,KAAK1D,EAAEvG,EAAK,oBAAoBwG,EAAE,MAAM7H,MAAMoH,EAAE,IAAIS,IAAIA,EAAEE,KAAKH,EAAE,CAAC,CAAC,CAAC,IAAIuhC,GAAG,CAAC,EAAEC,GAAGtH,GAAGqH,IAAIE,GAAGvH,GAAGqH,IAAIG,GAAGxH,GAAGqH,IAAI,SAASI,GAAG9hC,GAAG,GAAGA,IAAI0hC,GAAG,MAAMnpC,MAAMoH,EAAE,MAAM,OAAOK,CAAC,CACnS,SAAS+hC,GAAG/hC,EAAEE,GAAyC,OAAtCq6B,GAAEsH,GAAG3hC,GAAGq6B,GAAEqH,GAAG5hC,GAAGu6B,GAAEoH,GAAGD,IAAI1hC,EAAEE,EAAEya,UAAmB,KAAK,EAAE,KAAK,GAAGza,GAAGA,EAAEA,EAAEozB,iBAAiBpzB,EAAE+Z,aAAaH,GAAG,KAAK,IAAI,MAAM,QAAkE5Z,EAAE4Z,GAArC5Z,GAAvBF,EAAE,IAAIA,EAAEE,EAAEuf,WAAWvf,GAAM+Z,cAAc,KAAKja,EAAEA,EAAEgiC,SAAkB1H,GAAEqH,IAAIpH,GAAEoH,GAAGzhC,EAAE,CAAC,SAAS+hC,KAAK3H,GAAEqH,IAAIrH,GAAEsH,IAAItH,GAAEuH,GAAG,CAAC,SAASK,GAAGliC,GAAG8hC,GAAGD,GAAGlhC,SAAS,IAAIT,EAAE4hC,GAAGH,GAAGhhC,SAAa/G,EAAEkgB,GAAG5Z,EAAEF,EAAE1H,MAAM4H,IAAItG,IAAI2gC,GAAEqH,GAAG5hC,GAAGu6B,GAAEoH,GAAG/nC,GAAG,CAAC,SAASuoC,GAAGniC,GAAG4hC,GAAGjhC,UAAUX,IAAIs6B,GAAEqH,IAAIrH,GAAEsH,IAAI,CAAC,IAAI/7B,GAAEw0B,GAAG,GACxZ,SAAS+H,GAAGpiC,GAAG,IAAI,IAAIE,EAAEF,EAAE,OAAOE,GAAG,CAAC,GAAG,KAAKA,EAAE6J,IAAI,CAAC,IAAInQ,EAAEsG,EAAEohB,cAAc,GAAG,OAAO1nB,IAAmB,QAAfA,EAAEA,EAAE2nB,aAAqB,OAAO3nB,EAAEsL,MAAM,OAAOtL,EAAEsL,MAAM,OAAOhF,CAAC,MAAM,GAAG,KAAKA,EAAE6J,UAAK,IAAS7J,EAAE09B,cAAcyE,aAAa,GAAG,KAAa,IAARniC,EAAEoN,OAAW,OAAOpN,OAAO,GAAG,OAAOA,EAAEwhB,MAAM,CAACxhB,EAAEwhB,MAAMN,OAAOlhB,EAAEA,EAAEA,EAAEwhB,MAAM,QAAQ,CAAC,GAAGxhB,IAAIF,EAAE,MAAM,KAAK,OAAOE,EAAEyhB,SAAS,CAAC,GAAG,OAAOzhB,EAAEkhB,QAAQlhB,EAAEkhB,SAASphB,EAAE,OAAO,KAAKE,EAAEA,EAAEkhB,MAAM,CAAClhB,EAAEyhB,QAAQP,OAAOlhB,EAAEkhB,OAAOlhB,EAAEA,EAAEyhB,OAAO,CAAC,OAAO,IAAI,CAAC,IAAI2gB,GAAG,GACrc,SAASC,KAAK,IAAI,IAAIviC,EAAE,EAAEA,EAAEsiC,GAAG5lC,OAAOsD,IAAIsiC,GAAGtiC,GAAGwiC,8BAA8B,KAAKF,GAAG5lC,OAAO,CAAC,CAAC,IAAI+lC,GAAG9tB,EAAG+tB,uBAAuBC,GAAGhuB,EAAGwS,wBAAwByb,GAAG,EAAEC,GAAE,KAAKC,GAAE,KAAKC,GAAE,KAAKC,IAAG,EAAGC,IAAG,EAAGC,GAAG,EAAEC,GAAG,EAAE,SAASC,KAAI,MAAM7qC,MAAMoH,EAAE,KAAM,CAAC,SAAS0jC,GAAGrjC,EAAEE,GAAG,GAAG,OAAOA,EAAE,OAAM,EAAG,IAAI,IAAItG,EAAE,EAAEA,EAAEsG,EAAExD,QAAQ9C,EAAEoG,EAAEtD,OAAO9C,IAAI,IAAIw4B,GAAGpyB,EAAEpG,GAAGsG,EAAEtG,IAAI,OAAM,EAAG,OAAM,CAAE,CAChW,SAAS0pC,GAAGtjC,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,GAAyH,GAAtH6jC,GAAG7jC,EAAE8jC,GAAE3iC,EAAEA,EAAEohB,cAAc,KAAKphB,EAAEsgC,YAAY,KAAKtgC,EAAE0/B,MAAM,EAAE6C,GAAG9hC,QAAQ,OAAOX,GAAG,OAAOA,EAAEshB,cAAciiB,GAAGC,GAAGxjC,EAAEpG,EAAEuG,EAAEC,GAAM6iC,GAAG,CAAClkC,EAAE,EAAE,EAAE,CAAY,GAAXkkC,IAAG,EAAGC,GAAG,EAAK,IAAInkC,EAAE,MAAMxG,MAAMoH,EAAE,MAAMZ,GAAG,EAAEgkC,GAAED,GAAE,KAAK5iC,EAAEsgC,YAAY,KAAKiC,GAAG9hC,QAAQ8iC,GAAGzjC,EAAEpG,EAAEuG,EAAEC,EAAE,OAAO6iC,GAAG,CAA+D,GAA9DR,GAAG9hC,QAAQ+iC,GAAGxjC,EAAE,OAAO4iC,IAAG,OAAOA,GAAEr/B,KAAKm/B,GAAG,EAAEG,GAAED,GAAED,GAAE,KAAKG,IAAG,EAAM9iC,EAAE,MAAM3H,MAAMoH,EAAE,MAAM,OAAOK,CAAC,CAAC,SAAS2jC,KAAK,IAAI3jC,EAAE,IAAIkjC,GAAQ,OAALA,GAAG,EAASljC,CAAC,CAC/Y,SAAS4jC,KAAK,IAAI5jC,EAAE,CAACshB,cAAc,KAAKmf,UAAU,KAAKoD,UAAU,KAAKC,MAAM,KAAKrgC,KAAK,MAA8C,OAAxC,OAAOs/B,GAAEF,GAAEvhB,cAAcyhB,GAAE/iC,EAAE+iC,GAAEA,GAAEt/B,KAAKzD,EAAS+iC,EAAC,CAAC,SAASgB,KAAK,GAAG,OAAOjB,GAAE,CAAC,IAAI9iC,EAAE6iC,GAAE1hB,UAAUnhB,EAAE,OAAOA,EAAEA,EAAEshB,cAAc,IAAI,MAAMthB,EAAE8iC,GAAEr/B,KAAK,IAAIvD,EAAE,OAAO6iC,GAAEF,GAAEvhB,cAAcyhB,GAAEt/B,KAAK,GAAG,OAAOvD,EAAE6iC,GAAE7iC,EAAE4iC,GAAE9iC,MAAM,CAAC,GAAG,OAAOA,EAAE,MAAMzH,MAAMoH,EAAE,MAAUK,EAAE,CAACshB,eAAPwhB,GAAE9iC,GAAqBshB,cAAcmf,UAAUqC,GAAErC,UAAUoD,UAAUf,GAAEe,UAAUC,MAAMhB,GAAEgB,MAAMrgC,KAAK,MAAM,OAAOs/B,GAAEF,GAAEvhB,cAAcyhB,GAAE/iC,EAAE+iC,GAAEA,GAAEt/B,KAAKzD,CAAC,CAAC,OAAO+iC,EAAC,CACje,SAASiB,GAAGhkC,EAAEE,GAAG,MAAM,oBAAoBA,EAAEA,EAAEF,GAAGE,CAAC,CACnD,SAAS+jC,GAAGjkC,GAAG,IAAIE,EAAE6jC,KAAKnqC,EAAEsG,EAAE4jC,MAAM,GAAG,OAAOlqC,EAAE,MAAMrB,MAAMoH,EAAE,MAAM/F,EAAEsqC,oBAAoBlkC,EAAE,IAAIG,EAAE2iC,GAAE1iC,EAAED,EAAE0jC,UAAU9kC,EAAEnF,EAAEinC,QAAQ,GAAG,OAAO9hC,EAAE,CAAC,GAAG,OAAOqB,EAAE,CAAC,IAAIH,EAAEG,EAAEqD,KAAKrD,EAAEqD,KAAK1E,EAAE0E,KAAK1E,EAAE0E,KAAKxD,CAAC,CAACE,EAAE0jC,UAAUzjC,EAAErB,EAAEnF,EAAEinC,QAAQ,IAAI,CAAC,GAAG,OAAOzgC,EAAE,CAACrB,EAAEqB,EAAEqD,KAAKtD,EAAEA,EAAEsgC,UAAU,IAAIpgC,EAAEJ,EAAE,KAAKjB,EAAE,KAAKG,EAAEJ,EAAE,EAAE,CAAC,IAAIK,EAAED,EAAE+hC,KAAK,IAAI0B,GAAGxjC,KAAKA,EAAE,OAAOJ,IAAIA,EAAEA,EAAEyE,KAAK,CAACy9B,KAAK,EAAEiD,OAAOhlC,EAAEglC,OAAOC,cAAcjlC,EAAEilC,cAAcC,WAAWllC,EAAEklC,WAAW5gC,KAAK,OAAOtD,EAAEhB,EAAEilC,cAAcjlC,EAAEklC,WAAWrkC,EAAEG,EAAEhB,EAAEglC,YAAY,CAAC,IAAIpkC,EAAE,CAACmhC,KAAK9hC,EAAE+kC,OAAOhlC,EAAEglC,OAAOC,cAAcjlC,EAAEilC,cACngBC,WAAWllC,EAAEklC,WAAW5gC,KAAK,MAAM,OAAOzE,GAAGqB,EAAErB,EAAEe,EAAEE,EAAEE,GAAGnB,EAAEA,EAAEyE,KAAK1D,EAAE8iC,GAAEjD,OAAOxgC,EAAEoiC,IAAIpiC,CAAC,CAACD,EAAEA,EAAEsE,IAAI,OAAO,OAAOtE,GAAGA,IAAIJ,GAAG,OAAOC,EAAEiB,EAAEE,EAAEnB,EAAEyE,KAAKpD,EAAE+xB,GAAGjyB,EAAED,EAAEohB,iBAAiBue,IAAG,GAAI3/B,EAAEohB,cAAcnhB,EAAED,EAAEugC,UAAUxgC,EAAEC,EAAE2jC,UAAU7kC,EAAEpF,EAAE0qC,kBAAkBnkC,CAAC,CAAiB,GAAG,QAAnBH,EAAEpG,EAAEwmC,aAAwB,CAAChgC,EAAEJ,EAAE,GAAGjB,EAAEqB,EAAE8gC,KAAK2B,GAAEjD,OAAO7gC,EAAEyiC,IAAIziC,EAAEqB,EAAEA,EAAEqD,WAAWrD,IAAIJ,EAAE,MAAM,OAAOI,IAAIxG,EAAEgmC,MAAM,GAAG,MAAM,CAAC1/B,EAAEohB,cAAc1nB,EAAE2qC,SAAS,CAC9X,SAASC,GAAGxkC,GAAG,IAAIE,EAAE6jC,KAAKnqC,EAAEsG,EAAE4jC,MAAM,GAAG,OAAOlqC,EAAE,MAAMrB,MAAMoH,EAAE,MAAM/F,EAAEsqC,oBAAoBlkC,EAAE,IAAIG,EAAEvG,EAAE2qC,SAASnkC,EAAExG,EAAEinC,QAAQ9hC,EAAEmB,EAAEohB,cAAc,GAAG,OAAOlhB,EAAE,CAACxG,EAAEinC,QAAQ,KAAK,IAAI5gC,EAAEG,EAAEA,EAAEqD,KAAK,GAAG1E,EAAEiB,EAAEjB,EAAEkB,EAAEkkC,QAAQlkC,EAAEA,EAAEwD,WAAWxD,IAAIG,GAAGgyB,GAAGrzB,EAAEmB,EAAEohB,iBAAiBue,IAAG,GAAI3/B,EAAEohB,cAAcviB,EAAE,OAAOmB,EAAE2jC,YAAY3jC,EAAEugC,UAAU1hC,GAAGnF,EAAE0qC,kBAAkBvlC,CAAC,CAAC,MAAM,CAACA,EAAEoB,EAAE,CAAC,SAASskC,KAAK,CACpW,SAASC,GAAG1kC,EAAEE,GAAG,IAAItG,EAAEipC,GAAE1iC,EAAE4jC,KAAK3jC,EAAEF,IAAInB,GAAGqzB,GAAGjyB,EAAEmhB,cAAclhB,GAAsE,GAAnErB,IAAIoB,EAAEmhB,cAAclhB,EAAEy/B,IAAG,GAAI1/B,EAAEA,EAAE2jC,MAAMa,GAAGC,GAAG3N,KAAK,KAAKr9B,EAAEuG,EAAEH,GAAG,CAACA,IAAOG,EAAE0kC,cAAc3kC,GAAGnB,GAAG,OAAOgkC,IAAuB,EAApBA,GAAEzhB,cAAcvX,IAAM,CAAuD,GAAtDnQ,EAAE0T,OAAO,KAAKw3B,GAAG,EAAEC,GAAG9N,KAAK,KAAKr9B,EAAEuG,EAAEC,EAAEF,QAAG,EAAO,MAAS,OAAO8kC,GAAE,MAAMzsC,MAAMoH,EAAE,MAAM,KAAQ,GAAHijC,KAAQqC,GAAGrrC,EAAEsG,EAAEE,EAAE,CAAC,OAAOA,CAAC,CAAC,SAAS6kC,GAAGjlC,EAAEE,EAAEtG,GAAGoG,EAAEsN,OAAO,MAAMtN,EAAE,CAAC6kC,YAAY3kC,EAAE+X,MAAMre,GAAmB,QAAhBsG,EAAE2iC,GAAErC,cAAsBtgC,EAAE,CAACglC,WAAW,KAAKC,OAAO,MAAMtC,GAAErC,YAAYtgC,EAAEA,EAAEilC,OAAO,CAACnlC,IAAgB,QAAXpG,EAAEsG,EAAEilC,QAAgBjlC,EAAEilC,OAAO,CAACnlC,GAAGpG,EAAEiN,KAAK7G,EAAG,CAClf,SAAS+kC,GAAG/kC,EAAEE,EAAEtG,EAAEuG,GAAGD,EAAE+X,MAAMre,EAAEsG,EAAE2kC,YAAY1kC,EAAEilC,GAAGllC,IAAImlC,GAAGrlC,EAAE,CAAC,SAAS4kC,GAAG5kC,EAAEE,EAAEtG,GAAG,OAAOA,EAAE,WAAWwrC,GAAGllC,IAAImlC,GAAGrlC,EAAE,EAAE,CAAC,SAASolC,GAAGplC,GAAG,IAAIE,EAAEF,EAAE6kC,YAAY7kC,EAAEA,EAAEiY,MAAM,IAAI,IAAIre,EAAEsG,IAAI,OAAOkyB,GAAGpyB,EAAEpG,EAAE,CAAC,MAAMuG,GAAG,OAAM,CAAE,CAAC,CAAC,SAASklC,GAAGrlC,GAAG,IAAIE,EAAEmgC,GAAGrgC,EAAE,GAAG,OAAOE,GAAGolC,GAAGplC,EAAEF,EAAE,GAAG,EAAE,CAClQ,SAASuD,GAAGvD,GAAG,IAAIE,EAAE0jC,KAA8M,MAAzM,oBAAoB5jC,IAAIA,EAAEA,KAAKE,EAAEohB,cAAcphB,EAAEugC,UAAUzgC,EAAEA,EAAE,CAAC6gC,QAAQ,KAAKT,YAAY,KAAKR,MAAM,EAAE2E,SAAS,KAAKL,oBAAoBF,GAAGM,kBAAkBtkC,GAAGE,EAAE4jC,MAAM9jC,EAAEA,EAAEA,EAAEukC,SAASgB,GAAGtO,KAAK,KAAK4L,GAAE7iC,GAAS,CAACE,EAAEohB,cAActhB,EAAE,CAC5P,SAAS8kC,GAAG9kC,EAAEE,EAAEtG,EAAEuG,GAA8O,OAA3OH,EAAE,CAAC+J,IAAI/J,EAAErC,OAAOuC,EAAEslC,QAAQ5rC,EAAE6rC,KAAKtlC,EAAEsD,KAAK,MAAsB,QAAhBvD,EAAE2iC,GAAErC,cAAsBtgC,EAAE,CAACglC,WAAW,KAAKC,OAAO,MAAMtC,GAAErC,YAAYtgC,EAAEA,EAAEglC,WAAWllC,EAAEyD,KAAKzD,GAAmB,QAAfpG,EAAEsG,EAAEglC,YAAoBhlC,EAAEglC,WAAWllC,EAAEyD,KAAKzD,GAAGG,EAAEvG,EAAE6J,KAAK7J,EAAE6J,KAAKzD,EAAEA,EAAEyD,KAAKtD,EAAED,EAAEglC,WAAWllC,GAAWA,CAAC,CAAC,SAAS0lC,KAAK,OAAO3B,KAAKziB,aAAa,CAAC,SAASqkB,GAAG3lC,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAEwjC,KAAKf,GAAEv1B,OAAOtN,EAAEI,EAAEkhB,cAAcwjB,GAAG,EAAE5kC,EAAEtG,OAAE,OAAO,IAASuG,EAAE,KAAKA,EAAE,CAC9Y,SAASylC,GAAG5lC,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAE2jC,KAAK5jC,OAAE,IAASA,EAAE,KAAKA,EAAE,IAAIpB,OAAE,EAAO,GAAG,OAAO+jC,GAAE,CAAC,IAAI7iC,EAAE6iC,GAAExhB,cAA0B,GAAZviB,EAAEkB,EAAEulC,QAAW,OAAOrlC,GAAGkjC,GAAGljC,EAAEF,EAAEwlC,MAAmC,YAA5BrlC,EAAEkhB,cAAcwjB,GAAG5kC,EAAEtG,EAAEmF,EAAEoB,GAAU,CAAC0iC,GAAEv1B,OAAOtN,EAAEI,EAAEkhB,cAAcwjB,GAAG,EAAE5kC,EAAEtG,EAAEmF,EAAEoB,EAAE,CAAC,SAAS0lC,GAAG7lC,EAAEE,GAAG,OAAOylC,GAAG,QAAQ,EAAE3lC,EAAEE,EAAE,CAAC,SAASykC,GAAG3kC,EAAEE,GAAG,OAAO0lC,GAAG,KAAK,EAAE5lC,EAAEE,EAAE,CAAC,SAAS4lC,GAAG9lC,EAAEE,GAAG,OAAO0lC,GAAG,EAAE,EAAE5lC,EAAEE,EAAE,CAAC,SAAS6lC,GAAG/lC,EAAEE,GAAG,OAAO0lC,GAAG,EAAE,EAAE5lC,EAAEE,EAAE,CAChX,SAAS8lC,GAAGhmC,EAAEE,GAAG,MAAG,oBAAoBA,GAASF,EAAEA,IAAIE,EAAEF,GAAG,WAAWE,EAAE,KAAK,GAAK,OAAOA,QAAG,IAASA,GAASF,EAAEA,IAAIE,EAAES,QAAQX,EAAE,WAAWE,EAAES,QAAQ,IAAI,QAA1E,CAA2E,CAAC,SAASslC,GAAGjmC,EAAEE,EAAEtG,GAA6C,OAA1CA,EAAE,OAAOA,QAAG,IAASA,EAAEA,EAAE4Q,OAAO,CAACxK,IAAI,KAAY4lC,GAAG,EAAE,EAAEI,GAAG/O,KAAK,KAAK/2B,EAAEF,GAAGpG,EAAE,CAAC,SAASssC,KAAK,CAAC,SAASC,GAAGnmC,EAAEE,GAAG,IAAItG,EAAEmqC,KAAK7jC,OAAE,IAASA,EAAE,KAAKA,EAAE,IAAIC,EAAEvG,EAAE0nB,cAAc,OAAG,OAAOnhB,GAAG,OAAOD,GAAGmjC,GAAGnjC,EAAEC,EAAE,IAAWA,EAAE,IAAGvG,EAAE0nB,cAAc,CAACthB,EAAEE,GAAUF,EAAC,CAC7Z,SAASomC,GAAGpmC,EAAEE,GAAG,IAAItG,EAAEmqC,KAAK7jC,OAAE,IAASA,EAAE,KAAKA,EAAE,IAAIC,EAAEvG,EAAE0nB,cAAc,OAAG,OAAOnhB,GAAG,OAAOD,GAAGmjC,GAAGnjC,EAAEC,EAAE,IAAWA,EAAE,IAAGH,EAAEA,IAAIpG,EAAE0nB,cAAc,CAACthB,EAAEE,GAAUF,EAAC,CAAC,SAASqmC,GAAGrmC,EAAEE,EAAEtG,GAAG,OAAG,KAAQ,GAAHgpC,KAAc5iC,EAAEygC,YAAYzgC,EAAEygC,WAAU,EAAGZ,IAAG,GAAI7/B,EAAEshB,cAAc1nB,IAAEw4B,GAAGx4B,EAAEsG,KAAKtG,EAAE0qB,KAAKue,GAAEjD,OAAOhmC,EAAE4nC,IAAI5nC,EAAEoG,EAAEygC,WAAU,GAAWvgC,EAAC,CAAC,SAASomC,GAAGtmC,EAAEE,GAAG,IAAItG,EAAE+qB,GAAEA,GAAE,IAAI/qB,GAAG,EAAEA,EAAEA,EAAE,EAAEoG,GAAE,GAAI,IAAIG,EAAEwiC,GAAGrb,WAAWqb,GAAGrb,WAAW,CAAC,EAAE,IAAItnB,GAAE,GAAIE,GAAG,CAAC,QAAQykB,GAAE/qB,EAAE+oC,GAAGrb,WAAWnnB,CAAC,CAAC,CAAC,SAASomC,KAAK,OAAOxC,KAAKziB,aAAa,CAC1d,SAASklB,GAAGxmC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEsmC,GAAGzmC,GAAkE,GAA/DpG,EAAE,CAACsnC,KAAK/gC,EAAEgkC,OAAOvqC,EAAEwqC,eAAc,EAAGC,WAAW,KAAK5gC,KAAK,MAASijC,GAAG1mC,GAAG2mC,GAAGzmC,EAAEtG,QAAQ,GAAiB,QAAdA,EAAEumC,GAAGngC,EAAEE,EAAEtG,EAAEuG,IAAY,CAAWmlC,GAAG1rC,EAAEoG,EAAEG,EAAX4G,MAAgB6/B,GAAGhtC,EAAEsG,EAAEC,EAAE,CAAC,CAC/K,SAASolC,GAAGvlC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEsmC,GAAGzmC,GAAGI,EAAE,CAAC8gC,KAAK/gC,EAAEgkC,OAAOvqC,EAAEwqC,eAAc,EAAGC,WAAW,KAAK5gC,KAAK,MAAM,GAAGijC,GAAG1mC,GAAG2mC,GAAGzmC,EAAEE,OAAO,CAAC,IAAIrB,EAAEiB,EAAEmhB,UAAU,GAAG,IAAInhB,EAAE4/B,QAAQ,OAAO7gC,GAAG,IAAIA,EAAE6gC,QAAiC,QAAxB7gC,EAAEmB,EAAEgkC,qBAA8B,IAAI,IAAIjkC,EAAEC,EAAEokC,kBAAkBjkC,EAAEtB,EAAEkB,EAAErG,GAAqC,GAAlCwG,EAAEgkC,eAAc,EAAGhkC,EAAEikC,WAAWhkC,EAAK+xB,GAAG/xB,EAAEJ,GAAG,CAAC,IAAIjB,EAAEkB,EAAEkgC,YAA+E,OAAnE,OAAOphC,GAAGoB,EAAEqD,KAAKrD,EAAE8/B,GAAGhgC,KAAKE,EAAEqD,KAAKzE,EAAEyE,KAAKzE,EAAEyE,KAAKrD,QAAGF,EAAEkgC,YAAYhgC,EAAQ,CAAC,CAAC,MAAMjB,GAAG,CAAwB,QAAdvF,EAAEumC,GAAGngC,EAAEE,EAAEE,EAAED,MAAoBmlC,GAAG1rC,EAAEoG,EAAEG,EAAbC,EAAE2G,MAAgB6/B,GAAGhtC,EAAEsG,EAAEC,GAAG,CAAC,CAC/c,SAASumC,GAAG1mC,GAAG,IAAIE,EAAEF,EAAEmhB,UAAU,OAAOnhB,IAAI6iC,IAAG,OAAO3iC,GAAGA,IAAI2iC,EAAC,CAAC,SAAS8D,GAAG3mC,EAAEE,GAAG+iC,GAAGD,IAAG,EAAG,IAAIppC,EAAEoG,EAAE6gC,QAAQ,OAAOjnC,EAAEsG,EAAEuD,KAAKvD,GAAGA,EAAEuD,KAAK7J,EAAE6J,KAAK7J,EAAE6J,KAAKvD,GAAGF,EAAE6gC,QAAQ3gC,CAAC,CAAC,SAAS0mC,GAAG5mC,EAAEE,EAAEtG,GAAG,GAAG,KAAO,QAAFA,GAAW,CAAC,IAAIuG,EAAED,EAAE0/B,MAAwBhmC,GAAlBuG,GAAGH,EAAE+jB,aAAkB7jB,EAAE0/B,MAAMhmC,EAAE8qB,GAAG1kB,EAAEpG,EAAE,CAAC,CAC9P,IAAI8pC,GAAG,CAACmD,YAAY/G,GAAGgH,YAAY1D,GAAE2D,WAAW3D,GAAE4D,UAAU5D,GAAE6D,oBAAoB7D,GAAE8D,mBAAmB9D,GAAE+D,gBAAgB/D,GAAEgE,QAAQhE,GAAEiE,WAAWjE,GAAEkE,OAAOlE,GAAEmE,SAASnE,GAAEoE,cAAcpE,GAAEqE,iBAAiBrE,GAAEsE,cAActE,GAAEuE,iBAAiBvE,GAAEwE,qBAAqBxE,GAAEyE,MAAMzE,GAAE0E,0BAAyB,GAAIvE,GAAG,CAACsD,YAAY/G,GAAGgH,YAAY,SAAS9mC,EAAEE,GAA4C,OAAzC0jC,KAAKtiB,cAAc,CAACthB,OAAE,IAASE,EAAE,KAAKA,GAAUF,CAAC,EAAE+mC,WAAWjH,GAAGkH,UAAUnB,GAAGoB,oBAAoB,SAASjnC,EAAEE,EAAEtG,GAA6C,OAA1CA,EAAE,OAAOA,QAAG,IAASA,EAAEA,EAAE4Q,OAAO,CAACxK,IAAI,KAAY2lC,GAAG,QAC3f,EAAEK,GAAG/O,KAAK,KAAK/2B,EAAEF,GAAGpG,EAAE,EAAEutC,gBAAgB,SAASnnC,EAAEE,GAAG,OAAOylC,GAAG,QAAQ,EAAE3lC,EAAEE,EAAE,EAAEgnC,mBAAmB,SAASlnC,EAAEE,GAAG,OAAOylC,GAAG,EAAE,EAAE3lC,EAAEE,EAAE,EAAEknC,QAAQ,SAASpnC,EAAEE,GAAG,IAAItG,EAAEgqC,KAAqD,OAAhD1jC,OAAE,IAASA,EAAE,KAAKA,EAAEF,EAAEA,IAAIpG,EAAE0nB,cAAc,CAACthB,EAAEE,GAAUF,CAAC,EAAEqnC,WAAW,SAASrnC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEyjC,KAAkM,OAA7L1jC,OAAE,IAAStG,EAAEA,EAAEsG,GAAGA,EAAEC,EAAEmhB,cAAcnhB,EAAEsgC,UAAUvgC,EAAEF,EAAE,CAAC6gC,QAAQ,KAAKT,YAAY,KAAKR,MAAM,EAAE2E,SAAS,KAAKL,oBAAoBlkC,EAAEskC,kBAAkBpkC,GAAGC,EAAE2jC,MAAM9jC,EAAEA,EAAEA,EAAEukC,SAASiC,GAAGvP,KAAK,KAAK4L,GAAE7iC,GAAS,CAACG,EAAEmhB,cAActhB,EAAE,EAAEsnC,OAAO,SAAStnC,GAC3d,OAAdA,EAAE,CAACW,QAAQX,GAAhB4jC,KAA4BtiB,cAActhB,CAAC,EAAEunC,SAAShkC,GAAGikC,cAActB,GAAGuB,iBAAiB,SAASznC,GAAG,OAAO4jC,KAAKtiB,cAActhB,CAAC,EAAE0nC,cAAc,WAAW,IAAI1nC,EAAEuD,IAAG,GAAIrD,EAAEF,EAAE,GAA6C,OAA1CA,EAAEsmC,GAAGrP,KAAK,KAAKj3B,EAAE,IAAI4jC,KAAKtiB,cAActhB,EAAQ,CAACE,EAAEF,EAAE,EAAE2nC,iBAAiB,WAAW,EAAEC,qBAAqB,SAAS5nC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAE0iC,GAAEziC,EAAEwjC,KAAK,GAAG/G,GAAE,CAAC,QAAG,IAASjjC,EAAE,MAAMrB,MAAMoH,EAAE,MAAM/F,EAAEA,GAAG,KAAK,CAAO,GAANA,EAAEsG,IAAO,OAAO8kC,GAAE,MAAMzsC,MAAMoH,EAAE,MAAM,KAAQ,GAAHijC,KAAQqC,GAAG9kC,EAAED,EAAEtG,EAAE,CAACwG,EAAEkhB,cAAc1nB,EAAE,IAAImF,EAAE,CAACkZ,MAAMre,EAAEirC,YAAY3kC,GACvZ,OAD0ZE,EAAE0jC,MAAM/kC,EAAE8mC,GAAGjB,GAAG3N,KAAK,KAAK92B,EACpfpB,EAAEiB,GAAG,CAACA,IAAIG,EAAEmN,OAAO,KAAKw3B,GAAG,EAAEC,GAAG9N,KAAK,KAAK92B,EAAEpB,EAAEnF,EAAEsG,QAAG,EAAO,MAAatG,CAAC,EAAEiuC,MAAM,WAAW,IAAI7nC,EAAE4jC,KAAK1jC,EAAE8kC,GAAE+C,iBAAiB,GAAGlL,GAAE,CAAC,IAAIjjC,EAAE0iC,GAAkDp8B,EAAE,IAAIA,EAAE,KAA9CtG,GAAHyiC,KAAU,GAAG,GAAG/Y,GAAhB+Y,IAAsB,IAAI93B,SAAS,IAAI3K,GAAuB,GAAPA,EAAEspC,QAAWhjC,GAAG,IAAItG,EAAE2K,SAAS,KAAKrE,GAAG,GAAG,MAAaA,EAAE,IAAIA,EAAE,KAAftG,EAAEupC,MAAmB5+B,SAAS,IAAI,IAAI,OAAOvE,EAAEshB,cAAcphB,CAAC,EAAE4nC,0BAAyB,GAAItE,GAAG,CAACqD,YAAY/G,GAAGgH,YAAYX,GAAGY,WAAWjH,GAAGkH,UAAUrC,GAAGsC,oBAAoBhB,GAAGiB,mBAAmBpB,GAAGqB,gBAAgBpB,GAAGqB,QAAQhB,GAAGiB,WAAWpD,GAAGqD,OAAO5B,GAAG6B,SAAS,WAAW,OAAOtD,GAAGD,GAAG,EACrhBwD,cAActB,GAAGuB,iBAAiB,SAASznC,GAAc,OAAOqmC,GAAZtC,KAAiBjB,GAAExhB,cAActhB,EAAE,EAAE0nC,cAAc,WAAgD,MAAM,CAArCzD,GAAGD,IAAI,GAAKD,KAAKziB,cAAyB,EAAEqmB,iBAAiBlD,GAAGmD,qBAAqBlD,GAAGmD,MAAMtB,GAAGuB,0BAAyB,GAAIrE,GAAG,CAACoD,YAAY/G,GAAGgH,YAAYX,GAAGY,WAAWjH,GAAGkH,UAAUrC,GAAGsC,oBAAoBhB,GAAGiB,mBAAmBpB,GAAGqB,gBAAgBpB,GAAGqB,QAAQhB,GAAGiB,WAAW7C,GAAG8C,OAAO5B,GAAG6B,SAAS,WAAW,OAAO/C,GAAGR,GAAG,EAAEwD,cAActB,GAAGuB,iBAAiB,SAASznC,GAAG,IAAIE,EAAE6jC,KAAK,OAAO,OACzfjB,GAAE5iC,EAAEohB,cAActhB,EAAEqmC,GAAGnmC,EAAE4iC,GAAExhB,cAActhB,EAAE,EAAE0nC,cAAc,WAAgD,MAAM,CAArClD,GAAGR,IAAI,GAAKD,KAAKziB,cAAyB,EAAEqmB,iBAAiBlD,GAAGmD,qBAAqBlD,GAAGmD,MAAMtB,GAAGuB,0BAAyB,GAAI,SAASE,GAAGhoC,EAAEE,GAAG,GAAGF,GAAGA,EAAEO,aAAa,CAA4B,IAAI,IAAI3G,KAAnCsG,EAAE2V,EAAE,CAAC,EAAE3V,GAAGF,EAAEA,EAAEO,kBAA4B,IAASL,EAAEtG,KAAKsG,EAAEtG,GAAGoG,EAAEpG,IAAI,OAAOsG,CAAC,CAAC,OAAOA,CAAC,CAAC,SAAS+nC,GAAGjoC,EAAEE,EAAEtG,EAAEuG,GAA8BvG,EAAE,QAAXA,EAAEA,EAAEuG,EAAtBD,EAAEF,EAAEshB,sBAAmC,IAAS1nB,EAAEsG,EAAE2V,EAAE,CAAC,EAAE3V,EAAEtG,GAAGoG,EAAEshB,cAAc1nB,EAAE,IAAIoG,EAAE4/B,QAAQ5/B,EAAEwgC,YAAYC,UAAU7mC,EAAE,CACrd,IAAIsuC,GAAG,CAACC,UAAU,SAASnoC,GAAG,SAAOA,EAAEA,EAAEooC,kBAAiBlnB,GAAGlhB,KAAKA,CAAI,EAAEqoC,gBAAgB,SAASroC,EAAEE,EAAEtG,GAAGoG,EAAEA,EAAEooC,gBAAgB,IAAIjoC,EAAE4G,KAAI3G,EAAEqmC,GAAGzmC,GAAGjB,EAAEiiC,GAAG7gC,EAAEC,GAAGrB,EAAEoiC,QAAQjhC,OAAE,IAAStG,GAAG,OAAOA,IAAImF,EAAE8E,SAASjK,GAAe,QAAZsG,EAAEkhC,GAAGphC,EAAEjB,EAAEqB,MAAcklC,GAAGplC,EAAEF,EAAEI,EAAED,GAAGkhC,GAAGnhC,EAAEF,EAAEI,GAAG,EAAEkoC,oBAAoB,SAAStoC,EAAEE,EAAEtG,GAAGoG,EAAEA,EAAEooC,gBAAgB,IAAIjoC,EAAE4G,KAAI3G,EAAEqmC,GAAGzmC,GAAGjB,EAAEiiC,GAAG7gC,EAAEC,GAAGrB,EAAEgL,IAAI,EAAEhL,EAAEoiC,QAAQjhC,OAAE,IAAStG,GAAG,OAAOA,IAAImF,EAAE8E,SAASjK,GAAe,QAAZsG,EAAEkhC,GAAGphC,EAAEjB,EAAEqB,MAAcklC,GAAGplC,EAAEF,EAAEI,EAAED,GAAGkhC,GAAGnhC,EAAEF,EAAEI,GAAG,EAAEmoC,mBAAmB,SAASvoC,EAAEE,GAAGF,EAAEA,EAAEooC,gBAAgB,IAAIxuC,EAAEmN,KAAI5G,EACnfsmC,GAAGzmC,GAAGI,EAAE4gC,GAAGpnC,EAAEuG,GAAGC,EAAE2J,IAAI,OAAE,IAAS7J,GAAG,OAAOA,IAAIE,EAAEyD,SAAS3D,GAAe,QAAZA,EAAEkhC,GAAGphC,EAAEI,EAAED,MAAcmlC,GAAGplC,EAAEF,EAAEG,EAAEvG,GAAGynC,GAAGnhC,EAAEF,EAAEG,GAAG,GAAG,SAASqoC,GAAGxoC,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,EAAEkB,GAAiB,MAAM,oBAApBD,EAAEA,EAAE+f,WAAsC0oB,sBAAsBzoC,EAAEyoC,sBAAsBtoC,EAAEpB,EAAEkB,IAAGC,EAAEZ,YAAWY,EAAEZ,UAAUopC,wBAAsBrW,GAAGz4B,EAAEuG,KAAKkyB,GAAGjyB,EAAErB,GAAK,CAC1S,SAAS4pC,GAAG3oC,EAAEE,EAAEtG,GAAG,IAAIuG,GAAE,EAAGC,EAAEo6B,GAAOz7B,EAAEmB,EAAE0oC,YAA2W,MAA/V,kBAAkB7pC,GAAG,OAAOA,EAAEA,EAAE+gC,GAAG/gC,IAAIqB,EAAE46B,GAAG96B,GAAGy6B,GAAGF,GAAE95B,QAAyB5B,GAAGoB,EAAE,QAAtBA,EAAED,EAAE26B,oBAA4B,IAAS16B,GAAGy6B,GAAG56B,EAAEI,GAAGo6B,IAAIt6B,EAAE,IAAIA,EAAEtG,EAAEmF,GAAGiB,EAAEshB,cAAc,OAAOphB,EAAEvG,YAAO,IAASuG,EAAEvG,MAAMuG,EAAEvG,MAAM,KAAKuG,EAAE2oC,QAAQX,GAAGloC,EAAE+f,UAAU7f,EAAEA,EAAEkoC,gBAAgBpoC,EAAEG,KAAIH,EAAEA,EAAE+f,WAAY+a,4CAA4C16B,EAAEJ,EAAE+6B,0CAA0Ch8B,GAAUmB,CAAC,CAC5Z,SAAS4oC,GAAG9oC,EAAEE,EAAEtG,EAAEuG,GAAGH,EAAEE,EAAEvG,MAAM,oBAAoBuG,EAAE6oC,2BAA2B7oC,EAAE6oC,0BAA0BnvC,EAAEuG,GAAG,oBAAoBD,EAAE8oC,kCAAkC9oC,EAAE8oC,iCAAiCpvC,EAAEuG,GAAGD,EAAEvG,QAAQqG,GAAGkoC,GAAGI,oBAAoBpoC,EAAEA,EAAEvG,MAAM,KAAK,CACpQ,SAASsvC,GAAGjpC,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAEJ,EAAE+f,UAAU3f,EAAEK,MAAM7G,EAAEwG,EAAEzG,MAAMqG,EAAEshB,cAAclhB,EAAE+9B,KAAK,CAAC,EAAEoC,GAAGvgC,GAAG,IAAIjB,EAAEmB,EAAE0oC,YAAY,kBAAkB7pC,GAAG,OAAOA,EAAEqB,EAAE2/B,QAAQD,GAAG/gC,IAAIA,EAAEi8B,GAAG96B,GAAGy6B,GAAGF,GAAE95B,QAAQP,EAAE2/B,QAAQnF,GAAG56B,EAAEjB,IAAIqB,EAAEzG,MAAMqG,EAAEshB,cAA2C,oBAA7BviB,EAAEmB,EAAEgpC,4BAAiDjB,GAAGjoC,EAAEE,EAAEnB,EAAEnF,GAAGwG,EAAEzG,MAAMqG,EAAEshB,eAAe,oBAAoBphB,EAAEgpC,0BAA0B,oBAAoB9oC,EAAE+oC,yBAAyB,oBAAoB/oC,EAAEgpC,2BAA2B,oBAAoBhpC,EAAEipC,qBAAqBnpC,EAAEE,EAAEzG,MACrf,oBAAoByG,EAAEipC,oBAAoBjpC,EAAEipC,qBAAqB,oBAAoBjpC,EAAEgpC,2BAA2BhpC,EAAEgpC,4BAA4BlpC,IAAIE,EAAEzG,OAAOuuC,GAAGI,oBAAoBloC,EAAEA,EAAEzG,MAAM,MAAM4nC,GAAGvhC,EAAEpG,EAAEwG,EAAED,GAAGC,EAAEzG,MAAMqG,EAAEshB,eAAe,oBAAoBlhB,EAAEkpC,oBAAoBtpC,EAAEsN,OAAO,QAAQ,CAAC,SAASi8B,GAAGvpC,EAAEE,GAAG,IAAI,IAAItG,EAAE,GAAGuG,EAAED,EAAE,GAAGtG,GAAG+c,EAAGxW,GAAGA,EAAEA,EAAEihB,aAAajhB,GAAG,IAAIC,EAAExG,CAAC,CAAC,MAAMmF,GAAGqB,EAAE,6BAA6BrB,EAAEoO,QAAQ,KAAKpO,EAAEiX,KAAK,CAAC,MAAM,CAACiC,MAAMjY,EAAE8e,OAAO5e,EAAE8V,MAAM5V,EAAExC,OAAO,KAAK,CAC1d,SAAS4rC,GAAGxpC,EAAEE,EAAEtG,GAAG,MAAM,CAACqe,MAAMjY,EAAE8e,OAAO,KAAK9I,MAAM,MAAMpc,EAAEA,EAAE,KAAKgE,OAAO,MAAMsC,EAAEA,EAAE,KAAK,CAAC,SAASupC,GAAGzpC,EAAEE,GAAG,IAAIuO,QAAQ7V,MAAMsH,EAAE+X,MAAM,CAAC,MAAMre,GAAGm/B,WAAW,WAAW,MAAMn/B,CAAE,EAAE,CAAC,CAAC,IAAI8vC,GAAG,oBAAoBC,QAAQA,QAAQnkB,IAAI,SAASokB,GAAG5pC,EAAEE,EAAEtG,IAAGA,EAAEonC,IAAI,EAAEpnC,IAAKmQ,IAAI,EAAEnQ,EAAEunC,QAAQ,CAAC5M,QAAQ,MAAM,IAAIp0B,EAAED,EAAE+X,MAAsD,OAAhDre,EAAEiK,SAAS,WAAWgmC,KAAKA,IAAG,EAAGC,GAAG3pC,GAAGspC,GAAGzpC,EAAEE,EAAE,EAAStG,CAAC,CACrW,SAASmwC,GAAG/pC,EAAEE,EAAEtG,IAAGA,EAAEonC,IAAI,EAAEpnC,IAAKmQ,IAAI,EAAE,IAAI5J,EAAEH,EAAE1H,KAAK0xC,yBAAyB,GAAG,oBAAoB7pC,EAAE,CAAC,IAAIC,EAAEF,EAAE+X,MAAMre,EAAEunC,QAAQ,WAAW,OAAOhhC,EAAEC,EAAE,EAAExG,EAAEiK,SAAS,WAAW4lC,GAAGzpC,EAAEE,EAAE,CAAC,CAAC,IAAInB,EAAEiB,EAAE+f,UAA8O,OAApO,OAAOhhB,GAAG,oBAAoBA,EAAEkrC,oBAAoBrwC,EAAEiK,SAAS,WAAW4lC,GAAGzpC,EAAEE,GAAG,oBAAoBC,IAAI,OAAO+pC,GAAGA,GAAG,IAAI33B,IAAI,CAAChK,OAAO2hC,GAAGv3B,IAAIpK,OAAO,IAAI3O,EAAEsG,EAAE8V,MAAMzN,KAAK0hC,kBAAkB/pC,EAAE+X,MAAM,CAACkyB,eAAe,OAAOvwC,EAAEA,EAAE,IAAI,GAAUA,CAAC,CACnb,SAASwwC,GAAGpqC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEH,EAAEqqC,UAAU,GAAG,OAAOlqC,EAAE,CAACA,EAAEH,EAAEqqC,UAAU,IAAIX,GAAG,IAAItpC,EAAE,IAAImS,IAAIpS,EAAEmW,IAAIpW,EAAEE,EAAE,WAAiB,KAAXA,EAAED,EAAEqP,IAAItP,MAAgBE,EAAE,IAAImS,IAAIpS,EAAEmW,IAAIpW,EAAEE,IAAIA,EAAEmP,IAAI3V,KAAKwG,EAAEuS,IAAI/Y,GAAGoG,EAAEsqC,GAAGrT,KAAK,KAAKj3B,EAAEE,EAAEtG,GAAGsG,EAAEq5B,KAAKv5B,EAAEA,GAAG,CAAC,SAASuqC,GAAGvqC,GAAG,EAAE,CAAC,IAAIE,EAA4E,IAAvEA,EAAE,KAAKF,EAAE+J,OAAsB7J,EAAE,QAApBA,EAAEF,EAAEshB,gBAAyB,OAAOphB,EAAEqhB,YAAuBrhB,EAAE,OAAOF,EAAEA,EAAEA,EAAEohB,MAAM,OAAO,OAAOphB,GAAG,OAAO,IAAI,CAChW,SAASwqC,GAAGxqC,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,OAAG,KAAY,EAAPJ,EAAEw9B,OAAex9B,IAAIE,EAAEF,EAAEsN,OAAO,OAAOtN,EAAEsN,OAAO,IAAI1T,EAAE0T,OAAO,OAAO1T,EAAE0T,QAAQ,MAAM,IAAI1T,EAAEmQ,MAAM,OAAOnQ,EAAEunB,UAAUvnB,EAAEmQ,IAAI,KAAI7J,EAAE8gC,IAAI,EAAE,IAAKj3B,IAAI,EAAEq3B,GAAGxnC,EAAEsG,EAAE,KAAKtG,EAAEgmC,OAAO,GAAG5/B,IAAEA,EAAEsN,OAAO,MAAMtN,EAAE4/B,MAAMx/B,EAASJ,EAAC,CAAC,IAAIyqC,GAAG91B,EAAGjV,kBAAkBmgC,IAAG,EAAG,SAAS6K,GAAG1qC,EAAEE,EAAEtG,EAAEuG,GAAGD,EAAEwhB,MAAM,OAAO1hB,EAAEg/B,GAAG9+B,EAAE,KAAKtG,EAAEuG,GAAG4+B,GAAG7+B,EAAEF,EAAE0hB,MAAM9nB,EAAEuG,EAAE,CACnV,SAASwqC,GAAG3qC,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAGxG,EAAEA,EAAEgd,OAAO,IAAI7X,EAAEmB,EAAEN,IAAqC,OAAjC6/B,GAAGv/B,EAAEE,GAAGD,EAAEmjC,GAAGtjC,EAAEE,EAAEtG,EAAEuG,EAAEpB,EAAEqB,GAAGxG,EAAE+pC,KAAQ,OAAO3jC,GAAI6/B,IAA2EhD,IAAGjjC,GAAG6iC,GAAGv8B,GAAGA,EAAEoN,OAAO,EAAEo9B,GAAG1qC,EAAEE,EAAEC,EAAEC,GAAUF,EAAEwhB,QAA7GxhB,EAAEsgC,YAAYxgC,EAAEwgC,YAAYtgC,EAAEoN,QAAQ,KAAKtN,EAAE4/B,QAAQx/B,EAAEwqC,GAAG5qC,EAAEE,EAAEE,GAAoD,CACzN,SAASyqC,GAAG7qC,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,GAAG,OAAOJ,EAAE,CAAC,IAAIjB,EAAEnF,EAAEtB,KAAK,MAAG,oBAAoByG,GAAI+rC,GAAG/rC,SAAI,IAASA,EAAEwB,cAAc,OAAO3G,EAAEmxC,cAAS,IAASnxC,EAAE2G,eAAoDP,EAAEy+B,GAAG7kC,EAAEtB,KAAK,KAAK6H,EAAED,EAAEA,EAAEs9B,KAAKp9B,IAAKR,IAAIM,EAAEN,IAAII,EAAEohB,OAAOlhB,EAASA,EAAEwhB,MAAM1hB,IAArGE,EAAE6J,IAAI,GAAG7J,EAAE5H,KAAKyG,EAAEisC,GAAGhrC,EAAEE,EAAEnB,EAAEoB,EAAEC,GAAyE,CAAW,GAAVrB,EAAEiB,EAAE0hB,MAAS,KAAK1hB,EAAE4/B,MAAMx/B,GAAG,CAAC,IAAIH,EAAElB,EAAE6+B,cAA0C,IAAhBhkC,EAAE,QAAdA,EAAEA,EAAEmxC,SAAmBnxC,EAAEy4B,IAAQpyB,EAAEE,IAAIH,EAAEJ,MAAMM,EAAEN,IAAI,OAAOgrC,GAAG5qC,EAAEE,EAAEE,EAAE,CAA6C,OAA5CF,EAAEoN,OAAO,GAAEtN,EAAEu+B,GAAGx/B,EAAEoB,IAAKP,IAAIM,EAAEN,IAAII,EAAEohB,OAAOlhB,EAASA,EAAEwhB,MAAM1hB,CAAC,CAC1b,SAASgrC,GAAGhrC,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,GAAG,OAAOJ,EAAE,CAAC,IAAIjB,EAAEiB,EAAE49B,cAAc,GAAGvL,GAAGtzB,EAAEoB,IAAIH,EAAEJ,MAAMM,EAAEN,IAAI,IAAGigC,IAAG,EAAG3/B,EAAEk9B,aAAaj9B,EAAEpB,EAAE,KAAKiB,EAAE4/B,MAAMx/B,GAAsC,OAAOF,EAAE0/B,MAAM5/B,EAAE4/B,MAAMgL,GAAG5qC,EAAEE,EAAEE,GAAjE,KAAa,OAARJ,EAAEsN,SAAgBuyB,IAAG,EAAyC,EAAC,OAAOoL,GAAGjrC,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAE,CACxN,SAAS8qC,GAAGlrC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAED,EAAEk9B,aAAah9B,EAAED,EAAEqZ,SAASza,EAAE,OAAOiB,EAAEA,EAAEshB,cAAc,KAAK,GAAG,WAAWnhB,EAAEq9B,KAAK,GAAG,KAAY,EAAPt9B,EAAEs9B,MAAQt9B,EAAEohB,cAAc,CAAC6pB,UAAU,EAAEC,UAAU,KAAKC,YAAY,MAAM9Q,GAAE+Q,GAAGC,IAAIA,IAAI3xC,MAAM,CAAC,GAAG,KAAO,WAAFA,GAAc,OAAOoG,EAAE,OAAOjB,EAAEA,EAAEosC,UAAUvxC,EAAEA,EAAEsG,EAAE0/B,MAAM1/B,EAAEs/B,WAAW,WAAWt/B,EAAEohB,cAAc,CAAC6pB,UAAUnrC,EAAEorC,UAAU,KAAKC,YAAY,MAAMnrC,EAAEsgC,YAAY,KAAKjG,GAAE+Q,GAAGC,IAAIA,IAAIvrC,EAAE,KAAKE,EAAEohB,cAAc,CAAC6pB,UAAU,EAAEC,UAAU,KAAKC,YAAY,MAAMlrC,EAAE,OAAOpB,EAAEA,EAAEosC,UAAUvxC,EAAE2gC,GAAE+Q,GAAGC,IAAIA,IAAIprC,CAAC,MAAM,OACtfpB,GAAGoB,EAAEpB,EAAEosC,UAAUvxC,EAAEsG,EAAEohB,cAAc,MAAMnhB,EAAEvG,EAAE2gC,GAAE+Q,GAAGC,IAAIA,IAAIprC,EAAc,OAAZuqC,GAAG1qC,EAAEE,EAAEE,EAAExG,GAAUsG,EAAEwhB,KAAK,CAAC,SAAS8pB,GAAGxrC,EAAEE,GAAG,IAAItG,EAAEsG,EAAEN,KAAO,OAAOI,GAAG,OAAOpG,GAAG,OAAOoG,GAAGA,EAAEJ,MAAMhG,KAAEsG,EAAEoN,OAAO,IAAIpN,EAAEoN,OAAO,QAAO,CAAC,SAAS29B,GAAGjrC,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,IAAIrB,EAAEi8B,GAAGphC,GAAG+gC,GAAGF,GAAE95B,QAAmD,OAA3C5B,EAAE67B,GAAG16B,EAAEnB,GAAG0gC,GAAGv/B,EAAEE,GAAGxG,EAAE0pC,GAAGtjC,EAAEE,EAAEtG,EAAEuG,EAAEpB,EAAEqB,GAAGD,EAAEwjC,KAAQ,OAAO3jC,GAAI6/B,IAA2EhD,IAAG18B,GAAGs8B,GAAGv8B,GAAGA,EAAEoN,OAAO,EAAEo9B,GAAG1qC,EAAEE,EAAEtG,EAAEwG,GAAUF,EAAEwhB,QAA7GxhB,EAAEsgC,YAAYxgC,EAAEwgC,YAAYtgC,EAAEoN,QAAQ,KAAKtN,EAAE4/B,QAAQx/B,EAAEwqC,GAAG5qC,EAAEE,EAAEE,GAAoD,CACla,SAASqrC,GAAGzrC,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,GAAG46B,GAAGphC,GAAG,CAAC,IAAImF,GAAE,EAAGu8B,GAAGp7B,EAAE,MAAMnB,GAAE,EAAW,GAAR0gC,GAAGv/B,EAAEE,GAAM,OAAOF,EAAE6f,UAAU2rB,GAAG1rC,EAAEE,GAAGyoC,GAAGzoC,EAAEtG,EAAEuG,GAAG8oC,GAAG/oC,EAAEtG,EAAEuG,EAAEC,GAAGD,GAAE,OAAQ,GAAG,OAAOH,EAAE,CAAC,IAAIC,EAAEC,EAAE6f,UAAU1f,EAAEH,EAAE09B,cAAc39B,EAAEQ,MAAMJ,EAAE,IAAIrB,EAAEiB,EAAE8/B,QAAQ5gC,EAAEvF,EAAEgvC,YAAY,kBAAkBzpC,GAAG,OAAOA,EAAEA,EAAE2gC,GAAG3gC,GAAyBA,EAAEy7B,GAAG16B,EAA1Bf,EAAE67B,GAAGphC,GAAG+gC,GAAGF,GAAE95B,SAAmB,IAAIvB,EAAExF,EAAEsvC,yBAAyBnpC,EAAE,oBAAoBX,GAAG,oBAAoBa,EAAEkpC,wBAAwBppC,GAAG,oBAAoBE,EAAE+oC,kCAAkC,oBAAoB/oC,EAAE8oC,4BAC1d1oC,IAAIF,GAAGnB,IAAIG,IAAI2pC,GAAG5oC,EAAED,EAAEE,EAAEhB,GAAGmhC,IAAG,EAAG,IAAIzB,EAAE3+B,EAAEohB,cAAcrhB,EAAEtG,MAAMklC,EAAE0C,GAAGrhC,EAAEC,EAAEF,EAAEG,GAAGpB,EAAEkB,EAAEohB,cAAcjhB,IAAIF,GAAG0+B,IAAI7/B,GAAG07B,GAAG/5B,SAAS2/B,IAAI,oBAAoBlhC,IAAI6oC,GAAG/nC,EAAEtG,EAAEwF,EAAEe,GAAGnB,EAAEkB,EAAEohB,gBAAgBjhB,EAAEigC,IAAIkI,GAAGtoC,EAAEtG,EAAEyG,EAAEF,EAAE0+B,EAAE7/B,EAAEG,KAAKY,GAAG,oBAAoBE,EAAEmpC,2BAA2B,oBAAoBnpC,EAAEopC,qBAAqB,oBAAoBppC,EAAEopC,oBAAoBppC,EAAEopC,qBAAqB,oBAAoBppC,EAAEmpC,2BAA2BnpC,EAAEmpC,6BAA6B,oBAAoBnpC,EAAEqpC,oBAAoBppC,EAAEoN,OAAO,WAClf,oBAAoBrN,EAAEqpC,oBAAoBppC,EAAEoN,OAAO,SAASpN,EAAE09B,cAAcz9B,EAAED,EAAEohB,cAActiB,GAAGiB,EAAEQ,MAAMN,EAAEF,EAAEtG,MAAMqF,EAAEiB,EAAE8/B,QAAQ5gC,EAAEgB,EAAEE,IAAI,oBAAoBJ,EAAEqpC,oBAAoBppC,EAAEoN,OAAO,SAASnN,GAAE,EAAG,KAAK,CAACF,EAAEC,EAAE6f,UAAUghB,GAAG/gC,EAAEE,GAAGG,EAAEH,EAAE09B,cAAcz+B,EAAEe,EAAE5H,OAAO4H,EAAE+8B,YAAY58B,EAAE2nC,GAAG9nC,EAAE5H,KAAK+H,GAAGJ,EAAEQ,MAAMtB,EAAEY,EAAEG,EAAEk9B,aAAayB,EAAE5+B,EAAE8/B,QAAwB,kBAAhB/gC,EAAEpF,EAAEgvC,cAAiC,OAAO5pC,EAAEA,EAAE8gC,GAAG9gC,GAAyBA,EAAE47B,GAAG16B,EAA1BlB,EAAEg8B,GAAGphC,GAAG+gC,GAAGF,GAAE95B,SAAmB,IAAImK,EAAElR,EAAEsvC,0BAA0B9pC,EAAE,oBAAoB0L,GAAG,oBAAoB7K,EAAEkpC,0BAC9e,oBAAoBlpC,EAAE+oC,kCAAkC,oBAAoB/oC,EAAE8oC,4BAA4B1oC,IAAIN,GAAG8+B,IAAI7/B,IAAI8pC,GAAG5oC,EAAED,EAAEE,EAAEnB,GAAGshC,IAAG,EAAGzB,EAAE3+B,EAAEohB,cAAcrhB,EAAEtG,MAAMklC,EAAE0C,GAAGrhC,EAAEC,EAAEF,EAAEG,GAAG,IAAIZ,EAAEU,EAAEohB,cAAcjhB,IAAIN,GAAG8+B,IAAIr/B,GAAGk7B,GAAG/5B,SAAS2/B,IAAI,oBAAoBx1B,IAAIm9B,GAAG/nC,EAAEtG,EAAEkR,EAAE3K,GAAGX,EAAEU,EAAEohB,gBAAgBniB,EAAEmhC,IAAIkI,GAAGtoC,EAAEtG,EAAEuF,EAAEgB,EAAE0+B,EAAEr/B,EAAER,KAAI,IAAKI,GAAG,oBAAoBa,EAAE0rC,4BAA4B,oBAAoB1rC,EAAE2rC,sBAAsB,oBAAoB3rC,EAAE2rC,qBAAqB3rC,EAAE2rC,oBAAoBzrC,EAAEX,EAAER,GAAG,oBAAoBiB,EAAE0rC,4BAC5f1rC,EAAE0rC,2BAA2BxrC,EAAEX,EAAER,IAAI,oBAAoBiB,EAAE4rC,qBAAqB3rC,EAAEoN,OAAO,GAAG,oBAAoBrN,EAAEkpC,0BAA0BjpC,EAAEoN,OAAO,QAAQ,oBAAoBrN,EAAE4rC,oBAAoBxrC,IAAIL,EAAE49B,eAAeiB,IAAI7+B,EAAEshB,gBAAgBphB,EAAEoN,OAAO,GAAG,oBAAoBrN,EAAEkpC,yBAAyB9oC,IAAIL,EAAE49B,eAAeiB,IAAI7+B,EAAEshB,gBAAgBphB,EAAEoN,OAAO,MAAMpN,EAAE09B,cAAcz9B,EAAED,EAAEohB,cAAc9hB,GAAGS,EAAEQ,MAAMN,EAAEF,EAAEtG,MAAM6F,EAAES,EAAE8/B,QAAQ/gC,EAAEmB,EAAEhB,IAAI,oBAAoBc,EAAE4rC,oBAAoBxrC,IAAIL,EAAE49B,eAAeiB,IACjf7+B,EAAEshB,gBAAgBphB,EAAEoN,OAAO,GAAG,oBAAoBrN,EAAEkpC,yBAAyB9oC,IAAIL,EAAE49B,eAAeiB,IAAI7+B,EAAEshB,gBAAgBphB,EAAEoN,OAAO,MAAMnN,GAAE,EAAG,CAAC,OAAO2rC,GAAG9rC,EAAEE,EAAEtG,EAAEuG,EAAEpB,EAAEqB,EAAE,CACnK,SAAS0rC,GAAG9rC,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,GAAGysC,GAAGxrC,EAAEE,GAAG,IAAID,EAAE,KAAa,IAARC,EAAEoN,OAAW,IAAInN,IAAIF,EAAE,OAAOG,GAAGo7B,GAAGt7B,EAAEtG,GAAE,GAAIgxC,GAAG5qC,EAAEE,EAAEnB,GAAGoB,EAAED,EAAE6f,UAAU0qB,GAAG9pC,QAAQT,EAAE,IAAIG,EAAEJ,GAAG,oBAAoBrG,EAAEowC,yBAAyB,KAAK7pC,EAAEyW,SAAwI,OAA/H1W,EAAEoN,OAAO,EAAE,OAAOtN,GAAGC,GAAGC,EAAEwhB,MAAMqd,GAAG7+B,EAAEF,EAAE0hB,MAAM,KAAK3iB,GAAGmB,EAAEwhB,MAAMqd,GAAG7+B,EAAE,KAAKG,EAAEtB,IAAI2rC,GAAG1qC,EAAEE,EAAEG,EAAEtB,GAAGmB,EAAEohB,cAAcnhB,EAAExG,MAAMyG,GAAGo7B,GAAGt7B,EAAEtG,GAAE,GAAWsG,EAAEwhB,KAAK,CAAC,SAASqqB,GAAG/rC,GAAG,IAAIE,EAAEF,EAAE+f,UAAU7f,EAAE8rC,eAAe7Q,GAAGn7B,EAAEE,EAAE8rC,eAAe9rC,EAAE8rC,iBAAiB9rC,EAAE6/B,SAAS7/B,EAAE6/B,SAAS5E,GAAGn7B,EAAEE,EAAE6/B,SAAQ,GAAIgC,GAAG/hC,EAAEE,EAAEumB,cAAc,CAC5e,SAASwlB,GAAGjsC,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAuC,OAApC09B,KAAKC,GAAG39B,GAAGF,EAAEoN,OAAO,IAAIo9B,GAAG1qC,EAAEE,EAAEtG,EAAEuG,GAAUD,EAAEwhB,KAAK,CAAC,IAaqLwqB,GAAGC,GAAGC,GAAGC,GAb1LC,GAAG,CAAC/qB,WAAW,KAAK8b,YAAY,KAAKC,UAAU,GAAG,SAASiP,GAAGvsC,GAAG,MAAM,CAACmrC,UAAUnrC,EAAEorC,UAAU,KAAKC,YAAY,KAAK,CAClM,SAASmB,GAAGxsC,EAAEE,EAAEtG,GAAG,IAA0DyG,EAAtDF,EAAED,EAAEk9B,aAAah9B,EAAEyF,GAAElF,QAAQ5B,GAAE,EAAGkB,EAAE,KAAa,IAARC,EAAEoN,OAAqJ,IAAvIjN,EAAEJ,KAAKI,GAAE,OAAOL,GAAG,OAAOA,EAAEshB,gBAAiB,KAAO,EAAFlhB,IAASC,GAAEtB,GAAE,EAAGmB,EAAEoN,QAAQ,KAAY,OAAOtN,GAAG,OAAOA,EAAEshB,gBAAclhB,GAAG,GAAEm6B,GAAE10B,GAAI,EAAFzF,GAAQ,OAAOJ,EAA2B,OAAxBy9B,GAAGv9B,GAAwB,QAArBF,EAAEE,EAAEohB,gBAA2C,QAAfthB,EAAEA,EAAEuhB,aAA4B,KAAY,EAAPrhB,EAAEs9B,MAAQt9B,EAAE0/B,MAAM,EAAE,OAAO5/B,EAAEkF,KAAKhF,EAAE0/B,MAAM,EAAE1/B,EAAE0/B,MAAM,WAAW,OAAK3/B,EAAEE,EAAEqZ,SAASxZ,EAAEG,EAAEssC,SAAgB1tC,GAAGoB,EAAED,EAAEs9B,KAAKz+B,EAAEmB,EAAEwhB,MAAMzhB,EAAE,CAACu9B,KAAK,SAAShkB,SAASvZ,GAAG,KAAO,EAAFE,IAAM,OAAOpB,GAAGA,EAAEygC,WAAW,EAAEzgC,EAAEq+B,aAC7en9B,GAAGlB,EAAE2tC,GAAGzsC,EAAEE,EAAE,EAAE,MAAMH,EAAE4+B,GAAG5+B,EAAEG,EAAEvG,EAAE,MAAMmF,EAAEqiB,OAAOlhB,EAAEF,EAAEohB,OAAOlhB,EAAEnB,EAAE4iB,QAAQ3hB,EAAEE,EAAEwhB,MAAM3iB,EAAEmB,EAAEwhB,MAAMJ,cAAcirB,GAAG3yC,GAAGsG,EAAEohB,cAAcgrB,GAAGtsC,GAAG2sC,GAAGzsC,EAAED,IAAqB,GAAG,QAArBG,EAAEJ,EAAEshB,gBAA2C,QAAfjhB,EAAED,EAAEmhB,YAAqB,OAGpM,SAAYvhB,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,EAAEkB,GAAG,GAAGrG,EAAG,OAAW,IAARsG,EAAEoN,OAAiBpN,EAAEoN,QAAQ,IAAwBs/B,GAAG5sC,EAAEE,EAAED,EAA3BE,EAAEqpC,GAAGjxC,MAAMoH,EAAE,SAAsB,OAAOO,EAAEohB,eAAqBphB,EAAEwhB,MAAM1hB,EAAE0hB,MAAMxhB,EAAEoN,OAAO,IAAI,OAAKvO,EAAEoB,EAAEssC,SAASrsC,EAAEF,EAAEs9B,KAAKr9B,EAAEusC,GAAG,CAAClP,KAAK,UAAUhkB,SAASrZ,EAAEqZ,UAAUpZ,EAAE,EAAE,OAAMrB,EAAE6/B,GAAG7/B,EAAEqB,EAAEH,EAAE,OAAQqN,OAAO,EAAEnN,EAAEihB,OAAOlhB,EAAEnB,EAAEqiB,OAAOlhB,EAAEC,EAAEwhB,QAAQ5iB,EAAEmB,EAAEwhB,MAAMvhB,EAAE,KAAY,EAAPD,EAAEs9B,OAASuB,GAAG7+B,EAAEF,EAAE0hB,MAAM,KAAKzhB,GAAGC,EAAEwhB,MAAMJ,cAAcirB,GAAGtsC,GAAGC,EAAEohB,cAAcgrB,GAAUvtC,GAAE,GAAG,KAAY,EAAPmB,EAAEs9B,MAAQ,OAAOoP,GAAG5sC,EAAEE,EAAED,EAAE,MAAM,GAAG,OAAOG,EAAE8E,KAAK,CAChd,GADid/E,EAAEC,EAAEsyB,aAAatyB,EAAEsyB,YAAYma,QAC3e,IAAIxsC,EAAEF,EAAE2sC,KAA0C,OAArC3sC,EAAEE,EAA0CusC,GAAG5sC,EAAEE,EAAED,EAA/BE,EAAEqpC,GAAlBzqC,EAAExG,MAAMoH,EAAE,MAAaQ,OAAE,GAA0B,CAAwB,GAAvBE,EAAE,KAAKJ,EAAED,EAAEw/B,YAAeK,IAAIx/B,EAAE,CAAK,GAAG,QAAPF,EAAE6kC,IAAc,CAAC,OAAO/kC,GAAGA,GAAG,KAAK,EAAEG,EAAE,EAAE,MAAM,KAAK,GAAGA,EAAE,EAAE,MAAM,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,SAAS,KAAK,SAAS,KAAK,SAASA,EAAE,GAAG,MAAM,KAAK,UAAUA,EAAE,UAAU,MAAM,QAAQA,EAAE,EAChd,KADkdA,EAAE,KAAKA,GAAGD,EAAE6jB,eAAe/jB,IAAI,EAAEG,IAC5eA,IAAIrB,EAAEu+B,YAAYv+B,EAAEu+B,UAAUl9B,EAAEigC,GAAGrgC,EAAEI,GAAGklC,GAAGnlC,EAAEH,EAAEI,GAAG,GAAG,CAA0B,OAAzB2sC,KAAgCH,GAAG5sC,EAAEE,EAAED,EAAlCE,EAAEqpC,GAAGjxC,MAAMoH,EAAE,OAAyB,CAAC,MAAG,OAAOS,EAAE8E,MAAYhF,EAAEoN,OAAO,IAAIpN,EAAEwhB,MAAM1hB,EAAE0hB,MAAMxhB,EAAE8sC,GAAG/V,KAAK,KAAKj3B,GAAGI,EAAE6sC,YAAY/sC,EAAE,OAAKF,EAAEjB,EAAEs+B,YAAYT,GAAGjD,GAAGv5B,EAAEsyB,aAAaiK,GAAGz8B,EAAE28B,IAAE,EAAGC,GAAG,KAAK,OAAO98B,IAAIk8B,GAAGC,MAAME,GAAGH,GAAGC,MAAMG,GAAGJ,GAAGC,MAAMC,GAAGC,GAAGr8B,EAAEjC,GAAGu+B,GAAGt8B,EAAE4I,SAASwzB,GAAGl8B,GAAGA,EAAEysC,GAAGzsC,EAAEC,EAAEqZ,UAAUtZ,EAAEoN,OAAO,KAAYpN,EAAC,CALrKgtC,CAAGltC,EAAEE,EAAED,EAAEE,EAAEE,EAAED,EAAExG,GAAG,GAAGmF,EAAE,CAACA,EAAEoB,EAAEssC,SAASxsC,EAAEC,EAAEs9B,KAAen9B,GAAVD,EAAEJ,EAAE0hB,OAAUC,QAAQ,IAAI3iB,EAAE,CAACw+B,KAAK,SAAShkB,SAASrZ,EAAEqZ,UAChF,OAD0F,KAAO,EAAFvZ,IAAMC,EAAEwhB,QAAQthB,IAAGD,EAAED,EAAEwhB,OAAQ8d,WAAW,EAAEr/B,EAAEi9B,aAAap+B,EAAEkB,EAAEg9B,UAAU,OAAO/8B,EAAEo+B,GAAGn+B,EAAEpB,IAAKmuC,aAA4B,SAAf/sC,EAAE+sC,aAAuB,OAAO9sC,EAAEtB,EAAEw/B,GAAGl+B,EAAEtB,IAAIA,EAAE6/B,GAAG7/B,EAAEkB,EAAErG,EAAE,OAAQ0T,OAAO,EAAGvO,EAAEqiB,OACnflhB,EAAEC,EAAEihB,OAAOlhB,EAAEC,EAAEwhB,QAAQ5iB,EAAEmB,EAAEwhB,MAAMvhB,EAAEA,EAAEpB,EAAEA,EAAEmB,EAAEwhB,MAA8BzhB,EAAE,QAA1BA,EAAED,EAAE0hB,MAAMJ,eAAyBirB,GAAG3yC,GAAG,CAACuxC,UAAUlrC,EAAEkrC,UAAUvxC,EAAEwxC,UAAU,KAAKC,YAAYprC,EAAEorC,aAAatsC,EAAEuiB,cAAcrhB,EAAElB,EAAEygC,WAAWx/B,EAAEw/B,YAAY5lC,EAAEsG,EAAEohB,cAAcgrB,GAAUnsC,CAAC,CAAoO,OAAzNH,GAAVjB,EAAEiB,EAAE0hB,OAAUC,QAAQxhB,EAAEo+B,GAAGx/B,EAAE,CAACy+B,KAAK,UAAUhkB,SAASrZ,EAAEqZ,WAAW,KAAY,EAAPtZ,EAAEs9B,QAAUr9B,EAAEy/B,MAAMhmC,GAAGuG,EAAEihB,OAAOlhB,EAAEC,EAAEwhB,QAAQ,KAAK,OAAO3hB,IAAkB,QAAdpG,EAAEsG,EAAEg9B,YAAoBh9B,EAAEg9B,UAAU,CAACl9B,GAAGE,EAAEoN,OAAO,IAAI1T,EAAEiN,KAAK7G,IAAIE,EAAEwhB,MAAMvhB,EAAED,EAAEohB,cAAc,KAAYnhB,CAAC,CACnd,SAASwsC,GAAG3sC,EAAEE,GAA8D,OAA3DA,EAAEwsC,GAAG,CAAClP,KAAK,UAAUhkB,SAAStZ,GAAGF,EAAEw9B,KAAK,EAAE,OAAQpc,OAAOphB,EAASA,EAAE0hB,MAAMxhB,CAAC,CAAC,SAAS0sC,GAAG5sC,EAAEE,EAAEtG,EAAEuG,GAAwG,OAArG,OAAOA,GAAG49B,GAAG59B,GAAG4+B,GAAG7+B,EAAEF,EAAE0hB,MAAM,KAAK9nB,IAAGoG,EAAE2sC,GAAGzsC,EAAEA,EAAEk9B,aAAa5jB,WAAYlM,OAAO,EAAEpN,EAAEohB,cAAc,KAAYthB,CAAC,CAGkJ,SAASotC,GAAGptC,EAAEE,EAAEtG,GAAGoG,EAAE4/B,OAAO1/B,EAAE,IAAIC,EAAEH,EAAEmhB,UAAU,OAAOhhB,IAAIA,EAAEy/B,OAAO1/B,GAAGq/B,GAAGv/B,EAAEohB,OAAOlhB,EAAEtG,EAAE,CACxc,SAASyzC,GAAGrtC,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,IAAIrB,EAAEiB,EAAEshB,cAAc,OAAOviB,EAAEiB,EAAEshB,cAAc,CAACgsB,YAAYptC,EAAEqtC,UAAU,KAAKC,mBAAmB,EAAErwC,KAAKgD,EAAEstC,KAAK7zC,EAAE8zC,SAASttC,IAAIrB,EAAEuuC,YAAYptC,EAAEnB,EAAEwuC,UAAU,KAAKxuC,EAAEyuC,mBAAmB,EAAEzuC,EAAE5B,KAAKgD,EAAEpB,EAAE0uC,KAAK7zC,EAAEmF,EAAE2uC,SAASttC,EAAE,CAC3O,SAASutC,GAAG3tC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAED,EAAEk9B,aAAah9B,EAAED,EAAEkiC,YAAYtjC,EAAEoB,EAAEstC,KAAsC,GAAjC/C,GAAG1qC,EAAEE,EAAEC,EAAEqZ,SAAS5f,GAAkB,KAAO,GAAtBuG,EAAE0F,GAAElF,UAAqBR,EAAI,EAAFA,EAAI,EAAED,EAAEoN,OAAO,QAAQ,CAAC,GAAG,OAAOtN,GAAG,KAAa,IAARA,EAAEsN,OAAWtN,EAAE,IAAIA,EAAEE,EAAEwhB,MAAM,OAAO1hB,GAAG,CAAC,GAAG,KAAKA,EAAE+J,IAAI,OAAO/J,EAAEshB,eAAe8rB,GAAGptC,EAAEpG,EAAEsG,QAAQ,GAAG,KAAKF,EAAE+J,IAAIqjC,GAAGptC,EAAEpG,EAAEsG,QAAQ,GAAG,OAAOF,EAAE0hB,MAAM,CAAC1hB,EAAE0hB,MAAMN,OAAOphB,EAAEA,EAAEA,EAAE0hB,MAAM,QAAQ,CAAC,GAAG1hB,IAAIE,EAAE,MAAMF,EAAE,KAAK,OAAOA,EAAE2hB,SAAS,CAAC,GAAG,OAAO3hB,EAAEohB,QAAQphB,EAAEohB,SAASlhB,EAAE,MAAMF,EAAEA,EAAEA,EAAEohB,MAAM,CAACphB,EAAE2hB,QAAQP,OAAOphB,EAAEohB,OAAOphB,EAAEA,EAAE2hB,OAAO,CAACxhB,GAAG,CAAC,CAAQ,GAAPo6B,GAAE10B,GAAE1F,GAAM,KAAY,EAAPD,EAAEs9B,MAAQt9B,EAAEohB,cAC/e,UAAU,OAAOlhB,GAAG,IAAK,WAAqB,IAAVxG,EAAEsG,EAAEwhB,MAAUthB,EAAE,KAAK,OAAOxG,GAAiB,QAAdoG,EAAEpG,EAAEunB,YAAoB,OAAOihB,GAAGpiC,KAAKI,EAAExG,GAAGA,EAAEA,EAAE+nB,QAAY,QAAJ/nB,EAAEwG,IAAYA,EAAEF,EAAEwhB,MAAMxhB,EAAEwhB,MAAM,OAAOthB,EAAExG,EAAE+nB,QAAQ/nB,EAAE+nB,QAAQ,MAAM0rB,GAAGntC,GAAE,EAAGE,EAAExG,EAAEmF,GAAG,MAAM,IAAK,YAA6B,IAAjBnF,EAAE,KAAKwG,EAAEF,EAAEwhB,MAAUxhB,EAAEwhB,MAAM,KAAK,OAAOthB,GAAG,CAAe,GAAG,QAAjBJ,EAAEI,EAAE+gB,YAAuB,OAAOihB,GAAGpiC,GAAG,CAACE,EAAEwhB,MAAMthB,EAAE,KAAK,CAACJ,EAAEI,EAAEuhB,QAAQvhB,EAAEuhB,QAAQ/nB,EAAEA,EAAEwG,EAAEA,EAAEJ,CAAC,CAACqtC,GAAGntC,GAAE,EAAGtG,EAAE,KAAKmF,GAAG,MAAM,IAAK,WAAWsuC,GAAGntC,GAAE,EAAG,KAAK,UAAK,GAAQ,MAAM,QAAQA,EAAEohB,cAAc,KAAK,OAAOphB,EAAEwhB,KAAK,CAC7d,SAASgqB,GAAG1rC,EAAEE,GAAG,KAAY,EAAPA,EAAEs9B,OAAS,OAAOx9B,IAAIA,EAAEmhB,UAAU,KAAKjhB,EAAEihB,UAAU,KAAKjhB,EAAEoN,OAAO,EAAE,CAAC,SAASs9B,GAAG5qC,EAAEE,EAAEtG,GAAyD,GAAtD,OAAOoG,IAAIE,EAAEw/B,aAAa1/B,EAAE0/B,cAAc8B,IAAIthC,EAAE0/B,MAAS,KAAKhmC,EAAEsG,EAAEs/B,YAAY,OAAO,KAAK,GAAG,OAAOx/B,GAAGE,EAAEwhB,QAAQ1hB,EAAE0hB,MAAM,MAAMnpB,MAAMoH,EAAE,MAAM,GAAG,OAAOO,EAAEwhB,MAAM,CAA4C,IAAjC9nB,EAAE2kC,GAAZv+B,EAAEE,EAAEwhB,MAAa1hB,EAAEo9B,cAAcl9B,EAAEwhB,MAAM9nB,EAAMA,EAAEwnB,OAAOlhB,EAAE,OAAOF,EAAE2hB,SAAS3hB,EAAEA,EAAE2hB,SAAQ/nB,EAAEA,EAAE+nB,QAAQ4c,GAAGv+B,EAAEA,EAAEo9B,eAAgBhc,OAAOlhB,EAAEtG,EAAE+nB,QAAQ,IAAI,CAAC,OAAOzhB,EAAEwhB,KAAK,CAO9a,SAASksB,GAAG5tC,EAAEE,GAAG,IAAI28B,GAAE,OAAO78B,EAAE0tC,UAAU,IAAK,SAASxtC,EAAEF,EAAEytC,KAAK,IAAI,IAAI7zC,EAAE,KAAK,OAAOsG,GAAG,OAAOA,EAAEihB,YAAYvnB,EAAEsG,GAAGA,EAAEA,EAAEyhB,QAAQ,OAAO/nB,EAAEoG,EAAEytC,KAAK,KAAK7zC,EAAE+nB,QAAQ,KAAK,MAAM,IAAK,YAAY/nB,EAAEoG,EAAEytC,KAAK,IAAI,IAAIttC,EAAE,KAAK,OAAOvG,GAAG,OAAOA,EAAEunB,YAAYhhB,EAAEvG,GAAGA,EAAEA,EAAE+nB,QAAQ,OAAOxhB,EAAED,GAAG,OAAOF,EAAEytC,KAAKztC,EAAEytC,KAAK,KAAKztC,EAAEytC,KAAK9rB,QAAQ,KAAKxhB,EAAEwhB,QAAQ,KAAK,CAC5U,SAASksB,GAAE7tC,GAAG,IAAIE,EAAE,OAAOF,EAAEmhB,WAAWnhB,EAAEmhB,UAAUO,QAAQ1hB,EAAE0hB,MAAM9nB,EAAE,EAAEuG,EAAE,EAAE,GAAGD,EAAE,IAAI,IAAIE,EAAEJ,EAAE0hB,MAAM,OAAOthB,GAAGxG,GAAGwG,EAAEw/B,MAAMx/B,EAAEo/B,WAAWr/B,GAAkB,SAAfC,EAAE+sC,aAAsBhtC,GAAW,SAARC,EAAEkN,MAAelN,EAAEghB,OAAOphB,EAAEI,EAAEA,EAAEuhB,aAAa,IAAIvhB,EAAEJ,EAAE0hB,MAAM,OAAOthB,GAAGxG,GAAGwG,EAAEw/B,MAAMx/B,EAAEo/B,WAAWr/B,GAAGC,EAAE+sC,aAAahtC,GAAGC,EAAEkN,MAAMlN,EAAEghB,OAAOphB,EAAEI,EAAEA,EAAEuhB,QAAyC,OAAjC3hB,EAAEmtC,cAAchtC,EAAEH,EAAEw/B,WAAW5lC,EAASsG,CAAC,CAC7V,SAAS4tC,GAAG9tC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAED,EAAEk9B,aAAmB,OAANV,GAAGx8B,GAAUA,EAAE6J,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,GAAG,OAAO8jC,GAAE3tC,GAAG,KAAK,KAAK,EAUtD,KAAK,GAAG,OAAO86B,GAAG96B,EAAE5H,OAAO4iC,KAAK2S,GAAE3tC,GAAG,KAVqD,KAAK,EAA2Q,OAAzQC,EAAED,EAAE6f,UAAUkiB,KAAK3H,GAAEI,IAAIJ,GAAEG,IAAG8H,KAAKpiC,EAAE6rC,iBAAiB7rC,EAAE4/B,QAAQ5/B,EAAE6rC,eAAe7rC,EAAE6rC,eAAe,MAAS,OAAOhsC,GAAG,OAAOA,EAAE0hB,QAAMic,GAAGz9B,GAAGA,EAAEoN,OAAO,EAAE,OAAOtN,GAAGA,EAAEshB,cAAckF,cAAc,KAAa,IAARtmB,EAAEoN,SAAapN,EAAEoN,OAAO,KAAK,OAAOwvB,KAAKiR,GAAGjR,IAAIA,GAAG,QAAOqP,GAAGnsC,EAAEE,GAAG2tC,GAAE3tC,GAAU,KAAK,KAAK,EAAEiiC,GAAGjiC,GAAG,IAAIE,EAAE0hC,GAAGD,GAAGlhC,SAC7e,GAAT/G,EAAEsG,EAAE5H,KAAQ,OAAO0H,GAAG,MAAME,EAAE6f,UAAUqsB,GAAGpsC,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAGJ,EAAEJ,MAAMM,EAAEN,MAAMM,EAAEoN,OAAO,IAAIpN,EAAEoN,OAAO,aAAa,CAAC,IAAInN,EAAE,CAAC,GAAG,OAAOD,EAAE6f,UAAU,MAAMxnB,MAAMoH,EAAE,MAAW,OAALkuC,GAAE3tC,GAAU,IAAI,CAAkB,GAAjBF,EAAE8hC,GAAGH,GAAGhhC,SAAYg9B,GAAGz9B,GAAG,CAACC,EAAED,EAAE6f,UAAUnmB,EAAEsG,EAAE5H,KAAK,IAAIyG,EAAEmB,EAAE09B,cAA+C,OAAjCz9B,EAAE45B,IAAI75B,EAAEC,EAAE65B,IAAIj7B,EAAEiB,EAAE,KAAY,EAAPE,EAAEs9B,MAAe5jC,GAAG,IAAK,SAAS+8B,GAAE,SAASx2B,GAAGw2B,GAAE,QAAQx2B,GAAG,MAAM,IAAK,SAAS,IAAK,SAAS,IAAK,QAAQw2B,GAAE,OAAOx2B,GAAG,MAAM,IAAK,QAAQ,IAAK,QAAQ,IAAIC,EAAE,EAAEA,EAAEk2B,GAAG55B,OAAO0D,IAAIu2B,GAAEL,GAAGl2B,GAAGD,GAAG,MAAM,IAAK,SAASw2B,GAAE,QAAQx2B,GAAG,MAAM,IAAK,MAAM,IAAK,QAAQ,IAAK,OAAOw2B,GAAE,QACnhBx2B,GAAGw2B,GAAE,OAAOx2B,GAAG,MAAM,IAAK,UAAUw2B,GAAE,SAASx2B,GAAG,MAAM,IAAK,QAAQsY,EAAGtY,EAAEpB,GAAG43B,GAAE,UAAUx2B,GAAG,MAAM,IAAK,SAASA,EAAEoY,cAAc,CAACy1B,cAAcjvC,EAAEkvC,UAAUtX,GAAE,UAAUx2B,GAAG,MAAM,IAAK,WAAWsZ,GAAGtZ,EAAEpB,GAAG43B,GAAE,UAAUx2B,GAAkB,IAAI,IAAIF,KAAvBgf,GAAGrlB,EAAEmF,GAAGqB,EAAE,KAAkBrB,EAAE,GAAGA,EAAEQ,eAAeU,GAAG,CAAC,IAAII,EAAEtB,EAAEkB,GAAG,aAAaA,EAAE,kBAAkBI,EAAEF,EAAEyZ,cAAcvZ,KAAI,IAAKtB,EAAEmvC,0BAA0B1V,GAAGr4B,EAAEyZ,YAAYvZ,EAAEL,GAAGI,EAAE,CAAC,WAAWC,IAAI,kBAAkBA,GAAGF,EAAEyZ,cAAc,GAAGvZ,KAAI,IAAKtB,EAAEmvC,0BAA0B1V,GAAGr4B,EAAEyZ,YAC1evZ,EAAEL,GAAGI,EAAE,CAAC,WAAW,GAAGC,IAAImS,EAAGjT,eAAeU,IAAI,MAAMI,GAAG,aAAaJ,GAAG02B,GAAE,SAASx2B,EAAE,CAAC,OAAOvG,GAAG,IAAK,QAAQyd,EAAGlX,GAAG4Y,EAAG5Y,EAAEpB,GAAE,GAAI,MAAM,IAAK,WAAWsY,EAAGlX,GAAGwZ,GAAGxZ,GAAG,MAAM,IAAK,SAAS,IAAK,SAAS,MAAM,QAAQ,oBAAoBpB,EAAEovC,UAAUhuC,EAAEiuC,QAAQ3V,IAAIt4B,EAAEC,EAAEF,EAAEsgC,YAAYrgC,EAAE,OAAOA,IAAID,EAAEoN,OAAO,EAAE,KAAK,CAACrN,EAAE,IAAIG,EAAEua,SAASva,EAAEA,EAAE4Y,cAAc,iCAAiChZ,IAAIA,EAAE6Z,GAAGjgB,IAAI,iCAAiCoG,EAAE,WAAWpG,IAAGoG,EAAEC,EAAE6S,cAAc,QAASoH,UAAU,qBAAuBla,EAAEA,EAAEqa,YAAYra,EAAEoa,aAC/f,kBAAkBja,EAAEgf,GAAGnf,EAAEC,EAAE6S,cAAclZ,EAAE,CAACulB,GAAGhf,EAAEgf,MAAMnf,EAAEC,EAAE6S,cAAclZ,GAAG,WAAWA,IAAIqG,EAAED,EAAEG,EAAE8tC,SAAShuC,EAAEguC,UAAS,EAAG9tC,EAAEuL,OAAOzL,EAAEyL,KAAKvL,EAAEuL,QAAQ1L,EAAEC,EAAEouC,gBAAgBruC,EAAEpG,GAAGoG,EAAE+5B,IAAI75B,EAAEF,EAAEg6B,IAAI75B,EAAE+rC,GAAGlsC,EAAEE,GAAE,GAAG,GAAIA,EAAE6f,UAAU/f,EAAEA,EAAE,CAAW,OAAVC,EAAEif,GAAGtlB,EAAEuG,GAAUvG,GAAG,IAAK,SAAS+8B,GAAE,SAAS32B,GAAG22B,GAAE,QAAQ32B,GAAGI,EAAED,EAAE,MAAM,IAAK,SAAS,IAAK,SAAS,IAAK,QAAQw2B,GAAE,OAAO32B,GAAGI,EAAED,EAAE,MAAM,IAAK,QAAQ,IAAK,QAAQ,IAAIC,EAAE,EAAEA,EAAEk2B,GAAG55B,OAAO0D,IAAIu2B,GAAEL,GAAGl2B,GAAGJ,GAAGI,EAAED,EAAE,MAAM,IAAK,SAASw2B,GAAE,QAAQ32B,GAAGI,EAAED,EAAE,MAAM,IAAK,MAAM,IAAK,QAAQ,IAAK,OAAOw2B,GAAE,QAClf32B,GAAG22B,GAAE,OAAO32B,GAAGI,EAAED,EAAE,MAAM,IAAK,UAAUw2B,GAAE,SAAS32B,GAAGI,EAAED,EAAE,MAAM,IAAK,QAAQsY,EAAGzY,EAAEG,GAAGC,EAAEgY,EAAGpY,EAAEG,GAAGw2B,GAAE,UAAU32B,GAAG,MAAM,IAAK,SAAiL,QAAQI,EAAED,QAAxK,IAAK,SAASH,EAAEuY,cAAc,CAACy1B,cAAc7tC,EAAE8tC,UAAU7tC,EAAEyV,EAAE,CAAC,EAAE1V,EAAE,CAAC8X,WAAM,IAAS0e,GAAE,UAAU32B,GAAG,MAAM,IAAK,WAAWyZ,GAAGzZ,EAAEG,GAAGC,EAAEkZ,GAAGtZ,EAAEG,GAAGw2B,GAAE,UAAU32B,GAAiC,IAAIjB,KAAhBkgB,GAAGrlB,EAAEwG,GAAGC,EAAED,EAAa,GAAGC,EAAEd,eAAeR,GAAG,CAAC,IAAIC,EAAEqB,EAAEtB,GAAG,UAAUA,EAAE4e,GAAG3d,EAAEhB,GAAG,4BAA4BD,EAAuB,OAApBC,EAAEA,EAAEA,EAAE65B,YAAO,IAAgB7e,GAAGha,EAAEhB,GAAI,aAAaD,EAAE,kBAAkBC,GAAG,aAC7epF,GAAG,KAAKoF,IAAIyb,GAAGza,EAAEhB,GAAG,kBAAkBA,GAAGyb,GAAGza,EAAE,GAAGhB,GAAG,mCAAmCD,GAAG,6BAA6BA,GAAG,cAAcA,IAAIyT,EAAGjT,eAAeR,GAAG,MAAMC,GAAG,aAAaD,GAAG43B,GAAE,SAAS32B,GAAG,MAAMhB,GAAGgV,EAAGhU,EAAEjB,EAAEC,EAAEiB,GAAG,CAAC,OAAOrG,GAAG,IAAK,QAAQyd,EAAGrX,GAAG+Y,EAAG/Y,EAAEG,GAAE,GAAI,MAAM,IAAK,WAAWkX,EAAGrX,GAAG2Z,GAAG3Z,GAAG,MAAM,IAAK,SAAS,MAAMG,EAAE8X,OAAOjY,EAAEuU,aAAa,QAAQ,GAAG2C,EAAG/W,EAAE8X,QAAQ,MAAM,IAAK,SAASjY,EAAEiuC,WAAW9tC,EAAE8tC,SAAmB,OAAVlvC,EAAEoB,EAAE8X,OAAciB,GAAGlZ,IAAIG,EAAE8tC,SAASlvC,GAAE,GAAI,MAAMoB,EAAEmY,cAAcY,GAAGlZ,IAAIG,EAAE8tC,SAAS9tC,EAAEmY,cAClf,GAAI,MAAM,QAAQ,oBAAoBlY,EAAE+tC,UAAUnuC,EAAEouC,QAAQ3V,IAAI,OAAO7+B,GAAG,IAAK,SAAS,IAAK,QAAQ,IAAK,SAAS,IAAK,WAAWuG,IAAIA,EAAEmuC,UAAU,MAAMtuC,EAAE,IAAK,MAAMG,GAAE,EAAG,MAAMH,EAAE,QAAQG,GAAE,EAAG,CAACA,IAAID,EAAEoN,OAAO,EAAE,CAAC,OAAOpN,EAAEN,MAAMM,EAAEoN,OAAO,IAAIpN,EAAEoN,OAAO,QAAQ,CAAM,OAALugC,GAAE3tC,GAAU,KAAK,KAAK,EAAE,GAAGF,GAAG,MAAME,EAAE6f,UAAUssB,GAAGrsC,EAAEE,EAAEF,EAAE49B,cAAcz9B,OAAO,CAAC,GAAG,kBAAkBA,GAAG,OAAOD,EAAE6f,UAAU,MAAMxnB,MAAMoH,EAAE,MAAsC,GAAhC/F,EAAEkoC,GAAGD,GAAGlhC,SAASmhC,GAAGH,GAAGhhC,SAAYg9B,GAAGz9B,GAAG,CAAyC,GAAxCC,EAAED,EAAE6f,UAAUnmB,EAAEsG,EAAE09B,cAAcz9B,EAAE45B,IAAI75B,GAAKnB,EAAEoB,EAAEya,YAAYhhB,IAC/e,QADofoG,EACvf28B,IAAY,OAAO38B,EAAE+J,KAAK,KAAK,EAAEyuB,GAAGr4B,EAAEya,UAAUhhB,EAAE,KAAY,EAAPoG,EAAEw9B,OAAS,MAAM,KAAK,GAAE,IAAKx9B,EAAE49B,cAAcsQ,0BAA0B1V,GAAGr4B,EAAEya,UAAUhhB,EAAE,KAAY,EAAPoG,EAAEw9B,OAASz+B,IAAImB,EAAEoN,OAAO,EAAE,MAAMnN,GAAG,IAAIvG,EAAE+gB,SAAS/gB,EAAEA,EAAEof,eAAeu1B,eAAepuC,IAAK45B,IAAI75B,EAAEA,EAAE6f,UAAU5f,CAAC,CAAM,OAAL0tC,GAAE3tC,GAAU,KAAK,KAAK,GAA0B,GAAvBo6B,GAAEz0B,IAAG1F,EAAED,EAAEohB,cAAiB,OAAOthB,GAAG,OAAOA,EAAEshB,eAAe,OAAOthB,EAAEshB,cAAcC,WAAW,CAAC,GAAGsb,IAAG,OAAOD,IAAI,KAAY,EAAP18B,EAAEs9B,OAAS,KAAa,IAARt9B,EAAEoN,OAAWuwB,KAAKC,KAAK59B,EAAEoN,OAAO,MAAMvO,GAAE,OAAQ,GAAGA,EAAE4+B,GAAGz9B,GAAG,OAAOC,GAAG,OAAOA,EAAEohB,WAAW,CAAC,GAAG,OAC5fvhB,EAAE,CAAC,IAAIjB,EAAE,MAAMxG,MAAMoH,EAAE,MAAqD,KAA7BZ,EAAE,QAApBA,EAAEmB,EAAEohB,eAAyBviB,EAAEwiB,WAAW,MAAW,MAAMhpB,MAAMoH,EAAE,MAAMZ,EAAEg7B,IAAI75B,CAAC,MAAM49B,KAAK,KAAa,IAAR59B,EAAEoN,SAAapN,EAAEohB,cAAc,MAAMphB,EAAEoN,OAAO,EAAEugC,GAAE3tC,GAAGnB,GAAE,CAAE,MAAM,OAAO+9B,KAAKiR,GAAGjR,IAAIA,GAAG,MAAM/9B,GAAE,EAAG,IAAIA,EAAE,OAAe,MAARmB,EAAEoN,MAAYpN,EAAE,IAAI,CAAC,OAAG,KAAa,IAARA,EAAEoN,QAAkBpN,EAAE0/B,MAAMhmC,EAAEsG,KAAEC,EAAE,OAAOA,MAAO,OAAOH,GAAG,OAAOA,EAAEshB,gBAAgBnhB,IAAID,EAAEwhB,MAAMpU,OAAO,KAAK,KAAY,EAAPpN,EAAEs9B,QAAU,OAAOx9B,GAAG,KAAe,EAAV6F,GAAElF,SAAW,IAAImF,KAAIA,GAAE,GAAGinC,OAAO,OAAO7sC,EAAEsgC,cAActgC,EAAEoN,OAAO,GAAGugC,GAAE3tC,GAAU,MAAK,KAAK,EAAE,OAAO+hC,KACrfkK,GAAGnsC,EAAEE,GAAG,OAAOF,GAAGg3B,GAAG92B,EAAE6f,UAAU0G,eAAeonB,GAAE3tC,GAAG,KAAK,KAAK,GAAG,OAAOqL,GAAGrL,EAAE5H,KAAKwe,UAAU+2B,GAAE3tC,GAAG,KAA+C,KAAK,GAA0B,GAAvBo6B,GAAEz0B,IAAwB,QAArB9G,EAAEmB,EAAEohB,eAA0B,OAAOusB,GAAE3tC,GAAG,KAAuC,GAAlCC,EAAE,KAAa,IAARD,EAAEoN,OAA4B,QAAjBrN,EAAElB,EAAEwuC,WAAsB,GAAGptC,EAAEytC,GAAG7uC,GAAE,OAAQ,CAAC,GAAG,IAAI+G,IAAG,OAAO9F,GAAG,KAAa,IAARA,EAAEsN,OAAW,IAAItN,EAAEE,EAAEwhB,MAAM,OAAO1hB,GAAG,CAAS,GAAG,QAAXC,EAAEmiC,GAAGpiC,IAAe,CAAmG,IAAlGE,EAAEoN,OAAO,IAAIsgC,GAAG7uC,GAAE,GAAoB,QAAhBoB,EAAEF,EAAEugC,eAAuBtgC,EAAEsgC,YAAYrgC,EAAED,EAAEoN,OAAO,GAAGpN,EAAEitC,aAAa,EAAEhtC,EAAEvG,EAAMA,EAAEsG,EAAEwhB,MAAM,OAAO9nB,GAAOoG,EAAEG,GAANpB,EAAEnF,GAAQ0T,OAAO,SAC/d,QAAdrN,EAAElB,EAAEoiB,YAAoBpiB,EAAEygC,WAAW,EAAEzgC,EAAE6gC,MAAM5/B,EAAEjB,EAAE2iB,MAAM,KAAK3iB,EAAEouC,aAAa,EAAEpuC,EAAE6+B,cAAc,KAAK7+B,EAAEuiB,cAAc,KAAKviB,EAAEyhC,YAAY,KAAKzhC,EAAE2gC,aAAa,KAAK3gC,EAAEghB,UAAU,OAAOhhB,EAAEygC,WAAWv/B,EAAEu/B,WAAWzgC,EAAE6gC,MAAM3/B,EAAE2/B,MAAM7gC,EAAE2iB,MAAMzhB,EAAEyhB,MAAM3iB,EAAEouC,aAAa,EAAEpuC,EAAEm+B,UAAU,KAAKn+B,EAAE6+B,cAAc39B,EAAE29B,cAAc7+B,EAAEuiB,cAAcrhB,EAAEqhB,cAAcviB,EAAEyhC,YAAYvgC,EAAEugC,YAAYzhC,EAAEzG,KAAK2H,EAAE3H,KAAK0H,EAAEC,EAAEy/B,aAAa3gC,EAAE2gC,aAAa,OAAO1/B,EAAE,KAAK,CAAC4/B,MAAM5/B,EAAE4/B,MAAMD,aAAa3/B,EAAE2/B,eAAe/lC,EAAEA,EAAE+nB,QAA2B,OAAnB4Y,GAAE10B,GAAY,EAAVA,GAAElF,QAAU,GAAUT,EAAEwhB,KAAK,CAAC1hB,EAClgBA,EAAE2hB,OAAO,CAAC,OAAO5iB,EAAE0uC,MAAMnrB,KAAIksB,KAAKtuC,EAAEoN,OAAO,IAAInN,GAAE,EAAGytC,GAAG7uC,GAAE,GAAImB,EAAE0/B,MAAM,QAAQ,KAAK,CAAC,IAAIz/B,EAAE,GAAW,QAARH,EAAEoiC,GAAGniC,KAAa,GAAGC,EAAEoN,OAAO,IAAInN,GAAE,EAAmB,QAAhBvG,EAAEoG,EAAEwgC,eAAuBtgC,EAAEsgC,YAAY5mC,EAAEsG,EAAEoN,OAAO,GAAGsgC,GAAG7uC,GAAE,GAAI,OAAOA,EAAE0uC,MAAM,WAAW1uC,EAAE2uC,WAAWztC,EAAEkhB,YAAY0b,GAAE,OAAOgR,GAAE3tC,GAAG,UAAU,EAAEoiB,KAAIvjB,EAAEyuC,mBAAmBgB,IAAI,aAAa50C,IAAIsG,EAAEoN,OAAO,IAAInN,GAAE,EAAGytC,GAAG7uC,GAAE,GAAImB,EAAE0/B,MAAM,SAAS7gC,EAAEuuC,aAAartC,EAAE0hB,QAAQzhB,EAAEwhB,MAAMxhB,EAAEwhB,MAAMzhB,IAAa,QAATrG,EAAEmF,EAAE5B,MAAcvD,EAAE+nB,QAAQ1hB,EAAEC,EAAEwhB,MAAMzhB,EAAElB,EAAE5B,KAAK8C,EAAE,CAAC,OAAG,OAAOlB,EAAE0uC,MAAYvtC,EAAEnB,EAAE0uC,KAAK1uC,EAAEwuC,UAC9ertC,EAAEnB,EAAE0uC,KAAKvtC,EAAEyhB,QAAQ5iB,EAAEyuC,mBAAmBlrB,KAAIpiB,EAAEyhB,QAAQ,KAAK/nB,EAAEiM,GAAElF,QAAQ45B,GAAE10B,GAAE1F,EAAI,EAAFvG,EAAI,EAAI,EAAFA,GAAKsG,IAAE2tC,GAAE3tC,GAAU,MAAK,KAAK,GAAG,KAAK,GAAG,OAAOuuC,KAAKtuC,EAAE,OAAOD,EAAEohB,cAAc,OAAOthB,GAAG,OAAOA,EAAEshB,gBAAgBnhB,IAAID,EAAEoN,OAAO,MAAMnN,GAAG,KAAY,EAAPD,EAAEs9B,MAAQ,KAAQ,WAAH+N,MAAiBsC,GAAE3tC,GAAkB,EAAfA,EAAEitC,eAAiBjtC,EAAEoN,OAAO,OAAOugC,GAAE3tC,GAAG,KAAK,KAAK,GAAe,KAAK,GAAG,OAAO,KAAK,MAAM3H,MAAMoH,EAAE,IAAIO,EAAE6J,KAAM,CAClX,SAAS2kC,GAAG1uC,EAAEE,GAAS,OAANw8B,GAAGx8B,GAAUA,EAAE6J,KAAK,KAAK,EAAE,OAAOixB,GAAG96B,EAAE5H,OAAO4iC,KAAiB,OAAZl7B,EAAEE,EAAEoN,QAAepN,EAAEoN,OAAS,MAAHtN,EAAS,IAAIE,GAAG,KAAK,KAAK,EAAE,OAAO+hC,KAAK3H,GAAEI,IAAIJ,GAAEG,IAAG8H,KAAe,KAAO,OAAjBviC,EAAEE,EAAEoN,SAAqB,KAAO,IAAFtN,IAAQE,EAAEoN,OAAS,MAAHtN,EAAS,IAAIE,GAAG,KAAK,KAAK,EAAE,OAAOiiC,GAAGjiC,GAAG,KAAK,KAAK,GAA0B,GAAvBo6B,GAAEz0B,IAAwB,QAArB7F,EAAEE,EAAEohB,gBAA2B,OAAOthB,EAAEuhB,WAAW,CAAC,GAAG,OAAOrhB,EAAEihB,UAAU,MAAM5oB,MAAMoH,EAAE,MAAMm+B,IAAI,CAAW,OAAS,OAAnB99B,EAAEE,EAAEoN,QAAsBpN,EAAEoN,OAAS,MAAHtN,EAAS,IAAIE,GAAG,KAAK,KAAK,GAAG,OAAOo6B,GAAEz0B,IAAG,KAAK,KAAK,EAAE,OAAOo8B,KAAK,KAAK,KAAK,GAAG,OAAO12B,GAAGrL,EAAE5H,KAAKwe,UAAU,KAAK,KAAK,GAAG,KAAK,GAAG,OAAO23B,KAC1gB,KAAyB,QAAQ,OAAO,KAAK,CArB7CvC,GAAG,SAASlsC,EAAEE,GAAG,IAAI,IAAItG,EAAEsG,EAAEwhB,MAAM,OAAO9nB,GAAG,CAAC,GAAG,IAAIA,EAAEmQ,KAAK,IAAInQ,EAAEmQ,IAAI/J,EAAEsa,YAAY1gB,EAAEmmB,gBAAgB,GAAG,IAAInmB,EAAEmQ,KAAK,OAAOnQ,EAAE8nB,MAAM,CAAC9nB,EAAE8nB,MAAMN,OAAOxnB,EAAEA,EAAEA,EAAE8nB,MAAM,QAAQ,CAAC,GAAG9nB,IAAIsG,EAAE,MAAM,KAAK,OAAOtG,EAAE+nB,SAAS,CAAC,GAAG,OAAO/nB,EAAEwnB,QAAQxnB,EAAEwnB,SAASlhB,EAAE,OAAOtG,EAAEA,EAAEwnB,MAAM,CAACxnB,EAAE+nB,QAAQP,OAAOxnB,EAAEwnB,OAAOxnB,EAAEA,EAAE+nB,OAAO,CAAC,EAAEwqB,GAAG,WAAW,EACxTC,GAAG,SAASpsC,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAEJ,EAAE49B,cAAc,GAAGx9B,IAAID,EAAE,CAACH,EAAEE,EAAE6f,UAAU+hB,GAAGH,GAAGhhC,SAAS,IAA4RV,EAAxRlB,EAAE,KAAK,OAAOnF,GAAG,IAAK,QAAQwG,EAAEgY,EAAGpY,EAAEI,GAAGD,EAAEiY,EAAGpY,EAAEG,GAAGpB,EAAE,GAAG,MAAM,IAAK,SAASqB,EAAEyV,EAAE,CAAC,EAAEzV,EAAE,CAAC6X,WAAM,IAAS9X,EAAE0V,EAAE,CAAC,EAAE1V,EAAE,CAAC8X,WAAM,IAASlZ,EAAE,GAAG,MAAM,IAAK,WAAWqB,EAAEkZ,GAAGtZ,EAAEI,GAAGD,EAAEmZ,GAAGtZ,EAAEG,GAAGpB,EAAE,GAAG,MAAM,QAAQ,oBAAoBqB,EAAE+tC,SAAS,oBAAoBhuC,EAAEguC,UAAUnuC,EAAEouC,QAAQ3V,IAAyB,IAAIt5B,KAAzB8f,GAAGrlB,EAAEuG,GAASvG,EAAE,KAAcwG,EAAE,IAAID,EAAEZ,eAAeJ,IAAIiB,EAAEb,eAAeJ,IAAI,MAAMiB,EAAEjB,GAAG,GAAG,UAAUA,EAAE,CAAC,IAAIkB,EAAED,EAAEjB,GAAG,IAAIc,KAAKI,EAAEA,EAAEd,eAAeU,KACjfrG,IAAIA,EAAE,CAAC,GAAGA,EAAEqG,GAAG,GAAG,KAAK,4BAA4Bd,GAAG,aAAaA,GAAG,mCAAmCA,GAAG,6BAA6BA,GAAG,cAAcA,IAAIqT,EAAGjT,eAAeJ,GAAGJ,IAAIA,EAAE,KAAKA,EAAEA,GAAG,IAAI8H,KAAK1H,EAAE,OAAO,IAAIA,KAAKgB,EAAE,CAAC,IAAInB,EAAEmB,EAAEhB,GAAyB,GAAtBkB,EAAE,MAAMD,EAAEA,EAAEjB,QAAG,EAAUgB,EAAEZ,eAAeJ,IAAIH,IAAIqB,IAAI,MAAMrB,GAAG,MAAMqB,GAAG,GAAG,UAAUlB,EAAE,GAAGkB,EAAE,CAAC,IAAIJ,KAAKI,GAAGA,EAAEd,eAAeU,IAAIjB,GAAGA,EAAEO,eAAeU,KAAKrG,IAAIA,EAAE,CAAC,GAAGA,EAAEqG,GAAG,IAAI,IAAIA,KAAKjB,EAAEA,EAAEO,eAAeU,IAAII,EAAEJ,KAAKjB,EAAEiB,KAAKrG,IAAIA,EAAE,CAAC,GAAGA,EAAEqG,GAAGjB,EAAEiB,GAAG,MAAMrG,IAAImF,IAAIA,EAAE,IAAIA,EAAE8H,KAAK1H,EACpfvF,IAAIA,EAAEoF,MAAM,4BAA4BG,GAAGH,EAAEA,EAAEA,EAAE65B,YAAO,EAAOx4B,EAAEA,EAAEA,EAAEw4B,YAAO,EAAO,MAAM75B,GAAGqB,IAAIrB,IAAID,EAAEA,GAAG,IAAI8H,KAAK1H,EAAEH,IAAI,aAAaG,EAAE,kBAAkBH,GAAG,kBAAkBA,IAAID,EAAEA,GAAG,IAAI8H,KAAK1H,EAAE,GAAGH,GAAG,mCAAmCG,GAAG,6BAA6BA,IAAIqT,EAAGjT,eAAeJ,IAAI,MAAMH,GAAG,aAAaG,GAAGw3B,GAAE,SAAS32B,GAAGjB,GAAGsB,IAAIrB,IAAID,EAAE,MAAMA,EAAEA,GAAG,IAAI8H,KAAK1H,EAAEH,GAAG,CAACpF,IAAImF,EAAEA,GAAG,IAAI8H,KAAK,QAAQjN,GAAG,IAAIuF,EAAEJ,GAAKmB,EAAEsgC,YAAYrhC,KAAEe,EAAEoN,OAAO,EAAC,CAAC,EAAE++B,GAAG,SAASrsC,EAAEE,EAAEtG,EAAEuG,GAAGvG,IAAIuG,IAAID,EAAEoN,OAAO,EAAE,EAkBlb,IAAIqhC,IAAG,EAAGC,IAAE,EAAGC,GAAG,oBAAoBC,QAAQA,QAAQv8B,IAAIw8B,GAAE,KAAK,SAASC,GAAGhvC,EAAEE,GAAG,IAAItG,EAAEoG,EAAEJ,IAAI,GAAG,OAAOhG,EAAE,GAAG,oBAAoBA,EAAE,IAAIA,EAAE,KAAK,CAAC,MAAMuG,GAAG8uC,GAAEjvC,EAAEE,EAAEC,EAAE,MAAMvG,EAAE+G,QAAQ,IAAI,CAAC,SAASuuC,GAAGlvC,EAAEE,EAAEtG,GAAG,IAAIA,GAAG,CAAC,MAAMuG,GAAG8uC,GAAEjvC,EAAEE,EAAEC,EAAE,CAAC,CAAC,IAAIgvC,IAAG,EAIxR,SAASC,GAAGpvC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAED,EAAEsgC,YAAyC,GAAG,QAAhCrgC,EAAE,OAAOA,EAAEA,EAAE+kC,WAAW,MAAiB,CAAC,IAAI9kC,EAAED,EAAEA,EAAEsD,KAAK,EAAE,CAAC,IAAIrD,EAAE2J,IAAI/J,KAAKA,EAAE,CAAC,IAAIjB,EAAEqB,EAAEolC,QAAQplC,EAAEolC,aAAQ,OAAO,IAASzmC,GAAGmwC,GAAGhvC,EAAEtG,EAAEmF,EAAE,CAACqB,EAAEA,EAAEqD,IAAI,OAAOrD,IAAID,EAAE,CAAC,CAAC,SAASkvC,GAAGrvC,EAAEE,GAAgD,GAAG,QAAhCA,EAAE,QAAlBA,EAAEA,EAAEsgC,aAAuBtgC,EAAEglC,WAAW,MAAiB,CAAC,IAAItrC,EAAEsG,EAAEA,EAAEuD,KAAK,EAAE,CAAC,IAAI7J,EAAEmQ,IAAI/J,KAAKA,EAAE,CAAC,IAAIG,EAAEvG,EAAE+D,OAAO/D,EAAE4rC,QAAQrlC,GAAG,CAACvG,EAAEA,EAAE6J,IAAI,OAAO7J,IAAIsG,EAAE,CAAC,CAAC,SAASovC,GAAGtvC,GAAG,IAAIE,EAAEF,EAAEJ,IAAI,GAAG,OAAOM,EAAE,CAAC,IAAItG,EAAEoG,EAAE+f,UAAiB/f,EAAE+J,IAA8B/J,EAAEpG,EAAE,oBAAoBsG,EAAEA,EAAEF,GAAGE,EAAES,QAAQX,CAAC,CAAC,CAClf,SAASuvC,GAAGvvC,GAAG,IAAIE,EAAEF,EAAEmhB,UAAU,OAAOjhB,IAAIF,EAAEmhB,UAAU,KAAKouB,GAAGrvC,IAAIF,EAAE0hB,MAAM,KAAK1hB,EAAEk9B,UAAU,KAAKl9B,EAAE2hB,QAAQ,KAAK,IAAI3hB,EAAE+J,MAAoB,QAAd7J,EAAEF,EAAE+f,oBAA4B7f,EAAE65B,WAAW75B,EAAE85B,WAAW95B,EAAE02B,WAAW12B,EAAE+5B,WAAW/5B,EAAEg6B,MAAMl6B,EAAE+f,UAAU,KAAK/f,EAAEohB,OAAO,KAAKphB,EAAE0/B,aAAa,KAAK1/B,EAAE49B,cAAc,KAAK59B,EAAEshB,cAAc,KAAKthB,EAAEo9B,aAAa,KAAKp9B,EAAE+f,UAAU,KAAK/f,EAAEwgC,YAAY,IAAI,CAAC,SAASgP,GAAGxvC,GAAG,OAAO,IAAIA,EAAE+J,KAAK,IAAI/J,EAAE+J,KAAK,IAAI/J,EAAE+J,GAAG,CACna,SAAS0lC,GAAGzvC,GAAGA,EAAE,OAAO,CAAC,KAAK,OAAOA,EAAE2hB,SAAS,CAAC,GAAG,OAAO3hB,EAAEohB,QAAQouB,GAAGxvC,EAAEohB,QAAQ,OAAO,KAAKphB,EAAEA,EAAEohB,MAAM,CAA2B,IAA1BphB,EAAE2hB,QAAQP,OAAOphB,EAAEohB,OAAWphB,EAAEA,EAAE2hB,QAAQ,IAAI3hB,EAAE+J,KAAK,IAAI/J,EAAE+J,KAAK,KAAK/J,EAAE+J,KAAK,CAAC,GAAW,EAAR/J,EAAEsN,MAAQ,SAAStN,EAAE,GAAG,OAAOA,EAAE0hB,OAAO,IAAI1hB,EAAE+J,IAAI,SAAS/J,EAAOA,EAAE0hB,MAAMN,OAAOphB,EAAEA,EAAEA,EAAE0hB,KAAK,CAAC,KAAa,EAAR1hB,EAAEsN,OAAS,OAAOtN,EAAE+f,SAAS,CAAC,CACzT,SAAS2vB,GAAG1vC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEH,EAAE+J,IAAI,GAAG,IAAI5J,GAAG,IAAIA,EAAEH,EAAEA,EAAE+f,UAAU7f,EAAE,IAAItG,EAAE+gB,SAAS/gB,EAAE6lB,WAAWkwB,aAAa3vC,EAAEE,GAAGtG,EAAE+1C,aAAa3vC,EAAEE,IAAI,IAAItG,EAAE+gB,UAAUza,EAAEtG,EAAE6lB,YAAakwB,aAAa3vC,EAAEpG,IAAKsG,EAAEtG,GAAI0gB,YAAYta,GAA4B,QAAxBpG,EAAEA,EAAEg2C,2BAA8B,IAASh2C,GAAG,OAAOsG,EAAEkuC,UAAUluC,EAAEkuC,QAAQ3V,UAAU,GAAG,IAAIt4B,GAAc,QAAVH,EAAEA,EAAE0hB,OAAgB,IAAIguB,GAAG1vC,EAAEE,EAAEtG,GAAGoG,EAAEA,EAAE2hB,QAAQ,OAAO3hB,GAAG0vC,GAAG1vC,EAAEE,EAAEtG,GAAGoG,EAAEA,EAAE2hB,OAAO,CAC1X,SAASkuB,GAAG7vC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEH,EAAE+J,IAAI,GAAG,IAAI5J,GAAG,IAAIA,EAAEH,EAAEA,EAAE+f,UAAU7f,EAAEtG,EAAE+1C,aAAa3vC,EAAEE,GAAGtG,EAAE0gB,YAAYta,QAAQ,GAAG,IAAIG,GAAc,QAAVH,EAAEA,EAAE0hB,OAAgB,IAAImuB,GAAG7vC,EAAEE,EAAEtG,GAAGoG,EAAEA,EAAE2hB,QAAQ,OAAO3hB,GAAG6vC,GAAG7vC,EAAEE,EAAEtG,GAAGoG,EAAEA,EAAE2hB,OAAO,CAAC,IAAImuB,GAAE,KAAKC,IAAG,EAAG,SAASC,GAAGhwC,EAAEE,EAAEtG,GAAG,IAAIA,EAAEA,EAAE8nB,MAAM,OAAO9nB,GAAGq2C,GAAGjwC,EAAEE,EAAEtG,GAAGA,EAAEA,EAAE+nB,OAAO,CACnR,SAASsuB,GAAGjwC,EAAEE,EAAEtG,GAAG,GAAGypB,IAAI,oBAAoBA,GAAG6sB,qBAAqB,IAAI7sB,GAAG6sB,qBAAqB9sB,GAAGxpB,EAAE,CAAC,MAAMyG,GAAG,CAAC,OAAOzG,EAAEmQ,KAAK,KAAK,EAAE6kC,IAAGI,GAAGp1C,EAAEsG,GAAG,KAAK,EAAE,IAAIC,EAAE2vC,GAAE1vC,EAAE2vC,GAAGD,GAAE,KAAKE,GAAGhwC,EAAEE,EAAEtG,GAAOm2C,GAAG3vC,EAAE,QAAT0vC,GAAE3vC,KAAkB4vC,IAAI/vC,EAAE8vC,GAAEl2C,EAAEA,EAAEmmB,UAAU,IAAI/f,EAAE2a,SAAS3a,EAAEyf,WAAWpF,YAAYzgB,GAAGoG,EAAEqa,YAAYzgB,IAAIk2C,GAAEz1B,YAAYzgB,EAAEmmB,YAAY,MAAM,KAAK,GAAG,OAAO+vB,KAAIC,IAAI/vC,EAAE8vC,GAAEl2C,EAAEA,EAAEmmB,UAAU,IAAI/f,EAAE2a,SAAS+e,GAAG15B,EAAEyf,WAAW7lB,GAAG,IAAIoG,EAAE2a,UAAU+e,GAAG15B,EAAEpG,GAAGqtB,GAAGjnB,IAAI05B,GAAGoW,GAAEl2C,EAAEmmB,YAAY,MAAM,KAAK,EAAE5f,EAAE2vC,GAAE1vC,EAAE2vC,GAAGD,GAAEl2C,EAAEmmB,UAAU0G,cAAcspB,IAAG,EAClfC,GAAGhwC,EAAEE,EAAEtG,GAAGk2C,GAAE3vC,EAAE4vC,GAAG3vC,EAAE,MAAM,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,IAAIwuC,KAAoB,QAAhBzuC,EAAEvG,EAAE4mC,cAAsC,QAAfrgC,EAAEA,EAAE+kC,aAAsB,CAAC9kC,EAAED,EAAEA,EAAEsD,KAAK,EAAE,CAAC,IAAI1E,EAAEqB,EAAEH,EAAElB,EAAEymC,QAAQzmC,EAAEA,EAAEgL,SAAI,IAAS9J,IAAI,KAAO,EAAFlB,IAAe,KAAO,EAAFA,KAAfmwC,GAAGt1C,EAAEsG,EAAED,GAAyBG,EAAEA,EAAEqD,IAAI,OAAOrD,IAAID,EAAE,CAAC6vC,GAAGhwC,EAAEE,EAAEtG,GAAG,MAAM,KAAK,EAAE,IAAIg1C,KAAII,GAAGp1C,EAAEsG,GAAiB,oBAAdC,EAAEvG,EAAEmmB,WAAgCowB,sBAAsB,IAAIhwC,EAAEM,MAAM7G,EAAEgkC,cAAcz9B,EAAExG,MAAMC,EAAE0nB,cAAcnhB,EAAEgwC,sBAAsB,CAAC,MAAM9vC,GAAG4uC,GAAEr1C,EAAEsG,EAAEG,EAAE,CAAC2vC,GAAGhwC,EAAEE,EAAEtG,GAAG,MAAM,KAAK,GAAGo2C,GAAGhwC,EAAEE,EAAEtG,GAAG,MAAM,KAAK,GAAU,EAAPA,EAAE4jC,MAAQoR,IAAGzuC,EAAEyuC,KAAI,OAChfh1C,EAAE0nB,cAAc0uB,GAAGhwC,EAAEE,EAAEtG,GAAGg1C,GAAEzuC,GAAG6vC,GAAGhwC,EAAEE,EAAEtG,GAAG,MAAM,QAAQo2C,GAAGhwC,EAAEE,EAAEtG,GAAG,CAAC,SAASw2C,GAAGpwC,GAAG,IAAIE,EAAEF,EAAEwgC,YAAY,GAAG,OAAOtgC,EAAE,CAACF,EAAEwgC,YAAY,KAAK,IAAI5mC,EAAEoG,EAAE+f,UAAU,OAAOnmB,IAAIA,EAAEoG,EAAE+f,UAAU,IAAI8uB,IAAI3uC,EAAE0T,QAAQ,SAAS1T,GAAG,IAAIC,EAAEkwC,GAAGpZ,KAAK,KAAKj3B,EAAEE,GAAGtG,EAAE2V,IAAIrP,KAAKtG,EAAE+Y,IAAIzS,GAAGA,EAAEq5B,KAAKp5B,EAAEA,GAAG,EAAE,CAAC,CACzQ,SAASmwC,GAAGtwC,EAAEE,GAAG,IAAItG,EAAEsG,EAAEg9B,UAAU,GAAG,OAAOtjC,EAAE,IAAI,IAAIuG,EAAE,EAAEA,EAAEvG,EAAE8C,OAAOyD,IAAI,CAAC,IAAIC,EAAExG,EAAEuG,GAAG,IAAI,IAAIpB,EAAEiB,EAAEC,EAAEC,EAAEG,EAAEJ,EAAED,EAAE,KAAK,OAAOK,GAAG,CAAC,OAAOA,EAAE0J,KAAK,KAAK,EAAE+lC,GAAEzvC,EAAE0f,UAAUgwB,IAAG,EAAG,MAAM/vC,EAAE,KAAK,EAA4C,KAAK,EAAE8vC,GAAEzvC,EAAE0f,UAAU0G,cAAcspB,IAAG,EAAG,MAAM/vC,EAAEK,EAAEA,EAAE+gB,MAAM,CAAC,GAAG,OAAO0uB,GAAE,MAAMv3C,MAAMoH,EAAE,MAAMswC,GAAGlxC,EAAEkB,EAAEG,GAAG0vC,GAAE,KAAKC,IAAG,EAAG,IAAI/wC,EAAEoB,EAAE+gB,UAAU,OAAOniB,IAAIA,EAAEoiB,OAAO,MAAMhhB,EAAEghB,OAAO,IAAI,CAAC,MAAMjiB,GAAG8vC,GAAE7uC,EAAEF,EAAEf,EAAE,CAAC,CAAC,GAAkB,MAAfe,EAAEitC,aAAmB,IAAIjtC,EAAEA,EAAEwhB,MAAM,OAAOxhB,GAAGqwC,GAAGrwC,EAAEF,GAAGE,EAAEA,EAAEyhB,OAAO,CACje,SAAS4uB,GAAGvwC,EAAEE,GAAG,IAAItG,EAAEoG,EAAEmhB,UAAUhhB,EAAEH,EAAEsN,MAAM,OAAOtN,EAAE+J,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAiB,GAAdumC,GAAGpwC,EAAEF,GAAGwwC,GAAGxwC,GAAQ,EAAFG,EAAI,CAAC,IAAIivC,GAAG,EAAEpvC,EAAEA,EAAEohB,QAAQiuB,GAAG,EAAErvC,EAAE,CAAC,MAAMoM,GAAG6iC,GAAEjvC,EAAEA,EAAEohB,OAAOhV,EAAE,CAAC,IAAIgjC,GAAG,EAAEpvC,EAAEA,EAAEohB,OAAO,CAAC,MAAMhV,GAAG6iC,GAAEjvC,EAAEA,EAAEohB,OAAOhV,EAAE,CAAC,CAAC,MAAM,KAAK,EAAEkkC,GAAGpwC,EAAEF,GAAGwwC,GAAGxwC,GAAK,IAAFG,GAAO,OAAOvG,GAAGo1C,GAAGp1C,EAAEA,EAAEwnB,QAAQ,MAAM,KAAK,EAAgD,GAA9CkvB,GAAGpwC,EAAEF,GAAGwwC,GAAGxwC,GAAK,IAAFG,GAAO,OAAOvG,GAAGo1C,GAAGp1C,EAAEA,EAAEwnB,QAAmB,GAARphB,EAAEsN,MAAS,CAAC,IAAIlN,EAAEJ,EAAE+f,UAAU,IAAItF,GAAGra,EAAE,GAAG,CAAC,MAAMgM,GAAG6iC,GAAEjvC,EAAEA,EAAEohB,OAAOhV,EAAE,CAAC,CAAC,GAAK,EAAFjM,GAAoB,OAAdC,EAAEJ,EAAE+f,WAAmB,CAAC,IAAIhhB,EAAEiB,EAAE49B,cAAc39B,EAAE,OAAOrG,EAAEA,EAAEgkC,cAAc7+B,EAAEsB,EAAEL,EAAE1H,KAAK0G,EAAEgB,EAAEwgC,YACje,GAAnBxgC,EAAEwgC,YAAY,KAAQ,OAAOxhC,EAAE,IAAI,UAAUqB,GAAG,UAAUtB,EAAEzG,MAAM,MAAMyG,EAAEf,MAAM4a,EAAGxY,EAAErB,GAAGmgB,GAAG7e,EAAEJ,GAAG,IAAId,EAAE+f,GAAG7e,EAAEtB,GAAG,IAAIkB,EAAE,EAAEA,EAAEjB,EAAEtC,OAAOuD,GAAG,EAAE,CAAC,IAAIb,EAAEJ,EAAEiB,GAAGF,EAAEf,EAAEiB,EAAE,GAAG,UAAUb,EAAEue,GAAGvd,EAAEL,GAAG,4BAA4BX,EAAE4a,GAAG5Z,EAAEL,GAAG,aAAaX,EAAEqb,GAAGra,EAAEL,GAAGiU,EAAG5T,EAAEhB,EAAEW,EAAEZ,EAAE,CAAC,OAAOkB,GAAG,IAAK,QAAQwY,EAAGzY,EAAErB,GAAG,MAAM,IAAK,WAAW2a,GAAGtZ,EAAErB,GAAG,MAAM,IAAK,SAAS,IAAI8/B,EAAEz+B,EAAEmY,cAAcy1B,YAAY5tC,EAAEmY,cAAcy1B,cAAcjvC,EAAEkvC,SAAS,IAAInjC,EAAE/L,EAAEkZ,MAAM,MAAMnN,EAAEoO,GAAG9Y,IAAIrB,EAAEkvC,SAASnjC,GAAE,GAAI+zB,MAAM9/B,EAAEkvC,WAAW,MAAMlvC,EAAEuZ,aAAaY,GAAG9Y,IAAIrB,EAAEkvC,SACnflvC,EAAEuZ,cAAa,GAAIY,GAAG9Y,IAAIrB,EAAEkvC,SAASlvC,EAAEkvC,SAAS,GAAG,IAAG,IAAK7tC,EAAE45B,IAAIj7B,CAAC,CAAC,MAAMqN,GAAG6iC,GAAEjvC,EAAEA,EAAEohB,OAAOhV,EAAE,CAAC,CAAC,MAAM,KAAK,EAAgB,GAAdkkC,GAAGpwC,EAAEF,GAAGwwC,GAAGxwC,GAAQ,EAAFG,EAAI,CAAC,GAAG,OAAOH,EAAE+f,UAAU,MAAMxnB,MAAMoH,EAAE,MAAMS,EAAEJ,EAAE+f,UAAUhhB,EAAEiB,EAAE49B,cAAc,IAAIx9B,EAAEwa,UAAU7b,CAAC,CAAC,MAAMqN,GAAG6iC,GAAEjvC,EAAEA,EAAEohB,OAAOhV,EAAE,CAAC,CAAC,MAAM,KAAK,EAAgB,GAAdkkC,GAAGpwC,EAAEF,GAAGwwC,GAAGxwC,GAAQ,EAAFG,GAAK,OAAOvG,GAAGA,EAAE0nB,cAAckF,aAAa,IAAIS,GAAG/mB,EAAEumB,cAAc,CAAC,MAAMra,GAAG6iC,GAAEjvC,EAAEA,EAAEohB,OAAOhV,EAAE,CAAC,MAAM,KAAK,EAG4G,QAAQkkC,GAAGpwC,EACnfF,GAAGwwC,GAAGxwC,SAJ4Y,KAAK,GAAGswC,GAAGpwC,EAAEF,GAAGwwC,GAAGxwC,GAAqB,MAAlBI,EAAEJ,EAAE0hB,OAAQpU,QAAavO,EAAE,OAAOqB,EAAEkhB,cAAclhB,EAAE2f,UAAU0wB,SAAS1xC,GAAGA,GAClf,OAAOqB,EAAE+gB,WAAW,OAAO/gB,EAAE+gB,UAAUG,gBAAgBovB,GAAGpuB,OAAQ,EAAFniB,GAAKiwC,GAAGpwC,GAAG,MAAM,KAAK,GAAsF,GAAnFZ,EAAE,OAAOxF,GAAG,OAAOA,EAAE0nB,cAAqB,EAAPthB,EAAEw9B,MAAQoR,IAAGzvC,EAAEyvC,KAAIxvC,EAAEkxC,GAAGpwC,EAAEF,GAAG4uC,GAAEzvC,GAAGmxC,GAAGpwC,EAAEF,GAAGwwC,GAAGxwC,GAAQ,KAAFG,EAAO,CAA0B,GAAzBhB,EAAE,OAAOa,EAAEshB,eAAkBthB,EAAE+f,UAAU0wB,SAAStxC,KAAKC,GAAG,KAAY,EAAPY,EAAEw9B,MAAQ,IAAIuR,GAAE/uC,EAAEZ,EAAEY,EAAE0hB,MAAM,OAAOtiB,GAAG,CAAC,IAAIW,EAAEgvC,GAAE3vC,EAAE,OAAO2vC,IAAG,CAAe,OAAVjkC,GAAJ+zB,EAAEkQ,IAAMrtB,MAAamd,EAAE90B,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAGqlC,GAAG,EAAEvQ,EAAEA,EAAEzd,QAAQ,MAAM,KAAK,EAAE4tB,GAAGnQ,EAAEA,EAAEzd,QAAQ,IAAI5hB,EAAEq/B,EAAE9e,UAAU,GAAG,oBAAoBvgB,EAAE2wC,qBAAqB,CAAChwC,EAAE0+B,EAAEjlC,EAAEilC,EAAEzd,OAAO,IAAIlhB,EAAEC,EAAEX,EAAEiB,MACpfP,EAAE09B,cAAcp+B,EAAE7F,MAAMuG,EAAEohB,cAAc9hB,EAAE2wC,sBAAsB,CAAC,MAAM/jC,GAAG6iC,GAAE9uC,EAAEvG,EAAEwS,EAAE,CAAC,CAAC,MAAM,KAAK,EAAE4iC,GAAGnQ,EAAEA,EAAEzd,QAAQ,MAAM,KAAK,GAAG,GAAG,OAAOyd,EAAEvd,cAAc,CAACqvB,GAAG5wC,GAAG,QAAQ,EAAE,OAAO+K,GAAGA,EAAEsW,OAAOyd,EAAEkQ,GAAEjkC,GAAG6lC,GAAG5wC,EAAE,CAACX,EAAEA,EAAEuiB,OAAO,CAAC3hB,EAAE,IAAIZ,EAAE,KAAKW,EAAEC,IAAI,CAAC,GAAG,IAAID,EAAEgK,KAAK,GAAG,OAAO3K,EAAE,CAACA,EAAEW,EAAE,IAAIK,EAAEL,EAAEggB,UAAU5gB,EAAa,oBAAVJ,EAAEqB,EAAEwd,OAA4BE,YAAY/e,EAAE+e,YAAY,UAAU,OAAO,aAAa/e,EAAE6xC,QAAQ,QAASvwC,EAAEN,EAAEggB,UAAkC9f,OAAE,KAA1BjB,EAAEe,EAAE69B,cAAchgB,QAAoB,OAAO5e,GAAGA,EAAEO,eAAe,WAAWP,EAAE4xC,QAAQ,KAAKvwC,EAAEud,MAAMgzB,QACzflzB,GAAG,UAAUzd,GAAG,CAAC,MAAMmM,GAAG6iC,GAAEjvC,EAAEA,EAAEohB,OAAOhV,EAAE,CAAC,OAAO,GAAG,IAAIrM,EAAEgK,KAAK,GAAG,OAAO3K,EAAE,IAAIW,EAAEggB,UAAUnF,UAAUzb,EAAE,GAAGY,EAAE69B,aAAa,CAAC,MAAMxxB,GAAG6iC,GAAEjvC,EAAEA,EAAEohB,OAAOhV,EAAE,OAAO,IAAI,KAAKrM,EAAEgK,KAAK,KAAKhK,EAAEgK,KAAK,OAAOhK,EAAEuhB,eAAevhB,IAAIC,IAAI,OAAOD,EAAE2hB,MAAM,CAAC3hB,EAAE2hB,MAAMN,OAAOrhB,EAAEA,EAAEA,EAAE2hB,MAAM,QAAQ,CAAC,GAAG3hB,IAAIC,EAAE,MAAMA,EAAE,KAAK,OAAOD,EAAE4hB,SAAS,CAAC,GAAG,OAAO5hB,EAAEqhB,QAAQrhB,EAAEqhB,SAASphB,EAAE,MAAMA,EAAEZ,IAAIW,IAAIX,EAAE,MAAMW,EAAEA,EAAEqhB,MAAM,CAAChiB,IAAIW,IAAIX,EAAE,MAAMW,EAAE4hB,QAAQP,OAAOrhB,EAAEqhB,OAAOrhB,EAAEA,EAAE4hB,OAAO,CAAC,CAAC,MAAM,KAAK,GAAG2uB,GAAGpwC,EAAEF,GAAGwwC,GAAGxwC,GAAK,EAAFG,GAAKiwC,GAAGpwC,GAAS,KAAK,IACtd,CAAC,SAASwwC,GAAGxwC,GAAG,IAAIE,EAAEF,EAAEsN,MAAM,GAAK,EAAFpN,EAAI,CAAC,IAAIF,EAAE,CAAC,IAAI,IAAIpG,EAAEoG,EAAEohB,OAAO,OAAOxnB,GAAG,CAAC,GAAG41C,GAAG51C,GAAG,CAAC,IAAIuG,EAAEvG,EAAE,MAAMoG,CAAC,CAACpG,EAAEA,EAAEwnB,MAAM,CAAC,MAAM7oB,MAAMoH,EAAE,KAAM,CAAC,OAAOQ,EAAE4J,KAAK,KAAK,EAAE,IAAI3J,EAAED,EAAE4f,UAAkB,GAAR5f,EAAEmN,QAAWmN,GAAGra,EAAE,IAAID,EAAEmN,QAAQ,IAAgBuiC,GAAG7vC,EAATyvC,GAAGzvC,GAAUI,GAAG,MAAM,KAAK,EAAE,KAAK,EAAE,IAAIH,EAAEE,EAAE4f,UAAU0G,cAAsBipB,GAAG1vC,EAATyvC,GAAGzvC,GAAUC,GAAG,MAAM,QAAQ,MAAM1H,MAAMoH,EAAE,MAAO,CAAC,MAAMX,GAAGiwC,GAAEjvC,EAAEA,EAAEohB,OAAOpiB,EAAE,CAACgB,EAAEsN,QAAQ,CAAC,CAAG,KAAFpN,IAASF,EAAEsN,QAAQ,KAAK,CAAC,SAASujC,GAAG7wC,EAAEE,EAAEtG,GAAGm1C,GAAE/uC,EAAE8wC,GAAG9wC,EAAEE,EAAEtG,EAAE,CACvb,SAASk3C,GAAG9wC,EAAEE,EAAEtG,GAAG,IAAI,IAAIuG,EAAE,KAAY,EAAPH,EAAEw9B,MAAQ,OAAOuR,IAAG,CAAC,IAAI3uC,EAAE2uC,GAAEhwC,EAAEqB,EAAEshB,MAAM,GAAG,KAAKthB,EAAE2J,KAAK5J,EAAE,CAAC,IAAIF,EAAE,OAAOG,EAAEkhB,eAAeqtB,GAAG,IAAI1uC,EAAE,CAAC,IAAII,EAAED,EAAE+gB,UAAUniB,EAAE,OAAOqB,GAAG,OAAOA,EAAEihB,eAAestB,GAAEvuC,EAAEsuC,GAAG,IAAIxvC,EAAEyvC,GAAO,GAALD,GAAG1uC,GAAM2uC,GAAE5vC,KAAKG,EAAE,IAAI4vC,GAAE3uC,EAAE,OAAO2uC,IAAO/vC,GAAJiB,EAAE8uC,IAAMrtB,MAAM,KAAKzhB,EAAE8J,KAAK,OAAO9J,EAAEqhB,cAAcyvB,GAAG3wC,GAAG,OAAOpB,GAAGA,EAAEoiB,OAAOnhB,EAAE8uC,GAAE/vC,GAAG+xC,GAAG3wC,GAAG,KAAK,OAAOrB,GAAGgwC,GAAEhwC,EAAE+xC,GAAG/xC,EAAEmB,EAAEtG,GAAGmF,EAAEA,EAAE4iB,QAAQotB,GAAE3uC,EAAEuuC,GAAGtuC,EAAEuuC,GAAEzvC,CAAC,CAAC6xC,GAAGhxC,EAAM,MAAM,KAAoB,KAAfI,EAAE+sC,eAAoB,OAAOpuC,GAAGA,EAAEqiB,OAAOhhB,EAAE2uC,GAAEhwC,GAAGiyC,GAAGhxC,EAAM,CAAC,CACvc,SAASgxC,GAAGhxC,GAAG,KAAK,OAAO+uC,IAAG,CAAC,IAAI7uC,EAAE6uC,GAAE,GAAG,KAAa,KAAR7uC,EAAEoN,OAAY,CAAC,IAAI1T,EAAEsG,EAAEihB,UAAU,IAAI,GAAG,KAAa,KAARjhB,EAAEoN,OAAY,OAAOpN,EAAE6J,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG6kC,IAAGS,GAAG,EAAEnvC,GAAG,MAAM,KAAK,EAAE,IAAIC,EAAED,EAAE6f,UAAU,GAAW,EAAR7f,EAAEoN,QAAUshC,GAAE,GAAG,OAAOh1C,EAAEuG,EAAEmpC,wBAAwB,CAAC,IAAIlpC,EAAEF,EAAE+8B,cAAc/8B,EAAE5H,KAAKsB,EAAEgkC,cAAcoK,GAAG9nC,EAAE5H,KAAKsB,EAAEgkC,eAAez9B,EAAE0rC,mBAAmBzrC,EAAExG,EAAE0nB,cAAcnhB,EAAE8wC,oCAAoC,CAAC,IAAIlyC,EAAEmB,EAAEsgC,YAAY,OAAOzhC,GAAG0iC,GAAGvhC,EAAEnB,EAAEoB,GAAG,MAAM,KAAK,EAAE,IAAIF,EAAEC,EAAEsgC,YAAY,GAAG,OAAOvgC,EAAE,CAAQ,GAAPrG,EAAE,KAAQ,OAAOsG,EAAEwhB,MAAM,OAAOxhB,EAAEwhB,MAAM3X,KAAK,KAAK,EACvf,KAAK,EAAEnQ,EAAEsG,EAAEwhB,MAAM3B,UAAU0hB,GAAGvhC,EAAED,EAAErG,EAAE,CAAC,MAAM,KAAK,EAAE,IAAIyG,EAAEH,EAAE6f,UAAU,GAAG,OAAOnmB,GAAW,EAARsG,EAAEoN,MAAQ,CAAC1T,EAAEyG,EAAE,IAAIrB,EAAEkB,EAAE09B,cAAc,OAAO19B,EAAE5H,MAAM,IAAK,SAAS,IAAK,QAAQ,IAAK,SAAS,IAAK,WAAW0G,EAAEsvC,WAAW10C,EAAEg7B,QAAQ,MAAM,IAAK,MAAM51B,EAAEkyC,MAAMt3C,EAAEs3C,IAAIlyC,EAAEkyC,KAAK,CAAC,MAAM,KAAK,EAAQ,KAAK,EAAQ,KAAK,GAAyJ,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,MAAhM,KAAK,GAAG,GAAG,OAAOhxC,EAAEohB,cAAc,CAAC,IAAIniB,EAAEe,EAAEihB,UAAU,GAAG,OAAOhiB,EAAE,CAAC,IAAIC,EAAED,EAAEmiB,cAAc,GAAG,OAAOliB,EAAE,CAAC,IAAIW,EAAEX,EAAEmiB,WAAW,OAAOxhB,GAAGknB,GAAGlnB,EAAE,CAAC,CAAC,CAAC,MAC5c,QAAQ,MAAMxH,MAAMoH,EAAE,MAAOivC,IAAW,IAAR1uC,EAAEoN,OAAWgiC,GAAGpvC,EAAE,CAAC,MAAM2+B,GAAGoQ,GAAE/uC,EAAEA,EAAEkhB,OAAOyd,EAAE,CAAC,CAAC,GAAG3+B,IAAIF,EAAE,CAAC+uC,GAAE,KAAK,KAAK,CAAa,GAAG,QAAfn1C,EAAEsG,EAAEyhB,SAAoB,CAAC/nB,EAAEwnB,OAAOlhB,EAAEkhB,OAAO2tB,GAAEn1C,EAAE,KAAK,CAACm1C,GAAE7uC,EAAEkhB,MAAM,CAAC,CAAC,SAASuvB,GAAG3wC,GAAG,KAAK,OAAO+uC,IAAG,CAAC,IAAI7uC,EAAE6uC,GAAE,GAAG7uC,IAAIF,EAAE,CAAC+uC,GAAE,KAAK,KAAK,CAAC,IAAIn1C,EAAEsG,EAAEyhB,QAAQ,GAAG,OAAO/nB,EAAE,CAACA,EAAEwnB,OAAOlhB,EAAEkhB,OAAO2tB,GAAEn1C,EAAE,KAAK,CAACm1C,GAAE7uC,EAAEkhB,MAAM,CAAC,CACvS,SAAS2vB,GAAG/wC,GAAG,KAAK,OAAO+uC,IAAG,CAAC,IAAI7uC,EAAE6uC,GAAE,IAAI,OAAO7uC,EAAE6J,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,IAAInQ,EAAEsG,EAAEkhB,OAAO,IAAIiuB,GAAG,EAAEnvC,EAAE,CAAC,MAAMlB,GAAGiwC,GAAE/uC,EAAEtG,EAAEoF,EAAE,CAAC,MAAM,KAAK,EAAE,IAAImB,EAAED,EAAE6f,UAAU,GAAG,oBAAoB5f,EAAEmpC,kBAAkB,CAAC,IAAIlpC,EAAEF,EAAEkhB,OAAO,IAAIjhB,EAAEmpC,mBAAmB,CAAC,MAAMtqC,GAAGiwC,GAAE/uC,EAAEE,EAAEpB,EAAE,CAAC,CAAC,IAAID,EAAEmB,EAAEkhB,OAAO,IAAIkuB,GAAGpvC,EAAE,CAAC,MAAMlB,GAAGiwC,GAAE/uC,EAAEnB,EAAEC,EAAE,CAAC,MAAM,KAAK,EAAE,IAAIiB,EAAEC,EAAEkhB,OAAO,IAAIkuB,GAAGpvC,EAAE,CAAC,MAAMlB,GAAGiwC,GAAE/uC,EAAED,EAAEjB,EAAE,EAAE,CAAC,MAAMA,GAAGiwC,GAAE/uC,EAAEA,EAAEkhB,OAAOpiB,EAAE,CAAC,GAAGkB,IAAIF,EAAE,CAAC+uC,GAAE,KAAK,KAAK,CAAC,IAAI1uC,EAAEH,EAAEyhB,QAAQ,GAAG,OAAOthB,EAAE,CAACA,EAAE+gB,OAAOlhB,EAAEkhB,OAAO2tB,GAAE1uC,EAAE,KAAK,CAAC0uC,GAAE7uC,EAAEkhB,MAAM,CAAC,CAC7d,IAwBkN+vB,GAxB9MC,GAAGruC,KAAKkD,KAAKorC,GAAG18B,EAAG+tB,uBAAuB4O,GAAG38B,EAAGjV,kBAAkB6xC,GAAG58B,EAAGwS,wBAAwBvgB,GAAE,EAAEo+B,GAAE,KAAKwM,GAAE,KAAKC,GAAE,EAAElG,GAAG,EAAED,GAAGjR,GAAG,GAAGv0B,GAAE,EAAE4rC,GAAG,KAAKlQ,GAAG,EAAEmQ,GAAG,EAAEC,GAAG,EAAEC,GAAG,KAAKC,GAAG,KAAKpB,GAAG,EAAElC,GAAGuD,IAASC,GAAG,KAAKnI,IAAG,EAAGC,GAAG,KAAKI,GAAG,KAAK+H,IAAG,EAAGC,GAAG,KAAKC,GAAG,EAAEC,GAAG,EAAEC,GAAG,KAAKC,IAAI,EAAEC,GAAG,EAAE,SAASxrC,KAAI,OAAO,KAAO,EAAFH,IAAK0b,MAAK,IAAIgwB,GAAGA,GAAGA,GAAGhwB,IAAG,CAChU,SAASmkB,GAAGzmC,GAAG,OAAG,KAAY,EAAPA,EAAEw9B,MAAe,EAAK,KAAO,EAAF52B,KAAM,IAAI6qC,GAASA,IAAGA,GAAK,OAAOzT,GAAG1W,YAAkB,IAAIirB,KAAKA,GAAGjuB,MAAMiuB,IAAU,KAAPvyC,EAAE2kB,IAAkB3kB,EAAiBA,OAAE,KAAjBA,EAAEiP,OAAO6hB,OAAmB,GAAGlJ,GAAG5nB,EAAE1H,KAAc,CAAC,SAASgtC,GAAGtlC,EAAEE,EAAEtG,EAAEuG,GAAG,GAAG,GAAGiyC,GAAG,MAAMA,GAAG,EAAEC,GAAG,KAAK95C,MAAMoH,EAAE,MAAM6kB,GAAGxkB,EAAEpG,EAAEuG,GAAM,KAAO,EAAFyG,KAAM5G,IAAIglC,KAAEhlC,IAAIglC,KAAI,KAAO,EAAFp+B,MAAO+qC,IAAI/3C,GAAG,IAAIkM,IAAG0sC,GAAGxyC,EAAEyxC,KAAIgB,GAAGzyC,EAAEG,GAAG,IAAIvG,GAAG,IAAIgN,IAAG,KAAY,EAAP1G,EAAEs9B,QAAUgR,GAAGlsB,KAAI,IAAIoZ,IAAIG,MAAK,CAC1Y,SAAS4W,GAAGzyC,EAAEE,GAAG,IAAItG,EAAEoG,EAAE0yC,cA3MzB,SAAY1yC,EAAEE,GAAG,IAAI,IAAItG,EAAEoG,EAAEgkB,eAAe7jB,EAAEH,EAAEikB,YAAY7jB,EAAEJ,EAAE2yC,gBAAgB5zC,EAAEiB,EAAE+jB,aAAa,EAAEhlB,GAAG,CAAC,IAAIkB,EAAE,GAAGqjB,GAAGvkB,GAAGsB,EAAE,GAAGJ,EAAEjB,EAAEoB,EAAEH,IAAO,IAAIjB,EAAM,KAAKqB,EAAEzG,IAAI,KAAKyG,EAAEF,KAAGC,EAAEH,GAAGmkB,GAAG/jB,EAAEH,IAAQlB,GAAGkB,IAAIF,EAAE4yC,cAAcvyC,GAAGtB,IAAIsB,CAAC,CAAC,CA2MnLwyC,CAAG7yC,EAAEE,GAAG,IAAIC,EAAE2jB,GAAG9jB,EAAEA,IAAIglC,GAAEyM,GAAE,GAAG,GAAG,IAAItxC,EAAE,OAAOvG,GAAGooB,GAAGpoB,GAAGoG,EAAE0yC,aAAa,KAAK1yC,EAAE8yC,iBAAiB,OAAO,GAAG5yC,EAAEC,GAAGA,EAAEH,EAAE8yC,mBAAmB5yC,EAAE,CAAgB,GAAf,MAAMtG,GAAGooB,GAAGpoB,GAAM,IAAIsG,EAAE,IAAIF,EAAE+J,IA5IsJ,SAAY/J,GAAG07B,IAAG,EAAGE,GAAG57B,EAAE,CA4I5K+yC,CAAGC,GAAG/b,KAAK,KAAKj3B,IAAI47B,GAAGoX,GAAG/b,KAAK,KAAKj3B,IAAIo5B,GAAG,WAAW,KAAO,EAAFxyB,KAAMi1B,IAAI,GAAGjiC,EAAE,SAAS,CAAC,OAAOgrB,GAAGzkB,IAAI,KAAK,EAAEvG,EAAE8oB,GAAG,MAAM,KAAK,EAAE9oB,EAAEgpB,GAAG,MAAM,KAAK,GAAwC,QAAQhpB,EAAEkpB,SAApC,KAAK,UAAUlpB,EAAEspB,GAAsBtpB,EAAEq5C,GAAGr5C,EAAEs5C,GAAGjc,KAAK,KAAKj3B,GAAG,CAACA,EAAE8yC,iBAAiB5yC,EAAEF,EAAE0yC,aAAa94C,CAAC,CAAC,CAC7c,SAASs5C,GAAGlzC,EAAEE,GAAc,GAAXoyC,IAAI,EAAEC,GAAG,EAAK,KAAO,EAAF3rC,IAAK,MAAMrO,MAAMoH,EAAE,MAAM,IAAI/F,EAAEoG,EAAE0yC,aAAa,GAAGS,MAAMnzC,EAAE0yC,eAAe94C,EAAE,OAAO,KAAK,IAAIuG,EAAE2jB,GAAG9jB,EAAEA,IAAIglC,GAAEyM,GAAE,GAAG,GAAG,IAAItxC,EAAE,OAAO,KAAK,GAAG,KAAO,GAAFA,IAAO,KAAKA,EAAEH,EAAE4yC,eAAe1yC,EAAEA,EAAEkzC,GAAGpzC,EAAEG,OAAO,CAACD,EAAEC,EAAE,IAAIC,EAAEwG,GAAEA,IAAG,EAAE,IAAI7H,EAAEs0C,KAAgD,IAAxCrO,KAAIhlC,GAAGyxC,KAAIvxC,IAAE8xC,GAAG,KAAKxD,GAAGlsB,KAAI,IAAIgxB,GAAGtzC,EAAEE,UAAUqzC,KAAK,KAAK,CAAC,MAAMlzC,GAAGmzC,GAAGxzC,EAAEK,EAAE,CAAUg/B,KAAKgS,GAAG1wC,QAAQ5B,EAAE6H,GAAExG,EAAE,OAAOoxC,GAAEtxC,EAAE,GAAG8kC,GAAE,KAAKyM,GAAE,EAAEvxC,EAAE4F,GAAE,CAAC,GAAG,IAAI5F,EAAE,CAAyC,GAAxC,IAAIA,IAAY,KAARE,EAAEikB,GAAGrkB,MAAWG,EAAEC,EAAEF,EAAEuzC,GAAGzzC,EAAEI,KAAQ,IAAIF,EAAE,MAAMtG,EAAE83C,GAAG4B,GAAGtzC,EAAE,GAAGwyC,GAAGxyC,EAAEG,GAAGsyC,GAAGzyC,EAAEsiB,MAAK1oB,EAAE,GAAG,IAAIsG,EAAEsyC,GAAGxyC,EAAEG,OAChf,CAAuB,GAAtBC,EAAEJ,EAAEW,QAAQwgB,UAAa,KAAO,GAAFhhB,KAGnC,SAAYH,GAAG,IAAI,IAAIE,EAAEF,IAAI,CAAC,GAAW,MAARE,EAAEoN,MAAY,CAAC,IAAI1T,EAAEsG,EAAEsgC,YAAY,GAAG,OAAO5mC,GAAe,QAAXA,EAAEA,EAAEurC,QAAiB,IAAI,IAAIhlC,EAAE,EAAEA,EAAEvG,EAAE8C,OAAOyD,IAAI,CAAC,IAAIC,EAAExG,EAAEuG,GAAGpB,EAAEqB,EAAEykC,YAAYzkC,EAAEA,EAAE6X,MAAM,IAAI,IAAIma,GAAGrzB,IAAIqB,GAAG,OAAM,CAAE,CAAC,MAAMH,GAAG,OAAM,CAAE,CAAC,CAAC,CAAW,GAAVrG,EAAEsG,EAAEwhB,MAAwB,MAAfxhB,EAAEitC,cAAoB,OAAOvzC,EAAEA,EAAEwnB,OAAOlhB,EAAEA,EAAEtG,MAAM,CAAC,GAAGsG,IAAIF,EAAE,MAAM,KAAK,OAAOE,EAAEyhB,SAAS,CAAC,GAAG,OAAOzhB,EAAEkhB,QAAQlhB,EAAEkhB,SAASphB,EAAE,OAAM,EAAGE,EAAEA,EAAEkhB,MAAM,CAAClhB,EAAEyhB,QAAQP,OAAOlhB,EAAEkhB,OAAOlhB,EAAEA,EAAEyhB,OAAO,CAAC,CAAC,OAAM,CAAE,CAHvX+xB,CAAGtzC,KAAe,KAAVF,EAAEkzC,GAAGpzC,EAAEG,MAAmB,KAARpB,EAAEslB,GAAGrkB,MAAWG,EAAEpB,EAAEmB,EAAEuzC,GAAGzzC,EAAEjB,KAAK,IAAImB,GAAG,MAAMtG,EAAE83C,GAAG4B,GAAGtzC,EAAE,GAAGwyC,GAAGxyC,EAAEG,GAAGsyC,GAAGzyC,EAAEsiB,MAAK1oB,EAAqC,OAAnCoG,EAAE2zC,aAAavzC,EAAEJ,EAAE4zC,cAAczzC,EAASD,GAAG,KAAK,EAAE,KAAK,EAAE,MAAM3H,MAAMoH,EAAE,MAAM,KAAK,EAC8B,KAAK,EAAEk0C,GAAG7zC,EAAE8xC,GAAGE,IAAI,MAD7B,KAAK,EAAU,GAARQ,GAAGxyC,EAAEG,IAAS,UAAFA,KAAeA,GAAiB,IAAbD,EAAEwwC,GAAG,IAAIpuB,MAAU,CAAC,GAAG,IAAIwB,GAAG9jB,EAAE,GAAG,MAAyB,KAAnBI,EAAEJ,EAAEgkB,gBAAqB7jB,KAAKA,EAAE,CAAC4G,KAAI/G,EAAEikB,aAAajkB,EAAEgkB,eAAe5jB,EAAE,KAAK,CAACJ,EAAE8zC,cAAchb,GAAG+a,GAAG5c,KAAK,KAAKj3B,EAAE8xC,GAAGE,IAAI9xC,GAAG,KAAK,CAAC2zC,GAAG7zC,EAAE8xC,GAAGE,IAAI,MAAM,KAAK,EAAU,GAARQ,GAAGxyC,EAAEG,IAAS,QAAFA,KAC9eA,EAAE,MAAqB,IAAfD,EAAEF,EAAEykB,WAAerkB,GAAG,EAAE,EAAED,GAAG,CAAC,IAAIF,EAAE,GAAGqjB,GAAGnjB,GAAGpB,EAAE,GAAGkB,GAAEA,EAAEC,EAAED,IAAKG,IAAIA,EAAEH,GAAGE,IAAIpB,CAAC,CAAqG,GAApGoB,EAAEC,EAAqG,IAA3FD,GAAG,KAAXA,EAAEmiB,KAAIniB,GAAW,IAAI,IAAIA,EAAE,IAAI,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,IAAIA,EAAE,IAAI,KAAKA,EAAE,KAAK,KAAKixC,GAAGjxC,EAAE,OAAOA,GAAU,CAACH,EAAE8zC,cAAchb,GAAG+a,GAAG5c,KAAK,KAAKj3B,EAAE8xC,GAAGE,IAAI7xC,GAAG,KAAK,CAAC0zC,GAAG7zC,EAAE8xC,GAAGE,IAAI,MAA+B,QAAQ,MAAMz5C,MAAMoH,EAAE,MAAO,CAAC,CAAW,OAAV8yC,GAAGzyC,EAAEsiB,MAAYtiB,EAAE0yC,eAAe94C,EAAEs5C,GAAGjc,KAAK,KAAKj3B,GAAG,IAAI,CACrX,SAASyzC,GAAGzzC,EAAEE,GAAG,IAAItG,EAAEi4C,GAA2G,OAAxG7xC,EAAEW,QAAQ2gB,cAAckF,eAAe8sB,GAAGtzC,EAAEE,GAAGoN,OAAO,KAAe,KAAVtN,EAAEozC,GAAGpzC,EAAEE,MAAWA,EAAE4xC,GAAGA,GAAGl4C,EAAE,OAAOsG,GAAG6tC,GAAG7tC,IAAWF,CAAC,CAAC,SAAS+tC,GAAG/tC,GAAG,OAAO8xC,GAAGA,GAAG9xC,EAAE8xC,GAAGjrC,KAAKiH,MAAMgkC,GAAG9xC,EAAE,CAE5L,SAASwyC,GAAGxyC,EAAEE,GAAuD,IAApDA,IAAI0xC,GAAG1xC,IAAIyxC,GAAG3xC,EAAEgkB,gBAAgB9jB,EAAEF,EAAEikB,cAAc/jB,EAAMF,EAAEA,EAAE2yC,gBAAgB,EAAEzyC,GAAG,CAAC,IAAItG,EAAE,GAAG0pB,GAAGpjB,GAAGC,EAAE,GAAGvG,EAAEoG,EAAEpG,IAAI,EAAEsG,IAAIC,CAAC,CAAC,CAAC,SAAS6yC,GAAGhzC,GAAG,GAAG,KAAO,EAAF4G,IAAK,MAAMrO,MAAMoH,EAAE,MAAMwzC,KAAK,IAAIjzC,EAAE4jB,GAAG9jB,EAAE,GAAG,GAAG,KAAO,EAAFE,GAAK,OAAOuyC,GAAGzyC,EAAEsiB,MAAK,KAAK,IAAI1oB,EAAEw5C,GAAGpzC,EAAEE,GAAG,GAAG,IAAIF,EAAE+J,KAAK,IAAInQ,EAAE,CAAC,IAAIuG,EAAEkkB,GAAGrkB,GAAG,IAAIG,IAAID,EAAEC,EAAEvG,EAAE65C,GAAGzzC,EAAEG,GAAG,CAAC,GAAG,IAAIvG,EAAE,MAAMA,EAAE83C,GAAG4B,GAAGtzC,EAAE,GAAGwyC,GAAGxyC,EAAEE,GAAGuyC,GAAGzyC,EAAEsiB,MAAK1oB,EAAE,GAAG,IAAIA,EAAE,MAAMrB,MAAMoH,EAAE,MAAiF,OAA3EK,EAAE2zC,aAAa3zC,EAAEW,QAAQwgB,UAAUnhB,EAAE4zC,cAAc1zC,EAAE2zC,GAAG7zC,EAAE8xC,GAAGE,IAAIS,GAAGzyC,EAAEsiB,MAAY,IAAI,CACvd,SAASyxB,GAAG/zC,EAAEE,GAAG,IAAItG,EAAEgN,GAAEA,IAAG,EAAE,IAAI,OAAO5G,EAAEE,EAAE,CAAC,QAAY,KAAJ0G,GAAEhN,KAAU40C,GAAGlsB,KAAI,IAAIoZ,IAAIG,KAAK,CAAC,CAAC,SAASmY,GAAGh0C,GAAG,OAAOkyC,IAAI,IAAIA,GAAGnoC,KAAK,KAAO,EAAFnD,KAAMusC,KAAK,IAAIjzC,EAAE0G,GAAEA,IAAG,EAAE,IAAIhN,EAAE23C,GAAGjqB,WAAWnnB,EAAEwkB,GAAE,IAAI,GAAG4sB,GAAGjqB,WAAW,KAAK3C,GAAE,EAAE3kB,EAAE,OAAOA,GAAG,CAAC,QAAQ2kB,GAAExkB,EAAEoxC,GAAGjqB,WAAW1tB,EAAM,KAAO,GAAXgN,GAAE1G,KAAa27B,IAAI,CAAC,CAAC,SAAS4S,KAAKlD,GAAGD,GAAG3qC,QAAQ25B,GAAEgR,GAAG,CAChT,SAASgI,GAAGtzC,EAAEE,GAAGF,EAAE2zC,aAAa,KAAK3zC,EAAE4zC,cAAc,EAAE,IAAIh6C,EAAEoG,EAAE8zC,cAAiD,IAAlC,IAAIl6C,IAAIoG,EAAE8zC,eAAe,EAAE9a,GAAGp/B,IAAO,OAAO43C,GAAE,IAAI53C,EAAE43C,GAAEpwB,OAAO,OAAOxnB,GAAG,CAAC,IAAIuG,EAAEvG,EAAQ,OAAN8iC,GAAGv8B,GAAUA,EAAE4J,KAAK,KAAK,EAA6B,QAA3B5J,EAAEA,EAAE7H,KAAK2iC,yBAA4B,IAAS96B,GAAG+6B,KAAK,MAAM,KAAK,EAAE+G,KAAK3H,GAAEI,IAAIJ,GAAEG,IAAG8H,KAAK,MAAM,KAAK,EAAEJ,GAAGhiC,GAAG,MAAM,KAAK,EAAE8hC,KAAK,MAAM,KAAK,GAAc,KAAK,GAAG3H,GAAEz0B,IAAG,MAAM,KAAK,GAAG0F,GAAGpL,EAAE7H,KAAKwe,UAAU,MAAM,KAAK,GAAG,KAAK,GAAG23B,KAAK70C,EAAEA,EAAEwnB,MAAM,CAAqE,GAApE4jB,GAAEhlC,EAAEwxC,GAAExxC,EAAEu+B,GAAGv+B,EAAEW,QAAQ,MAAM8wC,GAAElG,GAAGrrC,EAAE4F,GAAE,EAAE4rC,GAAG,KAAKE,GAAGD,GAAGnQ,GAAG,EAAEsQ,GAAGD,GAAG,KAAQ,OAAO5R,GAAG,CAAC,IAAI//B,EAC1f,EAAEA,EAAE+/B,GAAGvjC,OAAOwD,IAAI,GAA2B,QAAhBC,GAARvG,EAAEqmC,GAAG//B,IAAOkgC,aAAqB,CAACxmC,EAAEwmC,YAAY,KAAK,IAAIhgC,EAAED,EAAEsD,KAAK1E,EAAEnF,EAAEinC,QAAQ,GAAG,OAAO9hC,EAAE,CAAC,IAAIkB,EAAElB,EAAE0E,KAAK1E,EAAE0E,KAAKrD,EAAED,EAAEsD,KAAKxD,CAAC,CAACrG,EAAEinC,QAAQ1gC,CAAC,CAAC8/B,GAAG,IAAI,CAAC,OAAOjgC,CAAC,CAC3K,SAASwzC,GAAGxzC,EAAEE,GAAG,OAAE,CAAC,IAAItG,EAAE43C,GAAE,IAAuB,GAAnBnS,KAAKoD,GAAG9hC,QAAQ+iC,GAAMV,GAAG,CAAC,IAAI,IAAI7iC,EAAE0iC,GAAEvhB,cAAc,OAAOnhB,GAAG,CAAC,IAAIC,EAAED,EAAE2jC,MAAM,OAAO1jC,IAAIA,EAAEygC,QAAQ,MAAM1gC,EAAEA,EAAEsD,IAAI,CAACu/B,IAAG,CAAE,CAA4C,GAA3CJ,GAAG,EAAEG,GAAED,GAAED,GAAE,KAAKI,IAAG,EAAGC,GAAG,EAAEoO,GAAG3wC,QAAQ,KAAQ,OAAO/G,GAAG,OAAOA,EAAEwnB,OAAO,CAACtb,GAAE,EAAE4rC,GAAGxxC,EAAEsxC,GAAE,KAAK,KAAK,CAACxxC,EAAE,CAAC,IAAIjB,EAAEiB,EAAEC,EAAErG,EAAEwnB,OAAO/gB,EAAEzG,EAAEoF,EAAEkB,EAAqB,GAAnBA,EAAEuxC,GAAEpxC,EAAEiN,OAAO,MAAS,OAAOtO,GAAG,kBAAkBA,GAAG,oBAAoBA,EAAEu6B,KAAK,CAAC,IAAIp6B,EAAEH,EAAEI,EAAEiB,EAAEN,EAAEX,EAAE2K,IAAI,GAAG,KAAY,EAAP3K,EAAEo+B,QAAU,IAAIz9B,GAAG,KAAKA,GAAG,KAAKA,GAAG,CAAC,IAAI8+B,EAAEz/B,EAAE+hB,UAAU0d,GAAGz/B,EAAEohC,YAAY3B,EAAE2B,YAAYphC,EAAEkiB,cAAcud,EAAEvd,cACxeliB,EAAEwgC,MAAMf,EAAEe,QAAQxgC,EAAEohC,YAAY,KAAKphC,EAAEkiB,cAAc,KAAK,CAAC,IAAIxW,EAAEy/B,GAAGtqC,GAAG,GAAG,OAAO6K,EAAE,CAACA,EAAEwC,QAAQ,IAAIk9B,GAAG1/B,EAAE7K,EAAEI,EAAEtB,EAAEmB,GAAU,EAAP4K,EAAE0yB,MAAQ4M,GAAGrrC,EAAEI,EAAEe,GAAOlB,EAAEG,EAAE,IAAIK,GAAZU,EAAE4K,GAAc01B,YAAY,GAAG,OAAOhhC,EAAE,CAAC,IAAI4M,EAAE,IAAImG,IAAInG,EAAEuG,IAAI3T,GAAGkB,EAAEsgC,YAAYp0B,CAAC,MAAM5M,EAAEmT,IAAI3T,GAAG,MAAMgB,CAAC,CAAM,GAAG,KAAO,EAAFE,GAAK,CAACkqC,GAAGrrC,EAAEI,EAAEe,GAAG6sC,KAAK,MAAM/sC,CAAC,CAAChB,EAAEzG,MAAMoH,EAAE,KAAM,MAAM,GAAGk9B,IAAU,EAAPx8B,EAAEm9B,KAAO,CAAC,IAAIpG,EAAEmT,GAAGtqC,GAAG,GAAG,OAAOm3B,EAAE,CAAC,KAAa,MAARA,EAAE9pB,SAAe8pB,EAAE9pB,OAAO,KAAKk9B,GAAGpT,EAAEn3B,EAAEI,EAAEtB,EAAEmB,GAAG69B,GAAGwL,GAAGvqC,EAAEqB,IAAI,MAAML,CAAC,CAAC,CAACjB,EAAEC,EAAEuqC,GAAGvqC,EAAEqB,GAAG,IAAIyF,KAAIA,GAAE,GAAG,OAAO+rC,GAAGA,GAAG,CAAC9yC,GAAG8yC,GAAGhrC,KAAK9H,GAAGA,EAAEkB,EAAE,EAAE,CAAC,OAAOlB,EAAEgL,KAAK,KAAK,EAAEhL,EAAEuO,OAAO,MACpfpN,IAAIA,EAAEnB,EAAE6gC,OAAO1/B,EAAkBohC,GAAGviC,EAAb6qC,GAAG7qC,EAAEC,EAAEkB,IAAW,MAAMF,EAAE,KAAK,EAAEK,EAAErB,EAAE,IAAIs4B,EAAEv4B,EAAEzG,KAAK++B,EAAEt4B,EAAEghB,UAAU,GAAG,KAAa,IAARhhB,EAAEuO,SAAa,oBAAoBgqB,EAAE0S,0BAA0B,OAAO3S,GAAG,oBAAoBA,EAAE4S,oBAAoB,OAAOC,KAAKA,GAAG36B,IAAI8nB,KAAK,CAACt4B,EAAEuO,OAAO,MAAMpN,IAAIA,EAAEnB,EAAE6gC,OAAO1/B,EAAkBohC,GAAGviC,EAAbgrC,GAAGhrC,EAAEsB,EAAEH,IAAW,MAAMF,CAAC,EAAEjB,EAAEA,EAAEqiB,MAAM,OAAO,OAAOriB,EAAE,CAACk1C,GAAGr6C,EAAE,CAAC,MAAMi+B,GAAI33B,EAAE23B,EAAG2Z,KAAI53C,GAAG,OAAOA,IAAI43C,GAAE53C,EAAEA,EAAEwnB,QAAQ,QAAQ,CAAC,KAAK,CAAS,CAAC,SAASiyB,KAAK,IAAIrzC,EAAEqxC,GAAG1wC,QAAsB,OAAd0wC,GAAG1wC,QAAQ+iC,GAAU,OAAO1jC,EAAE0jC,GAAG1jC,CAAC,CACrd,SAAS+sC,KAAQ,IAAIjnC,IAAG,IAAIA,IAAG,IAAIA,KAAEA,GAAE,GAAE,OAAOk/B,IAAG,KAAQ,UAAHxD,KAAe,KAAQ,UAAHmQ,KAAea,GAAGxN,GAAEyM,GAAE,CAAC,SAAS2B,GAAGpzC,EAAEE,GAAG,IAAItG,EAAEgN,GAAEA,IAAG,EAAE,IAAIzG,EAAEkzC,KAAqC,IAA7BrO,KAAIhlC,GAAGyxC,KAAIvxC,IAAE8xC,GAAG,KAAKsB,GAAGtzC,EAAEE,UAAUg0C,KAAK,KAAK,CAAC,MAAM9zC,GAAGozC,GAAGxzC,EAAEI,EAAE,CAAgC,GAAtBi/B,KAAKz4B,GAAEhN,EAAEy3C,GAAG1wC,QAAQR,EAAK,OAAOqxC,GAAE,MAAMj5C,MAAMoH,EAAE,MAAiB,OAAXqlC,GAAE,KAAKyM,GAAE,EAAS3rC,EAAC,CAAC,SAASouC,KAAK,KAAK,OAAO1C,IAAG2C,GAAG3C,GAAE,CAAC,SAAS+B,KAAK,KAAK,OAAO/B,KAAItvB,MAAMiyB,GAAG3C,GAAE,CAAC,SAAS2C,GAAGn0C,GAAG,IAAIE,EAAEixC,GAAGnxC,EAAEmhB,UAAUnhB,EAAEurC,IAAIvrC,EAAE49B,cAAc59B,EAAEo9B,aAAa,OAAOl9B,EAAE+zC,GAAGj0C,GAAGwxC,GAAEtxC,EAAEoxC,GAAG3wC,QAAQ,IAAI,CAC1d,SAASszC,GAAGj0C,GAAG,IAAIE,EAAEF,EAAE,EAAE,CAAC,IAAIpG,EAAEsG,EAAEihB,UAAqB,GAAXnhB,EAAEE,EAAEkhB,OAAU,KAAa,MAARlhB,EAAEoN,QAAc,GAAgB,QAAb1T,EAAEk0C,GAAGl0C,EAAEsG,EAAEqrC,KAAkB,YAAJiG,GAAE53C,OAAc,CAAW,GAAG,QAAbA,EAAE80C,GAAG90C,EAAEsG,IAAmC,OAAnBtG,EAAE0T,OAAO,WAAMkkC,GAAE53C,GAAS,GAAG,OAAOoG,EAAmE,OAAX8F,GAAE,OAAE0rC,GAAE,MAA5DxxC,EAAEsN,OAAO,MAAMtN,EAAEmtC,aAAa,EAAEntC,EAAEk9B,UAAU,IAA4B,CAAa,GAAG,QAAfh9B,EAAEA,EAAEyhB,SAAyB,YAAJ6vB,GAAEtxC,GAASsxC,GAAEtxC,EAAEF,CAAC,OAAO,OAAOE,GAAG,IAAI4F,KAAIA,GAAE,EAAE,CAAC,SAAS+tC,GAAG7zC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEwkB,GAAEvkB,EAAEmxC,GAAGjqB,WAAW,IAAIiqB,GAAGjqB,WAAW,KAAK3C,GAAE,EAC3Y,SAAY3kB,EAAEE,EAAEtG,EAAEuG,GAAG,GAAGgzC,WAAW,OAAOjB,IAAI,GAAG,KAAO,EAAFtrC,IAAK,MAAMrO,MAAMoH,EAAE,MAAM/F,EAAEoG,EAAE2zC,aAAa,IAAIvzC,EAAEJ,EAAE4zC,cAAc,GAAG,OAAOh6C,EAAE,OAAO,KAA2C,GAAtCoG,EAAE2zC,aAAa,KAAK3zC,EAAE4zC,cAAc,EAAKh6C,IAAIoG,EAAEW,QAAQ,MAAMpI,MAAMoH,EAAE,MAAMK,EAAE0yC,aAAa,KAAK1yC,EAAE8yC,iBAAiB,EAAE,IAAI/zC,EAAEnF,EAAEgmC,MAAMhmC,EAAE4lC,WAA8J,GAzNtT,SAAYx/B,EAAEE,GAAG,IAAItG,EAAEoG,EAAE+jB,cAAc7jB,EAAEF,EAAE+jB,aAAa7jB,EAAEF,EAAEgkB,eAAe,EAAEhkB,EAAEikB,YAAY,EAAEjkB,EAAE4yC,cAAc1yC,EAAEF,EAAEo0C,kBAAkBl0C,EAAEF,EAAEkkB,gBAAgBhkB,EAAEA,EAAEF,EAAEmkB,cAAc,IAAIhkB,EAAEH,EAAEykB,WAAW,IAAIzkB,EAAEA,EAAE2yC,gBAAgB,EAAE/4C,GAAG,CAAC,IAAIwG,EAAE,GAAGkjB,GAAG1pB,GAAGmF,EAAE,GAAGqB,EAAEF,EAAEE,GAAG,EAAED,EAAEC,IAAI,EAAEJ,EAAEI,IAAI,EAAExG,IAAImF,CAAC,CAAC,CAyN5Gs1C,CAAGr0C,EAAEjB,GAAGiB,IAAIglC,KAAIwM,GAAExM,GAAE,KAAKyM,GAAE,GAAG,KAAoB,KAAf73C,EAAEuzC,eAAoB,KAAa,KAARvzC,EAAE0T,QAAa2kC,KAAKA,IAAG,EAAGgB,GAAGnwB,GAAG,WAAgB,OAALqwB,KAAY,IAAI,IAAIp0C,EAAE,KAAa,MAARnF,EAAE0T,OAAgB,KAAoB,MAAf1T,EAAEuzC,eAAqBpuC,EAAE,CAACA,EAAEwyC,GAAGjqB,WAAWiqB,GAAGjqB,WAAW,KAChf,IAAIrnB,EAAE0kB,GAAEA,GAAE,EAAE,IAAItkB,EAAEuG,GAAEA,IAAG,EAAE0qC,GAAG3wC,QAAQ,KA1CpC,SAAYX,EAAEE,GAAgB,GAAbw4B,GAAGtR,GAAa6L,GAAVjzB,EAAE8yB,MAAc,CAAC,GAAG,mBAAmB9yB,EAAE,IAAIpG,EAAE,CAACwC,MAAM4D,EAAEwzB,eAAeD,IAAIvzB,EAAEyzB,mBAAmBzzB,EAAE,CAA8C,IAAIG,GAAjDvG,GAAGA,EAAEoG,EAAEgZ,gBAAgBpf,EAAE85B,aAAazkB,QAAe0kB,cAAc/5B,EAAE+5B,eAAe,GAAGxzB,GAAG,IAAIA,EAAE0zB,WAAW,CAACj6B,EAAEuG,EAAE2zB,WAAW,IAAI1zB,EAAED,EAAE4zB,aAAah1B,EAAEoB,EAAE6zB,UAAU7zB,EAAEA,EAAE8zB,YAAY,IAAIr6B,EAAE+gB,SAAS5b,EAAE4b,QAAQ,CAAC,MAAM4c,GAAG39B,EAAE,KAAK,MAAMoG,CAAC,CAAC,IAAIC,EAAE,EAAEI,GAAG,EAAErB,GAAG,EAAEG,EAAE,EAAEC,EAAE,EAAEW,EAAEC,EAAE6+B,EAAE,KAAK3+B,EAAE,OAAO,CAAC,IAAI,IAAI4K,EAAK/K,IAAInG,GAAG,IAAIwG,GAAG,IAAIL,EAAE4a,WAAWta,EAAEJ,EAAEG,GAAGL,IAAIhB,GAAG,IAAIoB,GAAG,IAAIJ,EAAE4a,WAAW3b,EAAEiB,EAAEE,GAAG,IAAIJ,EAAE4a,WAAW1a,GACnfF,EAAE6a,UAAUle,QAAW,QAAQoO,EAAE/K,EAAEqa,aAAkBykB,EAAE9+B,EAAEA,EAAE+K,EAAE,OAAO,CAAC,GAAG/K,IAAIC,EAAE,MAAME,EAA8C,GAA5C2+B,IAAIjlC,KAAKuF,IAAIiB,IAAIC,EAAEJ,GAAG4+B,IAAI9/B,KAAKK,IAAIe,IAAInB,EAAEiB,GAAM,QAAQ6K,EAAE/K,EAAE2yB,aAAa,MAAUmM,GAAJ9+B,EAAE8+B,GAAMpf,UAAU,CAAC1f,EAAE+K,CAAC,CAAClR,GAAG,IAAIyG,IAAI,IAAIrB,EAAE,KAAK,CAAC5C,MAAMiE,EAAEkzB,IAAIv0B,EAAE,MAAMpF,EAAE,IAAI,CAACA,EAAEA,GAAG,CAACwC,MAAM,EAAEm3B,IAAI,EAAE,MAAM35B,EAAE,KAA+C,IAA1C++B,GAAG,CAACvF,YAAYpzB,EAAEqzB,eAAez5B,GAAGwtB,IAAG,EAAO2nB,GAAE7uC,EAAE,OAAO6uC,IAAG,GAAO/uC,GAAJE,EAAE6uC,IAAMrtB,MAAM,KAAoB,KAAfxhB,EAAEitC,eAAoB,OAAOntC,EAAEA,EAAEohB,OAAOlhB,EAAE6uC,GAAE/uC,OAAO,KAAK,OAAO+uC,IAAG,CAAC7uC,EAAE6uC,GAAE,IAAI,IAAIvvC,EAAEU,EAAEihB,UAAU,GAAG,KAAa,KAARjhB,EAAEoN,OAAY,OAAOpN,EAAE6J,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GACvK,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,MAA3W,KAAK,EAAE,GAAG,OAAOvK,EAAE,CAAC,IAAI4M,EAAE5M,EAAEo+B,cAAcxG,EAAE53B,EAAE8hB,cAAc5c,EAAExE,EAAE6f,UAAUuX,EAAE5yB,EAAEykC,wBAAwBjpC,EAAE+8B,cAAc/8B,EAAE5H,KAAK8T,EAAE47B,GAAG9nC,EAAE5H,KAAK8T,GAAGgrB,GAAG1yB,EAAEusC,oCAAoC3Z,CAAC,CAAC,MAAM,KAAK,EAAE,IAAID,EAAEn3B,EAAE6f,UAAU0G,cAAc,IAAI4Q,EAAE1c,SAAS0c,EAAEzd,YAAY,GAAG,IAAIyd,EAAE1c,UAAU0c,EAAE/D,iBAAiB+D,EAAEhd,YAAYgd,EAAE/D,iBAAiB,MAAyC,QAAQ,MAAM/6B,MAAMoH,EAAE,MAAO,CAAC,MAAM43B,GAAG0X,GAAE/uC,EAAEA,EAAEkhB,OAAOmW,EAAE,CAAa,GAAG,QAAfv3B,EAAEE,EAAEyhB,SAAoB,CAAC3hB,EAAEohB,OAAOlhB,EAAEkhB,OAAO2tB,GAAE/uC,EAAE,KAAK,CAAC+uC,GAAE7uC,EAAEkhB,MAAM,CAAC5hB,EAAE2vC,GAAGA,IAAG,CAAW,CAwCldmF,CAAGt0C,EAAEpG,GAAG22C,GAAG32C,EAAEoG,GAAGmzB,GAAGwF,IAAIvR,KAAKsR,GAAGC,GAAGD,GAAG,KAAK14B,EAAEW,QAAQ/G,EAAEi3C,GAAGj3C,EAAEoG,EAAEI,GAAGgiB,KAAKxb,GAAEvG,EAAEskB,GAAE1kB,EAAEsxC,GAAGjqB,WAAWvoB,CAAC,MAAMiB,EAAEW,QAAQ/G,EAAsF,GAApFq4C,KAAKA,IAAG,EAAGC,GAAGlyC,EAAEmyC,GAAG/xC,GAAGrB,EAAEiB,EAAE+jB,aAAa,IAAIhlB,IAAImrC,GAAG,MAhOmJ,SAAYlqC,GAAG,GAAGqjB,IAAI,oBAAoBA,GAAGkxB,kBAAkB,IAAIlxB,GAAGkxB,kBAAkBnxB,GAAGpjB,OAAE,EAAO,OAAuB,IAAhBA,EAAEW,QAAQ2M,OAAW,CAAC,MAAMpN,GAAG,CAAC,CAgOxRs0C,CAAG56C,EAAEmmB,WAAa0yB,GAAGzyC,EAAEsiB,MAAQ,OAAOpiB,EAAE,IAAIC,EAAEH,EAAEy0C,mBAAmB76C,EAAE,EAAEA,EAAEsG,EAAExD,OAAO9C,IAAIwG,EAAEF,EAAEtG,GAAGuG,EAAEC,EAAE6X,MAAM,CAACkyB,eAAe/pC,EAAE4V,MAAMpY,OAAOwC,EAAExC,SAAS,GAAGisC,GAAG,MAAMA,IAAG,EAAG7pC,EAAE8pC,GAAGA,GAAG,KAAK9pC,EAAE,KAAQ,EAAHmyC,KAAO,IAAInyC,EAAE+J,KAAKopC,KAAKp0C,EAAEiB,EAAE+jB,aAAa,KAAO,EAAFhlB,GAAKiB,IAAIqyC,GAAGD,MAAMA,GAAG,EAAEC,GAAGryC,GAAGoyC,GAAG,EAAEvW,IAAgB,CAFxF6Y,CAAG10C,EAAEE,EAAEtG,EAAEuG,EAAE,CAAC,QAAQoxC,GAAGjqB,WAAWlnB,EAAEukB,GAAExkB,CAAC,CAAC,OAAO,IAAI,CAGhc,SAASgzC,KAAK,GAAG,OAAOjB,GAAG,CAAC,IAAIlyC,EAAE4kB,GAAGutB,IAAIjyC,EAAEqxC,GAAGjqB,WAAW1tB,EAAE+qB,GAAE,IAAmC,GAA/B4sB,GAAGjqB,WAAW,KAAK3C,GAAE,GAAG3kB,EAAE,GAAGA,EAAK,OAAOkyC,GAAG,IAAI/xC,GAAE,MAAO,CAAmB,GAAlBH,EAAEkyC,GAAGA,GAAG,KAAKC,GAAG,EAAK,KAAO,EAAFvrC,IAAK,MAAMrO,MAAMoH,EAAE,MAAM,IAAIS,EAAEwG,GAAO,IAALA,IAAG,EAAMmoC,GAAE/uC,EAAEW,QAAQ,OAAOouC,IAAG,CAAC,IAAIhwC,EAAEgwC,GAAE9uC,EAAElB,EAAE2iB,MAAM,GAAG,KAAa,GAARqtB,GAAEzhC,OAAU,CAAC,IAAIjN,EAAEtB,EAAEm+B,UAAU,GAAG,OAAO78B,EAAE,CAAC,IAAI,IAAIrB,EAAE,EAAEA,EAAEqB,EAAE3D,OAAOsC,IAAI,CAAC,IAAIG,EAAEkB,EAAErB,GAAG,IAAI+vC,GAAE5vC,EAAE,OAAO4vC,IAAG,CAAC,IAAI3vC,EAAE2vC,GAAE,OAAO3vC,EAAE2K,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAGqlC,GAAG,EAAEhwC,EAAEL,GAAG,IAAIgB,EAAEX,EAAEsiB,MAAM,GAAG,OAAO3hB,EAAEA,EAAEqhB,OAAOhiB,EAAE2vC,GAAEhvC,OAAO,KAAK,OAAOgvC,IAAG,CAAK,IAAIlQ,GAARz/B,EAAE2vC,IAAUptB,QAAQ7W,EAAE1L,EAAEgiB,OAAa,GAANmuB,GAAGnwC,GAAMA,IACnfD,EAAE,CAAC4vC,GAAE,KAAK,KAAK,CAAC,GAAG,OAAOlQ,EAAE,CAACA,EAAEzd,OAAOtW,EAAEikC,GAAElQ,EAAE,KAAK,CAACkQ,GAAEjkC,CAAC,CAAC,CAAC,CAAC,IAAItL,EAAET,EAAEoiB,UAAU,GAAG,OAAO3hB,EAAE,CAAC,IAAI4M,EAAE5M,EAAEkiB,MAAM,GAAG,OAAOtV,EAAE,CAAC5M,EAAEkiB,MAAM,KAAK,EAAE,CAAC,IAAI0V,EAAEhrB,EAAEuV,QAAQvV,EAAEuV,QAAQ,KAAKvV,EAAEgrB,CAAC,OAAO,OAAOhrB,EAAE,CAAC,CAAC2iC,GAAEhwC,CAAC,CAAC,CAAC,GAAG,KAAoB,KAAfA,EAAEouC,eAAoB,OAAOltC,EAAEA,EAAEmhB,OAAOriB,EAAEgwC,GAAE9uC,OAAOC,EAAE,KAAK,OAAO6uC,IAAG,CAAK,GAAG,KAAa,MAApBhwC,EAAEgwC,IAAYzhC,OAAY,OAAOvO,EAAEgL,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAGqlC,GAAG,EAAErwC,EAAEA,EAAEqiB,QAAQ,IAAI1c,EAAE3F,EAAE4iB,QAAQ,GAAG,OAAOjd,EAAE,CAACA,EAAE0c,OAAOriB,EAAEqiB,OAAO2tB,GAAErqC,EAAE,MAAMxE,CAAC,CAAC6uC,GAAEhwC,EAAEqiB,MAAM,CAAC,CAAC,IAAIkW,EAAEt3B,EAAEW,QAAQ,IAAIouC,GAAEzX,EAAE,OAAOyX,IAAG,CAAK,IAAI1X,GAARp3B,EAAE8uC,IAAUrtB,MAAM,GAAG,KAAoB,KAAfzhB,EAAEktC,eAAoB,OAClf9V,EAAEA,EAAEjW,OAAOnhB,EAAE8uC,GAAE1X,OAAOn3B,EAAE,IAAID,EAAEq3B,EAAE,OAAOyX,IAAG,CAAK,GAAG,KAAa,MAApB1uC,EAAE0uC,IAAYzhC,OAAY,IAAI,OAAOjN,EAAE0J,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAGslC,GAAG,EAAEhvC,GAAG,CAAC,MAAMw3B,GAAIoX,GAAE5uC,EAAEA,EAAE+gB,OAAOyW,EAAG,CAAC,GAAGx3B,IAAIJ,EAAE,CAAC8uC,GAAE,KAAK,MAAM7uC,CAAC,CAAC,IAAIq3B,EAAEl3B,EAAEshB,QAAQ,GAAG,OAAO4V,EAAE,CAACA,EAAEnW,OAAO/gB,EAAE+gB,OAAO2tB,GAAExX,EAAE,MAAMr3B,CAAC,CAAC6uC,GAAE1uC,EAAE+gB,MAAM,CAAC,CAAU,GAATxa,GAAExG,EAAEy7B,KAAQxY,IAAI,oBAAoBA,GAAGsxB,sBAAsB,IAAItxB,GAAGsxB,sBAAsBvxB,GAAGpjB,EAAE,CAAC,MAAM63B,GAAI,CAAC13B,GAAE,CAAE,CAAC,OAAOA,CAAC,CAAC,QAAQwkB,GAAE/qB,EAAE23C,GAAGjqB,WAAWpnB,CAAC,CAAC,CAAC,OAAM,CAAE,CAAC,SAAS00C,GAAG50C,EAAEE,EAAEtG,GAAyBoG,EAAEohC,GAAGphC,EAAjBE,EAAE0pC,GAAG5pC,EAAfE,EAAEqpC,GAAG3vC,EAAEsG,GAAY,GAAY,GAAGA,EAAE6G,KAAI,OAAO/G,IAAIwkB,GAAGxkB,EAAE,EAAEE,GAAGuyC,GAAGzyC,EAAEE,GAAG,CACze,SAAS+uC,GAAEjvC,EAAEE,EAAEtG,GAAG,GAAG,IAAIoG,EAAE+J,IAAI6qC,GAAG50C,EAAEA,EAAEpG,QAAQ,KAAK,OAAOsG,GAAG,CAAC,GAAG,IAAIA,EAAE6J,IAAI,CAAC6qC,GAAG10C,EAAEF,EAAEpG,GAAG,KAAK,CAAM,GAAG,IAAIsG,EAAE6J,IAAI,CAAC,IAAI5J,EAAED,EAAE6f,UAAU,GAAG,oBAAoB7f,EAAE5H,KAAK0xC,0BAA0B,oBAAoB7pC,EAAE8pC,oBAAoB,OAAOC,KAAKA,GAAG36B,IAAIpP,IAAI,CAAuBD,EAAEkhC,GAAGlhC,EAAjBF,EAAE+pC,GAAG7pC,EAAfF,EAAEupC,GAAG3vC,EAAEoG,GAAY,GAAY,GAAGA,EAAE+G,KAAI,OAAO7G,IAAIskB,GAAGtkB,EAAE,EAAEF,GAAGyyC,GAAGvyC,EAAEF,IAAI,KAAK,CAAC,CAACE,EAAEA,EAAEkhB,MAAM,CAAC,CACnV,SAASkpB,GAAGtqC,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEH,EAAEqqC,UAAU,OAAOlqC,GAAGA,EAAE0lB,OAAO3lB,GAAGA,EAAE6G,KAAI/G,EAAEikB,aAAajkB,EAAEgkB,eAAepqB,EAAEorC,KAAIhlC,IAAIyxC,GAAE73C,KAAKA,IAAI,IAAIkM,IAAG,IAAIA,KAAM,UAAF2rC,MAAeA,IAAG,IAAInvB,KAAIouB,GAAG4C,GAAGtzC,EAAE,GAAG4xC,IAAIh4C,GAAG64C,GAAGzyC,EAAEE,EAAE,CAAC,SAAS20C,GAAG70C,EAAEE,GAAG,IAAIA,IAAI,KAAY,EAAPF,EAAEw9B,MAAQt9B,EAAE,GAAGA,EAAE0jB,GAAU,KAAQ,WAAfA,KAAK,MAAuBA,GAAG,WAAW,IAAIhqB,EAAEmN,KAAc,QAAV/G,EAAEqgC,GAAGrgC,EAAEE,MAAcskB,GAAGxkB,EAAEE,EAAEtG,GAAG64C,GAAGzyC,EAAEpG,GAAG,CAAC,SAASozC,GAAGhtC,GAAG,IAAIE,EAAEF,EAAEshB,cAAc1nB,EAAE,EAAE,OAAOsG,IAAItG,EAAEsG,EAAEo9B,WAAWuX,GAAG70C,EAAEpG,EAAE,CACjZ,SAASy2C,GAAGrwC,EAAEE,GAAG,IAAItG,EAAE,EAAE,OAAOoG,EAAE+J,KAAK,KAAK,GAAG,IAAI5J,EAAEH,EAAE+f,UAAc3f,EAAEJ,EAAEshB,cAAc,OAAOlhB,IAAIxG,EAAEwG,EAAEk9B,WAAW,MAAM,KAAK,GAAGn9B,EAAEH,EAAE+f,UAAU,MAAM,QAAQ,MAAMxnB,MAAMoH,EAAE,MAAO,OAAOQ,GAAGA,EAAE0lB,OAAO3lB,GAAG20C,GAAG70C,EAAEpG,EAAE,CAQqK,SAASq5C,GAAGjzC,EAAEE,GAAG,OAAO4hB,GAAG9hB,EAAEE,EAAE,CACjZ,SAAS40C,GAAG90C,EAAEE,EAAEtG,EAAEuG,GAAGoI,KAAKwB,IAAI/J,EAAEuI,KAAKrP,IAAIU,EAAE2O,KAAKoZ,QAAQpZ,KAAKmZ,MAAMnZ,KAAK6Y,OAAO7Y,KAAKwX,UAAUxX,KAAKjQ,KAAKiQ,KAAK00B,YAAY,KAAK10B,KAAKyE,MAAM,EAAEzE,KAAK3I,IAAI,KAAK2I,KAAK60B,aAAal9B,EAAEqI,KAAKm3B,aAAan3B,KAAK+Y,cAAc/Y,KAAKi4B,YAAYj4B,KAAKq1B,cAAc,KAAKr1B,KAAKi1B,KAAKr9B,EAAEoI,KAAK4kC,aAAa5kC,KAAK+E,MAAM,EAAE/E,KAAK20B,UAAU,KAAK30B,KAAKi3B,WAAWj3B,KAAKq3B,MAAM,EAAEr3B,KAAK4Y,UAAU,IAAI,CAAC,SAAS6b,GAAGh9B,EAAEE,EAAEtG,EAAEuG,GAAG,OAAO,IAAI20C,GAAG90C,EAAEE,EAAEtG,EAAEuG,EAAE,CAAC,SAAS2qC,GAAG9qC,GAAiB,UAAdA,EAAEA,EAAEV,aAAuBU,EAAE+0C,iBAAiB,CAEpd,SAASxW,GAAGv+B,EAAEE,GAAG,IAAItG,EAAEoG,EAAEmhB,UACuB,OADb,OAAOvnB,IAAGA,EAAEojC,GAAGh9B,EAAE+J,IAAI7J,EAAEF,EAAE9G,IAAI8G,EAAEw9B,OAAQP,YAAYj9B,EAAEi9B,YAAYrjC,EAAEtB,KAAK0H,EAAE1H,KAAKsB,EAAEmmB,UAAU/f,EAAE+f,UAAUnmB,EAAEunB,UAAUnhB,EAAEA,EAAEmhB,UAAUvnB,IAAIA,EAAEwjC,aAAal9B,EAAEtG,EAAEtB,KAAK0H,EAAE1H,KAAKsB,EAAE0T,MAAM,EAAE1T,EAAEuzC,aAAa,EAAEvzC,EAAEsjC,UAAU,MAAMtjC,EAAE0T,MAAc,SAARtN,EAAEsN,MAAe1T,EAAE4lC,WAAWx/B,EAAEw/B,WAAW5lC,EAAEgmC,MAAM5/B,EAAE4/B,MAAMhmC,EAAE8nB,MAAM1hB,EAAE0hB,MAAM9nB,EAAEgkC,cAAc59B,EAAE49B,cAAchkC,EAAE0nB,cAActhB,EAAEshB,cAAc1nB,EAAE4mC,YAAYxgC,EAAEwgC,YAAYtgC,EAAEF,EAAE0/B,aAAa9lC,EAAE8lC,aAAa,OAAOx/B,EAAE,KAAK,CAAC0/B,MAAM1/B,EAAE0/B,MAAMD,aAAaz/B,EAAEy/B,cAC/e/lC,EAAE+nB,QAAQ3hB,EAAE2hB,QAAQ/nB,EAAEoT,MAAMhN,EAAEgN,MAAMpT,EAAEgG,IAAII,EAAEJ,IAAWhG,CAAC,CACxD,SAAS6kC,GAAGz+B,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,GAAG,IAAIkB,EAAE,EAAM,GAAJE,EAAEH,EAAK,oBAAoBA,EAAE8qC,GAAG9qC,KAAKC,EAAE,QAAQ,GAAG,kBAAkBD,EAAEC,EAAE,OAAOD,EAAE,OAAOA,GAAG,KAAK8U,EAAG,OAAO8pB,GAAGhlC,EAAE4f,SAASpZ,EAAErB,EAAEmB,GAAG,KAAK6U,EAAG9U,EAAE,EAAEG,GAAG,EAAE,MAAM,KAAK4U,EAAG,OAAOhV,EAAEg9B,GAAG,GAAGpjC,EAAEsG,EAAI,EAAFE,IAAO68B,YAAYjoB,EAAGhV,EAAE4/B,MAAM7gC,EAAEiB,EAAE,KAAKoV,EAAG,OAAOpV,EAAEg9B,GAAG,GAAGpjC,EAAEsG,EAAEE,IAAK68B,YAAY7nB,EAAGpV,EAAE4/B,MAAM7gC,EAAEiB,EAAE,KAAKqV,EAAG,OAAOrV,EAAEg9B,GAAG,GAAGpjC,EAAEsG,EAAEE,IAAK68B,YAAY5nB,EAAGrV,EAAE4/B,MAAM7gC,EAAEiB,EAAE,KAAKwV,EAAG,OAAOk3B,GAAG9yC,EAAEwG,EAAErB,EAAEmB,GAAG,QAAQ,GAAG,kBAAkBF,GAAG,OAAOA,EAAE,OAAOA,EAAEQ,UAAU,KAAKyU,EAAGhV,EAAE,GAAG,MAAMD,EAAE,KAAKkV,EAAGjV,EAAE,EAAE,MAAMD,EAAE,KAAKmV,EAAGlV,EAAE,GACpf,MAAMD,EAAE,KAAKsV,EAAGrV,EAAE,GAAG,MAAMD,EAAE,KAAKuV,EAAGtV,EAAE,GAAGE,EAAE,KAAK,MAAMH,EAAE,MAAMzH,MAAMoH,EAAE,IAAI,MAAMK,EAAEA,SAASA,EAAE,KAAuD,OAAjDE,EAAE88B,GAAG/8B,EAAErG,EAAEsG,EAAEE,IAAK68B,YAAYj9B,EAAEE,EAAE5H,KAAK6H,EAAED,EAAE0/B,MAAM7gC,EAASmB,CAAC,CAAC,SAAS0+B,GAAG5+B,EAAEE,EAAEtG,EAAEuG,GAA2B,OAAxBH,EAAEg9B,GAAG,EAAEh9B,EAAEG,EAAED,IAAK0/B,MAAMhmC,EAASoG,CAAC,CAAC,SAAS0sC,GAAG1sC,EAAEE,EAAEtG,EAAEuG,GAAuE,OAApEH,EAAEg9B,GAAG,GAAGh9B,EAAEG,EAAED,IAAK+8B,YAAYznB,EAAGxV,EAAE4/B,MAAMhmC,EAAEoG,EAAE+f,UAAU,CAAC0wB,UAAS,GAAWzwC,CAAC,CAAC,SAASw+B,GAAGx+B,EAAEE,EAAEtG,GAA8B,OAA3BoG,EAAEg9B,GAAG,EAAEh9B,EAAE,KAAKE,IAAK0/B,MAAMhmC,EAASoG,CAAC,CAC5W,SAAS2+B,GAAG3+B,EAAEE,EAAEtG,GAA8J,OAA3JsG,EAAE88B,GAAG,EAAE,OAAOh9B,EAAEwZ,SAASxZ,EAAEwZ,SAAS,GAAGxZ,EAAE9G,IAAIgH,IAAK0/B,MAAMhmC,EAAEsG,EAAE6f,UAAU,CAAC0G,cAAczmB,EAAEymB,cAAcuuB,gBAAgB,KAAKtW,eAAe1+B,EAAE0+B,gBAAuBx+B,CAAC,CACtL,SAAS+0C,GAAGj1C,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAGmI,KAAKwB,IAAI7J,EAAEqI,KAAKke,cAAczmB,EAAEuI,KAAKorC,aAAaprC,KAAK8hC,UAAU9hC,KAAK5H,QAAQ4H,KAAKysC,gBAAgB,KAAKzsC,KAAKurC,eAAe,EAAEvrC,KAAKmqC,aAAanqC,KAAKyjC,eAAezjC,KAAKw3B,QAAQ,KAAKx3B,KAAKuqC,iBAAiB,EAAEvqC,KAAKkc,WAAWF,GAAG,GAAGhc,KAAKoqC,gBAAgBpuB,IAAI,GAAGhc,KAAK2b,eAAe3b,KAAKqrC,cAAcrrC,KAAK6rC,iBAAiB7rC,KAAKqqC,aAAarqC,KAAK0b,YAAY1b,KAAKyb,eAAezb,KAAKwb,aAAa,EAAExb,KAAK4b,cAAcI,GAAG,GAAGhc,KAAKw/B,iBAAiB5nC,EAAEoI,KAAKksC,mBAAmBr0C,EAAEmI,KAAK2sC,gCAC/e,IAAI,CAAC,SAASC,GAAGn1C,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,EAAEkB,EAAEI,EAAErB,GAAgN,OAA7MgB,EAAE,IAAIi1C,GAAGj1C,EAAEE,EAAEtG,EAAEyG,EAAErB,GAAG,IAAIkB,GAAGA,EAAE,GAAE,IAAKnB,IAAImB,GAAG,IAAIA,EAAE,EAAEnB,EAAEi+B,GAAG,EAAE,KAAK,KAAK98B,GAAGF,EAAEW,QAAQ5B,EAAEA,EAAEghB,UAAU/f,EAAEjB,EAAEuiB,cAAc,CAACiT,QAAQp0B,EAAEqmB,aAAa5sB,EAAEw7C,MAAM,KAAK/J,YAAY,KAAKgK,0BAA0B,MAAM9U,GAAGxhC,GAAUiB,CAAC,CACzP,SAASs1C,GAAGt1C,GAAG,IAAIA,EAAE,OAAOw6B,GAAuBx6B,EAAE,CAAC,GAAGkhB,GAA1BlhB,EAAEA,EAAEooC,mBAA8BpoC,GAAG,IAAIA,EAAE+J,IAAI,MAAMxR,MAAMoH,EAAE,MAAM,IAAIO,EAAEF,EAAE,EAAE,CAAC,OAAOE,EAAE6J,KAAK,KAAK,EAAE7J,EAAEA,EAAE6f,UAAUggB,QAAQ,MAAM//B,EAAE,KAAK,EAAE,GAAGg7B,GAAG96B,EAAE5H,MAAM,CAAC4H,EAAEA,EAAE6f,UAAUwb,0CAA0C,MAAMv7B,CAAC,EAAEE,EAAEA,EAAEkhB,MAAM,OAAO,OAAOlhB,GAAG,MAAM3H,MAAMoH,EAAE,KAAM,CAAC,GAAG,IAAIK,EAAE+J,IAAI,CAAC,IAAInQ,EAAEoG,EAAE1H,KAAK,GAAG0iC,GAAGphC,GAAG,OAAOwhC,GAAGp7B,EAAEpG,EAAEsG,EAAE,CAAC,OAAOA,CAAC,CACpW,SAASq1C,GAAGv1C,EAAEE,EAAEtG,EAAEuG,EAAEC,EAAErB,EAAEkB,EAAEI,EAAErB,GAAwK,OAArKgB,EAAEm1C,GAAGv7C,EAAEuG,GAAE,EAAGH,EAAEI,EAAErB,EAAEkB,EAAEI,EAAErB,IAAK+gC,QAAQuV,GAAG,MAAM17C,EAAEoG,EAAEW,SAAsB5B,EAAEiiC,GAAhB7gC,EAAE4G,KAAI3G,EAAEqmC,GAAG7sC,KAAeiK,cAAS,IAAS3D,GAAG,OAAOA,EAAEA,EAAE,KAAKkhC,GAAGxnC,EAAEmF,EAAEqB,GAAGJ,EAAEW,QAAQi/B,MAAMx/B,EAAEokB,GAAGxkB,EAAEI,EAAED,GAAGsyC,GAAGzyC,EAAEG,GAAUH,CAAC,CAAC,SAASw1C,GAAGx1C,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIC,EAAEF,EAAES,QAAQ5B,EAAEgI,KAAI9G,EAAEwmC,GAAGrmC,GAAsL,OAAnLxG,EAAE07C,GAAG17C,GAAG,OAAOsG,EAAE6/B,QAAQ7/B,EAAE6/B,QAAQnmC,EAAEsG,EAAE8rC,eAAepyC,GAAEsG,EAAE8gC,GAAGjiC,EAAEkB,IAAKkhC,QAAQ,CAAC5M,QAAQv0B,GAAuB,QAApBG,OAAE,IAASA,EAAE,KAAKA,KAAaD,EAAE2D,SAAS1D,GAAe,QAAZH,EAAEohC,GAAGhhC,EAAEF,EAAED,MAAcqlC,GAAGtlC,EAAEI,EAAEH,EAAElB,GAAGsiC,GAAGrhC,EAAEI,EAAEH,IAAWA,CAAC,CAC3b,SAASw1C,GAAGz1C,GAAe,OAAZA,EAAEA,EAAEW,SAAc+gB,OAAyB1hB,EAAE0hB,MAAM3X,IAAoD/J,EAAE0hB,MAAM3B,WAAhF,IAA0F,CAAC,SAAS21B,GAAG11C,EAAEE,GAAqB,GAAG,QAArBF,EAAEA,EAAEshB,gBAA2B,OAAOthB,EAAEuhB,WAAW,CAAC,IAAI3nB,EAAEoG,EAAEs9B,UAAUt9B,EAAEs9B,UAAU,IAAI1jC,GAAGA,EAAEsG,EAAEtG,EAAEsG,CAAC,CAAC,CAAC,SAASy1C,GAAG31C,EAAEE,GAAGw1C,GAAG11C,EAAEE,IAAIF,EAAEA,EAAEmhB,YAAYu0B,GAAG11C,EAAEE,EAAE,CAnB7SixC,GAAG,SAASnxC,EAAEE,EAAEtG,GAAG,GAAG,OAAOoG,EAAE,GAAGA,EAAE49B,gBAAgB19B,EAAEk9B,cAAc1C,GAAG/5B,QAAQk/B,IAAG,MAAO,CAAC,GAAG,KAAK7/B,EAAE4/B,MAAMhmC,IAAI,KAAa,IAARsG,EAAEoN,OAAW,OAAOuyB,IAAG,EAzE1I,SAAY7/B,EAAEE,EAAEtG,GAAG,OAAOsG,EAAE6J,KAAK,KAAK,EAAEgiC,GAAG7rC,GAAG49B,KAAK,MAAM,KAAK,EAAEoE,GAAGhiC,GAAG,MAAM,KAAK,EAAE86B,GAAG96B,EAAE5H,OAAOgjC,GAAGp7B,GAAG,MAAM,KAAK,EAAE6hC,GAAG7hC,EAAEA,EAAE6f,UAAU0G,eAAe,MAAM,KAAK,GAAG,IAAItmB,EAAED,EAAE5H,KAAKwe,SAAS1W,EAAEF,EAAE09B,cAAc3lB,MAAMsiB,GAAE0E,GAAG9+B,EAAEm/B,eAAen/B,EAAEm/B,cAAcl/B,EAAE,MAAM,KAAK,GAAqB,GAAG,QAArBD,EAAED,EAAEohB,eAA2B,OAAG,OAAOnhB,EAAEohB,YAAkBgZ,GAAE10B,GAAY,EAAVA,GAAElF,SAAWT,EAAEoN,OAAO,IAAI,MAAQ,KAAK1T,EAAEsG,EAAEwhB,MAAM8d,YAAmBgN,GAAGxsC,EAAEE,EAAEtG,IAAG2gC,GAAE10B,GAAY,EAAVA,GAAElF,SAA8B,QAAnBX,EAAE4qC,GAAG5qC,EAAEE,EAAEtG,IAAmBoG,EAAE2hB,QAAQ,MAAK4Y,GAAE10B,GAAY,EAAVA,GAAElF,SAAW,MAAM,KAAK,GAC7d,GADgeR,EAAE,KAAKvG,EACrfsG,EAAEs/B,YAAe,KAAa,IAARx/B,EAAEsN,OAAW,CAAC,GAAGnN,EAAE,OAAOwtC,GAAG3tC,EAAEE,EAAEtG,GAAGsG,EAAEoN,OAAO,GAAG,CAA6F,GAA1E,QAAlBlN,EAAEF,EAAEohB,iBAAyBlhB,EAAEmtC,UAAU,KAAKntC,EAAEqtC,KAAK,KAAKrtC,EAAE8kC,WAAW,MAAM3K,GAAE10B,GAAEA,GAAElF,SAAYR,EAAE,MAAW,OAAO,KAAK,KAAK,GAAG,KAAK,GAAG,OAAOD,EAAE0/B,MAAM,EAAEsL,GAAGlrC,EAAEE,EAAEtG,GAAG,OAAOgxC,GAAG5qC,EAAEE,EAAEtG,EAAE,CAwE7Gg8C,CAAG51C,EAAEE,EAAEtG,GAAGimC,GAAG,KAAa,OAAR7/B,EAAEsN,MAAmB,MAAMuyB,IAAG,EAAGhD,IAAG,KAAa,QAAR38B,EAAEoN,QAAgBkvB,GAAGt8B,EAAE+7B,GAAG/7B,EAAE8M,OAAiB,OAAV9M,EAAE0/B,MAAM,EAAS1/B,EAAE6J,KAAK,KAAK,EAAE,IAAI5J,EAAED,EAAE5H,KAAKozC,GAAG1rC,EAAEE,GAAGF,EAAEE,EAAEk9B,aAAa,IAAIh9B,EAAEw6B,GAAG16B,EAAEu6B,GAAE95B,SAAS8+B,GAAGv/B,EAAEtG,GAAGwG,EAAEkjC,GAAG,KAAKpjC,EAAEC,EAAEH,EAAEI,EAAExG,GAAG,IAAImF,EAAE4kC,KACvI,OAD4IzjC,EAAEoN,OAAO,EAAE,kBAAkBlN,GAAG,OAAOA,GAAG,oBAAoBA,EAAEwW,aAAQ,IAASxW,EAAEI,UAAUN,EAAE6J,IAAI,EAAE7J,EAAEohB,cAAc,KAAKphB,EAAEsgC,YAC1e,KAAKxF,GAAG76B,IAAIpB,GAAE,EAAGu8B,GAAGp7B,IAAInB,GAAE,EAAGmB,EAAEohB,cAAc,OAAOlhB,EAAEzG,YAAO,IAASyG,EAAEzG,MAAMyG,EAAEzG,MAAM,KAAK4mC,GAAGrgC,GAAGE,EAAEyoC,QAAQX,GAAGhoC,EAAE6f,UAAU3f,EAAEA,EAAEgoC,gBAAgBloC,EAAE+oC,GAAG/oC,EAAEC,EAAEH,EAAEpG,GAAGsG,EAAE4rC,GAAG,KAAK5rC,EAAEC,GAAE,EAAGpB,EAAEnF,KAAKsG,EAAE6J,IAAI,EAAE8yB,IAAG99B,GAAG09B,GAAGv8B,GAAGwqC,GAAG,KAAKxqC,EAAEE,EAAExG,GAAGsG,EAAEA,EAAEwhB,OAAcxhB,EAAE,KAAK,GAAGC,EAAED,EAAE+8B,YAAYj9B,EAAE,CAAqF,OAApF0rC,GAAG1rC,EAAEE,GAAGF,EAAEE,EAAEk9B,aAAuBj9B,GAAVC,EAAED,EAAE6W,OAAU7W,EAAE4W,UAAU7W,EAAE5H,KAAK6H,EAAEC,EAAEF,EAAE6J,IAQtU,SAAY/J,GAAG,GAAG,oBAAoBA,EAAE,OAAO8qC,GAAG9qC,GAAG,EAAE,EAAE,QAAG,IAASA,GAAG,OAAOA,EAAE,CAAc,IAAbA,EAAEA,EAAEQ,YAAgB2U,EAAG,OAAO,GAAG,GAAGnV,IAAIsV,EAAG,OAAO,EAAE,CAAC,OAAO,CAAC,CAR2LugC,CAAG11C,GAAGH,EAAEgoC,GAAG7nC,EAAEH,GAAUI,GAAG,KAAK,EAAEF,EAAE+qC,GAAG,KAAK/qC,EAAEC,EAAEH,EAAEpG,GAAG,MAAMoG,EAAE,KAAK,EAAEE,EAAEurC,GAAG,KAAKvrC,EAAEC,EAAEH,EAAEpG,GAAG,MAAMoG,EAAE,KAAK,GAAGE,EAAEyqC,GAAG,KAAKzqC,EAAEC,EAAEH,EAAEpG,GAAG,MAAMoG,EAAE,KAAK,GAAGE,EAAE2qC,GAAG,KAAK3qC,EAAEC,EAAE6nC,GAAG7nC,EAAE7H,KAAK0H,GAAGpG,GAAG,MAAMoG,EAAE,MAAMzH,MAAMoH,EAAE,IACvgBQ,EAAE,IAAK,CAAC,OAAOD,EAAE,KAAK,EAAE,OAAOC,EAAED,EAAE5H,KAAK8H,EAAEF,EAAEk9B,aAA2C6N,GAAGjrC,EAAEE,EAAEC,EAArCC,EAAEF,EAAE+8B,cAAc98B,EAAEC,EAAE4nC,GAAG7nC,EAAEC,GAAcxG,GAAG,KAAK,EAAE,OAAOuG,EAAED,EAAE5H,KAAK8H,EAAEF,EAAEk9B,aAA2CqO,GAAGzrC,EAAEE,EAAEC,EAArCC,EAAEF,EAAE+8B,cAAc98B,EAAEC,EAAE4nC,GAAG7nC,EAAEC,GAAcxG,GAAG,KAAK,EAAEoG,EAAE,CAAO,GAAN+rC,GAAG7rC,GAAM,OAAOF,EAAE,MAAMzH,MAAMoH,EAAE,MAAMQ,EAAED,EAAEk9B,aAA+Bh9B,GAAlBrB,EAAEmB,EAAEohB,eAAkBiT,QAAQwM,GAAG/gC,EAAEE,GAAGqhC,GAAGrhC,EAAEC,EAAE,KAAKvG,GAAG,IAAIqG,EAAEC,EAAEohB,cAA0B,GAAZnhB,EAAEF,EAAEs0B,QAAWx1B,EAAEynB,aAAY,CAAC,GAAGznB,EAAE,CAACw1B,QAAQp0B,EAAEqmB,cAAa,EAAG4uB,MAAMn1C,EAAEm1C,MAAMC,0BAA0Bp1C,EAAEo1C,0BAA0BhK,YAAYprC,EAAEorC,aAAanrC,EAAEsgC,YAAYC,UAChf1hC,EAAEmB,EAAEohB,cAAcviB,EAAU,IAARmB,EAAEoN,MAAU,CAAuBpN,EAAE+rC,GAAGjsC,EAAEE,EAAEC,EAAEvG,EAAjCwG,EAAEmpC,GAAGhxC,MAAMoH,EAAE,MAAMO,IAAmB,MAAMF,CAAC,CAAM,GAAGG,IAAIC,EAAE,CAAuBF,EAAE+rC,GAAGjsC,EAAEE,EAAEC,EAAEvG,EAAjCwG,EAAEmpC,GAAGhxC,MAAMoH,EAAE,MAAMO,IAAmB,MAAMF,CAAC,CAAM,IAAI48B,GAAGjD,GAAGz5B,EAAE6f,UAAU0G,cAAcrM,YAAYuiB,GAAGz8B,EAAE28B,IAAE,EAAGC,GAAG,KAAKljC,EAAEolC,GAAG9+B,EAAE,KAAKC,EAAEvG,GAAGsG,EAAEwhB,MAAM9nB,EAAEA,GAAGA,EAAE0T,OAAe,EAAT1T,EAAE0T,MAAS,KAAK1T,EAAEA,EAAE+nB,OAAQ,KAAI,CAAM,GAALmc,KAAQ39B,IAAIC,EAAE,CAACF,EAAE0qC,GAAG5qC,EAAEE,EAAEtG,GAAG,MAAMoG,CAAC,CAAC0qC,GAAG1qC,EAAEE,EAAEC,EAAEvG,EAAE,CAACsG,EAAEA,EAAEwhB,KAAK,CAAC,OAAOxhB,EAAE,KAAK,EAAE,OAAOgiC,GAAGhiC,GAAG,OAAOF,GAAGy9B,GAAGv9B,GAAGC,EAAED,EAAE5H,KAAK8H,EAAEF,EAAEk9B,aAAar+B,EAAE,OAAOiB,EAAEA,EAAE49B,cAAc,KAAK39B,EAAEG,EAAEoZ,SAASof,GAAGz4B,EAAEC,GAAGH,EAAE,KAAK,OAAOlB,GAAG65B,GAAGz4B,EAAEpB,KAAKmB,EAAEoN,OAAO,IACnfk+B,GAAGxrC,EAAEE,GAAGwqC,GAAG1qC,EAAEE,EAAED,EAAErG,GAAGsG,EAAEwhB,MAAM,KAAK,EAAE,OAAO,OAAO1hB,GAAGy9B,GAAGv9B,GAAG,KAAK,KAAK,GAAG,OAAOssC,GAAGxsC,EAAEE,EAAEtG,GAAG,KAAK,EAAE,OAAOmoC,GAAG7hC,EAAEA,EAAE6f,UAAU0G,eAAetmB,EAAED,EAAEk9B,aAAa,OAAOp9B,EAAEE,EAAEwhB,MAAMqd,GAAG7+B,EAAE,KAAKC,EAAEvG,GAAG8wC,GAAG1qC,EAAEE,EAAEC,EAAEvG,GAAGsG,EAAEwhB,MAAM,KAAK,GAAG,OAAOvhB,EAAED,EAAE5H,KAAK8H,EAAEF,EAAEk9B,aAA2CuN,GAAG3qC,EAAEE,EAAEC,EAArCC,EAAEF,EAAE+8B,cAAc98B,EAAEC,EAAE4nC,GAAG7nC,EAAEC,GAAcxG,GAAG,KAAK,EAAE,OAAO8wC,GAAG1qC,EAAEE,EAAEA,EAAEk9B,aAAaxjC,GAAGsG,EAAEwhB,MAAM,KAAK,EAAmD,KAAK,GAAG,OAAOgpB,GAAG1qC,EAAEE,EAAEA,EAAEk9B,aAAa5jB,SAAS5f,GAAGsG,EAAEwhB,MAAM,KAAK,GAAG1hB,EAAE,CACxZ,GADyZG,EAAED,EAAE5H,KAAKwe,SAAS1W,EAAEF,EAAEk9B,aAAar+B,EAAEmB,EAAE09B,cAClf39B,EAAEG,EAAE6X,MAAMsiB,GAAE0E,GAAG9+B,EAAEm/B,eAAen/B,EAAEm/B,cAAcr/B,EAAK,OAAOlB,EAAE,GAAGqzB,GAAGrzB,EAAEkZ,MAAMhY,IAAI,GAAGlB,EAAEya,WAAWpZ,EAAEoZ,WAAWkhB,GAAG/5B,QAAQ,CAACT,EAAE0qC,GAAG5qC,EAAEE,EAAEtG,GAAG,MAAMoG,CAAC,OAAO,IAAc,QAAVjB,EAAEmB,EAAEwhB,SAAiB3iB,EAAEqiB,OAAOlhB,GAAG,OAAOnB,GAAG,CAAC,IAAIsB,EAAEtB,EAAE2gC,aAAa,GAAG,OAAOr/B,EAAE,CAACJ,EAAElB,EAAE2iB,MAAM,IAAI,IAAI1iB,EAAEqB,EAAEs/B,aAAa,OAAO3gC,GAAG,CAAC,GAAGA,EAAE+gC,UAAU5/B,EAAE,CAAC,GAAG,IAAIpB,EAAEgL,IAAI,EAAC/K,EAAEgiC,IAAI,EAAEpnC,GAAGA,IAAKmQ,IAAI,EAAE,IAAI5K,EAAEJ,EAAEyhC,YAAY,GAAG,OAAOrhC,EAAE,CAAY,IAAIC,GAAfD,EAAEA,EAAEyhC,QAAeC,QAAQ,OAAOzhC,EAAEJ,EAAEyE,KAAKzE,GAAGA,EAAEyE,KAAKrE,EAAEqE,KAAKrE,EAAEqE,KAAKzE,GAAGG,EAAE0hC,QAAQ7hC,CAAC,CAAC,CAACD,EAAE6gC,OAAOhmC,EAAgB,QAAdoF,EAAED,EAAEoiB,aAAqBniB,EAAE4gC,OAAOhmC,GAAG2lC,GAAGxgC,EAAEqiB,OAClfxnB,EAAEsG,GAAGG,EAAEu/B,OAAOhmC,EAAE,KAAK,CAACoF,EAAEA,EAAEyE,IAAI,CAAC,MAAM,GAAG,KAAK1E,EAAEgL,IAAI9J,EAAElB,EAAEzG,OAAO4H,EAAE5H,KAAK,KAAKyG,EAAE2iB,WAAW,GAAG,KAAK3iB,EAAEgL,IAAI,CAAY,GAAG,QAAd9J,EAAElB,EAAEqiB,QAAmB,MAAM7oB,MAAMoH,EAAE,MAAMM,EAAE2/B,OAAOhmC,EAAgB,QAAdyG,EAAEJ,EAAEkhB,aAAqB9gB,EAAEu/B,OAAOhmC,GAAG2lC,GAAGt/B,EAAErG,EAAEsG,GAAGD,EAAElB,EAAE4iB,OAAO,MAAM1hB,EAAElB,EAAE2iB,MAAM,GAAG,OAAOzhB,EAAEA,EAAEmhB,OAAOriB,OAAO,IAAIkB,EAAElB,EAAE,OAAOkB,GAAG,CAAC,GAAGA,IAAIC,EAAE,CAACD,EAAE,KAAK,KAAK,CAAa,GAAG,QAAflB,EAAEkB,EAAE0hB,SAAoB,CAAC5iB,EAAEqiB,OAAOnhB,EAAEmhB,OAAOnhB,EAAElB,EAAE,KAAK,CAACkB,EAAEA,EAAEmhB,MAAM,CAACriB,EAAEkB,CAAC,CAACyqC,GAAG1qC,EAAEE,EAAEE,EAAEoZ,SAAS5f,GAAGsG,EAAEA,EAAEwhB,KAAK,CAAC,OAAOxhB,EAAE,KAAK,EAAE,OAAOE,EAAEF,EAAE5H,KAAK6H,EAAED,EAAEk9B,aAAa5jB,SAASimB,GAAGv/B,EAAEtG,GAAWuG,EAAEA,EAAVC,EAAE0/B,GAAG1/B,IAAUF,EAAEoN,OAAO,EAAEo9B,GAAG1qC,EAAEE,EAAEC,EAAEvG,GACpfsG,EAAEwhB,MAAM,KAAK,GAAG,OAAgBthB,EAAE4nC,GAAX7nC,EAAED,EAAE5H,KAAY4H,EAAEk9B,cAA6ByN,GAAG7qC,EAAEE,EAAEC,EAAtBC,EAAE4nC,GAAG7nC,EAAE7H,KAAK8H,GAAcxG,GAAG,KAAK,GAAG,OAAOoxC,GAAGhrC,EAAEE,EAAEA,EAAE5H,KAAK4H,EAAEk9B,aAAaxjC,GAAG,KAAK,GAAG,OAAOuG,EAAED,EAAE5H,KAAK8H,EAAEF,EAAEk9B,aAAah9B,EAAEF,EAAE+8B,cAAc98B,EAAEC,EAAE4nC,GAAG7nC,EAAEC,GAAGsrC,GAAG1rC,EAAEE,GAAGA,EAAE6J,IAAI,EAAEixB,GAAG76B,IAAIH,GAAE,EAAGs7B,GAAGp7B,IAAIF,GAAE,EAAGy/B,GAAGv/B,EAAEtG,GAAG+uC,GAAGzoC,EAAEC,EAAEC,GAAG6oC,GAAG/oC,EAAEC,EAAEC,EAAExG,GAAGkyC,GAAG,KAAK5rC,EAAEC,GAAE,EAAGH,EAAEpG,GAAG,KAAK,GAAG,OAAO+zC,GAAG3tC,EAAEE,EAAEtG,GAAG,KAAK,GAAG,OAAOsxC,GAAGlrC,EAAEE,EAAEtG,GAAG,MAAMrB,MAAMoH,EAAE,IAAIO,EAAE6J,KAAM,EAYxC,IAAI+rC,GAAG,oBAAoBC,YAAYA,YAAY,SAAS/1C,GAAGyO,QAAQ7V,MAAMoH,EAAE,EAAE,SAASg2C,GAAGh2C,GAAGuI,KAAK0tC,cAAcj2C,CAAC,CACjI,SAASk2C,GAAGl2C,GAAGuI,KAAK0tC,cAAcj2C,CAAC,CAC5J,SAASm2C,GAAGn2C,GAAG,SAASA,GAAG,IAAIA,EAAE2a,UAAU,IAAI3a,EAAE2a,UAAU,KAAK3a,EAAE2a,SAAS,CAAC,SAASy7B,GAAGp2C,GAAG,SAASA,GAAG,IAAIA,EAAE2a,UAAU,IAAI3a,EAAE2a,UAAU,KAAK3a,EAAE2a,WAAW,IAAI3a,EAAE2a,UAAU,iCAAiC3a,EAAE4a,WAAW,CAAC,SAASy7B,KAAK,CAExa,SAASC,GAAGt2C,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,IAAIrB,EAAEnF,EAAEg2C,oBAAoB,GAAG7wC,EAAE,CAAC,IAAIkB,EAAElB,EAAE,GAAG,oBAAoBqB,EAAE,CAAC,IAAIC,EAAED,EAAEA,EAAE,WAAW,IAAIJ,EAAEy1C,GAAGx1C,GAAGI,EAAEC,KAAKN,EAAE,CAAC,CAACw1C,GAAGt1C,EAAED,EAAED,EAAEI,EAAE,MAAMH,EADxJ,SAAYD,EAAEE,EAAEtG,EAAEuG,EAAEC,GAAG,GAAGA,EAAE,CAAC,GAAG,oBAAoBD,EAAE,CAAC,IAAIpB,EAAEoB,EAAEA,EAAE,WAAW,IAAIH,EAAEy1C,GAAGx1C,GAAGlB,EAAEuB,KAAKN,EAAE,CAAC,CAAC,IAAIC,EAAEs1C,GAAGr1C,EAAEC,EAAEH,EAAE,EAAE,MAAK,EAAG,EAAG,GAAGq2C,IAAmF,OAA/Er2C,EAAE4vC,oBAAoB3vC,EAAED,EAAEy3B,IAAIx3B,EAAEU,QAAQq2B,GAAG,IAAIh3B,EAAE2a,SAAS3a,EAAEyf,WAAWzf,GAAGg0C,KAAY/zC,CAAC,CAAC,KAAKG,EAAEJ,EAAE0a,WAAW1a,EAAEqa,YAAYja,GAAG,GAAG,oBAAoBD,EAAE,CAAC,IAAIE,EAAEF,EAAEA,EAAE,WAAW,IAAIH,EAAEy1C,GAAGz2C,GAAGqB,EAAEC,KAAKN,EAAE,CAAC,CAAC,IAAIhB,EAAEm2C,GAAGn1C,EAAE,GAAE,EAAG,KAAK,GAAK,EAAG,EAAG,GAAGq2C,IAA0G,OAAtGr2C,EAAE4vC,oBAAoB5wC,EAAEgB,EAAEy3B,IAAIz4B,EAAE2B,QAAQq2B,GAAG,IAAIh3B,EAAE2a,SAAS3a,EAAEyf,WAAWzf,GAAGg0C,GAAG,WAAWwB,GAAGt1C,EAAElB,EAAEpF,EAAEuG,EAAE,GAAUnB,CAAC,CACpUu3C,CAAG38C,EAAEsG,EAAEF,EAAEI,EAAED,GAAG,OAAOs1C,GAAGx1C,EAAE,CAHpLi2C,GAAG52C,UAAUsX,OAAOo/B,GAAG12C,UAAUsX,OAAO,SAAS5W,GAAG,IAAIE,EAAEqI,KAAK0tC,cAAc,GAAG,OAAO/1C,EAAE,MAAM3H,MAAMoH,EAAE,MAAM61C,GAAGx1C,EAAEE,EAAE,KAAK,KAAK,EAAEg2C,GAAG52C,UAAUk3C,QAAQR,GAAG12C,UAAUk3C,QAAQ,WAAW,IAAIx2C,EAAEuI,KAAK0tC,cAAc,GAAG,OAAOj2C,EAAE,CAACuI,KAAK0tC,cAAc,KAAK,IAAI/1C,EAAEF,EAAEymB,cAAcutB,GAAG,WAAWwB,GAAG,KAAKx1C,EAAE,KAAK,KAAK,GAAGE,EAAEu3B,IAAI,IAAI,CAAC,EACzTye,GAAG52C,UAAUm3C,2BAA2B,SAASz2C,GAAG,GAAGA,EAAE,CAAC,IAAIE,EAAE8kB,KAAKhlB,EAAE,CAACimB,UAAU,KAAK3G,OAAOtf,EAAEumB,SAASrmB,GAAG,IAAI,IAAItG,EAAE,EAAEA,EAAE8rB,GAAGhpB,QAAQ,IAAIwD,GAAGA,EAAEwlB,GAAG9rB,GAAG2sB,SAAS3sB,KAAK8rB,GAAGgxB,OAAO98C,EAAE,EAAEoG,GAAG,IAAIpG,GAAGysB,GAAGrmB,EAAE,CAAC,EAEX6kB,GAAG,SAAS7kB,GAAG,OAAOA,EAAE+J,KAAK,KAAK,EAAE,IAAI7J,EAAEF,EAAE+f,UAAU,GAAG7f,EAAES,QAAQ2gB,cAAckF,aAAa,CAAC,IAAI5sB,EAAEiqB,GAAG3jB,EAAE6jB,cAAc,IAAInqB,IAAI8qB,GAAGxkB,EAAI,EAAFtG,GAAK64C,GAAGvyC,EAAEoiB,MAAK,KAAO,EAAF1b,MAAO4nC,GAAGlsB,KAAI,IAAIuZ,MAAM,CAAC,MAAM,KAAK,GAAGmY,GAAG,WAAW,IAAI9zC,EAAEmgC,GAAGrgC,EAAE,GAAG,GAAG,OAAOE,EAAE,CAAC,IAAItG,EAAEmN,KAAIu+B,GAAGplC,EAAEF,EAAE,EAAEpG,EAAE,CAAC,GAAG+7C,GAAG31C,EAAE,GAAG,EAC/b8kB,GAAG,SAAS9kB,GAAG,GAAG,KAAKA,EAAE+J,IAAI,CAAC,IAAI7J,EAAEmgC,GAAGrgC,EAAE,WAAW,GAAG,OAAOE,EAAaolC,GAAGplC,EAAEF,EAAE,UAAX+G,MAAwB4uC,GAAG31C,EAAE,UAAU,CAAC,EAAE+kB,GAAG,SAAS/kB,GAAG,GAAG,KAAKA,EAAE+J,IAAI,CAAC,IAAI7J,EAAEumC,GAAGzmC,GAAGpG,EAAEymC,GAAGrgC,EAAEE,GAAG,GAAG,OAAOtG,EAAa0rC,GAAG1rC,EAAEoG,EAAEE,EAAX6G,MAAgB4uC,GAAG31C,EAAEE,EAAE,CAAC,EAAE8kB,GAAG,WAAW,OAAOL,EAAC,EAAEM,GAAG,SAASjlB,EAAEE,GAAG,IAAItG,EAAE+qB,GAAE,IAAI,OAAOA,GAAE3kB,EAAEE,GAAG,CAAC,QAAQykB,GAAE/qB,CAAC,CAAC,EAClS8lB,GAAG,SAAS1f,EAAEE,EAAEtG,GAAG,OAAOsG,GAAG,IAAK,QAAyB,GAAjB2Y,EAAG7Y,EAAEpG,GAAGsG,EAAEtG,EAAEoE,KAAQ,UAAUpE,EAAEtB,MAAM,MAAM4H,EAAE,CAAC,IAAItG,EAAEoG,EAAEpG,EAAE6lB,YAAY7lB,EAAEA,EAAE6lB,WAAsF,IAA3E7lB,EAAEA,EAAE+8C,iBAAiB,cAAcC,KAAKC,UAAU,GAAG32C,GAAG,mBAAuBA,EAAE,EAAEA,EAAEtG,EAAE8C,OAAOwD,IAAI,CAAC,IAAIC,EAAEvG,EAAEsG,GAAG,GAAGC,IAAIH,GAAGG,EAAE22C,OAAO92C,EAAE82C,KAAK,CAAC,IAAI12C,EAAE4f,GAAG7f,GAAG,IAAIC,EAAE,MAAM7H,MAAMoH,EAAE,KAAKoY,EAAG5X,GAAG0Y,EAAG1Y,EAAEC,EAAE,CAAC,CAAC,CAAC,MAAM,IAAK,WAAWsZ,GAAG1Z,EAAEpG,GAAG,MAAM,IAAK,SAAmB,OAAVsG,EAAEtG,EAAEqe,QAAeiB,GAAGlZ,IAAIpG,EAAEq0C,SAAS/tC,GAAE,GAAI,EAAEigB,GAAG4zB,GAAG3zB,GAAG4zB,GACpa,IAAI+C,GAAG,CAACC,uBAAsB,EAAGC,OAAO,CAACn3B,GAAGuR,GAAGrR,GAAGC,GAAGC,GAAG6zB,KAAKmD,GAAG,CAACC,wBAAwB7wB,GAAG8wB,WAAW,EAAEt7C,QAAQ,SAASu7C,oBAAoB,aAC1IC,GAAG,CAACF,WAAWF,GAAGE,WAAWt7C,QAAQo7C,GAAGp7C,QAAQu7C,oBAAoBH,GAAGG,oBAAoBE,eAAeL,GAAGK,eAAeC,kBAAkB,KAAKC,4BAA4B,KAAKC,4BAA4B,KAAKC,cAAc,KAAKC,wBAAwB,KAAKC,wBAAwB,KAAKC,gBAAgB,KAAKC,mBAAmB,KAAKC,eAAe,KAAKC,qBAAqBtjC,EAAG+tB,uBAAuBwV,wBAAwB,SAASl4C,GAAW,OAAO,QAAfA,EAAEyhB,GAAGzhB,IAAmB,KAAKA,EAAE+f,SAAS,EAAEo3B,wBAAwBD,GAAGC,yBARjN,WAAc,OAAO,IAAI,EASpUgB,4BAA4B,KAAKC,gBAAgB,KAAKC,aAAa,KAAKC,kBAAkB,KAAKC,gBAAgB,KAAKC,kBAAkB,mCAAmC,GAAG,qBAAqBC,+BAA+B,CAAC,IAAIC,GAAGD,+BAA+B,IAAIC,GAAGC,YAAYD,GAAGE,cAAc,IAAIx1B,GAAGs1B,GAAGG,OAAOvB,IAAIj0B,GAAGq1B,EAAE,CAAC,MAAM14C,IAAG,CAAC,CAACtI,EAAQ+H,mDAAmDs3C,GAC/Yr/C,EAAQohD,aAAa,SAAS94C,EAAEE,GAAG,IAAItG,EAAE,EAAEqU,UAAUvR,aAAQ,IAASuR,UAAU,GAAGA,UAAU,GAAG,KAAK,IAAIkoC,GAAGj2C,GAAG,MAAM3H,MAAMoH,EAAE,MAAM,OAbuH,SAAYK,EAAEE,EAAEtG,GAAG,IAAIuG,EAAE,EAAE8N,UAAUvR,aAAQ,IAASuR,UAAU,GAAGA,UAAU,GAAG,KAAK,MAAM,CAACzN,SAASqU,EAAG3b,IAAI,MAAMiH,EAAE,KAAK,GAAGA,EAAEqZ,SAASxZ,EAAEymB,cAAcvmB,EAAEw+B,eAAe9kC,EAAE,CAa1Rm/C,CAAG/4C,EAAEE,EAAE,KAAKtG,EAAE,EAAElC,EAAQshD,WAAW,SAASh5C,EAAEE,GAAG,IAAIi2C,GAAGn2C,GAAG,MAAMzH,MAAMoH,EAAE,MAAM,IAAI/F,GAAE,EAAGuG,EAAE,GAAGC,EAAE01C,GAA4P,OAAzP,OAAO51C,QAAG,IAASA,KAAI,IAAKA,EAAE+4C,sBAAsBr/C,GAAE,QAAI,IAASsG,EAAE6nC,mBAAmB5nC,EAAED,EAAE6nC,uBAAkB,IAAS7nC,EAAEu0C,qBAAqBr0C,EAAEF,EAAEu0C,qBAAqBv0C,EAAEi1C,GAAGn1C,EAAE,GAAE,EAAG,KAAK,EAAKpG,EAAE,EAAGuG,EAAEC,GAAGJ,EAAEy3B,IAAIv3B,EAAES,QAAQq2B,GAAG,IAAIh3B,EAAE2a,SAAS3a,EAAEyf,WAAWzf,GAAU,IAAIg2C,GAAG91C,EAAE,EACrfxI,EAAQwhD,YAAY,SAASl5C,GAAG,GAAG,MAAMA,EAAE,OAAO,KAAK,GAAG,IAAIA,EAAE2a,SAAS,OAAO3a,EAAE,IAAIE,EAAEF,EAAEooC,gBAAgB,QAAG,IAASloC,EAAE,CAAC,GAAG,oBAAoBF,EAAE4W,OAAO,MAAMre,MAAMoH,EAAE,MAAiC,MAA3BK,EAAEX,OAAO/E,KAAK0F,GAAGkS,KAAK,KAAW3Z,MAAMoH,EAAE,IAAIK,GAAI,CAAqC,OAA5BA,EAAE,QAAVA,EAAEyhB,GAAGvhB,IAAc,KAAKF,EAAE+f,SAAkB,EAAEroB,EAAQyhD,UAAU,SAASn5C,GAAG,OAAOg0C,GAAGh0C,EAAE,EAAEtI,EAAQ0hD,QAAQ,SAASp5C,EAAEE,EAAEtG,GAAG,IAAIw8C,GAAGl2C,GAAG,MAAM3H,MAAMoH,EAAE,MAAM,OAAO22C,GAAG,KAAKt2C,EAAEE,GAAE,EAAGtG,EAAE,EAC/YlC,EAAQ2hD,YAAY,SAASr5C,EAAEE,EAAEtG,GAAG,IAAIu8C,GAAGn2C,GAAG,MAAMzH,MAAMoH,EAAE,MAAM,IAAIQ,EAAE,MAAMvG,GAAGA,EAAE0/C,iBAAiB,KAAKl5C,GAAE,EAAGrB,EAAE,GAAGkB,EAAE61C,GAAyO,GAAtO,OAAOl8C,QAAG,IAASA,KAAI,IAAKA,EAAEq/C,sBAAsB74C,GAAE,QAAI,IAASxG,EAAEmuC,mBAAmBhpC,EAAEnF,EAAEmuC,uBAAkB,IAASnuC,EAAE66C,qBAAqBx0C,EAAErG,EAAE66C,qBAAqBv0C,EAAEq1C,GAAGr1C,EAAE,KAAKF,EAAE,EAAE,MAAMpG,EAAEA,EAAE,KAAKwG,EAAE,EAAGrB,EAAEkB,GAAGD,EAAEy3B,IAAIv3B,EAAES,QAAQq2B,GAAGh3B,GAAMG,EAAE,IAAIH,EAAE,EAAEA,EAAEG,EAAEzD,OAAOsD,IAA2BI,GAAhBA,GAAPxG,EAAEuG,EAAEH,IAAOu5C,aAAgB3/C,EAAE4/C,SAAS,MAAMt5C,EAAEg1C,gCAAgCh1C,EAAEg1C,gCAAgC,CAACt7C,EAAEwG,GAAGF,EAAEg1C,gCAAgCruC,KAAKjN,EACvhBwG,GAAG,OAAO,IAAI81C,GAAGh2C,EAAE,EAAExI,EAAQkf,OAAO,SAAS5W,EAAEE,EAAEtG,GAAG,IAAIw8C,GAAGl2C,GAAG,MAAM3H,MAAMoH,EAAE,MAAM,OAAO22C,GAAG,KAAKt2C,EAAEE,GAAE,EAAGtG,EAAE,EAAElC,EAAQ+hD,uBAAuB,SAASz5C,GAAG,IAAIo2C,GAAGp2C,GAAG,MAAMzH,MAAMoH,EAAE,KAAK,QAAOK,EAAE4vC,sBAAqBoE,GAAG,WAAWsC,GAAG,KAAK,KAAKt2C,GAAE,EAAG,WAAWA,EAAE4vC,oBAAoB,KAAK5vC,EAAEy3B,IAAI,IAAI,EAAE,IAAG,EAAM,EAAE//B,EAAQgiD,wBAAwB3F,GAC/Ur8C,EAAQiiD,oCAAoC,SAAS35C,EAAEE,EAAEtG,EAAEuG,GAAG,IAAIi2C,GAAGx8C,GAAG,MAAMrB,MAAMoH,EAAE,MAAM,GAAG,MAAMK,QAAG,IAASA,EAAEooC,gBAAgB,MAAM7vC,MAAMoH,EAAE,KAAK,OAAO22C,GAAGt2C,EAAEE,EAAEtG,GAAE,EAAGuG,EAAE,EAAEzI,EAAQoE,QAAQ,iC,iBClT7L,IAAIhE,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAKLC,EAAMoE,QAAUpE,EAAMoE,OAAO5C,SAC9B7B,EAAOC,QAAUI,EAAMoE,OAIzB,SAAU09C,GAGV,IAAIC,EAAW,CAAC,EACZC,EAAmB,IAAIj4C,MAAM,GAC7Bk4C,EAAmBjiD,EAAMU,KAAKC,eAyClC,SAASuhD,IACP,IAAI34C,EAAMvJ,EAAMqJ,KAAKxD,OAAOk8C,GAgC5B,OAlBAx4C,EAAI/H,SAAW,SAASwJ,EAAOe,GAC7B,OAAOxC,EAAIuC,SAASd,EAAOe,EAC7B,EAYAxC,EAAIlF,aAAe,SAAS2G,GAC1B,OAAOzB,EAAIuC,SAASd,EACtB,EAEOzB,CACT,CA1EAw4C,EAASv3C,UAAY,SAASpJ,GAE5B,IAAI6O,EAAMjQ,EAAMU,KAAKC,aAAaS,GAQlC,OAPAA,EAAM,IAAI2I,MAAM,IACZ,GAAKkG,EAAIG,WACbhP,EAAI,GAAK6O,EAAIG,WACbhP,EAAI,GAAK6O,EAAIG,WACbhP,EAAI,GAAK6O,EAAIG,WAGNpQ,EAAMsG,IAAI67C,WAAW/gD,GAAK,EACnC,EACA2gD,EAASt3C,WAAa,SAASjB,GAE7B,IAAIyG,EAAMjQ,EAAMU,KAAKC,aAAa6I,GAMlC,OALAA,EAAO,IAAIO,MAAM,IACZ,GAAKkG,EAAIG,WACd5G,EAAK,GAAKyG,EAAIG,WACd5G,EAAK,GAAKyG,EAAIG,WACd5G,EAAK,GAAKyG,EAAIG,WACP5G,CACT,EACAu4C,EAASz/C,OAAS,SAASlB,EAAKoI,GAM9B,OALAxJ,EAAMsG,IAAI87C,aAAahhD,EAAKoI,EAAMw4C,GAAkB,GACpDC,EAAiB12C,SAASy2C,EAAiB,IAC3CC,EAAiB12C,SAASy2C,EAAiB,IAC3CC,EAAiB12C,SAASy2C,EAAiB,IAC3CC,EAAiB12C,SAASy2C,EAAiB,IACpCC,EAAiBzgD,UAC1B,EACAugD,EAAS91C,UAAY,SAASzC,GAG5B,QADEA,EAAK,GACAA,CACT,EACAu4C,EAASl4C,GAAK7J,EAAM6J,GAAGw4C,OA0CvB,IAAIC,EAAOJ,IAIPv3C,EAAkB,KAClBC,EAAc5K,EAAMU,KAAKkK,YACzB3B,EAAU2B,EAAYC,QAAUD,EAAYE,SAOhD,GANG7B,GAAWA,EAAQ0B,kBACpBA,EAAkB,SAASI,GACzB,OAAO9B,EAAQ0B,gBAAgBI,EACjC,GAGC/K,EAAMH,QAAQC,oBACbE,EAAMU,KAAKwI,WAAayB,EAAkB,CAW5C,GARqB,qBAAXwM,QAA0BA,OAAO4D,SAK3CunC,EAAK31C,YAAY,IAAI0J,KAAQ,IAGJ,qBAAfksC,UAA4B,CACpC,IAAIC,EAAY,GAChB,IAAI,IAAIphD,KAAOmhD,UACb,IAC+B,iBAAnBA,UAAUnhD,KAClBohD,GAAaD,UAAUnhD,GAE3B,CAAE,MAAMkH,GACN,CAQJg6C,EAAKl4C,QAAQo4C,GACbA,EAAY,IACd,CAGGV,IAEDA,IAASW,UAAU,SAASn6C,GAE1Bg6C,EAAK31C,WAAWrE,EAAE+pB,QAAS,IAC3BiwB,EAAK31C,WAAWrE,EAAEgqB,QAAS,GAC7B,GAGAwvB,IAASY,SAAS,SAASp6C,GACzBg6C,EAAK31C,WAAWrE,EAAE8nB,SAAU,EAC9B,GAEJ,CAGA,GAAIpwB,EAAMoE,OAIR,IAAI,IAAIhD,KAAOkhD,EACbtiD,EAAMoE,OAAOhD,GAAOkhD,EAAKlhD,QAJ3BpB,EAAMoE,OAASk+C,EASjBtiD,EAAMoE,OAAOu+C,eAAiBT,EAE9BviD,EAAOC,QAAUI,EAAMoE,MAEtB,CA/JD,CA+JsB,qBAAZ09C,OAA0BA,OAAS,K,iBC7J7C,IAAI9hD,EAAQD,EAAQ,IAoLpB,SAAS6iD,EAAkB18C,EAAMw/B,GAI/B1lC,EAAMsC,OAAOsgD,kBAAkB18C,EAHjB,WACZ,OAAO,IAAIlG,EAAM6iD,IAAIC,UAAU58C,EAAMw/B,EACvC,EAEF,CAxLA3lC,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAGRJ,EAAOC,QAAUI,EAAM6iD,IAAM7iD,EAAM6iD,KAAO,CAAC,EAsB3C7iD,EAAM6iD,IAAInzC,gBAAkB,SAAStO,EAAKuB,EAAI6B,EAAQkhC,GACpD,IAAIpjC,EAASygD,EAAc,CACzB3hD,IAAKA,EACLoD,OAAQA,EACRO,SAAS,EACT2gC,KAAMA,IAAgB,OAAP/iC,EAAc,MAAQ,SAGvC,OADAL,EAAOgC,MAAM3B,GACNL,CACT,EAgBAtC,EAAM6iD,IAAIlzC,uBAAyB,SAASvO,EAAKskC,GAC/C,OAAOqd,EAAc,CACnB3hD,IAAKA,EACLoD,OAAQ,KACRO,SAAS,EACT2gC,KAAMA,GAEV,EAsBA1lC,EAAM6iD,IAAIjzC,gBAAkB,SAASxO,EAAKuB,EAAI6B,EAAQkhC,GACpD,IAAIpjC,EAASygD,EAAc,CACzB3hD,IAAKA,EACLoD,OAAQA,EACRO,SAAS,EACT2gC,KAAMA,IAAgB,OAAP/iC,EAAc,MAAQ,SAGvC,OADAL,EAAOgC,MAAM3B,GACNL,CACT,EAgBAtC,EAAM6iD,IAAIhzC,uBAAyB,SAASzO,EAAKskC,GAC/C,OAAOqd,EAAc,CACnB3hD,IAAKA,EACLoD,OAAQ,KACRO,SAAS,EACT2gC,KAAMA,GAEV,EAUA1lC,EAAM6iD,IAAIC,UAAY,SAAS58C,EAAMw/B,GACnC,IAAIz4B,EAAOwD,KACXxD,EAAK/G,KAAOA,EACZ+G,EAAKy4B,KAAO,IAAIA,EAAK,CACnB7gC,UAAW,EACXvC,OAAQ,CACNgM,QAAS,SAAS00C,EAASC,GACzB,OAAOb,EAAan1C,EAAKi2C,MAAOF,EAASC,GAAU,EACrD,EACAl+C,QAAS,SAASi+C,EAASC,GACzB,OAAOb,EAAan1C,EAAKi2C,MAAOF,EAASC,GAAU,EACrD,KAGJh2C,EAAKiS,OAAQ,CACf,EAUAlf,EAAM6iD,IAAIC,UAAUt7C,UAAU27C,WAAa,SAAStjD,GAClD,IAAG4Q,KAAKyO,MAAR,CAIA,IAAI9d,EAAMpB,EAAMU,KAAKC,aAAad,EAAQuB,KAC1C,GAAiC,IAA9BqP,KAAKvK,KAAK6f,QAAQ,SACC,KAAjB3kB,EAAIwD,SACL,MAAM,IAAInE,MAAM,gCAAiD,EAAfW,EAAIwD,UAK1D6L,KAAKyyC,MA2CP,SAAqB9hD,GA2BnB,IA1BA,IAyBW6O,EAzBPmzC,EAAa,CAAC,EAAE,EAAI,UAAW,UAAW,MAAQ,MAAQ,UAAW,UAAW,IAAM,IAAM,UAAW,UAAW,MAAQ,MAAQ,UAAW,WAC7IC,EAAa,CAAC,EAAE,EAAI,QAAS,QAAS,SAAU,SAAU,SAAU,SAAU,IAAM,IAAM,QAAS,QAAS,SAAU,SAAU,SAAU,UAC1IC,EAAa,CAAC,EAAE,EAAI,KAAM,KAAM,SAAU,SAAU,SAAU,SAAU,EAAE,EAAI,KAAM,KAAM,SAAU,SAAU,SAAU,UACxHC,EAAa,CAAC,EAAE,QAAS,UAAU,UAAU,KAAO,QAAS,UAAU,UAAU,OAAQ,QAAS,UAAU,UAAU,OAAQ,QAAS,UAAU,WACjJC,EAAa,CAAC,EAAE,OAAQ,GAAK,OAAQ,EAAE,OAAQ,GAAK,OAAQ,KAAO,OAAQ,KAAO,OAAQ,KAAO,OAAQ,KAAO,QAChHC,EAAa,CAAC,EAAE,KAAM,GAAK,KAAM,EAAE,KAAM,GAAK,KAAM,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,UAC1HC,EAAa,CAAC,EAAE,UAAW,OAAQ,UAAW,EAAI,UAAW,OAAQ,UAAW,EAAE,UAAW,OAAQ,UAAW,EAAI,UAAW,OAAQ,WACvIC,EAAa,CAAC,EAAE,MAAQ,KAAM,MAAQ,UAAW,UAAW,UAAW,UAAW,OAAQ,OAAQ,OAAQ,OAAQ,UAAW,UAAW,UAAW,WACnJC,EAAa,CAAC,EAAE,OAAQ,EAAE,OAAQ,EAAI,OAAQ,EAAI,OAAQ,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,UAChIC,EAAa,CAAC,EAAE,UAAW,EAAI,UAAW,EAAE,UAAW,EAAI,UAAW,KAAM,UAAW,KAAM,UAAW,KAAM,UAAW,KAAM,WAC/HC,EAAa,CAAC,EAAE,GAAK,EAAE,GAAK,QAAS,QAAS,QAAS,QAAS,KAAO,KAAO,KAAO,KAAO,QAAS,QAAS,QAAS,SACvHC,EAAa,CAAC,EAAE,SAAU,IAAM,SAAU,QAAS,SAAU,QAAS,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,UACtJC,EAAa,CAAC,EAAE,KAAO,UAAU,UAAU,OAAQ,OAAQ,UAAU,UAAU,GAAK,KAAO,UAAU,UAAU,OAAQ,OAAQ,UAAU,WACzIC,EAAa,CAAC,EAAE,EAAI,IAAM,IAAM,EAAE,EAAI,IAAM,IAAM,EAAI,EAAI,IAAM,IAAM,EAAI,EAAI,IAAM,KAIpFC,EAAa9iD,EAAIwD,SAAW,EAAI,EAAI,EAGpCpC,EAAO,GAGP2hD,EAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAEvDz8C,EAAI,EACA+G,EAAI,EAAGA,EAAIy1C,EAAYz1C,IAAK,CAClC,IAAIiuB,EAAOt7B,EAAIgP,WACXg0C,EAAQhjD,EAAIgP,WAIhBssB,IAFAzsB,EAA+B,WAAvBysB,IAAS,EAAK0nB,KAEN,EAGhB1nB,GADAzsB,EAAiC,QAHjCm0C,GAASn0C,MAGU,GAAMysB,GAMzBA,IAFAzsB,EAA+B,WAAvBysB,IAAS,GAFjB0nB,GAAUn0C,IAAQ,OAIF,EAGhBysB,GADAzsB,EAAiC,QAHjCm0C,GAASn0C,MAGU,GAAMysB,GAMzBA,IAFAzsB,EAA+B,YAAvBysB,IAAS,GAFjB0nB,GAAUn0C,IAAQ,OAIF,EAGhBysB,GADAzsB,EAA+B,WAH/Bm0C,GAASn0C,KAGS,EAAKysB,GASvBzsB,GAHAysB,IAFAzsB,EAA+B,YAAvBysB,IAAS,GAFjB0nB,GAAUn0C,GAAO,MAID,IAGD,GAJfm0C,GAASn0C,KAIuB,GAAM,IAGtCysB,EAAS0nB,GAAS,GAAQA,GAAS,EAAK,SACpCA,IAAU,EAAK,MAAYA,IAAU,GAAM,IAC/CA,EAAQn0C,EAGR,IAAI,IAAI3K,EAAI,EAAGA,EAAI6+C,EAAOv/C,SAAUU,EAAG,CAElC6+C,EAAO7+C,IACRo3B,EAAQA,GAAQ,EAAMA,IAAS,GAC/B0nB,EAASA,GAAS,EAAMA,IAAU,KAElC1nB,EAAQA,GAAQ,EAAMA,IAAS,GAC/B0nB,EAASA,GAAS,EAAMA,IAAU,IAGpCA,IAAU,GAOV,IAAIC,EACFjB,GATF1mB,IAAS,MASY,IAAM2mB,EAAW3mB,IAAS,GAAM,IACnD4mB,EAAW5mB,IAAS,GAAM,IAAO6mB,EAAW7mB,IAAS,GAAM,IAC3D8mB,EAAW9mB,IAAS,GAAM,IAAO+mB,EAAW/mB,IAAS,EAAK,IAC1DgnB,EAAWhnB,IAAS,EAAK,IACvB4nB,EACFX,EAAUS,IAAU,IAAMR,EAAWQ,IAAU,GAAM,IACrDP,EAAWO,IAAU,GAAM,IAAON,EAAYM,IAAU,GAAM,IAC9DL,EAAYK,IAAU,GAAM,IAAOJ,EAAYI,IAAU,EAAK,IAC9DH,EAAYG,IAAU,EAAK,IAC7Bn0C,EAAsC,OAA9Bq0C,IAAa,GAAMD,GAC3B7hD,EAAKkF,KAAO28C,EAAUp0C,EACtBzN,EAAKkF,KAAO48C,EAAYr0C,GAAO,EACjC,CACF,CAEA,OAAOzN,CACT,CAjJe+hD,CAAYnjD,GACzBqP,KAAKyO,OAAQ,CAXb,CAYF,EAIA0jC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAMU,KAChDoyC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAMiB,KAChD6xC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAMoB,KAChD0xC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAM2B,KAChDmxC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAMP,KAEhDqzC,EAAkB,WAAY5iD,EAAMsC,OAAOwN,MAAMU,KACjDoyC,EAAkB,WAAY5iD,EAAMsC,OAAOwN,MAAMiB,KACjD6xC,EAAkB,WAAY5iD,EAAMsC,OAAOwN,MAAMoB,KACjD0xC,EAAkB,WAAY5iD,EAAMsC,OAAOwN,MAAM2B,KACjDmxC,EAAkB,WAAY5iD,EAAMsC,OAAOwN,MAAMP,KAWjD,IAAIi1C,EAAc,CAAC,SAAU,EAAE,MAAQ,SAAU,SAAU,MAAQ,EAAI,MAAQ,KAAM,SAAU,SAAU,KAAM,SAAU,SAAU,SAAU,EAAI,KAAM,SAAU,SAAU,MAAQ,MAAQ,SAAU,SAAU,SAAU,MAAQ,SAAU,SAAU,MAAQ,EAAE,KAAM,MAAQ,SAAU,MAAQ,SAAU,EAAI,SAAU,SAAU,SAAU,SAAU,KAAM,SAAU,MAAQ,MAAQ,SAAU,KAAM,EAAI,SAAU,MAAQ,SAAU,MAAQ,SAAU,SAAU,SAAU,KAAM,MAAQ,SAAU,KAAM,SAAU,SAAU,EAAE,MAAQ,MAAQ,EAAE,UAC7gBC,EAAc,EAAE,YAAY,WAAW,MAAO,QAAS,QAAS,IAAM,YAAY,YAAY,YAAY,YAAY,YAAY,YAAY,WAAW,QAAS,IAAM,WAAW,QAAS,SAAU,WAAW,GAAG,WAAW,MAAO,SAAU,WAAW,SAAU,WAAW,EAAE,QAAS,OAAQ,YAAY,WAAW,MAAO,EAAE,SAAU,WAAW,SAAU,YAAY,YAAY,WAAW,OAAQ,YAAY,WAAW,IAAM,WAAW,QAAS,GAAK,OAAQ,WAAW,OAAQ,WAAW,SAAU,WAAW,SAAU,YAAY,WAAW,QAAS,QAAS,GAAG,WAAW,OAAQ,YAAY,YAAY,WAAW,SAC1mBC,EAAc,CAAC,IAAM,UAAU,EAAE,UAAU,UAAU,EAAE,OAAQ,UAAU,OAAQ,UAAU,UAAU,OAAQ,UAAU,OAAQ,UAAU,IAAM,UAAU,EAAI,UAAU,IAAM,OAAQ,UAAU,UAAU,OAAQ,UAAU,OAAQ,OAAQ,UAAU,EAAI,UAAU,IAAM,UAAU,UAAU,UAAU,OAAQ,IAAM,OAAQ,UAAU,UAAU,EAAE,IAAM,OAAQ,UAAU,UAAU,UAAU,IAAM,EAAE,UAAU,UAAU,OAAQ,UAAU,UAAU,EAAI,OAAQ,OAAQ,UAAU,UAAU,UAAU,IAAM,UAAU,OAAQ,EAAI,UAAU,QAC/gBC,EAAc,CAAC,QAAS,KAAO,KAAO,IAAK,QAAS,QAAS,QAAS,KAAO,EAAE,QAAS,QAAS,QAAS,IAAK,EAAE,QAAS,QAAS,EAAI,KAAO,QAAS,QAAS,IAAK,QAAS,KAAO,KAAO,QAAS,EAAI,KAAO,QAAS,KAAO,QAAS,QAAS,IAAK,QAAS,QAAS,QAAS,QAAS,IAAK,EAAE,EAAE,QAAS,KAAO,QAAS,QAAS,EAAI,QAAS,KAAO,KAAO,IAAK,QAAS,IAAK,EAAI,KAAO,QAAS,KAAO,QAAS,QAAS,KAAO,KAAO,QAAS,QAAS,IAAK,QAAS,KAAO,SACtdC,EAAc,CAAC,IAAM,SAAU,SAAU,WAAW,OAAQ,IAAM,WAAW,SAAU,WAAW,OAAQ,SAAU,WAAW,WAAW,WAAW,OAAQ,WAAW,SAAU,WAAW,WAAW,EAAE,WAAW,WAAW,WAAW,SAAU,WAAW,WAAW,EAAE,WAAW,SAAU,SAAU,WAAW,OAAQ,OAAQ,WAAW,IAAM,SAAU,WAAW,SAAU,WAAW,WAAW,SAAU,WAAW,WAAW,SAAU,WAAW,IAAM,SAAU,WAAW,WAAW,OAAQ,WAAW,WAAW,SAAU,EAAE,WAAW,WAAW,OAAQ,SAAU,WAAW,OAAQ,EAAE,WAAW,SAAU,YACpmBC,EAAc,CAAC,UAAW,UAAW,MAAO,UAAW,UAAW,GAAK,UAAW,QAAS,UAAW,QAAS,QAAS,UAAW,QAAS,UAAW,UAAW,MAAO,EAAE,QAAS,UAAW,MAAO,QAAS,UAAW,GAAK,UAAW,UAAW,EAAE,QAAS,UAAW,MAAO,QAAS,UAAW,UAAW,UAAW,GAAK,UAAW,QAAS,UAAW,QAAS,MAAO,UAAW,QAAS,UAAW,UAAW,MAAO,UAAW,UAAW,QAAS,UAAW,QAAS,UAAW,EAAE,UAAW,GAAK,MAAO,UAAW,QAAS,MAAO,QAAS,UAAW,EAAE,UAAW,UAAW,QAAS,WACxkBC,EAAc,CAAC,QAAS,SAAU,SAAU,EAAE,KAAM,SAAU,QAAS,SAAU,SAAU,QAAS,EAAE,SAAU,EAAI,SAAU,SAAU,KAAM,SAAU,QAAS,QAAS,SAAU,SAAU,SAAU,SAAU,QAAS,SAAU,KAAM,KAAM,SAAU,QAAS,EAAI,SAAU,QAAS,SAAU,QAAS,QAAS,SAAU,SAAU,SAAU,SAAU,EAAI,QAAS,SAAU,SAAU,QAAS,SAAU,KAAM,QAAS,SAAU,KAAM,SAAU,SAAU,SAAU,QAAS,EAAE,EAAI,SAAU,EAAE,QAAS,SAAU,KAAM,SAAU,SAAU,KAAM,SAC9hBC,EAAc,CAAC,UAAW,KAAO,OAAQ,UAAW,UAAW,UAAW,GAAK,UAAW,OAAQ,UAAW,UAAW,OAAQ,UAAW,OAAQ,KAAO,GAAK,UAAW,UAAW,UAAW,KAAO,OAAQ,OAAQ,UAAW,UAAW,KAAO,EAAE,EAAE,UAAW,UAAW,UAAW,OAAQ,OAAQ,OAAQ,OAAQ,UAAW,KAAO,GAAK,UAAW,KAAO,OAAQ,UAAW,GAAK,UAAW,UAAW,UAAW,UAAW,OAAQ,UAAW,EAAE,UAAW,OAAQ,UAAW,UAAW,UAAW,UAAW,EAAE,UAAW,OAAQ,OAAQ,KAAO,KAAO,OAAQ,UAAW,WA0H5jB,SAAS3C,EAAa5/C,EAAMsC,EAAON,EAAQO,GAEzC,IACIigD,EASA/0C,EAVAi0C,EAA6B,KAAhB1hD,EAAKoC,OAAgB,EAAI,EAGxCogD,EADgB,IAAfd,EACSn/C,EAAU,CAAC,IAAK,GAAI,GAAK,CAAC,EAAG,GAAI,GAEhCA,EACT,CAAC,GAAI,IAAK,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,GACjC,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,EAAG,GAAI,GAAI,GAKnC,IAAI23B,EAAO53B,EAAM,GACbs/C,EAAQt/C,EAAM,GAKlB43B,IAFAzsB,EAA+B,WAAvBysB,IAAS,EAAK0nB,KAEN,EAIhB1nB,IAFAzsB,EAAgC,OAAxBysB,IAAS,IAHjB0nB,GAASn0C,MAKO,GAGhBysB,GADAzsB,EAA+B,YAH/Bm0C,GAASn0C,KAGS,EAAKysB,GAKvBA,GADAzsB,EAA+B,WAF/Bm0C,GAAUn0C,GAAO,KAEC,EAAKysB,GASvBA,GAHAA,IAFAzsB,EAA+B,YAAvBysB,IAAS,GAFjB0nB,GAAUn0C,GAAO,MAID,IAGC,EAAMysB,IAAS,GAChC0nB,GALAA,GAASn0C,IAKU,EAAMm0C,IAAU,GAEnC,IAAI,IAAI31C,EAAI,EAAGA,EAAIy1C,EAAYz1C,GAAK,EAAG,CAKrC,IAJA,IAAIw2C,EAAUD,EAAQv2C,EAAI,GACtBy2C,EAAUF,EAAQv2C,EAAI,GAGlBnJ,EAAI0/C,EAAQv2C,GAAInJ,GAAK2/C,EAAS3/C,GAAK4/C,EAAS,CAClD,IAAIC,EAASf,EAAQ5hD,EAAK8C,GACtB8/C,GAAWhB,IAAU,EAAMA,GAAS,IAAO5hD,EAAK8C,EAAI,GAGxD2K,EAAMysB,EACNA,EAAO0nB,EACPA,EAAQn0C,GACNw0C,EAAaU,IAAW,GAAM,IAC9BR,EAAaQ,IAAW,GAAM,IAC9BN,EAAaM,IAAY,EAAK,IAC9BJ,EAAqB,GAATI,GACZX,EAAaY,IAAW,GAAM,IAC9BV,EAAaU,IAAW,GAAM,IAC9BR,EAAaQ,IAAY,EAAK,IAC9BN,EAAqB,GAATM,GAChB,CAEAn1C,EAAMysB,EACNA,EAAO0nB,EACPA,EAAQn0C,CACV,CAIAm0C,EAAUA,IAAU,EAAMA,GAAS,GAInCA,GADAn0C,EAA+B,aAJ/BysB,EAASA,IAAS,EAAMA,GAAQ,MAIf,EAAK0nB,GAMtBA,IAFAn0C,EAA+B,UAAvBm0C,IAAU,GAFlB1nB,GAASzsB,GAAO,MAIC,EAIjBm0C,IAFAn0C,EAA+B,WAAvBm0C,IAAU,GAHlB1nB,GAAQzsB,MAKS,EAGjBm0C,GADAn0C,EAAgC,QAHhCysB,GAAQzsB,KAGS,GAAMm0C,GAKvBA,GADAn0C,EAA+B,YAF/BysB,GAASzsB,GAAO,MAEC,EAAKm0C,GAEtB1nB,GAASzsB,GAAO,EAEhBzL,EAAO,GAAKk4B,EACZl4B,EAAO,GAAK4/C,CACd,CAqBA,SAASrB,EAAcljD,GAErB,IAGIyC,EAFAoW,EAAY,SAFhB7Y,EAAUA,GAAW,CAAC,GACF6lC,MAAQ,OAAOvwB,cAW/B7Q,GANFhC,EADCzC,EAAQkF,QACA/E,EAAMsC,OAAOC,eAAemW,EAAW7Y,EAAQuB,KAE/CpB,EAAMsC,OAAOS,aAAa2V,EAAW7Y,EAAQuB,MAIrCkD,MAcnB,OAbAhC,EAAOgC,MAAQ,SAAS3B,EAAI9C,GAE1B,IAAI2E,EAAS,KACV3E,aAAmBG,EAAMU,KAAK6T,aAC/B/P,EAAS3E,EACTA,EAAU,CAAC,IAEbA,EAAUA,GAAW,CAAC,GACd2E,OAASA,EACjB3E,EAAQ8C,GAAKA,EACb2B,EAAMkE,KAAKlG,EAAQzC,EACrB,EAEOyC,CACT,C,iBCxeA,IAAItC,EAAQD,EAAQ,IAEpBC,EAAME,IAAMF,EAAME,KAAO,CAAC,EAC1B,IAAImlD,EAAO1lD,EAAOC,QAAUI,EAAME,IAAImlD,KAAOrlD,EAAMqlD,KAAOrlD,EAAMqlD,MAAQ,CAAC,EAGzE,SAASC,EAAIr/C,EAAIC,GACfm/C,EAAKp/C,GAAMC,EACXm/C,EAAKn/C,GAAQD,CACf,CAEA,SAASs/C,EAAIt/C,EAAIC,GACfm/C,EAAKp/C,GAAMC,CACb,CAGAo/C,EAAI,uBAAwB,iBAI5BA,EAAI,uBAAwB,wBAC5BA,EAAI,uBAAwB,yBAC5BA,EAAI,uBAAwB,cAC5BA,EAAI,uBAAwB,QAC5BA,EAAI,uBAAwB,cAC5BA,EAAI,wBAAyB,cAC7BA,EAAI,wBAAyB,2BAC7BA,EAAI,wBAAyB,2BAC7BA,EAAI,wBAAyB,2BAE7BA,EAAI,cAAe,cAEnBA,EAAI,oBAAqB,iBAEzBA,EAAI,eAAgB,UAEpBA,EAAI,gBAAiB,QAErBA,EAAI,gBAAiB,wBACrBA,EAAI,yBAA0B,UAC9BA,EAAI,yBAA0B,UAC9BA,EAAI,yBAA0B,UAC9BA,EAAI,yBAA0B,UAC9BA,EAAI,yBAA0B,cAC9BA,EAAI,yBAA0B,cAC9BA,EAAI,qBAAsB,OAC1BA,EAAI,qBAAsB,OAG1BA,EAAI,uBAAwB,QAC5BA,EAAI,uBAAwB,cAC5BA,EAAI,uBAAwB,iBAC5BA,EAAI,uBAAwB,0BAC5BA,EAAI,uBAAwB,gBAC5BA,EAAI,uBAAwB,iBAG5BA,EAAI,uBAAwB,gBAC5BA,EAAI,uBAAwB,oBAC5BA,EAAI,uBAAwB,eAC5BA,EAAI,uBAAwB,iBAC5BA,EAAI,uBAAwB,eAC5BA,EAAI,uBAAwB,oBAC5BA,EAAI,uBAAwB,qBAC5BA,EAAI,uBAAwB,uBAC5BA,EAAI,wBAAyB,oBAE7BA,EAAI,wBAAyB,gBAC7BA,EAAI,wBAAyB,cAC7BA,EAAI,0BAA2B,mBAG/BA,EAAI,6BAA8B,UAClCA,EAAI,6BAA8B,uBAClCA,EAAI,6BAA8B,WAClCA,EAAI,6BAA8B,UAClCA,EAAI,6BAA8B,aAClCA,EAAI,6BAA8B,mBAGlCA,EAAI,wBAAyB,cAC7BA,EAAI,wBAAyB,eAE7BA,EAAI,0BAA2B,0BAC/BA,EAAI,0BAA2B,yBAC/BA,EAAI,0BAA2B,mCAC/BA,EAAI,0BAA2B,mCAC/BA,EAAI,0BAA2B,8BAC/BA,EAAI,0BAA2B,6BAG/BA,EAAI,qBAAsB,gBAC1BA,EAAI,qBAAsB,kBAC1BA,EAAI,qBAAsB,kBAC1BA,EAAI,sBAAuB,kBAC3BA,EAAI,sBAAuB,kBAG3BA,EAAI,qBAAsB,gBAC1BA,EAAI,yBAA0B,cAC9BA,EAAI,0BAA2B,cAC/BA,EAAI,0BAA2B,cAG/BA,EAAI,UAAW,cACfA,EAAI,UAAW,WACfA,EAAI,UAAW,gBACfA,EAAI,UAAW,eACfA,EAAI,UAAW,gBACfA,EAAI,UAAW,uBACfA,EAAI,UAAW,iBACfA,EAAI,WAAY,oBAChBA,EAAI,WAAY,0BAChBA,EAAI,WAAY,SAChBA,EAAI,WAAY,eAChBA,EAAI,WAAY,oBAChBA,EAAI,WAAY,cAChBA,EAAI,WAAY,aAChBA,EAAI,2BAA4B,kDAChCA,EAAI,2BAA4B,0CAGhCA,EAAI,wBAAyB,cAC7BA,EAAI,yBAA0B,aAC9BC,EAAI,WAAY,0BAChBA,EAAI,WAAY,iBAChBA,EAAI,WAAY,uBAChBA,EAAI,WAAY,uBAChBA,EAAI,WAAY,iBAChBA,EAAI,WAAY,sBAChBA,EAAI,WAAY,kBAChBA,EAAI,WAAY,iBAChBA,EAAI,WAAY,8BAChBA,EAAI,YAAa,oBACjBA,EAAI,YAAa,mBACjBA,EAAI,YAAa,qBACjBA,EAAI,YAAa,oBACjBD,EAAI,YAAa,wBACjBA,EAAI,YAAa,YACjBC,EAAI,YAAa,yBACjBD,EAAI,YAAa,kBACjBA,EAAI,YAAa,iBACjBA,EAAI,YAAa,oBACjBC,EAAI,YAAa,aACjBA,EAAI,YAAa,aACjBA,EAAI,YAAa,kBACjBA,EAAI,YAAa,mBACjBA,EAAI,YAAa,kBACjBA,EAAI,YAAa,yBACjBA,EAAI,YAAa,4BACjBA,EAAI,YAAa,qBACjBA,EAAI,YAAa,4BACjBA,EAAI,YAAa,qBACjBA,EAAI,YAAa,mBACjBD,EAAI,YAAa,yBACjBA,EAAI,YAAa,uBACjBC,EAAI,YAAa,kBACjBA,EAAI,YAAa,qBACjBD,EAAI,YAAa,0BACjBC,EAAI,YAAa,qBACjBD,EAAI,YAAa,eACjBC,EAAI,YAAa,eACjBA,EAAI,YAAa,oBAGjBD,EAAI,0BAA2B,iBAC/BA,EAAI,oBAAqB,uBACzBA,EAAI,oBAAqB,cACzBA,EAAI,oBAAqB,cACzBA,EAAI,oBAAqB,eACzBA,EAAI,oBAAqB,mBACzBA,EAAI,oBAAqB,e,iBCzKzB,IAAItlD,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAERJ,EAAOC,QAAUI,EAAMwlD,IAAMxlD,EAAMwlD,KAAO,CAAC,EAE3C,IAAIC,EAAazlD,EAAM0lD,KAAKD,WAwH5B,SAASE,EAAWC,EAAK/7C,EAAIg8C,EAAcrxC,GASzCoxC,EAAI95C,SAAW,SAASc,EAAGhI,GAOzB,IANA,IAAIxD,EAAM,IAAIpB,EAAMU,KAAK6T,WAGrBrN,EAAI+D,KAAKkD,KAAKvJ,EAAS4P,GAAgBqxC,EAEvC/jD,EAAI,IAAI9B,EAAMU,KAAK6T,WACfjP,EAAIugD,EAAcvgD,EAAI4B,IAAK5B,EAAG,CAEpCxD,EAAEyJ,SAASjG,GAGXuE,EAAGvF,QACHuF,EAAGpF,OAAOmI,EAAI9K,EAAEN,YAChB,IAAIskD,EAAOj8C,EAAG/D,SACd1E,EAAI0C,SAASgiD,EAAKtkD,SAASgT,GAC7B,CAIA,OADApT,EAAIoE,SAASpE,EAAIwD,SAAWA,GACrBxD,EAAII,UACb,CACF,CAlJAxB,EAAMwlD,IAAIO,IAAM,CAAC,EAgBjB/lD,EAAMwlD,IAAIO,IAAIlgD,OAAS,SAAS+/C,EAAK/lD,GAEnC,IAAIwJ,GADJxJ,EAAUA,GAAW,CAAC,GACHwJ,MAAQrJ,EAAMoE,OAE7BohD,EAAM,CAaVA,QAAc,SAASQ,EAAWC,GAEhC,IACIlf,EADAmf,EAAaj7C,KAAKkD,KAAK63C,EAAUt+C,EAAEy+C,YAAc,GAErD,GACEpf,EAAI,IAAI0e,EACNzlD,EAAMU,KAAK0lD,WAAW/8C,EAAKhF,aAAa6hD,IACxC,IAAIG,IAAIL,EAAUt+C,SACdq/B,EAAEuf,UAAUb,EAAWc,MAAQ,GAIvC,IAAIC,EAAQN,GADZnf,EAAI/mC,EAAMU,KAAKsX,WAAW+uB,EAAEt6B,SAAS,MACV7H,OAW3B,OAVG4hD,EAAQ,IACTzf,EAAI/mC,EAAMU,KAAK+lD,WAAW55C,OAAOC,aAAa,GAAI05C,GAASzf,GAStD,CAAC2f,cALYV,EAAU13C,QAAQy4B,EAAG,QAKH3lC,IAF5BwkD,EAAI95C,SAASi7B,EAAGkf,GAG5B,EAYAT,QAAc,SAASjtC,EAAYmuC,EAAeT,GAEhD,IAAIlf,EAAIxuB,EAAWxT,QAAQ2hD,EAAe,QAC1C,OAAOd,EAAI95C,SAASi7B,EAAGkf,EACzB,GAEA,OAAOT,CACT,EAaAxlD,EAAMwlD,IAAImB,KAAO,SAAS98C,EAAI2K,GAC5BmxC,EAAWl1C,KAAM5G,EAAI,EAAG2K,GAAgB3K,EAAG2K,aAC7C,EAWAxU,EAAMwlD,IAAIoB,KAAO,SAAS/8C,EAAI2K,GAC5BmxC,EAAWl1C,KAAM5G,EAAI,EAAG2K,GAAgB3K,EAAG2K,aAC7C,C,iBC1GA,IAAIxU,EAAQD,EAAQ,IAapB,GAZAA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAEiB,qBAAf0lD,EACR,IAAIA,EAAazlD,EAAM0lD,KAAKD,WAI9B,IAAIxlD,EAAOD,EAAMC,KAGbC,EAAMF,EAAME,IAAMF,EAAME,KAAO,CAAC,EACpCP,EAAOC,QAAUM,EAAI2mD,IAAM7mD,EAAM6mD,IAAM7mD,EAAM6mD,KAAO,CAAC,EACrD,IAAIxB,EAAOnlD,EAAImlD,KAIXyB,EAA+B,CACjC5gD,KAAM,0BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,8CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,gCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,iBACR,CACDl5B,KAAM,iCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,sBAEd,CAEDphD,KAAM,wCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,mBAMTooB,EAA2B,CAC7BthD,KAAM,kBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,oCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,wCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,UACR,CACDl5B,KAAM,yBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,8BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,WACR,CACDl5B,KAAM,wCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,qBACR,CACDl5B,KAAM,mCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbM,UAAU,EACVtoB,QAAS,aACR,CAEDl5B,KAAM,6BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbM,UAAU,EACVvnC,MAAO,CAAC,CACNja,KAAM,uCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,gBAId,CACDl5B,KAAM,mCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,uCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,UACR,CACDl5B,KAAM,sCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,aAKXuoB,EAA2B,CAC7BzhD,KAAM,mBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,wBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,QACR,CACDl5B,KAAM,8BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,gBAuwBb,SAAS0mB,EAAKj8C,EAAIwC,GAChB,OAAOxC,EAAGvF,QAAQG,OAAO4H,GAAOvG,SAAStE,UAC3C,CAEA,SAASomD,EAAsBC,GAE7B,IAAIC,EACJ,GAAID,GAIF,KADAC,EAAe5nD,EAAImlD,KAAKplD,EAAK8nD,SAASF,KACpB,CAChB,IAAI/mD,EAAQ,IAAIL,MAAM,wBAKtB,MAJAK,EAAMknD,IAAMH,EACZ/mD,EAAMmnD,UAAY,CAChB,eAAgB,iBAAkB,iBAAkB,iBACpD,kBACInnD,CACR,OAVAgnD,EAAe,eAYjB,OAAOI,EAA4BJ,EACrC,CAEA,SAASI,EAA4BJ,GACnC,IAAIK,EAAUnoD,EAAM6J,GACpB,OAAOi+C,GACP,IAAK,iBACHK,EAAUnoD,EAAM6J,GAAGu+C,OACrB,IAAK,eACL,IAAK,iBACL,IAAK,iBACL,IAAK,iBACHN,EAAeA,EAAap7C,OAAO,GAAGqP,cACtC,MACF,QACE,IAAIjb,EAAQ,IAAIL,MAAM,8BAKtB,MAJAK,EAAM4X,UAAYovC,EAClBhnD,EAAMmnD,UAAY,CAChB,eAAgB,iBAAkB,iBAAkB,iBACpD,kBACInnD,EAER,IAAIqnD,KAAaL,KAAgBK,GAC/B,MAAM,IAAI1nD,MAAM,2BAA6BqnD,GAE/C,OAAOK,EAAQL,GAAcjiD,QAC/B,CAzwBA3F,EAAImoD,sBAAwB,SAASrnD,EAAKs3B,EAAUz4B,IAElDA,EAAUA,GAAW,CAAC,GACdyoD,SAAWzoD,EAAQyoD,UAAY,EACvCzoD,EAAQmL,MAAQnL,EAAQmL,OAAS,KACjCnL,EAAQ6Y,UAAY7Y,EAAQ6Y,WAAa,SACzC7Y,EAAQioD,aAAejoD,EAAQioD,cAAgB,OAG/C,IAGIS,EACA5vC,EACA6vC,EALAC,EAAOzoD,EAAMoE,OAAOC,aAAaxE,EAAQyoD,UACzCt9C,EAAQnL,EAAQmL,MAChB09C,EAAazoD,EAAK0oD,aAAa39C,GAInC,GAAwC,IAArCnL,EAAQ6Y,UAAUqN,QAAQ,QAAsC,QAAtBlmB,EAAQ6Y,UAAqB,CAExE,IAAIkwC,EAAOC,EAAQC,EACnB,OAAOjpD,EAAQ6Y,WACf,IAAK,SACH6vC,EAAQ,GACRK,EAAQ,GACRC,EAASxD,EAAK,cACdyD,EAAW9oD,EAAMsG,IAAIqJ,uBACrB,MACF,IAAK,SACH44C,EAAQ,GACRK,EAAQ,GACRC,EAASxD,EAAK,cACdyD,EAAW9oD,EAAMsG,IAAIqJ,uBACrB,MACF,IAAK,SACH44C,EAAQ,GACRK,EAAQ,GACRC,EAASxD,EAAK,cACdyD,EAAW9oD,EAAMsG,IAAIqJ,uBACrB,MACF,IAAK,MACH44C,EAAQ,EACRK,EAAQ,EACRC,EAASxD,EAAa,OACtByD,EAAW9oD,EAAM6iD,IAAIlzC,uBACrB,MACF,QAGE,MAFI7O,EAAQ,IAAIL,MAAM,8DAChBiY,UAAY7Y,EAAQ6Y,UACpB5X,EAIR,IAAIgnD,EAAe,WAAajoD,EAAQioD,aAAa3yC,cACjDtL,EAAKq+C,EAA4BJ,GAGjCrP,EAAKz4C,EAAM+oD,MAAMC,OAAO1wB,EAAUmwB,EAAMz9C,EAAOu9C,EAAO1+C,GACtDlH,EAAK3C,EAAMoE,OAAOC,aAAaukD,IAC/BtmD,EAASwmD,EAASrQ,IACfn0C,MAAM3B,GACbL,EAAOmC,OAAOxE,EAAKqB,MAAMN,IACzBsB,EAAOoC,SACP8jD,EAAgBlmD,EAAOkC,OAAOhD,WAG9B,IAAIynD,EA4sBR,SAA4BR,EAAMC,EAAYH,EAAOT,GACnD,IAAImB,EAAShpD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEvElnD,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAAOkB,GAEtDxoD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDiB,EAAWlnD,cAGK,iBAAjBsmD,GACDmB,EAAO9oC,MAAMpR,KAEX9O,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDznD,EAAMU,KAAKsX,WAAWuwC,EAAM97C,SAAS,MAEvCxM,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAKyC,IAAetmD,YAExCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,OAG/D,OAAOF,CACT,CAruBiBG,CAAmBX,EAAMC,EAAYH,EAAOT,GAEzDnvC,EAAsB1Y,EAAK4F,OACzB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAChDlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAS7D,EAAiB,YAAG7jD,YACpCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAC1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAS7D,EAAkB,aAAG7jD,YAErCynD,IAGFhpD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAC1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASL,GAAQrnD,YAExBvB,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAAO5kD,QAI9D,KAAO,CA2BL,IAAI7B,EA3BC,GAAyB,SAAtBjB,EAAQ6Y,UA6BhB,MAFI5X,EAAQ,IAAIL,MAAM,8DAChBiY,UAAY7Y,EAAQ6Y,UACpB5X,EA3BNynD,EAAQ,GAER,IAGIjmD,EAHA+mD,EAAY,IAAIrpD,EAAMU,KAAK6T,WAAWk0C,GACtChQ,EAAKv4C,EAAI2mD,IAAIyC,kBAAkBhxB,EAAU+wB,EAAW,EAAGr+C,EAAOu9C,GAC9D5lD,EAAKzC,EAAI2mD,IAAIyC,kBAAkBhxB,EAAU+wB,EAAW,EAAGr+C,EAAOu9C,IAC9DjmD,EAAStC,EAAM6iD,IAAIlzC,uBAAuB8oC,IACvCn0C,MAAM3B,GACbL,EAAOmC,OAAOxE,EAAKqB,MAAMN,IACzBsB,EAAOoC,SACP8jD,EAAgBlmD,EAAOkC,OAAOhD,WAE9BmX,EAAsB1Y,EAAK4F,OACzB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAChDlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAS7D,EAAK,oCAAoC7jD,YAEzDvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAAOkB,GAEhExoD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDiB,EAAWlnD,eAOnB,CAUA,OAPWvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAErExuC,EAEA1Y,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAAOiB,IAG1D,EAUAtoD,EAAIqpD,sBAAwB,SAASvoD,EAAKs3B,GACxC,IAAI70B,EAAO,KAGP27B,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASzoD,EAAK8lD,EAA8B1nB,EAASoqB,GAAS,CACrE,IAAI1oD,EAAQ,IAAIL,MAAM,+FAGtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CAGA,IAAIknD,EAAM/nD,EAAK8nD,SAAS3oB,EAAQsqB,eAC5BpnD,EAASpC,EAAI2mD,IAAI8C,UAAU3B,EAAK5oB,EAAQwqB,iBAAkBtxB,GAG1Dhf,EAAYtZ,EAAMU,KAAKC,aAAay+B,EAAQopB,eAOhD,OALAlmD,EAAOmC,OAAO6U,GACXhX,EAAOoC,WACRjB,EAAOxD,EAAKgB,QAAQqB,EAAOkC,SAGtBf,CACT,EAUAvD,EAAI2pD,yBAA2B,SAASC,EAAMzoD,GAE5C,IAAIhB,EAAM,CACRG,KAAM,wBACNI,KAAMX,EAAKqB,MAAMwoD,GAAMtoD,YAEzB,OAAOxB,EAAMI,IAAIqB,OAAOpB,EAAK,CAACgB,QAASA,GACzC,EAUAnB,EAAI6pD,2BAA6B,SAAS3pD,GACxC,IAAIC,EAAML,EAAMI,IAAIE,OAAOF,GAAK,GAEhC,GAAgB,0BAAbC,EAAIG,KAAkC,CACvC,IAAIM,EAAQ,IAAIL,MAAM,iGAGtB,MADAK,EAAMC,WAAaV,EAAIG,KACjBM,CACR,CACA,GAAGT,EAAIE,UAAkC,cAAtBF,EAAIE,SAASC,KAC9B,MAAM,IAAIC,MAAM,uEAKlB,OAAOR,EAAKgB,QAAQZ,EAAIO,KAC1B,EA4BAV,EAAI0Z,qBAAuB,SAASowC,EAAQ1xB,EAAUz4B,GAGpD,KADAA,EAAUA,GAAW,CAAC,GACVga,OAAQ,CAElB,IAAIpW,EAAOvD,EAAI+pD,kBAAkB/pD,EAAIqB,iBAAiByoD,IAEtD,OADAvmD,EAAOvD,EAAImoD,sBAAsB5kD,EAAM60B,EAAUz4B,GAC1CK,EAAI2pD,yBAAyBpmD,EACtC,CAGA,IAAIiV,EACA/V,EACA4lD,EACAO,EACJ,OAAOjpD,EAAQ6Y,WACf,IAAK,SACHA,EAAY,cACZ6vC,EAAQ,GACR5lD,EAAK3C,EAAMoE,OAAOC,aAAa,IAC/BykD,EAAW9oD,EAAMsG,IAAIqJ,uBACrB,MACF,IAAK,SACH+I,EAAY,cACZ6vC,EAAQ,GACR5lD,EAAK3C,EAAMoE,OAAOC,aAAa,IAC/BykD,EAAW9oD,EAAMsG,IAAIqJ,uBACrB,MACF,IAAK,SACH+I,EAAY,cACZ6vC,EAAQ,GACR5lD,EAAK3C,EAAMoE,OAAOC,aAAa,IAC/BykD,EAAW9oD,EAAMsG,IAAIqJ,uBACrB,MACF,IAAK,OACH+I,EAAY,eACZ6vC,EAAQ,GACR5lD,EAAK3C,EAAMoE,OAAOC,aAAa,GAC/BykD,EAAW9oD,EAAM6iD,IAAIlzC,uBACrB,MACF,IAAK,MACH+I,EAAY,UACZ6vC,EAAQ,EACR5lD,EAAK3C,EAAMoE,OAAOC,aAAa,GAC/BykD,EAAW9oD,EAAM6iD,IAAIlzC,uBACrB,MACF,QACE,IAAI7O,EAAQ,IAAIL,MAAM,wEACOZ,EAAQ6Y,UAAY,MAEjD,MADA5X,EAAM4X,UAAY7Y,EAAQ6Y,UACpB5X,EAIR,IACIwB,EAASwmD,EADJ9oD,EAAM6mD,IAAIqD,mBAAmB5xB,EAAU31B,EAAG+J,OAAO,EAAG,GAAI67C,IAEjEjmD,EAAOgC,MAAM3B,GACbL,EAAOmC,OAAOxE,EAAKqB,MAAMpB,EAAIqB,iBAAiByoD,KAC9C1nD,EAAOoC,SAEP,IAAIrE,EAAM,CACRG,KAAM,kBACND,SAAU,CACRyD,QAAS,IACTxD,KAAM,aAER2pD,QAAS,CACPzxC,UAAWA,EACX0xC,WAAYpqD,EAAMU,KAAK0lD,WAAWzjD,GAAIwS,eAExCvU,KAAM0B,EAAOkC,OAAOhD,YAEtB,OAAOxB,EAAMI,IAAIqB,OAAOpB,EAC1B,EAUAH,EAAImqD,qBAAuB,SAASjqD,EAAKk4B,GACvC,IAAI70B,EAAO,KAEPpD,EAAML,EAAMI,IAAIE,OAAOF,GAAK,GAEhC,GAAgB,0BAAbC,EAAIG,MACQ,gBAAbH,EAAIG,MACS,oBAAbH,EAAIG,KAIJ,MAHIM,EAAQ,IAAIL,MAAM,iIAEhBM,WAAaD,EACbA,EAGR,GAAGT,EAAIE,UAAkC,cAAtBF,EAAIE,SAASC,KAAsB,CACpD,IAAI+nD,EACAO,EACJ,OAAOzoD,EAAI8pD,QAAQzxC,WACnB,IAAK,UACH6vC,EAAQ,EACRO,EAAW9oD,EAAM6iD,IAAIhzC,uBACrB,MACF,IAAK,eACH04C,EAAQ,GACRO,EAAW9oD,EAAM6iD,IAAIhzC,uBACrB,MACF,IAAK,cACH04C,EAAQ,GACRO,EAAW9oD,EAAMsG,IAAIuJ,uBACrB,MACF,IAAK,cACH04C,EAAQ,GACRO,EAAW9oD,EAAMsG,IAAIuJ,uBACrB,MACF,IAAK,cACH04C,EAAQ,GACRO,EAAW9oD,EAAMsG,IAAIuJ,uBACrB,MACF,IAAK,aACH04C,EAAQ,EACRO,EAAW,SAAS1nD,GAClB,OAAOpB,EAAM4N,IAAIiC,uBAAuBzO,EAAK,GAC/C,EACA,MACF,IAAK,aACHmnD,EAAQ,EACRO,EAAW,SAAS1nD,GAClB,OAAOpB,EAAM4N,IAAIiC,uBAAuBzO,EAAK,GAC/C,EACA,MACF,IAAK,cACHmnD,EAAQ,GACRO,EAAW,SAAS1nD,GAClB,OAAOpB,EAAM4N,IAAIiC,uBAAuBzO,EAAK,IAC/C,EACA,MACF,QACE,IAAIN,EAGJ,MAHIA,EAAQ,IAAIL,MAAM,oEACOJ,EAAI8pD,QAAQzxC,UAAY,OAC/CA,UAAYrY,EAAI8pD,QAAQzxC,UACxB5X,EAIR,IAAI6B,EAAK3C,EAAMU,KAAKsX,WAAW3X,EAAI8pD,QAAQC,YAEvC9nD,EAASwmD,EADJ9oD,EAAM6mD,IAAIqD,mBAAmB5xB,EAAU31B,EAAG+J,OAAO,EAAG,GAAI67C,IAIjE,GAFAjmD,EAAOgC,MAAM3B,GACbL,EAAOmC,OAAOzE,EAAMU,KAAKC,aAAaN,EAAIO,QACvC0B,EAAOoC,SAGR,OAAOjB,EAFPA,EAAOnB,EAAOkC,OAAOhD,UAIzB,MACEiC,EAAOpD,EAAIO,KAcb,OAJY,QANV6C,EADc,0BAAbpD,EAAIG,KACEN,EAAIqpD,sBAAsBtpD,EAAKgB,QAAQwC,GAAO60B,GAG9Cr4B,EAAKgB,QAAQwC,MAIpBA,EAAOvD,EAAIgB,mBAAmBuC,IAGzBA,CACT,EAeAvD,EAAI2mD,IAAIyC,kBAAoB,SAAShxB,EAAUmwB,EAAMxiD,EAAIqkD,EAAM5iD,EAAGmC,GAChE,IAAI4E,EAAGpH,EAEP,GAAiB,qBAAPwC,GAA6B,OAAPA,EAAa,CAC3C,KAAK,SAAU7J,EAAM6J,IACnB,MAAM,IAAIpJ,MAAM,sCAElBoJ,EAAK7J,EAAM6J,GAAGwO,KAAKxS,QACrB,CAEA,IAAI05B,EAAI11B,EAAG2K,aACP6G,EAAIxR,EAAG0gD,YACPC,EAAS,IAAIxqD,EAAMU,KAAK6T,WAGxBk2C,EAAU,IAAIzqD,EAAMU,KAAK6T,WAC7B,GAAgB,OAAb+jB,QAAkCoyB,IAAbpyB,EAAwB,CAC9C,IAAIjxB,EAAI,EAAGA,EAAIixB,EAAS1zB,OAAQyC,IAC9BojD,EAAQE,SAASryB,EAASsyB,WAAWvjD,IAEvCojD,EAAQE,SAAS,EACnB,CAGA,IAAI9iD,EAAI4iD,EAAQ7lD,SACZpB,EAAIilD,EAAK7jD,SAITi6B,EAAI,IAAI7+B,EAAMU,KAAK6T,WACvBsqB,EAAE55B,aAAagB,EAAIoV,GAMnB,IAAIwvC,EAAOxvC,EAAIpQ,KAAKkD,KAAK3K,EAAI6X,GACzB06B,EAAI,IAAI/1C,EAAMU,KAAK6T,WACvB,IAAIlN,EAAI,EAAGA,EAAIwjD,EAAMxjD,IACnB0uC,EAAEnqC,QAAQ68C,EAAKljD,GAAG8B,EAAI7D,IAOxB,IAAIsnD,EAAOzvC,EAAIpQ,KAAKkD,KAAKtG,EAAIwT,GACzBiwB,EAAI,IAAItrC,EAAMU,KAAK6T,WACvB,IAAIlN,EAAI,EAAGA,EAAIyjD,EAAMzjD,IACnBikC,EAAE1/B,QAAQ6+C,EAAQllD,GAAG8B,EAAIQ,IAI3B,IAAIk9B,EAAIgR,EACRhR,EAAEv1B,UAAU87B,GAMZ,IAHA,IAAIxpC,EAAImJ,KAAKkD,KAAKzG,EAAI63B,GAGdj6B,EAAI,EAAGA,GAAKxD,EAAGwD,IAAK,CAE1B,IAAIylD,EAAM,IAAI/qD,EAAMU,KAAK6T,WACzBw2C,EAAIjnD,SAAS+6B,EAAExyB,SACf0+C,EAAIjnD,SAASihC,EAAE14B,SACf,IAAI,IAAI2+C,EAAQ,EAAGA,EAAQV,EAAMU,IAC/BnhD,EAAGvF,QACHuF,EAAGpF,OAAOsmD,EAAIvpD,YACdupD,EAAMlhD,EAAG/D,SAKX,IAAI0kB,EAAI,IAAIxqB,EAAMU,KAAK6T,WACvB,IAAIlN,EAAI,EAAGA,EAAIgU,EAAGhU,IAChBmjB,EAAE5e,QAAQm/C,EAAIxlD,GAAG8B,EAAIk4B,IAMvB,IAAIr4B,EAAI+D,KAAKkD,KAAK3K,EAAI6X,GAAKpQ,KAAKkD,KAAKtG,EAAIwT,GACrC4vC,EAAO,IAAIjrD,EAAMU,KAAK6T,WAC1B,IAAI9F,EAAI,EAAGA,EAAIvH,EAAGuH,IAAK,CACrB,IAAIy8C,EAAQ,IAAIlrD,EAAMU,KAAK6T,WAAWwwB,EAAEvjC,SAAS6Z,IAC7CzO,EAAI,IACR,IAAIvF,EAAImjB,EAAE5lB,SAAW,EAAGyC,GAAK,EAAGA,IAC9BuF,IAAS,EACTA,GAAK4d,EAAEjlB,GAAG8B,GAAK6jD,EAAM3lD,GAAG8B,GACxB6jD,EAAM78C,MAAMhH,EAAO,IAAJuF,GAEjBq+C,EAAKz7C,UAAU07C,EACjB,CACAnmB,EAAIkmB,EAGJT,EAAOh7C,UAAUu7C,EACnB,CAGA,OADAP,EAAOhlD,SAASglD,EAAO5lD,SAAW8C,GAC3B8iD,CACT,EAWAtqD,EAAI2mD,IAAI8C,UAAY,SAAS3B,EAAKiB,EAAQ3wB,GACxC,OAAO0vB,GACP,KAAK9nD,EAAImlD,KAAiB,WACxB,OAAOnlD,EAAI2mD,IAAIsE,kBAAkBnD,EAAKiB,EAAQ3wB,GAEhD,KAAKp4B,EAAImlD,KAAK,mCACd,KAAKnlD,EAAImlD,KAAK,6BACZ,OAAOnlD,EAAI2mD,IAAIuE,sBAAsBpD,EAAKiB,EAAQ3wB,GAEpD,QACE,IAAIx3B,EAAQ,IAAIL,MAAM,0DAOtB,MANAK,EAAMknD,IAAMA,EACZlnD,EAAMuqD,cAAgB,CACpB,aACA,kCACA,6BAEIvqD,EAEV,EAcAZ,EAAI2mD,IAAIsE,kBAAoB,SAASnD,EAAKiB,EAAQ3wB,GAEhD,IAwBMx3B,EAxBFs+B,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASR,EAAQzB,EAA0BpoB,EAASoqB,GAI3D,MAHI1oD,EAAQ,IAAIL,MAAM,yHAEhB+oD,OAASA,EACT1oD,EAKR,IADAknD,EAAM/nD,EAAK8nD,SAAS3oB,EAAQksB,WACjBprD,EAAImlD,KAAkB,YAK/B,MAJIvkD,EAAQ,IAAIL,MAAM,gFAEhBunD,IAAMA,EACZlnD,EAAMuqD,cAAgB,CAAC,eACjBvqD,EAGR,IADAknD,EAAM/nD,EAAK8nD,SAAS3oB,EAAQypB,WACjB3oD,EAAImlD,KAAK,eAClB2C,IAAQ9nD,EAAImlD,KAAK,eACjB2C,IAAQ9nD,EAAImlD,KAAK,eACjB2C,IAAQ9nD,EAAImlD,KAAK,iBACjB2C,IAAQ9nD,EAAImlD,KAAa,OAMzB,MALIvkD,EAAQ,IAAIL,MAAM,0EAEhBunD,IAAMA,EACZlnD,EAAMuqD,cAAgB,CACpB,aAAc,aAAc,aAAc,eAAgB,UACtDvqD,EAIR,IAGIynD,EACAO,EAJAL,EAAOrpB,EAAQmsB,QACfvgD,EAAQhL,EAAMU,KAAKC,aAAay+B,EAAQosB,mBAI5C,OAHAxgD,EAAQA,EAAMygD,OAAOzgD,EAAMpG,UAAY,GAGhC1E,EAAImlD,KAAK2C,IAChB,IAAK,aACHO,EAAQ,GACRO,EAAW9oD,EAAMsG,IAAIuJ,uBACrB,MACF,IAAK,aACH04C,EAAQ,GACRO,EAAW9oD,EAAMsG,IAAIuJ,uBACrB,MACF,IAAK,aACH04C,EAAQ,GACRO,EAAW9oD,EAAMsG,IAAIuJ,uBACrB,MACF,IAAK,eACH04C,EAAQ,GACRO,EAAW9oD,EAAM6iD,IAAIhzC,uBACrB,MACF,IAAK,SACH04C,EAAQ,EACRO,EAAW9oD,EAAM6iD,IAAIhzC,uBAKvB,IAAIhG,EAAK+9C,EAAsBxoB,EAAQyoB,QAGnCpP,EAAKz4C,EAAM+oD,MAAMC,OAAO1wB,EAAUmwB,EAAMz9C,EAAOu9C,EAAO1+C,GACtDlH,EAAKy8B,EAAQssB,MACbppD,EAASwmD,EAASrQ,GAGtB,OAFAn2C,EAAOgC,MAAM3B,GAENL,CACT,EAcApC,EAAI2mD,IAAIuE,sBAAwB,SAASpD,EAAKiB,EAAQ3wB,GAEpD,IAAI8G,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASR,EAAQtB,EAA0BvoB,EAASoqB,GAI3D,MAHI1oD,EAAQ,IAAIL,MAAM,yHAEhB+oD,OAASA,EACT1oD,EAGR,IAIIynD,EAAOoD,EAAQ7C,EAJfL,EAAOzoD,EAAMU,KAAKC,aAAay+B,EAAQqpB,MACvCz9C,EAAQhL,EAAMU,KAAKC,aAAay+B,EAAQ8kB,YAI5C,OAHAl5C,EAAQA,EAAMygD,OAAOzgD,EAAMpG,UAAY,GAGhCojD,GACL,KAAK9nD,EAAImlD,KAAK,mCACZkD,EAAQ,GACRoD,EAAS,EACT7C,EAAW9oD,EAAM6iD,IAAIjzC,gBACrB,MAEF,KAAK1P,EAAImlD,KAAK,6BACZkD,EAAQ,EACRoD,EAAS,EACT7C,EAAW,SAAS1nD,EAAKuB,GACvB,IAAIL,EAAStC,EAAM4N,IAAIiC,uBAAuBzO,EAAK,IAEnD,OADAkB,EAAOgC,MAAM3B,EAAI,MACVL,CACT,EACA,MAEF,QACE,IAAIxB,EAEJ,MAFIA,EAAQ,IAAIL,MAAM,0DAChBunD,IAAMA,EACNlnD,EAIV,IAAI+I,EAAK+9C,EAAsBxoB,EAAQyoB,QACnCzmD,EAAMlB,EAAI2mD,IAAIyC,kBAAkBhxB,EAAUmwB,EAAM,EAAGz9C,EAAOu9C,EAAO1+C,GAIrE,OAHAA,EAAGvF,QAGIwkD,EAAS1nD,EAFPlB,EAAI2mD,IAAIyC,kBAAkBhxB,EAAUmwB,EAAM,EAAGz9C,EAAO2gD,EAAQ9hD,GAGvE,EAaA3J,EAAI2mD,IAAIqD,mBAAqB,SAAS5xB,EAAUmwB,EAAMF,EAAO1+C,GAC3D,GAAiB,qBAAPA,GAA6B,OAAPA,EAAa,CAC3C,KAAK,QAAS7J,EAAM6J,IAClB,MAAM,IAAIpJ,MAAM,qCAElBoJ,EAAK7J,EAAM6J,GAAGkQ,IAAIlU,QACpB,CACY,OAAT4iD,IACDA,EAAO,IAGT,IADA,IAAImD,EAAU,CAAC9F,EAAKj8C,EAAIyuB,EAAWmwB,IAC3B7jD,EAAS,GAAIU,EAAI,EAAGV,EAAS2jD,IAASjjD,EAAGV,GAAU,GACzDgnD,EAAQ78C,KAAK+2C,EAAKj8C,EAAI+hD,EAAQtmD,EAAI,GAAKgzB,EAAWmwB,IAEpD,OAAOmD,EAAQxxC,KAAK,IAAI1N,OAAO,EAAG67C,EACpC,C,iBCp1BA,IAAIvoD,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAGR,IAAIE,EAAOD,EAAMC,KACbC,EAAMF,EAAME,IAGZ2rD,EAAMlsD,EAAOC,QAAUI,EAAM8rD,OAAS9rD,EAAM8rD,QAAU,CAAC,EAEvDC,EAAuB,CACzB7lD,KAAM,cACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,0BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,eACR,CACDl5B,KAAM,sBACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrB5E,aAAa,EACbE,YAAa,aAIb2E,EAAe,CACjB/lD,KAAM,MACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,cACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,WAEX2sB,EAAsB,CACpB7lD,KAAM,cACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbM,UAAU,EACVJ,YAAa,MACbnnC,MAAO,CAAC,CACNja,KAAM,kBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,kCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,4CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,gBACR,CACDl5B,KAAM,6CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBK,YAAa,4BAEd,CACDphD,KAAM,yBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,eAEV,CACDl5B,KAAM,sBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,WACR,CACDl5B,KAAM,yBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbM,UAAU,EACVtoB,QAAS,qBAKX8sB,EAAmB,CACrBhmD,KAAM,UACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,gBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,SACR,CACDl5B,KAAM,mBACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrB5E,aAAa,EACbE,YAAa,YACZ,CACDphD,KAAM,wBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKiF,IAChB/E,aAAa,EACbM,UAAU,EACVtoB,QAAS,mBAITgtB,EAAqB,CACvBlmD,KAAM,YACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,mBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,OACR,CACDl5B,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKiF,IAChB/E,aAAa,EACbhoB,QAAS,YAITitB,EAAmB,CACrBnmD,KAAM,UACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,iBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,UACR,CACDl5B,KAAM,oBACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrB5E,aAAa,EAGbjnC,MAAO,CAAC,CACNja,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAK+mD,MAAMO,YACjBH,aAAa,EACbhoB,QAAS,YAiBf,SAASktB,EAAoBC,EAAcC,EAAUC,EAAWC,GAG9D,IAFA,IAAIlC,EAAS,GAELllD,EAAI,EAAGA,EAAIinD,EAAa3nD,OAAQU,IACtC,IAAI,IAAImJ,EAAI,EAAGA,EAAI89C,EAAajnD,GAAGqnD,SAAS/nD,OAAQ6J,IAAK,CACvD,IAAIm+C,EAAML,EAAajnD,GAAGqnD,SAASl+C,QACpBi8C,IAAZgC,GAAyBE,EAAIpsD,OAASksD,IAIzB,OAAbF,OAI6B9B,IAA7BkC,EAAIC,WAAWL,IAChBI,EAAIC,WAAWL,GAAUzmC,QAAQ0mC,IAAc,GAC/CjC,EAAOz7C,KAAK69C,GALZpC,EAAOz7C,KAAK69C,GAOhB,CAGF,OAAOpC,CACT,CA8LA,SAASsC,EAAiB1/C,GAGxB,GAAGA,EAAK2/C,UAAY3/C,EAAKg6C,YAAa,CAEpC,IADA,IAAIjnC,EAAQngB,EAAMU,KAAKC,eACf2E,EAAI,EAAGA,EAAI8H,EAAK+S,MAAMvb,SAAUU,EACtC6a,EAAMrc,SAASsJ,EAAK+S,MAAM7a,GAAG6a,OAE/B/S,EAAK2/C,SAAW3/C,EAAKg6C,aAAc,EACnCh6C,EAAK+S,MAAQA,EAAM3e,UACrB,CACA,OAAO4L,CACT,CAsEA,SAAS4/C,EAAqB5/C,EAAMkrB,GAClC,IAAI8G,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SACPr8C,EAAMpN,EAAMitD,MAAMhtD,KAAKitD,uBAAwB9tB,EAASoqB,GAGxD,MAFI1oD,EAAQ,IAAIL,MAAM,sCAChB+oD,OAASA,EACT1oD,EAGR,IAEMA,EAFFknD,EAAM/nD,EAAK8nD,SAAS3oB,EAAQ+tB,aAChC,GAAGnF,IAAQ9nD,EAAImlD,KAAKj4C,KAIlB,MAHItM,EAAQ,IAAIL,MACd,0DACIunD,IAAMA,EACNlnD,EAIRknD,EAAM/nD,EAAK8nD,SAAS3oB,EAAQguB,cAC5B,IAAI9qD,EAASpC,EAAI2mD,IAAI8C,UAAU3B,EAAK5oB,EAAQiuB,aAAc/0B,GAGtDg1B,EAAuBR,EAAiB1tB,EAAQkuB,sBAChDh0C,EAAYtZ,EAAMU,KAAKC,aAAa2sD,EAAqBntC,OAG7D,GADA7d,EAAOmC,OAAO6U,IACVhX,EAAOoC,SACT,MAAM,IAAIjE,MAAM,2CAGlB,OAAO6B,EAAOkC,OAAOhD,UACvB,CAaA,SAAS+rD,EAAoBhB,EAAciB,EAAQl1B,GAEjD,IAAIk1B,GAAkC,IAAxBjB,EAAa3nD,OACzB,MAAO,GAMT,IAFA2nD,EAAetsD,EAAKgB,QAAQsrD,EAAciB,IAE1BzG,WAAa9mD,EAAK+mD,MAAMC,WACtCsF,EAAa/rD,OAASP,EAAKinD,KAAKC,WACH,IAA7BoF,EAAanF,YACb,MAAM,IAAI3mD,MACR,8DAIJ,IADA,IAAIgtD,EAAM,GACFnoD,EAAI,EAAGA,EAAIinD,EAAapsC,MAAMvb,OAAQU,IAAK,CACjD,IAAIooD,EAAUnB,EAAapsC,MAAM7a,GAG7B85B,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASiE,EAASxB,EAAkB9sB,EAASoqB,GAGpD,MAFI1oD,EAAQ,IAAIL,MAAM,yBAChB+oD,OAASA,EACT1oD,EAIR,IAMI6sD,EAAWC,EANXhB,EAAM,CACRpsD,KAAMP,EAAK8nD,SAAS3oB,EAAQyuB,OAC5BhB,WAAYiB,EAAqB1uB,EAAQ2uB,gBAE3CN,EAAI1+C,KAAK69C,GAGT,IAAIoB,EAAU5uB,EAAQ6uB,SAAS9tC,MAAM,GACrC,OAAOysC,EAAIpsD,MACT,KAAKN,EAAImlD,KAAK6I,oBAKZ,GAAe,QADfF,EAAU9tD,EAAIqpD,sBAAsByE,EAAS11B,IAE3C,MAAM,IAAI73B,MACR,4DAIN,KAAKP,EAAImlD,KAAK8I,OAIZ,IACEvB,EAAIxrD,IAAMlB,EAAIgB,mBAAmB8sD,EACnC,CAAE,MAAM1lD,GAENskD,EAAIxrD,IAAM,KACVwrD,EAAI3sD,KAAO+tD,CACb,CACA,SAEF,KAAK9tD,EAAImlD,KAAK+I,QAIZT,EAAYtB,EACZuB,EAAU,WACR,GAAG3tD,EAAK8nD,SAAS3oB,EAAQivB,UAAYnuD,EAAImlD,KAAKiJ,gBAAiB,CAC7D,IAAIxtD,EAAQ,IAAIL,MACd,uDAEF,MADAK,EAAMknD,IAAM/nD,EAAK8nD,SAAS3oB,EAAQivB,QAC5BvtD,CACR,CAGA,IAAIytD,EAAWtuD,EAAKgB,QAAQm+B,EAAQovB,KAAMhB,GAC1C,IACEZ,EAAI4B,KAAOtuD,EAAIuuD,oBAAoBF,GAAU,EAC/C,CAAE,MAAMjmD,GAENskD,EAAI4B,KAAO,KACX5B,EAAI3sD,KAAOsuD,CACb,CACF,EACA,MAEF,QACE,IAAIztD,EAEJ,MAFIA,EAAQ,IAAIL,MAAM,sCAChBunD,IAAM4E,EAAIpsD,KACVM,EAIV,QAAiB4pD,IAAdiD,IACC1tD,EAAKwpD,SAASuE,EAASL,EAAWvuB,EAASoqB,GAG7C,MAFI1oD,EAAQ,IAAIL,MAAM,uBAAyBktD,EAAUznD,OACnDsjD,OAASA,EACT1oD,EAIR8sD,GACF,CAEA,OAAOH,CACT,CASA,SAASK,EAAqBjB,GAC5B,IAAI6B,EAAe,CAAC,EAEpB,QAAkBhE,IAAfmC,EACD,IAAI,IAAIvnD,EAAI,EAAGA,EAAIunD,EAAWjoD,SAAUU,EAAG,CACzC,IAAI85B,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASoD,EAAWvnD,GAAI8mD,EAAoBhtB,EAASoqB,GAAS,CACrE,IAAI1oD,EAAQ,IAAIL,MAAM,qCAEtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CAEA,IAAIknD,EAAM/nD,EAAK8nD,SAAS3oB,EAAQ4oB,KAChC,QAAqB0C,IAAlBxqD,EAAImlD,KAAK2C,GAAZ,CAKA0G,EAAaxuD,EAAImlD,KAAK2C,IAAQ,GAC9B,IAAI,IAAIv5C,EAAI,EAAGA,EAAI2wB,EAAQuvB,OAAO/pD,SAAU6J,EAC1CigD,EAAaxuD,EAAImlD,KAAK2C,IAAMj5C,KAAKqwB,EAAQuvB,OAAOlgD,GAAG0R,MAJrD,CAMF,CAGF,OAAOuuC,CACT,CAjcA7C,EAAI+C,eAAiB,SAAS5tD,EAAKwsD,EAAQl1B,GAEpB,kBAAXk1B,GACRl1B,EAAWk1B,EACXA,GAAS,QACU9C,IAAX8C,IACRA,GAAS,GAIX,IAAIpuB,EAAU,CAAC,EAEf,IAAIn/B,EAAKwpD,SAASzoD,EAAKirD,EAAc7sB,EADxB,IAKX,MAHIt+B,EAAQ,IAAIL,MAAM,iEAEhB+oD,OAAS1oD,EACTA,EAGR,IAsFMA,EAtFF+tD,EAAM,CACR7qD,QAASo7B,EAAQp7B,QAAQ4mD,WAAW,GACpC2B,aAAc,GAeduC,QAAS,SAASC,GAChB,IAEIC,EAFAvrD,EAAO,CAAC,EA2BZ,MAxBG,eAAgBsrD,EACjBC,EAAaD,EAAOC,WACZ,kBAAmBD,IAC3BC,EAAahvD,EAAMU,KAAKsX,WAAW+2C,EAAOE,qBAI1BvE,IAAfsE,KAA8B,iBAAkBD,IACjD,YAAaA,IACbtrD,EAAKsrD,EAAOrC,SAAWJ,EACrBuC,EAAItC,aAAc,KAAM,KAAMwC,EAAOrC,eAGvBhC,IAAfsE,IACDvrD,EAAKurD,WAAa1C,EAChBuC,EAAItC,aAAc,aAClByC,EAAYD,EAAOrC,UAEpB,iBAAkBqC,IACnBtrD,EAAKyrD,aAAe5C,EAClBuC,EAAItC,aAAc,eAClBwC,EAAOG,aAAcH,EAAOrC,UAGzBjpD,CACT,EAYA0rD,sBAAuB,SAASD,EAAcxC,GAC5C,OAAOJ,EACLuC,EAAItC,aAAc,eAAgB2C,EAAcxC,EACpD,EAYA0C,oBAAqB,SAASJ,EAAYtC,GACxC,OAAOJ,EACLuC,EAAItC,aAAc,aAAcyC,EAAYtC,EAChD,GAGF,GAAqC,IAAlCttB,EAAQp7B,QAAQ4mD,WAAW,GAG5B,MAFI9pD,EAAQ,IAAIL,MAAM,uDAChBuD,QAAUo7B,EAAQp7B,QAAQ4mD,WAAW,GACrC9pD,EAGR,GAAGb,EAAK8nD,SAAS3oB,EAAQ+tB,eAAiBjtD,EAAImlD,KAAKj4C,KAGjD,MAFItM,EAAQ,IAAIL,MAAM,2DAChBunD,IAAM/nD,EAAK8nD,SAAS3oB,EAAQ+tB,aAC5BrsD,EAGR,IAAIsM,EAAOgyB,EAAQiwB,QAAQlvC,MAAM,GACjC,GAAG/S,EAAK25C,WAAa9mD,EAAK+mD,MAAMC,WAC7B75C,EAAK5M,OAASP,EAAKinD,KAAKK,YACzB,MAAM,IAAI9mD,MAAM,yDAKlB,GAHA2M,EAAO0/C,EAAiB1/C,GAGrBgyB,EAAQ17B,IAAK,CACd,IAAImG,EAAK,KACLylD,EAAc,EACdC,EAAetvD,EAAK8nD,SAAS3oB,EAAQmwB,cACzC,OAAOA,GACP,KAAKrvD,EAAImlD,KAAKhtC,KACZxO,EAAK7J,EAAM6J,GAAGwO,KAAKxS,SACnBypD,EAAc,GACd,MACF,KAAKpvD,EAAImlD,KAAKhD,OACZx4C,EAAK7J,EAAM6J,GAAGw4C,OAAOx8C,SACrBypD,EAAc,GACd,MACF,KAAKpvD,EAAImlD,KAAKmK,OACZ3lD,EAAK7J,EAAM6J,GAAG2lD,OAAO3pD,SACrBypD,EAAc,GACd,MACF,KAAKpvD,EAAImlD,KAAK+C,OACZv+C,EAAK7J,EAAM6J,GAAGu+C,OAAOviD,SACrBypD,EAAc,GACd,MACF,KAAKpvD,EAAImlD,KAAKtrC,IACZlQ,EAAK7J,EAAM6J,GAAGkQ,IAAIlU,SAClBypD,EAAc,GAGhB,GAAU,OAAPzlD,EACD,MAAM,IAAIpJ,MAAM,2CAA6C8uD,GAI/D,IAAIE,EAAU,IAAIzvD,EAAMU,KAAK6T,WAAW6qB,EAAQqwB,SAC5CC,EAAkB,kBAAmBtwB,EACvCuwB,SAAS3vD,EAAMU,KAAK0lD,WAAWhnB,EAAQswB,eAAgB,IAAM,EAC3D/rD,EAASkoD,EAAI+D,YACft3B,EAAUm3B,EAAS,EAAGC,EAAeJ,EAAazlD,GAChDnG,EAAM1D,EAAM4F,KAAKC,SAIrB,GAHAnC,EAAIY,MAAMuF,EAAIlG,GACdD,EAAIe,OAAO2I,EAAK+S,OACDzc,EAAImsD,SACPruD,aAAe49B,EAAQ0wB,UACjC,MAAM,IAAIrvD,MAAM,uDAEpB,CAGA,OAuCF,SAAkCouD,EAAKkB,EAAUvC,EAAQl1B,GAGvD,GAFAy3B,EAAW9vD,EAAKgB,QAAQ8uD,EAAUvC,GAE/BuC,EAAShJ,WAAa9mD,EAAK+mD,MAAMC,WACjC8I,EAASvvD,OAASP,EAAKinD,KAAKC,WACH,IAAzB4I,EAAS3I,YACV,MAAM,IAAI3mD,MAAM,sEAIlB,IAAI,IAAI6E,EAAI,EAAGA,EAAIyqD,EAAS5vC,MAAMvb,OAAQU,IAAK,CAC7C,IAAI0qD,EAAcD,EAAS5vC,MAAM7a,GAG7B85B,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASuG,EAAajE,EAAsB3sB,EAASoqB,GAG5D,MAFI1oD,EAAQ,IAAIL,MAAM,6BAChB+oD,OAASA,EACT1oD,EAGR,IAAIE,EAAM,CACRsY,WAAW,GAETizC,EAAe,KACfn/C,EAAOgyB,EAAQiwB,QAAQlvC,MAAM,GACjC,OAAOlgB,EAAK8nD,SAAS3oB,EAAQ+tB,cAC7B,KAAKjtD,EAAImlD,KAAKj4C,KACZ,GAAGA,EAAK25C,WAAa9mD,EAAK+mD,MAAMC,WAC7B75C,EAAK5M,OAASP,EAAKinD,KAAKK,YACzB,MAAM,IAAI9mD,MAAM,qDAElB8rD,EAAeO,EAAiB1/C,GAAM+S,MACtC,MACF,KAAKjgB,EAAImlD,KAAKmD,cACZ+D,EAAeS,EAAqB5/C,EAAMkrB,GAC1Ct3B,EAAIsY,WAAY,EAChB,MACF,QACE,IAAIxY,EAEJ,MAFIA,EAAQ,IAAIL,MAAM,qCAChB0sD,YAAcltD,EAAK8nD,SAAS3oB,EAAQ+tB,aACpCrsD,EAGRE,EAAI2rD,SAAWY,EAAoBhB,EAAciB,EAAQl1B,GACzDu2B,EAAItC,aAAax9C,KAAK/N,EACxB,CACF,CAxFEivD,CAAyBpB,EAAKzhD,EAAK+S,MAAOqtC,EAAQl1B,GAC3Cu2B,CACT,EA2TAhD,EAAIqE,aAAe,SAAS9uD,EAAKotD,EAAMl2B,EAAUz4B,IAE/CA,EAAUA,GAAW,CAAC,GACdyoD,SAAWzoD,EAAQyoD,UAAY,EACvCzoD,EAAQmL,MAAQnL,EAAQmL,OAAS,KACjCnL,EAAQ6Y,UAAY7Y,EAAQ6Y,WAAa7Y,EAAQutD,cAAgB,SAC5D,WAAYvtD,IACfA,EAAQswD,QAAS,GAEd,eAAgBtwD,IACnBA,EAAQmvD,WAAa,MAElB,uBAAwBnvD,IAC3BA,EAAQuwD,oBAAqB,GAG/B,IACIC,EADArB,EAAanvD,EAAQmvD,WAEzB,GAAkB,OAAfA,EACDA,EAAahvD,EAAMU,KAAKsX,WAAWg3C,QAC9B,GAAGnvD,EAAQuwD,mBAEhB,GAAG5B,EAAM,CACP,IAAI8B,EAAatwD,EAAMU,KAAKsP,QAAQw+C,GAAQA,EAAK,GAAKA,EAC7B,kBAAf8B,IACRA,EAAapwD,EAAIqwD,mBAAmBD,KAElCj4C,EAAOrY,EAAM6J,GAAGwO,KAAKxS,UACpBpB,OAAOxE,EAAKqB,MAAMpB,EAAIswD,kBAAkBF,IAAa9uD,YAC1DwtD,EAAa32C,EAAKvS,SAAStE,UAC7B,MAIEwtD,EAAahvD,EAAMoE,OAAO5C,SAAS,IAIvC,IAAIivD,EAAQ,GACM,OAAfzB,GACDyB,EAAM1hD,KAEJ9O,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAK2J,YAAYxtD,YAErCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EAAM,CACrDlsD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EACvDyH,QAIP,iBAAkBnvD,GACnB4wD,EAAM1hD,KAEJ9O,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAK6J,cAAc1tD,YAEvCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EAAM,CACrDlsD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKwJ,WAAW,EACrD7wD,EAAQqvD,mBAKfuB,EAAM7rD,OAAS,IAChByrD,EAAWpwD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EAAMsE,IAIpE,IAAIE,EAAW,GAGXC,EAAQ,GACA,OAATpC,IAECoC,EADC5wD,EAAMU,KAAKsP,QAAQw+C,GACZA,EAEA,CAACA,IAKb,IADA,IAAIqC,EAAe,GACXvrD,EAAI,EAAGA,EAAIsrD,EAAMhsD,SAAUU,EAAG,CAGjB,kBADnBkpD,EAAOoC,EAAMtrD,MAEXkpD,EAAOtuD,EAAIqwD,mBAAmB/B,IAIhC,IAAIsC,EAAsB,IAANxrD,EAAW+qD,OAAW3F,EACtC6D,EAAWruD,EAAIswD,kBAAkBhC,GACjCuC,EACF9wD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAK+I,SAAS5sD,YAElCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAEhD/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAKiJ,iBAAiB9sD,YAE1CvB,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChD/rD,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAC7CtnD,EAAKqB,MAAMitD,GAAU/sD,kBAG7BsvD,IAEJD,EAAa9hD,KAAKgiD,EACpB,CAEA,GAAGF,EAAajsD,OAAS,EAAG,CAE1B,IAAIosD,EAAmB/wD,EAAK4F,OAC1B5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM0J,GAG9CI,EAEFhxD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAE/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAKj4C,MAAM5L,YAE/BvB,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChD/rD,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAC7CtnD,EAAKqB,MAAM0vD,GAAkBxvD,gBAGrCmvD,EAAS5hD,KAAKkiD,EAChB,CAGA,IAAI9C,EAAS,KACb,GAAW,OAAR/sD,EAAc,CAEf,IAAI8vD,EAAShxD,EAAI+pD,kBAAkB/pD,EAAIqB,iBAAiBH,IAGtD+sD,EAFc,OAAb71B,EAEQr4B,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEnElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAK8I,QAAQ3sD,YAEjCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAEhDkF,IAGFb,IAIOpwD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEnElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAK6I,qBAAqB1sD,YAE9CvB,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAEhD9rD,EAAImoD,sBAAsB6I,EAAQ54B,EAAUz4B,KAG9CwwD,IAKJ,IAAIc,EACFlxD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAACgH,IAG3DiD,EAEFnxD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAE/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAKj4C,MAAM5L,YAE/BvB,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChD/rD,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAC7CtnD,EAAKqB,MAAM6vD,GAAiB3vD,gBAGpCmvD,EAAS5hD,KAAKqiD,EAChB,CAGA,IAGIC,EAHAC,EAAOrxD,EAAK4F,OACd5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAMwJ,GAGlD,GAAG9wD,EAAQswD,OAAQ,CAEjB,IAAI93C,EAAOrY,EAAM6J,GAAGwO,KAAKxS,SACrB4pD,EAAU,IAAIzvD,EAAMU,KAAK6T,WAC3BvU,EAAMoE,OAAO5C,SAAS3B,EAAQyoD,WAC5Bt9C,EAAQnL,EAAQmL,MAGhBtH,GADAtC,EAAMyqD,EAAI+D,YAAYt3B,EAAUm3B,EAAS,EAAGzkD,EAAO,IAC7ChL,EAAM4F,KAAKC,UACrBnC,EAAIY,MAAM+T,EAAMjX,GAChBsC,EAAIe,OAAOxE,EAAKqB,MAAMgwD,GAAM9vD,YAC5B,IAAI+vD,EAAW7tD,EAAImsD,SACnBwB,EAAUpxD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEpElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAKhtC,MAAM7W,YAE/BvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,MAG3DlpD,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAChC,EAAOgK,EAAS/vD,cAGpBvB,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAAOkI,EAAQjuD,YAE9DvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAa39C,GAAOxJ,aAG/B,CAGA,OAAOvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAa,GAAGnnD,YAEvBvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAE/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAKj4C,MAAM5L,YAE/BvB,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChD/rD,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAC7CtnD,EAAKqB,MAAMgwD,GAAM9vD,gBAGvB6vD,GAEJ,EAeAxF,EAAI+D,YAAc5vD,EAAM6mD,IAAIyC,iB,iBC1iC5B,IAAItpD,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MAER,IAAIsY,EAAO1Y,EAAOC,QAAUI,EAAMqY,KAAOrY,EAAMqY,MAAQ,CAAC,EACxDrY,EAAM6J,GAAGwO,KAAOrY,EAAM6J,GAAG2nD,WAAWn5C,KAAOA,EAO3CA,EAAKxS,OAAS,WAER4rD,IAgLJC,EAAW7kD,OAAOC,aAAa,KAC/B4kD,GAAY1xD,EAAMU,KAAK+lD,WAAW55C,OAAOC,aAAa,GAAO,IAG7D2kD,GAAe,GA/Kf,IAAIE,EAAS,KAGThjD,EAAS3O,EAAMU,KAAKC,eAGpBixD,EAAK,IAAI7nD,MAAM,IAGfF,EAAK,CACP6O,UAAW,OACX6xC,YAAa,GACb/1C,aAAc,GAEdvK,cAAe,EAEf4nD,kBAAmB,KAEnBC,kBAAmB,EAQrBjoD,MAAW,WAETA,EAAGI,cAAgB,EAGnBJ,EAAGgoD,kBAAoBhoD,EAAGkoD,gBAAkB,GAE5C,IADA,IAAIC,EAASnoD,EAAGioD,kBAAoB,EAC5BxsD,EAAI,EAAGA,EAAI0sD,IAAU1sD,EAC3BuE,EAAGgoD,kBAAkB9iD,KAAK,GAU5B,OARAJ,EAAS3O,EAAMU,KAAKC,eACpBgxD,EAAS,CACPM,GAAI,WACJC,GAAI,WACJC,GAAI,WACJC,GAAI,UACJC,GAAI,YAECxoD,CACT,GAkHA,OAhHAA,EAAGvF,QAYHuF,EAAGpF,OAAS,SAASpE,EAAK2Z,GACR,SAAbA,IACD3Z,EAAML,EAAMU,KAAK4xD,WAAWjyD,IAI9B,IAAI8E,EAAM9E,EAAIuE,OACdiF,EAAGI,eAAiB9E,EACpBA,EAAM,CAAEA,EAAM,aAAiB,EAAGA,IAAQ,GAC1C,IAAI,IAAIG,EAAIuE,EAAGgoD,kBAAkBjtD,OAAS,EAAGU,GAAK,IAAKA,EACrDuE,EAAGgoD,kBAAkBvsD,IAAMH,EAAI,GAC/BA,EAAI,GAAKA,EAAI,IAAO0E,EAAGgoD,kBAAkBvsD,GAAK,aAAiB,GAC/DuE,EAAGgoD,kBAAkBvsD,GAAKuE,EAAGgoD,kBAAkBvsD,KAAO,EACtDH,EAAI,GAAOA,EAAI,GAAK,aAAiB,EAcvC,OAVAwJ,EAAO7K,SAASzD,GAGhBkyD,EAAQZ,EAAQC,EAAIjjD,IAGjBA,EAAOxM,KAAO,MAA4B,IAApBwM,EAAO/J,WAC9B+J,EAAO6jD,UAGF3oD,CACT,EAOAA,EAAG/D,OAAS,WAqBV,IAAI2sD,EAAazyD,EAAMU,KAAKC,eAC5B8xD,EAAW3uD,SAAS6K,EAAOtC,SAG3B,IAYIV,EALAmF,EANFjH,EAAGgoD,kBAAkBhoD,EAAGgoD,kBAAkBjtD,OAAS,GACnDiF,EAAGioD,kBAKuBjoD,EAAG0gD,YAAc,EAC7CkI,EAAW3uD,SAAS4tD,EAAShlD,OAAO,EAAG7C,EAAG0gD,YAAcz5C,IAMxD,IADA,IAAIpD,EAAiC,EAA1B7D,EAAGgoD,kBAAkB,GACxBvsD,EAAI,EAAGA,EAAIuE,EAAGgoD,kBAAkBjtD,OAAS,IAAKU,EAGpDoI,IAFA/B,EAAqC,EAA9B9B,EAAGgoD,kBAAkBvsD,EAAI,IAChB,aAAiB,EAEjCmtD,EAAWlnD,SAASmC,IAAS,GAC7BA,EAAO/B,IAAS,EAElB8mD,EAAWlnD,SAASmC,GAEpB,IAAIglD,EAAK,CACPT,GAAIN,EAAOM,GACXC,GAAIP,EAAOO,GACXC,GAAIR,EAAOQ,GACXC,GAAIT,EAAOS,GACXC,GAAIV,EAAOU,IAEbE,EAAQG,EAAId,EAAIa,GAChB,IAAIhvD,EAAOzD,EAAMU,KAAKC,eAMtB,OALA8C,EAAK8H,SAASmnD,EAAGT,IACjBxuD,EAAK8H,SAASmnD,EAAGR,IACjBzuD,EAAK8H,SAASmnD,EAAGP,IACjB1uD,EAAK8H,SAASmnD,EAAGN,IACjB3uD,EAAK8H,SAASmnD,EAAGL,IACV5uD,CACT,EAEOoG,CACT,EAGA,IAAI6nD,EAAW,KACXD,GAAe,EAqBnB,SAASc,EAAQ/uD,EAAGg8B,EAAGnzB,GAIrB,IAFA,IAAIiI,EAAGpM,EAAGE,EAAGtG,EAAGuG,EAAGC,EAAMhD,EACrBH,EAAMkH,EAAMzH,SACVO,GAAO,IAAI,CAaf,IAPA+C,EAAI1E,EAAEyuD,GACN7pD,EAAI5E,EAAE0uD,GACNpwD,EAAI0B,EAAE2uD,GACN9pD,EAAI7E,EAAE4uD,GACN9pD,EAAI9E,EAAE6uD,GAGF/sD,EAAI,EAAGA,EAAI,KAAMA,EACnBgP,EAAIjI,EAAM+D,WACVovB,EAAEl6B,GAAKgP,EAEPA,GAAMpM,GAAK,EAAMA,IAAM,KADnBG,EAAKD,GAAKtG,EAAIuG,IACgBC,EAAI,WAAagM,EACnDhM,EAAID,EACJA,EAAIvG,EAEJA,GAAMsG,GAAK,GAAOA,IAAM,KAAQ,EAChCA,EAAIF,EACJA,EAAIoM,EAEN,KAAMhP,EAAI,KAAMA,EAEdgP,GADAA,EAAKkrB,EAAEl6B,EAAI,GAAKk6B,EAAEl6B,EAAI,GAAKk6B,EAAEl6B,EAAI,IAAMk6B,EAAEl6B,EAAI,MACnC,EAAMgP,IAAM,GACtBkrB,EAAEl6B,GAAKgP,EAEPA,GAAMpM,GAAK,EAAMA,IAAM,KADnBG,EAAKD,GAAKtG,EAAIuG,IACgBC,EAAI,WAAagM,EACnDhM,EAAID,EACJA,EAAIvG,EAEJA,GAAMsG,GAAK,GAAOA,IAAM,KAAQ,EAChCA,EAAIF,EACJA,EAAIoM,EAGN,KAAMhP,EAAI,KAAMA,EAEdgP,GADAA,EAAKkrB,EAAEl6B,EAAI,GAAKk6B,EAAEl6B,EAAI,GAAKk6B,EAAEl6B,EAAI,IAAMk6B,EAAEl6B,EAAI,MACnC,EAAMgP,IAAM,GACtBkrB,EAAEl6B,GAAKgP,EAEPA,GAAMpM,GAAK,EAAMA,IAAM,KADnBE,EAAItG,EAAIuG,GACsBC,EAAI,WAAagM,EACnDhM,EAAID,EACJA,EAAIvG,EAEJA,GAAMsG,GAAK,GAAOA,IAAM,KAAQ,EAChCA,EAAIF,EACJA,EAAIoM,EAEN,KAAMhP,EAAI,KAAMA,EAEdgP,GADAA,EAAKkrB,EAAEl6B,EAAI,GAAKk6B,EAAEl6B,EAAI,IAAMk6B,EAAEl6B,EAAI,IAAMk6B,EAAEl6B,EAAI,MACpC,EAAMgP,IAAM,GACtBkrB,EAAEl6B,GAAKgP,EAEPA,GAAMpM,GAAK,EAAMA,IAAM,KADnBE,EAAItG,EAAIuG,GACsBC,EAAI,WAAagM,EACnDhM,EAAID,EACJA,EAAIvG,EAEJA,GAAMsG,GAAK,GAAOA,IAAM,KAAQ,EAChCA,EAAIF,EACJA,EAAIoM,EAGN,KAAMhP,EAAI,KAAMA,EAEdgP,GADAA,EAAKkrB,EAAEl6B,EAAI,GAAKk6B,EAAEl6B,EAAI,IAAMk6B,EAAEl6B,EAAI,IAAMk6B,EAAEl6B,EAAI,MACpC,EAAMgP,IAAM,GACtBkrB,EAAEl6B,GAAKgP,EAEPA,GAAMpM,GAAK,EAAMA,IAAM,KADlBE,EAAItG,EAAMuG,GAAKD,EAAItG,IACUwG,EAAI,WAAagM,EACnDhM,EAAID,EACJA,EAAIvG,EAEJA,GAAMsG,GAAK,GAAOA,IAAM,KAAQ,EAChCA,EAAIF,EACJA,EAAIoM,EAGN,KAAMhP,EAAI,KAAMA,EAEdgP,GADAA,EAAKkrB,EAAEl6B,EAAI,GAAKk6B,EAAEl6B,EAAI,IAAMk6B,EAAEl6B,EAAI,IAAMk6B,EAAEl6B,EAAI,MACpC,EAAMgP,IAAM,GACtBkrB,EAAEl6B,GAAKgP,EAEPA,GAAMpM,GAAK,EAAMA,IAAM,KADnBE,EAAItG,EAAIuG,GACsBC,EAAI,WAAagM,EACnDhM,EAAID,EACJA,EAAIvG,EAEJA,GAAMsG,GAAK,GAAOA,IAAM,KAAQ,EAChCA,EAAIF,EACJA,EAAIoM,EAIN9Q,EAAEyuD,GAAMzuD,EAAEyuD,GAAK/pD,EAAK,EACpB1E,EAAE0uD,GAAM1uD,EAAE0uD,GAAK9pD,EAAK,EACpB5E,EAAE2uD,GAAM3uD,EAAE2uD,GAAKrwD,EAAK,EACpB0B,EAAE4uD,GAAM5uD,EAAE4uD,GAAK/pD,EAAK,EACpB7E,EAAE6uD,GAAM7uD,EAAE6uD,GAAK/pD,EAAK,EAEpBnD,GAAO,EACT,CACF,C,iBCrTA,IAAInF,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MAER,IAAIsiD,EAAS1iD,EAAOC,QAAUI,EAAMqiD,OAASriD,EAAMqiD,QAAU,CAAC,EAC9DriD,EAAM6J,GAAGw4C,OAASriD,EAAM6J,GAAG2nD,WAAWnP,OAASA,EAO/CA,EAAOx8C,OAAS,WAEV4rD,IA4LJC,EAAW7kD,OAAOC,aAAa,KAC/B4kD,GAAY1xD,EAAMU,KAAK+lD,WAAW55C,OAAOC,aAAa,GAAO,IAG7D6lD,EAAK,CACH,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,UAAY,UAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,UACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,UACpC,UAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,UACpC,UAAY,UAAY,UAAY,UACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,YAGtClB,GAAe,GA9Mf,IAAIE,EAAS,KAGThjD,EAAS3O,EAAMU,KAAKC,eAGpBixD,EAAK,IAAI7nD,MAAM,IAGfF,EAAK,CACP6O,UAAW,SACX6xC,YAAa,GACb/1C,aAAc,GAEdvK,cAAe,EAEf4nD,kBAAmB,KAEnBC,kBAAmB,EAQrBjoD,MAAW,WAETA,EAAGI,cAAgB,EAGnBJ,EAAGgoD,kBAAoBhoD,EAAGkoD,gBAAkB,GAE5C,IADA,IAAIC,EAASnoD,EAAGioD,kBAAoB,EAC5BxsD,EAAI,EAAGA,EAAI0sD,IAAU1sD,EAC3BuE,EAAGgoD,kBAAkB9iD,KAAK,GAa5B,OAXAJ,EAAS3O,EAAMU,KAAKC,eACpBgxD,EAAS,CACPM,GAAI,WACJC,GAAI,WACJC,GAAI,WACJC,GAAI,WACJC,GAAI,WACJO,GAAI,WACJC,GAAI,UACJC,GAAI,YAECjpD,CACT,GAwHA,OAtHAA,EAAGvF,QAYHuF,EAAGpF,OAAS,SAASpE,EAAK2Z,GACR,SAAbA,IACD3Z,EAAML,EAAMU,KAAK4xD,WAAWjyD,IAI9B,IAAI8E,EAAM9E,EAAIuE,OACdiF,EAAGI,eAAiB9E,EACpBA,EAAM,CAAEA,EAAM,aAAiB,EAAGA,IAAQ,GAC1C,IAAI,IAAIG,EAAIuE,EAAGgoD,kBAAkBjtD,OAAS,EAAGU,GAAK,IAAKA,EACrDuE,EAAGgoD,kBAAkBvsD,IAAMH,EAAI,GAC/BA,EAAI,GAAKA,EAAI,IAAO0E,EAAGgoD,kBAAkBvsD,GAAK,aAAiB,GAC/DuE,EAAGgoD,kBAAkBvsD,GAAKuE,EAAGgoD,kBAAkBvsD,KAAO,EACtDH,EAAI,GAAOA,EAAI,GAAK,aAAiB,EAcvC,OAVAwJ,EAAO7K,SAASzD,GAGhBkyD,EAAQZ,EAAQC,EAAIjjD,IAGjBA,EAAOxM,KAAO,MAA4B,IAApBwM,EAAO/J,WAC9B+J,EAAO6jD,UAGF3oD,CACT,EAOAA,EAAG/D,OAAS,WAqBV,IAAI2sD,EAAazyD,EAAMU,KAAKC,eAC5B8xD,EAAW3uD,SAAS6K,EAAOtC,SAG3B,IAYIV,EALAmF,EANFjH,EAAGgoD,kBAAkBhoD,EAAGgoD,kBAAkBjtD,OAAS,GACnDiF,EAAGioD,kBAKuBjoD,EAAG0gD,YAAc,EAC7CkI,EAAW3uD,SAAS4tD,EAAShlD,OAAO,EAAG7C,EAAG0gD,YAAcz5C,IAMxD,IADA,IAAIpD,EAAiC,EAA1B7D,EAAGgoD,kBAAkB,GACxBvsD,EAAI,EAAGA,EAAIuE,EAAGgoD,kBAAkBjtD,OAAS,IAAKU,EAGpDoI,IAFA/B,EAAqC,EAA9B9B,EAAGgoD,kBAAkBvsD,EAAI,IAChB,aAAiB,EAEjCmtD,EAAWlnD,SAASmC,IAAS,GAC7BA,EAAO/B,IAAS,EAElB8mD,EAAWlnD,SAASmC,GAEpB,IAAIglD,EAAK,CACPT,GAAIN,EAAOM,GACXC,GAAIP,EAAOO,GACXC,GAAIR,EAAOQ,GACXC,GAAIT,EAAOS,GACXC,GAAIV,EAAOU,GACXO,GAAIjB,EAAOiB,GACXC,GAAIlB,EAAOkB,GACXC,GAAInB,EAAOmB,IAEbP,EAAQG,EAAId,EAAIa,GAChB,IAAIhvD,EAAOzD,EAAMU,KAAKC,eAStB,OARA8C,EAAK8H,SAASmnD,EAAGT,IACjBxuD,EAAK8H,SAASmnD,EAAGR,IACjBzuD,EAAK8H,SAASmnD,EAAGP,IACjB1uD,EAAK8H,SAASmnD,EAAGN,IACjB3uD,EAAK8H,SAASmnD,EAAGL,IACjB5uD,EAAK8H,SAASmnD,EAAGE,IACjBnvD,EAAK8H,SAASmnD,EAAGG,IACjBpvD,EAAK8H,SAASmnD,EAAGI,IACVrvD,CACT,EAEOoG,CACT,EAGA,IAAI6nD,EAAW,KACXD,GAAe,EAGfkB,EAAK,KAwCT,SAASJ,EAAQ/uD,EAAGg8B,EAAGnzB,GAIrB,IAFA,IAAI0mD,EAAIC,EAAIC,EAAYC,EAAK5tD,EAAG4C,EAAGE,EAAGtG,EAAGuG,EAAGC,EAAGrB,EAAGkB,EAAGI,EACjDpD,EAAMkH,EAAMzH,SACVO,GAAO,IAAI,CAGf,IAAIG,EAAI,EAAGA,EAAI,KAAMA,EACnBk6B,EAAEl6B,GAAK+G,EAAM+D,WAEf,KAAM9K,EAAI,KAAMA,EAGdytD,IADAA,EAAKvzB,EAAEl6B,EAAI,MAEA,GAAOytD,GAAM,KACpBA,IAAO,GAAOA,GAAM,IACrBA,IAAO,GAGVC,IADAA,EAAKxzB,EAAEl6B,EAAI,OAEA,EAAM0tD,GAAM,KACnBA,IAAO,GAAOA,GAAM,IACrBA,IAAO,EAEVxzB,EAAEl6B,GAAMytD,EAAKvzB,EAAEl6B,EAAI,GAAK0tD,EAAKxzB,EAAEl6B,EAAI,IAAO,EAc5C,IAVA4C,EAAI1E,EAAEyuD,GACN7pD,EAAI5E,EAAE0uD,GACNpwD,EAAI0B,EAAE2uD,GACN9pD,EAAI7E,EAAE4uD,GACN9pD,EAAI9E,EAAE6uD,GACNprD,EAAIzD,EAAEovD,GACNzqD,EAAI3E,EAAEqvD,GACNtqD,EAAI/E,EAAEsvD,GAGFxtD,EAAI,EAAGA,EAAI,KAAMA,EASnB2tD,GACI/qD,IAAM,EAAMA,GAAK,KACjBA,IAAM,GAAOA,GAAK,KAClBA,IAAM,GAAOA,GAAK,IAEtBgrD,EAAOhrD,EAAIE,EAAMtG,GAAKoG,EAAIE,GAG1B2qD,EAAKxqD,IAdDD,IAAM,EAAMA,GAAK,KACjBA,IAAM,GAAOA,GAAK,KAClBA,IAAM,GAAOA,GAAK,KAEjBH,EAAKG,GAAKrB,EAAIkB,IAUAwqD,EAAGrtD,GAAKk6B,EAAEl6B,GAE7BiD,EAAIJ,EACJA,EAAIlB,EACJA,EAAIqB,EAGJA,EAAKD,EAAI0qD,IAAQ,EACjB1qD,EAAIvG,EACJA,EAAIsG,EACJA,EAAIF,EAGJA,EAAK6qD,GAZLC,EAAKC,EAAKC,KAYQ,EAIpB1vD,EAAEyuD,GAAMzuD,EAAEyuD,GAAK/pD,EAAK,EACpB1E,EAAE0uD,GAAM1uD,EAAE0uD,GAAK9pD,EAAK,EACpB5E,EAAE2uD,GAAM3uD,EAAE2uD,GAAKrwD,EAAK,EACpB0B,EAAE4uD,GAAM5uD,EAAE4uD,GAAK/pD,EAAK,EACpB7E,EAAE6uD,GAAM7uD,EAAE6uD,GAAK/pD,EAAK,EACpB9E,EAAEovD,GAAMpvD,EAAEovD,GAAK3rD,EAAK,EACpBzD,EAAEqvD,GAAMrvD,EAAEqvD,GAAK1qD,EAAK,EACpB3E,EAAEsvD,GAAMtvD,EAAEsvD,GAAKvqD,EAAK,EACpBpD,GAAO,EACT,CACF,C,iBC/TA,IAAInF,EAAQD,EAAQ,IAChBozD,EAAQpzD,EAAQ,MAGhBW,EAAOf,EAAOC,QAAUI,EAAMU,KAAOV,EAAMU,MAAQ,CAAC,EA0IxD,SAAS0yD,EAAgB1rD,GACvB,GAAW,IAANA,GAAiB,KAANA,GAAkB,KAANA,GAAkB,KAANA,EACtC,MAAM,IAAIjH,MAAM,yCAA2CiH,EAE/D,CAaA,SAAS2rD,EAAiBjrD,GAQxB,GAJAqI,KAAKrD,KAAO,GAEZqD,KAAKtO,KAAO,EAEI,kBAANiG,EACRqI,KAAKrD,KAAOhF,OACP,GAAG1H,EAAK4yD,cAAclrD,IAAM1H,EAAK6yD,kBAAkBnrD,GACxD,GAAqB,qBAAXorD,QAA0BprD,aAAaorD,OAC/C/iD,KAAKrD,KAAOhF,EAAEqE,SAAS,cAClB,CAGL,IAAI1B,EAAM,IAAI0oD,WAAWrrD,GACzB,IACEqI,KAAKrD,KAAOP,OAAOC,aAAakJ,MAAM,KAAMjL,EAC9C,CAAE,MAAMzC,GACN,IAAI,IAAIhD,EAAI,EAAGA,EAAIyF,EAAInG,SAAUU,EAC/BmL,KAAK7E,QAAQb,EAAIzF,GAErB,CACF,MACQ8C,aAAairD,GACP,kBAANjrD,GAAoC,kBAAXA,EAAEgF,MACjB,kBAAXhF,EAAEjG,QAETsO,KAAKrD,KAAOhF,EAAEgF,KACdqD,KAAKtO,KAAOiG,EAAEjG,MAIhBsO,KAAKijD,yBAA2B,CAClC,EA3LA,WAIE,GAAsB,qBAAZvqD,SAA2BA,QAAQgD,WAAahD,QAAQwqD,QAShE,OARAjzD,EAAKyL,SAAWhD,QAAQgD,cACG,oBAAjBI,aACR7L,EAAK6L,aAAeA,aAIpB7L,EAAK6L,aAAe7L,EAAKyL,UAM7B,GAA2B,oBAAjBI,aAKR,OAJA7L,EAAK6L,aAAe,WAAa,OAAOA,aAAayJ,WAAM00C,EAAWv0C,UAAY,OAClFzV,EAAKyL,SAAW,SAASJ,GACvB,OAAOQ,aAAaR,EACtB,GAeF,GALArL,EAAK6L,aAAe,SAASR,GAC3Bk1B,WAAWl1B,EAAU,EACvB,EAGqB,qBAAXoL,QACsB,oBAAvBA,OAAO7J,YAA4B,CAC1C,IAAIjN,EAAM,qBACNuzD,EAAY,GAChBlzD,EAAK6L,aAAe,SAASR,GAC3B6nD,EAAU7kD,KAAKhD,GAGS,IAArB6nD,EAAUhvD,QACXuS,OAAO7J,YAAYjN,EAAK,IAE5B,EAWA8W,OAAOjK,iBAAiB,UAVxB,SAAiB8rB,GACf,GAAGA,EAAMhS,SAAW7P,QAAU6hB,EAAM5rB,OAAS/M,EAAK,CAChD24B,EAAMnJ,kBACN,IAAIxW,EAAOu6C,EAAU3iD,QACrB2iD,EAAUhvD,OAAS,EACnByU,EAAKyC,QAAQ,SAAS/P,GACpBA,GACF,EACF,CACF,GAC4C,EAC9C,CAGA,GAA+B,qBAArB8nD,iBAAkC,CAE1C,IAAIliC,EAAMtb,KAAKsb,MACXmiC,GAAO,EACPC,EAAMh5C,SAASC,cAAc,OAC7B44C,EAAY,GAChB,IAAIC,iBAAiB,WACnB,IAAIx6C,EAAOu6C,EAAU3iD,QACrB2iD,EAAUhvD,OAAS,EACnByU,EAAKyC,QAAQ,SAAS/P,GACpBA,GACF,EACF,GAAGioD,QAAQD,EAAK,CAAClH,YAAY,IAC7B,IAAIoH,EAAkBvzD,EAAK6L,aAC3B7L,EAAK6L,aAAe,SAASR,GACxBsK,KAAKsb,MAAQA,EAAM,IACpBA,EAAMtb,KAAKsb,MACXsiC,EAAgBloD,KAEhB6nD,EAAU7kD,KAAKhD,GAGS,IAArB6nD,EAAUhvD,QACXmvD,EAAIt3C,aAAa,IAAKq3C,GAAQA,GAGpC,CACF,CAEApzD,EAAKyL,SAAWzL,EAAK6L,YACtB,CA5FD,GA+FA7L,EAAKwI,SACgB,qBAAZC,SAA2BA,QAAQC,UAAYD,QAAQC,SAASsxB,KAOzEh6B,EAAKkK,YACAlK,EAAKwI,SACCgrD,EAAAA,EAGc,qBAATjnD,KAAuBkK,OAASlK,KAIhDvM,EAAKsP,QAAUjG,MAAMiG,SAAW,SAASpD,GACvC,MAA6C,mBAAtCrF,OAAOC,UAAUiF,SAASjE,KAAKoE,EACxC,EAGAlM,EAAK4yD,cAAgB,SAAS1mD,GAC5B,MAA8B,qBAAhBunD,aAA+BvnD,aAAaunD,WAC5D,EAGAzzD,EAAK6yD,kBAAoB,SAAS3mD,GAChC,OAAOA,GAAKlM,EAAK4yD,cAAc1mD,EAAEkL,cAA4B4yC,IAAjB99C,EAAEs5C,UAChD,EAkBAxlD,EAAK6T,WAAa8+C,EA8ClB3yD,EAAK2yD,iBAAmBA,EAaxB3yD,EAAK2yD,iBAAiB7rD,UAAU4sD,2BAA6B,SAASxnD,GACpE6D,KAAKijD,0BAA4B9mD,EAC9B6D,KAAKijD,yBAH2B,OAKjCjjD,KAAKrD,KAAKV,OAAO,EAAG,GACpB+D,KAAKijD,yBAA2B,EAEpC,EAOAhzD,EAAK2yD,iBAAiB7rD,UAAU5C,OAAS,WACvC,OAAO6L,KAAKrD,KAAKxI,OAAS6L,KAAKtO,IACjC,EAOAzB,EAAK2yD,iBAAiB7rD,UAAU6sD,QAAU,WACxC,OAAO5jD,KAAK7L,UAAY,CAC1B,EASAlE,EAAK2yD,iBAAiB7rD,UAAUoE,QAAU,SAASxD,GACjD,OAAOqI,KAAK3M,SAAS+I,OAAOC,aAAa1E,GAC3C,EAUA1H,EAAK2yD,iBAAiB7rD,UAAUvC,aAAe,SAASmD,EAAGV,GACzDU,EAAIyE,OAAOC,aAAa1E,GAExB,IADA,IAAIC,EAAIoI,KAAKrD,KACP1F,EAAI,GACD,EAAJA,IACDW,GAAKD,IAEPV,KAAO,GACA,IACLU,GAAKA,GAKT,OAFAqI,KAAKrD,KAAO/E,EACZoI,KAAK2jD,2BAA2B1sD,GACzB+I,IACT,EASA/P,EAAK2yD,iBAAiB7rD,UAAU1D,SAAW,SAASuI,GAGlD,OAFAoE,KAAKrD,MAAQf,EACboE,KAAK2jD,2BAA2B/nD,EAAMzH,QAC/B6L,IACT,EASA/P,EAAK2yD,iBAAiB7rD,UAAU0Q,UAAY,SAASo8C,GACnD,OAAO7jD,KAAK3M,SAASpD,EAAK4xD,WAAWgC,GACvC,EASA5zD,EAAK2yD,iBAAiB7rD,UAAUmjD,SAAW,SAASrlD,GAClD,OAAOmL,KAAK3M,SACV+I,OAAOC,aAAaxH,GAAK,EAAI,KAC7BuH,OAAOC,aAAiB,IAAJxH,GACxB,EASA5E,EAAK2yD,iBAAiB7rD,UAAU+sD,SAAW,SAASjvD,GAClD,OAAOmL,KAAK3M,SACV+I,OAAOC,aAAaxH,GAAK,GAAK,KAC9BuH,OAAOC,aAAaxH,GAAK,EAAI,KAC7BuH,OAAOC,aAAiB,IAAJxH,GACxB,EASA5E,EAAK2yD,iBAAiB7rD,UAAU+D,SAAW,SAASjG,GAClD,OAAOmL,KAAK3M,SACV+I,OAAOC,aAAaxH,GAAK,GAAK,KAC9BuH,OAAOC,aAAaxH,GAAK,GAAK,KAC9BuH,OAAOC,aAAaxH,GAAK,EAAI,KAC7BuH,OAAOC,aAAiB,IAAJxH,GACxB,EASA5E,EAAK2yD,iBAAiB7rD,UAAU6H,WAAa,SAAS/J,GACpD,OAAOmL,KAAK3M,SACV+I,OAAOC,aAAiB,IAAJxH,GACpBuH,OAAOC,aAAaxH,GAAK,EAAI,KACjC,EASA5E,EAAK2yD,iBAAiB7rD,UAAUgtD,WAAa,SAASlvD,GACpD,OAAOmL,KAAK3M,SACV+I,OAAOC,aAAiB,IAAJxH,GACpBuH,OAAOC,aAAaxH,GAAK,EAAI,KAC7BuH,OAAOC,aAAaxH,GAAK,GAAK,KAClC,EASA5E,EAAK2yD,iBAAiB7rD,UAAUitD,WAAa,SAASnvD,GACpD,OAAOmL,KAAK3M,SACV+I,OAAOC,aAAiB,IAAJxH,GACpBuH,OAAOC,aAAaxH,GAAK,EAAI,KAC7BuH,OAAOC,aAAaxH,GAAK,GAAK,KAC9BuH,OAAOC,aAAaxH,GAAK,GAAK,KAClC,EAUA5E,EAAK2yD,iBAAiB7rD,UAAUktD,OAAS,SAASpvD,EAAGoC,GACnD0rD,EAAgB1rD,GAChB,IAAI2E,EAAQ,GACZ,GACE3E,GAAK,EACL2E,GAASQ,OAAOC,aAAcxH,GAAKoC,EAAK,WAClCA,EAAI,GACZ,OAAO+I,KAAK3M,SAASuI,EACvB,EAWA3L,EAAK2yD,iBAAiB7rD,UAAUmtD,aAAe,SAASrvD,EAAGoC,GAKzD,OAHGpC,EAAI,IACLA,GAAK,GAAMoC,EAAI,GAEV+I,KAAKikD,OAAOpvD,EAAGoC,EACxB,EASAhH,EAAK2yD,iBAAiB7rD,UAAUgI,UAAY,SAASsI,GACnD,OAAOrH,KAAK3M,SAASgU,EAAOtW,WAC9B,EAOAd,EAAK2yD,iBAAiB7rD,UAAUotD,QAAU,WACxC,OAAOnkD,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,OACnC,EAQAzB,EAAK2yD,iBAAiB7rD,UAAUqtD,SAAW,WACzC,IAAIpxD,EACFgN,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,OAAS,EACnCsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,GAEnC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAK2yD,iBAAiB7rD,UAAUstD,SAAW,WACzC,IAAIrxD,EACFgN,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,OAAS,GACnCsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,IAAM,EACvCsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,GAEnC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAK2yD,iBAAiB7rD,UAAU4I,SAAW,WACzC,IAAI3M,EACFgN,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,OAAS,GACnCsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,IAAM,GACvCsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,IAAM,EACvCsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,GAEnC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAK2yD,iBAAiB7rD,UAAUwH,WAAa,WAC3C,IAAIvL,EACFgN,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,MAC1BsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,IAAM,EAEzC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAK2yD,iBAAiB7rD,UAAUutD,WAAa,WAC3C,IAAItxD,EACFgN,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,MAC1BsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,IAAM,EACvCsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,IAAM,GAEzC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAK2yD,iBAAiB7rD,UAAUwtD,WAAa,WAC3C,IAAIvxD,EACFgN,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,MAC1BsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,IAAM,EACvCsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,IAAM,GACvCsO,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAO,IAAM,GAEzC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAUA/C,EAAK2yD,iBAAiB7rD,UAAUikD,OAAS,SAAS/jD,GAChD0rD,EAAgB1rD,GAChB,IAAIjE,EAAO,EACX,GAEEA,GAAQA,GAAQ,GAAKgN,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,QAC/CuF,GAAK,QACCA,EAAI,GACZ,OAAOjE,CACT,EAUA/C,EAAK2yD,iBAAiB7rD,UAAUytD,aAAe,SAASvtD,GAEtD,IAAIkF,EAAI6D,KAAKg7C,OAAO/jD,GAChBwD,EAAM,GAAMxD,EAAI,EAIpB,OAHGkF,GAAK1B,IACN0B,GAAK1B,GAAO,GAEP0B,CACT,EAWAlM,EAAK2yD,iBAAiB7rD,UAAUhG,SAAW,SAASwJ,GAClD,IAAIvH,EAaJ,OAZGuH,GAEDA,EAAQC,KAAKE,IAAIsF,KAAK7L,SAAUoG,GAChCvH,EAAOgN,KAAKrD,KAAK6D,MAAMR,KAAKtO,KAAMsO,KAAKtO,KAAO6I,GAC9CyF,KAAKtO,MAAQ6I,GACK,IAAVA,EACRvH,EAAO,IAGPA,EAAsB,IAAdgN,KAAKtO,KAAcsO,KAAKrD,KAAOqD,KAAKrD,KAAK6D,MAAMR,KAAKtO,MAC5DsO,KAAKe,SAEA/N,CACT,EAUA/C,EAAK2yD,iBAAiB7rD,UAAU6E,MAAQ,SAASrB,GAC/C,MAA0B,qBAAXA,EACbyF,KAAKrD,KAAK6D,MAAMR,KAAKtO,MACrBsO,KAAKrD,KAAK6D,MAAMR,KAAKtO,KAAMsO,KAAKtO,KAAO6I,EAC3C,EASAtK,EAAK2yD,iBAAiB7rD,UAAUjC,GAAK,SAASD,GAC5C,OAAOmL,KAAKrD,KAAKw9C,WAAWn6C,KAAKtO,KAAOmD,EAC1C,EAUA5E,EAAK2yD,iBAAiB7rD,UAAU6G,MAAQ,SAAS/I,EAAG8C,GAIlD,OAHAqI,KAAKrD,KAAOqD,KAAKrD,KAAKV,OAAO,EAAG+D,KAAKtO,KAAOmD,GAC1CuH,OAAOC,aAAa1E,GACpBqI,KAAKrD,KAAKV,OAAO+D,KAAKtO,KAAOmD,EAAI,GAC5BmL,IACT,EAOA/P,EAAK2yD,iBAAiB7rD,UAAUnC,KAAO,WACrC,OAAOoL,KAAKrD,KAAKw9C,WAAWn6C,KAAKrD,KAAKxI,OAAS,EACjD,EAOAlE,EAAK2yD,iBAAiB7rD,UAAU6R,KAAO,WACrC,IAAIvX,EAAIpB,EAAKC,aAAa8P,KAAKrD,MAE/B,OADAtL,EAAEK,KAAOsO,KAAKtO,KACPL,CACT,EAOApB,EAAK2yD,iBAAiB7rD,UAAUgrD,QAAU,WAKxC,OAJG/hD,KAAKtO,KAAO,IACbsO,KAAKrD,KAAOqD,KAAKrD,KAAK6D,MAAMR,KAAKtO,MACjCsO,KAAKtO,KAAO,GAEPsO,IACT,EAOA/P,EAAK2yD,iBAAiB7rD,UAAUgK,MAAQ,WAGtC,OAFAf,KAAKrD,KAAO,GACZqD,KAAKtO,KAAO,EACLsO,IACT,EASA/P,EAAK2yD,iBAAiB7rD,UAAUhC,SAAW,SAASwF,GAClD,IAAI7F,EAAM8F,KAAKC,IAAI,EAAGuF,KAAK7L,SAAWoG,GAGtC,OAFAyF,KAAKrD,KAAOqD,KAAKrD,KAAKV,OAAO+D,KAAKtO,KAAMgD,GACxCsL,KAAKtO,KAAO,EACLsO,IACT,EAOA/P,EAAK2yD,iBAAiB7rD,UAAUiS,MAAQ,WAEtC,IADA,IAAIhW,EAAO,GACH6B,EAAImL,KAAKtO,KAAMmD,EAAImL,KAAKrD,KAAKxI,SAAUU,EAAG,CAChD,IAAI8C,EAAIqI,KAAKrD,KAAKw9C,WAAWtlD,GAC1B8C,EAAI,KACL3E,GAAQ,KAEVA,GAAQ2E,EAAEqE,SAAS,GACrB,CACA,OAAOhJ,CACT,EAOA/C,EAAK2yD,iBAAiB7rD,UAAUiF,SAAW,WACzC,OAAO/L,EAAKw0D,WAAWzkD,KAAKpE,QAC9B,EAuEA3L,EAAKy0D,WArCL,SAAoB/sD,EAAGvI,GAErBA,EAAUA,GAAW,CAAC,EAGtB4Q,KAAKtO,KAAOtC,EAAQu1D,YAAc,EAClC3kD,KAAK4kD,SAAWx1D,EAAQw1D,UAAY,KAEpC,IAAI/B,EAAgB5yD,EAAK4yD,cAAclrD,GACnCmrD,EAAoB7yD,EAAK6yD,kBAAkBnrD,GAC/C,GAAGkrD,GAAiBC,EAYlB,OATE9iD,KAAKrD,KADJkmD,EACW,IAAIgC,SAASltD,GAKb,IAAIktD,SAASltD,EAAE0P,OAAQ1P,EAAEmtD,WAAYntD,EAAE89C,iBAErDz1C,KAAK3N,MAAS,gBAAiBjD,EAC7BA,EAAQ21D,YAAc/kD,KAAKrD,KAAK84C,YAKpCz1C,KAAKrD,KAAO,IAAIkoD,SAAS,IAAInB,YAAY,IACzC1jD,KAAK3N,MAAQ,EAEJ,OAANsF,QAAoBsiD,IAANtiD,GACfqI,KAAK3M,SAASsE,GAGb,gBAAiBvI,IAClB4Q,KAAK3N,MAAQjD,EAAQ21D,YAEzB,EAQA90D,EAAKy0D,WAAW3tD,UAAU5C,OAAS,WACjC,OAAO6L,KAAK3N,MAAQ2N,KAAKtO,IAC3B,EAOAzB,EAAKy0D,WAAW3tD,UAAU6sD,QAAU,WAClC,OAAO5jD,KAAK7L,UAAY,CAC1B,EAaAlE,EAAKy0D,WAAW3tD,UAAUiuD,YAAc,SAASC,EAAQL,GACvD,GAAG5kD,KAAK7L,UAAY8wD,EAClB,OAAOjlD,KAET4kD,EAAWpqD,KAAKC,IAAImqD,GAAY5kD,KAAK4kD,SAAUK,GAG/C,IAAItc,EAAM,IAAIqa,WACZhjD,KAAKrD,KAAK0K,OAAQrH,KAAKrD,KAAKmoD,WAAY9kD,KAAKrD,KAAK84C,YAChDyP,EAAM,IAAIlC,WAAWhjD,KAAK7L,SAAWywD,GAIzC,OAHAM,EAAIn3C,IAAI46B,GACR3oC,KAAKrD,KAAO,IAAIkoD,SAASK,EAAI79C,QAEtBrH,IACT,EASA/P,EAAKy0D,WAAW3tD,UAAUoE,QAAU,SAASxD,GAG3C,OAFAqI,KAAKglD,YAAY,GACjBhlD,KAAKrD,KAAKwoD,SAASnlD,KAAK3N,QAASsF,GAC1BqI,IACT,EAUA/P,EAAKy0D,WAAW3tD,UAAUvC,aAAe,SAASmD,EAAGV,GACnD+I,KAAKglD,YAAY/tD,GACjB,IAAI,IAAIpC,EAAI,EAAGA,EAAIoC,IAAKpC,EACtBmL,KAAKrD,KAAKwoD,SAASxtD,GAErB,OAAOqI,IACT,EAYA/P,EAAKy0D,WAAW3tD,UAAU1D,SAAW,SAASuI,EAAO2N,GACnD,GAAGtZ,EAAK6yD,kBAAkBlnD,GAAQ,CAChC,IACIlH,GADAi0C,EAAM,IAAIqa,WAAWpnD,EAAMyL,OAAQzL,EAAMkpD,WAAYlpD,EAAM65C,aACjDA,WAAa9M,EAAImc,WAK/B,OAJA9kD,KAAKglD,YAAYtwD,GACP,IAAIsuD,WAAWhjD,KAAKrD,KAAK0K,OAAQrH,KAAK3N,OAC5C0b,IAAI46B,GACR3oC,KAAK3N,OAASqC,EACPsL,IACT,CAEA,GAAG/P,EAAK4yD,cAAcjnD,GAAQ,CAC5B,IAAI+sC,EAAM,IAAIqa,WAAWpnD,GAKzB,OAJAoE,KAAKglD,YAAYrc,EAAI8M,YACX,IAAIuN,WAAWhjD,KAAKrD,KAAK0K,QAC/B0G,IAAI46B,EAAK3oC,KAAK3N,OAClB2N,KAAK3N,OAASs2C,EAAI8M,WACXz1C,IACT,CAGA,GAAGpE,aAAiB3L,EAAKy0D,YACL,kBAAV9oD,GACc,kBAAfA,EAAMlK,MAA4C,kBAAhBkK,EAAMvJ,OAC/CpC,EAAK6yD,kBAAkBlnD,EAAMe,MAAQ,CACjCgsC,EAAM,IAAIqa,WAAWpnD,EAAMe,KAAK84C,WAAY75C,EAAMlK,KAAMkK,EAAMzH,UAKlE,OAJA6L,KAAKglD,YAAYrc,EAAI8M,YACX,IAAIuN,WAAWpnD,EAAMe,KAAK84C,WAAYz1C,KAAK3N,OACjD0b,IAAI46B,GACR3oC,KAAK3N,OAASs2C,EAAI8M,WACXz1C,IACT,CAUA,GARGpE,aAAiB3L,EAAK2yD,mBAEvBhnD,EAAQA,EAAMe,KACd4M,EAAW,UAIbA,EAAWA,GAAY,SACH,kBAAV3N,EAAoB,CAC5B,IAAI0lB,EAGJ,GAAgB,QAAb/X,EAID,OAHAvJ,KAAKglD,YAAYxqD,KAAKkD,KAAK9B,EAAMzH,OAAS,IAC1CmtB,EAAO,IAAI0hC,WAAWhjD,KAAKrD,KAAK0K,OAAQrH,KAAK3N,OAC7C2N,KAAK3N,OAASpC,EAAKm1D,OAAO57C,IAAI3Z,OAAO+L,EAAO0lB,EAAMthB,KAAK3N,OAChD2N,KAET,GAAgB,WAAbuJ,EAID,OAHAvJ,KAAKglD,YAA0C,EAA9BxqD,KAAKkD,KAAK9B,EAAMzH,OAAS,IAC1CmtB,EAAO,IAAI0hC,WAAWhjD,KAAKrD,KAAK0K,OAAQrH,KAAK3N,OAC7C2N,KAAK3N,OAASpC,EAAKm1D,OAAOC,OAAOx1D,OAAO+L,EAAO0lB,EAAMthB,KAAK3N,OACnD2N,KAWT,GAPgB,SAAbuJ,IAED3N,EAAQ3L,EAAK4xD,WAAWjmD,GACxB2N,EAAW,UAIG,WAAbA,GAAsC,QAAbA,EAK1B,OAHAvJ,KAAKglD,YAAYppD,EAAMzH,QACvBmtB,EAAO,IAAI0hC,WAAWhjD,KAAKrD,KAAK0K,OAAQrH,KAAK3N,OAC7C2N,KAAK3N,OAASpC,EAAKm1D,OAAOE,IAAIz1D,OAAOyxB,GAC9BthB,KAIT,GAAgB,UAAbuJ,EAKD,OAHAvJ,KAAKglD,YAA2B,EAAfppD,EAAMzH,QACvBmtB,EAAO,IAAIikC,YAAYvlD,KAAKrD,KAAK0K,OAAQrH,KAAK3N,OAC9C2N,KAAK3N,OAASpC,EAAKg4B,KAAKu9B,MAAMx0D,OAAOswB,GAC9BthB,KAGT,MAAM,IAAIhQ,MAAM,qBAAuBuZ,EACzC,CAEA,MAAMvZ,MAAM,sBAAwB4L,EACtC,EASA3L,EAAKy0D,WAAW3tD,UAAUgI,UAAY,SAASsI,GAG7C,OAFArH,KAAK3M,SAASgU,GACdA,EAAOtG,QACAf,IACT,EAUA/P,EAAKy0D,WAAW3tD,UAAU0Q,UAAY,SAASo8C,GAC7C,OAAO7jD,KAAK3M,SAASwwD,EAAK,QAC5B,EASA5zD,EAAKy0D,WAAW3tD,UAAUmjD,SAAW,SAASrlD,GAI5C,OAHAmL,KAAKglD,YAAY,GACjBhlD,KAAKrD,KAAK8oD,SAASzlD,KAAK3N,MAAOwC,GAC/BmL,KAAK3N,OAAS,EACP2N,IACT,EASA/P,EAAKy0D,WAAW3tD,UAAU+sD,SAAW,SAASjvD,GAK5C,OAJAmL,KAAKglD,YAAY,GACjBhlD,KAAKrD,KAAK8oD,SAASzlD,KAAK3N,MAAOwC,GAAK,EAAI,OACxCmL,KAAKrD,KAAK+oD,QAAQ1lD,KAAK3N,MAAOwC,GAAK,GAAK,KACxCmL,KAAK3N,OAAS,EACP2N,IACT,EASA/P,EAAKy0D,WAAW3tD,UAAU+D,SAAW,SAASjG,GAI5C,OAHAmL,KAAKglD,YAAY,GACjBhlD,KAAKrD,KAAKgpD,SAAS3lD,KAAK3N,MAAOwC,GAC/BmL,KAAK3N,OAAS,EACP2N,IACT,EASA/P,EAAKy0D,WAAW3tD,UAAU6H,WAAa,SAAS/J,GAI9C,OAHAmL,KAAKglD,YAAY,GACjBhlD,KAAKrD,KAAK8oD,SAASzlD,KAAK3N,MAAOwC,GAAG,GAClCmL,KAAK3N,OAAS,EACP2N,IACT,EASA/P,EAAKy0D,WAAW3tD,UAAUgtD,WAAa,SAASlvD,GAK9C,OAJAmL,KAAKglD,YAAY,GACjBhlD,KAAKrD,KAAK+oD,QAAQ1lD,KAAK3N,MAAOwC,GAAK,GAAK,KACxCmL,KAAKrD,KAAK8oD,SAASzlD,KAAK3N,MAAOwC,GAAK,EAAI,OAAQ,GAChDmL,KAAK3N,OAAS,EACP2N,IACT,EASA/P,EAAKy0D,WAAW3tD,UAAUitD,WAAa,SAASnvD,GAI9C,OAHAmL,KAAKglD,YAAY,GACjBhlD,KAAKrD,KAAKgpD,SAAS3lD,KAAK3N,MAAOwC,GAAG,GAClCmL,KAAK3N,OAAS,EACP2N,IACT,EAUA/P,EAAKy0D,WAAW3tD,UAAUktD,OAAS,SAASpvD,EAAGoC,GAC7C0rD,EAAgB1rD,GAChB+I,KAAKglD,YAAY/tD,EAAI,GACrB,GACEA,GAAK,EACL+I,KAAKrD,KAAK+oD,QAAQ1lD,KAAK3N,QAAUwC,GAAKoC,EAAK,WACrCA,EAAI,GACZ,OAAO+I,IACT,EAWA/P,EAAKy0D,WAAW3tD,UAAUmtD,aAAe,SAASrvD,EAAGoC,GAMnD,OALA0rD,EAAgB1rD,GAChB+I,KAAKglD,YAAY/tD,EAAI,GAClBpC,EAAI,IACLA,GAAK,GAAMoC,EAAI,GAEV+I,KAAKikD,OAAOpvD,EAAGoC,EACxB,EAOAhH,EAAKy0D,WAAW3tD,UAAUotD,QAAU,WAClC,OAAOnkD,KAAKrD,KAAKipD,QAAQ5lD,KAAKtO,OAChC,EAQAzB,EAAKy0D,WAAW3tD,UAAUqtD,SAAW,WACnC,IAAIpxD,EAAOgN,KAAKrD,KAAKynD,SAASpkD,KAAKtO,MAEnC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAKy0D,WAAW3tD,UAAUstD,SAAW,WACnC,IAAIrxD,EACFgN,KAAKrD,KAAKynD,SAASpkD,KAAKtO,OAAS,EACjCsO,KAAKrD,KAAKipD,QAAQ5lD,KAAKtO,KAAO,GAEhC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAKy0D,WAAW3tD,UAAU4I,SAAW,WACnC,IAAI3M,EAAOgN,KAAKrD,KAAKgD,SAASK,KAAKtO,MAEnC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAKy0D,WAAW3tD,UAAUwH,WAAa,WACrC,IAAIvL,EAAOgN,KAAKrD,KAAKynD,SAASpkD,KAAKtO,MAAM,GAEzC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAKy0D,WAAW3tD,UAAUutD,WAAa,WACrC,IAAItxD,EACFgN,KAAKrD,KAAKipD,QAAQ5lD,KAAKtO,MACvBsO,KAAKrD,KAAKynD,SAASpkD,KAAKtO,KAAO,GAAG,IAAS,EAE7C,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAQA/C,EAAKy0D,WAAW3tD,UAAUwtD,WAAa,WACrC,IAAIvxD,EAAOgN,KAAKrD,KAAKgD,SAASK,KAAKtO,MAAM,GAEzC,OADAsO,KAAKtO,MAAQ,EACNsB,CACT,EAUA/C,EAAKy0D,WAAW3tD,UAAUikD,OAAS,SAAS/jD,GAC1C0rD,EAAgB1rD,GAChB,IAAIjE,EAAO,EACX,GAEEA,GAAQA,GAAQ,GAAKgN,KAAKrD,KAAKipD,QAAQ5lD,KAAKtO,QAC5CuF,GAAK,QACCA,EAAI,GACZ,OAAOjE,CACT,EAUA/C,EAAKy0D,WAAW3tD,UAAUytD,aAAe,SAASvtD,GAEhD,IAAIkF,EAAI6D,KAAKg7C,OAAO/jD,GAChBwD,EAAM,GAAMxD,EAAI,EAIpB,OAHGkF,GAAK1B,IACN0B,GAAK1B,GAAO,GAEP0B,CACT,EAUAlM,EAAKy0D,WAAW3tD,UAAUhG,SAAW,SAASwJ,GAI5C,IAAIvH,EAaJ,OAZGuH,GAEDA,EAAQC,KAAKE,IAAIsF,KAAK7L,SAAUoG,GAChCvH,EAAOgN,KAAKrD,KAAK6D,MAAMR,KAAKtO,KAAMsO,KAAKtO,KAAO6I,GAC9CyF,KAAKtO,MAAQ6I,GACK,IAAVA,EACRvH,EAAO,IAGPA,EAAsB,IAAdgN,KAAKtO,KAAcsO,KAAKrD,KAAOqD,KAAKrD,KAAK6D,MAAMR,KAAKtO,MAC5DsO,KAAKe,SAEA/N,CACT,EAUA/C,EAAKy0D,WAAW3tD,UAAU6E,MAAQ,SAASrB,GAEzC,MAA0B,qBAAXA,EACbyF,KAAKrD,KAAK6D,MAAMR,KAAKtO,MACrBsO,KAAKrD,KAAK6D,MAAMR,KAAKtO,KAAMsO,KAAKtO,KAAO6I,EAC3C,EASAtK,EAAKy0D,WAAW3tD,UAAUjC,GAAK,SAASD,GACtC,OAAOmL,KAAKrD,KAAKkpD,SAAS7lD,KAAKtO,KAAOmD,EACxC,EAUA5E,EAAKy0D,WAAW3tD,UAAU6G,MAAQ,SAAS/I,EAAG8C,GAE5C,OADAqI,KAAKrD,KAAKwoD,SAAStwD,EAAG8C,GACfqI,IACT,EAOA/P,EAAKy0D,WAAW3tD,UAAUnC,KAAO,WAC/B,OAAOoL,KAAKrD,KAAKkpD,SAAS7lD,KAAK3N,MAAQ,EACzC,EAOApC,EAAKy0D,WAAW3tD,UAAU6R,KAAO,WAC/B,OAAO,IAAI3Y,EAAKy0D,WAAW1kD,KAC7B,EAOA/P,EAAKy0D,WAAW3tD,UAAUgrD,QAAU,WAClC,GAAG/hD,KAAKtO,KAAO,EAAG,CAChB,IAAIi3C,EAAM,IAAIqa,WAAWhjD,KAAKrD,KAAK0K,OAAQrH,KAAKtO,MAC5CwzD,EAAM,IAAIlC,WAAWra,EAAI8M,YAC7ByP,EAAIn3C,IAAI46B,GACR3oC,KAAKrD,KAAO,IAAIkoD,SAASK,GACzBllD,KAAK3N,OAAS2N,KAAKtO,KACnBsO,KAAKtO,KAAO,CACd,CACA,OAAOsO,IACT,EAOA/P,EAAKy0D,WAAW3tD,UAAUgK,MAAQ,WAGhC,OAFAf,KAAKrD,KAAO,IAAIkoD,SAAS,IAAInB,YAAY,IACzC1jD,KAAKtO,KAAOsO,KAAK3N,MAAQ,EAClB2N,IACT,EASA/P,EAAKy0D,WAAW3tD,UAAUhC,SAAW,SAASwF,GAG5C,OAFAyF,KAAK3N,MAAQmI,KAAKC,IAAI,EAAGuF,KAAK7L,SAAWoG,GACzCyF,KAAKtO,KAAO8I,KAAKE,IAAIsF,KAAKtO,KAAMsO,KAAK3N,OAC9B2N,IACT,EAOA/P,EAAKy0D,WAAW3tD,UAAUiS,MAAQ,WAEhC,IADA,IAAIhW,EAAO,GACH6B,EAAImL,KAAKtO,KAAMmD,EAAImL,KAAKrD,KAAK84C,aAAc5gD,EAAG,CACpD,IAAI8C,EAAIqI,KAAKrD,KAAKkpD,SAAShxD,GACxB8C,EAAI,KACL3E,GAAQ,KAEVA,GAAQ2E,EAAEqE,SAAS,GACrB,CACA,OAAOhJ,CACT,EAWA/C,EAAKy0D,WAAW3tD,UAAUiF,SAAW,SAASuN,GAC5C,IAAI+X,EAAO,IAAI0hC,WAAWhjD,KAAKrD,KAAMqD,KAAKtO,KAAMsO,KAAK7L,UAIrD,GAAgB,YAHhBoV,EAAWA,GAAY,SAGkB,QAAbA,EAC1B,OAAOtZ,EAAKm1D,OAAOE,IAAIt0D,OAAOswB,GAEhC,GAAgB,QAAb/X,EACD,OAAOtZ,EAAKm1D,OAAO57C,IAAIxY,OAAOswB,GAEhC,GAAgB,WAAb/X,EACD,OAAOtZ,EAAKm1D,OAAOC,OAAOr0D,OAAOswB,GAInC,GAAgB,SAAb/X,EACD,OAAOtZ,EAAKg4B,KAAK69B,KAAKj2D,OAAOyxB,GAE/B,GAAgB,UAAb/X,EACD,OAAOtZ,EAAKg4B,KAAKu9B,MAAM31D,OAAOyxB,GAGhC,MAAM,IAAItxB,MAAM,qBAAuBuZ,EACzC,EAcAtZ,EAAKC,aAAe,SAASmE,EAAOkV,GAMlC,OAJAA,EAAWA,GAAY,WACV0wC,IAAV5lD,GAAoC,SAAbkV,IACxBlV,EAAQpE,EAAK4xD,WAAWxtD,IAEnB,IAAIpE,EAAK6T,WAAWzP,EAC7B,EAYApE,EAAK+lD,WAAa,SAAS3kD,EAAG4F,GAE5B,IADA,IAAIlE,EAAI,GACFkE,EAAI,GACD,EAAJA,IACDlE,GAAK1B,IAEP4F,KAAO,GACA,IACL5F,GAAKA,GAGT,OAAO0B,CACT,EAYA9C,EAAK81D,SAAW,SAASC,EAAI/D,EAAIhrD,GAM/B,IALA,IAAIgvD,EAAK,GACLtuD,EAAI,GACJkM,EAAI,GACJhP,EAAI,EACJxD,EAAI,EACF4F,EAAI,IAAKA,IAAKpC,EAClB8C,EAAIquD,EAAG7L,WAAWtlD,GAAKotD,EAAG9H,WAAWtlD,GAClCxD,GAAK,KACN40D,GAAMpiD,EACNA,EAAI,GACJxS,EAAI,GAENwS,GAAKzH,OAAOC,aAAa1E,KACvBtG,EAGJ,OADA40D,GAAMpiD,CAER,EASA5T,EAAKsX,WAAa,SAASiC,GAEzB,IAAIxW,EAAO,GACP6B,EAAI,EAOR,KANgB,EAAb2U,EAAIrV,SAELU,EAAI,EACJ7B,GAAQoJ,OAAOC,aAAa6iD,SAAS11C,EAAI,GAAI,MAGzC3U,EAAI2U,EAAIrV,OAAQU,GAAK,EACzB7B,GAAQoJ,OAAOC,aAAa6iD,SAAS11C,EAAIvN,OAAOpH,EAAG,GAAI,KAEzD,OAAO7B,CACT,EASA/C,EAAK0lD,WAAa,SAAS/5C,GAEzB,OAAO3L,EAAKC,aAAa0L,GAAOoN,OAClC,EASA/Y,EAAKi2D,aAAe,SAASrxD,GAC3B,OACEuH,OAAOC,aAAaxH,GAAK,GAAK,KAC9BuH,OAAOC,aAAaxH,GAAK,GAAK,KAC9BuH,OAAOC,aAAaxH,GAAK,EAAI,KAC7BuH,OAAOC,aAAiB,IAAJxH,EACxB,EAGA,IAAIsxD,EACF,oEACEC,EAAa,CAGd,IAAK,GAAI,GAAI,EAAG,GAGhB,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGpC,GAAI,GAAI,EAAG,IAAK,GAAI,GAAI,EAIxB,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAG,GAAI,GAAI,GAG/C,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAIhD,GAAI,GAAI,GAAI,GAAI,GAAI,EAIpB,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAGhD,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAI/CC,EAAU,6DAWdp2D,EAAKqY,SAAW,SAASjU,EAAOzD,GAM9B,IAJA,IAEI01D,EAAMC,EAAMC,EAFZC,EAAO,GACP1yD,EAAS,GAETc,EAAI,EACFA,EAAIR,EAAMF,QACdmyD,EAAOjyD,EAAM8lD,WAAWtlD,KACxB0xD,EAAOlyD,EAAM8lD,WAAWtlD,KACxB2xD,EAAOnyD,EAAM8lD,WAAWtlD,KAGxB4xD,GAAQN,EAAQ3wC,OAAO8wC,GAAQ,GAC/BG,GAAQN,EAAQ3wC,QAAgB,EAAP8wC,IAAa,EAAMC,GAAQ,GACjD56C,MAAM46C,GACPE,GAAQ,MAERA,GAAQN,EAAQ3wC,QAAgB,GAAP+wC,IAAc,EAAMC,GAAQ,GACrDC,GAAQ96C,MAAM66C,GAAQ,IAAML,EAAQ3wC,OAAc,GAAPgxC,IAG1C51D,GAAW61D,EAAKtyD,OAASvD,IAC1BmD,GAAU0yD,EAAKxqD,OAAO,EAAGrL,GAAW,OACpC61D,EAAOA,EAAKxqD,OAAOrL,IAIvB,OADAmD,GAAU0yD,CAEZ,EASAx2D,EAAKy2D,SAAW,SAASryD,GAIvBA,EAAQA,EAAM6X,QAAQ,sBAAuB,IAM7C,IAJA,IACIy6C,EAAMC,EAAMC,EAAMC,EADlB/yD,EAAS,GAETc,EAAI,EAEFA,EAAIR,EAAMF,QACdwyD,EAAOP,EAAW/xD,EAAM8lD,WAAWtlD,KAAO,IAC1C+xD,EAAOR,EAAW/xD,EAAM8lD,WAAWtlD,KAAO,IAC1CgyD,EAAOT,EAAW/xD,EAAM8lD,WAAWtlD,KAAO,IAC1CiyD,EAAOV,EAAW/xD,EAAM8lD,WAAWtlD,KAAO,IAE1Cd,GAAUqI,OAAOC,aAAcsqD,GAAQ,EAAMC,GAAQ,GACzC,KAATC,IAED9yD,GAAUqI,OAAOC,cAAsB,GAAPuqD,IAAc,EAAMC,GAAQ,GAChD,KAATC,IAED/yD,GAAUqI,OAAOC,cAAsB,EAAPwqD,IAAa,EAAKC,KAKxD,OAAO/yD,CACT,EAYA9D,EAAK4xD,WAAa,SAASgC,GACzB,OAAOkD,SAASj9C,mBAAmB+5C,GACrC,EAWA5zD,EAAKw0D,WAAa,SAASZ,GACzB,OAAOmD,mBAAmBC,OAAOpD,GACnC,EAIA5zD,EAAKm1D,OAAS,CACZE,IAAK,CAAC,EACN97C,IAAK,CAAC,EACN67C,OAAQ,CAAC,EACT6B,OAAQ,CAAC,EACTxE,MAAQ,CACN1xD,OAAQ0xD,EAAM1xD,OACdnB,OAAQ6yD,EAAM7yD,SAYlBI,EAAKm1D,OAAOE,IAAIt0D,OAAS,SAAS4K,GAChC,OAAOQ,OAAOC,aAAakJ,MAAM,KAAM3J,EACzC,EAaA3L,EAAKm1D,OAAOE,IAAIz1D,OAAS,SAASg0D,EAAK9vD,EAAQm2B,GAC7C,IAAIvnB,EAAM5O,EACN4O,IACFA,EAAM,IAAIqgD,WAAWa,EAAI1vD,SAI3B,IADA,IAAI6J,EADJksB,EAASA,GAAU,EAEXr1B,EAAI,EAAGA,EAAIgvD,EAAI1vD,SAAUU,EAC/B8N,EAAI3E,KAAO6lD,EAAI1J,WAAWtlD,GAE5B,OAAOd,EAAUiK,EAAIksB,EAAUvnB,CACjC,EAUA1S,EAAKm1D,OAAO57C,IAAIxY,OAASf,EAAK0lD,WAY9B1lD,EAAKm1D,OAAO57C,IAAI3Z,OAAS,SAAS2Z,EAAKzV,EAAQm2B,GAC7C,IAAIvnB,EAAM5O,EACN4O,IACFA,EAAM,IAAIqgD,WAAWxoD,KAAKkD,KAAK8L,EAAIrV,OAAS,KAG9C,IAAIU,EAAI,EAAGmJ,EADXksB,EAASA,GAAU,EAQnB,IANgB,EAAb1gB,EAAIrV,SAELU,EAAI,EACJ8N,EAAI3E,KAAOkhD,SAAS11C,EAAI,GAAI,KAGxB3U,EAAI2U,EAAIrV,OAAQU,GAAK,EACzB8N,EAAI3E,KAAOkhD,SAAS11C,EAAIvN,OAAOpH,EAAG,GAAI,IAExC,OAAOd,EAAUiK,EAAIksB,EAAUvnB,CACjC,EAWA1S,EAAKm1D,OAAOC,OAAOr0D,OAAS,SAASqD,EAAOzD,GAK1C,IAJA,IAEI01D,EAAMC,EAAMC,EAFZC,EAAO,GACP1yD,EAAS,GAETc,EAAI,EACFA,EAAIR,EAAMohD,YACd6Q,EAAOjyD,EAAMQ,KACb0xD,EAAOlyD,EAAMQ,KACb2xD,EAAOnyD,EAAMQ,KAGb4xD,GAAQN,EAAQ3wC,OAAO8wC,GAAQ,GAC/BG,GAAQN,EAAQ3wC,QAAgB,EAAP8wC,IAAa,EAAMC,GAAQ,GACjD56C,MAAM46C,GACPE,GAAQ,MAERA,GAAQN,EAAQ3wC,QAAgB,GAAP+wC,IAAc,EAAMC,GAAQ,GACrDC,GAAQ96C,MAAM66C,GAAQ,IAAML,EAAQ3wC,OAAc,GAAPgxC,IAG1C51D,GAAW61D,EAAKtyD,OAASvD,IAC1BmD,GAAU0yD,EAAKxqD,OAAO,EAAGrL,GAAW,OACpC61D,EAAOA,EAAKxqD,OAAOrL,IAIvB,OADAmD,GAAU0yD,CAEZ,EAYAx2D,EAAKm1D,OAAOC,OAAOx1D,OAAS,SAASwE,EAAON,EAAQm2B,GAClD,IASIy8B,EAAMC,EAAMC,EAAMC,EATlBnkD,EAAM5O,EACN4O,IACFA,EAAM,IAAIqgD,WAAyC,EAA9BxoD,KAAKkD,KAAKrJ,EAAMF,OAAS,KAIhDE,EAAQA,EAAM6X,QAAQ,sBAAuB,IAM7C,IAFA,IAAIrX,EAAI,EAAGmJ,EAFXksB,EAASA,GAAU,EAIbr1B,EAAIR,EAAMF,QACdwyD,EAAOP,EAAW/xD,EAAM8lD,WAAWtlD,KAAO,IAC1C+xD,EAAOR,EAAW/xD,EAAM8lD,WAAWtlD,KAAO,IAC1CgyD,EAAOT,EAAW/xD,EAAM8lD,WAAWtlD,KAAO,IAC1CiyD,EAAOV,EAAW/xD,EAAM8lD,WAAWtlD,KAAO,IAE1C8N,EAAI3E,KAAQ2oD,GAAQ,EAAMC,GAAQ,EACtB,KAATC,IAEDlkD,EAAI3E,MAAgB,GAAP4oD,IAAc,EAAMC,GAAQ,EAC7B,KAATC,IAEDnkD,EAAI3E,MAAgB,EAAP6oD,IAAa,EAAKC,IAMrC,OAAO/yD,EAAUiK,EAAIksB,EAAUvnB,EAAIwkD,SAAS,EAAGnpD,EACjD,EAGA/N,EAAKm1D,OAAO8B,OAAOl2D,OAAS,SAASqD,EAAOzD,GAC1C,OAAOX,EAAKm1D,OAAO1C,MAAM1xD,OAAOqD,EAAOgyD,EAASz1D,EAClD,EACAX,EAAKm1D,OAAO8B,OAAOr3D,OAAS,SAASwE,EAAOzD,GAC1C,OAAOX,EAAKm1D,OAAO1C,MAAM7yD,OAAOwE,EAAOgyD,EAASz1D,EAClD,EAIAX,EAAKg4B,KAAO,CACV69B,KAAM,CAAC,EACPN,MAAO,CAAC,GAaVv1D,EAAKg4B,KAAK69B,KAAK90D,OAAS,SAAS6yD,EAAK9vD,EAAQm2B,GAC5C25B,EAAM5zD,EAAK4xD,WAAWgC,GACtB,IAAIlhD,EAAM5O,EACN4O,IACFA,EAAM,IAAIqgD,WAAWa,EAAI1vD,SAI3B,IADA,IAAI6J,EADJksB,EAASA,GAAU,EAEXr1B,EAAI,EAAGA,EAAIgvD,EAAI1vD,SAAUU,EAC/B8N,EAAI3E,KAAO6lD,EAAI1J,WAAWtlD,GAE5B,OAAOd,EAAUiK,EAAIksB,EAAUvnB,CACjC,EASA1S,EAAKg4B,KAAK69B,KAAKj2D,OAAS,SAAS+L,GAC/B,OAAO3L,EAAKw0D,WAAWroD,OAAOC,aAAakJ,MAAM,KAAM3J,GACzD,EAYA3L,EAAKg4B,KAAKu9B,MAAMx0D,OAAS,SAAS6yD,EAAK9vD,EAAQm2B,GAC7C,IAAIvnB,EAAM5O,EACN4O,IACFA,EAAM,IAAIqgD,WAAwB,EAAba,EAAI1vD,SAM3B,IAJA,IAAImtB,EAAO,IAAIikC,YAAY5iD,EAAI0E,QAE3BrJ,EADJksB,EAASA,GAAU,EAEfzzB,EAAIyzB,EACAr1B,EAAI,EAAGA,EAAIgvD,EAAI1vD,SAAUU,EAC/BysB,EAAK7qB,KAAOotD,EAAI1J,WAAWtlD,GAC3BmJ,GAAK,EAEP,OAAOjK,EAAUiK,EAAIksB,EAAUvnB,CACjC,EASA1S,EAAKg4B,KAAKu9B,MAAM31D,OAAS,SAAS+L,GAChC,OAAOQ,OAAOC,aAAakJ,MAAM,KAAM,IAAIggD,YAAY3pD,EAAMyL,QAC/D,EAYApX,EAAKm3D,QAAU,SAASC,EAAKzrD,EAAO0pD,GAIlC,GAHA1pD,EAAQ3L,EAAKy2D,SAASW,EAAID,QAAQn3D,EAAKqY,SAAS1M,IAAQ5I,MAGrDsyD,EAAK,CAIN,IAAIzxD,EAAQ,EAEH,GADC+H,EAAMu+C,WAAW,KAEzBtmD,EAAQ,GAGV+H,EAAQA,EAAM6Z,UAAU5hB,EAAO+H,EAAMzH,OAAS,EAChD,CAEA,OAAOyH,CACT,EAYA3L,EAAKq3D,QAAU,SAASD,EAAKzrD,EAAO0pD,GAElC,IAAItyD,EAAOq0D,EAAIC,QAAQr3D,EAAKqY,SAAS1M,IAAQ5I,KAC7C,OAAiB,OAATA,EAAiB,KAAO/C,EAAKy2D,SAAS1zD,EAChD,EASA,IAAIu0D,EAAoB,SAASF,EAAK7xD,EAAIjF,GACxC,IAAI82D,EACF,MAAM,IAAIr3D,MAAM,6BAGlB,IAAIgD,EAUJ,GATW,OAARzC,EACDyC,EAAOq0D,EAAIG,WAAWhyD,IAGtBjF,EAAMN,EAAKqY,SAAS+lC,KAAKC,UAAU/9C,IACnCyC,EAAOq0D,EAAII,QAAQjyD,EAAIjF,IAIL,qBAAVyC,IAAuC,IAAdA,EAAKA,KAAe,CACrD,IAAI3C,EAAQ,IAAIL,MAAMgD,EAAK3C,MAAMuU,SAGjC,MAFAvU,EAAMmF,GAAKxC,EAAK3C,MAAMmF,GACtBnF,EAAMoF,KAAOzC,EAAK3C,MAAMoF,KAClBpF,CACR,CACF,EAUIq3D,EAAoB,SAASL,EAAK7xD,GACpC,IAAI6xD,EACF,MAAM,IAAIr3D,MAAM,6BAIlB,IAAIgD,EAAOq0D,EAAIM,QAAQnyD,GAQvB,GAAG6xD,EAAIz1D,KACL,GAAiB,OAAdoB,EAAKA,KAAe,CACrB,GAAGA,EAAK3C,MAAO,CACb,IAAIA,EAAQ,IAAIL,MAAMgD,EAAK3C,MAAMuU,SAGjC,MAFAvU,EAAMmF,GAAKxC,EAAK3C,MAAMmF,GACtBnF,EAAMoF,KAAOzC,EAAK3C,MAAMoF,KAClBpF,CACR,CAEA2C,EAAO,IACT,MACEA,EAAOA,EAAKA,KAUhB,OALY,OAATA,IAEDA,EAAOq7C,KAAKuZ,MAAM33D,EAAKy2D,SAAS1zD,KAG3BA,CACT,EAUI60D,EAAW,SAASR,EAAK7xD,EAAI7E,EAAKgM,GAEpC,IAAIpM,EAAMm3D,EAAkBL,EAAK7xD,GACtB,OAARjF,IAEDA,EAAM,CAAC,GAGTA,EAAII,GAAOgM,EAGX4qD,EAAkBF,EAAK7xD,EAAIjF,EAC7B,EAWIu3D,EAAW,SAAST,EAAK7xD,EAAI7E,GAE/B,IAAIqC,EAAO00D,EAAkBL,EAAK7xD,GAMlC,OALY,OAATxC,IAEDA,EAAQrC,KAAOqC,EAAQA,EAAKrC,GAAO,MAG9BqC,CACT,EASI+0D,EAAc,SAASV,EAAK7xD,EAAI7E,GAElC,IAAIJ,EAAMm3D,EAAkBL,EAAK7xD,GACjC,GAAW,OAARjF,GAAgBI,KAAOJ,EAAK,QAEtBA,EAAII,GAGX,IAAIq3D,GAAQ,EACZ,IAAI,IAAIC,KAAQ13D,EAAK,CACnBy3D,GAAQ,EACR,KACF,CACGA,IAEDz3D,EAAM,MAIRg3D,EAAkBF,EAAK7xD,EAAIjF,EAC7B,CACF,EAQI23D,EAAc,SAASb,EAAK7xD,GAC9B+xD,EAAkBF,EAAK7xD,EAAI,KAC7B,EAWI2yD,EAAuB,SAASC,EAAMhjD,EAAMuB,GAC9C,IAQI5W,EARAiD,EAAO,KAGa,qBAAd2T,IACRA,EAAW,CAAC,MAAO,UAKrB,IAAI4vB,GAAO,EACP8xB,EAAY,KAChB,IAAI,IAAIC,KAAO3hD,EAAU,CACvB5W,EAAO4W,EAAS2hD,GAChB,IACE,GAAY,UAATv4D,GAA6B,SAATA,EAAiB,CACtC,GAAe,OAAZqV,EAAK,GACN,MAAM,IAAIpV,MAAM,sCAElBgD,EAAOo1D,EAAK7iD,MAAMvF,KAAMoF,GACxBmxB,EAAiB,UAATxmC,CACV,CACY,QAATA,GAA2B,SAATA,IACnBqV,EAAK,GAAKmjD,aACVv1D,EAAOo1D,EAAK7iD,MAAMvF,KAAMoF,GACxBmxB,GAAO,EAEX,CAAE,MAAMiyB,GACNH,EAAYG,CACd,CACA,GAAGjyB,EACD,KAEJ,CAEA,IAAIA,EACF,MAAM8xB,EAGR,OAAOr1D,CACT,EA8BA/C,EAAKw3D,QAAU,SAASJ,EAAK7xD,EAAI7E,EAAKgM,EAAMgK,GAC1CwhD,EAAqBN,EAAUniD,UAAWiB,EAC5C,EAcA1W,EAAK03D,QAAU,SAASN,EAAK7xD,EAAI7E,EAAKgW,GACpC,OAAOwhD,EAAqBL,EAAUpiD,UAAWiB,EACnD,EAYA1W,EAAKu3D,WAAa,SAASH,EAAK7xD,EAAI7E,EAAKgW,GACvCwhD,EAAqBJ,EAAariD,UAAWiB,EAC/C,EAWA1W,EAAKw4D,WAAa,SAASpB,EAAK7xD,EAAImR,GAClCwhD,EAAqBD,EAAaxiD,UAAWiB,EAC/C,EAUA1W,EAAK2zD,QAAU,SAASrzD,GACtB,IAAI,IAAI03D,KAAQ13D,EACd,GAAGA,EAAIyG,eAAeixD,GACpB,OAAO,EAGX,OAAO,CACT,EAWAh4D,EAAKqV,OAAS,SAASA,GAarB,IAZA,IAEIoE,EAEAg/C,EAJA//B,EAAK,MAMLggC,EAAO,EAEPC,EAAQ,GAERh0D,EAAO,EAEJ8U,EAAQif,EAAGkgC,KAAKvjD,IAAU,EAC/BojD,EAAOpjD,EAAOmQ,UAAU7gB,EAAM+zB,EAAGmgC,UAAY,IAErC30D,OAAS,GACfy0D,EAAMtqD,KAAKoqD,GAEb9zD,EAAO+zB,EAAGmgC,UAEV,IAAIhkC,EAAOpb,EAAM,GAAG,GACpB,OAAOob,GACP,IAAK,IACL,IAAK,IAEA6jC,EAAOjjD,UAAUvR,OAClBy0D,EAAMtqD,KAAKoH,UAAmB,EAATijD,MAErBC,EAAMtqD,KAAK,OAEb,MAIF,IAAK,IACHsqD,EAAMtqD,KAAK,KACX,MACF,QACEsqD,EAAMtqD,KAAK,KAAOwmB,EAAO,MAE7B,CAGA,OADA8jC,EAAMtqD,KAAKgH,EAAOmQ,UAAU7gB,IACrBg0D,EAAMj/C,KAAK,GACpB,EAOA1Z,EAAK84D,aAAe,SAASnhC,EAAQohC,EAAUC,EAAWC,GAWxD,IAAIjyD,EAAI2wB,EAAQv2B,EAAIsa,MAAMq9C,EAAWxuD,KAAK2uD,IAAIH,IAAa,EAAIA,EAC3DpxD,OAAkBqiD,IAAdgP,EAA0B,IAAMA,EACpCplD,OAAsBo2C,IAAlBiP,EACP,IAAMA,EAAen2D,EAAIkE,EAAI,EAAI,IAAM,GACpCpC,EAAIqqD,SAAUjoD,EAAIuD,KAAK2uD,KAAKlyD,GAAK,GAAGmyD,QAAQ/3D,GAAK,IAAM,GACvD2M,EAAKnJ,EAAEV,OAAS,EAAKU,EAAEV,OAAS,EAAI,EACxC,OAAOpB,GAAKiL,EAAInJ,EAAEoH,OAAO,EAAG+B,GAAK6F,EAAI,IACnChP,EAAEoH,OAAO+B,GAAGkO,QAAQ,iBAAkB,KAAOrI,IAC5CxS,EAAIuG,EAAI4C,KAAK2uD,IAAIlyD,EAAIpC,GAAGu0D,QAAQ/3D,GAAGmP,MAAM,GAAK,GACnD,EAOAvQ,EAAKo5D,WAAa,SAASlmD,GAUzB,OAREA,EADCA,GAAQ,WACFlT,EAAK84D,aAAa5lD,EAAO,WAAY,EAAG,IAAK,IAAM,OAClDA,GAAQ,QACTlT,EAAK84D,aAAa5lD,EAAO,QAAS,EAAG,IAAK,IAAM,OAC/CA,GAAQ,KACTlT,EAAK84D,aAAa5lD,EAAO,KAAM,GAAK,OAEpClT,EAAK84D,aAAa5lD,EAAM,GAAK,QAGxC,EAUAlT,EAAKq5D,YAAc,SAASC,GAC1B,OAAwB,IAArBA,EAAGj0C,QAAQ,KACLrlB,EAAKu5D,cAAcD,IAEJ,IAArBA,EAAGj0C,QAAQ,KACLrlB,EAAKw5D,cAAcF,GAErB,IACT,EASAt5D,EAAKu5D,cAAgB,SAASD,GAE5B,GAAiB,KADjBA,EAAKA,EAAGn+C,MAAM,MACRjX,OACJ,OAAO,KAGT,IADA,IAAIwD,EAAI1H,EAAKC,eACL2E,EAAI,EAAGA,EAAI00D,EAAGp1D,SAAUU,EAAG,CACjC,IAAIiL,EAAMo/C,SAASqK,EAAG10D,GAAI,IAC1B,GAAG8W,MAAM7L,GACP,OAAO,KAETnI,EAAEwD,QAAQ2E,EACZ,CACA,OAAOnI,EAAE5G,UACX,EASAd,EAAKw5D,cAAgB,SAASF,GAQ5B,IAPA,IAAIG,EAAS,EAKT3T,EAAmC,GAA1B,GAJbwT,EAAKA,EAAGn+C,MAAM,KAAKkzC,OAAO,SAASzmD,GAEjC,OADgB,IAAbA,EAAE1D,UAAgBu1D,GACd,CACT,IACoBv1D,OAASu1D,GACzB/xD,EAAI1H,EAAKC,eACL2E,EAAI,EAAGA,EAAI,IAAKA,EACtB,GAAI00D,EAAG10D,IAAuB,IAAjB00D,EAAG10D,GAAGV,OAAnB,CAKA,IAAIyH,EAAQ3L,EAAKsX,WAAWgiD,EAAG10D,IAC5B+G,EAAMzH,OAAS,GAChBwD,EAAEwD,QAAQ,GAEZxD,EAAEtE,SAASuI,EALX,MAHEjE,EAAEnD,aAAa,EAAGuhD,GAClBA,EAAQ,EASZ,OAAOp+C,EAAE5G,UACX,EAWAd,EAAK05D,UAAY,SAAS/tD,GACxB,OAAoB,IAAjBA,EAAMzH,OACAlE,EAAK25D,YAAYhuD,GAEN,KAAjBA,EAAMzH,OACAlE,EAAK45D,YAAYjuD,GAEnB,IACT,EAUA3L,EAAK25D,YAAc,SAAShuD,GAC1B,GAAoB,IAAjBA,EAAMzH,OACP,OAAO,KAGT,IADA,IAAIo1D,EAAK,GACD10D,EAAI,EAAGA,EAAI+G,EAAMzH,SAAUU,EACjC00D,EAAGjrD,KAAK1C,EAAMu+C,WAAWtlD,IAE3B,OAAO00D,EAAG5/C,KAAK,IACjB,EAUA1Z,EAAK45D,YAAc,SAASjuD,GAC1B,GAAoB,KAAjBA,EAAMzH,OACP,OAAO,KAKT,IAHA,IAAIo1D,EAAK,GACLO,EAAa,GACbC,EAAe,EACXl1D,EAAI,EAAGA,EAAI+G,EAAMzH,OAAQU,GAAK,EAAG,CAGvC,IAFA,IAAI2U,EAAMvZ,EAAK0lD,WAAW/5C,EAAM/G,GAAK+G,EAAM/G,EAAI,IAE9B,MAAX2U,EAAI,IAAsB,MAARA,GACtBA,EAAMA,EAAIvN,OAAO,GAEnB,GAAW,MAARuN,EAAa,CACd,IAAI5U,EAAOk1D,EAAWA,EAAW31D,OAAS,GACtCm0D,EAAMiB,EAAGp1D,OACTS,GAAQ0zD,IAAQ1zD,EAAKo2B,IAAM,GAG7Bp2B,EAAKo2B,IAAMs9B,EACP1zD,EAAKo2B,IAAMp2B,EAAKf,MACjBi2D,EAAWC,GAAc/+B,IAAM8+B,EAAWC,GAAcl2D,QACzDk2D,EAAeD,EAAW31D,OAAS,IALrC21D,EAAWxrD,KAAK,CAACzK,MAAOy0D,EAAKt9B,IAAKs9B,GAQtC,CACAiB,EAAGjrD,KAAKkL,EACV,CACA,GAAGsgD,EAAW31D,OAAS,EAAG,CACxB,IAAI61D,EAAQF,EAAWC,GAEpBC,EAAMh/B,IAAMg/B,EAAMn2D,MAAQ,IAC3B01D,EAAGpb,OAAO6b,EAAMn2D,MAAOm2D,EAAMh/B,IAAMg/B,EAAMn2D,MAAQ,EAAG,IACjC,IAAhBm2D,EAAMn2D,OACP01D,EAAG15B,QAAQ,IAEI,IAAdm6B,EAAMh/B,KACPu+B,EAAGjrD,KAAK,IAGd,CACA,OAAOirD,EAAG5/C,KAAK,IACjB,EAWA1Z,EAAKg6D,cAAgB,SAAS76D,EAASkM,GAMrC,GALsB,oBAAZlM,IACRkM,EAAWlM,EACXA,EAAU,CAAC,GAEbA,EAAUA,GAAW,CAAC,EACnB,UAAWa,IAASb,EAAQ4E,OAC7B,OAAOsH,EAAS,KAAMrL,EAAKi6D,OAE7B,GAAwB,qBAAdpY,WACR,wBAAyBA,WACzBA,UAAUqY,oBAAsB,EAEhC,OADAl6D,EAAKi6D,MAAQpY,UAAUqY,oBAChB7uD,EAAS,KAAMrL,EAAKi6D,OAE7B,GAAqB,qBAAXE,OAGR,OADAn6D,EAAKi6D,MAAQ,EACN5uD,EAAS,KAAMrL,EAAKi6D,OAE7B,GAAmB,qBAATG,KAGR,OADAp6D,EAAKi6D,MAAQ,EACN5uD,EAAS,KAAMrL,EAAKi6D,OAI7B,IAAII,EAAUzjD,IAAI0jD,gBAAgB,IAAIF,KAAK,CAAC,IAC1C,WACE7tD,KAAKC,iBAAiB,UAAW,SAAS5E,GAIxC,IAFA,IAAI2yD,EAAK5kD,KAAKsb,MACVupC,EAAKD,EAAK,EACR5kD,KAAKsb,MAAQupC,IACnBjuD,KAAKK,YAAY,CAAC2tD,GAAIA,EAAIC,GAAIA,GAChC,EACF,EAAEzuD,WACJ,OAAQ,CAACjM,KAAM,6BAKf,SAAS26D,EAAOjwD,EAAKkwD,EAASC,GAC5B,GAAe,IAAZD,EAAe,CAEhB,IAAIE,EAAMrwD,KAAKK,MAAMJ,EAAIqwD,OAAO,SAASD,EAAK1uD,GAC5C,OAAO0uD,EAAM1uD,CACf,EAAG,GAAK1B,EAAItG,QAGZ,OAFAlE,EAAKi6D,MAAQ1vD,KAAKC,IAAI,EAAGowD,GACzBhkD,IAAIkkD,gBAAgBT,GACbhvD,EAAS,KAAMrL,EAAKi6D,MAC7B,EAOF,SAAaU,EAAYtvD,GAGvB,IAFA,IAAI0vD,EAAU,GACVC,EAAU,GACNp2D,EAAI,EAAGA,EAAI+1D,IAAc/1D,EAAG,CAClC,IAAI0H,EAAS,IAAI6tD,OAAOE,GACxB/tD,EAAOE,iBAAiB,UAAW,SAAS5E,GAE1C,GADAozD,EAAQ3sD,KAAKzG,EAAE8E,MACZsuD,EAAQ92D,SAAWy2D,EAAY,CAChC,IAAI,IAAI/1D,EAAI,EAAGA,EAAI+1D,IAAc/1D,EAC/Bm2D,EAAQn2D,GAAGq2D,YAEb5vD,EAAS,KAAM2vD,EACjB,CACF,GACAD,EAAQ1sD,KAAK/B,EACf,CACA,IAAQ1H,EAAI,EAAGA,EAAI+1D,IAAc/1D,EAC/Bm2D,EAAQn2D,GAAGgI,YAAYhI,EAE3B,CAzBEs2D,CAAIP,EAAY,SAASnvD,EAAKwvD,GAC5BxwD,EAAI6D,KA0BR,SAAgBssD,EAAYK,GAG1B,IADA,IAAIG,EAAW,GACPn0D,EAAI,EAAGA,EAAI2zD,IAAc3zD,EAG/B,IAFA,IAAIo0D,EAAKJ,EAAQh0D,GACbq0D,EAAUF,EAASn0D,GAAK,GACpBpC,EAAI,EAAGA,EAAI+1D,IAAc/1D,EAC/B,GAAGoC,IAAMpC,EAAT,CAGA,IAAI02D,EAAKN,EAAQp2D,IACbw2D,EAAGb,GAAKe,EAAGf,IAAMa,EAAGb,GAAKe,EAAGd,IAC7Bc,EAAGf,GAAKa,EAAGb,IAAMe,EAAGf,GAAKa,EAAGZ,KAC7Ba,EAAQhtD,KAAKzJ,EAJf,CAWJ,OAAOu2D,EAASN,OAAO,SAASrwD,EAAK6wD,GACnC,OAAO9wD,KAAKC,IAAIA,EAAK6wD,EAAQn3D,OAC/B,EAAG,EACL,CAjDa22D,CAAOF,EAAYK,IAC5BP,EAAOjwD,EAAKkwD,EAAU,EAAGC,EAC3B,EACF,CAhBAF,CAAO,GAAI,EAAG,GA+DhB,C,iBCplFA,IAAIn7D,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,OAGEJ,EAAOC,QAAUI,EAAMi8D,IAAMj8D,EAAMi8D,KAAO,CAAC,GAqBjDp2D,OAAS,SAAShG,GAEI,IAArBsW,UAAUvR,SACX/E,EAAU,CACRgK,GAAIsM,UAAU,GACdhC,IAAKgC,UAAU,GACf+lD,WAAY/lD,UAAU,KAI1B,IAUIgmD,EAVArW,EAAOjmD,EAAQgK,GACfsK,EAAMtU,EAAQsU,IACdioD,EAAOtW,EAAKtxC,aAEZ6nD,EAAQx8D,EAAQ4oD,MAAQ,KAO5B,GANoB,kBAAV4T,IAERA,EAAQr8D,EAAMU,KAAKC,aAAa07D,IAI/B,eAAgBx8D,EACjBs8D,EAAOt8D,EAAQq8D,eACV,IAAa,OAAVG,EAGR,MAAM,IAAI57D,MAAM,yDAFhB07D,EAAOE,EAAMz3D,QAGf,CAEA,GAAa,OAAVy3D,GAAkBA,EAAMz3D,WAAau3D,EACtC,MAAM,IAAI17D,MAAM,0DAGlB,IAAI4I,EAAOxJ,EAAQwJ,MAAQrJ,EAAMoE,OAE7Bk4D,EAAS,CAabA,OAAgB,SAASzyD,EAAI0yD,GAC3B,IAAIj3D,EAcAmjD,EAbA+T,EAASD,EAAU,EACnBE,EAAQxxD,KAAKkD,KAAKquD,EAAS,GAG3BE,EAAQ7yD,EAAG/D,SAAStE,WAGxB,GAAGi7D,EAAQL,EAAOD,EAAO,EACvB,MAAM,IAAI17D,MAAM,mCAOhBgoD,EADW,OAAV4T,EACMhzD,EAAKhF,aAAa83D,GAElBE,EAAMhwD,QAIf,IAAIswD,EAAK,IAAI38D,EAAMU,KAAK6T,WACxBooD,EAAG13D,aAAa,EAAG,GACnB03D,EAAG74D,SAAS44D,GACZC,EAAG74D,SAAS2kD,GAGZ3C,EAAKxhD,QACLwhD,EAAKrhD,OAAOk4D,EAAGn7D,YACf,IAAI+G,EAAIu9C,EAAKhgD,SAAStE,WAIlBo7D,EAAK,IAAI58D,EAAMU,KAAK6T,WACxBqoD,EAAG33D,aAAa,EAAGw3D,EAAQN,EAAOC,EAAO,GAIzCQ,EAAGhxD,QAAQ,GACXgxD,EAAG94D,SAAS2kD,GACZ,IAAIxnC,EAAK27C,EAAGp7D,WAGR6S,EAAUooD,EAAQL,EAAO,EACzBS,EAAS1oD,EAAIrI,SAASvD,EAAG8L,GAGzByoD,EAAW,GACf,IAAIx3D,EAAI,EAAGA,EAAI+O,EAAS/O,IACtBw3D,GAAYjwD,OAAOC,aAAamU,EAAG2pC,WAAWtlD,GAAKu3D,EAAOjS,WAAWtlD,IAKvE,IAAIy3D,EAAQ,OAAW,EAAIN,EAAQD,EAAW,IAM9C,OALAM,EAAWjwD,OAAOC,aAAagwD,EAASlS,WAAW,IAAMmS,GACvDD,EAASpwD,OAAO,IAIAnE,EAAIsE,OAAOC,aAAa,IAC5C,EAeAwvD,OAAgB,SAASI,EAAOM,EAAIT,GAClC,IAAIj3D,EACAk3D,EAASD,EAAU,EACnBE,EAAQxxD,KAAKkD,KAAKquD,EAAS,GAQ/B,GAHAQ,EAAKA,EAAGtwD,QAAQ+vD,GAGbA,EAAQL,EAAOD,EAAO,EACvB,MAAM,IAAI17D,MAAM,0DAKlB,GAAgC,MAA7Bu8D,EAAGpS,WAAW6R,EAAQ,GACvB,MAAM,IAAIh8D,MAAM,yCAKlB,IAAI4T,EAAUooD,EAAQL,EAAO,EACzBU,EAAWE,EAAGtwD,OAAO,EAAG2H,GACxB9L,EAAIy0D,EAAGtwD,OAAO2H,EAAS+nD,GAIvBW,EAAQ,OAAW,EAAIN,EAAQD,EAAW,IAC9C,GAAuC,KAAnCM,EAASlS,WAAW,GAAKmS,GAC3B,MAAM,IAAIt8D,MAAM,6CAIlB,IAAIo8D,EAAS1oD,EAAIrI,SAASvD,EAAG8L,GAGzB4M,EAAK,GACT,IAAI3b,EAAI,EAAGA,EAAI+O,EAAS/O,IACtB2b,GAAMpU,OAAOC,aAAagwD,EAASlS,WAAWtlD,GAAKu3D,EAAOjS,WAAWtlD,IAKvE2b,EAAKpU,OAAOC,aAAamU,EAAG2pC,WAAW,IAAMmS,GAAQ97C,EAAGvU,OAAO,GAM/D,IAAIuwD,EAAWR,EAAQL,EAAOD,EAAO,EACrC,IAAI72D,EAAI,EAAGA,EAAI23D,EAAU33D,IACvB,GAAwB,IAArB2b,EAAG2pC,WAAWtlD,GACf,MAAM,IAAI7E,MAAM,wCAIpB,GAA+B,IAA5BwgB,EAAG2pC,WAAWqS,GACf,MAAM,IAAIx8D,MAAM,qDAIlB,IAAIgoD,EAAOxnC,EAAGvU,QAAQyvD,GAGlBQ,EAAK,IAAI38D,EAAMU,KAAK6T,WAWxB,OAVAooD,EAAG13D,aAAa,EAAG,GACnB03D,EAAG74D,SAAS44D,GACZC,EAAG74D,SAAS2kD,GAGZ3C,EAAKxhD,QACLwhD,EAAKrhD,OAAOk4D,EAAGn7D,YAIR+G,IAHEu9C,EAAKhgD,SAAStE,UAIzB,GAEA,OAAO86D,CACT,C,4BCvOa,IAAIj1D,EAAEF,OAAOC,IAAI,iBAAiBM,EAAEP,OAAOC,IAAI,gBAAgBS,EAAEV,OAAOC,IAAI,kBAAkBa,EAAEd,OAAOC,IAAI,qBAAqB2/B,EAAE5/B,OAAOC,IAAI,kBAAkBkN,EAAEnN,OAAOC,IAAI,kBAAkBm4B,EAAEp4B,OAAOC,IAAI,iBAAiBiU,EAAElU,OAAOC,IAAI,qBAAqBo4B,EAAEr4B,OAAOC,IAAI,kBAAkBwF,EAAEzF,OAAOC,IAAI,cAAc4L,EAAE7L,OAAOC,IAAI,cAAcmM,EAAEpM,OAAOyW,SACzW,IAAI4M,EAAE,CAAC6lB,UAAU,WAAW,OAAM,CAAE,EAAEI,mBAAmB,WAAW,EAAED,oBAAoB,WAAW,EAAED,gBAAgB,WAAW,GAAG1jB,EAAEtlB,OAAOyW,OAAO6gB,EAAE,CAAC,EAAE,SAAS2D,EAAEt6B,EAAEE,EAAEE,GAAGmI,KAAK9H,MAAMT,EAAEuI,KAAKw3B,QAAQ7/B,EAAEqI,KAAK41B,KAAKxH,EAAEpuB,KAAKsgC,QAAQzoC,GAAGkiB,CAAC,CACwI,SAASiV,IAAI,CAAyB,SAASgD,EAAEv6B,EAAEE,EAAEE,GAAGmI,KAAK9H,MAAMT,EAAEuI,KAAKw3B,QAAQ7/B,EAAEqI,KAAK41B,KAAKxH,EAAEpuB,KAAKsgC,QAAQzoC,GAAGkiB,CAAC,CADxPgY,EAAEh7B,UAAUy1C,iBAAiB,CAAC,EACpQza,EAAEh7B,UAAU01D,SAAS,SAASh1D,EAAEE,GAAG,GAAG,kBAAkBF,GAAG,oBAAoBA,GAAG,MAAMA,EAAE,MAAMzH,MAAM,yHAAyHgQ,KAAKsgC,QAAQR,gBAAgB9/B,KAAKvI,EAAEE,EAAE,WAAW,EAAEo6B,EAAEh7B,UAAU21D,YAAY,SAASj1D,GAAGuI,KAAKsgC,QAAQN,mBAAmBhgC,KAAKvI,EAAE,cAAc,EAAgBu3B,EAAEj4B,UAAUg7B,EAAEh7B,UAAsF,IAAIm7B,EAAEF,EAAEj7B,UAAU,IAAIi4B,EACrfkD,EAAEjjB,YAAY+iB,EAAE5V,EAAE8V,EAAEH,EAAEh7B,WAAWm7B,EAAEiO,sBAAqB,EAAG,IAAI7L,EAAEh7B,MAAMiG,QAAQsvB,EAAE/3B,OAAOC,UAAUC,eAAeqH,EAAE,CAACjG,QAAQ,MAAMkF,EAAE,CAAC3M,KAAI,EAAG0G,KAAI,EAAGC,QAAO,EAAGC,UAAS,GACtK,SAAS+iC,EAAE7iC,EAAEE,EAAEE,GAAG,IAAID,EAAEvG,EAAE,CAAC,EAAEoF,EAAE,KAAKqB,EAAE,KAAK,GAAG,MAAMH,EAAE,IAAIC,UAAK,IAASD,EAAEN,MAAMS,EAAEH,EAAEN,UAAK,IAASM,EAAEhH,MAAM8F,EAAE,GAAGkB,EAAEhH,KAAKgH,EAAEk3B,EAAE92B,KAAKJ,EAAEC,KAAK0F,EAAEtG,eAAeY,KAAKvG,EAAEuG,GAAGD,EAAEC,IAAI,IAAIF,EAAEgO,UAAUvR,OAAO,EAAE,GAAG,IAAIuD,EAAErG,EAAE4f,SAASpZ,OAAO,GAAG,EAAEH,EAAE,CAAC,IAAI,IAAIlB,EAAE8C,MAAM5B,GAAGb,EAAE,EAAEA,EAAEa,EAAEb,IAAIL,EAAEK,GAAG6O,UAAU7O,EAAE,GAAGxF,EAAE4f,SAASza,CAAC,CAAC,GAAGiB,GAAGA,EAAEO,aAAa,IAAIJ,KAAKF,EAAED,EAAEO,kBAAe,IAAS3G,EAAEuG,KAAKvG,EAAEuG,GAAGF,EAAEE,IAAI,MAAM,CAACK,SAASrB,EAAE7G,KAAK0H,EAAE9G,IAAI8F,EAAEY,IAAIS,EAAEI,MAAM7G,EAAE8G,OAAOkG,EAAEjG,QAAQ,CAChV,SAASoiC,EAAE/iC,GAAG,MAAM,kBAAkBA,GAAG,OAAOA,GAAGA,EAAEQ,WAAWrB,CAAC,CAAoG,IAAIikC,EAAE,OAAO,SAAS4B,EAAEhlC,EAAEE,GAAG,MAAM,kBAAkBF,GAAG,OAAOA,GAAG,MAAMA,EAAE9G,IAA7K,SAAgB8G,GAAG,IAAIE,EAAE,CAAC,IAAI,KAAK,IAAI,MAAM,MAAM,IAAIF,EAAEyU,QAAQ,QAAQ,SAASzU,GAAG,OAAOE,EAAEF,EAAE,EAAE,CAA+EwvD,CAAO,GAAGxvD,EAAE9G,KAAKgH,EAAEqE,SAAS,GAAG,CAC/W,SAASwC,EAAE/G,EAAEE,EAAEE,EAAED,EAAEvG,GAAG,IAAIoF,SAASgB,EAAK,cAAchB,GAAG,YAAYA,IAAEgB,EAAE,MAAK,IAAIK,GAAE,EAAG,GAAG,OAAOL,EAAEK,GAAE,OAAQ,OAAOrB,GAAG,IAAK,SAAS,IAAK,SAASqB,GAAE,EAAG,MAAM,IAAK,SAAS,OAAOL,EAAEQ,UAAU,KAAKrB,EAAE,KAAKK,EAAEa,GAAE,GAAI,GAAGA,EAAE,OAAWzG,EAAEA,EAANyG,EAAEL,GAASA,EAAE,KAAKG,EAAE,IAAI6kC,EAAE3kC,EAAE,GAAGF,EAAE08B,EAAEjjC,IAAIwG,EAAE,GAAG,MAAMJ,IAAII,EAAEJ,EAAEyU,QAAQ2uB,EAAE,OAAO,KAAKr8B,EAAEnN,EAAEsG,EAAEE,EAAE,GAAG,SAASJ,GAAG,OAAOA,CAAC,IAAI,MAAMpG,IAAImpC,EAAEnpC,KAAKA,EADnW,SAAWoG,EAAEE,GAAG,MAAM,CAACM,SAASrB,EAAE7G,KAAK0H,EAAE1H,KAAKY,IAAIgH,EAAEN,IAAII,EAAEJ,IAAIa,MAAMT,EAAES,MAAMC,OAAOV,EAAEU,OAAO,CACyQoiC,CAAElpC,EAAEwG,IAAIxG,EAAEV,KAAKmH,GAAGA,EAAEnH,MAAMU,EAAEV,IAAI,IAAI,GAAGU,EAAEV,KAAKub,QAAQ2uB,EAAE,OAAO,KAAKpjC,IAAIE,EAAE2G,KAAKjN,IAAI,EAAyB,GAAvByG,EAAE,EAAEF,EAAE,KAAKA,EAAE,IAAIA,EAAE,IAAO08B,EAAE78B,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAEtD,OAAOuD,IAAI,CAC/e,IAAIlB,EAAEoB,EAAE6kC,EADwehmC,EACrfgB,EAAEC,GAAeA,GAAGI,GAAG0G,EAAE/H,EAAEkB,EAAEE,EAAErB,EAAEnF,EAAE,MAAM,GAAGmF,EAPsU,SAAWiB,GAAG,OAAG,OAAOA,GAAG,kBAAkBA,EAAS,KAAsC,oBAAjCA,EAAEqL,GAAGrL,EAAEqL,IAAIrL,EAAE,eAA0CA,EAAE,IAAI,CAO5b6V,CAAE7V,GAAG,oBAAoBjB,EAAE,IAAIiB,EAAEjB,EAAEuB,KAAKN,GAAGC,EAAE,IAAIjB,EAAEgB,EAAEyD,QAAQq7B,MAA6Bz+B,GAAG0G,EAA1B/H,EAAEA,EAAEiZ,MAA0B/X,EAAEE,EAAtBrB,EAAEoB,EAAE6kC,EAAEhmC,EAAEiB,KAAkBrG,QAAQ,GAAG,WAAWoF,EAAE,MAAMkB,EAAEyE,OAAO3E,GAAGzH,MAAM,mDAAmD,oBAAoB2H,EAAE,qBAAqBb,OAAO/E,KAAK0F,GAAGkS,KAAK,MAAM,IAAIhS,GAAG,6EAA6E,OAAOG,CAAC,CACzZ,SAASwtC,EAAE7tC,EAAEE,EAAEE,GAAG,GAAG,MAAMJ,EAAE,OAAOA,EAAE,IAAIG,EAAE,GAAGvG,EAAE,EAAmD,OAAjDmN,EAAE/G,EAAEG,EAAE,GAAG,GAAG,SAASH,GAAG,OAAOE,EAAEI,KAAKF,EAAEJ,EAAEpG,IAAI,GAAUuG,CAAC,CAAC,SAAS2F,EAAE9F,GAAG,IAAI,IAAIA,EAAEk1D,QAAQ,CAAC,IAAIh1D,EAAEF,EAAEm1D,SAAQj1D,EAAEA,KAAMq5B,KAAK,SAASr5B,GAAM,IAAIF,EAAEk1D,UAAU,IAAIl1D,EAAEk1D,UAAQl1D,EAAEk1D,QAAQ,EAAEl1D,EAAEm1D,QAAQj1D,EAAC,EAAE,SAASA,GAAM,IAAIF,EAAEk1D,UAAU,IAAIl1D,EAAEk1D,UAAQl1D,EAAEk1D,QAAQ,EAAEl1D,EAAEm1D,QAAQj1D,EAAC,IAAI,IAAIF,EAAEk1D,UAAUl1D,EAAEk1D,QAAQ,EAAEl1D,EAAEm1D,QAAQj1D,EAAE,CAAC,GAAG,IAAIF,EAAEk1D,QAAQ,OAAOl1D,EAAEm1D,QAAQC,QAAQ,MAAMp1D,EAAEm1D,OAAQ,CAC5Z,IAAIvmB,EAAE,CAACjuC,QAAQ,MAAMouC,EAAE,CAACznB,WAAW,MAAM2nB,EAAE,CAACvM,uBAAuBkM,EAAEznB,wBAAwB4nB,EAAErvC,kBAAkBkH,GAAG,SAASkpC,IAAI,MAAMv3C,MAAM,2DAA4D,CACzMb,EAAQ29D,SAAS,CAAC3B,IAAI7lB,EAAEj6B,QAAQ,SAAS5T,EAAEE,EAAEE,GAAGytC,EAAE7tC,EAAE,WAAWE,EAAE4N,MAAMvF,KAAK0F,UAAU,EAAE7N,EAAE,EAAE0C,MAAM,SAAS9C,GAAG,IAAIE,EAAE,EAAuB,OAArB2tC,EAAE7tC,EAAE,WAAWE,GAAG,GAAUA,CAAC,EAAEo1D,QAAQ,SAASt1D,GAAG,OAAO6tC,EAAE7tC,EAAE,SAASA,GAAG,OAAOA,CAAC,IAAI,EAAE,EAAEu1D,KAAK,SAASv1D,GAAG,IAAI+iC,EAAE/iC,GAAG,MAAMzH,MAAM,yEAAyE,OAAOyH,CAAC,GAAGtI,EAAQ89D,UAAUl7B,EAAE5iC,EAAQkJ,SAASjB,EAAEjI,EAAQ+9D,SAAS52B,EAAEnnC,EAAQg+D,cAAcn7B,EAAE7iC,EAAQi+D,WAAW51D,EAAErI,EAAQk+D,SAASt+B,EAClc5/B,EAAQ+H,mDAAmDwvC,EAAEv3C,EAAQm+D,IAAI/lB,EACzEp4C,EAAQo+D,aAAa,SAAS91D,EAAEE,EAAEE,GAAG,GAAG,OAAOJ,QAAG,IAASA,EAAE,MAAMzH,MAAM,iFAAiFyH,EAAE,KAAK,IAAIG,EAAEwkB,EAAE,CAAC,EAAE3kB,EAAES,OAAO7G,EAAEoG,EAAE9G,IAAI8F,EAAEgB,EAAEJ,IAAIS,EAAEL,EAAEU,OAAO,GAAG,MAAMR,EAAE,CAAoE,QAAnE,IAASA,EAAEN,MAAMZ,EAAEkB,EAAEN,IAAIS,EAAEuG,EAAEjG,cAAS,IAAST,EAAEhH,MAAMU,EAAE,GAAGsG,EAAEhH,KAAQ8G,EAAE1H,MAAM0H,EAAE1H,KAAKiI,aAAa,IAAIN,EAAED,EAAE1H,KAAKiI,aAAa,IAAIxB,KAAKmB,EAAEk3B,EAAE92B,KAAKJ,EAAEnB,KAAK8G,EAAEtG,eAAeR,KAAKoB,EAAEpB,QAAG,IAASmB,EAAEnB,SAAI,IAASkB,EAAEA,EAAElB,GAAGmB,EAAEnB,GAAG,CAAC,IAAIA,EAAEkP,UAAUvR,OAAO,EAAE,GAAG,IAAIqC,EAAEoB,EAAEqZ,SAASpZ,OAAO,GAAG,EAAErB,EAAE,CAACkB,EAAE4B,MAAM9C,GACrf,IAAI,IAAIK,EAAE,EAAEA,EAAEL,EAAEK,IAAIa,EAAEb,GAAG6O,UAAU7O,EAAE,GAAGe,EAAEqZ,SAASvZ,CAAC,CAAC,MAAM,CAACO,SAASrB,EAAE7G,KAAK0H,EAAE1H,KAAKY,IAAIU,EAAEgG,IAAIZ,EAAEyB,MAAMN,EAAEO,OAAOL,EAAE,EAAE3I,EAAQq+D,cAAc,SAAS/1D,GAAqK,OAAlKA,EAAE,CAACQ,SAAS62B,EAAEiI,cAAct/B,EAAEg2D,eAAeh2D,EAAEi2D,aAAa,EAAEC,SAAS,KAAKC,SAAS,KAAKC,cAAc,KAAKC,YAAY,OAAQH,SAAS,CAAC11D,SAAS4L,EAAE0K,SAAS9W,GAAUA,EAAEm2D,SAASn2D,CAAC,EAAEtI,EAAQob,cAAc+vB,EAAEnrC,EAAQ4+D,cAAc,SAASt2D,GAAG,IAAIE,EAAE2iC,EAAE5L,KAAK,KAAKj3B,GAAY,OAATE,EAAE5H,KAAK0H,EAASE,CAAC,EAAExI,EAAQ6+D,UAAU,WAAW,MAAM,CAAC51D,QAAQ,KAAK,EAC9djJ,EAAQ8+D,WAAW,SAASx2D,GAAG,MAAM,CAACQ,SAAS2S,EAAEyD,OAAO5W,EAAE,EAAEtI,EAAQ++D,eAAe1zB,EAAErrC,EAAQg/D,KAAK,SAAS12D,GAAG,MAAM,CAACQ,SAASsK,EAAEiM,SAAS,CAACm+C,SAAS,EAAEC,QAAQn1D,GAAGgX,MAAMlR,EAAE,EAAEpO,EAAQi/D,KAAK,SAAS32D,EAAEE,GAAG,MAAM,CAACM,SAASkE,EAAEpM,KAAK0H,EAAE+qC,aAAQ,IAAS7qC,EAAE,KAAKA,EAAE,EAAExI,EAAQk/D,gBAAgB,SAAS52D,GAAG,IAAIE,EAAE6uC,EAAEznB,WAAWynB,EAAEznB,WAAW,CAAC,EAAE,IAAItnB,GAAG,CAAC,QAAQ+uC,EAAEznB,WAAWpnB,CAAC,CAAC,EAAExI,EAAQm/D,aAAa/mB,EAAEp4C,EAAQovC,YAAY,SAAS9mC,EAAEE,GAAG,OAAO0uC,EAAEjuC,QAAQmmC,YAAY9mC,EAAEE,EAAE,EAAExI,EAAQqvC,WAAW,SAAS/mC,GAAG,OAAO4uC,EAAEjuC,QAAQomC,WAAW/mC,EAAE,EAC3ftI,EAAQ8vC,cAAc,WAAW,EAAE9vC,EAAQ+vC,iBAAiB,SAASznC,GAAG,OAAO4uC,EAAEjuC,QAAQ8mC,iBAAiBznC,EAAE,EAAEtI,EAAQsvC,UAAU,SAAShnC,EAAEE,GAAG,OAAO0uC,EAAEjuC,QAAQqmC,UAAUhnC,EAAEE,EAAE,EAAExI,EAAQmwC,MAAM,WAAW,OAAO+G,EAAEjuC,QAAQknC,OAAO,EAAEnwC,EAAQuvC,oBAAoB,SAASjnC,EAAEE,EAAEE,GAAG,OAAOwuC,EAAEjuC,QAAQsmC,oBAAoBjnC,EAAEE,EAAEE,EAAE,EAAE1I,EAAQwvC,mBAAmB,SAASlnC,EAAEE,GAAG,OAAO0uC,EAAEjuC,QAAQumC,mBAAmBlnC,EAAEE,EAAE,EAAExI,EAAQyvC,gBAAgB,SAASnnC,EAAEE,GAAG,OAAO0uC,EAAEjuC,QAAQwmC,gBAAgBnnC,EAAEE,EAAE,EACzdxI,EAAQ0vC,QAAQ,SAASpnC,EAAEE,GAAG,OAAO0uC,EAAEjuC,QAAQymC,QAAQpnC,EAAEE,EAAE,EAAExI,EAAQ2vC,WAAW,SAASrnC,EAAEE,EAAEE,GAAG,OAAOwuC,EAAEjuC,QAAQ0mC,WAAWrnC,EAAEE,EAAEE,EAAE,EAAE1I,EAAQ4vC,OAAO,SAAStnC,GAAG,OAAO4uC,EAAEjuC,QAAQ2mC,OAAOtnC,EAAE,EAAEtI,EAAQ6vC,SAAS,SAASvnC,GAAG,OAAO4uC,EAAEjuC,QAAQ4mC,SAASvnC,EAAE,EAAEtI,EAAQkwC,qBAAqB,SAAS5nC,EAAEE,EAAEE,GAAG,OAAOwuC,EAAEjuC,QAAQinC,qBAAqB5nC,EAAEE,EAAEE,EAAE,EAAE1I,EAAQgwC,cAAc,WAAW,OAAOkH,EAAEjuC,QAAQ+mC,eAAe,EAAEhwC,EAAQoE,QAAQ,Q,8BCvBpa,IAAIsD,EAAIvH,EAAQ,MAEdH,EAAQshD,WAAa55C,EAAE45C,WACvBthD,EAAQ2hD,YAAcj6C,EAAEi6C,W,iBCwG1B,IAAIvhD,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAGR,IAAIE,EAAOD,EAAMC,KAGbC,EAAMP,EAAOC,QAAUI,EAAME,IAAMF,EAAME,KAAO,CAAC,EACjDmlD,EAAOnlD,EAAImlD,KAGX2Z,EAAc,CAAC,EACnBA,EAAgB,GAAI3Z,EAAiB,WACrC2Z,EAAwB,WAAI,KAC5BA,EAAe,EAAI3Z,EAAkB,YACrC2Z,EAAyB,YAAI,IAC7BA,EAAe,EAAI3Z,EAAmB,aACtC2Z,EAA0B,aAAI,IAC9BA,EAAgB,GAAI3Z,EAA0B,oBAC9C2Z,EAAiC,oBAAI,KACrCA,EAAe,EAAI3Z,EAAuB,iBAC1C2Z,EAA8B,iBAAI,IAClCA,EAAgB,GAAI3Z,EAA6B,uBACjD2Z,EAAoC,uBAAI,KACxCA,EAAe,EAAI3Z,EAAmB,aACtC2Z,EAA0B,aAAI,IAI9B,IAAIC,EAAqBj/D,EAAME,IAAI6lD,IAAIkZ,mBAGnCC,EAA2B,CAC7Bh5D,KAAM,cACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,6BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,iBACbnnC,MAAO,CAAC,CACNja,KAAM,qCACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbM,UAAU,EACVvnC,MAAO,CAAC,CACNja,KAAM,6CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,iBAEV,CACDl5B,KAAM,0CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,oBACR,CACDl5B,KAAM,uCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,iDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,wBACR,CACDl5B,KAAM,kDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBS,UAAU,EACVJ,YAAa,6BAEd,CACDphD,KAAM,oCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,cACZ,CACDphD,KAAM,sCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EAKbjnC,MAAO,CAAC,CAENja,KAAM,sDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKiY,QAChB/X,aAAa,EACbM,UAAU,EACVtoB,QAAS,wBACR,CAEDl5B,KAAM,8DACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKkY,gBAChBhY,aAAa,EACbM,UAAU,EACVtoB,QAAS,gCACR,CAEDl5B,KAAM,qDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKiY,QAChB/X,aAAa,EACbM,UAAU,EACVtoB,QAAS,wBACR,CAEDl5B,KAAM,6DACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKkY,gBAChBhY,aAAa,EACbM,UAAU,EACVtoB,QAAS,kCAEV,CAEDl5B,KAAM,qCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,eAGf2X,EACA,CAEE/4D,KAAM,4CACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbM,UAAU,EACVvnC,MAAO,CAAC,CACNja,KAAM,+CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKmY,UAChBjY,aAAa,EAEbkY,sBAAuB,wBAExB,CAEDp5D,KAAM,6CACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbM,UAAU,EACVvnC,MAAO,CAAC,CACNja,KAAM,gDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKmY,UAChBjY,aAAa,EAEbkY,sBAAuB,yBAExB,CAEDp5D,KAAM,wCACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbE,YAAa,iBACbI,UAAU,KAEX,CAEDxhD,KAAM,iCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CAENja,KAAM,2CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,oBACR,CACDl5B,KAAM,kDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBS,UAAU,EACVJ,YAAa,yBAEd,CAEDphD,KAAM,6BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKmY,UAChBjY,aAAa,EACbkY,sBAAuB,mBAIvBC,EAA8B,CAChCr5D,KAAM,SACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,2CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAK+mD,MAAMG,SACjBC,aAAa,EACbM,UAAU,EACVvnC,MAAO,CAAC,CACNja,KAAM,qDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,eAIZ,CACDl5B,KAAM,0BACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,8CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAK+mD,MAAMG,SACjBC,aAAa,EACbM,UAAU,EACVvnC,MAAO,CAAC,CACNja,KAAM,wDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,cACR,CACDl5B,KAAM,qDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,+DACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,wBAKd,CACDl5B,KAAM,oBACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACNknD,UAAU,EACVvnC,MAAO,CAAC,CACNja,KAAM,+BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAK+mD,MAAMS,QACjBL,aAAa,EACbhoB,QAAS,gBAEV,CACDl5B,KAAM,sBACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACNknD,UAAU,EACVvnC,MAAO,CAAC,CACNja,KAAM,yBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAK+mD,MAAMS,QACjBL,aAAa,EACbhoB,QAAS,eAMXogC,EAAoC,CACtCt5D,KAAM,2BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,2BACbnnC,MAAO,CAAC,CACNja,KAAM,mCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,mCACR,CAEDl5B,KAAM,mCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,mCAGf2X,EACA,CACE/4D,KAAM,sCACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbM,UAAU,EACVtoB,QAAS,qCACTjf,MAAO,CAAC,CACNja,KAAM,sCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,2CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,GACZ,CACDlhD,KAAM,4CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKiF,IAChB/E,aAAa,SAOjBqY,EAAgC,CAClCv5D,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,MACbnnC,MAAO,CACLq/C,EAAmC,CAEjCt5D,KAAM,0CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CAENja,KAAM,oDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,mBACR,CACDl5B,KAAM,qDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBS,UAAU,EACVJ,YAAa,wBAEd,CAEDphD,KAAM,iCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKmY,UAChBjY,aAAa,EACbkY,sBAAuB,kBAuG7B,SAASI,EAAc1+D,EAAKnB,GACJ,kBAAZA,IACRA,EAAU,CAAC8/D,UAAW9/D,IAKxB,IAFA,IACIi0D,EADArwD,EAAO,KAEH6B,EAAI,EAAY,OAAT7B,GAAiB6B,EAAItE,EAAI6rD,WAAWjoD,SAAUU,EAC3DwuD,EAAO9yD,EAAI6rD,WAAWvnD,IACnBzF,EAAQW,MAAQX,EAAQW,OAASszD,EAAKtzD,MAE/BX,EAAQqG,MAAQrG,EAAQqG,OAAS4tD,EAAK5tD,MAEtCrG,EAAQ8/D,WAAa9/D,EAAQ8/D,YAAc7L,EAAK6L,aAHxDl8D,EAAOqwD,GAOX,OAAOrwD,CACT,CA7GAvD,EAAI0/D,qBAAuB,SAASC,EAAKh2D,GAKvC,IAJA,IAGI2U,EAAKs1C,EAAM9yD,EAHXyC,EAAO,GAIH4qC,EAAK,EAAGA,EAAKwxB,EAAI1/C,MAAMvb,SAAUypC,EAAI,CAE3C7vB,EAAMqhD,EAAI1/C,MAAMkuB,GAKhB,IAAI,IAAI/oC,EAAI,EAAGA,EAAIkZ,EAAI2B,MAAMvb,SAAUU,EACrCtE,EAAM,CAAC,EACP8yD,EAAOt1C,EAAI2B,MAAM7a,GACjBtE,EAAIR,KAAOP,EAAK8nD,SAAS+L,EAAK3zC,MAAM,GAAGA,OACvCnf,EAAImf,MAAQ2zC,EAAK3zC,MAAM,GAAGA,MAC1Bnf,EAAI8+D,cAAgBhM,EAAK3zC,MAAM,GAAG3f,KAE/BQ,EAAIR,QAAQ6kD,IACbrkD,EAAIkF,KAAOm/C,EAAKrkD,EAAIR,MACjBQ,EAAIkF,QAAQ84D,IACbh+D,EAAI2+D,UAAYX,EAAYh+D,EAAIkF,QAGjC2D,IACDA,EAAGpF,OAAOzD,EAAIR,MACdqJ,EAAGpF,OAAOzD,EAAImf,QAEhB1c,EAAKsL,KAAK/N,EAEd,CAEA,OAAOyC,CACT,EAQAvD,EAAI6/D,qBAAuB,SAASlT,GAIlC,IAHA,IAAIppD,EAAO,GAGH4qC,EAAK,EAAGA,EAAKwe,EAAWjoD,SAAUypC,EAQxC,IANA,IAAI2xB,EAAMnT,EAAWxe,GAIjB7tC,EAAOP,EAAK8nD,SAASiY,EAAI7/C,MAAM,GAAGA,OAClCwuC,EAASqR,EAAI7/C,MAAM,GAAGA,MAClBquB,EAAK,EAAGA,EAAKmgB,EAAO/pD,SAAU4pC,EAAI,CACxC,IAAIxtC,EAAM,CAAC,EAYX,GAXAA,EAAIR,KAAOA,EACXQ,EAAImf,MAAQwuC,EAAOngB,GAAIruB,MACvBnf,EAAI8+D,cAAgBnR,EAAOngB,GAAIhuC,KAE5BQ,EAAIR,QAAQ6kD,IACbrkD,EAAIkF,KAAOm/C,EAAKrkD,EAAIR,MACjBQ,EAAIkF,QAAQ84D,IACbh+D,EAAI2+D,UAAYX,EAAYh+D,EAAIkF,QAIjClF,EAAIR,OAAS6kD,EAAK4a,iBAAkB,CACrCj/D,EAAIk/D,WAAa,GACjB,IAAI,IAAI5yB,EAAK,EAAGA,EAAKtsC,EAAImf,MAAMvb,SAAU0oC,EACvCtsC,EAAIk/D,WAAWnxD,KAAK7O,EAAIigE,6BAA6Bn/D,EAAImf,MAAMmtB,IAEnE,CACA7pC,EAAKsL,KAAK/N,EACZ,CAGF,OAAOyC,CACT,EA8DA,IAAI28D,EAA2B,SAASpY,EAAKhnD,EAAKq/D,GAChD,IAAIpX,EAAS,CAAC,EAEd,GAAGjB,IAAQ3C,EAAK,cACd,OAAO4D,EAGNoX,IACDpX,EAAS,CACPnD,KAAM,CACJwa,aAAcjb,EAAW,MAE3BlxC,IAAK,CACHmsD,aAAcjb,EAAW,KACzBS,KAAM,CACJwa,aAAcjb,EAAW,OAG7B6W,WAAY,KAIhB,IAAI98B,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASzoD,EAAKu+D,EAA6BngC,EAASoqB,GAAS,CACpE,IAAI1oD,EAAQ,IAAIL,MAAM,2CAEtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CAkBA,YAhBuB4pD,IAApBtrB,EAAQmhC,UACTtX,EAAOnD,KAAOmD,EAAOnD,MAAQ,CAAC,EAC9BmD,EAAOnD,KAAKwa,aAAergE,EAAK8nD,SAAS3oB,EAAQmhC,eAGzB7V,IAAvBtrB,EAAQohC,aACTvX,EAAO90C,IAAM80C,EAAO90C,KAAO,CAAC,EAC5B80C,EAAO90C,IAAImsD,aAAergE,EAAK8nD,SAAS3oB,EAAQohC,YAChDvX,EAAO90C,IAAI2xC,KAAOmD,EAAO90C,IAAI2xC,MAAQ,CAAC,EACtCmD,EAAO90C,IAAI2xC,KAAKwa,aAAergE,EAAK8nD,SAAS3oB,EAAQqhC,sBAG7B/V,IAAvBtrB,EAAQ88B,aACTjT,EAAOiT,WAAa98B,EAAQ88B,WAAWtR,WAAW,IAG7C3B,CACT,EAUIyX,EAAyB,SAAS7gE,GACpC,OAAOwlD,EAAKxlD,EAAQ8gE,eAClB,IAAK,wBAEL,IAAK,uBACH,OAAO3gE,EAAM6J,GAAGwO,KAAKxS,SACvB,IAAK,uBACH,OAAO7F,EAAM6J,GAAGkQ,IAAIlU,SACtB,IAAK,0BAML,IAAK,aACH,OAAO7F,EAAM6J,GAAGw4C,OAAOx8C,SALzB,IAAK,0BACH,OAAO7F,EAAM6J,GAAG2lD,OAAO3pD,SACzB,IAAK,0BACH,OAAO7F,EAAM6J,GAAGu+C,OAAOviD,SAGzB,QACE,IAAI/E,EAAQ,IAAIL,MACd,qBAAuBZ,EAAQW,KAA/B,mCAGF,MADAM,EAAM6/D,aAAe9gE,EAAQ8gE,aACvB7/D,EAEZ,EAWI8/D,EAAmB,SAAS/gE,GAC9B,IACIghE,EADArS,EAAO3uD,EAAQihE,YAGnB,OAAOtS,EAAKmS,cACV,KAAKtb,EAAK0b,sBAEV,KAAK1b,EAAK2b,qBAER,MACF,KAAK3b,EAAK,cACR,IAAIS,EAAM3xC,EAwBJrT,EApBN,QAAY4pD,KADZ5E,EAAOT,EAAKmJ,EAAKyS,oBAAoB9sD,IAAI2xC,KAAKwa,qBACF5V,IAAnB1qD,EAAM6J,GAAGi8C,GAIhC,MAHIhlD,EAAQ,IAAIL,MAAM,mCAChBunD,IAAMwG,EAAKyS,oBAAoB9sD,IAAI2xC,KAAKwa,aAC9Cx/D,EAAMoF,KAAO4/C,EACPhlD,EAIR,QAAW4pD,KADXv2C,EAAMkxC,EAAKmJ,EAAKyS,oBAAoB9sD,IAAImsD,qBACG5V,IAAnB1qD,EAAMmU,IAAIA,GAIhC,MAHIrT,EAAQ,IAAIL,MAAM,8BAChBunD,IAAMwG,EAAKyS,oBAAoB9sD,IAAImsD,aACzCx/D,EAAMoF,KAAOiO,EACPrT,EAOR,GAJAqT,EAAMnU,EAAMmU,IAAIA,GAAKtO,OAAO7F,EAAM6J,GAAGi8C,GAAMjgD,eAI/B6kD,KADZ5E,EAAOT,EAAKmJ,EAAKyS,oBAAoBnb,KAAKwa,qBACE5V,IAAnB1qD,EAAM6J,GAAGi8C,GAIhC,MAHIhlD,EAAQ,IAAIL,MAAM,0CAChBunD,IAAMwG,EAAKyS,oBAAoBnb,KAAKwa,aAC1Cx/D,EAAMoF,KAAO4/C,EACPhlD,EAGR+/D,EAAS7gE,EAAMi8D,IAAIp2D,OACjB7F,EAAM6J,GAAGi8C,GAAMjgD,SAAUsO,EAAKq6C,EAAKyS,oBAAoB/E,YAM7D,OAAO1N,EAAKxI,UAAUkb,OACpBrhE,EAAQgK,GAAG/D,SAAStE,WAAY3B,EAAQshE,UAAWN,EAEvD,EAmjCA,SAASO,EAAUpgE,GAQjB,IANA,IAII8yD,EAAMt1C,EAJN/a,EAAOxD,EAAK4F,OACd5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAI9CsJ,EAAQzvD,EAAI6rD,WACRvnD,EAAI,EAAGA,EAAImrD,EAAM7rD,SAAUU,EAAG,CAEpC,IAAI6a,GADJ2zC,EAAOrD,EAAMnrD,IACI6a,MAGb2/C,EAAgB7/D,EAAKinD,KAAKma,gBAC3B,kBAAmBvN,IACpBgM,EAAgBhM,EAAKgM,iBAEA7/D,EAAKinD,KAAKoa,OAC7BnhD,EAAQngB,EAAMU,KAAK4xD,WAAWnyC,IAQlC3B,EAAMve,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EAAM,CAC3DlsD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAS4K,EAAKtzD,MAAMgB,YAE3BvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAW6Y,GAAe,EAAO3/C,OAG5D1c,EAAK0c,MAAMpR,KAAKyP,EAClB,CAEA,OAAO/a,CACT,CAuCA,SAAS89D,EAAmB9Q,GAE1B,IADA,IAAIqD,EACIxuD,EAAI,EAAGA,EAAImrD,EAAM7rD,SAAUU,EAAG,CAapC,GATwB,qBAHxBwuD,EAAOrD,EAAMnrD,IAGEY,OACV4tD,EAAKtzD,MAAQszD,EAAKtzD,QAAQN,EAAImlD,KAC/ByO,EAAK5tD,KAAOhG,EAAImlD,KAAKyO,EAAKtzD,MAClBszD,EAAK6L,WAAa7L,EAAK6L,aAAaX,IAC5ClL,EAAK5tD,KAAOhG,EAAImlD,KAAK2Z,EAAYlL,EAAK6L,cAKlB,qBAAd7L,EAAKtzD,KAAsB,CACnC,IAAGszD,EAAK5tD,QAAQ4tD,EAAK5tD,QAAQhG,EAAImlD,MAK/B,MAFIvkD,EAAQ,IAAIL,MAAM,kCAChB+gE,UAAY1N,EACZhzD,EAJNgzD,EAAKtzD,KAAON,EAAImlD,KAAKyO,EAAK5tD,KAM9B,CAUA,GAP6B,qBAAnB4tD,EAAK6L,WACV7L,EAAK5tD,MAAQ4tD,EAAK5tD,QAAQ84D,IAC3BlL,EAAK6L,UAAYX,EAAYlL,EAAK5tD,OAKnC4tD,EAAKtzD,OAAS6kD,EAAK4a,mBACpBnM,EAAK2N,kBAAmB,EACxB3N,EAAKgM,cAAgB7/D,EAAKinD,KAAKC,UAC3B2M,EAAK3zC,OAAS2zC,EAAKoM,YAAY,CACjCpM,EAAK3zC,MAAQ,GACb,IAAI,IAAImtB,EAAK,EAAGA,EAAKwmB,EAAKoM,WAAWt7D,SAAU0oC,EAC7CwmB,EAAK3zC,MAAMpR,KAAK7O,EAAIwhE,2BAClBC,EAA4B7N,EAAKoM,WAAW5yB,KAElD,CAIA,IAAIxsC,EADN,GAAyB,qBAAfgzD,EAAK3zC,MAGb,MAFIrf,EAAQ,IAAIL,MAAM,mCAChB+gE,UAAY1N,EACZhzD,CAEV,CACF,CAWA,SAAS6gE,EAA4Br5D,EAAGzI,GAWtC,GAVAA,EAAUA,GAAW,CAAC,EAGD,qBAAXyI,EAAEpC,MACPoC,EAAErC,IAAMqC,EAAErC,MAAM/F,EAAImlD,OACrB/8C,EAAEpC,KAAOhG,EAAImlD,KAAK/8C,EAAErC,KAKL,qBAATqC,EAAErC,GAAoB,CAC9B,IAAGqC,EAAEpC,QAAQoC,EAAEpC,QAAQhG,EAAImlD,MAKzB,MAFIvkD,EAAQ,IAAIL,MAAM,gCAChBmhE,UAAYt5D,EACZxH,EAJNwH,EAAErC,GAAK/F,EAAImlD,KAAK/8C,EAAEpC,KAMtB,CAEA,GAAsB,qBAAZoC,EAAE6X,MACV,OAAO7X,EAMT,GAAc,aAAXA,EAAEpC,KAAqB,CAExB,IAAI27D,EAAS,EACTC,EAAK,EACLC,EAAK,EACNz5D,EAAE05D,mBACHF,GAAM,IACND,EAAS,GAERv5D,EAAE25D,iBACHH,GAAM,GACND,EAAS,GAERv5D,EAAE45D,kBACHJ,GAAM,GACND,EAAS,GAERv5D,EAAE65D,mBACHL,GAAM,GACND,EAAS,GAERv5D,EAAE85D,eACHN,GAAM,EACND,EAAS,GAERv5D,EAAE+5D,cACHP,GAAM,EACND,EAAS,GAERv5D,EAAEg6D,UACHR,GAAM,EACND,EAAS,GAERv5D,EAAEi6D,eACHT,GAAM,EACND,EAAS,GAERv5D,EAAEk6D,eACHT,GAAM,IACNF,EAAS,GAIX,IAAI1hD,EAAQtT,OAAOC,aAAa+0D,GACtB,IAAPE,EACD5hD,GAAStT,OAAOC,aAAag1D,GAAMj1D,OAAOC,aAAai1D,GACxC,IAAPD,IACR3hD,GAAStT,OAAOC,aAAag1D,IAE/Bx5D,EAAE6X,MAAQlgB,EAAK4F,OACb5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKmY,WAAW,EAAOl/C,EACtD,MAAO,GAAc,qBAAX7X,EAAEpC,KAEVoC,EAAE6X,MAAQlgB,EAAK4F,OACb5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAE/C7+C,EAAEm6D,IACHn6D,EAAE6X,MAAMA,MAAMpR,KAAK9O,EAAK4F,OACtB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKwb,SAAS,EACzC71D,OAAOC,aAAa,OAErB,sBAAuBxE,GACxBA,EAAE6X,MAAMA,MAAMpR,KAAK9O,EAAK4F,OACtB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACzCxnD,EAAK0oD,aAAargD,EAAEq6D,mBAAmBnhE,kBAEtC,GAAc,gBAAX8G,EAAEpC,KAAwB,CAElCoC,EAAE6X,MAAQlgB,EAAK4F,OACb5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAClD,IAAI6Y,EAAM13D,EAAE6X,MAAMA,MAClB,IAAI,IAAI/e,KAAOkH,GACC,IAAXA,EAAElH,KAIFA,KAAOikD,EACR2a,EAAIjxD,KAAK9O,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KACnD,EAAOpnD,EAAKipD,SAAS7D,EAAKjkD,IAAMI,cACJ,IAAtBJ,EAAI2kB,QAAQ,MAEpBi6C,EAAIjxD,KAAK9O,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KACnD,EAAOpnD,EAAKipD,SAAS9nD,GAAKI,aAGlC,MAAO,GAAc,eAAX8G,EAAEpC,KAAuB,CAG7B27D,EAAS,EACTC,EAAK,EAENx5D,EAAEtG,SACH8/D,GAAM,IACND,EAAS,GAERv5D,EAAEs6D,SACHd,GAAM,GACND,EAAS,GAERv5D,EAAE6vB,QACH2pC,GAAM,GACND,EAAS,GAERv5D,EAAEu6D,UACHf,GAAM,GACND,EAAS,GAERv5D,EAAEw6D,WACHhB,GAAM,EACND,EAAS,GAERv5D,EAAEy6D,QACHjB,GAAM,EACND,EAAS,GAERv5D,EAAE06D,UACHlB,GAAM,EACND,EAAS,GAERv5D,EAAE26D,QACHnB,GAAM,EACND,EAAS,GAIP1hD,EAAQtT,OAAOC,aAAa+0D,GACtB,IAAPC,IACD3hD,GAAStT,OAAOC,aAAag1D,IAE/Bx5D,EAAE6X,MAAQlgB,EAAK4F,OACb5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKmY,WAAW,EAAOl/C,EACtD,MAAO,GAAc,mBAAX7X,EAAEpC,MAAwC,kBAAXoC,EAAEpC,KAA0B,CAEnEoC,EAAE6X,MAAQlgB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAGtE,IAAI,IAAIz/C,EAAI,EAAGA,EAAIY,EAAE46D,SAASt+D,SAAU8C,EAAG,CAErCyY,GADJgjD,EAAU76D,EAAE46D,SAASx7D,IACDyY,MAEpB,GAAoB,IAAjBgjD,EAAQ3iE,MAAc2iE,EAAQnJ,IAE/B,GAAa,QADb75C,EAAQngB,EAAMU,KAAKq5D,YAAYoJ,EAAQnJ,KAKrC,MAHIl5D,EAAQ,IAAIL,MACd,8DACImhE,UAAYt5D,EACZxH,OAEiB,IAAjBqiE,EAAQ3iE,OAGd2f,EADCgjD,EAAQnb,IACD/nD,EAAKipD,SAASjpD,EAAKipD,SAASia,EAAQnb,MAGpC/nD,EAAKipD,SAAS/oC,IAG1B7X,EAAE6X,MAAMA,MAAMpR,KAAK9O,EAAK4F,OACtB5F,EAAK+mD,MAAMgF,iBAAkBmX,EAAQ3iE,MAAM,EAC3C2f,GACJ,CACF,MAAO,GAAc,cAAX7X,EAAEpC,MAAwBrG,EAAQ2uD,KAAM,CAEhD,IAAK,iBAAiBlyC,KAAKhU,EAAEmQ,UAC1BnQ,EAAEmQ,QAAQ7T,OAAS,GAAO0D,EAAEmQ,QAAQ7T,OAAS,IAC9C,MAAM,IAAInE,MAAM,gCAGlB6H,EAAE6X,MAAQlgB,EAAK4F,OACb5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKkc,WAAW,EAAO96D,EAAEmQ,QACxD,MAAO,GAAc,yBAAXnQ,EAAEpC,MAAmCrG,EAAQ2uD,KAAM,CAC3D,IAAI6U,EAAMxjE,EAAQ2uD,KAAK8U,+BACvBh7D,EAAEi7D,qBAAuBF,EAAI5pD,QAE7BnR,EAAE6X,MAAQlgB,EAAK4F,OACb5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAAO8b,EAAI7hE,WAC5D,MAAO,GAAc,2BAAX8G,EAAEpC,MAAqCrG,EAAQ2uD,KAAM,CAE7DlmD,EAAE6X,MAAQlgB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAClE6Y,EAAM13D,EAAE6X,MAAMA,MAElB,GAAG7X,EAAEk7D,cAAe,CAClB,IAAIA,GAAqC,IAApBl7D,EAAEk7D,cACrB3jE,EAAQ2uD,KAAK8U,+BAA+B9hE,WAC5C8G,EAAEk7D,cACJxD,EAAIjxD,KACF9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAOwX,GACvD,CAEA,GAAGl7D,EAAEm7D,oBAAqB,CACxB,IAAIA,EAAsB,CACxBxjE,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChDoV,GAAoC,IAA1B94D,EAAEm7D,oBACV5jE,EAAQ2uD,KAAKkV,OAASp7D,EAAEm7D,wBAG9BzD,EAAIjxD,KACF9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAMyX,GACtD,CAEA,GAAGn7D,EAAEq7D,aAAc,CACjB,IAAIA,EAAe3jE,EAAMU,KAAKsX,YAA8B,IAAnB1P,EAAEq7D,aACzC9jE,EAAQ2uD,KAAKmV,aAAer7D,EAAEq7D,cAChC3D,EAAIjxD,KACF9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAO2X,GACvD,CACF,MAAO,GAAc,0BAAXr7D,EAAEpC,KAAkC,CAC5CoC,EAAE6X,MAAQlgB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAClE6Y,EAAM13D,EAAE6X,MAAMA,MAAlB,IASIgjD,EANAS,EAAS3jE,EAAK4F,OAChB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAG9C0c,EAAuB5jE,EAAK4F,OAC9B5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,IAExC,IAAQtkD,EAAI,EAAGA,EAAIY,EAAE46D,SAASt+D,SAAU8C,EAAG,CAErCyY,GADJgjD,EAAU76D,EAAE46D,SAASx7D,IACDyY,MAEpB,GAAoB,IAAjBgjD,EAAQ3iE,MAAc2iE,EAAQnJ,IAE/B,GAAa,QADb75C,EAAQngB,EAAMU,KAAKq5D,YAAYoJ,EAAQnJ,KAKrC,MAHIl5D,EAAQ,IAAIL,MACd,8DACImhE,UAAYt5D,EACZxH,OAEiB,IAAjBqiE,EAAQ3iE,OAGd2f,EADCgjD,EAAQnb,IACD/nD,EAAKipD,SAASjpD,EAAKipD,SAASia,EAAQnb,MAGpC/nD,EAAKipD,SAAS/oC,IAG1B0jD,EAAqB1jD,MAAMpR,KAAK9O,EAAK4F,OACnC5F,EAAK+mD,MAAMgF,iBAAkBmX,EAAQ3iE,MAAM,EAC3C2f,GACJ,CAGAyjD,EAAOzjD,MAAMpR,KAAK9O,EAAK4F,OACrB5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAAC6X,KACzC7D,EAAIjxD,KAAK60D,EACX,CAIE,IAAI9iE,EADN,GAAsB,qBAAZwH,EAAE6X,MAGV,MAFIrf,EAAQ,IAAIL,MAAM,mCAChBmhE,UAAYt5D,EACZxH,EAGR,OAAOwH,CACT,CASA,SAASw7D,EAA2B9b,EAAKiB,GACvC,GAAOjB,IACA3C,EAAK,cAAV,CACE,IAAIgU,EAAQ,GAiCZ,YA/BgC3O,IAA7BzB,EAAOnD,KAAKwa,cACbjH,EAAMtqD,KAAK9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAC3D/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAC1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASD,EAAOnD,KAAKwa,cAAc9+D,YAC1CvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,cAKhCuB,IAA5BzB,EAAO90C,IAAImsD,cACZjH,EAAMtqD,KAAK9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAC3D/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAC1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASD,EAAO90C,IAAImsD,cAAc9+D,YACzCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAC1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASD,EAAO90C,IAAI2xC,KAAKwa,cAAc9+D,YAC9CvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,gBAMxCuB,IAAtBzB,EAAOiT,YACR7C,EAAMtqD,KAAK9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAC3D/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAaM,EAAOiT,YAAY16D,eAIpCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAMkS,EAAM,CAGzE,OAAOp5D,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,GAEtE,CAUA,SAAS4a,EAAqBC,GAE5B,IAAIvgE,EAAOxD,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,IAG7D,GAA6B,IAA1BgY,EAAInX,WAAWjoD,OAChB,OAAOnB,EAKT,IADA,IAAIgtD,EAAQuT,EAAInX,WACRvnD,EAAI,EAAGA,EAAImrD,EAAM7rD,SAAUU,EAAG,CACpC,IAAIwuD,EAAOrD,EAAMnrD,GACb6a,EAAQ2zC,EAAK3zC,MAGb2/C,EAAgB7/D,EAAKinD,KAAKoa,KAC3B,kBAAmBxN,IACpBgM,EAAgBhM,EAAKgM,eAEpBA,IAAkB7/D,EAAKinD,KAAKoa,OAC7BnhD,EAAQngB,EAAMU,KAAK4xD,WAAWnyC,IAEhC,IAAIshD,GAAmB,EACpB,qBAAsB3N,IACvB2N,EAAmB3N,EAAK2N,kBAO1B,IAAIzB,EAAM//D,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEpElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAS4K,EAAKtzD,MAAMgB,YAC3BvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EAAM,CAErDlsD,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAW6Y,EAAe2B,EAAkBthD,OAG7D1c,EAAK0c,MAAMpR,KAAKixD,EAClB,CAEA,OAAOv8D,CACT,CAtjDAvD,EAAIqwD,mBAAqB,SAASnwD,EAAK6jE,EAAazW,GAClD,IAAIntD,EAAML,EAAMI,IAAIE,OAAOF,GAAK,GAEhC,GAAgB,gBAAbC,EAAIG,MACQ,qBAAbH,EAAIG,MACS,wBAAbH,EAAIG,KAAgC,CACpC,IAAIM,EAAQ,IAAIL,MACd,+HAGF,MADAK,EAAMC,WAAaV,EAAIG,KACjBM,CACR,CACA,GAAGT,EAAIE,UAAkC,cAAtBF,EAAIE,SAASC,KAC9B,MAAM,IAAIC,MACR,6DAIJ,IAAIO,EAAMf,EAAKgB,QAAQZ,EAAIO,KAAM4sD,GAEjC,OAAOttD,EAAIuuD,oBAAoBztD,EAAKijE,EACtC,EAUA/jE,EAAIgkE,iBAAmB,SAAS1V,EAAMntD,GAEpC,IAAIhB,EAAM,CACRG,KAAM,cACNI,KAAMX,EAAKqB,MAAMpB,EAAIswD,kBAAkBhC,IAAOhtD,YAEhD,OAAOxB,EAAMI,IAAIqB,OAAOpB,EAAK,CAACgB,QAASA,GACzC,EASAnB,EAAIikE,iBAAmB,SAAS/jE,GAC9B,IAAIC,EAAML,EAAMI,IAAIE,OAAOF,GAAK,GAEhC,GAAgB,eAAbC,EAAIG,MAAsC,mBAAbH,EAAIG,KAA2B,CAC7D,IAAIM,EAAQ,IAAIL,MAAM,mGAGtB,MADAK,EAAMC,WAAaV,EAAIG,KACjBM,CACR,CACA,GAAGT,EAAIE,UAAkC,cAAtBF,EAAIE,SAASC,KAC9B,MAAM,IAAIC,MAAM,4DAIlB,IAAIO,EAAMf,EAAKgB,QAAQZ,EAAIO,MAE3B,OAAOV,EAAIkkE,kBAAkBpjE,EAC/B,EAUAd,EAAImkE,eAAiB,SAASjjE,EAAKC,GAEjC,IAAIhB,EAAM,CACRG,KAAM,aACNI,KAAMX,EAAKqB,MAAMpB,EAAIokE,gBAAgBljE,IAAMI,YAE7C,OAAOxB,EAAMI,IAAIqB,OAAOpB,EAAK,CAACgB,QAASA,GACzC,EAUAnB,EAAIqkE,2BAA6B,SAASnjE,EAAKC,GAE7C,IAAIhB,EAAM,CACRG,KAAM,iBACNI,KAAMX,EAAKqB,MAAMpB,EAAIskE,wBAAwBpjE,IAAMI,YAErD,OAAOxB,EAAMI,IAAIqB,OAAOpB,EAAK,CAACgB,QAASA,GACzC,EAgBAnB,EAAI4Z,wBAA0B,SAAS1Y,EAAKvB,GAE1C,IAGIwM,EAHAxC,GADJhK,EAAUA,GAAW,CAAC,GACLgK,IAAM7J,EAAM6J,GAAGwO,KAAKxS,SAIrC,OAHWhG,EAAQW,MAAQ,gBAIzB,IAAK,eACH6L,EAAQpM,EAAKqB,MAAMpB,EAAIskE,wBAAwBpjE,IAAMI,WACrD,MACF,IAAK,uBACH6K,EAAQpM,EAAKqB,MAAMpB,EAAIokE,gBAAgBljE,IAAMI,WAC7C,MACF,QACE,MAAM,IAAIf,MAAM,6BAA+BZ,EAAQW,KAAO,MAIlEqJ,EAAGvF,QACHuF,EAAGpF,OAAO4H,GACV,IAAIvG,EAAS+D,EAAG/D,SAChB,GAAwB,QAArBjG,EAAQma,SAAoB,CAC7B,IAAIC,EAAMnU,EAAO2T,QACjB,OAAG5Z,EAAQqa,UACFD,EAAIE,MAAM,SAASC,KAAKva,EAAQqa,WAElCD,CACT,CAAO,GAAwB,WAArBpa,EAAQma,SAChB,OAAOlU,EAAOtE,WACT,GAAG3B,EAAQma,SAChB,MAAM,IAAIvZ,MAAM,qBAAuBZ,EAAQma,SAAW,MAE5D,OAAOlU,CACT,EAiBA5F,EAAIukE,4BAA8B,SAASrkE,EAAK6jE,EAAazW,GAC3D,IAAIntD,EAAML,EAAMI,IAAIE,OAAOF,GAAK,GAEhC,GAAgB,wBAAbC,EAAIG,KAAgC,CACrC,IAAIM,EAAQ,IAAIL,MAAM,mGAGtB,MADAK,EAAMC,WAAaV,EAAIG,KACjBM,CACR,CACA,GAAGT,EAAIE,UAAkC,cAAtBF,EAAIE,SAASC,KAC9B,MAAM,IAAIC,MAAM,uEAKlB,IAAIO,EAAMf,EAAKgB,QAAQZ,EAAIO,KAAM4sD,GAEjC,OAAOttD,EAAIwkE,6BAA6B1jE,EAAKijE,EAC/C,EAUA/jE,EAAIykE,0BAA4B,SAASX,EAAK3iE,GAE5C,IAAIhB,EAAM,CACRG,KAAM,sBACNI,KAAMX,EAAKqB,MAAMpB,EAAI0kE,2BAA2BZ,IAAMxiE,YAExD,OAAOxB,EAAMI,IAAIqB,OAAOpB,EAAK,CAACgB,QAASA,GACzC,EAOAnB,EAAI2kE,kBAAoB,WACtB,IAAIrW,EAAO,CACXA,QAAe,EACfA,aAAoB,KACpBA,aAAoB,KACpBA,UAAiB,KACjBA,QAAe,CAAC,GAgRhB,OA/QAA,EAAKsW,QAAQxE,aAAe,KAC5B9R,EAAKuW,SAAW,CAAC,EACjBvW,EAAKuW,SAASC,UAAY,IAAI3uD,KAC9Bm4C,EAAKuW,SAASE,SAAW,IAAI5uD,KAE7Bm4C,EAAKkV,OAAS,CAAC,EACflV,EAAKkV,OAAOwB,SAAW,SAASC,GAC9B,OAAOzF,EAAclR,EAAKkV,OAAQyB,EACpC,EACA3W,EAAKkV,OAAO0B,SAAW,SAAStR,GAC9ByN,EAAmB,CAACzN,IACpBtF,EAAKkV,OAAO7W,WAAW99C,KAAK+kD,EAC9B,EACAtF,EAAKkV,OAAO7W,WAAa,GACzB2B,EAAKkV,OAAO5d,KAAO,KAEnB0I,EAAK6W,QAAU,CAAC,EAChB7W,EAAK6W,QAAQH,SAAW,SAASC,GAC/B,OAAOzF,EAAclR,EAAK6W,QAASF,EACrC,EACA3W,EAAK6W,QAAQD,SAAW,SAAStR,GAC/ByN,EAAmB,CAACzN,IACpBtF,EAAK6W,QAAQxY,WAAW99C,KAAK+kD,EAC/B,EACAtF,EAAK6W,QAAQxY,WAAa,GAC1B2B,EAAK6W,QAAQvf,KAAO,KAEpB0I,EAAK0R,WAAa,GAClB1R,EAAKxI,UAAY,KACjBwI,EAAK3kD,GAAK,KAQV2kD,EAAK8W,WAAa,SAAS7U,EAAO8U,GAEhChE,EAAmB9Q,GACnBjC,EAAK6W,QAAQxY,WAAa4D,SACnBjC,EAAK6W,QAAQE,SACjBA,IAED/W,EAAK6W,QAAQE,SAAWA,GAE1B/W,EAAK6W,QAAQvf,KAAO,IACtB,EAQA0I,EAAKgX,UAAY,SAAS/U,EAAO8U,GAE/BhE,EAAmB9Q,GACnBjC,EAAKkV,OAAO7W,WAAa4D,SAClBjC,EAAKkV,OAAO6B,SAChBA,IAED/W,EAAKkV,OAAO6B,SAAWA,GAEzB/W,EAAKkV,OAAO5d,KAAO,IACrB,EAOA0I,EAAKiX,cAAgB,SAASC,GAC5B,IAAI,IAAIpgE,EAAI,EAAGA,EAAIogE,EAAK9gE,SAAUU,EAChCq8D,EAA4B+D,EAAKpgE,GAAI,CAACkpD,KAAMA,IAG9CA,EAAK0R,WAAawF,CACpB,EAWAlX,EAAKmX,aAAe,SAAS9lE,GACL,kBAAZA,IACRA,EAAU,CAACqG,KAAMrG,IAKnB,IAFA,IACI+lE,EADAniE,EAAO,KAEH6B,EAAI,EAAY,OAAT7B,GAAiB6B,EAAIkpD,EAAK0R,WAAWt7D,SAAUU,EAC5DsgE,EAAMpX,EAAK0R,WAAW56D,IACnBzF,EAAQoG,IAAM2/D,EAAI3/D,KAAOpG,EAAQoG,IAE1BpG,EAAQqG,MAAQ0/D,EAAI1/D,OAASrG,EAAQqG,QAD7CzC,EAAOmiE,GAKX,OAAOniE,CACT,EAQA+qD,EAAKqX,KAAO,SAASzkE,EAAKyI,GAExB2kD,EAAK3kD,GAAKA,GAAM7J,EAAM6J,GAAGwO,KAAKxS,SAC9B,IAAIy6D,EAAejb,EAAKmJ,EAAK3kD,GAAG6O,UAAY,qBAC5C,IAAI4nD,EAAc,CAChB,IAAIx/D,EAAQ,IAAIL,MAAM,+EAGtB,MADAK,EAAM4X,UAAY81C,EAAK3kD,GAAG6O,UACpB5X,CACR,CACA0tD,EAAKmS,aAAenS,EAAKsW,QAAQxE,aAAeA,EAGhD9R,EAAKsX,eAAiB5lE,EAAI6lE,kBAAkBvX,GAC5C,IAAIniD,EAAQpM,EAAKqB,MAAMktD,EAAKsX,gBAG5BtX,EAAK3kD,GAAGpF,OAAO4H,EAAM7K,YACrBgtD,EAAK2S,UAAY//D,EAAIykE,KAAKrX,EAAK3kD,GACjC,EAUA2kD,EAAK0S,OAAS,SAASt3C,GACrB,IAAInmB,GAAO,EAEX,IAAI+qD,EAAKwX,OAAOp8C,GAAQ,CACtB,IAAI85C,EAAS95C,EAAM85C,OACf2B,EAAU7W,EAAK6W,QACfvkE,EAAQ,IAAIL,MACd,yIAKF,MAFAK,EAAMmlE,eAAiBZ,EAAQxY,WAC/B/rD,EAAMolE,aAAexC,EAAO7W,WACtB/rD,CACR,CAEA,IAAI+I,EAAK+f,EAAM/f,GACf,GAAU,OAAPA,EAAa,CAEdA,EAAK62D,EAAuB,CAC1BC,aAAc/2C,EAAM+2C,aACpBngE,KAAM,gBAIR,IAAIslE,EAAiBl8C,EAAMk8C,gBAAkB5lE,EAAI6lE,kBAAkBn8C,GAC/Dvd,EAAQpM,EAAKqB,MAAMwkE,GACvBj8D,EAAGpF,OAAO4H,EAAM7K,WAClB,CAQA,OANU,OAAPqI,IACDpG,EAAOm9D,EAAiB,CACtBE,YAAatS,EAAM3kD,GAAIA,EAAIs3D,UAAWv3C,EAAMu3C,aAIzC19D,CACT,EAWA+qD,EAAK2X,SAAW,SAASC,GACvB,IAAI3iE,GAAO,EAEP6B,EAAIkpD,EAAKkV,OACTlgE,EAAI4iE,EAAOf,QAGf,GAAG//D,EAAEwgD,MAAQtiD,EAAEsiD,KACbriD,EAAQ6B,EAAEwgD,OAAStiD,EAAEsiD,UAChB,GAAGxgD,EAAEunD,WAAWjoD,SAAWpB,EAAEqpD,WAAWjoD,OAAQ,CAGrD,IAAIyhE,EAAOC,EADX7iE,GAAO,EAEP,IAAI,IAAIiE,EAAI,EAAGjE,GAAQiE,EAAIpC,EAAEunD,WAAWjoD,SAAU8C,EAChD2+D,EAAQ/gE,EAAEunD,WAAWnlD,GACrB4+D,EAAQ9iE,EAAEqpD,WAAWnlD,GAClB2+D,EAAM7lE,OAAS8lE,EAAM9lE,MAAQ6lE,EAAMlmD,QAAUmmD,EAAMnmD,QAEpD1c,GAAO,EAGb,CAEA,OAAOA,CACT,EAWA+qD,EAAKwX,OAAS,SAASp8C,GACrB,OAAOA,EAAMu8C,SAAS3X,EACxB,EAOAA,EAAK8U,6BAA+B,WAgBlC,OAAOpjE,EAAI4Z,wBAAwB00C,EAAKxI,UAAW,CAACxlD,KAAM,gBAC5D,EASAguD,EAAK+X,2BAA6B,WAEhC,IADA,IAAIve,EAAM3C,EAA2B,qBAC7B//C,EAAI,EAAGA,EAAIkpD,EAAK0R,WAAWt7D,SAAUU,EAAG,CAC9C,IAAIsgE,EAAMpX,EAAK0R,WAAW56D,GAC1B,GAAGsgE,EAAI3/D,KAAO+hD,EAAK,CACjB,IAAIqb,EAAM7U,EAAK8U,+BAA+B9hE,WAC9C,OAAQxB,EAAMU,KAAKsX,WAAW4tD,EAAIrC,wBAA0BF,CAC9D,CACF,CACA,OAAO,CACT,EAEO7U,CACT,EAeAtuD,EAAIuuD,oBAAsB,SAASztD,EAAKijE,GAEtC,IAAI7kC,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASzoD,EAAKk+D,EAA0B9/B,EAASoqB,GAAS,CACjE,IAAI1oD,EAAQ,IAAIL,MAAM,6EAGtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CAIA,GADUb,EAAK8nD,SAAS3oB,EAAQonC,gBACrBtmE,EAAImlD,KAAKohB,cAClB,MAAM,IAAIhmE,MAAM,2CAIlB,IAAI+tD,EAAOtuD,EAAI2kE,oBACfrW,EAAKxqD,QAAUo7B,EAAQsnC,YACrBtnC,EAAQsnC,YAAY9b,WAAW,GAAK,EACtC,IAAI+b,EAAS3mE,EAAMU,KAAKC,aAAay+B,EAAQwnC,kBAC7CpY,EAAKmV,aAAegD,EAAOltD,QAC3B+0C,EAAKmS,aAAe3gE,EAAMC,KAAK8nD,SAAS3oB,EAAQynC,kBAChDrY,EAAKyS,oBAAsBb,EACzB5R,EAAKmS,aAAcvhC,EAAQ0nC,qBAAqB,GAClDtY,EAAKsW,QAAQxE,aAAetgE,EAAMC,KAAK8nD,SAAS3oB,EAAQ2nC,sBACxDvY,EAAKsW,QAAQ1a,WAAagW,EAAyB5R,EAAKsW,QAAQxE,aAC9DlhC,EAAQ4nC,yBAAyB,GACnCxY,EAAK2S,UAAY/hC,EAAQ6nC,cAEzB,IAAIlC,EAAW,GAef,QAdoCra,IAAjCtrB,EAAQ8nC,sBACTnC,EAASh2D,KAAK9O,EAAKknE,cAAc/nC,EAAQ8nC,4BAECxc,IAAzCtrB,EAAQgoC,8BACTrC,EAASh2D,KAAK9O,EAAKonE,sBACjBjoC,EAAQgoC,oCAEwB1c,IAAjCtrB,EAAQkoC,sBACTvC,EAASh2D,KAAK9O,EAAKknE,cAAc/nC,EAAQkoC,4BAEC5c,IAAzCtrB,EAAQmoC,8BACTxC,EAASh2D,KAAK9O,EAAKonE,sBACjBjoC,EAAQmoC,+BAETxC,EAASngE,OAAS,EACnB,MAAM,IAAInE,MAAM,wGAGlB,GAAGskE,EAASngE,OAAS,EACnB,MAAM,IAAInE,MAAM,+GASlB,GANA+tD,EAAKuW,SAASC,UAAYD,EAAS,GACnCvW,EAAKuW,SAASE,SAAWF,EAAS,GAGlCvW,EAAKsX,eAAiB1mC,EAAQ0mC,eAE3B7B,EAAa,CAEdzV,EAAK3kD,GAAK62D,EAAuB,CAC/BC,aAAcnS,EAAKmS,aACnBngE,KAAM,gBAIR,IAAI6L,EAAQpM,EAAKqB,MAAMktD,EAAKsX,gBAC5BtX,EAAK3kD,GAAGpF,OAAO4H,EAAM7K,WACvB,CAGA,IAAIgmE,EAAMxnE,EAAM6J,GAAGwO,KAAKxS,SACpB4hE,EAASxnE,EAAKqB,MAAM89B,EAAQsoC,YAChCF,EAAI/iE,OAAOgjE,EAAOjmE,YAClBgtD,EAAKkV,OAAOwB,SAAW,SAASC,GAC9B,OAAOzF,EAAclR,EAAKkV,OAAQyB,EACpC,EACA3W,EAAKkV,OAAO0B,SAAW,SAAStR,GAC9ByN,EAAmB,CAACzN,IACpBtF,EAAKkV,OAAO7W,WAAW99C,KAAK+kD,EAC9B,EACAtF,EAAKkV,OAAO7W,WAAa3sD,EAAI0/D,qBAAqBxgC,EAAQsoC,YACvDtoC,EAAQuoC,qBACTnZ,EAAKkV,OAAO6B,SAAWnmC,EAAQuoC,oBAEjCnZ,EAAKkV,OAAO5d,KAAO0hB,EAAI1hE,SAAS2T,QAGhC,IAAImuD,EAAM5nE,EAAM6J,GAAGwO,KAAKxS,SACpBgiE,EAAS5nE,EAAKqB,MAAM89B,EAAQ0oC,aAyBhC,OAxBAF,EAAInjE,OAAOojE,EAAOrmE,YAClBgtD,EAAK6W,QAAQH,SAAW,SAASC,GAC/B,OAAOzF,EAAclR,EAAK6W,QAASF,EACrC,EACA3W,EAAK6W,QAAQD,SAAW,SAAStR,GAC/ByN,EAAmB,CAACzN,IACpBtF,EAAK6W,QAAQxY,WAAW99C,KAAK+kD,EAC/B,EACAtF,EAAK6W,QAAQxY,WAAa3sD,EAAI0/D,qBAAqBxgC,EAAQ0oC,aACxD1oC,EAAQ2oC,sBACTvZ,EAAK6W,QAAQE,SAAWnmC,EAAQ2oC,qBAElCvZ,EAAK6W,QAAQvf,KAAO8hB,EAAI9hE,SAAS2T,QAG9B2lB,EAAQ4oC,eACTxZ,EAAK0R,WAAahgE,EAAI+nE,8BAA8B7oC,EAAQ4oC,gBAE5DxZ,EAAK0R,WAAa,GAIpB1R,EAAKxI,UAAY9lD,EAAIkkE,kBAAkBhlC,EAAQ8oC,sBAExC1Z,CACT,EAyDAtuD,EAAI+nE,8BAAgC,SAASvC,GAE3C,IADA,IAAIjiE,EAAO,GACH6B,EAAI,EAAGA,EAAIogE,EAAKvlD,MAAMvb,SAAUU,EAGtC,IADA,IAAI6iE,EAASzC,EAAKvlD,MAAM7a,GAChBgoC,EAAK,EAAGA,EAAK66B,EAAOhoD,MAAMvb,SAAU0oC,EAC1C7pC,EAAKsL,KAAK7O,EAAIigE,6BAA6BgI,EAAOhoD,MAAMmtB,KAI5D,OAAO7pC,CACT,EASAvD,EAAIigE,6BAA+B,SAASyF,GAK1C,IAAIt9D,EAAI,CAAC,EAUT,GATAA,EAAErC,GAAKhG,EAAK8nD,SAAS6d,EAAIzlD,MAAM,GAAGA,OAClC7X,EAAE8/D,UAAW,EACVxC,EAAIzlD,MAAM,GAAG3f,OAASP,EAAKinD,KAAKwb,SACjCp6D,EAAE8/D,SAAiD,IAArCxC,EAAIzlD,MAAM,GAAGA,MAAMyqC,WAAW,GAC5CtiD,EAAE6X,MAAQylD,EAAIzlD,MAAM,GAAGA,OAEvB7X,EAAE6X,MAAQylD,EAAIzlD,MAAM,GAAGA,MAGtB7X,EAAErC,MAAMo/C,EAIT,GAHA/8C,EAAEpC,KAAOm/C,EAAK/8C,EAAErC,IAGF,aAAXqC,EAAEpC,KAAqB,CAExB,IACI47D,EAAK,EACLC,EAAK,GAFLsG,EAAKpoE,EAAKgB,QAAQqH,EAAE6X,QAGlBA,MAAMvb,OAAS,IAInBk9D,EAAKuG,EAAGloD,MAAMyqC,WAAW,GACzBmX,EAAKsG,EAAGloD,MAAMvb,OAAS,EAAIyjE,EAAGloD,MAAMyqC,WAAW,GAAK,GAGtDtiD,EAAE05D,iBAAmC,OAAV,IAALF,GACtBx5D,EAAE25D,eAAiC,MAAV,GAALH,GACpBx5D,EAAE45D,gBAAkC,MAAV,GAALJ,GACrBx5D,EAAE65D,iBAAmC,MAAV,GAALL,GACtBx5D,EAAE85D,aAA+B,KAAV,EAALN,GAClBx5D,EAAE+5D,YAA8B,KAAV,EAALP,GACjBx5D,EAAEg6D,QAA0B,KAAV,EAALR,GACbx5D,EAAEi6D,aAA+B,KAAV,EAALT,GAClBx5D,EAAEk6D,aAA+B,OAAV,IAALT,EACpB,MAAO,GAAc,qBAAXz5D,EAAEpC,KAA6B,EAGnCmiE,EAAKpoE,EAAKgB,QAAQqH,EAAE6X,QAElBA,MAAMvb,OAAS,GAAKyjE,EAAGloD,MAAM,GAAG3f,OAASP,EAAKinD,KAAKwb,QACvDp6D,EAAEm6D,GAA0C,IAApC4F,EAAGloD,MAAM,GAAGA,MAAMyqC,WAAW,GAErCtiD,EAAEm6D,IAAK,EAGT,IAAItiD,EAAQ,KACTkoD,EAAGloD,MAAMvb,OAAS,GAAKyjE,EAAGloD,MAAM,GAAG3f,OAASP,EAAKinD,KAAKO,QACvDtnC,EAAQkoD,EAAGloD,MAAM,GAAGA,MACZkoD,EAAGloD,MAAMvb,OAAS,IAC1Bub,EAAQkoD,EAAGloD,MAAM,GAAGA,OAET,OAAVA,IACD7X,EAAEq6D,kBAAoB1iE,EAAKqoE,aAAanoD,GAE5C,MAAO,GAAc,gBAAX7X,EAAEpC,KAIV,IADA,IAAImiE,EAAKpoE,EAAKgB,QAAQqH,EAAE6X,OAChBquB,EAAK,EAAGA,EAAK65B,EAAGloD,MAAMvb,SAAU4pC,EAAI,CAC1C,IAAIwZ,EAAM/nD,EAAK8nD,SAASsgB,EAAGloD,MAAMquB,GAAIruB,OAClC6nC,KAAO3C,EACR/8C,EAAE+8C,EAAK2C,KAAQ,EAEf1/C,EAAE0/C,IAAO,CAEb,MACK,GAAc,eAAX1/C,EAAEpC,KAAuB,CAI7B47D,EAAK,GADLuG,EAAKpoE,EAAKgB,QAAQqH,EAAE6X,QAElBA,MAAMvb,OAAS,IAInBk9D,EAAKuG,EAAGloD,MAAMyqC,WAAW,IAG3BtiD,EAAEtG,OAAyB,OAAV,IAAL8/D,GACZx5D,EAAEs6D,OAAyB,MAAV,GAALd,GACZx5D,EAAE6vB,MAAwB,MAAV,GAAL2pC,GACXx5D,EAAEu6D,QAA0B,MAAV,GAALf,GACbx5D,EAAEw6D,SAA2B,KAAV,EAALhB,GACdx5D,EAAEy6D,MAAwB,KAAV,EAALjB,GACXx5D,EAAE06D,QAA0B,KAAV,EAALlB,GACbx5D,EAAE26D,MAAwB,KAAV,EAALnB,EACb,MAAO,GACM,mBAAXx5D,EAAEpC,MACS,kBAAXoC,EAAEpC,KAA0B,CAK5B,IAAIqiE,EAHJjgE,EAAE46D,SAAW,GAITmF,EAAKpoE,EAAKgB,QAAQqH,EAAE6X,OACxB,IADA,IACQzY,EAAI,EAAGA,EAAI2gE,EAAGloD,MAAMvb,SAAU8C,EAAG,CAIvC,IAAIy7D,EAAU,CACZ3iE,MAHF+nE,EAAKF,EAAGloD,MAAMzY,IAGHlH,KACT2f,MAAOooD,EAAGpoD,OAKZ,OAHA7X,EAAE46D,SAASn0D,KAAKo0D,GAGToF,EAAG/nE,MAER,KAAK,EAEL,KAAK,EAEL,KAAK,EACH,MAEF,KAAK,EAEH2iE,EAAQnJ,GAAKh6D,EAAMU,KAAK05D,UAAUmO,EAAGpoD,OACrC,MAEF,KAAK,EACHgjD,EAAQnb,IAAM/nD,EAAK8nD,SAASwgB,EAAGpoD,OAKrC,CACF,MAAO,GAAc,yBAAX7X,EAAEpC,KAAiC,CAGvCmiE,EAAKpoE,EAAKgB,QAAQqH,EAAE6X,OACxB7X,EAAEi7D,qBAAuBvjE,EAAMU,KAAK0lD,WAAWiiB,EAAGloD,MACpD,CAEF,OAAO7X,CACT,EAeApI,EAAIwkE,6BAA+B,SAAS1jE,EAAKijE,GAE/C,IAAI7kC,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASzoD,EAAKy+D,EAA+BrgC,EAASoqB,GAAS,CACtE,IAAI1oD,EAAQ,IAAIL,MAAM,gGAGtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CAIA,GADUb,EAAK8nD,SAAS3oB,EAAQonC,gBACrBtmE,EAAImlD,KAAKohB,cAClB,MAAM,IAAIhmE,MAAM,2CAIlB,IAAIujE,EAAM9jE,EAAIsoE,6BAad,GAZAxE,EAAIhgE,QAAUo7B,EAAQqpC,WAAarpC,EAAQqpC,WAAW7d,WAAW,GAAK,EACtEoZ,EAAIrD,aAAe3gE,EAAMC,KAAK8nD,SAAS3oB,EAAQspC,iBAC/C1E,EAAI/C,oBAAsBb,EACxB4D,EAAIrD,aAAcvhC,EAAQupC,oBAAoB,GAChD3E,EAAIc,QAAQxE,aAAetgE,EAAMC,KAAK8nD,SAAS3oB,EAAQspC,iBACvD1E,EAAIc,QAAQ1a,WAAagW,EACvB4D,EAAIc,QAAQxE,aAAclhC,EAAQupC,oBAAoB,GACxD3E,EAAI7C,UAAY/hC,EAAQwpC,aAGxB5E,EAAI6E,yBAA2BzpC,EAAQypC,yBAEpC5E,EAAa,CAEdD,EAAIn6D,GAAK62D,EAAuB,CAC9BC,aAAcqD,EAAIrD,aAClBngE,KAAM,0BAIR,IAAI6L,EAAQpM,EAAKqB,MAAM0iE,EAAI6E,0BAC3B7E,EAAIn6D,GAAGpF,OAAO4H,EAAM7K,WACtB,CAGA,IAAIomE,EAAM5nE,EAAM6J,GAAGwO,KAAKxS,SA0BxB,OAzBAm+D,EAAIqB,QAAQH,SAAW,SAASC,GAC9B,OAAOzF,EAAcsE,EAAIqB,QAASF,EACpC,EACAnB,EAAIqB,QAAQD,SAAW,SAAStR,GAC9ByN,EAAmB,CAACzN,IACpBkQ,EAAIqB,QAAQxY,WAAW99C,KAAK+kD,EAC9B,EACAkQ,EAAIqB,QAAQxY,WAAa3sD,EAAI0/D,qBAC3BxgC,EAAQ0pC,gCAAiClB,GAC3C5D,EAAIqB,QAAQvf,KAAO8hB,EAAI9hE,SAAS2T,QAGhCuqD,EAAIhe,UAAY9lD,EAAIkkE,kBAAkBhlC,EAAQ8oC,sBAG9ClE,EAAI+E,aAAe,SAAS5D,GAC1B,OAAOzF,EAAcsE,EAAKmB,EAC5B,EACAnB,EAAIgF,aAAe,SAASlV,GAC1ByN,EAAmB,CAACzN,IACpBkQ,EAAInX,WAAW99C,KAAK+kD,EACtB,EACAkQ,EAAInX,WAAa3sD,EAAI6/D,qBACnB3gC,EAAQ6pC,oCAAsC,IAEzCjF,CACT,EASA9jE,EAAIsoE,2BAA6B,WAC/B,IAAIxE,EAAM,CACVA,QAAc,EACdA,aAAmB,KACnBA,UAAgB,KAChBA,QAAc,CAAC,GAgHf,OA/GAA,EAAIc,QAAQxE,aAAe,KAE3B0D,EAAIqB,QAAU,CAAC,EACfrB,EAAIqB,QAAQH,SAAW,SAASC,GAC9B,OAAOzF,EAAcsE,EAAIqB,QAASF,EACpC,EACAnB,EAAIqB,QAAQD,SAAW,SAAStR,GAC9ByN,EAAmB,CAACzN,IACpBkQ,EAAIqB,QAAQxY,WAAW99C,KAAK+kD,EAC9B,EACAkQ,EAAIqB,QAAQxY,WAAa,GACzBmX,EAAIqB,QAAQvf,KAAO,KAEnBke,EAAIhe,UAAY,KAChBge,EAAInX,WAAa,GACjBmX,EAAI+E,aAAe,SAAS5D,GAC1B,OAAOzF,EAAcsE,EAAKmB,EAC5B,EACAnB,EAAIgF,aAAe,SAASlV,GAC1ByN,EAAmB,CAACzN,IACpBkQ,EAAInX,WAAW99C,KAAK+kD,EACtB,EACAkQ,EAAIn6D,GAAK,KAOTm6D,EAAIsB,WAAa,SAAS7U,GAExB8Q,EAAmB9Q,GACnBuT,EAAIqB,QAAQxY,WAAa4D,EACzBuT,EAAIqB,QAAQvf,KAAO,IACrB,EAOAke,EAAIkF,cAAgB,SAASzY,GAE3B8Q,EAAmB9Q,GACnBuT,EAAInX,WAAa4D,CACnB,EAQAuT,EAAI6B,KAAO,SAASzkE,EAAKyI,GAEvBm6D,EAAIn6D,GAAKA,GAAM7J,EAAM6J,GAAGwO,KAAKxS,SAC7B,IAAIy6D,EAAejb,EAAK2e,EAAIn6D,GAAG6O,UAAY,qBAC3C,IAAI4nD,EAAc,CAChB,IAAIx/D,EAAQ,IAAIL,MAAM,yFAGtB,MADAK,EAAM4X,UAAYsrD,EAAIn6D,GAAG6O,UACnB5X,CACR,CACAkjE,EAAIrD,aAAeqD,EAAIc,QAAQxE,aAAeA,EAG9C0D,EAAI6E,yBAA2B3oE,EAAIipE,4BAA4BnF,GAC/D,IAAI33D,EAAQpM,EAAKqB,MAAM0iE,EAAI6E,0BAG3B7E,EAAIn6D,GAAGpF,OAAO4H,EAAM7K,YACpBwiE,EAAI7C,UAAY//D,EAAIykE,KAAK7B,EAAIn6D,GAC/B,EAaAm6D,EAAI9C,OAAS,WACX,IAAIz9D,GAAO,EAEPoG,EAAKm6D,EAAIn6D,GACb,GAAU,OAAPA,EAAa,CACdA,EAAK62D,EAAuB,CAC1BC,aAAcqD,EAAIrD,aAClBngE,KAAM,0BAIR,IAAI4oE,EAAMpF,EAAI6E,0BACZ3oE,EAAIipE,4BAA4BnF,GAC9B33D,EAAQpM,EAAKqB,MAAM8nE,GACvBv/D,EAAGpF,OAAO4H,EAAM7K,WAClB,CAQA,OANU,OAAPqI,IACDpG,EAAOm9D,EAAiB,CACtBE,YAAakD,EAAKn6D,GAAIA,EAAIs3D,UAAW6C,EAAI7C,aAItC19D,CACT,EAEOugE,CACT,EA+hBA,IAAIqF,EAAa,IAAIhzD,KAAK,wBACtBizD,EAAa,IAAIjzD,KAAK,wBAU1B,SAASkzD,EAAYtxC,GACnB,OAAGA,GAAQoxC,GAAcpxC,EAAOqxC,EACvBrpE,EAAK4F,OACV5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiY,SAAS,EACzCl/D,EAAKupE,cAAcvxC,IAEdh4B,EAAK4F,OACV5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKkY,iBAAiB,EACjDn/D,EAAKwpE,sBAAsBxxC,GAEjC,CASA/3B,EAAI6lE,kBAAoB,SAASvX,GAE/B,IAAIwW,EAAYuE,EAAY/a,EAAKuW,SAASC,WACtCC,EAAWsE,EAAY/a,EAAKuW,SAASE,UACrCyE,EAAMzpE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEpElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAEhD/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAa6F,EAAKxqD,SAASxC,cAGpCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDznD,EAAMU,KAAKsX,WAAWw2C,EAAKmV,eAE7B1jE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASsF,EAAKsW,QAAQxE,cAAc9+D,YAE3CsiE,EACEtV,EAAKsW,QAAQxE,aAAc9R,EAAKsW,QAAQ1a,cAG5CgX,EAAU5S,EAAKkV,QAEfzjE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAC1D6d,EACAC,IAGF7D,EAAU5S,EAAK6W,SAEfnlE,EAAIokE,gBAAgB9V,EAAKxI,aAiC3B,OA9BGwI,EAAKkV,OAAO6B,UAEbmE,EAAIvpD,MAAMpR,KACR9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChD/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKmY,WAAW,EAErDxyD,OAAOC,aAAa,GACpB0hD,EAAKkV,OAAO6B,aAKjB/W,EAAK6W,QAAQE,UAEdmE,EAAIvpD,MAAMpR,KACR9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChD/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKmY,WAAW,EAErDxyD,OAAOC,aAAa,GACpB0hD,EAAK6W,QAAQE,aAMlB/W,EAAK0R,WAAWt7D,OAAS,GAE1B8kE,EAAIvpD,MAAMpR,KAAK7O,EAAIypE,4BAA4Bnb,EAAK0R,aAG/CwJ,CACT,EAUAxpE,EAAIipE,4BAA8B,SAASnF,GAczC,OAZU/jE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEpElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAaqb,EAAIhgE,SAASxC,YAEjC4/D,EAAU4C,EAAIqB,SAEdnlE,EAAIokE,gBAAgBN,EAAIhe,WAExB+d,EAAqBC,IAIzB,EASA9jE,EAAI0pE,wBAA0B,SAASC,GACrC,OAAOzI,EAAUyI,EACnB,EASA3pE,EAAIswD,kBAAoB,SAAShC,GAE/B,IAAIsX,EAAiBtX,EAAKsX,gBAAkB5lE,EAAI6lE,kBAAkBvX,GAGlE,OAAOvuD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjE2e,EAEA7lE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASsF,EAAKmS,cAAcn/D,YAEnCsiE,EAA2BtV,EAAKmS,aAAcnS,EAAKyS,uBAGrDhhE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKmY,WAAW,EACrDxyD,OAAOC,aAAa,GAAQ0hD,EAAK2S,YAEvC,EASAjhE,EAAIypE,4BAA8B,SAASjE,GAEzC,IAAIjiE,EAAOxD,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,IAGzDgU,EAAM//D,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IACtE1jD,EAAK0c,MAAMpR,KAAKixD,GAEhB,IAAI,IAAI16D,EAAI,EAAGA,EAAIogE,EAAK9gE,SAAUU,EAChC06D,EAAI7/C,MAAMpR,KAAK7O,EAAIwhE,2BAA2BgE,EAAKpgE,KAGrD,OAAO7B,CACT,EASAvD,EAAIwhE,2BAA6B,SAASkE,GAExC,IAAIuC,EAASloE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAGzEghB,EAAOhoD,MAAMpR,KAAK9O,EAAK4F,OACrB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EACrCpnD,EAAKipD,SAAS0c,EAAI3/D,IAAIzE,aAGrBokE,EAAIwC,UAELD,EAAOhoD,MAAMpR,KAAK9O,EAAK4F,OACrB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKwb,SAAS,EACzC71D,OAAOC,aAAa,OAGxB,IAAIqT,EAAQylD,EAAIzlD,MAUhB,MATwB,kBAAdylD,EAAIzlD,QAEZA,EAAQlgB,EAAKqB,MAAM6e,GAAO3e,YAI5B2mE,EAAOhoD,MAAMpR,KAAK9O,EAAK4F,OACrB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAAOpnC,IAE/CgoD,CACT,EASAjoE,EAAI0kE,2BAA6B,SAASZ,GAExC,IAAIoF,EAAMpF,EAAI6E,0BACZ3oE,EAAIipE,4BAA4BnF,GAGlC,OAAO/jE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjEiiB,EAEAnpE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAS8a,EAAIrD,cAAcn/D,YAElCsiE,EAA2BE,EAAIrD,aAAcqD,EAAI/C,uBAGnDhhE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKmY,WAAW,EACrDxyD,OAAOC,aAAa,GAAQk3D,EAAI7C,YAEtC,EAUAjhE,EAAI4pE,cAAgB,SAASC,GAE3B,IAAIC,EAAU,CAEZD,MAAO,CAAC,GA4JV,SAASE,EAAa5E,GAEpB,OADA6E,EAAqB7E,GACd2E,EAAQD,MAAM1E,EAAQvf,OAAS,IACxC,CAEA,SAASokB,EAAqB7E,GAE5B,IAAIA,EAAQvf,KAAM,CAChB,IAAIj8C,EAAK7J,EAAM6J,GAAGwO,KAAKxS,SACvBw/D,EAAQxY,WAAa3sD,EAAI0/D,qBAAqBwB,EAAUiE,GAAUx7D,GAClEw7D,EAAQvf,KAAOj8C,EAAG/D,SAAS2T,OAC7B,CACF,CAGA,GAhKAuwD,EAAQG,UAAY,SAAS3b,GAY3B,OAXWyb,EAAazb,EAAKkV,OAY/B,EAQAsG,EAAQI,eAAiB,SAAS5b,GAQhC,GANmB,kBAATA,IACRA,EAAOxuD,EAAME,IAAIqwD,mBAAmB/B,IAGtC0b,EAAqB1b,EAAK6W,UAEtB2E,EAAQK,eAAe7b,GACzB,GAAGA,EAAK6W,QAAQvf,QAAQkkB,EAAQD,MAAO,CAErC,IAAI95D,EAAM+5D,EAAQD,MAAMvb,EAAK6W,QAAQvf,MACjC9lD,EAAMU,KAAKsP,QAAQC,KACrBA,EAAM,CAACA,IAETA,EAAIlB,KAAKy/C,GACTwb,EAAQD,MAAMvb,EAAK6W,QAAQvf,MAAQ71C,CACrC,MACE+5D,EAAQD,MAAMvb,EAAK6W,QAAQvf,MAAQ0I,CAGzC,EAUAwb,EAAQK,eAAiB,SAAS7b,GAEb,kBAATA,IACRA,EAAOxuD,EAAME,IAAIqwD,mBAAmB/B,IAGtC,IAAIr0C,EAAQ8vD,EAAazb,EAAK6W,SAC9B,IAAIlrD,EACF,OAAO,EAELna,EAAMU,KAAKsP,QAAQmK,KACrBA,EAAQ,CAACA,IAIX,IADA,IAAImwD,EAAOrqE,EAAKqB,MAAMpB,EAAIswD,kBAAkBhC,IAAOhtD,WAC3C8D,EAAI,EAAGA,EAAI6U,EAAMvV,SAAUU,EAAG,CAEpC,GAAGglE,IADQrqE,EAAKqB,MAAMpB,EAAIswD,kBAAkBr2C,EAAM7U,KAAK9D,WAErD,OAAO,CAEX,CACA,OAAO,CACT,EAOAwoE,EAAQO,oBAAsB,WAC5B,IAAIC,EAAW,GAEf,IAAI,IAAI1kB,KAAQkkB,EAAQD,MACtB,GAAGC,EAAQD,MAAMtiE,eAAeq+C,GAAO,CACrC,IAAI3lC,EAAQ6pD,EAAQD,MAAMjkB,GAC1B,GAAI9lD,EAAMU,KAAKsP,QAAQmQ,GAGrB,IAAI,IAAI7a,EAAI,EAAGA,EAAI6a,EAAMvb,SAAUU,EACjCklE,EAASz7D,KAAKoR,EAAM7a,SAHtBklE,EAASz7D,KAAKoR,EAMlB,CAGF,OAAOqqD,CACT,EAWAR,EAAQS,kBAAoB,SAASjc,GACnC,IAAIhE,EAOJ,GAJmB,kBAATgE,IACRA,EAAOxuD,EAAME,IAAIqwD,mBAAmB/B,IAEtC0b,EAAqB1b,EAAK6W,UACtB2E,EAAQK,eAAe7b,GACzB,OAAO,KAGT,IAAIr0C,EAAQ8vD,EAAazb,EAAK6W,SAE9B,IAAIrlE,EAAMU,KAAKsP,QAAQmK,GAGrB,OAFAqwC,EAASwf,EAAQD,MAAMvb,EAAK6W,QAAQvf,aAC7BkkB,EAAQD,MAAMvb,EAAK6W,QAAQvf,MAC3B0E,EAKT,IADA,IAAI8f,EAAOrqE,EAAKqB,MAAMpB,EAAIswD,kBAAkBhC,IAAOhtD,WAC3C8D,EAAI,EAAGA,EAAI6U,EAAMvV,SAAUU,EAAG,CAEjCglE,IADQrqE,EAAKqB,MAAMpB,EAAIswD,kBAAkBr2C,EAAM7U,KAAK9D,aAErDgpD,EAASrwC,EAAM7U,GACf6U,EAAMykC,OAAOt5C,EAAG,GAEpB,CAKA,OAJoB,IAAjB6U,EAAMvV,eACAolE,EAAQD,MAAMvb,EAAK6W,QAAQvf,MAG7B0E,CACT,EAiBGuf,EAED,IAAI,IAAIzkE,EAAI,EAAGA,EAAIykE,EAAMnlE,SAAUU,EAAG,CACpC,IAAIkpD,EAAOub,EAAMzkE,GACjB0kE,EAAQI,eAAe5b,EACzB,CAGF,OAAOwb,CACT,EAKA9pE,EAAIwqE,iBAAmB,CACrBC,gBAAiB,2BACjBC,wBAAyB,mCACzBC,oBAAqB,+BACrBC,oBAAqB,+BACrBC,oBAAqB,+BACrBC,WAAY,yCAgCd9qE,EAAI+qE,uBAAyB,SAASjB,EAASpZ,EAAO/wD,GAqI9B,oBAAZA,IACRA,EAAU,CAACqhE,OAAQrhE,IAErBA,EAAUA,GAAW,CAAC,EAKtB,IAAIkqE,GADJnZ,EAAQA,EAAM3/C,MAAM,IACFA,MAAM,GAEpBi6D,EAAoBrrE,EAAQqrE,kBAIA,qBAAtBA,IACRA,EAAoB,IAAI70D,MAK1B,IAAI80D,GAAQ,EACRrqE,EAAQ,KACRsqE,EAAQ,EACZ,EAAG,CACD,IAAI5c,EAAOoC,EAAM7hC,QACbq3C,EAAS,KACTiF,GAAa,EAmBjB,GAjBGH,IAEEA,EAAoB1c,EAAKuW,SAASC,WAClCkG,EAAoB1c,EAAKuW,SAASE,YACnCnkE,EAAQ,CACNuU,QAAS,+CACTvU,MAAOZ,EAAIwqE,iBAAiBI,oBAC5B9F,UAAWxW,EAAKuW,SAASC,UACzBC,SAAUzW,EAAKuW,SAASE,SAGxBtzC,IAAKu5C,IAME,OAAVpqE,EAAgB,CAUjB,GARc,QADdslE,EAASxV,EAAM,IAAMoZ,EAAQG,UAAU3b,KAGlCA,EAAK2X,SAAS3X,KACf6c,GAAa,EACbjF,EAAS5X,GAIV4X,EAAQ,CAST,IAAIkF,EAAUlF,EACVpmE,EAAMU,KAAKsP,QAAQs7D,KACrBA,EAAU,CAACA,IAKb,IADA,IAAIC,GAAW,GACRA,GAAYD,EAAQ1mE,OAAS,GAAG,CACrCwhE,EAASkF,EAAQv8C,QACjB,IACEw8C,EAAWnF,EAAOlF,OAAO1S,EAC3B,CAAE,MAAMyK,GACN,CAEJ,CAEIsS,IACFzqE,EAAQ,CACNuU,QAAS,oCACTvU,MAAOZ,EAAIwqE,iBAAiBC,iBAGlC,CAEa,OAAV7pE,GAAoBslE,IAAUiF,GAC9BrB,EAAQK,eAAe7b,KAExB1tD,EAAQ,CACNuU,QAAS,8BACTvU,MAAOZ,EAAIwqE,iBAAiBM,YAGlC,CAkBA,GAba,OAAVlqE,GAAkBslE,IAAW5X,EAAK2X,SAASC,KAE5CtlE,EAAQ,CACNuU,QAAS,iCACTvU,MAAOZ,EAAIwqE,iBAAiBC,kBASnB,OAAV7pE,EAMD,IAJA,IAAIu4B,EAAK,CACPmyC,UAAU,EACVC,kBAAkB,GAEZnmE,EAAI,EAAa,OAAVxE,GAAkBwE,EAAIkpD,EAAK0R,WAAWt7D,SAAUU,EAAG,CAChE,IAAIsgE,EAAMpX,EAAK0R,WAAW56D,GACvBsgE,EAAIwC,YAAcxC,EAAI1/D,QAAQmzB,KAC/Bv4B,EAAQ,CACNuU,QACE,qDACFvU,MAAOZ,EAAIwqE,iBAAiBE,yBAGlC,CAKF,GAAa,OAAV9pE,KACCqqE,GAA2B,IAAjBva,EAAMhsD,UAAkBwhE,GAAUiF,IAAe,CAE7D,IAAIK,EAAQld,EAAKmX,aAAa,oBAC1BgG,EAAcnd,EAAKmX,aAAa,YA8BpC,GA7BmB,OAAhBgG,IAGGA,EAAYtJ,aAAyB,OAAVqJ,IAE7B5qE,EAAQ,CACNuU,QACE,8MAKFvU,MAAOZ,EAAIwqE,iBAAiBC,mBAKrB,OAAV7pE,GAA4B,OAAV4qE,GAAmBA,EAAMjJ,KAE5C3hE,EAAQ,CACNuU,QACE,sEAEFvU,MAAOZ,EAAIwqE,iBAAiBC,kBAMnB,OAAV7pE,GAAkC,OAAhB6qE,GACnB,sBAAuBD,EAKTN,EAAQ,EACTM,EAAM/I,oBAEjB7hE,EAAQ,CACNuU,QACE,2DACFvU,MAAOZ,EAAIwqE,iBAAiBC,iBAIpC,CAGA,IAAIiB,EAAiB,OAAV9qE,GAAyBA,EAAMA,MACtC+qE,EAAMhsE,EAAQqhE,OAASrhE,EAAQqhE,OAAO0K,EAAKR,EAAOrB,GAAS6B,EAC/D,IAAW,IAARC,EA6BD,MAxBW,IAARD,IACD9qE,EAAQ,CACNuU,QAAS,4CACTvU,MAAOZ,EAAIwqE,iBAAiBC,mBAK7BkB,GAAe,IAARA,KAEU,kBAARA,GAAqB7rE,EAAMU,KAAKsP,QAAQ67D,GAOzB,kBAARA,IAEf/qE,EAAMA,MAAQ+qE,IARXA,EAAIx2D,UACLvU,EAAMuU,QAAUw2D,EAAIx2D,SAEnBw2D,EAAI/qE,QACLA,EAAMA,MAAQ+qE,EAAI/qE,SASlBA,EA3BNA,EAAQ,KA+BVqqE,GAAQ,IACNC,CACJ,OAAQxa,EAAMhsD,OAAS,GAEvB,OAAO,CACT,C,8BCtqGEjF,EAAOC,QAAU,EAAjBD,K,iBCeF,IAAIK,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAGR,IAAIE,EAAOD,EAAMC,KAGb6rE,EAAKnsE,EAAOC,QAAUI,EAAMitD,MAAQjtD,EAAMitD,OAAS,CAAC,EAqxBxD,SAAS8e,EAAmB/qE,GAE1B,IAAIo+B,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASzoD,EAAK8qE,EAAG7rE,KAAK+rE,uBAAwB5sC,EAASoqB,GAAS,CACvE,IAAI1oD,EAAQ,IAAIL,MAAM,kFAGtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CAEA,MAAO,CACLkD,QAASo7B,EAAQp7B,QAAQ4mD,WAAW,GACpC8Y,OAAQ1jE,EAAME,IAAI0/D,qBAAqBxgC,EAAQskC,QAC/CC,aAAc3jE,EAAMU,KAAKC,aAAay+B,EAAQunC,QAAQltD,QACtDwyD,iBAAkB,CAChBvzD,UAAWzY,EAAK8nD,SAAS3oB,EAAQguB,cACjC8e,UAAW9sC,EAAQiuB,aAAejuB,EAAQiuB,aAAaltC,WAAQuqC,EAC/D2E,QAASjwB,EAAQ+sC,QAGvB,CASA,SAASC,EAAiBprE,GACxB,OAAOf,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAa3nD,EAAIgD,SAASxC,YAEjCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DnnD,EAAME,IAAI0pE,wBAAwB,CAAC/c,WAAY7rD,EAAI0iE,SAEnDzjE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDznD,EAAMU,KAAKsX,WAAWhX,EAAI2iE,iBAG9B1jE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASloD,EAAIirE,iBAAiBvzD,WAAWlX,YAEhDvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,MAG3DlpD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EACvDvmD,EAAIirE,iBAAiB5c,UAE3B,CAwBA,SAASgd,EAAkBC,GAEzB,IADA,IAAIT,EAAM,GACFvmE,EAAI,EAAGA,EAAIgnE,EAAW1nE,SAAUU,EACtCumE,EAAI98D,KAAKq9D,EAAiBE,EAAWhnE,KAEvC,OAAOumE,CACT,CA6CA,SAASU,EAAcvrE,GAErB,IAAIyC,EAAOxD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAErElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAa3nD,EAAIgD,SAASxC,YAEjCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DnnD,EAAME,IAAI0pE,wBAAwB,CAAC/c,WAAY7rD,EAAI0iE,SAEnDzjE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDznD,EAAMU,KAAKsX,WAAWhX,EAAI2iE,iBAG9B1jE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASloD,EAAIwrE,iBAAiBhrE,YAErCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,QAwB7D,GAnBGnoD,EAAIyrE,6BAELhpE,EAAK0c,MAAMpR,KAAK/N,EAAIyrE,6BAItBhpE,EAAK0c,MAAMpR,KAAK9O,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1ElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASloD,EAAI0rE,oBAAoBlrE,YAExCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,OAI3D1lD,EAAK0c,MAAMpR,KAAK9O,EAAK4F,OACnB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAAOvmD,EAAImgE,YAGvDngE,EAAI2rE,0BAA0B/nE,OAAS,EAAG,CAG3C,IADA,IAAIgoE,EAAY3sE,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,IAC1D1mD,EAAI,EAAGA,EAAItE,EAAI2rE,0BAA0B/nE,SAAUU,EAAG,CAC5D,IAAIwuD,EAAO9yD,EAAI2rE,0BAA0BrnE,GACzCsnE,EAAUje,OAAO5/C,KAAK89D,EAAiB/Y,GACzC,CACArwD,EAAK0c,MAAMpR,KAAK69D,EAClB,CAEA,OAAOnpE,CACT,CAuCA,SAASopE,EAAiB/Y,GACxB,IAAI3zC,EAGJ,GAAG2zC,EAAKtzD,OAASR,EAAME,IAAImlD,KAAK8H,YAC9BhtC,EAAQlgB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EACvDpnD,EAAKipD,SAAS4K,EAAK3zC,OAAO3e,iBACvB,GAAGsyD,EAAKtzD,OAASR,EAAME,IAAImlD,KAAKynB,cACrC3sD,EAAQlgB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAC/DuM,EAAK3zC,MAAM9T,cACR,GAAGynD,EAAKtzD,OAASR,EAAME,IAAImlD,KAAK0nB,YAAa,CASlD,IAAI1D,EAAa,IAAIhzD,KAAK,wBACtBizD,EAAa,IAAIjzD,KAAK,wBACtB4hB,EAAO67B,EAAK3zC,MAChB,GAAmB,kBAAT8X,EAAmB,CAE3B,IAAI7hB,EAAYC,KAAKgiD,MAAMpgC,GAKzBA,EAJE7b,MAAMhG,GAEgB,KAAhB6hB,EAAKrzB,OAEN3E,EAAKknE,cAAclvC,GAGnBh4B,EAAKonE,sBAAsBpvC,GAN3B,IAAI5hB,KAAKD,EAQpB,CAGE+J,EADC8X,GAAQoxC,GAAcpxC,EAAOqxC,EACtBrpE,EAAK4F,OACX5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiY,SAAS,EACzCl/D,EAAKupE,cAAcvxC,IAEbh4B,EAAK4F,OACX5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKkY,iBAAiB,EACjDn/D,EAAKwpE,sBAAsBxxC,GAEjC,CAMA,OAAOh4B,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAS4K,EAAKtzD,MAAMgB,YAC3BvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EAAM,CAErDhsC,KAGN,CAmDA,SAAS6sD,EAAU3sE,EAAKW,EAAK2sD,GAC3B,IAAIvuB,EAAU,CAAC,EAEf,IAAIn/B,EAAKwpD,SAASzoD,EAAK2sD,EAAWvuB,EADrB,IACuC,CAClD,IAAIt+B,EAAQ,IAAIL,MAAM,+EAGtB,MADAK,EAAM0oD,OAAS1oD,EACTA,CACR,CAIA,GADkBb,EAAK8nD,SAAS3oB,EAAQ+tB,eACrBntD,EAAME,IAAImlD,KAAKj4C,KAChC,MAAM,IAAI3M,MAAM,wEAIlB,GAAG2+B,EAAQ6sC,iBAAkB,CAC3B,IAAI5c,EAAU,GACd,GAAGrvD,EAAMU,KAAKsP,QAAQovB,EAAQ6sC,kBAC5B,IAAI,IAAI3mE,EAAI,EAAGA,EAAI85B,EAAQ6sC,iBAAiBrnE,SAAUU,EAAG,CACvD,GAAG85B,EAAQ6sC,iBAAiB3mE,GAAG9E,OAASP,EAAKinD,KAAKK,YAChD,MAAM,IAAI9mD,MAAM,mGAGlB4uD,GAAWjwB,EAAQ6sC,iBAAiB3mE,GAAG6a,KACzC,MAEAkvC,EAAUjwB,EAAQ6sC,iBAEpB5rE,EAAI4rE,iBAAmB,CACrBvzD,UAAWzY,EAAK8nD,SAAS3oB,EAAQguB,cACjC8e,UAAWlsE,EAAMU,KAAKC,aAAay+B,EAAQiuB,aAAaltC,OACxDkvC,QAASrvD,EAAMU,KAAKC,aAAa0uD,GAErC,CAEA,GAAGjwB,EAAQiwB,QAAS,CACdA,EAAU,GACd,GAAGrvD,EAAMU,KAAKsP,QAAQovB,EAAQiwB,SAC5B,IAAQ/pD,EAAI,EAAGA,EAAI85B,EAAQiwB,QAAQzqD,SAAUU,EAAG,CAC9C,GAAG85B,EAAQiwB,QAAQ/pD,GAAG9E,OAASP,EAAKinD,KAAKK,YACvC,MAAM,IAAI9mD,MAAM,yFAGlB4uD,GAAWjwB,EAAQiwB,QAAQ/pD,GAAG6a,KAChC,MAEAkvC,EAAUjwB,EAAQiwB,QAEpBhvD,EAAIgvD,QAAUrvD,EAAMU,KAAKC,aAAa0uD,EACxC,CAKA,OAHAhvD,EAAI2D,QAAUo7B,EAAQp7B,QAAQ4mD,WAAW,GACzCvqD,EAAI4sE,WAAa7tC,EAEVA,CACT,CAYA,SAAS8tC,EAAgB7sE,GACvB,QAAgCqqD,IAA7BrqD,EAAI4rE,iBAAiB7qE,IACtB,MAAM,IAAIX,MAAM,gCAGlB,QAAmBiqD,IAAhBrqD,EAAIgvD,QAAuB,CAC5B,IAAI8d,EAEJ,OAAO9sE,EAAI4rE,iBAAiBvzD,WAC1B,KAAK1Y,EAAME,IAAImlD,KAAK,cACpB,KAAKrlD,EAAME,IAAImlD,KAAK,cACpB,KAAKrlD,EAAME,IAAImlD,KAAK,cAClB8nB,EAAOntE,EAAMsG,IAAIuJ,uBAAuBxP,EAAI4rE,iBAAiB7qE,KAC7D,MAEF,KAAKpB,EAAME,IAAImlD,KAAa,OAC5B,KAAKrlD,EAAME,IAAImlD,KAAK,gBAClB8nB,EAAOntE,EAAM6iD,IAAIhzC,uBAAuBxP,EAAI4rE,iBAAiB7qE,KAC7D,MAEF,QACE,MAAM,IAAIX,MAAM,qCACdJ,EAAI4rE,iBAAiBvzD,WAK3B,GAHAy0D,EAAK7oE,MAAMjE,EAAI4rE,iBAAiBC,WAChCiB,EAAK1oE,OAAOpE,EAAI4rE,iBAAiB5c,UAE7B8d,EAAKzoE,SACP,MAAM,IAAIjE,MAAM,gCAGlBJ,EAAIgvD,QAAU8d,EAAK3oE,MACrB,CACF,CAjsCAsnE,EAAGsB,eAAiB,SAAShtE,GAC3B,IAAIC,EAAML,EAAMI,IAAIE,OAAOF,GAAK,GAEhC,GAAgB,UAAbC,EAAIG,KAAkB,CACvB,IAAIM,EAAQ,IAAIL,MAAM,+EAGtB,MADAK,EAAMC,WAAaV,EAAIG,KACjBM,CACR,CACA,GAAGT,EAAIE,UAAkC,cAAtBF,EAAIE,SAASC,KAC9B,MAAM,IAAIC,MAAM,gEAIlB,IAAIO,EAAMf,EAAKgB,QAAQZ,EAAIO,MAE3B,OAAOkrE,EAAGuB,gBAAgBrsE,EAC5B,EAUA8qE,EAAGwB,aAAe,SAASjtE,EAAKgB,GAE9B,IAAIksE,EAAS,CACX/sE,KAAM,QACNI,KAAMX,EAAKqB,MAAMjB,EAAImtE,UAAUhsE,YAEjC,OAAOxB,EAAMI,IAAIqB,OAAO8rE,EAAQ,CAAClsE,QAASA,GAC5C,EASAyqE,EAAGuB,gBAAkB,SAASrsE,GAE5B,IAAIo+B,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASzoD,EAAK8qE,EAAG7rE,KAAK8rD,qBAAsB3sB,EAASoqB,GAAS,CACrE,IAAI1oD,EAAQ,IAAIL,MAAM,0EAGtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CAEA,IACIT,EADA8sD,EAAcltD,EAAK8nD,SAAS3oB,EAAQ+tB,aAGxC,OAAOA,GACL,KAAKntD,EAAME,IAAImlD,KAAKooB,cAClBptE,EAAMyrE,EAAG4B,sBACT,MAEF,KAAK1tE,EAAME,IAAImlD,KAAKmD,cAClBnoD,EAAMyrE,EAAG6B,sBACT,MAEF,KAAK3tE,EAAME,IAAImlD,KAAKuoB,WAClBvtE,EAAMyrE,EAAG+B,mBACT,MAEF,QACE,MAAM,IAAIptE,MAAM,oDACd0sD,EAAc,4BAIpB,OADA9sD,EAAIytE,SAAS1uC,EAAQiwB,QAAQlvC,MAAM,IAC5B9f,CACT,EAEAyrE,EAAG+B,iBAAmB,WACpB,IAAIxtE,EAAM,KA2RV,OA1RAA,EAAM,CACJG,KAAMR,EAAME,IAAImlD,KAAKuoB,WACrB5pE,QAAS,EACT+pE,aAAc,GACdC,KAAM,GAENC,QAAS,GAETC,2BAA4B,GAC5Ble,YAAa,KACbme,YAAa,GAEbL,SAAU,SAAS9sE,GASjB,GAPAgsE,EAAU3sE,EAAKW,EAAK8qE,EAAG7rE,KAAKmuE,qBAC5B/tE,EAAI0tE,aAAe,GACnB1tE,EAAI2tE,KAAO,GACX3tE,EAAI6tE,2BAA6B,GACjC7tE,EAAI2vD,YAAc,KAClB3vD,EAAI8tE,YAAc,GAEf9tE,EAAI4sE,WAAWc,aAEhB,IADA,IAAIhE,EAAQ1pE,EAAI4sE,WAAWc,aAAa5tD,MAChC7a,EAAI,EAAGA,EAAIykE,EAAMnlE,SAAUU,EACjCjF,EAAI0tE,aAAah/D,KAAK/O,EAAME,IAAIuuD,oBAAoBsb,EAAMzkE,IAKhE,EAEAkoE,OAAQ,WAEFntE,EAAI2vD,aACN3vD,EAAIwlE,OAIN,IADA,IAAIkE,EAAQ,GACJzkE,EAAI,EAAGA,EAAIjF,EAAI0tE,aAAanpE,SAAUU,EAC5CykE,EAAMh7D,KAAK/O,EAAME,IAAIswD,kBAAkBnwD,EAAI0tE,aAAazoE,KAG1D,IAAI0oE,EAAO,GAIPJ,EAAa3tE,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CACjE/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAatoD,EAAI2D,SAASxC,YAEjCvB,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EACrC9rD,EAAI6tE,4BAEN7tE,EAAI2vD,gBAmBR,OAhBG+Z,EAAMnlE,OAAS,GAEhBgpE,EAAWztD,MAAM,GAAGA,MAAMpR,KACxB9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM+d,IAEnDiE,EAAKppE,OAAS,GAEfgpE,EAAWztD,MAAM,GAAGA,MAAMpR,KACxB9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAMgiB,IAGtDJ,EAAWztD,MAAM,GAAGA,MAAMpR,KACxB9O,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EAC/C9rD,EAAI8tE,cAGDluE,EAAK4F,OACV5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE9ClnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAS7oD,EAAIG,MAAMgB,YAE1BosE,GAEN,EA0CAS,UAAW,SAASC,GAClB,IAAI5K,EAAS4K,EAAO5K,OAChBC,EAAe2K,EAAO3K,aAC1B,GAAG2K,EAAOxN,YAAa,CACrB,IAAItS,EAAO8f,EAAOxN,YACC,kBAATtS,IACRA,EAAOxuD,EAAME,IAAIqwD,mBAAmB/B,IAEtCkV,EAASlV,EAAKkV,OAAO7W,WACrB8W,EAAenV,EAAKmV,YACtB,CACA,IAAIviE,EAAMktE,EAAOltE,IACjB,IAAIA,EACF,MAAM,IAAIX,MACR,0DAEc,kBAARW,IACRA,EAAMpB,EAAME,IAAIW,kBAAkBO,IAIpC,IAAIorE,EAAkB8B,EAAO9B,iBAAmBxsE,EAAME,IAAImlD,KAAKhtC,KAC/D,OAAOm0D,GACP,KAAKxsE,EAAME,IAAImlD,KAAKhtC,KACpB,KAAKrY,EAAME,IAAImlD,KAAKhD,OACpB,KAAKriD,EAAME,IAAImlD,KAAKmK,OACpB,KAAKxvD,EAAME,IAAImlD,KAAK+C,OACpB,KAAKpoD,EAAME,IAAImlD,KAAKtrC,IAClB,MACF,QACE,MAAM,IAAItZ,MACR,kEACA+rE,GAKJ,IAAI+B,EAA0BD,EAAOC,yBAA2B,GAChE,GAAGA,EAAwB3pE,OAAS,EAAG,CAGrC,IAFA,IAAIuoD,GAAc,EACd2f,GAAgB,EACZxnE,EAAI,EAAGA,EAAIipE,EAAwB3pE,SAAUU,EAAG,CACtD,IAAIwuD,EAAOya,EAAwBjpE,GACnC,GAAI6nD,GAAe2G,EAAKtzD,OAASR,EAAME,IAAImlD,KAAK8H,aAOhD,GAAI2f,GAAiBhZ,EAAKtzD,OAASR,EAAME,IAAImlD,KAAKynB,oBAEhD,GADAA,GAAgB,EACb3f,EACD,WARF,GADAA,GAAc,EACX2f,EACD,KAWN,CAEA,IAAI3f,IAAgB2f,EAClB,MAAM,IAAIrsE,MAAM,yLAKpB,CAEAJ,EAAI4tE,QAAQl/D,KAAK,CACf3N,IAAKA,EACL4C,QAAS,EACT0/D,OAAQA,EACRC,aAAcA,EACd6I,gBAAiBA,EACjBE,mBAAoB1sE,EAAME,IAAImlD,KAAKohB,cACnCtF,UAAW,KACXoN,wBAAyBA,EACzB5B,0BAA2B,IAE/B,EAOA9G,KAAM,SAAShmE,GAcT,IAAIwvD,GAbRxvD,EAAUA,GAAW,CAAC,EAEI,kBAAhBQ,EAAIgvD,SAA4C,OAApBhvD,EAAI2vD,eAExC3vD,EAAI2vD,YAAc/vD,EAAK4F,OACrB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE9ClnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASlpD,EAAME,IAAImlD,KAAKj4C,MAAM5L,cAItC,YAAanB,IAEXA,EAAIgvD,mBAAmBrvD,EAAMU,KAAK6T,WACnC86C,EAAUhvD,EAAIgvD,QAAQhjD,QACS,kBAAhBhM,EAAIgvD,UACnBA,EAAUrvD,EAAMU,KAAK4xD,WAAWjyD,EAAIgvD,UAGlCxvD,EAAQ2uE,SACVnuE,EAAIouE,gBAAkBxuE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAAO8H,GAEtFhvD,EAAI2vD,YAAY7vC,MAAMpR,KAEpB9O,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChD/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EACvD8H,QAOc,IAAvBhvD,EAAI4tE,QAAQrpE,QA6EnB,SAAwB8pE,GACtB,IAAIrf,EAIFA,EAFEhvD,EAAIouE,gBAEIpuE,EAAIouE,iBAMdpf,EAAUhvD,EAAI2vD,YAAY7vC,MAAM,IAEdA,MAAM,GAG1B,IAAIkvC,EACF,MAAM,IAAI5uD,MACR,+DAIJ,IAAI0sD,EAAcltD,EAAK8nD,SAAS1nD,EAAI2vD,YAAY7vC,MAAM,GAAGA,OAGrD9T,EAAQpM,EAAKqB,MAAM+tD,GAUvB,IAAI,IAAIrH,KANR37C,EAAMuoD,UAEN30D,EAAK0uE,kBAAkBtiE,GACvBA,EAAQA,EAAM7K,WAGCktE,EACbA,EAAI1mB,GAAK1jD,QAAQG,OAAO4H,GAK1B,IADA,IAAI0gE,EAAc,IAAI12D,KACd/Q,EAAI,EAAGA,EAAIjF,EAAI4tE,QAAQrpE,SAAUU,EAAG,CAC1C,IAAIgpE,EAASjuE,EAAI4tE,QAAQ3oE,GAEzB,GAA6C,IAA1CgpE,EAAOC,wBAAwB3pE,QAGhC,GAAGuoD,IAAgBntD,EAAME,IAAImlD,KAAKj4C,KAChC,MAAM,IAAI3M,MACR,qHAGC,CAGL6tE,EAAO7B,4BAA8BxsE,EAAK4F,OACxC5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,IAOxC,IAHA,IAAI4gB,EAAY3sE,EAAK4F,OACnB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EAAM,IAErCrf,EAAK,EAAGA,EAAKwhC,EAAOC,wBAAwB3pE,SAAUkoC,EAAI,CAChE,IAAIgnB,EAAOwa,EAAOC,wBAAwBzhC,GACvCgnB,EAAKtzD,OAASR,EAAME,IAAImlD,KAAKynB,cAE9BhZ,EAAK3zC,MAAQuuD,EAAIJ,EAAO9B,iBAAiB1mE,SACjCguD,EAAKtzD,OAASR,EAAME,IAAImlD,KAAK0nB,cAEjCjZ,EAAK3zC,QACP2zC,EAAK3zC,MAAQ4sD,IAOjBH,EAAUzsD,MAAMpR,KAAK89D,EAAiB/Y,IACtCwa,EAAO7B,4BAA4BtsD,MAAMpR,KAAK89D,EAAiB/Y,GACjE,CAGAznD,EAAQpM,EAAKqB,MAAMsrE,GAAWprE,WAC9B8sE,EAAOzkE,GAAGvF,QAAQG,OAAO4H,EAC3B,CAGAiiE,EAAOnN,UAAYmN,EAAOltE,IAAIykE,KAAKyI,EAAOzkE,GAAI,oBAChD,CAGAxJ,EAAI8tE,YA8eR,SAAwBF,GAEtB,IADA,IAAIpC,EAAM,GACFvmE,EAAI,EAAGA,EAAI2oE,EAAQrpE,SAAUU,EACnCumE,EAAI98D,KAAKw9D,EAAc0B,EAAQ3oE,KAEjC,OAAOumE,CACT,CApfsB+C,CAAevuE,EAAI4tE,QACvC,CAlKIY,CA+BJ,WAGE,IAFA,IAAIH,EAAM,CAAC,EAEHppE,EAAI,EAAGA,EAAIjF,EAAI4tE,QAAQrpE,SAAUU,EAAG,CAC1C,IAAIgpE,EAASjuE,EAAI4tE,QAAQ3oE,IACrB0iD,EAAMsmB,EAAO9B,mBACLkC,IAEVA,EAAI1mB,GAAOhoD,EAAM6J,GAAG7J,EAAME,IAAImlD,KAAK2C,IAAMniD,UAEE,IAA1CyoE,EAAOC,wBAAwB3pE,OAEhC0pE,EAAOzkE,GAAK6kE,EAAI1mB,GAKhBsmB,EAAOzkE,GAAK7J,EAAM6J,GAAG7J,EAAME,IAAImlD,KAAK2C,IAAMniD,QAE9C,CAIA,IAAI,IAAImiD,KADR3nD,EAAI6tE,2BAA6B,GAClBQ,EACbruE,EAAI6tE,2BAA2Bn/D,KAE7B9O,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASlB,GAAKxmD,YAErBvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,OAI/D,OAAOulB,CACT,CAtEcI,GAIZ,EAEA5N,OAAQ,WACN,MAAM,IAAIzgE,MAAM,qDAClB,EAOA2pE,eAAgB,SAAS5b,GAEJ,kBAATA,IACRA,EAAOxuD,EAAME,IAAIqwD,mBAAmB/B,IAEtCnuD,EAAI0tE,aAAah/D,KAAKy/C,EACxB,EAOAugB,6BAA8B,SAASC,GACrC,MAAM,IAAIvuE,MAAM,0CAClB,EAwIJ,EAOAqrE,EAAG6B,oBAAsB,WACvB,IAAIttE,EAAM,KA8BV,OA7BAA,EAAM,CACJG,KAAMR,EAAME,IAAImlD,KAAKmD,cACrBxkD,QAAS,EACTioE,iBAAkB,CAChBvzD,UAAW1Y,EAAME,IAAImlD,KAAK,eAQ5ByoB,SAAU,SAAS9sE,GAEjBgsE,EAAU3sE,EAAKW,EAAK8qE,EAAG7rE,KAAKitD,uBAC9B,EAOAnoD,QAAS,SAAS3D,QACLspD,IAARtpD,IACDf,EAAI4rE,iBAAiB7qE,IAAMA,GAE7B8rE,EAAgB7sE,EAClB,EAGJ,EAOAyrE,EAAG4B,oBAAsB,WACvB,IAAIrtE,EAAM,KAkOV,OAjOAA,EAAM,CACJG,KAAMR,EAAME,IAAImlD,KAAKooB,cACrBzpE,QAAS,EACTsoE,WAAY,GACZL,iBAAkB,CAChBvzD,UAAW1Y,EAAME,IAAImlD,KAAK,eAQ5ByoB,SAAU,SAAS9sE,GAEjB,IAAIo+B,EAAU4tC,EAAU3sE,EAAKW,EAAK8qE,EAAG7rE,KAAKgvE,wBAC1C5uE,EAAIisE,WA2RV,SAA6B4C,GAE3B,IADA,IAAIrD,EAAM,GACFvmE,EAAI,EAAGA,EAAI4pE,EAAMtqE,SAAUU,EACjCumE,EAAI98D,KAAKg9D,EAAmBmD,EAAM5pE,KAEpC,OAAOumE,CACT,CAjSuBsD,CAAoB/vC,EAAQgwC,eAAejvD,MAC9D,EAEAqtD,OAAQ,WAEN,OAAOvtE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAS7oD,EAAIG,MAAMgB,YAE1BvB,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChD/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAatoD,EAAI2D,SAASxC,YAEjCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiF,KAAK,EAC/CkgB,EAAkBhsE,EAAIisE,aAExBrsE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,GA6ejCz8B,EA5eKrqB,EAAI4rE,iBA6ejC,CAELhsE,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASlpD,EAAME,IAAImlD,KAAKj4C,MAAM5L,YAErCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAASx+B,EAAGhS,WAAWlX,YAE7BkpB,EAAGwhD,UAEFjsE,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EAC7C78B,EAAGwhD,UAAU1qE,iBAHfkpD,IAMJzqD,EAAK4F,OAAO5F,EAAK+mD,MAAMgF,iBAAkB,GAAG,EAAM,CAChD/rD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EACvD78B,EAAG2kC,QAAQ7tD,uBApBnB,IAAiCkpB,CAxe7B,EASA2kD,cAAe,SAAS7gB,GAGtB,IAFA,IAAI8gB,EAAQ9gB,EAAKkV,OAAO7W,WAEhBvnD,EAAI,EAAGA,EAAIjF,EAAIisE,WAAW1nE,SAAUU,EAAG,CAC7C,IAAIyhC,EAAI1mC,EAAIisE,WAAWhnE,GACnBiqE,EAAQxoC,EAAE28B,OAEd,GAAG38B,EAAE48B,eAAiBnV,EAAKmV,cAIxB4L,EAAM3qE,SAAW0qE,EAAM1qE,OAA1B,CAKA,IADA,IAAIuV,GAAQ,EACJ1L,EAAI,EAAGA,EAAI6gE,EAAM1qE,SAAU6J,EACjC,GAAG8gE,EAAM9gE,GAAGjO,OAAS8uE,EAAM7gE,GAAGjO,MAC5B+uE,EAAM9gE,GAAG0R,QAAUmvD,EAAM7gE,GAAG0R,MAAO,CACnChG,GAAQ,EACR,KACF,CAGF,GAAGA,EACD,OAAO4sB,CAZT,CAcF,CAEA,OAAO,IACT,EAQAhiC,QAAS,SAASyqE,EAAWC,GAC3B,QAAgC/kB,IAA7BrqD,EAAI4rE,iBAAiB7qE,UAAmCspD,IAAd8kB,QAC/B9kB,IAAZ+kB,EACA,OAAOD,EAAUvD,iBAAiBvzD,WAChC,KAAK1Y,EAAME,IAAImlD,KAAKohB,cACpB,KAAKzmE,EAAME,IAAImlD,KAAKqqB,OAClB,IAAItuE,EAAMquE,EAAQ1qE,QAAQyqE,EAAUvD,iBAAiB5c,SACrDhvD,EAAI4rE,iBAAiB7qE,IAAMpB,EAAMU,KAAKC,aAAaS,GACnD,MAEF,QACE,MAAM,IAAIX,MAAM,sCACL+uE,EAAUvD,iBAAiBvzD,WAI5Cw0D,EAAgB7sE,EAClB,EAOAsvE,aAAc,SAASnhB,GACrBnuD,EAAIisE,WAAWv9D,KAAK,CAClB/K,QAAS,EACT0/D,OAAQlV,EAAKkV,OAAO7W,WACpB8W,aAAcnV,EAAKmV,aACnBsI,iBAAkB,CAIhBvzD,UAAW1Y,EAAME,IAAImlD,KAAKohB,cAC1BrlE,IAAKotD,EAAKxI,YAGhB,EAeA13C,QAAS,SAASlN,EAAKkB,GAErB,QAAoCooD,IAAjCrqD,EAAI4rE,iBAAiB5c,QAAuB,CAI7C,IAAIugB,EAAQhnB,EAAOinB,EACnB,OAJAvtE,EAASA,GAAUjC,EAAI4rE,iBAAiBvzD,UACxCtX,EAAMA,GAAOf,EAAI4rE,iBAAiB7qE,IAG3BkB,GACL,KAAKtC,EAAME,IAAImlD,KAAK,cAClBuqB,EAAS,GACThnB,EAAQ,GACRinB,EAAS7vE,EAAMsG,IAAIqJ,uBACnB,MAEF,KAAK3P,EAAME,IAAImlD,KAAK,cAClBuqB,EAAS,GACThnB,EAAQ,GACRinB,EAAS7vE,EAAMsG,IAAIqJ,uBACnB,MAEF,KAAK3P,EAAME,IAAImlD,KAAK,cAClBuqB,EAAS,GACThnB,EAAQ,GACRinB,EAAS7vE,EAAMsG,IAAIqJ,uBACnB,MAEF,KAAK3P,EAAME,IAAImlD,KAAK,gBAClBuqB,EAAS,GACThnB,EAAQ,EACRinB,EAAS7vE,EAAM6iD,IAAIlzC,uBACnB,MAEF,QACE,MAAM,IAAIlP,MAAM,qCAAuC6B,GAG3D,QAAWooD,IAARtpD,EACDA,EAAMpB,EAAMU,KAAKC,aAAaX,EAAMoE,OAAO5C,SAASouE,SAC/C,GAAGxuE,EAAIwD,UAAYgrE,EACxB,MAAM,IAAInvE,MAAM,uCACLW,EAAIwD,SAAW,oBAAsBgrE,EAAS,KAK3DvvE,EAAI4rE,iBAAiBvzD,UAAYpW,EACjCjC,EAAI4rE,iBAAiB7qE,IAAMA,EAC3Bf,EAAI4rE,iBAAiBC,UAAYlsE,EAAMU,KAAKC,aAC1CX,EAAMoE,OAAO5C,SAASonD,IAExB,IAAIukB,EAAO0C,EAAOzuE,GAMlB,GALA+rE,EAAK7oE,MAAMjE,EAAI4rE,iBAAiBC,UAAU7yD,QAC1C8zD,EAAK1oE,OAAOpE,EAAIgvD,UAIZ8d,EAAKzoE,SACP,MAAM,IAAIjE,MAAM,gCAGlBJ,EAAI4rE,iBAAiB5c,QAAU8d,EAAK3oE,MACtC,CAGA,IAAI,IAAIc,EAAI,EAAGA,EAAIjF,EAAIisE,WAAW1nE,SAAUU,EAAG,CAC7C,IAAIkqE,EAAYnvE,EAAIisE,WAAWhnE,GAG/B,QAA0ColD,IAAvC8kB,EAAUvD,iBAAiB5c,QAA9B,CAIA,GAAOmgB,EAAUvD,iBAAiBvzD,YAC3B1Y,EAAME,IAAImlD,KAAKohB,cAOlB,MAAM,IAAIhmE,MAAM,sCACd+uE,EAAUvD,iBAAiBvzD,WAP7B82D,EAAUvD,iBAAiB5c,QACzBmgB,EAAUvD,iBAAiB7qE,IAAIkN,QAC7BjO,EAAI4rE,iBAAiB7qE,IAAIgM,KANjC,CAaF,CACF,EAGJ,C,iBCjxBA,IAAIpN,EAAQD,EAAQ,IACpBA,EAAQ,MAGR,IAAIK,EAAMT,EAAOC,QAAUI,EAAMI,IAAMJ,EAAMI,KAAO,CAAC,EAqKrD,SAAS0vE,EAAWC,GAQlB,IAPA,IAAItsE,EAAOssE,EAAO7pE,KAAO,KAGrByoD,EAAS,GACTqhB,EAAc,SAAS71D,EAAO81D,GAChC,MAAO,IAAMA,CACf,EACQ3qE,EAAI,EAAGA,EAAIyqE,EAAOphB,OAAO/pD,SAAUU,EACzCqpD,EAAO5/C,KAAKghE,EAAOphB,OAAOrpD,GAAGqX,QAAQ,aAAcqzD,IAErDvsE,GAAQkrD,EAAOv0C,KAAK,KAAO,OAG3B,IAAIxV,EAAS,EACTsrE,GAAa,EACjB,IAAQ5qE,EAAI,EAAGA,EAAI7B,EAAKmB,SAAUU,IAAKV,EACrC,GAAGA,EAAS,KAAqB,IAAfsrE,EAAkB,CAClC,IAAIC,EAAS1sE,EAAKysE,GACJ,MAAXC,KACCD,EACFzsE,EAAOA,EAAKiJ,OAAO,EAAGwjE,GAAa,QAAUzsE,EAAKiJ,OAAOwjE,IAEzDzsE,EAAOA,EAAKiJ,OAAO,EAAGwjE,GACpB,OAASC,EAAS1sE,EAAKiJ,OAAOwjE,EAAY,GAE9CtrE,EAAUU,EAAI4qE,EAAY,EAC1BA,GAAa,IACX5qE,CACJ,KAAsB,MAAZ7B,EAAK6B,IAA0B,OAAZ7B,EAAK6B,IAA2B,MAAZ7B,EAAK6B,KACpD4qE,EAAY5qE,GAIhB,OAAO7B,CACT,CAEA,SAAS2sE,EAAM9b,GACb,OAAOA,EAAI33C,QAAQ,OAAQ,GAC7B,CAjMAvc,EAAIqB,OAAS,SAASpB,EAAKR,GACzBA,EAAUA,GAAW,CAAC,EACtB,IAGIkwE,EAHAtsE,EAAO,cAAgBpD,EAAIG,KAAO,YAuBtC,GAnBGH,EAAIE,WAKLkD,GAAQqsE,EAJRC,EAAS,CACP7pE,KAAM,YACNyoD,OAAQ,CAAC9hD,OAAOxM,EAAIE,SAASyD,SAAU3D,EAAIE,SAASC,SAIrDH,EAAIgwE,gBAEL5sE,GAAQqsE,EADRC,EAAS,CAAC7pE,KAAM,iBAAkByoD,OAAQ,CAACtuD,EAAIgwE,kBAG9ChwE,EAAI8pD,UACL4lB,EAAS,CAAC7pE,KAAM,WAAYyoD,OAAQ,CAACtuD,EAAI8pD,QAAQzxC,YAC9CrY,EAAI8pD,QAAQC,YACb2lB,EAAOphB,OAAO5/C,KAAK1O,EAAI8pD,QAAQC,YAEjC3mD,GAAQqsE,EAAWC,IAGlB1vE,EAAIiwE,QAEL,IAAI,IAAIhrE,EAAI,EAAGA,EAAIjF,EAAIiwE,QAAQ1rE,SAAUU,EACvC7B,GAAQqsE,EAAWzvE,EAAIiwE,QAAQhrE,IAanC,OARGjF,EAAIE,WACLkD,GAAQ,QAIVA,GAAQzD,EAAMU,KAAKqY,SAAS1Y,EAAIO,KAAMf,EAAQwB,SAAW,IAAM,OAE/DoC,GAAQ,YAAcpD,EAAIG,KAAO,WAEnC,EASAJ,EAAIE,OAAS,SAASg0D,GAQpB,IAPA,IAMIn6C,EANA1W,EAAO,GAGP8sE,EAAW,gHACXC,EAAU,uCACVC,EAAQ,QAGVt2D,EAAQo2D,EAASjX,KAAKhF,IADZ,CAQV,IAAI9zD,EAAO2Z,EAAM,GACL,4BAAT3Z,IACDA,EAAO,uBAGT,IAAIH,EAAM,CACRG,KAAMA,EACND,SAAU,KACV8vE,cAAe,KACflmB,QAAS,KACTmmB,QAAS,GACT1vE,KAAMZ,EAAMU,KAAKy2D,SAASh9C,EAAM,KAKlC,GAHA1W,EAAKsL,KAAK1O,GAGN8Z,EAAM,GAAV,CAOA,IAFA,IAAIu2D,EAAQv2D,EAAM,GAAG0B,MAAM40D,GACvB3iC,EAAK,EACH3zB,GAAS2zB,EAAK4iC,EAAM9rE,QAAQ,CAKhC,IAHA,IAAIsyD,EAAOwZ,EAAM5iC,GAAInxB,QAAQ,OAAQ,IAG7B0hC,EAAKvQ,EAAK,EAAGuQ,EAAKqyB,EAAM9rE,SAAUy5C,EAAI,CAC5C,IAAI1yC,EAAO+kE,EAAMryB,GACjB,IAAI,KAAK/hC,KAAK3Q,EAAK,IACjB,MAEFurD,GAAQvrD,EACRmiC,EAAKuQ,CACP,CAIA,GADAlkC,EAAQ+8C,EAAK/8C,MAAMq2D,GACT,CAGR,IAFA,IAAIT,EAAS,CAAC7pE,KAAMiU,EAAM,GAAIw0C,OAAQ,IAClCA,EAASx0C,EAAM,GAAG0B,MAAM,KACpB2yB,EAAK,EAAGA,EAAKmgB,EAAO/pD,SAAU4pC,EACpCuhC,EAAOphB,OAAO5/C,KAAKqhE,EAAMzhB,EAAOngB,KAIlC,GAAInuC,EAAIE,SASD,GAAIF,EAAIgwE,eAAiC,mBAAhBN,EAAO7pE,KAGhC,GAAI7F,EAAI8pD,SAA2B,aAAhB4lB,EAAO7pE,KAQ/B7F,EAAIiwE,QAAQvhE,KAAKghE,OARmC,CAEpD,GAA4B,IAAzBA,EAAOphB,OAAO/pD,OACf,MAAM,IAAInE,MAAM,yFAGlBJ,EAAI8pD,QAAU,CAACzxC,UAAWi2C,EAAO,GAAIvE,WAAYuE,EAAO,IAAM,KAChE,MAREtuD,EAAIgwE,cAAgB1hB,EAAO,IAAM,OAXjB,CAChB,GAAmB,cAAhBohB,EAAO7pE,KACR,MAAM,IAAIzF,MAAM,qFAEX,GAA4B,IAAzBsvE,EAAOphB,OAAO/pD,OACtB,MAAM,IAAInE,MAAM,kFAGlBJ,EAAIE,SAAW,CAACyD,QAAS2qD,EAAO,GAAInuD,KAAMmuD,EAAO,GACnD,CAaF,GAEE7gB,CACJ,CAEA,GAAoB,cAAjBztC,EAAIE,WAA6BF,EAAI8pD,QACtC,MAAM,IAAI1pD,MAAM,sGAzDlB,CA4DF,CAEA,GAAmB,IAAhBgD,EAAKmB,OACN,MAAM,IAAInE,MAAM,kCAGlB,OAAOgD,CACT,C,iBC5DA,IAAIzD,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MAGR,IAAIE,EAAON,EAAOC,QAAUI,EAAMC,KAAOD,EAAMC,MAAQ,CAAC,EAsNxD,SAAS0wE,EAAmBtkE,EAAOukE,EAAWlpE,GAC5C,GAAGA,EAAIkpE,EAAW,CAChB,IAAI9vE,EAAQ,IAAIL,MAAM,+BAItB,MAHAK,EAAM+vE,UAAYxkE,EAAMzH,SACxB9D,EAAM8vE,UAAYA,EAClB9vE,EAAMgwE,UAAYppE,EACZ5G,CACR,CACF,CAzNAb,EAAK+mD,MAAQ,CACXC,UAAkB,EAClB8pB,YAAkB,GAClB/kB,iBAAkB,IAClBglB,QAAkB,KAOpB/wE,EAAKinD,KAAO,CACV+pB,KAAkB,EAClBvO,QAAkB,EAClBjb,QAAkB,EAClB4X,UAAkB,EAClB9X,YAAkB,EAClB4B,KAAkB,EAClB9B,IAAkB,EAClB6pB,MAAkB,EAClBC,SAAkB,EAClBC,KAAkB,EAClBC,WAAiB,GACjBC,SAAiB,GACjBhQ,KAAiB,GACjBiQ,KAAiB,GACjBpqB,SAAiB,GACjBgF,IAAiB,GACjBkV,gBAAiB,GACjB+B,UAAiB,GACjBjE,QAAiB,GACjBC,gBAAiB,GACjB1O,UAAiB,IAgBnBzwD,EAAK4F,OAAS,SAASkhD,EAAUvmD,EAAM4mD,EAAajnC,EAAOtgB,GAQzD,GAAGG,EAAMU,KAAKsP,QAAQmQ,GAAQ,CAE5B,IADA,IAAIlQ,EAAM,GACF3K,EAAI,EAAGA,EAAI6a,EAAMvb,SAAUU,OACjBolD,IAAbvqC,EAAM7a,IACP2K,EAAIlB,KAAKoR,EAAM7a,IAGnB6a,EAAQlQ,CACV,CAEA,IAAIjP,EAAM,CACR+lD,SAAUA,EACVvmD,KAAMA,EACN4mD,YAAaA,EACb2F,SAAU3F,GAAepnD,EAAMU,KAAKsP,QAAQmQ,GAC5CA,MAAOA,GAST,OAPGtgB,GAAW,sBAAuBA,IAEnCmB,EAAIwwE,kBAAoB3xE,EAAQ2xE,kBAGhCxwE,EAAIywE,SAAWxxE,EAAKoZ,KAAKrY,IAEpBA,CACT,EAWAf,EAAKoZ,KAAO,SAASrY,EAAKnB,GACxB,IAAIwZ,EAEJ,GAAGrZ,EAAMU,KAAKsP,QAAQhP,GAAM,CAC1BqY,EAAO,GACP,IAAI,IAAI/T,EAAI,EAAGA,EAAItE,EAAI4D,SAAUU,EAC/B+T,EAAKtK,KAAK9O,EAAKoZ,KAAKrY,EAAIsE,GAAIzF,IAE9B,OAAOwZ,CACT,CAEA,MAAkB,kBAARrY,EAEDA,GAGTqY,EAAO,CACL0tC,SAAU/lD,EAAI+lD,SACdvmD,KAAMQ,EAAIR,KACV4mD,YAAapmD,EAAIomD,YACjB2F,SAAU/rD,EAAI+rD,SACd5sC,MAAOlgB,EAAKoZ,KAAKrY,EAAImf,MAAOtgB,IAE3BA,IAAYA,EAAQ6xE,2BAErBr4D,EAAKm4D,kBAAoBxwE,EAAIwwE,mBAExBn4D,EACT,EAcApZ,EAAK0xE,OAAS,SAASC,EAAMC,EAAMhyE,GACjC,GAAGG,EAAMU,KAAKsP,QAAQ4hE,GAAO,CAC3B,IAAI5xE,EAAMU,KAAKsP,QAAQ6hE,GACrB,OAAO,EAET,GAAGD,EAAKhtE,SAAWitE,EAAKjtE,OACtB,OAAO,EAET,IAAI,IAAIU,EAAI,EAAGA,EAAIssE,EAAKhtE,SAAUU,EAChC,IAAIrF,EAAK0xE,OAAOC,EAAKtsE,GAAIusE,EAAKvsE,IAC5B,OAAO,EAGX,OAAO,CACT,CAEA,UAAUssE,WAAgBC,EACxB,OAAO,EAGT,GAAmB,kBAATD,EACR,OAAOA,IAASC,EAGlB,IAAIC,EAAQF,EAAK7qB,WAAa8qB,EAAK9qB,UACjC6qB,EAAKpxE,OAASqxE,EAAKrxE,MACnBoxE,EAAKxqB,cAAgByqB,EAAKzqB,aAC1BwqB,EAAK7kB,WAAa8kB,EAAK9kB,UACvB9sD,EAAK0xE,OAAOC,EAAKzxD,MAAO0xD,EAAK1xD,OAK/B,OAJGtgB,GAAWA,EAAQkyE,2BACpBD,EAAQA,GAAUF,EAAKJ,oBAAsBK,EAAKL,mBAG7CM,CACT,EAYA7xE,EAAK0uE,kBAAoB,SAASvmE,GAGhC,IAAI05D,EAAK15D,EAAEwsD,UACX,GAAU,MAAPkN,EAeH,OAToB,IAALA,EAOJ15D,EAAEqjD,QAAa,IAALqW,IAAc,GAJxBA,CAOb,EAoIA,SAASkQ,EAAS3lE,EAAOukE,EAAWxF,EAAOvrE,GAEzC,IAAIyE,EAGJqsE,EAAmBtkE,EAAOukE,EAAW,GAGrC,IAAIqB,EAAK5lE,EAAMuoD,UAEfgc,IAGA,IAAI7pB,EAAiB,IAALkrB,EAGZzxE,EAAY,GAALyxE,EAGX3tE,EAAQ+H,EAAMzH,SACd,IAiBIub,EAEAqxD,EAnBA5sE,EA3HgB,SAASyH,EAAOukE,GAIpC,IAAI9O,EAAKz1D,EAAMuoD,UAEf,GADAgc,IACU,MAAP9O,EAAH,CAKA,IAAIl9D,EAEJ,GADoB,IAALk9D,EAIR,CAGL,IAAIoQ,EAAqB,IAALpQ,EACpB6O,EAAmBtkE,EAAOukE,EAAWsB,GACrCttE,EAASyH,EAAMo/C,OAAOymB,GAAiB,EACzC,MAPEttE,EAASk9D,EASX,GAAGl9D,EAAS,EACV,MAAM,IAAInE,MAAM,oBAAsBmE,GAExC,OAAOA,CAnBP,CAoBF,CA+FeutE,CAAgB9lE,EAAOukE,GAIpC,GAHAA,GAAatsE,EAAQ+H,EAAMzH,cAGb8lD,IAAX9lD,GAAwBA,EAASgsE,EAAW,CAC7C,GAAG/wE,EAAQ2tD,OAAQ,CACjB,IAAI1sD,EAAQ,IAAIL,MAAM,sCAItB,MAHAK,EAAM+vE,UAAYxkE,EAAMzH,SACxB9D,EAAM8vE,UAAYA,EAClB9vE,EAAMgwE,UAAYlsE,EACZ9D,CACR,CAEA8D,EAASgsE,CACX,CAQA,IAAIxpB,EAA+B,MAAV,GAAL6qB,GACpB,GAAG7qB,EAGD,GADAjnC,EAAQ,QACMuqC,IAAX9lD,EAED,OAAQ,CAEN,GADA+rE,EAAmBtkE,EAAOukE,EAAW,GAClCvkE,EAAMA,MAAM,KAAOQ,OAAOC,aAAa,EAAG,GAAI,CAC/CT,EAAM7K,SAAS,GACfovE,GAAa,EACb,KACF,CACAtsE,EAAQ+H,EAAMzH,SACdub,EAAMpR,KAAKijE,EAAS3lE,EAAOukE,EAAWxF,EAAQ,EAAGvrE,IACjD+wE,GAAatsE,EAAQ+H,EAAMzH,QAC7B,MAGA,KAAMA,EAAS,GACbN,EAAQ+H,EAAMzH,SACdub,EAAMpR,KAAKijE,EAAS3lE,EAAOzH,EAAQwmE,EAAQ,EAAGvrE,IAC9C+wE,GAAatsE,EAAQ+H,EAAMzH,SAC3BA,GAAUN,EAAQ+H,EAAMzH,SAc9B,QARa8lD,IAAVvqC,GAAuB4mC,IAAa9mD,EAAK+mD,MAAMC,WAChDzmD,IAASP,EAAKinD,KAAKmY,YACnBmS,EAAoBnlE,EAAMA,MAAMzH,SAMrB8lD,IAAVvqC,GAAuBtgB,EAAQuyE,kBAChCrrB,IAAa9mD,EAAK+mD,MAAMC,WAGvBzmD,IAASP,EAAKinD,KAAKmY,WACpBz6D,EAAS,EAAG,CAEZ,IAAIytE,EAAYhmE,EAAMlK,KAClBmwE,EAAiB1B,EACjB/O,EAAS,EAab,GAZGrhE,IAASP,EAAKinD,KAAKmY,YAOpBsR,EAAmBtkE,EAAOukE,EAAW,GACrC/O,EAASx1D,EAAMuoD,UACfgc,KAGY,IAAX/O,EACD,IAGEv9D,EAAQ+H,EAAMzH,SACd,IAKImoD,EAAWilB,EAAS3lE,EAAOukE,EAAWxF,EAAQ,EALjC,CAEf5d,QAAQ,EACR4kB,kBAAkB,IAGhBG,EAAOjuE,EAAQ+H,EAAMzH,SACzBgsE,GAAa2B,EACV/xE,GAAQP,EAAKinD,KAAKmY,WACnBkT,IAKF,IAAIxmD,EAAKghC,EAAShG,SACfwrB,IAAS3tE,GACTmnB,IAAO9rB,EAAK+mD,MAAMC,WAAal7B,IAAO9rB,EAAK+mD,MAAMgF,mBAClD7rC,EAAQ,CAAC4sC,GAEb,CAAE,MAAMkM,GACR,MAEWvO,IAAVvqC,IAED9T,EAAMlK,KAAOkwE,EACbzB,EAAY0B,EAEhB,CAEA,QAAa5nB,IAAVvqC,EAAqB,CAItB,QAAcuqC,IAAX9lD,EAAsB,CACvB,GAAG/E,EAAQ2tD,OACT,MAAM,IAAI/sD,MAAM,sDAGlBmE,EAASgsE,CACX,CAEA,GAAGpwE,IAASP,EAAKinD,KAAKwJ,UAEpB,IADAvwC,EAAQ,GACFvb,EAAS,EAAGA,GAAU,EAC1B+rE,EAAmBtkE,EAAOukE,EAAW,GACrCzwD,GAAStT,OAAOC,aAAaT,EAAMwoD,YACnC+b,GAAa,OAGfzwD,EAAQ9T,EAAM7K,SAASoD,GACvBgsE,GAAahsE,CAEjB,CAGA,IAAI4tE,OAAoC9nB,IAAtB8mB,EAAkC,KAAO,CACzDA,kBAAmBA,GAIrB,OAAOvxE,EAAK4F,OAAOkhD,EAAUvmD,EAAM4mD,EAAajnC,EAAOqyD,EACzD,CA1NAvyE,EAAKgB,QAAU,SAASoL,EAAOxM,QACd6qD,IAAZ7qD,IACDA,EAAU,CACR2tD,QAAQ,EACRilB,eAAe,EACfL,kBAAkB,IAGA,mBAAZvyE,IACRA,EAAU,CACR2tD,OAAQ3tD,EACR4yE,eAAe,EACfL,kBAAkB,IAGjB,WAAYvyE,IACfA,EAAQ2tD,QAAS,GAEd,kBAAmB3tD,IACtBA,EAAQ4yE,eAAgB,GAErB,qBAAsB5yE,IACzBA,EAAQuyE,kBAAmB,GAIT,kBAAV/lE,IACRA,EAAQrM,EAAMU,KAAKC,aAAa0L,IAGlC,IAAIqmE,EAAYrmE,EAAMzH,SAClBub,EAAQ6xD,EAAS3lE,EAAOA,EAAMzH,SAAU,EAAG/E,GAC/C,GAAGA,EAAQ4yE,eAAoC,IAAnBpmE,EAAMzH,SAAgB,CAChD,IAAI9D,EAAQ,IAAIL,MAAM,kDAGtB,MAFAK,EAAM4xE,UAAYA,EAClB5xE,EAAM8vE,UAAYvkE,EAAMzH,SAClB9D,CACR,CACA,OAAOqf,CACT,EA4LAlgB,EAAKqB,MAAQ,SAASN,GACpB,IAAIqL,EAAQrM,EAAMU,KAAKC,eAGnBsxE,EAAKjxE,EAAI+lD,SAAW/lD,EAAIR,KAGxB2f,EAAQngB,EAAMU,KAAKC,eAGnBgyE,GAAuB,EAQ3B,GAPG,sBAAuB3xE,IACxB2xE,GAAuB,EACpB3xE,EAAIywE,WACLkB,EAAuB1yE,EAAK0xE,OAAO3wE,EAAKA,EAAIywE,YAI7CkB,EACDxyD,EAAMrc,SAAS9C,EAAIwwE,wBACd,GAAGxwE,EAAI+rD,SAAU,CAInB/rD,EAAIomD,YACL6qB,GAAM,GAGN9xD,EAAMvU,QAAQ,GAIhB,IAAI,IAAItG,EAAI,EAAGA,EAAItE,EAAImf,MAAMvb,SAAUU,OACjBolD,IAAjB1pD,EAAImf,MAAM7a,IACX6a,EAAM3Q,UAAUvP,EAAKqB,MAAMN,EAAImf,MAAM7a,IAG3C,MAEE,GAAGtE,EAAIR,OAASP,EAAKinD,KAAKwJ,UACxB,IAAQprD,EAAI,EAAGA,EAAItE,EAAImf,MAAMvb,SAAUU,EACrC6a,EAAMwqC,SAAS3pD,EAAImf,MAAMyqC,WAAWtlD,SAMnCtE,EAAIR,OAASP,EAAKinD,KAAKO,SACxBzmD,EAAImf,MAAMvb,OAAS,IAEW,IAA5B5D,EAAImf,MAAMyqC,WAAW,IACc,KAAV,IAA1B5pD,EAAImf,MAAMyqC,WAAW,KAEO,MAA5B5pD,EAAImf,MAAMyqC,WAAW,IACe,OAAV,IAA1B5pD,EAAImf,MAAMyqC,WAAW,KACtBzqC,EAAMrc,SAAS9C,EAAImf,MAAMzT,OAAO,IAEhCyT,EAAMrc,SAAS9C,EAAImf,OASzB,GAHA9T,EAAMT,QAAQqmE,GAGX9xD,EAAMvb,UAAY,IAGnByH,EAAMT,QAAyB,IAAjBuU,EAAMvb,cACf,CAKL,IAAIO,EAAMgb,EAAMvb,SACZguE,EAAW,GACf,GACEA,GAAY/lE,OAAOC,aAAmB,IAAN3H,GAChCA,KAAc,QACRA,EAAM,GAIdkH,EAAMT,QAA0B,IAAlBgnE,EAAShuE,QAIvB,IAAQU,EAAIstE,EAAShuE,OAAS,EAAGU,GAAK,IAAKA,EACzC+G,EAAMT,QAAQgnE,EAAShoB,WAAWtlD,GAEtC,CAIA,OADA+G,EAAMmD,UAAU2Q,GACT9T,CACT,EAUApM,EAAKipD,SAAW,SAASlB,GAEvB,IAOI3iD,EAAMwtE,EAAY1yD,EAAO/X,EAPzBumD,EAAS3G,EAAInsC,MAAM,KACnBxP,EAAQrM,EAAMU,KAAKC,eAGvB0L,EAAMT,QAAQ,GAAK+jD,SAAShB,EAAO,GAAI,IAAMgB,SAAShB,EAAO,GAAI,KAIjE,IAAI,IAAIrpD,EAAI,EAAGA,EAAIqpD,EAAO/pD,SAAUU,EAAG,CAGrCD,GAAO,EACPwtE,EAAa,GACb1yD,EAAQwvC,SAAShB,EAAOrpD,GAAI,IAC5B,GACE8C,EAAY,IAAR+X,EACJA,KAAkB,EAEd9a,IACF+C,GAAK,KAEPyqE,EAAW9jE,KAAK3G,GAChB/C,GAAO,QACD8a,EAAQ,GAGhB,IAAI,IAAIzY,EAAImrE,EAAWjuE,OAAS,EAAG8C,GAAK,IAAKA,EAC3C2E,EAAMT,QAAQinE,EAAWnrE,GAE7B,CAEA,OAAO2E,CACT,EAWApM,EAAK8nD,SAAW,SAAS17C,GACvB,IAAI27C,EAGgB,kBAAV37C,IACRA,EAAQrM,EAAMU,KAAKC,aAAa0L,IAIlC,IAAIjE,EAAIiE,EAAMuoD,UACd5M,EAAM/8C,KAAKK,MAAMlD,EAAI,IAAM,IAAOA,EAAI,GAKtC,IADA,IAAI+X,EAAQ,EACN9T,EAAMzH,SAAW,GAErBub,IAAiB,EAEV,KAHP/X,EAAIiE,EAAMuoD,WAIRz0C,GAAa,IAAJ/X,GAGT4/C,GAAO,KAAO7nC,EAAQ/X,GACtB+X,EAAQ,GAIZ,OAAO6nC,CACT,EAYA/nD,EAAKknE,cAAgB,SAAS2L,GAsB5B,IAAI76C,EAAO,IAAI5hB,KAGX08D,EAAOpjB,SAASmjB,EAAIpmE,OAAO,EAAG,GAAI,IACtCqmE,EAAQA,GAAQ,GAAM,KAAOA,EAAO,IAAOA,EAC3C,IAAIC,EAAKrjB,SAASmjB,EAAIpmE,OAAO,EAAG,GAAI,IAAM,EACtCumE,EAAKtjB,SAASmjB,EAAIpmE,OAAO,EAAG,GAAI,IAChC27B,EAAKsnB,SAASmjB,EAAIpmE,OAAO,EAAG,GAAI,IAChCwmE,EAAKvjB,SAASmjB,EAAIpmE,OAAO,EAAG,GAAI,IAChCymE,EAAK,EAGT,GAAGL,EAAIluE,OAAS,GAAI,CAElB,IAAI9C,EAAIgxE,EAAI7sD,OAAO,IACfwV,EAAM,GAGD,MAAN35B,GAAmB,MAANA,IAEdqxE,EAAKxjB,SAASmjB,EAAIpmE,OAAO,GAAI,GAAI,IACjC+uB,GAAO,EAEX,CAMA,GAHAxD,EAAKm7C,eAAeL,EAAMC,EAAIC,GAC9Bh7C,EAAKo7C,YAAYhrC,EAAI6qC,EAAIC,EAAI,GAE1B13C,IAGQ,OADT35B,EAAIgxE,EAAI7sD,OAAOwV,KACO,MAAN35B,GAAW,CAEzB,IAII64B,EAAoB,GAJTg1B,SAASmjB,EAAIpmE,OAAO+uB,EAAM,EAAG,GAAI,IACjCk0B,SAASmjB,EAAIpmE,OAAO+uB,EAAM,EAAG,GAAI,IAIhDd,GAAU,IAGD,MAAN74B,EACDm2B,EAAKq7C,SAASr7C,EAAO0C,GAErB1C,EAAKq7C,SAASr7C,EAAO0C,EAEzB,CAGF,OAAO1C,CACT,EASAh4B,EAAKonE,sBAAwB,SAASkM,GAyBpC,IAAIt7C,EAAO,IAAI5hB,KAEXm9D,EAAO7jB,SAAS4jB,EAAQ7mE,OAAO,EAAG,GAAI,IACtCsmE,EAAKrjB,SAAS4jB,EAAQ7mE,OAAO,EAAG,GAAI,IAAM,EAC1CumE,EAAKtjB,SAAS4jB,EAAQ7mE,OAAO,EAAG,GAAI,IACpC27B,EAAKsnB,SAAS4jB,EAAQ7mE,OAAO,EAAG,GAAI,IACpCwmE,EAAKvjB,SAAS4jB,EAAQ7mE,OAAO,GAAI,GAAI,IACrCymE,EAAKxjB,SAAS4jB,EAAQ7mE,OAAO,GAAI,GAAI,IACrC+mE,EAAM,EACN94C,EAAS,EACT+4C,GAAQ,EAE8B,MAAvCH,EAAQttD,OAAOstD,EAAQ3uE,OAAS,KACjC8uE,GAAQ,GAGV,IAAIj4C,EAAM83C,EAAQ3uE,OAAS,EAAG9C,EAAIyxE,EAAQttD,OAAOwV,GACxC,MAAN35B,GAAmB,MAANA,IAMd64B,EAAoB,GAJLg1B,SAAS4jB,EAAQ7mE,OAAO+uB,EAAM,EAAG,GAAI,IACrCk0B,SAAS4jB,EAAQ7mE,OAAO+uB,EAAM,EAAG,GAAI,IAIpDd,GAAU,IAGD,MAAN74B,IACD64B,IAAW,GAGb+4C,GAAQ,GAmBV,MAf0B,MAAvBH,EAAQttD,OAAO,MAChBwtD,EAA2C,IAArCE,WAAWJ,EAAQ7mE,OAAO,IAAK,KAGpCgnE,GACDz7C,EAAKm7C,eAAeI,EAAMR,EAAIC,GAC9Bh7C,EAAKo7C,YAAYhrC,EAAI6qC,EAAIC,EAAIM,GAG7Bx7C,EAAKq7C,SAASr7C,EAAO0C,KAErB1C,EAAK27C,YAAYJ,EAAMR,EAAIC,GAC3Bh7C,EAAK47C,SAASxrC,EAAI6qC,EAAIC,EAAIM,IAGrBx7C,CACT,EAaAh4B,EAAKupE,cAAgB,SAASvxC,GAE5B,GAAmB,kBAATA,EACR,OAAOA,EAGT,IAAIx0B,EAAO,GAGPsS,EAAS,GACbA,EAAOhH,MAAM,GAAKkpB,EAAK67C,kBAAkBpnE,OAAO,IAChDqJ,EAAOhH,KAAK,IAAMkpB,EAAK87C,cAAgB,IACvCh+D,EAAOhH,KAAK,GAAKkpB,EAAK+7C,cACtBj+D,EAAOhH,KAAK,GAAKkpB,EAAKg8C,eACtBl+D,EAAOhH,KAAK,GAAKkpB,EAAKi8C,iBACtBn+D,EAAOhH,KAAK,GAAKkpB,EAAKk8C,iBAGtB,IAAI,IAAI7uE,EAAI,EAAGA,EAAIyQ,EAAOnR,SAAUU,EAC/ByQ,EAAOzQ,GAAGV,OAAS,IACpBnB,GAAQ,KAEVA,GAAQsS,EAAOzQ,GAIjB,OAFA7B,GAAQ,GAGV,EASAxD,EAAKwpE,sBAAwB,SAASxxC,GAEpC,GAAmB,kBAATA,EACR,OAAOA,EAGT,IAAIx0B,EAAO,GAGPsS,EAAS,GACbA,EAAOhH,KAAK,GAAKkpB,EAAK67C,kBACtB/9D,EAAOhH,KAAK,IAAMkpB,EAAK87C,cAAgB,IACvCh+D,EAAOhH,KAAK,GAAKkpB,EAAK+7C,cACtBj+D,EAAOhH,KAAK,GAAKkpB,EAAKg8C,eACtBl+D,EAAOhH,KAAK,GAAKkpB,EAAKi8C,iBACtBn+D,EAAOhH,KAAK,GAAKkpB,EAAKk8C,iBAGtB,IAAI,IAAI7uE,EAAI,EAAGA,EAAIyQ,EAAOnR,SAAUU,EAC/ByQ,EAAOzQ,GAAGV,OAAS,IACpBnB,GAAQ,KAEVA,GAAQsS,EAAOzQ,GAIjB,OAFA7B,GAAQ,GAGV,EAUAxD,EAAK0oD,aAAe,SAAS/7C,GAC3B,IAAInJ,EAAOzD,EAAMU,KAAKC,eACtB,GAAGiM,IAAM,KAAQA,EAAI,IACnB,OAAOnJ,EAAKkxD,aAAa/nD,EAAG,GAE9B,GAAGA,IAAM,OAAUA,EAAI,MACrB,OAAOnJ,EAAKkxD,aAAa/nD,EAAG,IAE9B,GAAGA,IAAM,SAAYA,EAAI,QACvB,OAAOnJ,EAAKkxD,aAAa/nD,EAAG,IAE9B,GAAGA,IAAM,YAAcA,EAAI,WACzB,OAAOnJ,EAAKkxD,aAAa/nD,EAAG,IAE9B,IAAI9L,EAAQ,IAAIL,MAAM,sCAEtB,MADAK,EAAMszE,QAAUxnE,EACV9L,CACR,EAUAb,EAAKqoE,aAAe,SAASj8D,GAEP,kBAAVA,IACRA,EAAQrM,EAAMU,KAAKC,aAAa0L,IAGlC,IAAI3E,EAAqB,EAAjB2E,EAAMzH,SACd,GAAG8C,EAAI,GACL,MAAM,IAAIjH,MAAM,sCAElB,OAAO4L,EAAM4oD,aAAavtD,EAC5B,EAyBAzH,EAAKwpD,SAAW,SAASzoD,EAAKqa,EAAG+jB,EAASoqB,GACxC,IAAI/lD,GAAO,EAGX,GAAIzC,EAAI+lD,WAAa1rC,EAAE0rC,UAAmC,qBAAhB1rC,EAAE0rC,UACzC/lD,EAAIR,OAAS6a,EAAE7a,MAA2B,qBAAZ6a,EAAE7a,KA6DzBgpD,IACLxoD,EAAI+lD,WAAa1rC,EAAE0rC,UACpByC,EAAOz6C,KACL,IAAMsM,EAAEnV,KAAR,yBACyBmV,EAAE0rC,SAAW,WACtC/lD,EAAI+lD,SAAW,KAEhB/lD,EAAIR,OAAS6a,EAAE7a,MAChBgpD,EAAOz6C,KACL,IAAMsM,EAAEnV,KAAR,oBACoBmV,EAAE7a,KAAO,WAAaQ,EAAIR,KAAO,WArEzD,GAAGQ,EAAIomD,cAAgB/rC,EAAE+rC,aACG,qBAAnB/rC,EAAE+rC,YAA8B,CAIvC,GAHA3jD,GAAO,EAGJ4X,EAAE8E,OAASngB,EAAMU,KAAKsP,QAAQqL,EAAE8E,OAEjC,IADA,IAAI1R,EAAI,EACAnJ,EAAI,EAAG7B,GAAQ6B,EAAI+V,EAAE8E,MAAMvb,SAAUU,EAC3C7B,EAAO4X,EAAE8E,MAAM7a,GAAGoiD,WAAY,EAC3B1mD,EAAImf,MAAM1R,MACXhL,EAAOxD,EAAKwpD,SAASzoD,EAAImf,MAAM1R,GAAI4M,EAAE8E,MAAM7a,GAAI85B,EAASoqB,MAEpD/6C,EACM4M,EAAE8E,MAAM7a,GAAGoiD,WACnBjkD,GAAO,KAGPA,GAAQ+lD,GACVA,EAAOz6C,KACL,IAAMsM,EAAEnV,KAAR,gBACgBmV,EAAE0rC,SAAW,YAC7B1rC,EAAE7a,KAAO,4BACT6a,EAAE8E,MAAMvb,OAAS,WACjB5D,EAAImf,MAAMvb,OAAS,KAK3B,GAAGnB,GAAQ27B,EAUT,GATG/jB,EAAE+jB,UACHA,EAAQ/jB,EAAE+jB,SAAWp+B,EAAImf,OAExB9E,EAAEisC,cACHloB,EAAQ/jB,EAAEisC,aAAetmD,GAExBqa,EAAEg5D,0BAA4B,sBAAuBrzE,IACtDo+B,EAAQ/jB,EAAEg5D,0BAA4BrzE,EAAIwwE,mBAEzCn2D,EAAEikD,uBAAyB,sBAAuBt+D,EAEnD,GAAGA,EAAIwwE,kBAAkB5sE,OAAS,EAChCw6B,EAAQ/jB,EAAEikD,uBAAyB,OAC9B,CAGL,GAAc,IADDt+D,EAAIwwE,kBAAkB5mB,WAAW,GAE5C,MAAM,IAAInqD,MACR,6DAEJ2+B,EAAQ/jB,EAAEikD,uBAAyBt+D,EAAIwwE,kBAAkBvgE,MAAM,EACjE,CAGN,MAAUu4C,GACRA,EAAOz6C,KACL,IAAMsM,EAAEnV,KAAR,2BAC2BmV,EAAE+rC,YAAc,WAC3CpmD,EAAIomD,YAAc,KAexB,OAAO3jD,CACT,EAGA,IAAI6wE,EAAiB,qBAWrBr0E,EAAKs0E,YAAc,SAASvzE,EAAKiU,EAAOu/D,GACtC,IAAI/wE,EAAO,GAIX+wE,EAAcA,GAAe,GAD7Bv/D,EAAQA,GAAS,GAIN,IACTxR,GAAQ,MAKV,IADA,IAAIgxE,EAAS,GACLnvE,EAAI,EAAGA,EAAI2P,EAAQu/D,IAAelvE,EACxCmvE,GAAU,IAKZ,OADAhxE,GAAQgxE,EAAS,QACVzzE,EAAI+lD,UACX,KAAK9mD,EAAK+mD,MAAMC,UACdxjD,GAAQ,aACR,MACF,KAAKxD,EAAK+mD,MAAM+pB,YACdttE,GAAQ,eACR,MACF,KAAKxD,EAAK+mD,MAAMgF,iBACdvoD,GAAQ,oBACR,MACF,KAAKxD,EAAK+mD,MAAMgqB,QACdvtE,GAAQ,WAIV,GAAGzC,EAAI+lD,WAAa9mD,EAAK+mD,MAAMC,UAI7B,OAHAxjD,GAAQzC,EAAIR,KAGLQ,EAAIR,MACX,KAAKP,EAAKinD,KAAK+pB,KACbxtE,GAAQ,UACR,MACF,KAAKxD,EAAKinD,KAAKwb,QACbj/D,GAAQ,aACR,MACF,KAAKxD,EAAKinD,KAAKO,QACbhkD,GAAQ,aACR,MACF,KAAKxD,EAAKinD,KAAKmY,UACb57D,GAAQ,gBACR,MACF,KAAKxD,EAAKinD,KAAKK,YACb9jD,GAAQ,kBACR,MACF,KAAKxD,EAAKinD,KAAKiC,KACb1lD,GAAQ,UACR,MACF,KAAKxD,EAAKinD,KAAKG,IACb5jD,GAAQ,uBACR,MACF,KAAKxD,EAAKinD,KAAKgqB,MACbztE,GAAQ,uBACR,MACF,KAAKxD,EAAKinD,KAAKiqB,SACb1tE,GAAQ,6BACR,MACF,KAAKxD,EAAKinD,KAAKkqB,KACb3tE,GAAQ,UACR,MACF,KAAKxD,EAAKinD,KAAKmqB,WACb5tE,GAAQ,gBACR,MACF,KAAKxD,EAAKinD,KAAKoqB,SACb7tE,GAAQ,kBACR,MACF,KAAKxD,EAAKinD,KAAKoa,KACb79D,GAAQ,UACR,MACF,KAAKxD,EAAKinD,KAAKqqB,KACb9tE,GAAQ,gCACR,MACF,KAAKxD,EAAKinD,KAAKC,SACb1jD,GAAQ,cACR,MACF,KAAKxD,EAAKinD,KAAKiF,IACb1oD,GAAQ,SACR,MACF,KAAKxD,EAAKinD,KAAKma,gBACb59D,GAAQ,sBACR,MACF,KAAKxD,EAAKinD,KAAKwtB,UACbjxE,GAAQ,uBACR,MACF,KAAKxD,EAAKinD,KAAKiY,QACb17D,GAAQ,cACR,MACF,KAAKxD,EAAKinD,KAAKkY,gBACb37D,GAAQ,sBACR,MACF,KAAKxD,EAAKinD,KAAKwJ,UACbjtD,GAAQ,qBAIVA,GAAQzC,EAAIR,KAMd,GAHAiD,GAAQ,KACRA,GAAQgxE,EAAS,gBAAkBzzE,EAAIomD,YAAc,KAElDpmD,EAAI+rD,SAAU,CACf,IAAI4nB,EAAY,EACZC,EAAM,GACV,IAAQtvE,EAAI,EAAGA,EAAItE,EAAImf,MAAMvb,SAAUU,OACjBolD,IAAjB1pD,EAAImf,MAAM7a,KACXqvE,GAAa,EACbC,GAAO30E,EAAKs0E,YAAYvzE,EAAImf,MAAM7a,GAAI2P,EAAQ,EAAGu/D,GAC7ClvE,EAAI,EAAKtE,EAAImf,MAAMvb,SACrBgwE,GAAO,MAIbnxE,GAAQgxE,EAAS,eAAiBE,EAAYC,CAChD,KAAO,CAEL,GADAnxE,GAAQgxE,EAAS,UACdzzE,EAAIR,OAASP,EAAKinD,KAAKG,IAAK,CAC7B,IAAIW,EAAM/nD,EAAK8nD,SAAS/mD,EAAImf,OAC5B1c,GAAQukD,EACLhoD,EAAME,KAAOF,EAAME,IAAImlD,MACrB2C,KAAOhoD,EAAME,IAAImlD,OAClB5hD,GAAQ,KAAOzD,EAAME,IAAImlD,KAAK2C,GAAO,KAG3C,CACA,GAAGhnD,EAAIR,OAASP,EAAKinD,KAAKO,QACxB,IACEhkD,GAAQxD,EAAKqoE,aAAatnE,EAAImf,MAChC,CAAE,MAAM84C,GACNx1D,GAAQ,KAAOzD,EAAMU,KAAK0lD,WAAWplD,EAAImf,MAC3C,MACK,GAAGnf,EAAIR,OAASP,EAAKinD,KAAKmY,WAS/B,GAPGr+D,EAAImf,MAAMvb,OAAS,EAEpBnB,GAAQ,KAAOzD,EAAMU,KAAK0lD,WAAWplD,EAAImf,MAAMlP,MAAM,IAErDxN,GAAQ,SAGPzC,EAAImf,MAAMvb,OAAS,EAAG,CACvB,IAAIi9D,EAAS7gE,EAAImf,MAAMyqC,WAAW,GACrB,GAAViX,EACDp+D,GAAQ,wBACAo+D,EAAS,IACjBp+D,GAAQ,KAAOo+D,EAAS,sBAE5B,OACK,GAAG7gE,EAAIR,OAASP,EAAKinD,KAAKK,YAC3B+sB,EAAeh4D,KAAKtb,EAAImf,SAC1B1c,GAAQ,IAAMzC,EAAImf,MAAQ,MAE5B1c,GAAQ,KAAOzD,EAAMU,KAAK0lD,WAAWplD,EAAImf,YACpC,GAAGnf,EAAIR,OAASP,EAAKinD,KAAKoa,KAC/B,IACE79D,GAAQzD,EAAMU,KAAKw0D,WAAWl0D,EAAImf,MACpC,CAAE,MAAM7X,GACN,GAAiB,kBAAdA,EAAE+M,QAIH,MAAM/M,EAHN7E,GACE,KAAOzD,EAAMU,KAAK0lD,WAAWplD,EAAImf,OAAS,mBAIhD,MACQnf,EAAIR,OAASP,EAAKinD,KAAKma,iBAC/BrgE,EAAIR,OAASP,EAAKinD,KAAKwtB,UACvBjxE,GAAQzC,EAAImf,MACJm0D,EAAeh4D,KAAKtb,EAAImf,OAChC1c,GAAQ,KAAOzD,EAAMU,KAAK0lD,WAAWplD,EAAImf,OACZ,IAArBnf,EAAImf,MAAMvb,OAClBnB,GAAQ,SAERA,GAAQzC,EAAImf,KAEhB,CAEA,OAAO1c,CACT,C,iBCl5CA,IAAIzD,EAAQD,EAAQ,IAEpBJ,EAAOC,QAAUI,EAAM6J,GAAK7J,EAAM6J,IAAM,CAAC,EACzC7J,EAAM6J,GAAG2nD,WAAaxxD,EAAM6J,GAAG2nD,YAAc,CAAC,C,iBC8N9C,IAAIxxD,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,KACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAiDR,IAAI80E,EAAW,SAASC,EAAQC,EAAOvrE,EAAM5E,GAC3C,IAAInB,EAAOzD,EAAMU,KAAKC,eAMlBo4D,EAAO+b,EAAOlwE,QAAU,EACxBowE,EAAOjc,GAAuB,EAAhB+b,EAAOlwE,QACrB6xD,EAAKqe,EAAOpoE,OAAO,EAAGsoE,GACtBtiB,EAAKoiB,EAAOpoE,OAAOqsD,EAAKic,GACxBloC,EAAK9sC,EAAMU,KAAKC,eAChBiF,EAAO5F,EAAM4F,KAAKC,SACtB2D,EAAOurE,EAAQvrE,EAIf,IAAIyrE,EAAShqE,KAAKkD,KAAKvJ,EAAS,IAC5BswE,EAAUjqE,KAAKkD,KAAKvJ,EAAS,IAGjCgB,EAAKtB,MAAM,MAAOmyD,GAClB,IAAI0e,EAAWn1E,EAAMU,KAAKC,eAC1BmsC,EAAGhpC,SAAS0F,GACZ,IAAI,IAAIlE,EAAI,EAAGA,EAAI2vE,IAAU3vE,EAE3BM,EAAKtB,MAAM,KAAM,MACjBsB,EAAKnB,OAAOqoC,EAAGtrC,YACfsrC,EAAGt9B,UAAU5J,EAAKE,UAGlBF,EAAKtB,MAAM,KAAM,MACjBsB,EAAKnB,OAAOqoC,EAAGzgC,QAAU7C,GACzB2rE,EAAS3lE,UAAU5J,EAAKE,UAI1BF,EAAKtB,MAAM,OAAQouD,GACnB,IAAI0iB,EAAYp1E,EAAMU,KAAKC,eAC3BmsC,EAAGt7B,QACHs7B,EAAGhpC,SAAS0F,GACZ,IAAQlE,EAAI,EAAGA,EAAI4vE,IAAW5vE,EAE5BM,EAAKtB,MAAM,KAAM,MACjBsB,EAAKnB,OAAOqoC,EAAGtrC,YACfsrC,EAAGt9B,UAAU5J,EAAKE,UAGlBF,EAAKtB,MAAM,KAAM,MACjBsB,EAAKnB,OAAOqoC,EAAGzgC,QAAU7C,GACzB4rE,EAAU5lE,UAAU5J,EAAKE,UAO3B,OAHArC,EAAKK,SAAS9D,EAAMU,KAAK81D,SACvB2e,EAAS3zE,WAAY4zE,EAAU5zE,WAAYoD,IAEtCnB,CACT,EA0DIo0D,EAAU,SAAS/1D,EAAGyB,EAAQC,GAChC,IAAIC,GAAO,EAEX,IACE,IAAI4I,EAAQvK,EAAE+1D,QAAQt0D,EAAOM,SAASrC,YACtC+B,EAAOM,SAAW7D,EAAMU,KAAKC,aAAa0L,GAC1C9I,EAAOqB,OAASyH,EAAMzH,OACtBnB,GAAO,CACT,CAAE,MAAMw1D,GACN,CAGF,OAAOx1D,CACT,EAYIs0D,EAAU,SAASj2D,EAAGyB,EAAQC,GAChC,IAAIC,GAAO,EAEX,IACE,IAAI4I,EAAQvK,EAAEi2D,QAAQx0D,EAAOM,SAASrC,YACtC+B,EAAOM,SAAW7D,EAAMU,KAAKC,aAAa0L,GAC1C9I,EAAOqB,OAASyH,EAAMzH,OACtBnB,GAAO,CACT,CAAE,MAAMw1D,GACN,CAGF,OAAOx1D,CACT,EAkBI4xE,EAAa,SAASjtE,EAAGwqE,GAC3B,IAAIztE,EAAM,EACV,OAAOytE,GACP,KAAK,EACHztE,EAAMiD,EAAEwsD,UACR,MACF,KAAK,EACHzvD,EAAMiD,EAAEysD,WACR,MACF,KAAK,EACH1vD,EAAMiD,EAAE0sD,WACR,MACF,KAAK,EACH3vD,EAAMiD,EAAEgI,WAKV,OAAOpQ,EAAMU,KAAKC,aAAayH,EAAE5G,SAAS2D,GAC5C,EASImwE,EAAc,SAASltE,EAAGwqE,EAAUv3D,GAItCjT,EAAEssD,OAAOr5C,EAAEzW,SAAUguE,GAAY,GACjCxqE,EAAEoH,UAAU6L,EACd,EAKI1Z,EAAM,CAOVA,SAAe,CACbwC,QAAS,CAACoxE,MAAO,EAAGtxE,MAAO,GAC3BM,QAAS,CAACgxE,MAAO,EAAGtxE,MAAO,GAC3BuxE,QAAS,CAACD,MAAO,EAAGtxE,MAAO,KAE7BtC,EAAI8zE,kBAAoB,CACtB9zE,EAAIuC,SAASK,QACb5C,EAAIuC,SAASC,SAEfxC,EAAI+zE,QAAU/zE,EAAI8zE,kBAAkB,GAMpC9zE,EAAIg0E,YAAc,MAMlBh0E,EAAIO,cAAgB,CAClB0gE,OAAQ,EACR5gE,OAAQ,GAQVL,EAAIi0E,aAAe,CACjBC,eAAgB,GAOlBl0E,EAAI0E,oBAAsB,CACxByvE,KAAM,KACNC,IAAK,EACLC,KAAM,EACN1vE,IAAK,GAOP3E,EAAI6E,WAAa,CACfyvE,OAAQ,EACRxvE,MAAO,EACPyvE,KAAM,GAQRv0E,EAAIoF,aAAe,CACjB+uE,KAAM,KACNK,SAAU,EACV7yE,UAAW,EACX8yE,YAAa,EACbC,YAAa,EACbC,YAAa,GAOf30E,EAAI40E,kBAAoB,CACtBT,KAAM,EACNje,QAAS,GAUXl2D,EAAI60E,YAAc,CAChBC,mBAAoB,GACpBC,MAAO,GACPC,UAAW,GACXC,iBAAkB,GAClBC,UAAW,IAabl1E,EAAIm1E,cAAgB,CAClBC,cAAe,EACfC,aAAc,EACdC,aAAc,EACdnW,YAAa,GACboW,oBAAqB,GACrBC,oBAAqB,GACrBC,kBAAmB,GACnBC,mBAAoB,GACpBC,oBAAqB,GACrBC,SAAU,IAwCZ51E,EAAI61E,MAAQ,CAAC,EACb71E,EAAI61E,MAAMC,MAAQ,CAChBzgE,QAAS,EACT0gE,MAAO,GAET/1E,EAAI61E,MAAMG,YAAc,CACtBC,aAAc,EACdC,mBAAoB,GACpBC,eAAgB,GAChBC,kBAAmB,GACnBC,gBAAiB,GACjBC,sBAAuB,GACvBC,kBAAmB,GACnBvN,gBAAiB,GACjBC,wBAAyB,GACzBC,oBAAqB,GACrBC,oBAAqB,GACrBC,oBAAqB,GACrBoN,kBAAmB,GACnBnN,WAAY,GACZoN,cAAe,GACfC,aAAc,GACdC,cAAe,GACfC,mBAAoB,GACpBC,iBAAkB,GAClBC,sBAAuB,GACvBC,eAAgB,GAChBC,cAAe,GACfC,iBAAkB,KAWpBj3E,EAAIk3E,qBAAuB,CACzBC,kBAAmB,EACnBC,mBAAoB,GAMtBp3E,EAAIqE,aAAe,CAAC,EASpBrE,EAAIq3E,eAAiB,SAASC,GAC5B,IAAIx1E,EAAO,KACX,IAAI,IAAIrC,KAAOO,EAAIqE,aAAc,CAC/B,IAAIkzE,EAAKv3E,EAAIqE,aAAa5E,GAC1B,GAAG83E,EAAGjzE,GAAG,KAAOgzE,EAASruB,WAAW,IAClCsuB,EAAGjzE,GAAG,KAAOgzE,EAASruB,WAAW,GAAI,CACrCnnD,EAAOy1E,EACP,KACF,CACF,CACA,OAAOz1E,CACT,EAQA9B,EAAIw3E,iBAAmB,SAASr3E,EAAGyB,IAElBzB,EAAEs3E,MAAQt3E,EAAEG,SAAWN,EAAIO,cAAcF,QAEtDF,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,wDACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYE,qBAI3C,EASAl2E,EAAI43E,mBAAqB,SAASz3E,EAAGyB,EAAQqB,IAGvC9C,EAAE03E,aAAe13E,EAAE23E,WAAa,IAElC93E,EAAIqqC,MAAMlqC,EAAGH,EAAI+3E,YAAY53E,EAAG,CAC7BmT,MAAOtT,EAAI61E,MAAMC,MAAMzgE,QACvBsiE,YAAa33E,EAAI61E,MAAMG,YAAYiB,oBAEtCj3E,EAAIg4E,MAAM73E,IAIZA,EAAEqH,SACJ,EASAxH,EAAIi4E,kBAAoB,SAAS93E,EAAGyB,EAAQqB,GAC1C,IAAIvE,EAAM,KAEN2B,EAAUF,EAAEG,SAAWN,EAAIO,cAAcF,OAG7C,GAAG4C,EAAS,GACV9C,EAAEhB,MAAMgB,EAAG,CACTuT,QAASrT,EACP,kDACA,kDACFq3E,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYQ,yBAGlC,CAEL,IAAI/vE,EAAI7E,EAAOM,SACX+sE,EAAYxoE,EAAExD,SAoBlB,GAnBAvE,EAAM,CACJ2D,QAAS,CACPuxE,MAAOntE,EAAEwsD,UACT3wD,MAAOmE,EAAEwsD,WAEXxwD,OAAQpE,EAAMU,KAAKC,aAAayH,EAAE5G,SAAS,KAC3Cq4E,WAAYxE,EAAWjtE,EAAG,GAC1B83D,WAAY,IAEXl+D,GACD3B,EAAIy5E,aAAe1xE,EAAE5G,SAAS,GAC9BnB,EAAI05E,mBAAqB3xE,EAAEwsD,YAE3Bv0D,EAAI25E,cAAgB3E,EAAWjtE,EAAG,GAClC/H,EAAI45E,oBAAsB5E,EAAWjtE,EAAG,KAI1CwoE,EAAYhsE,GAAUgsE,EAAYxoE,EAAExD,WACrB,EAAG,CAGhB,IADA,IAAI8gE,EAAO2P,EAAWjtE,EAAG,GACnBs9D,EAAK9gE,SAAW,GACpBvE,EAAI6/D,WAAWnxD,KAAK,CAClBvO,KAAM,CAACklE,EAAK9Q,UAAW8Q,EAAK9Q,WAC5BxnD,KAAMioE,EAAW3P,EAAM,KAK3B,IAAI1jE,EACF,IAAI,IAAIsD,EAAI,EAAGA,EAAIjF,EAAI6/D,WAAWt7D,SAAUU,EAAG,CAC7C,IAAIsgE,EAAMvlE,EAAI6/D,WAAW56D,GAGzB,GAAmB,IAAhBsgE,EAAIplE,KAAK,IAA+B,IAAhBolE,EAAIplE,KAAK,GAGlC,IADA,IAAI05E,EAAM7E,EAAWzP,EAAIx4D,KAAM,GACzB8sE,EAAIt1E,SAAW,GAAG,CAMtB,GAAc,IAJDs1E,EAAItlB,UAKf,MAIF9yD,EAAEq4E,QAAQja,WAAWka,YAAYC,eAAetrE,KAC9CsmE,EAAW6E,EAAK,GAAG14E,WACvB,CAEJ,CAEJ,CAGA,GAAGM,EAAEq4E,QAAQn2E,UACR3D,EAAI2D,QAAQuxE,QAAUzzE,EAAEq4E,QAAQn2E,QAAQuxE,OACzCl1E,EAAI2D,QAAQC,QAAUnC,EAAEq4E,QAAQn2E,QAAQC,OACxC,OAAOnC,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,yDACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYa,oBAO3C,GAAGx2E,EAEDF,EAAEq4E,QAAQG,YAAc34E,EAAIq3E,eAAe34E,EAAIy5E,mBAK/C,IADA,IAAI7pE,EAAMjQ,EAAMU,KAAKC,aAAaN,EAAI25E,cAAc3tE,SAC9C4D,EAAIrL,SAAW,IAGnB9C,EAAEq4E,QAAQG,YAAc34E,EAAIq3E,eAAe/oE,EAAIzO,SAAS,IAC3B,OAA1BM,EAAEq4E,QAAQG,eAOjB,GAA6B,OAA1Bx4E,EAAEq4E,QAAQG,YACX,OAAOx4E,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,8BACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYO,mBAErCoC,YAAat6E,EAAMU,KAAK0lD,WAAW/lD,EAAIy5E,gBAMzCh4E,EAAEq4E,QAAQI,kBADTv4E,EAC6B3B,EAAI05E,mBAGJp4E,EAAI40E,kBAAkBT,IAExD,CAEA,OAAOz1E,CACT,EASAsB,EAAI64E,yBAA2B,SAAS14E,EAAGzB,GAQzC,IAAI2B,EAAUF,EAAEG,SAAWN,EAAIO,cAAcF,OACzCy4E,EAAYp6E,EAAI+D,OAAOiI,QACvBquE,EAAU14E,EAASF,EAAEq4E,QAAQp4E,GAAG44E,cAAgBF,EAChDG,EAAU54E,EAASy4E,EAAY94E,EAAIk5E,eAAer5E,WAGtDM,EAAEq4E,QAAQp4E,GAAK,CACbE,OAAQH,EAAEG,OACV64E,cAAen5E,EAAIi0E,aAAaC,eAChCzvE,sBAAuB,KACvBG,YAAa,KACbG,eAAgB,KAChBC,aAAc,KACdC,gBAAiB,KACjBC,iBAAkB,KAClBC,cAAe,KACf1D,WAAY,KACZ4D,eAAgB,KAChB+zE,sBAAuBj5E,EAAEq4E,QAAQI,kBACjCS,kBAAmB,KACnBC,cAAe,KACfN,cAAeD,EACfQ,cAAeN,EAEnB,EA6BAj5E,EAAIw5E,kBAAoB,SAASr5E,EAAGyB,EAAQqB,GAC1C,IAAIvE,EAAMsB,EAAIi4E,kBAAkB93E,EAAGyB,EAAQqB,GAC3C,IAAG9C,EAAEs5E,KAAL,CAKA,KAAG/6E,EAAI2D,QAAQC,OAASnC,EAAEkC,QAAQC,OAGhC,OAAOnC,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,4BACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYa,oBAPvC12E,EAAEkC,QAAQC,MAAQ5D,EAAI2D,QAAQC,MAahCnC,EAAEq4E,QAAQn2E,QAAUlC,EAAEkC,QAGtB,IAAIq3E,EAAYh7E,EAAIw5E,WAAWxtE,QAI5BgvE,EAAUz2E,OAAS,GAAKy2E,IAAcv5E,EAAEq4E,QAAQl0E,IAEjDnE,EAAEw5E,OAASC,EACXz5E,EAAEq4E,QAAQqB,UAAW,EAGrB15E,EAAEq4E,QAAQp4E,GAAGm5E,cAAgB76E,EAAI+D,OAAOiI,UAGxCvK,EAAEw5E,OAASG,EACX35E,EAAEq4E,QAAQqB,UAAW,EAGrB75E,EAAI64E,yBAAyB14E,EAAGzB,IAIlCyB,EAAEq4E,QAAQl0E,GAAKo1E,EAGfv5E,EAAEqH,SA5CF,CA6CF,EAeAxH,EAAI+5E,kBAAoB,SAAS55E,EAAGyB,EAAQqB,GAC1C,IAAIvE,EAAMsB,EAAIi4E,kBAAkB93E,EAAGyB,EAAQqB,GAC3C,IAAG9C,EAAEs5E,KAAL,CAKA,IAAIC,EAAYh7E,EAAIw5E,WAAWxtE,QAG3B8tE,EAAU,KAuBd,GAtBGr4E,EAAE65E,eAEY,QADfxB,EAAUr4E,EAAE65E,aAAaC,WAAWP,IAGlCA,EAAY,IACJlB,EAAQn2E,QAAQuxE,QAAUl1E,EAAI2D,QAAQuxE,OAC9C4E,EAAQn2E,QAAQC,MAAQ5D,EAAI2D,QAAQC,SAEpCk2E,EAAU,KACVkB,EAAY,KAKQ,IAArBA,EAAUz2E,SACXy2E,EAAYr7E,EAAMoE,OAAO5C,SAAS,KAIpCM,EAAEq4E,QAAQl0E,GAAKo1E,EACfv5E,EAAEq4E,QAAQ0B,mBAAqBx7E,EAAI2D,QACnClC,EAAEq4E,QAAQp4E,GAAK,CAAC,EACbo4E,EAEDr4E,EAAEkC,QAAUlC,EAAEq4E,QAAQn2E,QAAUm2E,EAAQn2E,QACxClC,EAAEq4E,QAAQp4E,GAAKo4E,EAAQp4E,OAClB,CAGL,IADA,IAAIiC,EACIsB,EAAI,EAAGA,EAAI3D,EAAI8zE,kBAAkB7wE,WACvCZ,EAAUrC,EAAI8zE,kBAAkBnwE,IACrBrB,OAAS5D,EAAI2D,QAAQC,SAFiBqB,GAMnDxD,EAAEkC,QAAU,CAACuxE,MAAOvxE,EAAQuxE,MAAOtxE,MAAOD,EAAQC,OAClDnC,EAAEq4E,QAAQn2E,QAAUlC,EAAEkC,OACxB,CAGe,OAAZm2E,GAEDr4E,EAAEw5E,OAASQ,EACXh6E,EAAEq4E,QAAQqB,UAAW,EAGrB15E,EAAEq4E,QAAQp4E,GAAG44E,cAAgBt6E,EAAI+D,OAAOiI,UAGxCvK,EAAEw5E,QAA6B,IAAnBx5E,EAAEi6E,aAA0BC,EAAMC,EAC9Cn6E,EAAEq4E,QAAQqB,UAAW,EAGrB75E,EAAI64E,yBAAyB14E,EAAGzB,IAIlCyB,EAAEs3E,MAAO,EAGTz3E,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAIw6E,kBAAkBr6E,MAG3BA,EAAEq4E,QAAQqB,UAEX75E,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYC,mBACtBrpE,KAAMzL,EAAIy6E,4BAIZt6E,EAAED,MAAMknC,QAAUpnC,EAAI06E,sBAAsBv6E,GAG5CA,EAAED,MAAMgH,QAAQ/F,MAAQhB,EAAED,MAAMknC,QAAQjmC,MAGxCnB,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAI26E,eAAex6E,QAI3BH,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAIkjE,kBAAkB/iE,MAG1BA,EAAEs5E,OAEJz5E,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAI46E,wBAAwBz6E,OAId,IAAnBA,EAAEi6E,cAEHp6E,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAI66E,yBAAyB16E,MAKvCH,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAI86E,sBAAsB36E,QAMtCH,EAAIg4E,MAAM73E,GAGVA,EAAEqH,SA7HF,CA8HF,EA2BAxH,EAAI+6E,kBAAoB,SAAS56E,EAAGyB,EAAQqB,GAE1C,GAAGA,EAAS,EACV,OAAO9C,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,kDACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYQ,qBAKzC,IASI3pB,EAAMvuD,EATNmI,EAAI7E,EAAOM,SACXxD,EAAM,CACRs8E,iBAAkBtH,EAAWjtE,EAAG,IAQ9B2hE,EAAQ,GACZ,IACE,KAAM1pE,EAAIs8E,iBAAiB/3E,SAAW,GAEpC4pD,EAAO6mB,EAAWh1E,EAAIs8E,iBAAkB,GACxC18E,EAAOD,EAAMC,KAAKgB,QAAQutD,GAC1BA,EAAOxuD,EAAME,IAAIuuD,oBAAoBxuD,GAAM,GAC3C8pE,EAAMh7D,KAAKy/C,EAEf,CAAE,MAAMyK,GACN,OAAOn3D,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,oCACTunE,MAAO3jB,EACPogB,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYhN,kBAGzC,CAKA,IAAI3oE,EAAUF,EAAEG,SAAWN,EAAIO,cAAcF,QACzCA,IAA6B,IAAnBF,EAAEi6E,cAA2C,IAAjBhS,EAAMnlE,OAYrB,IAAjBmlE,EAAMnlE,OAGd9C,EAAEw5E,OAASt5E,EAAS66E,EAAMZ,GAGvBj6E,EACDF,EAAEq4E,QAAQ2C,kBAAoB/S,EAAM,GAEpCjoE,EAAEq4E,QAAQ4C,kBAAoBhT,EAAM,GAGnCpoE,EAAIspE,uBAAuBnpE,EAAGioE,KAE/BjoE,EAAEw5E,OAASt5E,EAAS66E,EAAMZ,IAxB5Bn6E,EAAEhB,MAAMgB,EAAG,CACTuT,QAASrT,EACP,kCACA,kCACFq3E,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYQ,qBAsBzCr2E,EAAEqH,SACJ,EAsDAxH,EAAIq7E,wBAA0B,SAASl7E,EAAGyB,EAAQqB,GAGhD,GAAGA,EAAS,EACV,OAAO9C,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,iDACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAY/M,2BAMzC9oE,EAAEw5E,OAAS2B,EAGXn7E,EAAEqH,SACJ,EASAxH,EAAIu7E,wBAA0B,SAASp7E,EAAGyB,EAAQqB,GAGhD,GAAGA,EAAS,GACV,OAAO9C,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,iDACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAY/M,2BAKzC,IAAIxiE,EAAI7E,EAAOM,SACXxD,EAAM,CACR88E,sBAAuB9H,EAAWjtE,EAAG,GAAG5G,YAItC+W,EAAa,KACjB,GAAGzW,EAAEs7E,cACH,IACE7kE,EAAazW,EAAEs7E,cAAct7E,EAAGA,EAAEq4E,QAAQ2C,mBAC1CvkE,EAAavY,EAAME,IAAIW,kBAAkB0X,EAC3C,CAAE,MAAM0gD,GACNn3D,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,6BACTunE,MAAO3jB,EACPogB,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYe,iBAGzC,CAGF,GAAkB,OAAfngE,EACD,OAAOzW,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,sBACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYe,kBAKzC,IAEE,IAAI32E,EAAKD,EAAEq4E,QAAQp4E,GACnBA,EAAGi5E,kBAAoBziE,EAAWxT,QAAQ1E,EAAI88E,uBAG9C,IAAIn5E,EAAUlC,EAAEq4E,QAAQ0B,mBACxB,GAAG73E,EAAQuxE,QAAUxzE,EAAGi5E,kBAAkBpwB,WAAW,IACnD5mD,EAAQC,QAAUlC,EAAGi5E,kBAAkBpwB,WAAW,GAElD,MAAM,IAAInqD,MAAM,wCAEpB,CAAE,MAAMw4D,GAKNl3D,EAAGi5E,kBAAoBh7E,EAAMoE,OAAO5C,SAAS,GAC/C,CAKAM,EAAEw5E,OAASQ,EACwB,OAAhCh6E,EAAEq4E,QAAQ4C,oBAGXj7E,EAAEw5E,OAAS+B,GAIbv7E,EAAEqH,SACJ,EA6BAxH,EAAI27E,yBAA2B,SAASx7E,EAAGyB,EAAQqB,GAEjD,GAAGA,EAAS,EACV,OAAO9C,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,iDACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYQ,qBAOzC,IAAI/vE,EAAI7E,EAAOM,SACXxD,EAAM,CACRk9E,kBAAmBlI,EAAWjtE,EAAG,GACjCo1E,wBAAyBnI,EAAWjtE,EAAG,IAIzCtG,EAAEq4E,QAAQsD,mBAAqBp9E,EAG/ByB,EAAEw5E,OAASoC,EAGX57E,EAAEqH,SACJ,EASAxH,EAAIg8E,wBAA0B,SAAS77E,EAAGyB,EAAQqB,GAChD,GAAGA,EAAS,EACV,OAAO9C,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,gDACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYQ,qBAQzC,IAAI/vE,EAAI7E,EAAOM,SACfuE,EAAEjG,MAAQ,EACV,IAAIy7E,EAAWx1E,EAAEiE,QACjBjE,EAAEjG,MAAQ,EAEV,IAAI9B,EAAM,CACR8gE,UAAWkU,EAAWjtE,EAAG,GAAG5G,YAM1B0/D,EAASlhE,EAAMU,KAAKC,eACxBugE,EAAO1xD,UAAU1N,EAAEq4E,QAAQpgE,IAAIjU,UAC/Bo7D,EAAO1xD,UAAU1N,EAAEq4E,QAAQ9hE,KAAKvS,UAChCo7D,EAASA,EAAO1/D,WAEhB,IAKE,IAJWM,EAAEq4E,QAAQ4C,kBAIZ/2B,UAAUkb,OAAOA,EAAQ7gE,EAAI8gE,UAAW,QAC/C,MAAM,IAAI1gE,MAAM,+CAIlBqB,EAAEq4E,QAAQpgE,IAAItV,OAAOm5E,GACrB97E,EAAEq4E,QAAQ9hE,KAAK5T,OAAOm5E,EACxB,CAAE,MAAM3kB,GACN,OAAOn3D,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,sCACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYO,oBAGzC,CAGAp2E,EAAEw5E,OAASQ,EAGXh6E,EAAEqH,SACJ,EAyBAxH,EAAIk8E,sBAAwB,SAAS/7E,EAAGyB,EAAQqB,GAE9C,GAAGA,EAAS,EACV,OAAO9C,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,mDACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYK,mBAKzC,GAA2B,OAAxBl2E,EAAEg7E,kBAA4B,CAE/B,IAAIh8E,EAAQ,CACVuU,QAAS,uDACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYc,wBAMnC5M,EAAM/pE,EAAEo/D,OAAOp/D,EAAGhB,EAAM41E,MAAM4C,YADtB,EAC0C,IACtD,IAAW,IAARzN,EAkBD,OAhBGA,GAAe,IAARA,KAEU,kBAARA,GAAqB7rE,EAAMU,KAAKsP,QAAQ67D,GAOzB,kBAARA,IAEf/qE,EAAM41E,MAAM4C,YAAczN,IARvBA,EAAIx2D,UACLvU,EAAMuU,QAAUw2D,EAAIx2D,SAEnBw2D,EAAI6K,QACL51E,EAAM41E,MAAM4C,YAAczN,EAAI6K,SAS7B50E,EAAEhB,MAAMgB,EAAGhB,EAEtB,CAGoC,OAAjCgB,EAAEq4E,QAAQsD,qBACXl6E,EAAS5B,EAAIu6E,aAAap6E,EAAG,CAC3BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAIkjE,kBAAkB/iE,KAE9BH,EAAIqqC,MAAMlqC,EAAGyB,IAIfA,EAAS5B,EAAIu6E,aAAap6E,EAAG,CAC1BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAIm8E,wBAAwBh8E,KAErCH,EAAIqqC,MAAMlqC,EAAGyB,GAGbzB,EAAEw5E,OAASyC,EAGX,IAAIhyE,EAAW,SAASjK,EAAGq/D,GACW,OAAjCr/D,EAAEq4E,QAAQsD,oBACqB,OAAhC37E,EAAEq4E,QAAQ4C,mBAEVp7E,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAIq8E,wBAAwBl8E,EAAGq/D,MAKzCx/D,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYC,mBACtBrpE,KAAMzL,EAAIy6E,4BAIZt6E,EAAED,MAAMknC,QAAUpnC,EAAI06E,sBAAsBv6E,GAG5CA,EAAED,MAAMgH,QAAQ/F,MAAQhB,EAAED,MAAMknC,QAAQjmC,MAGxCnB,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAI26E,eAAex6E,MAI3BA,EAAEw5E,OAASC,EAGX55E,EAAIg4E,MAAM73E,GAGVA,EAAEqH,SACJ,EAIA,GAAoC,OAAjCrH,EAAEq4E,QAAQsD,oBACqB,OAAhC37E,EAAEq4E,QAAQ4C,kBACV,OAAOhxE,EAASjK,EAAG,MAIrBH,EAAIs8E,mBAAmBn8E,EAAGiK,EAC5B,EAQApK,EAAIu8E,uBAAyB,SAASp8E,EAAGyB,GACvC,GAAiC,IAA9BA,EAAOM,SAAS+wD,UACjB,OAAO9yD,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,6CACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYQ,qBAQzC,IAAIn2E,EAAUF,EAAEG,SAAWN,EAAIO,cAAcF,QACzCF,EAAEq4E,QAAQqB,UAAYx5E,IAAaF,EAAEq4E,QAAQqB,WAAax5E,KAC5DF,EAAED,MAAMknC,QAAUpnC,EAAI06E,sBAAsBv6E,IAI9CA,EAAED,MAAMgH,QAAQ1G,KAAOL,EAAED,MAAMknC,QAAQ5mC,OAKlCL,EAAEq4E,QAAQqB,UAAYx5E,GAAYF,EAAEq4E,QAAQqB,WAAax5E,KAC5DF,EAAED,MAAMknC,QAAU,MAIpBjnC,EAAEw5E,OAASt5E,EAASm8E,EAAMC,EAG1Bt8E,EAAEqH,SACJ,EAyCAxH,EAAI08E,eAAiB,SAASv8E,EAAGyB,EAAQqB,GAIvC,IAAIwD,EAAI7E,EAAOM,SACfuE,EAAEjG,MAAQ,EACV,IAAIy7E,EAAWx1E,EAAEiE,QACjBjE,EAAEjG,MAAQ,EAGV,IAAI8vB,EAAK1uB,EAAOM,SAASrC,YAGzB4G,EAAIpI,EAAMU,KAAKC,gBACb6O,UAAU1N,EAAEq4E,QAAQpgE,IAAIjU,UAC1BsC,EAAEoH,UAAU1N,EAAEq4E,QAAQ9hE,KAAKvS,UAG3B,IAAI9D,EAAUF,EAAEG,SAAWN,EAAIO,cAAcF,OACzC+yE,EAAQ/yE,EAAS,kBAAoB,kBAGrCD,EAAKD,EAAEq4E,QAAQp4E,GAInB,IADAqG,EADUysE,EACF9yE,EAAGk5E,cAAelG,EAAO3sE,EAAE5G,WAFzB,KAGLA,aAAeywB,EAClB,OAAOnwB,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,2CACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYW,iBAMzCx2E,EAAEq4E,QAAQpgE,IAAItV,OAAOm5E,GACrB97E,EAAEq4E,QAAQ9hE,KAAK5T,OAAOm5E,IAGlB97E,EAAEq4E,QAAQqB,UAAYx5E,IAAaF,EAAEq4E,QAAQqB,WAAax5E,KAE5DL,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYC,mBACtBrpE,KAAMzL,EAAIy6E,4BAIZt6E,EAAED,MAAMgH,QAAQ/F,MAAQhB,EAAED,MAAMknC,QAAQjmC,MACxChB,EAAED,MAAMknC,QAAU,KAGlBpnC,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAI26E,eAAex6E,OAK7BA,EAAEw5E,OAASt5E,EAASs8E,EAAMC,EAG1Bz8E,EAAE03E,aAAc,IACd13E,EAAE23E,WAGJ33E,EAAE08E,gBAAkBx8E,EAClBF,EAAEq4E,QAAQ2C,kBAAoBh7E,EAAEq4E,QAAQ4C,kBAG1Cp7E,EAAIg4E,MAAM73E,GAGVA,EAAE28E,aAAc,EAChB38E,EAAE48E,UAAU58E,GAGZA,EAAEqH,SACJ,EAQAxH,EAAIg9E,YAAc,SAAS78E,EAAGyB,GAE5B,IAQIlD,EARA+H,EAAI7E,EAAOM,SACX6yE,EAAQ,CACVzhE,MAAO7M,EAAEwsD,UACT0kB,YAAalxE,EAAEwsD,WAMjB,OAAO8hB,EAAM4C,aACb,KAAK33E,EAAI61E,MAAMG,YAAYC,aACzBv3E,EAAM,qBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYE,mBACzBx3E,EAAM,sBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYG,eACzBz3E,EAAM,kBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYI,kBACzB13E,EAAM,qBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYK,gBACzB33E,EAAM,mBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYM,sBACzB53E,EAAM,wBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYO,kBACzB73E,EAAM,qBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYhN,gBACzBtqE,EAAM,mBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAY/M,wBACzBvqE,EAAM,2BACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAY9M,oBACzBxqE,EAAM,uBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAY7M,oBACzBzqE,EAAM,uBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAY5M,oBACzB1qE,EAAM,uBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYQ,kBACzB93E,EAAM,qBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAY3M,WACzB3qE,EAAM,iCACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYS,cACzB/3E,EAAM,iBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYU,aACzBh4E,EAAM,gBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYW,cACzBj4E,EAAM,iBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYY,mBACzBl4E,EAAM,sBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYa,iBACzBn4E,EAAM,gCACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYc,sBACzBp4E,EAAM,yBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYe,eACzBr4E,EAAM,kBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYgB,cACzBt4E,EAAM,iBACN,MACF,KAAKsB,EAAI61E,MAAMG,YAAYiB,iBACzBv4E,EAAM,+BACN,MACF,QACEA,EAAM,iBAKR,GAAGq2E,EAAM4C,cAAgB33E,EAAI61E,MAAMG,YAAYC,aAC7C,OAAO91E,EAAE88E,QAIX98E,EAAEhB,MAAMgB,EAAG,CACTuT,QAAShV,EACTg5E,MAAM,EAENwF,OAAS/8E,EAAEG,SAAWN,EAAIO,cAAcF,OAAU,SAAW,SAC7D00E,MAAOA,IAIT50E,EAAEqH,SACJ,EAQAxH,EAAIm9E,gBAAkB,SAASh9E,EAAGyB,GAEhC,IAAI6E,EAAI7E,EAAOM,SACXrD,EAAO4H,EAAEwsD,UACThwD,EAASwD,EAAE0sD,WAGf,GAAGlwD,EAASwD,EAAExD,SAQZ,OALA9C,EAAEi9E,WAAax7E,EACfA,EAAOM,SAAW7D,EAAMU,KAAKC,eAC7ByH,EAAEjG,MAAQ,EAGHL,EAAEqH,UAKXrH,EAAEi9E,WAAa,KACf32E,EAAEjG,MAAQ,EAIV,IAAIkK,EAAQjE,EAAEiE,MAAMzH,EAAS,GAG7BwD,EAAEjG,MAAQ,EAGP3B,KAAQw+E,EAAQl9E,EAAEG,QAAQH,EAAEw5E,SAE1Bx5E,EAAEG,SAAWN,EAAIO,cAAc0gE,QAAW9gE,EAAEs3E,MAASt3E,EAAEs5E,OACxDt5E,EAAE03E,aAAc,EAChB13E,EAAEq4E,QAAU,CACVn2E,QAAS,KACTk8D,WAAY,CACVka,YAAa,CACXC,eAAgB,KAGpBC,YAAa,KACbC,kBAAmB,KACnBuC,kBAAmB,KACnBC,kBAAmB,KACnBhjE,IAAK/Z,EAAM6J,GAAGkQ,IAAIlU,SAClBwS,KAAMrY,EAAM6J,GAAGwO,KAAKxS,WASrBrF,IAASmB,EAAIm1E,cAAcC,eAC5Bv2E,IAASmB,EAAIm1E,cAAcO,oBAC3B72E,IAASmB,EAAIm1E,cAAcS,WAC3Bz1E,EAAEq4E,QAAQpgE,IAAItV,OAAO4H,GACrBvK,EAAEq4E,QAAQ9hE,KAAK5T,OAAO4H,IAIxB2yE,EAAQl9E,EAAEG,QAAQH,EAAEw5E,QAAQ96E,GAAMsB,EAAGyB,EAAQqB,IAG7CjD,EAAIw3E,iBAAiBr3E,EAAGyB,EAE5B,EAQA5B,EAAIs9E,sBAAwB,SAASn9E,EAAGyB,GAEtCzB,EAAEsL,KAAKoC,UAAUjM,EAAOM,UACxB/B,EAAEo9E,UAAUp9E,GAGZA,EAAEqH,SACJ,EAQAxH,EAAIw9E,gBAAkB,SAASr9E,EAAGyB,GAEhC,IAAI6E,EAAI7E,EAAOM,SACXrD,EAAO4H,EAAEwsD,UACThwD,EAASwD,EAAEysD,WACXxrB,EAAUjhC,EAAE5G,SAASoD,GAEzB,GAAGpE,IAASmB,EAAIk3E,qBAAqBC,kBAAmB,CAEtD,GAAGh3E,EAAE03E,aAAe50E,EAASykC,EAAQzkC,OAEnC,OAAO9C,EAAEqH,UAGXxH,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYK,UACtBzpE,KAAMzL,EAAIy9E,gBACRz9E,EAAIk3E,qBAAqBE,mBAAoB1vC,MAEjD1nC,EAAIg4E,MAAM73E,EACZ,MAAO,GAAGtB,IAASmB,EAAIk3E,qBAAqBE,mBAAoB,CAE9D,GAAG1vC,IAAYvnC,EAAEu9E,yBAEf,OAAOv9E,EAAEqH,UAIRrH,EAAEw9E,mBACHx9E,EAAEw9E,kBAAkBx9E,EAAG9B,EAAMU,KAAKC,aAAa0oC,GAEnD,CAGAvnC,EAAEqH,SACJ,EAyDA,IACIsyE,EAAM,EACNoB,EAAM,EACNI,EAAM,EACNS,EAAM,EACNnC,EAAM,EACN4C,EAAM,EACNG,EAAM,EACNP,EAAM,EAIN/B,EAAM,EACNC,EAAM,EACNoB,EAAM,EACNvB,EAAM,EACNsC,EAAM,EACNG,EAAM,EAINgB,EAAK59E,EAAIw3E,iBACTqG,EAAK79E,EAAIu8E,uBACTuB,EAAK99E,EAAIg9E,YACTe,EAAK/9E,EAAIm9E,gBACTa,EAAKh+E,EAAIs9E,sBACTW,EAAKj+E,EAAIw9E,gBACTU,EAAU,GACdA,EAAQl+E,EAAIO,cAAcF,QAAU,CAE7B,CAACu9E,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACJ,EAAGC,EAAGF,EAAGA,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGC,EAAGC,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,IAIpBC,EAAQl+E,EAAIO,cAAc0gE,QAAU,CAE7B,CAAC2c,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACJ,EAAGC,EAAGF,EAAGA,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,GACb,CAACL,EAAGE,EAAGC,EAAGC,EAAGC,GACb,CAACL,EAAGE,EAAGC,EAAGH,EAAGK,IAIpB,IAAIE,EAAKn+E,EAAI43E,mBACTwG,EAAKp+E,EAAIw5E,kBACT6E,EAAKr+E,EAAI+6E,kBACTuD,EAAKt+E,EAAIq7E,wBACTkD,EAAKv+E,EAAI27E,yBACT6C,EAAKx+E,EAAIk8E,sBACTuC,EAAKz+E,EAAI08E,eACTW,EAAU,GACdA,EAAQr9E,EAAIO,cAAcF,QAAU,CAE7B,CAACu9E,EAAGA,EAAGQ,EAAGR,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACO,EAAGP,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGS,EAAGC,EAAGC,EAAGC,EAAGZ,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACO,EAAGP,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGU,EAAGC,EAAGC,EAAGZ,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACO,EAAGP,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGW,EAAGC,EAAGZ,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACO,EAAGP,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGY,EAAGZ,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACO,EAAGP,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACO,EAAGP,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGa,GAC7D,CAACN,EAAGP,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACO,EAAGP,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,IAKpE,IAAIc,EAAK1+E,EAAI+5E,kBACT4E,EAAK3+E,EAAIu7E,wBACTqD,EAAK5+E,EAAIg8E,wBACbqB,EAAQr9E,EAAIO,cAAc0gE,QAAU,CAE7B,CAAC2c,EAAGc,EAAGd,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGS,EAAGT,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGe,EAAGf,EAAGA,EAAGA,EAAGA,GAC7D,CAACA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGgB,EAAGhB,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGa,GAC7D,CAACb,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,GAC7D,CAACA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,IA8EpE59E,EAAI6+E,aAAe,SAAS1+E,EAAGC,GAwB7B,IAAI0+E,EAAM5L,EAGNzwE,EAASrC,EAAG44E,cAAgB54E,EAAGm5E,cAG/Bp5E,EAAEq4E,QAAQqB,WAEZz5E,EAAGk5E,cAAgBwF,EACjB1+E,EAAGi5E,kBAAmB,gBAAiB52E,EAAQ,IAAIiI,QACrDtK,EAAGi5E,kBAAoB,MAIzB52E,EAASrC,EAAGm5E,cAAgBn5E,EAAG44E,cAC/B,IAAI/1E,EAAS,EAAI7C,EAAGiF,eAAiB,EAAIjF,EAAG2E,eAGxCg6E,EAAS5+E,EAAEkC,QAAQuxE,QAAU5zE,EAAIuC,SAASC,QAAQoxE,OACpDzzE,EAAEkC,QAAQC,QAAUtC,EAAIuC,SAASC,QAAQF,MACxCy8E,IACD97E,GAAU,EAAI7C,EAAG6E,iBAEnB,IAAI+5E,EAAKF,EAAI1+E,EAAGk5E,cAAe,gBAAiB72E,EAAQQ,GAGpDnB,EAAO,CACTm9E,qBAAsBD,EAAGn/E,SAASO,EAAGiF,gBACrC65E,qBAAsBF,EAAGn/E,SAASO,EAAGiF,gBACrCtE,iBAAkBi+E,EAAGn/E,SAASO,EAAG2E,gBACjCjE,iBAAkBk+E,EAAGn/E,SAASO,EAAG2E,iBASnC,OALGg6E,IACDj9E,EAAKZ,gBAAkB89E,EAAGn/E,SAASO,EAAG6E,iBACtCnD,EAAKb,gBAAkB+9E,EAAGn/E,SAASO,EAAG6E,kBAGjCnD,CACT,EAgCA9B,EAAI06E,sBAAwB,SAASv6E,GACnC,IAAIE,EAAUF,EAAEG,SAAWN,EAAIO,cAAcF,OAEzC8+E,EAAa,WACf,IAAIp7C,EAAO,CAET9hC,eAAgB,CAAC,EAAG,GACpBD,OAAQ,KACRR,UAAW,EACXE,YAAa,KACbjB,YAAa,KACbY,eAAgB,SAASO,GAAS,OAAO,CAAK,EAC9Cw9E,iBAAkB,KAClBC,iBAAkB,SAASz9E,GAAS,OAAO,CAAK,EAChDQ,qBAAsB,WACU,aAA3B2hC,EAAK9hC,eAAe,IACrB8hC,EAAK9hC,eAAe,GAAK,IACvB8hC,EAAK9hC,eAAe,MAEpB8hC,EAAK9hC,eAAe,EAE1B,GAEF,OAAO8hC,CACT,EACI7jC,EAAQ,CACVM,KAAM2+E,IACNh+E,MAAOg+E,KA2DT,GAvDAj/E,EAAMM,KAAKsC,OAAS,SAAS3C,EAAGyB,GAuB9B,OAtBI1B,EAAMM,KAAKa,eAAeO,EAAQ1B,EAAMM,MAYjCN,EAAMM,KAAK6+E,iBAAiBl/E,EAAGyB,EAAQ1B,EAAMM,OACtDL,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,+BACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYM,yBAjBvCn2E,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,uCACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MAIvB4B,YAAa33E,EAAI61E,MAAMG,YAAYG,mBAajCh2E,EAAEs5E,IACZ,EAGAv5E,EAAMiB,MAAM2B,OAAS,SAAS3C,EAAGyB,GAwB/B,OAvBI1B,EAAMiB,MAAMk+E,iBAAiBl/E,EAAGyB,EAAQ1B,EAAMiB,OAWvCjB,EAAMiB,MAAME,eAAeO,EAAQ1B,EAAMiB,QAGlDhB,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,4BACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYe,kBAhBvC52E,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,6BACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYe,mBAejC52E,EAAEs5E,IACZ,EAGGt5E,EAAEq4E,QAAS,CACZ,IAAIp4E,EAAKD,EAAEq4E,QAAQp4E,GAcnB,OAbAD,EAAEq4E,QAAQG,YAAYn0E,uBAAuBpE,GAG7CA,EAAGS,KAAOb,EAAI6+E,aAAa1+E,EAAGC,GAC9BF,EAAMM,KAAKwB,OAAS3B,EAClBD,EAAGS,KAAKq+E,qBAAuB9+E,EAAGS,KAAKo+E,qBACzC/+E,EAAMiB,MAAMa,OAAS3B,EACnBD,EAAGS,KAAKo+E,qBAAuB7+E,EAAGS,KAAKq+E,qBAGzC/+E,EAAEq4E,QAAQG,YAAY14E,oBAAoBC,EAAOC,EAAGC,GAG7CA,EAAGg5E,uBACV,KAAKp5E,EAAI40E,kBAAkBT,KACzB,MACF,KAAKn0E,EAAI40E,kBAAkB1e,QACzBh2D,EAAMM,KAAK6+E,iBAAmBjpB,EAC9Bl2D,EAAMiB,MAAMk+E,iBAAmBnpB,EAC/B,MACF,QACE,MAAM,IAAIp3D,MAAM,sCAEpB,CAEA,OAAOoB,CACT,EAuBAF,EAAIk5E,aAAe,WAEjB,IAAIxyE,EAAI,IAAIgO,KACRy8D,GAAOzqE,EAA4B,IAAxBA,EAAE44E,oBACbx9E,EAAOzD,EAAMU,KAAKC,eAGtB,OAFA8C,EAAK8H,SAASunE,GACdrvE,EAAKK,SAAS9D,EAAMoE,OAAO5C,SAAS,KAC7BiC,CACT,EAYA9B,EAAIu6E,aAAe,SAASp6E,EAAGjC,GAC7B,OAAIA,EAAQuN,KAGC,CACX5M,KAAMX,EAAQW,KACdwD,QAAS,CACPuxE,MAAOzzE,EAAEkC,QAAQuxE,MACjBtxE,MAAOnC,EAAEkC,QAAQC,OAEnBW,OAAQ/E,EAAQuN,KAAKxI,SACrBf,SAAUhE,EAAQuN,MATX,IAYX,EAYAzL,EAAI+3E,YAAc,SAAS53E,EAAG40E,GAC5B,IAAItuE,EAAIpI,EAAMU,KAAKC,eAGnB,OAFAyH,EAAEwD,QAAQ8qE,EAAMzhE,OAChB7M,EAAEwD,QAAQ8qE,EAAM4C,aACT33E,EAAIu6E,aAAap6E,EAAG,CACzBtB,KAAMmB,EAAI60E,YAAYE,MACtBtpE,KAAMhF,GAEV,EAoEAzG,EAAIu/E,kBAAoB,SAASp/E,GAE/BA,EAAEq4E,QAAQ0B,mBAAqB,CAC7BtG,MAAOzzE,EAAEkC,QAAQuxE,MACjBtxE,MAAOnC,EAAEkC,QAAQC,OAKnB,IADA,IAAIk9E,EAAenhF,EAAMU,KAAKC,eACtB2E,EAAI,EAAGA,EAAIxD,EAAEq/E,aAAav8E,SAAUU,EAAG,CAC7C,IAAI4zE,EAAKp3E,EAAEq/E,aAAa77E,GACxB67E,EAAav1E,QAAQstE,EAAGjzE,GAAG,IAC3Bk7E,EAAav1E,QAAQstE,EAAGjzE,GAAG,GAC7B,CACA,IAAIm7E,EAAUD,EAAav8E,SAIvBy8E,EAAqBrhF,EAAMU,KAAKC,eACpC0gF,EAAmBz1E,QAAQjK,EAAI40E,kBAAkBT,MAQjD,IAAIwL,EAAWD,EAAmBz8E,SAI9Bs7D,EAAalgE,EAAMU,KAAKC,eAC5B,GAAGmB,EAAEy/E,YAAa,CAEhB,IAAI3b,EAAM5lE,EAAMU,KAAKC,eACrBilE,EAAIh6D,QAAQ,GACZg6D,EAAIh6D,QAAQ,GAwBZ,IAAI41E,EAAaxhF,EAAMU,KAAKC,eAC5B6gF,EAAW51E,QAAQ,GACnB0pE,EAAYkM,EAAY,EAAGxhF,EAAMU,KAAKC,aAAamB,EAAEy/E,cAGrD,IAAIE,EAASzhF,EAAMU,KAAKC,eACxB20E,EAAYmM,EAAQ,EAAGD,GACvBlM,EAAY1P,EAAK,EAAG6b,GACpBvhB,EAAW1wD,UAAUo2D,EACvB,CACA,IAAI8b,EAAYxhB,EAAWt7D,SACxB88E,EAAY,IAEbA,GAAa,GAMf,IAAIrG,EAAYv5E,EAAEq4E,QAAQl0E,GACtBrB,EACFy2E,EAAUz2E,OAAS,EACnB,EACA,EAAI,GACJ,EAAIw8E,EACJ,EAAIE,EACJI,EAGEj+E,EAAOzD,EAAMU,KAAKC,eAYtB,OAXA8C,EAAKmI,QAAQjK,EAAIm1E,cAAcE,cAC/BvzE,EAAK8wD,SAAS3vD,GACdnB,EAAKmI,QAAQ9J,EAAEkC,QAAQuxE,OACvB9xE,EAAKmI,QAAQ9J,EAAEkC,QAAQC,OACvBR,EAAKK,SAAShC,EAAEq4E,QAAQp4E,GAAG44E,eAC3BrF,EAAY7xE,EAAM,EAAGzD,EAAMU,KAAKC,aAAa06E,IAC7C/F,EAAY7xE,EAAM,EAAG09E,GACrB7L,EAAY7xE,EAAM,EAAG49E,GAClBK,EAAY,GACbpM,EAAY7xE,EAAM,EAAGy8D,GAEhBz8D,CACT,EASA9B,EAAIw6E,kBAAoB,SAASr6E,GAE/B,IAAIu5E,EAAYv5E,EAAEq4E,QAAQl0E,GACtBrB,EACFy2E,EAAUz2E,OAAS,EACnB,EACA,EAAI,GACJ,EACA,EAGEnB,EAAOzD,EAAMU,KAAKC,eAUtB,OATA8C,EAAKmI,QAAQjK,EAAIm1E,cAAcG,cAC/BxzE,EAAK8wD,SAAS3vD,GACdnB,EAAKmI,QAAQ9J,EAAEkC,QAAQuxE,OACvB9xE,EAAKmI,QAAQ9J,EAAEkC,QAAQC,OACvBR,EAAKK,SAAShC,EAAEq4E,QAAQp4E,GAAGm5E,eAC3B5F,EAAY7xE,EAAM,EAAGzD,EAAMU,KAAKC,aAAa06E,IAC7C53E,EAAKmI,QAAQ9J,EAAEq4E,QAAQG,YAAYr0E,GAAG,IACtCxC,EAAKmI,QAAQ9J,EAAEq4E,QAAQG,YAAYr0E,GAAG,IACtCxC,EAAKmI,QAAQ9J,EAAEq4E,QAAQI,mBAChB92E,CACT,EAwBA9B,EAAIkjE,kBAAoB,SAAS/iE,GAI/B,IAGM6/E,EAHF3/E,EAAUF,EAAEG,SAAWN,EAAIO,cAAcF,OACzCwsD,EAAO,KACR1sD,EAAE8/E,iBAGDD,EADC3/E,EACMF,EAAEq4E,QAAQsD,mBAEV37E,EAAEq4E,QAAQja,WAAWka,YAAYC,eAE1C7rB,EAAO1sD,EAAE8/E,eAAe9/E,EAAG6/E,IAI7B,IAAInX,EAAWxqE,EAAMU,KAAKC,eAC1B,GAAY,OAAT6tD,EACD,IAEMxuD,EAAMU,KAAKsP,QAAQw+C,KACrBA,EAAO,CAACA,IAGV,IADA,IAAIvuD,EAAO,KACHqF,EAAI,EAAGA,EAAIkpD,EAAK5pD,SAAUU,EAAG,CACnC,IAAIjF,EAAML,EAAMI,IAAIE,OAAOkuD,EAAKlpD,IAAI,GACpC,GAAgB,gBAAbjF,EAAIG,MACQ,qBAAbH,EAAIG,MACS,wBAAbH,EAAIG,KAAgC,CACpC,IAAIM,EAAQ,IAAIL,MAAM,+HAItB,MADAK,EAAMC,WAAaV,EAAIG,KACjBM,CACR,CACA,GAAGT,EAAIE,UAAkC,cAAtBF,EAAIE,SAASC,KAC9B,MAAM,IAAIC,MAAM,6DAGlB,IAAIohF,EAAM7hF,EAAMU,KAAKC,aAAaN,EAAIO,MAC1B,OAATX,IACDA,EAAOD,EAAMC,KAAKgB,QAAQ4gF,EAAIx1E,SAAS,IAIzC,IAAIy1E,EAAa9hF,EAAMU,KAAKC,eAC5B20E,EAAYwM,EAAY,EAAGD,GAG3BrX,EAASh7D,UAAUsyE,EACrB,CAGAtzB,EAAOxuD,EAAME,IAAIuuD,oBAAoBxuD,GAClC+B,EACDF,EAAEq4E,QAAQ4C,kBAAoBvuB,EAE9B1sD,EAAEq4E,QAAQ2C,kBAAoBtuB,CAElC,CAAE,MAAMyK,GACN,OAAOn3D,EAAEhB,MAAMgB,EAAG,CAChBuT,QAAS,mCACTunE,MAAO3jB,EACPogB,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYhN,kBAGzC,CAIF,IAAI/lE,EAAS,EAAI4lE,EAAS5lE,SAGtBnB,EAAOzD,EAAMU,KAAKC,eAItB,OAHA8C,EAAKmI,QAAQjK,EAAIm1E,cAAchW,aAC/Br9D,EAAK8wD,SAAS3vD,GACd0wE,EAAY7xE,EAAM,EAAG+mE,GACd/mE,CACT,EAmDA9B,EAAIm8E,wBAA0B,SAASh8E,GAErC,IAAIsG,EAAIpI,EAAMU,KAAKC,eAInByH,EAAEwD,QAAQ9J,EAAEq4E,QAAQ0B,mBAAmBtG,OACvCntE,EAAEwD,QAAQ9J,EAAEq4E,QAAQ0B,mBAAmB53E,OAGvCmE,EAAEtE,SAAS9D,EAAMoE,OAAO5C,SAAS,KAGjC,IAAIO,EAAKD,EAAEq4E,QAAQp4E,GACnBA,EAAGi5E,kBAAoB5yE,EAAE5G,WAYzB,IAAIoD,GARJwD,EADUtG,EAAEq4E,QAAQ2C,kBAAkB92B,UAC9B13C,QAAQvM,EAAGi5E,oBAQJp2E,OAAS,EAGpBnB,EAAOzD,EAAMU,KAAKC,eAMtB,OALA8C,EAAKmI,QAAQjK,EAAIm1E,cAAcQ,qBAC/B7zE,EAAK8wD,SAAS3vD,GAEdnB,EAAKknD,SAASviD,EAAExD,QAChBnB,EAAKK,SAASsE,GACP3E,CACT,EASA9B,EAAI46E,wBAA0B,SAASz6E,GAKrC,IAGI2B,EAAOzD,EAAMU,KAAKC,eAKtB,OAAO8C,CACT,EASA9B,EAAIs8E,mBAAqB,SAASn8E,EAAGiK,GAEnC,IAAI3D,EAAIpI,EAAMU,KAAKC,eACnByH,EAAEoH,UAAU1N,EAAEq4E,QAAQpgE,IAAIjU,UAC1BsC,EAAEoH,UAAU1N,EAAEq4E,QAAQ9hE,KAAKvS,UAC3BsC,EAAIA,EAAE5G,WAGNM,EAAEigF,aAAejgF,EAAEigF,cAAgB,SAASjgF,EAAGsG,EAAG2D,GAEhD,IAAIwM,EAAa,KACjB,GAAGzW,EAAEs7E,cACH,IACE7kE,EAAazW,EAAEs7E,cAAct7E,EAAGA,EAAEq4E,QAAQ4C,mBAC1CxkE,EAAavY,EAAME,IAAIW,kBAAkB0X,EAC3C,CAAE,MAAM0gD,GACNn3D,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,6BACTunE,MAAO3jB,EACPogB,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYe,iBAGzC,CAEgB,OAAfngE,EACDzW,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,sBACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYe,kBAIvCtwE,EAAImQ,EAAWstD,KAAKz9D,EAAG,MAEzB2D,EAASjK,EAAGsG,EACd,EAGAtG,EAAEigF,aAAajgF,EAAGsG,EAAG2D,EACvB,EAgEApK,EAAIq8E,wBAA0B,SAASl8E,EAAGq/D,GAOxC,IAAIv8D,EAASu8D,EAAUv8D,OAAS,EAG5BnB,EAAOzD,EAAMU,KAAKC,eAMtB,OALA8C,EAAKmI,QAAQjK,EAAIm1E,cAAcO,oBAC/B5zE,EAAK8wD,SAAS3vD,GAEdnB,EAAKknD,SAASwW,EAAUv8D,QACxBnB,EAAKK,SAASq9D,GACP19D,CACT,EASA9B,EAAI66E,yBAA2B,SAAS16E,GAEtC,IAAIkgF,EAAYhiF,EAAMU,KAAKC,eAG3BqhF,EAAUp2E,QAAQ,GAGlB,IAAIq2E,EAAMjiF,EAAMU,KAAKC,eACrB,IAAI,IAAIS,KAAOU,EAAEkoE,QAAQD,MAAO,CAC9B,IAAIvb,EAAO1sD,EAAEkoE,QAAQD,MAAM3oE,GACvByoE,EAAK7pE,EAAME,IAAI0pE,wBAAwBpb,EAAK6W,SAC5C6c,EAAaliF,EAAMC,KAAKqB,MAAMuoE,GAClCoY,EAAIt3B,SAASu3B,EAAWt9E,UACxBq9E,EAAIzyE,UAAU0yE,EAChB,CAKA,IAAIt9E,EACF,EAAIo9E,EAAUp9E,SACd,EAAIq9E,EAAIr9E,SAGNnB,EAAOzD,EAAMU,KAAKC,eAKtB,OAJA8C,EAAKmI,QAAQjK,EAAIm1E,cAAcK,qBAC/B1zE,EAAK8wD,SAAS3vD,GACd0wE,EAAY7xE,EAAM,EAAGu+E,GACrB1M,EAAY7xE,EAAM,EAAGw+E,GACdx+E,CACT,EASA9B,EAAI86E,sBAAwB,SAAS36E,GAEnC,IAAI2B,EAAOzD,EAAMU,KAAKC,eAGtB,OAFA8C,EAAKmI,QAAQjK,EAAIm1E,cAAcM,mBAC/B3zE,EAAK8wD,SAAS,GACP9wD,CACT,EAgBA9B,EAAIy6E,uBAAyB,WAC3B,IAAI34E,EAAOzD,EAAMU,KAAKC,eAEtB,OADA8C,EAAKmI,QAAQ,GACNnI,CACT,EA6BA9B,EAAI26E,eAAiB,SAASx6E,GAE5B,IAAIsG,EAAIpI,EAAMU,KAAKC,eACnByH,EAAEoH,UAAU1N,EAAEq4E,QAAQpgE,IAAIjU,UAC1BsC,EAAEoH,UAAU1N,EAAEq4E,QAAQ9hE,KAAKvS,UAG3B,IAAI9D,EAAUF,EAAEG,SAAWN,EAAIO,cAAcF,OACzCD,EAAKD,EAAEq4E,QAAQp4E,GAGfgzE,EAAQ/yE,EAAS,kBAAoB,kBACzCoG,EAFUysE,EAEF9yE,EAAGk5E,cAAelG,EAAO3sE,EAAE5G,WAHzB,IAMV,IAAIiC,EAAOzD,EAAMU,KAAKC,eAItB,OAHA8C,EAAKmI,QAAQjK,EAAIm1E,cAAcS,UAC/B9zE,EAAK8wD,SAASnsD,EAAExD,UAChBnB,EAAK+L,UAAUpH,GACR3E,CACT,EA6CA9B,EAAIy9E,gBAAkB,SAAS5+E,EAAM6oC,EAAS84C,GAChB,qBAAlBA,IACRA,EAAgB94C,EAAQzkC,QAG1B,IAAInB,EAAOzD,EAAMU,KAAKC,eACtB8C,EAAKmI,QAAQpL,GACbiD,EAAKknD,SAASw3B,GACd1+E,EAAKK,SAASulC,GAEd,IAAI+4C,EAAkB3+E,EAAKmB,SACvBQ,EAAgB6F,KAAKC,IAAI,GAAIk3E,EAAkBD,EAAgB,GAEnE,OADA1+E,EAAKK,SAAS9D,EAAMoE,OAAO5C,SAAS4D,IAC7B3B,CACT,EAQA9B,EAAIqqC,MAAQ,SAASlqC,EAAGyB,GAEtB,GAAIA,IAI4B,IAA7BA,EAAOM,SAASe,UACdrB,EAAO/C,OAASmB,EAAI60E,YAAYG,WACjCpzE,EAAO/C,OAASmB,EAAI60E,YAAYE,OAChCnzE,EAAO/C,OAASmB,EAAI60E,YAAYC,oBAHpC,CAUA,GAAGlzE,EAAO/C,OAASmB,EAAI60E,YAAYG,UAAW,CAC5C,IAAItqE,EAAQ9I,EAAOM,SAASwI,QAC5BvK,EAAEq4E,QAAQpgE,IAAItV,OAAO4H,GACrBvK,EAAEq4E,QAAQ9hE,KAAK5T,OAAO4H,GACtBA,EAAQ,IACV,CAGA,IAAIg2E,EACJ,GAAG9+E,EAAOM,SAASe,UAAYjD,EAAIg0E,YACjC0M,EAAU,CAAC9+E,OACN,CAEL8+E,EAAU,GAEV,IADA,IAAIj1E,EAAO7J,EAAOM,SAASwI,QACrBe,EAAKxI,OAASjD,EAAIg0E,aACtB0M,EAAQtzE,KAAKpN,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAM+C,EAAO/C,KACb4M,KAAMpN,EAAMU,KAAKC,aAAayM,EAAK6D,MAAM,EAAGtP,EAAIg0E,iBAElDvoE,EAAOA,EAAK6D,MAAMtP,EAAIg0E,aAGrBvoE,EAAKxI,OAAS,GACfy9E,EAAQtzE,KAAKpN,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAM+C,EAAO/C,KACb4M,KAAMpN,EAAMU,KAAKC,aAAayM,KAGpC,CAGA,IAAI,IAAI9H,EAAI,EAAGA,EAAI+8E,EAAQz9E,SAAW9C,EAAEs5E,OAAQ91E,EAAG,CAEjD,IAAIg9E,EAAMD,EAAQ/8E,GACVxD,EAAED,MAAMgH,QAAQ/F,MACnB2B,OAAO3C,EAAGwgF,IAEbxgF,EAAEugF,QAAQtzE,KAAKuzE,EAEnB,CA3CA,CA4CF,EAUA3gF,EAAIg4E,MAAQ,SAAS73E,GACnB,IAAI,IAAIwD,EAAI,EAAGA,EAAIxD,EAAEugF,QAAQz9E,SAAUU,EAAG,CACxC,IAAI/B,EAASzB,EAAEugF,QAAQ/8E,GAGvBxD,EAAEygF,QAAQ32E,QAAQrI,EAAO/C,MACzBsB,EAAEygF,QAAQ32E,QAAQrI,EAAOS,QAAQuxE,OACjCzzE,EAAEygF,QAAQ32E,QAAQrI,EAAOS,QAAQC,OACjCnC,EAAEygF,QAAQ53B,SAASpnD,EAAOM,SAASe,UACnC9C,EAAEygF,QAAQ/yE,UAAU1N,EAAEugF,QAAQ/8E,GAAGzB,SACnC,CAEA,OADA/B,EAAEugF,QAAU,GACLvgF,EAAE0gF,aAAa1gF,EACxB,EASA,IAAI2gF,EAAwB,SAAS3hF,GACnC,OAAOA,GACP,KAAK,EACH,OAAO,EACT,KAAKd,EAAME,IAAIwqE,iBAAiBC,gBAC9B,OAAOhpE,EAAI61E,MAAMG,YAAYhN,gBAC/B,KAAK3qE,EAAME,IAAIwqE,iBAAiBE,wBAC9B,OAAOjpE,EAAI61E,MAAMG,YAAY/M,wBAC/B,KAAK5qE,EAAME,IAAIwqE,iBAAiBG,oBAC9B,OAAOlpE,EAAI61E,MAAMG,YAAY9M,oBAC/B,KAAK7qE,EAAME,IAAIwqE,iBAAiBI,oBAC9B,OAAOnpE,EAAI61E,MAAMG,YAAY7M,oBAC/B,KAAK9qE,EAAME,IAAIwqE,iBAAiBK,oBAC9B,OAAOppE,EAAI61E,MAAMG,YAAY5M,oBAC/B,KAAK/qE,EAAME,IAAIwqE,iBAAiBM,WAC9B,OAAOrpE,EAAI61E,MAAMG,YAAY3M,WAC/B,QACE,OAAOrpE,EAAI61E,MAAMG,YAAYhN,gBAEjC,EAqqBA,IAAI,IAAIvpE,KA7nBRO,EAAIspE,uBAAyB,SAASnpE,EAAG8uD,GACvC,IAGE,IAAI/wD,EAAU,CAAC,EACf,IAAK,IAAIuB,KAAOU,EAAE4gF,cAChB7iF,EAAQuB,GAAOU,EAAE4gF,cAActhF,GAGjCvB,EAAQqhE,OAAS,SAAS0K,EAAKR,EAAOxa,GAEzB6xB,EAAsB7W,GAAjC,IAGIC,EAAM/pE,EAAEo/D,OAAOp/D,EAAG8pE,EAAKR,EAAOxa,GAClC,IAAW,IAARib,EAAc,CACf,GAAkB,kBAARA,IAAqB7rE,EAAMU,KAAKsP,QAAQ67D,GAAM,CAEtD,IAAI/qE,EAAQ,IAAIL,MAAM,6CAYtB,MAXAK,EAAMu4E,MAAO,EACbv4E,EAAM41E,MAAQ,CACZzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYhN,iBAElCkB,EAAIx2D,UACLvU,EAAMuU,QAAUw2D,EAAIx2D,SAEnBw2D,EAAI6K,QACL51E,EAAM41E,MAAM4C,YAAczN,EAAI6K,OAE1B51E,CACR,CAGG+qE,IAAQD,IACTC,EAlEkB,SAAS8W,GACnC,OAAOA,GACP,KAAK,EACH,OAAO,EACT,KAAKhhF,EAAI61E,MAAMG,YAAYhN,gBACzB,OAAO3qE,EAAME,IAAIwqE,iBAAiBC,gBACpC,KAAKhpE,EAAI61E,MAAMG,YAAY/M,wBACzB,OAAO5qE,EAAME,IAAIwqE,iBAAiBE,wBACpC,KAAKjpE,EAAI61E,MAAMG,YAAY9M,oBACzB,OAAO7qE,EAAME,IAAIwqE,iBAAiBG,oBACpC,KAAKlpE,EAAI61E,MAAMG,YAAY7M,oBACzB,OAAO9qE,EAAME,IAAIwqE,iBAAiBI,oBACpC,KAAKnpE,EAAI61E,MAAMG,YAAY5M,oBACzB,OAAO/qE,EAAME,IAAIwqE,iBAAiBK,oBACpC,KAAKppE,EAAI61E,MAAMG,YAAY3M,WACzB,OAAOhrE,EAAME,IAAIwqE,iBAAiBM,WACpC,QACE,OAAOhrE,EAAME,IAAIwqE,iBAAiBC,gBAEtC,CA+CgBiY,CAAsB/W,GAEhC,CAEA,OAAOA,CACT,EAGA7rE,EAAME,IAAI+qE,uBAAuBnpE,EAAEkoE,QAASpZ,EAAO/wD,EACrD,CAAE,MAAMo5D,GAEN,IAAI/sD,EAAM+sD,GACQ,kBAAR/sD,GAAoBlM,EAAMU,KAAKsP,QAAQ9D,MAC/CA,EAAM,CACJmtE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAamJ,EAAsBxpB,MAIpC,SAAU/sD,IACbA,EAAImtE,MAAO,GAER,UAAWntE,IACdA,EAAIwqE,MAAQ,CACVzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAamJ,EAAsBv2E,EAAIpL,SAK3CgB,EAAEhB,MAAMgB,EAAGoK,EACb,CAEA,OAAQpK,EAAEs5E,IACZ,EAUAz5E,EAAIkhF,mBAAqB,SAASvlC,EAAOwlC,GACvC,IAAIr/E,EAAO,KAGX,GAAG65C,GAASA,EAAMs+B,YAAct+B,EAAMylC,YAAczlC,EAAMz4B,MACxDphB,EAAO65C,MACF,CAQL,IAAI,IAAIl8C,KANRqC,EAAO,CAAC,GACH65C,MAAQA,GAAS,CAAC,EACvB75C,EAAKq/E,SAAW73E,KAAKC,IAAI43E,GAAY,IAAK,GAC1Cr/E,EAAKohB,MAAQ,GAGEy4B,EACV75C,EAAKohB,MAAMjgB,QAAUk+E,EACtBr/E,EAAKohB,MAAM9V,KAAK3N,UAETk8C,EAAMl8C,GAKjBqC,EAAKm4E,WAAa,SAASP,GACzB,IAAIlB,EAAU,KACV/4E,EAAM,KAUV,GAPGi6E,EACDj6E,EAAMpB,EAAMU,KAAK0lD,WAAWi1B,GACpB53E,EAAKohB,MAAMjgB,OAAS,IAE5BxD,EAAMqC,EAAKohB,MAAM,IAGR,OAARzjB,GAAgBA,KAAOqC,EAAK65C,MAI7B,IAAI,IAAIh4C,KAFR60E,EAAU12E,EAAK65C,MAAMl8C,UACdqC,EAAK65C,MAAMl8C,GACLqC,EAAKohB,MAChB,GAAGphB,EAAKohB,MAAMvf,KAAOlE,EAAK,CACxBqC,EAAKohB,MAAM+5B,OAAOt5C,EAAG,GACrB,KACF,CAIJ,OAAO60E,CACT,EAGA12E,EAAKs/E,WAAa,SAAS1H,EAAWlB,GAEpC,GAAG12E,EAAKohB,MAAMjgB,SAAWnB,EAAKq/E,SAAU,CACtC,IAAI1hF,EAAMqC,EAAKohB,MAAMkK,eACdtrB,EAAK65C,MAAMl8C,EACpB,CAEIA,EAAMpB,EAAMU,KAAK0lD,WAAWi1B,GAChC53E,EAAKohB,MAAM9V,KAAK3N,GAChBqC,EAAK65C,MAAMl8C,GAAO+4E,CACpB,CACF,CAEA,OAAO12E,CACT,EAWA9B,EAAIqhF,iBAAmB,SAASnjF,GAC9B,IAAImqE,EAAU,KAIVA,EAHDnqE,EAAQmqE,QAENhqE,EAAMU,KAAKsP,QAAQnQ,EAAQmqE,SAClBhqE,EAAME,IAAI4pE,cAAcjqE,EAAQmqE,SAEhCnqE,EAAQmqE,QAIVhqE,EAAME,IAAI4pE,gBAItB,IAAIqX,EAAethF,EAAQshF,cAAgB,KAC3C,GAAoB,OAAjBA,EAED,IAAI,IAAI//E,KADR+/E,EAAe,GACAx/E,EAAIqE,aACjBm7E,EAAapyE,KAAKpN,EAAIqE,aAAa5E,IAKvC,IAAIa,EAAUpC,EAAQ+iE,OACpBjhE,EAAIO,cAAc0gE,OAASjhE,EAAIO,cAAcF,OAG3C25E,EAAe97E,EAAQ87E,aACzBh6E,EAAIkhF,mBAAmBhjF,EAAQ87E,cAAgB,KAG7C75E,EAAI,CACNkC,QAAS,CAACuxE,MAAO5zE,EAAI+zE,QAAQH,MAAOtxE,MAAOtC,EAAI+zE,QAAQzxE,OACvDhC,OAAQA,EACRo5E,UAAWx7E,EAAQw7E,UACnBrR,QAASA,EACT2R,aAAcA,EACdwF,aAAcA,EACdzC,UAAW7+E,EAAQ6+E,UACnB6C,YAAa1hF,EAAQ0hF,aAAe,KACpCxF,aAAcl8E,EAAQk8E,eAAgB,EACtC7a,OAAQrhE,EAAQqhE,QAAU,SAAS+hB,EAAIrX,EAAKsX,EAAMC,GAAM,OAAOvX,CAAI,EACnE8W,cAAe7iF,EAAQ6iF,eAAiB,CAAC,EACzCd,eAAgB/hF,EAAQ+hF,gBAAkB,KAC1CxE,cAAev9E,EAAQu9E,eAAiB,KACxC2E,aAAcliF,EAAQkiF,cAAgB,KACtCj9E,MAAO9E,EAAMU,KAAKC,eAClB4hF,QAASviF,EAAMU,KAAKC,eACpByM,KAAMpN,EAAMU,KAAKC,eACjB6hF,aAAc3iF,EAAQ2iF,aACtBtD,UAAWr/E,EAAQq/E,UACnBI,kBAAmBz/E,EAAQy/E,kBAC3B8D,OAAQvjF,EAAQujF,OAChBtiF,MAAO,SAASgB,EAAGm3D,GAEjBA,EAAG4lB,OAAS5lB,EAAG4lB,SACX/8E,EAAEG,SAAWN,EAAIO,cAAcF,OAAU,SAAW,UAGrDi3D,EAAGogB,OACJ13E,EAAIqqC,MAAMlqC,EAAGH,EAAI+3E,YAAY53E,EAAGm3D,EAAGyd,QACnC/0E,EAAIg4E,MAAM73E,IAIZ,IAAI41E,GAAsB,IAAbze,EAAGye,MACbA,IAED51E,EAAEs5E,MAAO,GAIXv7E,EAAQiB,MAAMgB,EAAGm3D,GAEdye,GAED51E,EAAE88E,OAAM,EAEZ,EACA/mB,QAASh4D,EAAQg4D,SAAW,KAC5BE,QAASl4D,EAAQk4D,SAAW,KAQ9Bj2D,MAAU,SAASuhF,GACjBvhF,EAAEkC,QAAU,CAACuxE,MAAO5zE,EAAI+zE,QAAQH,MAAOtxE,MAAOtC,EAAI+zE,QAAQzxE,OAC1DnC,EAAEyB,OAAS,KACXzB,EAAEq4E,QAAU,KACZr4E,EAAE08E,gBAAkB,KACpB18E,EAAED,MAAQ,CACRknC,QAAS,KACTlgC,QAAS,MAEX/G,EAAEw5E,QAAUx5E,EAAEG,OAAWN,EAAIO,cAAcF,OAhkDrC,GAikDNF,EAAEi9E,WAAa,KACfj9E,EAAEugF,QAAU,GACZvgF,EAAEs3E,MAAO,EACTt3E,EAAE23E,WAAa,EACf33E,EAAE03E,aAAc,EAChB13E,EAAE28E,aAAc,EAChB38E,EAAEs5E,OAASiI,GAAmC,qBAAfA,GAC/BvhF,EAAEgD,MAAM0M,QACR1P,EAAEygF,QAAQ/wE,QACV1P,EAAEsL,KAAKoE,QACP1P,EAAED,MAAMgH,QAAUlH,EAAI06E,sBAAsBv6E,EAC9C,GAGAA,EAAEwhF,QAwWF,OA7NAxhF,EAAE60E,UAAY,SAAS0E,GAErB,GAAGv5E,EAAEG,SAAWN,EAAIO,cAAcF,OAEhCF,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,yCACTqiE,OAAO,SAEJ,GAAG51E,EAAE03E,YAEV13E,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,iCACTqiE,OAAO,QAEJ,CAEF51E,EAAEs5E,OAASt5E,EAAEs3E,MAAyB,IAAjBt3E,EAAE23E,aACxB33E,EAAEs5E,MAAO,GAIXt5E,EAAE03E,aAAc,EAMhB,IAAIW,EAAU,MAHdkB,EAAYA,GAAa,IAIZz2E,OAAS,IACjB9C,EAAE65E,eACHxB,EAAUr4E,EAAE65E,aAAaC,WAAWP,IAIvB,OAAZlB,IACDkB,EAAY,KAKQ,IAArBA,EAAUz2E,QAAgB9C,EAAE65E,cAEd,QADfxB,EAAUr4E,EAAE65E,aAAaC,gBAEvBP,EAAYlB,EAAQl0E,IAKxBnE,EAAEq4E,QAAU,CACVl0E,GAAIo1E,EACJr3E,QAAS,KACTs2E,YAAa,KACbC,kBAAmB,KACnBuC,kBAAmB,KACnBW,mBAAoB,KACpBV,kBAAmB,KACnBh7E,GAAI,CAAC,EACLgY,IAAK/Z,EAAM6J,GAAGkQ,IAAIlU,SAClBwS,KAAMrY,EAAM6J,GAAGwO,KAAKxS,UAInBs0E,IAEDr4E,EAAEkC,QAAUm2E,EAAQn2E,QACpBlC,EAAEq4E,QAAQp4E,GAAKo4E,EAAQp4E,IAIzBD,EAAEq4E,QAAQp4E,GAAG44E,cAAgBh5E,EAAIk5E,eAAer5E,WAGhDM,EAAEs3E,MAAO,EAGTz3E,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYG,UACtBvpE,KAAMzL,EAAIu/E,kBAAkBp/E,MAE9BH,EAAIg4E,MAAM73E,EACZ,CACF,EAWAA,EAAEqH,QAAU,SAASiE,GACnB,IAAI3J,EAAO,EAgCX,OA7BG2J,GACDtL,EAAEgD,MAAMhB,SAASsJ,GAKftL,EAAEs5E,OAEY,OAAbt5E,EAAEyB,QACHzB,EAAEyB,OAAOggF,OAASzhF,EAAEyB,OAAOM,SAASwwD,YACpCvyD,EAAEyB,OAAS,MAIG,OAAbzB,EAAEyB,SACHE,EA7NkB,SAAS3B,GAC/B,IAAI2B,EAAO,EAGP2E,EAAItG,EAAEgD,MACNK,EAAMiD,EAAExD,SAGZ,GAAGO,EAAM,EACP1B,EAAO,EAAI0B,MACN,CAGLrD,EAAEyB,OAAS,CACT/C,KAAM4H,EAAEwsD,UACR5wD,QAAS,CACPuxE,MAAOntE,EAAEwsD,UACT3wD,MAAOmE,EAAEwsD,WAEXhwD,OAAQwD,EAAEysD,WACVhxD,SAAU7D,EAAMU,KAAKC,eACrB4iF,OAAO,GAIT,IAAIC,EAAqB1hF,EAAEyB,OAAOS,QAAQuxE,QAAUzzE,EAAEkC,QAAQuxE,MAC3DiO,GAAqB1hF,EAAEq4E,SAAWr4E,EAAEq4E,QAAQn2E,UAE7Cw/E,EAAqB1hF,EAAEyB,OAAOS,QAAQC,QAAUnC,EAAEkC,QAAQC,OAExDu/E,GACF1hF,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,4BACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YAAa33E,EAAI61E,MAAMG,YAAYa,mBAI3C,CAEA,OAAO/0E,CACT,CAkLaggF,CAAkB3hF,IAIvBA,EAAEs5E,MAAqB,OAAbt5E,EAAEyB,QAAoBzB,EAAEyB,OAAOggF,QAC3C9/E,EA5KY,SAAS3B,GACzB,IAAI2B,EAAO,EAGP2E,EAAItG,EAAEgD,MACNK,EAAMiD,EAAExD,SAyCZ,OAxCGO,EAAMrD,EAAEyB,OAAOqB,OAEhBnB,EAAO3B,EAAEyB,OAAOqB,OAASO,GAIzBrD,EAAEyB,OAAOM,SAASC,SAASsE,EAAE5G,SAASM,EAAEyB,OAAOqB,SAC/CwD,EAAEoqD,UAGM1wD,EAAED,MAAMgH,QAAQ1G,KACnBsC,OAAO3C,EAAGA,EAAEyB,UAGK,OAAjBzB,EAAEi9E,aAGAj9E,EAAEi9E,WAAWv+E,OAASsB,EAAEyB,OAAO/C,MAEhCsB,EAAEi9E,WAAWl7E,SAAS2L,UAAU1N,EAAEyB,OAAOM,UACzC/B,EAAEyB,OAASzB,EAAEi9E,YAGbj9E,EAAEhB,MAAMgB,EAAG,CACTuT,QAAS,6BACTgkE,MAAM,EACN3C,MAAO,CACLzhE,MAAOtT,EAAI61E,MAAMC,MAAMC,MACvB4B,YACE33E,EAAI61E,MAAMG,YAAYE,uBAOhC/1E,EAAEyB,OAAOggF,OAAQ,IAId9/E,CACT,CA6HaigF,CAAY5hF,KAIjBA,EAAEs5E,MAAqB,OAAbt5E,EAAEyB,QAAmBzB,EAAEyB,OAAOggF,OA3PlC,SAASzhF,EAAGyB,GAExB,IAAIogF,EAAUpgF,EAAO/C,KAAOmB,EAAI60E,YAAYC,mBACxCmN,EAAW/D,EAAQ/9E,EAAEG,QAAQH,EAAEw5E,QAChCqI,KAAWC,EACZA,EAASD,GAAS7hF,EAAGyB,GAGrB5B,EAAIw3E,iBAAiBr3E,EAAGyB,EAE5B,CAkPMgvD,CAAQzwD,EAAGA,EAAEyB,SAIVE,CACT,EAaA3B,EAAE+hF,QAAU,SAASz2E,GAKnB,OAJAzL,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYI,iBACtBxpE,KAAMpN,EAAMU,KAAKC,aAAayM,MAEzBzL,EAAIg4E,MAAM73E,EACnB,EAiBAA,EAAEgiF,wBAA0B,SAASz6C,EAAS84C,GAa5C,OAZG94C,aAAmBrpC,EAAMU,KAAK6T,aAC/B80B,EAAUA,EAAQh9B,SAEQ,qBAAlB81E,IACRA,EAAgB94C,EAAQzkC,QAE1B9C,EAAEu9E,yBAA2Bh2C,EAC7B1nC,EAAIqqC,MAAMlqC,EAAGH,EAAIu6E,aAAap6E,EAAG,CAC/BtB,KAAMmB,EAAI60E,YAAYK,UACtBzpE,KAAMzL,EAAIy9E,gBACRz9E,EAAIk3E,qBAAqBC,kBAAmBzvC,EAAS84C,MAElDxgF,EAAIg4E,MAAM73E,EACnB,EAOAA,EAAE88E,MAAQ,SAASyE,GAEjB,IAAIvhF,EAAEs5E,MAAQt5E,EAAE65E,cAAgB75E,EAAEq4E,QAAS,CAEzC,IAAIA,EAAU,CACZl0E,GAAInE,EAAEq4E,QAAQl0E,GACdjC,QAASlC,EAAEq4E,QAAQn2E,QACnBjC,GAAID,EAAEq4E,QAAQp4E,IAEhBo4E,EAAQp4E,GAAGS,KAAO,KAClBV,EAAE65E,aAAaoH,WAAW5I,EAAQl0E,GAAIk0E,EACxC,CAEGr4E,EAAEs3E,OAEHt3E,EAAEs3E,MAAO,EACTt3E,EAAEgD,MAAM0M,SAGL1P,EAAE28E,aAAe38E,EAAE03E,eACpB13E,EAAE28E,YAAc38E,EAAE03E,aAAc,EAGhC73E,EAAIqqC,MAAMlqC,EAAGH,EAAI+3E,YAAY53E,EAAG,CAC9BmT,MAAOtT,EAAI61E,MAAMC,MAAMzgE,QACvBsiE,YAAa33E,EAAI61E,MAAMG,YAAYC,gBAErCj2E,EAAIg4E,MAAM73E,IAIZA,EAAEshF,OAAOthF,IAIXA,EAAEwhF,MAAMD,EACV,EAEOvhF,CACT,EAGAnC,EAAOC,QAAUI,EAAM2B,IAAM3B,EAAM2B,KAAO,CAAC,EAG5BA,EACU,oBAAbA,EAAIP,KACZpB,EAAM2B,IAAIP,GAAOO,EAAIP,IAKzBpB,EAAM2B,IAAIoiF,SAAWlP,EAGrB70E,EAAM2B,IAAI2B,UA3tHM,SAASlC,EAAK4iF,EAAQzgF,GASpC,IAAIqC,EAAO5F,EAAM4F,KAAKC,SACtBD,EAAKtB,MAAM,OAAQlD,GACnB,IAAIgH,EAAIpI,EAAMU,KAAKC,eASnB,OARAyH,EAAEmD,SAASy4E,EAAO,IAClB57E,EAAEmD,SAASy4E,EAAO,IAClB57E,EAAEwD,QAAQrI,EAAO/C,MACjB4H,EAAEwD,QAAQrI,EAAOS,QAAQuxE,OACzBntE,EAAEwD,QAAQrI,EAAOS,QAAQC,OACzBmE,EAAEuiD,SAASpnD,EAAOqB,QAClBwD,EAAEtE,SAASP,EAAOM,SAASwI,SAC3BzG,EAAKnB,OAAO2D,EAAE5G,YACPoE,EAAKE,SAAStE,UACvB,EAysHAxB,EAAM2B,IAAIkhF,mBAAqBlhF,EAAIkhF,mBAuGnC7iF,EAAM2B,IAAIqhF,iBAAmBrhF,EAAIqhF,gB,iFClrI1B,MAAMiB,EAIHvkE,WAAAA,GAAe,KAFfwkE,QAA6B,IAEd,CAEvB,kBAAOC,GAIL,OAHKF,EAAcrlD,WACjBqlD,EAAcrlD,SAAW,IAAIqlD,GAExBA,EAAcrlD,QACvB,CAEAwlD,eAAAA,GACE,MAAMC,EAAUrkF,IAAAA,IAAU+lD,IAAIq+B,gBAAgB,MACxCE,EAAgBtkF,IAAAA,IAAUmB,gBAAgBkjF,EAAQ9rE,YAClDgsE,EAAevkF,IAAAA,IAAUqkE,eAAeggB,EAAQr+B,WAUtD,OARAv1C,KAAKyzE,QAAU,CACb3rE,WAAY+rE,EACZt+B,UAAWu+B,GAIbvrB,aAAad,QAAQ,sBAAuBpZ,KAAKC,UAAUtuC,KAAKyzE,UAEzDzzE,KAAKyzE,OACd,CAEAM,UAAAA,GACE,GAAI/zE,KAAKyzE,QACP,OAAOzzE,KAAKyzE,QAId,MAAMO,EAASzrB,aAAaZ,QAAQ,uBACpC,GAAIqsB,EACF,IAEE,OADAh0E,KAAKyzE,QAAUplC,KAAKuZ,MAAMosB,GACnBh0E,KAAKyzE,OACd,CAAE,MAAOpjF,GACP6V,QAAQ7V,MAAM,mCAAoCA,GAClDk4D,aAAaf,WAAW,sBAC1B,CAGF,OAAO,IACT,CAEAysB,UAAAA,GACE,OAA6B,OAAtBj0E,KAAK+zE,YACd,CAEAG,YAAAA,GACEl0E,KAAKyzE,QAAU,KACflrB,aAAaf,WAAW,sBAC1B,CAEA2sB,YAAAA,GACE,MAAMV,EAAUzzE,KAAK+zE,aACrB,OAAON,EAAUA,EAAQl+B,UAAY,IACvC,CAEAo3B,aAAAA,GACE,MAAM8G,EAAUzzE,KAAK+zE,aACrB,OAAON,EAAUA,EAAQ3rE,WAAa,IACxC,EAlEW0rE,EACIrlD,cAAQ,EAoElB,MAAMimD,EAAgBZ,EAAcE,a,WC9C3C,IAAIrsB,EAAM,CAAC,EACXn4D,EAAOC,QAAUk4D,EAGjB,IAAIgtB,EAAoB,CAAC,EAWzBhtB,EAAIr2D,OAAS,SAASqD,EAAOigF,EAAU1jF,GACrC,GAAuB,kBAAb0jF,EACR,MAAM,IAAIC,UAAU,gCAEtB,QAAet6B,IAAZrpD,GAA4C,kBAAZA,EACjC,MAAM,IAAI2jF,UAAU,+BAGtB,IAAIxgF,EAAS,GAEb,GAAKM,aAAiB2uD,WAGf,CACL,IAAInuD,EAAI,EACJghB,EAAOy+D,EAASngF,OAChBumE,EAAQ4Z,EAAS9+D,OAAO,GACxBg/D,EAAS,CAAC,GACd,IAAI3/E,EAAI,EAAGA,EAAIR,EAAMF,SAAUU,EAAG,CAChC,IAAI,IAAImJ,EAAI,EAAGy2E,EAAQpgF,EAAMQ,GAAImJ,EAAIw2E,EAAOrgF,SAAU6J,EACpDy2E,GAASD,EAAOx2E,IAAM,EACtBw2E,EAAOx2E,GAAKy2E,EAAQ5+D,EACpB4+D,EAASA,EAAQ5+D,EAAQ,EAG3B,KAAM4+D,EAAQ,GACZD,EAAOl2E,KAAKm2E,EAAQ5+D,GACpB4+D,EAASA,EAAQ5+D,EAAQ,CAE7B,CAGA,IAAIhhB,EAAI,EAAgB,IAAbR,EAAMQ,IAAYA,EAAIR,EAAMF,OAAS,IAAKU,EACnDd,GAAU2mE,EAGZ,IAAI7lE,EAAI2/E,EAAOrgF,OAAS,EAAGU,GAAK,IAAKA,EACnCd,GAAUugF,EAASE,EAAO3/E,GAE9B,MA3BEd,EAkGJ,SAA+BM,EAAOigF,GACpC,IAAIz/E,EAAI,EACJghB,EAAOy+D,EAASngF,OAChBumE,EAAQ4Z,EAAS9+D,OAAO,GACxBg/D,EAAS,CAAC,GACd,IAAI3/E,EAAI,EAAGA,EAAIR,EAAMF,WAAYU,EAAG,CAClC,IAAI,IAAImJ,EAAI,EAAGy2E,EAAQpgF,EAAMS,GAAGD,GAAImJ,EAAIw2E,EAAOrgF,SAAU6J,EACvDy2E,GAASD,EAAOx2E,IAAM,EACtBw2E,EAAOx2E,GAAKy2E,EAAQ5+D,EACpB4+D,EAASA,EAAQ5+D,EAAQ,EAG3B,KAAM4+D,EAAQ,GACZD,EAAOl2E,KAAKm2E,EAAQ5+D,GACpB4+D,EAASA,EAAQ5+D,EAAQ,CAE7B,CAEA,IAAI9hB,EAAS,GAGb,IAAIc,EAAI,EAAmB,IAAhBR,EAAMS,GAAGD,IAAYA,EAAIR,EAAMF,SAAW,IAAKU,EACxDd,GAAU2mE,EAGZ,IAAI7lE,EAAI2/E,EAAOrgF,OAAS,EAAGU,GAAK,IAAKA,EACnCd,GAAUugF,EAASE,EAAO3/E,IAG5B,OAAOd,CACT,CAhIa2gF,CAAsBrgF,EAAOigF,GA6BxC,GAAG1jF,EAAS,CACV,IAAI+jF,EAAQ,IAAIC,OAAO,OAAShkF,EAAU,IAAK,KAC/CmD,EAASA,EAAO2V,MAAMirE,GAAOhrE,KAAK,OACpC,CAEA,OAAO5V,CACT,EAUAszD,EAAIx3D,OAAS,SAASwE,EAAOigF,GAC3B,GAAoB,kBAAVjgF,EACR,MAAM,IAAIkgF,UAAU,6BAEtB,GAAuB,kBAAbD,EACR,MAAM,IAAIC,UAAU,gCAGtB,IAAIM,EAAQR,EAAkBC,GAC9B,IAAIO,EAAO,CAETA,EAAQR,EAAkBC,GAAY,GACtC,IAAI,IAAIz/E,EAAI,EAAGA,EAAIy/E,EAASngF,SAAUU,EACpCggF,EAAMP,EAASn6B,WAAWtlD,IAAMA,CAEpC,CAGAR,EAAQA,EAAM6X,QAAQ,MAAO,IAE7B,IAAI2J,EAAOy+D,EAASngF,OAChBumE,EAAQ4Z,EAAS9+D,OAAO,GACxB5Z,EAAQ,CAAC,GACb,IAAQ/G,EAAI,EAAGA,EAAIR,EAAMF,OAAQU,IAAK,CACpC,IAAI6a,EAAQmlE,EAAMxgF,EAAM8lD,WAAWtlD,IACnC,QAAaolD,IAAVvqC,EACD,OAGF,IAAI,IAAI1R,EAAI,EAAGy2E,EAAQ/kE,EAAO1R,EAAIpC,EAAMzH,SAAU6J,EAChDy2E,GAAS74E,EAAMoC,GAAK6X,EACpBja,EAAMoC,GAAa,IAARy2E,EACXA,IAAU,EAGZ,KAAMA,EAAQ,GACZ74E,EAAM0C,KAAa,IAARm2E,GACXA,IAAU,CAEd,CAGA,IAAI,IAAIh+E,EAAI,EAAGpC,EAAMoC,KAAOikE,GAASjkE,EAAIpC,EAAMF,OAAS,IAAKsC,EAC3DmF,EAAM0C,KAAK,GAGb,MAAqB,qBAAXykD,OACDA,OAAO+xB,KAAKl5E,EAAMm5E,WAGpB,IAAI/xB,WAAWpnD,EAAMm5E,UAC9B,C,iBClJA,IAAIxlF,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MAER,IAAIga,EAAMpa,EAAOC,QAAUI,EAAM+Z,IAAM/Z,EAAM+Z,KAAO,CAAC,EACrD/Z,EAAM6J,GAAGkQ,IAAM/Z,EAAM6J,GAAG2nD,WAAWz3C,IAAMA,EAOzCA,EAAIlU,OAAS,WAEP4rD,GA0KN,WAEEC,EAAW7kD,OAAOC,aAAa,KAC/B4kD,GAAY1xD,EAAMU,KAAK+lD,WAAW55C,OAAOC,aAAa,GAAO,IAG7D24E,EAAK,CACH,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAClD,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAClD,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EACnD,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAGrDC,EAAK,CACH,EAAG,GAAI,GAAI,GAAK,EAAG,GAAI,GAAI,GAAK,EAAG,GAAI,GAAI,GAAK,EAAG,GAAI,GAAI,GAC3D,EAAI,EAAG,GAAI,GAAK,EAAI,EAAG,GAAI,GAAK,EAAI,EAAG,GAAI,GAAK,EAAI,EAAG,GAAI,GAC3D,EAAG,GAAI,GAAI,GAAK,EAAG,GAAI,GAAI,GAAK,EAAG,GAAI,GAAI,GAAK,EAAG,GAAI,GAAI,GAC3D,EAAG,GAAI,GAAI,GAAK,EAAG,GAAI,GAAI,GAAK,EAAG,GAAI,GAAI,GAAK,EAAG,GAAI,GAAI,IAG7D/yB,EAAK,IAAI5oD,MAAM,IACf,IAAI,IAAIzE,EAAI,EAAGA,EAAI,KAAMA,EACvBqtD,EAAGrtD,GAAK2F,KAAKK,MAAkC,WAA5BL,KAAK2uD,IAAI3uD,KAAK06E,IAAIrgF,EAAI,KAI3CmsD,GAAe,CACjB,CApMIvyC,GAIF,IAAIyyC,EAAS,KAGThjD,EAAS3O,EAAMU,KAAKC,eAGpBixD,EAAK,IAAI7nD,MAAM,IAGfF,EAAK,CACP6O,UAAW,MACX6xC,YAAa,GACb/1C,aAAc,GAEdvK,cAAe,EAEf4nD,kBAAmB,KAEnBC,kBAAmB,EAQrBjoD,MAAW,WAETA,EAAGI,cAAgB,EAGnBJ,EAAGgoD,kBAAoBhoD,EAAGkoD,gBAAkB,GAE5C,IADA,IAAIC,EAASnoD,EAAGioD,kBAAoB,EAC5BxsD,EAAI,EAAGA,EAAI0sD,IAAU1sD,EAC3BuE,EAAGgoD,kBAAkB9iD,KAAK,GAS5B,OAPAJ,EAAS3O,EAAMU,KAAKC,eACpBgxD,EAAS,CACPM,GAAI,WACJC,GAAI,WACJC,GAAI,WACJC,GAAI,WAECvoD,CACT,GA4GA,OA1GAA,EAAGvF,QAYHuF,EAAGpF,OAAS,SAASpE,EAAK2Z,GACR,SAAbA,IACD3Z,EAAML,EAAMU,KAAK4xD,WAAWjyD,IAI9B,IAAI8E,EAAM9E,EAAIuE,OACdiF,EAAGI,eAAiB9E,EACpBA,EAAM,CAAEA,EAAM,aAAiB,EAAGA,IAAQ,GAC1C,IAAI,IAAIG,EAAIuE,EAAGgoD,kBAAkBjtD,OAAS,EAAGU,GAAK,IAAKA,EACrDuE,EAAGgoD,kBAAkBvsD,IAAMH,EAAI,GAC/BA,EAAI,GAAKA,EAAI,IAAO0E,EAAGgoD,kBAAkBvsD,GAAK,aAAiB,GAC/DuE,EAAGgoD,kBAAkBvsD,GAAKuE,EAAGgoD,kBAAkBvsD,KAAO,EACtDH,EAAI,GAAMA,EAAI,GAAK,aAAiB,EActC,OAVAwJ,EAAO7K,SAASzD,GAGhBkyD,EAAQZ,EAAQC,EAAIjjD,IAGjBA,EAAOxM,KAAO,MAA4B,IAApBwM,EAAO/J,WAC9B+J,EAAO6jD,UAGF3oD,CACT,EAOAA,EAAG/D,OAAS,WAqBV,IAAI2sD,EAAazyD,EAAMU,KAAKC,eAC5B8xD,EAAW3uD,SAAS6K,EAAOtC,SAG3B,IAOIyE,EANFjH,EAAGgoD,kBAAkBhoD,EAAGgoD,kBAAkBjtD,OAAS,GACnDiF,EAAGioD,kBAKuBjoD,EAAG0gD,YAAc,EAC7CkI,EAAW3uD,SAAS4tD,EAAShlD,OAAO,EAAG7C,EAAG0gD,YAAcz5C,IAKxD,IADA,IAAIpD,EAAMw3E,EAAQ,EACV5/E,EAAIuE,EAAGgoD,kBAAkBjtD,OAAS,EAAGU,GAAK,IAAKA,EAErD4/E,GADAx3E,EAAiC,EAA1B7D,EAAGgoD,kBAAkBvsD,GAAS4/E,GACrB,aAAiB,EACjCzyB,EAAWgC,WAAW/mD,IAAS,GAGjC,IAAIglD,EAAK,CACPT,GAAIN,EAAOM,GACXC,GAAIP,EAAOO,GACXC,GAAIR,EAAOQ,GACXC,GAAIT,EAAOS,IAEbG,EAAQG,EAAId,EAAIa,GAChB,IAAIhvD,EAAOzD,EAAMU,KAAKC,eAKtB,OAJA8C,EAAKgxD,WAAW/B,EAAGT,IACnBxuD,EAAKgxD,WAAW/B,EAAGR,IACnBzuD,EAAKgxD,WAAW/B,EAAGP,IACnB1uD,EAAKgxD,WAAW/B,EAAGN,IACZ3uD,CACT,EAEOoG,CACT,EAGA,IAAI6nD,EAAW,KACX+zB,EAAK,KACLC,EAAK,KACL/yB,EAAK,KACLlB,GAAe,EAyCnB,SAASc,EAAQ/uD,EAAGg8B,EAAGnzB,GAIrB,IAFA,IAAIiI,EAAGpM,EAAGE,EAAGtG,EAAGuG,EAAM0+B,EAAGzhC,EACrBH,EAAMkH,EAAMzH,SACVO,GAAO,IAAI,CAQf,IANA+C,EAAI1E,EAAEyuD,GACN7pD,EAAI5E,EAAE0uD,GACNpwD,EAAI0B,EAAE2uD,GACN9pD,EAAI7E,EAAE4uD,GAGF9sD,EAAI,EAAGA,EAAI,KAAMA,EACnBk6B,EAAEl6B,GAAK+G,EAAM2oD,aAEb1gD,EAAKpM,GADDG,EAAKD,GAAKtG,EAAIuG,IACLsqD,EAAGrtD,GAAKk6B,EAAEl6B,GAEvB4C,EAAIG,EACJA,EAAIvG,EACJA,EAAIsG,EACJA,GAAMkM,IAJNyyB,EAAI2+C,EAAGpgF,IAIUgP,IAAO,GAAKyyB,EAG/B,KAAMzhC,EAAI,KAAMA,EAEdgP,EAAKpM,GADDpG,EAAKuG,GAAKD,EAAItG,IACL6wD,EAAGrtD,GAAKk6B,EAAEimD,EAAGngF,IAE1B4C,EAAIG,EACJA,EAAIvG,EACJA,EAAIsG,EACJA,GAAMkM,IAJNyyB,EAAI2+C,EAAGpgF,IAIUgP,IAAO,GAAKyyB,EAG/B,KAAMzhC,EAAI,KAAMA,EAEdgP,EAAKpM,GADDE,EAAItG,EAAIuG,GACCsqD,EAAGrtD,GAAKk6B,EAAEimD,EAAGngF,IAE1B4C,EAAIG,EACJA,EAAIvG,EACJA,EAAIsG,EACJA,GAAMkM,IAJNyyB,EAAI2+C,EAAGpgF,IAIUgP,IAAO,GAAKyyB,EAG/B,KAAMzhC,EAAI,KAAMA,EAEdgP,EAAKpM,GADDpG,GAAKsG,GAAKC,IACDsqD,EAAGrtD,GAAKk6B,EAAEimD,EAAGngF,IAE1B4C,EAAIG,EACJA,EAAIvG,EACJA,EAAIsG,EACJA,GAAMkM,IAJNyyB,EAAI2+C,EAAGpgF,IAIUgP,IAAO,GAAKyyB,EAI/BvjC,EAAEyuD,GAAMzuD,EAAEyuD,GAAK/pD,EAAK,EACpB1E,EAAE0uD,GAAM1uD,EAAE0uD,GAAK9pD,EAAK,EACpB5E,EAAE2uD,GAAM3uD,EAAE2uD,GAAKrwD,EAAK,EACpB0B,EAAE4uD,GAAM5uD,EAAE4uD,GAAK/pD,EAAK,EAEpBlD,GAAO,EACT,CACF,C,4BCvRa,SAAS8B,EAAEiB,EAAEE,GAAG,IAAItG,EAAEoG,EAAEtD,OAAOsD,EAAE6G,KAAK3G,GAAGF,EAAE,KAAK,EAAEpG,GAAG,CAAC,IAAIuG,EAAEvG,EAAE,IAAI,EAAEwG,EAAEJ,EAAEG,GAAG,KAAG,EAAEF,EAAEG,EAAEF,IAA0B,MAAMF,EAA7BA,EAAEG,GAAGD,EAAEF,EAAEpG,GAAGwG,EAAExG,EAAEuG,CAAc,CAAC,CAAC,SAASE,EAAEL,GAAG,OAAO,IAAIA,EAAEtD,OAAO,KAAKsD,EAAE,EAAE,CAAC,SAAShB,EAAEgB,GAAG,GAAG,IAAIA,EAAEtD,OAAO,OAAO,KAAK,IAAIwD,EAAEF,EAAE,GAAGpG,EAAEoG,EAAE09E,MAAM,GAAG9jF,IAAIsG,EAAE,CAACF,EAAE,GAAGpG,EAAEoG,EAAE,IAAI,IAAIG,EAAE,EAAEC,EAAEJ,EAAEtD,OAAO46B,EAAEl3B,IAAI,EAAED,EAAEm3B,GAAG,CAAC,IAAIl4B,EAAE,GAAGe,EAAE,GAAG,EAAEwkB,EAAE3kB,EAAEZ,GAAGI,EAAEJ,EAAE,EAAEsF,EAAE1E,EAAER,GAAG,GAAG,EAAES,EAAE0kB,EAAE/qB,GAAG4F,EAAEY,GAAG,EAAEH,EAAEyE,EAAEigB,IAAI3kB,EAAEG,GAAGuE,EAAE1E,EAAER,GAAG5F,EAAEuG,EAAEX,IAAIQ,EAAEG,GAAGwkB,EAAE3kB,EAAEZ,GAAGxF,EAAEuG,EAAEf,OAAQ,MAAGI,EAAEY,GAAG,EAAEH,EAAEyE,EAAE9K,IAA0B,MAAMoG,EAA7BA,EAAEG,GAAGuE,EAAE1E,EAAER,GAAG5F,EAAEuG,EAAEX,CAAc,EAAC,CAAC,OAAOU,CAAC,CAC3c,SAASD,EAAED,EAAEE,GAAG,IAAItG,EAAEoG,EAAE29E,UAAUz9E,EAAEy9E,UAAU,OAAO,IAAI/jF,EAAEA,EAAEoG,EAAEjC,GAAGmC,EAAEnC,EAAE,CAAC,GAAG,kBAAkB6/E,aAAa,oBAAoBA,YAAYn0D,IAAI,CAAC,IAAItqB,EAAEy+E,YAAYlmF,EAAQ6qB,aAAa,WAAW,OAAOpjB,EAAEsqB,KAAK,CAAC,KAAK,CAAC,IAAI9pB,EAAEwO,KAAKpO,EAAEJ,EAAE8pB,MAAM/xB,EAAQ6qB,aAAa,WAAW,OAAO5iB,EAAE8pB,MAAM1pB,CAAC,CAAC,CAAC,IAAI8+B,EAAE,GAAGzyB,EAAE,GAAGirB,EAAE,EAAElkB,EAAE,KAAKrI,EAAE,EAAEO,GAAE,EAAGwK,GAAE,EAAGyM,GAAE,EAAGqU,EAAE,oBAAoBoC,WAAWA,WAAW,KAAKuB,EAAE,oBAAoBrB,aAAaA,aAAa,KAAK1B,EAAE,qBAAqBlzB,aAAaA,aAAa,KACnT,SAASk2B,EAAEv6B,GAAG,IAAI,IAAIE,EAAEG,EAAE+L,GAAG,OAAOlM,GAAG,CAAC,GAAG,OAAOA,EAAE2D,SAAS7E,EAAEoN,OAAQ,MAAGlM,EAAE29E,WAAW79E,GAAgD,MAA9ChB,EAAEoN,GAAGlM,EAAEy9E,UAAUz9E,EAAE49E,eAAe/+E,EAAE8/B,EAAE3+B,EAAa,CAACA,EAAEG,EAAE+L,EAAE,CAAC,CAAC,SAASquB,EAAEz6B,GAAa,GAAVsiB,GAAE,EAAGiY,EAAEv6B,IAAO6V,EAAE,GAAG,OAAOxV,EAAEw+B,GAAGhpB,GAAE,EAAGgnB,EAAEzF,OAAO,CAAC,IAAIl3B,EAAEG,EAAE+L,GAAG,OAAOlM,GAAG0G,EAAE6zB,EAAEv6B,EAAE29E,UAAU79E,EAAE,CAAC,CACra,SAASo3B,EAAEp3B,EAAEE,GAAG2V,GAAE,EAAGyM,IAAIA,GAAE,EAAGgY,EAAEz0B,GAAGA,GAAG,GAAGwF,GAAE,EAAG,IAAIzR,EAAEkR,EAAE,IAAS,IAALyvB,EAAEr6B,GAAOiT,EAAE9S,EAAEw+B,GAAG,OAAO1rB,MAAMA,EAAE2qE,eAAe59E,IAAIF,IAAI6iC,MAAM,CAAC,IAAI1iC,EAAEgT,EAAEtP,SAAS,GAAG,oBAAoB1D,EAAE,CAACgT,EAAEtP,SAAS,KAAKiH,EAAEqI,EAAE4qE,cAAc,IAAI39E,EAAED,EAAEgT,EAAE2qE,gBAAgB59E,GAAGA,EAAExI,EAAQ6qB,eAAe,oBAAoBniB,EAAE+S,EAAEtP,SAASzD,EAAE+S,IAAI9S,EAAEw+B,IAAI7/B,EAAE6/B,GAAGtE,EAAEr6B,EAAE,MAAMlB,EAAE6/B,GAAG1rB,EAAE9S,EAAEw+B,EAAE,CAAC,GAAG,OAAO1rB,EAAE,IAAImkB,GAAE,MAAO,CAAC,IAAIl4B,EAAEiB,EAAE+L,GAAG,OAAOhN,GAAGwH,EAAE6zB,EAAEr7B,EAAEy+E,UAAU39E,GAAGo3B,GAAE,CAAE,CAAC,OAAOA,CAAC,CAAC,QAAQnkB,EAAE,KAAKrI,EAAElR,EAAEyR,GAAE,CAAE,CAAC,CAD1a,qBAAqBgvC,gBAAW,IAASA,UAAU2jC,iBAAY,IAAS3jC,UAAU2jC,WAAWC,gBAAgB5jC,UAAU2jC,WAAWC,eAAehnD,KAAKojB,UAAU2jC,YAC2Q,IACzPnwC,EAD6P/K,GAAE,EAAGC,EAAE,KAAKl9B,GAAG,EAAEu9B,EAAE,EAAE4B,GAAG,EACvc,SAASnC,IAAI,QAAOnrC,EAAQ6qB,eAAeyiB,EAAE5B,EAAO,CAAC,SAASr8B,IAAI,GAAG,OAAOg8B,EAAE,CAAC,IAAI/iC,EAAEtI,EAAQ6qB,eAAeyiB,EAAEhlC,EAAE,IAAIE,GAAE,EAAG,IAAIA,EAAE6iC,GAAE,EAAG/iC,EAAE,CAAC,QAAQE,EAAE2tC,KAAK/K,GAAE,EAAGC,EAAE,KAAK,CAAC,MAAMD,GAAE,CAAE,CAAO,GAAG,oBAAoBvL,EAAEsW,EAAE,WAAWtW,EAAExwB,EAAE,OAAO,GAAG,qBAAqBm3E,eAAe,CAAC,IAAIp4E,EAAE,IAAIo4E,eAAetvC,EAAE9oC,EAAEq4E,MAAMr4E,EAAEs4E,MAAMC,UAAUt3E,EAAE8mC,EAAE,WAAWe,EAAExpC,YAAY,KAAK,CAAC,MAAMyoC,EAAE,WAAWlX,EAAE5vB,EAAE,EAAE,EAAE,SAAS81B,EAAE78B,GAAG+iC,EAAE/iC,EAAE8iC,IAAIA,GAAE,EAAG+K,IAAI,CAAC,SAASjnC,EAAE5G,EAAEE,GAAG2F,EAAE8wB,EAAE,WAAW32B,EAAEtI,EAAQ6qB,eAAe,EAAEriB,EAAE,CAC5dxI,EAAQyrB,sBAAsB,EAAEzrB,EAAQirB,2BAA2B,EAAEjrB,EAAQurB,qBAAqB,EAAEvrB,EAAQqrB,wBAAwB,EAAErrB,EAAQ4mF,mBAAmB,KAAK5mF,EAAQmrB,8BAA8B,EAAEnrB,EAAQuqB,wBAAwB,SAASjiB,GAAGA,EAAE6D,SAAS,IAAI,EAAEnM,EAAQ6mF,2BAA2B,WAAW1oE,GAAGxK,IAAIwK,GAAE,EAAGgnB,EAAEzF,GAAG,EAC1U1/B,EAAQ8mF,wBAAwB,SAASx+E,GAAG,EAAEA,GAAG,IAAIA,EAAEyO,QAAQ7V,MAAM,mHAAmHwqC,EAAE,EAAEpjC,EAAE+C,KAAKK,MAAM,IAAIpD,GAAG,CAAC,EAAEtI,EAAQ+qB,iCAAiC,WAAW,OAAO3X,CAAC,EAAEpT,EAAQ+mF,8BAA8B,WAAW,OAAOp+E,EAAEw+B,EAAE,EAAEnnC,EAAQgnF,cAAc,SAAS1+E,GAAG,OAAO8K,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI5K,EAAE,EAAE,MAAM,QAAQA,EAAE4K,EAAE,IAAIlR,EAAEkR,EAAEA,EAAE5K,EAAE,IAAI,OAAOF,GAAG,CAAC,QAAQ8K,EAAElR,CAAC,CAAC,EAAElC,EAAQinF,wBAAwB,WAAW,EAC9fjnF,EAAQ2qB,sBAAsB,WAAW,EAAE3qB,EAAQknF,yBAAyB,SAAS5+E,EAAEE,GAAG,OAAOF,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,QAAQA,EAAE,EAAE,IAAIpG,EAAEkR,EAAEA,EAAE9K,EAAE,IAAI,OAAOE,GAAG,CAAC,QAAQ4K,EAAElR,CAAC,CAAC,EAChMlC,EAAQqqB,0BAA0B,SAAS/hB,EAAEE,EAAEtG,GAAG,IAAIuG,EAAEzI,EAAQ6qB,eAA8F,OAA/E,kBAAkB3oB,GAAG,OAAOA,EAAaA,EAAE,kBAAZA,EAAEA,EAAEilF,QAA6B,EAAEjlF,EAAEuG,EAAEvG,EAAEuG,EAAGvG,EAAEuG,EAASH,GAAG,KAAK,EAAE,IAAII,GAAG,EAAE,MAAM,KAAK,EAAEA,EAAE,IAAI,MAAM,KAAK,EAAEA,EAAE,WAAW,MAAM,KAAK,EAAEA,EAAE,IAAI,MAAM,QAAQA,EAAE,IAAmN,OAAzMJ,EAAE,CAACjC,GAAGs5B,IAAIxzB,SAAS3D,EAAE69E,cAAc/9E,EAAE69E,UAAUjkF,EAAEkkF,eAAvD19E,EAAExG,EAAEwG,EAAoEu9E,WAAW,GAAG/jF,EAAEuG,GAAGH,EAAE29E,UAAU/jF,EAAEmF,EAAEqN,EAAEpM,GAAG,OAAOK,EAAEw+B,IAAI7+B,IAAIK,EAAE+L,KAAKkW,GAAGgY,EAAEz0B,GAAGA,GAAG,GAAGyc,GAAE,EAAG1b,EAAE6zB,EAAE7gC,EAAEuG,MAAMH,EAAE29E,UAAUv9E,EAAErB,EAAE8/B,EAAE7+B,GAAG6V,GAAGxK,IAAIwK,GAAE,EAAGgnB,EAAEzF,KAAYp3B,CAAC,EACnetI,EAAQyqB,qBAAqB0gB,EAAEnrC,EAAQonF,sBAAsB,SAAS9+E,GAAG,IAAIE,EAAE4K,EAAE,OAAO,WAAW,IAAIlR,EAAEkR,EAAEA,EAAE5K,EAAE,IAAI,OAAOF,EAAE8N,MAAMvF,KAAK0F,UAAU,CAAC,QAAQnD,EAAElR,CAAC,CAAC,CAAC,C,iBC2B/J,IAAI9B,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAGR,IAAIknF,EAAQtnF,EAAOC,QAAUI,EAAMinF,MAAQjnF,EAAMinF,OAAS,CAAC,EAiN3D,SAASC,EAAS19E,EAAM29E,EAAYrhC,GAE9BA,IACFA,EAAO9lD,EAAM6J,GAAGwO,KAAKxS,UAIvB,IAFA,IAAIyO,EAAI,GACJtJ,EAAQC,KAAKkD,KAAKg5E,EAAarhC,EAAKtxC,cAChClP,EAAI,EAAGA,EAAI0F,IAAS1F,EAAG,CAC7B,IAAIxD,EAAI+K,OAAOC,aACZxH,GAAK,GAAM,IAAOA,GAAK,GAAM,IAAOA,GAAK,EAAK,IAAU,IAAJA,GACvDwgD,EAAKxhD,QACLwhD,EAAKrhD,OAAO+E,EAAO1H,GACnBwS,GAAKwxC,EAAKhgD,SAAStE,UACrB,CACA,OAAO8S,EAAE4R,UAAU,EAAGihE,EACxB,CA5MAF,EAAMG,gBAAkB,SAAShmF,EAAKiU,EAASxV,GAE7C,IAAIk1E,EACAvrE,EACAK,EACAw9E,EAEkB,kBAAZxnF,GACRk1E,EAAQl1E,EACR2J,EAAO2M,UAAU,SAAMu0C,EACvB7gD,EAAKsM,UAAU,SAAMu0C,GACb7qD,IACRk1E,EAAQl1E,EAAQk1E,YAASrqB,EACzBlhD,EAAO3J,EAAQ2J,WAAQkhD,EACvB7gD,EAAKhK,EAAQgK,SAAM6gD,EAChB7qD,EAAQuU,MAAQvU,EAAQuU,KAAKvK,KAC9Bw9E,EAASxnF,EAAQuU,KAAKvK,KAKtBA,EAGFA,EAAGvF,QAFHuF,EAAK7J,EAAM6J,GAAGwO,KAAKxS,SAMjBwhF,IACFA,EAASx9E,GAIX,IAAIo8C,EAAYh7C,KAAKkD,KAAK/M,EAAIsG,EAAEy+C,YAAc,GAC1CmhC,EAAYrhC,EAAY,EAAIp8C,EAAG2K,aAAe,EAClD,GAAGa,EAAQzQ,OAAS0iF,EAIlB,MAHIxmF,EAAQ,IAAIL,MAAM,iDAChBmE,OAASyQ,EAAQzQ,OACvB9D,EAAMwmF,UAAYA,EACZxmF,EAGJi0E,IACFA,EAAQ,IAEVlrE,EAAGpF,OAAOswE,EAAO,OAKjB,IAJA,IAAIwS,EAAQ19E,EAAG/D,SAEX0hF,EAAK,GACLC,EAAYH,EAAYjyE,EAAQzQ,OAC5BU,EAAI,EAAGA,EAAImiF,EAAWniF,IAC5BkiF,GAAM,KAGR,IAAIE,EAAKH,EAAM/lF,WAAagmF,EAAK,OAASnyE,EAE1C,GAAI7L,GAEG,GAAGA,EAAK5E,SAAWiF,EAAG2K,aAAc,CACzC,IAAI1T,EAIJ,MAJIA,EAAQ,IAAIL,MAAM,2EAEhBknF,WAAan+E,EAAK5E,OACxB9D,EAAM0T,aAAe3K,EAAG2K,aAClB1T,CACR,OAPE0I,EAAOxJ,EAAMoE,OAAO5C,SAASqI,EAAG2K,cASlC,IAAIqoD,EAASqqB,EAAS19E,EAAMy8C,EAAYp8C,EAAG2K,aAAe,EAAG6yE,GACzDvqB,EAAW98D,EAAMU,KAAK81D,SAASkxB,EAAI7qB,EAAQ6qB,EAAG9iF,QAE9CgjF,EAAWV,EAASpqB,EAAUjzD,EAAG2K,aAAc6yE,GAInD,MAAO,KAHUrnF,EAAMU,KAAK81D,SAAShtD,EAAMo+E,EAAUp+E,EAAK5E,QAG7Bk4D,CAC/B,EAmBAmqB,EAAMY,gBAAkB,SAASzmF,EAAK47D,EAAIn9D,GAExC,IAAIk1E,EACAlrE,EACAw9E,EAEkB,kBAAZxnF,GACRk1E,EAAQl1E,EACRgK,EAAKsM,UAAU,SAAMu0C,GACb7qD,IACRk1E,EAAQl1E,EAAQk1E,YAASrqB,EACzB7gD,EAAKhK,EAAQgK,SAAM6gD,EAChB7qD,EAAQuU,MAAQvU,EAAQuU,KAAKvK,KAC9Bw9E,EAASxnF,EAAQuU,KAAKvK,KAK1B,IAAIo8C,EAAYh7C,KAAKkD,KAAK/M,EAAIsG,EAAEy+C,YAAc,GAE9C,GAAG6W,EAAGp4D,SAAWqhD,EAIf,MAHInlD,EAAQ,IAAIL,MAAM,kDAChBmE,OAASo4D,EAAGp4D,OAClB9D,EAAMgnF,eAAiB7hC,EACjBnlD,EAeR,QAXU4pD,IAAP7gD,EACDA,EAAK7J,EAAM6J,GAAGwO,KAAKxS,SAEnBgE,EAAGvF,QAID+iF,IACFA,EAASx9E,GAGRo8C,EAAY,EAAIp8C,EAAG2K,aAAe,EACnC,MAAM,IAAI/T,MAAM,sDAGds0E,IACFA,EAAQ,IAEVlrE,EAAGpF,OAAOswE,EAAO,OAoBjB,IAnBA,IAAIwS,EAAQ19E,EAAG/D,SAAStE,WAGpBwR,EAAIgqD,EAAG/2C,OAAO,GACd8hE,EAAa/qB,EAAG92C,UAAU,EAAGrc,EAAG2K,aAAe,GAC/CsoD,EAAWE,EAAG92C,UAAU,EAAIrc,EAAG2K,cAE/BozE,EAAWV,EAASpqB,EAAUjzD,EAAG2K,aAAc6yE,GAG/CxqB,EAASqqB,EAFFlnF,EAAMU,KAAK81D,SAASuxB,EAAYH,EAAUG,EAAWnjF,QAEpCqhD,EAAYp8C,EAAG2K,aAAe,EAAG6yE,GACzDpmE,EAAKjhB,EAAMU,KAAK81D,SAASsG,EAAUD,EAAQC,EAASl4D,QAEpDojF,EAAa/mE,EAAGiF,UAAU,EAAGrc,EAAG2K,cAGhC1T,EAAe,OAANkS,EAGL1N,EAAI,EAAGA,EAAIuE,EAAG2K,eAAgBlP,EACpCxE,GAAUymF,EAAMthE,OAAO3gB,KAAO0iF,EAAW/hE,OAAO3gB,GAQlD,IAFA,IAAI2iF,EAAQ,EACR/yE,EAAQrL,EAAG2K,aACP/F,EAAI5E,EAAG2K,aAAc/F,EAAIwS,EAAGrc,OAAQ6J,IAAK,CAC/C,IAAI8mB,EAAOtU,EAAG2pC,WAAWn8C,GAMzB3N,GAAUy0B,GADO0yD,EAAQ,MAAS,GAKlC/yE,GADA+yE,GAPmB,EAAP1yD,EAAc,CAS5B,CAEA,GAAGz0B,GAAkC,IAAzBmgB,EAAG2pC,WAAW11C,GACxB,MAAM,IAAIzU,MAAM,+BAGlB,OAAOwgB,EAAGiF,UAAUhR,EAAQ,EAC9B,C,+BChQA,SAASgzE,IAEP,GAC4C,qBAAnCvnC,gCAC4C,oBAA5CA,+BAA+BunC,SAcxC,IAEEvnC,+BAA+BunC,SAASA,EAC1C,CAAE,MAAOh8E,GAGPyK,QAAQ7V,MAAMoL,EAChB,CACF,CAKEg8E,GACAvoF,EAAOC,QAAU,EAAjBD,K,iBCzBF,IAAIK,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAER,IAEI8K,EAFAk+C,EAAQ/oD,EAAM+oD,MAAQ/oD,EAAM+oD,OAAS,CAAC,EAGvC/oD,EAAMU,KAAKwI,WAAalJ,EAAMH,QAAQC,oBACvC+K,EAAS9K,EAAQ,MAmBnBJ,EAAOC,QAAUI,EAAMgpD,OAASD,EAAMC,OAAS,SAC7CnhD,EAAGrE,EAAG1B,EAAGymD,EAAO1+C,EAAIkC,GAQpB,GAPiB,oBAAPlC,IACRkC,EAAWlC,EACXA,EAAK,MAKJ7J,EAAMU,KAAKwI,WAAalJ,EAAMH,QAAQC,mBACvC+K,EAAOm+C,SAAkB,OAAPn/C,GAA6B,kBAAPA,KACvCgB,EAAOs9E,WAAWvjF,OAAS,IAAOiF,GAAa,SAAPA,GAOzC,MANiB,kBAAPA,IAERA,EAAK,QAEPhC,EAAI2rD,OAAO+xB,KAAK19E,EAAG,UACnBrE,EAAIgwD,OAAO+xB,KAAK/hF,EAAG,UACfuI,EAM4B,IAA7BlB,EAAOs9E,WAAWvjF,OACZiG,EAAOm+C,OAAOnhD,EAAGrE,EAAG1B,EAAGymD,EAAO,SAASr8C,EAAK9K,GACjD,GAAG8K,EACD,OAAOH,EAASG,GAElBH,EAAS,KAAM3K,EAAIqL,SAAS,UAC9B,GAEK5B,EAAOm+C,OAAOnhD,EAAGrE,EAAG1B,EAAGymD,EAAO1+C,EAAI,SAASqC,EAAK9K,GACrD,GAAG8K,EACD,OAAOH,EAASG,GAElBH,EAAS,KAAM3K,EAAIqL,SAAS,UAC9B,GAlBkC,IAA7B5B,EAAOs9E,WAAWvjF,OACZiG,EAAOs9E,WAAWtgF,EAAGrE,EAAG1B,EAAGymD,GAAO97C,SAAS,UAE7C5B,EAAOs9E,WAAWtgF,EAAGrE,EAAG1B,EAAGymD,EAAO1+C,GAAI4C,SAAS,UAsB1D,GAJiB,qBAAP5C,GAA6B,OAAPA,IAE9BA,EAAK,QAEU,kBAAPA,EAAiB,CACzB,KAAKA,KAAM7J,EAAM6J,GAAG2nD,YAClB,MAAM,IAAI/wD,MAAM,2BAA6BoJ,GAE/CA,EAAK7J,EAAM6J,GAAGA,GAAIhE,QACpB,CAEA,IAAIu2D,EAAOvyD,EAAG2K,aAId,GAAG+zC,EAAS,WAAa6T,EAAO,CAC9B,IAAIlwD,EAAM,IAAIzL,MAAM,4BACpB,GAAGsL,EACD,OAAOA,EAASG,GAElB,MAAMA,CACR,CAQA,IAAI/G,EAAM8F,KAAKkD,KAAKo6C,EAAQ6T,GACxBr1B,EAAIwhB,GAASpjD,EAAM,GAAKi3D,EA2BxBqkB,EAAMzgF,EAAM4F,KAAKC,SACrB46E,EAAIn8E,MAAMuF,EAAIhC,GACd,IACIugF,EAAKC,EAAKC,EADV7vC,EAAK,GAIT,IAAI1sC,EAAU,CACZ,IAAI,IAAIzG,EAAI,EAAGA,GAAKH,IAAOG,EAAG,CAE5Bm7E,EAAIn8E,MAAM,KAAM,MAChBm8E,EAAIh8E,OAAOjB,GACXi9E,EAAIh8E,OAAOzE,EAAMU,KAAKi2D,aAAarxD,IACnC8iF,EAAME,EAAO7H,EAAI36E,SAAStE,WAG1B,IAAI,IAAIiN,EAAI,EAAGA,GAAK3M,IAAK2M,EACvBgyE,EAAIn8E,MAAM,KAAM,MAChBm8E,EAAIh8E,OAAO6jF,GACXD,EAAM5H,EAAI36E,SAAStE,WAEnB4mF,EAAMpoF,EAAMU,KAAK81D,SAAS4xB,EAAKC,EAAKjsB,GACpCksB,EAAOD,EAOT5vC,GAAOnzC,EAAIH,EAAOijF,EAAMA,EAAI17E,OAAO,EAAGq6B,EACxC,CAEA,OAAO0R,CACT,CAGInzC,EAAI,EACR,SAASijF,IACP,GAAGjjF,EAAIH,EAEL,OAAO4G,EAAS,KAAM0sC,GAIxBgoC,EAAIn8E,MAAM,KAAM,MAChBm8E,EAAIh8E,OAAOjB,GACXi9E,EAAIh8E,OAAOzE,EAAMU,KAAKi2D,aAAarxD,IACnC8iF,EAAME,EAAO7H,EAAI36E,SAAStE,WAG1BiN,EAAI,EACJ+5E,GACF,CAEA,SAASA,IACP,GAAG/5E,GAAK3M,EAQN,OAPA2+E,EAAIn8E,MAAM,KAAM,MAChBm8E,EAAIh8E,OAAO6jF,GACXD,EAAM5H,EAAI36E,SAAStE,WAEnB4mF,EAAMpoF,EAAMU,KAAK81D,SAAS4xB,EAAKC,EAAKjsB,GACpCksB,EAAOD,IACL55E,EACKzO,EAAMU,KAAK6L,aAAai8E,GAOjC/vC,GAAOnzC,EAAIH,EAAOijF,EAAMA,EAAI17E,OAAO,EAAGq6B,KAEpCzhC,EACFijF,GACF,CAEAA,GACF,C,iBCtMA,IAAIvoF,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MAER,IAAIqoD,EAASzoD,EAAOC,QAAUI,EAAMooD,OAASpoD,EAAMooD,QAAU,CAAC,EAG9DpoD,EAAM6J,GAAGu+C,OAASpoD,EAAM6J,GAAG2nD,WAAWpJ,OAASA,EAG/C,IAAIoH,EAASxvD,EAAMwvD,OAASxvD,EAAMooD,OAAOoH,OAASxvD,EAAMooD,OAAOoH,QAAU,CAAC,EAC1EA,EAAO3pD,OAAS,WACd,OAAOuiD,EAAOviD,OAAO,UACvB,EACA7F,EAAM6J,GAAG2lD,OAASxvD,EAAM6J,GAAG2nD,WAAWhC,OAASA,EAG/CxvD,EAAMooD,OAAO/F,OAASriD,EAAMooD,OAAO/F,QAAU,CAC3Cx8C,OAAQ,WACN,OAAOuiD,EAAOviD,OAAO,cACvB,GAEF7F,EAAM6J,GAAG,cAAgB7J,EAAM6J,GAAG2nD,WAAW,cAC3CxxD,EAAMooD,OAAO/F,OAGfriD,EAAMooD,OAAOqgC,OAASzoF,EAAMooD,OAAOqgC,QAAU,CAC3C5iF,OAAQ,WACN,OAAOuiD,EAAOviD,OAAO,cACvB,GAEF7F,EAAM6J,GAAG,cAAgB7J,EAAM6J,GAAG2nD,WAAW,cAC3CxxD,EAAMooD,OAAOqgC,OAUfrgC,EAAOviD,OAAS,SAAS6S,GAUvB,GARI+4C,IAoNJC,EAAW7kD,OAAOC,aAAa,KAC/B4kD,GAAY1xD,EAAMU,KAAK+lD,WAAW55C,OAAOC,aAAa,GAAO,KAG7D6lD,EAAK,CACH,CAAC,WAAY,YAAa,CAAC,WAAY,WACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,UAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,UAAY,YACvC,CAAC,UAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,WACvC,CAAC,WAAY,WAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,WACvC,CAAC,UAAY,YAAa,CAAC,UAAY,YACvC,CAAC,UAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,WACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,UAAY,YAAa,CAAC,UAAY,WACvC,CAAC,UAAY,YAAa,CAAC,UAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,WACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,WACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,UAAY,WACvC,CAAC,UAAY,YAAa,CAAC,UAAY,YACvC,CAAC,UAAY,YAAa,CAAC,UAAY,YACvC,CAAC,UAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,WACvC,CAAC,WAAY,WAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,WACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,UAAY,YAAa,CAAC,UAAY,YACvC,CAAC,UAAY,YAAa,CAAC,UAAY,WACvC,CAAC,UAAY,WAAa,CAAC,UAAY,YACvC,CAAC,WAAY,WAAa,CAAC,WAAY,YACvC,CAAC,WAAY,YAAa,CAAC,WAAY,YACvC,CAAC,WAAY,WAAa,CAAC,WAAY,cAIzC+1B,EAAU,CAAC,GACH,WAAa,CACnB,CAAC,WAAY,YACb,CAAC,WAAY,YACb,CAAC,WAAY,YACb,CAAC,WAAY,YACb,CAAC,WAAY,YACb,CAAC,WAAY,WACb,CAAC,UAAY,YACb,CAAC,WAAY,YAEfA,EAAQ,WAAa,CACnB,CAAC,WAAY,YACb,CAAC,WAAY,WACb,CAAC,WAAY,WACb,CAAC,UAAY,YACb,CAAC,WAAY,YACb,CAAC,WAAY,YACb,CAAC,WAAY,YACb,CAAC,WAAY,aAEfA,EAAQ,eAAiB,CACvB,CAAC,UAAY,YACb,CAAC,WAAY,YACb,CAAC,UAAY,YACb,CAAC,WAAY,YACb,CAAC,WAAY,YACb,CAAC,WAAY,YACb,CAAC,UAAY,WACb,CAAC,UAAY,aAEfA,EAAQ,eAAiB,CACvB,CAAC,WAAY,WACb,CAAC,WAAY,YACb,CAAC,UAAY,WACb,CAAC,WAAY,YACb,CAAC,UAAY,YACb,CAAC,WAAY,UACb,CAAC,WAAY,YACb,CAAC,UAAY,aAIfj3B,GAAe,GA3SS,qBAAd/4C,IACRA,EAAY,aAGTA,KAAagwE,GAChB,MAAM,IAAIjoF,MAAM,8BAAgCiY,GAYlD,IARA,IAAIi5C,EAAS+2B,EAAQhwE,GACjBiwE,EAAK,KAGLh6E,EAAS3O,EAAMU,KAAKC,eAGpBixD,EAAK,IAAI7nD,MAAM,IACX0kC,EAAK,EAAGA,EAAK,KAAMA,EACzBmjB,EAAGnjB,GAAM,IAAI1kC,MAAM,GAIrB,IAAIyK,EAAe,GACnB,OAAOkE,GACL,IAAK,UACHlE,EAAe,GACf,MACF,IAAK,cACHA,EAAe,GACf,MACF,IAAK,cACHA,EAAe,GAKnB,IAAI3K,EAAK,CAEP6O,UAAWA,EAAUiE,QAAQ,IAAK,IAAIZ,cACtCwuC,YAAa,IACb/1C,aAAcA,EAEdvK,cAAe,EAEf4nD,kBAAmB,KAEnBC,kBAAmB,GAQrBjoD,MAAW,WAETA,EAAGI,cAAgB,EAGnBJ,EAAGgoD,kBAAoBhoD,EAAG++E,iBAAmB,GAE7C,IADA,IAAI52B,EAASnoD,EAAGioD,kBAAoB,EAC5BxsD,EAAI,EAAGA,EAAI0sD,IAAU1sD,EAC3BuE,EAAGgoD,kBAAkB9iD,KAAK,GAE5BJ,EAAS3O,EAAMU,KAAKC,eACpBgoF,EAAK,IAAI5+E,MAAM4nD,EAAO/sD,QACtB,IAAQU,EAAI,EAAGA,EAAIqsD,EAAO/sD,SAAUU,EAClCqjF,EAAGrjF,GAAKqsD,EAAOrsD,GAAG2L,MAAM,GAE1B,OAAOpH,CACT,GAwHA,OAtHAA,EAAGvF,QAYHuF,EAAGpF,OAAS,SAASpE,EAAK2Z,GACR,SAAbA,IACD3Z,EAAML,EAAMU,KAAK4xD,WAAWjyD,IAI9B,IAAI8E,EAAM9E,EAAIuE,OACdiF,EAAGI,eAAiB9E,EACpBA,EAAM,CAAEA,EAAM,aAAiB,EAAGA,IAAQ,GAC1C,IAAI,IAAIG,EAAIuE,EAAGgoD,kBAAkBjtD,OAAS,EAAGU,GAAK,IAAKA,EACrDuE,EAAGgoD,kBAAkBvsD,IAAMH,EAAI,GAC/BA,EAAI,GAAKA,EAAI,IAAO0E,EAAGgoD,kBAAkBvsD,GAAK,aAAiB,GAC/DuE,EAAGgoD,kBAAkBvsD,GAAKuE,EAAGgoD,kBAAkBvsD,KAAO,EACtDH,EAAI,GAAOA,EAAI,GAAK,aAAiB,EAcvC,OAVAwJ,EAAO7K,SAASzD,GAGhBkyD,EAAQo2B,EAAI/2B,EAAIjjD,IAGbA,EAAOxM,KAAO,MAA4B,IAApBwM,EAAO/J,WAC9B+J,EAAO6jD,UAGF3oD,CACT,EAOAA,EAAG/D,OAAS,WAqBV,IAAI2sD,EAAazyD,EAAMU,KAAKC,eAC5B8xD,EAAW3uD,SAAS6K,EAAOtC,SAG3B,IAYIV,EALAmF,EANFjH,EAAGgoD,kBAAkBhoD,EAAGgoD,kBAAkBjtD,OAAS,GACnDiF,EAAGioD,kBAKuBjoD,EAAG0gD,YAAc,EAC7CkI,EAAW3uD,SAAS4tD,EAAShlD,OAAO,EAAG7C,EAAG0gD,YAAcz5C,IAMxD,IADA,IAAIpD,EAAiC,EAA1B7D,EAAGgoD,kBAAkB,GACxBvsD,EAAI,EAAGA,EAAIuE,EAAGgoD,kBAAkBjtD,OAAS,IAAKU,EAGpDoI,IAFA/B,EAAqC,EAA9B9B,EAAGgoD,kBAAkBvsD,EAAI,IAChB,aAAiB,EAEjCmtD,EAAWlnD,SAASmC,IAAS,GAC7BA,EAAO/B,IAAS,EAElB8mD,EAAWlnD,SAASmC,GAEpB,IAAInF,EAAI,IAAIwB,MAAM4+E,EAAG/jF,QACrB,IAAQU,EAAI,EAAGA,EAAIqjF,EAAG/jF,SAAUU,EAC9BiD,EAAEjD,GAAKqjF,EAAGrjF,GAAG2L,MAAM,GAErBshD,EAAQhqD,EAAGqpD,EAAIa,GACf,IACIo2B,EADAplF,EAAOzD,EAAMU,KAAKC,eAGpBkoF,EADe,YAAdnwE,EACMnQ,EAAE3D,OACa,YAAd8T,EACDnQ,EAAE3D,OAAS,EAEX2D,EAAE3D,OAAS,EAEpB,IAAQU,EAAI,EAAGA,EAAIujF,IAAQvjF,EACzB7B,EAAK8H,SAAShD,EAAEjD,GAAG,IAChBA,IAAMujF,EAAO,GAAmB,gBAAdnwE,GACnBjV,EAAK8H,SAAShD,EAAEjD,GAAG,IAGvB,OAAO7B,CACT,EAEOoG,CACT,EAGA,IAAI6nD,EAAW,KACXD,GAAe,EAGfkB,EAAK,KAGL+1B,EAAU,KA4Gd,SAASn2B,EAAQ/uD,EAAGg8B,EAAGnzB,GAkBrB,IAhBA,IAAIy8E,EAAOC,EACPC,EAAOC,EACPC,EAAOC,EACPC,EACAC,EACAC,EAAQC,EACRC,EAAMC,EACNC,EAAMC,EACNC,EAAMC,EACNC,EAAMC,EACNC,EAAMC,EACNC,EAAMC,EACNC,EAAMC,EACNC,EAAMC,EACNjlF,EAAGmG,EAAIC,EAAI8+E,EAAIC,EAAIC,EAAKC,EACxBxlF,EAAMkH,EAAMzH,SACVO,GAAO,KAAK,CAGhB,IAAIG,EAAI,EAAGA,EAAI,KAAMA,EACnBk6B,EAAEl6B,GAAG,GAAK+G,EAAM+D,aAAe,EAC/BovB,EAAEl6B,GAAG,GAAK+G,EAAM+D,aAAe,EAEjC,KAAM9K,EAAI,KAAMA,EAOdwjF,KAJAr9E,GADA++E,EAAKhrD,EAAEl6B,EAAI,IACH,MAKG,IAJXoG,EAAK8+E,EAAG,KAIgB,KACpB9+E,IAAO,GAAOD,GAAM,GACrBA,IAAO,KAAQ,EAElBs9E,IACIt9E,GAAM,GAAOC,IAAO,KACpBA,GAAM,EAAMD,IAAO,KACnBA,GAAM,GAAOC,IAAO,MAAS,EAQjCs9E,KAJAv9E,GADAi/E,EAAMlrD,EAAEl6B,EAAI,KACH,MAKE,GAJXoG,EAAKg/E,EAAI,KAIc,KACnBj/E,IAAO,EAAMC,GAAM,IACpBD,IAAO,KAAQ,EAElBw9E,IACIx9E,GAAM,GAAOC,IAAO,IACpBD,GAAM,GAAOC,IAAO,IACpBD,GAAM,GAAOC,IAAO,MAAS,EAGjC++E,EAAKjrD,EAAEl6B,EAAI,GACXqlF,EAAMnrD,EAAEl6B,EAAI,IACZoG,EAAMq9E,EAAQ0B,EAAG,GAAKxB,EAAQ0B,EAAI,GAClCnrD,EAAEl6B,GAAG,GAAMwjF,EAAQ2B,EAAG,GAAKzB,EAAQ2B,EAAI,IACnCj/E,EAAK,aAAiB,KAAQ,EAClC8zB,EAAEl6B,GAAG,GAAKoG,IAAO,EAsBnB,IAlBA89E,EAAOhmF,EAAE,GAAG,GACZimF,EAAOjmF,EAAE,GAAG,GACZkmF,EAAOlmF,EAAE,GAAG,GACZmmF,EAAOnmF,EAAE,GAAG,GACZomF,EAAOpmF,EAAE,GAAG,GACZqmF,EAAOrmF,EAAE,GAAG,GACZsmF,EAAOtmF,EAAE,GAAG,GACZumF,EAAOvmF,EAAE,GAAG,GACZwmF,EAAOxmF,EAAE,GAAG,GACZymF,EAAOzmF,EAAE,GAAG,GACZ0mF,EAAO1mF,EAAE,GAAG,GACZ2mF,EAAO3mF,EAAE,GAAG,GACZ4mF,EAAO5mF,EAAE,GAAG,GACZ6mF,EAAO7mF,EAAE,GAAG,GACZ8mF,EAAO9mF,EAAE,GAAG,GACZ+mF,EAAO/mF,EAAE,GAAG,GAGR8B,EAAI,EAAGA,EAAI,KAAMA,EAEnB8jF,IACIY,IAAS,GAAOC,GAAQ,KACxBD,IAAS,GAAOC,GAAQ,KACxBA,IAAS,EAAMD,GAAQ,OAAU,EAOrCX,GAASe,EAAQJ,GAAQE,EAAOE,MAAY,EAI5ClB,IACIM,IAAS,GAAOC,GAAQ,IACxBA,IAAS,EAAMD,GAAQ,KACvBC,IAAS,EAAMD,GAAQ,OAAU,EACrCL,IACIK,GAAQ,EAAMC,IAAS,KACvBA,GAAQ,GAAOD,IAAS,IACxBC,GAAQ,GAAOD,IAAS,MAAS,EAGrCF,GAAWE,EAAOE,EAASE,GAAQJ,EAAOE,MAAY,EACtDH,GAAWE,EAAOE,EAASE,GAAQJ,EAAOE,MAAY,EAItDj+E,EAAM6+E,KAxBFP,GAAQ,GAAOC,IAAS,KACxBD,GAAQ,GAAOC,IAAS,KACxBA,GAAQ,GAAOD,IAAS,MAAS,KAI5BK,EAAQJ,GAAQE,EAAOE,MAAY,GAkBf13B,EAAGrtD,GAAG,GAAKk6B,EAAEl6B,GAAG,GAC7CwjF,EAASwB,EAAOlB,EAAQC,EAAQ12B,EAAGrtD,GAAG,GAAKk6B,EAAEl6B,GAAG,IAC5CoG,EAAK,aAAiB,KAAQ,EAClCq9E,EAAQr9E,IAAO,EAIfs9E,EAASE,EAAQI,IADjB59E,EAAKy9E,EAAQI,GACoB,aAAiB,KAAQ,EAC1DN,EAAQv9E,IAAO,EAEf4+E,EAAOF,EACPG,EAAOF,EAEPD,EAAOF,EACPG,EAAOF,EAEPD,EAAOF,EACPG,EAAOF,EAIPD,EAAQF,EAAOhB,IADfp9E,EAAKq+E,EAAOhB,GACkB,aAAiB,KAAQ,EACvDkB,EAAOv+E,IAAO,EAEdo+E,EAAOF,EACPG,EAAOF,EAEPD,EAAOF,EACPG,EAAOF,EAEPD,EAAOF,EACPG,EAAOF,EAIPD,EAAQV,EAAQE,IADhBt9E,EAAKq9E,EAAQE,GACkB,aAAiB,KAAQ,EACxDQ,EAAO/9E,IAAO,EAIhBA,EAAKlI,EAAE,GAAG,GAAKimF,EACfjmF,EAAE,GAAG,GAAMA,EAAE,GAAG,GAAKgmF,GAAS99E,EAAK,aAAiB,KAAQ,EAC5DlI,EAAE,GAAG,GAAKkI,IAAO,EAEjBA,EAAKlI,EAAE,GAAG,GAAKmmF,EACfnmF,EAAE,GAAG,GAAMA,EAAE,GAAG,GAAKkmF,GAASh+E,EAAK,aAAiB,KAAQ,EAC5DlI,EAAE,GAAG,GAAKkI,IAAO,EAEjBA,EAAKlI,EAAE,GAAG,GAAKqmF,EACfrmF,EAAE,GAAG,GAAMA,EAAE,GAAG,GAAKomF,GAASl+E,EAAK,aAAiB,KAAQ,EAC5DlI,EAAE,GAAG,GAAKkI,IAAO,EAEjBA,EAAKlI,EAAE,GAAG,GAAKumF,EACfvmF,EAAE,GAAG,GAAMA,EAAE,GAAG,GAAKsmF,GAASp+E,EAAK,aAAiB,KAAQ,EAC5DlI,EAAE,GAAG,GAAKkI,IAAO,EAEjBA,EAAKlI,EAAE,GAAG,GAAKymF,EACfzmF,EAAE,GAAG,GAAMA,EAAE,GAAG,GAAKwmF,GAASt+E,EAAK,aAAiB,KAAQ,EAC5DlI,EAAE,GAAG,GAAKkI,IAAO,EAEjBA,EAAKlI,EAAE,GAAG,GAAK2mF,EACf3mF,EAAE,GAAG,GAAMA,EAAE,GAAG,GAAK0mF,GAASx+E,EAAK,aAAiB,KAAQ,EAC5DlI,EAAE,GAAG,GAAKkI,IAAO,EAEjBA,EAAKlI,EAAE,GAAG,GAAK6mF,EACf7mF,EAAE,GAAG,GAAMA,EAAE,GAAG,GAAK4mF,GAAS1+E,EAAK,aAAiB,KAAQ,EAC5DlI,EAAE,GAAG,GAAKkI,IAAO,EAEjBA,EAAKlI,EAAE,GAAG,GAAK+mF,EACf/mF,EAAE,GAAG,GAAMA,EAAE,GAAG,GAAK8mF,GAAS5+E,EAAK,aAAiB,KAAQ,EAC5DlI,EAAE,GAAG,GAAKkI,IAAO,EAEjBvG,GAAO,GACT,CACF,C,iBCviBA,IAAInF,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,OAGGJ,EAAOC,QAAUI,EAAM4F,KAAO5F,EAAM4F,MAAQ,CAAC,GAOnDC,OAAS,WAEZ,IAAI+kF,EAAO,KAGPC,EAAM,KAGNC,EAAY,KAGZC,EAAY,KAGZxhF,EAAM,CAUVA,MAAY,SAASM,EAAIzI,GACvB,GAAU,OAAPyI,EACD,GAAiB,kBAAPA,EAAiB,CAGzB,MADAA,EAAKA,EAAGkS,iBACC/b,EAAM6J,GAAG2nD,YAGhB,MAAM,IAAI/wD,MAAM,2BAA6BoJ,EAAK,KAFlDghF,EAAM7qF,EAAM6J,GAAG2nD,WAAW3nD,GAAIhE,QAIlC,MAEEglF,EAAMhhF,EAIV,GAAW,OAARzI,EAEDA,EAAMwpF,MACD,CACL,GAAkB,kBAARxpF,EAERA,EAAMpB,EAAMU,KAAKC,aAAaS,QACzB,GAAGpB,EAAMU,KAAKsP,QAAQ5O,GAAM,CAEjC,IAAI6O,EAAM7O,EACVA,EAAMpB,EAAMU,KAAKC,eACjB,IAAI,IAAI2E,EAAI,EAAGA,EAAI2K,EAAIrL,SAAUU,EAC/BlE,EAAIwK,QAAQqE,EAAI3K,GAEpB,CAGA,IAAI0lF,EAAS5pF,EAAIwD,SACdomF,EAASH,EAAItgC,cACdsgC,EAAIvmF,QACJumF,EAAIpmF,OAAOrD,EAAIiL,SACfjL,EAAMypF,EAAI/kF,UAMZglF,EAAY9qF,EAAMU,KAAKC,eACvBoqF,EAAY/qF,EAAMU,KAAKC,eACvBqqF,EAAS5pF,EAAIwD,SACb,IAAQU,EAAI,EAAGA,EAAI0lF,IAAU1lF,EAAG,CAC1B2K,EAAM7O,EAAImE,GAAGD,GACjBwlF,EAAUl/E,QAAQ,GAAOqE,GACzB86E,EAAUn/E,QAAQ,GAAOqE,EAC3B,CAGA,GAAG+6E,EAASH,EAAItgC,YAEd,IADIt6C,EAAM46E,EAAItgC,YAAcygC,EACpB1lF,EAAI,EAAGA,EAAI2K,IAAO3K,EACxBwlF,EAAUl/E,QAAQ,IAClBm/E,EAAUn/E,QAAQ,IAGtBg/E,EAAOxpF,EACP0pF,EAAYA,EAAUz+E,QACtB0+E,EAAYA,EAAU1+E,OACxB,CAMAw+E,EAAIvmF,QACJumF,EAAIpmF,OAAOqmF,EACb,EAOAvhF,OAAa,SAAS8C,GACpBw+E,EAAIpmF,OAAO4H,EACb,EAOA9C,OAAa,WAGX,IAAIi/E,EAAQqC,EAAI/kF,SAASuG,QAIzB,OAHAw+E,EAAIvmF,QACJumF,EAAIpmF,OAAOsmF,GACXF,EAAIpmF,OAAO+jF,GACJqC,EAAI/kF,QACb,GAIA,OAFAyD,EAAIzD,OAASyD,EAAIsmD,OAEVtmD,CACT,C,iBC1IA,IAAIvJ,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAER,WAGA,GAAGC,EAAMirF,MACPtrF,EAAOC,QAAUI,EAAMirF,UADzB,CAMA,IAAIA,EAAQtrF,EAAOC,QAAUI,EAAMirF,MAAQjrF,EAAMirF,OAAS,CAAC,EAEvDxlC,EAAazlD,EAAM0lD,KAAKD,WAGxBylC,EAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrCC,EAAS,IAAI1lC,EAAW,MAC5B0lC,EAAOC,QAAQ,IACf,IAAIC,EAAQ,SAASz+E,EAAGoG,GAAI,OAAOpG,EAAEoG,CAAE,EA+BvCi4E,EAAMK,sBAAwB,SAAS59E,EAAM7N,EAASkM,GAC9B,oBAAZlM,IACRkM,EAAWlM,EACXA,EAAU,CAAC,GAKb,IAAI6Y,GAHJ7Y,EAAUA,GAAW,CAAC,GAGE6Y,WAAa,WACb,kBAAdA,IACRA,EAAY,CAACxS,KAAMwS,IAErBA,EAAU7Y,QAAU6Y,EAAU7Y,SAAW,CAAC,EAG1C,IAAIwJ,EAAOxJ,EAAQwJ,MAAQrJ,EAAMoE,OAC7BmnF,EAAM,CAERC,UAAW,SAAS5+E,GAElB,IADA,IAAIxE,EAAIiB,EAAKhF,aAAauI,EAAEhI,QACpBU,EAAI,EAAGA,EAAIsH,EAAEhI,SAAUU,EAC7BsH,EAAEtH,GAAK8C,EAAEwiD,WAAWtlD,EAExB,GAGF,GAAsB,aAAnBoT,EAAUxS,KACX,OAMJ,SAA2BwH,EAAM69E,EAAK1rF,EAASkM,GAC7C,GAAG,YAAalM,EACd,OA0DJ,SAAsC6N,EAAM69E,EAAK1rF,EAASkM,GAExD,GAAqB,qBAAX8uD,OACR,OAAO4wB,EAAgC/9E,EAAM69E,EAAK1rF,EAASkM,GAI7D,IAAIwE,EAAMm7E,EAAeh+E,EAAM69E,GAG3BlwB,EAAax7D,EAAQ47D,QACrBkwB,EAAW9rF,EAAQ8rF,UAAY,IAC/BpzD,EAAmB,GAAXozD,EAAgB,EACxBC,EAAe/rF,EAAQ+rF,cAAgB,wBAC3C,IAAmB,IAAhBvwB,EACD,OAAOr7D,EAAMU,KAAKg6D,cAAc,SAASxuD,EAAKyuD,GACzCzuD,IAEDyuD,EAAQ,GAEVU,EAAaV,EAAQ,EACrB7uD,GACF,GAIF,SAASA,IAEPuvD,EAAapwD,KAAKC,IAAI,EAAGmwD,GAQzB,IADA,IAAII,EAAU,GACNn2D,EAAI,EAAGA,EAAI+1D,IAAc/1D,EAE/Bm2D,EAAQn2D,GAAK,IAAIu1D,OAAO+wB,GAK1B,IAAQtmF,EAAI,EAAGA,EAAI+1D,IAAc/1D,EAC/Bm2D,EAAQn2D,GAAG4H,iBAAiB,UAAW2+E,GAiBzC,IAAIC,GAAQ,EACZ,SAASD,EAAcvjF,GAErB,IAAGwjF,EAAH,CAIA,EACA,IAAI1+E,EAAO9E,EAAE8E,KACb,GAAGA,EAAK0+E,MAAO,CAEb,IAAI,IAAIxmF,EAAI,EAAGA,EAAIm2D,EAAQ72D,SAAUU,EACnCm2D,EAAQn2D,GAAGq2D,YAGb,OADAmwB,GAAQ,EACD//E,EAAS,KAAM,IAAI05C,EAAWr4C,EAAK69E,MAAO,IACnD,CAGG16E,EAAI41C,YAAcz4C,IACnB6C,EAAMm7E,EAAeh+E,EAAM69E,IAI7B,IAAItxE,EAAM1J,EAAI9D,SAAS,IAGvBnE,EAAEkf,OAAOla,YAAY,CACnB2M,IAAKA,EACL0xE,SAAUA,IAGZp7E,EAAIw7E,WAAWxzD,EAAO,EA3BtB,CA4BF,CACF,CAvEAzsB,GAwEF,CA1JWkgF,CAA6Bt+E,EAAM69E,EAAK1rF,EAASkM,GAE1D,OAAO0/E,EAAgC/9E,EAAM69E,EAAK1rF,EAASkM,EAC7D,CAXWkgF,CAAkBv+E,EAAM69E,EAAK7yE,EAAU7Y,QAASkM,GAGzD,MAAM,IAAItL,MAAM,uCAAyCiY,EAAUxS,KACrE,CAzEA,CAkFA,SAASulF,EAAgC/9E,EAAM69E,EAAK1rF,EAASkM,GAE3D,IAAIwE,EAAMm7E,EAAeh+E,EAAM69E,GAS3BW,EA0KN,SAA6Bx+E,GAC3B,OAAGA,GAAQ,IAAY,GACpBA,GAAQ,IAAY,GACpBA,GAAQ,IAAY,GACpBA,GAAQ,IAAY,GACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,KAAa,EACjB,CACT,CAvLgBy+E,CAAoB57E,EAAI41C,aACnC,qBAAsBtmD,IACvBqsF,EAAUrsF,EAAQusF,kBAOpB,IAAIC,EAAe,GAChB,iBAAkBxsF,IACnBwsF,EAAexsF,EAAQwsF,cAGzBC,EAAU/7E,EAAK7C,EAAM69E,EAjBN,EAiBqBW,EAASG,EAActgF,EAC7D,CAEA,SAASugF,EAAU/7E,EAAK7C,EAAM69E,EAAKgB,EAAUL,EAASG,EAActgF,GAClE,IAAIzH,GAAS,IAAI+R,KACjB,EAAG,CAMD,GAJG9F,EAAI41C,YAAcz4C,IACnB6C,EAAMm7E,EAAeh+E,EAAM69E,IAG1Bh7E,EAAIi8E,gBAAgBN,GACrB,OAAOngF,EAAS,KAAMwE,GAGxBA,EAAIw7E,WAAWb,EAAaqB,IAAa,GAAI,EAC/C,OAAQF,EAAe,IAAO,IAAIh2E,KAAS/R,EAAQ+nF,GAGnDrsF,EAAMU,KAAK6L,aAAa,WACtB+/E,EAAU/7E,EAAK7C,EAAM69E,EAAKgB,EAAUL,EAASG,EAActgF,EAC7D,EACF,CAgHA,SAAS2/E,EAAeh+E,EAAM69E,GAC5B,IAAIh7E,EAAM,IAAIk1C,EAAW/3C,EAAM69E,GAE3BkB,EAAQ/+E,EAAO,EAMnB,OALI6C,EAAIm8E,QAAQD,IACdl8E,EAAIo8E,UAAUlnC,EAAWc,IAAIqmC,UAAUH,GAAQpB,EAAO96E,GAGxDA,EAAIw7E,WAAW,GAAKx7E,EAAI81C,IAAI8kC,GAAQ0B,YAAa,GAC1Ct8E,CACT,CA2BC,CA5RD,E,8BCTE5Q,EAAOC,QAAU,EAAjBD,K,iBC0GF,IAAIK,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MAGR,IAAIE,EAAOD,EAAMC,KAGb6sF,EAAMntF,EAAOC,QAAUI,EAAM+sF,UAAY/sF,EAAM+sF,WAAa,CAAC,EACjE/sF,EAAMitD,MAAQjtD,EAAMitD,OAAS,CAAC,EAC9BjtD,EAAMitD,MAAMhtD,KAAO6sF,EAEnB,IAAI/gC,EAAuB,CACzB7lD,KAAM,cACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,0BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,eACR,CACDl5B,KAAM,sBACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbM,UAAU,EACVJ,YAAa,aAGjBwlC,EAAI/gC,qBAAuBA,EAE3B,IAAIihC,EAAgC,CAClC9mF,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,mCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,eACR,CACDl5B,KAAM,kDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,4DACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,gBACR,CACDl5B,KAAM,4DACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBK,YAAa,kBAEd,CACDphD,KAAM,wCACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EA2BN4+B,QAAS,mBACTkoB,YAAa,0BAIjBwlC,EAAI7d,uBAAyB,CAC3B/oE,KAAM,gBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,wBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,WACR,CACDl5B,KAAM,+BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKiF,IAChB/E,aAAa,EACbE,YAAa,mBACZ50C,OAAOs6E,IAGZF,EAAI5/B,uBAAyB,CAC3BhnD,KAAM,gBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,wBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,YACR1sB,OAAOs6E,IAGZ,IAAIC,EAAkB,CACpB/mF,KAAM,aACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,qBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,GACZ,CACDlhD,KAAM,mCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,0CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,UACZ,CACDphD,KAAM,gDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,YAEV,CACDl5B,KAAM,6BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,uCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,mBACR,CACDl5B,KAAM,uCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBG,aAAa,EACbE,YAAa,kBACbI,UAAU,KAEX,CACDxhD,KAAM,qCACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbM,UAAU,EACVtoB,QAAS,2BACR,CACDl5B,KAAM,uCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbhoB,QAAS,sBACR,CACDl5B,KAAM,6BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,aACR,CACDl5B,KAAM,uCACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACN4mD,aAAa,EACbM,UAAU,EACVtoB,QAAS,+BAIb0tD,EAAI1e,oBAAsB,CACxBloE,KAAM,aACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,qBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,WACR,CACDl5B,KAAM,8BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKiF,IAChB/E,aAAa,EACbE,YAAa,oBAEfyE,EACA,CACE7lD,KAAM,0BACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACNknD,UAAU,EACVJ,YAAa,gBACZ,CACDphD,KAAM,wCACN6gD,SAAU9mD,EAAK+mD,MAAMgF,iBACrBxrD,KAAM,EACNknD,UAAU,EACVJ,YAAa,QACZ,CACDphD,KAAM,yBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKiF,IAChB/sB,QAAS,cACTsoB,UAAU,EACVvnC,MAAO,CAAC8sE,MAIZH,EAAI9gB,uBAAyB,CAC3B9lE,KAAM,gBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,wBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,WACR,CACDl5B,KAAM,gCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,uCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,UACZ,CACDphD,KAAM,6CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,YAEV,CACDl5B,KAAM,uCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,iDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,gBACR,CACDl5B,KAAM,iDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBG,aAAa,EACbE,YAAa,eACbI,UAAU,KAEX,CACDxhD,KAAM,6BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,W,iBChZb,IAAIp/B,EAAQD,EAAQ,IACpBA,EAAQ,MAERJ,EAAOC,QAAUI,EAAMsC,OAAStC,EAAMsC,QAAU,CAAC,EAGjDtC,EAAMsC,OAAOkvD,WAAaxxD,EAAMsC,OAAOkvD,YAAc,CAAC,EAetDxxD,EAAMsC,OAAOS,aAAe,SAAS2V,EAAWtX,GAC9C,IAAI02D,EAAMp/C,EAOV,GANkB,kBAARo/C,IACRA,EAAM93D,EAAMsC,OAAO4qF,aAAap1B,MAE9BA,EAAMA,MAGNA,EACF,MAAM,IAAIr3D,MAAM,0BAA4BiY,GAI9C,OAAO,IAAI1Y,EAAMsC,OAAO6qF,YAAY,CAClCz0E,UAAWo/C,EACX12D,IAAKA,EACL2D,SAAS,GAEb,EAeA/E,EAAMsC,OAAOC,eAAiB,SAASmW,EAAWtX,GAChD,IAAI02D,EAAMp/C,EAOV,GANkB,kBAARo/C,IACRA,EAAM93D,EAAMsC,OAAO4qF,aAAap1B,MAE9BA,EAAMA,MAGNA,EACF,MAAM,IAAIr3D,MAAM,0BAA4BiY,GAI9C,OAAO,IAAI1Y,EAAMsC,OAAO6qF,YAAY,CAClCz0E,UAAWo/C,EACX12D,IAAKA,EACL2D,SAAS,GAEb,EASA/E,EAAMsC,OAAOsgD,kBAAoB,SAAS18C,EAAMwS,GAC9CxS,EAAOA,EAAKiP,cACZnV,EAAMsC,OAAOkvD,WAAWtrD,GAAQwS,CAClC,EASA1Y,EAAMsC,OAAO4qF,aAAe,SAAShnF,GAEnC,OADAA,EAAOA,EAAKiP,iBACDnV,EAAMsC,OAAOkvD,WACfxxD,EAAMsC,OAAOkvD,WAAWtrD,GAE1B,IACT,EAEA,IAAIinF,EAAcntF,EAAMsC,OAAO6qF,YAAc,SAASttF,GACpD4Q,KAAKiI,UAAY7Y,EAAQ6Y,UACzBjI,KAAKi1B,KAAOj1B,KAAKiI,UAAUgtB,KAC3Bj1B,KAAK5L,UAAY4L,KAAKi1B,KAAK7gC,UAC3B4L,KAAK/B,SAAU,EACf+B,KAAK9B,OAAS,KACd8B,KAAKjM,OAAS,KACdiM,KAAK28E,IAAMvtF,EAAQkF,QAAU0L,KAAKi1B,KAAK3gC,QAAU0L,KAAKi1B,KAAKp3B,QAC3DmC,KAAK48E,SAAWxtF,EAAQkF,QACxB0L,KAAKiI,UAAUyqC,WAAWtjD,EAC5B,EA6BAstF,EAAY3lF,UAAUlD,MAAQ,SAASzE,GACrCA,EAAUA,GAAW,CAAC,EACtB,IAAIytF,EAAO,CAAC,EACZ,IAAI,IAAIlsF,KAAOvB,EACbytF,EAAKlsF,GAAOvB,EAAQuB,GAEtBksF,EAAKvoF,QAAU0L,KAAK48E,SACpB58E,KAAK/B,SAAU,EACf+B,KAAK9B,OAAS3O,EAAMU,KAAKC,eACzB8P,KAAKjM,OAAS3E,EAAQ2E,QAAUxE,EAAMU,KAAKC,eAC3C8P,KAAKi1B,KAAKphC,MAAMgpF,EAClB,EAOAH,EAAY3lF,UAAU/C,OAAS,SAASK,GAOtC,IANGA,GAED2L,KAAK9B,OAAOa,UAAU1K,IAIjB2L,KAAK28E,IAAI5kF,KAAKiI,KAAKi1B,KAAMj1B,KAAK9B,OAAQ8B,KAAKjM,OAAQiM,KAAK/B,WAC5D+B,KAAK/B,UAGR+B,KAAK9B,OAAO6jD,SACd,EAUA26B,EAAY3lF,UAAU9C,OAAS,SAAS+K,IAGnCA,GAA2B,QAAnBgB,KAAKi1B,KAAKx/B,MAAqC,QAAnBuK,KAAKi1B,KAAKx/B,OAC/CuK,KAAKi1B,KAAKj2B,IAAM,SAAS3K,GACvB,OAAO2K,EAAIgB,KAAK5L,UAAWC,GAAO,EACpC,EACA2L,KAAKi1B,KAAK70B,MAAQ,SAASrM,GACzB,OAAOiL,EAAIgB,KAAK5L,UAAWL,GAAQ,EACrC,GAIF,IAAI3E,EAAU,CAAC,EAMf,OALAA,EAAQkF,QAAU0L,KAAK48E,SAGvBxtF,EAAQiR,SAAWL,KAAK9B,OAAO/J,SAAW6L,KAAK5L,aAE3C4L,KAAK48E,UAAY58E,KAAKi1B,KAAKj2B,MACzBgB,KAAKi1B,KAAKj2B,IAAIgB,KAAK9B,OAAQ9O,MAMjC4Q,KAAK/B,SAAU,EACf+B,KAAKhM,WAEFgM,KAAK48E,UAAY58E,KAAKi1B,KAAK70B,QACxBJ,KAAKi1B,KAAK70B,MAAMJ,KAAKjM,OAAQ3E,OAKhC4Q,KAAKi1B,KAAK7yB,cACPpC,KAAKi1B,KAAK7yB,YAAYpC,KAAKjM,OAAQ3E,IAM3C,C,iBCjOA,IAAIG,EAAQD,EAAQ,IACpBA,EAAQ,MACR,IAAIE,EAAOD,EAAMC,KAEjBL,EAAQ2tF,oBAAsB,CAE5BrnF,KAAM,iBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CAENja,KAAM,yBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,qBACR,CAEDl5B,KAAM,qCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,gCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,mBAEV,CAEDl5B,KAAM,iBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,gBAIbx/B,EAAQq/D,mBAAqB,CAC3B/4D,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,uBACbnnC,MAAO,CAAC,CACNja,KAAM,2CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,gCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,kBAIb,CACE2nB,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKmY,UAChBjY,aAAa,EACb2F,UAAU,EACVuS,sBAAuB,qB,iBCpD3B,IAAIt/D,EAAQD,EAAQ,IAmPpB,SAAS6iD,EAAkB18C,EAAMw/B,GAI/B1lC,EAAMsC,OAAOsgD,kBAAkB18C,EAHjB,WACZ,OAAO,IAAIlG,EAAMsG,IAAIw8C,UAAU58C,EAAMw/B,EACvC,EAEF,CAvPA3lC,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAGRJ,EAAOC,QAAUI,EAAMsG,IAAMtG,EAAMsG,KAAO,CAAC,EAqB3CtG,EAAMsG,IAAIoJ,gBAAkB,SAAStO,EAAKuB,EAAI6B,EAAQkhC,GACpD,IAAIpjC,EAASygD,EAAc,CACzB3hD,IAAKA,EACLoD,OAAQA,EACRO,SAAS,EACT2gC,KAAMA,IAGR,OADApjC,EAAOgC,MAAM3B,GACNL,CACT,EAiBAtC,EAAMsG,IAAIqJ,uBAAyB,SAASvO,EAAKskC,GAC/C,OAAOqd,EAAc,CACnB3hD,IAAKA,EACLoD,OAAQ,KACRO,SAAS,EACT2gC,KAAMA,GAEV,EAqBA1lC,EAAMsG,IAAIsJ,gBAAkB,SAASxO,EAAKuB,EAAI6B,EAAQkhC,GACpD,IAAIpjC,EAASygD,EAAc,CACzB3hD,IAAKA,EACLoD,OAAQA,EACRO,SAAS,EACT2gC,KAAMA,IAGR,OADApjC,EAAOgC,MAAM3B,GACNL,CACT,EAiBAtC,EAAMsG,IAAIuJ,uBAAyB,SAASzO,EAAKskC,GAC/C,OAAOqd,EAAc,CACnB3hD,IAAKA,EACLoD,OAAQ,KACRO,SAAS,EACT2gC,KAAMA,GAEV,EAUA1lC,EAAMsG,IAAIw8C,UAAY,SAAS58C,EAAMw/B,GAC/BrjC,GACF8gD,IAEF,IAAIl2C,EAAOwD,KACXxD,EAAK/G,KAAOA,EACZ+G,EAAKy4B,KAAO,IAAIA,EAAK,CACnB7gC,UAAW,GACXvC,OAAQ,CACNgM,QAAS,SAAS00C,EAASC,GACzB,OAAOb,EAAan1C,EAAK2kD,GAAI5O,EAASC,GAAU,EAClD,EACAl+C,QAAS,SAASi+C,EAASC,GACzB,OAAOb,EAAan1C,EAAK2kD,GAAI5O,EAASC,GAAU,EAClD,KAGJh2C,EAAKiS,OAAQ,CACf,EAUAlf,EAAMsG,IAAIw8C,UAAUt7C,UAAU27C,WAAa,SAAStjD,GAClD,IAAG4Q,KAAKyO,MAAR,CAIA,IACIjP,EADA7O,EAAMvB,EAAQuB,IAQlB,GAAkB,kBAARA,GACQ,KAAfA,EAAIwD,QAAgC,KAAfxD,EAAIwD,QAAgC,KAAfxD,EAAIwD,QAG1C,GAAG5E,EAAMU,KAAKsP,QAAQ5O,KACX,KAAfA,EAAIwD,QAAgC,KAAfxD,EAAIwD,QAAgC,KAAfxD,EAAIwD,QAAgB,CAE/DqL,EAAM7O,EACNA,EAAMpB,EAAMU,KAAKC,eACjB,IAAI,IAAI2E,EAAI,EAAGA,EAAI2K,EAAIrL,SAAUU,EAC/BlE,EAAIwK,QAAQqE,EAAI3K,GAEpB,OATElE,EAAMpB,EAAMU,KAAKC,aAAaS,GAYhC,IAAIpB,EAAMU,KAAKsP,QAAQ5O,GAAM,CAC3B6O,EAAM7O,EACNA,EAAM,GAGN,IAAI+D,EAAM8K,EAAIrL,SACd,GAAW,KAARO,GAAsB,KAARA,GAAsB,KAARA,EAAY,CACzCA,KAAc,EACd,IAAQG,EAAI,EAAGA,EAAIH,IAAOG,EACxBlE,EAAI2N,KAAKkB,EAAIG,WAEjB,CACF,CAGA,IAAIpQ,EAAMU,KAAKsP,QAAQ5O,IACJ,IAAfA,EAAIwD,QAA+B,IAAfxD,EAAIwD,QAA+B,IAAfxD,EAAIwD,OAC9C,MAAM,IAAInE,MAAM,0BAIlB,IAAIilC,EAAOj1B,KAAKi1B,KAAKx/B,KACjBsnF,GAA6D,IAAhD,CAAC,MAAO,MAAO,MAAO,OAAOznE,QAAQ2f,GAGtDj1B,KAAKmhD,GAAKzP,EAAW/gD,EAAKvB,EAAQkF,UAAYyoF,GAC9C/8E,KAAKyO,OAAQ,CAnDb,CAoDF,EAUAlf,EAAMsG,IAAI67C,WAAa,SAAS/gD,EAAK2D,GAInC,OAHI1C,GACF8gD,IAEKhB,EAAW/gD,EAAK2D,EACzB,EAUA/E,EAAMsG,IAAI87C,aAAeA,EAIzBQ,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAMU,KAChDoyC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAMiB,KAChD6xC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAMoB,KAChD0xC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAM2B,KAChDmxC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAMP,KAChDqzC,EAAkB,UAAW5iD,EAAMsC,OAAOwN,MAAM4B,KAWhD,IAEI+7E,EACAC,EACAC,EACAC,EACAC,EANAxrF,GAAO,EACPumB,EAAK,EA0KT,SAASu6B,IACP9gD,GAAO,EAePsrF,EAAO,CAAC,EAAM,EAAM,EAAM,EAAM,EAAM,GAAM,GAAM,GAAM,IAAM,GAAM,IAIpE,IADA,IAAIG,EAAQ,IAAI/jF,MAAM,KACdzE,EAAI,EAAGA,EAAI,MAAOA,EACxBwoF,EAAMxoF,GAAKA,GAAK,EAChBwoF,EAAMxoF,EAAI,KAAQA,EAAI,KAAQ,EAAI,IAIpCmoF,EAAO,IAAI1jF,MAAM,KACjB2jF,EAAQ,IAAI3jF,MAAM,KAClB6jF,EAAM,IAAI7jF,MAAM,GAChB8jF,EAAO,IAAI9jF,MAAM,GACjB,IAAQzE,EAAI,EAAGA,EAAI,IAAKA,EACtBsoF,EAAItoF,GAAK,IAAIyE,MAAM,KACnB8jF,EAAKvoF,GAAK,IAAIyE,MAAM,KAEtB,IAAmBgkF,EAAIC,EAAIC,EAAIC,EAAIC,EAAKt1D,EAAIu1D,EAAxC9lF,EAAI,EAAGglC,EAAK,EAChB,IAAQhoC,EAAI,EAAGA,EAAI,MAAOA,EAAG,CA8D3B4oF,GADAA,EAAK5gD,EAAMA,GAAM,EAAMA,GAAM,EAAMA,GAAM,EAAMA,GAAM,IACzC,EAAW,IAAL4gD,EAAY,GAG9BT,EAAKnlF,GAAK4lF,EACVR,EAAMQ,GAAM5lF,EAoEZuwB,GAJAs1D,EAAML,EAAMI,KAKF,GACPA,GAAM,GACNA,GAAM,EACNA,EAAKC,EACRC,IARAL,EAAKD,EAAMxlF,KACX0lF,EAAKF,EAAMC,KACXE,EAAKH,EAAME,MAOS,IACjB1lF,EAAI2lF,IAAO,IACX3lF,EAAI0lF,EAAKC,IAAO,EAChB3lF,EAAIylF,EAAKE,EAEZ,IAAI,IAAIvmF,EAAI,EAAGA,EAAI,IAAKA,EACtBkmF,EAAIlmF,GAAGY,GAAKuwB,EACZg1D,EAAKnmF,GAAGwmF,GAAME,EAGdv1D,EAAKA,GAAM,GAAKA,IAAO,EACvBu1D,EAAMA,GAAO,GAAKA,IAAQ,EAInB,IAAN9lF,EAEDA,EAAIglC,EAAK,GAIThlC,EAAIylF,EAAKD,EAAMA,EAAMA,EAAMC,EAAKE,KAChC3gD,GAAMwgD,EAAMA,EAAMxgD,IAEtB,CACF,CA0BA,SAAS6U,EAAW/gD,EAAK2D,GAmBvB,IAjBA,IAaIspF,EAbA7uD,EAAIp+B,EAAI6P,MAAM,GAaRq9E,EAAM,EACZ3yC,EAAKnc,EAAE56B,OAEP62B,EAAM7S,GADA+yB,EAAK,EAAI,GAEXr2C,EAAIq2C,EAAIr2C,EAAIm2B,IAAOn2B,EACzB+oF,EAAO7uD,EAAEl6B,EAAI,GACVA,EAAIq2C,IAAO,GAEZ0yC,EACEZ,EAAKY,IAAS,GAAK,MAAQ,GAC3BZ,EAAKY,IAAS,EAAI,MAAQ,GAC1BZ,EAAY,IAAPY,IAAe,EACpBZ,EAAKY,IAAS,IAAOV,EAAKW,IAAQ,GACpCA,KACQ3yC,EAAK,GAAMr2C,EAAIq2C,IAAO,IAE9B0yC,EACEZ,EAAKY,IAAS,KAAO,GACrBZ,EAAKY,IAAS,GAAK,MAAQ,GAC3BZ,EAAKY,IAAS,EAAI,MAAQ,EAC1BZ,EAAY,IAAPY,IAET7uD,EAAEl6B,GAAKk6B,EAAEl6B,EAAIq2C,GAAM0yC,EAkDrB,GAAGtpF,EAAS,CAQV,IAPA,IAAIkL,EACAs+E,EAAKV,EAAK,GACVW,EAAKX,EAAK,GACVY,EAAKZ,EAAK,GACVa,EAAKb,EAAK,GACVc,EAAOnvD,EAAEvuB,MAAM,GAEJw9B,GAAPnpC,EAAI,GADZm2B,EAAM+D,EAAE56B,QACkBgkB,GAAItjB,EAAIm2B,EAAKn2B,GAAKsjB,EAAI6lB,GAAM7lB,EAIpD,GAAS,IAANtjB,GAAWA,IAAOm2B,EAAM7S,EACzB+lE,EAAKrpF,GAAKk6B,EAAEiP,GACZkgD,EAAKrpF,EAAI,GAAKk6B,EAAEiP,EAAK,GACrBkgD,EAAKrpF,EAAI,GAAKk6B,EAAEiP,EAAK,GACrBkgD,EAAKrpF,EAAI,GAAKk6B,EAAEiP,EAAK,QAMrB,IAAI,IAAI/mC,EAAI,EAAGA,EAAIkhB,IAAMlhB,EACvBuI,EAAMuvB,EAAEiP,EAAK/mC,GACbinF,EAAKrpF,GAAK,GAAGoC,IACX6mF,EAAGd,EAAKx9E,IAAQ,KAChBu+E,EAAGf,EAAKx9E,IAAQ,GAAK,MACrBw+E,EAAGhB,EAAKx9E,IAAQ,EAAI,MACpBy+E,EAAGjB,EAAW,IAANx9E,IAIhBuvB,EAAImvD,CACN,CAEA,OAAOnvD,CACT,CAWA,SAAS4iB,EAAa5iB,EAAG16B,EAAON,EAAQO,GAuCtC,IACIwpF,EAAIC,EAAIC,EAAIC,EAAI9Z,EAchB1sE,EAAGE,EAAGtG,EAAGuG,EAAGumF,EAAI9sB,EAAI+sB,EAfpBC,EAAKtvD,EAAE56B,OAAS,EAAI,EAErBG,GACDwpF,EAAKV,EAAK,GACVW,EAAKX,EAAK,GACVY,EAAKZ,EAAK,GACVa,EAAKb,EAAK,GACVjZ,EAAM8Y,IAENa,EAAKX,EAAI,GACTY,EAAKZ,EAAI,GACTa,EAAKb,EAAI,GACTc,EAAKd,EAAI,GACThZ,EAAM6Y,GAGRvlF,EAAIpD,EAAM,GAAK06B,EAAE,GACjBp3B,EAAItD,EAAMC,EAAU,EAAI,GAAKy6B,EAAE,GAC/B19B,EAAIgD,EAAM,GAAK06B,EAAE,GACjBn3B,EAAIvD,EAAMC,EAAU,EAAI,GAAKy6B,EAAE,GAS/B,IARA,IAAIl6B,EAAI,EAQA0lD,EAAQ,EAAGA,EAAQ8jC,IAAM9jC,EAoH/B4jC,EACEL,EAAGrmF,IAAM,IACTsmF,EAAGpmF,IAAM,GAAK,KACdqmF,EAAG3sF,IAAM,EAAI,KACb4sF,EAAO,IAAJrmF,GAAWm3B,IAAIl6B,GACpBw8D,EACEysB,EAAGnmF,IAAM,IACTomF,EAAG1sF,IAAM,GAAK,KACd2sF,EAAGpmF,IAAM,EAAI,KACbqmF,EAAO,IAAJxmF,GAAWs3B,IAAIl6B,GACpBupF,EACEN,EAAGzsF,IAAM,IACT0sF,EAAGnmF,IAAM,GAAK,KACdomF,EAAGvmF,IAAM,EAAI,KACbwmF,EAAO,IAAJtmF,GAAWo3B,IAAIl6B,GACpB+C,EACEkmF,EAAGlmF,IAAM,IACTmmF,EAAGtmF,IAAM,GAAK,KACdumF,EAAGrmF,IAAM,EAAI,KACbsmF,EAAO,IAAJ5sF,GAAW09B,IAAIl6B,GACpB4C,EAAI0mF,EACJxmF,EAAI05D,EACJhgE,EAAI+sF,EAeNrqF,EAAO,GACJowE,EAAI1sE,IAAM,KAAO,GACjB0sE,EAAIxsE,IAAM,GAAK,MAAQ,GACvBwsE,EAAI9yE,IAAM,EAAI,MAAQ,EACtB8yE,EAAQ,IAAJvsE,GAAYm3B,IAAIl6B,GACvBd,EAAOO,EAAU,EAAI,GAClB6vE,EAAIxsE,IAAM,KAAO,GACjBwsE,EAAI9yE,IAAM,GAAK,MAAQ,GACvB8yE,EAAIvsE,IAAM,EAAI,MAAQ,EACtBusE,EAAQ,IAAJ1sE,GAAYs3B,IAAIl6B,GACvBd,EAAO,GACJowE,EAAI9yE,IAAM,KAAO,GACjB8yE,EAAIvsE,IAAM,GAAK,MAAQ,GACvBusE,EAAI1sE,IAAM,EAAI,MAAQ,EACtB0sE,EAAQ,IAAJxsE,GAAYo3B,IAAIl6B,GACvBd,EAAOO,EAAU,EAAI,GAClB6vE,EAAIvsE,IAAM,KAAO,GACjBusE,EAAI1sE,IAAM,GAAK,MAAQ,GACvB0sE,EAAIxsE,IAAM,EAAI,MAAQ,EACtBwsE,EAAQ,IAAJ9yE,GAAY09B,IAAIl6B,EACzB,CAsBA,SAASy9C,EAAcljD,GAErB,IAGIyC,EAFAoW,EAAY,SAFhB7Y,EAAUA,GAAW,CAAC,GACF6lC,MAAQ,OAAOvwB,cAW/B7Q,GANFhC,EADCzC,EAAQkF,QACA/E,EAAMsC,OAAOC,eAAemW,EAAW7Y,EAAQuB,KAE/CpB,EAAMsC,OAAOS,aAAa2V,EAAW7Y,EAAQuB,MAIrCkD,MAcnB,OAbAhC,EAAOgC,MAAQ,SAAS3B,EAAI9C,GAE1B,IAAI2E,EAAS,KACV3E,aAAmBG,EAAMU,KAAK6T,aAC/B/P,EAAS3E,EACTA,EAAU,CAAC,IAEbA,EAAUA,GAAW,CAAC,GACd2E,OAASA,EACjB3E,EAAQ8C,GAAKA,EACb2B,EAAMkE,KAAKlG,EAAQzC,EACrB,EAEOyC,CACT,C,iBCngCA,IAAItC,EAAQD,EAAQ,IASpB,GARAA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MAEiB,qBAAf0lD,EACR,IAAIA,EAAazlD,EAAM0lD,KAAKD,WAG9B,IAAIx8C,EAAUjJ,EAAMU,KAAKwI,SAAWnJ,EAAQ,KAAY,KAGpDE,EAAOD,EAAMC,KAGbS,EAAOV,EAAMU,KAKjBV,EAAME,IAAMF,EAAME,KAAO,CAAC,EAC1BP,EAAOC,QAAUI,EAAME,IAAI6lD,IAAM/lD,EAAM+lD,IAAM/lD,EAAM+lD,KAAO,CAAC,EAC3D,IAAI7lD,EAAMF,EAAME,IAGZgrF,EAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAGrCqC,EAAsB,CAExBrnF,KAAM,iBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CAENja,KAAM,yBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,qBACR,CAEDl5B,KAAM,qCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,gCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,mBAEV,CAEDl5B,KAAM,iBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,gBAKT2vD,EAAyB,CAE3B7oF,KAAM,gBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CAENja,KAAM,wBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,qBACR,CAEDl5B,KAAM,wBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,qBACR,CAEDl5B,KAAM,+BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,4BACR,CAEDl5B,KAAM,gCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,6BACR,CAEDl5B,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,oBACR,CAEDl5B,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,oBACR,CAEDl5B,KAAM,0BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,uBACR,CAEDl5B,KAAM,0BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,uBACR,CAEDl5B,KAAM,4BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,2BAKT4vD,EAAwB,CAE1B9oF,KAAM,eACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CAENja,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,oBACR,CAEDl5B,KAAM,wBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKO,QAChBL,aAAa,EACbhoB,QAAS,uBAMT6/B,EAAqBj/D,EAAME,IAAI6lD,IAAIkZ,mBAAqB,CAC1D/4D,KAAM,uBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbE,YAAa,uBACbnnC,MAAO,CAAC,CACNja,KAAM,2CACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,gCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,kBAEV,CAEDl5B,KAAM,wCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKmY,UAChBjY,aAAa,EACbjnC,MAAO,CAAC,CAENja,KAAM,qDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbM,UAAU,EACVJ,YAAa,oBAMf2nC,EAAsB,CACxB/oF,KAAM,aACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,6BACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKC,SAChBC,aAAa,EACbjnC,MAAO,CAAC,CACNja,KAAM,iDACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKG,IAChBD,aAAa,EACbhoB,QAAS,uBACR,CAEDl5B,KAAM,wCACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKiC,KAEhB/pB,QAAS,aACTsoB,UAAU,EACVN,aAAa,KAEd,CAEDlhD,KAAM,oBACN6gD,SAAU9mD,EAAK+mD,MAAMC,UACrBzmD,KAAMP,EAAKinD,KAAKK,YAChBH,aAAa,EACbhoB,QAAS,YAqBT8vD,EAAqB,SAASrlF,GAEhC,IAAIm+C,EACJ,KAAGn+C,EAAG6O,aAAaxY,EAAImlD,MAEhB,CACL,IAAIvkD,EAAQ,IAAIL,MAAM,qCAEtB,MADAK,EAAM4X,UAAY7O,EAAG6O,UACf5X,CACR,CALEknD,EAAM9nD,EAAImlD,KAAKx7C,EAAG6O,WAMpB,IAAIy2E,EAAWlvF,EAAKipD,SAASlB,GAAKxmD,WAG9B4tF,EAAanvF,EAAK4F,OACpB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAC9CqlB,EAAkBvsE,EAAK4F,OACzB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,IAClDqlB,EAAgBrsD,MAAMpR,KAAK9O,EAAK4F,OAC9B5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAAO8nC,IAC9C3iB,EAAgBrsD,MAAMpR,KAAK9O,EAAK4F,OAC9B5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,KAC/C,IAAIrjD,EAAS7F,EAAK4F,OAChB5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAChC,EAAO19C,EAAG/D,SAAStE,YAKrB,OAJA4tF,EAAWjvE,MAAMpR,KAAKy9D,GACtB4iB,EAAWjvE,MAAMpR,KAAKjJ,GAGf7F,EAAKqB,MAAM8tF,GAAY5tF,UAChC,EAWI6tF,EAAU,SAASziF,EAAGxL,EAAK0X,GAC7B,GAAGA,EACD,OAAOlM,EAAE0iF,OAAOluF,EAAIkH,EAAGlH,EAAIsG,GAG7B,IAAItG,EAAIyG,IAAMzG,EAAI6G,EAEhB,OAAO2E,EAAE0iF,OAAOluF,EAAIiH,EAAGjH,EAAIsG,GAiG7B,IAAIq/B,EA7FA3lC,EAAImuF,KACNnuF,EAAImuF,GAAKnuF,EAAIiH,EAAEg+C,IAAIjlD,EAAIyG,EAAE2nF,SAAS/pC,EAAWc,OAE3CnlD,EAAIquF,KACNruF,EAAIquF,GAAKruF,EAAIiH,EAAEg+C,IAAIjlD,EAAI6G,EAAEunF,SAAS/pC,EAAWc,OAE3CnlD,EAAI8X,OACN9X,EAAI8X,KAAO9X,EAAI6G,EAAEynF,WAAWtuF,EAAIyG,IAuFlC,GACEk/B,EAAI,IAAI0e,EACNzlD,EAAMU,KAAK0lD,WAAWpmD,EAAMoE,OAAO5C,SAASJ,EAAIsG,EAAEy+C,YAAc,IAChE,UACIpf,EAAEuf,UAAUllD,EAAIsG,IAAM,IAAMq/B,EAAE4oD,IAAIvuF,EAAIsG,GAAGiqE,OAAOlsB,EAAWc,MAQnE,IAJA,IAAIqpC,GAHJhjF,EAAIA,EAAEmG,SAASg0B,EAAEuoD,OAAOluF,EAAIkH,EAAGlH,EAAIsG,IAAI2+C,IAAIjlD,EAAIsG,IAGpC2+C,IAAIjlD,EAAIyG,GAAGynF,OAAOluF,EAAImuF,GAAInuF,EAAIyG,GACrCgoF,EAAKjjF,EAAEy5C,IAAIjlD,EAAI6G,GAAGqnF,OAAOluF,EAAIquF,GAAIruF,EAAI6G,GAGnC2nF,EAAGtpC,UAAUupC,GAAM,GACvBD,EAAKA,EAAG/0E,IAAIzZ,EAAIyG,GAIlB,IAAImL,EAAI48E,EAAGJ,SAASK,GACjB98E,SAAS3R,EAAI8X,MAAMmtC,IAAIjlD,EAAIyG,GAC3BkL,SAAS3R,EAAI6G,GAAG4S,IAAIg1E,GAKvB,OAFA78E,EAAIA,EAAED,SAASg0B,EAAE2oD,WAAWtuF,EAAIsG,IAAI2+C,IAAIjlD,EAAIsG,EAG9C,EAuiCA,SAASooF,EAAkBxoF,EAAGlG,EAAK2uF,GACjC,IAAI5uE,EAAKnhB,EAAMU,KAAKC,eAGhBuG,EAAI+D,KAAKkD,KAAK/M,EAAIsG,EAAEy+C,YAAc,GAGtC,GAAG7+C,EAAE1C,OAAUsC,EAAI,GAAK,CACtB,IAAIpG,EAAQ,IAAIL,MAAM,gDAGtB,MAFAK,EAAM8D,OAAS0C,EAAE1C,OACjB9D,EAAMoK,IAAMhE,EAAI,GACVpG,CACR,CAmBAqgB,EAAGvV,QAAQ,GACXuV,EAAGvV,QAAQmkF,GAGX,IACIC,EADAC,EAAS/oF,EAAI,EAAII,EAAE1C,OAGvB,GAAU,IAAPmrF,GAAsB,IAAPA,EAAa,CAC7BC,EAAkB,IAAPD,EAAe,EAAO,IACjC,IAAI,IAAIzqF,EAAI,EAAGA,EAAI2qF,IAAU3qF,EAC3B6b,EAAGvV,QAAQokF,EAEf,MAGE,KAAMC,EAAS,GAAG,CAChB,IAAIC,EAAW,EACXC,EAAWnwF,EAAMoE,OAAO5C,SAASyuF,GACrC,IAAQ3qF,EAAI,EAAGA,EAAI2qF,IAAU3qF,EAEZ,KADf0qF,EAAUG,EAASvlC,WAAWtlD,MAE1B4qF,EAEF/uE,EAAGvV,QAAQokF,GAGfC,EAASC,CACX,CAOF,OAHA/uE,EAAGvV,QAAQ,GACXuV,EAAGrd,SAASwD,GAEL6Z,CACT,CAYA,SAASivE,EAAkBpzB,EAAI57D,EAAK0X,EAAKslC,GAEvC,IAAIl3C,EAAI+D,KAAKkD,KAAK/M,EAAIsG,EAAEy+C,YAAc,GAalChlC,EAAKnhB,EAAMU,KAAKC,aAAaq8D,GAC7BmO,EAAQhqD,EAAGyzC,UACXm7B,EAAK5uE,EAAGyzC,UACZ,GAAa,IAAVuW,GACAryD,GAAc,IAAPi3E,GAAsB,IAAPA,IACrBj3E,GAAa,GAANi3E,GACRj3E,GAAc,IAAPi3E,GAA8B,qBAAR3xC,EAC9B,MAAM,IAAI39C,MAAM,gCAGlB,IAAIwvF,EAAS,EACb,GAAU,IAAPF,EAAa,CAEdE,EAAS/oF,EAAI,EAAIk3C,EACjB,IAAI,IAAI94C,EAAI,EAAGA,EAAI2qF,IAAU3qF,EAC3B,GAAoB,IAAjB6b,EAAGyzC,UACJ,MAAM,IAAIn0D,MAAM,+BAGtB,MAAO,GAAU,IAAPsvF,EAGR,IADAE,EAAS,EACH9uE,EAAGvc,SAAW,GAAG,CACrB,GAAoB,MAAjBuc,EAAGyzC,UAAoB,GACtBzzC,EAAGhf,KACL,KACF,GACE8tF,CACJ,MACK,GAAU,IAAPF,EAGR,IADAE,EAAS,EACH9uE,EAAGvc,SAAW,GAAG,CACrB,GAAoB,IAAjBuc,EAAGyzC,UAAoB,GACtBzzC,EAAGhf,KACL,KACF,GACE8tF,CACJ,CAKF,GAAY,IADD9uE,EAAGyzC,WACMq7B,IAAY/oF,EAAI,EAAIia,EAAGvc,SACzC,MAAM,IAAInE,MAAM,gCAGlB,OAAO0gB,EAAG3f,UACZ,CAmIA,SAAS6uF,EAAWjoF,GAElB,IAAI6R,EAAM7R,EAAEqE,SAAS,IAClBwN,EAAI,IAAM,MACXA,EAAM,KAAOA,GAEf,IAAI5N,EAAQrM,EAAMU,KAAKsX,WAAWiC,GAGlC,OAAG5N,EAAMzH,OAAS,IAEU,IAAxByH,EAAMu+C,WAAW,IACc,KAAV,IAAtBv+C,EAAMu+C,WAAW,KAEO,MAAxBv+C,EAAMu+C,WAAW,IACe,OAAV,IAAtBv+C,EAAMu+C,WAAW,KACXv+C,EAAMK,OAAO,GAEfL,CACT,CAYA,SAASikF,EAAqB5iF,GAC5B,OAAGA,GAAQ,IAAY,GACpBA,GAAQ,IAAY,GACpBA,GAAQ,IAAY,GACpBA,GAAQ,IAAY,GACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,IAAY,EACpBA,GAAQ,KAAa,EACjB,CACT,CASA,SAAS6iF,EAAkBC,GACzB,OAAOxwF,EAAMU,KAAKwI,UAAmC,oBAAhBD,EAAQunF,EAC/C,CASA,SAASC,EAAoBD,GAC3B,MAAoC,qBAArB9vF,EAAKkK,aACiB,kBAA5BlK,EAAKkK,YAAYC,QACkB,kBAAnCnK,EAAKkK,YAAYC,OAAO6lF,QACe,oBAAvChwF,EAAKkK,YAAYC,OAAO6lF,OAAOF,EAC1C,CAWA,SAASG,EAAsBH,GAC7B,MAAoC,qBAArB9vF,EAAKkK,aACmB,kBAA9BlK,EAAKkK,YAAYE,UACoB,kBAArCpK,EAAKkK,YAAYE,SAAS4lF,QACe,oBAAzChwF,EAAKkK,YAAYE,SAAS4lF,OAAOF,EAC5C,CAEA,SAASI,EAAiBhkF,GAGxB,IAFA,IAAIP,EAAQrM,EAAMU,KAAKsX,WAAWpL,EAAEH,SAAS,KACzCqL,EAAS,IAAI27C,WAAWpnD,EAAMzH,QAC1BU,EAAI,EAAGA,EAAI+G,EAAMzH,SAAUU,EACjCwS,EAAOxS,GAAK+G,EAAMu+C,WAAWtlD,GAE/B,OAAOwS,CACT,CA33CA5X,EAAI6lD,IAAIz3C,QAAU,SAAShH,EAAGlG,EAAK2uF,GACjC,IACI5uE,EADArI,EAAMi3E,EAIN7oF,EAAI+D,KAAKkD,KAAK/M,EAAIsG,EAAEy+C,YAAc,IAE5B,IAAP4pC,IAAuB,IAAPA,GAEjBj3E,EAAc,IAAPi3E,EACP5uE,EAAK2uE,EAAkBxoF,EAAGlG,EAAK2uF,KAE/B5uE,EAAKnhB,EAAMU,KAAKC,gBACbmD,SAASwD,GAgBd,IAXA,IAAIsF,EAAI,IAAI64C,EAAWtkC,EAAG1H,QAAS,IAQ/Bo3E,EALIxB,EAAQziF,EAAGxL,EAAK0X,GAKXrM,SAAS,IAClB8iB,EAAKvvB,EAAMU,KAAKC,eAChB6lD,EAAQt/C,EAAI+D,KAAKkD,KAAK0iF,EAAKjsF,OAAS,GAClC4hD,EAAQ,GACZj3B,EAAG3jB,QAAQ,KACT46C,EAGJ,OADAj3B,EAAGzrB,SAAS9D,EAAMU,KAAKsX,WAAW64E,IAC3BthE,EAAG/tB,UACZ,EAoBAtB,EAAI6lD,IAAIhhD,QAAU,SAASwqB,EAAInuB,EAAK0X,EAAKslC,GAEvC,IAAIl3C,EAAI+D,KAAKkD,KAAK/M,EAAIsG,EAAEy+C,YAAc,GAGtC,GAAG52B,EAAG3qB,SAAWsC,EAAG,CAClB,IAAIpG,EAAQ,IAAIL,MAAM,wCAGtB,MAFAK,EAAM8D,OAAS2qB,EAAG3qB,OAClB9D,EAAMgwF,SAAW5pF,EACXpG,CACR,CAIA,IAAIkS,EAAI,IAAIyyC,EAAWzlD,EAAMU,KAAKC,aAAa4uB,GAAI9V,QAAS,IAI5D,GAAGzG,EAAEszC,UAAUllD,EAAIsG,IAAM,EACvB,MAAM,IAAIjH,MAAM,iCAYlB,IARA,IAKIswF,EALI1B,EAAQr8E,EAAG5R,EAAK0X,GAKXrM,SAAS,IAClB0U,EAAKnhB,EAAMU,KAAKC,eAChB6lD,EAAQt/C,EAAI+D,KAAKkD,KAAK4iF,EAAKnsF,OAAS,GAClC4hD,EAAQ,GACZrlC,EAAGvV,QAAQ,KACT46C,EAIJ,OAFArlC,EAAGrd,SAAS9D,EAAMU,KAAKsX,WAAW+4E,KAExB,IAAP3yC,EAEMgyC,EAAkBjvE,EAAG3f,WAAYJ,EAAK0X,GAIxCqI,EAAG3f,UACZ,EAgBAtB,EAAI6lD,IAAIirC,6BAA+B,SAAStjF,EAAMpF,EAAGzI,GAInC,kBAAV6N,IACRA,EAAOiiD,SAASjiD,EAAM,KAExBA,EAAOA,GAAQ,KAIf,IAcIjK,EAdA4F,GADJxJ,EAAUA,GAAW,CAAC,GACHwJ,MAAQrJ,EAAMoE,OAC7BmnF,EAAM,CAERC,UAAW,SAAS5+E,GAElB,IADA,IAAIxE,EAAIiB,EAAKhF,aAAauI,EAAEhI,QACpBU,EAAI,EAAGA,EAAIsH,EAAEhI,SAAUU,EAC7BsH,EAAEtH,GAAK8C,EAAEwiD,WAAWtlD,EAExB,GAGEoT,EAAY7Y,EAAQ6Y,WAAa,WAIrC,GAAiB,aAAdA,EAkBD,MAAM,IAAIjY,MAAM,qCAAuCiY,GAGzD,OApBEjV,EAAO,CACLiV,UAAWA,EACX7W,MAAO,EACP6L,KAAMA,EACN69E,IAAKA,EACL0F,KAAM3oF,GAAK,MACXA,EAAG,IAAIm9C,EAAW,MAClB59C,EAAG,KACHI,EAAG,KACHipF,MAAOxjF,GAAQ,EACfyjF,MAAOzjF,GAAQA,GAAQ,GACvB0jF,QAAS,EACT7gF,IAAK,KACL/N,KAAM,OAEH8F,EAAE8iF,QAAQ3nF,EAAKwtF,MAKfxtF,CACT,EA+BAvD,EAAI6lD,IAAIsrC,2BAA6B,SAASxvF,EAAO6F,GAE9C,cAAe7F,IAClBA,EAAM6W,UAAY,YAUpB,IAAIyyE,EAAS,IAAI1lC,EAAW,MAC5B0lC,EAAOC,QAAQ,IAQf,IAPA,IAKIp4B,EALAu5B,EAAW,EACXlB,EAAQ,SAASz+E,EAAGoG,GAAI,OAAOpG,EAAIoG,CAAE,EAGrC+/C,GAAM,IAAI18C,KAEVi7E,EAAQ,EACS,OAAfzvF,EAAMW,OAAkBkF,GAAK,GAAK4pF,EAAQ5pF,IAAI,CAElD,GAAmB,IAAhB7F,EAAMA,MAAa,CAQpB,IAAI6L,EAAoB,OAAZ7L,EAAMgG,EAAchG,EAAMsvF,MAAQtvF,EAAMqvF,MAChDzE,EAAQ/+E,EAAO,EAGE,IAAlB7L,EAAMuvF,SACPvvF,EAAM0O,IAAM,IAAIk1C,EAAW/3C,EAAM7L,EAAM0pF,KAEnC1pF,EAAM0O,IAAIm8E,QAAQD,IACpB5qF,EAAM0O,IAAIo8E,UACRlnC,EAAWc,IAAIqmC,UAAUH,GAAQpB,EAAOxpF,EAAM0O,KAGlD1O,EAAM0O,IAAIw7E,WAAW,GAAKlqF,EAAM0O,IAAI81C,IAAI8kC,GAAQ0B,YAAa,GAC7DN,EAAW,IAET1qF,EAAMuvF,SACkB,IAAlBvvF,EAAMuvF,QAEXvvF,EAAM0O,IAAI41C,YAAcz4C,EAEzB7L,EAAMuvF,QAAU,EAERvvF,EAAM0O,IAAIi8E,gBAClB8D,EAAqBzuF,EAAM0O,IAAI41C,gBAC7BtkD,EAAMuvF,QAGRvvF,EAAM0O,IAAIw7E,WAAWb,EAAaqB,IAAa,GAAI,GAE3B,IAAlB1qF,EAAMuvF,QAEdvvF,EAAMuvF,QAE6B,IADhCvvF,EAAM0O,IAAIi/E,SAAS/pC,EAAWc,KAAKopC,IAAI9tF,EAAMyG,GAC3Cg+C,UAAUb,EAAWc,KAAc,EAAI,EAClB,IAAlB1kD,EAAMuvF,UAEdvvF,EAAMuvF,QAAU,EACD,OAAZvvF,EAAMgG,EACPhG,EAAMgG,EAAIhG,EAAM0O,IAEhB1O,EAAMoG,EAAIpG,EAAM0O,IAIH,OAAZ1O,EAAMgG,GAA0B,OAAZhG,EAAMoG,KACzBpG,EAAMA,MAEVA,EAAM0O,IAAM,KAEhB,MAAO,GAAmB,IAAhB1O,EAAMA,MAEXA,EAAMgG,EAAEy+C,UAAUzkD,EAAMoG,GAAK,IAC9BpG,EAAM0O,IAAM1O,EAAMgG,EAClBhG,EAAMgG,EAAIhG,EAAMoG,EAChBpG,EAAMoG,EAAIpG,EAAM0O,OAEhB1O,EAAMA,WACH,GAAmB,IAAhBA,EAAMA,MAEdA,EAAM0vF,GAAK1vF,EAAMgG,EAAE2nF,SAAS/pC,EAAWc,KACvC1kD,EAAM2vF,GAAK3vF,EAAMoG,EAAEunF,SAAS/pC,EAAWc,KACvC1kD,EAAM4vF,IAAM5vF,EAAM0vF,GAAGx+E,SAASlR,EAAM2vF,MAClC3vF,EAAMA,WACH,GAAmB,IAAhBA,EAAMA,MAE0C,IAArDA,EAAM4vF,IAAI9B,IAAI9tF,EAAMyG,GAAGg+C,UAAUb,EAAWc,OAE3C1kD,EAAMA,OAGRA,EAAMgG,EAAI,KACVhG,EAAMoG,EAAI,KACVpG,EAAMA,MAAQ,QAEX,GAAmB,IAAhBA,EAAMA,MAEdA,EAAM6F,EAAI7F,EAAMgG,EAAEkL,SAASlR,EAAMoG,GAG9BpG,EAAM6F,EAAEy+C,cAAgBtkD,EAAM6L,OAE7B7L,EAAMA,OAGRA,EAAMoG,EAAI,KACVpG,EAAMA,MAAQ,QAEX,GAAmB,IAAhBA,EAAMA,MAAa,CAE3B,IAAIwG,EAAIxG,EAAMyG,EAAEonF,WAAW7tF,EAAM4vF,KACjC5vF,EAAMW,KAAO,CACX+V,WAAYrY,EAAI6lD,IAAI2rC,cAClB7vF,EAAM6F,EAAG7F,EAAMyG,EAAGD,EAAGxG,EAAMgG,EAAGhG,EAAMoG,EACpCI,EAAEg+C,IAAIxkD,EAAM0vF,IAAKlpF,EAAEg+C,IAAIxkD,EAAM2vF,IAC7B3vF,EAAMoG,EAAEynF,WAAW7tF,EAAMgG,IAC3Bm+C,UAAW9lD,EAAI6lD,IAAI4rC,aAAa9vF,EAAM6F,EAAG7F,EAAMyG,GAEnD,CAIAgpF,IADAt+B,GAAM,IAAI38C,MACI08C,EACdA,EAAKC,CACP,CAEA,OAAsB,OAAfnxD,EAAMW,IACf,EAgCAtC,EAAI6lD,IAAIq+B,gBAAkB,SAAS12E,EAAMpF,EAAGzI,EAASkM,GAgDnD,GA9CwB,IAArBoK,UAAUvR,OACQ,kBAAT8I,GACR7N,EAAU6N,EACVA,OAAOg9C,GACiB,oBAATh9C,IACf3B,EAAW2B,EACXA,OAAOg9C,GAEoB,IAArBv0C,UAAUvR,OAEC,kBAAT8I,EACQ,oBAANpF,GACRyD,EAAWzD,EACXA,OAAIoiD,GACiB,kBAANpiD,IACfzI,EAAUyI,EACVA,OAAIoiD,IAGN7qD,EAAU6N,EACV3B,EAAWzD,EACXoF,OAAOg9C,EACPpiD,OAAIoiD,GAEuB,IAArBv0C,UAAUvR,SAEF,kBAAN0D,EACc,oBAAZzI,IACRkM,EAAWlM,EACXA,OAAU6qD,IAGZ3+C,EAAWlM,EACXA,EAAUyI,EACVA,OAAIoiD,IAGR7qD,EAAUA,GAAW,CAAC,OACV6qD,IAATh9C,IACDA,EAAO7N,EAAQ6N,MAAQ,WAEhBg9C,IAANpiD,IACDA,EAAIzI,EAAQyI,GAAK,QAIftI,EAAMH,QAAQC,oBAAsBD,EAAQwJ,MAC9CqE,GAAQ,KAAOA,GAAQ,QAAgB,QAANpF,GAAuB,IAANA,GAClD,GAAGyD,EAAU,CAEX,GAAGwkF,EAAkB,mBACnB,OAAOtnF,EAAQm7E,gBAAgB,MAAO,CACpCwN,cAAelkF,EACfmkF,eAAgBvpF,EAChBwpF,kBAAmB,CACjBtxF,KAAM,OACNuV,OAAQ,OAEVg8E,mBAAoB,CAClBvxF,KAAM,QACNuV,OAAQ,QAET,SAAS7J,EAAK4M,EAAKE,GACpB,GAAG9M,EACD,OAAOH,EAASG,GAElBH,EAAS,KAAM,CACbwM,WAAYrY,EAAIW,kBAAkBmY,GAClCgtC,UAAW9lD,EAAIikE,iBAAiBrrD,IAEpC,GAEF,GAAG23E,EAAoB,gBACrBA,EAAoB,aAEpB,OAAO/vF,EAAKkK,YAAYC,OAAO6lF,OAAO9gC,YAAY,CAChD1pD,KAAM,oBACN0rF,cAAelkF,EACfmkF,eAAgBjB,EAAiBtoF,GACjCw9C,KAAM,CAAC5/C,KAAM,aACZ,EAA+B,CAAC,OAAQ,WAC1Cu7B,KAAK,SAASuwD,GACb,OAAOtxF,EAAKkK,YAAYC,OAAO6lF,OAAOuB,UACpC,QAASD,EAAKz5E,WAElB,GAAGkpB,UAAKipB,EAAW,SAASx+C,GAC1BH,EAASG,EACX,GAAGu1B,KAAK,SAASywD,GACf,GAAGA,EAAO,CACR,IAAI35E,EAAarY,EAAIgB,mBACnBjB,EAAKgB,QAAQjB,EAAMU,KAAKC,aAAauxF,KACvCnmF,EAAS,KAAM,CACbwM,WAAYA,EACZytC,UAAW9lD,EAAIiyF,gBAAgB55E,EAAW7Q,EAAG6Q,EAAWjQ,IAE5D,CACF,GAEF,GAAGqoF,EAAsB,gBACvBA,EAAsB,aAAc,CACpC,IAAIyB,EAAQ1xF,EAAKkK,YAAYE,SAAS4lF,OAAO9gC,YAAY,CACvD1pD,KAAM,oBACN0rF,cAAelkF,EACfmkF,eAAgBjB,EAAiBtoF,GACjCw9C,KAAM,CAAC5/C,KAAM,aACZ,EAA+B,CAAC,OAAQ,WAqB3C,OApBAksF,EAAMC,WAAa,SAAS/pF,GAC1B,IAAI0pF,EAAO1pF,EAAEkf,OAAOgjC,OAChB8nC,EAAW5xF,EAAKkK,YAAYE,SAAS4lF,OAAOuB,UAC9C,QAASD,EAAKz5E,YAChB+5E,EAASD,WAAa,SAAS/pF,GAC7B,IAAI4pF,EAAQ5pF,EAAEkf,OAAOgjC,OACjBjyC,EAAarY,EAAIgB,mBACnBjB,EAAKgB,QAAQjB,EAAMU,KAAKC,aAAauxF,KACvCnmF,EAAS,KAAM,CACbwM,WAAYA,EACZytC,UAAW9lD,EAAIiyF,gBAAgB55E,EAAW7Q,EAAG6Q,EAAWjQ,IAE5D,EACAgqF,EAASC,QAAU,SAASrmF,GAC1BH,EAASG,EACX,CACF,OACAkmF,EAAMG,QAAU,SAASrmF,GACvBH,EAASG,EACX,EAEF,CACF,MAEE,GAAGqkF,EAAkB,uBAAwB,CAC3C,IAAIlM,EAAUp7E,EAAQupF,oBAAoB,MAAO,CAC/CZ,cAAelkF,EACfmkF,eAAgBvpF,EAChBwpF,kBAAmB,CACjBtxF,KAAM,OACNuV,OAAQ,OAEVg8E,mBAAoB,CAClBvxF,KAAM,QACNuV,OAAQ,SAGZ,MAAO,CACLwC,WAAYrY,EAAIW,kBAAkBwjF,EAAQ9rE,YAC1CytC,UAAW9lD,EAAIikE,iBAAiBkgB,EAAQr+B,WAE5C,CAKJ,IAAInkD,EAAQ3B,EAAI6lD,IAAIirC,6BAA6BtjF,EAAMpF,EAAGzI,GAC1D,IAAIkM,EAEF,OADA7L,EAAI6lD,IAAIsrC,2BAA2BxvF,EAAO,GACnCA,EAAMW,MAiqBjB,SAA0BX,EAAOhC,EAASkM,GAClB,oBAAZlM,IACRkM,EAAWlM,EACXA,EAAU,CAAC,GAEbA,EAAUA,GAAW,CAAC,EAEtB,IAAIytF,EAAO,CACT50E,UAAW,CACTxS,KAAMrG,EAAQ6Y,WAAa,WAC3B7Y,QAAS,CACP47D,QAAS57D,EAAQ47D,SAAW,EAC5BkwB,SAAU9rF,EAAQ8rF,UAAY,IAC9BC,aAAc/rF,EAAQ+rF,gBAIzB,SAAU/rF,IACXytF,EAAKjkF,KAAOxJ,EAAQwJ,MAKtB,SAASyC,IAEP2mF,EAAS5wF,EAAMsvF,MAAO,SAASjlF,EAAKqE,GAClC,OAAGrE,EACMH,EAASG,IAElBrK,EAAMgG,EAAI0I,EACK,OAAZ1O,EAAMoG,EACAvD,EAAOwH,EAAKrK,EAAMoG,QAE3BwqF,EAAS5wF,EAAMqvF,MAAOxsF,GACxB,EACF,CAEA,SAAS+tF,EAAS/kF,EAAM3B,GACtB/L,EAAMirF,MAAMK,sBAAsB59E,EAAM4/E,EAAMvhF,EAChD,CAEA,SAASrH,EAAOwH,EAAKqE,GACnB,GAAGrE,EACD,OAAOH,EAASG,GAOlB,GAHArK,EAAMoG,EAAIsI,EAGP1O,EAAMgG,EAAEy+C,UAAUzkD,EAAMoG,GAAK,EAAG,CACjC,IAAIgI,EAAMpO,EAAMgG,EAChBhG,EAAMgG,EAAIhG,EAAMoG,EAChBpG,EAAMoG,EAAIgI,CACZ,CAGA,GACiC,IAD9BpO,EAAMgG,EAAE2nF,SAAS/pC,EAAWc,KAAKopC,IAAI9tF,EAAMyG,GAC3Cg+C,UAAUb,EAAWc,KAGtB,OAFA1kD,EAAMgG,EAAI,UACViE,IAKF,GACiC,IAD9BjK,EAAMoG,EAAEunF,SAAS/pC,EAAWc,KAAKopC,IAAI9tF,EAAMyG,GAC3Cg+C,UAAUb,EAAWc,KAGtB,OAFA1kD,EAAMoG,EAAI,UACVwqF,EAAS5wF,EAAMqvF,MAAOxsF,GAUxB,GALA7C,EAAM0vF,GAAK1vF,EAAMgG,EAAE2nF,SAAS/pC,EAAWc,KACvC1kD,EAAM2vF,GAAK3vF,EAAMoG,EAAEunF,SAAS/pC,EAAWc,KACvC1kD,EAAM4vF,IAAM5vF,EAAM0vF,GAAGx+E,SAASlR,EAAM2vF,IAGoB,IAArD3vF,EAAM4vF,IAAI9B,IAAI9tF,EAAMyG,GAAGg+C,UAAUb,EAAWc,KAI7C,OAFA1kD,EAAMgG,EAAIhG,EAAMoG,EAAI,UACpB6D,IAMF,GADAjK,EAAM6F,EAAI7F,EAAMgG,EAAEkL,SAASlR,EAAMoG,GAC9BpG,EAAM6F,EAAEy+C,cAAgBtkD,EAAM6L,KAI/B,OAFA7L,EAAMoG,EAAI,UACVwqF,EAAS5wF,EAAMqvF,MAAOxsF,GAKxB,IAAI2D,EAAIxG,EAAMyG,EAAEonF,WAAW7tF,EAAM4vF,KACjC5vF,EAAMW,KAAO,CACX+V,WAAYrY,EAAI6lD,IAAI2rC,cAClB7vF,EAAM6F,EAAG7F,EAAMyG,EAAGD,EAAGxG,EAAMgG,EAAGhG,EAAMoG,EACpCI,EAAEg+C,IAAIxkD,EAAM0vF,IAAKlpF,EAAEg+C,IAAIxkD,EAAM2vF,IAC7B3vF,EAAMoG,EAAEynF,WAAW7tF,EAAMgG,IAC3Bm+C,UAAW9lD,EAAI6lD,IAAI4rC,aAAa9vF,EAAM6F,EAAG7F,EAAMyG,IAGjDyD,EAAS,KAAMlK,EAAMW,KACvB,CApFAsJ,GAqFF,CAzwBE4mF,CAAiB7wF,EAAOhC,EAASkM,EACnC,EAUA7L,EAAIiyF,gBAAkBjyF,EAAI6lD,IAAI4rC,aAAe,SAASjqF,EAAGY,GACvD,IAAIlH,EAAM,CACRsG,EAAGA,EACHY,EAAGA,EAoBLlH,QAAc,SAASgM,EAAMyzD,EAAQ8xB,GAOnC,GANqB,kBAAX9xB,EACRA,EAASA,EAAO1rD,mBACGu1C,IAAXmW,IACRA,EAAS,oBAGG,qBAAXA,EACDA,EAAS,CACPp/D,OAAQ,SAAS6F,EAAGlG,EAAK0X,GACvB,OAAOg3E,EAAkBxoF,EAAGlG,EAAK,GAAMI,UACzC,QAEG,GAAc,aAAXq/D,GAAoC,eAAXA,EACjCA,EAAS,CACPp/D,OAAQ,SAAS6F,EAAGlG,GAClB,OAAOpB,EAAMinF,MAAMG,gBAAgBhmF,EAAKkG,EAAGqrF,EAC7C,QAEG,IAAsD,IAAnD,CAAC,MAAO,OAAQ,OAAQ,MAAM5sE,QAAQ86C,GAC9CA,EAAS,CAACp/D,OAAQ,SAAS6G,GAAI,OAAOA,CAAE,QACnC,GAAqB,kBAAXu4D,EACf,MAAM,IAAIpgE,MAAM,mCAAqCogE,EAAS,MAIhE,IAAIv4D,EAAIu4D,EAAOp/D,OAAO2L,EAAMhM,GAAK,GACjC,OAAOlB,EAAI6lD,IAAIz3C,QAAQhG,EAAGlH,GAAK,EACjC,EAqCAA,OAAa,SAAS0E,EAAQq7D,EAAWN,EAAQhhE,GAC1B,kBAAXghE,EACRA,EAASA,EAAO1rD,mBACGu1C,IAAXmW,IACRA,EAAS,0BAEInW,IAAZ7qD,IACDA,EAAU,CACR+yF,sBAAsB,IAGrB,yBAA0B/yF,IAC7BA,EAAQ+yF,sBAAuB,GAGnB,sBAAX/xB,EACDA,EAAS,CACPK,OAAQ,SAASp7D,EAAQuC,GAEvBA,EAAI+nF,EAAkB/nF,EAAGjH,GAAK,GAE9B,IAAIJ,EAAMf,EAAKgB,QAAQoH,EAAG,CACxBoqE,cAAe5yE,EAAQ+yF,uBAIrBxzD,EAAU,CAAC,EACXoqB,EAAS,GACb,IAAIvpD,EAAKwpD,SAASzoD,EAAKiuF,EAAqB7vD,EAASoqB,GAKnD,MAJI1oD,EAAQ,IAAIL,MACd,8EAEI+oD,OAASA,EACT1oD,EAKR,IAUMA,EAVFknD,EAAM/nD,EAAK8nD,SAAS3oB,EAAQyzD,qBAChC,GAAK7qC,IAAQhoD,EAAMqlD,KAAKytC,KACtB9qC,IAAQhoD,EAAMqlD,KAAKtrC,KACnBiuC,IAAQhoD,EAAMqlD,KAAKhtC,MACnB2vC,IAAQhoD,EAAMqlD,KAAKojC,QACnBzgC,IAAQhoD,EAAMqlD,KAAKhD,QACnB2F,IAAQhoD,EAAMqlD,KAAKmK,QACnBxH,IAAQhoD,EAAMqlD,KAAK+C,QACnBJ,IAAQhoD,EAAMqlD,KAAK,eACnB2C,IAAQhoD,EAAMqlD,KAAK,cAInB,MAHIvkD,EAAQ,IAAIL,MACd,0DACIunD,IAAMA,EACNlnD,EAIR,IAAGknD,IAAQhoD,EAAMqlD,KAAKytC,KAAO9qC,IAAQhoD,EAAMqlD,KAAKtrC,QACzC,eAAgBqlB,GACnB,MAAM,IAAI3+B,MACR,0HAON,OAAOqF,IAAWs5B,EAAQt5B,MAC5B,GAEiB,SAAX+6D,GAAgC,SAAXA,GAAgC,OAAXA,IAClDA,EAAS,CACPK,OAAQ,SAASp7D,EAAQuC,GAGvB,OAAOvC,KADPuC,EAAI+nF,EAAkB/nF,EAAGjH,GAAK,GAEhC,IAKJ,IAAIiH,EAAInI,EAAI6lD,IAAIhhD,QAAQo8D,EAAW//D,GAAK,GAAM,GAC9C,OAAOy/D,EAAOK,OAAOp7D,EAAQuC,EAAGjH,EAAIsG,EAAEy+C,YACxC,GAEA,OAAO/kD,CACT,EAiBAlB,EAAI6yF,iBAAmB7yF,EAAI6lD,IAAI2rC,cAAgB,SAC7ChqF,EAAGY,EAAGD,EAAGR,EAAGI,EAAGsnF,EAAIE,EAAIv2E,GACvB,IAAI9X,EAAM,CACRsG,EAAGA,EACHY,EAAGA,EACHD,EAAGA,EACHR,EAAGA,EACHI,EAAGA,EACHsnF,GAAIA,EACJE,GAAIA,EACJv2E,KAAMA,EAgBR9X,QAAc,SAASgM,EAAMyzD,EAAQ8xB,GACd,kBAAX9xB,EACRA,EAASA,EAAO1rD,mBACGu1C,IAAXmW,IACRA,EAAS,oBAIX,IAAIx4D,EAAInI,EAAI6lD,IAAIhhD,QAAQqI,EAAMhM,GAAK,GAAO,GAE1C,GAAc,qBAAXy/D,EACDA,EAAS,CAACvgE,OAAQ8vF,QACb,GAAc,aAAXvvB,GAAoC,eAAXA,EACjCA,EAAS,CACPvgE,OAAQ,SAAS+H,EAAGjH,GAClB,OAAOpB,EAAMinF,MAAMY,gBAAgBzmF,EAAKiH,EAAGsqF,EAC7C,OAEG,KAAsD,IAAnD,CAAC,MAAO,OAAQ,OAAQ,MAAM5sE,QAAQ86C,GAG9C,MAAM,IAAIpgE,MAAM,mCAAqCogE,EAAS,MAF9DA,EAAS,CAACvgE,OAAQ,SAAS+H,GAAI,OAAOA,CAAE,EAG1C,CAGA,OAAOw4D,EAAOvgE,OAAO+H,EAAGjH,GAAK,EAC/B,EAqBAA,KAAW,SAASyI,EAAIg3D,GAOtB,IAAIkvB,GAAK,EAEY,kBAAXlvB,IACRA,EAASA,EAAO1rD,oBAGJu1C,IAAXmW,GAAmC,sBAAXA,GACzBA,EAAS,CAACp/D,OAAQytF,GAClBa,EAAK,GACc,SAAXlvB,GAAgC,SAAXA,GAAgC,OAAXA,IAClDA,EAAS,CAACp/D,OAAQ,WAAY,OAAOoI,CAAG,GACxCkmF,EAAK,GAIP,IAAI1nF,EAAIw4D,EAAOp/D,OAAOoI,EAAIzI,EAAIsG,EAAEy+C,aAChC,OAAOjmD,EAAI6lD,IAAIz3C,QAAQjG,EAAGjH,EAAK2uF,EACjC,GAEA,OAAO3uF,CACT,EASAlB,EAAI+pD,kBAAoB,SAASD,GAE/B,OAAO/pD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAa,GAAGnnD,YAEvBvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAC1DlnD,EAAK4F,OACH5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EACrCpnD,EAAKipD,SAAShpD,EAAImlD,KAAKohB,eAAejlE,YACxCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,MAG3DlpD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKK,aAAa,EACvDtnD,EAAKqB,MAAM0oD,GAAQxoD,aAEzB,EAUAtB,EAAIgB,mBAAqB,SAASF,GAEhC,IAmBI0G,EAAGY,EAAGD,EAAGR,EAAGI,EAAGsnF,EAAIE,EAAIv2E,EAnBvBkmB,EAAU,CAAC,EACXoqB,EAAS,GAQb,GAPGvpD,EAAKwpD,SAASzoD,EAAKusF,EAAqBnuD,EAASoqB,KAClDxoD,EAAMf,EAAKgB,QAAQjB,EAAMU,KAAKC,aAAay+B,EAAQ7mB,cAIrD6mB,EAAU,CAAC,EACXoqB,EAAS,IACLvpD,EAAKwpD,SAASzoD,EAAK+tF,EAAwB3vD,EAASoqB,GAAS,CAC/D,IAAI1oD,EAAQ,IAAIL,MAAM,4EAGtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CAgBA,OAVA4G,EAAI1H,EAAMU,KAAKC,aAAay+B,EAAQ4zD,mBAAmBv5E,QACvDnR,EAAItI,EAAMU,KAAKC,aAAay+B,EAAQ6zD,0BAA0Bx5E,QAC9DpR,EAAIrI,EAAMU,KAAKC,aAAay+B,EAAQ8zD,2BAA2Bz5E,QAC/D5R,EAAI7H,EAAMU,KAAKC,aAAay+B,EAAQ+zD,kBAAkB15E,QACtDxR,EAAIjI,EAAMU,KAAKC,aAAay+B,EAAQg0D,kBAAkB35E,QACtD81E,EAAKvvF,EAAMU,KAAKC,aAAay+B,EAAQi0D,qBAAqB55E,QAC1Dg2E,EAAKzvF,EAAMU,KAAKC,aAAay+B,EAAQk0D,qBAAqB75E,QAC1DP,EAAOlZ,EAAMU,KAAKC,aAAay+B,EAAQm0D,uBAAuB95E,QAGvDvZ,EAAI6yF,iBACT,IAAIttC,EAAW/9C,EAAG,IAClB,IAAI+9C,EAAWn9C,EAAG,IAClB,IAAIm9C,EAAWp9C,EAAG,IAClB,IAAIo9C,EAAW59C,EAAG,IAClB,IAAI49C,EAAWx9C,EAAG,IAClB,IAAIw9C,EAAW8pC,EAAI,IACnB,IAAI9pC,EAAWgqC,EAAI,IACnB,IAAIhqC,EAAWvsC,EAAM,IACzB,EASAhZ,EAAIqB,iBAAmBrB,EAAIszF,0BAA4B,SAASpyF,GAE9D,OAAOnB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnDxnD,EAAK0oD,aAAa,GAAGnnD,YAEvBvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAIsG,IAEjBzH,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAIkH,IAEjBrI,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAIiH,IAEjBpI,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAIyG,IAEjB5H,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAI6G,IAEjBhI,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAImuF,KAEjBtvF,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAIquF,KAEjBxvF,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAI8X,QAErB,EASAhZ,EAAIkkE,kBAAoB,SAASpjE,GAE/B,IAAIo+B,EAAU,CAAC,EACXoqB,EAAS,GACb,GAAGvpD,EAAKwpD,SAASzoD,EAAKi+D,EAAoB7/B,EAASoqB,GAAS,CAE1D,IAEM1oD,EAFFknD,EAAM/nD,EAAK8nD,SAAS3oB,EAAQonC,cAChC,GAAGxe,IAAQ9nD,EAAImlD,KAAKohB,cAGlB,MAFI3lE,EAAQ,IAAIL,MAAM,yCAChBunD,IAAMA,EACNlnD,EAERE,EAAMo+B,EAAQq0D,YAChB,CAIA,GADAjqC,EAAS,IACLvpD,EAAKwpD,SAASzoD,EAAKguF,EAAuB5vD,EAASoqB,GAIrD,MAHI1oD,EAAQ,IAAIL,MAAM,2EAEhB+oD,OAASA,EACT1oD,EAIR,IAAI4G,EAAI1H,EAAMU,KAAKC,aAAay+B,EAAQs0D,kBAAkBj6E,QACtDnR,EAAItI,EAAMU,KAAKC,aAAay+B,EAAQu0D,mBAAmBl6E,QAG3D,OAAOvZ,EAAIiyF,gBACT,IAAI1sC,EAAW/9C,EAAG,IAClB,IAAI+9C,EAAWn9C,EAAG,IACtB,EASApI,EAAIokE,gBAAkBpkE,EAAI0zF,gCAAkC,SAASxyF,GAEnE,OAAOnB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAE1DlnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKG,KAAK,EAC/CpnD,EAAKipD,SAAShpD,EAAImlD,KAAKohB,eAAejlE,YAExCvB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKiC,MAAM,EAAO,MAG3DlpD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKmY,WAAW,EAAO,CAC5Dn/D,EAAIskE,wBAAwBpjE,MAGlC,EASAlB,EAAIskE,wBAA0B,SAASpjE,GAErC,OAAOnB,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKC,UAAU,EAAM,CAEjElnD,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAIsG,IAEjBzH,EAAK4F,OAAO5F,EAAK+mD,MAAMC,UAAWhnD,EAAKinD,KAAKO,SAAS,EACnD4oC,EAAWjvF,EAAIkH,KAErB,C,iBCr9CA,IAKIurF,EALA7zF,EAAQD,EAAQ,IAEpBJ,EAAOC,QAAUI,EAAM0lD,KAAO1lD,EAAM0lD,MAAQ,CAAC,EAU7C,SAASD,EAAWv9C,EAAEE,EAAEtG,GACtB2O,KAAKrD,KAAO,GACJ,MAALlF,IACE,iBAAmBA,EAAGuI,KAAKqjF,WAAW5rF,EAAEE,EAAEtG,GAChC,MAALsG,GAAa,iBAAmBF,EAAGuI,KAAKsjF,WAAW7rF,EAAE,KACxDuI,KAAKsjF,WAAW7rF,EAAEE,GAC3B,CAIA,SAAS4rF,IAAQ,OAAO,IAAIvuC,EAAW,KAAO,CAmC9C,SAASwuC,EAAI3uF,EAAEsH,EAAE4yB,EAAE/wB,EAAE3M,EAAE4F,GAErB,IADA,IAAIwsF,EAAO,MAAFtnF,EAAUo9B,EAAKp9B,GAAG,KACnBlF,GAAK,GAAG,CACd,IAAIL,EAAiB,MAAboJ,KAAKrD,KAAK9H,GACdiD,EAAIkI,KAAKrD,KAAK9H,MAAM,GACpBgC,EAAI0iC,EAAG3iC,EAAEkB,EAAE2rF,EAEfpyF,IADAuF,EAAI6sF,EAAG7sF,IAAM,MAAFC,IAAW,IAAIk4B,EAAEpyB,KAAKqB,GAAG3M,IAC5B,KAAKwF,GAAG,IAAI0iC,EAAGzhC,EACvBi3B,EAAEpyB,KAAKqB,KAAS,UAAFpH,CAChB,CACA,OAAOvF,CACT,CAjDA9B,EAAM0lD,KAAKD,WAAaA,EAoDC,qBAAflD,WAEPkD,EAAWj+C,UAAU2sF,GAAKF,EAC1BJ,EAAQ,IAC6B,+BAArBtxC,UAAU6xC,SAC3B3uC,EAAWj+C,UAAU2sF,GAjCvB,SAAa7uF,EAAEsH,EAAE4yB,EAAE/wB,EAAE3M,EAAE4F,GAErB,IADA,IAAIwsF,EAAO,MAAFtnF,EAAUo9B,EAAKp9B,GAAG,KACnBlF,GAAK,GAAG,CACd,IAAIL,EAAiB,MAAboJ,KAAKrD,KAAK9H,GACdiD,EAAIkI,KAAKrD,KAAK9H,MAAM,GACpBgC,EAAI0iC,EAAG3iC,EAAEkB,EAAE2rF,EAEfpyF,IADAuF,EAAI6sF,EAAG7sF,IAAM,MAAFC,IAAW,IAAIk4B,EAAEpyB,KAAKqB,IAAM,WAAF3M,MAC5B,KAAKwF,IAAI,IAAI0iC,EAAGzhC,GAAGzG,IAAI,IAChC09B,EAAEpyB,KAAKqB,KAAS,WAAFpH,CAChB,CACA,OAAOvF,CACT,EAuBE+xF,EAAQ,IAC8B,YAArBtxC,UAAU6xC,SAC3B3uC,EAAWj+C,UAAU2sF,GA/CvB,SAAa7uF,EAAEsH,EAAE4yB,EAAE/wB,EAAE3M,EAAE4F,GACrB,OAAQA,GAAK,GAAG,CACd,IAAI2T,EAAIzO,EAAE6D,KAAKrD,KAAK9H,KAAKk6B,EAAEpyB,KAAKqB,GAAG3M,EACnCA,EAAImJ,KAAKK,MAAM+P,EAAE,UACjBmkB,EAAEpyB,KAAKqB,KAAS,SAAF4M,CAChB,CACA,OAAOvZ,CACT,EAyCE+xF,EAAQ,KAERpuC,EAAWj+C,UAAU2sF,GAAKF,EAC1BJ,EAAQ,IAGVpuC,EAAWj+C,UAAUkgF,GAAKmM,EAC1BpuC,EAAWj+C,UAAU6sF,IAAO,GAAGR,GAAO,EACtCpuC,EAAWj+C,UAAU8sF,GAAM,GAAGT,EAG9BpuC,EAAWj+C,UAAU+sF,GAAKtpF,KAAKkI,IAAI,EADvB,IAEZsyC,EAAWj+C,UAAUgtF,GAFT,GAEoBX,EAChCpuC,EAAWj+C,UAAUitF,GAAK,EAAEZ,EAHhB,GAMZ,IAEIa,EAAGC,EADHC,EAAQ,IAAI7qF,MAGhB,IADA2qF,EAAK,IAAI9pC,WAAW,GAChB+pC,EAAK,EAAGA,GAAM,IAAKA,EAAIC,EAAMF,KAAQC,EAEzC,IADAD,EAAK,IAAI9pC,WAAW,GAChB+pC,EAAK,GAAIA,EAAK,KAAMA,EAAIC,EAAMF,KAAQC,EAE1C,IADAD,EAAK,IAAI9pC,WAAW,GAChB+pC,EAAK,GAAIA,EAAK,KAAMA,EAAIC,EAAMF,KAAQC,EAE1C,SAASE,EAASntF,GAAK,MAVX,uCAUwBue,OAAOve,EAAI,CAC/C,SAASotF,EAAMtxF,EAAE8B,GACf,IAAIxD,EAAI8yF,EAAMpxF,EAAEonD,WAAWtlD,IAC3B,OAAW,MAAHxD,GAAU,EAAEA,CACtB,CAmBA,SAASizF,EAAIzvF,GAAK,IAAIyhC,EAAIitD,IAAqB,OAAdjtD,EAAEqkD,QAAQ9lF,GAAWyhC,CAAG,CA6FzD,SAASiuD,EAAMpoF,GACb,IAAW0H,EAAPyyB,EAAI,EAMR,OALiB,IAAbzyB,EAAE1H,IAAI,MAAYA,EAAI0H,EAAGyyB,GAAK,IACnB,IAAXzyB,EAAE1H,GAAG,KAAWA,EAAI0H,EAAGyyB,GAAK,GACjB,IAAXzyB,EAAE1H,GAAG,KAAWA,EAAI0H,EAAGyyB,GAAK,GACjB,IAAXzyB,EAAE1H,GAAG,KAAWA,EAAI0H,EAAGyyB,GAAK,GACjB,IAAXzyB,EAAE1H,GAAG,KAAWA,EAAI0H,EAAGyyB,GAAK,GACzBA,CACT,CAkLA,SAASkuD,EAAQ3tF,GAAKmJ,KAAKnJ,EAAIA,CAAG,CA0ClC,SAAS4tF,EAAW5tF,GAClBmJ,KAAKnJ,EAAIA,EACTmJ,KAAK0kF,GAAK7tF,EAAE8tF,WACZ3kF,KAAK4kF,IAAc,MAAR5kF,KAAK0kF,GAChB1kF,KAAK6kF,IAAM7kF,KAAK0kF,IAAI,GACpB1kF,KAAK8kF,IAAM,GAAIjuF,EAAEogF,GAAG,IAAK,EACzBj3E,KAAK+kF,IAAM,EAAEluF,EAAEgN,CACjB,CAgQA,SAASmhF,EAAO7oF,EAAEoG,GAAK,OAAOpG,EAAEoG,CAAG,CAInC,SAASq4E,EAAMz+E,EAAEoG,GAAK,OAAOpG,EAAEoG,CAAG,CAIlC,SAAS0iF,EAAO9oF,EAAEoG,GAAK,OAAOpG,EAAEoG,CAAG,CAInC,SAAS2iF,EAAU/oF,EAAEoG,GAAK,OAAOpG,GAAGoG,CAAG,CA2BvC,SAAS4iF,EAAKhpF,GACd,GAAQ,GAALA,EAAQ,OAAQ,EACnB,IAAIm6B,EAAI,EAMR,OALiB,IAAX,MAAFn6B,KAAkBA,IAAM,GAAIm6B,GAAK,IACtB,IAAT,IAAFn6B,KAAgBA,IAAM,EAAGm6B,GAAK,GACpB,IAAR,GAAFn6B,KAAeA,IAAM,EAAGm6B,GAAK,GACrB,IAAN,EAAFn6B,KAAaA,IAAM,EAAGm6B,GAAK,GACnB,IAAN,EAAFn6B,MAAam6B,EACVA,CACP,CAWA,SAAS8uD,EAAKjpF,GAEd,IADA,IAAIm6B,EAAI,EACG,GAALn6B,GAAUA,GAAKA,EAAE,IAAKm6B,EAC5B,OAAOA,CACP,CA0GA,SAAS+uD,IAAW,CACpB,SAASC,EAAKnpF,GAAK,OAAOA,CAAG,CAuC7B,SAASopF,EAAQ1uF,GAEjBmJ,KAAKurD,GAAKg4B,IACVvjF,KAAKwlF,GAAKjC,IACVvuC,EAAWc,IAAI2vC,UAAU,EAAE5uF,EAAEgN,EAAE7D,KAAKurD,IACpCvrD,KAAK0lF,GAAK1lF,KAAKurD,GAAGo6B,OAAO9uF,GACzBmJ,KAAKnJ,EAAIA,CACT,CA/fA2tF,EAAQztF,UAAU6uF,QATlB,SAAkBzpF,GAChB,OAAGA,EAAEpJ,EAAI,GAAKoJ,EAAE05C,UAAU71C,KAAKnJ,IAAM,EAAUsF,EAAEy5C,IAAI51C,KAAKnJ,GAC9CsF,CACd,EAOAqoF,EAAQztF,UAAU8uF,OANlB,SAAiB1pF,GAAK,OAAOA,CAAG,EAOhCqoF,EAAQztF,UAAU+zD,OANlB,SAAiB3uD,GAAKA,EAAE2pF,SAAS9lF,KAAKnJ,EAAE,KAAKsF,EAAI,EAOjDqoF,EAAQztF,UAAUgvF,MANlB,SAAgB5pF,EAAEoG,EAAE+zB,GAAKn6B,EAAE6pF,WAAWzjF,EAAE+zB,GAAIt2B,KAAK8qD,OAAOx0B,EAAI,EAO5DkuD,EAAQztF,UAAUkvF,MANlB,SAAgB9pF,EAAEm6B,GAAKn6B,EAAE+pF,SAAS5vD,GAAIt2B,KAAK8qD,OAAOx0B,EAAI,EAqFtDmuD,EAAW1tF,UAAU6uF,QAzCrB,SAAqBzpF,GACnB,IAAIm6B,EAAIitD,IAIR,OAHApnF,EAAEgtD,MAAMs8B,UAAUzlF,KAAKnJ,EAAEgN,EAAEyyB,GAC3BA,EAAEwvD,SAAS9lF,KAAKnJ,EAAE,KAAKy/B,GACpBn6B,EAAEpJ,EAAI,GAAKujC,EAAEuf,UAAUb,EAAWmxC,MAAQ,GAAGnmF,KAAKnJ,EAAEuvF,MAAM9vD,EAAEA,GACxDA,CACT,EAoCAmuD,EAAW1tF,UAAU8uF,OAjCrB,SAAoB1pF,GAClB,IAAIm6B,EAAIitD,IAGR,OAFApnF,EAAEkqF,OAAO/vD,GACTt2B,KAAK8qD,OAAOx0B,GACLA,CACT,EA6BAmuD,EAAW1tF,UAAU+zD,OA1BrB,SAAoB3uD,GAClB,KAAMA,EAAE0H,GAAK7D,KAAK+kF,KAChB5oF,EAAEQ,KAAKR,EAAE0H,KAAO,EAClB,IAAI,IAAIhP,EAAI,EAAGA,EAAImL,KAAKnJ,EAAEgN,IAAKhP,EAAG,CAEhC,IAAImJ,EAAc,MAAV7B,EAAEQ,KAAK9H,GACXyxF,EAAMtoF,EAAEgC,KAAK4kF,MAAO5mF,EAAEgC,KAAK6kF,KAAK1oF,EAAEQ,KAAK9H,IAAI,IAAImL,KAAK4kF,IAAK5kF,KAAK8kF,KAAK,IAAK3oF,EAAEynF,GAK9E,IAHA5lF,EAAInJ,EAAEmL,KAAKnJ,EAAEgN,EACb1H,EAAEQ,KAAKqB,IAAMgC,KAAKnJ,EAAE6sF,GAAG,EAAE4C,EAAGnqF,EAAEtH,EAAE,EAAEmL,KAAKnJ,EAAEgN,GAEnC1H,EAAEQ,KAAKqB,IAAM7B,EAAE0nF,IAAM1nF,EAAEQ,KAAKqB,IAAM7B,EAAE0nF,GAAI1nF,EAAEQ,OAAOqB,IACzD,CACA7B,EAAEoqF,QACFpqF,EAAEqqF,UAAUxmF,KAAKnJ,EAAEgN,EAAE1H,GAClBA,EAAE05C,UAAU71C,KAAKnJ,IAAM,GAAGsF,EAAEiqF,MAAMpmF,KAAKnJ,EAAEsF,EAC9C,EAWAsoF,EAAW1tF,UAAUgvF,MALrB,SAAmB5pF,EAAEoG,EAAE+zB,GAAKn6B,EAAE6pF,WAAWzjF,EAAE+zB,GAAIt2B,KAAK8qD,OAAOx0B,EAAI,EAM/DmuD,EAAW1tF,UAAUkvF,MATrB,SAAmB9pF,EAAEm6B,GAAKn6B,EAAE+pF,SAAS5vD,GAAIt2B,KAAK8qD,OAAOx0B,EAAI,EAmCzD0e,EAAWj+C,UAAUsvF,OAlarB,SAAmB/vD,GACjB,IAAI,IAAIzhC,EAAImL,KAAK6D,EAAE,EAAGhP,GAAK,IAAKA,EAAGyhC,EAAE35B,KAAK9H,GAAKmL,KAAKrD,KAAK9H,GACzDyhC,EAAEzyB,EAAI7D,KAAK6D,EACXyyB,EAAEvjC,EAAIiN,KAAKjN,CACb,EA+ZAiiD,EAAWj+C,UAAU4jF,QA5ZrB,SAAoBx+E,GAClB6D,KAAK6D,EAAI,EACT7D,KAAKjN,EAAKoJ,EAAE,GAAI,EAAE,EACfA,EAAI,EAAG6D,KAAKrD,KAAK,GAAKR,EACjBA,GAAK,EAAG6D,KAAKrD,KAAK,GAAKR,EAAE6D,KAAK6jF,GACjC7jF,KAAK6D,EAAI,CAChB,EAuZAmxC,EAAWj+C,UAAUusF,WAjZrB,SAAuBvwF,EAAE4E,GACvB,IAAIlB,EACJ,GAAQ,IAALkB,EAASlB,EAAI,OACX,GAAQ,GAALkB,EAAQlB,EAAI,OACf,GAAQ,KAALkB,EAAUlB,EAAI,OACjB,GAAQ,GAALkB,EAAQlB,EAAI,OACf,GAAQ,IAALkB,EAASlB,EAAI,MAChB,IAAQ,GAALkB,EACoB,YAArBqI,KAAKymF,UAAU1zF,EAAE4E,GADRlB,EAAI,CACgB,CACpCuJ,KAAK6D,EAAI,EACT7D,KAAKjN,EAAI,EAET,IADA,IAAI8B,EAAI9B,EAAEoB,OAAQmpC,GAAK,EAAOpE,EAAK,IAC3BrkC,GAAK,GAAG,CACd,IAAIsH,EAAQ,GAAH1F,EAAW,IAAL1D,EAAE8B,GAAQwvF,EAAMtxF,EAAE8B,GAC9BsH,EAAI,EACa,KAAfpJ,EAAEyiB,OAAO3gB,KAAWyoC,GAAK,IAG9BA,GAAK,EACI,GAANpE,EACDl5B,KAAKrD,KAAKqD,KAAK6D,KAAO1H,EAChB+8B,EAAGziC,EAAIuJ,KAAKi3E,IAClBj3E,KAAKrD,KAAKqD,KAAK6D,EAAE,KAAO1H,GAAI,GAAI6D,KAAKi3E,GAAG/9C,GAAK,IAAKA,EAClDl5B,KAAKrD,KAAKqD,KAAK6D,KAAQ1H,GAAI6D,KAAKi3E,GAAG/9C,GAEnCl5B,KAAKrD,KAAKqD,KAAK6D,EAAE,IAAM1H,GAAG+8B,GAC5BA,GAAMziC,IACGuJ,KAAKi3E,KAAI/9C,GAAMl5B,KAAKi3E,IAC/B,CACQ,GAALxgF,GAAyB,IAAT,IAAL1D,EAAE,MACdiN,KAAKjN,GAAK,EACPmmC,EAAK,IAAGl5B,KAAKrD,KAAKqD,KAAK6D,EAAE,KAAQ,GAAI7D,KAAKi3E,GAAG/9C,GAAK,GAAIA,IAE3Dl5B,KAAKumF,QACFjpD,GAAI0X,EAAWmxC,KAAKC,MAAMpmF,KAAKA,KACpC,EA+WAg1C,EAAWj+C,UAAUwvF,MA5WrB,WAEE,IADA,IAAIl1F,EAAI2O,KAAKjN,EAAEiN,KAAK4jF,GACd5jF,KAAK6D,EAAI,GAAK7D,KAAKrD,KAAKqD,KAAK6D,EAAE,IAAMxS,KAAK2O,KAAK6D,CACvD,EA0WAmxC,EAAWj+C,UAAU0uF,UAxSrB,SAAsBxuF,EAAEq/B,GACtB,IAAIzhC,EACJ,IAAIA,EAAImL,KAAK6D,EAAE,EAAGhP,GAAK,IAAKA,EAAGyhC,EAAE35B,KAAK9H,EAAEoC,GAAK+I,KAAKrD,KAAK9H,GACvD,IAAIA,EAAIoC,EAAE,EAAGpC,GAAK,IAAKA,EAAGyhC,EAAE35B,KAAK9H,GAAK,EACtCyhC,EAAEzyB,EAAI7D,KAAK6D,EAAE5M,EACbq/B,EAAEvjC,EAAIiN,KAAKjN,CACb,EAmSAiiD,EAAWj+C,UAAUyvF,UAhSrB,SAAsBvvF,EAAEq/B,GACtB,IAAI,IAAIzhC,EAAIoC,EAAGpC,EAAImL,KAAK6D,IAAKhP,EAAGyhC,EAAE35B,KAAK9H,EAAEoC,GAAK+I,KAAKrD,KAAK9H,GACxDyhC,EAAEzyB,EAAIrJ,KAAKC,IAAIuF,KAAK6D,EAAE5M,EAAE,GACxBq/B,EAAEvjC,EAAIiN,KAAKjN,CACb,EA6RAiiD,EAAWj+C,UAAU2vF,SA1RrB,SAAqBzvF,EAAEq/B,GACrB,IAG0DzhC,EAHtD8xF,EAAK1vF,EAAE+I,KAAKi3E,GACZ2P,EAAM5mF,KAAKi3E,GAAG0P,EACdE,GAAM,GAAGD,GAAK,EACdE,EAAKtsF,KAAKK,MAAM5D,EAAE+I,KAAKi3E,IAAK5lF,EAAK2O,KAAKjN,GAAG4zF,EAAI3mF,KAAK4jF,GACtD,IAAI/uF,EAAImL,KAAK6D,EAAE,EAAGhP,GAAK,IAAKA,EAC1ByhC,EAAE35B,KAAK9H,EAAEiyF,EAAG,GAAM9mF,KAAKrD,KAAK9H,IAAI+xF,EAAKv1F,EACrCA,GAAK2O,KAAKrD,KAAK9H,GAAGgyF,IAAKF,EAEzB,IAAI9xF,EAAIiyF,EAAG,EAAGjyF,GAAK,IAAKA,EAAGyhC,EAAE35B,KAAK9H,GAAK,EACvCyhC,EAAE35B,KAAKmqF,GAAMz1F,EACbilC,EAAEzyB,EAAI7D,KAAK6D,EAAEijF,EAAG,EAChBxwD,EAAEvjC,EAAIiN,KAAKjN,EACXujC,EAAEiwD,OACJ,EA6QAvxC,EAAWj+C,UAAUgwF,SA1QrB,SAAqB9vF,EAAEq/B,GACrBA,EAAEvjC,EAAIiN,KAAKjN,EACX,IAAI+zF,EAAKtsF,KAAKK,MAAM5D,EAAE+I,KAAKi3E,IAC3B,GAAG6P,GAAM9mF,KAAK6D,EAAKyyB,EAAEzyB,EAAI,MAAzB,CACA,IAAI8iF,EAAK1vF,EAAE+I,KAAKi3E,GACZ2P,EAAM5mF,KAAKi3E,GAAG0P,EACdE,GAAM,GAAGF,GAAI,EACjBrwD,EAAE35B,KAAK,GAAKqD,KAAKrD,KAAKmqF,IAAKH,EAC3B,IAAI,IAAI9xF,EAAIiyF,EAAG,EAAGjyF,EAAImL,KAAK6D,IAAKhP,EAC9ByhC,EAAE35B,KAAK9H,EAAEiyF,EAAG,KAAO9mF,KAAKrD,KAAK9H,GAAGgyF,IAAKD,EACrCtwD,EAAE35B,KAAK9H,EAAEiyF,GAAM9mF,KAAKrD,KAAK9H,IAAI8xF,EAE5BA,EAAK,IAAGrwD,EAAE35B,KAAKqD,KAAK6D,EAAEijF,EAAG,KAAO9mF,KAAKjN,EAAE8zF,IAAKD,GAC/CtwD,EAAEzyB,EAAI7D,KAAK6D,EAAEijF,EACbxwD,EAAEiwD,OAXkC,CAYtC,EA4PAvxC,EAAWj+C,UAAUqvF,MAzPrB,SAAkB3uF,EAAE6+B,GAElB,IADA,IAAIzhC,EAAI,EAAGxD,EAAI,EAAGwF,EAAI2D,KAAKE,IAAIjD,EAAEoM,EAAE7D,KAAK6D,GAClChP,EAAIgC,GACRxF,GAAK2O,KAAKrD,KAAK9H,GAAG4C,EAAEkF,KAAK9H,GACzByhC,EAAE35B,KAAK9H,KAAOxD,EAAE2O,KAAK4jF,GACrBvyF,IAAM2O,KAAKi3E,GAEb,GAAGx/E,EAAEoM,EAAI7D,KAAK6D,EAAG,CAEf,IADAxS,GAAKoG,EAAE1E,EACD8B,EAAImL,KAAK6D,GACbxS,GAAK2O,KAAKrD,KAAK9H,GACfyhC,EAAE35B,KAAK9H,KAAOxD,EAAE2O,KAAK4jF,GACrBvyF,IAAM2O,KAAKi3E,GAEb5lF,GAAK2O,KAAKjN,CACZ,KAAO,CAEL,IADA1B,GAAK2O,KAAKjN,EACJ8B,EAAI4C,EAAEoM,GACVxS,GAAKoG,EAAEkF,KAAK9H,GACZyhC,EAAE35B,KAAK9H,KAAOxD,EAAE2O,KAAK4jF,GACrBvyF,IAAM2O,KAAKi3E,GAEb5lF,GAAKoG,EAAE1E,CACT,CACAujC,EAAEvjC,EAAK1B,EAAE,GAAI,EAAE,EACZA,GAAK,EAAGilC,EAAE35B,KAAK9H,KAAOmL,KAAK6jF,GAAGxyF,EACzBA,EAAI,IAAGilC,EAAE35B,KAAK9H,KAAOxD,GAC7BilC,EAAEzyB,EAAIhP,EACNyhC,EAAEiwD,OACJ,EA6NAvxC,EAAWj+C,UAAUivF,WAzNrB,SAAuBvuF,EAAE6+B,GACvB,IAAIn6B,EAAI6D,KAAKmpD,MAAO5mD,EAAI9K,EAAE0xD,MACtBt0D,EAAIsH,EAAE0H,EAEV,IADAyyB,EAAEzyB,EAAIhP,EAAE0N,EAAEsB,IACFhP,GAAK,GAAGyhC,EAAE35B,KAAK9H,GAAK,EAC5B,IAAIA,EAAI,EAAGA,EAAI0N,EAAEsB,IAAKhP,EAAGyhC,EAAE35B,KAAK9H,EAAEsH,EAAE0H,GAAK1H,EAAEunF,GAAG,EAAEnhF,EAAE5F,KAAK9H,GAAGyhC,EAAEzhC,EAAE,EAAEsH,EAAE0H,GAClEyyB,EAAEvjC,EAAI,EACNujC,EAAEiwD,QACCvmF,KAAKjN,GAAK0E,EAAE1E,GAAGiiD,EAAWmxC,KAAKC,MAAM9vD,EAAEA,EAC5C,EAiNA0e,EAAWj+C,UAAUmvF,SA9MrB,SAAqB5vD,GAGnB,IAFA,IAAIn6B,EAAI6D,KAAKmpD,MACTt0D,EAAIyhC,EAAEzyB,EAAI,EAAE1H,EAAE0H,IACVhP,GAAK,GAAGyhC,EAAE35B,KAAK9H,GAAK,EAC5B,IAAIA,EAAI,EAAGA,EAAIsH,EAAE0H,EAAE,IAAKhP,EAAG,CACzB,IAAIxD,EAAI8K,EAAEunF,GAAG7uF,EAAEsH,EAAEQ,KAAK9H,GAAGyhC,EAAE,EAAEzhC,EAAE,EAAE,IAC7ByhC,EAAE35B,KAAK9H,EAAEsH,EAAE0H,IAAI1H,EAAEunF,GAAG7uF,EAAE,EAAE,EAAEsH,EAAEQ,KAAK9H,GAAGyhC,EAAE,EAAEzhC,EAAE,EAAExD,EAAE8K,EAAE0H,EAAEhP,EAAE,KAAOsH,EAAE0nF,KAC/DvtD,EAAE35B,KAAK9H,EAAEsH,EAAE0H,IAAM1H,EAAE0nF,GACnBvtD,EAAE35B,KAAK9H,EAAEsH,EAAE0H,EAAE,GAAK,EAEtB,CACGyyB,EAAEzyB,EAAI,IAAGyyB,EAAE35B,KAAK25B,EAAEzyB,EAAE,IAAM1H,EAAEunF,GAAG7uF,EAAEsH,EAAEQ,KAAK9H,GAAGyhC,EAAE,EAAEzhC,EAAE,EAAE,IACtDyhC,EAAEvjC,EAAI,EACNujC,EAAEiwD,OACJ,EAiMAvxC,EAAWj+C,UAAU+uF,SA7LrB,SAAqBjvF,EAAEW,EAAE8+B,GACvB,IAAI0wD,EAAKnwF,EAAEsyD,MACX,KAAG69B,EAAGnjF,GAAK,GAAX,CACA,IAAIojF,EAAKjnF,KAAKmpD,MACd,GAAG89B,EAAGpjF,EAAImjF,EAAGnjF,EAGX,OAFQ,MAALrM,GAAWA,EAAEmjF,QAAQ,QAChB,MAALrkD,GAAWt2B,KAAKqmF,OAAO/vD,IAGpB,MAALA,IAAWA,EAAIitD,KAClB,IAAIhhF,EAAIghF,IAAO2D,EAAKlnF,KAAKjN,EAAGo0F,EAAKtwF,EAAE9D,EAC/Bq0F,EAAMpnF,KAAKi3E,GAAGsN,EAAMyC,EAAGrqF,KAAKqqF,EAAGnjF,EAAE,IAClCujF,EAAM,GAAKJ,EAAGN,SAASU,EAAI7kF,GAAI0kF,EAAGP,SAASU,EAAI9wD,KAAa0wD,EAAGX,OAAO9jF,GAAI0kF,EAAGZ,OAAO/vD,IACvF,IAAI+wD,EAAK9kF,EAAEsB,EACPyjF,EAAK/kF,EAAE5F,KAAK0qF,EAAG,GACnB,GAAS,GAANC,EAAH,CACA,IAAIC,EAAKD,GAAI,GAAGtnF,KAAK+jF,KAAMsD,EAAG,EAAG9kF,EAAE5F,KAAK0qF,EAAG,IAAIrnF,KAAKgkF,GAAG,GACnDwD,EAAKxnF,KAAK8jF,GAAGyD,EAAIE,GAAM,GAAGznF,KAAK+jF,IAAIwD,EAAI1vF,EAAI,GAAGmI,KAAKgkF,GACnDnvF,EAAIyhC,EAAEzyB,EAAG7F,EAAInJ,EAAEwyF,EAAIxjF,EAAQ,MAAHrM,EAAS+rF,IAAM/rF,EAQ3C,IAPA+K,EAAEkjF,UAAUznF,EAAE6F,GACXyyB,EAAEuf,UAAUhyC,IAAM,IACnByyB,EAAE35B,KAAK25B,EAAEzyB,KAAO,EAChByyB,EAAE8vD,MAAMviF,EAAEyyB,IAEZ0e,EAAWc,IAAI2vC,UAAU4B,EAAGxjF,GAC5BA,EAAEuiF,MAAM7jF,EAAEA,GACJA,EAAEsB,EAAIwjF,GAAI9kF,EAAE5F,KAAK4F,EAAEsB,KAAO,EAChC,OAAQ7F,GAAK,GAAG,CAEd,IAAI6hB,EAAMyW,EAAE35B,OAAO9H,IAAIyyF,EAAItnF,KAAK4jF,GAAGppF,KAAKK,MAAMy7B,EAAE35B,KAAK9H,GAAG2yF,GAAIlxD,EAAE35B,KAAK9H,EAAE,GAAGgD,GAAG4vF,GAC3E,IAAInxD,EAAE35B,KAAK9H,IAAI0N,EAAEmhF,GAAG,EAAE7jE,EAAGyW,EAAEt4B,EAAE,EAAEqpF,IAAOxnE,EAGpC,IAFAtd,EAAEkjF,UAAUznF,EAAE6F,GACdyyB,EAAE8vD,MAAMviF,EAAEyyB,GACJA,EAAE35B,KAAK9H,KAAOgrB,GAAIyW,EAAE8vD,MAAMviF,EAAEyyB,EAEtC,CACQ,MAAL9+B,IACD8+B,EAAEkwD,UAAUa,EAAG7vF,GACZ0vF,GAAMC,GAAInyC,EAAWmxC,KAAKC,MAAM5uF,EAAEA,IAEvC8+B,EAAEzyB,EAAIwjF,EACN/wD,EAAEiwD,QACCa,EAAM,GAAG9wD,EAAEywD,SAASK,EAAI9wD,GACxB4wD,EAAK,GAAGlyC,EAAWmxC,KAAKC,MAAM9vD,EAAEA,EA5BjB,CAbE,CA0CtB,EAkJA0e,EAAWj+C,UAAU4tF,SA7GrB,WACE,GAAG3kF,KAAK6D,EAAI,EAAG,OAAO,EACtB,IAAI1H,EAAI6D,KAAKrD,KAAK,GAClB,GAAY,IAAN,EAAFR,GAAW,OAAO,EACtB,IAAIoG,EAAM,EAAFpG,EAQR,OAFAoG,GAHAA,GADAA,GADAA,EAAKA,GAAG,GAAK,GAAFpG,GAAOoG,GAAI,KACd,GAAK,IAAFpG,GAAQoG,GAAI,MACf,IAAO,MAAFpG,GAAUoG,EAAG,QAAU,QAG5B,EAAEpG,EAAEoG,EAAEvC,KAAK6jF,IAAK7jF,KAAK6jF,IAEnB,EAAG7jF,KAAK6jF,GAAGthF,GAAGA,CAC1B,EAiGAyyC,EAAWj+C,UAAU2wF,OApCrB,WAAuB,OAA+C,IAAtC1nF,KAAK6D,EAAE,EAAiB,EAAb7D,KAAKrD,KAAK,GAAMqD,KAAKjN,EAAS,EAqCzEiiD,EAAWj+C,UAAU4wF,IAlCrB,SAAgB9vF,EAAEiL,GAChB,GAAGjL,EAAI,YAAcA,EAAI,EAAG,OAAOm9C,EAAWc,IAC9C,IAAIxf,EAAIitD,IAAOh4B,EAAKg4B,IAAO7rF,EAAIoL,EAAE8iF,QAAQ5lF,MAAOnL,EAAI0vF,EAAM1sF,GAAG,EAE7D,IADAH,EAAE2uF,OAAO/vD,KACDzhC,GAAK,GAEX,GADAiO,EAAEmjF,MAAM3vD,EAAEi1B,IACN1zD,EAAG,GAAGhD,GAAM,EAAGiO,EAAEijF,MAAMx6B,EAAG7zD,EAAE4+B,OAC3B,CAAE,IAAIzyB,EAAIyyB,EAAGA,EAAIi1B,EAAIA,EAAK1nD,CAAG,CAEpC,OAAOf,EAAE+iF,OAAOvvD,EAClB,EA2BA0e,EAAWj+C,UAAUiF,SApXrB,SAAoBrE,GAClB,GAAGqI,KAAKjN,EAAI,EAAG,MAAO,IAAIiN,KAAK4nF,SAAS5rF,SAASrE,GACjD,IAAIlB,EACJ,GAAQ,IAALkB,EAASlB,EAAI,OACX,GAAQ,GAALkB,EAAQlB,EAAI,OACf,GAAQ,GAALkB,EAAQlB,EAAI,OACf,GAAQ,IAALkB,EAASlB,EAAI,MAChB,IAAQ,GAALkB,EACH,OAAOqI,KAAK6nF,QAAQlwF,GADTlB,EAAI,CACO,CAC3B,IAAmBmB,EAAfs4E,GAAM,GAAGz5E,GAAG,EAAMI,GAAI,EAAOy/B,EAAI,GAAIzhC,EAAImL,KAAK6D,EAC9CzM,EAAI4I,KAAKi3E,GAAIpiF,EAAEmL,KAAKi3E,GAAIxgF,EAC5B,GAAG5B,KAAM,EAEP,IADGuC,EAAI4I,KAAKi3E,KAAOr/E,EAAIoI,KAAKrD,KAAK9H,IAAIuC,GAAK,IAAKP,GAAI,EAAMy/B,EAAI8tD,EAASxsF,IAChE/C,GAAK,GACNuC,EAAIX,GACLmB,GAAKoI,KAAKrD,KAAK9H,IAAK,GAAGuC,GAAG,IAAMX,EAAEW,EAClCQ,GAAKoI,KAAKrD,OAAO9H,KAAKuC,GAAG4I,KAAKi3E,GAAGxgF,KAEjCmB,EAAKoI,KAAKrD,KAAK9H,KAAKuC,GAAGX,GAAIy5E,EACxB94E,GAAK,IAAKA,GAAK4I,KAAKi3E,KAAMpiF,IAE5B+C,EAAI,IAAGf,GAAI,GACXA,IAAGy/B,GAAK8tD,EAASxsF,IAGxB,OAAOf,EAAEy/B,EAAE,GACb,EA2VA0e,EAAWj+C,UAAU6wF,OAxVrB,WAAsB,IAAItxD,EAAIitD,IAAsC,OAA/BvuC,EAAWmxC,KAAKC,MAAMpmF,KAAKs2B,GAAWA,CAAG,EAyV9E0e,EAAWj+C,UAAUoyD,IAtVrB,WAAmB,OAAQnpD,KAAKjN,EAAE,EAAGiN,KAAK4nF,SAAS5nF,IAAM,EAuVzDg1C,EAAWj+C,UAAU8+C,UApVrB,SAAqBp+C,GACnB,IAAI6+B,EAAIt2B,KAAKjN,EAAE0E,EAAE1E,EACjB,GAAQ,GAALujC,EAAQ,OAAOA,EAClB,IAAIzhC,EAAImL,KAAK6D,EAEb,GAAQ,IADRyyB,EAAIzhC,EAAE4C,EAAEoM,GACG,OAAQ7D,KAAKjN,EAAE,GAAIujC,EAAEA,EAChC,OAAQzhC,GAAK,MAAoC,IAA7ByhC,EAAEt2B,KAAKrD,KAAK9H,GAAG4C,EAAEkF,KAAK9H,IAAU,OAAOyhC,EAC3D,OAAO,CACT,EA6UA0e,EAAWj+C,UAAU2+C,UA/TrB,WACE,OAAG11C,KAAK6D,GAAK,EAAU,EAChB7D,KAAKi3E,IAAIj3E,KAAK6D,EAAE,GAAG0gF,EAAMvkF,KAAKrD,KAAKqD,KAAK6D,EAAE,GAAI7D,KAAKjN,EAAEiN,KAAK4jF,GACnE,EA6TA5uC,EAAWj+C,UAAU6+C,IAzJrB,SAAen+C,GACb,IAAI6+B,EAAIitD,IAGR,OAFAvjF,KAAKmpD,MAAM28B,SAASruF,EAAE,KAAK6+B,GACxBt2B,KAAKjN,EAAI,GAAKujC,EAAEuf,UAAUb,EAAWmxC,MAAQ,GAAG1uF,EAAE2uF,MAAM9vD,EAAEA,GACtDA,CACT,EAqJA0e,EAAWj+C,UAAU+wF,UA9BrB,SAAqBjwF,EAAEhB,GACrB,IAAIiM,EAEJ,OAD0BA,EAAvBjL,EAAI,KAAOhB,EAAE6wF,SAAc,IAAIlD,EAAQ3tF,GAAa,IAAI4tF,EAAW5tF,GAC/DmJ,KAAK2nF,IAAI9vF,EAAEiL,EACpB,EA6BAkyC,EAAWmxC,KAAO7B,EAAI,GACtBtvC,EAAWc,IAAMwuC,EAAI,GAyUrBe,EAAQtuF,UAAU6uF,QAAUN,EAC5BD,EAAQtuF,UAAU8uF,OAASP,EAC3BD,EAAQtuF,UAAUgvF,MALlB,SAAgB5pF,EAAEoG,EAAE+zB,GAAKn6B,EAAE6pF,WAAWzjF,EAAE+zB,EAAI,EAM5C+uD,EAAQtuF,UAAUkvF,MALlB,SAAgB9pF,EAAEm6B,GAAKn6B,EAAE+pF,SAAS5vD,EAAI,EAuEtCivD,EAAQxuF,UAAU6uF,QAzBlB,SAAwBzpF,GACxB,GAAGA,EAAEpJ,EAAI,GAAKoJ,EAAE0H,EAAI,EAAE7D,KAAKnJ,EAAEgN,EAAG,OAAO1H,EAAEy5C,IAAI51C,KAAKnJ,GAC7C,GAAGsF,EAAE05C,UAAU71C,KAAKnJ,GAAK,EAAG,OAAOsF,EACjC,IAAIm6B,EAAIitD,IAAoC,OAA7BpnF,EAAEkqF,OAAO/vD,GAAIt2B,KAAK8qD,OAAOx0B,GAAWA,CAC1D,EAsBAivD,EAAQxuF,UAAU8uF,OApBlB,SAAuB1pF,GAAK,OAAOA,CAAG,EAqBtCopF,EAAQxuF,UAAU+zD,OAlBlB,SAAuB3uD,GAKvB,IAJAA,EAAEqqF,UAAUxmF,KAAKnJ,EAAEgN,EAAE,EAAE7D,KAAKurD,IACzBpvD,EAAE0H,EAAI7D,KAAKnJ,EAAEgN,EAAE,IAAK1H,EAAE0H,EAAI7D,KAAKnJ,EAAEgN,EAAE,EAAG1H,EAAEoqF,SAC3CvmF,KAAK0lF,GAAGqC,gBAAgB/nF,KAAKurD,GAAGvrD,KAAKnJ,EAAEgN,EAAE,EAAE7D,KAAKwlF,IAChDxlF,KAAKnJ,EAAEmxF,gBAAgBhoF,KAAKwlF,GAAGxlF,KAAKnJ,EAAEgN,EAAE,EAAE7D,KAAKurD,IACzCpvD,EAAE05C,UAAU71C,KAAKurD,IAAM,GAAGpvD,EAAEm/E,WAAW,EAAEt7E,KAAKnJ,EAAEgN,EAAE,GAExD,IADA1H,EAAEiqF,MAAMpmF,KAAKurD,GAAGpvD,GACVA,EAAE05C,UAAU71C,KAAKnJ,IAAM,GAAGsF,EAAEiqF,MAAMpmF,KAAKnJ,EAAEsF,EAC/C,EAWAopF,EAAQxuF,UAAUgvF,MALlB,SAAsB5pF,EAAEoG,EAAE+zB,GAAKn6B,EAAE6pF,WAAWzjF,EAAE+zB,GAAIt2B,KAAK8qD,OAAOx0B,EAAI,EAMlEivD,EAAQxuF,UAAUkvF,MATlB,SAAsB9pF,EAAEm6B,GAAKn6B,EAAE+pF,SAAS5vD,GAAIt2B,KAAK8qD,OAAOx0B,EAAI,EAiJ5D,IAAI2xD,EAAY,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAChXC,GAAS,GAAG,IAAID,EAAUA,EAAU9zF,OAAO,GA8D/C6gD,EAAWj+C,UAAUoxF,UAxjBrB,SAAsB7xD,GAAK,OAAO97B,KAAKK,MAAML,KAAK2gB,IAAInb,KAAKi3E,GAAGz8E,KAAKwJ,IAAIsyB,GAAK,EAyjB5E0e,EAAWj+C,UAAU8wF,QA/iBrB,SAAoBlwF,GAEpB,GADQ,MAALA,IAAWA,EAAI,IACE,GAAjBqI,KAAKooF,UAAiBzwF,EAAI,GAAKA,EAAI,GAAI,MAAO,IACjD,IAAI8wE,EAAKzoE,KAAKmoF,UAAUxwF,GACpBF,EAAI+C,KAAKkI,IAAI/K,EAAE8wE,GACf7wE,EAAI0sF,EAAI7sF,GAAI8K,EAAIghF,IAAOzgF,EAAIygF,IAAOjtD,EAAI,GAE1C,IADAt2B,KAAK8lF,SAASluF,EAAE2K,EAAEO,GACZP,EAAE6lF,SAAW,GAClB9xD,GAAK7+B,EAAEqL,EAAEulF,YAAYrsF,SAASrE,GAAGsE,OAAO,GAAKq6B,EAC7C/zB,EAAEujF,SAASluF,EAAE2K,EAAEO,GAEhB,OAAOA,EAAEulF,WAAWrsF,SAASrE,GAAK2+B,CAClC,EAoiBA0e,EAAWj+C,UAAU0vF,UAjiBrB,SAAsB1zF,EAAE4E,GACxBqI,KAAK26E,QAAQ,GACL,MAALhjF,IAAWA,EAAI,IAGlB,IAFA,IAAI8wE,EAAKzoE,KAAKmoF,UAAUxwF,GACpBC,EAAI4C,KAAKkI,IAAI/K,EAAE8wE,GAAKnrC,GAAK,EAAOt/B,EAAI,EAAG+wB,EAAI,EACvCl6B,EAAI,EAAGA,EAAI9B,EAAEoB,SAAUU,EAAG,CACjC,IAAIsH,EAAIkoF,EAAMtxF,EAAE8B,GACbsH,EAAI,EACa,KAAfpJ,EAAEyiB,OAAO3gB,IAA8B,GAAjBmL,KAAKooF,WAAe9qD,GAAK,IAGpDvO,EAAIp3B,EAAEo3B,EAAE5yB,IACH6B,GAAKyqE,IACRzoE,KAAKsoF,UAAU1wF,GACfoI,KAAKs7E,WAAWvsD,EAAE,GAClB/wB,EAAI,EACJ+wB,EAAI,GAEP,CACG/wB,EAAI,IACNgC,KAAKsoF,UAAU9tF,KAAKkI,IAAI/K,EAAEqG,IAC1BgC,KAAKs7E,WAAWvsD,EAAE,IAEhBuO,GAAI0X,EAAWmxC,KAAKC,MAAMpmF,KAAKA,KAClC,EA0gBAg1C,EAAWj+C,UAAUssF,WAvgBrB,SAAuB5rF,EAAEE,EAAEtG,GAC3B,GAAG,iBAAmBsG,EAErB,GAAGF,EAAI,EAAGuI,KAAK26E,QAAQ,QAMrB,IAJA36E,KAAKqjF,WAAW5rF,EAAEpG,GACd2O,KAAKi8E,QAAQxkF,EAAE,IACjBuI,KAAKk8E,UAAUlnC,EAAWc,IAAIqmC,UAAU1kF,EAAE,GAAGmjF,EAAM56E,MAClDA,KAAK0nF,UAAU1nF,KAAKs7E,WAAW,EAAE,IAC7Bt7E,KAAK+7E,gBAAgBpkF,IAC1BqI,KAAKs7E,WAAW,EAAE,GACft7E,KAAK01C,YAAcj+C,GAAGuI,KAAKomF,MAAMpxC,EAAWc,IAAIqmC,UAAU1kF,EAAE,GAAGuI,UAGhE,CAEN,IAAI7D,EAAI,IAAI7C,MAASuK,EAAM,EAAFpM,EACzB0E,EAAEhI,OAAgB,GAANsD,GAAG,GACfE,EAAEojF,UAAU5+E,GACT0H,EAAI,EAAG1H,EAAE,KAAQ,GAAG0H,GAAG,EAAS1H,EAAE,GAAK,EAC1C6D,KAAKsjF,WAAWnnF,EAAE,IACnB,CACA,EAkfA64C,EAAWj+C,UAAUmlF,UAndrB,SAAsBzkF,EAAE8wF,EAAGjyD,GAC3B,IAAIzhC,EAAG2B,EAAGK,EAAI2D,KAAKE,IAAIjD,EAAEoM,EAAE7D,KAAK6D,GAChC,IAAIhP,EAAI,EAAGA,EAAIgC,IAAKhC,EAAGyhC,EAAE35B,KAAK9H,GAAK0zF,EAAGvoF,KAAKrD,KAAK9H,GAAG4C,EAAEkF,KAAK9H,IAC1D,GAAG4C,EAAEoM,EAAI7D,KAAK6D,EAAG,CAEhB,IADArN,EAAIiB,EAAE1E,EAAEiN,KAAK4jF,GACT/uF,EAAIgC,EAAGhC,EAAImL,KAAK6D,IAAKhP,EAAGyhC,EAAE35B,KAAK9H,GAAK0zF,EAAGvoF,KAAKrD,KAAK9H,GAAG2B,GACxD8/B,EAAEzyB,EAAI7D,KAAK6D,CACZ,KAAO,CAEN,IADArN,EAAIwJ,KAAKjN,EAAEiN,KAAK4jF,GACZ/uF,EAAIgC,EAAGhC,EAAI4C,EAAEoM,IAAKhP,EAAGyhC,EAAE35B,KAAK9H,GAAK0zF,EAAG/xF,EAAEiB,EAAEkF,KAAK9H,IACjDyhC,EAAEzyB,EAAIpM,EAAEoM,CACT,CACAyyB,EAAEvjC,EAAIw1F,EAAGvoF,KAAKjN,EAAE0E,EAAE1E,GAClBujC,EAAEiwD,OACF,EAscAvxC,EAAWj+C,UAAUyxF,UAnXrB,SAAsBvxF,EAAEsxF,GACxB,IAAIjyD,EAAI0e,EAAWc,IAAIqmC,UAAUllF,GAEjC,OADA+I,KAAKk8E,UAAU5lD,EAAEiyD,EAAGjyD,GACbA,CACP,EAgXA0e,EAAWj+C,UAAU0xF,MApWrB,SAAkBhxF,EAAE6+B,GAEpB,IADA,IAAIzhC,EAAI,EAAGxD,EAAI,EAAGwF,EAAI2D,KAAKE,IAAIjD,EAAEoM,EAAE7D,KAAK6D,GAClChP,EAAIgC,GACTxF,GAAK2O,KAAKrD,KAAK9H,GAAG4C,EAAEkF,KAAK9H,GACzByhC,EAAE35B,KAAK9H,KAAOxD,EAAE2O,KAAK4jF,GACrBvyF,IAAM2O,KAAKi3E,GAEZ,GAAGx/E,EAAEoM,EAAI7D,KAAK6D,EAAG,CAEhB,IADAxS,GAAKoG,EAAE1E,EACD8B,EAAImL,KAAK6D,GACbxS,GAAK2O,KAAKrD,KAAK9H,GACfyhC,EAAE35B,KAAK9H,KAAOxD,EAAE2O,KAAK4jF,GACrBvyF,IAAM2O,KAAKi3E,GAEb5lF,GAAK2O,KAAKjN,CACX,KAAO,CAEN,IADA1B,GAAK2O,KAAKjN,EACJ8B,EAAI4C,EAAEoM,GACVxS,GAAKoG,EAAEkF,KAAK9H,GACZyhC,EAAE35B,KAAK9H,KAAOxD,EAAE2O,KAAK4jF,GACrBvyF,IAAM2O,KAAKi3E,GAEb5lF,GAAKoG,EAAE1E,CACR,CACAujC,EAAEvjC,EAAK1B,EAAE,GAAI,EAAE,EACZA,EAAI,EAAGilC,EAAE35B,KAAK9H,KAAOxD,EAChBA,GAAK,IAAGilC,EAAE35B,KAAK9H,KAAOmL,KAAK6jF,GAAGxyF,GACtCilC,EAAEzyB,EAAIhP,EACNyhC,EAAEiwD,OACF,EAwUAvxC,EAAWj+C,UAAUuxF,UA/SrB,SAAsBrxF,GACtB+I,KAAKrD,KAAKqD,KAAK6D,GAAK7D,KAAK0jF,GAAG,EAAEzsF,EAAE,EAAE+I,KAAK,EAAE,EAAEA,KAAK6D,KAC9C7D,KAAK6D,EACP7D,KAAKumF,OACL,EA4SAvxC,EAAWj+C,UAAUukF,WAzSrB,SAAuBrkF,EAAE83B,GACzB,GAAQ,GAAL93B,EAAH,CACA,KAAM+I,KAAK6D,GAAKkrB,GAAG/uB,KAAKrD,KAAKqD,KAAK6D,KAAO,EAEzC,IADA7D,KAAKrD,KAAKoyB,IAAM93B,EACV+I,KAAKrD,KAAKoyB,IAAM/uB,KAAK6jF,IAC1B7jF,KAAKrD,KAAKoyB,IAAM/uB,KAAK6jF,KAChB90D,GAAK/uB,KAAK6D,IAAG7D,KAAKrD,KAAKqD,KAAK6D,KAAO,KACtC7D,KAAKrD,KAAKoyB,EANI,CAQjB,EAiSAimB,EAAWj+C,UAAUixF,gBA/QrB,SAA4BvwF,EAAER,EAAEq/B,GAChC,IAIIt4B,EAJAnJ,EAAI2F,KAAKE,IAAIsF,KAAK6D,EAAEpM,EAAEoM,EAAE5M,GAG5B,IAFAq/B,EAAEvjC,EAAI,EACNujC,EAAEzyB,EAAIhP,EACAA,EAAI,GAAGyhC,EAAE35B,OAAO9H,GAAK,EAE3B,IAAImJ,EAAIs4B,EAAEzyB,EAAE7D,KAAK6D,EAAGhP,EAAImJ,IAAKnJ,EAAGyhC,EAAE35B,KAAK9H,EAAEmL,KAAK6D,GAAK7D,KAAK0jF,GAAG,EAAEjsF,EAAEkF,KAAK9H,GAAGyhC,EAAEzhC,EAAE,EAAEmL,KAAK6D,GAClF,IAAI7F,EAAIxD,KAAKE,IAAIjD,EAAEoM,EAAE5M,GAAIpC,EAAImJ,IAAKnJ,EAAGmL,KAAK0jF,GAAG,EAAEjsF,EAAEkF,KAAK9H,GAAGyhC,EAAEzhC,EAAE,EAAEoC,EAAEpC,GACjEyhC,EAAEiwD,OACF,EAuQAvxC,EAAWj+C,UAAUgxF,gBAnQrB,SAA4BtwF,EAAER,EAAEq/B,KAC9Br/B,EACF,IAAIpC,EAAIyhC,EAAEzyB,EAAI7D,KAAK6D,EAAEpM,EAAEoM,EAAE5M,EAEzB,IADAq/B,EAAEvjC,EAAI,IACE8B,GAAK,GAAGyhC,EAAE35B,KAAK9H,GAAK,EAC5B,IAAIA,EAAI2F,KAAKC,IAAIxD,EAAE+I,KAAK6D,EAAE,GAAIhP,EAAI4C,EAAEoM,IAAKhP,EACxCyhC,EAAE35B,KAAKqD,KAAK6D,EAAEhP,EAAEoC,GAAK+I,KAAK0jF,GAAGzsF,EAAEpC,EAAE4C,EAAEkF,KAAK9H,GAAGyhC,EAAE,EAAE,EAAEt2B,KAAK6D,EAAEhP,EAAEoC,GAC3Dq/B,EAAEiwD,QACFjwD,EAAEkwD,UAAU,EAAElwD,EACd,EA2PA0e,EAAWj+C,UAAU2xF,OA1HrB,SAAmBzxF,GACnB,GAAGA,GAAK,EAAG,OAAO,EAClB,IAAIW,EAAIoI,KAAK6jF,GAAG5sF,EAAGq/B,EAAKt2B,KAAKjN,EAAE,EAAGkE,EAAE,EAAE,EACtC,GAAG+I,KAAK6D,EAAI,EACX,GAAQ,GAALjM,EAAQ0+B,EAAIt2B,KAAKrD,KAAK,GAAG1F,OACvB,IAAI,IAAIpC,EAAImL,KAAK6D,EAAE,EAAGhP,GAAK,IAAKA,EAAGyhC,GAAK1+B,EAAE0+B,EAAEt2B,KAAKrD,KAAK9H,IAAIoC,EAChE,OAAOq/B,CACP,EAoHA0e,EAAWj+C,UAAU4xF,YApDrB,SAAwB9kF,GACxB,IAAI+kF,EAAK5oF,KAAK++E,SAAS/pC,EAAWc,KAC9Br/C,EAAImyF,EAAGC,kBACX,GAAGpyF,GAAK,EAAG,OAAO,EAIlB,IAHA,IAEIgB,EAFA6+B,EAAIsyD,EAAGE,WAAWryF,GAClBmC,EAwBK,CAELmiF,UAAW,SAAS5+E,GAClB,IAAI,IAAItH,EAAI,EAAGA,EAAIsH,EAAEhI,SAAUU,EAC7BsH,EAAEtH,GAAK2F,KAAKK,MAAsB,IAAhBL,KAAK7G,SAE3B,GA5BIkB,EAAI,EAAGA,EAAIgP,IAAKhP,EAAG,CAE1B,GACE4C,EAAI,IAAIu9C,EAAWh1C,KAAK01C,YAAa98C,SAEjCnB,EAAEo+C,UAAUb,EAAWc,MAAQ,GAAKr+C,EAAEo+C,UAAU+yC,IAAO,GAC7D,IAAIrmF,EAAI9K,EAAEonF,OAAOvoD,EAAEt2B,MACnB,GAAkC,GAA/BuC,EAAEszC,UAAUb,EAAWc,MAAgC,GAAnBvzC,EAAEszC,UAAU+yC,GAAU,CAE3D,IADA,IAAI5qF,EAAI,EACFA,IAAMvH,GAAwB,GAAnB8L,EAAEszC,UAAU+yC,IAE3B,GAAkC,IADlCrmF,EAAIA,EAAEulF,UAAU,EAAE9nF,OACb61C,UAAUb,EAAWc,KAAW,OAAO,EAE9C,GAAsB,GAAnBvzC,EAAEszC,UAAU+yC,GAAU,OAAO,CAClC,CACD,CACA,OAAO,CACP,EA+BA5zC,EAAWj+C,UAAUgyF,MA3lBrB,WAAqB,IAAIzyD,EAAIitD,IAAuB,OAAhBvjF,KAAKqmF,OAAO/vD,GAAWA,CAAG,EA4lB9D0e,EAAWj+C,UAAUsxF,SAzlBrB,WACA,GAAGroF,KAAKjN,EAAI,EAAG,CACd,GAAa,GAAViN,KAAK6D,EAAQ,OAAO7D,KAAKrD,KAAK,GAAGqD,KAAK6jF,GACpC,GAAa,GAAV7jF,KAAK6D,EAAQ,OAAQ,CAC9B,KAAO,IAAa,GAAV7D,KAAK6D,EAAQ,OAAO7D,KAAKrD,KAAK,GACnC,GAAa,GAAVqD,KAAK6D,EAAQ,OAAO,CAAC,CAE7B,OAAS7D,KAAKrD,KAAK,IAAK,GAAI,GAAGqD,KAAKi3E,IAAK,IAAKj3E,KAAKi3E,GAAIj3E,KAAKrD,KAAK,EACjE,EAklBAq4C,EAAWj+C,UAAUqlF,UA/kBrB,WAAyB,OAAgB,GAARp8E,KAAK6D,EAAM7D,KAAKjN,EAAGiN,KAAKrD,KAAK,IAAI,IAAK,EAAI,EAglB3Eq4C,EAAWj+C,UAAUiyF,WA7kBrB,WAA0B,OAAgB,GAARhpF,KAAK6D,EAAM7D,KAAKjN,EAAGiN,KAAKrD,KAAK,IAAI,IAAK,EAAI,EA8kB5Eq4C,EAAWj+C,UAAUqxF,OAxkBrB,WACA,OAAGpoF,KAAKjN,EAAI,GAAW,EACfiN,KAAK6D,GAAK,GAAgB,GAAV7D,KAAK6D,GAAU7D,KAAKrD,KAAK,IAAM,EAAW,EACtD,CACZ,EAqkBAq4C,EAAWj+C,UAAUkyF,YA/frB,WACA,IAAIp0F,EAAImL,KAAK6D,EAAGyyB,EAAI,IAAIh9B,MACxBg9B,EAAE,GAAKt2B,KAAKjN,EACZ,IAA+B6E,EAA3BR,EAAI4I,KAAKi3E,GAAIpiF,EAAEmL,KAAKi3E,GAAI,EAAMxgF,EAAI,EACtC,GAAG5B,KAAM,EAGR,IAFGuC,EAAI4I,KAAKi3E,KAAOr/E,EAAIoI,KAAKrD,KAAK9H,IAAIuC,KAAO4I,KAAKjN,EAAEiN,KAAK4jF,KAAKxsF,IAC3Dk/B,EAAE7/B,KAAOmB,EAAGoI,KAAKjN,GAAIiN,KAAKi3E,GAAG7/E,GACzBvC,GAAK,GACNuC,EAAI,GACLQ,GAAKoI,KAAKrD,KAAK9H,IAAK,GAAGuC,GAAG,IAAM,EAAEA,EAClCQ,GAAKoI,KAAKrD,OAAO9H,KAAKuC,GAAG4I,KAAKi3E,GAAG,KAEjCr/E,EAAKoI,KAAKrD,KAAK9H,KAAKuC,GAAG,GAAI,IACxBA,GAAK,IAAKA,GAAK4I,KAAKi3E,KAAMpiF,IAEhB,IAAT,IAAF+C,KAAcA,IAAM,KAChB,GAALnB,IAAkB,IAAPuJ,KAAKjN,KAAc,IAAF6E,MAAWnB,GACvCA,EAAI,GAAKmB,GAAKoI,KAAKjN,KAAGujC,EAAE7/B,KAAOmB,GAGrC,OAAO0+B,CACP,EA2eA0e,EAAWj+C,UAAUmqE,OAzerB,SAAkBzpE,GAAK,OAA0B,GAAnBuI,KAAK61C,UAAUp+C,EAAQ,EA0erDu9C,EAAWj+C,UAAU2D,IAzerB,SAAejD,GAAK,OAAOuI,KAAK61C,UAAUp+C,GAAG,EAAGuI,KAAKvI,CAAG,EA0exDu9C,EAAWj+C,UAAU0D,IAzerB,SAAehD,GAAK,OAAOuI,KAAK61C,UAAUp+C,GAAG,EAAGuI,KAAKvI,CAAG,EA0exDu9C,EAAWj+C,UAAUmyF,IArdrB,SAAezxF,GAAK,IAAI6+B,EAAIitD,IAAmC,OAA5BvjF,KAAKk8E,UAAUzkF,EAAEutF,EAAO1uD,GAAWA,CAAG,EAsdzE0e,EAAWj+C,UAAUoyF,GAldrB,SAAc1xF,GAAK,IAAI6+B,EAAIitD,IAAkC,OAA3BvjF,KAAKk8E,UAAUzkF,EAAEmjF,EAAMtkD,GAAWA,CAAG,EAmdvE0e,EAAWj+C,UAAU4gF,IA/crB,SAAelgF,GAAK,IAAI6+B,EAAIitD,IAAmC,OAA5BvjF,KAAKk8E,UAAUzkF,EAAEwtF,EAAO3uD,GAAWA,CAAG,EAgdzE0e,EAAWj+C,UAAUqyF,OA5crB,SAAkB3xF,GAAK,IAAI6+B,EAAIitD,IAAsC,OAA/BvjF,KAAKk8E,UAAUzkF,EAAEytF,EAAU5uD,GAAWA,CAAG,EA6c/E0e,EAAWj+C,UAAUsyF,IA1crB,WAEA,IADA,IAAI/yD,EAAIitD,IACA1uF,EAAI,EAAGA,EAAImL,KAAK6D,IAAKhP,EAAGyhC,EAAE35B,KAAK9H,GAAKmL,KAAK4jF,IAAI5jF,KAAKrD,KAAK9H,GAG/D,OAFAyhC,EAAEzyB,EAAI7D,KAAK6D,EACXyyB,EAAEvjC,GAAKiN,KAAKjN,EACLujC,CACP,EAqcA0e,EAAWj+C,UAAUolF,UAlcrB,SAAqBllF,GACrB,IAAIq/B,EAAIitD,IAER,OADGtsF,EAAI,EAAG+I,KAAK+mF,UAAU9vF,EAAEq/B,GAASt2B,KAAK0mF,SAASzvF,EAAEq/B,GAC7CA,CACP,EA+bA0e,EAAWj+C,UAAU+xF,WA5brB,SAAsB7xF,GACtB,IAAIq/B,EAAIitD,IAER,OADGtsF,EAAI,EAAG+I,KAAK0mF,UAAUzvF,EAAEq/B,GAASt2B,KAAK+mF,SAAS9vF,EAAEq/B,GAC7CA,CACP,EAybA0e,EAAWj+C,UAAU8xF,gBA1arB,WACA,IAAI,IAAIh0F,EAAI,EAAGA,EAAImL,KAAK6D,IAAKhP,EAC5B,GAAmB,GAAhBmL,KAAKrD,KAAK9H,GAAS,OAAOA,EAAEmL,KAAKi3E,GAAGkO,EAAKnlF,KAAKrD,KAAK9H,IACvD,OAAGmL,KAAKjN,EAAI,EAAUiN,KAAK6D,EAAE7D,KAAKi3E,IAC1B,CACR,EAsaAjiC,EAAWj+C,UAAUuyF,SA5ZrB,WAEA,IADA,IAAIhzD,EAAI,EAAGn6B,EAAI6D,KAAKjN,EAAEiN,KAAK4jF,GACnB/uF,EAAI,EAAGA,EAAImL,KAAK6D,IAAKhP,EAAGyhC,GAAK8uD,EAAKplF,KAAKrD,KAAK9H,GAAGsH,GACvD,OAAOm6B,CACP,EAyZA0e,EAAWj+C,UAAUklF,QAtZrB,SAAmBhlF,GACnB,IAAI+G,EAAIxD,KAAKK,MAAM5D,EAAE+I,KAAKi3E,IAC1B,OAAGj5E,GAAKgC,KAAK6D,EAAkB,GAAR7D,KAAKjN,EACY,IAAhCiN,KAAKrD,KAAKqB,GAAI,GAAI/G,EAAE+I,KAAKi3E,GACjC,EAmZAjiC,EAAWj+C,UAAUwyF,OAzYrB,SAAkBtyF,GAAK,OAAO+I,KAAKwoF,UAAUvxF,EAAE2jF,EAAQ,EA0YvD5lC,EAAWj+C,UAAUyyF,SAvYrB,SAAoBvyF,GAAK,OAAO+I,KAAKwoF,UAAUvxF,EAAEiuF,EAAY,EAwY7DlwC,EAAWj+C,UAAU0yF,QArYrB,SAAmBxyF,GAAK,OAAO+I,KAAKwoF,UAAUvxF,EAAEguF,EAAS,EAsYzDjwC,EAAWj+C,UAAUqT,IAnWrB,SAAe3S,GAAK,IAAI6+B,EAAIitD,IAAwB,OAAjBvjF,KAAKyoF,MAAMhxF,EAAE6+B,GAAWA,CAAG,EAoW9D0e,EAAWj+C,UAAUgoF,SAjWrB,SAAoBtnF,GAAK,IAAI6+B,EAAIitD,IAAwB,OAAjBvjF,KAAKomF,MAAM3uF,EAAE6+B,GAAWA,CAAG,EAkWnE0e,EAAWj+C,UAAUuL,SA/VrB,SAAoB7K,GAAK,IAAI6+B,EAAIitD,IAA6B,OAAtBvjF,KAAKgmF,WAAWvuF,EAAE6+B,GAAWA,CAAG,EAgWxE0e,EAAWj+C,UAAU4uF,OA7VrB,SAAkBluF,GAAK,IAAI6+B,EAAIitD,IAAgC,OAAzBvjF,KAAK8lF,SAASruF,EAAE6+B,EAAE,MAAcA,CAAG,EA8VzE0e,EAAWj+C,UAAU2yF,UA3VrB,SAAqBjyF,GAAK,IAAI6+B,EAAIitD,IAAgC,OAAzBvjF,KAAK8lF,SAASruF,EAAE,KAAK6+B,GAAWA,CAAG,EA4V5E0e,EAAWj+C,UAAU4yF,mBAzVrB,SAA8BlyF,GAC9B,IAAID,EAAI+rF,IAAOjtD,EAAIitD,IAEnB,OADAvjF,KAAK8lF,SAASruF,EAAED,EAAE8+B,GACX,IAAIh9B,MAAM9B,EAAE8+B,EACnB,EAsVA0e,EAAWj+C,UAAU8nF,OA/OrB,SAAkBhnF,EAAEhB,GACpB,IAAuBJ,EAAeqM,EAAlCjO,EAAIgD,EAAE69C,YAAgBpf,EAAIguD,EAAI,GAClC,GAAGzvF,GAAK,EAAG,OAAOyhC,EACF7/B,EAAR5B,EAAI,GAAQ,EACZA,EAAI,GAAQ,EACZA,EAAI,IAAS,EACbA,EAAI,IAAS,EACZ,EAERiO,EADEjO,EAAI,EACF,IAAI2vF,EAAQ3tF,GACTA,EAAE6wF,SACL,IAAInC,EAAQ1uF,GAEZ,IAAI4tF,EAAW5tF,GAGpB,IAAIa,EAAI,IAAI4B,MAASrC,EAAI,EAAG2yF,EAAKnzF,EAAE,EAAGy5E,GAAM,GAAGz5E,GAAG,EAElD,GADAiB,EAAE,GAAKoL,EAAE8iF,QAAQ5lF,MACdvJ,EAAI,EAAG,CACT,IAAIozF,EAAKtG,IAET,IADAzgF,EAAEmjF,MAAMvuF,EAAE,GAAGmyF,GACP5yF,GAAKi5E,GACTx4E,EAAET,GAAKssF,IACPzgF,EAAEijF,MAAM8D,EAAGnyF,EAAET,EAAE,GAAGS,EAAET,IACpBA,GAAK,CAER,CAEA,IAAe83B,EAA2BlrB,EAAtC7F,EAAInG,EAAEgM,EAAE,EAAMimF,GAAM,EAAMv+B,EAAKg4B,IAEnC,IADA1uF,EAAI0vF,EAAM1sF,EAAE8E,KAAKqB,IAAI,EACfA,GAAK,GAAG,CAQb,IAPGnJ,GAAK+0F,EAAI76D,EAAKl3B,EAAE8E,KAAKqB,IAAKnJ,EAAE+0F,EAAK1Z,GAElCnhD,GAAKl3B,EAAE8E,KAAKqB,IAAK,GAAInJ,EAAE,GAAI,IAAM+0F,EAAG/0F,EACjCmJ,EAAI,IAAG+wB,GAAKl3B,EAAE8E,KAAKqB,EAAE,IAAKgC,KAAKi3E,GAAGpiF,EAAE+0F,IAGzC3yF,EAAIR,EACW,IAAN,EAAFs4B,IAAaA,IAAM,IAAK93B,EAE/B,IADIpC,GAAKoC,GAAK,IAAKpC,GAAKmL,KAAKi3E,KAAMj5E,GAChC8rF,EACDpyF,EAAEq3B,GAAGs3D,OAAO/vD,GACZwzD,GAAM,MACD,CACL,KAAM7yF,EAAI,GAAK6L,EAAEmjF,MAAM3vD,EAAEi1B,GAAKzoD,EAAEmjF,MAAM16B,EAAGj1B,GAAIr/B,GAAK,EAC/CA,EAAI,EAAG6L,EAAEmjF,MAAM3vD,EAAEi1B,IAAY1nD,EAAIyyB,EAAGA,EAAIi1B,EAAIA,EAAK1nD,GACpDf,EAAEijF,MAAMx6B,EAAG7zD,EAAEq3B,GAAGuH,EAClB,CAEA,KAAMt4B,GAAK,GAA2B,IAArBnG,EAAE8E,KAAKqB,GAAI,GAAGnJ,IAC7BiO,EAAEmjF,MAAM3vD,EAAEi1B,GAAK1nD,EAAIyyB,EAAGA,EAAIi1B,EAAIA,EAAK1nD,IAC9BhP,EAAI,IAAKA,EAAImL,KAAKi3E,GAAG,IAAKj5E,EAElC,CACA,OAAO8E,EAAE+iF,OAAOvvD,EAChB,EAyLA0e,EAAWj+C,UAAUkoF,WAjJrB,SAAsBpoF,GACtB,IAAI0iB,EAAK1iB,EAAE6wF,SACX,GAAI1nF,KAAK0nF,UAAYnuE,GAAqB,GAAd1iB,EAAEuxF,SAAe,OAAOpzC,EAAWmxC,KAG/D,IAFA,IAAIr3D,EAAIj4B,EAAEkyF,QAASn+E,EAAI5K,KAAK+oF,QACxBtxF,EAAI6sF,EAAI,GAAI3sF,EAAI2sF,EAAI,GAAIjzF,EAAIizF,EAAI,GAAI1sF,EAAI0sF,EAAI,GAC5B,GAAdx1D,EAAEs5D,UAAe,CACtB,KAAMt5D,EAAE44D,UACN54D,EAAEi4D,SAAS,EAAEj4D,GACVvV,GACG9hB,EAAEiwF,UAAa/vF,EAAE+vF,WAAYjwF,EAAEgxF,MAAMzoF,KAAKvI,GAAIE,EAAEyuF,MAAMvvF,EAAEc,IAC5DF,EAAEsvF,SAAS,EAAEtvF,IACJE,EAAE+vF,UAAU/vF,EAAEyuF,MAAMvvF,EAAEc,GACjCA,EAAEovF,SAAS,EAAEpvF,GAEf,KAAMiT,EAAE88E,UACN98E,EAAEm8E,SAAS,EAAEn8E,GACV2O,GACGloB,EAAEq2F,UAAa9vF,EAAE8vF,WAAYr2F,EAAEo3F,MAAMzoF,KAAK3O,GAAIuG,EAAEwuF,MAAMvvF,EAAEe,IAC5DvG,EAAE01F,SAAS,EAAE11F,IACJuG,EAAE8vF,UAAU9vF,EAAEwuF,MAAMvvF,EAAEe,GACjCA,EAAEmvF,SAAS,EAAEnvF,GAEZk3B,EAAE+mB,UAAUjrC,IAAM,GACnBkkB,EAAEs3D,MAAMx7E,EAAEkkB,GACPvV,GAAI9hB,EAAE2uF,MAAM/0F,EAAEoG,GACjBE,EAAEyuF,MAAMxuF,EAAED,KAEViT,EAAEw7E,MAAMt3D,EAAElkB,GACP2O,GAAIloB,EAAE+0F,MAAM3uF,EAAEpG,GACjBuG,EAAEwuF,MAAMzuF,EAAEC,GAEb,CACA,OAAkC,GAA/BgT,EAAEirC,UAAUb,EAAWc,KAAkBd,EAAWmxC,KACpDvuF,EAAEi+C,UAAUh/C,IAAM,EAAUe,EAAEmnF,SAASloF,GACvCe,EAAEwwF,SAAW,GAAGxwF,EAAE6wF,MAAM5xF,EAAEe,GAC1BA,EAAEwwF,SAAW,EAAUxwF,EAAEwS,IAAIvT,GAAgBe,GADHA,CAE7C,EA8GAo9C,EAAWj+C,UAAU2L,IAvTrB,SAAe7K,GAAK,OAAOmI,KAAK2nF,IAAI9vF,EAAE,IAAIwtF,EAAY,EAwTtDrwC,EAAWj+C,UAAUmoF,IAxLrB,SAAeznF,GACf,IAAI0E,EAAK6D,KAAKjN,EAAE,EAAGiN,KAAK4nF,SAAS5nF,KAAK+oF,QAClCxmF,EAAK9K,EAAE1E,EAAE,EAAG0E,EAAEmwF,SAASnwF,EAAEsxF,QAC7B,GAAG5sF,EAAE05C,UAAUtzC,GAAK,EAAG,CAAE,IAAIsB,EAAI1H,EAAGA,EAAIoG,EAAGA,EAAIsB,CAAG,CAClD,IAAIhP,EAAIsH,EAAE0sF,kBAAmBnxF,EAAI6K,EAAEsmF,kBACnC,GAAGnxF,EAAI,EAAG,OAAOyE,EAMjB,IALGtH,EAAI6C,IAAGA,EAAI7C,GACX6C,EAAI,IACNyE,EAAE4qF,SAASrvF,EAAEyE,GACboG,EAAEwkF,SAASrvF,EAAE6K,IAERpG,EAAEisF,SAAW,IACdvzF,EAAIsH,EAAE0sF,mBAAqB,GAAG1sF,EAAE4qF,SAASlyF,EAAEsH,IAC3CtH,EAAI0N,EAAEsmF,mBAAqB,GAAGtmF,EAAEwkF,SAASlyF,EAAE0N,GAC5CpG,EAAE05C,UAAUtzC,IAAM,GACnBpG,EAAEiqF,MAAM7jF,EAAEpG,GACVA,EAAE4qF,SAAS,EAAE5qF,KAEboG,EAAE6jF,MAAMjqF,EAAEoG,GACVA,EAAEwkF,SAAS,EAAExkF,IAIhB,OADG7K,EAAI,GAAG6K,EAAEmkF,SAAShvF,EAAE6K,GAChBA,CACP,EAiKAyyC,EAAWj+C,UAAUglF,gBA1GrB,SAA2Bl4E,GAC3B,IAAIhP,EAAGsH,EAAI6D,KAAKmpD,MAChB,GAAU,GAAPhtD,EAAE0H,GAAU1H,EAAEQ,KAAK,IAAMsrF,EAAUA,EAAU9zF,OAAO,GAAI,CAC1D,IAAIU,EAAI,EAAGA,EAAIozF,EAAU9zF,SAAUU,EACjC,GAAGsH,EAAEQ,KAAK,IAAMsrF,EAAUpzF,GAAI,OAAO,EACvC,OAAO,CACR,CACA,GAAGsH,EAAEurF,SAAU,OAAO,EAEtB,IADA7yF,EAAI,EACEA,EAAIozF,EAAU9zF,QAAQ,CAE3B,IADA,IAAI0C,EAAIoxF,EAAUpzF,GAAImJ,EAAInJ,EAAE,EACtBmJ,EAAIiqF,EAAU9zF,QAAU0C,EAAIqxF,GAAOrxF,GAAKoxF,EAAUjqF,KAExD,IADAnH,EAAIsF,EAAEusF,OAAO7xF,GACPhC,EAAImJ,MAAMnH,EAAEoxF,EAAUpzF,MAAQ,EAAG,OAAO,CAC/C,CACA,OAAOsH,EAAEwsF,YAAY9kF,EACrB,C,iBCloCA,IAAItU,EAAQD,EAAQ,IACpBA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACR,IAAIy6F,EAAgBz6F,EAAQ,MACxBk/D,EAAqBu7B,EAAcv7B,mBACnCsuB,EAAsBiN,EAAcjN,oBAExC,GAAyB,qBAAf9nC,EACR,IAAIA,EAAazlD,EAAM0lD,KAAKD,WAG9B,IAAIlxC,EAAavU,EAAMU,KAAK6T,WACxBkmF,EAAiC,qBAAXjnC,OAAyBC,WAAaD,OAMhExzD,EAAME,IAAMF,EAAME,KAAO,CAAC,EAC1BP,EAAOC,QAAUI,EAAME,IAAIw6F,QAAU16F,EAAM06F,QAAU16F,EAAM06F,SAAW,CAAC,EACvE,IAAIA,EAAU16F,EAAM06F,QA+LpB,SAASC,EAAsB96F,GAC7B,IAAIwV,EAAUxV,EAAQwV,QACtB,GAAGA,aAAmBo+C,YAAcp+C,aAAmBolF,EACrD,OAAOplF,EAGT,IAAI2E,EAAWna,EAAQma,SACvB,QAAe0wC,IAAZr1C,EAAuB,CACxB,IAAGxV,EAAQgK,GAKT,MAAM,IAAIm7E,UAAU,oDAHpB3vE,EAAUxV,EAAQgK,GAAG/D,SAAStE,WAC9BwY,EAAW,QAIf,CAEA,GAAsB,kBAAZ3E,IAAyB2E,EACjC,MAAM,IAAIgrE,UAAU,kDAGtB,GAAsB,kBAAZ3vE,EAAsB,CAC9B,GAAqB,qBAAXm+C,OACR,OAAOA,OAAO+xB,KAAKlwE,EAAS2E,GAE9B3E,EAAU,IAAId,EAAWc,EAAS2E,EACpC,MAAO,KAAK3E,aAAmBd,GAC7B,MAAM,IAAIywE,UACR,8IAOJ,IADA,IAAIltE,EAAS,IAAI2iF,EAAaplF,EAAQzQ,UAC9BU,EAAI,EAAGA,EAAIwS,EAAOlT,SAAUU,EAClCwS,EAAOxS,GAAK+P,EAAQ9P,GAAGD,GAEzB,OAAOwS,CACT,CApOA4iF,EAAQE,UAAY,CAAC,EACrBF,EAAQE,UAAUC,uBAAyB,GAC3CH,EAAQE,UAAUE,wBAA0B,GAC5CJ,EAAQE,UAAUG,iBAAmB,GACrCL,EAAQE,UAAUI,iBAAmB,GACrCN,EAAQE,UAAUK,iBAAmB,GAErCP,EAAQtW,gBAAkB,SAASvkF,GAEjC,IAAI2J,GADJ3J,EAAUA,GAAW,CAAC,GACH2J,KACnB,QAAYkhD,IAATlhD,EAEDA,EAAOxJ,EAAMoE,OAAOC,aAAaq2F,EAAQE,UAAUG,uBAC9C,GAAmB,kBAATvxF,GACf,GAAGA,EAAK5E,SAAW81F,EAAQE,UAAUG,iBACnC,MAAM,IAAI/V,UACR,kBAAoB0V,EAAQE,UAAUG,iBACtC,0BAEC,KAAKvxF,aAAgBiqD,YAC1B,MAAM,IAAIuxB,UACR,oEAGJx7E,EAAOmxF,EAAsB,CAACtlF,QAAS7L,EAAMwQ,SAAU,WAIvD,IAFA,IAAI4/B,EAAK,IAAI6gD,EAAaC,EAAQE,UAAUC,wBACxC9gD,EAAK,IAAI0gD,EAAaC,EAAQE,UAAUE,yBACpCx1F,EAAI,EAAGA,EAAI,KAAMA,EACvBy0C,EAAGz0C,GAAKkE,EAAKlE,GAGf,OA8OF,SAA6Bs0C,EAAIG,GAC/B,IACIz0C,EADAuC,EAAI,CAACy2B,IAAMA,IAAMA,IAAMA,KAGvBj2B,EAAI+/C,EAAOrO,EAAI,IAQnB,IAPA1xC,EAAE,IAAM,IACRA,EAAE,KAAO,IACTA,EAAE,KAAO,GAET6yF,EAAWrzF,EAAGQ,GACd8yF,EAAKvhD,EAAI/xC,GAELvC,EAAI,EAAGA,EAAI,KAAMA,EACnBy0C,EAAGz0C,EAAI,IAAMs0C,EAAGt0C,EAGpB,CA/PE81F,CAAoBxhD,EAAIG,GACjB,CAACiM,UAAWpM,EAAIrhC,WAAYwhC,EACrC,EAUA2gD,EAAQx5F,mBAAqB,SAASF,GACpC,IAAIo+B,EAAU,CAAC,EACXoqB,EAAS,GAEb,IADYxpD,EAAMC,KAAKwpD,SAASzoD,EAAKusF,EAAqBnuD,EAASoqB,GACxD,CACT,IAAI1oD,EAAQ,IAAIL,MAAM,gBAEtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CACA,IAAIknD,EAAMhoD,EAAMC,KAAK8nD,SAAS3oB,EAAQi8D,eAClCC,EAAat7F,EAAMqlD,KAAKk2C,WAC5B,GAAGvzC,IAAQszC,EACT,MAAM,IAAI76F,MAAM,gBAAkBunD,EAAM,mBACtCszC,EAAa,MAEjB,IAAI/iF,EAAa6mB,EAAQ7mB,WAUzB,MAAO,CAACijF,gBAPcb,EAAsB,CAC1CtlF,QAASrV,EAAMC,KAAKgB,QAAQsX,GAAY4H,MACxCnG,SAAU,WAMd,EASA0gF,EAAQt2B,kBAAoB,SAASpjE,GAEnC,IAAIo+B,EAAU,CAAC,EACXoqB,EAAS,GAEb,IADYxpD,EAAMC,KAAKwpD,SAASzoD,EAAKi+D,EAAoB7/B,EAASoqB,GACvD,CACT,IAAI1oD,EAAQ,IAAIL,MAAM,gBAEtB,MADAK,EAAM0oD,OAASA,EACT1oD,CACR,CACA,IAAIknD,EAAMhoD,EAAMC,KAAK8nD,SAAS3oB,EAAQonC,cAClC80B,EAAat7F,EAAMqlD,KAAKk2C,WAC5B,GAAGvzC,IAAQszC,EACT,MAAM,IAAI76F,MAAM,gBAAkBunD,EAAM,mBACtCszC,EAAa,MAEjB,IAAIG,EAAiBr8D,EAAQs8D,iBAC7B,GAAGD,EAAe72F,SAAW81F,EAAQE,UAAUC,uBAC7C,MAAM,IAAIp6F,MAAM,0BAElB,OAAOk6F,EAAsB,CAC3BtlF,QAASomF,EACTzhF,SAAU,UAEd,EAEA0gF,EAAQiB,wBAA0B,SAAS97F,GAEzC,IAAI0Y,EAAaoiF,EAAsB,CACrCtlF,SAFFxV,EAAUA,GAAW,CAAC,GAEH0Y,WAAYyB,SAAU,WAEzC,GAAGzB,EAAW3T,SAAW81F,EAAQE,UAAUE,wBACzC,MAAM,IAAI9V,UACR,mDACA0V,EAAQE,UAAUE,yBAItB,IADA,IAAIlhD,EAAK,IAAI6gD,EAAaC,EAAQE,UAAUC,wBACpCv1F,EAAI,EAAGA,EAAIs0C,EAAGh1C,SAAUU,EAC9Bs0C,EAAGt0C,GAAKiT,EAAW,GAAKjT,GAE1B,OAAOs0C,CACT,EAEA8gD,EAAQ70B,KAAO,SAAShmE,GAEtB,IAAIQ,EAAMs6F,EADV96F,EAAUA,GAAW,CAAC,GAElB0Y,EAAaoiF,EAAsB,CACrCtlF,QAASxV,EAAQ0Y,WACjByB,SAAU,WAEZ,GAAGzB,EAAW3T,SAAW81F,EAAQE,UAAUG,iBAEzCxiF,EADcmiF,EAAQtW,gBAAgB,CAAC56E,KAAM+O,IACxBA,gBAChB,GAAGA,EAAW3T,SAAW81F,EAAQE,UAAUE,wBAChD,MAAM,IAAI9V,UACR,mDACA0V,EAAQE,UAAUG,iBAAmB,OACrCL,EAAQE,UAAUE,yBAGtB,IAAIc,EAAY,IAAInB,EAClBC,EAAQE,UAAUI,iBAAmB36F,EAAIuE,SAqJ7C,SAAqBi3F,EAAIv0F,EAAGI,EAAGqyC,GAC7B,IAAIz0C,EAAGmJ,EAAG7B,EAAI,IAAIkvF,aAAa,IAC3Bj0F,EAAI,CAACy2B,IAAMA,IAAMA,IAAMA,KAEvBj2B,EAAI+/C,EAAOrO,EAAI,IACnB1xC,EAAE,IAAM,IACRA,EAAE,KAAO,IACTA,EAAE,KAAO,GAET,IAAI0zF,EAAQr0F,EAAI,GAChB,IAAIpC,EAAI,EAAGA,EAAIoC,IAAKpC,EAClBu2F,EAAG,GAAKv2F,GAAKgC,EAAEhC,GAEjB,IAAIA,EAAI,EAAGA,EAAI,KAAMA,EACnBu2F,EAAG,GAAKv2F,GAAK+C,EAAE,GAAK/C,GAGtB,IAAIyhC,EAAIqhB,EAAOyzC,EAAGjkC,SAAS,IAAKlwD,EAAI,IAKpC,IAJA6zD,EAAOx0B,GACPm0D,EAAWrzF,EAAGk/B,GACdo0D,EAAKU,EAAIh0F,GAELvC,EAAI,GAAIA,EAAI,KAAMA,EACpBu2F,EAAGv2F,GAAKy0C,EAAGz0C,GAEb,IAAIiD,EAAI6/C,EAAOyzC,EAAIn0F,EAAI,IAGvB,IAFA6zD,EAAOhzD,GAEHjD,EAAI,GAAIA,EAAI,KAAMA,EACpBsH,EAAEtH,GAAK,EAET,IAAIA,EAAI,EAAGA,EAAI,KAAMA,EACnBsH,EAAEtH,GAAKyhC,EAAEzhC,GAEX,IAAIA,EAAI,EAAGA,EAAI,KAAMA,EACnB,IAAImJ,EAAI,EAAGA,EAAI,GAAIA,IACjB7B,EAAEtH,EAAImJ,IAAMlG,EAAEjD,GAAK+C,EAAEoG,GAIzButF,EAAKH,EAAGjkC,SAAS,IAAKhrD,EAExB,CA9LEqvF,CAAYL,EAAWv7F,EAAKA,EAAIuE,OAAQ2T,GAGxC,IADA,IAAI2jF,EAAM,IAAIzB,EAAaC,EAAQE,UAAUI,kBACrC11F,EAAI,EAAGA,EAAI42F,EAAIt3F,SAAUU,EAC/B42F,EAAI52F,GAAKs2F,EAAUt2F,GAErB,OAAO42F,CACT,EAEAxB,EAAQx5B,OAAS,SAASrhE,GAExB,IAAIQ,EAAMs6F,EADV96F,EAAUA,GAAW,CAAC,GAEtB,QAAyB6qD,IAAtB7qD,EAAQshE,UACT,MAAM,IAAI6jB,UACR,uGAGJ,IAAIkX,EAAMvB,EAAsB,CAC9BtlF,QAASxV,EAAQshE,UACjBnnD,SAAU,WAEZ,GAAGkiF,EAAIt3F,SAAW81F,EAAQE,UAAUI,iBAClC,MAAM,IAAIhW,UACR,kDACA0V,EAAQE,UAAUI,kBAEtB,IAAIh1C,EAAY20C,EAAsB,CACpCtlF,QAASxV,EAAQmmD,UACjBhsC,SAAU,WAEZ,GAAGgsC,EAAUphD,SAAW81F,EAAQE,UAAUC,uBACxC,MAAM,IAAI7V,UACR,kDACA0V,EAAQE,UAAUC,wBAGtB,IAEIv1F,EAFAu2F,EAAK,IAAIpB,EAAaC,EAAQE,UAAUI,iBAAmB36F,EAAIuE,QAC/D0C,EAAI,IAAImzF,EAAaC,EAAQE,UAAUI,iBAAmB36F,EAAIuE,QAElE,IAAIU,EAAI,EAAGA,EAAIo1F,EAAQE,UAAUI,mBAAoB11F,EACnDu2F,EAAGv2F,GAAK42F,EAAI52F,GAEd,IAAIA,EAAI,EAAGA,EAAIjF,EAAIuE,SAAUU,EAC3Bu2F,EAAGv2F,EAAIo1F,EAAQE,UAAUI,kBAAoB36F,EAAIiF,GAEnD,OAmJF,SAA0BgC,EAAGu0F,EAAIn0F,EAAGkyC,GAClC,IAAIt0C,EACAgP,EAAI,IAAImmF,EAAa,IACrB5yF,EAAI,CAACy2B,IAAMA,IAAMA,IAAMA,KACvBr2B,EAAI,CAACq2B,IAAMA,IAAMA,IAAMA,KAG3B,GAAG52B,EAAI,GACL,OAAQ,EAGV,GAwIF,SAAmBq/B,EAAGl/B,GACpB,IAAIyM,EAAIgqB,IAAM69D,EAAM79D,IAAM/tB,EAAM+tB,IAC5B89D,EAAM99D,IAAM+9D,EAAO/9D,IAAMg+D,EAAOh+D,IAChCi+D,EAAOj+D,IAEXk+D,EAASz1D,EAAE,GAAI01D,GAuCjB,SAAqBC,EAAGh1F,GACtB,IAAIpC,EACJ,IAAIA,EAAI,EAAGA,EAAI,KAAMA,EACnBo3F,EAAEp3F,GAAKoC,EAAE,EAAIpC,IAAMoC,EAAE,EAAIpC,EAAI,IAAM,GAErCo3F,EAAE,KAAO,KACX,CA5CEC,CAAY51D,EAAE,GAAIl/B,GAClBkuC,EAAExlC,EAAKw2B,EAAE,IACTgE,EAAEqxD,EAAK7rF,EAAKsuB,GACZ8a,EAAEppC,EAAKA,EAAKw2B,EAAE,IACdhpB,EAAEq+E,EAAKr1D,EAAE,GAAIq1D,GAEbrmD,EAAEsmD,EAAMD,GACRrmD,EAAEumD,EAAMD,GACRtxD,EAAEwxD,EAAMD,EAAMD,GACdtxD,EAAEz2B,EAAGioF,EAAMhsF,GACXw6B,EAAEz2B,EAAGA,EAAG8nF,GAoCV,SAAiBM,EAAGp3F,GAClB,IACI4C,EADApG,EAAIw8B,IAER,IAAIp2B,EAAI,EAAGA,EAAI,KAAMA,EACnBpG,EAAEoG,GAAK5C,EAAE4C,GAEX,IAAIA,EAAI,IAAKA,GAAK,IAAKA,EACrB6tC,EAAEj0C,EAAGA,GACI,IAANoG,GACD6iC,EAAEjpC,EAAGA,EAAGwD,GAGZ,IAAI4C,EAAI,EAAGA,EAAI,KAAMA,EACnBw0F,EAAEx0F,GAAKpG,EAAEoG,EAEb,CAjDE00F,CAAQtoF,EAAGA,GACXy2B,EAAEz2B,EAAGA,EAAG/D,GACRw6B,EAAEz2B,EAAGA,EAAG8nF,GACRrxD,EAAEz2B,EAAGA,EAAG8nF,GACRrxD,EAAEhE,EAAE,GAAIzyB,EAAG8nF,GAEXrmD,EAAEomD,EAAKp1D,EAAE,IACTgE,EAAEoxD,EAAKA,EAAKC,GACTS,EAASV,EAAK5rF,IACfw6B,EAAEhE,EAAE,GAAIA,EAAE,GAAIhC,GAKhB,GAFAgR,EAAEomD,EAAKp1D,EAAE,IACTgE,EAAEoxD,EAAKA,EAAKC,GACTS,EAASV,EAAK5rF,GACf,OAAQ,EAGPusF,EAAS/1D,EAAE,MAASl/B,EAAE,KAAO,GAC9B8xC,EAAE5S,EAAE,GAAIg2D,EAAKh2D,EAAE,IAIjB,OADAgE,EAAEhE,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACT,CACT,CAlLKi2D,CAAU/0F,EAAG2xC,GACd,OAAQ,EAGV,IAAIt0C,EAAI,EAAGA,EAAIoC,IAAKpC,EAClBgC,EAAEhC,GAAKu2F,EAAGv2F,GAEZ,IAAIA,EAAI,EAAGA,EAAI,KAAMA,EACnBgC,EAAEhC,EAAI,IAAMs0C,EAAGt0C,GAEjB,IAAIiD,EAAI6/C,EAAO9gD,EAAGI,GASlB,GARA6zD,EAAOhzD,GACP00F,EAAWp1F,EAAGI,EAAGM,GAEjB2yF,EAAWjzF,EAAG4zF,EAAGjkC,SAAS,KAC1B/8C,EAAIhT,EAAGI,GACPkzF,EAAK7mF,EAAGzM,GAERH,GAAK,GACFw1F,EAAiBrB,EAAI,EAAGvnF,EAAG,GAAI,CAChC,IAAIhP,EAAI,EAAGA,EAAIoC,IAAKpC,EAClBgC,EAAEhC,GAAK,EAET,OAAQ,CACV,CAEA,IAAIA,EAAI,EAAGA,EAAIoC,IAAKpC,EAClBgC,EAAEhC,GAAKu2F,EAAGv2F,EAAI,IAGhB,OADOoC,CAET,CA7LUy1F,CAAiB71F,EAAGu0F,EAAIA,EAAGj3F,OAAQohD,IAAc,CAC3D,EA2CA,IAAI+2C,EAAMz+D,IACNm+D,EAAMn+D,EAAG,CAAC,IACVO,EAAIP,EAAG,CACT,MAAQ,KAAQ,MAAQ,MAAQ,MAAQ,MAAQ,KAAQ,IACxD,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,QACtD8+D,EAAK9+D,EAAG,CACV,MAAQ,KAAQ,MAAQ,MAAQ,MAAQ,MAAQ,KAAQ,IACxD,MAAQ,MAAQ,MAAQ,KAAQ,MAAQ,MAAQ,MAAQ,OACtD0Z,EAAI1Z,EAAG,CACT,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MACxD,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,OACtDob,EAAIpb,EAAG,CACT,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MACxD,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,QACtDvwB,EAAI,IAAI+tF,aAAa,CACvB,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAC1C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KAC3C/2D,EAAIzG,EAAG,CACT,MAAQ,MAAQ,KAAQ,MAAQ,MAAQ,MAAQ,KAAQ,MACxD,MAAQ,MAAQ,IAAQ,MAAQ,MAAQ,MAAQ,KAAQ,QAI1D,SAAS8pB,EAAO/nD,EAAKg9F,GAEnB,IAAIxzF,EAAK7J,EAAM6J,GAAGu+C,OAAOviD,SACrBiS,EAAS,IAAIvD,EAAWlU,GAC5BwJ,EAAGpF,OAAOqT,EAAOtW,SAAS67F,GAAS,UACnC,IAAIv3C,EAAOj8C,EAAG/D,SAAStE,WACvB,GAAqB,qBAAXgyD,OACR,OAAOA,OAAO+xB,KAAKz/B,EAAM,UAG3B,IADA,IAAI1yC,EAAM,IAAIqnF,EAAaC,EAAQE,UAAUK,kBACrC31F,EAAI,EAAGA,EAAI,KAAMA,EACvB8N,EAAI9N,GAAKwgD,EAAK8E,WAAWtlD,GAE3B,OAAO8N,CACT,CA6GA,SAAS4oF,EAAKj1D,EAAGn6B,GACf,IAAIs4E,EAAO5/E,EAAGmJ,EAAGvH,EACjB,IAAI5B,EAAI,GAAIA,GAAK,KAAMA,EAAG,CAExB,IADA4/E,EAAQ,EACJz2E,EAAInJ,EAAI,GAAI4B,EAAI5B,EAAI,GAAImJ,EAAIvH,IAAKuH,EACnC7B,EAAE6B,IAAMy2E,EAAQ,GAAKt4E,EAAEtH,GAAKyI,EAAEU,GAAKnJ,EAAI,KACvC4/E,EAASt4E,EAAE6B,GAAK,KAAQ,EACxB7B,EAAE6B,IAAc,IAARy2E,EAEVt4E,EAAE6B,IAAMy2E,EACRt4E,EAAEtH,GAAK,CACT,CAEA,IADA4/E,EAAQ,EACJz2E,EAAI,EAAGA,EAAI,KAAMA,EACnB7B,EAAE6B,IAAMy2E,GAASt4E,EAAE,KAAO,GAAKmB,EAAEU,GACjCy2E,EAAQt4E,EAAE6B,IAAM,EAChB7B,EAAE6B,IAAM,IAEV,IAAIA,EAAI,EAAGA,EAAI,KAAMA,EACnB7B,EAAE6B,IAAMy2E,EAAQn3E,EAAEU,GAEpB,IAAInJ,EAAI,EAAGA,EAAI,KAAMA,EACnBsH,EAAEtH,EAAI,IAAMsH,EAAEtH,IAAM,EACpByhC,EAAEzhC,GAAY,IAAPsH,EAAEtH,EAEb,CAEA,SAASi2D,EAAOx0B,GAEd,IADA,IAAIn6B,EAAI,IAAIkvF,aAAa,IACjBx2F,EAAI,EAAGA,EAAI,KAAMA,EACvBsH,EAAEtH,GAAKyhC,EAAEzhC,GACTyhC,EAAEzhC,GAAK,EAET02F,EAAKj1D,EAAGn6B,EACV,CAEA,SAASiO,EAAIhT,EAAGI,GACd,IAAIC,EAAIo2B,IAAMl2B,EAAIk2B,IAAMx8B,EAAIw8B,IACxBj2B,EAAIi2B,IAAMh2B,EAAIg2B,IAAMr3B,EAAIq3B,IACxBn2B,EAAIm2B,IAAM/1B,EAAI+1B,IAAMhqB,EAAIgqB,IAE5Bqb,EAAEzxC,EAAGL,EAAE,GAAIA,EAAE,IACb8xC,EAAErlC,EAAGrM,EAAE,GAAIA,EAAE,IACb8iC,EAAE7iC,EAAGA,EAAGoM,GACRyJ,EAAE3V,EAAGP,EAAE,GAAIA,EAAE,IACbkW,EAAEzJ,EAAGrM,EAAE,GAAIA,EAAE,IACb8iC,EAAE3iC,EAAGA,EAAGkM,GACRy2B,EAAEjpC,EAAG+F,EAAE,GAAII,EAAE,IACb8iC,EAAEjpC,EAAGA,EAAGs7F,GACRryD,EAAE1iC,EAAGR,EAAE,GAAII,EAAE,IACb8V,EAAE1V,EAAGA,EAAGA,GACRsxC,EAAErxC,EAAGF,EAAGF,GACRyxC,EAAE1yC,EAAGoB,EAAGvG,GACRic,EAAE5V,EAAGE,EAAGvG,GACRic,EAAExV,EAAGH,EAAGF,GAER6iC,EAAEljC,EAAE,GAAIS,EAAGrB,GACX8jC,EAAEljC,EAAE,GAAIU,EAAGJ,GACX4iC,EAAEljC,EAAE,GAAIM,EAAGlB,GACX8jC,EAAEljC,EAAE,GAAIS,EAAGC,EACb,CAEA,SAAS+0F,EAAMz1F,EAAGI,EAAGG,GACnB,IAAI,IAAI9C,EAAI,EAAGA,EAAI,IAAKA,EACtBi4F,EAAS11F,EAAEvC,GAAI2C,EAAE3C,GAAI8C,EAEzB,CAEA,SAAS+yF,EAAKp0D,EAAGl/B,GACf,IAAI21F,EAAKl/D,IAAMm/D,EAAKn/D,IAAMsQ,EAAKtQ,KAgKjC,SAAkBo+D,EAAGp3F,GACnB,IACI4C,EADApG,EAAIw8B,IAER,IAAIp2B,EAAI,EAAGA,EAAI,KAAMA,EACnBpG,EAAEoG,GAAK5C,EAAE4C,GAEX,IAAIA,EAAI,IAAKA,GAAK,IAAKA,EACrB6tC,EAAEj0C,EAAGA,GACI,IAANoG,GAAiB,IAANA,GACZ6iC,EAAEjpC,EAAGA,EAAGwD,GAGZ,IAAI4C,EAAI,EAAGA,EAAI,KAAMA,EACnBw0F,EAAEx0F,GAAKpG,EAAEoG,EAEb,CA9KEw1F,CAAS9uD,EAAI/mC,EAAE,IACfkjC,EAAEyyD,EAAI31F,EAAE,GAAI+mC,GACZ7D,EAAE0yD,EAAI51F,EAAE,GAAI+mC,GACZ+uD,EAAU52D,EAAG02D,GACb12D,EAAE,KAAO+1D,EAASU,IAAO,CAC3B,CAEA,SAASG,EAAUjB,EAAGh1F,GACpB,IAAIpC,EAAGmJ,EAAGrG,EACNd,EAAIg3B,IAAMhqB,EAAIgqB,IAClB,IAAIh5B,EAAI,EAAGA,EAAI,KAAMA,EACnBgP,EAAEhP,GAAKoC,EAAEpC,GAKX,IAHAs4F,EAAStpF,GACTspF,EAAStpF,GACTspF,EAAStpF,GACL7F,EAAI,EAAGA,EAAI,IAAKA,EAAG,CAErB,IADAnH,EAAE,GAAKgN,EAAE,GAAK,MACVhP,EAAI,EAAGA,EAAI,KAAMA,EACnBgC,EAAEhC,GAAKgP,EAAEhP,GAAK,OAAWgC,EAAEhC,EAAI,IAAM,GAAM,GAC3CgC,EAAEhC,EAAE,IAAM,MAEZgC,EAAE,IAAMgN,EAAE,IAAM,OAAWhN,EAAE,KAAO,GAAM,GAC1Cc,EAAKd,EAAE,KAAO,GAAM,EACpBA,EAAE,KAAO,MACTi2F,EAASjpF,EAAGhN,EAAG,EAAIc,EACrB,CACA,IAAK9C,EAAI,EAAGA,EAAI,GAAIA,IAClBo3F,EAAE,EAAIp3F,GAAY,IAAPgP,EAAEhP,GACbo3F,EAAE,EAAIp3F,EAAI,GAAKgP,EAAEhP,IAAM,CAE3B,CAuEA,SAASu3F,EAAS30F,EAAGE,GACnB,IAAItG,EAAI,IAAI24F,EAAa,IACrBpyF,EAAI,IAAIoyF,EAAa,IAGzB,OAFAkD,EAAU77F,EAAGoG,GACby1F,EAAUt1F,EAAGD,GACN80F,EAAiBp7F,EAAG,EAAGuG,EAAG,EACnC,CAEA,SAAS60F,EAAiBtwF,EAAG8hC,EAAI17B,EAAG27B,GAClC,OAGF,SAAY/hC,EAAG8hC,EAAI17B,EAAG27B,EAAIjnC,GACxB,IAAIpC,EAAG+C,EAAI,EACX,IAAI/C,EAAI,EAAGA,EAAIoC,IAAKpC,EAClB+C,GAAKuE,EAAE8hC,EAAKppC,GAAK0N,EAAE27B,EAAKrpC,GAE1B,OAAQ,EAAM+C,EAAI,IAAO,GAAM,CACjC,CATSw1F,CAAGjxF,EAAG8hC,EAAI17B,EAAG27B,EAAI,GAC1B,CAUA,SAASmuD,EAAS50F,GAChB,IAAIG,EAAI,IAAIoyF,EAAa,IAEzB,OADAkD,EAAUt1F,EAAGH,GACC,EAAPG,EAAE,EACX,CAEA,SAAS40F,EAAWp1F,EAAGI,EAAGzE,GACxB,IAAI4E,EAAG9C,EAKP,IAJAk3F,EAAS30F,EAAE,GAAIk1F,GACfP,EAAS30F,EAAE,GAAI40F,GACfD,EAAS30F,EAAE,GAAI40F,GACfD,EAAS30F,EAAE,GAAIk1F,GACXz3F,EAAI,IAAKA,GAAK,IAAKA,EAErBg4F,EAAMz1F,EAAGI,EADTG,EAAK5E,EAAG8B,EAAI,EAAG,KAAW,EAAJA,GAAU,GAEhCuV,EAAI5S,EAAGJ,GACPgT,EAAIhT,EAAGA,GACPy1F,EAAMz1F,EAAGI,EAAGG,EAEhB,CAEA,SAAS8yF,EAAWrzF,EAAGrE,GACrB,IAAIyE,EAAI,CAACq2B,IAAMA,IAAMA,IAAMA,KAC3Bk+D,EAASv0F,EAAE,GAAI+vC,GACfwkD,EAASv0F,EAAE,GAAIyxC,GACf8iD,EAASv0F,EAAE,GAAIw0F,GACf1xD,EAAE9iC,EAAE,GAAI+vC,EAAG0B,GACXujD,EAAWp1F,EAAGI,EAAGzE,EACnB,CAEA,SAASg5F,EAASz1D,EAAG7+B,GACnB,IAAI5C,EACJ,IAAIA,EAAI,EAAGA,EAAI,GAAIA,IACjByhC,EAAEzhC,GAAY,EAAP4C,EAAE5C,EAEb,CAmBA,SAASs4F,EAASlB,GAChB,IAAIp3F,EAAG+V,EAAGvZ,EAAI,EACd,IAAIwD,EAAI,EAAGA,EAAI,KAAMA,EACnB+V,EAAIqhF,EAAEp3F,GAAKxD,EAAI,MACfA,EAAImJ,KAAKK,MAAM+P,EAAI,OACnBqhF,EAAEp3F,GAAK+V,EAAQ,MAAJvZ,EAEb46F,EAAE,IAAM56F,EAAI,EAAI,IAAMA,EAAI,EAC5B,CAEA,SAASy7F,EAAS11F,EAAGI,EAAGG,GAEtB,IADA,IAAIkM,EAAGxS,IAAMsG,EAAI,GACT9C,EAAI,EAAGA,EAAI,KAAMA,EACvBgP,EAAIxS,GAAK+F,EAAEvC,GAAK2C,EAAE3C,IAClBuC,EAAEvC,IAAMgP,EACRrM,EAAE3C,IAAMgP,CAEZ,CAEA,SAASgqB,EAAGj8B,GACV,IAAIiD,EAAGyhC,EAAI,IAAI+0D,aAAa,IAC5B,GAAGz5F,EACD,IAAIiD,EAAI,EAAGA,EAAIjD,EAAKuC,SAAUU,EAC5ByhC,EAAEzhC,GAAKjD,EAAKiD,GAGhB,OAAOyhC,CACT,CAEA,SAAShpB,EAAE2+E,EAAGx0F,EAAGE,GACf,IAAI,IAAI9C,EAAI,EAAGA,EAAI,KAAMA,EACvBo3F,EAAEp3F,GAAK4C,EAAE5C,GAAK8C,EAAE9C,EAEpB,CAEA,SAASq0C,EAAE+iD,EAAGx0F,EAAGE,GACf,IAAI,IAAI9C,EAAI,EAAGA,EAAI,KAAMA,EACvBo3F,EAAEp3F,GAAK4C,EAAE5C,GAAK8C,EAAE9C,EAEpB,CAEA,SAASywC,EAAE2mD,EAAGx0F,GACZ6iC,EAAE2xD,EAAGx0F,EAAGA,EACV,CAEA,SAAS6iC,EAAE2xD,EAAGx0F,EAAGE,GACf,IAAIiT,EAAGvZ,EACJg8F,EAAK,EAAI/qC,EAAK,EAAIC,EAAK,EAAI+qC,EAAK,EAAIC,EAAK,EAAIC,EAAK,EAAIC,EAAK,EAAIC,EAAK,EACpEC,EAAK,EAAIC,EAAK,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EACrEC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EACrEC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAC5DC,EAAKv3F,EAAE,GACP6pE,EAAK7pE,EAAE,GACP05D,EAAK15D,EAAE,GACP25D,EAAK35D,EAAE,GACPw3F,EAAKx3F,EAAE,GACPy3F,EAAKz3F,EAAE,GACP03F,EAAK13F,EAAE,GACP23F,EAAK33F,EAAE,GACP43F,EAAK53F,EAAE,GACP63F,EAAK73F,EAAE,GACP83F,EAAM93F,EAAE,IACR+3F,EAAM/3F,EAAE,IACRg4F,EAAMh4F,EAAE,IACRi4F,EAAMj4F,EAAE,IACRk4F,EAAMl4F,EAAE,IACRm4F,EAAMn4F,EAAE,IAGV01F,IADAziF,EAAInT,EAAE,IACIy3F,EACV5sC,GAAM13C,EAAI42D,EACVjf,GAAM33C,EAAIymD,EACVi8B,GAAM1iF,EAAI0mD,EACVi8B,GAAM3iF,EAAIukF,EACV3B,GAAM5iF,EAAIwkF,EACV3B,GAAM7iF,EAAIykF,EACV3B,GAAM9iF,EAAI0kF,EACV3B,GAAM/iF,EAAI2kF,EACV3B,GAAMhjF,EAAI4kF,EACV3B,GAAOjjF,EAAI6kF,EACX3B,GAAOljF,EAAI8kF,EACX3B,GAAOnjF,EAAI+kF,EACX3B,GAAOpjF,EAAIglF,EACX3B,GAAOrjF,EAAIilF,EACX3B,GAAOtjF,EAAIklF,EAEXxtC,IADA13C,EAAInT,EAAE,IACIy3F,EACV3sC,GAAM33C,EAAI42D,EACV8rB,GAAM1iF,EAAIymD,EACVk8B,GAAM3iF,EAAI0mD,EACVk8B,GAAM5iF,EAAIukF,EACV1B,GAAM7iF,EAAIwkF,EACV1B,GAAM9iF,EAAIykF,EACV1B,GAAM/iF,EAAI0kF,EACV1B,GAAMhjF,EAAI2kF,EACV1B,GAAOjjF,EAAI4kF,EACX1B,GAAOljF,EAAI6kF,EACX1B,GAAOnjF,EAAI8kF,EACX1B,GAAOpjF,EAAI+kF,EACX1B,GAAOrjF,EAAIglF,EACX1B,GAAOtjF,EAAIilF,EACX1B,GAAOvjF,EAAIklF,EAEXvtC,IADA33C,EAAInT,EAAE,IACIy3F,EACV5B,GAAM1iF,EAAI42D,EACV+rB,GAAM3iF,EAAIymD,EACVm8B,GAAM5iF,EAAI0mD,EACVm8B,GAAM7iF,EAAIukF,EACVzB,GAAM9iF,EAAIwkF,EACVzB,GAAM/iF,EAAIykF,EACVzB,GAAMhjF,EAAI0kF,EACVzB,GAAOjjF,EAAI2kF,EACXzB,GAAOljF,EAAI4kF,EACXzB,GAAOnjF,EAAI6kF,EACXzB,GAAOpjF,EAAI8kF,EACXzB,GAAOrjF,EAAI+kF,EACXzB,GAAOtjF,EAAIglF,EACXzB,GAAOvjF,EAAIilF,EACXzB,GAAOxjF,EAAIklF,EAEXxC,IADA1iF,EAAInT,EAAE,IACIy3F,EACV3B,GAAM3iF,EAAI42D,EACVgsB,GAAM5iF,EAAIymD,EACVo8B,GAAM7iF,EAAI0mD,EACVo8B,GAAM9iF,EAAIukF,EACVxB,GAAM/iF,EAAIwkF,EACVxB,GAAMhjF,EAAIykF,EACVxB,GAAOjjF,EAAI0kF,EACXxB,GAAOljF,EAAI2kF,EACXxB,GAAOnjF,EAAI4kF,EACXxB,GAAOpjF,EAAI6kF,EACXxB,GAAOrjF,EAAI8kF,EACXxB,GAAOtjF,EAAI+kF,EACXxB,GAAOvjF,EAAIglF,EACXxB,GAAOxjF,EAAIilF,EACXxB,GAAOzjF,EAAIklF,EAEXvC,IADA3iF,EAAInT,EAAE,IACIy3F,EACV1B,GAAM5iF,EAAI42D,EACVisB,GAAM7iF,EAAIymD,EACVq8B,GAAM9iF,EAAI0mD,EACVq8B,GAAM/iF,EAAIukF,EACVvB,GAAMhjF,EAAIwkF,EACVvB,GAAOjjF,EAAIykF,EACXvB,GAAOljF,EAAI0kF,EACXvB,GAAOnjF,EAAI2kF,EACXvB,GAAOpjF,EAAI4kF,EACXvB,GAAOrjF,EAAI6kF,EACXvB,GAAOtjF,EAAI8kF,EACXvB,GAAOvjF,EAAI+kF,EACXvB,GAAOxjF,EAAIglF,EACXvB,GAAOzjF,EAAIilF,EACXvB,GAAO1jF,EAAIklF,EAEXtC,IADA5iF,EAAInT,EAAE,IACIy3F,EACVzB,GAAM7iF,EAAI42D,EACVksB,GAAM9iF,EAAIymD,EACVs8B,GAAM/iF,EAAI0mD,EACVs8B,GAAMhjF,EAAIukF,EACVtB,GAAOjjF,EAAIwkF,EACXtB,GAAOljF,EAAIykF,EACXtB,GAAOnjF,EAAI0kF,EACXtB,GAAOpjF,EAAI2kF,EACXtB,GAAOrjF,EAAI4kF,EACXtB,GAAOtjF,EAAI6kF,EACXtB,GAAOvjF,EAAI8kF,EACXtB,GAAOxjF,EAAI+kF,EACXtB,GAAOzjF,EAAIglF,EACXtB,GAAO1jF,EAAIilF,EACXtB,GAAO3jF,EAAIklF,EAEXrC,IADA7iF,EAAInT,EAAE,IACIy3F,EACVxB,GAAM9iF,EAAI42D,EACVmsB,GAAM/iF,EAAIymD,EACVu8B,GAAMhjF,EAAI0mD,EACVu8B,GAAOjjF,EAAIukF,EACXrB,GAAOljF,EAAIwkF,EACXrB,GAAOnjF,EAAIykF,EACXrB,GAAOpjF,EAAI0kF,EACXrB,GAAOrjF,EAAI2kF,EACXrB,GAAOtjF,EAAI4kF,EACXrB,GAAOvjF,EAAI6kF,EACXrB,GAAOxjF,EAAI8kF,EACXrB,GAAOzjF,EAAI+kF,EACXrB,GAAO1jF,EAAIglF,EACXrB,GAAO3jF,EAAIilF,EACXrB,GAAO5jF,EAAIklF,EAEXpC,IADA9iF,EAAInT,EAAE,IACIy3F,EACVvB,GAAM/iF,EAAI42D,EACVosB,GAAMhjF,EAAIymD,EACVw8B,GAAOjjF,EAAI0mD,EACXw8B,GAAOljF,EAAIukF,EACXpB,GAAOnjF,EAAIwkF,EACXpB,GAAOpjF,EAAIykF,EACXpB,GAAOrjF,EAAI0kF,EACXpB,GAAOtjF,EAAI2kF,EACXpB,GAAOvjF,EAAI4kF,EACXpB,GAAOxjF,EAAI6kF,EACXpB,GAAOzjF,EAAI8kF,EACXpB,GAAO1jF,EAAI+kF,EACXpB,GAAO3jF,EAAIglF,EACXpB,GAAO5jF,EAAIilF,EACXpB,GAAO7jF,EAAIklF,EAEXnC,IADA/iF,EAAInT,EAAE,IACIy3F,EACVtB,GAAMhjF,EAAI42D,EACVqsB,GAAOjjF,EAAIymD,EACXy8B,GAAOljF,EAAI0mD,EACXy8B,GAAOnjF,EAAIukF,EACXnB,GAAOpjF,EAAIwkF,EACXnB,GAAOrjF,EAAIykF,EACXnB,GAAOtjF,EAAI0kF,EACXnB,GAAOvjF,EAAI2kF,EACXnB,GAAOxjF,EAAI4kF,EACXnB,GAAOzjF,EAAI6kF,EACXnB,GAAO1jF,EAAI8kF,EACXnB,GAAO3jF,EAAI+kF,EACXnB,GAAO5jF,EAAIglF,EACXnB,GAAO7jF,EAAIilF,EACXnB,GAAO9jF,EAAIklF,EAEXlC,IADAhjF,EAAInT,EAAE,IACIy3F,EACVrB,GAAOjjF,EAAI42D,EACXssB,GAAOljF,EAAIymD,EACX08B,GAAOnjF,EAAI0mD,EACX08B,GAAOpjF,EAAIukF,EACXlB,GAAOrjF,EAAIwkF,EACXlB,GAAOtjF,EAAIykF,EACXlB,GAAOvjF,EAAI0kF,EACXlB,GAAOxjF,EAAI2kF,EACXlB,GAAOzjF,EAAI4kF,EACXlB,GAAO1jF,EAAI6kF,EACXlB,GAAO3jF,EAAI8kF,EACXlB,GAAO5jF,EAAI+kF,EACXlB,GAAO7jF,EAAIglF,EACXlB,GAAO9jF,EAAIilF,EACXlB,GAAO/jF,EAAIklF,EAEXjC,IADAjjF,EAAInT,EAAE,KACKy3F,EACXpB,GAAOljF,EAAI42D,EACXusB,GAAOnjF,EAAIymD,EACX28B,GAAOpjF,EAAI0mD,EACX28B,GAAOrjF,EAAIukF,EACXjB,GAAOtjF,EAAIwkF,EACXjB,GAAOvjF,EAAIykF,EACXjB,GAAOxjF,EAAI0kF,EACXjB,GAAOzjF,EAAI2kF,EACXjB,GAAO1jF,EAAI4kF,EACXjB,GAAO3jF,EAAI6kF,EACXjB,GAAO5jF,EAAI8kF,EACXjB,GAAO7jF,EAAI+kF,EACXjB,GAAO9jF,EAAIglF,EACXjB,GAAO/jF,EAAIilF,EACXjB,GAAOhkF,EAAIklF,EAEXhC,IADAljF,EAAInT,EAAE,KACKy3F,EACXnB,GAAOnjF,EAAI42D,EACXwsB,GAAOpjF,EAAIymD,EACX48B,GAAOrjF,EAAI0mD,EACX48B,GAAOtjF,EAAIukF,EACXhB,GAAOvjF,EAAIwkF,EACXhB,GAAOxjF,EAAIykF,EACXhB,GAAOzjF,EAAI0kF,EACXhB,GAAO1jF,EAAI2kF,EACXhB,GAAO3jF,EAAI4kF,EACXhB,GAAO5jF,EAAI6kF,EACXhB,GAAO7jF,EAAI8kF,EACXhB,GAAO9jF,EAAI+kF,EACXhB,GAAO/jF,EAAIglF,EACXhB,GAAOhkF,EAAIilF,EACXhB,GAAOjkF,EAAIklF,EAEX/B,IADAnjF,EAAInT,EAAE,KACKy3F,EACXlB,GAAOpjF,EAAI42D,EACXysB,GAAOrjF,EAAIymD,EACX68B,GAAOtjF,EAAI0mD,EACX68B,GAAOvjF,EAAIukF,EACXf,GAAOxjF,EAAIwkF,EACXf,GAAOzjF,EAAIykF,EACXf,GAAO1jF,EAAI0kF,EACXf,GAAO3jF,EAAI2kF,EACXf,GAAO5jF,EAAI4kF,EACXf,GAAO7jF,EAAI6kF,EACXf,GAAO9jF,EAAI8kF,EACXf,GAAO/jF,EAAI+kF,EACXf,GAAOhkF,EAAIglF,EACXf,GAAOjkF,EAAIilF,EACXf,GAAOlkF,EAAIklF,EAEX9B,IADApjF,EAAInT,EAAE,KACKy3F,EACXjB,GAAOrjF,EAAI42D,EACX0sB,GAAOtjF,EAAIymD,EACX88B,GAAOvjF,EAAI0mD,EACX88B,GAAOxjF,EAAIukF,EACXd,GAAOzjF,EAAIwkF,EACXd,GAAO1jF,EAAIykF,EACXd,GAAO3jF,EAAI0kF,EACXd,GAAO5jF,EAAI2kF,EACXd,GAAO7jF,EAAI4kF,EACXd,GAAO9jF,EAAI6kF,EACXd,GAAO/jF,EAAI8kF,EACXd,GAAOhkF,EAAI+kF,EACXd,GAAOjkF,EAAIglF,EACXd,GAAOlkF,EAAIilF,EACXd,GAAOnkF,EAAIklF,EAEX7B,IADArjF,EAAInT,EAAE,KACKy3F,EACXhB,GAAOtjF,EAAI42D,EACX2sB,GAAOvjF,EAAIymD,EACX+8B,GAAOxjF,EAAI0mD,EACX+8B,GAAOzjF,EAAIukF,EACXb,GAAO1jF,EAAIwkF,EACXb,GAAO3jF,EAAIykF,EACXb,GAAO5jF,EAAI0kF,EACXb,GAAO7jF,EAAI2kF,EACXb,GAAO9jF,EAAI4kF,EACXb,GAAO/jF,EAAI6kF,EACXb,GAAOhkF,EAAI8kF,EACXb,GAAOjkF,EAAI+kF,EACXb,GAAOlkF,EAAIglF,EACXb,GAAOnkF,EAAIilF,EACXb,GAAOpkF,EAAIklF,EAEX5B,IADAtjF,EAAInT,EAAE,KACKy3F,EAkBX5sC,GAAO,IAhBP8rC,GAAOxjF,EAAIymD,GAiBX9O,GAAO,IAhBP8rC,GAAOzjF,EAAI0mD,GAiBXg8B,GAAO,IAhBPgB,GAAO1jF,EAAIukF,GAiBX5B,GAAO,IAhBPgB,GAAO3jF,EAAIwkF,GAiBX5B,GAAO,IAhBPgB,GAAO5jF,EAAIykF,GAiBX5B,GAAO,IAhBPgB,GAAO7jF,EAAI0kF,GAiBX5B,GAAO,IAhBPgB,GAAO9jF,EAAI2kF,GAiBX5B,GAAO,IAhBPgB,GAAO/jF,EAAI4kF,GAiBX5B,GAAO,IAhBPgB,GAAOhkF,EAAI6kF,GAiBX5B,GAAO,IAhBPgB,GAAOjkF,EAAI8kF,GAiBX5B,GAAO,IAhBPgB,GAAOlkF,EAAI+kF,GAiBX5B,GAAO,IAhBPgB,GAAOnkF,EAAIglF,GAiBX5B,GAAO,IAhBPgB,GAAOpkF,EAAIilF,GAiBX5B,GAAO,IAhBPgB,GAAOrkF,EAAIklF,GAqBsCzC,GAAjDziF,GAnBAyiF,GAAO,IAhBPc,GAAOvjF,EAAI42D,KAkCXnwE,EAAI,GACU,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS03C,GAAjD13C,EAAK03C,EAAKjxD,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS23C,GAAjD33C,EAAK23C,EAAKlxD,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS0iF,GAAjD1iF,EAAK0iF,EAAKj8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS2iF,GAAjD3iF,EAAK2iF,EAAKl8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS4iF,GAAjD5iF,EAAK4iF,EAAKn8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS6iF,GAAjD7iF,EAAK6iF,EAAKp8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS8iF,GAAjD9iF,EAAK8iF,EAAKr8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS+iF,GAAjD/iF,EAAK+iF,EAAKt8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACSgjF,GAAjDhjF,EAAKgjF,EAAKv8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQijF,GAAhDjjF,EAAIijF,EAAMx8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQkjF,GAAhDljF,EAAIkjF,EAAMz8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQmjF,GAAhDnjF,EAAImjF,EAAM18F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQojF,GAAhDpjF,EAAIojF,EAAM38F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQqjF,GAAhDrjF,EAAIqjF,EAAM58F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQsjF,GAAhDtjF,EAAIsjF,EAAM78F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QAKSyiF,GAAjDziF,GAJAyiF,GAAMh8F,EAAE,EAAI,IAAMA,EAAE,KAGpBA,EAAI,GACU,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS03C,GAAjD13C,EAAK03C,EAAKjxD,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS23C,GAAjD33C,EAAK23C,EAAKlxD,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS0iF,GAAjD1iF,EAAK0iF,EAAKj8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS2iF,GAAjD3iF,EAAK2iF,EAAKl8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS4iF,GAAjD5iF,EAAK4iF,EAAKn8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS6iF,GAAjD7iF,EAAK6iF,EAAKp8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS8iF,GAAjD9iF,EAAK8iF,EAAKr8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACS+iF,GAAjD/iF,EAAK+iF,EAAKt8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACSgjF,GAAjDhjF,EAAKgjF,EAAKv8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQijF,GAAhDjjF,EAAIijF,EAAMx8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQkjF,GAAhDljF,EAAIkjF,EAAMz8F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQmjF,GAAhDnjF,EAAImjF,EAAM18F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQojF,GAAhDpjF,EAAIojF,EAAM38F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQqjF,GAAhDrjF,EAAIqjF,EAAM58F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACQsjF,GAAhDtjF,EAAIsjF,EAAM78F,EAAI,OAAgD,OAAzCA,EAAImJ,KAAKK,MAAM+P,EAAI,QACxCyiF,GAAMh8F,EAAE,EAAI,IAAMA,EAAE,GAEpB46F,EAAG,GAAKoB,EACRpB,EAAG,GAAK3pC,EACR2pC,EAAG,GAAK1pC,EACR0pC,EAAG,GAAKqB,EACRrB,EAAG,GAAKsB,EACRtB,EAAG,GAAKuB,EACRvB,EAAG,GAAKwB,EACRxB,EAAG,GAAKyB,EACRzB,EAAG,GAAK0B,EACR1B,EAAG,GAAK2B,EACR3B,EAAE,IAAM4B,EACR5B,EAAE,IAAM6B,EACR7B,EAAE,IAAM8B,EACR9B,EAAE,IAAM+B,EACR/B,EAAE,IAAMgC,EACRhC,EAAE,IAAMiC,CACV,C,iBCxiCA,IAAI3+F,EAAQD,EAAQ,IACpBA,EAAQ,MAERJ,EAAOC,QAAUI,EAAMmU,IAAMnU,EAAMmU,KAAO,CAAC,EAC3CnU,EAAMmU,IAAIC,KAAOpU,EAAMoU,I,GCVnBosF,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBh2C,IAAjBi2C,EACH,OAAOA,EAAa/gG,QAGrB,IAAID,EAAS6gG,EAAyBE,GAAY,CAGjD9gG,QAAS,CAAC,GAOX,OAHAghG,EAAoBF,GAAU/gG,EAAQA,EAAOC,QAAS6gG,GAG/C9gG,EAAOC,OACf,CCrBA6gG,EAAoB/4F,EAAK/H,IACxB,IAAIkhG,EAASlhG,GAAUA,EAAOmhG,WAC7B,IAAOnhG,EAAiB,QACxB,IAAM,EAEP,OADA8gG,EAAoBp4F,EAAEw4F,EAAQ,CAAE34F,EAAG24F,IAC5BA,G,MCNR,IACIE,EADAC,EAAWz5F,OAAO05F,eAAkBjgG,GAASuG,OAAO05F,eAAejgG,GAASA,GAASA,EAAa,UAQtGy/F,EAAoBnsF,EAAI,SAAS6L,EAAOulB,GAEvC,GADU,EAAPA,IAAUvlB,EAAQ1P,KAAK0P,IAChB,EAAPulB,EAAU,OAAOvlB,EACpB,GAAoB,kBAAVA,GAAsBA,EAAO,CACtC,GAAW,EAAPulB,GAAavlB,EAAM2gF,WAAY,OAAO3gF,EAC1C,GAAW,GAAPulB,GAAoC,oBAAfvlB,EAAMshB,KAAqB,OAAOthB,CAC5D,CACA,IAAI+gF,EAAK35F,OAAO1B,OAAO,MACvB46F,EAAoB15D,EAAEm6D,GACtB,IAAIC,EAAM,CAAC,EACXJ,EAAiBA,GAAkB,CAAC,KAAMC,EAAS,CAAC,GAAIA,EAAS,IAAKA,EAASA,IAC/E,IAAI,IAAIn4F,EAAiB,EAAP68B,GAAYvlB,GAA0B,iBAAXtX,GAAyC,mBAAXA,MAA4Bk4F,EAAeh7E,QAAQld,GAAUA,EAAUm4F,EAASn4F,GAC1JtB,OAAO65F,oBAAoBv4F,GAASiT,QAAS1a,GAAS+/F,EAAI//F,GAAO,IAAO+e,EAAM/e,IAI/E,OAFA+/F,EAAa,QAAI,IAAM,EACvBV,EAAoBp4F,EAAE64F,EAAIC,GACnBD,CACR,C,KCxBAT,EAAoBp4F,EAAI,CAACzI,EAASyhG,KACjC,IAAI,IAAIjgG,KAAOigG,EACXZ,EAAoB/D,EAAE2E,EAAYjgG,KAASq/F,EAAoB/D,EAAE98F,EAASwB,IAC5EmG,OAAOgX,eAAe3e,EAASwB,EAAK,CAAEwe,YAAY,EAAMlI,IAAK2pF,EAAWjgG,MCJ3Eq/F,EAAoBt4F,EAAI,WACvB,GAA0B,kBAAfm5F,WAAyB,OAAOA,WAC3C,IACC,OAAO7wF,MAAQ,IAAI8wF,SAAS,cAAb,EAChB,CAAE,MAAOj5F,GACR,GAAsB,kBAAX6O,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBspF,EAAoB/D,EAAI,CAAC17F,EAAK03D,IAAUnxD,OAAOC,UAAUC,eAAee,KAAKxH,EAAK03D,GCClF+nC,EAAoB15D,EAAKnnC,IACH,qBAAXuH,QAA0BA,OAAOq6F,aAC1Cj6F,OAAOgX,eAAe3e,EAASuH,OAAOq6F,YAAa,CAAErhF,MAAO,WAE7D5Y,OAAOgX,eAAe3e,EAAS,aAAc,CAAEugB,OAAO,K,iLCJvD,SAAS,EAAyB7X,EAAGgM,GACnC,GAAI,MAAQhM,EAAG,MAAO,CAAC,EACvB,IAAIo0F,EACF31D,EACAzhC,ECLJ,SAAuCyhC,EAAGz+B,GACxC,GAAI,MAAQy+B,EAAG,MAAO,CAAC,EACvB,IAAIzyB,EAAI,CAAC,EACT,IAAK,IAAI5M,KAAKq/B,EAAG,GAAI,CAAC,EAAEt/B,eAAee,KAAKu+B,EAAGr/B,GAAI,CACjD,IAAK,IAAMY,EAAEyd,QAAQre,GAAI,SACzB4M,EAAE5M,GAAKq/B,EAAEr/B,EACX,CACA,OAAO4M,CACT,CDHQ,CAA6BhM,EAAGgM,GACtC,GAAI/M,OAAOk6F,sBAAuB,CAChC,IAAI/5F,EAAIH,OAAOk6F,sBAAsBn5F,GACrC,IAAKy+B,EAAI,EAAGA,EAAIr/B,EAAE9C,OAAQmiC,IAAK21D,EAAIh1F,EAAEq/B,IAAK,IAAMzyB,EAAEyR,QAAQ22E,IAAM,CAAC,EAAEgF,qBAAqBl5F,KAAKF,EAAGo0F,KAAOp3F,EAAEo3F,GAAKp0F,EAAEo0F,GAClH,CACA,OAAOp3F,CACT,CEXA,SAASq8F,EAAQjF,GAGf,OAAOiF,EAAU,mBAAqBx6F,QAAU,iBAAmBA,OAAOyW,SAAW,SAAU8+E,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAK,mBAAqBv1F,QAAUu1F,EAAEh9E,cAAgBvY,QAAUu1F,IAAMv1F,OAAOK,UAAY,gBAAkBk1F,CACpH,EAAGiF,EAAQjF,EACb,CCNA,SAASkF,EAActtF,GACrB,IAAIhP,ECFN,SAAqBgP,EAAGyyB,GACtB,GAAI,UAAY46D,EAAQrtF,KAAOA,EAAG,OAAOA,EACzC,IAAIhM,EAAIgM,EAAEnN,OAAO06F,aACjB,QAAI,IAAWv5F,EAAG,CAChB,IAAIhD,EAAIgD,EAAEE,KAAK8L,EAAGyyB,GAAK,WACvB,GAAI,UAAY46D,EAAQr8F,GAAI,OAAOA,EACnC,MAAM,IAAI0/E,UAAU,+CACtB,CACA,OAAQ,WAAaj+C,EAAIl6B,OAASi1F,QAAQxtF,EAC5C,CDPUutF,CAAYvtF,EAAG,UACvB,MAAO,UAAYqtF,EAAQr8F,GAAKA,EAAIA,EAAI,EAC1C,CEJA,SAASy8F,EAAgBz5F,EAAGy+B,EAAGzyB,GAC7B,OAAQyyB,EAAI66D,EAAc76D,MAAOz+B,EAAIf,OAAOgX,eAAejW,EAAGy+B,EAAG,CAC/D5mB,MAAO7L,EACPsL,YAAY,EACZD,cAAc,EACdqiF,UAAU,IACP15F,EAAEy+B,GAAKzyB,EAAGhM,CACjB,CCPA,SAAS25F,EAAQ35F,EAAGy+B,GAClB,IAAIzyB,EAAI/M,OAAO/E,KAAK8F,GACpB,GAAIf,OAAOk6F,sBAAuB,CAChC,IAAI/E,EAAIn1F,OAAOk6F,sBAAsBn5F,GACrCy+B,IAAM21D,EAAIA,EAAE3tC,OAAO,SAAUhoB,GAC3B,OAAOx/B,OAAOkY,yBAAyBnX,EAAGy+B,GAAGnnB,UAC/C,IAAKtL,EAAEvF,KAAKiH,MAAM1B,EAAGooF,EACvB,CACA,OAAOpoF,CACT,CACA,SAAS4tF,EAAe55F,GACtB,IAAK,IAAIy+B,EAAI,EAAGA,EAAI5wB,UAAUvR,OAAQmiC,IAAK,CACzC,IAAIzyB,EAAI,MAAQ6B,UAAU4wB,GAAK5wB,UAAU4wB,GAAK,CAAC,EAC/CA,EAAI,EAAIk7D,EAAQ16F,OAAO+M,IAAI,GAAIwH,QAAQ,SAAUirB,GAC/C,EAAez+B,EAAGy+B,EAAGzyB,EAAEyyB,GACzB,GAAKx/B,OAAO46F,0BAA4B56F,OAAO66F,iBAAiB95F,EAAGf,OAAO46F,0BAA0B7tF,IAAM2tF,EAAQ16F,OAAO+M,IAAIwH,QAAQ,SAAUirB,GAC7Ix/B,OAAOgX,eAAejW,EAAGy+B,EAAGx/B,OAAOkY,yBAAyBnL,EAAGyyB,GACjE,EACF,CACA,OAAOz+B,CACT,C,4aCXA,IAcI+5F,EAAoB,WAiGxB,SAASC,IAcP,OAAOC,EAbP,SAA+BC,EAASC,GACtC,IAAI,SAAEC,EAAQ,OAAElqE,EAAM,KAAEstB,GAAS08C,EAAQprF,SACzC,OAAOurF,EACL,GACA,CAAED,WAAUlqE,SAAQstB,QAEpB28C,EAAc5gG,OAAS4gG,EAAc5gG,MAAM+gG,KAAO,KAClDH,EAAc5gG,OAAS4gG,EAAc5gG,MAAMT,KAAO,UAEtD,EACA,SAA2BohG,EAASK,GAClC,MAAqB,kBAAPA,EAAkBA,EAAKC,EAAWD,EAClD,EAIE,KAjBiC1sF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EAoBzC,CA4CA,SAAS4sF,EAAU5iF,EAAO9K,GACxB,IAAc,IAAV8K,GAA6B,OAAVA,GAAmC,qBAAVA,EAC9C,MAAM,IAAI1f,MAAM4U,EAEpB,CACA,SAAS2B,EAAQgsF,EAAM3tF,GACrB,IAAK2tF,EAAM,CACc,qBAAZrsF,SAAyBA,QAAQC,KAAKvB,GACjD,IACE,MAAM,IAAI5U,MAAM4U,EAClB,CAAE,MAAO/M,IACT,CACF,CACF,CAIA,SAAS26F,EAAgB7rF,EAAUlC,GACjC,MAAO,CACL0tF,IAAKxrF,EAASvV,MACdT,IAAKgW,EAAShW,IACd23D,IAAK7jD,EAET,CACA,SAASytF,EAAe95F,EAASg6F,GAAuB,IAAnBhhG,EAAKsU,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,KAAM/U,EAAG+U,UAAAvR,OAAA,EAAAuR,UAAA,QAAAu0C,EAapD,OAZYw4C,EAAAA,EAAA,CACVR,SAA6B,kBAAZ75F,EAAuBA,EAAUA,EAAQ65F,SAC1DlqE,OAAQ,GACRstB,KAAM,IACW,kBAAP+8C,EAAkBM,EAAUN,GAAMA,GAAE,IAC9ChhG,QAKAT,IAAKyhG,GAAMA,EAAGzhG,KAAOA,GApBhB6J,KAAK7G,SAASqI,SAAS,IAAIyZ,UAAU,EAAG,KAuBjD,CACA,SAAS48E,EAAUM,GAIhB,IAJiB,SAClBV,EAAW,IAAG,OACdlqE,EAAS,GAAE,KACXstB,EAAO,IACRs9C,EAKC,OAJI5qE,GAAqB,MAAXA,IACZkqE,GAAiC,MAArBlqE,EAAOvS,OAAO,GAAauS,EAAS,IAAMA,GACpDstB,GAAiB,MAATA,IACV48C,GAA+B,MAAnB58C,EAAK7/B,OAAO,GAAa6/B,EAAO,IAAMA,GAC7C48C,CACT,CACA,SAASS,EAAUE,GACjB,IAAIC,EAAa,CAAC,EAClB,GAAID,EAAM,CACR,IAAIE,EAAYF,EAAKt9E,QAAQ,KACzBw9E,GAAa,IACfD,EAAWx9C,KAAOu9C,EAAKn9E,UAAUq9E,GACjCF,EAAOA,EAAKn9E,UAAU,EAAGq9E,IAE3B,IAAIC,EAAcH,EAAKt9E,QAAQ,KAC3By9E,GAAe,IACjBF,EAAW9qE,OAAS6qE,EAAKn9E,UAAUs9E,GACnCH,EAAOA,EAAKn9E,UAAU,EAAGs9E,IAEvBH,IACFC,EAAWZ,SAAWW,EAE1B,CACA,OAAOC,CACT,CACA,SAASf,EAAmBkB,EAAaC,EAAaC,GAAgC,IAAd9jG,EAAOsW,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,GAC3EgB,OAAQqrF,EAAUznF,SAAS6gB,YAAW,SAAEgoE,GAAW,GAAU/jG,EAC/D4iG,EAAgBD,EAAQqB,QACxBx3D,EAAS,MACTl/B,EAAW,KACX+H,EAAQ4uF,IAKZ,SAASA,IAEP,OADYrB,EAAc5gG,OAAS,CAAEk3D,IAAK,OAC7BA,GACf,CACA,SAASgrC,IACP13D,EAAS,MACT,IAAI23D,EAAYF,IACZG,EAAqB,MAAbD,EAAoB,KAAOA,EAAY9uF,EACnDA,EAAQ8uF,EACJ72F,GACFA,EAAS,CAAEk/B,SAAQj1B,SAAUysF,EAAQzsF,SAAU6sF,SAEnD,CAgCA,SAASC,EAAUrB,GACjB,OAAOsB,EAAqBtB,EAC9B,CAlDa,MAAT3tF,IACFA,EAAQ,EACRutF,EAAc2B,aAAYlB,EAAAA,EAAC,CAAC,EAAIT,EAAc5gG,OAAK,IAAEk3D,IAAK7jD,IAAS,KAiDrE,IAAI2uF,EAAU,CACZ,UAAIx3D,GACF,OAAOA,CACT,EACA,YAAIj1B,GACF,OAAOqsF,EAAYjB,EAASC,EAC9B,EACA4B,MAAAA,CAAO7T,GACL,GAAIrjF,EACF,MAAM,IAAI1M,MAAM,8CAIlB,OAFA+hG,EAAQt1F,iBAAiBm1F,EAAmB0B,GAC5C52F,EAAWqjF,EACJ,KACLgS,EAAQn1F,oBAAoBg1F,EAAmB0B,GAC/C52F,EAAW,KAEf,EACAm3F,WAAWzB,GACFa,EAAYlB,EAASK,GAE9BqB,YACAK,cAAAA,CAAe1B,GACb,IAAIlqE,EAAMurE,EAAUrB,GACpB,MAAO,CACLH,SAAU/pE,EAAI+pE,SACdlqE,OAAQG,EAAIH,OACZstB,KAAMntB,EAAImtB,KAEd,EACA/2C,KAhEF,SAAc8zF,EAAIhhG,GAChBwqC,EAAS,OACT,IAAIj1B,EAAWurF,EAAekB,EAAQzsF,SAAUyrF,EAAIhhG,GAChD8hG,GAAkBA,EAAiBvsF,EAAUyrF,GACjD3tF,EAAQ4uF,IAAa,EACrB,IAAIU,EAAevB,EAAgB7rF,EAAUlC,GACzCyjB,EAAMkrE,EAAQS,WAAWltF,GAC7B,IACEqrF,EAAcgC,UAAUD,EAAc,GAAI7rE,EAC5C,CAAE,MAAO73B,GACP,GAAIA,aAAiB4jG,cAA+B,mBAAf5jG,EAAMoF,KACzC,MAAMpF,EAER0hG,EAAQprF,SAAS4G,OAAO2a,EAC1B,CACIirE,GAAYz2F,GACdA,EAAS,CAAEk/B,SAAQj1B,SAAUysF,EAAQzsF,SAAU6sF,MAAO,GAE1D,EA+CEtnF,QA9CF,SAAkBkmF,EAAIhhG,GACpBwqC,EAAS,UACT,IAAIj1B,EAAWurF,EAAekB,EAAQzsF,SAAUyrF,EAAIhhG,GAChD8hG,GAAkBA,EAAiBvsF,EAAUyrF,GACjD3tF,EAAQ4uF,IACR,IAAIU,EAAevB,EAAgB7rF,EAAUlC,GACzCyjB,EAAMkrE,EAAQS,WAAWltF,GAC7BqrF,EAAc2B,aAAaI,EAAc,GAAI7rE,GACzCirE,GAAYz2F,GACdA,EAAS,CAAEk/B,SAAQj1B,SAAUysF,EAAQzsF,SAAU6sF,MAAO,GAE1D,EAoCEU,GAAGj9F,GACM+6F,EAAckC,GAAGj9F,IAG5B,OAAOm8F,CACT,CACA,SAASM,EAAqBtB,GAAwB,IAApB+B,EAAUzuF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GACtCmQ,EAAO,mBACW,qBAAXnP,SACTmP,EAAkC,SAA3BnP,OAAOC,SAASynE,OAAoB1nE,OAAOC,SAASynE,OAAS1nE,OAAOC,SAASG,MAEtFwrF,EAAUz8E,EAAM,4DAChB,IAAI/O,EAAqB,kBAAPsrF,EAAkBA,EAAKC,EAAWD,GAKpD,OAJAtrF,EAAOA,EAAKoF,QAAQ,KAAM,QACrBioF,GAAcrtF,EAAKstF,WAAW,QACjCttF,EAAO+O,EAAO/O,GAET,IAAID,IAAIC,EAAM+O,EACvB,CAiDO,IAAIurB,QAwEX,SAASizD,EAAYC,EAAQC,GAC3B,OAAOC,EAAgBF,EAAQC,EADiB7uF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,KACG,EACxD,CACA,SAAS8uF,EAAgBF,EAAQC,EAAaE,EAAUC,GACtD,IACIzC,EAAW0C,GADuB,kBAAhBJ,EAA2B7B,EAAU6B,GAAeA,GACpCtC,UAAY,IAAKwC,GACvD,GAAgB,MAAZxC,EACF,OAAO,KAET,IAAI2C,EAAWC,EAAcP,IAsG/B,SAA2BM,GACzBA,EAASE,KACP,CAACr9F,EAAGE,IAAMF,EAAEs9F,QAAUp9F,EAAEo9F,MAAQp9F,EAAEo9F,MAAQt9F,EAAEs9F,MA2BhD,SAAwBt9F,EAAGE,GACzB,IAAIq9F,EAAWv9F,EAAEtD,SAAWwD,EAAExD,QAAUsD,EAAE+I,MAAM,GAAI,GAAGy0F,MAAM,CAACh+F,EAAGpC,IAAMoC,IAAMU,EAAE9C,IAC/E,OAAOmgG,EAKLv9F,EAAEA,EAAEtD,OAAS,GAAKwD,EAAEA,EAAExD,OAAS,GAI/B,CAEJ,CAxCwD+gG,CAClDz9F,EAAE09F,WAAWhqC,IAAK90C,GAASA,EAAK++E,eAChCz9F,EAAEw9F,WAAWhqC,IAAK90C,GAASA,EAAK++E,gBAGtC,CA5GEC,CAAkBT,GAClB,IAAIU,EAAU,KACd,IAAK,IAAIzgG,EAAI,EAAc,MAAXygG,GAAmBzgG,EAAI+/F,EAASzgG,SAAUU,EAAG,CAC3D,IAAI0gG,EAAUC,EAAWvD,GACzBqD,EAAUG,EACRb,EAAS//F,GACT0gG,EACAb,EAEJ,CACA,OAAOY,CACT,CAYA,SAAST,EAAcP,GAA8F,IAAtFM,EAAQlvF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,GAAIgwF,EAAWhwF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,GAAIiwF,EAAUjwF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,GAAIkwF,EAA0BlwF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GACrGmwF,EAAe,SAACC,EAAOrxF,GAAgF,IAAzEsxF,EAAyBrwF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAGkwF,EAA4BI,EAAYtwF,UAAAvR,OAAA,EAAAuR,UAAA,QAAAu0C,EAChG5jC,EAAO,CACT2/E,kBAA+B,IAAjBA,EAA0BF,EAAMlD,MAAQ,GAAKoD,EAC3DC,eAAuC,IAAxBH,EAAMG,cACrBb,cAAe3wF,EACfqxF,SAEF,GAAIz/E,EAAK2/E,aAAa5B,WAAW,KAAM,CACrC,IAAK/9E,EAAK2/E,aAAa5B,WAAWuB,IAAeI,EAC/C,OAEFzD,EACEj8E,EAAK2/E,aAAa5B,WAAWuB,GAAW,wBAAA1zF,OAChBoU,EAAK2/E,aAAY,yBAAA/zF,OAAwB0zF,EAAU,6GAE7Et/E,EAAK2/E,aAAe3/E,EAAK2/E,aAAax1F,MAAMm1F,EAAWxhG,OACzD,CACA,IAAIy+F,EAAOsD,EAAU,CAACP,EAAYt/E,EAAK2/E,eACnCb,EAAaO,EAAYzzF,OAAOoU,GAChCy/E,EAAM7kF,UAAY6kF,EAAM7kF,SAAS9c,OAAS,IAC5Cm+F,GAGkB,IAAhBwD,EAAMrxF,MAAc,4FAAAxC,OACwE2wF,EAAI,OAElGiC,EACEiB,EAAM7kF,SACN2jF,EACAO,EACAvC,EACAmD,KAGc,MAAdD,EAAMlD,MAAiBkD,EAAMrxF,QAGjCmwF,EAASt2F,KAAK,CACZs0F,OACAmC,MAAOoB,EAAavD,EAAMkD,EAAMrxF,OAChC0wF,cAEJ,EAUA,OATAb,EAAOjpF,QAAQ,CAACyqF,EAAOrxF,KAAU,IAAA2xF,EAC/B,GAAmB,KAAfN,EAAMlD,MAA0B,QAAXwD,EAACN,EAAMlD,YAAI,IAAAwD,GAAVA,EAAYjoF,SAAS,KAG7C,IAAK,IAAIkoF,KAAYC,EAAwBR,EAAMlD,MACjDiD,EAAaC,EAAOrxF,GAAO,EAAM4xF,QAHnCR,EAAaC,EAAOrxF,KAOjBmwF,CACT,CACA,SAAS0B,EAAwB1D,GAC/B,IAAI2D,EAAW3D,EAAKxnF,MAAM,KAC1B,GAAwB,IAApBmrF,EAASpiG,OAAc,MAAO,GAClC,IAAKumE,KAAU87B,GAAQD,EACnBE,EAAa/7B,EAAMg8B,SAAS,KAC5BC,EAAWj8B,EAAMxuD,QAAQ,MAAO,IACpC,GAAoB,IAAhBsqF,EAAKriG,OACP,OAAOsiG,EAAa,CAACE,EAAU,IAAM,CAACA,GAExC,IAAIC,EAAeN,EAAwBE,EAAK7sF,KAAK,MACjDowC,EAAS,GASb,OARAA,EAAOz7C,QACFs4F,EAAazrC,IACb0rC,GAAwB,KAAZA,EAAiBF,EAAW,CAACA,EAAUE,GAASltF,KAAK,OAGlE8sF,GACF18C,EAAOz7C,QAAQs4F,GAEV78C,EAAOoR,IACXkrC,GAAazD,EAAKwB,WAAW,MAAqB,KAAbiC,EAAkB,IAAMA,EAElE,CASA,IAAIS,EAAU,YACVC,EAAsB,EACtBC,EAAkB,EAClBC,EAAoB,EACpBC,EAAqB,GACrBC,GAAgB,EAChBC,EAAWrkG,GAAY,MAANA,EACrB,SAASojG,EAAavD,EAAMnuF,GAC1B,IAAI8xF,EAAW3D,EAAKxnF,MAAM,KACtBisF,EAAed,EAASpiG,OAO5B,OANIoiG,EAASe,KAAKF,KAChBC,GAAgBF,GAEd1yF,IACF4yF,GAAgBL,GAEXT,EAASj4C,OAAQvrD,IAAOqkG,EAAQrkG,IAAI+3D,OACzC,CAACiqC,EAAOwC,IAAYxC,GAAS+B,EAAQjrF,KAAK0rF,GAAWR,EAAkC,KAAZQ,EAAiBN,EAAoBC,GAChHG,EAEJ,CAeA,SAAS5B,EAAiB+B,EAAQvF,GAAgC,IAAtByC,EAAYhvF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,IAClD,WAAEyvF,GAAeqC,EACjBC,EAAgB,CAAC,EACjBC,EAAkB,IAClBpC,EAAU,GACd,IAAK,IAAIzgG,EAAI,EAAGA,EAAIsgG,EAAWhhG,SAAUU,EAAG,CAC1C,IAAIwhB,EAAO8+E,EAAWtgG,GAClBm2B,EAAMn2B,IAAMsgG,EAAWhhG,OAAS,EAChCwjG,EAAwC,MAApBD,EAA0BzF,EAAWA,EAASzxF,MAAMk3F,EAAgBvjG,SAAW,IACnGuV,EAAQkuF,EACV,CAAEhF,KAAMv8E,EAAK2/E,aAAcC,cAAe5/E,EAAK4/E,cAAejrE,OAC9D2sE,GAEE7B,EAAQz/E,EAAKy/E,MAWjB,IAVKpsF,GAASshB,GAAO0pE,IAAiBS,EAAWA,EAAWhhG,OAAS,GAAG2hG,MAAMrxF,QAC5EiF,EAAQkuF,EACN,CACEhF,KAAMv8E,EAAK2/E,aACXC,cAAe5/E,EAAK4/E,cACpBjrE,KAAK,GAEP2sE,KAGCjuF,EACH,OAAO,KAET5S,OAAOyW,OAAOkqF,EAAe/tF,EAAM8uC,QACnC88C,EAAQh3F,KAAK,CAEXk6C,OAAQi/C,EACRxF,SAAUiE,EAAU,CAACwB,EAAiBhuF,EAAMuoF,WAC5C4F,aAAcC,EACZ5B,EAAU,CAACwB,EAAiBhuF,EAAMmuF,gBAEpC/B,UAEyB,MAAvBpsF,EAAMmuF,eACRH,EAAkBxB,EAAU,CAACwB,EAAiBhuF,EAAMmuF,eAExD,CACA,OAAOvC,CACT,CA6BA,SAASsC,EAAUG,EAAS9F,GACH,kBAAZ8F,IACTA,EAAU,CAAEnF,KAAMmF,EAAS9B,eAAe,EAAOjrE,KAAK,IAExD,IAAKgtE,EAASC,GAAkBC,EAC9BH,EAAQnF,KACRmF,EAAQ9B,cACR8B,EAAQ/sE,KAENthB,EAAQuoF,EAASvoF,MAAMsuF,GAC3B,IAAKtuF,EAAO,OAAO,KACnB,IAAIguF,EAAkBhuF,EAAM,GACxBmuF,EAAeH,EAAgBxrF,QAAQ,UAAW,MAClDisF,EAAgBzuF,EAAMlJ,MAAM,GAiBhC,MAAO,CACLg4C,OAjBWy/C,EAAentC,OAC1B,CAACstC,EAAKC,EAA6B5zF,KAAU,IAArC,UAAE6zF,EAAS,WAAE7B,GAAY4B,EAC/B,GAAkB,MAAdC,EAAmB,CACrB,IAAIC,EAAaJ,EAAc1zF,IAAU,GACzCozF,EAAeH,EAAgBl3F,MAAM,EAAGk3F,EAAgBvjG,OAASokG,EAAWpkG,QAAQ+X,QAAQ,UAAW,KACzG,CACA,MAAMwD,EAAQyoF,EAAc1zF,GAM5B,OAJE2zF,EAAME,GADJ7B,IAAe/mF,OACE,GAECA,GAAS,IAAIxD,QAAQ,OAAQ,KAE5CksF,GAET,CAAC,GAIDnG,SAAUyF,EACVG,eACAE,UAEJ,CACA,SAASG,EAAYtF,GAAyC,IAAnCqD,EAAavwF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GAAUslB,IAAGtlB,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,KAAAA,UAAA,GACnDa,EACW,MAATqsF,IAAiBA,EAAK8D,SAAS,MAAQ9D,EAAK8D,SAAS,MAAK,eAAAz0F,OAC3C2wF,EAAI,qCAAA3wF,OAAoC2wF,EAAK1mF,QAAQ,MAAO,MAAK,sIAAAjK,OAAyI2wF,EAAK1mF,QAAQ,MAAO,MAAK,OAEpP,IAAIssC,EAAS,GACTggD,EAAe,IAAM5F,EAAK1mF,QAAQ,UAAW,IAAIA,QAAQ,OAAQ,KAAKA,QAAQ,qBAAsB,QAAQA,QAC9G,oBACA,CAACusF,EAAGH,EAAW7B,KACbj+C,EAAOl6C,KAAK,CAAEg6F,YAAW7B,WAA0B,MAAdA,IAC9BA,EAAa,eAAiB,eAEvCvqF,QAAQ,sBAAuB,YAWjC,OAVI0mF,EAAK8D,SAAS,MAChBl+C,EAAOl6C,KAAK,CAAEg6F,UAAW,MACzBE,GAAyB,MAAT5F,GAAyB,OAATA,EAAgB,QAAU,qBACjD5nE,EACTwtE,GAAgB,QACE,KAAT5F,GAAwB,MAATA,IACxB4F,GAAgB,iBAIX,CADO,IAAI5jB,OAAO4jB,EAAcvC,OAAgB,EAAS,KAC/Cz9C,EACnB,CACA,SAASg9C,EAAW9lF,GAClB,IACE,OAAOA,EAAMtE,MAAM,KAAK+/C,IAAKvgD,GAAMo8C,mBAAmBp8C,GAAGsB,QAAQ,MAAO,QAAQvC,KAAK,IACvF,CAAE,MAAOtZ,GAKP,OAJAkW,GACE,EAAK,iBAAAtE,OACYyN,EAAK,kHAAAzN,OAAiH5R,EAAK,OAEvIqf,CACT,CACF,CACA,SAASilF,EAAc1C,EAAUwC,GAC/B,GAAiB,MAAbA,EAAkB,OAAOxC,EAC7B,IAAKA,EAAS3mF,cAAc8oF,WAAWK,EAASnpF,eAC9C,OAAO,KAET,IAAIotF,EAAajE,EAASiC,SAAS,KAAOjC,EAAStgG,OAAS,EAAIsgG,EAAStgG,OACrEwkG,EAAW1G,EAASz8E,OAAOkjF,GAC/B,OAAIC,GAAyB,MAAbA,EACP,KAEF1G,EAASzxF,MAAMk4F,IAAe,GACvC,CAgCA,SAASE,EAAoBjpE,EAAMkpE,EAAOC,EAAMlG,GAC9C,MAAO,qBAAP3wF,OAA4B0tB,EAAI,4CAAA1tB,OAA4C42F,EAAK,aAAA52F,OAAaosC,KAAKC,UACjGskD,GACD,0CAAA3wF,OAA0C62F,EAAI,4HACjD,CACA,SAASC,EAA2BzD,GAClC,OAAOA,EAAQh3C,OACb,CAAC50C,EAAOjF,IAAoB,IAAVA,GAAeiF,EAAMosF,MAAMlD,MAAQlpF,EAAMosF,MAAMlD,KAAKz+F,OAAS,EAEnF,CACA,SAAS6kG,EAAoB1D,GAC3B,IAAI2D,EAAcF,EAA2BzD,GAC7C,OAAO2D,EAAY9tC,IACjB,CAACzhD,EAAO4+C,IAAQA,IAAQ2wC,EAAY9kG,OAAS,EAAIuV,EAAMuoF,SAAWvoF,EAAMmuF,aAE5E,CACA,SAASqB,EAAUC,EAAOC,EAAgBC,GAA0C,IAC9EjH,EADsDkH,EAAc5zF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GAEnD,kBAAVyzF,EACT/G,EAAKM,EAAUyG,IAEf/G,EAAEK,EAAA,GAAQ0G,GACV7G,GACGF,EAAGH,WAAaG,EAAGH,SAAS9jF,SAAS,KACtCyqF,EAAoB,IAAK,WAAY,SAAUxG,IAEjDE,GACGF,EAAGH,WAAaG,EAAGH,SAAS9jF,SAAS,KACtCyqF,EAAoB,IAAK,WAAY,OAAQxG,IAE/CE,GACGF,EAAGrqE,SAAWqqE,EAAGrqE,OAAO5Z,SAAS,KAClCyqF,EAAoB,IAAK,SAAU,OAAQxG,KAG/C,IAEItd,EAFAykB,EAAwB,KAAVJ,GAAgC,KAAhB/G,EAAGH,SACjCuH,EAAaD,EAAc,IAAMnH,EAAGH,SAExC,GAAkB,MAAduH,EACF1kB,EAAOukB,MACF,CACL,IAAII,EAAqBL,EAAejlG,OAAS,EACjD,IAAKmlG,GAAkBE,EAAWpF,WAAW,MAAO,CAClD,IAAIsF,EAAaF,EAAWpuF,MAAM,KAClC,KAAyB,OAAlBsuF,EAAW,IAChBA,EAAWp7E,QACXm7E,GAAsB,EAExBrH,EAAGH,SAAWyH,EAAW/vF,KAAK,IAChC,CACAmrE,EAAO2kB,GAAsB,EAAIL,EAAeK,GAAsB,GACxE,CACA,IAAI7G,EA7EN,SAAqBR,GAAwB,IAApBuH,EAAYj0F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,KAEpCusF,SAAUuH,EAAU,OACpBzxE,EAAS,GAAE,KACXstB,EAAO,IACS,kBAAP+8C,EAAkBM,EAAUN,GAAMA,EACzCH,EAAWuH,EAAaA,EAAWpF,WAAW,KAAOoF,EAO3D,SAAyBxD,EAAc2D,GACrC,IAAIpD,EAAWoD,EAAaztF,QAAQ,OAAQ,IAAId,MAAM,KAStD,OARuB4qF,EAAa5qF,MAAM,KACzBC,QAASksF,IACR,OAAZA,EACEhB,EAASpiG,OAAS,GAAGoiG,EAASphB,MACb,MAAZoiB,GACThB,EAASj4F,KAAKi5F,KAGXhB,EAASpiG,OAAS,EAAIoiG,EAAS5sF,KAAK,KAAO,GACpD,CAlBwEiwF,CAAgBJ,EAAYG,GAAgBA,EAClH,MAAO,CACL1H,WACAlqE,OAAQ8xE,EAAgB9xE,GACxBstB,KAAMykD,EAAczkD,GAExB,CAiEa0kD,CAAY3H,EAAItd,GACvBklB,EAA2BR,GAA6B,MAAfA,GAAsBA,EAAW9C,SAAS,KACnFuD,GAA2BV,GAA8B,MAAfC,IAAuBH,EAAiB3C,SAAS,KAI/F,OAHK9D,EAAKX,SAASyE,SAAS,OAASsD,IAA4BC,IAC/DrH,EAAKX,UAAY,KAEZW,CACT,CACA,IAAIsD,EAAagE,GAAUA,EAAMvwF,KAAK,KAAKuC,QAAQ,SAAU,KACzD4rF,EAAqB7F,GAAaA,EAAS/lF,QAAQ,OAAQ,IAAIA,QAAQ,OAAQ,KAC/E2tF,EAAmB9xE,GAAYA,GAAqB,MAAXA,EAAsBA,EAAOqsE,WAAW,KAAOrsE,EAAS,IAAMA,EAA7C,GAC1D+xE,EAAiBzkD,GAAUA,GAAiB,MAATA,EAAoBA,EAAK++C,WAAW,KAAO/+C,EAAO,IAAMA,EAAzC,GAgDtD,SAAS8kD,EAAqB9pG,GAC5B,OAAgB,MAATA,GAAyC,kBAAjBA,EAAM+pG,QAAmD,kBAArB/pG,EAAMgqG,YAAqD,mBAAnBhqG,EAAMiqG,UAA0B,SAAUjqG,CACvJ,CAGA,IAAIkqG,EAA0B,CAC5B,OACA,MACA,QACA,UAKEC,GAHuB,IAAIxwF,IAC7BuwF,GAE2B,CAC3B,SACGA,IAEqB,IAAIvwF,IAAIwwF,GAmCN9jG,OAAO,mBAs2HnC,IAAI+jG,GAAoBC,EAAAA,cAAoB,MAC5CD,GAAkBvsF,YAAc,aAChC,IAAIysF,GAAyBD,EAAAA,cAAoB,MACjDC,GAAuBzsF,YAAc,kBACrC,IAAI0sF,GAAmBF,EAAAA,eAAoB,GAI3C,IAAIG,GAAwBH,EAAAA,cAAoB,CAC9CI,iBAAiB,IAEnBD,GAAsB3sF,YAAc,iBACpC,IAAI6sF,GAAkBL,EAAAA,cACJ,IAAIz9E,KAEtB89E,GAAgB7sF,YAAc,WAC9B,IAAI8sF,GAAeN,EAAAA,cAAoB,MACvCM,GAAa9sF,YAAc,QAC3B,IACI+sF,GAAoBP,EAAAA,cACtB,MAEFO,GAAkB/sF,YAAc,aAChC,IAAIgtF,GAAkBR,EAAAA,cACpB,MAEFQ,GAAgBhtF,YAAc,WAC9B,IAAIitF,GAAeT,EAAAA,cAAoB,CACrCU,OAAQ,KACR9F,QAAS,GACT+F,aAAa,IAEfF,GAAajtF,YAAc,QAC3B,IAAIotF,GAAoBZ,EAAAA,cAAoB,MAC5CY,GAAkBptF,YAAc,aAoBhC,SAASqtF,KACP,OAA6C,MAAtCC,EAAAA,WAAkBN,GAC3B,CACA,SAASO,KAOP,OANAnJ,EACEiJ,KAEA,0EAGKC,EAAAA,WAAkBN,IAAiBv0F,QAC5C,CAiBA,IAAI+0F,GAAwB,gGAC5B,SAASC,GAA0BprF,GAClBirF,EAAAA,WAAkBP,IAAmBW,QAElDJ,EAAAA,gBAAuBjrF,EAE3B,CACA,SAASsrF,KACP,IAAI,YAAER,GAAgBG,EAAAA,WAAkBL,IACxC,OAAOE,EA0fT,WACE,IAAI,OAAES,GAAWC,GAAqB,eAClCvmG,EAAKwmG,GAAkB,eACvBC,EAAYT,EAAAA,QAAc,GAC9BG,GAA0B,KACxBM,EAAU7jG,SAAU,IAEtB,IAAI8jG,EAAWV,EAAAA,YACbW,eAAO/J,GAAqB,IAAjBhjG,EAAOsW,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EACpBa,EAAQ01F,EAAU7jG,QAASsjG,IACtBO,EAAU7jG,UACG,kBAAPg6F,EACT0J,EAAOI,SAAS9J,SAEV0J,EAAOI,SAAS9J,EAAEK,EAAA,CAAI2J,YAAa5mG,GAAOpG,IAEpD,EACA,CAAC0sG,EAAQtmG,IAEX,OAAO0mG,CACT,CA9gBuBG,GAEvB,WACE/J,EACEiJ,KAEA,0EAGF,IAAIe,EAAoBd,EAAAA,WAAkBf,KACtC,SAAEhG,EAAQ,UAAE3iD,GAAc0pD,EAAAA,WAAkBP,KAC5C,QAAE3F,GAAYkG,EAAAA,WAAkBL,KAC9BlJ,SAAUoH,GAAqBoC,KACjCc,EAAqBluD,KAAKC,UAAU0qD,EAAoB1D,IACxD2G,EAAYT,EAAAA,QAAc,GAC9BG,GAA0B,KACxBM,EAAU7jG,SAAU,IAEtB,IAAI8jG,EAAWV,EAAAA,YACb,SAACpJ,GAAqB,IAAjBhjG,EAAOsW,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEd,GADAa,EAAQ01F,EAAU7jG,QAASsjG,KACtBO,EAAU7jG,QAAS,OACxB,GAAkB,kBAAPg6F,EAET,YADAtgD,EAAUoiD,GAAG9B,GAGf,IAAIQ,EAAOsG,EACT9G,EACA/jD,KAAKuZ,MAAM20C,GACXlD,EACqB,SAArBjqG,EAAQotG,UAEe,MAArBF,GAA0C,MAAb7H,IAC/B7B,EAAKX,SAA6B,MAAlBW,EAAKX,SAAmBwC,EAAWyB,EAAU,CAACzB,EAAU7B,EAAKX,aAE5E7iG,EAAQ8c,QAAU4lC,EAAU5lC,QAAU4lC,EAAUxzC,MACjDs0F,EACAxjG,EAAQgC,MACRhC,EAEJ,EACA,CACEqlG,EACA3iD,EACAyqD,EACAlD,EACAiD,IAGJ,OAAOJ,CACT,CAlD6CO,EAC7C,CAkDoBjB,EAAAA,cAAqB,MAgBzC,SAASkB,GAAgBtK,GAAuB,IAAnB,SAAEoK,GAAU92F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,GACvC,QAAE4vF,GAAYkG,EAAAA,WAAkBL,KAC9BlJ,SAAUoH,GAAqBoC,KACjCc,EAAqBluD,KAAKC,UAAU0qD,EAAoB1D,IAC5D,OAAOkG,EAAAA,QACL,IAAMtC,EACJ9G,EACA/jD,KAAKuZ,MAAM20C,GACXlD,EACa,SAAbmD,GAEF,CAACpK,EAAImK,EAAoBlD,EAAkBmD,GAE/C,CAIA,SAASG,GAAcrI,EAAQC,EAAaqI,EAAiBC,EAAkBC,GAC7ExK,EACEiJ,KAEA,wEAGF,IAAI,UAAEzpD,GAAc0pD,EAAAA,WAAkBP,KAChC3F,QAASyH,GAAkBvB,EAAAA,WAAkBL,IAC/C6B,EAAaD,EAAcA,EAAc5oG,OAAS,GAClD8oG,EAAeD,EAAaA,EAAWxkD,OAAS,CAAC,EACjD0kD,EAAiBF,EAAaA,EAAW/K,SAAW,IACpDkL,EAAqBH,EAAaA,EAAWnF,aAAe,IAC5DuF,EAAcJ,GAAcA,EAAWlH,MAClB,CACvB,IAAIH,EAAayH,GAAeA,EAAYxK,MAAQ,GACpDyK,GACEH,GACCE,GAAezH,EAAWe,SAAS,MAAQf,EAAWe,SAAS,MAAK,kEAAAz0F,OACDi7F,EAAc,0BAAAj7F,OAAyB0zF,EAAU,qNAAA1zF,OAEnF0zF,EAAU,uBAAA1zF,OAAqC,MAAf0zF,EAAqB,IAAM,GAAH1zF,OAAM0zF,EAAU,MAAI,OAElH,CACA,IACIhvF,EADA22F,EAAsB7B,KAE1B,GAAIlH,EAAa,KAAAgJ,EACf,IAAIC,EAA2C,kBAAhBjJ,EAA2B7B,EAAU6B,GAAeA,EACnFjC,EACyB,MAAvB6K,IAAwD,QAA9BI,EAAIC,EAAkBvL,gBAAQ,IAAAsL,OAAA,EAA1BA,EAA4BnJ,WAAW+I,IAAmB,uOAAAl7F,OACmJk7F,EAAkB,oBAAAl7F,OAAmBu7F,EAAkBvL,SAAQ,wCAE5StrF,EAAW62F,CACb,MACE72F,EAAW22F,EAEb,IAAIrL,EAAWtrF,EAASsrF,UAAY,IAChC0F,EAAoB1F,EACxB,GAA2B,MAAvBkL,EAA4B,CAC9B,IAAIM,EAAiBN,EAAmBjxF,QAAQ,MAAO,IAAId,MAAM,KAEjEusF,EAAoB,IADL1F,EAAS/lF,QAAQ,MAAO,IAAId,MAAM,KACd5K,MAAMi9F,EAAetpG,QAAQwV,KAAK,IACvE,CACA,IAAI2rF,EAAUjB,EAAYC,EAAQ,CAAErC,SAAU0F,IAE5CpxF,EACE62F,GAA0B,MAAX9H,EAAe,+BAAArzF,OACC0E,EAASsrF,UAAQhwF,OAAG0E,EAASohB,QAAM9lB,OAAG0E,EAAS0uC,KAAI,OAEpF9uC,EACa,MAAX+uF,QAAiE,IAA9CA,EAAQA,EAAQnhG,OAAS,GAAG2hG,MAAM9pE,cAAsE,IAAhDspE,EAAQA,EAAQnhG,OAAS,GAAG2hG,MAAM7oC,gBAAmE,IAA3CqoC,EAAQA,EAAQnhG,OAAS,GAAG2hG,MAAM3nC,KAAe,mCAAAlsD,OACnJ0E,EAASsrF,UAAQhwF,OAAG0E,EAASohB,QAAM9lB,OAAG0E,EAAS0uC,KAAI,gJAG1F,IAAIqoD,EAAkBC,GACpBrI,GAAWA,EAAQnqC,IAChBzhD,GAAU5S,OAAOyW,OAAO,CAAC,EAAG7D,EAAO,CAClC8uC,OAAQ1hD,OAAOyW,OAAO,CAAC,EAAG0vF,EAAcvzF,EAAM8uC,QAC9Cy5C,SAAUiE,EAAU,CAClBiH,EAKArrD,EAAUgiD,eAAiBhiD,EAAUgiD,eACnCpqF,EAAMuoF,SAAS/lF,QAAQ,MAAO,OAAOA,QAAQ,KAAM,QACnD+lF,SAAWvoF,EAAMuoF,WAErB4F,aAAqC,MAAvBnuF,EAAMmuF,aAAuBsF,EAAqBjH,EAAU,CACxEiH,EAKArrD,EAAUgiD,eAAiBhiD,EAAUgiD,eACnCpqF,EAAMmuF,aAAa3rF,QAAQ,MAAO,OAAOA,QAAQ,KAAM,QACvD+lF,SAAWvoF,EAAMmuF,kBAIzBkF,EACAH,EACAC,EACAC,GAEF,OAAIvI,GAAemJ,EACMlC,EAAAA,cACrBN,GAAgBvtC,SAChB,CACEj+C,MAAO,CACL/I,SAAQ8rF,EAAA,CACNR,SAAU,IACVlqE,OAAQ,GACRstB,KAAM,GACNjkD,MAAO,KACPT,IAAK,WACFgW,GAELi3F,eAAgB,QAGpBF,GAGGA,CACT,CACA,SAASG,KACP,IAAIxtG,EAAQytG,KACRl5F,EAAUu1F,EAAqB9pG,GAAS,GAAH4R,OAAM5R,EAAM+pG,OAAM,KAAAn4F,OAAI5R,EAAMgqG,YAAehqG,aAAiBL,MAAQK,EAAMuU,QAAUypC,KAAKC,UAAUj+C,GACxIod,EAAQpd,aAAiBL,MAAQK,EAAMod,MAAQ,KAC/CswF,EAAY,yBACZC,EAAY,CAAEzpG,QAAS,SAAU0pG,gBAAiBF,GAClDG,EAAa,CAAE3pG,QAAS,UAAW0pG,gBAAiBF,GACpDI,EAAU,KAQd,OANEj4F,QAAQ7V,MACN,uDACAA,GAEF8tG,EAA0B3C,EAAAA,cAAqBA,EAAAA,SAAiB,KAAsBA,EAAAA,cAAqB,IAAK,KAAM,2CAAsDA,EAAAA,cAAqB,IAAK,KAAM,+FAAgHA,EAAAA,cAAqB,OAAQ,CAAEnmF,MAAO6oF,GAAc,iBAAkB,MAAO,IAAqB1C,EAAAA,cAAqB,OAAQ,CAAEnmF,MAAO6oF,GAAc,gBAAiB,yBAE9c1C,EAAAA,cAAqBA,EAAAA,SAAiB,KAAsBA,EAAAA,cAAqB,KAAM,KAAM,iCAAkDA,EAAAA,cAAqB,KAAM,CAAEnmF,MAAO,CAAE+oF,UAAW,WAAcx5F,GAAU6I,EAAwB+tF,EAAAA,cAAqB,MAAO,CAAEnmF,MAAO2oF,GAAavwF,GAAS,KAAM0wF,EAC1U,CACA,IAAIE,GAAsC7C,EAAAA,cAAqBqC,GAAuB,MAClFS,GAAsB,cAAc9C,EAAAA,UACtCvsF,WAAAA,CAAY/W,GACVqmG,MAAMrmG,GACN8H,KAAK5O,MAAQ,CACXuV,SAAUzO,EAAMyO,SAChB63F,aAActmG,EAAMsmG,aACpBnuG,MAAO6H,EAAM7H,MAEjB,CACA,+BAAOoxC,CAAyBpxC,GAC9B,MAAO,CAAEA,QACX,CACA,+BAAOswC,CAAyBzoC,EAAO9G,GACrC,OAAIA,EAAMuV,WAAazO,EAAMyO,UAAmC,SAAvBvV,EAAMotG,cAAkD,SAAvBtmG,EAAMsmG,aACvE,CACLnuG,MAAO6H,EAAM7H,MACbsW,SAAUzO,EAAMyO,SAChB63F,aAActmG,EAAMsmG,cAGjB,CACLnuG,WAAuB,IAAhB6H,EAAM7H,MAAmB6H,EAAM7H,MAAQe,EAAMf,MACpDsW,SAAUvV,EAAMuV,SAChB63F,aAActmG,EAAMsmG,cAAgBptG,EAAMotG,aAE9C,CACA98D,iBAAAA,CAAkBrxC,EAAOouG,GACnBz+F,KAAK9H,MAAM2kG,iBACb78F,KAAK9H,MAAM2kG,iBAAiBxsG,EAAOouG,GAEnCv4F,QAAQ7V,MACN,wDACAA,EAGN,CACAge,MAAAA,GACE,YAA4B,IAArBrO,KAAK5O,MAAMf,MAAmCmrG,EAAAA,cAAqBL,GAAaxtC,SAAU,CAAEj+C,MAAO1P,KAAK9H,MAAMwmG,cAAgClD,EAAAA,cACnJF,GAAkB3tC,SAClB,CACEj+C,MAAO1P,KAAK5O,MAAMf,MAClB4gB,SAAUjR,KAAK9H,MAAMymG,aAEpB3+F,KAAK9H,MAAM+Y,QAClB,GAEF,SAAS2tF,GAAaC,GAAoC,IAAnC,aAAEH,EAAY,MAAEh1F,EAAK,SAAEuH,GAAU4tF,EAClDvC,EAAoBd,EAAAA,WAAkBf,IAI1C,OAHI6B,GAAqBA,EAAkBV,QAAUU,EAAkBwC,gBAAkBp1F,EAAMosF,MAAMiJ,cAAgBr1F,EAAMosF,MAAMkJ,iBAC/H1C,EAAkBwC,cAAcG,2BAA6Bv1F,EAAMosF,MAAMtgG,IAEpDgmG,EAAAA,cAAqBL,GAAaxtC,SAAU,CAAEj+C,MAAOgvF,GAAgBztF,EAC9F,CACA,SAAS0sF,GAAerI,GAA6F,IAApFyH,EAAar3F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,GAAIk3F,EAAel3F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,KAAMm3F,EAAgBn3F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,KAC9F,GAAe,MAAX4vF,EAAiB,CACnB,IAAKsH,EACH,OAAO,KAET,GAAIA,EAAgB7jD,OAClBu8C,EAAUsH,EAAgBtH,YACrB,IAA6B,IAAzByH,EAAc5oG,QAAiByoG,EAAgBsC,eAAetC,EAAgBtH,QAAQnhG,OAAS,GAGxG,OAAO,KAFPmhG,EAAUsH,EAAgBtH,OAG5B,CACF,CACA,IAAIoI,EAAkBpI,EAClBv8C,EAAwB,OAAf6jD,QAAe,IAAfA,OAAe,EAAfA,EAAiB7jD,OAC9B,GAAc,MAAVA,EAAgB,CAClB,IAAIomD,EAAazB,EAAgB0B,UAC9BvoG,GAAMA,EAAEi/F,MAAMtgG,SAA+B,KAAnB,OAANujD,QAAM,IAANA,OAAM,EAANA,EAASliD,EAAEi/F,MAAMtgG,MAExC88F,EACE6M,GAAc,EAAC,4DAAAl9F,OAC6CnL,OAAO/E,KACjEgnD,GACApvC,KAAK,OAET+zF,EAAkBA,EAAgBl9F,MAChC,EACAhG,KAAKE,IAAIgjG,EAAgBvpG,OAAQgrG,EAAa,GAElD,CACA,IAAIE,GAAiB,EACjBC,GAAiB,EACrB,GAAI1C,EACF,IAAK,IAAI/nG,EAAI,EAAGA,EAAI6oG,EAAgBvpG,OAAQU,IAAK,CAC/C,IAAI6U,EAAQg0F,EAAgB7oG,GAI5B,IAHI6U,EAAMosF,MAAMyJ,iBAAmB71F,EAAMosF,MAAM0J,0BAC7CF,EAAgBzqG,GAEd6U,EAAMosF,MAAMtgG,GAAI,CAClB,IAAI,WAAEiqG,EAAY1mD,OAAQ2mD,GAAY9C,EAClC+C,EAAmBj2F,EAAMosF,MAAM8J,SAAWH,EAAWzoG,eAAe0S,EAAMosF,MAAMtgG,OAASkqG,QAAuC,IAA5BA,EAAQh2F,EAAMosF,MAAMtgG,KAC5H,GAAIkU,EAAMosF,MAAM3nC,MAAQwxC,EAAkB,CACxCN,GAAiB,EAEf3B,EADE4B,GAAiB,EACD5B,EAAgBl9F,MAAM,EAAG8+F,EAAgB,GAEzC,CAAC5B,EAAgB,IAErC,KACF,CACF,CACF,CAEF,OAAOA,EAAgBmC,YACrB,CAACzE,EAAQ1xF,EAAOjF,KACd,IAAIpU,EACAyvG,GAA8B,EAC9Bf,EAAe,KACfS,EAAyB,KACzB5C,IACFvsG,EAAQ0oD,GAAUrvC,EAAMosF,MAAMtgG,GAAKujD,EAAOrvC,EAAMosF,MAAMtgG,SAAM,EAC5DupG,EAAer1F,EAAMosF,MAAMiJ,cAAgBV,GACvCgB,IACEC,EAAgB,GAAe,IAAV76F,GACvB44F,GACE,kBACA,EACA,4EAEFyC,GAA8B,EAC9BN,EAAyB,MAChBF,IAAkB76F,IAC3Bq7F,GAA8B,EAC9BN,EAAyB91F,EAAMosF,MAAM0J,wBAA0B,QAIrE,IAAIO,EAAWhD,EAAc96F,OAAOy7F,EAAgBl9F,MAAM,EAAGiE,EAAQ,IACjEu7F,EAAcA,KAChB,IAAI/uF,EAYJ,OAVEA,EADE5gB,EACS0uG,EACFe,EACEN,EACF91F,EAAMosF,MAAM7oC,UACMuuC,EAAAA,cAAqB9xF,EAAMosF,MAAM7oC,UAAW,MAC9DvjD,EAAMosF,MAAM9pE,QACVtiB,EAAMosF,MAAM9pE,QAEZovE,EAEUI,EAAAA,cACrBoD,GACA,CACEl1F,QACAg1F,aAAc,CACZtD,SACA9F,QAASyK,EACT1E,YAAgC,MAAnBuB,GAEf3rF,cAIN,OAAO2rF,IAAoBlzF,EAAMosF,MAAMkJ,eAAiBt1F,EAAMosF,MAAMiJ,cAA0B,IAAVt6F,GAA+B+2F,EAAAA,cACjH8C,GACA,CACE33F,SAAUi2F,EAAgBj2F,SAC1B63F,aAAc5B,EAAgB4B,aAC9BG,UAAWI,EACX1uG,QACA4gB,SAAU+uF,IACVtB,aAAc,CAAEtD,OAAQ,KAAM9F,QAASyK,EAAU1E,aAAa,GAC9DwB,qBAEAmD,KAEN,KAEJ,CACA,SAASC,GAA0BC,GACjC,MAAO,GAAPj+F,OAAUi+F,EAAQ,qGACpB,CACA,SAASnE,GAAqBmE,GAC5B,IAAIpnG,EAAM0iG,EAAAA,WAAkBf,IAE5B,OADAnI,EAAUx5F,EAAKmnG,GAA0BC,IAClCpnG,CACT,CACA,SAASqnG,GAAmBD,GAC1B,IAAI9uG,EAAQoqG,EAAAA,WAAkBb,IAE9B,OADArI,EAAUlhG,EAAO6uG,GAA0BC,IACpC9uG,CACT,CAMA,SAAS4qG,GAAkBkE,GACzB,IAAIpK,EANN,SAAyBoK,GACvB,IAAIpK,EAAQ0F,EAAAA,WAAkBL,IAE9B,OADA7I,EAAUwD,EAAOmK,GAA0BC,IACpCpK,CACT,CAEcsK,CAAgBF,GACxBG,EAAYvK,EAAMR,QAAQQ,EAAMR,QAAQnhG,OAAS,GAKrD,OAJAm+F,EACE+N,EAAUvK,MAAMtgG,GAAE,GAAAyM,OACfi+F,EAAQ,2DAENG,EAAUvK,MAAMtgG,EACzB,CA0CA,SAASsoG,KAAgB,IAAAwC,EACvB,IAAIjwG,EAAQmrG,EAAAA,WAAkBF,IAC1BlqG,EAAQ+uG,GAAmB,iBAC3BI,EAAUvE,GAAkB,iBAChC,YAAc,IAAV3rG,EACKA,EAEU,QAAnBiwG,EAAOlvG,EAAM2nD,cAAM,IAAAunD,OAAA,EAAZA,EAAeC,EACxB,CAsEA,IAAIC,GAAgB,CAAC,EACrB,SAASnD,GAAY1sG,EAAK4hG,EAAM3tF,GACzB2tF,GAASiO,GAAc7vG,KAC1B6vG,GAAc7vG,IAAO,EACrB4V,GAAQ,EAAO3B,GAEnB,CAmBA,IAAI67F,GAAiB,CAAC,EACtB,SAASC,GAASC,EAAW/7F,GACtB+7F,GAAcF,GAAe77F,KAChC67F,GAAe77F,IAAW,EAC1BsB,QAAQC,KAAKvB,GAEjB,CA+YyBg8F,EAAAA,KACzB,SAAmBC,GAKhB,IALiB,OAClBvM,EAAM,OACNwI,EAAM,MACN1rG,EAAK,iBACLyrG,GACDgE,EACC,OAAOlE,GAAcrI,OAAQ,EAAQljG,EAAOyrG,EAAkBC,EAChE,GAyEA,SAASgE,GAAM5oG,GACbo6F,GACE,EAAK,uIAGT,CACA,SAASyO,GAAMC,GAOZ,IANDvM,SAAUwM,EAAe,IAAG,SAC5BhwF,EAAW,KACXtK,SAAUu6F,EAAY,eACtBtD,EAAiB,MAAe,UAChC9rD,EACA8pD,OAAQuF,GAAa,GACtBH,EACC1O,GACGiJ,KAAoB,0GAGvB,IAAI9G,EAAWwM,EAAa/0F,QAAQ,OAAQ,KACxCk1F,EAAoBR,EAAAA,QACtB,KAAM,CACJnM,WACA3iD,YACA8pD,OAAQuF,EACRrE,OAAQ,CAAC,IAEX,CAACrI,EAAU3iD,EAAWqvD,IAEI,kBAAjBD,IACTA,EAAexO,EAAUwO,IAE3B,IAAI,SACFjP,EAAW,IAAG,OACdlqE,EAAS,GAAE,KACXstB,EAAO,GAAE,MACTjkD,EAAQ,KAAI,IACZT,EAAM,WACJuwG,EACAG,EAAkBT,EAAAA,QAAe,KACnC,IAAIU,EAAmB3M,EAAc1C,EAAUwC,GAC/C,OAAwB,MAApB6M,EACK,KAEF,CACL36F,SAAU,CACRsrF,SAAUqP,EACVv5E,SACAstB,OACAjkD,QACAT,OAEFitG,mBAED,CAACnJ,EAAUxC,EAAUlqE,EAAQstB,EAAMjkD,EAAOT,EAAKitG,IAKlD,OAJAr3F,EACqB,MAAnB86F,EAAuB,qBAAAp/F,OACFwyF,EAAQ,qCAAAxyF,OAAoCgwF,GAAQhwF,OAAG8lB,GAAM9lB,OAAGozC,EAAI,2FAEpE,MAAnBgsD,EACK,KAEcT,EAAAA,cAAqB3F,GAAkBttC,SAAU,CAAEj+C,MAAO0xF,GAAqCR,EAAAA,cAAqB1F,GAAgBvtC,SAAU,CAAE18C,WAAUvB,MAAO2xF,IAC1L,CACA,SAASE,GAAMC,GAGZ,IAHa,SACdvwF,EAAQ,SACRtK,GACD66F,EACC,OA//BO7E,GA+/BU8E,GAAyBxwF,GAAWtK,EACvD,CAiBuCi6F,EAAAA,UAoEvC,SAASa,GAAyBxwF,GAA2B,IAAjB0kF,EAAUjwF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,GACnD4uF,EAAS,GAgDb,OA/CAsM,EAAAA,SAAgBv1F,QAAQ4F,EAAU,CAAC+a,EAASvnB,KAC1C,IAAKm8F,EAAAA,eAAsB50E,GACzB,OAEF,IAAI01E,EAAW,IAAI/L,EAAYlxF,GAC/B,GAAIunB,EAAQj8B,OAAS6wG,EAAAA,SAKnB,YAJAtM,EAAOh2F,KAAKiH,MACV+uF,EACAmN,GAAyBz1E,EAAQ9zB,MAAM+Y,SAAUywF,IAIrDpP,EACEtmE,EAAQj8B,OAAS+wG,GAAK,IAAA7+F,OACM,kBAAjB+pB,EAAQj8B,KAAoBi8B,EAAQj8B,KAAOi8B,EAAQj8B,KAAK0F,KAAI,2GAEzE68F,GACGtmE,EAAQ9zB,MAAMuM,QAAUunB,EAAQ9zB,MAAM+Y,SACvC,4CAEF,IAAI6kF,EAAQ,CACVtgG,GAAIw2B,EAAQ9zB,MAAM1C,IAAMksG,EAAS/3F,KAAK,KACtCssF,cAAejqE,EAAQ9zB,MAAM+9F,cAC7BjqE,QAASA,EAAQ9zB,MAAM8zB,QACvBihC,UAAWjhC,EAAQ9zB,MAAM+0D,UACzBxoD,MAAOunB,EAAQ9zB,MAAMuM,MACrBmuF,KAAM5mE,EAAQ9zB,MAAM06F,KACpB+O,WAAY31E,EAAQ9zB,MAAMypG,WAC1B/B,OAAQ5zE,EAAQ9zB,MAAM0nG,OACtBhkE,OAAQ5P,EAAQ9zB,MAAM0jC,OACtB4jE,uBAAwBxzE,EAAQ9zB,MAAMsnG,uBACtCD,gBAAiBvzE,EAAQ9zB,MAAMqnG,gBAC/BR,aAAc/yE,EAAQ9zB,MAAM6mG,aAC5BC,cAAehzE,EAAQ9zB,MAAM8mG,cAC7B4C,kBAAqD,IAAnC51E,EAAQ9zB,MAAM0pG,kBAA4D,MAA/B51E,EAAQ9zB,MAAM8mG,eAAuD,MAA9BhzE,EAAQ9zB,MAAM6mG,aAClH8C,iBAAkB71E,EAAQ9zB,MAAM2pG,iBAChCC,OAAQ91E,EAAQ9zB,MAAM4pG,OACtB3zC,KAAMniC,EAAQ9zB,MAAMi2D,MAElBniC,EAAQ9zB,MAAM+Y,WAChB6kF,EAAM7kF,SAAWwwF,GACfz1E,EAAQ9zB,MAAM+Y,SACdywF,IAGJpN,EAAOh2F,KAAKw3F,KAEPxB,CACT,CAkEA,IAAIyN,GAAgB,MAChBC,GAAiB,oCACrB,SAASC,GAAcC,GACrB,OAAiB,MAAVA,GAA4C,kBAAnBA,EAAOzoE,OACzC,CAyCA,IAAI0oE,GAA6B,KAgBjC,IAAIC,GAAwC,IAAIp4F,IAAI,CAClD,oCACA,sBACA,eAEF,SAASq4F,GAAeC,GACtB,OAAe,MAAXA,GAAoBF,GAAsBp7F,IAAIs7F,GAO3CA,GANL/7F,GACE,EAAK,IAAAtE,OACDqgG,EAAO,kFAAArgG,OAAuF+/F,GAAc,MAE3G,KAGX,CACA,SAASO,GAAsBxrF,EAAQ09E,GACrC,IAAI+N,EACA5mE,EACA0mE,EACAG,EACAtyG,EACJ,GA1EF,SAAuB+xG,GACrB,OAAOD,GAAcC,IAA4C,SAAjCA,EAAOzoE,QAAQnuB,aACjD,CAwEMo3F,CAAc3rF,GAAS,CACzB,IAAIssC,EAAOtsC,EAAOuhD,aAAa,UAC/B18B,EAASynB,EAAOsxC,EAActxC,EAAMoxC,GAAY,KAChD+N,EAASzrF,EAAOuhD,aAAa,WAAaypC,GAC1CO,EAAUD,GAAetrF,EAAOuhD,aAAa,aAAe0pC,GAC5DS,EAAW,IAAIE,SAAS5rF,EAC1B,MAAO,GAnFT,SAAyBmrF,GACvB,OAAOD,GAAcC,IAA4C,WAAjCA,EAAOzoE,QAAQnuB,aACjD,CAiFas3F,CAAgB7rF,IA7E7B,SAAwBmrF,GACtB,OAAOD,GAAcC,IAA4C,UAAjCA,EAAOzoE,QAAQnuB,aACjD,CA2EwCu3F,CAAe9rF,KAA4B,WAAhBA,EAAOhnB,MAAqC,UAAhBgnB,EAAOhnB,MAAmB,CACrH,IAAIw+C,EAAOx3B,EAAOw3B,KAClB,GAAY,MAARA,EACF,MAAM,IAAIv+C,MAAM,sEAIlB,IAAIqzD,EAAOtsC,EAAOuhD,aAAa,eAAiB/pB,EAAK+pB,aAAa,UAKlE,GAJA18B,EAASynB,EAAOsxC,EAActxC,EAAMoxC,GAAY,KAChD+N,EAASzrF,EAAOuhD,aAAa,eAAiB/pB,EAAK+pB,aAAa,WAAaypC,GAC7EO,EAAUD,GAAetrF,EAAOuhD,aAAa,iBAAmB+pC,GAAe9zD,EAAK+pB,aAAa,aAAe0pC,GAChHS,EAAW,IAAIE,SAASp0D,EAAMx3B,IArDlC,WACE,GAAmC,OAA/BorF,GACF,IACE,IAAIQ,SACFr4F,SAASC,cAAc,QAEvB,GAEF43F,IAA6B,CAC/B,CAAE,MAAOtqG,IACPsqG,IAA6B,CAC/B,CAEF,OAAOA,EACT,CAwCSW,GAAgC,CACnC,IAAI,KAAErtG,EAAI,KAAE1F,EAAI,MAAE2f,GAAUqH,EAC5B,GAAa,UAAThnB,EAAkB,CACpB,IAAIgzG,EAASttG,EAAO,GAAHwM,OAAMxM,EAAI,KAAM,GACjCgtG,EAASO,OAAO,GAAD/gG,OAAI8gG,EAAM,KAAK,KAC9BN,EAASO,OAAO,GAAD/gG,OAAI8gG,EAAM,KAAK,IAChC,MAAWttG,GACTgtG,EAASO,OAAOvtG,EAAMia,EAE1B,CACF,KAAO,IAAIuyF,GAAclrF,GACvB,MAAM,IAAI/mB,MAAM,sFAIhBwyG,EAAST,GACTnmE,EAAS,KACT0mE,EAAUN,GACV7xG,EAAO4mB,CACT,CAKA,OAJI0rF,GAAwB,eAAZH,IACdnyG,EAAOsyG,EACPA,OAAW,GAEN,CAAE7mE,SAAQ4mE,OAAQA,EAAOl3F,cAAeg3F,UAASG,WAAUtyG,OACpE,CAqNuB2G,OAAO65F,oBAAoB75F,OAAOC,WAAW+9F,OAAOnrF,KAAK,MAO9C,qBAAXjD,OAAyBA,OAA+B,qBAAfmqF,YAA6BA,WAse7F,SAASoS,GAAWvzF,EAAO9K,GACzB,IAAc,IAAV8K,GAA6B,OAAVA,GAAmC,qBAAVA,EAC9C,MAAM,IAAI1f,MAAM4U,EAEpB,CAGgClO,OAAO,uBAuSvC,SAASwsG,GAAeC,EAAQ1O,EAAUtjC,GACxC,IAAIjpC,EAAwB,kBAAXi7E,EAAsB,IAAIt8F,IACzCs8F,EAGkB,qBAAXz8F,OAAyB,wBAA0BA,OAAOC,SAASynE,QACxE+0B,EAQJ,MAPqB,MAAjBj7E,EAAI+pE,SACN/pE,EAAI+pE,SAAW,SAAHhwF,OAAYkvD,GACfsjC,GAAsD,MAA1CE,EAAczsE,EAAI+pE,SAAUwC,GACjDvsE,EAAI+pE,SAAW,GAAHhwF,OAAMwyF,EAASvoF,QAAQ,MAAO,IAAG,WAAAjK,OAAUkvD,GAEvDjpC,EAAI+pE,SAAW,GAAHhwF,OAAMimB,EAAI+pE,SAAS/lF,QAAQ,MAAO,IAAG,KAAAjK,OAAIkvD,GAEhDjpC,CACT,CAoKAi0E,eAAeiH,GAAgBtN,EAAOuN,GACpC,GAAIvN,EAAMtgG,MAAM6tG,EACd,OAAOA,EAAkBvN,EAAMtgG,IAEjC,IACE,IAAI8tG,QAAoBC,OAGtBzN,EAAM5mG,QAGR,OADAm0G,EAAkBvN,EAAMtgG,IAAM8tG,EACvBA,CACT,CAAE,MAAOjzG,GAUP,OATA6V,QAAQ7V,MAAM,+BAAD4R,OACqB6zF,EAAM5mG,OAAM,yBAE9CgX,QAAQ7V,MAAMA,GACVqW,OAAO88F,sBAAwB98F,OAAO88F,qBAAqBC,UAI/D/8F,OAAOC,SAAS+8F,SACT,IAAI9yE,QAAQ,OAErB,CACF,CAuEA,SAAS+yE,GAAqBzB,GAC5B,OAAiB,MAAVA,GAAyC,kBAAhBA,EAAO0B,IACzC,CACA,SAASC,GAAqB3B,GAC5B,OAAc,MAAVA,IAGe,MAAfA,EAAOp7F,KACa,YAAfo7F,EAAO4B,KAAmD,kBAAvB5B,EAAO6B,aAAyD,kBAAtB7B,EAAO8B,WAEhE,kBAAf9B,EAAO4B,KAA2C,kBAAhB5B,EAAOp7F,KACzD,CAkBA,SAASm9F,GAAsBL,EAAMM,EAAaC,EAAgBC,EAAUz9F,EAAUsuB,GACpF,IAAIovE,EAAQA,CAAC36F,EAAOjF,KACb0/F,EAAe1/F,IACbiF,EAAMosF,MAAMtgG,KAAO2uG,EAAe1/F,GAAOqxF,MAAMtgG,GAEpD8uG,EAAmBA,CAAC56F,EAAOjF,KAAU,IAAA8/F,EACvC,OAEEJ,EAAe1/F,GAAOwtF,WAAavoF,EAAMuoF,WAET,QAAhCsS,EAAAJ,EAAe1/F,GAAOqxF,MAAMlD,YAAI,IAAA2R,OAAA,EAAhCA,EAAkC7N,SAAS,OAAQyN,EAAe1/F,GAAO+zC,OAAO,OAAS9uC,EAAM8uC,OAAO,MAG1G,MAAa,WAATvjB,EACKivE,EAAY5lD,OACjB,CAAC50C,EAAOjF,IAAU4/F,EAAM36F,EAAOjF,IAAU6/F,EAAiB56F,EAAOjF,IAGxD,SAATwwB,EACKivE,EAAY5lD,OAAO,CAAC50C,EAAOjF,KAChC,IAAI+/F,EAAgBJ,EAAS9P,OAAO5qF,EAAMosF,MAAMtgG,IAChD,IAAKgvG,IAAkBA,EAAcC,UACnC,OAAO,EAET,GAAIJ,EAAM36F,EAAOjF,IAAU6/F,EAAiB56F,EAAOjF,GACjD,OAAO,EAET,GAAIiF,EAAMosF,MAAM+L,iBAAkB,KAAA6C,EAChC,IAAIC,EAAcj7F,EAAMosF,MAAM+L,iBAAiB,CAC7C+C,WAAY,IAAI/9F,IACdF,EAASsrF,SAAWtrF,EAASohB,OAASphB,EAAS0uC,KAC/C3uC,OAAO0nE,QAETy2B,eAAgC,QAAjBH,EAAAP,EAAe,UAAE,IAAAO,OAAA,EAAjBA,EAAmBlsD,SAAU,CAAC,EAC7CssD,QAAS,IAAIj+F,IAAI+8F,EAAMl9F,OAAO0nE,QAC9B22B,WAAYr7F,EAAM8uC,OAClBwsD,yBAAyB,IAE3B,GAA2B,mBAAhBL,EACT,OAAOA,CAEX,CACA,OAAO,IAGJ,EACT,CACA,SAASM,GAAmB3P,EAAS8O,GAA2C,IAAjC,uBAAEc,GAAwBx/F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC3E,OAqBmBy/F,EApBjB7P,EAAQnqC,IAAKzhD,IACX,IAAIosF,EAAQsO,EAAS9P,OAAO5qF,EAAMosF,MAAMtgG,IACxC,IAAKsgG,EAAO,MAAO,GACnB,IAAIqP,EAAQ,CAACrP,EAAM5mG,QAanB,OAZI4mG,EAAMsP,qBACRD,EAAQA,EAAMljG,OAAO6zF,EAAMsP,qBAEzBtP,EAAMuP,qBACRF,EAAQA,EAAMljG,OAAO6zF,EAAMuP,qBAEzBH,GAA0BpP,EAAMwP,wBAClCH,EAAQA,EAAMljG,OAAO6zF,EAAMwP,wBAEzBxP,EAAMyP,UACRJ,EAAQA,EAAMljG,OAAO6zF,EAAMyP,UAEtBJ,IACNK,KAAK,GAIH,IAAI,IAAIx7F,IAAIm7F,IADrB,IAAqBA,CADrB,CAYA,SAASM,GAAsBC,EAAaC,GAC1C,IAAI53F,EAAsB,IAAI/D,IAC1B47F,EAAc,IAAI57F,IAAI27F,GAC1B,OAAOD,EAAY56C,OAAO,CAAC+6C,EAASC,KAElC,GAD2BH,IAAahC,GAAqBmC,IAAiC,WAAlBA,EAAWC,IAAmBD,EAAWh/F,MAAQ8+F,EAAY5+F,IAAI8+F,EAAWh/F,MAEtJ,OAAO++F,EAET,IAAIl1G,EAAM09C,KAAKC,UAhBnB,SAAkB/9C,GAChB,IAAIy1G,EAAS,CAAC,EACVj0G,EAAO+E,OAAO/E,KAAKxB,GAAKukG,OAC5B,IAAK,IAAInkG,KAAOoB,EACdi0G,EAAOr1G,GAAOJ,EAAII,GAEpB,OAAOq1G,CACT,CAS6BC,CAASH,IAKlC,OAJK/3F,EAAI/G,IAAIrW,KACXod,EAAI3D,IAAIzZ,GACRk1G,EAAQvnG,KAAK,CAAE3N,MAAKylB,KAAM0vF,KAErBD,GACN,GACL,CA6bA,SAASK,GAAkBC,EAAgBC,GACzC,MAA+B,SAAxBD,EAAelxE,OAA2B,IAARmxE,CAC3C,CAyMA,SAASC,KACP,IAAI7uE,EAAU8uE,EAAAA,WAAkB7L,IAKhC,OAJAwI,GACEzrE,EACA,8EAEKA,CACT,CACA,SAAS+uE,KACP,IAAI/uE,EAAU8uE,EAAAA,WAAkB3L,IAKhC,OAJAsI,GACEzrE,EACA,mFAEKA,CACT,CACA,IAAIgvE,GAAmBF,EAAAA,mBAAqB,GAE5C,SAASG,KACP,IAAIjvE,EAAU8uE,EAAAA,WAAkBE,IAKhC,OAJAvD,GACEzrE,EACA,kEAEKA,CACT,CA2DA,SAASkvE,GAAqBC,EAAcC,GAC1C,OAAQr+E,IACNo+E,GAAgBA,EAAap+E,GACxBA,EAAMpI,kBACTymF,EAAWr+E,GAGjB,CACA,SAASs+E,GAAiBvR,EAASv8C,EAAQ0qD,GACzC,GAAIA,IAAcqD,GAChB,MAAO,CAACxR,EAAQ,IAElB,GAAIv8C,EAAQ,CACV,IAAIguD,EAAWzR,EAAQ8J,UAAWvoG,QAA6B,IAAvBkiD,EAAOliD,EAAEi/F,MAAMtgG,KACvD,OAAO8/F,EAAQ90F,MAAM,EAAGumG,EAAW,EACrC,CACA,OAAOzR,CACT,CApFAkR,GAAiBt4F,YAAc,mBAgH/B,SAAS84F,GAAiBC,GAAyB,IAAxB,KAAErD,GAAoBqD,EAAXC,EAASC,EAAAF,EAAAG,IACzC,OAAEtL,GAAWuK,KACb/Q,EAAUgR,EAAAA,QACZ,IAAMjS,EAAYyH,EAAOxH,OAAQsP,EAAM9H,EAAOrH,UAC9C,CAACqH,EAAOxH,OAAQsP,EAAM9H,EAAOrH,WAE/B,OAAKa,EAGkBgR,EAAAA,cAAqBe,GAAqB5U,EAAA,CAAImR,OAAMtO,WAAY4R,IAF9E,IAGX,CACA,SAASI,GAAsBhS,GAC7B,IAAI,SAAE8O,EAAQ,aAAEmD,GAAiBd,MAC5Be,EAAoBC,GAAyBnB,EAAAA,SAAgB,IAclE,OAbAA,EAAAA,UAAiB,KACf,IAAIoB,GAAc,EAQlB,OAh5BJvL,eAAqC7G,EAAS8O,EAAUmD,GAWtD,OAAO9B,UAVW70E,QAAQ+2E,IACxBrS,EAAQnqC,IAAIgxC,UACV,IAAIrG,EAAQsO,EAAS9P,OAAO5qF,EAAMosF,MAAMtgG,IACxC,GAAIsgG,EAAO,CACT,IAAIlgD,QAAYwtD,GAAgBtN,EAAOyR,GACvC,OAAO3xD,EAAIgyD,MAAQhyD,EAAIgyD,QAAU,EACnC,CACA,MAAO,OAIHpC,KAAK,GAAGlnD,OAAOulD,IAAsBvlD,OAAQloC,GAAsB,eAAbA,EAAK0tF,KAAqC,YAAb1tF,EAAK0tF,KAAmB34C,IAC9G/0C,GAAsB,eAAbA,EAAK0tF,IAAoBrR,EAAAA,EAAA,GAAQr8E,GAAI,IAAE0tF,IAAK,WAAYiC,GAAI,UAAOtT,EAAAA,EAAA,GAAUr8E,GAAI,IAAE0tF,IAAK,cAGxG,CAy3BS+D,CAAsBvS,EAAS8O,EAAUmD,GAAcv2E,KACzD42E,IACMF,GACHD,EAAsBG,KAIrB,KACLF,GAAc,IAEf,CAACpS,EAAS8O,EAAUmD,IAChBC,CACT,CACA,SAASH,GAAqBS,GAI3B,IAJ4B,KAC7BlE,EACAtO,QAAS4O,GAEV4D,EADIZ,EAASC,EAAAW,EAAAC,GAERphG,EAAW80F,MACX,SAAE2I,EAAQ,aAAEmD,GAAiBd,MAC7B,SAAEhS,GAAa4R,MACf,WAAE5G,EAAU,QAAEnK,GAAYiR,KAC1ByB,EAAoB1B,EAAAA,QACtB,IAAMrC,GACJL,EACAM,EACA5O,EACA8O,EACAz9F,EACA,QAEF,CAACi9F,EAAMM,EAAa5O,EAAS8O,EAAUz9F,IAErCshG,EAAsB3B,EAAAA,QACxB,IAAMrC,GACJL,EACAM,EACA5O,EACA8O,EACAz9F,EACA,UAEF,CAACi9F,EAAMM,EAAa5O,EAAS8O,EAAUz9F,IAErCuhG,EAAY5B,EAAAA,QAAe,KAC7B,GAAI1C,IAASj9F,EAASsrF,SAAWtrF,EAASohB,OAASphB,EAAS0uC,KAC1D,MAAO,GAET,IAAI8yD,EAA+B,IAAIn+F,IACnCo+F,GAAmB,EAcvB,GAbAlE,EAAY74F,QAASxU,IAAM,IAAAwxG,EACzB,IAAI7D,EAAgBJ,EAAS9P,OAAOz9F,EAAEi/F,MAAMtgG,IACvCgvG,GAAkBA,EAAcC,aAGhCuD,EAAkB1Q,KAAMtZ,GAAOA,EAAG8X,MAAMtgG,KAAOqB,EAAEi/F,MAAMtgG,KAAOqB,EAAEi/F,MAAMtgG,MAAMiqG,GAAsC,QAA5B4I,EAAId,EAAa1wG,EAAEi/F,MAAMtgG,WAAG,IAAA6yG,GAAxBA,EAA0BxG,kBAE9G2C,EAAc8D,gBADvBF,GAAmB,EAInBD,EAAa/9F,IAAIvT,EAAEi/F,MAAMtgG,OAGH,IAAtB2yG,EAAahlG,KACf,MAAO,GAET,IAAI+kB,EAAMg7E,GAAeU,EAAMnP,EAAU,QAOzC,OANI2T,GAAoBD,EAAahlG,KAAO,GAC1C+kB,EAAInhB,aAAagH,IACf,UACAm2F,EAAY5lD,OAAQznD,GAAMsxG,EAAanhG,IAAInQ,EAAEi/F,MAAMtgG,KAAK21D,IAAKt0D,GAAMA,EAAEi/F,MAAMtgG,IAAImU,KAAK,MAGjF,CAACue,EAAI+pE,SAAW/pE,EAAIH,SAC1B,CACD0sE,EACAgL,EACA94F,EACAy9F,EACA4D,EACA9D,EACAN,EACA2D,IAEEgB,EAAcjC,EAAAA,QAChB,IAAMrB,GAAmBgD,EAAqB7D,GAC9C,CAAC6D,EAAqB7D,IAEpBoD,EAAqBF,GAAsBW,GAC/C,OAAuB3B,EAAAA,cAAqBA,EAAAA,SAAiB,KAAM4B,EAAU/8C,IAAKrkD,GAAyBw/F,EAAAA,cAAqB,OAAM7T,EAAA,CAAI9hG,IAAKmW,EAAMg9F,IAAK,WAAYiC,GAAI,QAASj/F,QAASogG,KAAeqB,EAAYp9C,IAAKrkD,GAAyBw/F,EAAAA,cAAqB,OAAM7T,EAAA,CAAI9hG,IAAKmW,EAAMg9F,IAAK,gBAAiBh9F,QAASogG,KAAeM,EAAmBr8C,IAAIq9C,IAAA,IAAC,IAAE73G,EAAG,KAAEylB,GAAMoyF,EAAA,OAGhWlC,EAAAA,cAAqB,OAAM7T,EAAA,CAAI9hG,MAAK83G,MAAOvB,EAAUuB,OAAUryF,MAEnF,CAwGA,IAAI0wF,IAAa,EAIjB,SAAS4B,GAAQC,GACf,IAAI,SACFvE,EAAQ,oBACRwE,EAAmB,UACnBnF,EAAS,WACToF,EAAU,eACV1C,EAAc,IACdC,GACEK,MACA,OAAE3K,EAAQF,OAAQkN,EAAQ,cAAEhK,GAAkBuH,MAC5C/Q,QAASyT,GAAkBxC,KAC7ByC,EA11HGtO,EAAAA,WAAiBE,IA21HpBqO,EAAiB/C,GAAkBC,EAAgBC,GACnDyC,IACFA,EAAWK,kBAAmB,GAEhC,IAAI5T,EAAUuR,GAAiBkC,EAAe,KAAMtF,GACpD6C,EAAAA,UAAiB,KAnBjBQ,GAqBG,IACH,IAAIqC,EAAiB7C,EAAAA,QAAe,KAAM,IAAA8C,EACxC,GAAIJ,EACF,OAAO,KAET,IACIK,EAAgBvK,EAAgB,iCAAH78F,OAAoC2mG,EAAmB,KAAA3mG,OADrE,kLAC0F,IACzGqnG,EAAsBR,EAAiB,GAAH7mG,OAAkB,OAAZmiG,EAASmF,UAAG,IAAAH,GAAZA,EAAcI,QAAU,UAAHvnG,OAAaosC,KAAKC,UAAU81D,EAASmF,IAAIC,SAAQ,KAAM,IAAEvnG,OAAIgnG,EAA4D,GAA3C,UAAHhnG,OAAaosC,KAAKC,UAAU81D,EAASl8E,MAAW,OAAAjmB,OAChMqzF,EAAQnqC,IAAI,CAACzhD,EAAO+/F,KAChB,IAAIC,EAAe,QAAHznG,OAAWwnG,GACvBE,EAAgBvF,EAAS9P,OAAO5qF,EAAMosF,MAAMtgG,IAChDytG,GAAW0G,EAAe,SAAF1nG,OAAWyH,EAAMosF,MAAMtgG,GAAE,2BACjD,IAAI,mBACF4vG,EAAkB,mBAClBC,EAAkB,uBAClBuE,EAAsB,sBACtBtE,EAAqB,OACrBp2G,GACEy6G,EACAE,EAAS,IACRzE,EAAqB,CACtB,CACEl2G,OAAQk2G,EACR0E,QAAS,GAAF7nG,OAAKynG,EAAY,mBAExB,MACDrE,EAAqB,CACtB,CACEn2G,OAAQm2G,EACRyE,QAAS,GAAF7nG,OAAKynG,EAAY,mBAExB,MACDE,EAAyB,CAC1B,CACE16G,OAAQ06G,EACRE,QAAS,GAAF7nG,OAAKynG,EAAY,uBAExB,MACDpE,EAAwB,CACzB,CACEp2G,OAAQo2G,EACRwE,QAAS,GAAF7nG,OAAKynG,EAAY,sBAExB,GACJ,CAAEx6G,SAAQ46G,QAAS,GAAF7nG,OAAKynG,EAAY,WAEpC,OAAsB,IAAlBG,EAAO11G,OACF,eAAP8N,OAAsBynG,EAAY,UAAAznG,OAASosC,KAAKC,UAAUp/C,GAAO,KAI5D,CAFmB26G,EAAO1+C,IAAK1Q,GAAK,eAAAx4C,OAAoBw4C,EAAMqvD,QAAO,WAAA7nG,OAAUw4C,EAAMvrD,OAAM,OAAMya,KAAK,MACnF,SAAH1H,OAAYynG,EAAY,QAAAznG,OAAO4nG,EAAO1+C,IAAK1Q,GAAK,MAAAx4C,OAAWw4C,EAAMqvD,UAAWngG,KAAK,KAAI,OAC1DA,KAAK,QACtDA,KAAK,MAAK,QAAA1H,OACbgnG,EACE,kCAAAhnG,OACkCosC,KAAKC,UA7mB7C,SAA2By7D,EAAuBjO,GAAQ,IAA9B,IAAEkO,GAAkBD,EAAV3F,EAAQ+C,EAAA4C,EAAAE,GACxCC,EAAW,IAAIlgG,IAAI8xF,EAAO1qG,MAAMkkG,QAAQnqC,IAAKt0D,GAAMA,EAAEi/F,MAAMtgG,KAC3D+gG,EAAWuF,EAAO1qG,MAAMuV,SAASsrF,SAAS7mF,MAAM,KAAKkzC,OAAO6rD,SAC5DjQ,EAAQ,CAAC,KAEb,IADA3D,EAASphB,MACFohB,EAASpiG,OAAS,GACvB+lG,EAAM57F,KAAK,IAAD2D,OAAKs0F,EAAS5sF,KAAK,OAC7B4sF,EAASphB,MAEX+kB,EAAM7uF,QAASunF,IACb,IAAI0C,EAAUjB,EAAYyH,EAAOxH,OAAQ1B,EAAMkJ,EAAOrH,UAClDa,GACFA,EAAQjqF,QAASxU,GAAMqzG,EAAS9/F,IAAIvT,EAAEi/F,MAAMtgG,OAGhD,IAAI40G,EAAgB,IAAIF,GAAUp/C,OAChC,CAACu/C,EAAK70G,IAAOsB,OAAOyW,OAAO88F,EAAK,CAAE,CAAC70G,GAAK4uG,EAAS9P,OAAO9+F,KACxD,CAAC,GAEH,OAAAi9F,EAAAA,EAAA,GACK2R,GAAQ,IACX9P,OAAQ8V,EACRJ,MAAKA,QAAa,GAEtB,CAslBQM,CAAmBlG,EAAUtI,GAC7B,KACA,GACD,KACC,GAAE,4CAAA75F,OAC8BqzF,EAAQnqC,IAAI,CAACzhD,EAAOjF,IAAU,GAALxC,OAAQosC,KAAKC,UAAU5kC,EAAMosF,MAAMtgG,IAAG,UAAAyM,OAASwC,IAASkF,KAAK,KAAI,iBAAA1H,OAEzHosC,KAAKC,UAAU81D,EAASmG,MAAMr7G,QAAO,MAxDL,IAyDrC,OAAuBo3G,EAAAA,cAAqBA,EAAAA,SAAiB,KAAsBA,EAAAA,cACjF,SAAQ7T,EAAAA,EAAA,GAEHkW,GAAW,IACdhjE,0BAA0B,EAC1B30B,wBAAyB,CAAEsf,OAAQ+4E,GACnCt5G,UAAM,KAESu2G,EAAAA,cACjB,SAAQ7T,EAAAA,EAAA,GAEHkW,GAAW,IACdhjE,0BAA0B,EAC1B30B,wBAAyB,CAAEsf,OAAQg5E,GACnCv5G,KAAM,SACNosG,OAAO,OAGV,IACCwJ,EAAWmB,IAAckC,EAAqB,IAChD5E,EAASmG,MAAMhF,QAAQtjG,OACrBgjG,GAAmB3P,EAAS8O,EAAU,CACpCc,wBAAwB,KAoDvB,IAAI,IAAIl7F,IAAIwgG,KADrB,IAAgBA,EA/Cd,IAAIR,EAA8B,kBAAjB5F,EAAS4F,IAAmB5F,EAAS4F,IAAM,CAAC,EAK7D,OAJAtJ,IACGsI,EACD,gFAEKlC,IAAckC,EAAqB,KAAuB1C,EAAAA,cAAqBA,EAAAA,SAAiB,KAA8B,kBAAjBlC,EAAS4F,IAAmC1D,EAAAA,cAC9J,SACA,CACE,eAAgB,GAChBv2G,KAAM,YACN41C,0BAA0B,EAC1B30B,wBAAyB,CACvBsf,OAAQ+d,KAAKC,UAAU,CACrBm8D,UAAWT,OAIf,KAAOf,EASP,KATwC3C,EAAAA,cAC1C,OACA,CACExC,IAAK,gBACLh9F,KAAMs9F,EAASl8E,IACfwiF,YAAa/B,EAAY+B,YACzBD,UAAWT,EAAI5F,EAASl8E,KACxByd,0BAA0B,IAEJ2gE,EAAAA,cACxB,OACA,CACExC,IAAK,gBACLh9F,KAAMs9F,EAASmG,MAAMr7G,OACrBw7G,YAAa/B,EAAY+B,YACzBD,UAAWT,EAAI5F,EAASmG,MAAMr7G,QAC9By2C,0BAA0B,IAE3BggE,EAASx6C,IAAKynC,GAAyB0T,EAAAA,cACxC,OACA,CACE31G,IAAKiiG,EACLkR,IAAK,gBACLh9F,KAAM8rF,EACN8X,YAAa/B,EAAY+B,YACzBD,UAAWT,EAAIpX,GACfjtD,0BAA0B,KAE1BwjE,EACN,CAIA,SAASwB,KAAmB,QAAAC,EAAAllG,UAAAvR,OAANyhC,EAAI,IAAAt8B,MAAAsxG,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJj1E,EAAIi1E,GAAAnlG,UAAAmlG,GACxB,OAAQn7F,IACNkmB,EAAKvqB,QAAShU,IACO,oBAARA,EACTA,EAAIqY,GACY,MAAPrY,IACTA,EAAIe,QAAUsX,KAItB,CAGuCo7F,EAAAA,UA4BvC,SAASC,GAA6BC,GAGnC,IAHoC,MACrC36G,EAAK,kBACL46G,GACDD,EACC9kG,QAAQ7V,MAAMA,GACd,IAeI66G,EAfAC,EAA+BL,EAAAA,cACjC,SACA,CACE95F,wBAAyB,CACvBsf,OAAQ,2PAQd,GAAI6pE,EAAqB9pG,GACvB,OAAuBy6G,EAAAA,cAAqBM,GAAe,CAAEC,MAAO,8BAAgDP,EAAAA,cAAqB,KAAM,CAAEz1F,MAAO,CAAEi2F,SAAU,SAAYj7G,EAAM+pG,OAAQ,IAAK/pG,EAAMgqG,YAAmC8Q,GAG9O,GAAI96G,aAAiBL,MACnBk7G,MACK,CACL,IAAIK,EAAuB,MAATl7G,EAAgB,gBAAmC,kBAAVA,GAAsB,aAAcA,EAAQA,EAAM2L,WAAaqyC,KAAKC,UAAUj+C,GACzH,IAAIL,MAAMu7G,EAC5B,CACA,OAAuBT,EAAAA,cACrBM,GACA,CACEC,MAAO,qBACPJ,qBAEcH,EAAAA,cAAqB,KAAM,CAAEz1F,MAAO,CAAEi2F,SAAU,SAAY,qBAC5DR,EAAAA,cACd,MACA,CACEz1F,MAAO,CACL9gB,QAAS,OACTi3G,WAAY,0BACZjkF,MAAO,MACPlnB,SAAU,SAGd6qG,EAAcz9F,OAEhB09F,EAEJ,CACA,SAASC,GAAaK,GAKnB,IAAAC,EAAA,IALoB,MACrBL,EAAK,cACLM,EAAa,kBACbV,EAAiB,SACjBh6F,GACDw6F,GACK,aAAElE,GAAiBd,KACvB,OAAqB,OAAjBc,EAAaqE,WAAI,IAAAF,GAAjBA,EAAmBG,SAAWZ,EACzBh6F,EAEc65F,EAAAA,cAAqB,OAAQ,CAAEgB,KAAM,MAAwBhB,EAAAA,cAAqB,OAAQ,KAAsBA,EAAAA,cAAqB,OAAQ,CAAEiB,QAAS,UAA4BjB,EAAAA,cACzM,OACA,CACEr1G,KAAM,WACNmpD,QAAS,0DAEMksD,EAAAA,cAAqB,QAAS,KAAMO,IAAyBP,EAAAA,cAAqB,OAAQ,KAAsBA,EAAAA,cAAqB,OAAQ,CAAEz1F,MAAO,CAAE22F,WAAY,wBAAyBz3G,QAAS,SAAY0c,EAAU06F,EAAgCb,EAAAA,cAAqBpC,GAAS,MAAQ,OACvT,CAIA,IAAIuD,GAA8B,qBAAXvlG,QAAqD,qBAApBA,OAAO4D,UAAqE,qBAAlC5D,OAAO4D,SAASC,cAClH,IACM0hG,KACFvlG,OAAOwlG,qBACP,QAEJ,CAAE,MAAOr0G,IACT,CA4EA,SAASs0G,GAAaC,GAInB,IAJoB,SACrB3X,EAAQ,SACRxjF,EACAvK,OAAQqrF,GACTqa,EACKC,EAAaC,EAAAA,SACS,MAAtBD,EAAWj0G,UACbi0G,EAAWj0G,QAAUy5F,EAAqB,CAAEnrF,OAAQqrF,EAASoB,UAAU,KAEzE,IAAIC,EAAUiZ,EAAWj0G,SACpBhH,EAAOm7G,GAAgBD,EAAAA,SAAiB,CAC3C1wE,OAAQw3D,EAAQx3D,OAChBj1B,SAAUysF,EAAQzsF,WAEhB8lD,EAAW6/C,EAAAA,YACZE,IACCF,EAAAA,gBAAwB,IAAMC,EAAaC,KAE7C,CAACD,IAGH,OADAD,EAAAA,gBAAwB,IAAMlZ,EAAQQ,OAAOnnC,GAAW,CAAC2mC,EAAS3mC,IAC3C6/C,EAAAA,cACrBvL,GACA,CACEtM,WACAxjF,WACAtK,SAAUvV,EAAMuV,SAChBi3F,eAAgBxsG,EAAMwqC,OACtBkW,UAAWshD,GAGjB,CAyDA,IAAIqZ,GAAsB,gCACtBC,GAAOJ,EAAAA,WACT,SAAoBK,EAajBC,GAAc,IAGXC,GAhBe,QACnBjnE,EAAO,SACPknE,EAAW,SAAQ,SACnBC,EAAW,OAAM,SACjBvQ,EAAQ,eACRwQ,EACA9gG,QAAS+gG,EAAQ,MACjB77G,EAAK,OACL2lB,EAAM,GACNq7E,EAAE,mBACF8a,EAAkB,eAClBC,GAEDR,EADInW,EAAI2Q,EAAAwF,EAAAS,IAEH,SAAE3Y,GAAa6X,EAAAA,WAAmBrR,IAClC9G,EAA2B,kBAAP/B,GAAmBqa,GAAoB5gG,KAAKumF,GAEhEib,GAAa,EACjB,GAAkB,kBAAPjb,GAAmB+B,IAC5B0Y,EAAeza,EACX6Z,IACF,IACE,IAAIrH,EAAa,IAAI/9F,IAAIH,OAAOC,SAASG,MACrCwmG,EAAYlb,EAAGgC,WAAW,MAAQ,IAAIvtF,IAAI+9F,EAAW2I,SAAWnb,GAAM,IAAIvrF,IAAIurF,GAC9EQ,EAAO+B,EAAc2Y,EAAUrb,SAAUwC,GACzC6Y,EAAUl/B,SAAWw2B,EAAWx2B,QAAkB,MAARwkB,EAC5CR,EAAKQ,EAAO0a,EAAUvlF,OAASulF,EAAUj4D,KAEzCg4D,GAAa,CAEjB,CAAE,MAAOx1G,IACP0O,GACE,EAAK,aAAAtE,OACQmwF,EAAE,0GAEnB,CAGJ,IAAItrF,EA/wIR,SAAiBsrF,GAAuB,IAAnB,SAAEoK,GAAU92F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EACnC4sF,EACEiJ,KAEA,sEAGF,IAAI,SAAE9G,EAAQ,UAAE3iD,GAAc0pD,EAAAA,WAAkBP,KAC5C,KAAE5lD,EAAI,SAAE48C,EAAQ,OAAElqE,GAAW20E,GAAgBtK,EAAI,CAAEoK,aACnDgR,EAAiBvb,EAIrB,MAHiB,MAAbwC,IACF+Y,EAA8B,MAAbvb,EAAmBwC,EAAWyB,EAAU,CAACzB,EAAUxC,KAE/DngD,EAAU+hD,WAAW,CAAE5B,SAAUub,EAAgBzlF,SAAQstB,QAClE,CAiwIeo4D,CAAQrb,EAAI,CAAEoK,cACpBkR,EAAgBC,EAAaC,GAnyBtC,SAA6Bb,EAAUc,GACrC,IAAIC,EAAmBxH,EAAAA,WAAkBE,KACpCuH,EAAeC,GAAoB1H,EAAAA,UAAgB,IACnDoH,EAAgBO,GAAqB3H,EAAAA,UAAgB,IACtD,QAAE4H,EAAO,OAAEC,EAAM,aAAEC,EAAY,aAAEC,EAAY,aAAEC,GAAiBT,EAChEx2G,EAAMivG,EAAAA,OAAc,MACxBA,EAAAA,UAAiB,KAIf,GAHiB,WAAbyG,GACFkB,GAAkB,GAEH,aAAblB,EAAyB,CAC3B,IAKIwB,EAAW,IAAIC,qBALHC,IACdA,EAAQpjG,QAASk/F,IACf0D,EAAkB1D,EAAMmE,mBAGsB,CAAEC,UAAW,KAE/D,OADIt3G,EAAIe,SAASm2G,EAAShrD,QAAQlsD,EAAIe,SAC/B,KACLm2G,EAASK,aAEb,GACC,CAAC7B,IACJzG,EAAAA,UAAiB,KACf,GAAIyH,EAAe,CACjB,IAAIv4G,EAAKg7B,WAAW,KAClBy9E,GAAkB,IACjB,KACH,MAAO,KACLv9E,aAAal7B,GAEjB,GACC,CAACu4G,IACJ,IAAIc,EAAYA,KACdb,GAAiB,IAEfc,EAAeA,KACjBd,GAAiB,GACjBC,GAAkB,IAEpB,OAAKH,EAGY,WAAbf,EACK,CAACW,EAAgBr2G,EAAK,CAAC,GAEzB,CACLq2G,EACAr2G,EACA,CACE62G,QAASxH,GAAqBwH,EAASW,GACvCV,OAAQzH,GAAqByH,EAAQW,GACrCV,aAAc1H,GAAqB0H,EAAcS,GACjDR,aAAc3H,GAAqB2H,EAAcS,GACjDR,aAAc5H,GAAqB4H,EAAcO,KAb5C,EAAC,EAAOx3G,EAAK,CAAC,EAgBzB,CA0uB0D03G,CACpDhC,EACAvW,GAEEwY,EA8NR,SAA6B5c,GAOrB,IAPyB,OAC/Br7E,EACA7K,QAAS+iG,EAAW,MACpB79G,EAAK,mBACL87G,EAAkB,SAClB1Q,EAAQ,eACR2Q,GACDznG,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EACCw2F,EAAWL,KACXl1F,EAAW80F,KACX7I,EAAO8J,GAAgBtK,EAAI,CAAEoK,aACjC,OAAO8P,EAAAA,YACJ/jF,IACC,GA/pGN,SAAgCA,EAAOxR,GACrC,OAAwB,IAAjBwR,EAAMjG,UACXvL,GAAqB,UAAXA,KALd,SAAyBwR,GACvB,SAAUA,EAAMpG,SAAWoG,EAAMrG,QAAUqG,EAAMvG,SAAWuG,EAAMtG,SACpE,CAIGitF,CAAgB3mF,EACnB,CA2pGU4mF,CAAuB5mF,EAAOxR,GAAS,CACzCwR,EAAMjI,iBACN,IAAI2sF,OAA2B,IAAhBgC,EAAyBA,EAAc5c,EAAW1rF,KAAc0rF,EAAWO,GAC1FsJ,EAAS9J,EAAI,CACXlmF,QAAS+gG,EACT77G,QACA87G,qBACA1Q,WACA2Q,kBAEJ,GAEF,CACExmG,EACAu1F,EACAtJ,EACAqc,EACA79G,EACA2lB,EACAq7E,EACA8a,EACA1Q,EACA2Q,GAGN,CApQ0BiC,CAAoBhd,EAAI,CAC5ClmF,QAAS+gG,EACT77G,QACA2lB,SACAm2F,qBACA1Q,WACA2Q,mBAQF,IAAI/2F,EAEck2F,EAAAA,cACd,IAAG7Z,EAAAA,EAAAA,EAAA,GAEE+D,GACAoX,GAAgB,IACnB9mG,KAAM+lG,GAAgB/lG,EACtB8+B,QAASynE,GAAcL,EAAiBpnE,EAd9C,SAAqBrd,GACfqd,GAASA,EAAQrd,GAChBA,EAAMpI,kBACT6uF,EAAgBzmF,EAEpB,EAUMlxB,IAAKszG,GAAUiC,EAAce,GAC7B52F,SACA,gBAAkBo9E,GAA2B,WAAb2Y,OAAiC,EAAT,UAI9D,OAAOY,IAAmBvZ,EAA6BmY,EAAAA,cAAsBA,EAAAA,SAAkB,KAAMl2F,EAAsBk2F,EAAAA,cAAsBtF,GAAmB,CAAEpD,KAAM98F,KAAWsP,CACzL,GAEFs2F,GAAKx+F,YAAc,OACLo+F,EAAAA,WACZ,SAAuB+C,EAUpBh4G,GAAK,IATN,eAAgBi4G,EAAkB,OAAM,cACxCrZ,GAAgB,EAChBsZ,UAAWC,EAAgB,GAAE,IAC7BxkF,GAAM,EACN3V,MAAOo6F,EAAS,GAChBrd,EAAE,eACF+a,EAAc,SACdl8F,GAEDo+F,EADI7Y,EAAI2Q,EAAAkI,EAAAK,GAEH9c,EAAO8J,GAAgBtK,EAAI,CAAEoK,SAAUhG,EAAKgG,WAC5C71F,EAAW80F,KACXkU,EAAcrD,EAAAA,WAAmB3R,KACjC,UAAE7oD,EAAS,SAAE2iD,GAAa6X,EAAAA,WAAmBrR,IAC7CH,EAAiC,MAAf6U,GA2hB1B,SAAgCvd,GAAuB,IAAnB,SAAEoK,GAAU92F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC9CkqG,EAAYtD,EAAAA,WAAmBzR,IACnCvI,EACe,MAAbsd,EACA,0JAEF,IAAI,SAAEnb,GAAaob,GACjB,0BAEEjd,EAAO8J,GAAgBtK,EAAI,CAAEoK,aACjC,IAAKoT,EAAU9U,gBACb,OAAO,EAET,IAAIgV,EAAcnb,EAAcib,EAAUG,gBAAgB9d,SAAUwC,IAAamb,EAAUG,gBAAgB9d,SACvG+d,EAAWrb,EAAcib,EAAUK,aAAahe,SAAUwC,IAAamb,EAAUK,aAAahe,SAClG,OAA6C,MAAtC2F,EAAUhF,EAAKX,SAAU+d,IAA8D,MAAzCpY,EAAUhF,EAAKX,SAAU6d,EAChF,CAziBII,CAAuBtd,KAA4B,IAAnBua,EAC5B3T,EAAa1nD,EAAUgiD,eAAiBhiD,EAAUgiD,eAAelB,GAAMX,SAAWW,EAAKX,SACvFoH,EAAmB1yF,EAASsrF,SAC5Bke,EAAuBR,GAAeA,EAAYS,YAAcT,EAAYS,WAAWzpG,SAAWgpG,EAAYS,WAAWzpG,SAASsrF,SAAW,KAC5IgE,IACHoD,EAAmBA,EAAiB/tF,cACpC6kG,EAAuBA,EAAuBA,EAAqB7kG,cAAgB,KACnFkuF,EAAaA,EAAWluF,eAEtB6kG,GAAwB1b,IAC1B0b,EAAuBxb,EAAcwb,EAAsB1b,IAAa0b,GAE1E,MAAME,EAAkC,MAAf7W,GAAsBA,EAAW9C,SAAS,KAAO8C,EAAWrlG,OAAS,EAAIqlG,EAAWrlG,OAC7G,IAQIo7G,EARAe,EAAWjX,IAAqBG,IAAexuE,GAAOquE,EAAiBjF,WAAWoF,IAA6D,MAA9CH,EAAiB7jF,OAAO66F,GACzHE,EAAoC,MAAxBJ,IAAiCA,IAAyB3W,IAAexuE,GAAOmlF,EAAqB/b,WAAWoF,IAAkE,MAAnD2W,EAAqB36F,OAAOgkF,EAAWrlG,SAClLq8G,EAAc,CAChBF,WACAC,YACAzV,mBAEE2V,EAAcH,EAAWhB,OAAkB,EAG7CC,EAD2B,oBAAlBC,EACGA,EAAcgB,GAEd,CACVhB,EACAc,EAAW,SAAW,KACtBC,EAAY,UAAY,KACxBzV,EAAkB,gBAAkB,MACpCx8C,OAAO6rD,SAASxgG,KAAK,KAEzB,IAAI0L,EAA6B,oBAAdo6F,EAA2BA,EAAUe,GAAef,EACvE,OAAuBnD,EAAAA,cACrBI,GAAIja,EAAAA,EAAA,GAEC+D,GAAI,IACP,eAAgBia,EAChBlB,YACAl4G,MACAge,QACA+8E,KACA+a,mBAEkB,oBAAbl8F,EAA0BA,EAASu/F,GAAev/F,EAE7D,GAEM/C,YAAc,UACtB,IAAIwiG,GAAOpE,EAAAA,WACT,CAAAqE,EAcG/D,KAAiB,IAdnB,SACCE,EAAW,SAAQ,WACnB8D,EAAU,SACV1U,EAAQ,eACR8Q,EACA9gG,QAAS+gG,EAAQ,MACjB77G,EAAK,OACLoxG,EAAST,GAAa,OACtBnmE,EAAM,SACNi1E,EAAQ,SACRrU,EAAQ,mBACR0Q,EAAkB,eAClBC,GAEDwD,EADIz4G,EAAKivG,EAAAwJ,EAAAG,GAEJC,EAASC,KACTC,EAyNR,SAAuBr1E,GAA2B,IAAnB,SAAE4gE,GAAU92F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,GACzC,SAAE+uF,GAAa6X,EAAAA,WAAmBrR,IAClCyD,EAAe4N,EAAAA,WAAmBnR,IACtC7I,EAAUoM,EAAc,oDACxB,IAAKh1F,GAASg1F,EAAapJ,QAAQ90F,OAAO,GACtCoyF,EAAIH,EAAA,GAAQiK,GAAgB9gE,GAAkB,IAAK,CAAE4gE,cACrD71F,EAAW80F,KACf,GAAc,MAAV7/D,EAAgB,CAClBg3D,EAAK7qE,OAASphB,EAASohB,OACvB,IAAIywB,EAAS,IAAI04D,gBAAgBte,EAAK7qE,QAClCopF,EAAc34D,EAAO44D,OAAO,SAC5BC,EAAqBF,EAAY7Z,KAAM1sF,GAAY,KAANA,GACjD,GAAIymG,EAAoB,CACtB74D,EAAOl7B,OAAO,SACd6zF,EAAY7yD,OAAQ1zC,GAAMA,GAAGS,QAAST,GAAM4tC,EAAOwqD,OAAO,QAASp4F,IACnE,IAAI0mG,EAAK94D,EAAOx8C,WAChB42F,EAAK7qE,OAASupF,EAAK,IAAHrvG,OAAOqvG,GAAO,EAChC,CACF,CACM11E,GAAqB,MAAXA,IAAmBlyB,EAAMosF,MAAMrxF,QAC7CmuF,EAAK7qE,OAAS6qE,EAAK7qE,OAAS6qE,EAAK7qE,OAAO7b,QAAQ,MAAO,WAAa,UAErD,MAAbuoF,IACF7B,EAAKX,SAA6B,MAAlBW,EAAKX,SAAmBwC,EAAWyB,EAAU,CAACzB,EAAU7B,EAAKX,YAE/E,OAAOI,EAAWO,EACpB,CAnPqB2e,CAAc31E,EAAQ,CAAE4gE,aACrCgV,EAAsC,QAAzBhP,EAAOl3F,cAA0B,MAAQ,OACtD6oF,EAA+B,kBAAXv4D,GAAuB6wE,GAAoB5gG,KAAK+vB,GAkBxE,OAAuB0wE,EAAAA,cACrB,OAAM7Z,EAAAA,EAAA,CAEJp7F,IAAKu1G,EACLpK,OAAQgP,EACR51E,OAAQq1E,EACRJ,SAAU7D,EAAiB6D,EAvBVtoF,IAEnB,GADAsoF,GAAYA,EAAStoF,GACjBA,EAAMpI,iBAAkB,OAC5BoI,EAAMjI,iBACN,IAAImxF,EAAYlpF,EAAM9K,YAAYg0F,UAC9BC,GAAwB,OAATD,QAAS,IAATA,OAAS,EAATA,EAAWn5C,aAAa,gBAAiBkqC,EAC5DuO,EAAOU,GAAalpF,EAAMtI,cAAe,CACvC2wF,aACApO,OAAQkP,EACRxV,WACAhwF,QAAS+gG,EACT77G,QACAorG,WACA0Q,qBACAC,qBAUGj1G,GAAK,IACR,gBAAkBi8F,GAA2B,WAAb2Y,OAAiC,EAAT,YAgEhE,SAAS6E,GAA2BzR,GAClC,MAAO,GAAPj+F,OAAUi+F,EAAQ,qGACpB,CACA,SAAS2P,GAAsB3P,GAC7B,IAAIpnG,EAAMwzG,EAAAA,WAAmB7R,IAE7B,OADAnI,EAAUx5F,EAAK64G,GAA2BzR,IACnCpnG,CACT,CAlEA43G,GAAKxiG,YAAc,OAgJnB,IAAI0jG,GAAY,EACZC,GAAqBA,IAAA,KAAA5vG,OAAW7F,SAASw1G,IAAU,MACvD,SAASZ,KACP,IAAI,OAAElV,GAAW+T,GAAsB,cACnC,SAAEpb,GAAa6X,EAAAA,WAAmBrR,IAClC6W,EAlnIG9V,GAAkB,cAmnIzB,OAAOsQ,EAAAA,YACLnQ,eAAOplF,GAAyB,IAAjB3nB,EAAOsW,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,CAAC,GACpB,OAAEk2B,EAAM,OAAE4mE,EAAM,QAAEF,EAAO,SAAEG,EAAQ,KAAEtyG,GAASoyG,GAChDxrF,EACA09E,GAEF,IAAyB,IAArBrlG,EAAQ8sG,SAAoB,CAC9B,IAAIvrG,EAAMvB,EAAQwhH,YAAciB,WAC1B/V,EAAOiW,MAAMphH,EAAKmhH,EAAgB1iH,EAAQwsC,QAAUA,EAAQ,CAChEsxE,mBAAoB99G,EAAQ89G,mBAC5BzK,WACAtyG,OACAqhH,WAAYpiH,EAAQozG,QAAUA,EAC9BwP,YAAa5iH,EAAQkzG,SAAWA,EAChC1xD,UAAWxhD,EAAQwhD,WAEvB,YACQkrD,EAAOI,SAAS9sG,EAAQwsC,QAAUA,EAAQ,CAC9CsxE,mBAAoB99G,EAAQ89G,mBAC5BzK,WACAtyG,OACAqhH,WAAYpiH,EAAQozG,QAAUA,EAC9BwP,YAAa5iH,EAAQkzG,SAAWA,EAChCp2F,QAAS9c,EAAQ8c,QACjB9a,MAAOhC,EAAQgC,MACfgrG,YAAa0V,EACblhE,UAAWxhD,EAAQwhD,UACnBu8D,eAAgB/9G,EAAQ+9G,gBAG9B,EACA,CAACrR,EAAQrH,EAAUqd,GAEvB,CCz8SA,SAASG,GAAuBp6G,EAAGgM,GACjC,OAAOA,IAAMA,EAAIhM,EAAE2I,MAAM,IAAK1J,OAAOo7G,OAAOp7G,OAAO66F,iBAAiB95F,EAAG,CACrEytD,IAAK,CACH51C,MAAO5Y,OAAOo7G,OAAOruG,MAG3B,CCNA,IAAIhM,GAAE,CAAC8E,KAAK,IAAIkH,GAAEA,IAAI,GAAG,iBAAiB6C,OAAO,CAAC,IAAI7O,GAAGgM,EAAEA,EAAEsuG,cAAc,YAAYzrG,OAAO0rG,UAAUt7G,OAAOyW,OAAOjD,SAASC,cAAc,SAAS,CAACoH,UAAU,IAAInc,GAAG,YAAY,OAAOqC,EAAE4wG,MAAM/hG,OAAO2rG,UAAUx6G,EAAEqf,aAAarT,GAAGyG,SAASgoG,MAAMvgG,YAAYla,GAAGA,EAAEga,UAAU,CAAC,OAAOhO,GAAGhM,IAAiDjB,GAAE,oEAAoEa,GAAE,qBAAqBR,GAAE,OAAOg1F,GAAEA,CAACp0F,EAAEgM,KAAK,IAAIyyB,EAAE,GAAG1/B,EAAE,GAAGa,EAAE,GAAG,IAAI,IAAIR,KAAKY,EAAE,CAAC,IAAIxG,EAAEwG,EAAEZ,GAAG,KAAKA,EAAE,GAAG,KAAKA,EAAE,GAAGq/B,EAAEr/B,EAAE,IAAI5F,EAAE,IAAIuF,GAAG,KAAKK,EAAE,GAAGg1F,GAAE56F,EAAE4F,GAAGA,EAAE,IAAIg1F,GAAE56F,EAAE,KAAK4F,EAAE,GAAG,GAAG4M,GAAG,IAAI,iBAAiBxS,EAAEuF,GAAGq1F,GAAE56F,EAAEwS,EAAEA,EAAEqI,QAAQ,WAAWrU,GAAGZ,EAAEiV,QAAQ,gCAAgCrI,GAAG,IAAIgI,KAAKhI,GAAGA,EAAEqI,QAAQ,KAAKrU,GAAGA,EAAEA,EAAE,IAAIgM,EAAEA,IAAI5M,GAAG,MAAM5F,IAAI4F,EAAE,MAAM4U,KAAK5U,GAAGA,EAAEA,EAAEiV,QAAQ,SAAS,OAAOZ,cAAc7T,GAAGw0F,GAAE70F,EAAE60F,GAAE70F,EAAEH,EAAE5F,GAAG4F,EAAE,IAAI5F,EAAE,IAAI,CAAC,OAAOilC,GAAGzyB,GAAGpM,EAAEoM,EAAE,IAAIpM,EAAE,IAAIA,GAAGb,GAAGvF,GAAE,CAAC,EAAE0B,GAAE8E,IAAI,GAAG,iBAAiBA,EAAE,CAAC,IAAIgM,EAAE,GAAG,IAAI,IAAIyyB,KAAKz+B,EAAEgM,GAAGyyB,EAAEvjC,GAAE8E,EAAEy+B,IAAI,OAAOzyB,CAAC,CAAC,OAAOhM,GAAGhD,GAAEA,CAACgD,EAAEgM,EAAEyyB,EAAEzhC,EAAEuC,KAAK,IAAI03B,EAAE/7B,GAAE8E,GAAGD,EAAEvG,GAAEy9B,KAAKz9B,GAAEy9B,GAAG,CAACj3B,IAAI,IAAIgM,EAAE,EAAEyyB,EAAE,GAAG,KAAKzyB,EAAEhM,EAAE1D,QAAQmiC,EAAE,IAAIA,EAAEz+B,EAAEsiD,WAAWt2C,OAAO,EAAE,MAAM,KAAKyyB,CAAE,EAA9E,CAAgFxH,IAAI,IAAIz9B,GAAEuG,GAAG,CAAC,IAAIiM,EAAEirB,IAAIj3B,EAAEA,EAAE,CAACA,IAAI,IAAIgM,EAAEyyB,EAAE21D,EAAE,CAAC,CAAC,GAAG,KAAKpoF,EAAEjN,GAAEiyD,KAAKhxD,EAAEqU,QAAQzU,GAAE,MAAMoM,EAAE,GAAGooF,EAAE3tE,QAAQza,EAAE,IAAIyyB,EAAEzyB,EAAE,GAAGqI,QAAQjV,GAAE,KAAKyW,OAAOu+E,EAAEp8D,QAAQo8D,EAAE,GAAG31D,GAAG21D,EAAE,GAAG31D,IAAI,CAAC,IAAI21D,EAAE,GAAGpoF,EAAE,IAAIA,EAAE,GAAGqI,QAAQjV,GAAE,KAAKyW,OAAO,OAAOu+E,EAAE,EAAG,EAAxL,CAA0Lp0F,GAAGxG,GAAEuG,GAAGq0F,GAAE70F,EAAE,CAAC,CAAC,cAAcQ,GAAGiM,GAAGA,EAAEyyB,EAAE,GAAG,IAAI1+B,EAAE,CAAC,IAAIpB,EAAE8/B,GAAGjlC,GAAEqG,EAAErG,GAAEqG,EAAE,KAAK,OAAO4+B,IAAIjlC,GAAEqG,EAAErG,GAAEuG,IAAI,EAAEC,EAAEgM,EAAEyyB,EAAE1/B,KAAKA,EAAEiN,EAAElH,KAAKkH,EAAElH,KAAKuP,QAAQtV,EAAEiB,IAAI,IAAIgM,EAAElH,KAAK2Y,QAAQzd,KAAKgM,EAAElH,KAAK25B,EAAEz+B,EAAEgM,EAAElH,KAAKkH,EAAElH,KAAK9E,EAAG,EAA/F,CAAiGxG,GAAEuG,GAAGiM,EAAEhP,EAAE2B,GAAGoB,GAAqN,SAASk3B,GAAEj3B,GAAG,IAAIy+B,EAAEt2B,MAAM,CAAC,EAAEpJ,EAAEiB,EAAEE,KAAKF,EAAEy+B,EAAEl/B,GAAGS,EAAE,OAAOhD,GAAE+B,EAAEi5B,QAAQj5B,EAAE0uD,IAApRluD,EAACS,EAAEgM,EAAEyyB,IAAIz+B,EAAEizD,OAAO,CAACjzD,EAAEjB,EAAEa,KAAK,IAAIR,EAAE4M,EAAEpM,GAAG,GAAGR,GAAGA,EAAEc,KAAK,CAAC,IAAIF,EAAEZ,EAAEq/B,GAAGzyB,EAAEhM,GAAGA,EAAEK,OAAOL,EAAEK,MAAMq3G,WAAW,MAAM1jG,KAAKhU,IAAIA,EAAEZ,EAAE4M,EAAE,IAAIA,EAAEhM,GAAG,iBAAiBA,EAAEA,EAAEK,MAAM,GAAG+zF,GAAEp0F,EAAE,KAAI,IAAKA,EAAE,GAAGA,CAAC,CAAC,OAAOA,EAAEjB,GAAG,MAAMK,EAAE,GAAGA,IAAI,IAA4EG,CAAER,EAAE,GAAG4J,MAAMzI,KAAK2N,UAAU,GAAG4wB,EAAEl/B,GAAGR,EAAEk0D,OAAO,CAACjzD,EAAEgM,IAAI/M,OAAOyW,OAAO1V,EAAEgM,GAAGA,EAAE9L,KAAK8L,EAAEyyB,EAAEl/B,GAAGyM,GAAG,CAAC,GAAGjN,EAAEiN,GAAEyyB,EAAEvf,QAAQuf,EAAE5+B,EAAE4+B,EAAE21D,EAAE31D,EAAE7/B,EAAE,CAAaq4B,GAAEJ,KAAK,CAACh3B,EAAE,IAAtB,IAAIE,GAAEpB,GAAEkB,GAAkBI,GAAEg3B,GAAEJ,KAAK,CAACj4B,EAAE,IAA0C,SAASs4B,GAAEl3B,EAAEgM,GAAG,IAAIyyB,EAAEt2B,MAAM,CAAC,EAAE,OAAO,WAAW,IAAIpJ,EAAE8O,UAAU,SAASjO,EAAER,EAAEg1F,GAAG,IAAI56F,EAAEyF,OAAOyW,OAAO,CAAC,EAAEtW,GAAGlE,EAAE1B,EAAEk+G,WAAW93G,EAAE83G,UAAUj5E,EAAEl/B,EAAEN,OAAOyW,OAAO,CAACglG,MAAM/7G,IAAGA,MAAKnF,GAAGilC,EAAE21D,EAAE,UAAUpgF,KAAK9Y,GAAG1B,EAAEk+G,UAAUzgF,GAAEvpB,MAAM+wB,EAAE1/B,IAAI7D,EAAE,IAAIA,EAAE,IAAI8Q,IAAIxS,EAAEgG,IAAI40F,GAAG,IAAIp3F,EAAEgD,EAAE,OAAOA,EAAE,KAAKhD,EAAExD,EAAE00G,IAAIluG,SAASxG,EAAE00G,IAAIruG,IAAG7C,EAAE,IAAI6C,GAAErG,GAAGuG,GAAE/C,EAAExD,EAAE,CAAC,OAAOwS,EAAEA,EAAEpM,GAAGA,CAAC,CAAC,C,oDC4B7tEK,GAAe06G,CAC1B36G,EACAgM,IANAhM,IAEyB,mBAAlBA,EAKKqxC,CAAWrxC,GAAiBA,EAAcgM,GAAOhM,EC/BlD6uC,GAAA,MACX,IAAI7uC,EAAQ,EACZ,MAAO,OACKA,GAAOmE,UAEpB,EALY,GAOA+1B,GAAA,MAEX,IAAIl6B,EAEJ,MAAO,KACL,QAA2B,IAAvBA,UAA2C6O,OAAW,IAAa,CACrE,IAAM7C,EAAa4uG,WAAW,oCAC9B56G,GAAsBgM,GAAcA,EAAWyxF,OAAA,CAEjD,OAAOz9F,EAEV,EAXY,GCFApB,GAAqB,UAwDrBy7B,GAAUwgF,CAAC76G,EAAqBgM,KAC3C,IAAQ8uG,WAAA1mB,GAAep0F,EAAM+6G,SAE7B,OAAQ/uG,EAAO9T,MACb,KAAK,EACH,OAAA0iG,EAAAA,EAAA,GACK56F,GAAA,IACHg7G,OAAQ,CAAChvG,EAAOivG,SAAUj7G,EAAMg7G,QAAQryG,MAAM,EAAGyrF,KAGrD,KAAK,EACH,OAAAwG,EAAAA,EAAA,GACK56F,GAAA,IACHg7G,OAAQh7G,EAAMg7G,OAAO1nD,IAAK70B,GACxBA,EAAE9gC,KAAOqO,EAAOivG,MAAMt9G,GAAAi9F,EAAAA,EAAA,GAAUn8D,GAAMzyB,EAAOivG,OAAUx8E,KAI7D,KAAK,EACH,IAAQw8E,MAAA//G,GAAU8Q,EAClB,OAAOquB,GAAQr6B,EAAO,CACpB9H,KAAM8H,EAAMg7G,OAAOE,KAAMz8E,GAAMA,EAAE9gC,KAAOzC,EAAMyC,IAC1C,EACA,EACJs9G,MAAA//G,IAGJ,KAAK,EACH,IAAQigH,QAAAv7G,GAAYoM,EAEpB,OAAA4uF,EAAAA,EAAA,GACK56F,GAAA,IACHg7G,OAAQh7G,EAAMg7G,OAAO1nD,IAAK70B,GACxBA,EAAE9gC,KAAOiC,QAAuB,IAAZA,EAAYg7F,EAAAA,EAAA,GAEvBn8D,GAAA,IACH28E,WAAW,EACXC,SAAS,IAEX58E,KAGV,KAAK,EACH,YAAuB,IAAnBzyB,EAAOmvG,QAAYvgB,EAAAA,EAAA,GAEhB56F,GAAA,IACHg7G,OAAQ,KACVpgB,EAAAA,EAAA,GAGG56F,GAAA,IACHg7G,OAAQh7G,EAAMg7G,OAAOv0D,OAAQhoB,GAAMA,EAAE9gC,KAAOqO,EAAOmvG,WAGvD,KAAK,EACH,OAAAvgB,EAAAA,EAAA,GACK56F,GAAA,IACHs7G,SAAUtvG,EAAO7K,OAGrB,KAAK,EACH,IAAMnE,EAAOgP,EAAO7K,MAAQnB,EAAMs7G,UAAY,GAE9C,OAAA1gB,EAAAA,EAAA,GACK56F,GAAA,IACHs7G,cAAU,EACVN,OAAQh7G,EAAMg7G,OAAO1nD,IAAK70B,GAAAm8D,EAAAA,EAAA,GACrBn8D,GAAA,IACH88E,cAAe98E,EAAE88E,cAAgBv+G,SAMrC+V,GAEF,GAEE5M,GAAoC,CACxC60G,OAAQ,GACRM,cAAU,EACVP,SAAU,CACRD,WA3IuB,KA8IvBn8G,GAAqB,CAAC,EAEbyyC,GAAW,SAACpxC,GAAmD,IAAnCgM,EAAA6B,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAYjP,GACnDD,GAAYqN,GAAaquB,GACvB17B,GAAYqN,IAAc7F,GAC1BnG,GAEF+S,GAAUS,QAAQsnF,IAAoB,IAAlB1G,EAAIl5F,GAAQ4/F,EAC1B1G,IAAOpoF,GACT9Q,EAASyD,GAAYqN,KAG3B,EAEa40F,GAAe5gG,GAC1Bf,OAAO/E,KAAKyE,IAAa6U,QAASxH,GAAcolC,GAASpxC,EAAQgM,IAOtDyhC,GACX,eAACztC,EAAA6N,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAYjP,GAAA,OACZoN,IACColC,GAASplC,EAAQhM,GACnB,EAEW+wB,GAET,CACFyqF,MAAO,IACPhjH,MAAO,IACPijH,QAAS,IACTC,QAAS,IACTC,OAAQ,KC5IJ34E,GACHhjC,GACD,CAACgM,EAASooF,KACR,IAAMl5F,EAtBU,SAClB8E,GAAA,IACAgM,EAAA6B,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAkB,QAClBumF,EAAAvmF,UAAAvR,OAAA,EAAAuR,UAAA,QAAAu0C,EAAA,OAAAw4C,EAAAA,EAAA,CAEAghB,UAAW7tG,KAAKsb,MAChBgyF,SAAS,EACTD,WAAW,EACXljH,KAAA8T,EACA6vG,UAAW,CACTC,KAAM,SACN,YAAa,UAEf/uG,QAAA/M,EACAu7G,cAAe,GACZnnB,GAAA,IACHz2F,IAAI,MAAAy2F,OAAA,EAAAA,EAAMz2F,KAAMkxC,MAClB,CAKkBrf,CAAYxjB,EAAShM,EAAMo0F,GAMzC,OAJiB3mD,GACfvyC,EAAM6gH,WDoH4B/7G,IACtCf,OAAO/E,KAAKyE,IAAau8G,KAAMlvG,GAC7BrN,GAAYqN,GAAWgvG,OAAOvb,KAAMrL,GAAMA,EAAEz2F,KAAOqC,ICtH9B4kC,CAAwB1pC,EAAMyC,IADlC8vC,CAIR,CAAEv1C,KAAA,EAA+B+iH,MAAA//G,IACnCA,EAAMyC,IAGXyB,GAAQ67G,CAACj7G,EAAkBgM,IAC/Bg3B,GAAc,QAAdA,CAAuBhjC,EAASgM,GAElC5M,GAAM5G,MAAQwqC,GAAc,SAC5B5jC,GAAMq8G,QAAUz4E,GAAc,WAC9B5jC,GAAMs8G,QAAU14E,GAAc,WAC9B5jC,GAAMu8G,OAAS34E,GAAc,UAO7B5jC,GAAM48G,QAAU,CAACh8G,EAAkBgM,KACjC,IAAMooF,EAAiB,CACrBl8F,KAAA,EACAijH,QAAAn7G,GAGEgM,EACFyhC,GAAezhC,EAAfyhC,CAA0B2mD,GAE1BwM,GAAYxM,IAOhBh1F,GAAM68G,WAAcj8G,GAAuBZ,GAAM48G,aAAQ,EAAWh8G,GAMpEZ,GAAM88G,OAAS,CAACl8G,EAAkBgM,KAChC,IAAMooF,EAAiB,CACrBl8F,KAAA,EACAijH,QAAAn7G,GAEEgM,EACFyhC,GAAezhC,EAAfyhC,CAA0B2mD,GAE1BwM,GAAYxM,IAOhBh1F,GAAM+8G,UAAan8G,GAAuBZ,GAAM88G,YAAO,EAAWl8G,GAKlEZ,GAAMg9G,QAAU,CACdp8G,EACAgM,EAKAooF,KAEA,IAAMl5F,EAAKkE,GAAMs8G,QAAQ1vG,EAAK0vG,QAAA9gB,EAAAA,EAAA,GAAcxG,GAAS,MAAAA,OAAA,EAAAA,EAAMsnB,UAE3D,MAAuB,mBAAZ17G,IACTA,EAAUA,KAGZA,EACGm5B,KAAMv5B,IACL,IAAM5C,EAAiBgP,EAAKyvG,QACxBx7G,GAAa+L,EAAKyvG,QAAS77G,QAC3B,EAEJ,OAAI5C,EACFoC,GAAMq8G,QAAQz+G,EAAA49F,EAAAA,EAAA,CACZj9F,GAAAzC,GACGk5F,GACA,MAAAA,OAAA,EAAAA,EAAMqnB,UAGXr8G,GAAM48G,QAAQ9gH,GAET0E,IAERw5B,MAAOx5B,IACN,IAAM5C,EAAegP,EAAKxT,MAAQyH,GAAa+L,EAAKxT,MAAOoH,QAAK,EAE5D5C,EACFoC,GAAM5G,MAAMwE,EAAA49F,EAAAA,EAAA,CACVj9F,GAAAzC,GACGk5F,GACA,MAAAA,OAAA,EAAAA,EAAM57F,QAGX4G,GAAM48G,QAAQ9gH,KAIb8E,GCtJF,IAEMk3B,GAAa,SACxBl3B,GAEG,IADHgM,EAAA6B,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAoB,WAEZmtG,OAAA5mB,EAAQknB,SAAApgH,GF6KM,WAGL,IAFjB8E,EAAA6N,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAoC,CAAC,EACrC7B,EAAA6B,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAoBjP,IAEbw1F,EAAOl5F,IAAY81B,EAAAA,EAAAA,UACxBryB,GAAYqN,IAAc7F,IAEtBvG,GAAU6wB,EAAAA,EAAAA,QAAO9xB,GAAYqN,KAGnCojB,EAAAA,EAAAA,WAAU,KACJxvB,EAAQW,UAAY5B,GAAYqN,IAClC9Q,EAASyD,GAAYqN,IAEvB+G,GAAUtM,KAAK,CAACuF,EAAW9Q,IACpB,KACL,IAAMujC,EAAQ1rB,GAAUw0F,UAAU/G,IAAA,IAAEzhG,GAAEyhG,EAAA,OAAMzhG,IAAOiN,IAC/CyyB,GAAS,GACX1rB,GAAUujC,OAAO7X,EAAO,KAG3B,CAACzyB,IAEJ,IAAMhP,EAAeo3F,EAAM4mB,OAAO1nD,IAAK70B,IA/MzC,IAAA1/B,EAAAc,EAAA6F,EA+MgD,OAAAk1F,EAAAA,EAAAA,EAAAA,EAAA,GACzC56F,GACAA,EAAay+B,EAAEvmC,OACfumC,GAAA,IACH49E,YACE59E,EAAE49E,cACF,OAAAt9G,EAAAiB,EAAay+B,EAAEvmC,YAAf,EAAA6G,EAAsBs9G,eACtB,MAAAr8G,OAAA,EAAAA,EAAcq8G,aAChBC,SACE79E,EAAE69E,WACF,OAAAz8G,EAAAG,EAAay+B,EAAEvmC,YAAf,EAAA2H,EAAsBy8G,YACtB,MAAAt8G,OAAA,EAAAA,EAAcs8G,WACdvrF,GAAgB0N,EAAEvmC,MACpBslB,MAAAo9E,EAAAA,EAAAA,EAAA,GACK56F,EAAawd,OACb,OAAA9X,EAAA1F,EAAay+B,EAAEvmC,YAAf,EAAAwN,EAAsB8X,OACtBihB,EAAEjhB,WAIT,OAAAo9E,EAAAA,EAAA,GACKxG,GAAA,IACH4mB,OAAQh+G,GAEZ,CE5N+B2xC,CAAS3uC,EAAcgM,GAC9CpM,GAAgB4wB,EAAAA,EAAAA,QACpB,IAAIpL,KACJ7kB,QAEIvD,GAAmByY,EAAAA,EAAAA,aACvB,SAACjc,GAAgD,IAA/BwF,EAAA6O,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAZM,IAatB,GAAIjO,EAAcuP,IAAI3V,GACpB,OAGF,IAAM+F,EAAUo5B,WAAW,KACzB/4B,EAAc6lB,OAAOjsB,GACrBilC,EAAS,CACPvmC,KAAA,EACAijH,QAAS3hH,KAEVwF,GAEHY,EAAcsW,IAAI1c,EAAS+F,EAC7B,EACA,KAGFmwC,EAAAA,EAAAA,WAAU,KACR,GAAIx0C,EACF,OAGF,IAAM1B,EAAMuU,KAAKsb,MACXrqB,EAAWo1F,EAAO9gC,IAAK/zD,IAC3B,GAAIA,EAAE+8G,WAAa,IACjB,OAGF,IAAM31G,GACHpH,EAAE+8G,UAAY,GAAK/8G,EAAEg8G,eAAiB/hH,EAAM+F,EAAEq8G,WAEjD,KAAIj1G,EAAe,GAMnB,OAAOgyB,WAAW,IAAMv5B,GAAM48G,QAAQz8G,EAAE5B,GAAIqO,GAAYrF,GALlDpH,EAAE87G,SACJj8G,GAAM48G,QAAQz8G,EAAE5B,MAOtB,MAAO,KACLqB,EAASwU,QAASjU,GAAYA,GAAWs5B,aAAat5B,MAEvD,CAAC60F,EAAQl5F,EAAU8Q,IAEtB,IAAMyyB,GAAWhpB,EAAAA,EAAAA,aAAYg4B,GAAezhC,GAAY,CAACA,IAEnDjN,GAAa0W,EAAAA,EAAAA,aAAY,KAC7BgpB,EAAS,CACPvmC,KAAA,EACAiJ,KAAM4M,KAAKsb,SAEZ,CAACoV,IAEE5+B,GAAe4V,EAAAA,EAAAA,aACnB,CAACjc,EAAiBwF,KAChBy/B,EAAS,CACPvmC,KAAA,EACA+iH,MAAO,CAAEt9G,GAAInE,EAASg0B,OAAAxuB,MAG1B,CAACy/B,IAGG/4B,GAAW+P,EAAAA,EAAAA,aAAY,KACvBva,GACFujC,EAAS,CAAEvmC,KAAA,EAA4BiJ,KAAM4M,KAAKsb,SAEnD,CAACnuB,EAAUujC,IAER1+B,GAAkB0V,EAAAA,EAAAA,aACtB,CACEjc,EACAwF,KAMA,IAAQu9G,aAAAh9G,GAAe,EAAOi9G,OAAA71G,EAAS,EAAG81G,gBAAAxxG,GAAoBjM,GAAQ,CAAC,EAEjE2jC,EAAiByxD,EAAO3tC,OAC3BxvB,IACEA,EAAEylF,UAAYzxG,MACZzR,EAAMkjH,UAAYzxG,IAAoBgsB,EAAEzJ,QAEzChnB,EAAam8B,EAAe4kE,UAAWtwE,GAAMA,EAAEt5B,KAAOnE,EAAMmE,IAC5DukB,EAAeygB,EAAe8jB,OAClC,CAACxvB,EAAOwF,IAAMA,EAAIj2B,GAAcywB,EAAMokF,SACtC/+G,OAOF,OALeqmC,EACZ8jB,OAAQxvB,GAAMA,EAAEokF,SAChB1yG,SAAUpJ,EAAe,CAAC2iB,EAAe,GAAK,CAAC,EAAGA,IAClD+wC,OAAO,CAACh8B,EAAKwF,IAAMxF,GAAOwF,EAAEjP,QAAU,GAAK7mB,EAAQ,IAIxD,CAACytF,IAIH,OAAA1kD,EAAAA,EAAAA,WAAU,KACR0kD,EAAO5gF,QAASha,IACd,GAAIA,EAAM4hH,UACRp+G,EAAiBxD,EAAMmE,GAAInE,EAAM6iH,iBAC5B,CAEL,IAAMr9G,EAAUY,EAAcwP,IAAI5V,EAAMmE,IACpCqB,IACF65B,aAAa75B,GACbY,EAAc6lB,OAAOjsB,EAAMmE,IAAE,KAIlC,CAACy2F,EAAQp3F,IAEL,CACLg+G,OAAA5mB,EACA9Y,SAAU,CACRqhC,aAAA98G,EACA+8G,WAAA79G,EACA89G,SAAAn3G,EACAo3G,gBAAA/8G,GAGN,EC9IMovB,GAAkBsT,GAAAs6E,KAAAA,GAAA3C,GAAA,qIAUlB7pF,GAAqBkS,GAAAu6E,KAAAA,GAAA5C,GAAA,0GAUrB3qF,GAAsBgT,GAAAw6E,KAAAA,GAAA7C,GAAA,sIAef71F,GAAYqM,GAAO,MAAPA,CAAYssF,KAAAA,GAAA9C,GAAA,8pBAKpBp6G,GAAMA,EAAEm9G,SAAW,UAIrBhuF,GAOEoB,GAKEvwB,GAAMA,EAAEo9G,WAAa,OAQvB3tF,IChEXoF,GAASxF,GAAAguF,KAAAA,GAAAjD,GAAA,oGAcFjjF,GAAalG,GAAO,MAAPA,CAAYqsF,KAAAA,GAAAlD,GAAA,2MAMnBp6G,GAAMA,EAAEo9G,WAAa,UACfp9G,GAAMA,EAAEm9G,SAAW,UAC7BtoF,ICtBTvF,GAAkB3vB,GAAA49G,KAAAA,GAAAnD,GAAA,sIAUlB7qF,GAAqB5vB,GAAA69G,KAAAA,GAAApD,GAAA,4JAqBd30G,GAAgB4rB,GAAO,MAAPA,CAAYosF,KAAAA,GAAArD,GAAA,mlBAKxBp6G,GAAMA,EAAEm9G,SAAW,UAIrB7tF,GAMEC,GAMIvvB,GAAMA,EAAEo9G,WAAa,QC9CpCpuF,GAAgBwf,GAAO,MAAPA,CAAYkvE,KAAAA,GAAAtD,GAAA,iCAI5BxlF,GAAmB4Z,GAAO,MAAPA,CAAYmvE,KAAAA,GAAAvD,GAAA,gJAS/B5oF,GAAQJ,GAAAwsF,KAAAA,GAAAxD,GAAA,8GAUD3lF,GAAsB+Z,GAAO,MAAPA,CAAYqvE,KAAAA,GAAAzD,GAAA,mLAKhC5oF,IAUFssF,GAERC,IAAe,IAAZ9C,MAAAj7G,GAAM+9G,GACJC,KAAAhyG,EAAM9T,KAAAk8F,EAAM6pB,UAAA/iH,GAAc8E,EAClC,YAAa,IAATgM,EACkB,iBAATA,EACFlM,EAAAA,cAAC20B,GAAA,KAAqBzoB,GAEtBA,EAIE,UAATooF,EACK,KAIPt0F,EAAAA,cAAC80B,GAAA,KACC90B,EAAAA,cAACq3B,GAAAyjE,EAAA,GAAe1/F,IACN,YAATk5F,GACCt0F,EAAAA,cAACkvB,GAAA,KACW,UAATolE,EACCt0F,EAAAA,cAACykB,GAAAq2E,EAAA,GAAc1/F,IAEf4E,EAAAA,cAAC2F,GAAAm1F,EAAA,GAAkB1/F,OC/DzBy5B,GAAkB30B,GAAA,kCAAAoK,QACiB,IAAVpK,EAAS,6FAIlC8xB,GAAiB9xB,GAAA,gGAAAoK,QAEoB,IAAVpK,EAAS,oCAMpC+yB,GAAeiE,GAAO,MAAPA,CAAYknF,KAAAA,GAAA9D,GAAA,oTAc3BnoF,GAAU+E,GAAO,MAAPA,CAAYmnF,KAAAA,GAAA/D,GAAA,6IAqCf13E,GAA0Ch4B,EAAAA,KACrD0zG,IAA0C,IAAvCnD,MAAAj7G,EAAO08G,SAAA1wG,EAAUwR,MAAA42E,EAAOh7E,SAAAle,GAASkjH,EAC5Bx+G,EAAsCI,EAAMwtB,OApB5B6wF,EACxBr+G,EACAgM,KAGA,IAAM9Q,EADM8E,EAASsW,SAAS,OACT,GAAK,GAEnB1W,EAAO5C,GAAQk9B,KAClB,CA5CkB,kCACC,mCA4CnB,CAACvF,GAAez5B,GAAS42B,GAAc52B,IAE3C,MAAO,CACLs6B,UAAWxpB,EAAA,GAAA5B,OACJ+vB,GAAUv6B,GAAK,mDAAAwK,OACf+vB,GAAUn9B,GAAI,gDAOjB+6B,CACE/3B,EAAM08G,UAAY1wG,GAAY,aAC9BhM,EAAMq7G,SAER,CAAE/+F,QAAS,GAETtf,EAAO0N,EAAAA,cAACozG,GAAA,CAAU7C,MAAOj7G,IACzBy+B,EACJ/zB,EAAAA,cAACunB,GAAA2oE,EAAA,GAAY56F,EAAM67G,WAChB57G,GAAaD,EAAM+M,QAAS/M,IAIjC,OACE0K,EAAAA,cAACqoB,GAAA,CACC2kF,UAAW13G,EAAM03G,UACjBl6F,MAAAo9E,EAAAA,EAAAA,EAAA,GACKh7F,GACAw0F,GACAp0F,EAAMwd,QAGU,mBAAbtiB,EACNA,EAAS,CACP8iH,KAAAhhH,EACA+P,QAAA0xB,IAGF/zB,EAAAA,cAAAA,EAAAA,SAAA,KACG1N,EACAyhC,OVxGk3D,SAAWz+B,EAAEgM,EAAEyyB,EAAE1/B,GAAGq1F,GAAE70F,EAAEyM,EAAEjM,GAAEC,EAAErB,GAAE8/B,EAAE5+B,GAAEd,CAAC,CWYp6Dg2B,CAAYzwB,EAAAA,eAEZ,IAAM6sB,GAAemtF,IAMI,IALvB3gH,GAAAqC,EACA03G,UAAA1rG,EACAwR,MAAA42E,EACAmqB,eAAArjH,EACAke,SAAAxZ,GACF0+G,EACQthH,EAAYsH,EAAAA,YACfm6B,IACC,GAAIA,EAAI,CACN,IAAM1/B,EAAe49G,KACnB,IAAM98G,EAAS4+B,EAAG+/E,wBAAwBhxF,OAC1CtyB,EAAe8E,EAAIH,IAErBd,IACA,IAAIwsD,iBAAiBxsD,GAAc2sD,QAAQjtB,EAAI,CAC7CggF,SAAS,EACTC,WAAW,EACXC,eAAe,GAChB,GAGL,CAAC3+G,EAAI9E,IAGP,OACEoJ,EAAAA,cAAC,OAAI9E,IAAKxC,EAAK06G,UAAW1rG,EAAWwR,MAAO42E,GACzCx0F,IAkCD+xB,GAAcitF,GAAAC,KAAAA,GAAAzE,GAAA,qEASProF,GAAkC+sF,IASzC,IARJvC,aAAAv8G,EACA08G,SAAA1wG,EAAW,aACX+yG,aAAA3qB,EACAooB,OAAAthH,EACAke,SAAAxZ,EACAm8G,UAAA/+G,EACAgiH,eAAAvgF,EACAwgF,mBAAAlgH,GACF+/G,GACU9D,OAAAn7G,EAAQy7E,SAAA51E,GAAawxB,GAAWk9D,EAAcp3F,GAEtD,OACEsH,EAAAA,cAAC,OACC,mBAAkBtH,GAAa,GAC/BwgB,MAAAo9E,EAAA,CACE8hB,SAAU,QACV//F,OAAQ,KACR2X,IApBe,GAqBfF,KArBe,GAsBf0nB,MAtBe,GAuBfojE,OAvBe,GAwBfC,cAAe,QACZ1gF,GAELi5E,UAAW34G,EACXw3G,aAAc7wG,EAASk3G,WACvBpG,aAAc9wG,EAASm3G,UAEtBh9G,EAAOyzD,IAAKvzD,IACX,IAAMvG,EAAgBuG,EAAE28G,UAAY1wG,EAM9BzM,EA1EW6/G,EACvBp/G,EACAgM,KAEA,IAAMooF,EAAMp0F,EAASsW,SAAS,OACxBpb,EAAqCk5F,EAAM,CAAE9/D,IAAK,GAAM,CAAE4qF,OAAQ,GAClEt/G,EAAuCI,EAASsW,SAAS,UAC3D,CACE+oG,eAAgB,UAElBr/G,EAASsW,SAAS,SAClB,CACE+oG,eAAgB,YAElB,CAAC,EACL,OAAAzkB,EAAAA,EAAA,CACExmE,KAAM,EACN0nB,MAAO,EACPtL,QAAS,OACTksE,SAAU,WACVx1F,WAAYgT,UACR,EACA,yCACJolF,UAAA,cAAAl1G,OAAyB4B,GAAUooF,EAAM,GAAK,GAAD,QAC1Cl5F,GACA0E,IAiDuB8yB,CAAiBl5B,EALxBkM,EAASo3G,gBAAgB/8G,EAAG,CACzCw8G,aAAAv8G,EACAw8G,OAAAthH,EACAuhH,gBAAiBzwG,KAInB,OACE1H,EAAAA,cAAC6sB,GAAA,CACCxzB,GAAIoC,EAAEpC,GACN7E,IAAKiH,EAAEpC,GACP4gH,eAAgB74G,EAASi3G,aACzBjF,UAAW33G,EAAEs7G,QAAU1pF,GAAc,GACrCnU,MAAOje,GAEK,WAAXQ,EAAE7H,KACD+H,GAAaF,EAAEgN,QAAShN,GACtBH,EACFA,EAASG,GAETuE,EAAAA,cAACo+B,GAAA,CAASu4E,MAAOl7G,EAAG28G,SAAUljH,SC3HrC+lH,GAAQngH,GCZAogH,GAAA,CACbC,MAAO,6BACPlyF,MAAO,GACPC,OAAQ,GACRkyF,QAAS,YACTC,KAAM,OACNC,OAAQ,eACRxiG,YAAa,EACbyiG,cAAe,QACfC,eAAgB,S,yEC4ClB,IAAAC,GA7ByBC,CAACC,EAAkBC,KAC1C,MAAM9qD,GAAYgB,EAAAA,EAAAA,YAChB,CAAA0kC,EAAiGt7F,KAC/F,IADD,MAAEkwB,EAAQ,oBAAgBpkB,EAAO,eAAI8R,EAAc,sBAAG+iG,EAAqB/mG,SAAAA,GAAkB0hF,EAAL6D,EAAK2Q,EAAAxU,EAAAsX,IAAA,OAC5F1/F,EAAAA,EAAAA,eACE,MAAAkoF,EAAAA,EAAA,CAEEp7F,OACGggH,IAAA,IACHjyF,MAAOjiB,EACPkiB,OAAQliB,EACRs0G,OAAQlwF,EACRtS,YAAa+iG,EAA4C,GAAtB3mB,OAAOp8E,GAAoBo8E,OAAOluF,GAAQ8R,EAC7Es6F,UAAA,iBAAAttG,QAdkBg2G,EAcsBH,EAdHG,EAAO/rG,QAAQ,qBAAsB,SAASZ,iBAehFkrF,GAEL,IACKuhB,EAAS5sD,IAAIktC,IAAA,IAAE72F,EAAKw+C,GAAWq4C,EAAA,OAAA9tF,EAAAA,EAAAA,eAAc/I,EAAKw+C,SAElD1mD,MAAMiG,QAAQ0R,GAAYA,EAAW,CAACA,KAAc,KApBrCgnG,QA4BnB,OAFPhrD,EAAU/+C,YAAA,GAAAjM,OAAiB61G,GAEpB7qD,GCrCH,MAAAirD,GAASL,GAAiB,SAAU,CACxC,CAAC,OAAQ,CAAEjgH,EAAG,8CAA+CjH,IAAK,aCD9DwnH,GAAQN,GAAiB,QAAS,CACtC,CACE,OACA,CAAEjgH,EAAG,mDAAoDjH,IAAK,WAEhE,CACE,OACA,CAAEiH,EAAG,kDAAmDjH,IAAK,WAE/D,CAAC,OAAQ,CAAEiH,EAAG,WAAYjH,IAAK,WAC/B,CAAC,OAAQ,CAAEiH,EAAG,WAAYjH,IAAK,WAC/B,CAAC,OAAQ,CAAEiH,EAAG,mCAAoCjH,IAAK,aCXnDynH,GAASP,GAAiB,SAAU,CACxC,CAAC,OAAQ,CAAEjgH,EAAG,gCAAiCjH,IAAK,WACpD,CAAC,OAAQ,CAAEiH,EAAG,8BAA+BjH,IAAK,WAClD,CAAC,OAAQ,CAAEiH,EAAG,6BAA8BjH,IAAK,aCH7C0nH,GAAOR,GAAiB,OAAQ,CACpC,CAAC,OAAQ,CAAEjgH,EAAG,4CAA6CjH,IAAK,WAChE,CAAC,SAAU,CAAE2nH,GAAI,KAAMC,GAAI,IAAKjiF,EAAG,IAAK3lC,IAAK,aCFzC6nH,GAASX,GAAiB,SAAU,CACxC,CAAC,OAAQ,CAAEjgH,EAAG,0CAA2CjH,IAAK,WAC9D,CAAC,WAAY,CAAE8nH,OAAQ,mBAAoB9nH,IAAK,WAChD,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,IAAKC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,aCHnDmoH,GAAMjB,GAAiB,MAAO,CAClC,CAAC,SAAU,CAAES,GAAI,MAAOC,GAAI,OAAQjiF,EAAG,MAAO3lC,IAAK,WACnD,CAAC,OAAQ,CAAEiH,EAAG,gBAAiBjH,IAAK,WACpC,CAAC,OAAQ,CAAEiH,EAAG,0BAA2BjH,IAAK,aCH1CooH,GAAclB,GAAiB,cAAe,CAClD,CAAC,SAAU,CAAES,GAAI,KAAMC,GAAI,KAAMjiF,EAAG,KAAM3lC,IAAK,WAC/C,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,KAAMC,GAAI,IAAKC,GAAI,KAAMloH,IAAK,WACvD,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,QAASC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,aChB7D,SAASqoH,GAA2BnhH,EAAGgM,GACrC,GAAIA,EAAEmD,IAAInP,GAAI,MAAM,IAAI08E,UAAU,iEACpC,CCDA,SAAS0kC,GAA2BphH,EAAGgM,EAAGpM,GACxC,GAA0BI,EAAGgM,GAAIA,EAAEkK,IAAIlW,EAAGJ,EAC5C,CCHA,SAASyhH,GAAkBrhH,EAAGgM,EAAG5M,GAC/B,GAAI,mBAAqBY,EAAIA,IAAMgM,EAAIhM,EAAEmP,IAAInD,GAAI,OAAO6B,UAAUvR,OAAS,EAAI0P,EAAI5M,EACnF,MAAM,IAAIs9E,UAAU,gDACtB,CCFA,SAAS,GAAuBxhF,EAAG0E,GACjC,OAAO1E,EAAEkU,IAAI,GAAiBlU,EAAG0E,GACnC,CCFA,SAAS0hH,GAAuBpmH,EAAG0E,EAAG6+B,GACpC,OAAOvjC,EAAEgb,IAAI,GAAiBhb,EAAG0E,GAAI6+B,GAAIA,CAC3C,CCGA,SAAS8iF,GAAU1pG,EAAY3f,EAAc0F,GACzC,MAAM4jH,EAAQtpH,EAAKqb,MAAM,KAAK+/C,IAAItnD,GAAKA,EAAE6J,QACzC,IAAK,IAAI7Y,EAAI,EAAGA,EAAIwkH,EAAMllH,OAAQU,IAC9B,OAAQ9E,GACJ,IAAK,MACD,OACJ,IAAK,SACL,IAAK,UACL,IAAK,SACL,IAAK,SACD,UAAW2f,IAAW3f,EAAQ,OAI1C,MAAMM,EAAa,IAAIL,MAAM,0BAADiS,OAA4BlS,IAKxD,MAJAM,EAAMy0B,KAAO,mBACbz0B,EAAMipH,SAAW,SAAHr3G,OAAaxM,GAC3BpF,EAAMqf,MAAQA,EAERrf,CACV,CAMO8rG,eAAeod,GAAqB7pG,GACvC,MAAM3d,EAAO+E,OAAO/E,KAAK2d,GACnBu7C,QAAgBr6B,QAAQ+2E,IAAI51G,EAAKo5D,IAAK10D,GAAMm6B,QAAQG,QAAQrhB,EAAejZ,MACjF,OAAOw0D,EAAQH,OAAO,CAAC0uD,EAAY5uG,EAAGnG,KAClC+0G,EAAMznH,EAAK0S,IAAUmG,EACd4uG,GACmB,CAAC,EACnC,CAOM,SAAU7nB,GACf56E,EACAmnC,EACAm7D,GAEG,IAAK,IAAI1oH,KAAOutD,EAAQ,CACpB,IAAIxuC,EAAQwuC,EAAOvtD,GAEnB,MAAMZ,EAAQspH,EAAQA,EAAM1oH,GAAM,KAC9BZ,GAAQqpH,GAAU1pG,EAAO3f,EAAMY,GAEnCmG,OAAOgX,eAAeiJ,EAAQpmB,EAAK,CAAEwe,YAAY,EAAMO,QAAO6hF,UAAU,G,CAEhF,CChCA,SAASjjD,GAAU5+B,EAAY+pG,GAC3B,GAAa,MAAT/pG,EAAiB,MAAO,OAG5B,GADY,MAAR+pG,IAAgBA,EAAO,IAAIzvG,KACT,kBAAX0F,EAAqB,CAC5B,GAAI+pG,EAAKzyG,IAAI0I,GAAU,MAAO,aAC9B+pG,EAAKrvG,IAAIsF,E,CAGb,GAAIpW,MAAMiG,QAAQmQ,GACd,MAAO,KAAQA,EAAMy7C,IAAKvgD,GAAM0jC,GAAU1jC,EAAG6uG,IAAQ9vG,KAAK,MAAQ,KAGtE,GAAI+F,aAAiBszC,WAAY,CAC7B,MAAM02D,EAAM,mBACZ,IAAI3/D,EAAS,KACb,IAAK,IAAIllD,EAAI,EAAGA,EAAI6a,EAAMvb,OAAQU,IAC9BklD,GAAU2/D,EAAIhqG,EAAM7a,IAAM,GAC1BklD,GAAU2/D,EAAe,GAAXhqG,EAAM7a,IAExB,OAAOklD,C,CAGX,GAAsB,kBAAXrqC,GAAgD,oBAAlBA,EAAMiqG,OAC3C,OAAOrrE,GAAU5+B,EAAMiqG,SAAUF,GAGrC,cAAe/pG,GACX,IAAK,UAAW,IAAK,SAAU,IAAK,SAChC,OAAOA,EAAM1T,WACjB,IAAK,SACD,OAAO49G,OAAOlqG,GAAO1T,WACzB,IAAK,SACD,OAAOqyC,KAAKC,UAAU5+B,GAC1B,IAAK,SAAU,CACX,MAAM3d,EAAO+E,OAAO/E,KAAK2d,GAEzB,OADA3d,EAAK+iG,OACE,KAAO/iG,EAAKo5D,IAAK10D,GAAC,GAAAwL,OAASqsC,GAAU73C,EAAGgjH,GAAM,MAAAx3G,OAAMqsC,GAAU5+B,EAAMjZ,GAAIgjH,KAAU9vG,KAAK,MAAQ,I,EAI9G,MAAO,yBACX,CAyjBM,SAAUkwG,GAA4DxpH,EAAYy0B,GACpF,OAAQz0B,GAAuBA,EAAOy0B,OAASA,CACnD,CAKM,SAAUg1F,GAAgBzpH,GAC5B,OAAOwpH,GAAQxpH,EAAO,iBAC1B,CAYM,SAAU0pH,GAA8Dn1G,EAAiBkgB,EAAS1e,GACpG,IA2BI/V,EA3BA2pH,EAAep1G,EAEnB,CACI,MAAMq1G,EAAyB,GAC/B,GAAI7zG,EAAM,CACN,GAAI,YAAaA,GAAQ,SAAUA,GAAQ,SAAUA,EACjD,MAAM,IAAIpW,MAAM,0CAADiS,OAA4CqsC,GAAUloC,KAEzE,IAAK,MAAMzV,KAAOyV,EAAM,CACpB,GAAY,iBAARzV,EAA0B,SAC9B,MAAM+e,EAActJ,EAAyBzV,GAEzCspH,EAAQ37G,KAAK3N,EAAM,IAAM29C,GAAU5+B,G,EAO/CuqG,EAAQ37G,KAAK,QAAD2D,OAAU6iB,IACtBm1F,EAAQ37G,KAAK,WAAD2D,OCnqBW,WDqqBnBg4G,EAAQ9lH,SACRyQ,GAAW,KAAOq1G,EAAQtwG,KAAK,MAAQ,I,CAK/C,OAAQmb,GACJ,IAAK,mBACDz0B,EAAQ,IAAIkkF,UAAU3vE,GACtB,MACJ,IAAK,gBACL,IAAK,iBACDvU,EAAQ,IAAI6pH,WAAWt1G,GACvB,MACJ,QACIvU,EAAQ,IAAIL,MAAM4U,GAW1B,OARA+sF,GAA2CthG,EAAO,CAAEy0B,SAEhD1e,GAAQtP,OAAOyW,OAAOld,EAAO+V,GAEA,MAAvB/V,EAAO2pH,cACbroB,GAA2CthG,EAAO,CAAE2pH,iBAG9C3pH,CACd,CAQM,SAAU8pH,GAA2DC,EAAgBx1G,EAAiBkgB,EAAS1e,GACjH,IAAKg0G,EAAS,MAAML,GAAUn1G,EAASkgB,EAAM1e,EACjD,CAUM,SAAUi0G,GAAeD,EAAgBx1G,EAAiBnP,EAAcia,GAC1EyqG,GAAOC,EAAOx1G,EAAS,mBAAoB,CAAE00G,SAAU7jH,EAAMia,MAAOA,GACxE,CAEM,SAAU4qG,GAAoB//G,EAAeggH,EAAuB31G,GACvD,MAAXA,IAAmBA,EAAU,IAC7BA,IAAWA,EAAU,KAAOA,GAEhCu1G,GAAO5/G,GAASggH,EAAe,mBAAqB31G,EAAS,mBAAoB,CAC7ErK,MAAOA,EACPggH,cAAeA,IAGnBJ,GAAO5/G,GAASggH,EAAe,qBAAuB31G,EAAS,sBAAuB,CAClFrK,MAAOA,EACPggH,cAAeA,GAEvB,CAEA,MAAMC,GAAkB,CAAC,MAAO,MAAO,OAAQ,QAAQ1vD,OAAO,CAAC0uD,EAAOjrE,KAClE,IAGI,GAA+B,SAA3B,OAAOksE,UAAUlsE,GAAoB,MAAM,IAAIv+C,MAAM,OAGzD,GAAa,QAATu+C,EAAgB,CAChB,MAAM6rE,EAAQh+G,OAAOC,aAAa,KAAMo+G,UAAU,OAGlD,GAAIL,IAFah+G,OAAOC,aAAa,IAAM,KAEjB,MAAM,IAAIrM,MAAM,S,CAI9CwpH,EAAMl7G,KAAKiwC,E,CACb,MAAMl+C,GAAQ,CAEhB,OAAOmpH,GACO,IAiBZ,SAAUkB,GAAcC,EAAiBC,EAAYrL,GAEvD,GADiB,MAAbA,IAAqBA,EAAY,IACjCoL,IAAeC,EAAO,CACtB,IAAIpY,EAAS+M,EAAWsL,EAAY,MAChCtL,IACA/M,GAAU,IACVqY,GAAa,IAAMtL,GAEvB4K,IAAO,EAAO,4BAAFl4G,OAA+BugG,EAAO,iBAAiB,wBAAyB,CACxFqY,a,CAGZ,CE3xBA,SAASC,GAA4BjjH,EAAGJ,GACtC,GAA0BI,EAAGJ,GAAIA,EAAE2S,IAAIvS,EACzC,CCwBA,SAASkjH,GAAUrrG,EAAkBja,EAAemT,GAChD,GAAI8G,aAAiBszC,WACjB,OAAIp6C,EAAe,IAAIo6C,WAAWtzC,GAC3BA,EAGX,GAAsB,kBAAXA,GAAuBA,EAAMhG,MAAM,8BAA+B,CACzE,MAAMqwC,EAAS,IAAIiJ,YAAYtzC,EAAMvb,OAAS,GAAK,GACnD,IAAI+1B,EAAS,EACb,IAAK,IAAIr1B,EAAI,EAAGA,EAAIklD,EAAO5lD,OAAQU,IAC/BklD,EAAOllD,GAAKqqD,SAASxvC,EAAM+F,UAAUyU,EAAQA,EAAS,GAAI,IAC1DA,GAAU,EAEd,OAAO6vB,C,CAGXsgE,IAAe,EAAO,0BAA2B5kH,GAAQ,QAASia,EACtE,CASM,SAAU3e,GAAS2e,EAAkBja,GACvC,OAAOslH,GAAUrrG,EAAOja,GAAM,EAClC,CASM,SAAUulH,GAAatrG,EAAkBja,GAC3C,OAAOslH,GAAUrrG,EAAOja,GAAM,EAClC,CAUM,SAAUwlH,GAAYvrG,EAAYvb,GACpC,QAAsB,kBAAXub,IAAwBA,EAAMhG,MAAM,wBAIxB,kBAAZvV,GAAwBub,EAAMvb,SAAW,EAAI,EAAIA,MAC7C,IAAXA,GAAoBub,EAAMvb,OAAS,IAAO,GAGlD,CAMM,SAAU+mH,GAAYxrG,GACxB,OAAQurG,GAAYvrG,GAAO,IAAUA,aAAiBszC,UAC1D,CAEA,MAAMm4D,GAAwB,mBAKxB,SAAUC,GAAQz+G,GACpB,MAAMf,EAAQ7K,GAAS4L,GAEvB,IAAIo9C,EAAS,KACb,IAAK,IAAIllD,EAAI,EAAGA,EAAI+G,EAAMzH,OAAQU,IAAK,CACnC,MAAM+V,EAAIhP,EAAM/G,GAChBklD,GAAUohE,IAAmB,IAAJvwG,IAAa,GAAKuwG,GAAkB,GAAJvwG,E,CAE7D,OAAOmvC,CACX,CAMM,SAAU93C,GAAOo5G,GACnB,MAAO,KAAOA,EAAMlwD,IAAKvzD,GAAMwjH,GAAQxjH,GAAG6d,UAAU,IAAI9L,KAAK,GACjE,CAKM,SAAU2xG,GAAW3+G,GACvB,OAAIs+G,GAAYt+G,GAAM,IAAiBA,EAAKxI,OAAS,GAAK,EACnDpD,GAAS4L,GAAMxI,MAC1B,CAQM,SAAUonH,GAAU5+G,EAAiB9I,EAAgBm3B,GACvD,MAAMpvB,EAAQ7K,GAAS4L,GAMvB,OALW,MAAPquB,GAAeA,EAAMpvB,EAAMzH,QAC3BgmH,IAAO,EAAO,kCAAmC,iBAAkB,CAC/D9yG,OAAQzL,EAAOzH,OAAQyH,EAAMzH,OAAQ+1B,OAAQc,IAG9CowF,GAAQx/G,EAAM4E,MAAgB,MAAT3M,EAAiB,EAAGA,EAAe,MAAPm3B,EAAepvB,EAAMzH,OAAQ62B,GACzF,CAYA,SAASwwF,GAAQ7+G,EAAiBxI,EAAgB83B,GAC9C,MAAMrwB,EAAQ7K,GAAS4L,GACvBw9G,GAAOhmH,GAAUyH,EAAMzH,OAAQ,8BAA+B,iBAAkB,CAC5EkT,OAAQ,IAAI27C,WAAWpnD,GACvBzH,OAAQA,EACR+1B,OAAQ/1B,EAAS,IAGrB,MAAM4lD,EAAS,IAAIiJ,WAAW7uD,GAQ9B,OAPA4lD,EAAOy9D,KAAK,GACRvrF,EACA8tB,EAAOhsC,IAAInS,EAAOzH,EAASyH,EAAMzH,QAEjC4lD,EAAOhsC,IAAInS,EAAO,GAGfw/G,GAAQrhE,EACnB,CAYM,SAAU0hE,GAAa9+G,EAAiBxI,GAC1C,OAAOqnH,GAAQ7+G,EAAMxI,GAAQ,EACjC,CCnKA,MAAMunH,GAAO9B,OAAO,GACd+B,GAAO/B,OAAO,GAMdgC,GAAW,iBA+BX,SAAUC,GAAOC,EAAsBC,GACzC,IAAIrsG,EAAQssG,GAAUF,EAAQ,SAC9B,MAAM12F,EAAQw0F,OAAOqC,GAAUF,EAAQ,UAEjCG,EAASP,IAASv2F,EAAQu2F,GAEhC,GAAIjsG,EAAQgsG,GAAM,CACdhsG,GAASA,EACTyqG,GAAOzqG,GAASwsG,EAAO,UAAW,gBAAiB,CAC/CrB,UAAW,SAAUsB,MAAO,WAAYzsG,MAAOosG,IAGnD,QAAUpsG,GADIisG,IAAQv2F,GAASu2F,IACJA,E,CAO/B,OALIxB,GAAOzqG,EAAQwsG,EAAO,WAAY,gBAAiB,CAC/CrB,UAAW,SAAUsB,MAAO,WAAYzsG,MAAOosG,IAIhDpsG,CACX,CAKM,SAAU48C,GAAKwvD,EAAsBM,GACvC,MAAM1sG,EAAQ2sG,GAAQP,EAAQ,SACxB7+G,EAAO28G,OAAOqC,GAAUG,EAAO,SACrC,OAAO1sG,GAAUisG,IAAQ1+G,GAAQ0+G,EACrC,CAMM,SAAUK,GAAUtsG,EAAqBja,GAC3C,cAAeia,GACX,IAAK,SAAU,OAAOA,EACtB,IAAK,SAGD,OAFA2qG,GAAehpB,OAAOirB,UAAU5sG,GAAQ,YAAaja,GAAQ,QAASia,GACtE2qG,GAAe3qG,IAAUksG,IAAYlsG,GAASksG,GAAU,WAAYnmH,GAAQ,QAASia,GAC9EkqG,OAAOlqG,GAClB,IAAK,SACD,IACI,GAAc,KAAVA,EAAgB,MAAM,IAAI1f,MAAM,gBACpC,MAAiB,MAAb0f,EAAM,IAA2B,MAAbA,EAAM,IAClBkqG,OAAOlqG,EAAM+F,UAAU,IAE5BmkG,OAAOlqG,E,CAChB,MAAM7X,IACJwiH,IAAe,EAAO,gCAAFp4G,OAAmCpK,GAAE+M,SAAYnP,GAAQ,QAASia,E,EAGlG2qG,IAAe,EAAO,6BAA8B5kH,GAAQ,QAASia,EACzE,CAMM,SAAU2sG,GAAQ3sG,EAAqBja,GACzC,MAAMskD,EAASiiE,GAAUtsG,EAAOja,GAIhC,OAHA0kH,GAAOpgE,GAAU2hE,GAAM,oCAAqC,gBAAiB,CACzES,MAAO,WAAYtB,UAAW,UAAWnrG,UAEtCqqC,CACX,CAEA,MAAMwiE,GAAU,mBAMV,SAAUC,GAAS9sG,GACrB,GAAIA,aAAiBszC,WAAY,CAC7B,IAAIjJ,EAAS,MACb,IAAK,MAAMnvC,KAAK8E,EACZqqC,GAAUwiE,GAAQ3xG,GAAK,GACvBmvC,GAAUwiE,GAAY,GAAJ3xG,GAEtB,OAAOgvG,OAAO7/D,E,CAGlB,OAAOiiE,GAAUtsG,EACrB,CAMM,SAAUusG,GAAUvsG,EAAqBja,GAC3C,cAAeia,GACX,IAAK,SAED,OADA2qG,GAAe3qG,IAAUksG,IAAYlsG,GAASksG,GAAU,WAAYnmH,GAAQ,QAASia,GAC9E2hF,OAAO3hF,GAClB,IAAK,SAGD,OAFA2qG,GAAehpB,OAAOirB,UAAU5sG,GAAQ,YAAaja,GAAQ,QAASia,GACtE2qG,GAAe3qG,IAAUksG,IAAYlsG,GAASksG,GAAU,WAAYnmH,GAAQ,QAASia,GAC9EA,EACX,IAAK,SACD,IACI,GAAc,KAAVA,EAAgB,MAAM,IAAI1f,MAAM,gBACpC,OAAOisH,GAAUrC,OAAOlqG,GAAQja,E,CAClC,MAAMoC,IACJwiH,IAAe,EAAO,2BAAFp4G,OAA8BpK,GAAE+M,SAAYnP,GAAQ,QAASia,E,EAG7F2qG,IAAe,EAAO,wBAAyB5kH,GAAQ,QAASia,EACpE,CAeM,SAAU+sG,GAAQX,EAAsBC,GAG1C,IAAIhiE,EAFUsiE,GAAQP,EAAQ,SAEX9/G,SAAS,IAE5B,GAAc,MAAV+/G,EAEIhiE,EAAO5lD,OAAS,IAAK4lD,EAAS,IAAMA,OACrC,CACH,MAAM30B,EAAQ62F,GAAUF,EAAQ,SAQhC,IAPA5B,GAAe,EAAR/0F,GAAa20B,EAAO5lD,OAAQ,wBAAF8N,OAA2BmjB,EAAM,WAAW,gBAAiB,CAC1Fy1F,UAAW,UACXsB,MAAO,WACPzsG,MAAOosG,IAIJ/hE,EAAO5lD,OAAkB,EAARixB,GAAc20B,EAAS,IAAMA,C,CAIzD,MAAO,KAAOA,CAClB,CAKM,SAAU2iE,GAAUZ,GACtB,MAAMpsG,EAAQ2sG,GAAQP,EAAQ,SAE9B,GAAIpsG,IAAUgsG,GAAQ,OAAO,IAAI14D,WAAW,IAE5C,IAAIx5C,EAAMkG,EAAM1T,SAAS,IACrBwN,EAAIrV,OAAS,IAAKqV,EAAM,IAAMA,GAElC,MAAMuwC,EAAS,IAAIiJ,WAAWx5C,EAAIrV,OAAS,GAC3C,IAAK,IAAIU,EAAI,EAAGA,EAAIklD,EAAO5lD,OAAQU,IAAK,CACpC,MAAMq1B,EAAa,EAAJr1B,EACfklD,EAAOllD,GAAKqqD,SAAS11C,EAAIiM,UAAUyU,EAAQA,EAAS,GAAI,G,CAG5D,OAAO6vB,CACX,CASM,SAAU4iE,GAAWjtG,GACvB,IAAIqqC,EAASqhE,GAAQF,GAAYxrG,GAASA,EAAOgtG,GAAUhtG,IAAQ+F,UAAU,GAC7E,KAAOskC,EAAOq6C,WAAW,MAAQr6C,EAASA,EAAOtkC,UAAU,GAE3D,MADe,KAAXskC,IAAiBA,EAAS,KACvB,KAAOA,CAClB,CClOO,MAAM6iE,GAAmB,GAC1BC,GAAU,IAAI75D,WAAW45D,IAIzBE,GAAiB,CAAE,QAEnBC,GAAS,CAAC,EAEVC,GAA6D,IAAI57E,QAEvE,SAAS67E,GAASljE,GACd,OAAOijE,GAAY/1G,IAAI8yC,EAC3B,CACA,SAASmjE,GAASnjE,EAAgBojE,GAC9BH,GAAYjvG,IAAIgsC,EAAQojE,EAC5B,CAEA,SAASC,GAAW3nH,EAAcpF,GAC9B,MAAMgtH,EAAU,IAAIrtH,MAAM,0DAADiS,OAA4DxM,IAErF,MADM4nH,EAAShtH,MAAQA,EACjBgtH,CACV,CAEA,SAASC,GAASH,EAAqCI,EAAeC,GAClE,OAAIL,EAAM7nG,QAAQ,OAAS,EAChBioG,EAAMpyD,IAAI,CAACsyD,EAAMh5G,IAChBg5G,aAAgBC,GACTJ,GAASL,GAASQ,GAAOA,EAAMD,GAEnCC,GAIQN,EAAOryD,OAAO,CAAC0uD,EAAO/jH,EAAMgP,KAC/C,IAAIg5G,EAAOF,EAAMnuG,SAAS3Z,GAO1B,OANMA,KAAQ+jH,IACNgE,GAAQC,aAAgBC,KACxBD,EAAOH,GAASL,GAASQ,GAAOA,EAAMD,IAE1ChE,EAAM/jH,GAAQgoH,GAEXjE,GACa,CAAC,EAC7B,CAGA,IAAAmE,GAAA,IAAAv8E,QAOM,MAAOs8E,WAAepkH,MAWxB2V,WAAAA,GAA+B,QAAA2uG,EAAAl4G,UAAAvR,OAAhBiR,EAAgB,IAAA9L,MAAAskH,GAAAzjC,EAAA,EAAAA,EAAAyjC,EAAAzjC,IAAhB/0E,EAAgB+0E,GAAAz0E,UAAAy0E,GAQ3B,MAAMygC,EAAQx1G,EAAK,GACnB,IAAIm4G,EAAoBn4G,EAAK,GACzB+3G,GAA+B/3G,EAAK,IAAM,IAAK5E,QAE/Cq9G,GAAO,EACPjD,IAAUmC,KACVQ,EAAQn4G,EACR+3G,EAAQ,GACRU,GAAO,GAKXtf,MAAMgf,EAAMppH,QA5BP8kH,GAAA,KAAA0E,QAAM,GA6BXJ,EAAMlyG,QAAQ,CAACoyG,EAAMh5G,KAAYzE,KAAKyE,GAASg5G,IAG/C,MAAMK,EAAaX,EAAMryD,OAAO,CAAC0uD,EAAO/jH,KACf,kBAAVA,GACP+jH,EAAMzrG,IAAItY,GAAO+jH,EAAMvyG,IAAIxR,IAAS,GAAK,GAEtC+jH,GACc,IAAIv8F,KAe7B,GAZAigG,GAASl9G,KAAMlJ,OAAOo7G,OAAOqL,EAAMpyD,IAAI,CAACsyD,EAAMh5G,KAC1C,MAAMhP,EAAO0nH,EAAM14G,GACnB,OAAY,MAARhP,GAAyC,IAAzBqoH,EAAW72G,IAAIxR,GACxBA,EAEJ,SAIXsoH,GAAKJ,GAAL39G,KAAc,IACK,MAAfg+G,GAAKL,GAAL39G,OAA4Bg+G,GAAKL,GAAL39G,OAE3B69G,EAAQ,OAGb/mH,OAAOo7G,OAAOlyG,MAGd,MAAMi+G,EAAQ,IAAIC,MAAMl+G,KAAM,CAC1BiH,IAAKA,CAAC8P,EAAQkxC,EAAMk2D,KAChB,GAAqB,kBAAVl2D,EAAoB,CAG3B,GAAIA,EAAKv+C,MAAM,YAAa,CACxB,MAAMjF,EAAQw3G,GAAUh0D,EAAM,UAC9B,GAAIxjD,EAAQ,GAAKA,GAASzE,KAAK7L,OAC3B,MAAM,IAAI+lH,WAAW,uBAGzB,MAAMuD,EAAO1mG,EAAOtS,GAIpB,OAHIg5G,aAAgBztH,OAChBotH,GAAW,SAADn7G,OAAWwC,GAAUg5G,GAE5BA,C,CAIX,GAAIX,GAAexnG,QAAQ2yC,IAAS,EAChC,OAAOj6C,QAAQ/G,IAAI8P,EAAQkxC,EAAMk2D,GAGrC,MAAMzuG,EAAQqH,EAAOkxC,GACrB,GAAIv4C,aAAiBohF,SAGjB,OAAO,WAAuC,QAAAstB,EAAA14G,UAAAvR,OAAhBiR,EAAgB,IAAA9L,MAAA8kH,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAhBj5G,EAAgBi5G,GAAA34G,UAAA24G,GAC1C,OAAO3uG,EAAMnK,MAAOvF,OAASm+G,EAAYpnG,EAAQ/W,KAAMoF,EAC3D,EAEG,KAAM6iD,KAAQlxC,GAEjB,OAAOA,EAAO3H,SAAS7J,MAAOvF,OAASm+G,EAAYpnG,EAAQ/W,KAAM,CAAEioD,G,CAI3E,OAAOj6C,QAAQ/G,IAAI8P,EAAQkxC,EAAMk2D,MAIzC,OADAjB,GAASe,EAAOhB,GAASj9G,OAClBi+G,CACX,CASAlxD,OAAAA,CAAQywD,GACJ,MAAMzjE,EAAqB,GAQ3B,OAPA/5C,KAAKqL,QAAQ,CAACoyG,EAAMh5G,KACZg5G,aAAgBztH,OAASotH,GAAW,SAADn7G,OAAWwC,GAAUg5G,GACxDD,GAAQC,aAAgBC,KACxBD,EAAOA,EAAK1wD,QAAQywD,IAExBzjE,EAAOz7C,KAAKm/G,KAET1jE,CACX,CAUAujE,QAAAA,CAASE,GACL,MAAML,EAAQF,GAASj9G,MACvB,OAAOm9G,EAAMryD,OAAO,CAAC0uD,EAAO/jH,EAAMgP,KAE9B01G,GAAe,MAAR1kH,EAAc,kBAAFwM,OAAqBwC,EAAM,YAAY,wBAAyB,CAC/Eo2G,UAAW,eAGRyC,GAASH,EAAOn9G,KAAMw9G,IACT,CAAC,EAC7B,CAKAh9G,KAAAA,CAAM3M,EAA4Bm3B,GACjB,MAATn3B,IAAiBA,EAAQ,GACzBA,EAAQ,IACRA,GAASmM,KAAK7L,QACF,IAAKN,EAAQ,GAGlB,MAAPm3B,IAAeA,EAAMhrB,KAAK7L,QAC1B62B,EAAM,IACNA,GAAOhrB,KAAK7L,QACF,IAAK62B,EAAM,GAErBA,EAAMhrB,KAAK7L,SAAU62B,EAAMhrB,KAAK7L,QAEpC,MAAMmqH,EAASrB,GAASj9G,MAElB+5C,EAAqB,GAAKojE,EAA8B,GAC9D,IAAK,IAAItoH,EAAIhB,EAAOgB,EAAIm2B,EAAKn2B,IACzBklD,EAAOz7C,KAAK0B,KAAKnL,IACjBsoH,EAAM7+G,KAAKggH,EAAOzpH,IAGtB,OAAO,IAAI6oH,GAAOX,GAAQhjE,EAAQojE,EACtC,CAKA7+D,MAAAA,CAAOhjD,EAA8DijH,GACjE,MAAMD,EAASrB,GAASj9G,MAElB+5C,EAAqB,GAAKojE,EAA8B,GAC9D,IAAK,IAAItoH,EAAI,EAAGA,EAAImL,KAAK7L,OAAQU,IAAK,CAClC,MAAM4oH,EAAOz9G,KAAKnL,GACd4oH,aAAgBztH,OAChBotH,GAAW,SAADn7G,OAAWpN,GAAM4oH,GAG3BniH,EAASvD,KAAKwmH,EAASd,EAAM5oH,EAAGmL,QAChC+5C,EAAOz7C,KAAKm/G,GACZN,EAAM7+G,KAAKggH,EAAOzpH,I,CAI1B,OAAO,IAAI6oH,GAAOX,GAAQhjE,EAAQojE,EACtC,CAKAhyD,GAAAA,CAAyB7vD,EAAwDijH,GAC7E,MAAMxkE,EAAmB,GACzB,IAAK,IAAIllD,EAAI,EAAGA,EAAImL,KAAK7L,OAAQU,IAAK,CAClC,MAAM4oH,EAAOz9G,KAAKnL,GACd4oH,aAAgBztH,OAChBotH,GAAW,SAADn7G,OAAWpN,GAAM4oH,GAG/B1jE,EAAOz7C,KAAKhD,EAASvD,KAAKwmH,EAASd,EAAM5oH,EAAGmL,M,CAGhD,OAAO+5C,CACX,CAWA3qC,QAAAA,CAAS3Z,GACL,MAAMgP,EAAQw4G,GAASj9G,MAAMsV,QAAQ7f,GACrC,IAAe,IAAXgP,EAAgB,OAEpB,MAAMiL,EAAQ1P,KAAKyE,GAMnB,OAJIiL,aAAiB1f,OACjBotH,GAAW,YAADn7G,OAAcosC,KAAKC,UAAU74C,IAAgBia,EAAOrf,OAG3Dqf,CACX,CAMA,gBAAO8uG,CAAUjB,EAAmBxrH,GAChC,OAAO,IAAI2rH,GAAOX,GAAQQ,EAAOxrH,EACrC,EAuCJ,SAASqd,GAASM,GACd,IAAI9T,EAAQ8gH,GAAUhtG,GAStB,OAPAyqG,GAAQv+G,EAAMzH,QAAUyoH,GAAU,sBAC9B,iBAAkB,CAAEv1G,OAAQzL,EAAOzH,OAAQyoH,GAAU1yF,OAAQtuB,EAAMzH,SAEnEyH,EAAMzH,SAAWyoH,KACjBhhH,EAAQo/G,GAAa/4G,GAAO,CAAE46G,GAAQr8G,MAAM5E,EAAMzH,OAASyoH,IAAWhhH,MAGnEA,CACX,CAKM,MAAgB6iH,GAmBlBxvG,WAAAA,CAAYxZ,EAAc1F,EAAc2uH,EAAmBC,GAhB3DrtB,EAAA,oBAIAA,EAAA,oBAIAA,EAAA,yBAKAA,EAAA,uBAIIK,GAAwB3xF,KAAM,CAAEvK,OAAM1F,OAAM2uH,YAAWC,WAAW,CAC9DlpH,KAAM,SAAU1F,KAAM,SAAU2uH,UAAW,SAAUC,QAAS,WAEtE,CAEAC,WAAAA,CAAYh6G,EAAiB8K,GACzB2qG,IAAe,EAAOz1G,EAAS5E,KAAK0+G,UAAWhvG,EACnD,EAQJ,IAAAmvG,GAAA,IAAAz9E,QAAA09E,GAAA,IAAA19E,QAAA29E,GAAA,IAAAx4E,QAGM,MAAOy4E,GAKT/vG,WAAAA,GAAA6rG,GAAA,KAAAiE,IAHA9F,GAAA,KAAA4F,QAAK,GACL5F,GAAA,KAAA6F,QAAW,GAGPf,GAAKc,GAAL7+G,KAAa,IACb+9G,GAAKe,GAAL9+G,KAAmB,EACvB,CAEA,QAAIrD,GACA,OAAOsF,GAAO+7G,GAAKa,GAAL7+G,MAClB,CACA,UAAI7L,GAAmB,OAAO6pH,GAAKc,GAAL9+G,KAAkB,CAQhDi/G,YAAAA,CAAaC,GACT,OAAOhG,GAAA6F,GAAA/+G,KAAKm/G,IAAUpnH,KAAfiI,KAAgBg7G,GAAakE,EAAOviH,MAC/C,CAGAyiH,UAAAA,CAAW1vG,GACP,IAAI9T,EAAQo/G,GAAatrG,GACzB,MAAM2vG,EAAgBzjH,EAAMzH,OAASyoH,GAIrC,OAHIyC,IACAzjH,EAAQo/G,GAAa/4G,GAAO,CAAErG,EAAOihH,GAAQr8G,MAAM6+G,OAEhDnG,GAAA6F,GAAA/+G,KAAKm/G,IAAUpnH,KAAfiI,KAAgBpE,EAC3B,CAGA0jH,UAAAA,CAAW5vG,GACP,OAAOwpG,GAAA6F,GAAA/+G,KAAKm/G,IAAUpnH,KAAfiI,KAAgBoP,GAASM,GACpC,CAIA6vG,mBAAAA,GACI,MAAMr1F,EAAS8zF,GAAKa,GAAL7+G,MAAW7L,OAG1B,OAFA6pH,GAAKa,GAAL7+G,MAAW1B,KAAKu+G,IAChBkB,GAAKe,GAAL9+G,KAAAg+G,GAAKc,GAAL9+G,MAAoB48G,IACZltG,IACJsuG,GAAKa,GAAL7+G,MAAWkqB,GAAU9a,GAASM,GAEtC,EAGJ,SAAAyvG,GArCexiH,GAGP,OAFAqhH,GAAKa,GAAL7+G,MAAW1B,KAAK3B,GAChBohH,GAAKe,GAAL9+G,KAAAg+G,GAAKc,GAAL9+G,MAAoBrD,EAAKxI,QAClBwI,EAAKxI,MAChB,CAAC,IAAAqrH,GAAA,IAAAp+E,QAAAq+E,GAAA,IAAAr+E,QAAAs+E,GAAA,IAAAt+E,QAAAu+E,GAAA,IAAAv+E,QAAAw+E,GAAA,IAAAx+E,QAAAy+E,GAAA,IAAAt5E,QAoCC,MAAOu5E,GAcT7wG,WAAAA,CAAYtS,EAAiBojH,EAAsBC,GAAqBlF,GAAA,KAAA+E,IAVxEvuB,EAAA,0BAGS2nB,GAAA,KAAAuG,QAAK,GACdvG,GAAA,KAAAwG,QAAO,GAEPxG,GAAA,KAAAyG,QAAU,GACVzG,GAAA,KAAA0G,QAAO,GACP1G,GAAA,KAAA2G,QAAa,GAGTjuB,GAAyB3xF,KAAM,CAAE+/G,aAAcA,IAE/ChC,GAAKyB,GAALx/G,KAAag7G,GAAar+G,IAC1BohH,GAAK2B,GAAL1/G,KAAkB,GAClB+9G,GAAK4B,GAAL3/G,KAAe,MACf+9G,GAAK6B,GAAL5/G,KAAsC,MAAhBggH,EAAwBA,EAAc,MAE5DjC,GAAK0B,GAALz/G,KAAe,EACnB,CAEA,QAAIrD,GAAiB,OAAOy+G,GAAQ4C,GAAKwB,GAALx/G,MAAa,CACjD,cAAIs7G,GAAuB,OAAO0C,GAAKwB,GAALx/G,MAAW7L,MAAQ,CACrD,YAAI8rH,GAAqB,OAAOjC,GAAKyB,GAALz/G,KAAc,CAC9C,SAAIpE,GAAsB,OAAO,IAAIonD,WAAWg7D,GAAKwB,GAALx/G,MAAa,CAkC7DkgH,SAAAA,CAAUh2F,GACN,MAAMi2F,EAAS,IAAIL,GAAO9B,GAAKwB,GAALx/G,MAAWQ,MAAMw9G,GAAKyB,GAALz/G,MAAekqB,GAASlqB,KAAK+/G,WAAY/B,GAAK4B,GAAL5/G,OAEpF,OADA+9G,GAAO4B,GAAPQ,EAAiBngH,MACVmgH,CACX,CAGAC,SAAAA,CAAUjsH,EAAgBksH,GACtB,IAAIzkH,EAAQs9G,GAAA2G,GAAA7/G,KAAKsgH,IAAUvoH,KAAfiI,KAAgB,EAAG7L,IAAUksH,GAIzC,OAHAnH,GAAA2G,GAAA7/G,KAAKugH,IAAmBxoH,KAAxBiI,KAAyB7L,GACzB4pH,GAAK0B,GAALz/G,KAAAg+G,GAAKyB,GAALz/G,MAAgBpE,EAAMzH,QAEfyH,EAAM4E,MAAM,EAAGrM,EAC1B,CAGAqsH,SAAAA,GACI,OAAOhE,GAASx8G,KAAKogH,UAAUxD,IACnC,CAEA6D,SAAAA,GACI,OD1WGxE,GAAUO,GC0WGx8G,KAAKogH,UAAUxD,KACnC,EACH,SAAA2D,GAvDuBhmH,GACE,IAAAmmH,EAAlB,GAAI1C,GAAK2B,GAAL3/G,MAAgB,OAAOk5G,GAAA2G,GAAAa,EAAA1C,GAAK2B,GAAL3/G,MAAaugH,IAAmBxoH,KAAA2oH,EAACnmH,GAE5DwjH,GAAK2B,GAAL1/G,KAAAg+G,GAAK0B,GAAL1/G,MAAmBzF,GAGnB4/G,GAAO6D,GAAK4B,GAAL5/G,MAAqB,GAAKg+G,GAAK0B,GAAL1/G,OAAmBg+G,GAAK4B,GAAL5/G,MAAqBA,KAAKs7G,WAAY,kDAAFr5G,OAAqD+7G,GAAK4B,GAAL5/G,MAAmB,gEAAkE,iBAAkB,CAChPqH,OAAQ2zG,GAAagD,GAAKwB,GAALx/G,OAAakqB,OAAQ8zF,GAAKyB,GAALz/G,MAC1C7L,OAAQoG,EAAO6L,KAAM,CACjBu6G,UAAW3C,GAAK0B,GAAL1/G,MACXs7G,WAAYt7G,KAAKs7G,aAG7B,CAAC,SAAAgF,GAEUp2F,EAAgB/1B,EAAgBksH,GACvC,IAAIO,EAAgBpmH,KAAKkD,KAAKvJ,EAASyoH,IAAYA,GAYnD,OAXIoB,GAAKyB,GAALz/G,MAAe4gH,EAAgB5C,GAAKwB,GAALx/G,MAAW7L,SACtC6L,KAAK+/G,YAAcM,GAASrC,GAAKyB,GAALz/G,MAAe7L,GAAU6pH,GAAKwB,GAALx/G,MAAW7L,OAChEysH,EAAgBzsH,EAEhBgmH,IAAO,EAAO,qBAAsB,iBAAkB,CAClD9yG,OAAQ2zG,GAAagD,GAAKwB,GAALx/G,OACrB7L,OAAQ6pH,GAAKwB,GAALx/G,MAAW7L,OACnB+1B,OAAQ8zF,GAAKyB,GAALz/G,MAAe4gH,KAI5B5C,GAAKwB,GAALx/G,MAAWQ,MAAMw9G,GAAKyB,GAALz/G,MAAcg+G,GAAKyB,GAALz/G,MAAe4gH,EACzD,CClgBJ,SAASh5F,GAAO3wB,GACd,IAAKo6F,OAAOwvB,cAAc5pH,IAAMA,EAAI,EAAG,MAAM,IAAIjH,MAAM,2BAADiS,OAA4BhL,GACpF,CAMA,SAAS2E,GAAMjE,GACb,KAAMA,aAAaqrD,YAAa,MAAM,IAAIhzD,MAAM,uBAAuB,QAAA4tH,EAAAl4G,UAAAvR,OAD5BkO,EAAiB,IAAA/I,MAAAskH,EAAA,EAAAA,EAAA,KAAAzjC,EAAA,EAAAA,EAAAyjC,EAAAzjC,IAAjB93E,EAAiB83E,EAAA,GAAAz0E,UAAAy0E,GAE5D,GAAI93E,EAAQlO,OAAS,IAAMkO,EAAQ8L,SAASxW,EAAExD,QAC5C,MAAM,IAAInE,MAAM,iCAADiS,OAAkCI,EAAO,oBAAAJ,OAAmBtK,EAAExD,QACjF,CAQA,SAASkhD,GAAKA,GACZ,GAAoB,oBAATA,GAA8C,oBAAhBA,EAAKjgD,OAC5C,MAAM,IAAIpF,MAAM,mDAClB43B,GAAOytB,EAAKyrE,WACZl5F,GAAOytB,EAAK0rE,SACd,CAEA,SAASC,GAAO7yF,GAAmC,IAApB8yF,IAAav7G,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,KAAAA,UAAA,GAC1C,GAAIyoB,EAAS+yF,UAAW,MAAM,IAAIlxH,MAAM,oCACxC,GAAIixH,GAAiB9yF,EAAS24C,SAAU,MAAM,IAAI92E,MAAM,wCAC1D,CACA,SAAS+D,GAAO4O,EAAUwrB,GACxBvyB,GAAM+G,GACN,MAAMjI,EAAMyzB,EAAS2yF,UACrB,GAAIn+G,EAAIxO,OAASuG,EACf,MAAM,IAAI1K,MAAM,yDAADiS,OAA0DvH,GAE7E,CAIA,MCzCMymH,GAA6BvH,OAAO,GAAK,GAAK,GAC9CwH,GAAuBxH,OAAO,IAGpC,SAASyH,GAAQpqH,GACf,OAD4ByO,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GACb,CAAE5N,EAAGu5F,OAAOp6F,EAAIkqH,IAAavqH,EAAGy6F,OAAQp6F,GAAKmqH,GAAQD,KAC7D,CAAErpH,EAAsC,EAAnCu5F,OAAQp6F,GAAKmqH,GAAQD,IAAiBvqH,EAA4B,EAAzBy6F,OAAOp6F,EAAIkqH,IAClE,CAEA,SAAS/1G,GAAMk2G,GAAyB,IAAVh6F,EAAE5hB,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GAC1Bi0B,EAAK,IAAI/+B,YAAY0mH,EAAIntH,QACzBotH,EAAK,IAAI3mH,YAAY0mH,EAAIntH,QAC7B,IAAK,IAAIU,EAAI,EAAGA,EAAIysH,EAAIntH,OAAQU,IAAK,CACnC,MAAM,EAAEiD,EAAC,EAAElB,GAAMyqH,GAAQC,EAAIzsH,GAAIyyB,IAChCqS,EAAG9kC,GAAI0sH,EAAG1sH,IAAM,CAACiD,EAAGlB,E,CAEvB,MAAO,CAAC+iC,EAAI4nF,EACd,CAEA,MAcMC,GAASA,CAAC1pH,EAAWlB,EAAW7D,IAAe+E,GAAK/E,EAAM6D,IAAO,GAAK7D,EACtE0uH,GAASA,CAAC3pH,EAAWlB,EAAW7D,IAAe6D,GAAK7D,EAAM+E,IAAO,GAAK/E,EAEtE2uH,GAASA,CAAC5pH,EAAWlB,EAAW7D,IAAe6D,GAAM7D,EAAI,GAAQ+E,IAAO,GAAK/E,EAC7E4uH,GAASA,CAAC7pH,EAAWlB,EAAW7D,IAAe+E,GAAM/E,EAAI,GAAQ6D,IAAO,GAAK7D,EASnF,MAsBM6uH,GAAM,CACVP,WAASj2G,SAAOy2G,MAlDJA,CAAC/pH,EAAWlB,IAAegjH,OAAO9hH,IAAM,IAAMspH,GAAQxH,OAAOhjH,IAAM,GAmD/EkrH,MAjDYA,CAAChqH,EAAWiqH,EAAYhvH,IAAc+E,IAAM/E,EAiDjDivH,MAhDKA,CAAClqH,EAAWlB,EAAW7D,IAAe+E,GAAM,GAAK/E,EAAO6D,IAAM7D,EAiD1EkvH,OA/CaA,CAACnqH,EAAWlB,EAAW7D,IAAe+E,IAAM/E,EAAM6D,GAAM,GAAK7D,EA+ClEmvH,OA9CKA,CAACpqH,EAAWlB,EAAW7D,IAAe+E,GAAM,GAAK/E,EAAO6D,IAAM7D,EA8C3DovH,OA5CHA,CAACrqH,EAAWlB,EAAW7D,IAAe+E,GAAM,GAAK/E,EAAO6D,IAAO7D,EAAI,GA4CxDqvH,OA3CXA,CAACtqH,EAAWlB,EAAW7D,IAAe+E,IAAO/E,EAAI,GAAQ6D,GAAM,GAAK7D,EA4CjFsvH,QA1CcA,CAACnqC,EAAYthF,IAAcA,EA0ChC0rH,QAzCKA,CAACxqH,EAAWiqH,IAAejqH,EA0CzC0pH,UAAQC,UAAQC,UAAQC,UACxBv3G,IAjCF,SAAauvB,EAAY4nF,EAAY3nF,EAAY2oF,GAC/C,MAAM3rH,GAAK2qH,IAAO,IAAMgB,IAAO,GAC/B,MAAO,CAAEzqH,EAAI6hC,EAAKC,GAAOhjC,EAAI,GAAK,GAAM,GAAM,EAAGA,EAAO,EAAJA,EACtD,EA8BO4rH,MA5BOA,CAACjB,EAAYgB,EAAYE,KAAgBlB,IAAO,IAAMgB,IAAO,IAAME,IAAO,GA4B1EC,MA3BAA,CAACC,EAAahpF,EAAYC,EAAYC,IACjDF,EAAKC,EAAKC,GAAO8oF,EAAM,GAAK,GAAM,GAAM,EA0BtBC,MAzBPA,CAACrB,EAAYgB,EAAYE,EAAYI,KAChDtB,IAAO,IAAMgB,IAAO,IAAME,IAAO,IAAMI,IAAO,GAwBrBC,MAvBdA,CAACH,EAAahpF,EAAYC,EAAYC,EAAYE,IAC7DJ,EAAKC,EAAKC,EAAKE,GAAO4oF,EAAM,GAAK,GAAM,GAAM,EAsBbI,MAnBrBA,CAACJ,EAAahpF,EAAYC,EAAYC,EAAYE,EAAYC,IACzEL,EAAKC,EAAKC,EAAKE,EAAKC,GAAO2oF,EAAM,GAAK,GAAM,GAAM,EAkBXK,MArB5BA,CAACzB,EAAYgB,EAAYE,EAAYI,EAAYI,KAC5D1B,IAAO,IAAMgB,IAAO,IAAME,IAAO,IAAMI,IAAO,IAAMI,IAAO,IAsB9D,MCzEa7oH,GACW,kBAAfy2F,YAA2B,WAAYA,WAAaA,WAAWz2F,YAAS6/C,ECU3EipE,GAAOzrH,GAA4BA,aAAaurD,WAOzCmgE,GAAc7oH,GACzB,IAAIuqD,SAASvqD,EAAI+M,OAAQ/M,EAAIwqD,WAAYxqD,EAAIm7C,YAGlC2tE,GAAOA,CAACpmH,EAAcshB,IAAmBthB,GAAS,GAAKshB,EAAWthB,IAASshB,EAKxF,KADgF,KAA5D,IAAI0kC,WAAW,IAAIpoD,YAAY,CAAC,YAAayM,QAAQ,IAC9D,MAAM,IAAIrX,MAAM,+CAwErB,SAAUqzH,GAAQ1mH,GAEtB,GADoB,kBAATA,IAAmBA,EAZ1B,SAAsBknD,GAC1B,GAAmB,kBAARA,EAAkB,MAAM,IAAI7zD,MAAM,oCAADiS,cAA4C4hD,IACxF,OAAO,IAAIb,YAAW,IAAIsgE,aAActyH,OAAO6yD,GACjD,CASuC0/D,CAAY5mH,KAC5CumH,GAAIvmH,GAAO,MAAM,IAAI3M,MAAM,4BAADiS,cAAoCtF,IACnE,OAAOA,CACT,CAiBM,MAAgB6mH,GAsBpBz6B,KAAAA,GACE,OAAO/oF,KAAKyjH,YACd,EA4BI,SAAUC,GAAmCC,GACjD,MAAMC,EAASh0H,GAA2B+zH,IAAW3vH,OAAOqvH,GAAQzzH,IAAMyF,SACpEmK,EAAMmkH,IAIZ,OAHAC,EAAM9C,UAAYthH,EAAIshH,UACtB8C,EAAM7C,SAAWvhH,EAAIuhH,SACrB6C,EAAMxuH,OAAS,IAAMuuH,IACdC,CACT,CA2BM,SAAU7nH,KAA4B,IAAhB8nH,EAAWn+G,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,GACxC,GAAItL,IAA4C,oBAA3BA,GAAOF,gBAC1B,OAAOE,GAAOF,gBAAgB,IAAI8oD,WAAW6gE,IAE/C,MAAM,IAAI7zH,MAAM,yCAClB,CCtMA,MAAO8zH,GAASC,GAAWC,IAA8C,CAAC,GAAI,GAAI,IAC5EC,GAAsBrK,OAAO,GAC7BsK,GAAsBtK,OAAO,GAC7BuK,GAAsBvK,OAAO,GAC7BwK,GAAsBxK,OAAO,GAC7ByK,GAAwBzK,OAAO,KAC/B0K,GAAyB1K,OAAO,KACtC,IAAK,IAAIr/D,EAAQ,EAAG/7C,GAAI0lH,GAAK/nH,GAAI,EAAGoG,GAAI,EAAGg4C,EAAQ,GAAIA,IAAS,EAE7Dp+C,GAAGoG,IAAK,CAACA,IAAI,EAAIpG,GAAI,EAAIoG,IAAK,GAC/BuhH,GAAQxlH,KAAK,GAAK,EAAIiE,GAAIpG,KAE1B4nH,GAAUzlH,MAAQi8C,EAAQ,IAAMA,EAAQ,GAAM,EAAK,IAEnD,IAAI12C,EAAIogH,GACR,IAAK,IAAIjmH,EAAI,EAAGA,EAAI,EAAGA,IACrBQ,IAAMA,IAAK0lH,IAAS1lH,IAAK4lH,IAAOE,IAAWD,GACvC7lH,GAAI2lH,KAAKtgH,GAAKqgH,KAASA,IAAuBtK,OAAO57G,IAAMkmH,IAEjEF,GAAW1lH,KAAKuF,E,CAElB,MAAO0gH,GAAaC,IAA+Bp5G,GAAM44G,IAAY,GAG/DS,GAAQA,CAAC3sH,EAAWlB,EAAW7D,IAAeA,EAAI,GAAK2uH,GAAO5pH,EAAGlB,EAAG7D,GAAKyuH,GAAO1pH,EAAGlB,EAAG7D,GACtF2xH,GAAQA,CAAC5sH,EAAWlB,EAAW7D,IAAeA,EAAI,GAAK4uH,GAAO7pH,EAAGlB,EAAG7D,GAAK0uH,GAAO3pH,EAAGlB,EAAG7D,GA8CtF,MAAO4xH,WAAenB,GAQ1Bv0G,WAAAA,CACS8xG,EACA6D,EACA9D,GAEsB,IADnB+D,EAAAn/G,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GACAo/G,EAAAp/G,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAiB,GAM3B,GAJA64F,QANO,KAAAwiB,SAAAA,EACA,KAAA6D,OAAAA,EACA,KAAA9D,UAAAA,EACG,KAAA+D,UAAAA,EACA,KAAAC,OAAAA,EAXF,KAAAC,IAAM,EACN,KAAAC,OAAS,EACT,KAAAl+C,UAAW,EAEX,KAAAo6C,WAAY,EAWpBt5F,GAAOk5F,GAEH,GAAK9gH,KAAK+gH,UAAY/gH,KAAK+gH,UAAY,IACzC,MAAM,IAAI/wH,MAAM,4CD1FFsK,MC2FhB0F,KAAK5O,MAAQ,IAAI4xD,WAAW,KAC5BhjD,KAAKilH,SD5FW3qH,EC4FG0F,KAAK5O,MD3F1B,IAAIwJ,YAAYN,EAAI+M,OAAQ/M,EAAIwqD,WAAYtqD,KAAKK,MAAMP,EAAIm7C,WAAa,IC4FxE,CACUyvE,MAAAA,IAnEN,SAAkBnyH,GAAmC,IAAnB+xH,EAAAp/G,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAiB,GACvD,MAAMqU,EAAI,IAAInf,YAAY,IAE1B,IAAK,IAAI2/C,EAAQ,GAAKuqE,EAAQvqE,EAAQ,GAAIA,IAAS,CAEjD,IAAK,IAAIp+C,EAAI,EAAGA,EAAI,GAAIA,IAAK4d,EAAE5d,GAAKpJ,EAAEoJ,GAAKpJ,EAAEoJ,EAAI,IAAMpJ,EAAEoJ,EAAI,IAAMpJ,EAAEoJ,EAAI,IAAMpJ,EAAEoJ,EAAI,IACrF,IAAK,IAAIA,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAAG,CAC9B,MAAMgpH,GAAQhpH,EAAI,GAAK,GACjBipH,GAAQjpH,EAAI,GAAK,GACjBkpH,EAAKtrG,EAAEqrG,GACPE,EAAKvrG,EAAEqrG,EAAO,GACd/pF,EAAKopF,GAAMY,EAAIC,EAAI,GAAKvrG,EAAEorG,GAC1BI,EAAKb,GAAMW,EAAIC,EAAI,GAAKvrG,EAAEorG,EAAO,GACvC,IAAK,IAAI5iH,EAAI,EAAGA,EAAI,GAAIA,GAAK,GAC3BxP,EAAEoJ,EAAIoG,IAAM84B,EACZtoC,EAAEoJ,EAAIoG,EAAI,IAAMgjH,C,CAIpB,IAAIC,EAAOzyH,EAAE,GACT0yH,EAAO1yH,EAAE,GACb,IAAK,IAAI8Q,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,MAAMya,EAAQylG,GAAUlgH,GAClBw3B,EAAKopF,GAAMe,EAAMC,EAAMnnG,GACvBinG,EAAKb,GAAMc,EAAMC,EAAMnnG,GACvBonG,EAAK5B,GAAQjgH,GACnB2hH,EAAOzyH,EAAE2yH,GACTD,EAAO1yH,EAAE2yH,EAAK,GACd3yH,EAAE2yH,GAAMrqF,EACRtoC,EAAE2yH,EAAK,GAAKH,C,CAGd,IAAK,IAAIhjH,EAAI,EAAGA,EAAI,GAAIA,GAAK,GAAI,CAC/B,IAAK,IAAIpG,EAAI,EAAGA,EAAI,GAAIA,IAAK4d,EAAE5d,GAAKpJ,EAAEwP,EAAIpG,GAC1C,IAAK,IAAIA,EAAI,EAAGA,EAAI,GAAIA,IAAKpJ,EAAEwP,EAAIpG,KAAO4d,GAAG5d,EAAI,GAAK,IAAM4d,GAAG5d,EAAI,GAAK,G,CAG1EpJ,EAAE,IAAMwxH,GAAYhqE,GACpBxnD,EAAE,IAAMyxH,GAAYjqE,E,CAEtBxgC,EAAEy9F,KAAK,EACT,CA2BImO,CAAQ3lH,KAAKilH,QAASjlH,KAAK8kH,QAC3B9kH,KAAKglH,OAAS,EACdhlH,KAAK+kH,IAAM,CACb,CACA/wH,MAAAA,CAAO2I,GACLqkH,GAAOhhH,MACP,MAAM,SAAE+gH,EAAQ,MAAE3vH,GAAU4O,KAEtBtL,GADNiI,EAAO0mH,GAAQ1mH,IACExI,OACjB,IAAK,IAAI4wH,EAAM,EAAGA,EAAMrwH,GAAO,CAC7B,MAAMkxH,EAAOprH,KAAKE,IAAIqmH,EAAW/gH,KAAK+kH,IAAKrwH,EAAMqwH,GACjD,IAAK,IAAIlwH,EAAI,EAAGA,EAAI+wH,EAAM/wH,IAAKzD,EAAM4O,KAAK+kH,QAAUpoH,EAAKooH,KACrD/kH,KAAK+kH,MAAQhE,GAAU/gH,KAAKklH,Q,CAElC,OAAOllH,IACT,CACU/L,MAAAA,GACR,GAAI+L,KAAK8mE,SAAU,OACnB9mE,KAAK8mE,UAAW,EAChB,MAAM,MAAE11E,EAAK,OAAEwzH,EAAM,IAAEG,EAAG,SAAEhE,GAAa/gH,KAEzC5O,EAAM2zH,IAAQH,EACU,KAAV,IAATA,IAAwBG,IAAQhE,EAAW,GAAG/gH,KAAKklH,SACxD9zH,EAAM2vH,EAAW,IAAM,IACvB/gH,KAAKklH,QACP,CACUW,SAAAA,CAAUljH,GAClBq+G,GAAOhhH,MAAM,GACbpE,GAAM+G,GACN3C,KAAK/L,SACL,MAAM6xH,EAAY9lH,KAAK5O,OACjB,SAAE2vH,GAAa/gH,KACrB,IAAK,IAAI+kH,EAAM,EAAGrwH,EAAMiO,EAAIxO,OAAQ4wH,EAAMrwH,GAAO,CAC3CsL,KAAKglH,QAAUjE,GAAU/gH,KAAKklH,SAClC,MAAMU,EAAOprH,KAAKE,IAAIqmH,EAAW/gH,KAAKglH,OAAQtwH,EAAMqwH,GACpDpiH,EAAIoL,IAAI+3G,EAAU3+D,SAASnnD,KAAKglH,OAAQhlH,KAAKglH,OAASY,GAAOb,GAC7D/kH,KAAKglH,QAAUY,EACfb,GAAOa,C,CAET,OAAOjjH,CACT,CACAojH,OAAAA,CAAQpjH,GAEN,IAAK3C,KAAK6kH,UAAW,MAAM,IAAI70H,MAAM,yCACrC,OAAOgQ,KAAK6lH,UAAUljH,EACxB,CACAqjH,GAAAA,CAAIpqH,GAEF,OADAgsB,GAAOhsB,GACAoE,KAAK+lH,QAAQ,IAAI/iE,WAAWpnD,GACrC,CACAqqH,UAAAA,CAAWtjH,GAET,GADA5O,GAAO4O,EAAK3C,MACRA,KAAK8mE,SAAU,MAAM,IAAI92E,MAAM,+BAGnC,OAFAgQ,KAAK6lH,UAAUljH,GACf3C,KAAKi9B,UACEt6B,CACT,CACAtN,MAAAA,GACE,OAAO2K,KAAKimH,WAAW,IAAIjjE,WAAWhjD,KAAK8gH,WAC7C,CACA7jF,OAAAA,GACEj9B,KAAKkhH,WAAY,EACjBlhH,KAAK5O,MAAMomH,KAAK,EAClB,CACAiM,UAAAA,CAAWrxB,GACT,MAAM,SAAE2uB,EAAQ,OAAE6D,EAAM,UAAE9D,EAAS,OAAEgE,EAAM,UAAED,GAAc7kH,KAY3D,OAXAoyF,IAAAA,EAAO,IAAIuyB,GAAO5D,EAAU6D,EAAQ9D,EAAW+D,EAAWC,IAC1D1yB,EAAG6yB,QAAQl3G,IAAI/N,KAAKilH,SACpB7yB,EAAG2yB,IAAM/kH,KAAK+kH,IACd3yB,EAAG4yB,OAAShlH,KAAKglH,OACjB5yB,EAAGtrB,SAAW9mE,KAAK8mE,SACnBsrB,EAAG0yB,OAASA,EAEZ1yB,EAAGwyB,OAASA,EACZxyB,EAAG0uB,UAAYA,EACf1uB,EAAGyyB,UAAYA,EACfzyB,EAAG8uB,UAAYlhH,KAAKkhH,UACb9uB,CACT,EAGF,MAAM8zB,GAAMA,CAACtB,EAAgB7D,EAAkBD,IAC7C4C,GAAgB,IAAM,IAAIiB,GAAO5D,EAAU6D,EAAQ9D,IAexCqF,GAA6BD,GAAI,EAAM,IAAK,ICpMzD,IAAIE,IAAS,EAEb,MAAMC,GAAa,SAAS1pH,GACxB,OAAOwpH,GAAWxpH,EACtB,EAEA,IAAI2pH,GAA+CD,GAwB7C,SAAUE,GAAU1H,GACtB,MAAMliH,EAAO5L,GAAS8tH,EAAO,QAC7B,OAAOzD,GAAQkL,GAAY3pH,GAC/B,CACA4pH,GAAU9tB,EAAI4tB,GACdE,GAAUvgH,KAAO,WAAmBogH,IAAS,CAAM,EACnDG,GAAUC,SAAW,SAASp+D,GAC1B,GAAIg+D,GAAU,MAAM,IAAI7xC,UAAU,uBAClC+xC,GAAcl+D,CAClB,EACAtxD,OAAOo7G,OAAOqU,ICjDd,MAAM7K,GAAO9B,OAAO,GACd6M,GAAQ7M,OAAO,IAErB,SAAS8M,GAAmBC,GAOxB,MAAMC,GAFND,EAAUA,EAAQr7G,eAEImK,UAAU,GAAGrK,MAAM,IAEnCy7G,EAAW,IAAI7jE,WAAW,IAChC,IAAK,IAAInuD,EAAI,EAAGA,EAAI,GAAIA,IACpBgyH,EAAShyH,GAAK+xH,EAAM/xH,GAAGslD,WAAW,GAGtC,MAAM2sE,EAAS/1H,GAASw1H,GAAUM,IAElC,IAAK,IAAIhyH,EAAI,EAAGA,EAAI,GAAIA,GAAK,EACpBiyH,EAAOjyH,GAAK,IAAM,GAAM,IACzB+xH,EAAM/xH,GAAK+xH,EAAM/xH,GAAG6P,gBAEF,GAAjBoiH,EAAOjyH,GAAK,KAAc,IAC3B+xH,EAAM/xH,EAAI,GAAK+xH,EAAM/xH,EAAI,GAAG6P,eAIpC,MAAO,KAAOkiH,EAAMj9G,KAAK,GAC7B,CAKA,MAAMo9G,GAA8C,CAAC,EACrD,IAAK,IAAIlyH,EAAI,EAAGA,EAAI,GAAIA,IAAOkyH,GAAW3qH,OAAOvH,IAAMuH,OAAOvH,GAC9D,IAAK,IAAIA,EAAI,EAAGA,EAAI,GAAIA,IAAOkyH,GAAW3qH,OAAOC,aAAa,GAAKxH,IAAMuH,OAAO,GAAKvH,GAMrF,SAASmyH,GAAaL,GAIlB,IAAIE,GAFJF,GADAA,EAAUA,EAAQjiH,eACA+Q,UAAU,GAAKkxG,EAAQlxG,UAAU,EAAG,GAAK,MAEpCrK,MAAM,IAAI+/C,IAAK95D,GAAe01H,GAAW11H,IAAOsY,KAAK,IAG5E,KAAOk9G,EAAS1yH,QATD,IASsB,CACjC,IAAI6B,EAAQ6wH,EAASpxG,UAAU,EAVpB,IAWXoxG,EAAW3nE,SAASlpD,EAAO,IAAM,GAAK6wH,EAASpxG,UAAUzf,EAAM7B,O,CAGnE,IAAI8yH,EAAW7qH,OAAO,GAAM8iD,SAAS2nE,EAAU,IAAM,IACrD,KAAOI,EAAS9yH,OAAS,GAAK8yH,EAAW,IAAMA,EAE/C,OAAOA,CACX,CAEA,MAAMC,GAAU,WACZ,MAAMntE,EAAiC,CAAC,EACxC,IAAK,IAAIllD,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAEzBklD,EADY,uCAAuCllD,IACrC+kH,OAAO/kH,E,CAEzB,OAAOklD,CACX,CAPgB,GAsDV,SAAUotE,GAAWR,GAIvB,GAFAtM,GAAmC,kBAAbsM,EAAuB,kBAAmB,UAAWA,GAEvEA,EAAQj9G,MAAM,0BAA2B,CAGpCi9G,EAAQvyB,WAAW,QAASuyB,EAAU,KAAOA,GAElD,MAAM5sE,EAAS2sE,GAAmBC,GAMlC,OAHAtM,IAAgBsM,EAAQj9G,MAAM,kCAAoCqwC,IAAW4sE,EACzE,uBAAwB,UAAWA,GAEhC5sE,C,CAIX,GAAI4sE,EAAQj9G,MAAM,kCAAmC,CAEjD2wG,GAAesM,EAAQlxG,UAAU,EAAG,KAAOuxG,GAAaL,GAAU,oBAAqB,UAAWA,GAElG,IAAI5sE,EApEZ,SAAoBrqC,GAChBA,EAAQA,EAAMpE,cAEd,IAAIyuC,EAAS2hE,GACb,IAAK,IAAI7mH,EAAI,EAAGA,EAAI6a,EAAMvb,OAAQU,IAC9BklD,EAASA,EAAS0sE,GAAQS,GAAOx3G,EAAM7a,IAE3C,OAAOklD,CACX,CA4DqBqtE,CAAWT,EAAQlxG,UAAU,IAAIzZ,SAAS,IACvD,KAAO+9C,EAAO5lD,OAAS,IAAM4lD,EAAS,IAAMA,EAC5C,OAAQ2sE,GAAmB,KAAO3sE,E,CAGtCsgE,IAAe,EAAO,kBAAmB,UAAWsM,EACxD,CC7HA,MAAMU,GAAS,CAAC,EAEhB,SAASpwH,GAAEyY,EAAqB0V,GAC5B,IAAIkiG,GAAS,EAOb,OANIliG,EAAQ,IACRkiG,GAAS,EACTliG,IAAU,GAIP,IAAImiG,GAAMF,GAAQ,GAAFplH,OAAMqlH,EAAS,GAAI,IAAI,OAAArlH,OAAOmjB,GAAU1V,EAAO,CAAE43G,SAAQliG,SACpF,CAEA,SAASztB,GAAE+X,EAAkBvM,GAEzB,OAAO,IAAIokH,GAAMF,GAAQ,QAAFplH,OAAYkB,GAAc,IAAOuM,EAAO,CAAEvM,QACrE,CAoEA,MAAMqkH,GAAe9wH,OAAOC,IAAI,iBAEhC,IAAA8wH,GAAA,IAAArmF,QAGM,MAAOmmF,GAsBTt4G,WAAAA,CAAYy4G,EAAY33H,EAAc2f,EAAYtgB,GApBlDkiG,EAAA,oBAKAA,EAAA,qBAKS2nB,GAAA,KAAAwO,QAAQ,GAEjBn2B,EAAA,4BASmB,MAAXliG,IAAmBA,EAAU,MACjCsrH,GAAc2M,GAAQK,EAAO,SAC7B/1B,GAAwB3xF,KAAM,CAAEwnH,gBAAcz3H,OAAM2f,UACpDquG,GAAK0J,GAALznH,KAAgB5Q,GAGhB4Q,KAAKsF,QACT,CAKAA,MAAAA,GACI,GAAkB,UAAdtF,KAAKjQ,KACL,MAAM,IAAIC,MAAM,IACb,GAAkB,iBAAdgQ,KAAKjQ,KACZ,MAAM,IAAIC,MAAM,IACb,MAAkB,UAAdgQ,KAAKjQ,KACL,SAAPkS,OAAiBjC,KAAK0P,MAAMy7C,IAAKvgD,GAAaA,EAAEtF,UAAUqE,KAAK,KAAK,KAGjE3J,KAAKjQ,IAChB,CAKAggB,YAAAA,GACI,OAAO,CACX,CAKA43G,QAAAA,GACI,OAAO,CACX,CAKA/L,QAAAA,GACI,OAAO,CACX,CAKAgM,QAAAA,GACI,QAAU5nH,KAAKjQ,KAAK2Z,MAAM,gBAC9B,CAKAm+G,MAAAA,GACI,OAAO7nH,KAAKjQ,KAAKqkG,WAAW,QAChC,CAKA0zB,QAAAA,GACI,MAAsB,WAAd9nH,KAAKjQ,IACjB,CAKA,aAAIg4H,GACA,GAAkB,UAAd/nH,KAAKjQ,KAAoB,MAAMwkF,UAAU,eAC7C,OAAOypC,GAAKyJ,GAALznH,KACX,CAYA,eAAIgoH,GACA,GAAkB,UAAdhoH,KAAKjQ,KAAoB,MAAMwkF,UAAU,gBAC7C,OAAsB,IAAlBypC,GAAKyJ,GAALznH,OAAkC,GAChB,IAAlBg+G,GAAKyJ,GAALznH,MAAgDA,KAAK0P,MAAQvb,OAC1D,IACX,CAKA,WAAO2gF,CAAK/kF,EAAc2f,GACtB,OAAO,IAAI63G,GAAMF,GAAQt3H,EAAM2f,EACnC,CAKA,YAAOu4G,CAAMr9G,GAA0B,OAAO3T,GAAE2T,EAAG,EAAI,CAKvD,aAAOs9G,CAAOt9G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAOu9G,CAAOv9G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAOw9G,CAAOx9G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAOy9G,CAAOz9G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAO09G,CAAO19G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAO29G,CAAO39G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAO49G,CAAO59G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAO69G,CAAO79G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAO89G,CAAO99G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAO+9G,CAAO/9G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,aAAOg+G,CAAOh+G,GAA0B,OAAO3T,GAAE2T,EAAG,GAAK,CAKzD,cAAOi+G,CAAQj+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOk+G,CAAQl+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOm+G,CAAQn+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOo+G,CAAQp+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOq+G,CAAQr+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOs+G,CAAQt+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOu+G,CAAQv+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOw+G,CAAQx+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOy+G,CAAQz+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAO0+G,CAAQ1+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAO2+G,CAAQ3+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAO4+G,CAAQ5+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAO6+G,CAAQ7+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAO8+G,CAAQ9+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAO++G,CAAQ/+G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOg/G,CAAQh/G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOi/G,CAAQj/G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOk/G,CAAQl/G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOm/G,CAAQn/G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,cAAOo/G,CAAQp/G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAK3D,WAAOq/G,CAAKr/G,GAA0B,OAAO3T,GAAE2T,EAAG,IAAM,CAKxD,WAAOs/G,CAAKt/G,GAA0B,OAAO3T,GAAE2T,GAAI,EAAI,CAKvD,YAAOu/G,CAAMv/G,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAOw/G,CAAMx/G,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAOy/G,CAAMz/G,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAO0/G,CAAM1/G,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAO2/G,CAAM3/G,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAO4/G,CAAM5/G,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAO6/G,CAAM7/G,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAO8/G,CAAM9/G,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAO+/G,CAAM//G,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAOggH,CAAMhgH,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,YAAOigH,CAAMjgH,GAA0B,OAAO3T,GAAE2T,GAAI,GAAK,CAKzD,aAAOkgH,CAAOlgH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOmgH,CAAOngH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOogH,CAAOpgH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOqgH,CAAOrgH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOsgH,CAAOtgH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOugH,CAAOvgH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOwgH,CAAOxgH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOygH,CAAOzgH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAO0gH,CAAO1gH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAO2gH,CAAO3gH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAO4gH,CAAO5gH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAO6gH,CAAO7gH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAO8gH,CAAO9gH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAO+gH,CAAO/gH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOghH,CAAOhhH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOihH,CAAOjhH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOkhH,CAAOlhH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOmhH,CAAOnhH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOohH,CAAOphH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,aAAOqhH,CAAOrhH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAK3D,UAAOshH,CAAIthH,GAA0B,OAAO3T,GAAE2T,GAAI,IAAM,CAKxD,aAAOuhH,CAAOvhH,GAAuB,OAAOjT,GAAEiT,EAAG,EAAI,CAKrD,aAAOwhH,CAAOxhH,GAAuB,OAAOjT,GAAEiT,EAAG,EAAI,CAKrD,aAAOyhH,CAAOzhH,GAAuB,OAAOjT,GAAEiT,EAAG,EAAI,CAKrD,aAAO0hH,CAAO1hH,GAAuB,OAAOjT,GAAEiT,EAAG,EAAI,CAKrD,aAAO2hH,CAAO3hH,GAAuB,OAAOjT,GAAEiT,EAAG,EAAI,CAKrD,aAAO4hH,CAAO5hH,GAAuB,OAAOjT,GAAEiT,EAAG,EAAI,CAKrD,aAAO6hH,CAAO7hH,GAAuB,OAAOjT,GAAEiT,EAAG,EAAI,CAKrD,aAAO8hH,CAAO9hH,GAAuB,OAAOjT,GAAEiT,EAAG,EAAI,CAKrD,aAAO+hH,CAAO/hH,GAAuB,OAAOjT,GAAEiT,EAAG,EAAI,CAKrD,cAAOgiH,CAAQhiH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOiiH,CAAQjiH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOkiH,CAAQliH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOmiH,CAAQniH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOoiH,CAAQpiH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOqiH,CAAQriH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOsiH,CAAQtiH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOuiH,CAAQviH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOwiH,CAAQxiH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOyiH,CAAQziH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAO0iH,CAAQ1iH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAO2iH,CAAQ3iH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAO4iH,CAAQ5iH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAO6iH,CAAQ7iH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAO8iH,CAAQ9iH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAO+iH,CAAQ/iH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOgjH,CAAQhjH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOijH,CAAQjjH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOkjH,CAAQljH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOmjH,CAAQnjH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOojH,CAAQpjH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOqjH,CAAQrjH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAKvD,cAAOsjH,CAAQtjH,GAAuB,OAAOjT,GAAEiT,EAAG,GAAK,CAMvD,cAAO+7G,CAAQ/7G,GAAkC,OAAO,IAAI28G,GAAMF,GAAQ,UAAWz8G,EAAI,CAKzF,WAAOujH,CAAKvjH,GAAiB,OAAO,IAAI28G,GAAMF,GAAQ,SAAUz8G,EAAI,CAKpE,YAAOhP,CAAMgP,GAAuB,OAAO,IAAI28G,GAAMF,GAAQ,QAASz8G,EAAI,CAK1E,aAAOqtG,CAAOrtG,GAAoB,OAAO,IAAI28G,GAAMF,GAAQ,SAAUz8G,EAAI,CAMzE,YAAO4/F,CAAM5/F,EAAuB+zG,GAChC,MAAM,IAAI3uH,MAAM,sBAEpB,CAMA,YAAOo+H,CAAMxjH,EAAqDnV,GAC9D,MAAM,IAAIzF,MAAM,sBAEpB,CAMA,gBAAOq+H,CAAUzjH,GACb,OAAO,IAAI28G,GAAMF,GAAQ,YAAavwH,OAAOyW,OAAO,CAAC,EAAI3C,GAC7D,CAKA,cAAO0jH,CAAQ5+G,GACX,OAAQA,GACiB,kBAAXA,GACP,iBAAkBA,GAClBA,EAAM83G,eAAiBA,EAClC,CASA,kBAAO+G,CAAe7+G,EAAkB3f,GACpC,GAAIw3H,GAAM+G,QAAQ5+G,GAAQ,CACtB,GAAIA,EAAM3f,OAASA,EACf,MAAM,IAAIC,MAAM,0BAADiS,OAA4BlS,EAAK,UAAAkS,OAAUyN,EAAM3f,OAEpE,OAAO2f,EAAMA,K,CAEjB,OAAOA,CACX,EC9wBE,MAAO8+G,WAAqB/P,GAE9BxvG,WAAAA,CAAYyvG,GACRngB,MAAM,UAAW,UAAWmgB,GAAW,EAC3C,CAEA3uG,YAAAA,GACI,MAAO,4CACX,CAEA/e,MAAAA,CAAOkuH,EAAgBpD,GACnB,IAAIpsG,EAAQ63G,GAAMgH,YAAYzS,EAAQ,UACtC,IACIpsG,EAAQy3G,GAAWz3G,E,CACrB,MAAOrf,GACL,OAAO2P,KAAK4+G,YAAYvuH,EAAMuU,QAASk3G,E,CAE3C,OAAOoD,EAAOI,WAAW5vG,EAC7B,CAEA7f,MAAAA,CAAOswH,GACH,OAAOgH,GAAW1K,GAAQ0D,EAAOK,YAAa,IAClD,ECzBE,MAAOiO,WAAuBhQ,GAGhCxvG,WAAAA,CAAYy/G,GACRnwB,MAAMmwB,EAAMj5H,KAAMi5H,EAAM3+H,KAAM,IAAK2+H,EAAM/P,SAASrtB,EAAA,qBAClDtxF,KAAK0uH,MAAQA,CACjB,CAEA3+G,YAAAA,GACI,OAAO/P,KAAK0uH,MAAM3+G,cACtB,CAEA/e,MAAAA,CAAOkuH,EAAgBxvG,GACnB,OAAO1P,KAAK0uH,MAAM19H,OAAOkuH,EAAQxvG,EACrC,CAEA7f,MAAAA,CAAOswH,GACH,OAAOngH,KAAK0uH,MAAM7+H,OAAOswH,EAC7B,ECbE,SAAUz1B,GAAKw0B,EAAgByP,EAA8BzwE,GAC/D,IAAI0wE,EAA0B,GAE9B,GAAIt1H,MAAMiG,QAAQ2+C,GACf0wE,EAAc1wE,OAEV,GAAIA,GAA6B,kBAAZA,EAAsB,CAC9C,IAAI2wE,EAAwC,CAAC,EAE7CD,EAAcD,EAAOxjE,IAAKujE,IACtB,MAAMj5H,EAAOi5H,EAAMhQ,UASnB,OARAvE,GAAO1kH,EAAM,wDACT,mBAAoB,CAAE6jH,SAAU,SAAUlzG,KAAM,CAAEsoH,SAASh/G,MAAOwuC,IAEtEi8D,IAAQ0U,EAAOp5H,GAAO,0DAClB,mBAAoB,CAAE6jH,SAAU,SAAUlzG,KAAM,CAAEsoH,SAASh/G,MAAOwuC,IAEtE2wE,EAAOp5H,IAAQ,EAERyoD,EAAOzoD,I,MAIlB4kH,IAAe,EAAO,sBAAuB,QAASn8D,GAG1Dm8D,GAAesU,EAAOx6H,SAAWy6H,EAAYz6H,OAAQ,8BAA+B,QAAS+pD,GAE7F,IAAI4wE,EAAe,IAAI9P,GACnB+P,EAAgB,IAAI/P,GAEpBgQ,EAAmD,GACvDL,EAAOtjH,QAAQ,CAACqjH,EAAOjqH,KACnB,IAAIiL,EAAQk/G,EAAYnqH,GAExB,GAAIiqH,EAAM/P,QAAS,CAEf,IAAIsQ,EAAgBF,EAAc56H,OAGlCu6H,EAAM19H,OAAO+9H,EAAer/G,GAG5B,IAAIw/G,EAAaJ,EAAavP,sBAC9ByP,EAAY1wH,KAAM6wH,IACdD,EAAWC,EAAaF,I,MAI5BP,EAAM19H,OAAO89H,EAAcp/G,KAKnCs/G,EAAY3jH,QAAS+8C,IAAWA,EAAK0mE,EAAa36H,UAElD,IAAIA,EAAS+qH,EAAOD,aAAa6P,GAEjC,OADA36H,GAAU+qH,EAAOD,aAAa8P,GACvB56H,CACX,CAKM,SAAUi7H,GAAOjP,EAAgBwO,GACnC,IAAIzwE,EAAqB,GACrBnsD,EAA6B,GAG7Bs9H,EAAalP,EAAOD,UAAU,GA8ClC,OA5CAyO,EAAOtjH,QAASqjH,IACZ,IAAIh/G,EAAa,KAEjB,GAAIg/G,EAAM/P,QAAS,CACf,IAAIz0F,EAASi2F,EAAOM,YAChB6O,EAAeD,EAAWnP,UAAUh2F,GACxC,IACIxa,EAAQg/G,EAAM7+H,OAAOy/H,E,CACvB,MAAOj/H,GAEL,GAAIwpH,GAAQxpH,EAAO,kBACf,MAAMA,EAGVqf,EAAQrf,EACRqf,EAAM6/G,SAAWb,EAAMj5H,KACvBia,EAAMja,KAAOi5H,EAAMhQ,UACnBhvG,EAAM3f,KAAO2+H,EAAM3+H,I,OAIvB,IACI2f,EAAQg/G,EAAM7+H,OAAOswH,E,CACvB,MAAO9vH,GAEL,GAAIwpH,GAAQxpH,EAAO,kBACf,MAAMA,EAGVqf,EAAQrf,EACRqf,EAAM6/G,SAAWb,EAAMj5H,KACvBia,EAAMja,KAAOi5H,EAAMhQ,UACnBhvG,EAAM3f,KAAO2+H,EAAM3+H,I,CAI3B,QAAakqD,GAATvqC,EACA,MAAM,IAAI1f,MAAM,eAGpBkuD,EAAO5/C,KAAKoR,GACZ3d,EAAKuM,KAAKowH,EAAMhQ,WAAa,QAG1BhB,GAAOc,UAAUtgE,EAAQnsD,EACpC,CAKM,MAAOy9H,WAAmB/Q,GAI5BxvG,WAAAA,CAAYy/G,EAAcv6H,EAAgBuqH,GAGtCngB,MAAM,QAFQmwB,EAAM3+H,KAAO,KAAOoE,GAAU,EAAIA,EAAQ,IAAM,IAEzCuqH,GADQ,IAAZvqH,GAAiBu6H,EAAM/P,SACCrtB,EAAA,qBAAAA,EAAA,sBACzCK,GAA6B3xF,KAAM,CAAE0uH,QAAOv6H,UAChD,CAEA4b,YAAAA,GAEI,MAAM0/G,EAAezvH,KAAK0uH,MAAM3+G,eAE1BgqC,EAAqB,GAC3B,IAAK,IAAIllD,EAAI,EAAGA,EAAImL,KAAK7L,OAAQU,IAC7BklD,EAAOz7C,KAAKmxH,GAEhB,OAAO11E,CACX,CAEA/oD,MAAAA,CAAOkuH,EAAgBpD,GACnB,MAAMpsG,EAAQ63G,GAAMgH,YAAYzS,EAAQ,SAEpCxiH,MAAMiG,QAAQmQ,IACd1P,KAAK4+G,YAAY,uBAAwBlvG,GAG7C,IAAInV,EAAQyF,KAAK7L,QAEF,IAAXoG,IACAA,EAAQmV,EAAMvb,OACd+qH,EAAOI,WAAW5vG,EAAMvb,SAG5BmmH,GAAoB5qG,EAAMvb,OAAQoG,EAAO,eAAiByF,KAAK0+G,UAAY,IAAK1+G,KAAK0+G,UAAY,KAEjG,IAAIiQ,EAAuB,GAC3B,IAAK,IAAI95H,EAAI,EAAGA,EAAI6a,EAAMvb,OAAQU,IAAO85H,EAAOrwH,KAAK0B,KAAK0uH,OAE1D,OAAOhkC,GAAKw0B,EAAQyP,EAAQj/G,EAChC,CAEA7f,MAAAA,CAAOswH,GACH,IAAI5lH,EAAQyF,KAAK7L,QACF,IAAXoG,IACAA,EAAQ4lH,EAAOM,YAOftG,GAAO5/G,EAAQqiH,IAAYuD,EAAO7E,WAAY,2BAC1C,iBAAkB,CAAEj0G,OAAQ84G,EAAOvkH,MAAOsuB,OAAQ3vB,EAAQqiH,GAAUzoH,OAAQgsH,EAAO7E,cAE3F,IAAIqT,EAAuB,GAC3B,IAAK,IAAI95H,EAAI,EAAGA,EAAI0F,EAAO1F,IAAO85H,EAAOrwH,KAAK,IAAImwH,GAAezuH,KAAK0uH,QAEtE,OAAOU,GAAOjP,EAAQwO,EAC1B,EC5LE,MAAOe,WAAqBjR,GAE9BxvG,WAAAA,CAAYyvG,GACRngB,MAAM,OAAQ,OAAQmgB,GAAW,EACrC,CAEA3uG,YAAAA,GACI,OAAO,CACX,CAEA/e,MAAAA,CAAOkuH,EAAgBpD,GACnB,MAAMpsG,EAAQ63G,GAAMgH,YAAYzS,EAAQ,QACxC,OAAOoD,EAAOI,WAAW5vG,EAAQ,EAAG,EACxC,CAEA7f,MAAAA,CAAOswH,GACH,QAASA,EAAOK,WACpB,ECfE,MAAOmP,WAA0BlR,GACnCxvG,WAAAA,CAAYlf,EAAc2uH,GACvBngB,MAAMxuG,EAAMA,EAAM2uH,GAAW,EAChC,CAEA3uG,YAAAA,GACI,MAAO,IACX,CAEA/e,MAAAA,CAAOkuH,EAAgBxvG,GACnBA,EAAQsrG,GAAatrG,GACrB,IAAIvb,EAAS+qH,EAAOI,WAAW5vG,EAAMvb,QAErC,OADAA,GAAU+qH,EAAOE,WAAW1vG,GACrBvb,CACX,CAEAtE,MAAAA,CAAOswH,GACH,OAAOA,EAAOC,UAAUD,EAAOM,aAAa,EAChD,EAME,MAAOmP,WAAmBD,GAC5B1gH,WAAAA,CAAYyvG,GACRngB,MAAM,QAASmgB,EACnB,CAEA7uH,MAAAA,CAAOswH,GACH,OAAO/E,GAAQ7c,MAAM1uG,OAAOswH,GAChC,EC3BE,MAAO0P,WAAwBpR,GAGjCxvG,WAAAA,CAAY9L,EAAcu7G,GACtB,IAAIjpH,EAAO,QAAU2G,OAAO+G,GAC5Bo7F,MAAM9oG,EAAMA,EAAMipH,GAAW,GAAOptB,EAAA,oBACpCK,GAAkC3xF,KAAM,CAAEmD,QAAQ,CAAEA,KAAM,UAC9D,CAEA4M,YAAAA,GACI,MAAQ,qEAAsE0F,UAAU,EAAG,EAAgB,EAAZzV,KAAKmD,KACxG,CAEAnS,MAAAA,CAAOkuH,EAAgBpD,GACnB,IAAIn/G,EAAOq+G,GAAauM,GAAMgH,YAAYzS,EAAQ97G,KAAKjQ,OAEvD,OADI4M,EAAKxI,SAAW6L,KAAKmD,MAAQnD,KAAK4+G,YAAY,wBAAyB9C,GACpEoD,EAAOE,WAAWziH,EAC7B,CAEA9M,MAAAA,CAAOswH,GACH,OAAO/E,GAAQ+E,EAAOC,UAAUpgH,KAAKmD,MACzC,EChCJ,MAAM2sH,GAAQ,IAAI9sE,WAAW,IAKvB,MAAO+sE,WAAkBtR,GAE3BxvG,WAAAA,CAAYyvG,GACRngB,MAAM,OAAQ,GAAImgB,GAAW,EACjC,CAEA3uG,YAAAA,GACI,OAAO,IACX,CAEA/e,MAAAA,CAAOkuH,EAAgBxvG,GAEnB,OADa,MAATA,GAAiB1P,KAAK4+G,YAAY,WAAYlvG,GAC3CwvG,EAAOE,WAAW0Q,GAC7B,CAEAjgI,MAAAA,CAAOswH,GAEH,OADAA,EAAOC,UAAU,GACV,IACX,ECdJ,MAAM1E,GAAO9B,OAAO,GACd+B,GAAO/B,OAAO,GACdoW,GAAiBpW,OAAO,sEAKxB,MAAOqW,WAAoBxR,GAI7BxvG,WAAAA,CAAY9L,EAAcmkH,EAAiB5I,GACvC,MAAMjpH,GAAS6xH,EAAS,MAAO,QAAkB,EAAPnkH,EAC1Co7F,MAAM9oG,EAAMA,EAAMipH,GAAW,GAAOptB,EAAA,oBAAAA,EAAA,sBAEpCK,GAA8B3xF,KAAM,CAAEmD,OAAMmkH,UAAU,CAAEnkH,KAAM,SAAUmkH,OAAQ,WACpF,CAEAv3G,YAAAA,GACI,OAAO,CACX,CAEA/e,MAAAA,CAAOkuH,EAAgBpD,GACnB,IAAIpsG,EAAQssG,GAAUuL,GAAMgH,YAAYzS,EAAQ97G,KAAKjQ,OAGjDmgI,EAAe5jE,GAAK0jE,GAAgBpT,KACxC,GAAI58G,KAAKsnH,OAAQ,CACb,IAAI6I,EAAS7jE,GAAK4jE,EAA2B,EAAZlwH,KAAKmD,KAAY,IAC9CuM,EAAQygH,GAAUzgH,IAAUygH,EAASxU,MACrC37G,KAAK4+G,YAAY,sBAAuB9C,GAE5CpsG,EAAQmsG,GAAOnsG,EAAO,I,MACfA,EAAQgsG,IAAQhsG,EAAQ48C,GAAK4jE,EAA0B,EAAZlwH,KAAKmD,QACvDnD,KAAK4+G,YAAY,sBAAuB9C,GAG5C,OAAOoD,EAAOI,WAAW5vG,EAC7B,CAEA7f,MAAAA,CAAOswH,GACH,IAAIzwG,EAAQ48C,GAAK6zD,EAAOK,YAAyB,EAAZxgH,KAAKmD,MAM1C,OAJInD,KAAKsnH,SACL53G,EjBpBN,SAAmBosG,EAAsBC,GAC3C,MAAMrsG,EAAQ2sG,GAAQP,EAAQ,SACxB12F,EAAQw0F,OAAOqC,GAAUF,EAAQ,UAOvC,GALA5B,GAAQzqG,GAAS0V,IAAWs2F,GAAM,WAAY,gBAAiB,CAC3Db,UAAW,WAAYsB,MAAO,WAAYzsG,MAAOosG,IAIjDpsG,GAAU0V,EAAQu2F,GAElB,UAAYjsG,GADEisG,IAAQv2F,GAASu2F,IACFA,IAGjC,OAAOjsG,CACX,CiBKoB0gH,CAAS1gH,EAAmB,EAAZ1P,KAAKmD,OAG1BuM,CACX,ECwBJ,SAAS2gH,GAAWC,EAAyBpmG,EAAgBtuB,EAAmB7H,EAAuBw8H,GAGnG,GAAe,eAAXD,GAAsC,wBAAXA,EAAkC,CAC7D,IAAIz7H,EAAI,EACR,IAAK,IAAIo3F,EAAI/hE,EAAS,EAAG+hE,EAAIrwF,EAAMzH,QAC3ByH,EAAMqwF,IAAM,IAAM,EADiBA,IAEvCp3F,IAEJ,OAAOA,C,CAKX,MAAe,YAAXy7H,EACO10H,EAAMzH,OAAS+1B,EAAS,EAI5B,CACX,CAiCO,MAAMsmG,GAAkF15H,OAAOo7G,OAAO,CACzG7hH,MA1DJ,SAAmBigI,EAAyBpmG,EAAgBtuB,EAAmB7H,EAAuBw8H,GAClGlW,IAAe,EAAO,+BAAFp4G,OAAkCioB,EAAO,MAAAjoB,OAAMquH,GAAW,QAAS10H,EAC3F,EAyDI60H,OAAQJ,GACRnkH,QAlCJ,SAAqBokH,EAAyBpmG,EAAgBtuB,EAAmB7H,EAAuBw8H,GAGpG,MAAe,aAAXD,GACAjW,GAAwC,kBAAlBkW,EAA4B,yCAA0C,eAAgBA,GAC5Gx8H,EAAOuK,KAAKiyH,GACL,IAIXx8H,EAAOuK,KAAK,OAGL+xH,GAAWC,EAAQpmG,EAAQtuB,GACtC,IAwBA,SAAS80H,GAAkBC,EAAmBv4G,GAC3B,MAAXA,IAAmBA,EAAUo4G,GAAengI,OAEhD,MAAMuL,EAAQ7K,GAAS4/H,EAAQ,SAEzB52E,EAAwB,GAC9B,IAAIllD,EAAI,EAGR,KAAMA,EAAI+G,EAAMzH,QAAQ,CAEpB,MAAM9C,EAAIuK,EAAM/G,KAGhB,GAAIxD,GAAK,IAAM,EAAG,CACd0oD,EAAOz7C,KAAKjN,GACZ,Q,CAIJ,IAAIu/H,EAA6B,KAC7BC,EAA8B,KAGlC,GAAmB,OAAV,IAAJx/H,GACDu/H,EAAc,EACdC,EAAe,SAGZ,GAAmB,OAAV,IAAJx/H,GACRu/H,EAAc,EACdC,EAAe,SAGZ,IAAmB,OAAV,IAAJx/H,GAIL,CAECwD,GAAKujB,EADU,OAAV,IAAJ/mB,GACY,sBAEA,aAFuBwD,EAAI,EAAG+G,EAAOm+C,GAItD,Q,CATA62E,EAAc,EACdC,EAAe,K,CAYnB,GAAIh8H,EAAI,EAAI+7H,GAAeh1H,EAAMzH,OAAQ,CACrCU,GAAKujB,EAAQ,UAAWvjB,EAAI,EAAG+G,EAAOm+C,GACtC,Q,CAIJ,IAAIiD,EAAqB3rD,GAAM,GAAM,EAAIu/H,EAAc,GAAM,EAE7D,IAAK,IAAI5yH,EAAI,EAAGA,EAAI4yH,EAAa5yH,IAAK,CAClC,IAAI26F,EAAW/8F,EAAM/G,GAGrB,GAAyB,MAAT,IAAX8jG,GAA0B,CAC3B9jG,GAAKujB,EAAQ,mBAAoBvjB,EAAG+G,EAAOm+C,GAC3CiD,EAAM,KACN,K,CAGJA,EAAOA,GAAO,EAAiB,GAAX27C,EACpB9jG,G,CAIQ,OAARmoD,IAGAA,EAAM,QACNnoD,GAAKujB,EAAQ,eAAgBvjB,EAAI,EAAI+7H,EAAah1H,EAAOm+C,EAAQiD,GAKjEA,GAAO,OAAUA,GAAO,MACxBnoD,GAAKujB,EAAQ,kBAAmBvjB,EAAI,EAAI+7H,EAAah1H,EAAOm+C,EAAQiD,GAKpEA,GAAO6zE,EACPh8H,GAAKujB,EAAQ,WAAYvjB,EAAI,EAAI+7H,EAAah1H,EAAOm+C,EAAQiD,GAIjEjD,EAAOz7C,KAAK0+C,G,CAGhB,OAAOjD,CACX,CASM,SAAU+2E,GAAYjtE,EAAatV,GACrC8rE,GAA+B,kBAATx2D,EAAmB,uBAAwB,MAAOA,GAE5D,MAARtV,KtBygBF,SAA0BA,GAC5B4rE,GAAOK,GAAgBllG,QAAQi5B,IAAS,EAAG,8CAA+C,wBAAyB,CAC/GssE,UAAW,6BAA8Bz0G,KAAM,CAAEmoC,SAEzD,CsB5gBQwiF,CAAgBxiF,GAChBsV,EAAMA,EAAI42D,UAAUlsE,IAGxB,IAAIwL,EAAwB,GAC5B,IAAK,IAAIllD,EAAI,EAAGA,EAAIgvD,EAAI1vD,OAAQU,IAAK,CACjC,MAAMxD,EAAIwyD,EAAI1J,WAAWtlD,GAEzB,GAAIxD,EAAI,IACJ0oD,EAAOz7C,KAAKjN,QAET,GAAIA,EAAI,KACX0oD,EAAOz7C,KAAMjN,GAAK,EAAK,KACvB0oD,EAAOz7C,KAAU,GAAJjN,EAAY,UAEtB,GAAoB,QAAX,MAAJA,GAAuB,CAC/BwD,IACA,MAAMupF,EAAKv6B,EAAI1J,WAAWtlD,GAE1BwlH,GAAexlH,EAAIgvD,EAAI1vD,QAA6B,SAAZ,MAALiqF,GAC/B,yBAA0B,MAAOv6B,GAGrC,MAAM09B,EAAO,QAAgB,KAAJlwF,IAAe,KAAY,KAAL+sF,GAC/CrkC,EAAOz7C,KAAMijF,GAAQ,GAAM,KAC3BxnC,EAAOz7C,KAAOijF,GAAQ,GAAM,GAAQ,KACpCxnC,EAAOz7C,KAAOijF,GAAQ,EAAK,GAAQ,KACnCxnC,EAAOz7C,KAAa,GAAPijF,EAAe,I,MAG5BxnC,EAAOz7C,KAAMjN,GAAK,GAAM,KACxB0oD,EAAOz7C,KAAOjN,GAAK,EAAK,GAAQ,KAChC0oD,EAAOz7C,KAAU,GAAJjN,EAAY,I,CAIjC,OAAO,IAAI2xD,WAAWjJ,EAC1B,CAuBM,SAAUi3E,GAAap1H,EAAkBwc,GAC3C,OAAqBs4G,GAAkB90H,EAAOwc,GApB5B+yC,IAAK8lE,GACfA,GAAa,MACN70H,OAAOC,aAAa40H,IAE/BA,GAAa,MACN70H,OAAOC,aACqB,OAA5B40H,GAAa,GAAM,MACC,OAAT,KAAZA,MAEPtnH,KAAK,GAYZ,CC/SM,MAAOunH,WAAoBvB,GAE7B1gH,WAAAA,CAAYyvG,GACRngB,MAAM,SAAUmgB,EACpB,CAEA3uG,YAAAA,GACI,MAAO,EACX,CAEA/e,MAAAA,CAAOkuH,EAAgBpD,GACnB,OAAOvd,MAAMvtG,OAAOkuH,EAAQ4R,GAAYvJ,GAAMgH,YAAYzS,EAAQ,WACtE,CAEAjsH,MAAAA,CAAOswH,GACH,OAAO6Q,GAAazyB,MAAM1uG,OAAOswH,GACrC,ECfE,MAAOgR,WAAmB1S,GAG5BxvG,WAAAA,CAAY0/G,EAAsBjQ,GAC9B,IAAIC,GAAU,EACd,MAAMtF,EAAuB,GAC7BsV,EAAOtjH,QAASqjH,IACRA,EAAM/P,UAAWA,GAAU,GAC/BtF,EAAM/6G,KAAKowH,EAAM3+H,QAIrBwuG,MAAM,QAFQ,SAAW8a,EAAM1vG,KAAK,KAAO,IAEtB+0G,EAAWC,GAASrtB,EAAA,sBACzCK,GAA6B3xF,KAAM,CAAE2uH,OAAQ73H,OAAOo7G,OAAOyc,EAAOnuH,UACtE,CAEAuP,YAAAA,GACI,MAAMmuC,EAAc,GACpBl+C,KAAK2uH,OAAOtjH,QAASqjH,IACjBxwE,EAAO5/C,KAAKowH,EAAM3+G,kBAItB,MAAMqhH,EAAcpxH,KAAK2uH,OAAO7jE,OAAO,CAAC0uD,EAAOkV,KAC3C,MAAMj5H,EAAOi5H,EAAMhQ,UAKnB,OAJIjpH,IACK+jH,EAAM/jH,KAAS+jH,EAAM/jH,GAAQ,GAClC+jH,EAAM/jH,MAEH+jH,GACsB,CAAC,GAclC,OAXAx5G,KAAK2uH,OAAOtjH,QAAQ,CAACqjH,EAAcjqH,KAC/B,IAAIhP,EAAOi5H,EAAMhQ,UACZjpH,GAA8B,IAAtB27H,EAAY37H,KAEZ,WAATA,IAAqBA,EAAO,WAEZ,MAAhByoD,EAAOzoD,KAEXyoD,EAAOzoD,GAAQyoD,EAAOz5C,OAGnB3N,OAAOo7G,OAAOh0D,EACzB,CAEAltD,MAAAA,CAAOkuH,EAAgBpD,GACnB,MAAMpsG,EAAQ63G,GAAMgH,YAAYzS,EAAQ,SACxC,OAAOpxB,GAAKw0B,EAAQl/G,KAAK2uH,OAAQj/G,EACrC,CAEA7f,MAAAA,CAAOswH,GACH,OAAOiP,GAAOjP,EAAQngH,KAAK2uH,OAC/B,ECpDE,SAAUn5H,GAAGka,GACf,OAAO62G,GAAUuK,GAAYphH,GACjC,C,OCqGA,SAAS2hH,GAAO9T,GACZ,MAAMxjE,EAAsB,IAAI/vC,IAEhC,OADAuzG,EAAMlyG,QAAS5U,GAAMsjD,EAAO3vC,IAAI3T,IACzBK,OAAOo7G,OAAOn4D,EACzB,CAEA,MACMu3E,GAAgBD,GADC,mCACqBjmH,MAAM,MAG5CmmH,GAAW,uEACXC,GAAUH,GAAOE,GAASnmH,MAAM,MAEhCqmH,GAAW,2DACXC,GAAUL,GAAOI,GAASrmH,MAAM,MAEhCumH,GAAe,0CACfC,GAAcP,GAAOM,GAAavmH,MAAM,MAMxCymH,GAAWR,GADC,CAAEI,GAAUE,GAHb,gBAGqCJ,IAAW5nH,KAAK,KACpCyB,MAAM,MAGlC0mH,GAAuC,CAC3C,IAAK,aAAc,IAAK,cACxB,IAAK,eAAgB,IAAK,gBAC1B,IAAK,QAAS,IAAK,MAIfC,GAAwB,IAAIn9C,OAAO,WACnCo9C,GAAoB,IAAIp9C,OAAO,aAC/Bq9C,GAAgB,IAAIr9C,OAAO,+BAG3Bs9C,GAAU,IAAIt9C,OAAO,gCACrBu9C,GAAY,IAAIv9C,OAAO,uDAAuD,IAAA6qC,GAAA,IAAAr+E,QAAAgxF,GAAA,IAAAhxF,QAAAixF,GAAA,IAAA9rF,QA8BpF,MAAM+rF,GAIF,UAAIpoG,GAAmB,OAAO8zF,GAAKyB,GAALz/G,KAAc,CAC5C,UAAI7L,GAAmB,OAAO6pH,GAAKoU,GAALpyH,MAAa7L,OAAS6pH,GAAKyB,GAALz/G,KAAc,CAElEiP,WAAAA,CAAYsjH,GAA4BzX,GAAA,KAAAuX,IANxCpZ,GAAA,KAAAwG,QAAO,GACPxG,GAAA,KAAAmZ,QAAO,GAMHrU,GAAK0B,GAALz/G,KAAe,GACf+9G,GAAKqU,GAALpyH,KAAeuyH,EAAO/xH,QAC1B,CAEAuoF,KAAAA,GAAuB,OAAO,IAAIupC,GAAYtU,GAAKoU,GAALpyH,MAAe,CAC7D6yE,KAAAA,GAAgBkrC,GAAK0B,GAALz/G,KAAe,EAAG,CAalCwyH,UAAAA,CAAWC,GACP,MAAMtmG,EAAMnsB,KAAK0yH,OACjB,GAAiB,YAAbvmG,EAAIp8B,OAAuB0iI,EAAQzrH,IAAImlB,EAAIlE,MAAS,MAAM,IAAIj4B,MAAM,oBAADiS,OAAsBkqB,EAAIlE,OACjG,OAAOjoB,KAAKm1E,MAAMltD,IACtB,CAGA0qG,OAAAA,CAAQ5iI,GACJ,GAAIiQ,KAAK0yH,OAAO3iI,OAASA,EAAM,CAC3B,MAAMo8B,EAAMnsB,KAAK0yH,OACjB,MAAM,IAAI1iI,MAAM,YAADiS,OAAclS,EAAK,UAAAkS,OAAUkqB,EAAIp8B,KAAK,KAAAkS,OAAKosC,KAAKC,UAAUniB,EAAIlE,O,CAEjF,OAAOjoB,KAAKm1E,MAAMltD,IACtB,CAGA2qG,QAAAA,GACI,MAAMzmG,EAAMnsB,KAAK0yH,OACjB,GAAiB,eAAbvmG,EAAIp8B,KAAyB,MAAM,IAAIC,MAAM,aACjD,MAAM+pD,EAASm/D,GAAAmZ,GAAAryH,KAAK6yH,IAAe96H,KAApBiI,KAAqBg+G,GAAKyB,GAALz/G,MAAe,EAAGmsB,EAAIziB,MAAQ,GAElE,OADAq0G,GAAK0B,GAALz/G,KAAemsB,EAAIziB,MAAQ,GACpBqwC,CACX,CAGA+4E,SAAAA,GACI,MAAM3mG,EAAMnsB,KAAK0yH,OAEjB,GAAiB,eAAbvmG,EAAIp8B,KAAyB,MAAM,IAAIC,MAAM,aAEjD,MAAM+pD,EAA6B,GAEnC,KAAMikE,GAAKyB,GAALz/G,MAAemsB,EAAIziB,MAAQ,GAAG,CAChC,MAAM0M,EAAOpW,KAAK0yH,OAAOK,SACzBh5E,EAAOz7C,KAAK46G,GAAAmZ,GAAAryH,KAAK6yH,IAAe96H,KAApBiI,KAAqBg+G,GAAKyB,GAALz/G,MAAe,EAAGoW,IACnD2nG,GAAK0B,GAALz/G,KAAeoW,E,CAKnB,OAFA2nG,GAAK0B,GAALz/G,KAAemsB,EAAIziB,MAAQ,GAEpBqwC,CACX,CAGA24E,IAAAA,GACI,GAAI1U,GAAKyB,GAALz/G,OAAgBg+G,GAAKoU,GAALpyH,MAAa7L,OAC7B,MAAM,IAAInE,MAAM,iBAEpB,OAAOguH,GAAKoU,GAALpyH,MAAag+G,GAAKyB,GAALz/G,MACxB,CAGAgzH,WAAAA,CAAYP,GACR,MAAMtmG,EAAMnsB,KAAKizH,SAAS,WAC1B,OAAe,MAAP9mG,GAAesmG,EAAQzrH,IAAImlB,GAAQA,EAAK,IACpD,CAGA8mG,QAAAA,CAASljI,GACL,GAAoB,IAAhBiQ,KAAK7L,OAAgB,OAAO,KAChC,MAAMg4B,EAAMnsB,KAAK0yH,OACjB,OAAQvmG,EAAIp8B,OAASA,EAAQo8B,EAAIlE,KAAM,IAC3C,CAGAktD,GAAAA,GAAG,IAAA+9C,EACC,MAAMn5E,EAAS/5C,KAAK0yH,OAEpB,OADA3U,GAAK0B,GAALz/G,MAAIkzH,EAAJlV,GAAKyB,GAALz/G,MAAYkzH,IAAAA,IACLn5E,CACX,CAEA/9C,QAAAA,GACI,MAAMu2H,EAAwB,GAC9B,IAAK,IAAI19H,EAAImpH,GAAKyB,GAALz/G,MAAcnL,EAAImpH,GAAKoU,GAALpyH,MAAa7L,OAAQU,IAAK,CACrD,MAAMs+H,EAAQnV,GAAKoU,GAALpyH,MAAanL,GAC3B09H,EAAOj0H,KAAK,GAAD2D,OAAKkxH,EAAMpjI,KAAK,KAAAkS,OAAKkxH,EAAMlrG,M,CAE1C,MAAO,gBAAPhmB,OAAwBswH,EAAO5oH,KAAK,KAAK,IAC7C,EAxGa,SAAAkpH,KAemC,IAAhC/9C,EAAApvE,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAe,EAAG0sF,EAAA1sF,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAa,EAC3C,OAAO,IAAI4sH,GAAYtU,GAAKoU,GAALpyH,MAAaQ,MAAMs0E,EAAMsd,GAAIjnC,IAAKtnD,GAC9C/M,OAAOo7G,OAAOp7G,OAAOyW,OAAO,CAAC,EAAI1J,EAAG,CACvC6F,MAAQ7F,EAAE6F,MAAQorE,EAClBs+C,SAAWvvH,EAAEuvH,SAAWt+C,EACxBi+C,SAAWlvH,EAAEkvH,SAAWj+C,MAGpC,CAsFJ,SAASu+C,GAAIprG,GACT,MAAMsqG,EAAuB,GAEvBnV,EAAcx4G,IAChB,MAAMuuH,EAASjpG,EAASjC,EAAK9zB,OAAUk6C,KAAKC,UAAUrmB,EAAKiC,IAAU,OACrE,MAAM,IAAIl6B,MAAM,iBAADiS,OAAmBkxH,EAAM,QAAAlxH,OAAQioB,EAAO,MAAAjoB,OAAM2C,KAGjE,IAAI0uH,EAA0B,GAC1BC,EAAwB,GAExBrpG,EAAS,EACb,KAAOA,EAASjC,EAAK9zB,QAAQ,CAGzB,IAAIq/H,EAAMvrG,EAAKxS,UAAUyU,GACrBxgB,EAAQ8pH,EAAI9pH,MAAMqoH,IAClBroH,IACAwgB,GAAUxgB,EAAM,GAAGvV,OACnBq/H,EAAMvrG,EAAKxS,UAAUyU,IAGzB,MAAMipG,EAAQ,CAAEx4D,MAAO24D,EAASn/H,OAAQi/H,UAAW,EAAGL,UAAW,EAAGrpH,OAAQ,EAAG3Z,KAAM,GAAIk4B,KAAM,GAAIiC,SAAQxa,OAAQ,GACnH6iH,EAAOj0H,KAAK60H,GAEZ,IAAIpjI,EAAQ+hI,GAAa0B,EAAI,KAAO,GACpC,GAAIzjI,GAKA,GAJAojI,EAAMpjI,KAAOA,EACbojI,EAAMlrG,KAAOurG,EAAI,GACjBtpG,IAEa,eAATn6B,EACAujI,EAASh1H,KAAKi0H,EAAOp+H,OAAS,GAC9Bo/H,EAAOj1H,KAAKi0H,EAAOp+H,OAAS,QAEzB,GAAY,eAARpE,EACiB,IAApBujI,EAASn/H,QAAgBipH,EAAW,4BAExC+V,EAAMzpH,MAAQ4pH,EAASn+C,MACHo9C,EAAOY,EAAMzpH,OAASA,MAAQ6oH,EAAOp+H,OAAS,EAClEg/H,EAAMx4D,QAENw4D,EAAMC,SAAWG,EAAOp+C,MACJo9C,EAAOY,EAAMC,UAAYL,SAAWR,EAAOp+H,OAAS,OAErE,GAAa,UAATpE,EACPojI,EAAMC,SAAWG,EAAOp+C,MACJo9C,EAAOY,EAAMC,UAAYL,SAAWR,EAAOp+H,OAAS,EACxEo/H,EAAOj1H,KAAKi0H,EAAOp+H,OAAS,QAEzB,GAAa,iBAATpE,EACPojI,EAAMpjI,KAAO,eAEV,GAAa,kBAATA,EAA0B,CAEjC,IAAI60H,EAAU2N,EAAOp9C,MAAgBltD,KACrC,GAAIsqG,EAAOp+H,OAAS,GAAwC,WAAnCo+H,EAAOA,EAAOp+H,OAAS,GAAGpE,KAAmB,CAClE,MAAM2f,EAAS6iH,EAAOp9C,MAAgBltD,KACtC28F,EAASl1G,EAAQk1G,EACG2N,EAAOA,EAAOp+H,OAAS,GAAKub,MAAQusG,GAAUvsG,E,CAEtE,GAAsB,IAAlB6iH,EAAOp+H,QAAmD,YAAnCo+H,EAAOA,EAAOp+H,OAAS,GAAGpE,KACjD,MAAM,IAAIC,MAAM,2BAEAuiI,EAAOA,EAAOp+H,OAAS,GAAK8zB,MAAQ28F,C,OAOhE,GADAl7G,EAAQ8pH,EAAI9pH,MAAMuoH,IACdvoH,EAAJ,CAII,GAHAypH,EAAMlrG,KAAOve,EAAM,GACnBwgB,GAAUipG,EAAMlrG,KAAK9zB,OAEjB09H,GAAS7qH,IAAImsH,EAAMlrG,MAAO,CAC1BkrG,EAAMpjI,KAAO,UACb,Q,CAGJ,GAAIojI,EAAMlrG,KAAKve,MAAMyoH,IAAY,CAC7BgB,EAAMpjI,KAAO,OACb,Q,CAGJojI,EAAMpjI,KAAO,I,KAdjB,CAmBA,GADA2Z,EAAQ8pH,EAAI9pH,MAAMsoH,KACdtoH,EAOJ,MAAM,IAAI1Z,MAAM,oBAADiS,OAAsBosC,KAAKC,UAAUklF,EAAI,IAAI,iBAAAvxH,OAAiBioB,IANzEipG,EAAMlrG,KAAOve,EAAM,GACnBypH,EAAMpjI,KAAO,SACbm6B,GAAUipG,EAAMlrG,KAAK9zB,M,EAO7B,OAAO,IAAIm+H,GAAYC,EAAOpnE,IAAKtnD,GAAM/M,OAAOo7G,OAAOruG,IAC3D,CAGA,SAAS4vH,GAAY1lH,EAA0B0kH,GAC3C,IAAIiB,EAA0B,GAC9B,IAAK,MAAM/iI,KAAO8hI,EAAQ1gI,OAClBgc,EAAI/G,IAAIrW,IAAQ+iI,EAASp1H,KAAK3N,GAEtC,GAAI+iI,EAASv/H,OAAS,EAAK,MAAM,IAAInE,MAAM,sBAADiS,OAAwByxH,EAAS/pH,KAAK,OACpF,CAKA,SAASgqH,GAAY5jI,EAAcwiI,GAC/B,GAAIA,EAAOS,YAAYtB,IAAU,CAC7B,MAAMkC,EAAUrB,EAAOp9C,MAAMltD,KAC7B,GAAI2rG,IAAY7jI,EACZ,MAAM,IAAIC,MAAM,YAADiS,OAAclS,EAAK,UAAAkS,OAAU2xH,G,CAIpD,OAAOrB,EAAOI,QAAQ,KAC1B,CAGA,SAASkB,GAAgBtB,EAAqBE,GAC1C,MAAMqB,EAAwB,IAAI9pH,IAClC,OAAa,CACT,MAAM4pH,EAAUrB,EAAOU,SAAS,WAEhC,GAAe,MAAXW,GAAoBnB,IAAYA,EAAQzrH,IAAI4sH,GAAa,MAG7D,GAFArB,EAAOp9C,MAEH2+C,EAAS9sH,IAAI4sH,GAAY,MAAM,IAAI5jI,MAAM,uBAADiS,OAAyBosC,KAAKC,UAAUslF,KACpFE,EAAS1pH,IAAIwpH,E,CAGjB,OAAO98H,OAAOo7G,OAAO4hB,EACzB,CAGA,SAASC,GAAkBxB,GACvB,IAAIyB,EAAYH,GAAgBtB,EAAQf,IAOxC,OAJAiC,GAAYO,EAAW3C,GAAO,8BAA8BjmH,MAAM,OAClEqoH,GAAYO,EAAW3C,GAAO,+BAA+BjmH,MAAM,OAG/D4oH,EAAUhtH,IAAI,QAAkB,OAChCgtH,EAAUhtH,IAAI,QAAkB,OAChCgtH,EAAUhtH,IAAI,WAAqB,UACnCgtH,EAAUhtH,IAAI,cAAwB,aAGtCgtH,EAAUhtH,IAAI,YAAsB,OAEjC,YACX,CAGA,SAASitH,GAAc1B,EAAqB2B,GACxC,OAAO3B,EAAOO,YAAY3nE,IAAKtnD,GAAMswH,GAAUr/C,KAAKjxE,EAAGqwH,GAC3D,CAGA,SAASE,GAAW7B,GAChB,GAAIA,EAAOU,SAAS,MAAO,CAEvB,GADAV,EAAOp9C,MACHo9C,EAAOU,SAAS,UAChB,OAAOjX,GAAUuW,EAAOp9C,MAAMltD,MAElC,MAAM,IAAIj4B,MAAM,c,CAEpB,OAAO,IACX,CAEA,SAASqkI,GAAW9B,GAChB,GAAIA,EAAOp+H,OACP,MAAM,IAAInE,MAAM,+BAADiS,OAAiCswH,EAAOroG,OAAO,MAAAjoB,OAAMswH,EAAOv2H,YAEnF,CA3LCs4H,GAzGKhC,GAsSN,MAAMiC,GAAiB,IAAI3/C,OAAO,sBAElC,SAAS4/C,GAAgBzkI,GACrB,MAAM2Z,EAAQ3Z,EAAK2Z,MAAMyoH,IAEzB,GADA9X,GAAe3wG,EAAO,eAAgB,OAAQ3Z,GACjC,SAATA,EAAmB,MAAO,UAC9B,GAAa,QAATA,EAAkB,MAAO,SAE7B,GAAI2Z,EAAM,GAAI,CAEV,MAAMvV,EAAS+qD,SAASx1C,EAAM,IAC9B2wG,GAA0B,IAAXlmH,GAAgBA,GAAU,GAAI,uBAAwB,OAAQpE,E,MAE1E,GAAI2Z,EAAM,GAAI,CAEjB,MAAMvG,EAAO+7C,SAASx1C,EAAM,IAC5B2wG,GAAwB,IAATl3G,GAAcA,GAAQ,KAAQA,EAAO,IAAO,EAAG,wBAAyB,OAAQpT,E,CAGnG,OAAOA,CACX,CAGA,MAAMgtH,GAAS,CAAC,EAeVziB,GAAW5jG,OAAOC,IAAI,oBAEtB89H,GAAoB,qBACpBC,GAAwB,iBACxBC,GAAwB,iBACxBC,GAA8B,uBAC9BC,GAA2B,oBAC3BC,GAA2B,oBAC3BC,GAAyB,kBAE/B,IAAAC,GAAA,IAAAzuF,QAGM,MAAO4tF,GAkDTllH,WAAAA,CAAY2rG,EAAYnlH,EAAc1F,EAAcw/H,EAAkB0F,EAAyBC,EAA6ClN,EAA4BmN,GAMpK,GANmMra,GAAA,KAAAka,IAhDvM1jC,EAAA,oBAKAA,EAAA,oBAMAA,EAAA,wBAKAA,EAAA,uBAOAA,EAAA,0BAOAA,EAAA,2BAOAA,EAAA,6BAYIopB,GAAcE,EAAOmC,GAAQ,aAC7BjmH,OAAOgX,eAAe9N,KAAMs6F,GAAU,CAAE5qF,MAAO+kH,KAE3CS,IAAcA,EAAap+H,OAAOo7G,OAAOgjB,EAAW10H,UAEvC,UAAb+uH,GACA,GAAmB,MAAfvH,GAAwC,MAAjBmN,EACvB,MAAM,IAAInlI,MAAM,SAEjB,GAAmB,MAAfg4H,GAAwC,MAAjBmN,EAC9B,MAAM,IAAInlI,MAAM,IAGpB,GAAiB,UAAbu/H,GACA,GAAkB,MAAd2F,EAAsB,MAAM,IAAIllI,MAAM,SACvC,GAAkB,MAAdklI,EACP,MAAM,IAAIllI,MAAM,IAGpB2hG,GAA4B3xF,KAAM,CAC9BvK,OAAM1F,OAAMw/H,WAAU0F,UAASC,WAAAA,EAAYlN,cAAamN,iBAEhE,CAaA7vH,MAAAA,CAAOA,GAEH,GADc,MAAVA,IAAkBA,EAAS,WAChB,SAAXA,EAAmB,CACnB,MAAM7P,EAAOuK,KAAKvK,MAAQ,GAE1B,GAAIuK,KAAKT,UAAW,CAChB,MAAMw6C,EAAS1L,KAAKuZ,MAAM5nD,KAAKm1H,cAAc7vH,OAAO,SAGpD,OAFAy0C,EAAOtkD,KAAOA,EACdskD,EAAOhqD,MAAQ,IAAJkS,OAAUjC,KAAKgoH,YAAc,EAAI,GAAI5rH,OAAO4D,KAAKgoH,aAAY,KACjE35E,KAAKC,UAAUyL,E,CAG1B,MAAMA,EAAc,CAChBhqD,KAA0B,UAAlBiQ,KAAKuvH,SAAwB,QAASvvH,KAAKjQ,KACnD0F,QAQJ,MAJ6B,mBAAlBuK,KAAKi1H,UAA0Bl7E,EAAOk7E,QAAUj1H,KAAKi1H,SAC5Dj1H,KAAKo1H,YACLr7E,EAAOm7E,WAAal1H,KAAKk1H,WAAW/pE,IAAK95D,GAAMg9C,KAAKuZ,MAAMv2D,EAAEiU,OAAOA,MAEhE+oC,KAAKC,UAAUyL,E,CAG1B,IAAIA,EAAS,GAuBb,OApBI/5C,KAAKT,WACLw6C,GAAU/5C,KAAKm1H,cAAc7vH,OAAOA,GACpCy0C,GAAU,IAAJ93C,OAAUjC,KAAKgoH,YAAc,EAAI,GAAI5rH,OAAO4D,KAAKgoH,aAAY,MAE/DhoH,KAAKo1H,UACLr7E,GAAU,IAAM/5C,KAAKk1H,WAAW/pE,IAC3BkqE,GAASA,EAAK/vH,OAAOA,IACxBqE,KAAiB,SAAXrE,EAAqB,KAAM,KAAO,IAE1Cy0C,GAAU/5C,KAAKjQ,KAIR,YAAXuV,KACqB,IAAjBtF,KAAKi1H,UAAoBl7E,GAAU,YACxB,SAAXz0C,GAAqBtF,KAAKvK,OAC1BskD,GAAU,IAAM/5C,KAAKvK,OAItBskD,CACX,CAQAx6C,OAAAA,GACI,MAA0B,UAAlBS,KAAKuvH,QACjB,CAQA6F,OAAAA,GACI,MAA0B,UAAlBp1H,KAAKuvH,QACjB,CAQA+F,WAAAA,GACI,OAAwB,MAAhBt1H,KAAKi1H,OACjB,CAMAM,IAAAA,CAAK7lH,EAAYhX,GACb,GAAIsH,KAAKT,UAAW,CAChB,IAAKjG,MAAMiG,QAAQmQ,GAAU,MAAM,IAAI1f,MAAM,uBAC7C,IAA0B,IAAtBgQ,KAAKgoH,aAAsBt4G,EAAMvb,SAAW6L,KAAKgoH,YACjD,MAAM,IAAIh4H,MAAM,yBAEpB,MAAMwlI,EAAQx1H,KACd,OAAO0P,EAAMy7C,IAAKvgD,GAAO4qH,EAAML,cAAcI,KAAK3qH,EAAGlS,G,CAGzD,GAAIsH,KAAKo1H,UAAW,CAChB,IAAK97H,MAAMiG,QAAQmQ,GAAU,MAAM,IAAI1f,MAAM,uBAC7C,GAAI0f,EAAMvb,SAAW6L,KAAKk1H,WAAW/gI,OACjC,MAAM,IAAInE,MAAM,yBAEpB,MAAMwlI,EAAQx1H,KACd,OAAO0P,EAAMy7C,IAAI,CAACvgD,EAAG/V,IAAO2gI,EAAMN,WAAWrgI,GAAG0gI,KAAK3qH,EAAGlS,G,CAG5D,OAAOA,EAAQsH,KAAKjQ,KAAM2f,EAC9B,CAuEA,eAAM+lH,CAAU/lH,EAAYhX,GACxB,MAAMg9H,EAAiC,GACjC37E,EAAkB,CAAErqC,GAK1B,OAJAwpG,GAAA8b,GAAAh1H,KAAK21H,IAAU59H,KAAfiI,KAAgB01H,EAAUhmH,EAAOhX,EAAUgX,IACvCqqC,EAAO,GAAKrqC,IAEZgmH,EAASvhI,cAAgBy8B,QAAQ+2E,IAAI+tB,GAClC37E,EAAO,EAClB,CAQA,WAAO+6B,CAAKvkF,EAAU2jI,GAClB,GAAIC,GAAUyB,YAAYrlI,GAAQ,OAAOA,EAEzC,GAAoB,kBAATA,EACP,IACI,OAAO4jI,GAAUr/C,KAAKu+C,GAAI9iI,GAAM2jI,E,CAClC,MAAO7jI,GACLgqH,IAAe,EAAO,qBAAsB,MAAO9pH,E,MAGpD,GAAIA,aAAe+hI,GAAa,CACnC,IAAIviI,EAAO,GAAIw/H,EAAW,GACtBsG,EAAiC,KAEjChC,GAAgBtjI,EAAK8gI,GAAO,CAAE,WAAYrqH,IAAI,UAAYzW,EAAI0iI,SAAS,eAEvE1D,EAAW,QACXsG,EAAQtlI,EAAIuiI,YAAY3nE,IAAKtnD,GAAMswH,GAAUr/C,KAAKjxE,IAClD9T,EAAO,SAAHkS,OAAa4zH,EAAM1qE,IAAK95D,GAAMA,EAAEiU,UAAUqE,KAAK,KAAK,OAGxD5Z,EAAOykI,GAAgBjkI,EAAIoiI,QAAQ,SACnCpD,EAAWx/H,GAIf,IAAIolI,EAAmC,KACnCnN,EAA6B,KAEjC,KAAOz3H,EAAI4D,QAAU5D,EAAI0iI,SAAS,YAAY,CAC1C,MAAM6C,EAAUvlI,EAAI4kF,MACpBggD,EAAgB,IAAIhB,GAAUpX,GAAQ,GAAIhtH,EAAMw/H,EAAU,KAAMsG,EAAO7N,EAAamN,GACpFnN,EAAc8N,EAAQpmH,MACtB3f,GAAQ+lI,EAAQ7tG,KAChBsnG,EAAW,QACXsG,EAAQ,I,CAGZ,IAAIZ,EAA0B,KAE9B,GADiBpB,GAAgBtjI,EAAKqhI,IACzB5qH,IAAI,WAAY,CACzB,IAAKktH,EAAgB,MAAM,IAAIlkI,MAAM,IACrCilI,GAAU,C,CAGd,MAAMx/H,EAAQlF,EAAI0iI,SAAS,MAAQ1iI,EAAI4kF,MAAMltD,KAAM,GAEnD,GAAI13B,EAAI4D,OAAU,MAAM,IAAInE,MAAM,mBAElC,OAAO,IAAImkI,GAAUpX,GAAQtnH,EAAM1F,EAAMw/H,EAAU0F,EAASY,EAAO7N,EAAamN,E,CAGpF,MAAM1/H,EAAOlF,EAAIkF,KACjB4kH,IAAgB5kH,GAA0B,kBAAVA,GAAsBA,EAAKiU,MAAMwoH,IAC7D,eAAgB,WAAYz8H,GAEhC,IAAIw/H,EAAU1kI,EAAI0kI,QACH,MAAXA,IACA5a,GAAe6Z,EAAc,8BAA+B,cAAe3jI,EAAI0kI,SAC/EA,IAAYA,GAGhB,IAAIllI,EAAOQ,EAAIR,KAEXgmI,EAAahmI,EAAK2Z,MAAM6qH,IAC5B,GAAIwB,EAAY,CACZ,MAAM/N,EAAc9oE,SAAS62E,EAAW,IAAM,MACxCZ,EAAgBhB,GAAUr/C,KAAK,CACjC/kF,KAAMgmI,EAAW,GACjBb,WAAY3kI,EAAI2kI,aAGpB,OAAO,IAAIf,GAAUpX,GAAQtnH,GAAQ,GAAI1F,EAAM,QAASklI,EAAS,KAAMjN,EAAamN,E,CAGxF,GAAa,UAATplI,GAAoBA,EAAKqkG,WAAW,WAAyBrkG,EAAKqkG,WAAW,KAAmB,CAChG,MAAMyhC,EAA2B,MAAlBtlI,EAAI2kI,WAAsB3kI,EAAI2kI,WAAW/pE,IAAK95D,GAAW8iI,GAAUr/C,KAAKzjF,IAAK,KAG5F,OAFc,IAAI8iI,GAAUpX,GAAQtnH,GAAQ,GAAI1F,EAAM,QAASklI,EAASY,EAAO,KAAM,K,CAOzF,OAFA9lI,EAAOykI,GAAgBjkI,EAAIR,MAEpB,IAAIokI,GAAUpX,GAAQtnH,GAAQ,GAAI1F,EAAMA,EAAMklI,EAAS,KAAM,KAAM,KAC9E,CAKA,kBAAOW,CAAYlmH,GACf,OAAQA,GAASA,EAAM4qF,MAAcm6B,EACzC,EAQJ,SAAAkB,GAzLeD,EAAgChmH,EAAYhX,EAAiC2W,GAEpF,GAAIrP,KAAKT,UAAW,CAChB,IAAKjG,MAAMiG,QAAQmQ,GAAU,MAAM,IAAI1f,MAAM,uBAC7C,IAA0B,IAAtBgQ,KAAKgoH,aAAsBt4G,EAAMvb,SAAW6L,KAAKgoH,YACjD,MAAM,IAAIh4H,MAAM,yBAEpB,MAAMgmI,EAAYh2H,KAAKm1H,cAEjBp7E,EAASrqC,EAAMlP,QAOrB,OANAu5C,EAAO1uC,QAAQ,CAACqE,EAAOjL,KACnBy0G,GAAA8b,GAAAgB,EAAUL,IAAU59H,KAApBi+H,EAAqBN,EAAUhmH,EAAOhX,EAAUgX,IAC5CqqC,EAAOt1C,GAASiL,WAGxBL,EAAS0qC,E,CAIb,GAAI/5C,KAAKo1H,UAAW,CAChB,MAAMF,EAAal1H,KAAKk1H,WAGxB,IAAIn7E,EACJ,GAAIzgD,MAAMiG,QAAQmQ,GACdqqC,EAASrqC,EAAMlP,YAEZ,CACH,GAAa,MAATkP,GAAmC,kBAAXA,EACxB,MAAM,IAAI1f,MAAM,uBAGpB+pD,EAASm7E,EAAW/pE,IAAK70C,IACrB,IAAKA,EAAM7gB,KAAQ,MAAM,IAAIzF,MAAM,mDACnC,KAAMsmB,EAAM7gB,QAAQia,GAChB,MAAM,IAAI1f,MAAM,+BAADiS,OAAiCqU,EAAM7gB,OAE1D,OAAOia,EAAM4G,EAAM7gB,O,CAI3B,GAAIskD,EAAO5lD,SAAW6L,KAAKk1H,WAAW/gI,OAClC,MAAM,IAAInE,MAAM,yBASpB,OANA+pD,EAAO1uC,QAAQ,CAACqE,EAAOjL,KAAS,IAAAwxH,EAC5B/c,GAAA8b,GAAAiB,EAAAf,EAAWzwH,GAAOkxH,IAAU59H,KAAAk+H,EAACP,EAAUhmH,EAAOhX,EAAUgX,IACpDqqC,EAAOt1C,GAASiL,WAGxBL,EAAS0qC,E,CAIb,MAAMA,EAASrhD,EAAQsH,KAAKjQ,KAAM2f,GAC9BqqC,EAAO/oB,KACP0kG,EAASp3H,KAAM69F,iBAAmB9sF,QAAe0qC,EAAS,CAA3CoiD,IAEf9sF,EAAS0qC,EAEjB,CAgIE,MAAgB1hD,GAclB4W,WAAAA,CAAY2rG,EAAY7qH,EAAoBmmI,GAb5C5kC,EAAA,oBAKAA,EAAA,sBASIopB,GAAcE,EAAOmC,GAAQ,YAE7BprB,GAA2B3xF,KAAM,CAAEjQ,OAAMmmI,OADzCA,EAASp/H,OAAOo7G,OAAOgkB,EAAO11H,UAElC,CAWA,WAAOs0E,CAAKvkF,GACR,GAAoB,kBAATA,EAAmB,CAG1B,IACI8H,GAASy8E,KAAKzmC,KAAKuZ,MAAMr3D,G,CAC3B,MAAOsH,IAAI,CAGb,OAAOQ,GAASy8E,KAAKu+C,GAAI9iI,G,CAG7B,GAAIA,aAAe+hI,GAAa,CAK5B,OAFa/hI,EAAIyiI,YAAYtB,KAGzB,IAAK,cAAe,OAAOyE,GAAoBrhD,KAAKvkF,GACpD,IAAK,QAAS,OAAO6lI,GAActhD,KAAKvkF,GACxC,IAAK,QAAS,OAAO8lI,GAAcvhD,KAAKvkF,GACxC,IAAK,WAAY,IAAK,UAClB,OAAO+lI,GAAiBxhD,KAAKvkF,GACjC,IAAK,WAAY,OAAOgmI,GAAiBzhD,KAAKvkF,GAC9C,IAAK,SAAU,OAAOimI,GAAe1hD,KAAKvkF,G,MAG3C,GAAoB,kBAATA,EAAmB,CAGjC,OAAQA,EAAIR,MACR,IAAK,cAAe,OAAOomI,GAAoBrhD,KAAKvkF,GACpD,IAAK,QAAS,OAAO6lI,GAActhD,KAAKvkF,GACxC,IAAK,QAAS,OAAO8lI,GAAcvhD,KAAKvkF,GACxC,IAAK,WAAY,IAAK,UAClB,OAAO+lI,GAAiBxhD,KAAKvkF,GACjC,IAAK,WAAY,OAAOgmI,GAAiBzhD,KAAKvkF,GAC9C,IAAK,SAAU,OAAOimI,GAAe1hD,KAAKvkF,GAG9C4pH,IAAO,EAAO,qBAAFl4G,OAAwB1R,EAAIR,MAAS,wBAAyB,CACtE8qH,UAAW,iB,CAInBR,IAAe,EAAO,8BAA+B,MAAO9pH,EAChE,CAKA,oBAAOkmI,CAAc/mH,GACjB,OAAOymH,GAAoBO,WAAWhnH,EAC1C,CAKA,cAAOmqG,CAAQnqG,GACX,OAAO0mH,GAAcM,WAAWhnH,EACpC,CAKA,cAAOinH,CAAQjnH,GACX,OAAO2mH,GAAcK,WAAWhnH,EACpC,CAKA,iBAAOknH,CAAWlnH,GACd,OAAO6mH,GAAiBG,WAAWhnH,EACvC,CAKA,eAAOmnH,CAASnnH,GACZ,OAAO8mH,GAAeE,WAAWhnH,EACrC,EAOE,MAAgBonH,WAAsBz+H,GASxC4W,WAAAA,CAAY2rG,EAAY7qH,EAAoB0F,EAAcygI,GACtD33B,MAAMqc,EAAO7qH,EAAMmmI,GATvB5kC,EAAA,oBAUI+oB,GAAgC,kBAAV5kH,GAAsBA,EAAKiU,MAAMwoH,IACnD,qBAAsB,OAAQz8H,GAClCygI,EAASp/H,OAAOo7G,OAAOgkB,EAAO11H,SAC9BmxF,GAAgC3xF,KAAM,CAAEvK,QAC5C,EAGJ,SAASshI,GAAWzxH,EAAoBkzC,GACpC,MAAO,IAAMA,EAAO2S,IAAK/zD,GAAMA,EAAEkO,OAAOA,IAASqE,KAAiB,SAAXrE,EAAqB,KAAM,KAAO,GAC7F,CAKM,MAAO8wH,WAAsBU,GAI/B7nH,WAAAA,CAAY2rG,EAAYnlH,EAAcygI,GAClC33B,MAAMqc,EAAO,QAASnlH,EAAMygI,GAC5Bp/H,OAAOgX,eAAe9N,KAAMs6F,GAAU,CAAE5qF,MAAOglH,IACnD,CAKA,YAAIsC,GACA,OAAOxhI,GAAGwK,KAAKsF,OAAO,YAAYmQ,UAAU,EAAG,GACnD,CAKAnQ,MAAAA,CAAOA,GAEH,GADc,MAAVA,IAAkBA,EAAS,WAChB,SAAXA,EACA,OAAO+oC,KAAKC,UAAU,CAClBv+C,KAAM,QACN0F,KAAMuK,KAAKvK,KACXygI,OAAQl2H,KAAKk2H,OAAO/qE,IAAK92D,GAAUg6C,KAAKuZ,MAAMvzD,EAAMiR,OAAOA,OAInE,MAAMy0C,EAAwB,GAG9B,MAFe,YAAXz0C,GAAwBy0C,EAAOz7C,KAAK,SACxCy7C,EAAOz7C,KAAK0B,KAAKvK,KAAOshI,GAAWzxH,EAAQtF,KAAKk2H,SACzCn8E,EAAOpwC,KAAK,IACvB,CAKA,WAAOmrE,CAAKvkF,GACR,GAAI6lI,GAAcM,WAAWnmI,GAAQ,OAAOA,EAE5C,GAAoB,kBAATA,EACP,OAAO6lI,GAActhD,KAAKu+C,GAAI9iI,IAE3B,GAAIA,aAAe+hI,GAAa,CACnC,MAAM78H,EAAOk+H,GAAY,QAASpjI,GAC5B2lI,EAASjC,GAAc1jI,GAG7B,OAFA8jI,GAAW9jI,GAEJ,IAAI6lI,GAAcrZ,GAAQtnH,EAAMygI,E,CAG3C,OAAO,IAAIE,GAAcrZ,GAAQxsH,EAAIkF,KACjClF,EAAI2lI,OAAS3lI,EAAI2lI,OAAO/qE,IAAIgpE,GAAUr/C,MAAO,GACrD,CAMA,iBAAO4hD,CAAWhnH,GACd,OAAQA,GAASA,EAAM4qF,MAAco6B,EACzC,EAME,MAAO2B,WAAsBS,GAS/B7nH,WAAAA,CAAY2rG,EAAYnlH,EAAcygI,EAAkCe,GACpE14B,MAAMqc,EAAO,QAASnlH,EAAMygI,GAThC5kC,EAAA,yBAUIx6F,OAAOgX,eAAe9N,KAAMs6F,GAAU,CAAE5qF,MAAOilH,KAC/ChjC,GAAgC3xF,KAAM,CAAEi3H,aAC5C,CAKA,aAAIC,GACA,OAAO1hI,GAAGwK,KAAKsF,OAAO,WAC1B,CAKAA,MAAAA,CAAOA,GAEH,GADc,MAAVA,IAAkBA,EAAS,WAChB,SAAXA,EACA,OAAO+oC,KAAKC,UAAU,CAClBv+C,KAAM,QACNknI,UAAWj3H,KAAKi3H,UAChBxhI,KAAMuK,KAAKvK,KACXygI,OAAQl2H,KAAKk2H,OAAO/qE,IAAKt2D,GAAMw5C,KAAKuZ,MAAM/yD,EAAEyQ,OAAOA,OAI3D,MAAMy0C,EAAwB,GAI9B,MAHe,YAAXz0C,GAAwBy0C,EAAOz7C,KAAK,SACxCy7C,EAAOz7C,KAAK0B,KAAKvK,KAAOshI,GAAWzxH,EAAQtF,KAAKk2H,SACjC,YAAX5wH,GAAwBtF,KAAKi3H,WAAal9E,EAAOz7C,KAAK,aACnDy7C,EAAOpwC,KAAK,IACvB,CAKA,mBAAOwtH,CAAa1hI,EAAc+iD,GAC9BA,GAAUA,GAAU,IAAI2S,IAAK/zD,GAAM+8H,GAAUr/C,KAAK19E,IAElD,OADiB,IAAIi/H,GAActZ,GAAQtnH,EAAM+iD,GAAQ,GACzC0+E,SACpB,CAKA,WAAOpiD,CAAKvkF,GACR,GAAI8lI,GAAcK,WAAWnmI,GAAQ,OAAOA,EAE5C,GAAoB,kBAATA,EACP,IACI,OAAO8lI,GAAcvhD,KAAKu+C,GAAI9iI,G,CAChC,MAAOF,GACLgqH,IAAe,EAAO,yBAA0B,MAAO9pH,E,MAGxD,GAAIA,aAAe+hI,GAAa,CACnC,MAAM78H,EAAOk+H,GAAY,QAASpjI,GAC5B2lI,EAASjC,GAAc1jI,GAAK,GAC5B0mI,IAAcpD,GAAgBtjI,EAAK8gI,GAAO,CAAE,eAAgBrqH,IAAI,aAGtE,OAFAqtH,GAAW9jI,GAEJ,IAAI8lI,GAActZ,GAAQtnH,EAAMygI,EAAQe,E,CAGnD,OAAO,IAAIZ,GAActZ,GAAQxsH,EAAIkF,KACjClF,EAAI2lI,OAAS3lI,EAAI2lI,OAAO/qE,IAAK/zD,GAAW+8H,GAAUr/C,KAAK19E,GAAG,IAAQ,KAAO7G,EAAI0mI,UACrF,CAMA,iBAAOP,CAAWhnH,GACd,OAAQA,GAASA,EAAM4qF,MAAcq6B,EACzC,EAME,MAAOwB,WAA4B99H,GAerC4W,WAAAA,CAAY2rG,EAAY7qH,EAAoBmmI,EAAkCkB,EAAkBC,GAC5F94B,MAAMqc,EAAO7qH,EAAMmmI,GAdvB5kC,EAAA,uBAKAA,EAAA,mBAUIx6F,OAAOgX,eAAe9N,KAAMs6F,GAAU,CAAE5qF,MAAOklH,KAC/CjjC,GAAsC3xF,KAAM,CAAEo3H,UAASC,OAC3D,CAKA/xH,MAAAA,CAAOA,GAIH,GAHA60G,GAAiB,MAAV70G,GAA6B,YAAXA,EAAsB,0CAC3C,wBAAyB,CAAEu1G,UAAW,oBAE3B,SAAXv1G,EACA,OAAO+oC,KAAKC,UAAU,CAClBv+C,KAAM,cACNunI,gBAAkBt3H,KAAKo3H,QAAU,UAAW,YAC5CA,QAASp3H,KAAKo3H,QACdC,IAAmB,MAAZr3H,KAAKq3H,IAAer3H,KAAKq3H,SAAKp9E,EACrCi8E,OAAQl2H,KAAKk2H,OAAO/qE,IAAKt2D,GAAMw5C,KAAKuZ,MAAM/yD,EAAEyQ,OAAOA,OAI3D,MAAMy0C,EAAS,CAAC,cAAD93C,OAAiB80H,GAAWzxH,EAAQtF,KAAKk2H,UAGxD,OAFIl2H,KAAKo3H,SAAWr9E,EAAOz7C,KAAK,WAChB,MAAZ0B,KAAKq3H,KAAet9E,EAAOz7C,KAAK,IAAD2D,OAAMjC,KAAKq3H,IAAIr7H,aAC3C+9C,EAAOpwC,KAAK,IACvB,CAKA,WAAOmrE,CAAKvkF,GACR,GAAI4lI,GAAoBO,WAAWnmI,GAAQ,OAAOA,EAElD,GAAoB,kBAATA,EACP,IACI,OAAO4lI,GAAoBrhD,KAAKu+C,GAAI9iI,G,CACtC,MAAOF,GACLgqH,IAAe,EAAO,8BAA+B,MAAO9pH,E,MAG7D,GAAIA,aAAe+hI,GAAa,CACnCuB,GAAgBtjI,EAAK8gI,GAAO,CAAE,iBAC9B,MAAM6E,EAASjC,GAAc1jI,GACvB6mI,IAAYvD,GAAgBtjI,EAAK+gI,IAAetqH,IAAI,WACpDqwH,EAAMjD,GAAW7jI,GAGvB,OAFA8jI,GAAW9jI,GAEJ,IAAI4lI,GAAoBpZ,GAAQ,cAAemZ,EAAQkB,EAASC,E,CAG3E,OAAO,IAAIlB,GAAoBpZ,GAAQ,cACnCxsH,EAAI2lI,OAAS3lI,EAAI2lI,OAAO/qE,IAAIgpE,GAAUr/C,MAAO,KAC3CvkF,EAAI6mI,QAAqB,MAAX7mI,EAAI8mI,IAAe9mI,EAAI8mI,IAAK,KACpD,CAMA,iBAAOX,CAAWhnH,GACd,OAAQA,GAASA,EAAM4qF,MAAcs6B,EACzC,EAME,MAAO0B,WAAyBj+H,GAOlC4W,WAAAA,CAAY2rG,EAAYsb,EAAkCkB,GACtD74B,MAAMqc,EAAO,WAAYsb,GAN7B5kC,EAAA,uBAOIx6F,OAAOgX,eAAe9N,KAAMs6F,GAAU,CAAE5qF,MAAOmlH,KAC/CljC,GAAmC3xF,KAAM,CAAEo3H,WAC/C,CAKA9xH,MAAAA,CAAOA,GACH,MAAMvV,EAAgC,IAAvBiQ,KAAKk2H,OAAO/hI,OAAgB,UAAW,WAEtD,GAAe,SAAXmR,EAAmB,CACnB,MAAMgyH,EAAmBt3H,KAAKo3H,QAAU,UAAW,aACnD,OAAO/oF,KAAKC,UAAU,CAAEv+C,OAAMunI,mB,CAGlC,MAAO,GAAPr1H,OAAWlS,EAAK,MAAAkS,OAAMjC,KAAKo3H,QAAU,WAAY,GACrD,CAKA,WAAOtiD,CAAKvkF,GACR,GAAI+lI,GAAiBI,WAAWnmI,GAAQ,OAAOA,EAE/C,GAAoB,kBAATA,EACP,IACI,OAAO+lI,GAAiBxhD,KAAKu+C,GAAI9iI,G,CACnC,MAAOF,GACLgqH,IAAe,EAAO,4BAA6B,MAAO9pH,E,MAG3D,GAAIA,aAAe+hI,GAAa,CACnC,MAAMiF,EAAWhnI,EAAIyL,WAGrBq+G,GADmB9pH,EAAIyiI,YAAY3B,GAAO,CAAE,WAAY,aAC7B,mCAAoC,MAAOkG,GAKtE,GAAa,YAHAhnI,EAAIiiI,WAAWnB,GAAO,CAAE,WAAY,aAGzB,CACpB,MAAM6E,EAASjC,GAAc1jI,GAI7B,OAHA8pH,GAAiC,IAAlB6b,EAAO/hI,OAAc,gCAAiC,aAAc+hI,GACnFrC,GAAgBtjI,EAAK8gI,GAAO,CAAE,aAC9BgD,GAAW9jI,GACJ,IAAI+lI,GAAiBvZ,GAAQ,IAAK,E,CAK7C,IAAImZ,EAASjC,GAAc1jI,GACvB2lI,EAAO/hI,OACPkmH,GAAiC,IAAlB6b,EAAO/hI,QAAmC,UAAnB+hI,EAAO,GAAGnmI,KAC5C,0BAA2B,aAC3BmmI,EAAO/qE,IAAKt2D,GAAMA,EAAEyQ,OAAO,YAAYqE,KAAK,OAEhDusH,EAAS,CAAE/B,GAAUr/C,KAAK,UAG9B,MAAM0iD,EAAazD,GAAkBxjI,GAGrC,GAFA8pH,GAA8B,eAAfmd,GAA8C,YAAfA,EAA0B,+BAAgC,sBAAuBA,GAE3H3D,GAAgBtjI,EAAK8gI,GAAO,CAAE,aAAcrqH,IAAI,WAAY,CAC5D,MAAMywH,EAAUxD,GAAc1jI,GAC9B8pH,GAAkC,IAAnBod,EAAQtjI,QAAoC,UAApBsjI,EAAQ,GAAG1nI,KAC9C,2BAA4B,cAC5B0nI,EAAQtsE,IAAKt2D,GAAMA,EAAEyQ,OAAO,YAAYqE,KAAK,M,CAKrD,OAFA0qH,GAAW9jI,GAEJ,IAAI+lI,GAAiBvZ,GAAQmZ,EAAuB,YAAfsB,E,CAGhD,GAAiB,YAAbjnI,EAAIR,KACJ,OAAO,IAAIumI,GAAiBvZ,GAAQ,IAAK,GAG7C,GAAiB,aAAbxsH,EAAIR,KAAqB,CACzB,MAAMmmI,EAAS,CAAE/B,GAAUr/C,KAAK,UAC1BsiD,EAAmC,YAAxB7mI,EAAI+mI,gBACrB,OAAO,IAAIhB,GAAiBvZ,GAAQmZ,EAAQkB,E,CAGhD/c,IAAe,EAAO,+BAAgC,MAAO9pH,EACjE,CAMA,iBAAOmmI,CAAWhnH,GACd,OAAQA,GAASA,EAAM4qF,MAAcu6B,EACzC,EAOE,MAAO0B,WAAyBO,GA8BlC7nH,WAAAA,CAAY2rG,EAAYnlH,EAAc6hI,EAA6DpB,EAAkCuB,EAAmCJ,GACpK94B,MAAMqc,EAAO,WAAYnlH,EAAMygI,GA9BnC5kC,EAAA,wBAKAA,EAAA,uBAKAA,EAAA,+BAMAA,EAAA,uBAKAA,EAAA,mBAUIx6F,OAAOgX,eAAe9N,KAAMs6F,GAAU,CAAE5qF,MAAOolH,KAI/CnjC,GAAmC3xF,KAAM,CAAE03H,SAFL,SAApBJ,GAAkD,SAApBA,EAEKD,MAAKI,QAH1DA,EAAU3gI,OAAOo7G,OAAOulB,EAAQj3H,SAGmC42H,QAD9B,YAApBE,EAC2DA,mBAChF,CAKA,YAAIN,GACA,OAAOxhI,GAAGwK,KAAKsF,OAAO,YAAYmQ,UAAU,EAAG,GACnD,CAKAnQ,MAAAA,CAAOA,GAEH,GADc,MAAVA,IAAkBA,EAAS,WAChB,SAAXA,EACA,OAAO+oC,KAAKC,UAAU,CAClBv+C,KAAM,WACN0F,KAAMuK,KAAKvK,KACXiiI,SAAU13H,KAAK03H,SACfJ,gBAA4C,eAAzBt3H,KAAKs3H,gBAAoCt3H,KAAKs3H,qBAAiBr9E,EAClFm9E,QAASp3H,KAAKo3H,QACdC,IAAmB,MAAZr3H,KAAKq3H,IAAer3H,KAAKq3H,SAAKp9E,EACrCi8E,OAAQl2H,KAAKk2H,OAAO/qE,IAAKt2D,GAAMw5C,KAAKuZ,MAAM/yD,EAAEyQ,OAAOA,KACnDmyH,QAASz3H,KAAKy3H,QAAQtsE,IAAK8gC,GAAM59C,KAAKuZ,MAAMqkC,EAAE3mF,OAAOA,OAI7D,MAAMy0C,EAAwB,GAkB9B,MAhBe,YAAXz0C,GAAwBy0C,EAAOz7C,KAAK,YAExCy7C,EAAOz7C,KAAK0B,KAAKvK,KAAOshI,GAAWzxH,EAAQtF,KAAKk2H,SAEjC,YAAX5wH,IAC6B,eAAzBtF,KAAKs3H,iBACLv9E,EAAOz7C,KAAK0B,KAAKs3H,iBAGjBt3H,KAAKy3H,SAAWz3H,KAAKy3H,QAAQtjI,SAC7B4lD,EAAOz7C,KAAK,WACZy7C,EAAOz7C,KAAKy4H,GAAWzxH,EAAQtF,KAAKy3H,WAGxB,MAAZz3H,KAAKq3H,KAAet9E,EAAOz7C,KAAK,IAAD2D,OAAMjC,KAAKq3H,IAAIr7H,cAE/C+9C,EAAOpwC,KAAK,IACvB,CAKA,kBAAOguH,CAAYliI,EAAc+iD,GAC7BA,GAAUA,GAAU,IAAI2S,IAAK/zD,GAAM+8H,GAAUr/C,KAAK19E,IAElD,OADiB,IAAIm/H,GAAiBxZ,GAAQtnH,EAAM,OAAQ+iD,EAAQ,GAAK,MACzDw+E,QACpB,CAKA,WAAOliD,CAAKvkF,GACR,GAAIgmI,GAAiBG,WAAWnmI,GAAQ,OAAOA,EAE/C,GAAoB,kBAATA,EACP,IACI,OAAOgmI,GAAiBzhD,KAAKu+C,GAAI9iI,G,CACnC,MAAOF,GACLgqH,IAAe,EAAO,4BAA6B,MAAO9pH,E,MAG3D,GAAIA,aAAe+hI,GAAa,CACnC,MAAM78H,EAAOk+H,GAAY,WAAYpjI,GAC/B2lI,EAASjC,GAAc1jI,GACvBinI,EAAazD,GAAkBxjI,GAErC,IAAIknI,EAA4B,GAC5B5D,GAAgBtjI,EAAK8gI,GAAO,CAAE,aAAcrqH,IAAI,aAChDywH,EAAUxD,GAAc1jI,IAG5B,MAAM8mI,EAAMjD,GAAW7jI,GAIvB,OAFA8jI,GAAW9jI,GAEJ,IAAIgmI,GAAiBxZ,GAAQtnH,EAAM+hI,EAAYtB,EAAQuB,EAASJ,E,CAG3E,IAAIC,EAAkB/mI,EAAI+mI,gBAsB1B,OAnBuB,MAAnBA,IACAA,EAAkB,UAEW,mBAAlB/mI,EAAImnI,UACXJ,EAAkB,OACb/mI,EAAImnI,WACLJ,EAAkB,UACU,mBAAjB/mI,EAAI6mI,SAA2B7mI,EAAI6mI,UAC1CE,EAAkB,gBAGK,mBAAjB/mI,EAAI6mI,SAA2B7mI,EAAI6mI,UACjDE,EAAkB,eAOnB,IAAIf,GAAiBxZ,GAAQxsH,EAAIkF,KAAM6hI,EACzC/mI,EAAI2lI,OAAS3lI,EAAI2lI,OAAO/qE,IAAIgpE,GAAUr/C,MAAO,GAC7CvkF,EAAIknI,QAAUlnI,EAAIknI,QAAQtsE,IAAIgpE,GAAUr/C,MAAO,GACnC,MAAXvkF,EAAI8mI,IAAe9mI,EAAI8mI,IAAK,KACtC,CAMA,iBAAOX,CAAWhnH,GACd,OAAQA,GAASA,EAAM4qF,MAAcw6B,EACzC,EAME,MAAO0B,WAAuBM,GAKhC7nH,WAAAA,CAAY2rG,EAAYnlH,EAAcygI,GAClC33B,MAAMqc,EAAO,SAAUnlH,EAAMygI,GAC7Bp/H,OAAOgX,eAAe9N,KAAMs6F,GAAU,CAAE5qF,MAAOqlH,IACnD,CAKAzvH,MAAAA,GACI,MAAM,IAAItV,MAAM,QACpB,CAKA,WAAO8kF,CAAKvkF,GACR,GAAoB,kBAATA,EACP,IACI,OAAOimI,GAAe1hD,KAAKu+C,GAAI9iI,G,CACjC,MAAOF,GACLgqH,IAAe,EAAO,0BAA2B,MAAO9pH,E,MAGzD,GAAIA,aAAe+hI,GAAa,CACnC,MAAM78H,EAAOk+H,GAAY,SAAUpjI,GAC7B2lI,EAASjC,GAAc1jI,GAE7B,OADA8jI,GAAW9jI,GACJ,IAAIimI,GAAezZ,GAAQtnH,EAAMygI,E,CAG5C,OAAO,IAAIM,GAAezZ,GAAQxsH,EAAIkF,KAAMlF,EAAI2lI,OAAS3lI,EAAI2lI,OAAO/qE,IAAIgpE,GAAUr/C,MAAO,GAC7F,CAOA,iBAAO4hD,CAAWhnH,GACd,OAAQA,GAASA,EAAM4qF,MAAcy6B,EACzC,ECxiDJ,MAAM6C,GAAoC,IAAI36G,IAC9C26G,GAAa7pH,IAAI,EAAM,iBACvB6pH,GAAa7pH,IAAI,EAAM,gBACvB6pH,GAAa7pH,IAAI,GAAM,YACvB6pH,GAAa7pH,IAAI,GAAM,kBACvB6pH,GAAa7pH,IAAI,GAAM,oBACvB6pH,GAAa7pH,IAAI,GAAM,oBACvB6pH,GAAa7pH,IAAI,GAAM,mBACvB6pH,GAAa7pH,IAAI,GAAM,qBACvB6pH,GAAa7pH,IAAI,GAAM,iBACvB6pH,GAAa7pH,IAAI,GAAM,+BAEvB,MAAM8pH,GAAiB,IAAIjjD,OAAO,mBAC5BkjD,GAAkB,IAAIljD,OAAO,qBAGnC,IAAImjD,GAAgC,KAChCC,GAAsB,KAmE1B,IAAAC,GAAA,IAAA1xF,QAIM,MAAO2xF,GAAQjpH,WAAAA,GAAA6rG,GAAA,KAAAmd,GAAA,CAkDjBE,eAAAA,CAAgB9e,GACZ,MAAMsV,EAAuBtV,EAAMluD,IAAKp7D,GAASmpH,GAAA+e,GAAAj4H,KAAKo4H,IAASrgI,KAAdiI,KAAem0H,GAAUr/C,KAAK/kF,KAE/E,OADc,IAAIohI,GAAWxC,EAAQ,KACxB5+G,cACjB,CAOA/e,MAAAA,CAAOqoH,EAA0Cn7D,GAC7Co8D,GAAoBp8D,EAAO/pD,OAAQklH,EAAMllH,OAAQ,gCAEjD,MAAMw6H,EAAStV,EAAMluD,IAAKp7D,GAASmpH,GAAA+e,GAAAj4H,KAAKo4H,IAASrgI,KAAdiI,KAAem0H,GAAUr/C,KAAK/kF,KAC3D2+H,EAAS,IAAIyC,GAAWxC,EAAQ,KAEhCzP,EAAS,IAAIF,GAEnB,OADA0P,EAAM19H,OAAOkuH,EAAQhhE,GACdghE,EAAOviH,IAClB,CASA9M,MAAAA,CAAOwpH,EAA0C18G,EAAiB0jH,GAC9D,MAAMsO,EAAuBtV,EAAMluD,IAAKp7D,GAASmpH,GAAA+e,GAAAj4H,KAAKo4H,IAASrgI,KAAdiI,KAAem0H,GAAUr/C,KAAK/kF,KAE/E,OADc,IAAIohI,GAAWxC,EAAQ,KACxB9+H,OAAO,IAAIiwH,GAAOnjH,EAAM0jH,EAAO2X,IAChD,CAEA,8BAAOK,CAAwB3oH,GAC3B2qG,GAAiC,kBAAX3qG,GAAuB2hF,OAAOirB,UAAU5sG,GAAQ,qCAAsC,QAASA,GACrHsoH,GAAsBtoH,CAC1B,CAOA,sBAAO4oH,GAIH,OAHoB,MAAhBP,KACAA,GAAe,IAAIG,IAEhBH,EACX,CAOA,8BAAOQ,CAAwB38F,EAA6BmxD,EAAiEpwF,GACzH,OAjLR,SAAiCi/B,EAA6BmxD,EAAiEpwF,EAAwB67H,GACnJ,IAAI5zH,EAAU,sBAEV0rH,EAAwB,KAExBzqC,EAAuE,KAE3E,GAAIlpF,EAAM,CACNiI,EAAU,qBAEV,MAAMhJ,EAAQ7K,GAAS4L,GAGvB,GAFAA,EAAOy+G,GAAQz+G,GAEM,IAAjBf,EAAMzH,OACNyQ,GAAW,oDACX0rH,EAAS,sBAEN,GAAI10H,EAAMzH,OAAS,KAAO,EAC7ByQ,GAAW,uDAER,GAAmC,eAA/Bw2G,GAAQx/G,EAAM4E,MAAM,EAAG,IAE9B,IACI8vH,EAASkI,EAAS3oI,OAAO,CAAE,UAAY+L,EAAM4E,MAAM,IAAI,GACvDqlF,EAAS,CACLn1B,UAAW,gBACXj7D,KAAM,QACN2P,KAAM,CAAEkrH,IAEZ1rH,GAAW,KAAJ3C,OAAUosC,KAAKC,UAAUgiF,G,CAElC,MAAOjgI,GACLuU,GAAW,iD,MAGZ,GAAmC,eAA/Bw2G,GAAQx/G,EAAM4E,MAAM,EAAG,IAE9B,IACI,MAAMskB,EAAOusE,OAAOmnC,EAAS3oI,OAAO,CAAE,WAAa+L,EAAM4E,MAAM,IAAI,IACnEqlF,EAAS,CACLn1B,UAAW,iBACXj7D,KAAM,QACN2P,KAAM,CAAE0f,IAEZwrG,EAAS,gBAAHruH,OAAoB21H,GAAa3wH,IAAI6d,IAAS,UAAU,KAAA7iB,OAAK6iB,EAAK,KACxElgB,GAAW,KAAJ3C,OAAUquH,E,CACnB,MAAOjgI,GACLuU,GAAW,gC,MAGfA,GAAW,yB,CAInB,MAAM6zH,EAAwC,CAC1CrmC,GAAKrF,EAAGqF,GAAK+0B,GAAWp6B,EAAGqF,IAAK,KAChCz1F,KAAOowF,EAAGpwF,MAAQ,MAItB,OAFIowF,EAAGjY,OAAQ2jD,EAAY3jD,KAAOqyC,GAAWp6B,EAAGjY,OAEzCilC,GAAUn1G,EAAS,iBAAkB,CACxCg3B,SAAQj/B,OAAM2zH,SAAQmI,cAAaC,WAzDpB,KAyDgC7yC,UAEvD,CAkHe0yC,CAAwB38F,EAAQmxD,EAAIpwF,EAAMu7H,GAASI,kBAC9D,EACH,SAAAF,GA5Ga9hH,GACN,GAAIA,EAAM/W,UACN,OAAO,IAAIiwH,GAAWtW,GAAA+e,GAAAj4H,KAAKo4H,IAASrgI,KAAdiI,KAAesW,EAAM6+G,eAAgB7+G,EAAM0xG,YAAa1xG,EAAM7gB,MAGxF,GAAI6gB,EAAM8+G,UACN,OAAO,IAAIjE,GAAW76G,EAAM4+G,WAAW/pE,IAAK95D,GAAM6nH,GAAA+e,GAAAj4H,KAAKo4H,IAASrgI,KAAdiI,KAAe3O,IAAKilB,EAAM7gB,MAGhF,OAAQ6gB,EAAMi5G,UACV,IAAK,UACD,OAAO,IAAIf,GAAal4G,EAAM7gB,MAClC,IAAK,OACD,OAAO,IAAIi6H,GAAap5G,EAAM7gB,MAClC,IAAK,SACD,OAAO,IAAIy7H,GAAY56G,EAAM7gB,MACjC,IAAK,QACD,OAAO,IAAIm6H,GAAWt5G,EAAM7gB,MAChC,IAAK,GACD,OAAO,IAAIs6H,GAAUz5G,EAAM7gB,MAInC,IAAIiU,EAAQ4M,EAAMvmB,KAAK2Z,MAAMouH,IAC7B,GAAIpuH,EAAO,CACP,IAAIvG,EAAO+7C,SAASx1C,EAAM,IAAM,OAGhC,OAFA2wG,GAAwB,IAATl3G,GAAcA,GAAQ,KAAQA,EAAO,IAAO,EACvD,WAAauG,EAAM,GAAK,cAAe,QAAS4M,GAC7C,IAAI25G,GAAY9sH,EAAO,EAAiB,QAAbuG,EAAM,GAAe4M,EAAM7gB,K,CAKjE,GADAiU,EAAQ4M,EAAMvmB,KAAK2Z,MAAMmuH,IACrBnuH,EAAO,CACP,IAAIvG,EAAO+7C,SAASx1C,EAAM,IAE1B,OADA2wG,GAAwB,IAATl3G,GAAcA,GAAQ,GAAI,uBAAwB,QAASmT,GACnE,IAAIu5G,GAAgB1sH,EAAMmT,EAAM7gB,K,CAG3C4kH,IAAe,EAAO,eAAgB,OAAQ/jG,EAAMvmB,KACxD,CCnJE,SAAU4oI,GAAcjpH,GAC1B,OAAQA,GAAsC,oBAAtBA,EAAMy3G,UAClC,CAmCAhrB,eAAey8B,GAAa7hH,EAAak9F,GACrC,MAAMl6D,QAAek6D,EAKrB,OAJc,MAAVl6D,GAA6B,+CAAXA,IAClBogE,GAA0B,kBAAZpjG,EAAsB,oBAAqB,oBAAqB,CAAErH,MAAOqH,IACvFsjG,IAAe,EAAO,gEAAiE,SAAUtjG,IAE9FowG,GAAWptE,EACtB,CAuCM,SAAU8+E,GAAe9hH,EAAqB+hH,GAEhD,MAAuB,kBAAZ/hH,EACHA,EAAOrN,MAAM,qBAA+By9G,GAAWpwG,IAE3DojG,GAAmB,MAAZ2e,EAAkB,qCACrB,wBAAyB,CAAEje,UAAW,gBAEnC+d,GAAa7hH,EAAQ+hH,EAASC,YAAYhiH,KAE1C4hH,GAAc5hH,GACd6hH,GAAa7hH,EAAQA,EAAOowG,cAE5BpwG,GAAkC,oBAAjBA,EAAOia,KACxB4nG,GAAa7hH,EAAQA,QAGhCsjG,IAAe,EAAO,gCAAiC,SAAUtjG,EACrE,CC3GA,MAAMxiB,GAAU,IAAIyuD,WAAW,IAC/BzuD,GAAQijH,KAAK,GAEb,MAAMwhB,GAAQpf,QAAQ,GAChB8B,GAAO9B,OAAO,GACd+B,GAAO/B,OAAO,GACdoW,GAAiBpW,OAAO,sEA0D9B,MAAMqf,GAAUxc,GAAQd,GAAM,IACxBud,GAAWzc,GAAQf,GAAM,IAEzByd,GAA2C,CAC7C1jI,KAAM,SACNlC,QAAS,SACT6lI,QAAS,UACTC,kBAAmB,UACnBrhF,KAAM,WAGJshF,GAAkC,CACpC,OAAQ,UAAW,UAAW,oBAAqB,QAGvD,SAASC,GAAY5oI,GACjB,OAAO,SAAU+e,GAEb,OADA2qG,GAAiC,kBAAX3qG,EAAqB,4BAAFzN,OAA+BosC,KAAKC,UAAU39C,IAAK,UAAAsR,OAAetR,GAAQ+e,GAC5GA,CACX,CACJ,CAEA,MAAM8pH,GAAoD,CACtD/jI,KAAM8jI,GAAY,QAClBhmI,QAASgmI,GAAY,WACrBH,QAAS,SAAStd,GACd,MAAMpsG,EAAQssG,GAAUF,EAAQ,kBAEhC,OADAzB,GAAe3qG,GAAS,EAAG,mBAAoB,iBAAkBosG,GAC7DzqB,OAAOwvB,cAAcnxG,GAAiB2hF,OAAO3hF,GAC1CitG,GAAWjtG,EACtB,EACA2pH,kBAAmB,SAAS3pH,GACxB,IACI,OAAOy3G,GAAWz3G,GAAOpE,a,CAC3B,MAAOjb,GAAQ,CACjBgqH,IAAe,EAAO,2CAA4C,2BAA4B3qG,EAClG,EACAsoC,KAAM,SAAStoC,GACX,MAAM9T,EAAQ7K,GAAS2e,EAAO,eAE9B,OADA2qG,GAAgC,KAAjBz+G,EAAMzH,OAAe,8BAA+B,cAAeub,GAC3E0rG,GAAQx/G,EACnB,GAGJ,SAAS69H,GAAe1pI,GAEpB,CACI,MAAM2Z,EAAQ3Z,EAAK2Z,MAAM,kBACzB,GAAIA,EAAO,CACP,MAAM49G,EAAuB,KAAb59G,EAAM,GAEhB0b,EAAQ85B,SAASx1C,EAAM,IAC7B2wG,GAAej1F,EAAQ,IAAM,GAAe,IAAVA,GAAeA,GAAS,KAAO1b,EAAM,KAAOtN,OAAOgpB,GAAQ,wBAAyB,OAAQr1B,GAE9H,MAAM2pI,EAAcptE,GAAK0jE,GAAgB1I,EAAUliG,EAAQ,EAAIA,GACzDu0G,EAAcrS,GAAWoS,EAAc/d,IAAQqd,GAAQtd,GAE7D,OAAO,SAASI,GACZ,MAAMpsG,EAAQssG,GAAUF,EAAQ,SAIhC,OAFAzB,GAAe3qG,GAASiqH,GAAejqH,GAASgqH,EAAa,2BAAFz3H,OAA8BlS,GAAS,QAAS2f,GAEpG+sG,GAAQ6K,EAASzL,GAAOnsG,EAAO,KAAMA,EAAO,GACvD,C,EAKR,CACI,MAAMhG,EAAQ3Z,EAAK2Z,MAAM,gBACzB,GAAIA,EAAO,CACP,MAAM0b,EAAQ85B,SAASx1C,EAAM,IAG7B,OAFA2wG,GAAyB,IAAVj1F,GAAeA,GAAS,IAAM1b,EAAM,KAAOtN,OAAOgpB,GAAQ,sBAAuB,OAAQr1B,GAEjG,SAAS2f,GAGZ,OADA2qG,GADctpH,GAAS2e,GACFvb,SAAWixB,EAAO,sBAAFnjB,OAAyBlS,GAAS,QAAS2f,GArFhG,SAAqBA,GACjB,MAAM9T,EAAQ7K,GAAS2e,GACjBkqH,EAAYh+H,EAAMzH,OAAS,GACjC,OAAIylI,EACO33H,GAAO,CAAErG,EAAOrH,GAAQiM,MAAMo5H,KAElCxe,GAAQx/G,EACnB,CA+EuBi+H,CAAYnqH,EACvB,C,EAIR,OAAQ3f,GACJ,IAAK,UAAW,OAAO,SAAS2f,GAC5B,OAAO+rG,GAAa0L,GAAWz3G,GAAQ,GAC3C,EACA,IAAK,OAAQ,OAAO,SAASA,GACzB,OAAUA,EAAmBupH,GAAVC,EACvB,EACA,IAAK,QAAS,OAAO,SAASxpH,GAC1B,OAAO62G,GAAU72G,EACrB,EACA,IAAK,SAAU,OAAO,SAASA,GAC3B,OAAOla,GAAGka,EACd,EAGJ,OAAO,IACX,CAEA,SAASoqH,GAAWrkI,EAAcskI,GAC9B,MAAO,GAAP93H,OAAWxM,EAAK,KAAAwM,OAAK83H,EAAO5uE,IAAIwnC,IAAA,IAAC,KAAEl9F,EAAI,KAAE1F,GAAM4iG,EAAA,OAAM5iG,EAAO,IAAM0F,IAAOkU,KAAK,KAAK,IACvF,CAcA,SAASqwH,GAAWjqI,GAChB,MAAM2Z,EAAQ3Z,EAAK2Z,MAAM,+CACzB,OAAIA,EACO,CACHmM,KAAMnM,EAAM,GACZjF,MAAQiF,EAAM,GAAKA,EAAM,GACzB8gG,MAAO,CACH30F,KAAMnM,EAAM,GACZq5F,OAASr5F,EAAM,GAAKA,EAAM,GAC1BnP,MAAQmP,EAAM,GAAKw1C,SAASx1C,EAAM,KAAM,IAK7C,CAAEmM,KAAM9lB,EACnB,CAEA,IAAAkqI,GAAA,IAAA74F,QAAA84F,GAAA,IAAA94F,QAAA+4F,GAAA,IAAA/4F,QAAAg5F,GAAA,IAAA7zF,QAQM,MAAO8zF,GAgBT,SAAIhhB,GACA,OAAOhrE,KAAKuZ,MAAMo2D,GAAKic,GAALj6H,MACtB,CAaAiP,WAAAA,CAAYqrH,GAA6Cxf,GAAA,KAAAsf,IA9BzD9oC,EAAA,2BAUS2nB,GAAA,KAAAghB,QAAM,GASNhhB,GAAA,KAAAihB,QAAU,GAEVjhB,GAAA,KAAAkhB,QAAa,GAUlBpc,GAAKmc,GAALl6H,KAAkB,IAAIid,KACtB8gG,GAAKoc,GAALn6H,KAAqB,IAAIid,KAGzB,MAAM2qF,EAAkC,IAAI3qF,IAGtC49C,EAAsC,IAAI59C,IAG1Cs9G,EAAqC,IAAIt9G,IAEzCo8F,EAA+C,CAAC,EACtDviH,OAAO/E,KAAKuoI,GAAQjvH,QAAStb,IACzBspH,EAAMtpH,GAAQuqI,EAAOvqI,GAAMo7D,IAAIktC,IAAmB,IAAlB,KAAE5iG,EAAI,KAAE1F,GAAMsoG,GAGtC,KAAExiF,EAAI,MAAEpR,GAAUu1H,GAAWjqI,GAIjC,MAHa,QAAT8lB,GAAmBykH,EAAY,MAAKzkH,EAAO,UAClC,SAATA,GAAoBykH,EAAa,OAAKzkH,EAAO,WAE1C,CAAEpgB,OAAM1F,KAAO8lB,GAAQpR,GAAS,OAG3CmjG,EAAM75F,IAAIhe,EAAM,IAAIia,KACpB6wD,EAAQ9sD,IAAIhe,EAAM,IAClBwqI,EAASxsH,IAAIhe,EAAM,IAAIia,OAE3B+zG,GAAKkc,GAALj6H,KAAcquC,KAAKC,UAAU+qE,IAE7B,IAAK,MAAM5jH,KAAQ4jH,EAAO,CACtB,MAAM+X,EAA2B,IAAIpnH,IAErC,IAAK,MAAM6uF,KAASwgB,EAAM5jH,GAAO,CAG7B4kH,IAAgB+W,EAAYpqH,IAAI6xF,EAAMpjG,MAAO,2BAAFwM,OAA8BosC,KAAKC,UAAUuqD,EAAMpjG,MAAM,QAAAwM,OAAQosC,KAAKC,UAAU74C,IAAU,QAAS6kI,GAC9IlJ,EAAYhnH,IAAIyuF,EAAMpjG,MAGtB,MAAM85H,EAAWyK,GAAWnhC,EAAM9oG,MAAM8lB,KACxCwkG,GAAekV,IAAa95H,EAAM,8BAAFwM,OAAiCosC,KAAKC,UAAUihF,IAAc,QAAS+K,GAGvFb,GAAelK,KAG/BlV,GAAex/C,EAAQ7zD,IAAIuoH,GAAW,gBAAFttH,OAAmBosC,KAAKC,UAAUihF,IAAc,QAAS+K,GAG5Fz/D,EAAQ5zD,IAAIsoH,GAA4BjxH,KAAK7I,GAC7CmyG,EAAM3gG,IAAIxR,GAAsB2U,IAAImlH,G,EAK7C,MAAMiL,EAAelhI,MAAMw7E,KAAKja,EAAQ9oE,QAAQusD,OAAQrnD,GAAoD,IAA5C4jE,EAAQ5zD,IAAIhQ,GAAqB9C,QACjGkmH,GAAuC,IAAxBmgB,EAAarmI,OAAc,uBAAwB,QAASmmI,GAC3EjgB,GAAuC,IAAxBmgB,EAAarmI,OAAc,4CAAF8N,OAA+Cu4H,EAAarvE,IAAKtnD,GAAOwqC,KAAKC,UAAUzqC,IAAK8F,KAAK,OAAU,QAAS2wH,GAE5J3oC,GAAmC3xF,KAAM,CAAEy6H,YAAaD,EAAa,KAGrE,SAASE,EAAc3qI,EAAcsrF,GACjCg/B,IAAgBh/B,EAAMr0E,IAAIjX,GAAO,8BAAFkS,OAAiCosC,KAAKC,UAAUv+C,IAAU,QAASuqI,GAElGj/C,EAAMjxE,IAAIra,GAEV,IAAK,MAAMopB,KAAUyuF,EAAM3gG,IAAIlX,GAC3B,GAAK8qE,EAAQ7zD,IAAImS,GAAjB,CAGAuhH,EAAcvhH,EAAOkiE,GAGrB,IAAK,MAAMs/C,KAAWt/C,EACjBk/C,EAAStzH,IAAI0zH,GAAyBvwH,IAAI+O,E,CAInDkiE,EAAM/9D,OAAOvtB,EACjB,CACA2qI,CAAc16H,KAAKy6H,YAAa,IAAIzwH,KAGpC,IAAK,MAAQvU,EAAMsY,KAASwsH,EAAU,CAClC,MAAM/vE,EAAKlxD,MAAMw7E,KAAK/mE,GACtBy8C,EAAGsqC,OACHkpB,GAAKkc,GAALl6H,MAAgB+N,IAAItY,EAAMqkI,GAAWrkI,EAAM4jH,EAAM5jH,IAAS+0D,EAAGW,IAAKtnD,GAAMi2H,GAAWj2H,EAAGw1G,EAAMx1G,KAAK8F,KAAK,I,CAE9G,CAKAixH,UAAAA,CAAW7qI,GACP,IAAI8qI,EAAU7c,GAAKmc,GAALn6H,MAAmBiH,IAAIlX,GAKrC,OAJK8qI,IACDA,EAAU3hB,GAAAkhB,GAAAp6H,KAAK86H,IAAW/iI,KAAhBiI,KAAiBjQ,GAC3BiuH,GAAKmc,GAALn6H,MAAmB+N,IAAIhe,EAAM8qI,IAE1BA,CACX,CAgDAf,UAAAA,CAAWrkI,GACP,MAAMskD,EAASikE,GAAKkc,GAALl6H,MAAgBiH,IAAIxR,GAEnC,OADA4kH,GAAetgE,EAAQ,iBAAF93C,OAAoBosC,KAAKC,UAAU74C,IAAU,OAAQA,GACnEskD,CACX,CAKAghF,UAAAA,CAAWhrI,EAAc2f,GACrB,OAAO1P,KAAK46H,WAAW7qI,EAAhBiQ,CAAsB0P,EACjC,CAKAsrH,UAAAA,CAAWvlI,EAAcia,GACrB,OAAO62G,GAAUvmH,KAAK+6H,WAAWtlI,EAAMia,GAC3C,CAKA1e,MAAAA,CAAO0e,GACH,OAAO1P,KAAK+6H,WAAW/6H,KAAKy6H,YAAa/qH,EAC7C,CAKA2lC,IAAAA,CAAK3lC,GACD,OAAO1P,KAAKg7H,WAAWh7H,KAAKy6H,YAAa/qH,EAC7C,CAKAurH,MAAAA,CAAOlrI,EAAc2f,EAAYpU,GAIzB,GADgBm+H,GAAe1pI,GAChB,OAAOuL,EAASvL,EAAM2f,GAIzC,MAAM86F,EAAQwvB,GAAWjqI,GAAMy6G,MAC/B,GAAIA,EAEA,OADA6P,IAAgC,IAAjB7P,EAAMjwG,OAAgBiwG,EAAMjwG,QAAUmV,EAAMvb,OAAQ,0CAAF8N,OAA6CuoG,EAAMjwG,OAAU,QAASmV,GAChIA,EAAMy7C,IAAKvgD,GAAW5K,KAAKi7H,OAAOzwB,EAAMzH,OAAQn4F,EAAGtP,IAI9D,MAAMy+H,EAAS/5H,KAAKq5G,MAAMtpH,GAC1B,GAAIgqI,EACA,OAAOA,EAAOjvE,OAAO,CAAC0uD,EAAK5D,KAAoB,IAAlB,KAAEngH,EAAI,KAAE1F,GAAM6lH,EAEvC,OADA4D,EAAM/jH,GAAQuK,KAAKi7H,OAAOlrI,EAAM2f,EAAMja,GAAO6F,GACtCk+G,GACa,CAAC,GAG7Ba,IAAe,EAAO,iBAAFp4G,OAAoBlS,GAAS,OAAQA,EAC7D,CASAmrI,KAAAA,CAAMxrH,EAA4BpU,GAC9B,OAAO0E,KAAKi7H,OAAOj7H,KAAKy6H,YAAa/qH,EAAOpU,EAChD,CAKA,WAAOw5E,CAAKukC,GACR,OAAO,IAAIghB,GAAiBhhB,EAChC,CAKA,qBAAO8hB,CAAe9hB,GAClB,OAAOghB,GAAiBvlD,KAAKukC,GAAOohB,WACxC,CAKA,iBAAOO,CAAWvlI,EAAc4jH,EAA8C3pG,GAC1E,OAAO2qH,GAAiBvlD,KAAKukC,GAAO2hB,WAAWvlI,EAAMia,EACzD,CAKA,iBAAO0rH,CAAWC,GACd,MAAMC,EAAsC,GAC5C,IAAK,MAAM7lI,KAAQ4lI,EAAQ,CACvB,GAA2C,MAAjBA,EAAQ5lI,GAAiB,SACnD,MAAM1F,EAAOopI,GAAiB1jI,GAC9B4kH,GAAetqH,EAAM,kCAAFkS,OAAqCosC,KAAKC,UAAU74C,IAAU,SAAU4lI,GAC3FC,EAAah9H,KAAK,CAAE7I,OAAM1F,Q,CAO9B,OAJAurI,EAAaxmC,KAAK,CAACr9F,EAAGE,IACX2hI,GAAiBhkH,QAAQ7d,EAAEhC,MAAQ6jI,GAAiBhkH,QAAQ3d,EAAElC,OAGlE4kI,GAAiBW,WAAW,eAAgB,CAAEO,aAAcD,GAAgBD,EACvF,CAKA,aAAOrqI,CAAOqqI,EAAyBhiB,EAA8C3pG,GACjF,OAAOzN,GAAO,CACV,SACAo4H,GAAiBe,WAAWC,GAC5BhB,GAAiBvlD,KAAKukC,GAAOhkE,KAAK3lC,IAE1C,CAKA,WAAO2lC,CAAKgmF,EAAyBhiB,EAA8C3pG,GAC/E,OAAO62G,GAAU8T,GAAiBrpI,OAAOqqI,EAAQhiB,EAAO3pG,GAC5D,CAOA,yBAAa8rH,CAAaH,EAAyBhiB,EAA8C3pG,EAA4BqpH,GAEzHsC,EAASvkI,OAAOyW,OAAO,CAAC,EAAI8tH,GAG5B,IAAK,MAAM1qI,KAAO0qI,EAC4B,MAAhBA,EAAQ1qI,WACD0qI,EAAQ1qI,GAK7C,MAAM8qI,EAAmC,CAAC,EAGtCJ,EAAOhC,oBAAsBpe,GAAYogB,EAAOhC,kBAAmB,MACnEoC,EAASJ,EAAOhC,mBAAqB,MAIzC,MAAMwB,EAAUR,GAAiBvlD,KAAKukC,GAGtCwhB,EAAQK,MAAMxrH,EAAO,CAAC3f,EAAc2f,KACnB,YAAT3f,GAAuBkrH,GAAYvrG,EAAO,MAC1C+rH,EAAS/rH,GAAS,MAEfA,IAIX,IAAK,MAAMja,KAAQgmI,EACfA,EAAShmI,SAAcsjI,EAAYtjI,GAcvC,OAVI4lI,EAAOhC,mBAAqBoC,EAASJ,EAAOhC,qBAC5CgC,EAAOhC,kBAAoBoC,EAASJ,EAAOhC,oBASxC,CAAEgC,SAAQ3rH,MALjBA,EAAQmrH,EAAQK,MAAMxrH,EAAO,CAAC3f,EAAc2f,IAC3B,YAAT3f,GAAsB0rI,EAAS/rH,GAAiB+rH,EAAS/rH,GACtDA,GAIf,CAMA,iBAAOgsH,CAAWL,EAAyBhiB,EAA8C3pG,GAErF2qH,GAAiBe,WAAWC,GAG5B,MAAMM,EAAoC,CAAC,EACrCC,EAAoD,GAE1DtC,GAAiBjuH,QAAS5V,IACtB,MAAMia,EAAc2rH,EAAQ5lI,GACf,MAATia,IACJisH,EAAalmI,GAAQ+jI,GAAa/jI,GAAMia,GACxCksH,EAAYt9H,KAAK,CAAE7I,OAAM1F,KAAMopI,GAAiB1jI,QAGpD,MAAMolI,EAAUR,GAAiBvlD,KAAKukC,GAGtCA,EAAQwhB,EAAQxhB,MAEhB,MAAMwiB,EAAkB/kI,OAAOyW,OAAO,CAAC,EAAI8rG,GAQ3C,OAPAgB,GAA+C,MAAhCwhB,EAAgBN,aAAsB,2CAA4C,qBAAsBliB,GAEvHwiB,EAAgBN,aAAeK,EAG/Bf,EAAQ7pI,OAAO0e,GAER,CACH2pG,MAAOwiB,EACPR,OAAQM,EACRlB,YAAaI,EAAQJ,YACrB71H,QAASi2H,EAAQK,MAAMxrH,EAAO,CAAC3f,EAAc2f,KAGzC,GAAI3f,EAAK2Z,MAAM,eACX,OAAO0xG,GAAQrqH,GAAS2e,IAI5B,GAAI3f,EAAK2Z,MAAM,UACX,OAAOsyG,GAAUtsG,GAAO1T,WAG5B,OAAQjM,GACJ,IAAK,UACD,OAAO2f,EAAMpE,cACjB,IAAK,OACD,QAASoE,EACb,IAAK,SAED,OADA2qG,GAAiC,kBAAX3qG,EAAqB,iBAAkB,QAASA,GAC/DA,EAGf2qG,IAAe,EAAO,mBAAoB,OAAQtqH,KAG9D,EAGJ,SAAA+qI,GAxSgB/qI,GAGR,CACI,MAAM8qI,EAAUpB,GAAe1pI,GAC/B,GAAI8qI,EAAW,OAAOA,C,CAI1B,MAAMrwB,EAAQwvB,GAAWjqI,GAAMy6G,MAC/B,GAAIA,EAAO,CACP,MAAMmwB,EAAUnwB,EAAMzH,OAChB+4B,EAAa97H,KAAK46H,WAAWD,GACnC,OAAQjrH,IACJ2qG,IAAgC,IAAjB7P,EAAMjwG,OAAgBiwG,EAAMjwG,QAAUmV,EAAMvb,OAAQ,0CAAF8N,OAA6CuoG,EAAMjwG,OAAU,QAASmV,GAEvI,IAAIqqC,EAASrqC,EAAMy7C,IAAI2wE,GAKvB,OAJI9d,GAAKkc,GAALl6H,MAAgBgH,IAAI2zH,KACpB5gF,EAASA,EAAOoR,IAAIo7D,KAGjBA,GAAUtkH,GAAO83C,I,CAKhC,MAAMggF,EAAS/5H,KAAKq5G,MAAMtpH,GAC1B,GAAIgqI,EAAQ,CACR,MAAMgC,EAAcvmI,GAAGwoH,GAAKkc,GAALl6H,MAAgBiH,IAAIlX,IAC3C,OAAQ2f,IACJ,MAAMwuC,EAAS67E,EAAO5uE,IAAI8qD,IAAmB,IAAlB,KAAExgH,EAAI,KAAE1F,GAAMkmH,EACrC,MAAMl8D,EAAS/5C,KAAK46H,WAAW7qI,EAAhBiQ,CAAsB0P,EAAMja,IAC3C,OAAIuoH,GAAKkc,GAALl6H,MAAgBgH,IAAIjX,GAAgBw2H,GAAUxsE,GAC3CA,IAGX,OADAmE,EAAOruB,QAAQksG,GACR95H,GAAOi8C,G,CAItBm8D,IAAe,EAAO,iBAAFp4G,OAAoBlS,GAAS,OAAQA,EAC7D,CCvYJ,SAASisI,GAAaC,EAAcC,GAChC,MAAO,CACHvV,QAASQ,GAAW8U,GACpBC,YAAaA,EAAY/wE,IAAI,CAACgxE,EAAY13H,KACtC41G,GAAeY,GAAYkhB,EAAY,IAAK,eAAgB,eAAFl6H,OAAkBwC,EAAM,KAAK03H,GAChFA,EAAW7wH,gBAG9B,CAKM,SAAU8wH,GAAc1sH,GAC1B,GAAIpW,MAAMiG,QAAQmQ,GACd,OAA0FA,EAAOy7C,IAAI,CAACp9C,EAAKtJ,IACnGnL,MAAMiG,QAAQwO,IACdssG,GAA8B,IAAftsG,EAAI5Z,OAAc,mBAAoB,SAAF8N,OAAYwC,EAAM,KAAKsJ,GACnEiuH,GAAajuH,EAAI,GAAIA,EAAI,MAEpCssG,GAAsB,MAAPtsG,GAA+B,kBAATA,EAAmB,2BAA4B,QAAS2B,GACtFssH,GAAajuH,EAAI44G,QAAS54G,EAAImuH,eAI7C7hB,GAAwB,MAAT3qG,GAAmC,kBAAXA,EAAqB,sBAAuB,QAASA,GAE5F,MAAMqqC,EAAiEjjD,OAAO/E,KAAK2d,GAAOy7C,IAAK8wE,IAC3F,MAAMC,EAAoCxsH,EAAMusH,GAAMnxE,OAAO,CAAC0uD,EAAO2iB,KACjE3iB,EAAM2iB,IAAc,EACb3iB,GACc,CAAC,GAC1B,OAAOwiB,GAAaC,EAAMnlI,OAAO/E,KAAKmqI,GAAapnC,UAGvD,OADA/6C,EAAO+6C,KAAK,CAACr9F,EAAGE,IAAOF,EAAEkvH,QAAQ0V,cAAc1kI,EAAEgvH,UAC1C5sE,CACX,CCrCO,MAAMuiF,GAAmB,qECS1B5gB,GAAO9B,OAAO,GACd+B,GAAO/B,OAAO,GACd2iB,GAAO3iB,OAAO,GACd4iB,GAAQ5iB,OAAO,IACf6iB,GAAQ7iB,OAAO,IACf8iB,GAAQ9iB,OAAO,IAGfmD,GAAS,CAAC,EA6BhB,SAAS4f,GAAUjtH,GACf,OAAO+rG,GAAaiB,GAAUhtG,GAAQ,GAC1C,CAEA,IAAAktH,GAAA,IAAAx7F,QAAAj/B,GAAA,IAAAi/B,QAAAy7F,GAAA,IAAAz7F,QAAA07F,GAAA,IAAA17F,QAMM,MAAO27F,GAYT,KAAIzmG,GAAc,OAAO0nF,GAAK4e,GAAL58H,KAAS,CAClC,KAAIs2B,CAAE5mB,GACF2qG,GAAqC,KAAtBiB,GAAW5rG,GAAe,YAAa,QAASA,GAC/DquG,GAAK6e,GAAL58H,KAAUo7G,GAAQ1rG,GACtB,CAKA,KAAI3c,GAEA,OADAsnH,GAAen7D,SAAS8+D,GAAK77G,GAALnC,MAAQyV,UAAU,EAAG,IAAM,EAAG,2BAA4B,IAAKuoG,GAAK77G,GAALnC,OAChFg+G,GAAK77G,GAALnC,KACX,CACA,KAAIjN,CAAE+oH,GACFzB,GAAsC,KAAvBiB,GAAWQ,GAAgB,YAAa,QAASA,GAChEiC,GAAK57G,GAALnC,KAAUo7G,GAAQU,GACtB,CAUA,MAAI35G,GAAe,OAAO67G,GAAK77G,GAALnC,KAAS,CAKnCg9H,OAAAA,GACI,OAAQ99E,SAAS8+D,GAAK77G,GAALnC,MAAQyV,UAAU,EAAG,IAAM,CAChD,CAYA,KAAI7K,GAAe,OAAOozG,GAAK6e,GAAL78H,KAAS,CACnC,KAAI4K,CAAE8E,GACF,MAAM9E,EAAIqxG,GAAUvsG,EAAO,SAC3B2qG,GAAqB,KAANzvG,GAAkB,KAANA,EAAU,YAAa,IAAK8E,GACvDquG,GAAK8e,GAAL78H,KAAU4K,EACd,CAMA,YAAIqyH,GAA4B,OAAOjf,GAAK8e,GAAL98H,KAAgB,CAMvD,iBAAIk9H,GACA,MAAMtyH,EAAI5K,KAAKi9H,SACf,OAAS,MAALryH,EAAoB,KACjBmyH,GAAUI,WAAWvyH,EAChC,CAOA,WAAIwyH,GACA,OAAmB,KAAXp9H,KAAK4K,EAAY,EAAG,CAChC,CAMA,eAAIyyH,GAEA,MAAMA,EAActsI,GAASiP,KAAKjN,GAElC,OADIiN,KAAKo9H,UAAWC,EAAY,IAAM,KAC/BjiB,GAAQiiB,EACnB,CAKA,qBAAIC,GACA,OAAOr7H,GAAO,CAAEjC,KAAKs2B,EAAGt2B,KAAKq9H,aACjC,CAKA,cAAIE,GACA,OAAOt7H,GAAO,CAAEjC,KAAKs2B,EAAGt2B,KAAKjN,EAAIiN,KAAKo9H,QAAU,OAAQ,QAC5D,CAKAnuH,WAAAA,CAAY2rG,EAAYtkF,EAAWvjC,EAAW6X,GApH9CquG,GAAA,KAAA2jB,QAAE,GACF3jB,GAAA,KAAA92G,QAAE,GACF82G,GAAA,KAAA4jB,QAAE,GACF5jB,GAAA,KAAA6jB,QAAS,GAkHLpiB,GAAcE,EAAOmC,GAAQ,aAC7BgB,GAAK6e,GAAL58H,KAAUs2B,GACVynF,GAAK57G,GAALnC,KAAUjN,GACVgrH,GAAK8e,GAAL78H,KAAU4K,GACVmzG,GAAK+e,GAAL98H,KAAiB,KACrB,CAEA,CAACtJ,OAAOC,IAAI,iCACR,MAAO,mBAAPsL,OAA2BjC,KAAKs2B,EAAE,WAAAr0B,OAAWjC,KAAKmC,GAAG,KAAAF,OAAKjC,KAAKg9H,UAAY,GAAI,mBAAkB,eAAA/6H,OAAejC,KAAKo9H,QAAQ,gBAAAn7H,OAAgBjC,KAAKi9H,SAAS,KAC/J,CAKAl0C,KAAAA,GACI,MAAMA,EAAQ,IAAIg0C,GAAUhgB,GAAQ/8G,KAAKs2B,EAAGt2B,KAAKmC,GAAInC,KAAK4K,GAE1D,OADI5K,KAAKi9H,UAAYlf,GAAM+e,GAAN/zC,EAAkB/oF,KAAKi9H,UACrCl0C,CACX,CAKA4wB,MAAAA,GACI,MAAMsjB,EAAWj9H,KAAKi9H,SACtB,MAAO,CACHO,MAAO,YACPP,SAAwB,MAAZA,EAAoBA,EAASjhI,WAAY,KACrDs6B,EAAGt2B,KAAKs2B,EAAGvjC,EAAGiN,KAAKmC,GAAIyI,EAAG5K,KAAK4K,EAEvC,CAYA,iBAAOuyH,CAAWvyH,GACd,MAAM6yH,EAAKzhB,GAAUpxG,EAAG,KAGxB,OAAK6yH,GAAMjB,IAAWiB,GAAMhB,GAAiB/gB,IAG7CrB,GAAeojB,GAAMf,GAAO,oBAAqB,IAAK9xH,IAE9C6yH,EAAKf,IAASH,GAC1B,CAgBA,kBAAOmB,CAAYtE,EAAuBxuH,GACtC,OAAQoxG,GAAUod,GAAWmD,GAAQ3iB,OAAO,GAAKhvG,EAAI,GACzD,CAuBA,qBAAO+yH,CAAe/yH,GAClB,MAAM6yH,EAAKzhB,GAAUpxG,GAErB,OAAI6yH,IAAO/hB,IAAQ+hB,IAAOjB,GAAgB,GACtCiB,IAAO9hB,IAAQ8hB,IAAOhB,GAAgB,IAE1CpiB,GAAeojB,GAAMf,GAAO,YAAa,IAAK9xH,GAGtC6yH,EAAK9hB,GAAQ,GAAI,GAC7B,CAUA,WAAO7mC,CAAK2W,GACR,SAASmyC,EAAYxjB,EAAgBx1G,GACjCy1G,GAAeD,EAAOx1G,EAAS,YAAa6mF,EAChD,CAEA,GAAW,MAAPA,EACA,OAAO,IAAIsxC,GAAUhgB,GAAQuf,GAAUA,GAAU,IAGrD,GAAoB,kBAAT7wC,EAAmB,CAC1B,MAAM7vF,EAAQ7K,GAAS06F,EAAK,aAC5B,GAAqB,KAAjB7vF,EAAMzH,OAAe,CACrB,MAAMmiC,EAAI8kF,GAAQx/G,EAAM4E,MAAM,EAAG,KAC3BzN,EAAI6I,EAAM4E,MAAM,GAAI,IACpBoK,EAAY,IAAP7X,EAAE,GAAa,GAAI,GAE9B,OADAA,EAAE,IAAM,IACD,IAAIgqI,GAAUhgB,GAAQzmF,EAAG8kF,GAAQroH,GAAI6X,E,CAGhD,GAAqB,KAAjBhP,EAAMzH,OAAe,CACrB,MAAMmiC,EAAI8kF,GAAQx/G,EAAM4E,MAAM,EAAG,KAC3BzN,EAAIqoH,GAAQx/G,EAAM4E,MAAM,GAAI,KAC5BoK,EAAImyH,GAAUY,eAAe/hI,EAAM,KACzC,OAAO,IAAImhI,GAAUhgB,GAAQzmF,EAAGvjC,EAAG6X,E,CAGvCgzH,GAAY,EAAO,+B,CAGvB,GAAInyC,aAAesxC,GAAa,OAAOtxC,EAAI1C,QAG3C,MAAM9T,EAAKwW,EAAIn1D,EACfsnG,EAAkB,MAAN3oD,EAAY,aACxB,MAAM3+C,EAAIqmG,GAAU1nD,GAGdliF,EAAK,SAASA,EAAYsqI,GAC5B,GAAS,MAALtqI,EAAa,OAAO4pI,GAAU5pI,GAElC,GAAmB,MAAfsqI,EAAqB,CACrBO,EAAY3iB,GAAYoiB,EAAa,IAAK,uBAC1C,MAAMzhI,EAAQ7K,GAASssI,GAEvB,OADAzhI,EAAM,IAAM,IACLw/G,GAAQx/G,E,CAGnBgiI,GAAY,EAAO,YACvB,CAXW,CAWRnyC,EAAI14F,EAAG04F,EAAI4xC,cAGR,SAAEJ,EAAQ,EAAEryH,GAAO,SAASizH,EAAmBR,EAAsBD,GACvE,GAAU,MAANS,EAAY,CACZ,MAAMjzH,EAAIoxG,GAAU6hB,GACpB,MAAO,CACHZ,SAAYryH,GAAK8xH,GAAS9xH,OAAGqvC,EAC7BrvC,EAAGmyH,GAAUY,eAAe/yH,G,CAIpC,GAAmB,MAAfyyH,EAEA,OADAO,EAAY3iB,GAAYoiB,EAAa,IAAK,uBACnC,CAAEzyH,EAAgC,IAA3B7Z,GAASssI,GAAa,GAAa,GAAI,IAGzD,GAAe,MAAXD,EAAiB,CACjB,OAAQnhB,GAAUmhB,EAAS,gBACvB,KAAK,EAAG,MAAO,CAAExyH,EAAG,IACpB,KAAK,EAAG,MAAO,CAAEA,EAAG,IAExBgzH,GAAY,EAAO,kB,CAGvBA,GAAY,EAAO,YACvB,CAvByB,CAuBtBnyC,EAAI7gF,EAAG6gF,EAAI4xC,YAAa5xC,EAAI2xC,SAEzBrjF,EAAS,IAAIgjF,GAAUhgB,GAAQzmF,EAAGvjC,EAAG6X,GAO3C,OANIqyH,GAAYlf,GAAO+e,GAAP/iF,EAAoBkjF,GAGpCW,EAA2B,MAAfnyC,EAAI2xC,SAAmBnhB,GAAUxwB,EAAI2xC,QAAS,iBAAmBrjF,EAAOqjF,QAAS,oBAC7FQ,EAA+B,MAAnBnyC,EAAI4xC,aAAuB5xC,EAAI4xC,cAAgBtjF,EAAOsjF,YAAa,wBAExEtjF,CACX,EClXE,SAAU+jF,GAAiBC,GAC7B,MAAO,CACHpX,QAASQ,GAAW4W,EAAKpX,SACzBle,MAAOuT,GAAyB,MAAd+hB,EAAKt1B,MAAiBs1B,EAAKt1B,MAAO,GACpD2wB,QAASpd,GAA2B,MAAhB+hB,EAAK3E,QAAkB2E,EAAK3E,QAAS,GACzD1oE,UAAWqsE,GAAUjoD,KAAKipD,EAAKrtE,WAEvC,CCPM,SAAUstE,GAAa5uI,GAiEzB,OA/DA+sG,eAAsB8hC,EAAmBC,GACrC/jB,GAAkB,MAAX+jB,IAAoBA,EAAQC,UAAW,mCAAoC,aAElF,MAAM5wB,EAAW0wB,EAAI/1G,IAAI9c,MAAM,KAAK,GAAGE,cAEvC6uG,GAAoB,SAAb5M,GAAoC,UAAbA,EAAsB,wBAAFtrG,OAA2BsrG,GAAa,wBAAyB,CAC/GnnG,KAAM,CAAEmnG,YACRsN,UAAW,YAGfV,GAAoB,UAAb5M,IAAyB0wB,EAAIG,aAAeH,EAAII,4BAA6B,8CAA+C,wBAAyB,CACxJxjB,UAAW,YAGf,IAAIxqH,EAAsB,KAE1B,MAAMiuI,EAAa,IAAIC,gBAEjBC,EAAQhuG,WAAW,KACrBngC,EAAQ0pH,GAAU,kBAAmB,WACrCukB,EAAWG,SACZR,EAAIS,SAEHR,GACAA,EAAQS,YAAY,KAChBtuI,EAAQ0pH,GAAU,oBAAqB,aACvCukB,EAAWG,UAInB,MAAM7sI,EAAOkF,OAAOyW,OAAO,CAAC,EAAIne,EAAS,CACrCozG,OAAQy7B,EAAIz7B,OACZ3iC,QAAS,IAAI++D,QAAQtlI,MAAMw7E,KAAKmpD,IAChC9tI,KAAM8tI,EAAI9tI,WAAQ8pD,EAClB4kF,OAAQP,EAAWO,SAGvB,IAAIC,EACJ,IACIA,QAAa/sB,MAAMksB,EAAI/1G,IAAKt2B,E,CAC9B,MAAOmtI,IAEL,GADAruG,aAAa8tG,GACTnuI,EAAS,MAAMA,EACnB,MAAM0uI,E,CAGVruG,aAAa8tG,GAEb,MAAM3+D,EAAkC,CAAC,EACzCi/D,EAAKj/D,QAAQx0D,QAAQ,CAACqE,EAAO/e,KACzBkvE,EAAQlvE,EAAI2a,eAAiBoE,IAGjC,MAAMsvH,QAAiBF,EAAKG,cACtB9uI,EAAoB,MAAZ6uI,EAAoB,KAAM,IAAIh8E,WAAWg8E,GAEvD,MAAO,CACHE,WAAYJ,EAAK1kC,OACjB+kC,cAAeL,EAAKzkC,WACpBx6B,UAAS1vE,OAEjB,CAGJ,CAGuC6tI,GAAa,CAAC,GCIrD,IAAIoB,GAAqCpB,KAEzC,MAAMqB,GAAS,IAAIzqD,OAAO,kCAAmC,KACvD0qD,GAAS,IAAI1qD,OAAO,wBAA0B,KAGpD,IAAIwxC,IAAS,EAGbjqB,eAAeojC,GAAgBr3G,EAAa22G,GACxC,IACI,MAAMn1H,EAAQwe,EAAIxe,MAAM21H,IACxB,IAAK31H,EAAS,MAAM,IAAI1Z,MAAM,gBAC9B,OAAO,IAAIwvI,GAAc,IAAK,KAAM,CAChC,eAAiB91H,EAAM,IAAM,cAC7BA,EAAM,GCtFZ,SAAuB+1H,GACzBA,EAAWC,KAAKD,GAChB,MAAM9iI,EAAO,IAAIqmD,WAAWy8E,EAAStrI,QACrC,IAAK,IAAIU,EAAI,EAAGA,EAAI4qI,EAAStrI,OAAQU,IACjC8H,EAAK9H,GAAK4qI,EAAStlF,WAAWtlD,GAElC,OAAO9D,GAAS4L,EACpB,CD+EuBgjI,CAAaj2H,EAAM,IAo2B/BonH,GAp2B8CpnH,EAAM,GAo2BlCwC,QAAQ,wBAAyB,CAACy7F,EAAK7iF,IACrD1oB,OAAOC,aAAa6iD,SAASp6B,EAAM,O,CAp2B5C,MAAOz0B,GACL,OAAO,IAAImvI,GAAc,IAAK,kCAAmC,CAAC,EAAI,KAAM,IAAII,GAAa13G,G,CAErG,CAMA,SAAS23G,GAAmBC,GAWxB,OAVA3jC,eAA2Bj0E,EAAa22G,GACpC,IACI,MAAMn1H,EAAQwe,EAAIxe,MAAM41H,IACxB,IAAK51H,EAAS,MAAM,IAAI1Z,MAAM,gBAC9B,OAAO,IAAI4vI,GAAa,GAAD39H,OAAK69H,GAAQ79H,OAAIyH,EAAM,I,CAChD,MAAOrZ,GACL,OAAO,IAAImvI,GAAc,IAAK,iCAAkC,CAAC,EAAI,KAAM,IAAII,GAAa13G,G,CAEpG,CAGJ,CAEA,MAAM63G,GAA6C,CAC/C,KAAQR,GACR,KAAQM,GAAmB,kCAGzBG,GAAkD,IAAI5+F,QAE5D,IAAA6+F,GAAA,IAAA7+F,QAAA8+F,GAAA,IAAA9+F,QAGM,MAAO++F,GAITlxH,WAAAA,CAAYmxH,GAHZnnB,GAAA,KAAAgnB,QAAU,GACVhnB,GAAA,KAAAinB,QAAU,GAGNniB,GAAKkiB,GAALjgI,KAAkB,IAClB+9G,GAAKmiB,GAALlgI,MAAkB,GAElBggI,GAAajyH,IAAIqyH,EAAS,KACtB,IAAIpiB,GAAKkiB,GAALlgI,MAAJ,CACA+9G,GAAKmiB,GAALlgI,MAAkB,GAElB,IAAK,MAAMtD,KAAYshH,GAAKiiB,GAALjgI,MACnBwwB,WAAW,KAAQ9zB,KAAe,GAEtCqhH,GAAKkiB,GAALjgI,KAAkB,G,GAE1B,CAEA2+H,WAAAA,CAAYjiI,GACRy9G,IAAQ6D,GAAKkiB,GAALlgI,MAAiB,2BAA4B,wBAAyB,CAC1E66G,UAAW,wCAEfmD,GAAKiiB,GAALjgI,MAAgB1B,KAAK5B,EACzB,CAEA,aAAIyhI,GAAuB,OAAOngB,GAAKkiB,GAALlgI,KAAiB,CAEnDqgI,WAAAA,GACIlmB,IAAQn6G,KAAKm+H,UAAW,YAAa,YAAa,CAAC,EACvD,EAIJ,SAASkC,GAAYxB,GACjB,GAAc,MAAVA,EAAkB,MAAM,IAAI7uI,MAAM,qCAEtC,OADA6uI,EAAOwB,cACAxB,CACX,CAEA,IAAAyB,GAAA,IAAAl/F,QAAAm/F,GAAA,IAAAn/F,QAAAo/F,GAAA,IAAAp/F,QAAAq/F,GAAA,IAAAr/F,QAAAs/F,GAAA,IAAAt/F,QAAAu/F,GAAA,IAAAv/F,QAAAw/F,GAAA,IAAAx/F,QAAAy/F,GAAA,IAAAz/F,QAAA0/F,GAAA,IAAA1/F,QAAA2/F,GAAA,IAAA3/F,QAAA4/F,GAAA,IAAA5/F,QAAA6/F,GAAA,IAAA7/F,QAAA88F,GAAA,IAAA98F,QAAA8/F,GAAA,IAAA9/F,QAAA+/F,GAAA,IAAA//F,QAAAggG,GAAA,IAAA76F,QAcM,MAAOq5F,GA0BT,OAAI13G,GAAgB,OAAO81F,GAAK2iB,GAAL3gI,KAAW,CACtC,OAAIkoB,CAAIA,GACJ61F,GAAK4iB,GAAL3gI,KAAY5D,OAAO8rB,GACvB,CAqBA,QAAI/3B,GACA,OAAkB,MAAd6tH,GAAK4iB,GAAL5gI,MAA6B,KAC1B,IAAIgjD,WAAWg7D,GAAK4iB,GAAL5gI,MAC1B,CACA,QAAI7P,CAAKA,GACL,GAAY,MAARA,EACA4tH,GAAK6iB,GAAL5gI,UAAai6C,GACb8jE,GAAK8iB,GAAL7gI,UAAiBi6C,QACd,GAAqB,kBAAV9pD,EACd4tH,GAAK6iB,GAAL5gI,KAAa8wH,GAAY3gI,IACzB4tH,GAAK8iB,GAAL7gI,KAAiB,mBACd,GAAI7P,aAAgB6yD,WACvB+6D,GAAK6iB,GAAL5gI,KAAa7P,GACb4tH,GAAK8iB,GAAL7gI,KAAiB,gCACd,IAAqB,kBAAV7P,EAId,MAAM,IAAIH,MAAM,gBAHhB+tH,GAAK6iB,GAAL5gI,KAAa8wH,GAAYziF,KAAKC,UAAUn+C,KACxC4tH,GAAK8iB,GAAL7gI,KAAiB,mB,CAIzB,CAKAqhI,OAAAA,GACI,OAAsB,MAAdrjB,GAAK4iB,GAAL5gI,KACZ,CAOA,UAAIwiG,GACA,OAAIwb,GAAKyiB,GAALzgI,MAAuBg+G,GAAKyiB,GAALzgI,MACvBA,KAAKqhI,UAAoB,OACtB,KACX,CACA,UAAI7+B,CAAOA,GACO,MAAVA,IAAkBA,EAAS,IAC/Bub,GAAK0iB,GAALzgI,KAAe5D,OAAOomG,GAAQ99F,cAClC,CAWA,WAAIm7D,GACA,MAAMA,EAAU/oE,OAAOyW,OAAO,CAAC,EAAIywG,GAAKwiB,GAALxgI,OAenC,OAbIg+G,GAAK8iB,GAAL9gI,QACA6/D,EAAuB,cAAI,SAAH59D,OChR9B,SAAuB48G,GACzB,MAAMliH,EAAO5L,GAAS8tH,GACtB,IAAI4gB,EAAW,GACf,IAAK,IAAI5qI,EAAI,EAAGA,EAAI8H,EAAKxI,OAAQU,IAC7B4qI,GAAYrjI,OAAOC,aAAaM,EAAK9H,IAEzC,OAAOysI,KAAK7B,EAChB,CDyQiD8B,CAAazQ,GAAY9S,GAAK8iB,GAAL9gI,UAG9DA,KAAKwhI,YACL3hE,EAAQ,mBAAqB,QAGF,MAA3BA,EAAQ,iBAA2Bm+C,GAAK6iB,GAAL7gI,QACnC6/D,EAAQ,gBAAkBm+C,GAAK6iB,GAAL7gI,OAE1BA,KAAK7P,OAAQ0vE,EAAQ,kBAAoBzjE,OAAO4D,KAAK7P,KAAKgE,SAEvD0rE,CACX,CAKA4hE,SAAAA,CAAU9wI,GACN,OAAOqP,KAAK6/D,QAAQlvE,EAAI2a,cAC5B,CAMAo2H,SAAAA,CAAU/wI,EAAa+e,GACnBsuG,GAAKwiB,GAALxgI,MAAc5D,OAAOzL,GAAK2a,eAAiBlP,OAAOsT,EACtD,CAKAiyH,YAAAA,GACI5jB,GAAKyiB,GAALxgI,KAAgB,CAAC,EACrB,CAEA,CAACtJ,OAAOyW,YACJ,MAAM0yD,EAAU7/D,KAAK6/D,QACf9tE,EAAO+E,OAAO/E,KAAK8tE,GACzB,IAAIp7D,EAAQ,EACZ,MAAO,CACHvJ,KAAMA,KACF,GAAIuJ,EAAQ1S,EAAKoC,OAAQ,CACrB,MAAMxD,EAAMoB,EAAK0S,KACjB,MAAO,CACHiL,MAAO,CAAE/e,EAAKkvE,EAAQlvE,IAAQ4lC,MAAM,E,CAG5C,MAAO,CAAE7mB,WAAOuqC,EAAW1jB,MAAM,IAG7C,CAOA,eAAI6nG,GACA,OAAOpgB,GAAK8iB,GAAL9gI,OAAe,IAC1B,CAKA4hI,cAAAA,CAAeC,EAAkBh6G,GAC7BwyF,IAAgBwnB,EAASn4H,MAAM,KAAM,wCAAyC,WAAY,cAC1Fq0G,GAAK+iB,GAAL9gI,KAAI,GAAAiC,OAAc4/H,EAAS,KAAA5/H,OAAK4lB,GACpC,CAMA,aAAI25G,GACA,OAAOxjB,GAAKuiB,GAALvgI,KACX,CACA,aAAIwhI,CAAU9xH,GACVquG,GAAKwiB,GAALvgI,OAAe0P,EACnB,CAMA,+BAAI2uH,GACA,QAASrgB,GAAKsiB,GAALtgI,KACb,CACA,+BAAIq+H,CAA4B3uH,GAC5BquG,GAAKuiB,GAALtgI,OAAwB0P,EAC5B,CAMA,WAAIgvH,GAAoB,OAAO1gB,GAAK0iB,GAAL1gI,KAAe,CAC9C,WAAI0+H,CAAQA,GACRrkB,GAAeqkB,GAAW,EAAG,2BAA4B,UAAWA,GACpE3gB,GAAK2iB,GAAL1gI,KAAgB0+H,EACpB,CASA,iBAAIoD,GACA,OAAO9jB,GAAK+iB,GAAL/gI,OAAmB,IAC9B,CACA,iBAAI8hI,CAAcC,GACdhkB,GAAKgjB,GAAL/gI,KAAkB+hI,EACtB,CAYA,eAAIC,GACA,OAAOhkB,GAAKgjB,GAALhhI,OAAiB,IAC5B,CACA,eAAIgiI,CAAYtpI,GACZqlH,GAAKijB,GAALhhI,KAAgBtH,EACpB,CAKA,aAAIupI,GACA,OAAOjkB,GAAKijB,GAALjhI,OAAe,IAC1B,CACA,aAAIiiI,CAAUC,GACVnkB,GAAKkjB,GAALjhI,KAAckiI,EAClB,CAiBA,cAAIC,GACA,OAAOnkB,GAAKmjB,GAALnhI,OAAoBo/H,EAC/B,CACA,cAAI+C,CAAWzyH,GACXquG,GAAKojB,GAALnhI,KAAmB0P,EACvB,CAQAT,WAAAA,CAAYiZ,GAAW4yF,GAAA,KAAAsmB,IAtRvBnoB,GAAA,KAAAqnB,QAAc,GACdrnB,GAAA,KAAAsnB,QAAK,GACLtnB,GAAA,KAAAunB,QAAQ,GACRvnB,GAAA,KAAAwnB,QAAO,GACPxnB,GAAA,KAAAynB,QAAQ,GACRznB,GAAA,KAAA0nB,QAAI,GAEJ1nB,GAAA,KAAA2nB,QAAK,GACL3nB,GAAA,KAAA4nB,QAAS,GACT5nB,GAAA,KAAA6nB,QAAM,GAGN7nB,GAAA,KAAA8nB,QAAU,GACV9nB,GAAA,KAAA+nB,QAAQ,GACR/nB,GAAA,KAAAgoB,QAAM,GAENhoB,GAAA,KAAAilB,QAAO,GAEPjlB,GAAA,KAAAioB,QAAS,GAETjoB,GAAA,KAAAkoB,QAAW,GAmQPpjB,GAAK4iB,GAAL3gI,KAAY5D,OAAO8rB,IAEnB61F,GAAKuiB,GAALtgI,MAAsB,GACtB+9G,GAAKwiB,GAALvgI,MAAa,GACb+9G,GAAKyiB,GAALxgI,KAAgB,CAAC,GACjB+9G,GAAK0iB,GAALzgI,KAAe,IACf+9G,GAAK2iB,GAAL1gI,KAAgB,KAEhB+9G,GAAKmjB,GAALlhI,KAAiB,CACboiI,aA3YU,IA4YVC,YA7YS,KAgZbtkB,GAAKojB,GAALnhI,KAAmB,KACvB,CAEAhE,QAAAA,GACI,MAAO,wBAAPiG,OAAgCosC,KAAKC,UAAUtuC,KAAKwiG,QAAQ,SAAAvgG,OAASosC,KAAKC,UAAUtuC,KAAKkoB,KAAK,aAAAjmB,OAAaosC,KAAKC,UAAUtuC,KAAK6/D,SAAS,UAAA59D,OAAU+7G,GAAK4iB,GAAL5gI,MAAao7G,GAAQ4C,GAAK4iB,GAAL5gI,OAAa,OAAO,IAC/L,CAMAsiI,iBAAAA,CAAkB9pF,GACa,MAAvBA,EAAO4pF,eACPpkB,GAAKkjB,GAALlhI,MAAeoiI,aAAe5pF,EAAO4pF,cAEf,MAAtB5pF,EAAO6pF,cACPrkB,GAAKkjB,GAALlhI,MAAeqiI,YAAc7pF,EAAO6pF,YAE5C,CAiGAz5D,IAAAA,GAGI,OAFAuxC,GAAuB,MAAhB6D,GAAKkgB,GAALl+H,MAAsB,uBAAwB,wBAAyB,CAAE66G,UAAW,sBAC3FkD,GAAKmgB,GAALl+H,KAAe,IAAImgI,GAAkBngI,OAC9Bk5G,GAAAkoB,GAAAphI,KAAKuiI,IAAKxqI,KAAViI,KAAW,EAAGwiI,KAAYxiI,KAAK0+H,QAAS,EAAG1+H,KAAM,IAAIw/H,GAAc,EAAG,GAAI,CAAC,EAAI,KAAMx/H,MAChG,CAMAyiI,MAAAA,GACItoB,GAAuB,MAAhB6D,GAAKkgB,GAALl+H,MAAsB,4BAA6B,wBAAyB,CAAE66G,UAAW,wBAChG,MAAMgkB,EAASmB,GAAa/4H,IAAIjH,MAChC,IAAK6+H,EAAU,MAAM,IAAI7uI,MAAM,qCAC/B6uI,GACJ,CAMA6D,QAAAA,CAAS/7H,GAEL,MAAMvO,EAAU4H,KAAKkoB,IAAI9c,MAAM,KAAK,GAAGE,cACjCyL,EAASpQ,EAASyE,MAAM,KAAK,GAAGE,cAMtC6uG,GAAuB,QAAhBn6G,KAAKwiG,SAAiC,UAAZpqG,GAAkC,SAAX2e,IAAsBpQ,EAAS+C,MAAM,YAAa,uBAAwB,wBAAyB,CACvJmxG,UAAW,YAAF54G,OAAejC,KAAKwiG,OAAO,KAAAvgG,OAAKosC,KAAKC,UAAUtuC,KAAKkoB,KAAK,QAAAjmB,OAAQosC,KAAKC,UAAU3nC,GAAU,OAIvG,MAAMs3H,EAAM,IAAI2B,GAAaj5H,GAa7B,OAZAs3H,EAAIz7B,OAAS,MACby7B,EAAIuD,UAAYxhI,KAAKwhI,UACrBvD,EAAIS,QAAU1+H,KAAK0+H,QACnB3gB,GAAIyiB,GAAJvC,EAAennI,OAAOyW,OAAO,CAAC,EAAIywG,GAAKwiB,GAALxgI,QAC9Bg+G,GAAK4iB,GAAL5gI,OAAc+9G,GAAI6iB,GAAJ3C,EAAY,IAAIj7E,WAAWg7D,GAAK4iB,GAAL5gI,QAC7C+9G,GAAI8iB,GAAJ5C,EAAgBjgB,GAAK6iB,GAAL7gI,OAOTi+H,CACX,CAKAl1C,KAAAA,GACI,MAAMA,EAAQ,IAAI62C,GAAa5/H,KAAKkoB,KA4BpC,OAzBA61F,GAAM0iB,GAAN13C,EAAgBi1B,GAAKyiB,GAALzgI,OAGZg+G,GAAK4iB,GAAL5gI,OAAc+9G,GAAM6iB,GAAN73C,EAAci1B,GAAK4iB,GAAL5gI,OAChC+9G,GAAM8iB,GAAN93C,EAAkBi1B,GAAK6iB,GAAL7gI,OAGlB+9G,GAAMyiB,GAANz3C,EAAiBjyF,OAAOyW,OAAO,CAAC,EAAIywG,GAAKwiB,GAALxgI,QAGpC+9G,GAAM+iB,GAAN/3C,EAAei1B,GAAK8iB,GAAL9gI,OAEXA,KAAKwhI,YAAaz4C,EAAMy4C,WAAY,GAExCz4C,EAAM21C,QAAU1+H,KAAK0+H,QACjB1+H,KAAKq+H,8BAA+Bt1C,EAAMs1C,6BAA8B,GAE5EtgB,GAAMgjB,GAANh4C,EAAmBi1B,GAAK+iB,GAAL/gI,OACnB+9G,GAAMijB,GAANj4C,EAAiBi1B,GAAKgjB,GAALhhI,OACjB+9G,GAAMkjB,GAANl4C,EAAei1B,GAAKijB,GAALjhI,OAEf+9G,GAAMmjB,GAANn4C,EAAkBjyF,OAAOyW,OAAO,CAAC,EAAIywG,GAAKkjB,GAALlhI,QAErC+9G,GAAMojB,GAANp4C,EAAoBi1B,GAAKmjB,GAALnhI,OAEb+oF,CACX,CAMA,iBAAO45C,GACHvc,IAAS,CACb,CAKA,iBAAOwc,CAAWxyE,GACd,OAAO2vE,GAAS3vE,EAAO9kD,gBAAkB,IAC7C,CAUA,sBAAOu3H,CAAgBzyE,EAAgBhI,GAEnC,GAAe,UADfgI,EAASA,EAAO9kD,gBACoB,UAAX8kD,EACrB,MAAM,IAAIpgE,MAAM,oBAADiS,OAAsBmuD,EAAO,yBAEhD,GAAIg2D,GAAU,MAAM,IAAIp2H,MAAM,mBAC9B+vI,GAAS3vE,GAAUhI,CACvB,CAUA,qBAAO06E,CAAeC,GAClB,GAAI3c,GAAU,MAAM,IAAIp2H,MAAM,mBAC9BovI,GAAoB2D,CACxB,CAaA,uBAAOC,CAAiB5zI,GACpB,OAAO4uI,GAAa5uI,EACxB,CAWA,wBAAO6zI,GACH,OAAO1D,EACX,CASA,4BAAO2D,CAAsBpD,GACzB,OAAOD,GAAmBC,EAC9B,EACH,eAAAyC,GAxQeY,EAAiBC,EAAiB9sD,EAAe+sD,EAAwBC,GACjF,GAAIH,GAAWnlB,GAAKkjB,GAALlhI,MAAeqiI,YAC1B,OAAOiB,EAAUC,gBAAgB,gCAGrCppB,GAAOqoB,MAAaY,EAAS,UAAW,UAAW,CAC/CvoB,UAAW,eAAgByV,OAAQ,UAAW8P,QAASiD,IAGvD/sD,EAAQ,SA+cpB,SAAcA,GACV,OAAO,IAAI1lD,QAASG,GAAYP,WAAWO,EAASulD,GACxD,CAjd+BktD,CAAKltD,GAE5B,IAAI2nD,EAAMj+H,KAAK+oF,QACf,MAAM34B,GAAU6tE,EAAI/1G,IAAI9c,MAAM,KAAK,IAAM,IAAIE,cAG7C,GAAI8kD,KAAU2vE,GAAU,CACpB,MAAMhmF,QAAegmF,GAAS3vE,GAAQ6tE,EAAI/1G,IAAKm4G,GAAYriB,GAASkgB,GAATmF,KAC3D,GAAItpF,aAAkBylF,GAAe,CACjC,IAAIiE,EAAW1pF,EAEf,GAAI/5C,KAAKgiI,YAAa,CAClB3B,GAAYriB,GAASkgB,GAATmF,IACZ,IACII,QAAiBzjI,KAAKgiI,YAAY/D,EAAKwF,E,CACzC,MAAOpzI,GAGiB,MAAlBA,EAAMqzI,UAA4C,kBAAjBrzI,EAAMszI,OACvCF,EAASF,gBAAgB,oCAAqClzI,GAAOuzI,U,EAOjF,OAAOH,C,CAEXxF,EAAMlkF,C,CAIN/5C,KAAK8hI,gBAAiB7D,QAAYj+H,KAAK8hI,cAAc7D,IAEzD,MAAMa,QAAa9+H,KAAKmiI,WAAWlE,EAAKoC,GAAYriB,GAASkgB,GAATmF,KACpD,IAAII,EAAW,IAAIjE,GAAcV,EAAKI,WAAYJ,EAAKK,cAAeL,EAAKj/D,QAASi/D,EAAK3uI,KAAMkzI,GAE/F,GAA4B,MAAxBI,EAASvE,YAA8C,MAAxBuE,EAASvE,WAAoB,CAG5D,IAAI,IAAA2E,EACA,MAAMl9H,EAAW88H,EAAS5jE,QAAQl5D,UAAY,GAC9C,OAAOuyG,GAAAkoB,GAAAyC,EAAA5F,EAAIyE,SAAS/7H,GAAU47H,IAAKxqI,KAAA8rI,EAACV,EAAU,EAAGC,EAAS,EAAGC,EAAUI,E,CACzE,MAAOpzI,GAAQ,CAGjB,OAAOozI,C,CAEJ,GAA4B,MAAxBA,EAASvE,aAGM,MAAlBl/H,KAAKiiI,iBAA4BjiI,KAAKiiI,UAAUhE,EAAKwF,EAAUN,IAAW,KAAAW,EAC1E,MAAMC,EAAaN,EAAS5jE,QAAQ,eACpC,IAAIyW,EAAQ0nC,GAAKkjB,GAALlhI,MAAeoiI,aAAe5nI,KAAKwpI,MAAMxpI,KAAK7G,SAAW6G,KAAKkI,IAAI,EAAGygI,IAIjF,MAH2B,kBAAhBY,GAA4BA,EAAWr6H,MAAM,mBACpD4sE,EAAQp3B,SAAS6kF,IAEd7qB,GAAAkoB,GAAA0C,EAAA7F,EAAIl1C,QAAQw5C,IAAKxqI,KAAA+rI,EAACX,EAAU,EAAGC,EAAS9sD,EAAO+sD,EAAUI,E,CAIxE,GAAIzjI,KAAKgiI,YAAa,CAClB3B,GAAYriB,GAASkgB,GAATmF,IACZ,IACII,QAAiBzjI,KAAKgiI,YAAY/D,EAAKwF,E,CACzC,MAAOpzI,GAAY,IAAA4zI,EAGK,MAAlB5zI,EAAMqzI,UAA4C,kBAAjBrzI,EAAMszI,OACvCF,EAASF,gBAAgB,oCAAqClzI,GAAOuzI,WAIzE,IAAIttD,EAAQ0nC,GAAKkjB,GAALlhI,MAAeoiI,aAAe5nI,KAAKwpI,MAAMxpI,KAAK7G,SAAW6G,KAAKkI,IAAI,EAAGygI,IAGjF,OAFI9yI,EAAMszI,OAAS,IAAKrtD,EAAQjmF,EAAMszI,OAE/BzqB,GAAAkoB,GAAA6C,EAAAhG,EAAIl1C,QAAQw5C,IAAKxqI,KAAAksI,EAACd,EAAU,EAAGC,EAAS9sD,EAAO+sD,EAAUI,E,EAIxE,OAAOA,CACX,CAsLJ,IAAAS,GAAA,IAAA9iG,QAAA+iG,GAAA,IAAA/iG,QAAAgjG,GAAA,IAAAhjG,QAAAijG,GAAA,IAAAjjG,QAAAkjG,GAAA,IAAAljG,QAAA29F,GAAA,IAAA39F,QAGM,MAAOo+F,GASTxjI,QAAAA,GACI,MAAO,yBAAPiG,OAAiCjC,KAAKk/H,WAAW,UAAAj9H,OAAU+7G,GAAKqmB,GAALrkI,MAAao7G,GAAQ4C,GAAKqmB,GAALrkI,OAAa,OAAO,IACxG,CAKA,cAAIk/H,GAAuB,OAAOlhB,GAAKkmB,GAALlkI,KAAkB,CAKpD,iBAAIm/H,GAA0B,OAAOnhB,GAAKmmB,GAALnkI,KAAqB,CAK1D,WAAI6/D,GAAoC,OAAO/oE,OAAOyW,OAAO,CAAC,EAAIywG,GAAKomB,GAALpkI,MAAgB,CAKlF,QAAI7P,GACA,OAAsB,MAAd6tH,GAAKqmB,GAALrkI,MAAsB,KAAM,IAAIgjD,WAAWg7D,GAAKqmB,GAALrkI,MACvD,CAQA,YAAIukI,GACA,IACI,OAAsB,MAAdvmB,GAAKqmB,GAALrkI,MAAsB,GAAIgxH,GAAahT,GAAKqmB,GAALrkI,M,CACjD,MAAO3P,GACL8pH,IAAO,EAAO,wCAAyC,wBAAyB,CAC5EU,UAAW,WAAYz0G,KAAM,CAAEq9H,SAAUzjI,O,CAGrD,CAQA,YAAIwkI,GACA,IACI,OAAOn2F,KAAKuZ,MAAM5nD,KAAKukI,S,CACzB,MAAOl0I,GACL8pH,IAAO,EAAO,kCAAmC,wBAAyB,CACtEU,UAAW,WAAYz0G,KAAM,CAAEq9H,SAAUzjI,O,CAGrD,CAEA,CAACtJ,OAAOyW,YACJ,MAAM0yD,EAAU7/D,KAAK6/D,QACf9tE,EAAO+E,OAAO/E,KAAK8tE,GACzB,IAAIp7D,EAAQ,EACZ,MAAO,CACHvJ,KAAMA,KACF,GAAIuJ,EAAQ1S,EAAKoC,OAAQ,CACrB,MAAMxD,EAAMoB,EAAK0S,KACjB,MAAO,CACHiL,MAAO,CAAE/e,EAAKkvE,EAAQlvE,IAAQ4lC,MAAM,E,CAG5C,MAAO,CAAE7mB,WAAOuqC,EAAW1jB,MAAM,IAG7C,CAEAtnB,WAAAA,CAAYiwH,EAAoBC,EAAuBt/D,EAA2C1vE,EAAyBiwI,GAnF3HnnB,GAAA,KAAAirB,QAAW,GACXjrB,GAAA,KAAAkrB,QAAc,GACdlrB,GAAA,KAAAmrB,QAAQ,GACRnrB,GAAA,KAAAorB,QAAK,GACLprB,GAAA,KAAAqrB,QAAQ,GAERrrB,GAAA,KAAA8lB,QAAM,GA8EFhhB,GAAKmmB,GAALlkI,KAAmBk/H,GACnBnhB,GAAKomB,GAALnkI,KAAsBm/H,GACtBphB,GAAKqmB,GAALpkI,KAAgBlJ,OAAO/E,KAAK8tE,GAAS/U,OAAO,CAAC0uD,EAAO/iH,KAChD+iH,EAAM/iH,EAAE6U,eAAiBlP,OAAOyjE,EAAQppE,IACjC+iH,GACgB,CAAC,IAC5BuE,GAAKsmB,GAALrkI,KAAuB,MAAR7P,EAAgB,KAAM,IAAI6yD,WAAW7yD,IACpD4tH,GAAKumB,GAALtkI,KAAiBogI,GAAW,MAE5BriB,GAAKghB,GAAL/+H,KAAc,CAAE4E,QAAS,IAC7B,CAOA2+H,eAAAA,CAAgB3+H,EAAkBvU,GAC9B,IAAI8uI,EACCv6H,EAIDu6H,EAAgB,kCAAHl9H,OAAsCjC,KAAKk/H,WAAW,KAAAj9H,OAAKjC,KAAKm/H,cAAc,MAAAl9H,OAAM2C,EAAQ,MAHzGA,EAAU,GAAH3C,OAAOjC,KAAKk/H,WAAW,KAAAj9H,OAAKjC,KAAKm/H,eACxCA,EAAgB,kCAAHl9H,OAAsC2C,EAAQ,MAI/D,MAAM6+H,EAAW,IAAIjE,GAAc,IAAKL,EAAen/H,KAAK6/D,QACxD7/D,KAAK7P,KAAM6tH,GAAKsmB,GAALtkI,YAAiBi6C,GAEhC,OADA8jE,GAASghB,GAAT0E,EAAkB,CAAE7+H,UAASvU,UACtBozI,CACX,CAOAgB,kBAAAA,CAAmB7/H,EAAkB++H,GACpB,MAATA,EACAA,GAAS,EAETtpB,GAAehpB,OAAOirB,UAAUqnB,IAAUA,GAAS,EAAG,wBAAyB,QAASA,GAG5F,MAAMtzI,EAAQ,IAAIL,MAAM4U,GAAW,uBAInC,MAFA+sF,GAAgCthG,EAAO,CAAEszI,QAAOD,UAAU,IAEpDrzI,CACV,CAKAoxI,SAAAA,CAAU9wI,GACN,OAAOqP,KAAK6/D,QAAQlvE,EAAI2a,cAC5B,CAKA+1H,OAAAA,GACI,OAAsB,MAAdrjB,GAAKqmB,GAALrkI,KACZ,CAKA,WAAIogI,GAAiC,OAAOpiB,GAAKsmB,GAALtkI,KAAe,CAK3DgpC,EAAAA,GACI,MAAgC,KAAxBg1E,GAAK+gB,GAAL/+H,MAAY4E,SAAkB5E,KAAKk/H,YAAc,KAAOl/H,KAAKk/H,WAAa,GACtF,CAKA0E,QAAAA,GACI,GAAI5jI,KAAKgpC,KAAQ,OACjB,IAAI,QAAEpkC,EAAO,MAAEvU,GAAU2tH,GAAK+gB,GAAL/+H,MACT,KAAZ4E,IACAA,EAAU,mBAAH3C,OAAuBjC,KAAKk/H,WAAW,KAAAj9H,OAAKjC,KAAKm/H,gBAG5D,IAAIuF,EAA4B,KAC5B1kI,KAAKogI,UAAWsE,EAAa1kI,KAAKogI,QAAQl4G,KAE9C,IAAIy8G,EAA8B,KAClC,IACQ3mB,GAAKqmB,GAALrkI,QAAc2kI,EAAe3T,GAAahT,GAAKqmB,GAALrkI,O,CAChD,MAAOnI,IAAI,CAEbsiH,IAAO,EAAOv1G,EAAS,eAAgB,CACnCw7H,QAAUpgI,KAAKogI,SAAW,kBAAoBqD,SAAUzjI,KAAM3P,QAC9D+V,KAAM,CACFs+H,aAAYC,eACZC,eAAgB,GAAF3iI,OAAMjC,KAAKk/H,WAAW,KAAAj9H,OAAKjC,KAAKm/H,iBAE1D,EAIJ,SAASqD,KAAoB,OAAQ,IAAI58H,MAAQ48H,SAAW,CEz7BrD,MAAMqC,GAAsB,6CCiC7B,MAAOC,GA6BT71H,WAAAA,CAAY7b,EAAyB2xI,EAAe3/H,GA5BpDksF,EAAA,wBAKAA,EAAA,oBAKAA,EAAA,yBAKAA,EAAA,qBAKAA,EAAA,oBASI,MAAM77F,EAAOrC,EAASqC,KAAMi7D,EAAYt9D,EAASkS,SACjDqsF,GAAiC3xF,KAAM,CACnC5M,WAAUqC,OAAMi7D,YAAWq0E,QAAO3/H,QAE1C,EAQE,MAAO4/H,GAkCT/1H,WAAAA,CAAY7b,EAA4B4jI,EAAkB5xH,EAAcsK,GAjCxE4hF,EAAA,wBAKAA,EAAA,oBAKAA,EAAA,oBAKAA,EAAA,yBAKAA,EAAA,wBAKAA,EAAA,qBASI,MAAM77F,EAAOrC,EAASqC,KAAMi7D,EAAYt9D,EAASkS,SACjDqsF,GAAyC3xF,KAAM,CAC3C5M,WAAUqC,OAAM2P,OAAMsrD,YAAWsmE,WAAUtnH,SAEnD,EAOE,MAAOu1H,GA6BTh2H,WAAAA,CAAY7b,EAAyB4jI,EAAkB5xH,GA5BvDksF,EAAA,wBAKAA,EAAA,oBAKAA,EAAA,oBAKAA,EAAA,yBAKAA,EAAA,wBASI,MAAM77F,EAAOrC,EAASqC,KAAMi7D,EAAYt9D,EAASkS,SACjDqsF,GAAmC3xF,KAAM,CACrC5M,WAAUqC,OAAM2P,OAAMsrD,YAAWsmE,YAEzC,EASE,MAAOkO,GAgBT,gBAAOC,CAAUz1H,GACb,SAAUA,IAASA,EAAM01H,WAC7B,CAKAn2H,WAAAA,CAAYomC,GAtBZi8C,EAAA,oBAKAA,EAAA,0BAkBIK,GAA0B3xF,KAAM,CAAEq1C,OAAM+vF,YAAY,GACxD,EAWJ,MAAMxN,GAAuC,CACzC,EAAK,gBACL,EAAK,gBACL,GAAM,sBACN,GAAM,6BACN,GAAM,gBACN,GAAM,8CACN,GAAM,wDACN,GAAM,6CACN,GAAM,gBACN,GAAM,0BAGJyN,GAA2C,CAC7C,aAAc,CACV30E,UAAW,gBACXj7D,KAAM,QACNygI,OAAQ,CAAE,UACV5F,OAAS1rH,GACE,+BAAP3C,OAAuCosC,KAAKC,UAAU1pC,KAG9D,aAAc,CACV8rD,UAAW,iBACXj7D,KAAM,QACNygI,OAAQ,CAAE,WACV5F,OAASxrG,IACL,IAAIwrG,EAAS,qBAIb,OAHIxrG,GAAQ,GAAKA,GAAQ,KAAQ8yG,GAAa9yG,EAAK9oB,cAC/Cs0H,EAASsH,GAAa9yG,EAAK9oB,aAExB,8BAAPiG,OAAsC6iB,EAAK9oB,SAAS,IAAI,MAAAiG,OAAMquH,EAAO,QA+CjF,IAAAgV,GAAA,IAAAlkG,QAAAmkG,GAAA,IAAAnkG,QAAAokG,GAAA,IAAApkG,QAAAqkG,GAAA,IAAArkG,QAAAskG,GAAA,IAAAn/F,QAUM,MAAOo/F,GAgCT12H,WAAAA,CAAY22H,GA0HZ9qB,GAAA,KAAA4qB,IAxJAp0C,EAAA,yBAKAA,EAAA,sBAKAA,EAAA,wBAKAA,EAAA,uBAKA2nB,GAAA,KAAAqsB,QAAO,GACPrsB,GAAA,KAAAssB,QAAO,GACPtsB,GAAA,KAAAusB,QAAU,GAGVvsB,GAAA,KAAAwsB,QAAS,GAML,IAAII,EAAuD,GAEvDA,EADsB,kBAAfD,EACDv3F,KAAKuZ,MAAMg+E,GAEXA,EAGV7nB,GAAKynB,GAALxlI,KAAkB,IAAIid,KACtB8gG,GAAKunB,GAALtlI,KAAe,IAAIid,KACnB8gG,GAAKwnB,GAALvlI,KAAe,IAAIid,KAInB,MAAM6oH,EAAyB,GAC/B,IAAK,MAAMruI,KAAKouI,EACZ,IACIC,EAAMxnI,KAAKjG,GAASy8E,KAAKr9E,G,CAC3B,MAAOpH,GACL6V,QAAQlC,IAAI,8BAAD/B,OAAgCosC,KAAKC,UAAU72C,GAAG,KAAKpH,EAAMuU,Q,CAIhF+sF,GAA4B3xF,KAAM,CAC9B4lI,UAAW9uI,OAAOo7G,OAAO4zB,KAG7B,IAAI5hG,EAAoC,KACpC6hG,GAAU,EAEdhoB,GAAK0nB,GAALzlI,KAAiBA,KAAKgmI,eAGtBhmI,KAAK4lI,UAAUv6H,QAAQ,CAACjY,EAAUqR,KAC9B,IAAIwhI,EACJ,OAAQ7yI,EAASrD,MACb,IAAK,cACD,OAAIiQ,KAAKkmI,YACLhgI,QAAQlC,IAAI,2CAIhB2tF,GAA4B3xF,KAAM,CAAEkmI,OAA6B9yI,IAGrE,IAAK,WASD,YAR+B,IAA3BA,EAAS8iI,OAAO/hI,OAChB4xI,GAAU,GAEV1rB,IAAgBn2E,GAA+B9wC,EAAUgkI,UAAYlzF,EAASkzF,QAC1E,iCAAkC,aAAFn1H,OAAgBwC,EAAM,KAAKrR,GAC/D8wC,EAA6B9wC,EAC7B2yI,EAAU7hG,EAASkzF,UAI3B,IAAK,WAGD6O,EAASjoB,GAAKwnB,GAALxlI,MACT,MAEJ,IAAK,QAEDimI,EAASjoB,GAAKunB,GAALvlI,MACT,MAEJ,IAAK,QACDimI,EAASjoB,GAAKsnB,GAALtlI,MACT,MAEJ,QACI,OAIR,MAAM0wD,EAAYt9D,EAASkS,SACvB2gI,EAAOj/H,IAAI0pD,IAEfu1E,EAAOl4H,IAAI2iD,EAAWt9D,KAIrB4M,KAAKkmI,QACNv0C,GAA4B3xF,KAAM,CAC9BkmI,OAAQ/P,GAAoBrhD,KAAK,mBAIzC6c,GAA4B3xF,KAAM,CAAEkkC,WAAU6hG,WAClD,CAOAzgI,MAAAA,CAAO6gI,GACH,MAAM7gI,EAAU6gI,EAAU,UAAW,OAC/BN,EAAM7lI,KAAK4lI,UAAUz6E,IAAK30D,GAAMA,EAAE8O,OAAOA,IAC/C,OAAOugI,CACX,CAMAO,UAAAA,GACI,MAAMP,EAAM7lI,KAAK4lI,UAAUz6E,IAAK30D,GAAMA,EAAE8O,OAAO,SAG/C,OAAO+oC,KAAKC,UAAUu3F,EAAI16E,IAAKntD,GAAMqwC,KAAKuZ,MAAM5pD,IACpD,CAMAgoI,WAAAA,GACI,OAAO9N,GAASI,iBACpB,CA6FA+N,eAAAA,CAAgB11I,GACZ,MAAMyC,EAAW8lH,GAAAwsB,GAAA1lI,KAAKsmI,IAAYvuI,KAAjBiI,KAAkBrP,EAAK,MAAM,GAE9C,OADA0pH,GAAejnH,EAAU,uBAAwB,MAAOzC,GACjDyC,EAASqC,IACpB,CASA8wI,WAAAA,CAAY51I,GACR,QAASuoH,GAAAwsB,GAAA1lI,KAAKsmI,IAAYvuI,KAAjBiI,KAAkBrP,EAAK,MAAM,EAC1C,CAYA61I,WAAAA,CAAY71I,EAAautD,GACrB,OAAOg7D,GAAAwsB,GAAA1lI,KAAKsmI,IAAYvuI,KAAjBiI,KAAkBrP,EAAKutD,GAAU,MAAM,EAClD,CAKAuoF,eAAAA,CAAgBnrI,GACZ,MAAM6hH,EAAQ7jH,MAAMw7E,KAAKkpC,GAAKwnB,GAALxlI,MAAgBjO,QACzCorH,EAAMroB,KAAK,CAACr9F,EAAGE,IAAMF,EAAE4kI,cAAc1kI,IACrC,IAAK,IAAI9C,EAAI,EAAGA,EAAIsoH,EAAMhpH,OAAQU,IAAK,CACnC,MAAMY,EAAO0nH,EAAMtoH,GACnByG,EAA4B0iH,GAAKwnB,GAALxlI,MAAgBiH,IAAIxR,GAAQZ,E,CAEhE,CAmEA6xI,YAAAA,CAAa/1I,GACT,MAAMyC,EAAW8lH,GAAAwsB,GAAA1lI,KAAK2mI,IAAS5uI,KAAdiI,KAAerP,EAAK,MAAM,GAG3C,OAFA0pH,GAAejnH,EAAU,oBAAqB,MAAOzC,GAE9CyC,EAASqC,IACpB,CASAmxI,QAAAA,CAASj2I,GACL,QAASuoH,GAAAwsB,GAAA1lI,KAAK2mI,IAAS5uI,KAAdiI,KAAerP,EAAK,MAAM,EACvC,CAYAk2I,QAAAA,CAASl2I,EAAautD,GAClB,OAAOg7D,GAAAwsB,GAAA1lI,KAAK2mI,IAAS5uI,KAAdiI,KAAerP,EAAKutD,GAAU,MAAM,EAC/C,CAKA4oF,YAAAA,CAAaxrI,GACT,MAAM6hH,EAAQ7jH,MAAMw7E,KAAKkpC,GAAKunB,GAALvlI,MAAajO,QACtCorH,EAAMroB,KAAK,CAACr9F,EAAGE,IAAMF,EAAE4kI,cAAc1kI,IACrC,IAAK,IAAI9C,EAAI,EAAGA,EAAIsoH,EAAMhpH,OAAQU,IAAK,CACnC,MAAMY,EAAO0nH,EAAMtoH,GACnByG,EAAyB0iH,GAAKunB,GAALvlI,MAAaiH,IAAIxR,GAAQZ,E,CAE1D,CAYAkyI,QAAAA,CAASp2I,EAAautD,GAClB,GAAI+8D,GAAYtqH,GAAM,CAClB,MAAMqmI,EAAWrmI,EAAI2a,cAErB,GAAI+5H,GAAcrO,GACd,OAAOZ,GAActhD,KAAKuwD,GAAcrO,GAAUtmE,WAGtD,IAAK,MAAMt9D,KAAY4qH,GAAKsnB,GAALtlI,MAAak+C,SAChC,GAAI84E,IAAa5jI,EAAS4jI,SAAY,OAAO5jI,EAGjD,OAAO,I,CAIX,IAA0B,IAAtBzC,EAAI2kB,QAAQ,KAAa,CACzB,MAAM0xH,EAAiC,GACvC,IAAK,MAAQvxI,EAAMrC,KAAc4qH,GAAKsnB,GAALtlI,MACzBvK,EAAK2V,MAAM,KAAgB,KAAOza,GAAOq2I,EAAS1oI,KAAKlL,GAG/D,GAAwB,IAApB4zI,EAAS7yI,OACT,MAAY,UAARxD,EAA0BylI,GAActhD,KAAK,uBACrC,UAARnkF,EAA0BylI,GAActhD,KAAK,wBAC1C,KACJ,GAAIkyD,EAAS7yI,OAAS,EAAG,CAC5B,MAAM8yI,EAAWD,EAAS77E,IAAKt0D,GAAMw3C,KAAKC,UAAUz3C,EAAEyO,WAAWqE,KAAK,MACtE0wG,IAAe,EAAO,qCAAFp4G,OAAwCglI,EAAS,KAAK,OAAQt2I,E,CAGtF,OAAOq2I,EAAS,E,CAKpB,GAAY,mBADZr2I,EAAMylI,GAActhD,KAAKnkF,GAAK2U,UACC,OAAO8wH,GAActhD,KAAK,uBACzD,GAAY,mBAARnkF,EAA4B,OAAOylI,GAActhD,KAAK,wBAE1D,MAAM/6B,EAASikE,GAAKsnB,GAALtlI,MAAaiH,IAAItW,GAChC,OAAIopD,GAEG,IACX,CAKAmtF,YAAAA,CAAa5rI,GACT,MAAM6hH,EAAQ7jH,MAAMw7E,KAAKkpC,GAAKsnB,GAALtlI,MAAajO,QACtCorH,EAAMroB,KAAK,CAACr9F,EAAGE,IAAMF,EAAE4kI,cAAc1kI,IACrC,IAAK,IAAI9C,EAAI,EAAGA,EAAIsoH,EAAMhpH,OAAQU,IAAK,CACnC,MAAMY,EAAO0nH,EAAMtoH,GACnByG,EAAyB0iH,GAAKsnB,GAALtlI,MAAaiH,IAAIxR,GAAQZ,E,CAE1D,CAiCAsyI,aAAAA,CAAc3uF,EAAkC77C,GAC5C,OAAOqhH,GAAKynB,GAALzlI,MAAenQ,OAAO2oD,EAAQ77C,EACzC,CAEAyqI,aAAAA,CAAc5uF,EAAkC0F,GAC5C,OAAO8/D,GAAKynB,GAALzlI,MAAehP,OAAOwnD,EAAQ0F,EACzC,CAMAmpF,YAAAA,CAAanpF,GACT,OAAOl+C,KAAKonI,cAAcpnI,KAAKkmI,OAAOhQ,OAAQh4E,GAAU,GAC5D,CAWAopF,iBAAAA,CAAkBl0I,EAAkCuJ,GAChD,GAAyB,kBAAdvJ,EAAwB,CAC/B,MAAMoD,EAAIwJ,KAAK+mI,SAAS3zI,GACxBinH,GAAe7jH,EAAG,gBAAiB,WAAYpD,GAC/CA,EAAWoD,C,CAMf,OAHA6jH,GAAekB,GAAU5+G,EAAM,EAAG,KAAOvJ,EAAS4jI,SAAQ,uCAAA/0H,OACd7O,EAASqC,KAAK,KAAK,OAAQkH,GAEhEqD,KAAKmnI,cAAc/zI,EAAS8iI,OAAQ3a,GAAU5+G,EAAM,GAC/D,CAUA4qI,iBAAAA,CAAkBn0I,EAAkC8qD,GAChD,GAAyB,kBAAd9qD,EAAwB,CAC/B,MAAMoD,EAAIwJ,KAAK+mI,SAAS3zI,GACxBinH,GAAe7jH,EAAG,gBAAiB,WAAYpD,GAC/CA,EAAWoD,C,CAGf,OAAOyL,GAAO,CACV7O,EAAS4jI,SACTh3H,KAAKonI,cAAch0I,EAAS8iI,OAAQh4E,GAAU,KAEtD,CAUAspF,kBAAAA,CAAmBp0I,EAAqCuJ,GACpD,GAAyB,kBAAdvJ,EAAwB,CAC/B,MAAMoD,EAAIwJ,KAAKwmI,YAAYpzI,GAC3BinH,GAAe7jH,EAAG,mBAAoB,WAAYpD,GAClDA,EAAWoD,C,CAMf,OAHA6jH,GAAekB,GAAU5+G,EAAM,EAAG,KAAOvJ,EAAS4jI,SAAQ,0CAAA/0H,OACX7O,EAASqC,KAAK,KAAK,OAAQkH,GAEnEqD,KAAKmnI,cAAc/zI,EAAS8iI,OAAQ3a,GAAU5+G,EAAM,GAC/D,CAOA8qI,kBAAAA,CAAmBr0I,EAAqC8qD,GACpD,GAAyB,kBAAd9qD,EAAwB,CAC/B,MAAMoD,EAAIwJ,KAAKwmI,YAAYpzI,GAC3BinH,GAAe7jH,EAAG,mBAAoB,WAAYpD,GAClDA,EAAWoD,C,CAGf,OAAOyL,GAAO,CACV7O,EAAS4jI,SACTh3H,KAAKonI,cAAch0I,EAAS8iI,OAAQh4E,GAAU,KAEtD,CAWAwpF,oBAAAA,CAAqBt0I,EAAqCuJ,GACtD,GAAyB,kBAAdvJ,EAAwB,CAC/B,MAAMoD,EAAIwJ,KAAKwmI,YAAYpzI,GAC3BinH,GAAe7jH,EAAG,mBAAoB,WAAYpD,GAClDA,EAAWoD,C,CAGf,IAAIoO,EAAU,iCAEd,MAAMhJ,EAAQo/G,GAAar+G,GAC3B,GAAKf,EAAMzH,OAAS,KAAQ,EACxB,IACI,OAAO6pH,GAAKynB,GAALzlI,MAAenQ,OAAOuD,EAASqkI,QAAS77H,E,CACjD,MAAOvL,GACLuU,EAAU,8B,CAKlBu1G,IAAO,EAAOv1G,EAAS,WAAY,CAC/B8K,MAAO0rG,GAAQx/G,GACfwK,KAAM,CAAEo8F,OAAQpvG,EAASqC,KAAMi7D,UAAWt9D,EAASkS,WAE3D,CAEAy0G,SAAAA,CAAU8E,EAAkB9xB,GACxB,MAAMpwF,EAAO5L,GAAS8tH,EAAO,QAEvBxuH,EAAQ6nI,GAASK,wBAAwB,OAAQxrC,EAAIpwF,GAI3D,GAAItM,EAAMuU,QAAQwvF,WADG,6CACuB,CACxC,MAAM4iC,EAAW5b,GAAQz+G,EAAK6D,MAAM,EAAG,IAEjCmtB,EAAK3tB,KAAK+mI,SAAS/P,GACzB,GAAIrpG,EACA,IACI,MAAMvoB,EAAO44G,GAAKynB,GAALzlI,MAAenQ,OAAO89B,EAAGuoG,OAAQv5H,EAAK6D,MAAM,IACzDnQ,EAAMw1F,OAAS,CACXpwF,KAAMk4B,EAAGl4B,KAAMi7D,UAAW/iC,EAAGroB,SAAUF,QAE3C/U,EAAMigI,OAASjgI,EAAMw1F,OAAOn1B,UAC5BrgE,EAAMuU,QAAU,uBAAH3C,OAA2B5R,EAAMigI,O,CAC/C,MAAOz4H,IACNxH,EAAMuU,QAAU,oD,EAM5B,MAAM+iI,EAAS3nI,KAAK4nI,iBAAiB76C,GASrC,OARI46C,IACAt3I,EAAMqoI,WAAa,CACfl2B,OAAQmlC,EAAOlyI,KACfi7D,UAAWi3E,EAAOj3E,UAClBtrD,KAAMuiI,EAAOviI,OAId/U,CACX,CAUAw3I,oBAAAA,CAAqBz0I,EAAqC8qD,GACtD,GAAyB,kBAAd9qD,EAAwB,CAC/B,MAAMoD,EAAIwJ,KAAKwmI,YAAYpzI,GAC3BinH,GAAe7jH,EAAG,mBAAoB,WAAYpD,GAClDA,EAAWoD,C,CAEf,OAAO4kH,GAAQ4C,GAAKynB,GAALzlI,MAAehP,OAAOoC,EAASqkI,QAASv5E,GAAU,IACrE,CAgCA4pF,kBAAAA,CAAmB10I,EAAkC8qD,GACjD,GAAyB,kBAAd9qD,EAAwB,CAC/B,MAAMoD,EAAIwJ,KAAK6mI,SAASzzI,GACxBinH,GAAe7jH,EAAG,gBAAiB,gBAAiBpD,GACpDA,EAAWoD,C,CAGf2jH,GAAOj8D,EAAO/pD,QAAUf,EAAS8iI,OAAO/hI,OAAQ,0BAAF8N,OAA6B7O,EAASkS,UAChF,sBAAuB,CAAE/K,MAAO2jD,EAAO/pD,OAAQomH,cAAennH,EAAS8iI,OAAO/hI,SAElF,MAAM4zI,EAA+C,GAChD30I,EAAS6jI,WAAa8Q,EAAOzpI,KAAKlL,EAAS8jI,WAGhD,MAAM8Q,EAAcA,CAAC1xH,EAAkB5G,IAChB,WAAf4G,EAAMvmB,KACEyF,GAAGka,GACW,UAAf4G,EAAMvmB,KACLw2H,GAAUnL,GAAQ1rG,KAGX,SAAf4G,EAAMvmB,MAAqC,mBAAX2f,EAChCA,EAASA,EAAQ,OAAQ,OAClB4G,EAAMvmB,KAAK2Z,MAAM,UACxBgG,EAAQ+sG,GAAQ/sG,GACT4G,EAAMvmB,KAAK2Z,MAAM,UACxBgG,EnCp0BV,SAAuB/S,EAAiBxI,GAC1C,OAAOqnH,GAAQ7+G,EAAMxI,GAAQ,EACjC,CmCk0BwB8zI,CAAav4H,EAAO,IACN,YAAf4G,EAAMvmB,MAEbiuH,GAAKynB,GAALzlI,MAAehP,OAAQ,CAAE,WAAa,CAAE0e,IAGrC+rG,GAAaL,GAAQ1rG,GAAQ,KAyBxC,IAtBAwuC,EAAO7yC,QAAQ,CAACqE,EAAOjL,KAEnB,MAAM6R,EAAwBljB,EAAU8iI,OAAOzxH,GAE1C6R,EAAM2+G,QAME,MAATvlH,EACAq4H,EAAOzpI,KAAK,MACc,UAAnBgY,EAAMi5G,UAA2C,UAAnBj5G,EAAMi5G,SAC3ClV,IAAe,EAAO,gDAAkD,YAAc/jG,EAAM7gB,KAAOia,GAC5FpW,MAAMiG,QAAQmQ,GACrBq4H,EAAOzpI,KAAKoR,EAAMy7C,IAAKz7C,GAAUs4H,EAAY1xH,EAAO5G,KAEpDq4H,EAAOzpI,KAAK0pI,EAAY1xH,EAAO5G,IAZ/B2qG,GAAwB,MAAT3qG,EACX,qDAAuD,YAAc4G,EAAM7gB,KAAOia,KAgBvFq4H,EAAO5zI,QAAwC,OAA9B4zI,EAAOA,EAAO5zI,OAAS,IAC3C4zI,EAAO5yD,MAGX,OAAO4yD,CACX,CAEAG,cAAAA,CAAe90I,EAAkC8qD,GAC7C,GAAyB,kBAAd9qD,EAAwB,CAC/B,MAAMoD,EAAIwJ,KAAK6mI,SAASzzI,GACxBinH,GAAe7jH,EAAG,gBAAiB,gBAAiBpD,GACpDA,EAAWoD,C,CAGf,MAAMuxI,EAAwB,GAExBI,EAA8B,GAC9BC,EAA4B,GA4BlC,OA1BKh1I,EAAS6jI,WACV8Q,EAAOzpI,KAAKlL,EAAS8jI,WAGzB7c,GAAen8D,EAAO/pD,SAAWf,EAAS8iI,OAAO/hI,OAC7C,kCAAmC,SAAU+pD,GAEjD9qD,EAAS8iI,OAAO7qH,QAAQ,CAACiL,EAAO7R,KAC5B,MAAMiL,EAAQwuC,EAAOz5C,GACrB,GAAI6R,EAAM2+G,QACN,GAAmB,WAAf3+G,EAAMvmB,KACNg4I,EAAOzpI,KAAK9I,GAAGka,SACZ,GAAmB,UAAf4G,EAAMvmB,KACbg4I,EAAOzpI,KAAKioH,GAAU72G,QACnB,IAAuB,UAAnB4G,EAAMi5G,UAA2C,UAAnBj5G,EAAMi5G,SAE3C,MAAM,IAAIv/H,MAAM,mBAEhB+3I,EAAOzpI,KAAK0/G,GAAKynB,GAALzlI,MAAehP,OAAO,CAAEslB,EAAMvmB,MAAQ,CAAE2f,I,MAGxDy4H,EAAU7pI,KAAKgY,GACf8xH,EAAW9pI,KAAKoR,KAIjB,CACH/S,KAAMqhH,GAAKynB,GAALzlI,MAAehP,OAAOm3I,EAAYC,GACxCL,OAAQA,EAEhB,CAGAM,cAAAA,CAAej1I,EAAkCuJ,EAAiBorI,GAC9D,GAAyB,kBAAd30I,EAAwB,CAC/B,MAAMoD,EAAIwJ,KAAK6mI,SAASzzI,GACxBinH,GAAe7jH,EAAG,gBAAiB,gBAAiBpD,GACpDA,EAAWoD,C,CAGf,GAAc,MAAVuxI,IAAmB30I,EAAS6jI,UAAW,CACvC,MAAMqR,EAAal1I,EAAS8jI,UAC5B7c,GAAeY,GAAY8sB,EAAO,GAAI,KAAOA,EAAO,GAAGz8H,gBAAkBg9H,EACrE,0BAA2B,YAAaP,EAAO,IACnDA,EAASA,EAAOvnI,MAAM,E,CAG1B,MAAMy0H,EAA4B,GAC5BsT,EAA+B,GAC/B5pB,EAA0B,GAEhCvrH,EAAS8iI,OAAO7qH,QAAQ,CAACiL,EAAO7R,KACxB6R,EAAM2+G,QACa,WAAf3+G,EAAMvmB,MAAoC,UAAfumB,EAAMvmB,MAAuC,UAAnBumB,EAAMi5G,UAA2C,UAAnBj5G,EAAMi5G,UACzF0F,EAAQ32H,KAAK61H,GAAUr/C,KAAK,CAAE/kF,KAAM,UAAW0F,KAAM6gB,EAAM7gB,QAC3DkpH,EAAQrgH,MAAK,KAEb22H,EAAQ32H,KAAKgY,GACbqoG,EAAQrgH,MAAK,KAGjBiqI,EAAWjqI,KAAKgY,GAChBqoG,EAAQrgH,MAAK,MAIrB,MAAMkqI,EAA2B,MAAVT,EAAkB/pB,GAAKynB,GAALzlI,MAAenQ,OAAOolI,EAAShzH,GAAO8lI,IAAU,KACnFU,EAAmBzqB,GAAKynB,GAALzlI,MAAenQ,OAAO04I,EAAY5rI,GAAM,GAG3DuhD,EAAqB,GACrBnsD,EAA6B,GACnC,IAAI22I,EAAkB,EAAGC,EAAe,EA6BxC,OA5BAv1I,EAAS8iI,OAAO7qH,QAAQ,CAACiL,EAAO7R,KAC5B,IAAIiL,EAAgC,KACpC,GAAI4G,EAAM2+G,QACN,GAAqB,MAAjBuT,EACA94H,EAAQ,IAAIw1H,GAAQ,WAEjB,GAAIvmB,EAAQl6G,GACfiL,EAAQ,IAAIw1H,GAAQsD,EAAcG,WAGlC,IACIj5H,EAAQ84H,EAAcG,I,CACxB,MAAOt4I,GACLqf,EAAQrf,C,MAIhB,IACIqf,EAAQ+4H,EAAiBC,I,CAC3B,MAAOr4I,GACLqf,EAAQrf,C,CAIhB6tD,EAAO5/C,KAAKoR,GACZ3d,EAAKuM,KAAKgY,EAAM7gB,MAAQ,QAGrBioH,GAAOc,UAAUtgE,EAAQnsD,EACpC,CAQA61I,gBAAAA,CAAiB76C,GACb,MAAMpwF,EAAO5L,GAASg8F,EAAGpwF,KAAM,WACzB+S,EAAQssG,GAAuB,MAAZjvB,EAAGr9E,MAAiBq9E,EAAGr9E,MAAO,EAAG,YAEpDtc,EAAW4M,KAAKwmI,YAAYprB,GAAQz+G,EAAK6D,MAAM,EAAG,KAExD,IAAKpN,EAAY,OAAO,KAExB,MAAMgS,EAAO44G,GAAKynB,GAALzlI,MAAenQ,OAAOuD,EAAS8iI,OAAQv5H,EAAK6D,MAAM,IAC/D,OAAO,IAAIwkI,GAAuB5xI,EAAUA,EAAS4jI,SAAU5xH,EAAMsK,EACzE,CAEAk5H,eAAAA,CAAgBjsI,GACZ,MAAM,IAAI3M,MAAM,QACpB,CAQA64I,QAAAA,CAAS7kI,GACL,MAAM5Q,EAAW4M,KAAK6mI,SAAS7iI,EAAI+jI,OAAO,IAE1C,OAAK30I,GAAYA,EAAS6jI,UAAoB,KAOxC,IAAI6N,GAAe1xI,EAAUA,EAAS8jI,UAAWl3H,KAAKqoI,eAAej1I,EAAU4Q,EAAIrH,KAAMqH,EAAI+jI,QACvG,CAQAe,UAAAA,CAAWnsI,GACP,MAAMosI,EAAU3tB,GAAQz+G,GAElBvJ,EAAW4M,KAAK+mI,SAASxrB,GAAUwtB,EAAS,EAAG,IAErD,IAAK31I,EAAY,OAAO,KAExB,MAAMgS,EAAO44G,GAAKynB,GAALzlI,MAAenQ,OAAOuD,EAAS8iI,OAAQ3a,GAAUwtB,EAAS,IACvE,OAAO,IAAI9D,GAAiB7xI,EAAUA,EAAS4jI,SAAU5xH,EAC7D,CAQA,WAAO0vE,CAAKplE,GAER,OAAIA,aAAiBi2H,GAAoBj2H,EAGnB,kBAAXA,EAA8B,IAAIi2H,GAAUt3F,KAAKuZ,MAAMl4C,IAG1B,oBAAvBA,EAAO02H,WACb,IAAIT,GAAgBj2H,EAAO02H,cAIF,oBAAnB12H,EAAOpK,OACb,IAAIqgI,GAAgBj2H,EAAOpK,OAAO,SAItC,IAAIqgI,GAAUj2H,EACzB,EACH,SAAA42H,GArzBgB31I,EAAautD,EAAmC8qF,GAGzD,GAAI/tB,GAAYtqH,GAAM,CAClB,MAAMqmI,EAAWrmI,EAAI2a,cACrB,IAAK,MAAMlY,KAAY4qH,GAAKwnB,GAALxlI,MAAgBk+C,SACnC,GAAI84E,IAAa5jI,EAAS4jI,SAAY,OAAO5jI,EAEjD,OAAO,I,CAIX,IAA0B,IAAtBzC,EAAI2kB,QAAQ,KAAa,CACzB,MAAM0xH,EAAoC,GAC1C,IAAK,MAAQvxI,EAAMrC,KAAc4qH,GAAKwnB,GAALxlI,MACzBvK,EAAK2V,MAAM,KAAgB,KAAOza,GAAOq2I,EAAS1oI,KAAKlL,GAG/D,GAAI8qD,EAAQ,CACR,MAAM+qF,EAAa/qF,EAAO/pD,OAAS,EAAK+pD,EAAOA,EAAO/pD,OAAS,GAAI,KAEnE,IAAI+0I,EAAchrF,EAAO/pD,OACrBg1I,GAAe,EACf5hB,GAAM+G,QAAQ2a,IAAiC,cAAnBA,EAAUl5I,OACtCo5I,GAAe,EACfD,KAKJ,IAAK,IAAIr0I,EAAImyI,EAAS7yI,OAAS,EAAGU,GAAK,EAAGA,IAAK,CAC3C,MAAMqhI,EAAS8Q,EAASnyI,GAAGqhI,OAAO/hI,OAC9B+hI,IAAWgT,GAAiBC,GAAgBjT,IAAWgT,EAAc,GACrElC,EAAS74F,OAAOt5C,EAAG,E,CAK3B,IAAK,IAAIA,EAAImyI,EAAS7yI,OAAS,EAAGU,GAAK,EAAGA,IAAK,CAC3C,MAAMqhI,EAAS8Q,EAASnyI,GAAGqhI,OAC3B,IAAK,IAAIl4H,EAAI,EAAGA,EAAIkgD,EAAO/pD,OAAQ6J,IAE/B,GAAKupH,GAAM+G,QAAQpwE,EAAOlgD,IAA1B,CAGA,GAAIA,GAAKk4H,EAAO/hI,OAAQ,CACpB,GAAuB,cAAnB+pD,EAAOlgD,GAAGjO,KAAwB,SACtCi3I,EAAS74F,OAAOt5C,EAAG,GACnB,K,CAIJ,GAAIqpD,EAAOlgD,GAAGjO,OAASmmI,EAAOl4H,GAAGuxH,SAAU,CACvCyX,EAAS74F,OAAOt5C,EAAG,GACnB,K,IAQhB,GAAwB,IAApBmyI,EAAS7yI,QAAgB+pD,GAAUA,EAAO/pD,SAAW6yI,EAAS,GAAG9Q,OAAO/hI,OAAQ,CAChF,MAAMi1I,EAAUlrF,EAAOA,EAAO/pD,OAAS,IACxB,MAAXi1I,GAAmB9vI,MAAMiG,QAAQ6pI,IAAgC,kBAAbA,IACpDpC,EAAS74F,OAAO,EAAG,E,CAI3B,GAAwB,IAApB64F,EAAS7yI,OAAgB,OAAO,KAEpC,GAAI6yI,EAAS7yI,OAAS,GAAK60I,EAAa,CACpC,MAAM/B,EAAWD,EAAS77E,IAAKt0D,GAAMw3C,KAAKC,UAAUz3C,EAAEyO,WAAWqE,KAAK,MACtE0wG,IAAe,EAAO,gDAAFp4G,OAAmDglI,EAAS,KAAK,MAAOt2I,E,CAGhG,OAAOq2I,EAAS,E,CAIpB,MAAMjtF,EAASikE,GAAKwnB,GAALxlI,MAAgBiH,IAAIsvH,GAAiBzhD,KAAKnkF,GAAK2U,UAC9D,OAAIy0C,GAEG,IACX,CAAC,SAAA4sF,GAmDSh2I,EAAautD,EAA0C8qF,GAG7D,GAAI/tB,GAAYtqH,GAAM,CAClB,MAAM23I,EAAa33I,EAAI2a,cACvB,IAAK,MAAMlY,KAAY4qH,GAAKunB,GAALvlI,MAAak+C,SAChC,GAAIoqF,IAAel1I,EAAS8jI,UAAa,OAAO9jI,EAEpD,OAAO,I,CAIX,IAA0B,IAAtBzC,EAAI2kB,QAAQ,KAAa,CACzB,MAAM0xH,EAAiC,GACvC,IAAK,MAAQvxI,EAAMrC,KAAc4qH,GAAKunB,GAALvlI,MACzBvK,EAAK2V,MAAM,KAAgB,KAAOza,GAAOq2I,EAAS1oI,KAAKlL,GAG/D,GAAI8qD,EAAQ,CAER,IAAK,IAAIrpD,EAAImyI,EAAS7yI,OAAS,EAAGU,GAAK,EAAGA,IAClCmyI,EAASnyI,GAAGqhI,OAAO/hI,OAAS+pD,EAAO/pD,QACnC6yI,EAAS74F,OAAOt5C,EAAG,GAK3B,IAAK,IAAIA,EAAImyI,EAAS7yI,OAAS,EAAGU,GAAK,EAAGA,IAAK,CAC3C,MAAMqhI,EAAS8Q,EAASnyI,GAAGqhI,OAC3B,IAAK,IAAIl4H,EAAI,EAAGA,EAAIkgD,EAAO/pD,OAAQ6J,IAE/B,GAAKupH,GAAM+G,QAAQpwE,EAAOlgD,KAGtBkgD,EAAOlgD,GAAGjO,OAASmmI,EAAOl4H,GAAGuxH,SAAU,CACvCyX,EAAS74F,OAAOt5C,EAAG,GACnB,K,GAMhB,GAAwB,IAApBmyI,EAAS7yI,OAAgB,OAAO,KAEpC,GAAI6yI,EAAS7yI,OAAS,GAAK60I,EAAa,CACpC,MAAM/B,EAAWD,EAAS77E,IAAKt0D,GAAMw3C,KAAKC,UAAUz3C,EAAEyO,WAAWqE,KAAK,MACtE0wG,IAAe,EAAO,6CAAFp4G,OAAgDglI,EAAS,KAAK,MAAOt2I,E,CAG7F,OAAOq2I,EAAS,E,CAIpB,MAAMjtF,EAASikE,GAAKunB,GAALvlI,MAAaiH,IAAIovH,GAAcvhD,KAAKnkF,GAAK2U,UACxD,OAAIy0C,GAEG,IACX,CC7mBJ,MAAM2hE,GAAO9B,OAAO,GAwBpB,SAASxqG,GAAYM,GACjB,OAAa,MAATA,EAAwB,KACrBA,CACX,CAEA,SAAS25H,GAAO35H,GACZ,OAAa,MAATA,EAAwB,KACrBA,EAAM1T,UACjB,CAQM,MAAOstI,GAmCTr6H,WAAAA,CAAYs6H,EAA0BC,EAA8BC,GAlCpEn4C,EAAA,wBAKAA,EAAA,4BAcAA,EAAA,oCAgBIK,GAA0B3xF,KAAM,CAC5BupI,SAAUn6H,GAASm6H,GACnBC,aAAcp6H,GAASo6H,GACvBC,qBAAsBr6H,GAASq6H,IAEvC,CAKA9vB,MAAAA,GACI,MAAM,SACF4vB,EAAQ,aAAEC,EAAY,qBAAEC,GACxBzpI,KACJ,MAAO,CACHw9H,MAAO,UACP+L,SAAUF,GAAOE,GACjBC,aAAcH,GAAOG,GACrBC,qBAAsBJ,GAAOI,GAErC,EAuPE,SAAUC,GAAYzL,GACxB,MAAMlkF,EAAc,CAAC,EAGjBkkF,EAAI7rC,KAAMr4C,EAAOq4C,GAAK6rC,EAAI7rC,IAC1B6rC,EAAInpD,OAAQ/6B,EAAO+6B,KAAOmpD,EAAInpD,MAE9BmpD,EAAIthI,OAAQo9C,EAAOp9C,KAAOy+G,GAAQ6iB,EAAIthI,OAE1C,MAAMgtI,EAAa,qFAAqFv+H,MAAM,KAC9G,IAAK,MAAMza,KAAOg5I,EACRh5I,KAAOstI,GAA2B,MAAbA,EAAKttI,KAChCopD,EAAOppD,GAAOqrH,GAAgBiiB,EAAKttI,GAAM,WAAFsR,OAActR,KAGzD,MAAMi5I,EAAa,aAAax+H,MAAM,KACtC,IAAK,MAAMza,KAAOi5I,EACRj5I,KAAOstI,GAA2B,MAAbA,EAAKttI,KAChCopD,EAAOppD,GAAOsrH,GAAgBgiB,EAAKttI,GAAM,WAAFsR,OAActR,KAkCzD,OA/BIstI,EAAI4L,aACJ9vF,EAAO8vF,WAAazN,GAAc6B,EAAI4L,aAGtC5L,EAAI6L,oBACJ/vF,EAAO+vF,kBAAoB7L,EAAI6L,kBAAkBtpI,SAGjD,aAAcy9H,IAAOlkF,EAAOgwF,SAAW9L,EAAI8L,UAE3C,mBAAoB9L,IACpBlkF,EAAOiwF,iBAAmB/L,EAAI+L,gBAG9B,eAAgB/L,IAChBlkF,EAAOkwF,WAAahM,EAAIgM,YAGxB,wBAAyBhM,GAAOA,EAAIiM,sBACpCnwF,EAAOmwF,oBAAsBjM,EAAIiM,oBAAoB1pI,SAGrD,QAASy9H,IAAOlkF,EAAOowF,IAAMlM,EAAIkM,KAEjC,UAAWlM,GAAOA,EAAImM,QACtBrwF,EAAOqwF,MAAQnM,EAAImM,MAAMj/E,IAAKxzD,GACtBujH,GAAYvjH,GAAayjH,GAAQzjH,GAC9Bb,OAAOyW,OAAO,CAAC,EAAI5V,KAI3BoiD,CACX,CAwCA,IAAAswF,GAAA,IAAAjpG,QAIM,MAAOkpG,GA+HTr7H,WAAAA,CAAYjZ,EAAoBu0I,GA7HhCj5C,EAAA,wBAMAA,EAAA,sBAMAA,EAAA,oBAQAA,EAAA,yBAMAA,EAAA,0BAKAA,EAAA,qCAMAA,EAAA,qBAQAA,EAAA,0BAYAA,EAAA,wBAKAA,EAAA,uBAMAA,EAAA,yBAMAA,EAAA,4BAKAA,EAAA,2BAMAA,EAAA,6BAMAA,EAAA,qBAMAA,EAAA,0BAMAA,EAAA,yBAKAA,EAAA,6BASS2nB,GAAA,KAAAoxB,QAAa,GAUlBtsB,GAAKssB,GAALrqI,KAAqBhK,EAAMw0I,aAAar/E,IAAK4hC,GACtB,kBAARA,EACA,IAAI09C,GAAoB19C,EAAIw9C,GAEhCx9C,IAGX4E,GAAwB3xF,KAAM,CAC1BuqI,WAEAl1F,KAAMjmC,GAASpZ,EAAMq/C,MAErBztB,OAAQ5xB,EAAM4xB,OACdjiB,UAAW3P,EAAM2P,UAEjB+kI,WAAY10I,EAAM00I,WAClBC,sBAAuB30I,EAAM20I,sBAE7BliC,MAAOzyG,EAAMyyG,MACbmiC,WAAY50I,EAAM40I,WAElBC,SAAU70I,EAAM60I,SAChBC,QAAS90I,EAAM80I,QACfC,YAAa/0I,EAAM+0I,YACnBC,cAAeh1I,EAAMg1I,cACrBC,MAAOj1I,EAAMi1I,MACbC,WAAY97H,GAASpZ,EAAMk1I,YAC3BC,UAAWn1I,EAAMm1I,UAEjBC,cAAeh8H,GAASpZ,EAAMo1I,eAE9BC,UAAWr1I,EAAMq1I,UACjBC,aAAct1I,EAAMs1I,cAE5B,CAMA,gBAAId,GACA,OAAOxsB,GAAKqsB,GAALrqI,MAAmBmrD,IAAK4hC,GACR,kBAARA,EAA2BA,EAC/BA,EAAG13C,KAElB,CAUA,0BAAIk2F,GACA,MAAMC,EAAMxtB,GAAKqsB,GAALrqI,MAAmBQ,QAG/B,OAAmB,IAAfgrI,EAAIr3I,OAAuB,IAG/BgmH,GAA0B,kBAAZqxB,EAAI,GAAkB,sDAAuD,wBAAyB,CAChH3wB,UAAW,2BAGoB2wB,EACvC,CAKA7xB,MAAAA,GACI,MAAM,cACFyxB,EAAa,WAAER,EAAU,UAAEO,EAAS,SAAEN,EAAQ,QAAEC,EAAO,KAAEz1F,EAAI,MAC7D41F,EAAK,WAAEC,EAAU,MAAEziC,EAAK,OAAE7gF,EAAM,WAAE8iH,EAAU,sBAAEC,EAAqB,UACnEU,EAAS,aAAEC,EAAY,UAAE3lI,EAAS,aAAE6kI,GACpCxqI,KAEJ,MAAO,CACHw9H,MAAO,QACP4N,cAAe/B,GAAO+B,GACtBR,WAAYvB,GAAOuB,GACnBO,YACAN,SAAUxB,GAAOwB,GACjBC,QAASzB,GAAOyB,GAChBC,YAAa1B,GAAOrpI,KAAK+qI,aACzBC,cAAe3B,GAAOrpI,KAAKgrI,eAC3B31F,OAAM41F,QAAOC,aAAYziC,QAAO7gF,SAAQ8iH,aAAY/kI,YACpDglI,wBAAuBU,YAAWC,eAClCd,eAER,CAEA,CAAC9zI,OAAOyW,YACJ,IAAI1I,EAAQ,EACZ,MAAM+mI,EAAMxrI,KAAKwqI,aACjB,MAAO,CACHtvI,KAAMA,IACEuJ,EAAQzE,KAAK7L,OACN,CACHub,MAAO87H,EAAI/mI,KAAU8xB,MAAM,GAG5B,CAAE7mB,WAAOuqC,EAAW1jB,MAAM,GAG7C,CAKA,UAAIpiC,GAAmB,OAAO6pH,GAAKqsB,GAALrqI,MAAmB7L,MAAQ,CAKzD,QAAIqzB,GACA,OAAsB,MAAlBxnB,KAAK2F,UAA4B,KAC9B,IAAIC,KAAsB,IAAjB5F,KAAK2F,UACzB,CAKA,oBAAM8lI,CAAeC,GAEjB,IAAI3+C,EACJ,GAA4B,kBAAjB2+C,EACP3+C,EAAKixB,GAAKqsB,GAALrqI,MAAmB0rI,OAErB,CACH,MAAMr2F,EAAOq2F,EAAYpgI,cACzB,IAAK,MAAMV,KAAKozG,GAAKqsB,GAALrqI,MAAoB,CAChC,GAAkB,kBAAP4K,EAAiB,CACxB,GAAIA,IAAMyqC,EAAQ,SAClB03C,EAAKniF,EACL,K,CAEA,GAAIA,EAAEyqC,OAASA,EAAf,CACA03C,EAAKniF,EACL,K,GAIZ,GAAU,MAANmiF,EAAc,MAAM,IAAI/8F,MAAM,cAElC,MAAmB,kBAAR+8F,QAC4B/sF,KAAKuqI,SAASkB,eAAe1+C,GAEzDA,CAEf,CAQA4+C,wBAAAA,CAAyBD,GACrB,MAAMF,EAAMxrI,KAAKurI,uBACjB,GAA4B,kBAAjBG,EACP,OAAOF,EAAIE,GAGfA,EAAcA,EAAYpgI,cAC1B,IAAK,MAAMyhF,KAAMy+C,EACb,GAAIz+C,EAAG13C,OAASq2F,EAAe,OAAO3+C,EAG1CstB,IAAe,EAAO,0BAA2B,cAAeqxB,EACpE,CAMAE,OAAAA,GAAgC,QAAS5rI,KAAKq1C,IAAM,CAKpDw2F,QAAAA,GACI,QAAS7rI,KAAKorI,aAClB,CAKAU,aAAAA,GACI,IAAK9rI,KAAK4rI,UAAa,MAAM,IAAI57I,MAAM,IACvC,MAohCG,CAAE+7I,OAAQ,aAAc12F,MADAr/C,EAnhCMgK,MAohCMq1C,KAAMztB,OAAQ5xB,EAAM4xB,QADnE,IAAmC5xB,CAlhC/B,EAWE,MAAOg2I,GAqET/8H,WAAAA,CAAYjL,EAAgBumI,GAnE5Bj5C,EAAA,wBAMAA,EAAA,+BAMAA,EAAA,yBAMAA,EAAA,2BAQAA,EAAA,uBAQAA,EAAA,uBAKAA,EAAA,oBAKAA,EAAA,sBAQAA,EAAA,qBAOAA,EAAA,gCASItxF,KAAKuqI,SAAWA,EAEhB,MAAMxC,EAASjxI,OAAOo7G,OAAOluG,EAAI+jI,OAAOvnI,SACxCmxF,GAAsB3xF,KAAM,CACxBisI,gBAAiBjoI,EAAIioI,gBACrBC,UAAWloI,EAAIkoI,UACfC,YAAanoI,EAAImoI,YAEjBC,QAASpoI,EAAIooI,QAEbzlB,QAAS3iH,EAAI2iH,QACbhqH,KAAMqH,EAAIrH,KAEVorI,SAEAtjI,MAAOT,EAAIS,MACX4nI,iBAAkBroI,EAAIqoI,kBAE9B,CAKA1yB,MAAAA,GACI,MAAM,QACFgN,EAAO,UAAEulB,EAAS,YAAEC,EAAW,KAAExvI,EAAI,MAAE8H,EAAK,QAC5C2nI,EAAO,OAAErE,EAAM,gBAAEkE,EAAe,iBAAEI,GAClCrsI,KAEJ,MAAO,CACHw9H,MAAO,MACP7W,UAASulB,YAAWC,cAAaxvI,OAAM8H,QACvC2nI,UAASrE,SAAQkE,kBAAiBI,mBAE1C,CAKA,cAAMC,GACF,MAAMt2I,QAAcgK,KAAKuqI,SAAS+B,SAAStsI,KAAKksI,WAEhD,OADA/xB,KAASnkH,EAAO,6BAA8B,gBAAiB,CAAC,GACzDA,CACX,CAKA,oBAAMy1I,GACF,MAAM1+C,QAAW/sF,KAAKuqI,SAASkB,eAAezrI,KAAKisI,iBAEnD,OADA9xB,KAASptB,EAAI,6BAA8B,gBAAiB,CAAC,GACtDA,CACX,CAMA,2BAAMw/C,GACF,MAAMC,QAAgBxsI,KAAKuqI,SAASgC,sBAAsBvsI,KAAKisI,iBAE/D,OADA9xB,KAASqyB,EAAS,qCAAsC,gBAAiB,CAAC,GACnEA,CACX,CAKAC,YAAAA,GACI,MA04BG,CAAEV,OAAQ,WAAY/nI,IAAK,CAC9BioI,iBAFwBjoI,EAz4BMhE,MA24BTisI,gBACrBC,UAAWloI,EAAIkoI,UACfC,YAAanoI,EAAImoI,YACjBxlB,QAAS3iH,EAAI2iH,QACbhqH,KAAMqH,EAAIrH,KACVorI,OAAQjxI,OAAOo7G,OAAOluG,EAAI+jI,OAAOvnI,SACjCiE,MAAOT,EAAIS,QARnB,IAAgCT,CAx4B5B,EAoBJ,IAAA0oI,GAAA,IAAAtrG,QAIM,MAAOurG,GAsHT19H,WAAAA,CAAY89E,EAA8Bw9C,GArH1Cj5C,EAAA,wBAMAA,EAAA,kBAKAA,EAAA,oBAKAA,EAAA,+BASAA,EAAA,oBAKAA,EAAA,qBAKAA,EAAA,yBAKAA,EAAA,2BAKAA,EAAA,yBAOAA,EAAA,uBASAA,EAAA,2BAKAA,EAAA,iCASAA,EAAA,wBASAA,EAAA,4BAKAA,EAAA,oBAMAA,EAAA,sBASAA,EAAA,oBAQS2nB,GAAA,KAAAyzB,QAAK,GAMV3uB,GAAK2uB,GAAL1sI,KAAalJ,OAAOo7G,OAAOnlB,EAAG6/C,KAAKzhF,IAAKnnD,GAC7B,IAAIgoI,GAAIhoI,EAAKumI,MAGxB,IAAIhB,EAAW7tB,GACa,MAAxB3uB,EAAG8/C,kBACHtD,EAAWx8C,EAAG8/C,kBACQ,MAAf9/C,EAAGw8C,WACVA,EAAWx8C,EAAGw8C,UAGlB53C,GAAqC3xF,KAAM,CACvCuqI,WAEAn4C,GAAIrF,EAAGqF,GACPtd,KAAMiY,EAAGjY,KACTg4D,gBAAiB//C,EAAG+/C,gBAEpBz3F,KAAM03C,EAAG13C,KACT5wC,MAAOsoF,EAAGtoF,MAEVynI,UAAWn/C,EAAGm/C,UACdC,YAAap/C,EAAGo/C,YAEhBY,UAAWhgD,EAAGggD,UAEdjC,QAAS/9C,EAAG+9C,QACZkC,kBAAmBjgD,EAAGigD,kBACtBjC,YAAah+C,EAAGg+C,YAChBxB,WACA0D,aAAclgD,EAAGkgD,aAEjBl9I,KAAMg9F,EAAGh9F,KAETqqG,OAAQrN,EAAGqN,OACXwR,KAAM7e,EAAG6e,MAEjB,CAKA,QAAIghC,GAA6B,OAAO5uB,GAAK0uB,GAAL1sI,KAAY,CAKpD25G,MAAAA,GACI,MAAM,GACFvnB,EAAE,KAAEtd,EAAI,gBAAEg4D,EAAe,KAAEz3F,EAAI,MAAE5wC,EAAK,UACtCynI,EAAS,YAAEC,EAAW,UAAEY,EAAS,KACjCH,EAAI,OACJxyC,EAAM,KAAEwR,GACR5rG,KAEJ,MAAO,CACHw9H,MAAO,qBACP0O,YAAWC,cAEXW,kBACAE,kBAAmB3D,GAAOrpI,KAAKgtI,mBAC/Bl4D,OACAy0D,SAAUF,GAAOrpI,KAAKupI,UACtBwB,YAAa1B,GAAOrpI,KAAK+qI,aACzBkC,aAAc5D,GAAOrpI,KAAKitI,cAC1BnC,QAASzB,GAAOrpI,KAAK8qI,SACrBz1F,OAAM5wC,QAAOmoI,OAAMG,YAAWnhC,OAAMxR,SAAQhI,KAEpD,CAKA,UAAIj+F,GAAmB,OAAO6L,KAAK4sI,KAAKz4I,MAAQ,CAEhD,CAACuC,OAAOyW,YACJ,IAAI1I,EAAQ,EACZ,MAAO,CACHvJ,KAAMA,IACEuJ,EAAQzE,KAAK7L,OACN,CAAEub,MAAO1P,KAAK4sI,KAAKnoI,KAAU8xB,MAAM,GAEvC,CAAE7mB,WAAOuqC,EAAW1jB,MAAM,GAG7C,CAKA,OAAI22G,GACA,OAAOltI,KAAK8qI,QAAU9qI,KAAKupI,QAC/B,CAKA,cAAM+C,GACF,MAAMt2I,QAAcgK,KAAKuqI,SAAS+B,SAAStsI,KAAKksI,WAChD,GAAa,MAATl2I,EAAiB,MAAM,IAAIhG,MAAM,QACrC,OAAOgG,CACX,CAKA,oBAAMy1I,GACF,MAAM1+C,QAAW/sF,KAAKuqI,SAASkB,eAAezrI,KAAKq1C,MACnD,GAAU,MAAN03C,EAAc,MAAM,IAAI/8F,MAAM,QAClC,OAAO+8F,CACX,CAQA,eAAMogD,GACF,aAAsBntI,KAAKuqI,SAAS6C,qBAAqBptI,KAAKq1C,KAClE,CAKA,mBAAMg4F,GACF,aAAcrtI,KAAKuqI,SAAS+C,iBAAoBttI,KAAKmsI,YAAc,CACvE,CAKAM,YAAAA,GACI,OAAOc,GAA+BvtI,KAC1C,CAKAwtI,cAAAA,CAAeC,GAGX,OAFAtzB,IAAQszB,GAASA,EAAM7B,UAAW,gDAC9B,wBAAyB,CAAE/wB,UAAW,0BACnC6yB,GAAiC1tI,KAAMytI,EAClD,EA8BJ,IAAAE,GAAA,IAAAvsG,QASM,MAAOqpG,GAiJTx7H,WAAAA,CAAY89E,EAA+Bw9C,GAhJ3Cj5C,EAAA,wBAMAA,EAAA,2BAOAA,EAAA,yBAOAA,EAAA,qBAKAA,EAAA,oBAKAA,EAAA,oBAMAA,EAAA,kBAUAA,EAAA,oBAOAA,EAAA,qBAUAA,EAAA,wBAOAA,EAAA,wBAcAA,EAAA,oCAOAA,EAAA,4BAMAA,EAAA,gCAKAA,EAAA,oBAKAA,EAAA,qBAMAA,EAAA,uBAKAA,EAAA,yBAKAA,EAAA,0BAMAA,EAAA,mCAKAA,EAAA,iCAKA2nB,GAAA,KAAA00B,QAAW,GAMP3tI,KAAKuqI,SAAWA,EAEhBvqI,KAAKmsI,YAAiC,MAAlBp/C,EAAGo/C,YAAuBp/C,EAAGo/C,YAAa,KAC9DnsI,KAAKksI,UAA6B,MAAhBn/C,EAAGm/C,UAAqBn/C,EAAGm/C,UAAW,KAExDlsI,KAAKq1C,KAAO03C,EAAG13C,KACfr1C,KAAKyE,MAAQsoF,EAAGtoF,MAEhBzE,KAAKjQ,KAAOg9F,EAAGh9F,KAEfiQ,KAAK80E,KAAOiY,EAAGjY,KACf90E,KAAKoyF,GAAKrF,EAAGqF,IAAM,KAEnBpyF,KAAK6qI,SAAW99C,EAAG89C,SACnB7qI,KAAKyoG,MAAQ1b,EAAG0b,MAChBzoG,KAAKrD,KAAOowF,EAAGpwF,KACfqD,KAAK0P,MAAQq9E,EAAGr9E,MAEhB1P,KAAKupI,SAAWx8C,EAAGw8C,SACnBvpI,KAAKypI,qBAAmD,MAA3B18C,EAAG08C,qBAAgC18C,EAAG08C,qBAAsB,KACzFzpI,KAAKwpI,aAAmC,MAAnBz8C,EAAGy8C,aAAwBz8C,EAAGy8C,aAAc,KACjExpI,KAAK4tI,iBAA2C,MAAvB7gD,EAAG6gD,iBAA4B7gD,EAAG6gD,iBAAkB,KAE7E5tI,KAAKo5H,QAAUrsC,EAAGqsC,QAClBp5H,KAAK0wD,UAAYq8B,EAAGr8B,UAEpB1wD,KAAK6pI,WAA+B,MAAjB98C,EAAG88C,WAAsB98C,EAAG88C,WAAY,KAC3D7pI,KAAKkqI,oBAAiD,MAA1Bn9C,EAAGm9C,oBAA+Bn9C,EAAGm9C,oBAAqB,KAEtFlqI,KAAK8pI,kBAA6C,MAAxB/8C,EAAG+8C,kBAA6B/8C,EAAG+8C,kBAAmB,KAEhF/rB,GAAK4vB,GAAL3tI,MAAoB,EACxB,CAKA25G,MAAAA,GACI,MAAM,YACFwyB,EAAW,UAAED,EAAS,MAAEznI,EAAK,KAAE4wC,EAAI,KAAEtlD,EAAI,GAAEqiG,EAAE,KAAEtd,EAAI,MAAE2zB,EAAK,KAC1D9rG,EAAI,UAAE+zD,EAAS,WAAEm5E,EAAU,oBAAEK,GAC7BlqI,KAEJ,MAAO,CACHw9H,MAAO,sBACPqM,aAAYsC,cAAaD,YACzBhC,sBACA9Q,QAASiQ,GAAOrpI,KAAKo5H,SACrBz8H,OAAMm4E,OACN+1D,SAAUxB,GAAOrpI,KAAK6qI,UACtBtB,SAAUF,GAAOrpI,KAAKupI,UACtBl0F,OACAm0F,aAAcH,GAAOrpI,KAAKwpI,cAC1BC,qBAAsBJ,GAAOrpI,KAAKypI,sBAClCmE,iBAAkBvE,GAAOrpI,KAAK4tI,kBAC9BnlC,QAAO/3C,YAAW0hC,KAAI3tF,QAAO1U,OAC7B2f,MAAO25H,GAAOrpI,KAAK0P,OAE3B,CAOA,cAAM48H,GACF,IAAIH,EAAcnsI,KAAKmsI,YACvB,GAAmB,MAAfA,EAAqB,CACrB,MAAMp/C,QAAW/sF,KAAKyrI,iBAClB1+C,IAAMo/C,EAAcp/C,EAAGo/C,Y,CAE/B,GAAmB,MAAfA,EAAuB,OAAO,KAClC,MAAMn2I,EAAQgK,KAAKuqI,SAAS+B,SAASH,GACrC,GAAa,MAATn2I,EAAiB,MAAM,IAAIhG,MAAM,QACrC,OAAOgG,CACX,CAOA,oBAAMy1I,GACF,OAAOzrI,KAAKuqI,SAASkB,eAAezrI,KAAKq1C,KAC7C,CAKA,mBAAMg4F,GACF,GAAwB,MAApBrtI,KAAKmsI,YAAqB,CAC1B,MAAM,GAAEp/C,EAAE,YAAEo/C,SAAsB5yB,GAAkB,CAChDxsB,GAAI/sF,KAAKyrI,iBACTU,YAAansI,KAAKuqI,SAAS+C,mBAI/B,OAAU,MAANvgD,GAAgC,MAAlBA,EAAGo/C,YAA8B,EAE5CA,EAAcp/C,EAAGo/C,YAAc,C,CAI1C,aAD0BnsI,KAAKuqI,SAAS+C,iBACnBttI,KAAKmsI,YAAc,CAC5C,CAWA,UAAM3I,CAAKqK,EAAoBnN,GAC3B,MAAMoN,EAAyB,MAAbD,EAAqB,EAAGA,EACpCnP,EAAuB,MAAZgC,EAAoB,EAAGA,EAExC,IAAIqN,EAAa/vB,GAAK2vB,GAAL3tI,MACbguI,GAAY,EACZC,GAAgC,IAAhBF,EACpB,MAAMG,EAAmB/xC,UAErB,GAAI8xC,EAAgB,OAAO,KAC3B,MAAM,YAAE9B,EAAW,MAAE1jC,SAAgB8Q,GAAkB,CACnD4yB,YAAansI,KAAKuqI,SAAS+C,iBAC3B7kC,MAAOzoG,KAAKuqI,SAAS4D,oBAAoBnuI,KAAK80E,QAKlD,GAAI2zB,EAAQzoG,KAAKyoG,MAEb,YADAslC,EAAa5B,GAKjB,GAAI8B,EAAgB,OAAO,KAC3B,MAAMG,QAAcpuI,KAAKyrI,iBACzB,IAAI2C,GAA8B,MAArBA,EAAMjC,YAUnB,KALkB,IAAd6B,IACAA,EAAWD,EAAa,EACpBC,EAAWhwB,GAAK2vB,GAAL3tI,QAAoBguI,EAAWhwB,GAAK2vB,GAAL3tI,QAG3CguI,GAAY7B,GAAa,CAE5B,GAAI8B,EAAgB,OAAO,KAC3B,MAAMj4I,QAAcgK,KAAKuqI,SAAS+B,SAAS0B,GAAU,GAGrD,GAAa,MAATh4I,EAAiB,OAGrB,IAAK,MAAMq/C,KAAQr/C,EACf,GAAIq/C,IAASr1C,KAAKq1C,KAAQ,OAI9B,IAAK,IAAIxgD,EAAI,EAAGA,EAAImB,EAAM7B,OAAQU,IAAK,CACnC,MAAMk4F,QAAgC/2F,EAAMy1I,eAAe52I,GAE3D,GAAIk4F,EAAGjY,OAAS90E,KAAK80E,MAAQiY,EAAG0b,QAAUzoG,KAAKyoG,MAAO,CAElD,GAAIwlC,EAAgB,OAAO,KAC3B,MAAMzB,QAAgBxsI,KAAKuqI,SAASgC,sBAAsBx/C,EAAG13C,MAG7D,GAAe,MAAXm3F,EAAmB,OAGvB,GAAKL,EAAcK,EAAQL,YAAc,EAAK2B,EAAY,OAG1D,IAAIxd,EAAgD,WAChDvjC,EAAGpwF,OAASqD,KAAKrD,MAAQowF,EAAGqF,KAAOpyF,KAAKoyF,IAAMrF,EAAGr9E,QAAU1P,KAAK0P,MAChE4gH,EAAS,WACW,OAAZvjC,EAAGpwF,MAAiBowF,EAAGjY,OAASiY,EAAGqF,IAAMrF,EAAGr9E,QAAUgsG,KAC9D4U,EAAS,aAGbnW,IAAO,EAAO,2BAA4B,uBAAwB,CAC9DgkB,UAAuB,aAAX7N,GAAoC,cAAXA,EACrCA,SACA+d,YAAathD,EAAGuhD,uBAAuBP,GACvC14F,KAAM03C,EAAG13C,KACTm3F,W,EAKZwB,G,GAKFO,EAAgB/B,IAClB,GAAe,MAAXA,GAAsC,IAAnBA,EAAQpyC,OAAgB,OAAOoyC,EACtDryB,IAAO,EAAO,iCAAkC,iBAAkB,CAC9Dv+E,OAAQ,kBACRj/B,KAAM,KAAM2zH,OAAQ,KAAMoI,WAAY,KAAM7yC,OAAQ,KACpD4yC,YAAa,CACTrmC,GAAIo6C,EAAQp6C,GACZtd,KAAM03D,EAAQ13D,KACdn4E,KAAM,IACP6vI,aAILA,QAAgBxsI,KAAKuqI,SAASgC,sBAAsBvsI,KAAKq1C,MAE/D,GAAiB,IAAby4F,EAAkB,OAAOS,EAAa/B,GAE1C,GAAIA,GACA,GAAiB,IAAbsB,SAAyBtB,EAAQa,iBAAoBS,EACrD,OAAOS,EAAa/B,QAQxB,SAHM0B,IAGW,IAAbJ,EAAkB,OAAO,KAGjC,MAAMU,EAAS,IAAI59G,QAAQ,CAACG,EAAS09G,KAEjC,MAAMC,EAAgC,GAChCjM,EAASA,KAAQiM,EAAWrjI,QAASha,GAAMA,MAMjD,GAHAq9I,EAAWpwI,KAAK,KAAQ2vI,GAAe,IAGnCvP,EAAU,EAAG,CACb,MAAMF,EAAQhuG,WAAW,KACrBiyG,IACAgM,EAAO10B,GAAU,+BAAgC,aAClD2kB,GACHgQ,EAAWpwI,KAAK,KAAQoyB,aAAa8tG,I,CAGzC,MAAMmQ,EAAaxyC,UAEf,SAAWqwC,EAAQa,iBAAoBS,EAAU,CAC7CrL,IACA,IACI1xG,EAAQw9G,EAAa/B,G,CACvB,MAAOn8I,GAASo+I,EAAOp+I,E,IAMjC,GAHAq+I,EAAWpwI,KAAK,KAAQ0B,KAAKuqI,SAASqE,IAAI5uI,KAAKq1C,KAAMs5F,KACrD3uI,KAAKuqI,SAASsE,GAAG7uI,KAAKq1C,KAAMs5F,GAExBZ,GAAc,EAAG,CACjB,MAAMe,EAAkB3yC,UACpB,UAEU+xC,G,CAER,MAAO79I,GAEL,GAAIwpH,GAAQxpH,EAAO,wBAGf,OAFAoyI,SACAgM,EAAOp+I,E,CAMV49I,GACDjuI,KAAKuqI,SAASwE,KAAK,QAASD,IAGpCJ,EAAWpwI,KAAK,KAAQ0B,KAAKuqI,SAASqE,IAAI,QAASE,KACnD9uI,KAAKuqI,SAASwE,KAAK,QAASD,E,IAIpC,aAA0CN,CAC9C,CAaA5C,OAAAA,GACI,OAA0B,MAAlB5rI,KAAKksI,SACjB,CASA8C,QAAAA,GACI,OAAsB,IAAdhvI,KAAKjQ,IACjB,CASAk/I,QAAAA,GACI,OAAsB,IAAdjvI,KAAKjQ,IACjB,CASA87I,QAAAA,GACI,OAAsB,IAAd7rI,KAAKjQ,IACjB,CAMAm/I,QAAAA,GACI,OAAsB,IAAdlvI,KAAKjQ,IACjB,CAMA08I,YAAAA,GAGI,OAFAtyB,GAAOn6G,KAAK4rI,UAAW,wCACnB,wBAAyB,CAAE/wB,UAAW,kBACnC0yB,GAA+BvtI,KAC1C,CAMAwtI,cAAAA,CAAeC,GAOX,OANAtzB,GAAOn6G,KAAK4rI,UAAW,wCACnB,wBAAyB,CAAE/wB,UAAW,kBAE1CV,IAAQszB,GAASA,EAAM7B,UAAW,gDAC9B,wBAAyB,CAAE/wB,UAAW,kBAEnC6yB,GAAiC1tI,KAAMytI,EAClD,CAWAa,sBAAAA,CAAuBP,GACnB1zB,GAAehpB,OAAOirB,UAAUyxB,IAAeA,GAAc,EAAG,qBAAsB,aAAcA,GACpG,MAAMhhD,EAAK,IAAI09C,GAAoBzqI,KAAMA,KAAKuqI,UAE9C,OADAxsB,GAAG4vB,GAAH5gD,EAAiBghD,GACVhhD,CACX,EA2CJ,SAAS2gD,GAAiC3gD,EAA8D0gD,GACpG,MAAO,CAAE1B,OAAQ,sBAAuBh/C,KAAI0gD,QAChD,CAEA,SAASF,GAA+BxgD,GACpC,MAAO,CAAEg/C,OAAQ,mBAAoBh/C,KACzC,CCpuDA,IAAAoiD,GAAA,IAAA/tG,QAKM,MAAOguG,GAiBTngI,WAAAA,CAAYogI,EAA8B3yI,EAA2B4hD,GAhBrEgzC,EAAA,sBAKAA,EAAA,uBAKS2nB,GAAA,KAAAk2B,QAAS,GAOdpxB,GAAKoxB,GAALnvI,KAAiBtD,GACjBi1F,GAAoC3xF,KAAM,CAAEqvI,UAAS/wF,UACzD,CAKA,oBAAMgxF,GACoB,MAAlBtxB,GAAKmxB,GAALnvI,aACEA,KAAKqvI,QAAQT,IAAI5uI,KAAKs+C,OAAQ0/D,GAAKmxB,GAALnvI,MACxC,ECpFE,MAAOuvI,WAAiBvD,GAmB1B/8H,WAAAA,CAAYjL,EAAUwrI,EAAkBp8I,GACpCmrG,MAAMv6F,EAAKA,EAAIumI,UAnBnBj5C,EAAA,yBAKAA,EAAA,wBAKAA,EAAA,oBAWIK,GAA2B3xF,KAAM,CAAEoF,KADtBoqI,EAAMnH,eAAej1I,EAAU4Q,EAAIrH,KAAMqH,EAAI+jI,QACjB30I,WAAUq8I,UAAWD,GAClE,CAKA,aAAIE,GAAsB,OAAO1vI,KAAK5M,SAASqC,IAAM,CAKrD,kBAAIk6I,GAA2B,OAAO3vI,KAAK5M,SAASkS,QAAU,EAM5D,MAAOsqI,WAA0B5D,GAUnC/8H,WAAAA,CAAYjL,EAAU3T,GAClBkuG,MAAMv6F,EAAKA,EAAIumI,UATnBj5C,EAAA,qBAUIK,GAAoC3xF,KAAM,CAAE3P,SAChD,EAGJ,IAAAw/I,GAAA,IAAAzuG,QAIM,MAAO0uG,WAAmCnD,GAM5C19H,WAAAA,CAAYugI,EAAkBjF,EAAoBx9C,GAC9CwR,MAAMxR,EAAIw9C,GANLtxB,GAAA,KAAA42B,QAAM,GAOX9xB,GAAK8xB,GAAL7vI,KAAcwvI,EAClB,CAMA,QAAI5C,GACA,OAAOruC,MAAMquC,KAAKzhF,IAAKnnD,IACnB,MAAM5Q,EAAW4Q,EAAI+jI,OAAO5zI,OAAS6pH,GAAK6xB,GAAL7vI,MAAY6mI,SAAS7iI,EAAI+jI,OAAO,IAAK,KAC1E,GAAI30I,EACA,IACI,OAAO,IAAIm8I,GAASvrI,EAAKg6G,GAAK6xB,GAAL7vI,MAAa5M,E,CACxC,MAAO/C,GACL,OAAO,IAAIu/I,GAAkB5rI,EAAK3T,E,CAI1C,OAAO2T,GAEf,EAIJ,IAAA+rI,GAAA,IAAA3uG,QAIM,MAAO4uG,WAAoCvF,GAM7Cx7H,WAAAA,CAAYugI,EAAkBjF,EAAoBx9C,GAC9CwR,MAAMxR,EAAIw9C,GANLtxB,GAAA,KAAA82B,QAAM,GAOXhyB,GAAKgyB,GAAL/vI,KAAcwvI,EAClB,CAWA,UAAMhM,CAAKsK,EAAmBpP,GAC1B,MAAM8N,QAAgBjuC,MAAMilC,KAAKsK,EAAUpP,GAC3C,OAAe,MAAX8N,EAA0B,KACvB,IAAIsD,GAA2B9xB,GAAK+xB,GAAL/vI,MAAaA,KAAKuqI,SAAUiC,EACtE,EAOE,MAAQyD,WAAoCb,GAS9CngI,WAAAA,CAAYihI,EAAwBxzI,EAA2B4hD,EAA2Bt6C,GACtFu6F,MAAM2xC,EAAUxzI,EAAU4hD,GAT9BgzC,EAAA,mBAUIK,GAA8C3xF,KAAM,CAAEgE,OAC1D,CAKA,cAAMsoI,GACF,aAAatsI,KAAKgE,IAAIsoI,UAC1B,CAKA,oBAAMb,GACF,aAAazrI,KAAKgE,IAAIynI,gBAC1B,CAKA,2BAAMc,GACF,aAAavsI,KAAKgE,IAAIuoI,uBAC1B,EAOE,MAAO4D,WAA6BF,GAoBtChhI,WAAAA,CAAYihI,EAAwBxzI,EAA2B4hD,EAA2BlrD,EAAyBg9I,GAC/G7xC,MAAM2xC,EAAUxzI,EAAU4hD,EAAQ,IAAIixF,GAASa,EAAMF,EAAST,UAAWr8I,IAEzEu+F,GAAuC3xF,KAAM,CAAEoF,KADlC8qI,EAAST,UAAUpH,eAAej1I,EAAU4M,KAAKgE,IAAIrH,KAAMqD,KAAKgE,IAAI+jI,QAC5B30I,YACzD,CAKA,aAAIs8I,GACA,OAAO1vI,KAAK5M,SAASqC,IACzB,CAKA,kBAAIk6I,GACA,OAAO3vI,KAAK5M,SAASkS,QACzB,EC3LJ,MAAMo2G,GAAO9B,OAAO,GAkBpB,SAASy2B,GAAQ3gI,GACb,OAAQA,GAAgC,oBAAhBA,EAAM3X,IAClC,CAEA,SAASu4I,GAAY5gI,GACjB,OAAQA,GAAuC,oBAAvBA,EAAM6gI,WAClC,CAEA,SAASC,GAAW9gI,GAChB,OAAQA,GAAuC,oBAAvBA,EAAMqpH,WAClC,CAEA,SAAS0X,GAAQ/gI,GACb,OAAQA,GAA2C,oBAA3BA,EAAMghI,eAClC,CAEA,SAASC,GAAYjhI,GACjB,GAAa,MAATA,EAAe,CACf,GAAI8gI,GAAW9gI,GAAU,OAAOA,EAChC,GAAIA,EAAM66H,SAAY,OAAO76H,EAAM66H,Q,CAG3C,CAAC,IAAAqG,GAAA,IAAAxvG,QAED,MAAMyvG,GAIF5hI,WAAAA,CAAYihI,EAAwB98I,EAAyBgS,GAEzD,GALJ6zG,GAAA,KAAA23B,QAAO,GAAuBt/C,EAAA,wBAI1BK,GAAsC3xF,KAAM,CAAE5M,aAC1CA,EAAS8iI,OAAO/hI,OAASiR,EAAKjR,OAC9B,MAAM,IAAInE,MAAM,sBAIpB,MAAM8gJ,EAASC,GAAUb,EAASY,OAAQ,eACpChY,EAAW0X,GAAWM,GAAUA,EAAQ,KAC9C/yB,GAAK6yB,GAAL5wI,KAAgBm8F,iBACZ,MAAM60C,QAAqBpgH,QAAQ+2E,IAAIv0G,EAAS8iI,OAAO/qE,IAAI,CAAC70C,EAAO7R,IAEpD,MADCW,EAAKX,GACS,KAEnB6R,EAAMm/G,UAAUrwH,EAAKX,GAAQ,CAAC1U,EAAM2f,IAC1B,YAAT3f,EACIuJ,MAAMiG,QAAQmQ,GACPkhB,QAAQ+2E,IAAIj4F,EAAMy7C,IAAKvgD,GAAMiuH,GAAejuH,EAAGkuH,KAEnDD,GAAenpH,EAAOopH,GAE1BppH,KAIf,OAAOwgI,EAAST,UAAU3H,mBAAmB10I,EAAU49I,EAC3D,CAjBgB70C,GAkBpB,CAEA80C,cAAAA,GACI,OAAOjzB,GAAK4yB,GAAL5wI,KACX,EAWJ,SAAS+wI,GAAoCrhI,EAAYwhI,GACrD,OAAa,MAATxhI,EAAwB,KACG,oBAApBA,EAAMwhI,GAAmCxhI,EAChDA,EAAM66H,UAAgD,oBAA7B76H,EAAM66H,SAAS2G,GACjCxhI,EAAM66H,SAEV,IACX,CAEA,SAAS4G,GAAYzhI,GACjB,OAAa,MAATA,EAAwB,KACrBA,EAAM66H,UAAY,IAC7B,CAKOpuC,eAAei1C,GAAgDC,EAAU5e,GAG5E,MAAM6e,EAAa/pB,GAAMgH,YAAY8iB,EAAK,aAC1Ch3B,GAAsC,kBAAhBi3B,EAA0B,8BAA+B,YAAaD,GAG5F,MAAMhjB,EAAYqb,GAAY4H,GAU9B,OARAj3B,GAA+B,MAAhBgU,EAAUj8B,KAAeqgC,GAAW,IAAKn9G,QAAQ,OAAS,EACvE,qBAAsB,eAAgB+4G,EAAUj8B,IAClDioB,GAAiC,MAAlBgU,EAAU1xH,OAAiB81H,GAAW,IAAKn9G,QAAQ,SAAW,EAC3E,uBAAwB,iBAAkB+4G,EAAU1xH,MAGlD0xH,EAAUv5C,OAAQu5C,EAAUv5C,KAAOu5C,EAAUv5C,MAEZu5C,CACzC,CAkBA,SAASkjB,GAAqBrB,GAE1B,MAAMsB,EAAsBr1C,eAAekyB,GAGvC,MAAMthC,QAAsCqkD,GAAsB/iB,EAAW,CAAE,SAC/EthC,EAAGqF,SAAW89C,EAAS/oB,aAEnBp6B,EAAGjY,OACHiY,EAAGjY,WAAa+jD,GAAe9rC,EAAGjY,KAAM67D,GAAYT,EAASY,UAGjE,MAAMtB,EAAQU,EAAST,UAEjBgC,EAAWz1B,GAAWjvB,EAAGr9E,OAASgsG,GAAO,qBAAuBA,GAChEg2B,EAAgC,QAArB3kD,EAAGpwF,MAAQ,OAExB6yI,EAAMtrG,UAAasrG,EAAMtrG,SAASkzF,UAAWoY,EAAMzJ,SAAY2L,GAAWD,GAC1Ep3B,IAAe,EAAO,oEAAqE,YAAagU,GAG5GhU,GAAem1B,EAAMtrG,UAAYwtG,EAC/B,4CAA6C,iBAAkB3kD,EAAGpwF,MAWpE,OAPA09G,GADgBm1B,EAAMzJ,SAAYyJ,EAAMtrG,UAAYsrG,EAAMtrG,SAASkzF,SACzCqa,EACxB,4CAA6C,kBAAmB1kD,EAAGr9E,OAGrE2qG,GAAem1B,EAAMtrG,UAAYwtG,EAC/B,4CAA6C,iBAAkB3kD,EAAGpwF,MAE7DowF,CACX,EAmBMnkB,EAAOuzB,eAAekyB,GACxB,MAAMyiB,EAASZ,EAASY,OACxB32B,GAAOs2B,GAAQK,GAAS,wDACpB,wBAAyB,CAAEj2B,UAAW,oBAE1C,MAAM9tB,QAAW+jD,EAAOJ,sBAAsBc,EAAoBnjB,IAC5Dkc,EAAW4G,GAAYjB,EAASY,QAGtC,OAAO,IAAId,GAA4BE,EAAST,UAAqBlF,EAAUx9C,EACnF,EAUMyV,EAASrG,eACEvzB,EAAKylD,GAWtB,OARA18B,GAAsB6Q,EAAQ,CAC1BmvC,UAAWzB,EAEXK,YAfgBp0C,eAAekyB,GAC/B,MAAMyiB,EAASC,GAAUb,EAASY,OAAQ,eAI1C,OAHA32B,GAAOm2B,GAAYQ,GAAS,kDACxB,wBAAyB,CAAEj2B,UAAW,sBAE7Bi2B,EAAOP,kBAAkBiB,EAAoBnjB,GAC9D,EAUImjB,sBACA5oE,OAAMgpE,WA9CSz1C,eAAekyB,GAC9B,MAAMyiB,EAASC,GAAUb,EAASY,OAAQ,QAC1C32B,GAAOk2B,GAAQS,GAAS,2CACpB,wBAAyB,CAAEj2B,UAAW,SAE1C,MAAM9tB,QAAWykD,EAAoBnjB,GAErC,IACI,aAAayiB,EAAO/4I,KAAKg1F,E,CAC3B,MAAO18F,GACL,GAAIypH,GAAgBzpH,IAAUA,EAAMsM,KAChC,MAAMuzI,EAAST,UAAU11B,UAAU1pH,EAAMsM,KAAMowF,GAEnD,MAAM18F,C,CAEd,IAkCwBmyG,CAC5B,CAEA,SAASqvC,GAAwI3B,EAAwBv/I,GAErK,MAAMmhJ,EAAc,WAAuC,QAAAl0B,EAAAl4G,UAAAvR,OAA3BiR,EAA2B,IAAA9L,MAAAskH,GAAAzjC,EAAA,EAAAA,EAAAyjC,EAAAzjC,IAA3B/0E,EAA2B+0E,GAAAz0E,UAAAy0E,GACvD,MAAM/mF,EAAW88I,EAAST,UAAUjJ,YAAY71I,EAAKyU,GAKrD,OAJA+0G,GAAO/mH,EAAU,uBAAwB,wBAAyB,CAC9DynH,UAAW,WACXz0G,KAAM,CAAEzV,MAAKyU,UAEVhS,CACX,EAEMo+I,EAAsBr1C,iBAA6C,QAAAiiB,EAAA14G,UAAAvR,OAA3BiR,EAA2B,IAAA9L,MAAA8kH,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAA3Bj5G,EAA2Bi5G,GAAA34G,UAAA24G,GACrE,MAAMjrH,EAAW0+I,KAAe1sI,GAGhC,IAAIipH,EAAsD,CAAC,EAS3D,GARIj7H,EAAS8iI,OAAO/hI,OAAS,IAAMiR,EAAKjR,SACpCk6H,QAAkB+iB,GAAchsI,EAAK+vE,OAEjCk5C,EAAUv5C,OACVu5C,EAAUv5C,WAAa+jD,GAAexK,EAAUv5C,KAAM67D,GAAYT,EAASY,WAI/E19I,EAAS8iI,OAAO/hI,SAAWiR,EAAKjR,OAChC,MAAM,IAAInE,MAAM,8EAGpB,MAAMghJ,QAjIP70C,eAA2B41C,EAAgC7b,EAAkC9wH,GAEhG,MAAM0rI,EAASC,GAAUgB,EAAS,eAC5BjZ,EAAW0X,GAAWM,GAAUA,EAAQ,KAC9C,aAAalgH,QAAQ+2E,IAAIuuB,EAAO/qE,IAAI,CAAC70C,EAAO7R,IACjC6R,EAAMm/G,UAAUrwH,EAAKX,GAAQ,CAAC1U,EAAM2f,KACvCA,EAAQ63G,GAAMgH,YAAY7+G,EAAO3f,GACpB,YAATA,EAA6B8oI,GAAenpH,EAAOopH,GAChDppH,KAGnB,CAsHmCsiI,CAAY9B,EAASY,OAAQ19I,EAAS8iI,OAAQ9wH,GAEzE,OAAOtO,OAAOyW,OAAO,CAAC,EAAI8gH,QAAiB9U,GAAkB,CACzDnnB,GAAI89C,EAAS/oB,aACbxqH,KAAMuzI,EAAST,UAAUhI,mBAAmBr0I,EAAU49I,KAE9D,EAEMY,EAAaz1C,iBACf,MAAMpiD,QAAek4F,KAAiBvsI,WACtC,OAAsB,IAAlBq0C,EAAO5lD,OAAuB4lD,EAAO,GACtBA,CACvB,EAEM6uB,EAAOuzB,iBACT,MAAM20C,EAASZ,EAASY,OACxB32B,GAAOs2B,GAAQK,GAAS,wDACpB,wBAAyB,CAAEj2B,UAAW,oBAE1C,MAAM9tB,QAAW+jD,EAAOJ,sBAAsBc,KAAoB9rI,YAC5D6kI,EAAW4G,GAAYjB,EAASY,QAGtC,OAAO,IAAId,GAA4BE,EAAST,UAAqBlF,EAAUx9C,EACnF,EAUMklD,EAAmB91C,iBACrB,MAAM20C,EAASC,GAAUb,EAASY,OAAQ,QAC1C32B,GAAOk2B,GAAQS,GAAS,2CACpB,wBAAyB,CAAEj2B,UAAW,SAE1C,MAAM9tB,QAAWykD,KAAoB9rI,WAErC,IAAIq0C,EAAS,KACb,IACIA,QAAe+2F,EAAO/4I,KAAKg1F,E,CAC7B,MAAO18F,GACL,GAAIypH,GAAgBzpH,IAAUA,EAAMsM,KAChC,MAAMuzI,EAAST,UAAU11B,UAAU1pH,EAAMsM,KAAMowF,GAEnD,MAAM18F,C,CAGV,MAAM+C,EAAW0+I,KAAYpsI,WAC7B,OAAOwqI,EAAST,UAAU/H,qBAAqBt0I,EAAU2mD,EAC7D,EAEMyoD,EAASrG,iBAEX,OADiB21C,KAAYpsI,WAChBgyH,eAAyBka,KAAWlsI,iBACpCkjE,KAAKljE,UACtB,EA2BA,OAzBAisF,GAAsB6Q,EAAQ,CAC1B/sG,KAAMy6I,EAAST,UAAUpJ,gBAAgB11I,GACzCghJ,UAAWzB,EAAU/1D,KAAMxpF,EAE3BmhJ,cAEAvB,YAzCgBp0C,iBAChB,MAAM20C,EAASC,GAAUb,EAASY,OAAQ,eAI1C,OAHA32B,GAAOm2B,GAAYQ,GAAS,kDACxB,wBAAyB,CAAEj2B,UAAW,sBAE7Bi2B,EAAOP,kBAAkBiB,KAAoB9rI,WAC9D,EAoCI8rI,sBACA5oE,OAAMgpE,aAAYK,qBAItBn7I,OAAOgX,eAAe00F,EAAQ,WAAY,CACtCtzF,cAAc,EACdC,YAAY,EACZlI,IAAKA,KACD,MAAM7T,EAAW88I,EAAST,UAAUjJ,YAAY71I,GAKhD,OAJAwpH,GAAO/mH,EAAU,uBAAwB,wBAAyB,CAC9DynH,UAAW,WACXz0G,KAAM,CAAEzV,SAELyC,KAIqBovG,CACxC,CA0DA,MAAMlI,GAAW5jG,OAAOC,IAAI,4BAUtBu7I,GAAkD,IAAI9wG,QAM5D,SAAS+wG,GAAYjC,GACjB,OAAOgC,GAAejrI,IAAIipI,EAAS51C,IACvC,CAOA6B,eAAei2C,GAAWlC,EAAwB3nH,GAC9C,IAAIw/G,EACA30I,EAAiC,KAKrC,GAAIkG,MAAMiG,QAAQgpB,GAAQ,CACtB,MAAM8pH,EAAe,SAAS58I,GAC1B,GAAIwlH,GAAYxlH,EAAM,IAAO,OAAOA,EACpC,MAAMrC,EAAW88I,EAAST,UAAU5I,SAASpxI,GAE7C,OADA4kH,GAAejnH,EAAU,mBAAoB,OAAQqC,GAC9CrC,EAAS8jI,SACpB,EAGA6Q,EAASx/G,EAAM4iC,IAAKtzD,GACP,MAALA,EAAoB,KACpByB,MAAMiG,QAAQ1H,GAAaA,EAAEszD,IAAIknF,GAC9BA,EAAax6I,G,KAGP,MAAV0wB,EACPw/G,EAAS,CAAE,MAEc,kBAAXx/G,EACV0yF,GAAY1yF,EAAO,IAEnBw/G,EAAS,CAAEx/G,IAGXn1B,EAAW88I,EAAST,UAAU5I,SAASt+G,GACvC8xF,GAAejnH,EAAU,mBAAoB,QAASm1B,GACtDw/G,EAAS,CAAE30I,EAAS8jI,aAtCZxnH,EAyCM6Y,IAxCa,kBAAX7Y,GAAwB,mBAAoBA,GAChC,oBAA1BA,EAAMuhI,gBAAmCvhI,EAAMtc,SAyCrD20I,QAAex/G,EAAM0oH,iBAEd,aAAc1oH,GAErBn1B,EAAWm1B,EAAMn1B,SACjB20I,EAAS,CAAE30I,EAAS8jI,YAGpB7c,IAAe,EAAO,qBAAsB,QAAS9xF,GAnD7D,IAAoB7Y,EAuDhBq4H,EAASA,EAAO58E,IAAKtnD,IACjB,GAAS,MAALA,EAAa,OAAO,KACxB,GAAIvK,MAAMiG,QAAQsE,GAAI,CAClB,MAAM05G,EAAQjkH,MAAMw7E,KAAK,IAAI9qE,IAAInG,EAAEsnD,IAAKtnD,GAAMA,EAAEyH,gBAAgB4yC,UAChE,OAAqB,IAAjBq/D,EAAMppH,OAAuBopH,EAAM,IACvCA,EAAMzoB,OACCyoB,E,CAEX,OAAO15G,EAAEyH,gBAGb,MAAM9J,EAAMumI,EAAO58E,IAAKtnD,GACX,MAALA,EAAoB,OACpBvK,MAAMiG,QAAQsE,GAAaA,EAAE8F,KAAK,KAC/B9F,GACR8F,KAAK,KAER,MAAO,CAAEvW,WAAUoO,MAAKumI,SAC5B,CAEA5rC,eAAem2C,GAAOpC,EAAwB3nH,GAC1C,MAAM,KAAEgqH,GAASJ,GAAYjC,GAC7B,OAAOqC,EAAKtrI,WAAWmrI,GAAWlC,EAAU3nH,IAAQ/mB,MAAQ,IAChE,CAEA26F,eAAeq2C,GAAOtC,EAAwBr1B,EAAmBtyF,GAE7D,MAAMgiH,EAAW4G,GAAYjB,EAASY,QACtC32B,GAAOowB,EAAU,+CACb,wBAAyB,CAAE1vB,cAE/B,MAAM,SAAEznH,EAAQ,IAAEoO,EAAG,OAAEumI,SAAiBqK,GAAWlC,EAAU3nH,IAEvD,KAAE0zG,EAAI,KAAEsW,GAASJ,GAAYjC,GAEnC,IAAI/rE,EAAMouE,EAAKtrI,IAAIzF,GACnB,IAAK2iE,EAAK,CACN,MACM7lB,EAAS,CAAEqoE,QADsBsV,GAAaiU,EAC1BnI,UACpBrrI,EAAYsH,IACd,IAAIyuI,EAAgBr/I,EACpB,GAAqB,MAAjBq/I,EACA,IACIA,EAAgBvC,EAAST,UAAU5I,SAAS7iI,EAAI+jI,OAAO,G,CACzD,MAAO13I,GAAQ,CAKrB,GAAIoiJ,EAAe,CACf,MAAMC,EAAiBD,EACjBrtI,EAAOhS,EAAW88I,EAAST,UAAUpH,eAAej1I,EAAU4Q,EAAIrH,KAAMqH,EAAI+jI,QAAS,GAC3F4K,GAAKzC,EAAU3nH,EAAOnjB,EAAO1I,GAClB,IAAIyzI,GAAqBD,EAAUxzI,EAAU6rB,EAAOmqH,EAAgB1uI,G,MAG/E2uI,GAAKzC,EAAU3nH,EAAO,GAAM7rB,GACjB,IAAIuzI,GAA4BC,EAAUxzI,EAAU6rB,EAAOvkB,KAK9E,IAAI4uI,EAAgC,GAepCzuE,EAAM,CAAE3iE,MAAKgnB,UAAW,GAAK30B,MAdfA,KACN++I,EAASz+I,QACby+I,EAASt0I,KAAKisI,EAASsE,GAAGvwF,EAAQ5hD,KAYFm2I,KATvB12C,UACT,GAAuB,GAAnBy2C,EAASz+I,OAAe,OAE5B,IAAI2+I,EAAUF,EACdA,EAAW,SACLhiH,QAAQ+2E,IAAImrC,GAClBvI,EAASqE,IAAItwF,EAAQ5hD,KAIzB61I,EAAKxkI,IAAIvM,EAAK2iE,E,CAElB,OAAOA,CACX,CAKA,IAAI4uE,GAAyBniH,QAAQG,UA8BrCorE,eAAew2C,GAAKzC,EAAwB3nH,EAA0BnjB,EAAkB4tI,GACpF,UACUD,E,CACR,MAAO1iJ,GAAQ,CAEjB,MAAM4iJ,EA/BV92C,eAAqB+zC,EAAwB3nH,EAA0BnjB,EAAkB4tI,SAC/ED,GAEN,MAAM5uE,QAAYmuE,GAAOpC,EAAU3nH,GACnC,IAAK47C,EAAO,OAAO,EAEnB,MAAM5pE,EAAQ4pE,EAAI37C,UAAUr0B,OAiB5B,OAhBAgwE,EAAI37C,UAAY27C,EAAI37C,UAAU81B,OAAOq0C,IAAuB,IAAtB,SAAEj2F,EAAQ,KAAEqyI,GAAMp8C,EACpD,MAAMugD,EAAW55I,MAAMw7E,KAAK1vE,GACxB4tI,GACAE,EAAS50I,KAAK00I,EAAYjE,EAAO,KAAMryI,IAE3C,IACIA,EAAS3E,KAAKm4I,KAAagD,E,CAC7B,MAAO7iJ,GAAQ,CACjB,OAAQ0+I,IAGiB,IAAzB5qE,EAAI37C,UAAUr0B,SACdgwE,EAAI0uE,OACJV,GAAYjC,GAAUqC,KAAKj1H,OAAO6mD,EAAI3iE,MAGlCjH,EAAQ,CACpB,CAO0B44I,CAAMjD,EAAU3nH,EAAOnjB,EAAM4tI,GAEnD,OADAD,GAAWE,QACEA,CACjB,CAEA,MAAMn2B,GAAiB,CAAE,QACnB,MAAOs2B,GA4CTnkI,WAAAA,CAAY8H,EAA8B8uH,EAA+BiL,EAAgCuC,GA3CzG/hD,EAAA,sBASAA,EAAA,yBAKAA,EAAA,sBASAA,EAAA,uBAKAA,EAAA,KAGUgJ,QAAQ,GAElBhJ,EAAA,wBAWI+oB,GAAkC,kBAAZtjG,GAAwB4hH,GAAc5hH,GACxD,oCAAqC,SAAUA,GAErC,MAAV+5H,IAAkBA,EAAS,MAC/B,MAAMtB,EAAQ7J,GAAU7wD,KAAK+wD,GAK7B,IAAIyN,EAJJ3hD,GAA+B3xF,KAAM,CAAE+W,SAAQ+5H,SAAQrB,UAAWD,IAElE14I,OAAOgX,eAAe9N,KAAMs6F,GAAU,CAAE5qF,MAAO,CAAC,IAGhD,IAAIusH,EAAsB,KAEtBsX,EAA+C,KACnD,GAAIF,EAAW,CACX,MAAM9I,EAAW4G,GAAYL,GAG7ByC,EAAW,IAAIvD,GAA4BhwI,KAAKyvI,UAAqBlF,EAAU8I,E,CAGnF,IAAId,EAAO,IAAIt1H,IAGf,GAAuB,kBAAZlG,EACP,GAAIkkG,GAAYlkG,GACZklH,EAAOllH,EACPu8H,EAAc1iH,QAAQG,QAAQha,OAE3B,CACH,MAAM+hH,EAAWiY,GAAUD,EAAQ,eACnC,IAAKN,GAAW1X,GACZ,MAAM/e,GAAU,mDAAoD,wBAAyB,CACzFc,UAAW,gBAInBy4B,EAAcxa,EAASC,YAAYhiH,GAAQia,KAAMirG,IAC7C,GAAY,MAARA,EACA,MAAMliB,GAAU,sEAAuE,oBAAqB,CACxGrqG,MAAOqH,IAIf,OADAo7H,GAAYnyI,MAAMi8H,KAAOA,EAClBA,G,MAIfqX,EAAcv8H,EAAOowG,aAAan2F,KAAMirG,IACpC,GAAY,MAARA,EAAgB,MAAM,IAAIjsI,MAAM,QAEpC,OADAmiJ,GAAYnyI,MAAMi8H,KAAOA,EAClBA,IA7RvB,IAAqBiU,EAAwBhyF,EAAxBgyF,EAkSDlwI,KAlSyBk+C,EAkSnB,CAAEo1F,cAAarX,OAAMsX,WAAUhB,QAjSrDL,GAAenkI,IAAImiI,EAAS51C,IAAWp8C,GAoSnC,MAAMs1F,EAAU,IAAIt1B,MAAM,CAAC,EAAI,CAC3Bj3G,IAAKA,CAAC8P,EAAQkxC,EAAMk2D,KAEhB,GAAqB,kBAAVl2D,GAAsB60D,GAAexnG,QAAQ2yC,IAAS,EAC7D,OAAOj6C,QAAQ/G,IAAI8P,EAAQkxC,EAAMk2D,GAGrC,IACI,OAAOn+G,KAAK6mI,SAAS5+E,E,CACvB,MAAO53D,GACL,IAAKwpH,GAAQxpH,EAAO,qBAA0C,QAAnBA,EAAMipH,SAC7C,MAAMjpH,C,GAMlB2W,IAAKA,CAAC+P,EAAQkxC,IAEN60D,GAAexnG,QAAgB2yC,IAAS,EACjCj6C,QAAQhH,IAAI+P,EAAQkxC,GAGxBj6C,QAAQhH,IAAI+P,EAAQkxC,IAASjoD,KAAKyvI,UAAU7I,SAASxqI,OAAO6rD,MAU3E,OAPA0pC,GAA+B3xF,KAAM,CAAEwzI,YAEvC7hD,GAA+B3xF,KAAM,CACjCkkC,SAAYsrG,EAAMzJ,SAAWyJ,EAAMtrG,SAAaqtG,GAAqBvxI,MAAQ,OAI1E,IAAIk+G,MAAMl+G,KAAM,CACnBiH,IAAKA,CAAC8P,EAAQkxC,EAAMk2D,KAChB,GAAqB,kBAAVl2D,GAAsBA,KAAQlxC,GAAU+lG,GAAexnG,QAAQ2yC,IAAS,EAC/E,OAAOj6C,QAAQ/G,IAAI8P,EAAQkxC,EAAMk2D,GAIrC,IACI,OAAOpnG,EAAOyvH,YAAYv+E,E,CAC5B,MAAO53D,GACL,IAAKwpH,GAAQxpH,EAAO,qBAA0C,QAAnBA,EAAMipH,SAC7C,MAAMjpH,C,GAMlB2W,IAAKA,CAAC+P,EAAQkxC,IACW,kBAAVA,GAAsBA,KAAQlxC,GAAU+lG,GAAexnG,QAAQ2yC,IAAS,EACxEj6C,QAAQhH,IAAI+P,EAAQkxC,GAGxBlxC,EAAO04H,UAAUlJ,YAAYt+E,IAIhD,CAMAwrF,OAAAA,CAAQ3C,GACJ,OAAO,IAAIsC,GAAapzI,KAAK+W,OAAQ/W,KAAKyvI,UAAWqB,EACzD,CAMA4C,MAAAA,CAAO38H,GACH,OAAO,IAAIq8H,GAAar8H,EAAQ/W,KAAKyvI,UAAWzvI,KAAK8wI,OACzD,CAKA,gBAAM3pB,GAAgC,aAAagrB,GAAYnyI,MAAMszI,WAAa,CAKlF,qBAAMK,GACF,MAAMpJ,EAAW4G,GAAYnxI,KAAK8wI,QAClC32B,GAAOowB,EAAU,oCACb,wBAAyB,CAAE1vB,UAAW,oBAE1C,MAAM/1F,QAAaylH,EAASqJ,cAAc5zI,KAAKmnH,cAC/C,MAAa,OAATriG,EAAwB,KACrBA,CACX,CAMA,uBAAM+uH,GAEF,MAAMN,EAAWvzI,KAAK8zI,wBACtB,GAAIP,EAEA,aADMA,EAAS/P,OACRxjI,KAKX,GAAY,YADOA,KAAK2zI,kBACJ,OAAO3zI,KAG3B,MAAMuqI,EAAW4G,GAAYnxI,KAAK8wI,QAIlC,OAHA32B,GAAmB,MAAZowB,EAAkB,6CACrB,wBAAyB,CAAE1vB,UAAW,sBAEnC,IAAIjqF,QAAQ,CAACG,EAAS09G,KACzB,MAAMsF,EAAY53C,UACd,IAEI,GAAY,YADOn8F,KAAK2zI,kBACJ,OAAO5iH,EAAQ/wB,MACnCuqI,EAASwE,KAAK,QAASgF,E,CACzB,MAAO1jJ,GACLo+I,EAAOp+I,E,GAGf0jJ,KAER,CAQAD,qBAAAA,GACI,OAAO3B,GAAYnyI,MAAMuzI,QAC7B,CAOA/M,WAAAA,CAAuD71I,GAC/B,kBAATA,IAAqBA,EAAMA,EAAI2U,UAE1C,OADausI,GAAmB7xI,KAAMrP,EAE1C,CAOAk2I,QAAAA,CAASl2I,GAEL,MADoB,kBAATA,IAAqBA,EAAMA,EAAI2U,UAtgBlD,SAA8D4qI,EAAwBv/I,GAElF,MAAMmhJ,EAAc,WAAsC,QAAAlnC,EAAAllG,UAAAvR,OAA1BiR,EAA0B,IAAA9L,MAAAsxG,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAA1BzlG,EAA0BylG,GAAAnlG,UAAAmlG,GACtD,MAAMz3G,EAAW88I,EAAST,UAAU5I,SAASl2I,EAAKyU,GAOlD,OALA+0G,GAAO/mH,EAAU,uBAAwB,wBAAyB,CAC9DynH,UAAW,WACXz0G,KAAM,CAAEzV,MAAKyU,UAGVhS,CACX,EAEMovG,EAAS,WAAuC,QAAAwxC,EAAAtuI,UAAAvR,OAA3BiR,EAA2B,IAAA9L,MAAA06I,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAA3B7uI,EAA2B6uI,GAAAvuI,UAAAuuI,GAClD,OAAO,IAAIpD,GAAoBX,EAAU4B,KAAe1sI,GAAOA,EACnE,EAyBA,OAvBAusF,GAAsB6Q,EAAQ,CAC1B/sG,KAAMy6I,EAAST,UAAU/I,aAAa/1I,GACtCghJ,UAAWzB,EAAU/1D,KAAMxpF,EAE3BmhJ,gBAIJh7I,OAAOgX,eAAe00F,EAAQ,WAAY,CACtCtzF,cAAc,EACdC,YAAY,EACZlI,IAAKA,KACD,MAAM7T,EAAW88I,EAAST,UAAU5I,SAASl2I,GAO7C,OALAwpH,GAAO/mH,EAAU,uBAAwB,wBAAyB,CAC9DynH,UAAW,WACXz0G,KAAM,CAAEzV,SAGLyC,KAImBovG,CACtC,CA8de0xC,CAAkBl0I,KAAMrP,EACnC,CAKA,sBAAMwjJ,CAAiB9+F,GACnB,MAAM,IAAIrlD,MAAM,QACpB,CAuBA,iBAAMokJ,CAAY7rH,EAA0B8rH,EAAsBC,GAC7C,MAAbD,IAAqBA,EAAY,GACtB,MAAXC,IAAmBA,EAAU,UACjC,MAAM,KAAErY,EAAI,YAAEqX,GAAgBnB,GAAYnyI,MACpC2mH,EAAWsV,SAAoBqX,GAC/B,SAAElgJ,EAAQ,OAAE20I,SAAiBqK,GAAWpyI,KAAMuoB,GAC9C+1B,EAAS,CAAEqoE,UAASohB,SAAQsM,YAAWC,WAEvC/J,EAAW4G,GAAYnxI,KAAK8wI,QAIlC,OAHA32B,GAAOowB,EAAU,2CACb,wBAAyB,CAAE1vB,UAAW,uBAE5B0vB,EAASgK,QAAQj2F,IAAS6M,IAAKnnD,IACzC,IAAIyuI,EAAgBr/I,EACpB,GAAqB,MAAjBq/I,EACA,IACIA,EAAgBzyI,KAAKyvI,UAAU5I,SAAS7iI,EAAI+jI,OAAO,G,CACrD,MAAO13I,GAAQ,CAGrB,GAAIoiJ,EACA,IACI,OAAO,IAAIlD,GAASvrI,EAAKhE,KAAKyvI,UAAWgD,E,CAC3C,MAAOpiJ,GACL,OAAO,IAAIu/I,GAAkB5rI,EAAK3T,E,CAI1C,OAAO,IAAI27I,GAAIhoI,EAAKumI,IAE5B,CAKA,QAAMsE,CAAGtmH,EAA0B7rB,GAC/B,MAAMynE,QAAYquE,GAAOxyI,KAAM,KAAMuoB,GAGrC,OAFA47C,EAAI37C,UAAUlqB,KAAK,CAAE5B,WAAUqyI,MAAM,IACrC5qE,EAAItwE,QACGmM,IACX,CAMA,UAAM+uI,CAAKxmH,EAA0B7rB,GACjC,MAAMynE,QAAYquE,GAAOxyI,KAAM,OAAQuoB,GAGvC,OAFA47C,EAAI37C,UAAUlqB,KAAK,CAAE5B,WAAUqyI,MAAM,IACrC5qE,EAAItwE,QACGmM,IACX,CAOA,UAAM2yI,CAAKpqH,GAA6C,QAAAisH,EAAA9uI,UAAAvR,OAAhBiR,EAAgB,IAAA9L,MAAAk7I,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAhBrvI,EAAgBqvI,EAAA,GAAA/uI,UAAA+uI,GACpD,aAAa9B,GAAK3yI,KAAMuoB,EAAOnjB,EAAM,KACzC,CAMA,mBAAMsvI,CAAcnsH,GAChB,GAAIA,EAAO,CACP,MAAM47C,QAAYmuE,GAAOtyI,KAAMuoB,GAC/B,OAAK47C,EACEA,EAAI37C,UAAUr0B,OADF,C,CAIvB,MAAM,KAAEo+I,GAASJ,GAAYnyI,MAE7B,IAAI6gF,EAAQ,EACZ,IAAK,MAAM,UAAEr4D,KAAe+pH,EAAKr0F,SAC7B2iC,GAASr4D,EAAUr0B,OAEvB,OAAO0sF,CACX,CAMA,eAAMr4D,CAAUD,GACZ,GAAIA,EAAO,CACP,MAAM47C,QAAYmuE,GAAOtyI,KAAMuoB,GAC/B,OAAK47C,EACEA,EAAI37C,UAAU2iC,IAAIktC,IAAA,IAAC,SAAE37F,GAAU27F,EAAA,OAAK37F,IADxB,E,CAIvB,MAAM,KAAE61I,GAASJ,GAAYnyI,MAE7B,IAAI+5C,EAA0B,GAC9B,IAAK,MAAM,UAAEvxB,KAAe+pH,EAAKr0F,SAC7BnE,EAASA,EAAO93C,OAAOumB,EAAU2iC,IAAIyqD,IAAA,IAAC,SAAEl5G,GAAUk5G,EAAA,OAAKl5G,KAE3D,OAAOq9C,CACX,CAMA,SAAM60F,CAAIrmH,EAA0B7rB,GAChC,MAAMynE,QAAYmuE,GAAOtyI,KAAMuoB,GAC/B,IAAK47C,EAAO,OAAOnkE,KAEnB,GAAItD,EAAU,CACV,MAAM+H,EAAQ0/D,EAAI37C,UAAU2iC,IAAI8qD,IAAA,IAAC,SAAEv5G,GAAUu5G,EAAA,OAAKv5G,IAAU4Y,QAAQ5Y,GAChE+H,GAAS,GAAK0/D,EAAI37C,UAAU2lB,OAAO1pC,EAAO,E,CAQlD,OALgB,MAAZ/H,GAA6C,IAAzBynE,EAAI37C,UAAUr0B,SAClCgwE,EAAI0uE,OACJV,GAAYnyI,MAAMuyI,KAAKj1H,OAAO6mD,EAAI3iE,MAG/BxB,IACX,CAMA,wBAAM20I,CAAmBpsH,GACrB,GAAIA,EAAO,CACP,MAAM47C,QAAYmuE,GAAOtyI,KAAMuoB,GAC/B,IAAK47C,EAAO,OAAOnkE,KACnBmkE,EAAI0uE,OACJV,GAAYnyI,MAAMuyI,KAAKj1H,OAAO6mD,EAAI3iE,I,KAC/B,CACH,MAAM,KAAE+wI,GAASJ,GAAYnyI,MAC7B,IAAK,MAAM,IAAEwB,EAAG,KAAEqxI,KAAUN,EAAKr0F,SAC7B20F,IACAN,EAAKj1H,OAAO9b,E,CAIpB,OAAOxB,IACX,CAKA,iBAAM2+H,CAAYp2G,EAA0B7rB,GACxC,aAAasD,KAAK6uI,GAAGtmH,EAAO7rB,EAChC,CAKA,oBAAM4yI,CAAe/mH,EAA0B7rB,GAC3C,aAAasD,KAAK4uI,IAAIrmH,EAAO7rB,EACjC,CAKA,iBAAOk4I,CAAkC/O,GAMrC,OALA,cAA6BuN,GACzBnkI,WAAAA,CAAY03G,GACRpoB,MAAMooB,EAASkf,EADUngI,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAgC,KAE7D,EAGR,CAKA,WAAOovE,CAA4B/9D,EAAgB8uH,EAA+BiL,GAChE,MAAVA,IAAkBA,EAAS,MAE/B,OADiB,IAAI9wI,KAAK+W,EAAQ8uH,EAAKiL,EAE3C,EAUE,MAAO+D,WAPb,WACI,OAAOzB,EACX,CAK8B0B,KCzlC9B,MAAMC,GAAS,IAAI93H,IAAI,CAAC,CAAC,KAAK,cAAc,CAAC,KAAK,kBAAkB,CAAC,MAAM,gBA0F3E,SAAS+3H,GAAwBjiJ,GAChC,OALD,SAAsB6X,GACrB,IAAIm6G,EAAM,EACV,MAAO,IAAMn6G,EAAEm6G,IAChB,CAEQkwB,CAxFR,SAA2Br5I,GAC1B,IAAImpH,EAAM,EACV,SAASmwB,IAAQ,OAAQt5I,EAAMmpH,MAAU,EAAKnpH,EAAMmpH,IAAQ,CAG5D,IAAIowB,EAAeD,IACfr0D,EAAQ,EACRwpB,EAAM,CAAC,EAAG,GACd,IAAK,IAAIx1G,EAAI,EAAGA,EAAIsgJ,EAActgJ,IACjCw1G,EAAI/rG,KAAKuiF,GAASq0D,KAInB,IAAIE,EAAOF,IACPG,EAActwB,EAClBA,GAAOqwB,EAEP,IAAIE,EAAa,EACbC,EAAc,EAClB,SAASC,IAOR,OANkB,GAAdF,IAGHC,EAAeA,GAAe,EAAK35I,EAAMmpH,KACzCuwB,EAAa,GAENC,KAAiBD,EAAc,CACxC,CAEA,MACMG,EAAO,GADH,GAEJC,EAAOD,IAAS,EAChBE,EAAOD,GAAQ,EACfE,EAAOH,EAAO,EAGpB,IAAIjvB,EAAW,EACf,IAAK,IAAI3xH,EAAI,EAAGA,EARN,GAQaA,IAAK2xH,EAAYA,GAAY,EAAKgvB,IAEzD,IAAIK,EAAU,GACVlzB,EAAM,EACN76F,EAAQ2tH,EACZ,OAAa,CACZ,IAAI/lI,EAAQlV,KAAKK,QAAS2rH,EAAW7D,EAAM,GAAK9hC,EAAS,GAAK/4D,GAC1Dj0B,EAAQ,EACRm3B,EAAMmqH,EACV,KAAOnqH,EAAMn3B,EAAQ,GAAG,CACvB,IAAIyP,EAAOzP,EAAQm3B,IAAS,EACxBtb,EAAQ26F,EAAI/mG,GACf0nB,EAAM1nB,EAENzP,EAAQyP,CAEV,CACA,GAAa,GAATzP,EAAY,MAChBgiJ,EAAQv3I,KAAKzK,GACb,IAAI4D,EAAIkrH,EAAMnoH,KAAKK,MAAMitB,EAAQuiF,EAAIx2G,GAAWgtF,GAC5ClpF,EAAIgrH,EAAMnoH,KAAKK,MAAMitB,EAAQuiF,EAAIx2G,EAAM,GAAKgtF,GAAS,EACzD,KAA2B,KAAlBppF,EAAIE,GAAK+9I,IACjBlvB,EAAYA,GAAY,EAAKovB,EAAOJ,IACpC/9I,EAAKA,GAAK,EAAKm+I,EACfj+I,EAAKA,GAAK,EAAKi+I,EAAO,EAEvB,KAAOn+I,GAAKE,EAAIg+I,GACfnvB,EAAYA,EAAWkvB,EAAUlvB,GAAY,EAAMovB,IAAS,EAAMJ,IAClE/9I,EAAKA,GAAK,EAAKi+I,EACf/9I,GAAMA,EAAI+9I,IAAS,EAAKA,EAAO,EAEhC/yB,EAAMlrH,EACNqwB,EAAQ,EAAInwB,EAAIF,CACjB,CACA,IAAIyyB,EAASirH,EAAe,EAC5B,OAAOU,EAAQ1qF,IAAIhvD,IAClB,OAAQA,EAAI+tB,GACX,KAAK,EAAG,OAAOA,EAAS,OAAYtuB,EAAMy5I,MAAkB,GAAOz5I,EAAMy5I,MAAkB,EAAKz5I,EAAMy5I,MACtG,KAAK,EAAG,OAAOnrH,EAAS,KAAUtuB,EAAMy5I,MAAkB,EAAKz5I,EAAMy5I,MACrE,KAAK,EAAG,OAAOnrH,EAAStuB,EAAMy5I,KAC9B,QAAS,OAAOl5I,EAAI,IAGvB,CAQqB25I,CAMrB,SAAqB/iJ,GACpB,IAAIgjJ,EAAS,GACb,IAAI,oEAAoE1qI,QAAQ,CAACha,EAAGwD,IAAMkhJ,EAAO1kJ,EAAE8oD,WAAW,IAAMtlD,GACpH,IAAIoC,EAAIlE,EAAEoB,OACNinE,EAAM,IAAIpY,WAAY,EAAI/rD,GAAM,GACpC,IAAK,IAAIpC,EAAI,EAAGkwH,EAAM,EAAG3/F,EAAQ,EAAGqvD,EAAQ,EAAG5/E,EAAIoC,EAAGpC,IACrD4/E,EAASA,GAAS,EAAKshE,EAAOhjJ,EAAEonD,WAAWtlD,IAC3CuwB,GAAS,EACLA,GAAS,IACZg2C,EAAI2pD,KAAUtwC,IAAUrvD,GAAS,IAGnC,OAAOg2C,CACR,CAnBuC46E,CAAYjjJ,IACnD,CAqBA,SAASu0H,GAAOzyH,GACf,OAAY,EAAJA,GAAWA,GAAK,EAAMA,GAAK,CACpC,CAEA,SAASohJ,GAAYh/I,EAAGiE,GACvB,IAAI0P,EAAItR,MAAMrC,GACd,IAAK,IAAIpC,EAAI,EAAGsH,EAAI,EAAGtH,EAAIoC,EAAGpC,IAAK+V,EAAE/V,GAAKsH,GAAKmrH,GAAOpsH,KACtD,OAAO0P,CACR,CAGA,SAASsrI,GAAYh7I,GAAgB,IAAVi7I,EAAIzwI,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,EAC7B01D,EAAM,GACV,OAAa,CACZ,IAAIj/D,EAAIjB,IACJjE,EAAIiE,IACR,IAAKjE,EAAG,MACRk/I,GAAQh6I,EACR,IAAK,IAAItH,EAAI,EAAGA,EAAIoC,EAAGpC,IACtBumE,EAAI98D,KAAK63I,EAAOthJ,GAEjBshJ,GAAQl/I,EAAI,CACb,CACA,OAAOmkE,CACR,CAEA,SAASg7E,GAAmBl7I,GAC3B,OAAOm7I,GAAiB,KACvB,IAAIzrI,EAAIsrI,GAAYh7I,GACpB,GAAI0P,EAAEzW,OAAQ,OAAOyW,GAEvB,CAGA,SAAS0rI,GAAYp7I,GACpB,IAAIkgE,EAAM,GACV,OAAa,CACZ,IAAIrsC,EAAI7zB,IACR,GAAS,GAAL6zB,EAAQ,MACZqsC,EAAI98D,KAAKi4I,GAAkBxnH,EAAG7zB,GAC/B,CACA,OAAa,CACZ,IAAI6zB,EAAI7zB,IAAS,EACjB,GAAI6zB,EAAI,EAAG,MACXqsC,EAAI98D,KAAKk4I,GAAuBznH,EAAG7zB,GACpC,CACA,OAAOkgE,EAAIoqC,MACZ,CAIA,SAAS6wC,GAAiBn7I,GACzB,IAAI0P,EAAI,GACR,OAAa,CACZ,IAAIzO,EAAIjB,EAAK0P,EAAEzW,QACf,IAAKgI,EAAG,MACRyO,EAAEtM,KAAKnC,EACR,CACA,OAAOyO,CACR,CAIA,SAAS6rI,GAAgBx/I,EAAG83B,EAAG7zB,GAC9B,IAAIrE,EAAIyC,MAAMrC,GAAGugH,OAAOrsD,IAAI,IAAM,IAClC,IAAK,IAAIt2D,EAAI,EAAGA,EAAIk6B,EAAGl6B,IACtBohJ,GAAYh/I,EAAGiE,GAAMmQ,QAAQ,CAAClP,EAAG6B,IAAMnH,EAAEmH,GAAGM,KAAKnC,IAElD,OAAOtF,CACR,CAIA,SAAS0/I,GAAkBxnH,EAAG7zB,GAC7B,IAAIw7I,EAAK,EAAIx7I,IACTy7I,EAAKz7I,IACL07I,EAAKP,GAAiBn7I,GAE1B,OADQu7I,GAAgBG,EAAGziJ,OAAQ,EAAE46B,EAAG7zB,GAC/B27I,QAAQ,CAACjsI,EAAG/V,KACpB,IAAKsH,KAAMkrF,GAAMz8E,EACjB,OAAOtR,MAAMs9I,EAAG/hJ,IAAI2iH,OAAOrsD,IAAI,CAACstC,EAAGz6F,KAClC,IAAI84I,EAAO94I,EAAI24I,EACf,MAAO,CAACx6I,EAAI6B,EAAI04I,EAAIrvD,EAAGl8B,IAAI5oD,GAAKA,EAAIu0I,OAGvC,CAIA,SAASN,GAAuBznH,EAAG7zB,GAGlC,OADQu7I,GADA,EAAIv7I,IACe,EAAE6zB,EAAG7zB,GACvBiwD,IAAIvgD,GAAK,CAACA,EAAE,GAAIA,EAAEpK,MAAM,IAClC,CAgCA,SAASu2I,GAASC,GACjB,MAAO,IAAP/0I,OALD,SAAgB+0I,GACf,OAAOA,EAAGh7I,SAAS,IAAI0I,cAAcuyI,SAAS,EAAG,IAClD,CAGYC,CAAOF,GAAG,IACtB,CAOA,SAASG,GAAWpkJ,GACnB,IAAIqkJ,EAAM,GACV,IAAK,IAAIryB,EAAM,EAAGrwH,EAAM3B,EAAEoB,OAAQ4wH,EAAMrwH,GAAO,CAC9C,IAAIsiJ,EAAKjkJ,EAAEskJ,YAAYtyB,GACvBA,GAAOiyB,EAAK,MAAU,EAAI,EAC1BI,EAAI94I,KAAK04I,EACV,CACA,OAAOI,CACR,CAEA,SAASE,GAAaF,GAErB,IAAI1iJ,EAAM0iJ,EAAIjjJ,OACd,GAAIO,EAFU,KAEG,OAAO0H,OAAOm7I,iBAAiBH,GAChD,IAAI98F,EAAM,GACV,IAAK,IAAIzlD,EAAI,EAAGA,EAAIH,GACnB4lD,EAAIh8C,KAAKlC,OAAOm7I,iBAAiBH,EAAI52I,MAAM3L,EAAGA,GALjC,QAOd,OAAOylD,EAAI3wC,KAAK,GACjB,CAEA,SAAS6tI,GAAe//I,EAAGE,GAC1B,IAAIV,EAAIQ,EAAEtD,OACN9C,EAAI4F,EAAIU,EAAExD,OACd,IAAK,IAAIU,EAAI,EAAQ,GAALxD,GAAUwD,EAAIoC,EAAGpC,IAAKxD,EAAIoG,EAAE5C,GAAK8C,EAAE9C,GACnD,OAAOxD,CACR,CAgBA,MAAMomJ,GAAK,MACLC,GAAK,KACLC,GAAK,KACLC,GAAK,KAGLC,GAAU,GACVC,GAAUC,IAOhB,SAASC,GAAUC,GAClB,OAAQA,GAAU,GAAM,GACzB,CACA,SAASC,GAAUD,GAClB,OAAgB,SAATA,CACR,CAEA,IAAIE,GAAcC,GAAYC,GAAQC,GAyBtC,SAASC,GAAUvB,GAClB,OAAOA,GAAMS,IAAMT,EAtCTS,KAuCX,CAEA,SAASe,GAAa/gJ,EAAGE,GACxB,GAAIF,GAAKigJ,IAAMjgJ,EAzCLigJ,MAyCe//I,GAAKggJ,IAAMhgJ,EAxC1BggJ,KAyCT,OAAOF,IAAMhgJ,EAAIigJ,IAAMI,IAAWngJ,EAAIggJ,IAAME,GACtC,GAAIU,GAAU9gJ,IAAME,EAAIigJ,IAAMjgJ,EAzC3BigJ,OAyCsCngJ,EAAIggJ,IAAMI,IAAW,EACpE,OAAOpgJ,GAAKE,EAAIigJ,IACV,CACN,IAAIa,EAASH,GAAOrxI,IAAIxP,GACxB,OAAIghJ,IACHA,EAASA,EAAOxxI,IAAItP,GAChB8gJ,GACIA,GAGD,CACT,CACD,CAEA,SAASC,GAAWtB,GACde,IA7CN,WAEC,IAAI7hH,EAAI0+G,GAlCQ,+xOAmChBmD,GAAe,IAAIl7H,IAAIm5H,GAAmB9/G,GAAGugH,QAAQ,CAACjsI,EAAG/V,IAAM+V,EAAEugD,IAAIhvD,GAAK,CAACA,EAAItH,EAAE,GAAM,OACvFujJ,GAAa,IAAIpuI,IAAIksI,GAAY5/G,IACjC+hH,GAAS,IAAIp7H,IACbq7H,GAAS,IAAIr7H,IACb,IAAK,IAAK+5H,EAAII,KAAQd,GAAYhgH,GAAI,CACrC,IAAK8hH,GAAWpxI,IAAIgwI,IAAqB,GAAdI,EAAIjjJ,OAAa,CAC3C,IAAKsD,EAAGE,GAAKy/I,EACTnR,EAASqS,GAAOrxI,IAAIxP,GACnBwuI,IACJA,EAAS,IAAIhpH,IACbq7H,GAAOvqI,IAAItW,EAAGwuI,IAEfA,EAAOl4H,IAAIpW,EAAGq/I,EACf,CACAqB,GAAOtqI,IAAIipI,EAAII,EAAIriE,UACpB,CAGD,CAwBoB4jE,GACnB,IAAIv9E,EAAM,GACN9gB,EAAM,GACNs+F,GAAc,EAClB,SAASxuI,EAAI4sI,GACZ,IAAIr9H,EAAKw+H,GAAalxI,IAAI+vI,GACtBr9H,IACHi/H,GAAc,EACd5B,GAAMr9H,GAEPyhD,EAAI98D,KAAK04I,EACV,CACA,IAAK,IAAIA,KAAMI,EACd,OAAa,CACZ,GAAIJ,EAAK,IACR57E,EAAI98D,KAAK04I,QACH,GAAIuB,GAAUvB,GAAK,CACzB,IAAI6B,EAAU7B,EAAKS,GAEfqB,EAAWD,EAAUf,GAAWD,GAAU,EAC1CkB,EAAUF,EAAUhB,GACxBztI,EAAIstI,IAHUmB,EAAUf,GAAU,IAIlC1tI,EAAIutI,GAAKmB,GACLC,EAAU,GAAG3uI,EAAIwtI,GAAKmB,EAC3B,KAAO,CACN,IAAIC,EAASX,GAAOpxI,IAAI+vI,GACpBgC,EACH1+F,EAAIh8C,QAAQ06I,GAEZ5uI,EAAI4sI,EAEN,CACA,IAAK18F,EAAInmD,OAAQ,MACjB6iJ,EAAK18F,EAAI66B,KACV,CAED,GAAIyjE,GAAex9E,EAAIjnE,OAAS,EAAG,CAClC,IAAI8kJ,EAAUjB,GAAU58E,EAAI,IAC5B,IAAK,IAAIvmE,EAAI,EAAGA,EAAIumE,EAAIjnE,OAAQU,IAAK,CACpC,IAAI8kB,EAAKq+H,GAAU58E,EAAIvmE,IACvB,GAAU,GAAN8kB,GAAWs/H,GAAWt/H,EAAI,CAC7Bs/H,EAAUt/H,EACV,QACD,CACA,IAAI3b,EAAInJ,EAAE,EACV,OAAa,CACZ,IAAI2K,EAAM47D,EAAIp9D,EAAE,GAGhB,GAFAo9D,EAAIp9D,EAAE,GAAKo9D,EAAIp9D,GACfo9D,EAAIp9D,GAAKwB,GACJxB,EAAG,MAER,GADAi7I,EAAUjB,GAAU58E,IAAMp9D,IACtBi7I,GAAWt/H,EAAI,KACpB,CACAs/H,EAAUjB,GAAU58E,EAAIvmE,GACzB,CACD,CACA,OAAOumE,CACR,CA6CA,SAAS89E,GAAI9B,GACZ,OAAOsB,GAAWtB,GAAKjsF,IAAI+sF,GAC5B,CACA,SAASiB,GAAI/B,GACZ,OA/CD,SAAkCxsI,GACjC,IAAIwwD,EAAM,GACN3tD,EAAQ,GACR2rI,GAAW,EACXH,EAAU,EACd,IAAK,IAAIhB,KAAUrtI,EAAG,CACrB,IAAI+O,EAAKq+H,GAAUC,GACfjB,EAAKkB,GAAUD,GACnB,IAAgB,GAAZmB,EACO,GAANz/H,EACHy/H,EAAUpC,EAEV57E,EAAI98D,KAAK04I,QAEJ,GAAIiC,EAAU,GAAKA,GAAWt/H,EAC1B,GAANA,GACHyhD,EAAI98D,KAAK86I,KAAY3rI,GACrBA,EAAMtZ,OAAS,EACfilJ,EAAUpC,GAEVvpI,EAAMnP,KAAK04I,GAEZiC,EAAUt/H,MACJ,CACN,IAAI2iC,EAAWk8F,GAAaY,EAASpC,GACjC16F,GAAY,EACf88F,EAAU98F,EACW,GAAX28F,GAAsB,GAANt/H,GAC1ByhD,EAAI98D,KAAK86I,GACTA,EAAUpC,IAEVvpI,EAAMnP,KAAK04I,GACXiC,EAAUt/H,EAEZ,CACD,CAIA,OAHIy/H,GAAW,GACdh+E,EAAI98D,KAAK86I,KAAY3rI,GAEf2tD,CACR,CAOQi+E,CAAyBX,GAAWtB,GAC5C,CAEA,MAEMkC,GAAU,IAKVC,GAAap9I,GAAK7C,MAAMw7E,KAAK34E,GAEnC,SAASq9I,GAAa9hJ,EAAGs/I,GAExB,OAAOt/I,EAAEmjC,EAAE7zB,IAAIgwI,IAAOt/I,EAAE+kC,EAAEz1B,IAAIgwI,EAC/B,CAEA,MAAMyC,WAAcngJ,MACnB,YAAIogJ,GAAa,OAAO,CAAM,EAG/B,IAAIC,GAAQC,GAASC,GAAIC,GAAKC,GAAQC,GAAWC,GAAQC,GAAaC,GAAWC,GAAOC,GAAYC,GAEpG,SAAS1oJ,KACR,GAAI+nJ,GAAQ,OAEZ,IAAIrjH,EAAI0+G,GA1eU,gnmBA2elB,MAAMuF,EAAoBA,IAAMrE,GAAY5/G,GACtCkkH,EAAkBA,IAAM,IAAIxwI,IAAIuwI,KAChCE,EAAeA,CAAC1sI,EAAKnD,IAAMA,EAAES,QAAQlP,GAAK4R,EAAI3D,IAAIjO,IAExDw9I,GAAS,IAAI18H,IAAIq5H,GAAYhgH,IAC7BsjH,GAAUY,IAWVX,GAAKU,IACLT,GAAM,IAAI9vI,IAAIuwI,IAAoBpvF,IAAIt2D,GAAKglJ,GAAGhlJ,KAC9CglJ,GAAK,IAAI7vI,IAAI6vI,IAEbE,GAASS,IACTR,GAAYQ,IAEZ,IAAI3wC,EAASusC,GAAmB9/G,GAC5BokH,EAAepkH,IAEnB,MAAMqkH,EAAeA,KAEpB,IAAI5sI,EAAM,IAAI/D,IAGd,OAFAuwI,IAAoBlvI,QAAQxW,GAAK4lJ,EAAa1sI,EAAK87F,EAAOh1G,KAC1D4lJ,EAAa1sI,EAAKwsI,KACXxsI,GAERksI,GAAS5D,GAAiBxhJ,IAGzB,IAAI0lC,EAAI87G,GAAiB//G,GAAG60B,IAAIhvD,GAAKA,EAAE,IACvC,GAAIo+B,EAAEpmC,OAAQ,CACb,IAAIqK,EAAI3J,GAAK6lJ,EAoBb,OAnBAngH,EAAE,IAAM,GACRA,EAAI+8G,GAAa/8G,GACb/7B,IAAG+7B,EAAC,cAAAt4B,OAAes4B,EAAC,MAiBjB,CAACA,IAAGM,EAhBH8/G,IAgBMl+G,EAfNk+G,IAeSrgH,GAdRhE,IAcW93B,IACrB,IAID07I,GAAcM,IACdL,GAAY,IAAIl9H,IAChB,IAAI29H,EAASL,IAAoBt4I,OAAOs3I,GAAWW,KAAcplD,KAAK,CAACr9F,EAAGE,IAAMF,EAAEE,GAClFijJ,EAAOvvI,QAAQ,CAAC2rI,EAAIniJ,KACnB,IAAI+C,EAAI0+B,IACJvH,EAAI6rH,EAAO/lJ,GAAK+C,EAAIgjJ,EAAO/lJ,EAAE+C,GAAK,CAAC4uC,EAAG,GAAIlM,EAAG,IAAIrd,KACrD8R,EAAEyX,EAAEloC,KAAK04I,GACJkD,GAAYlzI,IAAIgwI,IACpBmD,GAAUpsI,IAAIipI,EAAIjoH,KAMpB,IAAK,IAAI,EAACyX,EAAC,EAAElM,KAAM,IAAItwB,IAAImwI,GAAUj8F,UAAW,CAE/C,IAAI28F,EAAO,GACX,IAAK,IAAI7D,KAAMxwG,EAAG,CACjB,IAAIs0G,EAAKb,GAAO37F,OAAO5mD,GAAK8hJ,GAAa9hJ,EAAGs/I,IACxCnlE,EAAMgpE,EAAK9nC,KAAK1a,IAAA,IAAC,EAACrmE,GAAEqmE,EAAA,OAAKyiD,EAAGxjD,KAAK5/F,GAAKs6B,EAAEhrB,IAAItP,MAC3Cm6E,IACJA,EAAM,CAAC7/C,EAAG,IAAIhoB,IAAOw8B,EAAG,IACxBq0G,EAAKv8I,KAAKuzE,IAEXA,EAAIrrC,EAAEloC,KAAK04I,GACXyD,EAAa5oE,EAAI7/C,EAAG8oH,EACrB,CAEA,IAAIC,EAAQF,EAAKhE,QAAQ16I,GAAKo9I,GAAWp9I,EAAE61B,IAC3C,IAAK,IAAI,EAACA,EAAC,EAAEwU,KAAMq0G,EAAM,CACxB,IAAIG,EAAa,IAAIhxI,IAAI+wI,EAAMz8F,OAAO5mD,IAAMs6B,EAAEhrB,IAAItP,KAClD,IAAK,IAAIs/I,KAAMxwG,EACdlM,EAAEvsB,IAAIipI,EAAIgE,EAEZ,CACD,CAIAZ,GAAQ,IAAIpwI,IACZ,IAAIixI,EAAQ,IAAIjxI,IAChB,MAAMkxI,EAAelE,GAAMoD,GAAMpzI,IAAIgwI,GAAMiE,EAAM7wI,IAAI4sI,GAAMoD,GAAMhwI,IAAI4sI,GACrE,IAAK,IAAIt/I,KAAKuiJ,GAAQ,CACrB,IAAK,IAAIjD,KAAMt/I,EAAEmjC,EAAGqgH,EAAalE,GACjC,IAAK,IAAIA,KAAMt/I,EAAE+kC,EAAGy+G,EAAalE,EAClC,CAEA,IAAK,IAAIA,KAAMoD,GACTD,GAAUnzI,IAAIgwI,IAAQiE,EAAMj0I,IAAIgwI,IACpCmD,GAAUpsI,IAAIipI,EApIC,GAyIjByD,EAAaL,GAAOlB,GAAIkB,KAIxBC,GAlZD,SAAmBn/I,GAClB,IAAIkgE,EAAM,GACN4qC,EAASkwC,GAAYh7I,GAEzB,OASA,SAASigJ,EAAMxoD,EAASykD,EAAKgE,GAAO,IAApB,EAAC91G,EAAC,EAAEvrB,GAAE44E,EACrB,KAAQ,EAAJrtD,GAAS81G,IAAUhE,EAAIA,EAAIjjJ,OAAO,IAAtC,CACQ,EAAJmxC,IAAO81G,EAAQhE,EAAIA,EAAIjjJ,OAAO,IAC1B,EAAJmxC,GAAO81B,EAAI98D,KAAK84I,GACpB,IAAK,IAAIthI,KAAMiE,EACd,IAAK,IAAIi9H,KAAMlhI,EAAG2mB,EACjB0+G,EAAOrlI,EAAI,IAAIshI,EAAKJ,GAAKoE,EALqB,CAQjD,CAnBAD,CAEA,SAAStrJ,EAAO4sC,GACf,IAAI6I,EAAIpqC,IACJ6e,EAAIs8H,GAAiB,KACxB,IAAIe,EAAMlB,GAAYh7I,GAAMiwD,IAAIt2D,GAAKmxG,EAAOnxG,IAC5C,GAAIuiJ,EAAIjjJ,OAAQ,OAAOtE,EAAOunJ,KAE/B,MAAO,CAAC9xG,IAAGvrB,IAAG0iB,IACf,CATO5sC,CAAO,IAAK,IACZurE,CAmBR,CA2XcigF,CAAU/kH,GAAG60B,IAAIvgD,GAAK6uI,GAAM3kE,KAAKlqE,IAAIkqF,KAAK0iD,IACvD8C,GAAa,IAAIr9H,IACjB,IAAK,IAAIm6H,KAAOiD,GAAY,CAO3B,IAAIlE,EAAO,CAACmE,IACZ,IAAK,IAAItD,KAAMI,EAAK,CACnB,IAAIl8I,EAAOi7I,EAAKhrF,IAAIlhC,IACnB,IAAI9Q,EAAQ8Q,EAAKhjB,IAAI+vI,GAQrB,OAPK79H,IAIJA,EAAQ,IAAI8D,IACZgN,EAAKlc,IAAIipI,EAAI79H,IAEPA,IAlKE,QAoKN69H,EACHb,EAAK73I,QAAQpD,GAEbi7I,EAAOj7I,CAET,CACA,IAAK,IAAIiB,KAAKg6I,EACbh6I,EAAEqqC,EAAI4wG,CAER,CACD,CAIA,SAASkE,GAAUtE,GAClB,OAAQuE,GAAcvE,GAAM,GAAK,GAAH/0I,OAAMu5I,GAAQC,GAAkB,CAACzE,KAAK,MAAOD,GAASC,EACrF,CAMA,SAASwE,GAAQzoJ,GAChB,MAAO,IAAPkP,OAAWlP,EAAC,UACb,CAyCA,SAAS0oJ,GAAkBrE,GAAwC,IAAnC38I,EAAGiL,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG8jC,IAAUkyG,EAAMh2I,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAGqxI,GAGpDz8F,EAAM,GAsBX,IAA2B08F,IArBJI,EAAI,GAsB1BxlJ,KACOioJ,GAAG7yI,IAAIgwI,IAvBiB18F,EAAIh8C,KAAK,UACpC84I,EAAIjjJ,OAASsG,IAChBA,IAAQ,EACR28I,EAAM,IAAIA,EAAI52I,MAAM,EAAG/F,GAAM,QAAW28I,EAAI52I,OAAO/F,KAEpD,IAAI07I,EAAO,EACPl/I,EAAImgJ,EAAIjjJ,OACZ,IAAK,IAAIU,EAAI,EAAGA,EAAIoC,EAAGpC,IAAK,CAC3B,IAAImiJ,EAAKI,EAAIviJ,GACT0mJ,GAAcvE,KACjB18F,EAAIh8C,KAAKg5I,GAAaF,EAAI52I,MAAM21I,EAAMthJ,KACtCylD,EAAIh8C,KAAKo9I,EAAO1E,IAChBb,EAAOthJ,EAAI,EAEb,CAEA,OADAylD,EAAIh8C,KAAKg5I,GAAaF,EAAI52I,MAAM21I,EAAMl/I,KAC/BqjD,EAAI3wC,KAAK,GACjB,CAQA,SAAS4xI,GAAcvE,GAEtB,OADAplJ,KACOmoJ,GAAO/yI,IAAIgwI,EACnB,CAiEA,SAAS5rI,GAAM3V,EAAMw4B,EAAIN,GACxB,IAAKl4B,EAAM,MAAO,GAClB7D,KACA,IAAIs4B,EAAS,EAGb,OAAOz0B,EAAK2V,MAAMkuI,IAASnuF,IAAImZ,IAC9B,IAAIjwE,EAAQ8iJ,GAAW7yE,GACnBl+D,EAAO,CACV/R,QACA61B,UAEDA,GAAU71B,EAAMF,OAAS,EACzB,IAEC,IAEIpE,EAFAwiI,EAASnsH,EAAKmsH,OAASopB,GAAgBtnJ,EAAO45B,EAAIN,GAClDiuH,EAAcrpB,EAAOp+H,OAEzB,IAAKynJ,EAKJ,MAAM,IAAI5rJ,MAAM,eAEjB,IAAI6rJ,EAAOz1I,EAAKrS,OAASw+H,EAAO/sB,OAGhC,GA/JH,SAAkC4xC,GAEjC,IAAK,IAAIviJ,EAAIuiJ,EAAI0E,YADE,IACuBjnJ,EAAI,GAC7C,GAFkB,KAEduiJ,IAAMviJ,GACT,MAAM,IAAI7E,MAAM,mCAGnB,CAsJG+rJ,CAAyBF,KACbz1I,EAAK41I,MAAQJ,EAAc,GAAKrpB,EAAO,GAAGmnB,WACxCmC,EAAK5mD,MAAM+hD,GAAMA,EAAK,MApKvC,SAA+BI,GAC9B,GAAIA,EAAIjjJ,QAAU,GAlMJ,IAkMSijJ,EAAI,IAlMb,IAkM6BA,EAAI,GAC9C,MAAM,IAAIpnJ,MAAM,6BAADiS,OAA8Bq1I,GAAaF,EAAI52I,MAAM,EAAG,IAAG,KAE5E,CAkKIy7I,CAAsBJ,GAKtB9rJ,EAAO,YACD,CACN,IAAI62H,EAAQ2L,EAAOskB,QAAQ16I,GAAKA,EAAEu9I,SAAW,GAAKv9I,GAClD,GAAKyqH,EAAMzyH,OAEJ,CAEN,GAAI0lJ,GAAG7yI,IAAI60I,EAAK,IAAK,MAAMK,GAAgB,0BAC3C,IAAK,IAAIrnJ,EAAI,EAAGA,EAAI+mJ,EAAa/mJ,IAAK,CACrC,IAAIuiJ,EAAM7kB,EAAO19H,GACjB,IAAKuiJ,EAAIsC,UAAYG,GAAG7yI,IAAIowI,EAAI,IAE/B,MAAM8E,GAAgB,4BAADj6I,OAA6Bq1I,GAAa/kB,EAAO19H,EAAE,IAAG,OAAAoN,OAAMw5I,GAAkB,CAACrE,EAAI,KAAI,KAE9G,EA3KL,SAAsBA,GACrB,IAAIJ,EAAKI,EAAI,GACTjB,EAAOpB,GAAO9tI,IAAI+vI,GACtB,GAAIb,EAAM,MAAM+F,GAAgB,WAADj6I,OAAYk0I,IAC3C,IAAIl/I,EAAImgJ,EAAIjjJ,OACRS,GAAQ,EACZ,IAAK,IAAIC,EAAI,EAAGA,EAAIoC,EAAGpC,IAAK,CAC3BmiJ,EAAKI,EAAIviJ,GACT,IAAI6U,EAAQqrI,GAAO9tI,IAAI+vI,GACvB,GAAIttI,EAAO,CAEV,GAAI9U,GAAQC,EAAG,MAAMqnJ,GAAgB,GAADj6I,OAAIk0I,EAAI,OAAAl0I,OAAMyH,IAClD9U,EAAOC,EAAI,EACXshJ,EAAOzsI,CACR,CACD,CACA,GAAI9U,GAAQqC,EAAG,MAAMilJ,GAAgB,YAADj6I,OAAak0I,GAClD,CA2JKgG,CAAaN,GACb,IAAIhtB,EAAS0qB,GAAW,IAAIvvI,IAAI48G,KAC3BlvH,GAgDV,SAAyBm3H,GACxB,IAAIutB,EAASnC,GACb,IAAK,IAAIjD,KAAMnoB,EAAQ,CAGtB,IAAIisB,EAAKsB,EAAO99F,OAAO5mD,GAAK8hJ,GAAa9hJ,EAAGs/I,IAC5C,IAAK8D,EAAG3mJ,OACP,MAAK8lJ,GAAO3iD,KAAK5/F,GAAK8hJ,GAAa9hJ,EAAGs/I,IAW/BqF,GAAmBD,EAAO,GAAIpF,GAL9BsF,GAAiBtF,GASzB,GADAoF,EAAStB,EACQ,GAAbA,EAAG3mJ,OAAa,KACrB,CAEA,OAAOioJ,CACR,CA1EeG,CAAgB1tB,IA4G/B,SAAqBn3H,EAAG0/I,GACvB,IAAK,IAAIJ,KAAMI,EACd,IAAKoC,GAAa9hJ,EAAGs/I,GAWpB,MAAMqF,GAAmB3kJ,EAAGs/I,GAI9B,GAAIt/I,EAAE4iC,EAAG,CACR,IAAIo+G,EAAaQ,GAAI9B,GACrB,IAAK,IAAIviJ,EAAI,EAAGgD,EAAI6gJ,EAAWvkJ,OAAQU,EAAIgD,EAAGhD,IAc7C,GAAIilJ,GAAI9yI,IAAI0xI,EAAW7jJ,IAAK,CAC3B,IAAImJ,EAAInJ,EAAI,EACZ,IAAK,IAAImiJ,EAAIh5I,EAAInG,GAAKiiJ,GAAI9yI,IAAIgwI,EAAK0B,EAAW16I,IAAKA,IAElD,IAAK,IAAIvH,EAAI5B,EAAG4B,EAAIuH,EAAGvH,IACtB,GAAIiiJ,EAAWjiJ,IAAMugJ,EACpB,MAAM,IAAIhnJ,MAAM,gCAADiS,OAAiCq5I,GAAUtE,KAM7D,GAAIh5I,EAAInJ,EAv+BI,EAy+BX,MAAM,IAAI7E,MAAM,gCAADiS,OAAiCu5I,GAAQC,GAAkB/C,EAAWl4I,MAAM3L,EAAE,EAAGmJ,KAAI,MAAAiE,OAAKjE,EAAEnJ,EAAC,KAAAoN,OAz+BjG,EAy+B4G,MAExHpN,EAAImJ,CACL,CAEF,CA+CD,CA5MKw+I,CAAY9kJ,EAAGkvH,GAiBpB,SAAqB58D,EAAO6kE,GAC3B,IAAI4tB,EACApkH,EAAS,GACb,IAAK,IAAI2+G,KAAMnoB,EAAQ,CACtB,IAAI6tB,EAAQvC,GAAUlzI,IAAI+vI,GAC1B,GAlZgB,IAkZZ0F,EAAqB,OACzB,GAAIA,EAAO,CACV,IAAI3uI,EAAM2uI,EAAMpiH,EAAErzB,IAAI+vI,GAEtB,GADAyF,EAAQA,EAAQA,EAAMn+F,OAAO5mD,GAAKqW,EAAI/G,IAAItP,IAAM6hJ,GAAWxrI,IACtD0uI,EAAMtoJ,OAAQ,MACpB,MACCkkC,EAAO/5B,KAAK04I,EAEd,CACA,GAAIyF,EAIH,IAAK,IAAI/kJ,KAAK+kJ,EACb,GAAIpkH,EAAO48D,MAAM+hD,GAAMwC,GAAa9hJ,EAAGs/I,IACtC,MAAM,IAAIhnJ,MAAM,4BAADiS,OAA6B+nD,EAAMzvB,EAAC,KAAAt4B,OAAIvK,EAAE6iC,GAI7D,CAxCKoiH,CAAYjlJ,EAAGm3H,GACf9+H,EAAO2H,EAAE6iC,CAKV,MAvBCxqC,EAAO,OAwBT,CACAqW,EAAKrW,KAAOA,CACb,CAAE,MAAO0L,GACR2K,EAAK/V,MAAQoL,CACd,CACA,OAAO2K,GAET,CA2DA,SAASw2I,GAAQxxI,GAChB,OAAOA,EAAM+/C,IAAIyqD,IAA4B,IAA3B,MAACvhH,EAAK,MAAEhE,EAAK,OAAE0D,GAAO6hH,EACvC,GAAIvlH,EAAO,CAEV,IAAIT,EAAMS,EAAMuU,QAEhB,MAAM,IAAI5U,MAAsB,GAAhBob,EAAMjX,OAAcvE,EAAM,iBAAHqS,OAAoBu5I,GAAQC,GAAkBpnJ,EAAO,KAAI,MAAA4N,OAAKrS,GACtG,CACA,OAAO0nJ,GAAavjJ,KAClB4V,KAAK2vI,GACT,CAEA,SAASgD,GAAiBtF,GAEzB,OAAO,IAAIhnJ,MAAM,yBAADiS,OAA0Bq5I,GAAUtE,IACrD,CACA,SAASqF,GAAmB3kJ,EAAGs/I,GAC9B,IAAI6F,EAASvB,GAAUtE,GACnB5jH,EAAK6mH,GAAOlnC,KAAKr7G,GAAKA,EAAEmjC,EAAE7zB,IAAIgwI,IAIlC,OAHI5jH,IACHypH,EAAS,GAAH56I,OAAMmxB,EAAGmH,EAAC,KAAAt4B,OAAI46I,IAEd,IAAI7sJ,MAAM,oBAADiS,OAAqBvK,EAAE6iC,EAAC,OAAAt4B,OAAM46I,GAC/C,CACA,SAASX,GAAgBY,GACxB,OAAO,IAAI9sJ,MAAM,sBAADiS,OAAuB66I,GACxC,CA+GA,SAASnB,GAAgBtnJ,EAAO45B,EAAIN,GACnC,IAAIytC,EAAM,GACNwrD,EAAQ,GAEZ,IADAvyH,EAAQA,EAAMmM,QAAQu0E,UACf1gF,EAAMF,QAAQ,CACpB,IAAI6nJ,EAAQe,GAAuB1oJ,GACnC,GAAI2nJ,EACCp1B,EAAMzyH,SACTinE,EAAI98D,KAAK2vB,EAAG24F,IACZA,EAAQ,IAETxrD,EAAI98D,KAAKqvB,EAAGquH,QACN,CACN,IAAIhF,EAAK3iJ,EAAM8gF,MACf,GAAIilE,GAAMpzI,IAAIgwI,GACbpwB,EAAMtoH,KAAK04I,OACL,CACN,IAAII,EAAMuC,GAAO1yI,IAAI+vI,GACrB,GAAII,EACHxwB,EAAMtoH,QAAQ84I,QACR,IAAKwC,GAAQ5yI,IAAIgwI,GAOvB,MAAMsF,GAAiBtF,EAEzB,CACD,CACD,CAIA,OAHIpwB,EAAMzyH,QACTinE,EAAI98D,KAAK2vB,EAAG24F,IAENxrD,CACR,CAEA,SAAS4hF,GAAY5F,GACpB,OAAOA,EAAI94F,OAAO04F,GAvnBN,OAunBYA,EACzB,CAOA,SAAS+F,GAAuB3F,EAAK6F,GACpC,IACIjB,EADA/xH,EAAOqwH,GAEPv1B,EAAMqyB,EAAIjjJ,OACd,KAAO4wH,IACN96F,EAAOA,EAAKhjB,IAAImwI,IAAMryB,IACjB96F,IAFM,CAGX,IAAI,EAACuc,GAAKvc,EACNuc,IACHw1G,EAAQx1G,EACJy2G,GAAOA,EAAM3+I,QAAQ84I,EAAI52I,MAAMukH,GAAKhwC,WACxCqiE,EAAIjjJ,OAAS4wH,EAEf,CACA,OAAOi3B,CACR,CChmCA,MAAMkB,GAAQ,IAAIl6F,WAAW,IAG7B,SAASm6F,GAAe9nB,GAEpB,OADAhb,GAA+B,IAAhBgb,EAAKlhI,OAAc,oCAAqC,OAAQkhI,GACxEA,CACX,CAEA,SAAS+nB,GAAa3nJ,GAClB,MAAMmG,EAAQk1H,GA0BZ,SAAuBr7H,GACzB,IACI,GAAoB,IAAhBA,EAAKtB,OAAgB,MAAM,IAAInE,MAAM,eACzC,ODgsBR,SAAuByF,GACtB,OAAOmnJ,GAAQxxI,GAAM3V,EAAM0jJ,GAAK6D,IACjC,CClsBeK,CAAc5nJ,E,CACvB,MAAOpF,GACLgqH,IAAe,EAAO,qBAAFp4G,OAAwB5R,EAAMuU,QAAQ,KAAK,OAAQnP,E,CAE/E,CAjC8B6nJ,CAAa7nJ,IACjCogI,EAA2B,GAEjC,GAAoB,IAAhBpgI,EAAKtB,OAAgB,OAAO0hI,EAEhC,IAAIjhI,EAAO,EACX,IAAK,IAAIC,EAAI,EAAGA,EAAI+G,EAAMzH,OAAQU,IAAK,CAIzB,KAHA+G,EAAM/G,KAIZghI,EAAMv3H,KAAK6+I,GAAevhJ,EAAM4E,MAAM5L,EAAMC,KAC5CD,EAAOC,EAAI,E,CAQnB,OAHAwlH,GAAezlH,EAAOgH,EAAMzH,OAAQ,oCAAqC,OAAQsB,GAEjFogI,EAAMv3H,KAAK6+I,GAAevhJ,EAAM4E,MAAM5L,KAC/BihI,CACX,CA2BM,SAAU0nB,GAAS9nJ,GACrB4kH,GAAgC,kBAAV5kH,EAAoB,iCAAkC,OAAQA,GAEpF4kH,GAAe5kH,EAAKtB,OAAQ,iCAAkC,OAAQsB,GAEtE,IAAIskD,EAA8BmjG,GAElC,MAAMrnB,EAAQunB,GAAa3nJ,GAC3B,KAAOogI,EAAM1hI,QACT4lD,EAASwsE,GAAUtkH,GAAO,CAAE83C,EAAQwsE,GAAuBsP,EAAM1gD,UAGrE,OAAOimC,GAAQrhE,EACnB,CAQM,SAAUyjG,GAAU/nJ,EAAcgoJ,GACpC,MAAMtpJ,EAAwB,MAAdspJ,EAAsBA,EAAY,GAIlD,OAFApjC,GAAelmH,GAAU,IAAK,sCAAuC,SAAUA,GAExEinH,GAAQn5G,GAAOm7I,GAAa3nJ,GAAM01D,IAAKkqE,IAC1Chb,GAAegb,EAAKlhI,QAAUA,EAAQ,SAAF8N,OAAYosC,KAAKC,UAAU74C,GAAM,aAAAwM,OAAa9N,EAAO,UAAU,OAAQsB,GAE3G,MAAMmG,EAAQ,IAAIonD,WAAWqyE,EAAKlhI,OAAS,GAG3C,OAFAyH,EAAMmS,IAAIsnH,EAAM,GAChBz5H,EAAM,GAAKA,EAAMzH,OAAS,EACnByH,MACJ,IACX,CA1FAshJ,GAAM1lC,KAAK,GCOL,MAAgBkmC,WAAgCl6B,GAcpDv0G,WAAAA,CACW8xG,EACFD,EACE8Y,EACA+jB,GAETp/C,QALS,KAAAwiB,SAAAA,EACF,KAAAD,UAAAA,EACE,KAAA8Y,UAAAA,EACA,KAAA+jB,KAAAA,EATD,KAAA72E,UAAW,EACX,KAAA3yE,OAAS,EACT,KAAA4wH,IAAM,EACN,KAAA7D,WAAY,EASpBlhH,KAAKqH,OAAS,IAAI27C,WAAW+9D,GAC7B/gH,KAAKshB,KAAO6hG,GAAWnjH,KAAKqH,OAC9B,CACArT,MAAAA,CAAO2I,GACLqkH,GAAOhhH,MACP,MAAM,KAAEshB,EAAI,OAAEja,EAAM,SAAE05G,GAAa/gH,KAE7BtL,GADNiI,EAAO0mH,GAAQ1mH,IACExI,OACjB,IAAK,IAAI4wH,EAAM,EAAGA,EAAMrwH,GAAO,CAC7B,MAAMkxH,EAAOprH,KAAKE,IAAIqmH,EAAW/gH,KAAK+kH,IAAKrwH,EAAMqwH,GAEjD,GAAIa,IAAS7E,EAAU,CACrB,MAAM68B,EAAWz6B,GAAWxmH,GAC5B,KAAOokH,GAAYrsH,EAAMqwH,EAAKA,GAAOhE,EAAU/gH,KAAKtH,QAAQklJ,EAAU74B,GACtE,Q,CAEF19G,EAAO0G,IAAIpR,EAAKwqD,SAAS49D,EAAKA,EAAMa,GAAO5lH,KAAK+kH,KAChD/kH,KAAK+kH,KAAOa,EACZb,GAAOa,EACH5lH,KAAK+kH,MAAQhE,IACf/gH,KAAKtH,QAAQ4oB,EAAM,GACnBthB,KAAK+kH,IAAM,E,CAKf,OAFA/kH,KAAK7L,QAAUwI,EAAKxI,OACpB6L,KAAK69I,aACE79I,IACT,CACAimH,UAAAA,CAAWtjH,GACTq+G,GAAOhhH,MACPjM,GAAO4O,EAAK3C,MACZA,KAAK8mE,UAAW,EAIhB,MAAM,OAAEz/D,EAAM,KAAEia,EAAI,SAAEy/F,EAAQ,KAAE48B,GAAS39I,KACzC,IAAI,IAAE+kH,GAAQ/kH,KAEdqH,EAAO09G,KAAS,IAChB/kH,KAAKqH,OAAO8/C,SAAS49D,GAAKvN,KAAK,GAE3Bx3G,KAAK45H,UAAY7Y,EAAWgE,IAC9B/kH,KAAKtH,QAAQ4oB,EAAM,GACnByjG,EAAM,GAGR,IAAK,IAAIlwH,EAAIkwH,EAAKlwH,EAAIksH,EAAUlsH,IAAKwS,EAAOxS,GAAK,GAhFrD,SAAsBysB,EAAgBwjC,EAAoBp1C,EAAeiuI,GACvE,GAAiC,oBAAtBr8H,EAAKw8H,aAA6B,OAAOx8H,EAAKw8H,aAAah5F,EAAYp1C,EAAOiuI,GACzF,MAAMv8B,EAAOxH,OAAO,IACdmkC,EAAWnkC,OAAO,YAClBtgF,EAAK+3D,OAAQ3hF,GAAS0xG,EAAQ28B,GAC9BC,EAAK3sD,OAAO3hF,EAAQquI,GACpBjmJ,EAAI6lJ,EAAO,EAAI,EACf/mJ,EAAI+mJ,EAAO,EAAI,EACrBr8H,EAAK28H,UAAUn5F,EAAahtD,EAAGwhC,EAAIqkH,GACnCr8H,EAAK28H,UAAUn5F,EAAaluD,EAAGonJ,EAAIL,EACrC,CA0EIG,CAAax8H,EAAMy/F,EAAW,EAAGnH,OAAqB,EAAd55G,KAAK7L,QAAawpJ,GAC1D39I,KAAKtH,QAAQ4oB,EAAM,GACnB,MAAM48H,EAAQ/6B,GAAWxgH,GACnBjO,EAAMsL,KAAK8gH,UAEjB,GAAIpsH,EAAM,EAAG,MAAM,IAAI1E,MAAM,+CAC7B,MAAMmuJ,EAASzpJ,EAAM,EACftD,EAAQ4O,KAAKiH,MACnB,GAAIk3I,EAAS/sJ,EAAM+C,OAAQ,MAAM,IAAInE,MAAM,sCAC3C,IAAK,IAAI6E,EAAI,EAAGA,EAAIspJ,EAAQtpJ,IAAKqpJ,EAAMD,UAAU,EAAIppJ,EAAGzD,EAAMyD,GAAI8oJ,EACpE,CACAtoJ,MAAAA,GACE,MAAM,OAAEgS,EAAM,UAAEy5G,GAAc9gH,KAC9BA,KAAKimH,WAAW5+G,GAChB,MAAM21C,EAAM31C,EAAO7G,MAAM,EAAGsgH,GAE5B,OADA9gH,KAAKi9B,UACE+f,CACT,CACAymE,UAAAA,CAAWrxB,GACTA,IAAAA,EAAO,IAAKpyF,KAAKiP,aACjBmjF,EAAGrkF,OAAO/N,KAAKiH,OACf,MAAM,SAAE85G,EAAQ,OAAE15G,EAAM,OAAElT,EAAM,SAAE2yE,EAAQ,UAAEo6C,EAAS,IAAE6D,GAAQ/kH,KAM/D,OALAoyF,EAAGj+F,OAASA,EACZi+F,EAAG2yB,IAAMA,EACT3yB,EAAGtrB,SAAWA,EACdsrB,EAAG8uB,UAAYA,EACX/sH,EAAS4sH,GAAU3uB,EAAG/qF,OAAO0G,IAAI1G,GAC9B+qF,CACT,EC7GF,MAAMgsD,GAAMA,CAAC3mJ,EAAWE,EAAWtG,IAAeoG,EAAIE,GAAOF,EAAIpG,EAE3DgtJ,GAAMA,CAAC5mJ,EAAWE,EAAWtG,IAAeoG,EAAIE,EAAMF,EAAIpG,EAAMsG,EAAItG,EAKpEitJ,GAA0B,IAAI1jJ,YAAY,CAC9C,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WACpF,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WACpF,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WACpF,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UACpF,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WACpF,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UACpF,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WACpF,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,aAKhF2jJ,GAAoB,IAAI3jJ,YAAY,CACxC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,aAKhF4jJ,GAA2B,IAAI5jJ,YAAY,IACjD,MAAM6jJ,WAAef,GAYnBzuI,WAAAA,GACEsvF,MAAM,GAAI,GAAI,GAAG,GAVnB,KAAAjxF,EAAY,EAARixI,GAAG,GACP,KAAAxkI,EAAY,EAARwkI,GAAG,GACP,KAAAniI,EAAY,EAARmiI,GAAG,GACP,KAAAnwH,EAAY,EAARmwH,GAAG,GACP,KAAAxsH,EAAY,EAARwsH,GAAG,GACP,KAAAvvH,EAAY,EAARuvH,GAAG,GACP,KAAAvsH,EAAY,EAARusH,GAAG,GACP,KAAArsH,EAAY,EAARqsH,GAAG,EAIP,CACUt3I,GAAAA,GACR,MAAM,EAAEqG,EAAC,EAAEyM,EAAC,EAAEqC,EAAC,EAAEgS,EAAC,EAAE2D,EAAC,EAAE/C,EAAC,EAAEgD,EAAC,EAAEE,GAAMlyB,KACnC,MAAO,CAACsN,EAAGyM,EAAGqC,EAAGgS,EAAG2D,EAAG/C,EAAGgD,EAAGE,EAC/B,CAEUnkB,GAAAA,CACRT,EAAWyM,EAAWqC,EAAWgS,EAAW2D,EAAW/C,EAAWgD,EAAWE,GAE7ElyB,KAAKsN,EAAQ,EAAJA,EACTtN,KAAK+Z,EAAQ,EAAJA,EACT/Z,KAAKoc,EAAQ,EAAJA,EACTpc,KAAKouB,EAAQ,EAAJA,EACTpuB,KAAK+xB,EAAQ,EAAJA,EACT/xB,KAAKgvB,EAAQ,EAAJA,EACThvB,KAAKgyB,EAAQ,EAAJA,EACThyB,KAAKkyB,EAAQ,EAAJA,CACX,CACUx5B,OAAAA,CAAQ4oB,EAAgB4I,GAEhC,IAAK,IAAIr1B,EAAI,EAAGA,EAAI,GAAIA,IAAKq1B,GAAU,EAAGs0H,GAAS3pJ,GAAKysB,EAAKo9H,UAAUx0H,GAAQ,GAC/E,IAAK,IAAIr1B,EAAI,GAAIA,EAAI,GAAIA,IAAK,CAC5B,MAAM8pJ,EAAMH,GAAS3pJ,EAAI,IACnB+pJ,EAAKJ,GAAS3pJ,EAAI,GAClB2tD,EAAK4gE,GAAKu7B,EAAK,GAAKv7B,GAAKu7B,EAAK,IAAOA,IAAQ,EAC7C34F,EAAKo9D,GAAKw7B,EAAI,IAAMx7B,GAAKw7B,EAAI,IAAOA,IAAO,GACjDJ,GAAS3pJ,GAAMmxD,EAAKw4F,GAAS3pJ,EAAI,GAAK2tD,EAAKg8F,GAAS3pJ,EAAI,IAAO,C,CAGjE,IAAI,EAAEyY,EAAC,EAAEyM,EAAC,EAAEqC,EAAC,EAAEgS,EAAC,EAAE2D,EAAC,EAAE/C,EAAC,EAAEgD,EAAC,EAAEE,GAAMlyB,KACjC,IAAK,IAAInL,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,MACM2I,EAAM00B,GADGkxF,GAAKrxF,EAAG,GAAKqxF,GAAKrxF,EAAG,IAAMqxF,GAAKrxF,EAAG,KACzBqsH,GAAIrsH,EAAG/C,EAAGgD,GAAKssH,GAASzpJ,GAAK2pJ,GAAS3pJ,GAAM,EAE/DgqJ,GADSz7B,GAAK91G,EAAG,GAAK81G,GAAK91G,EAAG,IAAM81G,GAAK91G,EAAG,KAC7B+wI,GAAI/wI,EAAGyM,EAAGqC,GAAM,EACrC8V,EAAIF,EACJA,EAAIhD,EACJA,EAAI+C,EACJA,EAAK3D,EAAI5wB,EAAM,EACf4wB,EAAIhS,EACJA,EAAIrC,EACJA,EAAIzM,EACJA,EAAK9P,EAAKqhJ,EAAM,C,CAGlBvxI,EAAKA,EAAItN,KAAKsN,EAAK,EACnByM,EAAKA,EAAI/Z,KAAK+Z,EAAK,EACnBqC,EAAKA,EAAIpc,KAAKoc,EAAK,EACnBgS,EAAKA,EAAIpuB,KAAKouB,EAAK,EACnB2D,EAAKA,EAAI/xB,KAAK+xB,EAAK,EACnB/C,EAAKA,EAAIhvB,KAAKgvB,EAAK,EACnBgD,EAAKA,EAAIhyB,KAAKgyB,EAAK,EACnBE,EAAKA,EAAIlyB,KAAKkyB,EAAK,EACnBlyB,KAAK+N,IAAIT,EAAGyM,EAAGqC,EAAGgS,EAAG2D,EAAG/C,EAAGgD,EAAGE,EAChC,CACU2rH,UAAAA,GACRW,GAAShnC,KAAK,EAChB,CACAv6E,OAAAA,GACEj9B,KAAK+N,IAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC9B/N,KAAKqH,OAAOmwG,KAAK,EACnB,EAsBK,MAAM5lE,GAAyB8xE,GAAgB,IAAM,IAAI+6B,KC7HzDK,GAAWC,IAA6B,KAAOn9B,GAAAA,MAAU,CAC9D,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,sBAClEz2D,IAAIl0D,GAAK2iH,OAAO3iH,KArB6B,GAwBzC+nJ,GAA6B,IAAIpkJ,YAAY,IAC7CqkJ,GAA6B,IAAIrkJ,YAAY,IAC7C,MAAOskJ,WAAexB,GAsB1BzuI,WAAAA,GACEsvF,MAAM,IAAK,GAAI,IAAI,GAlBrB,KAAA5kE,GAAK,WACL,KAAA4nF,IAAK,UACL,KAAA3nF,IAAK,WACL,KAAA2oF,IAAK,WACL,KAAA1oF,GAAK,WACL,KAAA4oF,IAAK,SACL,KAAA1oF,IAAK,WACL,KAAA8oF,GAAK,WACL,KAAA7oF,GAAK,WACL,KAAAipF,IAAK,WACL,KAAA/oF,IAAK,WACL,KAAAilH,GAAK,UACL,KAAA/kH,GAAK,UACL,KAAAglH,IAAK,SACL,KAAA/kH,GAAK,WACL,KAAAglH,GAAK,SAIL,CAEUp4I,GAAAA,GAIR,MAAM,GAAE0yB,EAAE,GAAE4nF,EAAE,GAAE3nF,EAAE,GAAE2oF,EAAE,GAAE1oF,EAAE,GAAE4oF,EAAE,GAAE1oF,EAAE,GAAE8oF,EAAE,GAAE7oF,EAAE,GAAEipF,EAAE,GAAE/oF,EAAE,GAAEilH,EAAE,GAAE/kH,EAAE,GAAEglH,EAAE,GAAE/kH,EAAE,GAAEglH,GAAOr/I,KAC3E,MAAO,CAAC25B,EAAI4nF,EAAI3nF,EAAI2oF,EAAI1oF,EAAI4oF,EAAI1oF,EAAI8oF,EAAI7oF,EAAIipF,EAAI/oF,EAAIilH,EAAI/kH,EAAIglH,EAAI/kH,EAAIglH,EACtE,CAEUtxI,GAAAA,CACR4rB,EAAY4nF,EAAY3nF,EAAY2oF,EAAY1oF,EAAY4oF,EAAY1oF,EAAY8oF,EACpF7oF,EAAYipF,EAAY/oF,EAAYilH,EAAY/kH,EAAYglH,EAAY/kH,EAAYglH,GAEpFr/I,KAAK25B,GAAU,EAALA,EACV35B,KAAKuhH,GAAU,EAALA,EACVvhH,KAAK45B,GAAU,EAALA,EACV55B,KAAKuiH,GAAU,EAALA,EACVviH,KAAK65B,GAAU,EAALA,EACV75B,KAAKyiH,GAAU,EAALA,EACVziH,KAAK+5B,GAAU,EAALA,EACV/5B,KAAK6iH,GAAU,EAALA,EACV7iH,KAAKg6B,GAAU,EAALA,EACVh6B,KAAKijH,GAAU,EAALA,EACVjjH,KAAKk6B,GAAU,EAALA,EACVl6B,KAAKm/I,GAAU,EAALA,EACVn/I,KAAKo6B,GAAU,EAALA,EACVp6B,KAAKo/I,GAAU,EAALA,EACVp/I,KAAKq6B,GAAU,EAALA,EACVr6B,KAAKq/I,GAAU,EAALA,CACZ,CACU3mJ,OAAAA,CAAQ4oB,EAAgB4I,GAEhC,IAAK,IAAIr1B,EAAI,EAAGA,EAAI,GAAIA,IAAKq1B,GAAU,EACrC80H,GAAWnqJ,GAAKysB,EAAKo9H,UAAUx0H,GAC/B+0H,GAAWpqJ,GAAKysB,EAAKo9H,UAAWx0H,GAAU,GAE5C,IAAK,IAAIr1B,EAAI,GAAIA,EAAI,GAAIA,IAAK,CAE5B,MAAMyqJ,EAA4B,EAArBN,GAAWnqJ,EAAI,IACtB0qJ,EAA4B,EAArBN,GAAWpqJ,EAAI,IACtB2qJ,EAAM59B,GAAAA,OAAW09B,EAAMC,EAAM,GAAK39B,GAAAA,OAAW09B,EAAMC,EAAM,GAAK39B,GAAAA,MAAU09B,EAAMC,EAAM,GACpFE,EAAM79B,GAAAA,OAAW09B,EAAMC,EAAM,GAAK39B,GAAAA,OAAW09B,EAAMC,EAAM,GAAK39B,GAAAA,MAAU09B,EAAMC,EAAM,GAEpFG,EAA0B,EAApBV,GAAWnqJ,EAAI,GACrB8qJ,EAA0B,EAApBV,GAAWpqJ,EAAI,GACrB+qJ,EAAMh+B,GAAAA,OAAW89B,EAAKC,EAAK,IAAM/9B,GAAAA,OAAW89B,EAAKC,EAAK,IAAM/9B,GAAAA,MAAU89B,EAAKC,EAAK,GAChFE,EAAMj+B,GAAAA,OAAW89B,EAAKC,EAAK,IAAM/9B,GAAAA,OAAW89B,EAAKC,EAAK,IAAM/9B,GAAAA,MAAU89B,EAAKC,EAAK,GAEhFG,EAAOl+B,GAAAA,MAAU69B,EAAKI,EAAKZ,GAAWpqJ,EAAI,GAAIoqJ,GAAWpqJ,EAAI,KAC7DkrJ,EAAOn+B,GAAAA,MAAUk+B,EAAMN,EAAKI,EAAKZ,GAAWnqJ,EAAI,GAAImqJ,GAAWnqJ,EAAI,KACzEmqJ,GAAWnqJ,GAAY,EAAPkrJ,EAChBd,GAAWpqJ,GAAY,EAAPirJ,C,CAElB,IAAI,GAAEnmH,EAAE,GAAE4nF,EAAE,GAAE3nF,EAAE,GAAE2oF,EAAE,GAAE1oF,EAAE,GAAE4oF,EAAE,GAAE1oF,EAAE,GAAE8oF,EAAE,GAAE7oF,EAAE,GAAEipF,EAAE,GAAE/oF,EAAE,GAAEilH,EAAE,GAAE/kH,EAAE,GAAEglH,EAAE,GAAE/kH,EAAE,GAAEglH,GAAOr/I,KAEzE,IAAK,IAAInL,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAE3B,MAAMmrJ,EAAUp+B,GAAAA,OAAW5nF,EAAIipF,EAAI,IAAMrB,GAAAA,OAAW5nF,EAAIipF,EAAI,IAAMrB,GAAAA,OAAW5nF,EAAIipF,EAAI,IAC/Eg9B,EAAUr+B,GAAAA,OAAW5nF,EAAIipF,EAAI,IAAMrB,GAAAA,OAAW5nF,EAAIipF,EAAI,IAAMrB,GAAAA,OAAW5nF,EAAIipF,EAAI,IAE/Ei9B,EAAQlmH,EAAKE,GAAQF,EAAKI,EAC1B+lH,EAAQl9B,EAAKk8B,GAAQl8B,EAAKm8B,EAG1BgB,EAAOx+B,GAAAA,MAAUy9B,EAAIY,EAASE,EAAMpB,GAAUlqJ,GAAIoqJ,GAAWpqJ,IAC7DwrJ,EAAMz+B,GAAAA,MAAUw+B,EAAM/lH,EAAI2lH,EAASE,EAAMpB,GAAUjqJ,GAAImqJ,GAAWnqJ,IAClEyrJ,EAAa,EAAPF,EAENG,EAAU3+B,GAAAA,OAAWjoF,EAAI4nF,EAAI,IAAMK,GAAAA,OAAWjoF,EAAI4nF,EAAI,IAAMK,GAAAA,OAAWjoF,EAAI4nF,EAAI,IAC/Ei/B,EAAU5+B,GAAAA,OAAWjoF,EAAI4nF,EAAI,IAAMK,GAAAA,OAAWjoF,EAAI4nF,EAAI,IAAMK,GAAAA,OAAWjoF,EAAI4nF,EAAI,IAC/Ek/B,EAAQ9mH,EAAKC,EAAOD,EAAKE,EAAOD,EAAKC,EACrC6mH,EAAQn/B,EAAKgB,EAAOhB,EAAKkB,EAAOF,EAAKE,EAC3CpoF,EAAU,EAALD,EACLilH,EAAU,EAALD,EACLhlH,EAAU,EAALF,EACLklH,EAAU,EAALD,EACLjlH,EAAU,EAALF,EACLmlH,EAAU,EAALl8B,IACFnrH,EAAGkiC,EAAIpjC,EAAGqsH,GAAOrB,GAAAA,IAAa,EAAL7nF,EAAa,EAAL8oF,EAAc,EAANw9B,EAAe,EAANC,IACrDvmH,EAAU,EAALF,EACLgpF,EAAU,EAALJ,EACL5oF,EAAU,EAALD,EACL6oF,EAAU,EAALF,EACL3oF,EAAU,EAALD,EACL4oF,EAAU,EAALhB,EACL,MAAMo/B,EAAM/+B,GAAAA,MAAU0+B,EAAKE,EAASE,GACpC/mH,EAAKioF,GAAAA,MAAU++B,EAAKN,EAAKE,EAASE,GAClCl/B,EAAW,EAANo/B,C,GAGJ7oJ,EAAG6hC,EAAI/iC,EAAG2qH,GAAOK,GAAAA,IAAkB,EAAV5hH,KAAK25B,GAAkB,EAAV35B,KAAKuhH,GAAa,EAAL5nF,EAAa,EAAL4nF,MAC3DzpH,EAAG8hC,EAAIhjC,EAAG2rH,GAAOX,GAAAA,IAAkB,EAAV5hH,KAAK45B,GAAkB,EAAV55B,KAAKuiH,GAAa,EAAL3oF,EAAa,EAAL2oF,MAC3DzqH,EAAG+hC,EAAIjjC,EAAG6rH,GAAOb,GAAAA,IAAkB,EAAV5hH,KAAK65B,GAAkB,EAAV75B,KAAKyiH,GAAa,EAAL5oF,EAAa,EAAL4oF,MAC3D3qH,EAAGiiC,EAAInjC,EAAGisH,GAAOjB,GAAAA,IAAkB,EAAV5hH,KAAK+5B,GAAkB,EAAV/5B,KAAK6iH,GAAa,EAAL9oF,EAAa,EAAL8oF,MAC3D/qH,EAAGkiC,EAAIpjC,EAAGqsH,GAAOrB,GAAAA,IAAkB,EAAV5hH,KAAKg6B,GAAkB,EAAVh6B,KAAKijH,GAAa,EAALjpF,EAAa,EAALipF,MAC3DnrH,EAAGoiC,EAAItjC,EAAGuoJ,GAAOv9B,GAAAA,IAAkB,EAAV5hH,KAAKk6B,GAAkB,EAAVl6B,KAAKm/I,GAAa,EAALjlH,EAAa,EAALilH,MAC3DrnJ,EAAGsiC,EAAIxjC,EAAGwoJ,GAAOx9B,GAAAA,IAAkB,EAAV5hH,KAAKo6B,GAAkB,EAAVp6B,KAAKo/I,GAAa,EAALhlH,EAAa,EAALglH,MAC3DtnJ,EAAGuiC,EAAIzjC,EAAGyoJ,GAAOz9B,GAAAA,IAAkB,EAAV5hH,KAAKq6B,GAAkB,EAAVr6B,KAAKq/I,GAAa,EAALhlH,EAAa,EAALglH,IAC9Dr/I,KAAK+N,IAAI4rB,EAAI4nF,EAAI3nF,EAAI2oF,EAAI1oF,EAAI4oF,EAAI1oF,EAAI8oF,EAAI7oF,EAAIipF,EAAI/oF,EAAIilH,EAAI/kH,EAAIglH,EAAI/kH,EAAIglH,EACvE,CACUxB,UAAAA,GACRmB,GAAWxnC,KAAK,GAChBynC,GAAWznC,KAAK,EAClB,CACAv6E,OAAAA,GACEj9B,KAAKqH,OAAOmwG,KAAK,GACjBx3G,KAAK+N,IAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxD,EA8EK,MAAM4pC,GAAyB+rE,GAAgB,IAAM,IAAIw7B,ICzNhE,MAAM0B,GAPN,WACE,GAAoB,qBAATpkJ,KAAwB,OAAOA,KAC1C,GAAsB,qBAAXkK,OAA0B,OAAOA,OAC5C,GAAsB,qBAAX+8C,OAA0B,OAAOA,OAC5C,MAAM,IAAIzzD,MAAM,iCAClB,CAEkB6wJ,GACED,GAAUxmJ,QAAUwmJ,GAAUvmJ,SAQ5C,SAAUymJ,GAAWC,GACvB,OAAQA,GACJ,IAAK,SAAU,OAAOnvG,GAAOx8C,SAC7B,IAAK,SAAU,OAAOuiD,GAAOviD,SAEjCilH,IAAe,EAAO,iCAAkC,YAAa0mC,EACzE,CCjCA,MAAMC,GAAU,SAASrkJ,GACrB,OAAOmkJ,GAAW,UAAU9sJ,OAAO2I,GAAMtH,QAC7C,EAEM4rJ,GAAU,SAAStkJ,GACrB,OAAOmkJ,GAAW,UAAU9sJ,OAAO2I,GAAMtH,QAC7C,EAEA,IAAI6rJ,GAA4CF,GAC5CG,GAA4CF,GAE5CG,IAAY,EAAOC,IAAY,EAoB7B,SAAUzvG,GAAOitE,GACnB,MAAMliH,EAAO5L,GAAS8tH,EAAO,QAC7B,OAAOzD,GAAQ8lC,GAASvkJ,GAC5B,CA0BM,SAAUg7C,GAAOknE,GACnB,MAAMliH,EAAO5L,GAAS8tH,EAAO,QAC7B,OAAOzD,GAAQ+lC,GAASxkJ,GAC5B,CA5BAi1C,GAAO6mD,EAAIuoD,GACXpvG,GAAO5rC,KAAO,WAAmBo7I,IAAY,CAAM,EACnDxvG,GAAO40E,SAAW,SAASp+D,GACvB,GAAIg5F,GAAa,MAAM,IAAIpxJ,MAAM,oBACjCkxJ,GAAW94F,CACf,EACAtxD,OAAOo7G,OAAOtgE,IAuBd+F,GAAO8gD,EAAIwoD,GACXtpG,GAAO3xC,KAAO,WAAmBq7I,IAAY,CAAM,EACnD1pG,GAAO6uE,SAAW,SAASp+D,GACvB,GAAIi5F,GAAa,MAAM,IAAIrxJ,MAAM,oBACjCmxJ,GAAW/4F,CACf,EACAtxD,OAAOo7G,OAAOtgE,ICxEFgoE,OAAO,GAAnB,MACMsK,GAAMtK,OAAO,GACbuK,GAAMvK,OAAO,GACbsJ,GAAOzrH,GAA4BA,aAAaurD,WAWhDs+F,GAAwBhoJ,MAAMw7E,KAAK,CAAE3gF,OAAQ,KAAO,CAACskG,EAAG5jG,IAC5DA,EAAEmH,SAAS,IAAIi7I,SAAS,EAAG,MAKvB,SAAUthG,GAAW/5C,GACzB,IAAKsnH,GAAItnH,GAAQ,MAAM,IAAI5L,MAAM,uBAEjC,IAAIwZ,EAAM,GACV,IAAK,IAAI3U,EAAI,EAAGA,EAAI+G,EAAMzH,OAAQU,IAChC2U,GAAO83I,GAAM1lJ,EAAM/G,IAErB,OAAO2U,CACT,CAOM,SAAU+3I,GAAY/3I,GAC1B,GAAmB,kBAARA,EAAkB,MAAM,IAAIxZ,MAAM,mCAAqCwZ,GAElF,OAAOowG,OAAe,KAARpwG,EAAa,IAAM,KAAHvH,OAAQuH,GACxC,CAKM,SAAUjC,GAAWiC,GACzB,GAAmB,kBAARA,EAAkB,MAAM,IAAIxZ,MAAM,mCAAqCwZ,GAClF,MAAM9U,EAAM8U,EAAIrV,OAChB,GAAIO,EAAM,EAAG,MAAM,IAAI1E,MAAM,0DAA4D0E,GACzF,MAAM81G,EAAQ,IAAIxnD,WAAWtuD,EAAM,GACnC,IAAK,IAAIG,EAAI,EAAGA,EAAI21G,EAAMr2G,OAAQU,IAAK,CACrC,MAAMmJ,EAAQ,EAAJnJ,EACJ2sJ,EAAUh4I,EAAIhJ,MAAMxC,EAAGA,EAAI,GAC3ByjJ,EAAOpwD,OAAOnyC,SAASsiG,EAAS,IACtC,GAAInwD,OAAO1lF,MAAM81I,IAASA,EAAO,EAAG,MAAM,IAAIzxJ,MAAM,yBACpDw6G,EAAM31G,GAAK4sJ,C,CAEb,OAAOj3C,CACT,CAGM,SAAUk3C,GAAgB9lJ,GAC9B,OAAO2lJ,GAAY5rG,GAAW/5C,GAChC,CACM,SAAU+lJ,GAAgB/lJ,GAC9B,IAAKsnH,GAAItnH,GAAQ,MAAM,IAAI5L,MAAM,uBACjC,OAAOuxJ,GAAY5rG,GAAWqN,WAAW8xB,KAAKl5E,GAAOm5E,WACvD,CAEM,SAAU6sE,GAAgB3qJ,EAAoBvC,GAClD,OAAO6S,GAAWtQ,EAAE+E,SAAS,IAAIi7I,SAAe,EAANviJ,EAAS,KACrD,CACM,SAAUmtJ,GAAgB5qJ,EAAoBvC,GAClD,OAAOktJ,GAAgB3qJ,EAAGvC,GAAKqgF,SACjC,CAeM,SAAU+sE,GAAYz2C,EAAe7hG,EAAU6tE,GACnD,IAAIr6B,EACJ,GAAmB,kBAARxzC,EACT,IACEwzC,EAAMz1C,GAAWiC,E,CACjB,MAAO3R,IACP,MAAM,IAAI7H,MAAM,GAADiS,OAAIopG,EAAK,oCAAAppG,OAAmCuH,EAAG,cAAAvH,OAAapK,I,KAExE,KAAIqrH,GAAI15G,GAKb,MAAM,IAAIxZ,MAAM,GAADiS,OAAIopG,EAAK,sCAFxBruD,EAAMgG,WAAW8xB,KAAKtrE,E,CAIxB,MAAM9U,EAAMsoD,EAAI7oD,OAChB,GAA8B,kBAAnBkjF,GAA+B3iF,IAAQ2iF,EAChD,MAAM,IAAIrnF,MAAM,GAADiS,OAAIopG,EAAK,cAAAppG,OAAao1E,EAAc,gBAAAp1E,OAAevN,IACpE,OAAOsoD,CACT,CAKM,SAAU+kG,KAAmC,QAAAnkC,EAAAl4G,UAAAvR,OAApB6tJ,EAAoB,IAAA1oJ,MAAAskH,GAAAzjC,EAAA,EAAAA,EAAAyjC,EAAAzjC,IAApB6nE,EAAoB7nE,GAAAz0E,UAAAy0E,GACjD,MAAM7jD,EAAI,IAAI0sB,WAAWg/F,EAAOl3F,OAAO,CAACm3F,EAAKxqJ,IAAMwqJ,EAAMxqJ,EAAEtD,OAAQ,IACnE,IAAI6K,EAAM,EAMV,OALAgjJ,EAAO32I,QAAS5T,IACd,IAAKyrH,GAAIzrH,GAAI,MAAM,IAAIzH,MAAM,uBAC7BsmC,EAAEvoB,IAAItW,EAAGuH,GACTA,GAAOvH,EAAEtD,SAEJmiC,CACT,CA6CO,MAQM4rH,GAAWjrJ,IAAektH,IAAOvK,OAAO3iH,EAAI,IAAMitH,GAIzDi+B,GAAOxlJ,GAAe,IAAIqmD,WAAWrmD,GACrCylJ,GAAQ9nJ,GAAa0oD,WAAW8xB,KAAKx6E,GASrC,SAAU+nJ,GACdC,EACAC,EACAC,GAEA,GAAuB,kBAAZF,GAAwBA,EAAU,EAAG,MAAM,IAAItyJ,MAAM,4BAChE,GAAwB,kBAAbuyJ,GAAyBA,EAAW,EAAG,MAAM,IAAIvyJ,MAAM,6BAClE,GAAsB,oBAAXwyJ,EAAuB,MAAM,IAAIxyJ,MAAM,6BAElD,IAAI4a,EAAIu3I,GAAIG,GACR7rJ,EAAI0rJ,GAAIG,GACRztJ,EAAI,EACR,MAAMg+E,EAAQA,KACZjoE,EAAE4sG,KAAK,GACP/gH,EAAE+gH,KAAK,GACP3iH,EAAI,GAEAiD,EAAI,mBAAAsmH,EAAA14G,UAAAvR,OAAIwD,EAAe,IAAA2B,MAAA8kH,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAf1mH,EAAe0mH,GAAA34G,UAAA24G,GAAA,OAAKmkC,EAAO/rJ,EAAGmU,KAAMjT,EAAE,EAC9C8qJ,EAAS,WAAiB,IAAhB1pJ,EAAI2M,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAGy8I,KAErB1rJ,EAAIqB,EAAEsqJ,GAAK,CAAC,IAAQrpJ,GACpB6R,EAAI9S,IACgB,IAAhBiB,EAAK5E,SACTsC,EAAIqB,EAAEsqJ,GAAK,CAAC,IAAQrpJ,GACpB6R,EAAI9S,IACN,EACMouH,EAAMA,KAEV,GAAIrxH,KAAO,IAAM,MAAM,IAAI7E,MAAM,2BACjC,IAAI0E,EAAM,EACV,MAAMiO,EAAoB,GAC1B,KAAOjO,EAAM6tJ,GAAU,CACrB33I,EAAI9S,IACJ,MAAM02C,EAAK5jC,EAAEpK,QACbmC,EAAIrE,KAAKkwC,GACT95C,GAAOkW,EAAEzW,M,CAEX,OAAO4tJ,MAAep/I,IAUxB,MARiB+/I,CAAC3pJ,EAAkB4pJ,KAGlC,IAAI3lG,EACJ,IAHA61B,IACA4vE,EAAO1pJ,KAEEikD,EAAM2lG,EAAKz8B,OAASu8B,IAE7B,OADA5vE,IACO71B,EAGX,CAIA,MAAM4lG,GAAe,CACnBC,OAASlkJ,GAA4B,kBAARA,EAC7BmkJ,SAAWnkJ,GAA4B,oBAARA,EAC/BokJ,QAAUpkJ,GAA4B,mBAARA,EAC9Bs5G,OAASt5G,GAA4B,kBAARA,EAC7BqkJ,mBAAqBrkJ,GAA4B,kBAARA,GAAoBA,aAAeqkD,WAC5E69D,cAAgBliH,GAAa0yF,OAAOwvB,cAAcliH,GAClD6rG,MAAQ7rG,GAAarF,MAAMiG,QAAQZ,GACnCk6F,MAAOA,CAACl6F,EAAUujG,IAAiBA,EAAe+gD,GAAGjmB,QAAQr+H,GAC7D02C,KAAO12C,GAA4B,oBAARA,GAAsB0yF,OAAOwvB,cAAcliH,EAAImiH,YAMtE,SAAUoiC,GACdhhD,EACAihD,GAC6B,IAA7BC,EAAA19I,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAA2B,CAAC,EAE5B,MAAM29I,EAAaA,CAACC,EAAoBvzJ,EAAiB0mG,KACvD,MAAM8sD,EAAWX,GAAa7yJ,GAC9B,GAAwB,oBAAbwzJ,EACT,MAAM,IAAIvzJ,MAAM,sBAADiS,OAAuBlS,EAAI,yBAE5C,MAAM4O,EAAMujG,EAAOohD,GACnB,KAAI7sD,QAAsBx8C,IAARt7C,KACb4kJ,EAAS5kJ,EAAKujG,GACjB,MAAM,IAAIlyG,MAAM,iBAADiS,OACI7F,OAAOknJ,GAAU,KAAArhJ,OAAItD,EAAG,MAAAsD,cAAYtD,EAAG,gBAAAsD,OAAelS,KAI7E,IAAK,MAAOuzJ,EAAWvzJ,KAAS+G,OAAO23G,QAAQ00C,GAAaE,EAAWC,EAAWvzJ,GAAO,GACzF,IAAK,MAAOuzJ,EAAWvzJ,KAAS+G,OAAO23G,QAAQ20C,GAAgBC,EAAWC,EAAWvzJ,GAAO,GAC5F,OAAOmyG,CACT,CC7QA,MAAM+hB,GAAMrK,OAAO,GAAIsK,GAAMtK,OAAO,GAAIuK,GAAMvK,OAAO,GAAI4pC,GAAM5pC,OAAO,GAEhE6pC,GAAM7pC,OAAO,GAAI8pC,GAAM9pC,OAAO,GAAI+pC,GAAM/pC,OAAO,GAEzCA,OAAO,GAAWA,OAAO,IAG/B,SAAUhkE,GAAIn+C,EAAWE,GAC7B,MAAMoiD,EAAStiD,EAAIE,EACnB,OAAOoiD,GAAUkqE,GAAMlqE,EAASpiD,EAAIoiD,CACtC,CAQM,SAAUr3C,GAAI5C,EAAa8jJ,EAAeC,GAC9C,GAAIA,GAAU5/B,IAAO2/B,EAAQ3/B,GAAK,MAAM,IAAIj0H,MAAM,6BAClD,GAAI6zJ,IAAW3/B,GAAK,OAAOD,GAC3B,IAAIjnE,EAAMknE,GACV,KAAO0/B,EAAQ3/B,IACT2/B,EAAQ1/B,KAAKlnE,EAAOA,EAAMl9C,EAAO+jJ,GACrC/jJ,EAAOA,EAAMA,EAAO+jJ,EACpBD,IAAU1/B,GAEZ,OAAOlnE,CACT,CAGM,SAAU8mG,GAAK3nJ,EAAWynJ,EAAeC,GAC7C,IAAI7mG,EAAM7gD,EACV,KAAOynJ,KAAU3/B,IACfjnE,GAAOA,EACPA,GAAO6mG,EAET,OAAO7mG,CACT,CAGM,SAAU+mG,GAAOn8H,EAAgBi8H,GACrC,GAAIj8H,IAAWq8F,IAAO4/B,GAAU5/B,GAC9B,MAAM,IAAIj0H,MAAM,6CAADiS,OAA8C2lB,EAAM,SAAA3lB,OAAQ4hJ,IAI7E,IAAIpsJ,EAAIm+C,GAAIhuB,EAAQi8H,GAChBlsJ,EAAIksJ,EAEJ1nJ,EAAI8nH,GAAK1hH,EAAI2hH,GAAKp1F,EAAIo1F,GAAKt5G,EAAIq5G,GACnC,KAAOxsH,IAAMwsH,IAAK,CAEhB,MAAMzsH,EAAIG,EAAIF,EACR6+B,EAAI3+B,EAAIF,EACRZ,EAAIsF,EAAI2yB,EAAIt3B,EACZP,EAAIsL,EAAIqI,EAAIpT,EAElBG,EAAIF,EAAGA,EAAI6+B,EAAGn6B,EAAI2yB,EAAGvsB,EAAIqI,EAAGkkB,EAAIj4B,EAAG+T,EAAI3T,C,CAGzC,GADYU,IACAusH,GAAK,MAAM,IAAIl0H,MAAM,0BACjC,OAAO4lD,GAAIz5C,EAAG0nJ,EAChB,CAkEM,SAAUG,GAAOnpH,GAMrB,GAAIA,EAAI4oH,KAAQD,GAAK,CAKnB,MAAMS,GAAUppH,EAAIqpF,IAAOu/B,GAC3B,OAAO,SAAsBR,EAAehsJ,GAC1C,MAAM20G,EAAOq3C,EAAGvgJ,IAAIzL,EAAGgtJ,GAEvB,IAAKhB,EAAGiB,IAAIjB,EAAGkB,IAAIv4C,GAAO30G,GAAI,MAAM,IAAIjH,MAAM,2BAC9C,OAAO47G,CACT,C,CAIF,GAAI/wE,EAAI8oH,KAAQD,GAAK,CACnB,MAAMU,GAAMvpH,EAAI6oH,IAAOC,GACvB,OAAO,SAAsBV,EAAehsJ,GAC1C,MAAMotJ,EAAKpB,EAAGqB,IAAIrtJ,EAAGktH,IACfv5G,EAAIq4I,EAAGvgJ,IAAI2hJ,EAAID,GACfG,EAAKtB,EAAGqB,IAAIrtJ,EAAG2T,GACf/V,EAAIouJ,EAAGqB,IAAIrB,EAAGqB,IAAIC,EAAIpgC,IAAMv5G,GAC5BghG,EAAOq3C,EAAGqB,IAAIC,EAAItB,EAAG9+E,IAAItvE,EAAGouJ,EAAGntG,MACrC,IAAKmtG,EAAGiB,IAAIjB,EAAGkB,IAAIv4C,GAAO30G,GAAI,MAAM,IAAIjH,MAAM,2BAC9C,OAAO47G,CACT,C,CA2BF,OAlHI,SAAwB/wE,GAM5B,MAAM2pH,GAAa3pH,EAAIqpF,IAAOC,GAE9B,IAAI1nF,EAAW6I,EAAW4D,EAG1B,IAAKzM,EAAI5B,EAAIqpF,GAAK5+E,EAAI,EAAG7I,EAAI0nF,KAAQF,GAAKxnF,GAAK0nF,GAAK7+E,KAGpD,IAAK4D,EAAIi7E,GAAKj7E,EAAIrO,GAAKn4B,GAAIwmC,EAAGs7G,EAAW3pH,KAAOA,EAAIqpF,GAAKh7E,KAGzD,GAAU,IAAN5D,EAAS,CACX,MAAM2+G,GAAUppH,EAAIqpF,IAAOu/B,GAC3B,OAAO,SAAwBR,EAAehsJ,GAC5C,MAAM20G,EAAOq3C,EAAGvgJ,IAAIzL,EAAGgtJ,GACvB,IAAKhB,EAAGiB,IAAIjB,EAAGkB,IAAIv4C,GAAO30G,GAAI,MAAM,IAAIjH,MAAM,2BAC9C,OAAO47G,CACT,C,CAIF,MAAM64C,GAAUhoH,EAAIynF,IAAOC,GAC3B,OAAO,SAAwB8+B,EAAehsJ,GAE5C,GAAIgsJ,EAAGvgJ,IAAIzL,EAAGutJ,KAAevB,EAAGyB,IAAIzB,EAAGntG,KAAM,MAAM,IAAI9lD,MAAM,2BAC7D,IAAIsmC,EAAIgP,EAEJ5tC,EAAIurJ,EAAGvgJ,IAAIugJ,EAAGqB,IAAIrB,EAAGntG,IAAK5M,GAAIzM,GAC9BtgC,EAAI8mJ,EAAGvgJ,IAAIzL,EAAGwtJ,GACd9sJ,EAAIsrJ,EAAGvgJ,IAAIzL,EAAGwlC,GAElB,MAAQwmH,EAAGiB,IAAIvsJ,EAAGsrJ,EAAGntG,MAAM,CACzB,GAAImtG,EAAGiB,IAAIvsJ,EAAGsrJ,EAAG98D,MAAO,OAAO88D,EAAG98D,KAElC,IAAItvF,EAAI,EACR,IAAK,IAAI0rD,EAAK0gG,EAAGkB,IAAIxsJ,GAAId,EAAIy/B,IACvB2sH,EAAGiB,IAAI3hG,EAAI0gG,EAAGntG,KADYj/C,IAE9B0rD,EAAK0gG,EAAGkB,IAAI5hG,GAGd,MAAMp7B,EAAK87H,EAAGvgJ,IAAIhL,EAAGwsH,IAAOtK,OAAOtjF,EAAIz/B,EAAI,IAC3Ca,EAAIurJ,EAAGkB,IAAIh9H,GACXhrB,EAAI8mJ,EAAGqB,IAAInoJ,EAAGgrB,GACdxvB,EAAIsrJ,EAAGqB,IAAI3sJ,EAAGD,GACd4+B,EAAIz/B,C,CAEN,OAAOsF,CACT,CACF,CA4DSwoJ,CAAc9pH,EACvB,CAGO,MA6CD+pH,GAAe,CACnB,SAAU,UAAW,MAAO,MAAO,MAAO,OAAQ,MAClD,MAAO,MAAO,MAAO,MAAO,MAAO,MACnC,OAAQ,OAAQ,OAAQ,QA2EpB,SAAUC,GAAQ5tJ,EAAW6tJ,GAEjC,MAAMC,OAA6B9qG,IAAf6qG,EAA2BA,EAAa7tJ,EAAE+E,SAAS,GAAG7H,OAE1E,MAAO,CAAE2wJ,WAAYC,EAAaC,YADdxqJ,KAAKkD,KAAKqnJ,EAAc,GAE9C,CA8GM,SAAUE,GAAoBC,GAClC,GAA0B,kBAAfA,EAAyB,MAAM,IAAIl1J,MAAM,8BACpD,MAAM0lD,EAAYwvG,EAAWlpJ,SAAS,GAAG7H,OACzC,OAAOqG,KAAKkD,KAAKg4C,EAAY,EAC/B,CASM,SAAUyvG,GAAiBD,GAC/B,MAAM/wJ,EAAS8wJ,GAAoBC,GACnC,OAAO/wJ,EAASqG,KAAKkD,KAAKvJ,EAAS,EACrC,CCtcM,MAAOixJ,WAAgC5hC,GAQ3Cv0G,WAAAA,CAAYomC,EAAa8kC,GACvBokB,QAJM,KAAAz3B,UAAW,EACX,KAAAo6C,WAAY,EAIlBmkC,GAAWhwG,GACX,MAAM1kD,EAAM0yH,GAAQlpC,GAEpB,GADAn6E,KAAKslJ,MAAQjwG,EAAKjgD,SACe,oBAAtB4K,KAAKslJ,MAAMtxJ,OACpB,MAAM,IAAIhE,MAAM,uDAClBgQ,KAAK+gH,SAAW/gH,KAAKslJ,MAAMvkC,SAC3B/gH,KAAK8gH,UAAY9gH,KAAKslJ,MAAMxkC,UAC5B,MAAMC,EAAW/gH,KAAK+gH,SAChB/hH,EAAM,IAAIgkD,WAAW+9D,GAE3B/hH,EAAI+O,IAAIpd,EAAIwD,OAAS4sH,EAAW1rE,EAAKjgD,SAASpB,OAAOrD,GAAK0E,SAAW1E,GACrE,IAAK,IAAIkE,EAAI,EAAGA,EAAImK,EAAI7K,OAAQU,IAAKmK,EAAInK,IAAM,GAC/CmL,KAAKslJ,MAAMtxJ,OAAOgL,GAElBgB,KAAKulJ,MAAQlwG,EAAKjgD,SAElB,IAAK,IAAIP,EAAI,EAAGA,EAAImK,EAAI7K,OAAQU,IAAKmK,EAAInK,IAAM,IAC/CmL,KAAKulJ,MAAMvxJ,OAAOgL,GAClBA,EAAIw4G,KAAK,EACX,CACAxjH,MAAAA,CAAOsmD,GAGL,OAFAkrG,GAAaxlJ,MACbA,KAAKslJ,MAAMtxJ,OAAOsmD,GACXt6C,IACT,CACAimH,UAAAA,CAAWtjH,GACT6iJ,GAAaxlJ,MACbylJ,GAAY9iJ,EAAK3C,KAAK8gH,WACtB9gH,KAAK8mE,UAAW,EAChB9mE,KAAKslJ,MAAMr/B,WAAWtjH,GACtB3C,KAAKulJ,MAAMvxJ,OAAO2O,GAClB3C,KAAKulJ,MAAMt/B,WAAWtjH,GACtB3C,KAAKi9B,SACP,CACA5nC,MAAAA,GACE,MAAMsN,EAAM,IAAIqgD,WAAWhjD,KAAKulJ,MAAMzkC,WAEtC,OADA9gH,KAAKimH,WAAWtjH,GACTA,CACT,CACA8gH,UAAAA,CAAWrxB,GAETA,IAAAA,EAAOt7F,OAAO1B,OAAO0B,OAAO05F,eAAexwF,MAAO,CAAC,IACnD,MAAM,MAAEulJ,EAAK,MAAED,EAAK,SAAEx+E,EAAQ,UAAEo6C,EAAS,SAAEH,EAAQ,UAAED,GAAc9gH,KAQnE,OANAoyF,EAAGtrB,SAAWA,EACdsrB,EAAG8uB,UAAYA,EACf9uB,EAAG2uB,SAAWA,EACd3uB,EAAG0uB,UAAYA,EACf1uB,EAAGmzD,MAAQA,EAAM9hC,WAAWrxB,EAAGmzD,OAC/BnzD,EAAGkzD,MAAQA,EAAM7hC,WAAWrxB,EAAGkzD,OACxBlzD,CACT,CACAn1D,OAAAA,GACEj9B,KAAKkhH,WAAY,EACjBlhH,KAAKulJ,MAAMtoH,UACXj9B,KAAKslJ,MAAMroH,SACb,EASK,MAAM9nC,GAAOA,CAACkgD,EAAa1kD,EAAYiU,IAC5C,IAAIwgJ,GAAU/vG,EAAM1kD,GAAKqD,OAAO4Q,GAASvP,SAC3CF,GAAKC,OAAS,CAACigD,EAAa1kD,IAAe,IAAIy0J,GAAU/vG,EAAM1kD,GC5E/D,MAAMszH,GAAMrK,OAAO,GACbsK,GAAMtK,OAAO,GAgLb,SAAU8rC,GAAqBC,GAgBnC,OFmEOzC,GElFOyC,EAAM1C,GF8EP2B,GAAa95F,OAAO,CAACK,EAAKxsD,KACrCwsD,EAAIxsD,GAAO,WACJwsD,GARO,CACdy6F,MAAO,SACPhQ,KAAM,SACNiQ,MAAO,gBACPC,KAAM,mBE3ER5C,GACEyC,EACA,CACE1uJ,EAAG,SACHa,EAAG,SACHiuJ,GAAI,QACJC,GAAI,SAEN,CACElB,WAAY,gBACZE,YAAa,kBAIVluJ,OAAOo7G,OAAMzf,EAAAA,EAAAA,EAAC,CAAC,EACjBoyD,GAAQc,EAAM1uJ,EAAG0uJ,EAAMb,aACvBa,GACA,CAAEvuJ,EAAGuuJ,EAAM1C,GAAG2C,QAErB,CCtEA,MAAQlE,GAAiBuE,GAAK1+I,GAAY2+I,IAAQC,EACrCC,GAAM,CAEjBC,IAAK,cAAqBr2J,MACxBif,WAAAA,GACEsvF,MADW74F,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,GAEhB,GAEF4gJ,SAAAA,CAAU3pJ,GACR,MAAQ0pJ,IAAKt0H,GAAMq0H,GACnB,GAAIzpJ,EAAKxI,OAAS,GAAiB,IAAZwI,EAAK,GAAa,MAAM,IAAIo1B,EAAE,iCACrD,MAAMr9B,EAAMiI,EAAK,GACXqgD,EAAMrgD,EAAKwqD,SAAS,EAAGzyD,EAAM,GACnC,IAAKA,GAAOsoD,EAAI7oD,SAAWO,EAAK,MAAM,IAAIq9B,EAAE,2CAK5C,GAAa,IAATirB,EAAI,GAAiB,MAAM,IAAIjrB,EAAE,uCACrC,GAAe,IAAXirB,EAAI,MAA0B,IAATA,EAAI,IAC3B,MAAM,IAAIjrB,EAAE,uDACd,MAAO,CAAEn6B,EAAGquJ,GAAIjpG,GAAMpmD,EAAG+F,EAAKwqD,SAASzyD,EAAM,GAC/C,EACA6xJ,KAAAA,CAAM/8I,GAEJ,MAAQ68I,IAAKt0H,GAAMq0H,GACbzpJ,EAAsB,kBAAR6M,EAAmB08I,GAAI18I,GAAOA,EAClD,KAAM7M,aAAgBqmD,YAAa,MAAM,IAAIhzD,MAAM,iBACnD,IAAI4G,EAAI+F,EAAKxI,OACb,GAAIyC,EAAI,GAAgB,IAAX+F,EAAK,GAAY,MAAM,IAAIo1B,EAAE,yBAC1C,GAAIp1B,EAAK,KAAO/F,EAAI,EAAG,MAAM,IAAIm7B,EAAE,uCACnC,MAAQn6B,EAAG0+B,EAAG1/B,EAAG4vJ,GAAWJ,GAAIE,UAAU3pJ,EAAKwqD,SAAS,KAChDvvD,EAAG7E,EAAG6D,EAAG6vJ,GAAeL,GAAIE,UAAUE,GAC9C,GAAIC,EAAWtyJ,OAAQ,MAAM,IAAI49B,EAAE,+CACnC,MAAO,CAAEuE,IAAGvjC,IACd,EACA2zJ,UAAAA,CAAWj7D,GAET,MAAMjrF,EAASzN,GAAmD,EAA5Bs+F,OAAOnyC,SAASnsD,EAAE,GAAI,IAAe,KAAOA,EAAIA,EAChF+E,EAAKgI,IACT,MAAM0J,EAAM1J,EAAI9D,SAAS,IACzB,OAAoB,EAAbwN,EAAIrV,OAAa,IAAH8N,OAAOuH,GAAQA,GAEhCzW,EAAIyN,EAAM1I,EAAE2zF,EAAI14F,IAChBujC,EAAI91B,EAAM1I,EAAE2zF,EAAIn1D,IAChBqwH,EAAM5zJ,EAAEoB,OAAS,EACjByyJ,EAAMtwH,EAAEniC,OAAS,EACjBq6C,EAAK12C,EAAE6uJ,GACP54G,EAAKj2C,EAAE8uJ,GACb,MAAO,KAAP3kJ,OAAYnK,EAAE8uJ,EAAMD,EAAM,GAAE,MAAA1kJ,OAAK8rC,GAAE9rC,OAAGq0B,EAAC,MAAAr0B,OAAKusC,GAAEvsC,OAAGlP,EACnD,GAKIkxH,GAAMrK,OAAO,GAAIsK,GAAMtK,OAAO,GAAqB4pC,IAAX5pC,OAAO,GAAUA,OAAO,IAAUA,OAAO,GAEjF,SAAUitC,GAAqBhqE,GACnC,MAAMiqE,EApGR,SAA8BnB,GAC5B,MAAM9oE,EAAO6oE,GAAcC,GAC3BQ,GACEtpE,EACA,CACEplF,EAAG,QACHE,EAAG,SAEL,CACEovJ,yBAA0B,QAC1BC,eAAgB,UAChBC,cAAe,WACfC,cAAe,WACfC,mBAAoB,UACpBC,UAAW,WACX/jC,QAAS,aAGb,MAAM,KAAEgkC,EAAI,GAAEpE,EAAE,EAAExrJ,GAAMolF,EACxB,GAAIwqE,EAAM,CACR,IAAKpE,EAAGiB,IAAIzsJ,EAAGwrJ,EAAG98D,MAChB,MAAM,IAAIn2F,MAAM,qEAElB,GACkB,kBAATq3J,GACc,kBAAdA,EAAKC,MACgB,oBAArBD,EAAKE,YAEZ,MAAM,IAAIv3J,MAAM,oE,CAGpB,OAAO8G,OAAOo7G,OAAMzf,EAAC,CAAC,EAAI5V,GAC5B,CAoEgB2qE,CAAkB3qE,IAC1B,GAAEomE,GAAO6D,EAETzjC,EACJyjC,EAAMzjC,SAAO,EACXokC,EAAwBC,EAAyBC,KACjD,MAAMlwJ,EAAIiwJ,EAAME,WAChB,OAAOzB,GAAenjG,WAAW8xB,KAAK,CAAC,IAAQmuE,EAAG5/B,QAAQ5rH,EAAE0E,GAAI8mJ,EAAG5/B,QAAQ5rH,EAAE8K,GAC9E,GACG6kJ,EACJN,EAAMM,WAAS,CACbxrJ,IAEA,MAAMspC,EAAOtpC,EAAMurD,SAAS,GAI5B,MAAO,CAAEhrD,EAFC8mJ,EAAGmE,UAAUliH,EAAKiiB,SAAS,EAAG87F,EAAG4C,QAE/BtjJ,EADF0gJ,EAAGmE,UAAUliH,EAAKiiB,SAAS87F,EAAG4C,MAAO,EAAI5C,EAAG4C,QAEvD,GAMH,SAASgC,EAAoB1rJ,GAC3B,MAAM,EAAE1E,EAAC,EAAEE,GAAMmvJ,EACXnuC,EAAKsqC,EAAGkB,IAAIhoJ,GACZ2rJ,EAAK7E,EAAGqB,IAAI3rC,EAAIx8G,GACtB,OAAO8mJ,EAAG74I,IAAI64I,EAAG74I,IAAI09I,EAAI7E,EAAGqB,IAAInoJ,EAAG1E,IAAKE,EAC1C,CAKA,IAAKsrJ,EAAGiB,IAAIjB,EAAGkB,IAAI2C,EAAMd,IAAK6B,EAAoBf,EAAMf,KACtD,MAAM,IAAI/1J,MAAM,+CAGlB,SAAS+3J,EAAmBjoJ,GAC1B,MAAsB,kBAARA,GAAoBmkH,GAAMnkH,GAAOA,EAAMgnJ,EAAM7vJ,CAC7D,CACA,SAAS+wJ,EAASloJ,GAChB,IAAKioJ,EAAmBjoJ,GAAM,MAAM,IAAI9P,MAAM,8CAChD,CAGA,SAASi4J,EAAuBt3J,GAC9B,MAAQo2J,yBAA0B1kJ,EAAO,YAAE2iJ,EAAW,eAAEgC,EAAc,EAAE/vJ,GAAM6vJ,EAC9E,GAAIzkJ,GAA0B,kBAAR1R,EAAkB,CAGtC,GAFIA,aAAeqyD,aAAYryD,EAAMw1J,GAAcx1J,IAEhC,kBAARA,IAAqB0R,EAAQ8L,SAASxd,EAAIwD,QAAS,MAAM,IAAInE,MAAM,eAC9EW,EAAMA,EAAIsmJ,SAAuB,EAAd+N,EAAiB,I,CAEtC,IAAIllJ,EACJ,IACEA,EACiB,kBAARnP,EACHA,EACAw1J,GAAmBrE,GAAY,cAAenxJ,EAAKq0J,G,CACzD,MAAO30J,GACP,MAAM,IAAIL,MAAM,uBAADiS,OAAwB+iJ,EAAW,+BAAA/iJ,cAAqCtR,G,CAIzF,OAFIq2J,IAAgBlnJ,EAAM81C,GAAQ91C,EAAK7I,IACvC+wJ,EAASloJ,GACFA,CACT,CAEA,MAAMooJ,EAAmB,IAAIjrI,IAC7B,SAASkrI,EAAe1a,GACtB,KAAMA,aAAiB2a,GAAQ,MAAM,IAAIp4J,MAAM,2BACjD,CAMA,MAAMo4J,EAIJn5I,WAAAA,CAAqBo5I,EAAgBC,EAAgBC,GACnD,GADmB,KAAAF,GAAAA,EAAgB,KAAAC,GAAAA,EAAgB,KAAAC,GAAAA,EACzC,MAANF,IAAepF,EAAGjmB,QAAQqrB,GAAK,MAAM,IAAIr4J,MAAM,cACnD,GAAU,MAANs4J,IAAerF,EAAGjmB,QAAQsrB,GAAK,MAAM,IAAIt4J,MAAM,cACnD,GAAU,MAANu4J,IAAetF,EAAGjmB,QAAQurB,GAAK,MAAM,IAAIv4J,MAAM,aACrD,CAIA,iBAAOw4J,CAAWpxJ,GAChB,MAAM,EAAE+E,EAAC,EAAEoG,GAAMnL,GAAK,CAAC,EACvB,IAAKA,IAAM6rJ,EAAGjmB,QAAQ7gI,KAAO8mJ,EAAGjmB,QAAQz6H,GAAI,MAAM,IAAIvS,MAAM,wBAC5D,GAAIoH,aAAagxJ,EAAO,MAAM,IAAIp4J,MAAM,gCACxC,MAAMy4J,EAAO5zJ,GAASouJ,EAAGiB,IAAIrvJ,EAAGouJ,EAAG98D,MAEnC,OAAIsiE,EAAItsJ,IAAMssJ,EAAIlmJ,GAAW6lJ,EAAMjiE,KAC5B,IAAIiiE,EAAMjsJ,EAAGoG,EAAG0gJ,EAAGntG,IAC5B,CAEA,KAAI35C,GACF,OAAO6D,KAAK4nJ,WAAWzrJ,CACzB,CACA,KAAIoG,GACF,OAAOvC,KAAK4nJ,WAAWrlJ,CACzB,CAQA,iBAAOmmJ,CAAWjwC,GAChB,MAAMkwC,EAAQ1F,EAAG2F,YAAYnwC,EAAOttD,IAAK/zD,GAAMA,EAAEmxJ,KACjD,OAAO9vC,EAAOttD,IAAI,CAAC/zD,EAAGvC,IAAMuC,EAAEwwJ,SAASe,EAAM9zJ,KAAKs2D,IAAIi9F,EAAMI,WAC9D,CAMA,cAAOK,CAAQr/I,GACb,MAAMqxB,EAAIutH,EAAMI,WAAWpB,EAAUtF,GAAY,WAAYt4I,KAE7D,OADAqxB,EAAEiuH,iBACKjuH,CACT,CAGA,qBAAOkuH,CAAejhJ,GACpB,OAAOsgJ,EAAMY,KAAK1mJ,SAAS2lJ,EAAuBngJ,GACpD,CAQAmhJ,cAAAA,CAAeC,GACblpJ,KAAKmpJ,aAAeD,EACpBhB,EAAiB5qI,OAAOtd,KAC1B,CAGA8oJ,cAAAA,GACE,GAAI9oJ,KAAKyoJ,MAAO,CAId,GAAI3B,EAAMK,qBAAuBlE,EAAGwF,IAAIzoJ,KAAKsoJ,IAAK,OAClD,MAAM,IAAIt4J,MAAM,kB,CAGlB,MAAM,EAAEmM,EAAC,EAAEoG,GAAMvC,KAAK4nJ,WAEtB,IAAK3E,EAAGjmB,QAAQ7gI,KAAO8mJ,EAAGjmB,QAAQz6H,GAAI,MAAM,IAAIvS,MAAM,4BACtD,MAAMi8B,EAAOg3H,EAAGkB,IAAI5hJ,GACdoxC,EAAQk0G,EAAoB1rJ,GAClC,IAAK8mJ,EAAGiB,IAAIj4H,EAAM0nB,GAAQ,MAAM,IAAI3jD,MAAM,qCAC1C,IAAKgQ,KAAKinJ,gBAAiB,MAAM,IAAIj3J,MAAM,yCAC7C,CACAo5J,QAAAA,GACE,MAAM,EAAE7mJ,GAAMvC,KAAK4nJ,WACnB,GAAI3E,EAAGoG,MAAO,OAAQpG,EAAGoG,MAAM9mJ,GAC/B,MAAM,IAAIvS,MAAM,8BAClB,CAKAkxE,MAAAA,CAAOusE,GACL0a,EAAe1a,GACf,MAAQ4a,GAAIiB,EAAIhB,GAAIiB,EAAIhB,GAAIiB,GAAOxpJ,MAC3BqoJ,GAAIoB,EAAInB,GAAIoB,EAAInB,GAAIoB,GAAOlc,EAC7Bmc,EAAK3G,EAAGiB,IAAIjB,EAAGqB,IAAIgF,EAAIK,GAAK1G,EAAGqB,IAAImF,EAAID,IACvCK,EAAK5G,EAAGiB,IAAIjB,EAAGqB,IAAIiF,EAAII,GAAK1G,EAAGqB,IAAIoF,EAAIF,IAC7C,OAAOI,GAAMC,CACf,CAKAjiE,MAAAA,GACE,OAAO,IAAIwgE,EAAMpoJ,KAAKqoJ,GAAIpF,EAAGyB,IAAI1kJ,KAAKsoJ,IAAKtoJ,KAAKuoJ,GAClD,CAMAuB,MAAAA,GACE,MAAM,EAAEryJ,EAAC,EAAEE,GAAMmvJ,EACXx1F,EAAK2xF,EAAGqB,IAAI3sJ,EAAG6rJ,KACb6E,GAAIiB,EAAIhB,GAAIiB,EAAIhB,GAAIiB,GAAOxpJ,KACnC,IAAI+pJ,EAAK9G,EAAG98D,KAAM6jE,EAAK/G,EAAG98D,KAAM8jE,EAAKhH,EAAG98D,KACpCkH,EAAK41D,EAAGqB,IAAIgF,EAAIA,GAChBhnG,EAAK2gG,EAAGqB,IAAIiF,EAAIA,GAChBhnG,EAAK0gG,EAAGqB,IAAIkF,EAAIA,GAChBl8D,EAAK21D,EAAGqB,IAAIgF,EAAIC,GA4BpB,OA3BAj8D,EAAK21D,EAAG74I,IAAIkjF,EAAIA,GAChB28D,EAAKhH,EAAGqB,IAAIgF,EAAIE,GAChBS,EAAKhH,EAAG74I,IAAI6/I,EAAIA,GAChBF,EAAK9G,EAAGqB,IAAI7sJ,EAAGwyJ,GACfD,EAAK/G,EAAGqB,IAAIhzF,EAAI/O,GAChBynG,EAAK/G,EAAG74I,IAAI2/I,EAAIC,GAChBD,EAAK9G,EAAG9+E,IAAI7hB,EAAI0nG,GAChBA,EAAK/G,EAAG74I,IAAIk4C,EAAI0nG,GAChBA,EAAK/G,EAAGqB,IAAIyF,EAAIC,GAChBD,EAAK9G,EAAGqB,IAAIh3D,EAAIy8D,GAChBE,EAAKhH,EAAGqB,IAAIhzF,EAAI24F,GAChB1nG,EAAK0gG,EAAGqB,IAAI7sJ,EAAG8qD,GACf+qC,EAAK21D,EAAG9+E,IAAIkpB,EAAI9qC,GAChB+qC,EAAK21D,EAAGqB,IAAI7sJ,EAAG61F,GACfA,EAAK21D,EAAG74I,IAAIkjF,EAAI28D,GAChBA,EAAKhH,EAAG74I,IAAIijF,EAAIA,GAChBA,EAAK41D,EAAG74I,IAAI6/I,EAAI58D,GAChBA,EAAK41D,EAAG74I,IAAIijF,EAAI9qC,GAChB8qC,EAAK41D,EAAGqB,IAAIj3D,EAAIC,GAChB08D,EAAK/G,EAAG74I,IAAI4/I,EAAI38D,GAChB9qC,EAAK0gG,EAAGqB,IAAIiF,EAAIC,GAChBjnG,EAAK0gG,EAAG74I,IAAIm4C,EAAIA,GAChB8qC,EAAK41D,EAAGqB,IAAI/hG,EAAI+qC,GAChBy8D,EAAK9G,EAAG9+E,IAAI4lF,EAAI18D,GAChB48D,EAAKhH,EAAGqB,IAAI/hG,EAAID,GAChB2nG,EAAKhH,EAAG74I,IAAI6/I,EAAIA,GAChBA,EAAKhH,EAAG74I,IAAI6/I,EAAIA,GACT,IAAI7B,EAAM2B,EAAIC,EAAIC,EAC3B,CAMA7/I,GAAAA,CAAIqjI,GACF0a,EAAe1a,GACf,MAAQ4a,GAAIiB,EAAIhB,GAAIiB,EAAIhB,GAAIiB,GAAOxpJ,MAC3BqoJ,GAAIoB,EAAInB,GAAIoB,EAAInB,GAAIoB,GAAOlc,EACnC,IAAIsc,EAAK9G,EAAG98D,KAAM6jE,EAAK/G,EAAG98D,KAAM8jE,EAAKhH,EAAG98D,KACxC,MAAM1uF,EAAIqvJ,EAAMrvJ,EACV65D,EAAK2xF,EAAGqB,IAAIwC,EAAMnvJ,EAAG6rJ,IAC3B,IAAIn2D,EAAK41D,EAAGqB,IAAIgF,EAAIG,GAChBnnG,EAAK2gG,EAAGqB,IAAIiF,EAAIG,GAChBnnG,EAAK0gG,EAAGqB,IAAIkF,EAAIG,GAChBr8D,EAAK21D,EAAG74I,IAAIk/I,EAAIC,GAChBh8D,EAAK01D,EAAG74I,IAAIq/I,EAAIC,GACpBp8D,EAAK21D,EAAGqB,IAAIh3D,EAAIC,GAChBA,EAAK01D,EAAG74I,IAAIijF,EAAI/qC,GAChBgrC,EAAK21D,EAAG9+E,IAAImpB,EAAIC,GAChBA,EAAK01D,EAAG74I,IAAIk/I,EAAIE,GAChB,IAAIh8D,EAAKy1D,EAAG74I,IAAIq/I,EAAIE,GA+BpB,OA9BAp8D,EAAK01D,EAAGqB,IAAI/2D,EAAIC,GAChBA,EAAKy1D,EAAG74I,IAAIijF,EAAI9qC,GAChBgrC,EAAK01D,EAAG9+E,IAAIopB,EAAIC,GAChBA,EAAKy1D,EAAG74I,IAAIm/I,EAAIC,GAChBO,EAAK9G,EAAG74I,IAAIs/I,EAAIC,GAChBn8D,EAAKy1D,EAAGqB,IAAI92D,EAAIu8D,GAChBA,EAAK9G,EAAG74I,IAAIk4C,EAAIC,GAChBirC,EAAKy1D,EAAG9+E,IAAIqpB,EAAIu8D,GAChBE,EAAKhH,EAAGqB,IAAI7sJ,EAAG81F,GACfw8D,EAAK9G,EAAGqB,IAAIhzF,EAAI/O,GAChB0nG,EAAKhH,EAAG74I,IAAI2/I,EAAIE,GAChBF,EAAK9G,EAAG9+E,IAAI7hB,EAAI2nG,GAChBA,EAAKhH,EAAG74I,IAAIk4C,EAAI2nG,GAChBD,EAAK/G,EAAGqB,IAAIyF,EAAIE,GAChB3nG,EAAK2gG,EAAG74I,IAAIijF,EAAIA,GAChB/qC,EAAK2gG,EAAG74I,IAAIk4C,EAAI+qC,GAChB9qC,EAAK0gG,EAAGqB,IAAI7sJ,EAAG8qD,GACfgrC,EAAK01D,EAAGqB,IAAIhzF,EAAIi8B,GAChBjrC,EAAK2gG,EAAG74I,IAAIk4C,EAAIC,GAChBA,EAAK0gG,EAAG9+E,IAAIkpB,EAAI9qC,GAChBA,EAAK0gG,EAAGqB,IAAI7sJ,EAAG8qD,GACfgrC,EAAK01D,EAAG74I,IAAImjF,EAAIhrC,GAChB8qC,EAAK41D,EAAGqB,IAAIhiG,EAAIirC,GAChBy8D,EAAK/G,EAAG74I,IAAI4/I,EAAI38D,GAChBA,EAAK41D,EAAGqB,IAAI92D,EAAID,GAChBw8D,EAAK9G,EAAGqB,IAAIh3D,EAAIy8D,GAChBA,EAAK9G,EAAG9+E,IAAI4lF,EAAI18D,GAChBA,EAAK41D,EAAGqB,IAAIh3D,EAAIhrC,GAChB2nG,EAAKhH,EAAGqB,IAAI92D,EAAIy8D,GAChBA,EAAKhH,EAAG74I,IAAI6/I,EAAI58D,GACT,IAAI+6D,EAAM2B,EAAIC,EAAIC,EAC3B,CAEAlrE,QAAAA,CAAS0uD,GACP,OAAOztI,KAAKoK,IAAIqjI,EAAM7lD,SACxB,CAEQ6gE,GAAAA,GACN,OAAOzoJ,KAAKkhE,OAAOknF,EAAMjiE,KAC3B,CACQ+jE,IAAAA,CAAKjzJ,GACX,OAAOkzJ,EAAKC,WAAWpqJ,KAAMkoJ,EAAkBjxJ,EAAIo+H,IACjD,MAAMszB,EAAQ1F,EAAG2F,YAAYvzB,EAAKlqE,IAAK/zD,GAAMA,EAAEmxJ,KAC/C,OAAOlzB,EAAKlqE,IAAI,CAAC/zD,EAAGvC,IAAMuC,EAAEwwJ,SAASe,EAAM9zJ,KAAKs2D,IAAIi9F,EAAMI,aAE9D,CAOA6B,cAAAA,CAAepzJ,GACb,MAAMq9B,EAAI8zH,EAAMjiE,KAChB,GAAIlvF,IAAMgtH,GAAK,OAAO3vF,EAEtB,GADA0zH,EAAS/wJ,GACLA,IAAMitH,GAAK,OAAOlkH,KACtB,MAAM,KAAEqnJ,GAASP,EACjB,IAAKO,EAAM,OAAO8C,EAAKG,aAAatqJ,KAAM/I,GAG1C,IAAI,MAAEszJ,EAAK,GAAE3gE,EAAE,MAAE4gE,EAAK,GAAEC,GAAOpD,EAAKE,YAAYtwJ,GAC5CyzJ,EAAMp2H,EACNq2H,EAAMr2H,EACN18B,EAAWoI,KACf,KAAO4pF,EAAKq6B,IAAOwmC,EAAKxmC,IAClBr6B,EAAKs6B,KAAKwmC,EAAMA,EAAItgJ,IAAIxS,IACxB6yJ,EAAKvmC,KAAKymC,EAAMA,EAAIvgJ,IAAIxS,IAC5BA,EAAIA,EAAEkyJ,SACNlgE,IAAOs6B,GACPumC,IAAOvmC,GAKT,OAHIqmC,IAAOG,EAAMA,EAAI9iE,UACjB4iE,IAAOG,EAAMA,EAAI/iE,UACrB+iE,EAAM,IAAIvC,EAAMnF,EAAGqB,IAAIqG,EAAItC,GAAIhB,EAAKC,MAAOqD,EAAIrC,GAAIqC,EAAIpC,IAChDmC,EAAItgJ,IAAIugJ,EACjB,CAWAroJ,QAAAA,CAASsoJ,GACP5C,EAAS4C,GACT,IACIlD,EAAcmD,EADd5zJ,EAAI2zJ,EAER,MAAM,KAAEvD,GAASP,EACjB,GAAIO,EAAM,CACR,MAAM,MAAEkD,EAAK,GAAE3gE,EAAE,MAAE4gE,EAAK,GAAEC,GAAOpD,EAAKE,YAAYtwJ,GAClD,IAAMG,EAAGszJ,EAAKl0J,EAAGs0J,GAAQ9qJ,KAAKkqJ,KAAKtgE,IAC7BxyF,EAAGuzJ,EAAKn0J,EAAGu0J,GAAQ/qJ,KAAKkqJ,KAAKO,GACnCC,EAAMP,EAAKa,gBAAgBT,EAAOG,GAClCC,EAAMR,EAAKa,gBAAgBR,EAAOG,GAClCA,EAAM,IAAIvC,EAAMnF,EAAGqB,IAAIqG,EAAItC,GAAIhB,EAAKC,MAAOqD,EAAIrC,GAAIqC,EAAIpC,IACvDb,EAAQgD,EAAItgJ,IAAIugJ,GAChBE,EAAOC,EAAI1gJ,IAAI2gJ,E,KACV,CACL,MAAM,EAAE3zJ,EAAC,EAAEZ,GAAMwJ,KAAKkqJ,KAAKjzJ,GAC3BywJ,EAAQtwJ,EACRyzJ,EAAOr0J,C,CAGT,OAAO4xJ,EAAMM,WAAW,CAAChB,EAAOmD,IAAO,EACzC,CAQAI,oBAAAA,CAAqBxuH,EAAUhlC,EAAWE,GACxC,MAAMq6B,EAAIo2H,EAAMY,KACV1E,EAAMA,CACVzpH,EACApjC,IACIA,IAAMwsH,IAAOxsH,IAAMysH,IAAQrpF,EAAEqmC,OAAOlvC,GAA2B6I,EAAEv4B,SAAS7K,GAAjCojC,EAAEwvH,eAAe5yJ,GAC1DwqJ,EAAMqC,EAAItkJ,KAAMvI,GAAG2S,IAAIk6I,EAAI7nH,EAAG9kC,IACpC,OAAOsqJ,EAAIwG,WAAQxuG,EAAYgoG,CACjC,CAKA2F,QAAAA,CAASsD,GACP,MAAQ7C,GAAIlsJ,EAAGmsJ,GAAI/lJ,EAAGgmJ,GAAIzlJ,GAAM9C,KAC1ByoJ,EAAMzoJ,KAAKyoJ,MAGP,MAANyC,IAAYA,EAAKzC,EAAMxF,EAAGntG,IAAMmtG,EAAGkI,IAAIroJ,IAC3C,MAAMsoJ,EAAKnI,EAAGqB,IAAInoJ,EAAG+uJ,GACfG,EAAKpI,EAAGqB,IAAI/hJ,EAAG2oJ,GACfI,EAAKrI,EAAGqB,IAAIxhJ,EAAGooJ,GACrB,GAAIzC,EAAK,MAAO,CAAEtsJ,EAAG8mJ,EAAG98D,KAAM5jF,EAAG0gJ,EAAG98D,MACpC,IAAK88D,EAAGiB,IAAIoH,EAAIrI,EAAGntG,KAAM,MAAM,IAAI9lD,MAAM,oBACzC,MAAO,CAAEmM,EAAGivJ,EAAI7oJ,EAAG8oJ,EACrB,CACApE,aAAAA,GACE,MAAQnvJ,EAAGyzJ,EAAQ,cAAEtE,GAAkBH,EACvC,GAAIyE,IAAarnC,GAAK,OAAO,EAC7B,GAAI+iC,EAAe,OAAOA,EAAcmB,EAAOpoJ,MAC/C,MAAM,IAAIhQ,MAAM,+DAClB,CACAk3J,aAAAA,GACE,MAAQpvJ,EAAGyzJ,EAAQ,cAAErE,GAAkBJ,EACvC,OAAIyE,IAAarnC,GAAYlkH,KACzBknJ,EAAsBA,EAAckB,EAAOpoJ,MACxCA,KAAKqqJ,eAAevD,EAAMhvJ,EACnC,CAEA0zJ,UAAAA,GAA8B,IAAnBC,IAAY/lJ,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,KAAAA,UAAA,GAErB,OADA1F,KAAK8oJ,iBACEzlC,EAAQ+kC,EAAOpoJ,KAAMyrJ,EAC9B,CAEAziJ,KAAAA,GAAyB,IAAnByiJ,IAAY/lJ,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,KAAAA,UAAA,GAChB,OAAOygJ,GAAcnmJ,KAAKwrJ,WAAWC,GACvC,EA9UgBrD,EAAAY,KAAO,IAAIZ,EAAMtB,EAAMf,GAAIe,EAAMd,GAAI/C,EAAGntG,KACxCsyG,EAAAjiE,KAAO,IAAIiiE,EAAMnF,EAAG98D,KAAM88D,EAAGntG,IAAKmtG,EAAG98D,MA+UvD,MAAMi2B,EAAQ0qC,EAAMhC,WACdqF,EDvjBF,SAAmC94J,EAAwB4L,GAC/D,MAAM+tJ,EAAkBA,CAACrqD,EAAoB8c,KAC3C,MAAMinC,EAAMjnC,EAAK71B,SACjB,OAAO+Y,EAAY+jD,EAAMjnC,GAErB5gC,EAAQn2C,IAGL,CAAEglH,QAFOlxJ,KAAKkD,KAAKT,EAAOypC,GAAK,EAEpBwiH,WADC,IAAMxiH,EAAI,KAG/B,MAAO,CACLskH,kBAEAV,YAAAA,CAAaqB,EAAQ10J,GACnB,IAAIG,EAAI/F,EAAE80F,KACNvuF,EAAO+zJ,EACX,KAAO10J,EAAIgtH,IACLhtH,EAAIitH,KAAK9sH,EAAIA,EAAEgT,IAAIxS,IACvBA,EAAIA,EAAEkyJ,SACN7yJ,IAAMitH,GAER,OAAO9sH,CACT,EAYAw0J,gBAAAA,CAAiBD,EAAQjlH,GACvB,MAAM,QAAEglH,EAAO,WAAExC,GAAersE,EAAKn2C,GAC/B+xE,EAAc,GACpB,IAAIrhH,EAAOu0J,EACP91I,EAAOze,EACX,IAAK,IAAIsP,EAAS,EAAGA,EAASglJ,EAAShlJ,IAAU,CAC/CmP,EAAOze,EACPqhH,EAAOn6G,KAAKuX,GAEZ,IAAK,IAAIhhB,EAAI,EAAGA,EAAIq0J,EAAYr0J,IAC9BghB,EAAOA,EAAKzL,IAAIhT,GAChBqhH,EAAOn6G,KAAKuX,GAEdze,EAAIye,EAAKi0I,Q,CAEX,OAAOrxC,CACT,EASAyxC,IAAAA,CAAKxjH,EAAWmlH,EAAkB50J,GAGhC,MAAM,QAAEy0J,EAAO,WAAExC,GAAersE,EAAKn2C,GAErC,IAAItvC,EAAI/F,EAAE80F,KACN3vF,EAAInF,EAAE23J,KAEV,MAAM18F,EAAOstD,OAAO,GAAKlzE,EAAI,GACvBolH,EAAY,GAAKplH,EACjBqlH,EAAUnyC,OAAOlzE,GAEvB,IAAK,IAAIhgC,EAAS,EAAGA,EAASglJ,EAAShlJ,IAAU,CAC/C,MAAMwjB,EAASxjB,EAASwiJ,EAExB,IAAI8C,EAAQ36D,OAAOp6F,EAAIq1D,GAGvBr1D,IAAM80J,EAIFC,EAAQ9C,IACV8C,GAASF,EACT70J,GAAKitH,IAWP,MAAM+nC,EAAU/hI,EACVgiI,EAAUhiI,EAAS1vB,KAAK2uD,IAAI6iG,GAAS,EACrCG,EAAQzlJ,EAAS,IAAM,EACvB0lJ,EAAQJ,EAAQ,EACR,IAAVA,EAEFx1J,EAAIA,EAAE4T,IAAI4gJ,EAAgBmB,EAAON,EAAYI,KAE7C70J,EAAIA,EAAEgT,IAAI4gJ,EAAgBoB,EAAOP,EAAYK,I,CAQjD,MAAO,CAAE90J,IAAGZ,IACd,EAEA4zJ,UAAAA,CAAWvvH,EAAMwxH,EAA6Bp1J,EAAWkgH,GAEvD,MAAMzwE,EAAY7L,EAAEsuH,cAAgB,EAEpC,IAAI9zB,EAAOg3B,EAAeplJ,IAAI4zB,GAO9B,OANKw6F,IACHA,EAAOr1H,KAAK4rJ,iBAAiB/wH,EAAG6L,GACtB,IAANA,GACF2lH,EAAet+I,IAAI8sB,EAAGs8E,EAAUke,KAG7Br1H,KAAKkqJ,KAAKxjH,EAAG2uF,EAAMp+H,EAC5B,EAEJ,CCwbeizJ,CAAK9B,EAAOtB,EAAMO,KAAO7sJ,KAAKkD,KAAK0+G,EAAQ,GAAKA,GAE7D,MAAO,CACL0qC,QACAwF,gBAAiBlE,EACjBH,yBACAJ,sBACAE,qBAEJ,CA0EM,SAAUwE,GAAYC,GAC1B,MAAM1F,EAnCR,SAAsBnB,GACpB,MAAM9oE,EAAO6oE,GAAcC,GAc3B,OAbAQ,GACEtpE,EACA,CACExnC,KAAM,OACNlgD,KAAM,WACN4G,YAAa,YAEf,CACE0wJ,SAAU,WACVC,cAAe,WACfC,KAAM,YAGH71J,OAAOo7G,OAAMzf,EAAC,CAAEk6D,MAAM,GAAS9vE,GACxC,CAmBgB+vE,CAAaJ,IACrB,GAAEvJ,EAAIhsJ,EAAG41J,GAAgB/F,EACzBgG,EAAgB7J,EAAG4C,MAAQ,EAC3BkH,EAAkB,EAAI9J,EAAG4C,MAAQ,EAKvC,SAASmH,EAAKv1J,GACZ,OAAOm+C,GAAQn+C,EAAGo1J,EACpB,CACA,SAASI,EAAKx1J,GACZ,OAAOm+C,GAAWn+C,EAAGo1J,EACvB,CAEA,MACEP,gBAAiBlE,EAAK,uBACtBH,EAAsB,oBACtBJ,EAAmB,mBACnBE,GACElB,GAAiBp0D,EAAAA,EAAC,CAAC,EAClBq0D,GAAK,IACRzjC,OAAAA,CAAQokC,EAAIC,EAAO+D,GACjB,MAAMh0J,EAAIiwJ,EAAME,WACVzrJ,EAAI8mJ,EAAG5/B,QAAQ5rH,EAAE0E,GACjB+wJ,EAAM/G,GACZ,OAAIsF,EACKyB,EAAIlqG,WAAW8xB,KAAK,CAAC4yE,EAAM0B,WAAa,EAAO,IAAQjtJ,GAEvD+wJ,EAAIlqG,WAAW8xB,KAAK,CAAC,IAAQ34E,EAAG8mJ,EAAG5/B,QAAQ5rH,EAAE8K,GAExD,EACA6kJ,SAAAA,CAAUxrJ,GACR,MAAMlH,EAAMkH,EAAMzH,OACZm+G,EAAO12G,EAAM,GACbspC,EAAOtpC,EAAMurD,SAAS,GAE5B,GAAIzyD,IAAQo4J,GAA2B,IAATx6C,GAA0B,IAATA,EAUxC,IAAI59G,IAAQq4J,GAA4B,IAATz6C,EAAe,CAGnD,MAAO,CAAEn2G,EAFC8mJ,EAAGmE,UAAUliH,EAAKiiB,SAAS,EAAG87F,EAAG4C,QAE/BtjJ,EADF0gJ,EAAGmE,UAAUliH,EAAKiiB,SAAS87F,EAAG4C,MAAO,EAAI5C,EAAG4C,Q,CAGtD,MAAM,IAAI71J,MAAM,mBAADiS,OACMvN,EAAG,2BAAAuN,OAA0B6qJ,EAAa,yBAAA7qJ,OAAwB8qJ,EAAe,uB,CAhBzC,CAC7D,MAAM5wJ,EAAIgqJ,GAAmBjhH,GAC7B,KAjCG++E,IADoBnkH,EAkCE3D,IAjCT2D,EAAMmjJ,EAAG2C,OAiCI,MAAM,IAAI51J,MAAM,yBAC7C,MAAM6oH,EAAKgvC,EAAoB1rJ,GAC/B,IAAIoG,EAAI0gJ,EAAGkK,KAAKt0C,GAKhB,OAFiC,KAAP,EAAPvG,OAFH/vG,EAAI2hH,MAASA,MAGH3hH,EAAI0gJ,EAAGyB,IAAIniJ,IAC9B,CAAEpG,IAAGoG,I,CAzClB,IAA6BzC,CAmD3B,KAEIstJ,EAAiBttJ,GACrBqmJ,GAAcA,GAAmBrmJ,EAAKgnJ,EAAM9B,cAE9C,SAASqI,EAAsBzlI,GAE7B,OAAOA,EADMilI,GAAe3oC,EAE9B,CAMA,MAAMopC,EAASA,CAAC31J,EAAem9E,EAAcsd,IAAe+zD,GAAmBxuJ,EAAE6I,MAAMs0E,EAAMsd,IAK7F,MAAM2qC,EACJ9tH,WAAAA,CAAqBqnB,EAAoBvjC,EAAoBw6J,GAAxC,KAAAj3H,EAAAA,EAAoB,KAAAvjC,EAAAA,EAAoB,KAAAw6J,SAAAA,EAC3DvtJ,KAAK8oJ,gBACP,CAGA,kBAAO0E,CAAYhkJ,GACjB,MAAM5S,EAAIkwJ,EAAM9B,YAEhB,OADAx7I,EAAMs4I,GAAY,mBAAoBt4I,EAAS,EAAJ5S,GACpC,IAAImmI,EAAUuwB,EAAO9jJ,EAAK,EAAG5S,GAAI02J,EAAO9jJ,EAAK5S,EAAG,EAAIA,GAC7D,CAIA,cAAO62J,CAAQjkJ,GACb,MAAM,EAAE8sB,EAAC,EAAEvjC,GAAMqzJ,GAAIG,MAAMzE,GAAY,MAAOt4I,IAC9C,OAAO,IAAIuzH,EAAUzmG,EAAGvjC,EAC1B,CAEA+1J,cAAAA,GAEE,IAAKf,EAAmB/nJ,KAAKs2B,GAAI,MAAM,IAAItmC,MAAM,6BACjD,IAAK+3J,EAAmB/nJ,KAAKjN,GAAI,MAAM,IAAI/C,MAAM,4BACnD,CAEA09J,cAAAA,CAAeH,GACb,OAAO,IAAIxwB,EAAU/8H,KAAKs2B,EAAGt2B,KAAKjN,EAAGw6J,EACvC,CAEAI,gBAAAA,CAAiBC,GACf,MAAM,EAAEt3H,EAAC,EAAEvjC,EAAGw6J,SAAU17E,GAAQ7xE,KAC1BlI,EAAI40J,EAAc5K,GAAY,UAAW8L,IAC/C,GAAW,MAAP/7E,IAAgB,CAAC,EAAG,EAAG,EAAG,GAAG1jE,SAAS0jE,GAAM,MAAM,IAAI7hF,MAAM,uBAChE,MAAM69J,EAAe,IAARh8E,GAAqB,IAARA,EAAYv7C,EAAIwwH,EAAM7vJ,EAAIq/B,EACpD,GAAIu3H,GAAQ5K,EAAG2C,MAAO,MAAM,IAAI51J,MAAM,8BACtC,MAAM+yG,EAAuB,KAAP,EAANlxB,GAAiB,KAAO,KAClCrzE,EAAI4pJ,EAAMS,QAAQ9lD,EAASqqD,EAAcS,IACzCC,EAAKb,EAAKY,GACVE,EAAKf,GAAMl1J,EAAIg2J,GACfE,EAAKhB,EAAKj6J,EAAI+6J,GACdrxH,EAAI2rH,EAAMY,KAAKiC,qBAAqBzsJ,EAAGuvJ,EAAIC,GACjD,IAAKvxH,EAAG,MAAM,IAAIzsC,MAAM,qBAExB,OADAysC,EAAEqsH,iBACKrsH,CACT,CAGAwxH,QAAAA,GACE,OAAOZ,EAAsBrtJ,KAAKjN,EACpC,CAEAm7J,UAAAA,GACE,OAAOluJ,KAAKiuJ,WAAa,IAAIlxB,EAAU/8H,KAAKs2B,EAAG02H,GAAMhtJ,KAAKjN,GAAIiN,KAAKutJ,UAAYvtJ,IACjF,CAGAmuJ,aAAAA,GACE,OAAOhI,GAAcnmJ,KAAKouJ,WAC5B,CACAA,QAAAA,GACE,OAAOhI,GAAIM,WAAW,CAAEpwH,EAAGt2B,KAAKs2B,EAAGvjC,EAAGiN,KAAKjN,GAC7C,CAGAs7J,iBAAAA,GACE,OAAOlI,GAAcnmJ,KAAKsuJ,eAC5B,CACAA,YAAAA,GACE,OAAOlB,EAAcptJ,KAAKs2B,GAAK82H,EAAcptJ,KAAKjN,EACpD,EAIF,MAAMw7J,EAAQ,CACZC,iBAAAA,CAAkB1mJ,GAChB,IAEE,OADAmgJ,EAAuBngJ,IAChB,C,CACP,MAAOzX,GACP,OAAO,C,CAEX,EACA43J,uBAAwBA,EAMxBwG,iBAAkBA,KAChB,MAAMt6J,EAASyhD,GAAqBkxG,EAAM7vJ,GAC1C,OH9XA,SAAyBtG,EAAiBu0J,GAAgC,IAAZvH,EAAIj4I,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GACtE,MAAMhR,EAAM/D,EAAIwD,OACVu6J,EAAWzJ,GAAoBC,GAC/ByJ,EAASxJ,GAAiBD,GAEhC,GAAIxwJ,EAAM,IAAMA,EAAMi6J,GAAUj6J,EAAM,KACpC,MAAM,IAAI1E,MAAM,YAADiS,OAAa0sJ,EAAM,8BAAA1sJ,OAA6BvN,IACjE,MAEMk6J,EAAUh5G,GAFJ+nG,EAAO+D,GAAgB/wJ,GAAOgxJ,GAAgBhxJ,GAEjCu0J,EAAahhC,IAAOA,GAC7C,OAAOy5B,EAAOkE,GAAgB+M,EAASF,GAAY9M,GAAgBgN,EAASF,EAC9E,CGmXa94G,CAAmBkxG,EAAM/qJ,YAAY5H,GAAS2yJ,EAAM7vJ,IAW7D43J,UAAAA,GAA6C,IAAlC3F,EAAUxjJ,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG,EAAGgiJ,EAAKhiJ,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAG0iJ,EAAMY,KAGvC,OAFAtB,EAAMuB,eAAeC,GACrBxB,EAAMplJ,SAASs3G,OAAO,IACf8tC,CACT,GAgBF,SAASoH,EAAUrxC,GACjB,MAAMnjH,EAAMmjH,aAAgBz6D,WACtBa,EAAsB,kBAAT45D,EACb/oH,GAAO4F,GAAOupD,IAAS45D,EAAatpH,OAC1C,OAAImG,EAAY5F,IAAQo4J,GAAiBp4J,IAAQq4J,EAC7ClpG,EAAYnvD,IAAQ,EAAIo4J,GAAiBp4J,IAAQ,EAAIq4J,EACrDtvC,aAAgB2qC,CAEtB,CAuBA,MAAMqE,EACJ3F,EAAM2F,UACN,SAAU7wJ,GAGR,MAAMkE,EAAMqmJ,GAAmBvqJ,GACzB43F,EAAuB,EAAf53F,EAAMzH,OAAa2yJ,EAAMhC,WACvC,OAAOtxD,EAAQ,EAAI1zF,GAAO85G,OAAOpmB,GAAS1zF,CAC5C,EACI4sJ,EACJ5F,EAAM4F,eACN,SAAU9wJ,GACR,OAAOoxJ,EAAKP,EAAS7wJ,GACvB,EAEImzJ,EAAa5I,GAAWW,EAAMhC,YAIpC,SAASkK,EAAWlvJ,GAClB,GAAmB,kBAARA,EAAkB,MAAM,IAAI9P,MAAM,mBAC7C,KAAMi0H,IAAOnkH,GAAOA,EAAMivJ,GACxB,MAAM,IAAI/+J,MAAM,uBAADiS,OAAwB6kJ,EAAMhC,aAE/C,OAAOqB,GAAmBrmJ,EAAKgnJ,EAAM9B,YACvC,CAOA,SAASiK,EAAQrB,EAAc9lJ,GAA0C,IAArB+0E,EAAIn3E,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAGwpJ,EACzD,GAAI,CAAC,YAAa,aAAa53D,KAAM7gG,GAAMA,KAAKomF,GAC9C,MAAM,IAAI7sF,MAAM,uCAClB,MAAM,KAAEqlD,EAAI,YAAEt5C,GAAgB+qJ,EAC9B,IAAI,KAAE6F,EAAI,QAAEwC,EAASC,aAAcC,GAAQxyE,EAC/B,MAAR8vE,IAAcA,GAAO,GACzBiB,EAAU9L,GAAY,UAAW8L,GAC7BuB,IAASvB,EAAU9L,GAAY,oBAAqBzsG,EAAKu4G,KAK7D,MAAM0B,EAAQ5C,EAAckB,GACtBh2J,EAAIqwJ,EAAuBngJ,GAC3BynJ,EAAW,CAACP,EAAWp3J,GAAIo3J,EAAWM,IAE5C,GAAW,MAAPD,EAAa,CAEf,MAAMx3J,GAAY,IAARw3J,EAAetzJ,EAAYknJ,EAAG4C,OAASwJ,EACjDE,EAASjxJ,KAAKwjJ,GAAY,eAAgBjqJ,G,CAE5C,MAAMkB,EAAOotJ,MAAkBoJ,GACzB14J,EAAIy4J,EAuBV,MAAO,CAAEv2J,OAAMy2J,MArBf,SAAeC,GAEb,MAAMh5J,EAAIg2J,EAASgD,GACnB,IAAK1H,EAAmBtxJ,GAAI,OAC5B,MAAM8xC,EAAK0kH,EAAKx2J,GACVe,EAAI4wJ,EAAMY,KAAK1mJ,SAAS7L,GAAGmxJ,WAC3BtxH,EAAI02H,EAAKx1J,EAAE2E,GACjB,GAAIm6B,IAAM2tF,GAAK,OAIf,MAAMlxH,EAAIi6J,EAAKzkH,EAAKykH,EAAKn2J,EAAIy/B,EAAI1+B,IACjC,GAAI7E,IAAMkxH,GAAK,OACf,IAAIspC,GAAY/1J,EAAE2E,IAAMm6B,EAAI,EAAI,GAAK+6D,OAAO75F,EAAE+K,EAAI2hH,IAC9CwrC,EAAQ38J,EAKZ,OAJI45J,GAAQU,EAAsBt6J,KAChC28J,EAzON,SAAoB38J,GAClB,OAAOs6J,EAAsBt6J,GAAKi6J,GAAMj6J,GAAKA,CAC/C,CAuOcm7J,CAAWn7J,GACnBw6J,GAAY,GAEP,IAAIxwB,EAAUzmG,EAAGo5H,EAAOnC,EACjC,EAEF,CACA,MAAM2B,EAA2B,CAAEvC,KAAM7F,EAAM6F,KAAMwC,SAAS,GACxDQ,EAA0B,CAAEhD,KAAM7F,EAAM6F,KAAMwC,SAAS,GAuF7D,OAhEA/G,EAAMY,KAAKC,eAAe,GAgEnB,CACLnC,QACA3yE,aA/MF,SAAsBrsE,GAAwC,IAAnB2jJ,IAAY/lJ,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,KAAAA,UAAA,GACrD,OAAO0iJ,EAAMW,eAAejhJ,GAAY0jJ,WAAWC,EACrD,EA8MEmE,gBArLF,SAAyBC,EAAmBC,GAAiC,IAAnBrE,IAAY/lJ,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,KAAAA,UAAA,GACpE,GAAIopJ,EAAUe,GAAW,MAAM,IAAI7/J,MAAM,iCACzC,IAAK8+J,EAAUgB,GAAU,MAAM,IAAI9/J,MAAM,iCAEzC,OADUo4J,EAAMS,QAAQiH,GACfxtJ,SAAS2lJ,EAAuB4H,IAAWrE,WAAWC,EACjE,EAiLEr2F,KA5EF,SAAcw4F,EAAc5uF,GAAuC,IAArB6d,EAAIn3E,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAGwpJ,EACnD,MAAM,KAAEn2J,EAAI,MAAEy2J,GAAUP,EAAQrB,EAAS5uF,EAAS6d,GAC5CzgE,EAAI0qI,EAEV,OADaX,GAAsC/pI,EAAEi5B,KAAKyrE,UAAW1kG,EAAE4oI,YAAa5oI,EAAEjnB,KAC/E46J,CAAKh3J,EAAMy2J,EACpB,EAwEE/+F,OArDF,SACEC,EACAk9F,EACAr4G,GACqB,IAAAy6G,EAAA,IAArBnzE,EAAIn3E,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAGiqJ,EAEP,MAAM57H,EAAK28B,EAGX,GAFAk9F,EAAU9L,GAAY,UAAW8L,GACjCr4G,EAAYusG,GAAY,YAAavsG,GACjC,WAAYsnC,EAAM,MAAM,IAAI7sF,MAAM,sCACtC,MAAM,KAAE28J,EAAI,QAAEwC,GAAYtyE,EAE1B,IAAIozE,EACAp1H,EACJ,IACE,GAAkB,kBAAP9G,GAAmBA,aAAcivB,WAG1C,IACEitG,EAAOlzB,EAAU0wB,QAAQ15H,E,CACzB,MAAOm8H,GACP,KAAMA,aAAoB9J,GAAIC,KAAM,MAAM6J,EAC1CD,EAAOlzB,EAAUywB,YAAYz5H,E,KAE1B,IAAkB,kBAAPA,GAAmC,kBAATA,EAAGuC,GAAkC,kBAATvC,EAAGhhC,EAIzE,MAAM,IAAI/C,MAAM,SAJyE,CACzF,MAAM,EAAEsmC,EAAC,EAAEvjC,GAAMghC,EACjBk8H,EAAO,IAAIlzB,EAAUzmG,EAAGvjC,E,EAI1B8nC,EAAIutH,EAAMS,QAAQtzG,E,CAClB,MAAOllD,GACP,GAAiC,UAA5BA,EAAgBuU,QACnB,MAAM,IAAI5U,MAAM,kEAClB,OAAO,C,CAET,GAAI28J,GAAQsD,EAAKhC,WAAY,OAAO,EAChCkB,IAASvB,EAAU9G,EAAMzxG,KAAKu4G,IAClC,MAAM,EAAEt3H,EAAC,EAAEvjC,GAAMk9J,EACXn4J,EAAI40J,EAAckB,GAClBh3I,EAAKq2I,EAAKl6J,GACVg7J,EAAKf,EAAKl1J,EAAI8e,GACdo3I,EAAKhB,EAAK12H,EAAI1f,GACdpY,EAA8C,QAA7CwxJ,EAAG5H,EAAMY,KAAKiC,qBAAqBpwH,EAAGkzH,EAAIC,UAAG,IAAAgC,OAAA,EAA1CA,EAA4CpI,WACtD,QAAKppJ,GACKwuJ,EAAKxuJ,EAAErC,KACJm6B,CACf,EAOEg2H,gBAAiBlE,EACjBrrB,YACAwxB,QAEJ,CC9jCM,SAAU4B,GAAQ96G,GACtB,MAAO,CACLA,OACAlgD,KAAM,SAACxE,GAAe,QAAAitH,EAAAl4G,UAAAvR,OAAKi8J,EAAkB,IAAA92J,MAAAskH,EAAA,EAAAA,EAAA,KAAAzjC,EAAA,EAAAA,EAAAyjC,EAAAzjC,IAAlBi2E,EAAkBj2E,EAAA,GAAAz0E,UAAAy0E,GAAA,OAAKhlF,GAAKkgD,EAAM1kD,E9CqG3D,WAA6C,QAAAitH,EAAAl4G,UAAAvR,OAApB6tJ,EAAoB,IAAA1oJ,MAAAskH,GAAAzjC,EAAA,EAAAA,EAAAyjC,EAAAzjC,IAApB6nE,EAAoB7nE,GAAAz0E,UAAAy0E,GACjD,MAAM7jD,EAAI,IAAI0sB,WAAWg/F,EAAOl3F,OAAO,CAACm3F,EAAKxqJ,IAAMwqJ,EAAMxqJ,EAAEtD,OAAQ,IACnE,IAAI6K,EAAM,EAMV,OALAgjJ,EAAO32I,QAAS5T,IACd,IAAKyrH,GAAIzrH,GAAI,MAAM,IAAIzH,MAAM,uBAC7BsmC,EAAEvoB,IAAItW,EAAGuH,GACTA,GAAOvH,EAAEtD,SAEJmiC,CACT,C8C9GsEyrH,IAAeqO,GAAM,EACvFr0J,YAAWA,GAEf,CCHA,MAAMs0J,GAAaz2C,OAAO,sEACpB02C,GAAa12C,OAAO,sEACpBsK,GAAMtK,OAAO,GACbuK,GAAMvK,OAAO,GACb22C,GAAaA,CAAC94J,EAAWE,KAAeF,EAAIE,EAAIwsH,IAAOxsH,EAM7D,SAAS64J,GAAQjuJ,GACf,MAAMs4B,EAAIw1H,GAEJ7M,EAAM5pC,OAAO,GAAI62C,EAAM72C,OAAO,GAAI82C,EAAO92C,OAAO,IAAK+2C,EAAO/2C,OAAO,IAEnEg3C,EAAOh3C,OAAO,IAAKi3C,EAAOj3C,OAAO,IAAKk3C,EAAOl3C,OAAO,IACpDvoD,EAAM9uD,EAAIA,EAAIA,EAAKs4B,EACnBy2B,EAAMD,EAAKA,EAAK9uD,EAAKs4B,EACrBw0D,EAAMy0D,GAAKxyF,EAAIkyF,EAAK3oH,GAAKy2B,EAAMz2B,EAC/B20D,EAAMs0D,GAAKz0D,EAAIm0D,EAAK3oH,GAAKy2B,EAAMz2B,EAC/B60D,EAAOo0D,GAAKt0D,EAAI20B,GAAKtpF,GAAKw2B,EAAMx2B,EAChCk2H,EAAOjN,GAAKp0D,EAAKghE,EAAM71H,GAAK60D,EAAO70D,EACnCm2H,EAAOlN,GAAKiN,EAAKJ,EAAM91H,GAAKk2H,EAAOl2H,EACnCo2H,EAAOnN,GAAKkN,EAAKH,EAAMh2H,GAAKm2H,EAAOn2H,EACnCq2H,EAAQpN,GAAKmN,EAAKH,EAAMj2H,GAAKo2H,EAAOp2H,EACpCs2H,EAAQrN,GAAKoN,EAAML,EAAMh2H,GAAKm2H,EAAOn2H,EACrCu2H,EAAQtN,GAAKqN,EAAM3N,EAAK3oH,GAAKy2B,EAAMz2B,EACnCynB,EAAMwhG,GAAKsN,EAAMR,EAAM/1H,GAAKk2H,EAAOl2H,EACnC0nB,EAAMuhG,GAAKxhG,EAAImuG,EAAK51H,GAAKw2B,EAAMx2B,EAC/B+wE,EAAOk4C,GAAKvhG,EAAI4hE,GAAKtpF,GAC3B,IAAKooH,GAAGiB,IAAIjB,GAAGkB,IAAIv4C,GAAOrpG,GAAI,MAAM,IAAIvS,MAAM,2BAC9C,OAAO47G,CACT,CAEA,MAAMq3C,GL8SA,SACJ2C,EACAyL,GAEmC,IADnC1T,EAAIj4I,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GACJ4rJ,EAAA5rJ,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,GAAAA,UAAA,GAAiC,CAAC,EAElC,GAAIkgJ,GAAS3hC,GAAK,MAAM,IAAIj0H,MAAM,iCAADiS,OAAkC2jJ,IACnE,MAAQd,WAAYgB,EAAMd,YAAaa,GAAUhB,GAAQe,EAAOyL,GAChE,GAAIxL,EAAQ,KAAM,MAAM,IAAI71J,MAAM,mDAClC,MAAMuhK,EAAQvN,GAAO4B,GACfpvJ,EAAuBM,OAAOo7G,OAAO,CACzC0zC,QACAE,OACAD,QACAjQ,KAAMsM,GAAQ4D,GACd3/D,KAAM89B,GACNnuE,IAAKouE,GACL9uH,OAAS0K,GAAQ81C,GAAI91C,EAAK8lJ,GAC1B5oB,QAAUl9H,IACR,GAAmB,kBAARA,EACT,MAAM,IAAI9P,MAAM,+CAADiS,cAAuDnC,IACxE,OAAOmkH,IAAOnkH,GAAOA,EAAM8lJ,GAE7B6C,IAAM3oJ,GAAQA,IAAQmkH,GACtBolC,MAAQvpJ,IAASA,EAAMokH,MAASA,GAChCwgC,IAAM5kJ,GAAQ81C,IAAK91C,EAAK8lJ,GACxB1B,IAAKA,CAACsN,EAAKC,IAAQD,IAAQC,EAE3BtN,IAAMrkJ,GAAQ81C,GAAI91C,EAAMA,EAAK8lJ,GAC7Bx7I,IAAKA,CAAConJ,EAAKC,IAAQ77G,GAAI47G,EAAMC,EAAK7L,GAClCzhF,IAAKA,CAACqtF,EAAKC,IAAQ77G,GAAI47G,EAAMC,EAAK7L,GAClCtB,IAAKA,CAACkN,EAAKC,IAAQ77G,GAAI47G,EAAMC,EAAK7L,GAClCljJ,IAAKA,CAAC5C,EAAK8jJ,IAzGT,SAAmBptJ,EAAcsJ,EAAQ8jJ,GAG7C,GAAIA,EAAQ3/B,GAAK,MAAM,IAAIj0H,MAAM,sBACjC,GAAI4zJ,IAAU3/B,GAAK,OAAOztH,EAAEs/C,IAC5B,GAAI8tG,IAAU1/B,GAAK,OAAOpkH,EAC1B,IAAI1I,EAAIZ,EAAEs/C,IACNl+C,EAAIkI,EACR,KAAO8jJ,EAAQ3/B,IACT2/B,EAAQ1/B,KAAK9sH,EAAIZ,EAAE8tJ,IAAIltJ,EAAGQ,IAC9BA,EAAIpB,EAAE2tJ,IAAIvsJ,GACVgsJ,IAAU1/B,GAEZ,OAAO9sH,CACT,CA2FyBs6J,CAAMl7J,EAAGsJ,EAAK8jJ,GACnCtgG,IAAKA,CAACkuG,EAAKC,IAAQ77G,GAAI47G,EAAMzN,GAAO0N,EAAK7L,GAAQA,GAGjD+L,KAAO7xJ,GAAQA,EAAMA,EACrB8xJ,KAAMA,CAACJ,EAAKC,IAAQD,EAAMC,EAC1BI,KAAMA,CAACL,EAAKC,IAAQD,EAAMC,EAC1BK,KAAMA,CAACN,EAAKC,IAAQD,EAAMC,EAE1BtG,IAAMrrJ,GAAQikJ,GAAOjkJ,EAAK8lJ,GAC1BuH,KAAMmE,EAAMnE,MAAQ,CAAEl2J,GAAMs6J,EAAM/6J,EAAGS,IACrC2xJ,YAActnC,GAhGZ,SAA2B9qH,EAAcu7J,GAC7C,MAAMvyJ,EAAM,IAAIlG,MAAMy4J,EAAK59J,QAErB69J,EAAiBD,EAAKjnG,OAAO,CAACu/C,EAAKvqG,EAAKjL,IACxC2B,EAAEiyJ,IAAI3oJ,GAAauqG,GACvB7qG,EAAI3K,GAAKw1G,EACF7zG,EAAE8tJ,IAAIj6C,EAAKvqG,IACjBtJ,EAAEs/C,KAECm8G,EAAWz7J,EAAE20J,IAAI6G,GAOvB,OALAD,EAAKlyD,YAAY,CAACwK,EAAKvqG,EAAKjL,IACtB2B,EAAEiyJ,IAAI3oJ,GAAauqG,GACvB7qG,EAAI3K,GAAK2B,EAAE8tJ,IAAIj6C,EAAK7qG,EAAI3K,IACjB2B,EAAE8tJ,IAAIj6C,EAAKvqG,IACjBmyJ,GACIzyJ,CACT,CA+E0B0yJ,CAAc17J,EAAG8qH,GAGvC6wC,KAAMA,CAAC16J,EAAGE,EAAGtG,IAAOA,EAAIsG,EAAIF,EAC5B4rH,QAAUvjH,GAAS69I,EAAOkE,GAAgB/hJ,EAAK+lJ,GAASjE,GAAgB9hJ,EAAK+lJ,GAC7EuB,UAAYxrJ,IACV,GAAIA,EAAMzH,SAAW0xJ,EACnB,MAAM,IAAI71J,MAAM,0BAADiS,OAA2B4jJ,EAAK,UAAA5jJ,OAASrG,EAAMzH,SAChE,OAAOwpJ,EAAOgE,GAAgB/lJ,GAAS8lJ,GAAgB9lJ,MAG3D,OAAO9E,OAAOo7G,OAAO17G,EACvB,CKrWW47J,CAAM/B,QAAYp2G,OAAWA,EAAW,CAAEkzG,KAAMqD,KAE9C6B,GD9BP,SAAsB7F,EAAoB8F,GAC9C,MAAMl9J,EAAUigD,GAAgBk3G,GAAW95D,EAAAA,EAAC,CAAC,EAAI+5D,GAAa2D,GAAQ96G,KACtE,OAAOv+C,OAAOo7G,OAAMzf,EAAAA,EAAC,CAAC,EAAIr9F,EAAOk9J,IAAQ,IAAEl9J,WAC7C,CC2ByBm9J,CACvB,CACE96J,EAAGmiH,OAAO,GACVjiH,EAAGiiH,OAAO,GACVqpC,MACAhsJ,EAAGq5J,GAEHvK,GAAInsC,OAAO,iFACXosC,GAAIpsC,OAAO,iFACX9hH,EAAG8hH,OAAO,GACV+yC,MAAM,EAONtF,KAAM,CACJC,KAAM1tC,OAAO,sEACb2tC,YAAc9wJ,IACZ,MAAMQ,EAAIq5J,GACJkC,EAAK54C,OAAO,sCACZp4C,GAAM0iD,GAAMtK,OAAO,sCACnBz7B,EAAKy7B,OAAO,uCACZvoD,EAAKmhG,EACLC,EAAY74C,OAAO,uCAEnBwqC,EAAKmM,GAAWl/F,EAAK56D,EAAGQ,GACxBmnF,EAAKmyE,IAAY/uF,EAAK/qE,EAAGQ,GAC/B,IAAI2yF,EAAKh0C,GAAIn/C,EAAI2tJ,EAAKoO,EAAKp0E,EAAKD,EAAIlnF,GAChCwzJ,EAAK70G,IAAKwuG,EAAK5iF,EAAK4c,EAAK/sB,EAAIp6D,GACjC,MAAMszJ,EAAQ3gE,EAAK6oE,EACbjI,EAAQC,EAAKgI,EAGnB,GAFIlI,IAAO3gE,EAAK3yF,EAAI2yF,GAChB4gE,IAAOC,EAAKxzJ,EAAIwzJ,GAChB7gE,EAAK6oE,GAAahI,EAAKgI,EACzB,MAAM,IAAIziK,MAAM,uCAAyCyG,GAE3D,MAAO,CAAE8zJ,QAAO3gE,KAAI4gE,QAAOC,SAIjC74G,IAKUgoE,OAAO,GAoBLy4C,GAAU/F,gBC7FxB,IAAAoG,GAAA,IAAAtxH,QAIM,MAAOuxH,GAMT1jJ,WAAAA,CAAYnH,GALZmxG,GAAA,KAAAy5C,QAAW,GAMPr4C,GAA0C,KAA3BiB,GAAWxzG,GAAoB,sBAAuB,aAAc,cACnFi2G,GAAK20C,GAAL1yJ,KAAmBo7G,GAAQtzG,GAC/B,CAKA,cAAIA,GAAuB,OAAOk2G,GAAK00C,GAAL1yJ,KAAkB,CAQpD,aAAIu1C,GAAsB,OAAOo9G,GAAWC,iBAAiB50C,GAAK00C,GAAL1yJ,MAAmB,CAShF,uBAAI6yJ,GAAgC,OAAOF,GAAWC,iBAAiB50C,GAAK00C,GAAL1yJ,OAAkB,EAAO,CAKhGo1D,IAAAA,CAAK//D,GACDglH,GAAsC,KAAvBiB,GAAWjmH,GAAgB,wBAAyB,SAAUA,GAE7E,MAAMo2F,EAAM4mE,GAAUj9F,KAAK4lD,GAAa3lH,GAAS2lH,GAAagD,GAAK00C,GAAL1yJ,OAAmB,CAC7E2sJ,MAAM,IAGV,OAAO5vB,GAAUjoD,KAAK,CAClBx+C,EAAGmmF,GAAQhxB,EAAIn1D,EAAG,IAClBvjC,EAAG0pH,GAAQhxB,EAAI14F,EAAG,IAClB6X,EAAI6gF,EAAI8hE,SAAW,GAAM,IAEjC,CAwBAuF,mBAAAA,CAAoBrlB,GAChB,MAAMslB,EAASJ,GAAWC,iBAAiBnlB,GAC3C,OAAOryB,GAAQi3C,GAAUzC,gBAAgB50C,GAAagD,GAAK00C,GAAL1yJ,OAAmBjP,GAASgiK,IAAS,GAC/F,CA2BA,uBAAOH,CAAiBjiK,EAAgBqiK,GACpC,IAAIp3J,EAAQ7K,GAASJ,EAAK,OAG1B,GAAqB,KAAjBiL,EAAMzH,OAAe,CAErB,OAAOinH,GADQi3C,GAAUl+E,aAAav4E,IAASo3J,G,CAKnD,GAAqB,KAAjBp3J,EAAMzH,OAAe,CACrB,MAAMkU,EAAM,IAAI26C,WAAW,IAC3B36C,EAAI,GAAK,EACTA,EAAI0F,IAAInS,EAAO,GACfA,EAAQyM,C,CAIZ,OAAO+yG,GADOi3C,GAAU/F,gBAAgBzD,QAAQjtJ,GAC3B4vJ,WAAWwH,GACpC,CAoBA,uBAAOrF,CAAiBt4J,EAAmBq7D,GACvC2pD,GAAsC,KAAvBiB,GAAWjmH,GAAgB,wBAAyB,SAAUA,GAE7E,MAAMo2F,EAAMsxC,GAAUjoD,KAAKpkB,GAE3B,IAAIuiG,EAAUZ,GAAUt1B,UAAUywB,YAAYxyC,GAAa/4G,GAAO,CAAEwpF,EAAIn1D,EAAGm1D,EAAI14F,MAC/EkgK,EAAUA,EAAQvF,eAAejiE,EAAI2xC,SAErC,MAAM21B,EAASE,EAAQtF,iBAAiB3yC,GAAa3lH,IAGrD,OAFAglH,GAAyB,MAAV04C,EAAgB,+BAAgC,YAAariG,GAErE,KAAOqiG,EAAO/pJ,OAAM,EAC/B,CAYA,gBAAOkqJ,CAAUC,EAAeryE,EAAekyE,GAC3C,MAAMI,EAAOf,GAAU/F,gBAAgBzD,QAAQ8J,GAAWC,iBAAiBO,GAAI19I,UAAU,IACnF49I,EAAOhB,GAAU/F,gBAAgBzD,QAAQ8J,GAAWC,iBAAiB9xE,GAAIrrE,UAAU,IACzF,MAAO,KAAO29I,EAAKhpJ,IAAIipJ,GAAMrqJ,QAAQgqJ,EACzC,ECxLJ,SAASM,GAAY5jJ,GACjB,IAAIqqC,EAASrqC,EAAM1T,SAAS,IAC5B,KAAO+9C,EAAO5lD,OAAS,GAAK4lD,EAAS,IAAMA,EAC3C,MAAO,KAAOA,CAClB,CAEA,SAASw5G,GAAkB52J,EAAkButB,EAAgB/1B,GACzD,IAAI4lD,EAAS,EACb,IAAK,IAAIllD,EAAI,EAAGA,EAAIV,EAAQU,IACxBklD,EAAmB,IAATA,EAAgBp9C,EAAKutB,EAASr1B,GAE5C,OAAOklD,CACX,CAOA,SAASy5G,GAAgB72J,EAAkButB,EAAgBupI,EAAqBt/J,GAC5E,MAAM4lD,EAAqB,GAE3B,KAAO05G,EAAcvpI,EAAS,EAAI/1B,GAAQ,CACtC,MAAMohG,EAAUm+D,GAAQ/2J,EAAM82J,GAE9B15G,EAAOz7C,KAAKi3F,EAAQx7C,QAGpBogE,IADAs5C,GAAel+D,EAAQ0qB,WACD/1F,EAAS,EAAI/1B,EAAQ,uBAAwB,iBAAkB,CACjFkT,OAAQ1K,EAAMxI,SAAQ+1B,U,CAI9B,MAAO,CAAC+1F,SAAW,EAAI9rH,EAAS4lD,OAAQA,EAC5C,CAGA,SAAS25G,GAAQ/2J,EAAkButB,GAC/BiwF,GAAuB,IAAhBx9G,EAAKxI,OAAc,iBAAkB,iBAAkB,CAC1DkT,OAAQ1K,EAAMxI,OAAQ,EAAG+1B,OAAQ,IAGrC,MAAMypI,EAAezpI,IACjBiwF,GAAOjwF,GAAUvtB,EAAKxI,OAAQ,+BAAgC,iBAAkB,CAC5EkT,OAAQ1K,EAAMxI,OAAQwI,EAAKxI,OAAQ+1B,YAK3C,GAAIvtB,EAAKutB,IAAW,IAAM,CACtB,MAAM0pI,EAAej3J,EAAKutB,GAAU,IACpCypI,EAAYzpI,EAAS,EAAI0pI,GAEzB,MAAMz/J,EAASo/J,GAAkB52J,EAAMutB,EAAS,EAAG0pI,GAGnD,OAFAD,EAAYzpI,EAAS,EAAI0pI,EAAez/J,GAEjCq/J,GAAgB72J,EAAMutB,EAAQA,EAAS,EAAI0pI,EAAcA,EAAez/J,E,CAE5E,GAAIwI,EAAKutB,IAAW,IAAM,CAC7B,MAAM/1B,EAASwI,EAAKutB,GAAU,IAG9B,OAFAypI,EAAYzpI,EAAS,EAAI/1B,GAElBq/J,GAAgB72J,EAAMutB,EAAQA,EAAS,EAAG/1B,E,CAE9C,GAAIwI,EAAKutB,IAAW,IAAM,CAC7B,MAAM0pI,EAAej3J,EAAKutB,GAAU,IACpCypI,EAAYzpI,EAAS,EAAI0pI,GAEzB,MAAMz/J,EAASo/J,GAAkB52J,EAAMutB,EAAS,EAAG0pI,GACnDD,EAAYzpI,EAAS,EAAI0pI,EAAez/J,GAGxC,MAAO,CAAE8rH,SAAW,EAAI2zC,EAAez/J,EAAS4lD,OADjCqhE,GAAQz+G,EAAK6D,MAAM0pB,EAAS,EAAI0pI,EAAc1pI,EAAS,EAAI0pI,EAAez/J,I,CAGtF,GAAIwI,EAAKutB,IAAW,IAAM,CAC7B,MAAM/1B,EAASwI,EAAKutB,GAAU,IAC9BypI,EAAYzpI,EAAS,EAAI/1B,GAGzB,MAAO,CAAE8rH,SAAW,EAAI9rH,EAAS4lD,OADlBqhE,GAAQz+G,EAAK6D,MAAM0pB,EAAS,EAAGA,EAAS,EAAI/1B,I,CAI/D,MAAO,CAAE8rH,SAAU,EAAGlmE,OAAQu5G,GAAY32J,EAAKutB,IACnD,CAKM,SAAU2pI,GAAUh1C,GACtB,MAAMliH,EAAO5L,GAAS8tH,EAAO,QACvBtpB,EAAUm+D,GAAQ/2J,EAAM,GAE9B,OADA09G,GAAe9kB,EAAQ0qB,WAAatjH,EAAKxI,OAAQ,oCAAqC,OAAQ0qH,GACvFtpB,EAAQx7C,MACnB,CC/FA,SAAS+5G,GAAgBpkJ,GACrB,MAAMqqC,EAAwB,GAC9B,KAAOrqC,GACHqqC,EAAOlqB,QAAgB,IAARngB,GACfA,IAAU,EAEd,OAAOqqC,CACX,CAEA,SAASg6G,GAAQ7xD,GACb,GAAI5oG,MAAMiG,QAAQ2iG,GAAS,CACvB,IAAItpE,EAAyB,GAK7B,GAJAspE,EAAO72F,QAAQ,SAAS8N,GACpByf,EAAUA,EAAQ32B,OAAO8xJ,GAAQ56I,GACrC,GAEIyf,EAAQzkC,QAAU,GAElB,OADAykC,EAAQ/I,QAAQ,IAAO+I,EAAQzkC,QACxBykC,EAGX,MAAMzkC,EAAS2/J,GAAgBl7H,EAAQzkC,QAGvC,OAFAA,EAAO07B,QAAQ,IAAO17B,EAAOA,QAEtBA,EAAO8N,OAAO22B,E,CAIzB,MAAMj8B,EAAsBrD,MAAMvC,UAAUyJ,MAAMzI,KAAKhH,GAASmxG,EAAQ,WAExE,GAAoB,IAAhBvlG,EAAKxI,QAAgBwI,EAAK,IAAM,IAChC,OAAOA,EAEJ,GAAIA,EAAKxI,QAAU,GAEtB,OADAwI,EAAKkzB,QAAQ,IAAOlzB,EAAKxI,QAClBwI,EAGX,MAAMxI,EAAS2/J,GAAgBn3J,EAAKxI,QAGpC,OAFAA,EAAO07B,QAAQ,IAAO17B,EAAOA,QAEtBA,EAAO8N,OAAOtF,EACzB,CAEA,MAAMq3J,GAAU,mBAKV,SAAUC,GAAU/xD,GACtB,IAAInoD,EAAS,KACb,IAAK,MAAMnvC,KAAKmpJ,GAAQ7xD,GACpBnoD,GAAUi6G,GAAQppJ,GAAK,GACvBmvC,GAAUi6G,GAAY,GAAJppJ,GAEtB,OAAOmvC,CACX,CCtCM,SAAUm6G,GAAe7+J,EAAmBq7D,GAC9C,OAfE,SAAyB//D,GAC3B,IAAIwjK,EAMJ,OAJIA,EADgB,kBAATxjK,EACEgiK,GAAWC,iBAAiBjiK,GAAK,GAEjCA,EAAI4kD,UAEV4xE,GAAWZ,GAAU,KAAO4tC,EAAO1+I,UAAU,IAAIA,UAAU,IACtE,CAOW2+I,CAAezB,GAAWhF,iBAAiBt4J,EAAQq7D,GAC9D,CCJA,MAAMgrD,GAAO9B,OAAO,GACd2iB,GAAO3iB,OAAO,GACd4iB,GAAQ5iB,OAAO,IACf6iB,GAAQ7iB,OAAO,IACf8iB,GAAQ9iB,OAAO,IACfy6C,GAAcz6C,OAAO,sEAErB06C,GAAY,OAqNlB,SAASC,GAAiBhhK,EAAiB8hD,GACvC,IAAIm/G,EAAYjhK,EAAQyI,SAAS,IACjC,KAAOw4J,EAAUrgK,OAAS,GAAKqgK,EAAY,IAAMA,EAEjD,OADAA,GAAa5iH,GAAOyD,GAAM5/B,UAAU,GAC7B,KAAO++I,CAClB,CAEA,SAASC,GAAc/kJ,GACnB,MAAc,OAAVA,EAAyB,KACtBy3G,GAAWz3G,EACtB,CAEA,SAASglJ,GAAiBhlJ,EAAY4G,GAClC,IACI,OAAO8lH,GAAc1sH,E,CACvB,MAAOrf,GACLgqH,IAAe,EAAOhqH,EAAMuU,QAAS0R,EAAO5G,E,CAEpD,CAEA,SAASilJ,GAAwBjlJ,EAAY4G,GACzC,IACI,IAAKhd,MAAMiG,QAAQmQ,GAAU,MAAM,IAAI1f,MAAM,oCAC7C,MAAM+pD,EAA+B,GACrC,IAAK,IAAIllD,EAAI,EAAGA,EAAI6a,EAAMvb,OAAQU,IAAK,CACnC,MAAMkpI,EAAsBruH,EAAM7a,GAClC,IAAKyE,MAAMiG,QAAQw+H,GAAS,MAAM,IAAI/tI,MAAM,iBAADiS,OAAmBpN,EAAE,qBAChE,GAAoB,IAAhBkpI,EAAK5pI,OAAgB,MAAM,IAAInE,MAAM,iBAADiS,OAAmBpN,EAAE,oBAC7D,IAAKkpI,EAAK,GAAM,MAAM,IAAI/tI,MAAM,iBAADiS,OAAmBpN,EAAE,oBACpDklD,EAAOz7C,KAAK,CACRqoH,QAAiB8tC,GAAc12B,EAAK,IACpCt1B,MAAOmsD,GAAW72B,EAAK,GAAI,SAC3B3E,QAASw7B,GAAW72B,EAAK,GAAI,WAC7BrtE,UAAWqsE,GAAUjoD,KAAK,CACtBsoD,QAAgBy3B,GAAa92B,EAAK,GAAI,WACtCznG,EAAGmlF,GAAasiB,EAAK,GAAI,IACzBhrI,EAAG0oH,GAAasiB,EAAK,GAAI,O,CAIrC,OAAOhkF,C,CACT,MAAO1pD,GACLgqH,IAAe,EAAOhqH,EAAMuU,QAAS0R,EAAO5G,E,CAEpD,CAEA,SAASmlJ,GAAa/4C,EAAgBxlG,GAClC,MAAe,OAAXwlG,EAA0B,EACvBG,GAAUH,EAAQxlG,EAC7B,CAEA,SAASs+I,GAAW94C,EAAgBxlG,GAChC,GAAe,OAAXwlG,EAAmB,OAAOJ,GAC9B,MAAMhsG,EAAQssG,GAAUF,EAAQxlG,GAEhC,OADA+jG,GAAe3qG,GAAS2kJ,GAAa,0BAA2B/9I,EAAO5G,GAChEA,CACX,CAEA,SAASq5C,GAAa+yD,EAAsBrmH,GACxC,MAAMia,EAAQssG,GAAUF,EAAQ,SAC1B/hE,EAAS2iE,GAAUhtG,GAEzB,OADA2qG,GAAetgE,EAAO5lD,QAAU,GAAI,kBAAF,MAAA8N,OAA4BxM,GAASia,GAChEqqC,CACX,CAEA,SAAS+6G,GAAiBplJ,GACtB,OAAO0sH,GAAc1sH,GAAOy7C,IAAKp9C,GAAQ,CAAEA,EAAI44G,QAAS54G,EAAImuH,aAChE,CAeA,SAAS64B,GAAarlJ,EAAsB4G,GACxC+jG,GAAe/gH,MAAMiG,QAAQmQ,GAAQ,WAAFzN,OAAcqU,GAAU,QAAS5G,GACpE,IAAK,IAAI7a,EAAI,EAAGA,EAAI6a,EAAMvb,OAAQU,IAC9BwlH,GAAeY,GAAYvrG,EAAM7a,GAAI,IAAK,0BAA2B,SAAFoN,OAAYpN,EAAE,KAAK6a,EAAM7a,IAEhG,OAAO6a,CACX,CA8GA,SAASslJ,GAAmBjoE,EAAqBgtC,GAC7C,IAAIqD,EACJ,IAEI,GADAA,EAAUy3B,GAAa96B,EAAO,GAAI,WAClB,IAAZqD,GAA6B,IAAZA,EAAiB,MAAM,IAAIptI,MAAM,c,CACxD,MAAOK,GACLgqH,IAAe,EAAO,kBAAmB,UAAW0f,EAAO,G,CAG/D,MAAMzjG,EAAImlF,GAAase,EAAO,GAAI,IAC5BhnI,EAAI0oH,GAAase,EAAO,GAAI,IAE5BrpE,EAAYqsE,GAAUjoD,KAAK,CAAEx+C,IAAGvjC,IAAGqqI,YACzCrwC,EAAGr8B,UAAYA,CACnB,CAsQA,IAAA8sE,GAAA,IAAAp8F,QAAA6zH,GAAA,IAAA7zH,QAAAy9E,GAAA,IAAAz9E,QAAA8zH,GAAA,IAAA9zH,QAAA+zH,GAAA,IAAA/zH,QAAAg0H,GAAA,IAAAh0H,QAAAi0H,GAAA,IAAAj0H,QAAAk0H,GAAA,IAAAl0H,QAAAm0H,GAAA,IAAAn0H,QAAAo0H,GAAA,IAAAp0H,QAAA6uH,GAAA,IAAA7uH,QAAAq0H,GAAA,IAAAr0H,QAAAs0H,GAAA,IAAAt0H,QAAAu0H,GAAA,IAAAv0H,QAAAw0H,GAAA,IAAAx0H,QAAAy0H,GAAA,IAAAz0H,QAAA00H,GAAA,IAAA10H,QAAA20H,GAAA,IAAAxvH,QAaM,MAAOyvH,GAyBT,QAAIjmK,GAAwB,OAAOiuH,GAAKwf,GAALx9H,KAAY,CAC/C,QAAIjQ,CAAK2f,GACL,OAAQA,GACJ,KAAK,KACDquG,GAAKyf,GAALx9H,KAAa,MACb,MACJ,KAAK,EAAG,IAAK,SACT+9G,GAAKyf,GAALx9H,KAAa,GACb,MACJ,KAAK,EAAG,IAAK,SAAU,IAAK,WACxB+9G,GAAKyf,GAALx9H,KAAa,GACb,MACJ,KAAK,EAAG,IAAK,SAAU,IAAK,WACxB+9G,GAAKyf,GAALx9H,KAAa,GACb,MACJ,KAAK,EAAG,IAAK,SAAU,IAAK,WACxB+9G,GAAKyf,GAALx9H,KAAa,GACb,MACJ,KAAK,EAAG,IAAK,SAAU,IAAK,WACxB+9G,GAAKyf,GAALx9H,KAAa,GACb,MACJ,QACIq6G,IAAe,EAAO,+BAAgC,OAAQ3qG,GAE1E,CAKA,YAAIumJ,GACA,OAAQj2J,KAAKjQ,MACT,KAAK,EAAG,MAAO,SACf,KAAK,EAAG,MAAO,WACf,KAAK,EAAG,MAAO,WACf,KAAK,EAAG,MAAO,WACf,KAAK,EAAG,MAAO,WAGnB,OAAO,IACX,CAMA,MAAIqiG,GACA,MAAM1iF,EAAQsuG,GAAKi3C,GAALj1J,MACd,OAAa,MAAT0P,GAA+B,IAAd1P,KAAKjQ,KAAqB80I,GACxCn1H,CACX,CACA,MAAI0iF,CAAG1iF,GACHquG,GAAKk3C,GAALj1J,KAAqB,MAAT0P,EAAiB,KAAMy3G,GAAWz3G,GAClD,CAKA,SAAI+4F,GAAkB,OAAOuV,GAAKk3C,GAALl1J,KAAa,CAC1C,SAAIyoG,CAAM/4F,GAAuBquG,GAAKm3C,GAALl1J,KAAci8G,GAAUvsG,EAAO,SAAU,CAK1E,YAAIm7H,GAAqB,OAAO7sB,GAAKm3C,GAALn1J,KAAgB,CAChD,YAAI6qI,CAASn7H,GAAuBquG,GAAKo3C,GAALn1J,KAAiBg8G,GAAUtsG,GAAQ,CAQvE,YAAI65H,GACA,MAAM75H,EAAQsuG,GAAKo3C,GAALp1J,MACd,OAAa,MAAT0P,GAAgC,IAAd1P,KAAKjQ,MAA4B,IAAdiQ,KAAKjQ,KACvC2f,EAD6DgsG,EAExE,CACA,YAAI6tB,CAAS75H,GACTquG,GAAKq3C,GAALp1J,KAA2B,MAAT0P,EAAiB,KAAMssG,GAAUtsG,EAAO,YAC9D,CAMA,wBAAI+5H,GACA,MAAM/5H,EAAQsuG,GAAKq3C,GAALr1J,MACd,OAAa,MAAT0P,EACkB,IAAd1P,KAAKjQ,MAA4B,IAAdiQ,KAAKjQ,KAAqB2rH,GAC1C,KAEJhsG,CACX,CACA,wBAAI+5H,CAAqB/5H,GACrBquG,GAAKs3C,GAALr1J,KAAuC,MAAT0P,EAAiB,KAAMssG,GAAUtsG,EAAO,wBAC1E,CAMA,gBAAI85H,GACA,MAAM95H,EAAQsuG,GAAKs3C,GAALt1J,MACd,OAAa,MAAT0P,EACkB,IAAd1P,KAAKjQ,MAA4B,IAAdiQ,KAAKjQ,KAAqB2rH,GAC1C,KAEJhsG,CACX,CACA,gBAAI85H,CAAa95H,GACbquG,GAAKu3C,GAALt1J,KAA+B,MAAT0P,EAAiB,KAAMssG,GAAUtsG,EAAO,gBAClE,CAMA,QAAI/S,GAAiB,OAAOqhH,GAAKa,GAAL7+G,KAAY,CACxC,QAAIrD,CAAK+S,GAAoBquG,GAAKc,GAAL7+G,KAAao7G,GAAQ1rG,GAAQ,CAK1D,SAAIA,GAAkB,OAAOsuG,GAAKu3C,GAALv1J,KAAa,CAC1C,SAAI0P,CAAMA,GACNquG,GAAKw3C,GAALv1J,KAAcg8G,GAAUtsG,EAAO,SACnC,CAKA,WAAI0pH,GAAoB,OAAOpb,GAAKw3C,GAALx1J,KAAe,CAC9C,WAAIo5H,CAAQ1pH,GAAuBquG,GAAKy3C,GAALx1J,KAAgBg8G,GAAUtsG,GAAQ,CAKrE,aAAIghD,GAAgC,OAAOstD,GAAKiyC,GAALjwJ,OAAa,IAAM,CAC9D,aAAI0wD,CAAUhhD,GACVquG,GAAKkyC,GAALjwJ,KAAsB,MAAT0P,EAAiB,KAAMqtH,GAAUjoD,KAAKplE,GACvD,CAQA,cAAIm6H,GACA,MAAMn6H,EAAQsuG,GAAKy3C,GAALz1J,OAAoB,KAClC,OAAa,MAAT0P,EACkB,IAAd1P,KAAKjQ,MAA4B,IAAdiQ,KAAKjQ,MAA4B,IAAdiQ,KAAKjQ,KAGpC,GAEJ,KAEJ2f,CACX,CACA,cAAIm6H,CAAWn6H,GACXquG,GAAK03C,GAALz1J,KAA6B,MAAT0P,EAAiB,KAAM0sH,GAAc1sH,GAC7D,CAEA,qBAAIo6H,GACA,MAAMp6H,EAAQsuG,GAAK83C,GAAL91J,OAAe,KAC7B,OAAa,MAAT0P,GACkB,IAAd1P,KAAKjQ,KAGE,GAGR2f,CACX,CACA,qBAAIo6H,CAAkBosB,GAClBn4C,GAAK+3C,GAAL91J,KAAwB,MAATk2J,EAAiB,KAAMA,EAAM/qG,IAAK1zD,GAC/CqmI,GAAiBrmI,IACvB,CAKA,oBAAIm2I,GACA,MAAMl+H,EAAQsuG,GAAK03C,GAAL11J,MACd,OAAa,MAAT0P,GAA+B,IAAd1P,KAAKjQ,KAAqB2rH,GACxChsG,CACX,CACA,oBAAIk+H,CAAiBl+H,GACjBquG,GAAK23C,GAAL11J,KAAmC,MAAT0P,EAAiB,KAAMssG,GAAUtsG,EAAO,oBACtE,CAKA,uBAAIw6H,GAGA,IAAIx6H,EAAQsuG,GAAK23C,GAAL31J,MACZ,OAAa,MAAT0P,GAA+B,IAAd1P,KAAKjQ,KAAqB,GACxC2f,CACX,CACA,uBAAIw6H,CAAoBx6H,GACpB,GAAa,MAATA,EAAe,CACf2qG,GAAe/gH,MAAMiG,QAAQmQ,GAAQ,uCAAwC,QAASA,GACtFA,EAAQA,EAAMlP,QACd,IAAK,IAAI3L,EAAI,EAAGA,EAAI6a,EAAMvb,OAAQU,IAC9BwlH,GAAeY,GAAYvrG,EAAM7a,GAAI,IAAK,4BAA6B,SAAFoN,OAAYpN,EAAE,KAAK6a,EAAM7a,G,CAGtGkpH,GAAK43C,GAAL31J,KAA4B0P,EAChC,CA8BA,SAAI06H,GACA,OAAmB,MAAfpsB,GAAK63C,GAAL71J,MAA8B,KAC3Bg+G,GAAK63C,GAAL71J,MAAYmrD,IAAKxzD,GAAMb,OAAOyW,OAAO,CAAC,EAAI5V,GACrD,CACA,SAAIyyI,CAAM+rB,GACN,GAAc,MAAVA,EAEA,YADAp4C,GAAK83C,GAAL71J,KAAc,MAIlB,MAAMoqI,EAAqB,GACrBgsB,EAAiC,GACvC,IAAK,IAAIvhK,EAAI,EAAGA,EAAIshK,EAAOhiK,OAAQU,IAAK,CACpC,MAAMwhK,EAAOF,EAAOthK,GAEpB,GAAIqmH,GAAYm7C,GAAO,CACnBl8C,GAAO6D,GAAK43C,GAAL51J,MAAW,2CAA4C,wBAAyB,CACnF66G,UAAW,gBAGf,IAAIl+G,EAAO5L,GAASslK,GAIpB,GAHAh8C,GAAe19G,EAAKxI,QAAUmgK,GAAW,oBAAqB,SAAFryJ,OAAYpN,EAAE,KAAKwhK,GAG3E15J,EAAKxI,SAAWmgK,GAAW,CAC3B,MAAMgC,EAAS,IAAItzG,WAAWsxG,IAC9BgC,EAAOvoJ,IAAIpR,GACXA,EAAO25J,C,CAGX,MAAMC,EAASv4C,GAAK43C,GAAL51J,MAAUw2J,oBAAoB75J,GACvC85J,EAAQr7C,GAAQ4C,GAAK43C,GAAL51J,MAAU02J,oBAAoB/5J,EAAM45J,IAE1DnsB,EAAM9rI,KAAK,CACP3B,KAAMy+G,GAAQz+G,GACdg6J,WAAYv7C,GAAQm7C,GACpBE,UAEJL,EAAgB93J,KAAKi2J,GAAiB,EAAGgC,G,KAEtC,CACH,MAAMA,EAASn7C,GAAQi7C,EAAKM,YAC5BvsB,EAAM9rI,KAAK,CACP3B,KAAMy+G,GAAQi7C,EAAK15J,MACnBg6J,WAAYJ,EACZE,MAAOr7C,GAAQi7C,EAAKI,SAExBL,EAAgB93J,KAAKi2J,GAAiB,EAAGgC,G,EAIjDx4C,GAAK83C,GAAL71J,KAAcoqI,GACdrsB,GAAK43C,GAAL31J,KAA4Bo2J,EAChC,CAEA,OAAIjsB,GAA2B,OAAOnsB,GAAK43C,GAAL51J,KAAW,CACjD,OAAImqI,CAAIA,GAEApsB,GAAK63C,GAAL51J,KADO,MAAPmqI,EACY,KA51BxB,SAAuBA,GA8CnB,MAAO,CAAEqsB,oBA5CoBH,IAEzB,GAAI,qBAAsBlsB,GAItB,GAAI,wBAAyBA,GAA2C,oBAA7BA,EAAIqsB,oBAC3C,OAAOzlK,GAASo5I,EAAIqsB,oBAAoBp7C,GAAQi7C,UAGjD,GAAI,wBAAyBlsB,GAA2C,oBAA7BA,EAAIqsB,oBAGlD,OAAOzlK,GAASo5I,EAAIqsB,oBAAoBH,IAI5C,GAAI,wBAAyBlsB,GAA2C,oBAA7BA,EAAIysB,oBAC3C,OAAO7lK,GAASo5I,EAAIysB,oBAAoBx7C,GAAQi7C,KAGpDh8C,IAAe,EAAO,0BAA2B,MAAO8vB,IAuB9BusB,oBApBFA,CAACL,EAAkBM,IAGvC,qBAAsBxsB,GAAwC,oBAA1BA,EAAI0sB,iBACjC9lK,GAASo5I,EAAI0sB,iBAAiBz7C,GAAQi7C,GAAOj7C,GAAQu7C,KAI5D,wBAAyBxsB,GAA2C,oBAA7BA,EAAIusB,oBACpCvsB,EAAIusB,oBAAoBL,EAAMM,GAIrC,wBAAyBxsB,GAA2C,oBAA7BA,EAAI2sB,oBACpC/lK,GAASo5I,EAAI2sB,oBAAoB17C,GAAQi7C,GAAOj7C,GAAQu7C,UAGnEt8C,IAAe,EAAO,0BAA2B,MAAO8vB,GAIhE,CA+yBwB4sB,CAAc5sB,GAElC,CAKAl7H,WAAAA,GAAA6rG,GAAA,KAAAi7C,IA5UA98C,GAAA,KAAAukB,QAAK,GACLvkB,GAAA,KAAAg8C,QAAG,GACHh8C,GAAA,KAAA4F,QAAK,GACL5F,GAAA,KAAAi8C,QAAM,GACNj8C,GAAA,KAAAk8C,QAAS,GACTl8C,GAAA,KAAAm8C,QAAS,GACTn8C,GAAA,KAAAo8C,QAAqB,GACrBp8C,GAAA,KAAAq8C,QAAa,GACbr8C,GAAA,KAAAs8C,QAAM,GACNt8C,GAAA,KAAAu8C,QAAQ,GACRv8C,GAAA,KAAAg3C,QAAI,GACJh3C,GAAA,KAAAw8C,QAAW,GACXx8C,GAAA,KAAAy8C,QAAiB,GACjBz8C,GAAA,KAAA08C,QAAoB,GACpB18C,GAAA,KAAA28C,QAAI,GACJ38C,GAAA,KAAA48C,QAAM,GACN58C,GAAA,KAAA68C,QAAM,GA6TF/3C,GAAKyf,GAALx9H,KAAa,MACb+9G,GAAKk3C,GAALj1J,KAAW,MACX+9G,GAAKm3C,GAALl1J,KAAc,GACd+9G,GAAKo3C,GAALn1J,KAAiB07G,IACjBqC,GAAKq3C,GAALp1J,KAAiB,MACjB+9G,GAAKs3C,GAALr1J,KAA6B,MAC7B+9G,GAAKu3C,GAALt1J,KAAqB,MACrB+9G,GAAKc,GAAL7+G,KAAa,MACb+9G,GAAKw3C,GAALv1J,KAAc07G,IACdqC,GAAKy3C,GAALx1J,KAAgB07G,IAChBqC,GAAKkyC,GAALjwJ,KAAY,MACZ+9G,GAAK03C,GAALz1J,KAAmB,MACnB+9G,GAAK23C,GAAL11J,KAAyB,MACzB+9G,GAAK43C,GAAL31J,KAA4B,MAC5B+9G,GAAK63C,GAAL51J,KAAY,MACZ+9G,GAAK83C,GAAL71J,KAAc,MACd+9G,GAAK+3C,GAAL91J,KAAc,KAClB,CAKA,QAAIq1C,GACA,OAAsB,MAAlBr1C,KAAK0wD,UAA4B,KAC9B61D,GAAUrN,GAAA68C,GAAA/1J,KAAKg3J,IAAcj/J,KAAnBiI,MAAoB,GAAM,GAC/C,CAQA,gBAAIi3J,GACA,OAAO1wC,GAAUvmH,KAAKk3J,mBAC1B,CAKA,QAAIpiF,GACA,OAAsB,MAAlB90E,KAAK0wD,UAA4B,KAC9BwjG,GAAel0J,KAAKi3J,aAAcj3J,KAAK0wD,UAClD,CAKA,iBAAIymG,GACA,OAAsB,MAAlBn3J,KAAK0wD,UAA4B,KAC9BiiG,GAAWhF,iBAAiB3tJ,KAAKi3J,aAAcj3J,KAAK0wD,UAC/D,CAQA0mG,QAAAA,GACI,OAAyB,MAAlBp3J,KAAK0wD,SAChB,CA4BA,cAAI6sE,GACA,OAAOrkB,GAAA68C,GAAA/1J,KAAKg3J,IAAcj/J,KAAnBiI,MAAoB,GAAM,EACrC,CAQA,sBAAIk3J,GACA,OAAOh+C,GAAA68C,GAAA/1J,KAAKg3J,IAAcj/J,KAAnBiI,MAAoB,GAAO,EACtC,CAMAq3J,SAAAA,GACI,MAAMh+C,EAAQr5G,KAAKs3J,aAGnB,OAAIj+C,EAAM/jG,QAAQ,IAAM,EAAY,EAGpB+jG,EAAMlkC,KAC1B,CAMAmiF,UAAAA,GAGI,MAAMC,EAA+B,MAAjBv3J,KAAKupI,SACnBiuB,EAA+B,MAArBx3J,KAAKwpI,cAAqD,MAA7BxpI,KAAKypI,qBAC5CguB,EAAoC,MAAnBz3J,KAAK6pI,WACtB6tB,EAAqC,MAA1B15C,GAAK03C,GAAL11J,OAAkCg+G,GAAK23C,GAAL31J,MAM1B,MAArBA,KAAKwpI,cAAqD,MAA7BxpI,KAAKypI,sBAClCtvB,GAAOn6G,KAAKwpI,cAAgBxpI,KAAKypI,qBAAsB,yCAA0C,WAAY,CAAE/5H,MAAO1P,OAO1Hm6G,IAAQq9C,GAAyB,IAAdx3J,KAAKjQ,MAA4B,IAAdiQ,KAAKjQ,KAAa,oEAAqE,WAAY,CAAE2f,MAAO1P,OAClJm6G,GAAqB,IAAdn6G,KAAKjQ,OAAe0nK,EAAe,4CAA6C,WAAY,CAAE/nJ,MAAO1P,OAE5G,MAAMq5G,EAAuB,GA6B7B,OA1BiB,MAAbr5G,KAAKjQ,KACLspH,EAAM/6G,KAAK0B,KAAKjQ,MAGZiQ,KAAK8pI,mBAAqB9pI,KAAK8pI,kBAAkB31I,OACjDklH,EAAM/6G,KAAK,GACJk5J,EACPn+C,EAAM/6G,KAAK,GACJi5J,GACPl+C,EAAM/6G,KAAK,GACNm5J,GAAiBp+C,EAAM/6G,KAAK,IAC1Bm5J,GACPp+C,EAAM/6G,KAAK,GACX+6G,EAAM/6G,KAAK,KACJo5J,GAAW13J,KAAKoyF,KAGvBinB,EAAM/6G,KAAK,GACX+6G,EAAM/6G,KAAK,GACX+6G,EAAM/6G,KAAK,IAJX+6G,EAAM/6G,KAAK,IASnB+6G,EAAMvkB,OAECukB,CACX,CASA21B,QAAAA,GACI,OAAsB,IAAdhvI,KAAKjQ,IACjB,CASAk/I,QAAAA,GACI,OAAsB,IAAdjvI,KAAKjQ,IACjB,CASA87I,QAAAA,GACI,OAAsB,IAAd7rI,KAAKjQ,IACjB,CASAm/I,QAAAA,GACI,OAAsB,IAAdlvI,KAAKjQ,IACjB,CAKAg5F,KAAAA,GACI,OAAOitE,GAAYlhF,KAAK90E,KAC5B,CAKA25G,MAAAA,GACI,MAAM5mH,EAAK6X,GACE,MAALA,EAAoB,KACjBA,EAAE5O,WAGb,MAAO,CACHjM,KAAMiQ,KAAKjQ,KACXqiG,GAAIpyF,KAAKoyF,GAETz1F,KAAMqD,KAAKrD,KACX8rG,MAAOzoG,KAAKyoG,MACZoiC,SAAU93I,EAAEiN,KAAK6qI,UACjBtB,SAAUx2I,EAAEiN,KAAKupI,UACjBE,qBAAsB12I,EAAEiN,KAAKypI,sBAC7BD,aAAcz2I,EAAEiN,KAAKwpI,cACrB95H,MAAO3c,EAAEiN,KAAK0P,OACd0pH,QAASrmI,EAAEiN,KAAKo5H,SAChB3tC,IAAKzrF,KAAK0wD,UAAY1wD,KAAK0wD,UAAUipD,SAAU,KAC/CkwB,WAAY7pI,KAAK6pI,WAEzB,CAMA,WAAO/0D,CAAKiY,GACR,GAAU,MAANA,EAAc,OAAO,IAAIipE,GAE7B,GAAmB,kBAARjpE,EAAkB,CACzB,MAAMn0D,EAAU7nC,GAASg8F,GAEzB,GAAIn0D,EAAQ,IAAM,IACd,OAAOo9H,GAAYlhF,KAn+BnC,SAAsBn4E,GAClB,MAAMo9H,EAAc85B,GAAUl3J,GAE9B09G,GAAe/gH,MAAMiG,QAAQw6H,KAA8B,IAAlBA,EAAO5lI,QAAkC,IAAlB4lI,EAAO5lI,QACnE,6CAA8C,OAAQwI,GAE1D,MAAMowF,EAAsB,CACxBh9F,KAAU,EACV04G,MAAUosD,GAAa96B,EAAO,GAAI,SAClCwP,SAAUqrB,GAAW76B,EAAO,GAAI,YAChC8Q,SAAU+pB,GAAW76B,EAAO,GAAI,YAChC3nC,GAAUqiE,GAAc16B,EAAO,IAC/BrqH,MAAUklJ,GAAW76B,EAAO,GAAI,SAChCp9H,KAAUy+G,GAAQ2e,EAAO,IACzBX,QAAU1d,IAId,GAAsB,IAAlBqe,EAAO5lI,OAAgB,OAAO44F,EAElC,MAAMniF,EAAIgqJ,GAAW76B,EAAO,GAAI,KAC1BzjG,EAAIs+H,GAAW76B,EAAO,GAAI,KAC1BhnI,EAAI6hK,GAAW76B,EAAO,GAAI,KAEhC,GAAIzjG,IAAMolF,IAAQ3oH,IAAM2oH,GAEpB3uB,EAAGqsC,QAAUxuH,MAEV,CAGH,IAAIwuH,GAAWxuH,EAAI8xH,IAASH,GACxBnD,EAAU1d,KAAQ0d,EAAU1d,IAChC3uB,EAAGqsC,QAAUA,EAGb/e,GAAe+e,IAAY1d,IAAS9wG,IAAM4xH,IAAS5xH,IAAM6xH,GAAQ,yBAA0B,IAAK1C,EAAO,IAEvGhtC,EAAGr8B,UAAYqsE,GAAUjoD,KAAK,CAC1Bx+C,EAAGmlF,GAAase,EAAO,GAAI,IAC3BhnI,EAAG0oH,GAAase,EAAO,GAAI,IAC3BnvH,K,CAMR,OAAOmiF,CACX,CAm7BwC4qE,CAAa/+H,IAGzC,OAAOA,EAAQ,IACX,KAAK,EAAG,OAAOo9H,GAAYlhF,KAvzB3C,SAAuBn4E,GACnB,MAAMo9H,EAAc85B,GAAU9iK,GAAS4L,GAAM6D,MAAM,IAEnD65G,GAAe/gH,MAAMiG,QAAQw6H,KAA8B,IAAlBA,EAAO5lI,QAAkC,KAAlB4lI,EAAO5lI,QACnE,8CAA+C,OAAQinH,GAAQz+G,IAEnE,MAAMowF,EAAsB,CACxBh9F,KAAY,EACZqpI,QAAYw7B,GAAW76B,EAAO,GAAI,WAClCtxB,MAAYosD,GAAa96B,EAAO,GAAI,SACpCwP,SAAYqrB,GAAW76B,EAAO,GAAI,YAClC8Q,SAAY+pB,GAAW76B,EAAO,GAAI,YAClC3nC,GAAYqiE,GAAc16B,EAAO,IACjCrqH,MAAYklJ,GAAW76B,EAAO,GAAI,SAClCp9H,KAAYy+G,GAAQ2e,EAAO,IAC3B8P,WAAY6qB,GAAiB36B,EAAO,GAAI,eAI5C,OAAsB,IAAlBA,EAAO5lI,QAIX6gK,GAAmBjoE,EAAIgtC,EAAOv5H,MAAM,IAJFusF,CAOtC,CA6xBgD6qE,CAAch/H,IAC9C,KAAK,EAAG,OAAOo9H,GAAYlhF,KA52B3C,SAAuBn4E,GACnB,MAAMo9H,EAAc85B,GAAU9iK,GAAS4L,GAAM6D,MAAM,IAEnD65G,GAAe/gH,MAAMiG,QAAQw6H,KAA8B,IAAlBA,EAAO5lI,QAAkC,KAAlB4lI,EAAO5lI,QACnE,8CAA+C,OAAQinH,GAAQz+G,IAEnE,MAAMowF,EAAsB,CACxBh9F,KAAuB,EACvBqpI,QAAuBw7B,GAAW76B,EAAO,GAAI,WAC7CtxB,MAAuBosD,GAAa96B,EAAO,GAAI,SAC/C0P,qBAAuBmrB,GAAW76B,EAAO,GAAI,wBAC7CyP,aAAuBorB,GAAW76B,EAAO,GAAI,gBAC7CwP,SAAuB,KACvBsB,SAAuB+pB,GAAW76B,EAAO,GAAI,YAC7C3nC,GAAuBqiE,GAAc16B,EAAO,IAC5CrqH,MAAuBklJ,GAAW76B,EAAO,GAAI,SAC7Cp9H,KAAuBy+G,GAAQ2e,EAAO,IACtC8P,WAAuB6qB,GAAiB36B,EAAO,GAAI,eAIvD,OAAsB,IAAlBA,EAAO5lI,QAIX6gK,GAAmBjoE,EAAIgtC,EAAOv5H,MAAM,IAJFusF,CAOtC,CAg1BgD8qE,CAAcj/H,IAC9C,KAAK,EAAG,OAAOo9H,GAAYlhF,KAxwB3C,SAAuBn4E,GACnB,IAAIo9H,EAAc85B,GAAU9iK,GAAS4L,GAAM6D,MAAM,IAE7Cy1J,EAAW,IAEX7rB,EAA4B,KAGhC,GAAsB,IAAlBrQ,EAAO5lI,QAAgBmF,MAAMiG,QAAQw6H,EAAO,IAAK,CACjDk8B,EAAW,qBACX,MAAM6B,EAAS/9B,EAAO,GAAIg+B,EAAWh+B,EAAO,GAAIi+B,EAAUj+B,EAAO,GACjE1f,GAAe/gH,MAAMiG,QAAQu4J,GAAS,6CAA8C,YAAaA,GACjGz9C,GAAe/gH,MAAMiG,QAAQw4J,GAAW,mDAAoD,YAAaA,GACzG19C,GAAe/gH,MAAMiG,QAAQy4J,GAAU,8CAA+C,YAAaA,GACnG39C,GAAey9C,EAAO3jK,SAAW4jK,EAAS5jK,OAAQ,4DAA6D,SAAU4lI,GACzH1f,GAAey9C,EAAO3jK,SAAW6jK,EAAQ7jK,OAAQ,uDAAwD,SAAU4lI,GAEnHqQ,EAAQ,GACR,IAAK,IAAIv1I,EAAI,EAAGA,EAAIklI,EAAO,GAAG5lI,OAAQU,IAClCu1I,EAAM9rI,KAAK,CACP3B,KAAMm7J,EAAOjjK,GACb8hK,WAAYoB,EAASljK,GACrB4hK,MAAOuB,EAAQnjK,KAIvBklI,EAASA,EAAO,E,CAGpB1f,GAAe/gH,MAAMiG,QAAQw6H,KAA8B,KAAlBA,EAAO5lI,QAAmC,KAAlB4lI,EAAO5lI,QAAc,6CAAA8N,OACpCg0J,GAAa,OAAQ76C,GAAQz+G,IAE/E,MAAMowF,EAAsB,CACxBh9F,KAAuB,EACvBqpI,QAAuBw7B,GAAW76B,EAAO,GAAI,WAC7CtxB,MAAuBosD,GAAa96B,EAAO,GAAI,SAC/C0P,qBAAuBmrB,GAAW76B,EAAO,GAAI,wBAC7CyP,aAAuBorB,GAAW76B,EAAO,GAAI,gBAC7CwP,SAAuB,KACvBsB,SAAuB+pB,GAAW76B,EAAO,GAAI,YAC7C3nC,GAAuBqiE,GAAc16B,EAAO,IAC5CrqH,MAAuBklJ,GAAW76B,EAAO,GAAI,SAC7Cp9H,KAAuBy+G,GAAQ2e,EAAO,IACtC8P,WAAuB6qB,GAAiB36B,EAAO,GAAI,cACnD6T,iBAAuBgnB,GAAW76B,EAAO,GAAI,oBAC7CmQ,oBAAuBnQ,EAAO,KAG9BqQ,IAASr9C,EAAGq9C,MAAQA,GAExB/vB,GAAwB,MAATttB,EAAGqF,GAAY,yCAAFnwF,OAA4Cg0J,GAAa,OAAQt5J,GAE7F09G,GAAe/gH,MAAMiG,QAAQwtF,EAAGm9C,qBAAsB,gDAAiD,OAAQvtI,GAC/G,IAAK,IAAI9H,EAAI,EAAGA,EAAIk4F,EAAGm9C,oBAAoB/1I,OAAQU,IAC/CwlH,GAAeY,GAAYluB,EAAGm9C,oBAAoBr1I,GAAI,IAAK,sCAAFoN,OAAyCpN,EAAE,uBAAuB,OAAQ8H,GAIvI,OAAsB,KAAlBo9H,EAAO5lI,QAMX6gK,GAAmBjoE,EAAIgtC,EAAOv5H,MAAM,KANDusF,CASvC,CAqsBgDkrE,CAAcr/H,IAC9C,KAAK,EAAG,OAAOo9H,GAAYlhF,KA9pB3C,SAAuBn4E,GACnB,MAAMo9H,EAAc85B,GAAU9iK,GAAS4L,GAAM6D,MAAM,IAEnD65G,GAAe/gH,MAAMiG,QAAQw6H,KAA8B,KAAlBA,EAAO5lI,QAAmC,KAAlB4lI,EAAO5lI,QACpE,8CAA+C,OAAQinH,GAAQz+G,IAEnE,MAAMowF,EAAsB,CACxBh9F,KAAuB,EACvBqpI,QAAuBw7B,GAAW76B,EAAO,GAAI,WAC7CtxB,MAAuBosD,GAAa96B,EAAO,GAAI,SAC/C0P,qBAAuBmrB,GAAW76B,EAAO,GAAI,wBAC7CyP,aAAuBorB,GAAW76B,EAAO,GAAI,gBAC7CwP,SAAuB,KACvBsB,SAAuB+pB,GAAW76B,EAAO,GAAI,YAC7C3nC,GAAuBqiE,GAAc16B,EAAO,IAC5CrqH,MAAuBklJ,GAAW76B,EAAO,GAAI,SAC7Cp9H,KAAuBy+G,GAAQ2e,EAAO,IACtC8P,WAAuB6qB,GAAiB36B,EAAO,GAAI,cACnD+P,kBAAuB6qB,GAAwB56B,EAAO,GAAI,sBAI9D,OAAsB,KAAlBA,EAAO5lI,QAEX6gK,GAAmBjoE,EAAIgtC,EAAOv5H,MAAM,KAFDusF,CAKvC,CAmoBgDmrE,CAAct/H,IAElDuhF,IAAO,EAAO,+BAAgC,wBAAyB,CAAEU,UAAW,Q,CAGxF,MAAM9gE,EAAS,IAAIi8G,GAoCnB,OAnCe,MAAXjpE,EAAGh9F,OAAgBgqD,EAAOhqD,KAAOg9F,EAAGh9F,MAC3B,MAATg9F,EAAGqF,KAAcr4C,EAAOq4C,GAAKrF,EAAGqF,IACpB,MAAZrF,EAAG0b,QAAiB1uD,EAAO0uD,MAAQ1b,EAAG0b,OACvB,MAAf1b,EAAG89C,WAAoB9wF,EAAO8wF,SAAW99C,EAAG89C,UAC7B,MAAf99C,EAAGw8C,WAAoBxvF,EAAOwvF,SAAWx8C,EAAGw8C,UACjB,MAA3Bx8C,EAAG08C,uBAAgC1vF,EAAO0vF,qBAAuB18C,EAAG08C,sBACjD,MAAnB18C,EAAGy8C,eAAwBzvF,EAAOyvF,aAAez8C,EAAGy8C,cAC7B,MAAvBz8C,EAAG6gD,mBAA4B7zF,EAAO6zF,iBAAmB7gD,EAAG6gD,kBACjD,MAAX7gD,EAAGpwF,OAAgBo9C,EAAOp9C,KAAOowF,EAAGpwF,MACxB,MAAZowF,EAAGr9E,QAAiBqqC,EAAOrqC,MAAQq9E,EAAGr9E,OACxB,MAAdq9E,EAAGqsC,UAAmBr/E,EAAOq/E,QAAUrsC,EAAGqsC,SAC1B,MAAhBrsC,EAAGr8B,YAAqB3W,EAAO2W,UAAYqsE,GAAUjoD,KAAKiY,EAAGr8B,YAC5C,MAAjBq8B,EAAG88C,aAAsB9vF,EAAO8vF,WAAa98C,EAAG88C,YACxB,MAAxB98C,EAAG+8C,oBACH/vF,EAAO+vF,kBAAoB/8C,EAAG+8C,mBAIJ,MAA1B/8C,EAAGm9C,sBAA+BnwF,EAAOmwF,oBAAsBn9C,EAAGm9C,qBAIxD,MAAVn9C,EAAGo9C,MAAepwF,EAAOowF,IAAMp9C,EAAGo9C,KACtB,MAAZp9C,EAAGq9C,QAAiBrwF,EAAOqwF,MAAQr9C,EAAGq9C,OAE3B,MAAXr9C,EAAG13C,OACHglE,GAAetgE,EAAOq9G,WAAY,6CAA8C,KAAMrqE,GACtFstB,GAAetgE,EAAO1E,OAAS03C,EAAG13C,KAAM,gBAAiB,KAAM03C,IAGpD,MAAXA,EAAGjY,OACHulC,GAAetgE,EAAOq9G,WAAY,6CAA8C,KAAMrqE,GACtFstB,GAAetgE,EAAO+6B,KAAKxpE,iBAAmByhF,EAAGjY,MAAQ,IAAIxpE,cAAe,gBAAiB,KAAMyhF,IAGhGhzC,CACX,EACH,SAAAi9G,GA3PkB1vC,EAAiB6wC,GAC5Bh+C,IAAQmN,GAA4B,MAAlBtnH,KAAK0wD,UAAmB,6EAA8E,wBAAyB,CAAEmqD,UAAW,gBAE9J,MAAMpvB,EAAM67B,EAAStnH,KAAK0wD,UAAW,KACrC,OAAQ1wD,KAAKq3J,aACT,KAAK,EACD,OA9uBhB,SAA0BtqE,EAAiBtB,GACvC,MAAMsuC,EAAqB,CACvBhxE,GAAagkC,EAAG0b,MAAO,SACvB1/C,GAAagkC,EAAGw8C,UAAY,EAAG,YAC/BxgF,GAAagkC,EAAG89C,SAAU,YACzB99C,EAAGqF,IAAM,KACVrpC,GAAagkC,EAAGr9E,MAAO,SACvBq9E,EAAGpwF,MAGP,IAAIy8H,EAAU1d,GACd,GAAI3uB,EAAGqsC,SAAW1d,GAEd0d,EAAUpd,GAAUjvB,EAAGqsC,QAAS,cAIhC/e,IAAgB5uB,GAAuB,MAAhBA,EAAIwxC,UAAoBxxC,EAAIyxC,gBAAkB9D,EAChE,4BAA6B,MAAO3tC,QAEtC,GAAIsB,EAAGr8B,UAAW,CAErB,MAAMtnD,EAAS2jF,EAAGr8B,UAAUwsE,cACd,MAAV9zH,IAAkBgwH,EAAUhwH,E,CAIpC,IAAKqiF,EAQD,OANI2tC,IAAY1d,KACZqe,EAAOz7H,KAAKo+G,GAAU0c,IACtBW,EAAOz7H,KAAK,MACZy7H,EAAOz7H,KAAK,OAGT21J,GAAUl6B,GAQrB,IAAInvH,EAAIgvG,OAAO,GAAKnuB,EAAI2xC,SAYxB,OAXIhE,IAAY1d,GACZ9wG,EAAImyH,GAAUW,YAAYtE,EAAS3tC,EAAI7gF,GAChCgvG,OAAOnuB,EAAI7gF,KAAOA,GACzByvG,IAAe,EAAO,4BAA6B,MAAO5uB,GAI9DsuC,EAAOz7H,KAAKo+G,GAAU9xG,IACtBmvH,EAAOz7H,KAAKo+G,GAAUjxB,EAAIn1D,IAC1ByjG,EAAOz7H,KAAKo+G,GAAUjxB,EAAI14F,IAEnBkhK,GAAUl6B,EACrB,CAsrBuBq+B,CAAiBp4J,KAAMyrF,GAClC,KAAK,EACD,OAtlBhB,SAA2BsB,EAAiBtB,GACxC,MAAMsuC,EAAc,CAChBhxE,GAAagkC,EAAGqsC,QAAS,WACzBrwE,GAAagkC,EAAG0b,MAAO,SACvB1/C,GAAagkC,EAAGw8C,UAAY,EAAG,YAC/BxgF,GAAagkC,EAAG89C,SAAU,YACzB99C,EAAGqF,IAAM,KACVrpC,GAAagkC,EAAGr9E,MAAO,SACvBq9E,EAAGpwF,KACHm4J,GAAiB/nE,EAAG88C,YAAc,KAStC,OANIp+C,IACAsuC,EAAOz7H,KAAKyqD,GAAa0iC,EAAI2xC,QAAS,kBACtCrD,EAAOz7H,KAAKo+G,GAAUjxB,EAAIn1D,IAC1ByjG,EAAOz7H,KAAKo+G,GAAUjxB,EAAI14F,KAGvBkP,GAAO,CAAE,OAAQgyJ,GAAUl6B,IACtC,CAmkBuBs+B,CAAkBr4J,KAAMyrF,GACnC,KAAK,EACD,OA1oBhB,SAA2BsB,EAAiBtB,GACxC,MAAMsuC,EAAqB,CACvBhxE,GAAagkC,EAAGqsC,QAAS,WACzBrwE,GAAagkC,EAAG0b,MAAO,SACvB1/C,GAAagkC,EAAG08C,sBAAwB,EAAG,wBAC3C1gF,GAAagkC,EAAGy8C,cAAgB,EAAG,gBACnCzgF,GAAagkC,EAAG89C,SAAU,YACzB99C,EAAGqF,IAAM,KACVrpC,GAAagkC,EAAGr9E,MAAO,SACvBq9E,EAAGpwF,KACHm4J,GAAiB/nE,EAAG88C,YAAc,KAStC,OANIp+C,IACAsuC,EAAOz7H,KAAKyqD,GAAa0iC,EAAI2xC,QAAS,YACtCrD,EAAOz7H,KAAKo+G,GAAUjxB,EAAIn1D,IAC1ByjG,EAAOz7H,KAAKo+G,GAAUjxB,EAAI14F,KAGvBkP,GAAO,CAAE,OAAQgyJ,GAAUl6B,IACtC,CAsnBuBu+B,CAAkBt4J,KAAMyrF,GACnC,KAAK,EACD,OAhgBhB,SAA2BsB,EAAiBtB,EAAuB2+C,GAC/D,MAAMrQ,EAAqB,CACvBhxE,GAAagkC,EAAGqsC,QAAS,WACzBrwE,GAAagkC,EAAG0b,MAAO,SACvB1/C,GAAagkC,EAAG08C,sBAAwB,EAAG,wBAC3C1gF,GAAagkC,EAAGy8C,cAAgB,EAAG,gBACnCzgF,GAAagkC,EAAG89C,SAAU,YACzB99C,EAAGqF,IAAMyyC,GACV97E,GAAagkC,EAAGr9E,MAAO,SACvBq9E,EAAGpwF,KACHm4J,GAAiB/nE,EAAG88C,YAAc,IAClC9gF,GAAagkC,EAAG6gD,kBAAoB,EAAG,oBACvCmnB,GAAahoE,EAAGm9C,qBAAuB,GAAK,wBAGhD,OAAIz+C,IACAsuC,EAAOz7H,KAAKyqD,GAAa0iC,EAAI2xC,QAAS,YACtCrD,EAAOz7H,KAAKo+G,GAAUjxB,EAAIn1D,IAC1ByjG,EAAOz7H,KAAKo+G,GAAUjxB,EAAI14F,IAGtBq3I,GACOnoI,GAAO,CACV,OACAgyJ,GAAU,CACNl6B,EACAqQ,EAAMj/E,IAAKxzD,GAAMA,EAAEgF,MACnBytI,EAAMj/E,IAAKxzD,GAAMA,EAAEg/J,YACnBvsB,EAAMj/E,IAAKxzD,GAAMA,EAAE8+J,WAO5Bx0J,GAAO,CAAE,OAAQgyJ,GAAUl6B,IACtC,CA4duBw+B,CAAkBv4J,KAAMyrF,EAAK0sE,EAAUn4J,KAAKoqI,MAAO,MAC9D,KAAK,EACD,OA/bhB,SAA2Br9C,EAAiBtB,GACxC,MAAMsuC,EAAqB,CACvBhxE,GAAagkC,EAAGqsC,QAAS,WACzBrwE,GAAagkC,EAAG0b,MAAO,SACvB1/C,GAAagkC,EAAG08C,sBAAwB,EAAG,wBAC3C1gF,GAAagkC,EAAGy8C,cAAgB,EAAG,gBACnCzgF,GAAagkC,EAAG89C,SAAU,YACzB99C,EAAGqF,IAAM,KACVrpC,GAAagkC,EAAGr9E,MAAO,SACvBq9E,EAAGpwF,KACHm4J,GAAiB/nE,EAAG88C,YAAc,KAxYTn6H,EAyYDq9E,EAAG+8C,mBAAqB,GAxY7Cp6H,EAAMy7C,IAAK1zD,GACP,CACHsxD,GAAatxD,EAAE2hI,QAAS,WACxB3hI,EAAEkvH,QACF59D,GAAatxD,EAAEgxG,MAAO,SACtB1/C,GAAatxD,EAAEi5D,UAAU0sE,QAAS,WAClC1gB,GAAUjlH,EAAEi5D,UAAUp6B,GACtBomF,GAAUjlH,EAAEi5D,UAAU39D,OARlC,IAAiC2c,EAkZ7B,OANI+7E,IACAsuC,EAAOz7H,KAAKyqD,GAAa0iC,EAAI2xC,QAAS,YACtCrD,EAAOz7H,KAAKo+G,GAAUjxB,EAAIn1D,IAC1ByjG,EAAOz7H,KAAKo+G,GAAUjxB,EAAI14F,KAGvBkP,GAAO,CAAE,OAAQgyJ,GAAUl6B,IACtC,CA0auBy+B,CAAkBx4J,KAAMyrF,GAGvC0uB,IAAO,EAAO,+BAAgC,wBAAyB,CAAEU,UAAW,eACxF,CCpmCJ,MAAM49C,GAAW,6DAgBJ7+C,OAAO,GAApB,MACM8+C,GAAQ9+C,OAAO,I,OCVrB,SAAS++C,GAAYviJ,GASjB,OARIA,EAAK1M,MAAM,qBACX0M,EAAOA,EAAKX,UAAU,IACfW,EAAK1M,MAAM,eAClB0M,EAAOA,EAAKX,UAAU,GAEtB4kG,IAAe,EAAO,0BAA2B,OAAQjkG,GAGtD,gCAAPnU,OAAyCmU,EAC7C,CAqDM,MAAgBwiJ,GASlB3pJ,WAAAA,CAAYxZ,GARZ67F,EAAA,oBASIK,GAA0C3xF,KAAM,CAAEvK,QACtD,CAEAg+I,OAAAA,CAAQolB,GACJ,OAAO74J,IACX,CAKA84J,gBAAAA,CAAiBC,GACb,OAAO,CACX,CAKA,mBAAMC,CAAcD,EAAkBpyC,GAClC,MAAM,IAAI32H,MAAM,mBACpB,CAKA,mBAAMipK,CAAcF,EAAkBp8J,GAClC,MAAM,IAAI3M,MAAM,mBACpB,EAmBJ,MAAMkpK,GAAc,IAAItkF,OAAO,kBAAoB,KAC7CukF,GAAW,CACb,IAAIvkF,OAAO,mBAAqB,KAChC,IAAIA,OAAO,gBAAiB,KAC5BskF,GACA,IAAItkF,OAAO,mCAAoC,MAGnD,IAAAwkF,GAAA,IAAAh4H,QAAAi4H,GAAA,IAAAj4H,QAAAk4H,GAAA,IAAA/yH,QAIM,MAAOgzH,GAqBTtqJ,WAAAA,CAAYs7H,EAA4B5jB,EAAiBlxH,GAAYqlH,GAAA,KAAAw+C,IApBrEhoE,EAAA,wBAKAA,EAAA,uBAKAA,EAAA,oBAMA2nB,GAAA,KAAAmgD,QAAa,GAEbngD,GAAA,KAAAogD,QAAS,GAGL1nE,GAA8B3xF,KAAM,CAAEuqI,WAAU5jB,UAASlxH,SACzDsoH,GAAKq7C,GAALp5J,KAAqB,MAErB+9G,GAAKs7C,GAALr5J,KAAiB,IAAI60I,GAASluB,EAAS,CACnC,yDACA,sDACA,gDACA,oDACA,uDACA,sDACD4jB,GAEP,CAKA,sBAAMivB,GAkBF,OAjB0B,MAAtBx7C,GAAKo7C,GAALp5J,OACA+9G,GAAKq7C,GAALp5J,KAAqB,WACjB,IACI,aAAag+G,GAAKq7C,GAALr5J,MAAey5J,kBAAkB,a,CAChD,MAAOppK,GAGL,GAAIwpH,GAAQxpH,EAAO,kBAAqB,OAAO,EAK/C,MAFA0tH,GAAKq7C,GAALp5J,KAAqB,MAEf3P,C,CAEb,EAboB,UAgBZ2tH,GAAKo7C,GAALp5J,KACjB,CA+CA,gBAAMmnH,CAAW4xC,GAEb,GADgB,MAAZA,IAAoBA,EAAW,IAClB,KAAbA,EACA,IACI,MAAMh/G,QAAem/D,GAAAogD,GAAAt5J,KAAK05J,IAAM3hK,KAAXiI,KAAY,iBAGjC,OAAc,MAAV+5C,GAAkBA,IAAW8qF,GAAsB,KAEhD9qF,C,CACT,MAAO1pD,GACL,GAAIwpH,GAAQxpH,EAAO,kBAAqB,OAAO,KAC/C,MAAMA,C,CAKd,GAAI0oK,GAAY,GAAKA,EAAW,WAAY,CACxC,IAAIY,EAAcZ,EAAW,WAE7B,MAAMp8J,QAAau8G,GAAAogD,GAAAt5J,KAAK05J,IAAM3hK,KAAXiI,KAAY,qBAAsB,CAAE25J,IACvD,GAAI1+C,GAAYt+G,EAAM,IAAO,OAAOwqH,GAAWxqH,E,CAGnD,IAAIi9J,EAA6C,KACjD,IAAK,MAAM/gK,KAAUmH,KAAKuqI,SAASsvB,QAC/B,GAAMhhK,aAAkB+/J,IACpB//J,EAAOigK,iBAAiBC,GAAW,CACnCa,EAAa/gK,EACb,K,CAIR,GAAkB,MAAd+gK,EAAsB,OAAO,KAGjC,MAAMj9J,QAAau8G,GAAAogD,GAAAt5J,KAAK05J,IAAM3hK,KAAXiI,KAAY,qBAAsB,CAAE+4J,IAGvD,GAAY,MAARp8J,GAAyB,OAATA,EAAiB,OAAO,KAG5C,MAAMgqH,QAAgBizC,EAAWX,cAAcF,EAAUp8J,GAEzD,GAAe,MAAXgqH,EAAmB,OAAOA,EAE9BxM,IAAO,EAAO,oBAAqB,wBAAyB,CACxDU,UAAW,cAAF54G,OAAiB82J,EAAS,KACnC3yJ,KAAM,CAAE2yJ,WAAUp8J,SAE1B,CAMA,aAAMm9J,CAAQnpK,GACV,MAAMgM,QAAau8G,GAAAogD,GAAAt5J,KAAK05J,IAAM3hK,KAAXiI,KAAY,uBAAwB,CAAErP,IACzD,OAAY,MAARgM,GAAyB,OAATA,EAAwB,KACrCA,CACX,CAKA,oBAAMo9J,GAEF,MAAMp9J,QAAau8G,GAAAogD,GAAAt5J,KAAK05J,IAAM3hK,KAAXiI,KAAY,wBAG/B,GAAY,MAARrD,GAAyB,OAATA,EAAiB,OAAO,KAG5C,MAAMq9J,EAAOr9J,EAAK+M,MAAM,4EACxB,GAAIswJ,EAAM,CACN,MAAM5pG,EAAsB,aAAZ4pG,EAAK,GAAqB,OAAQ,OAC5C7lK,EAAS+qD,SAAS86G,EAAK,GAAI,IACjC,GAAIA,EAAK,GAAG7lK,SAAoB,EAATA,EACnB,MAAO,GAAP8N,OAAWmuD,EAAO,OAAAnuD,OD1S5B,SAAuB65G,GACzB,MAAMlgH,EAAQ7K,GAAS+qH,GAEvB,IAAIpsG,EAAQ8sG,GAAS5gH,GACjBm+C,EAAS,GACb,KAAOrqC,GACHqqC,EAAS0+G,GAASpnE,OAAO3hF,EAAQgpJ,KAAU3+G,EAC3CrqC,GAASgpJ,GAIb,IAAK,IAAI7jK,EAAI,EAAGA,EAAI+G,EAAMzH,SAClByH,EAAM/G,GADoBA,IAE9BklD,EAAS0+G,GAAS,GAAK1+G,EAG3B,OAAOA,CACX,CCyR0CkgH,CAAa,KAAOD,EAAK,I,CAK3D,MAAME,EAAQv9J,EAAK+M,MAAM,iCACzB,GAAIwwJ,GAA6B,KAApBA,EAAM,GAAG/lK,OAClB,MAAO,SAAP8N,OAAkBi4J,EAAM,IAG5B//C,IAAO,EAAO,2CAA4C,wBAAyB,CAC/EU,UAAW,mBACXz0G,KAAM,CAAEzJ,SAEhB,CAUA,eAAMw9J,GAEF,aADqBn6J,KAAKo6J,cACZlyI,GAClB,CAUA,gBAAMkyI,GACF,MAAMC,EAAgC,CAAE,CAAEtqK,KAAM,OAAQ2f,MAAO1P,KAAKvK,OACpE,IAGI,MAAM6kK,QAAet6J,KAAK85J,QAAQ,UAClC,GAAc,MAAVQ,EAEA,OADAD,EAAQ/7J,KAAK,CAAEvO,KAAM,UAAW2f,MAAO,KAChC,CAAEwY,IAAK,KAAMmyI,WAExBA,EAAQ/7J,KAAK,CAAEvO,KAAM,SAAU2f,MAAO4qJ,IAEtC,IAAK,IAAIzlK,EAAI,EAAGA,EAAIskK,GAAShlK,OAAQU,IAAK,CACtC,MAAM6U,EAAQ4wJ,EAAO5wJ,MAAMyvJ,GAAStkK,IACpC,GAAa,MAAT6U,EAAiB,SAErB,MAAM0mD,EAAS1mD,EAAM,GAAG4B,cAExB,OAAQ8kD,GACJ,IAAK,QACL,IAAK,OAED,OADAiqG,EAAQ/7J,KAAK,CAAEvO,KAAM,MAAO2f,MAAO4qJ,IAC5B,CAAED,UAASnyI,IAAKoyI,GAC3B,IAAK,OAAQ,CACT,MAAMpyI,EAAMywI,GAAY2B,GAGxB,OAFAD,EAAQ/7J,KAAK,CAAEvO,KAAM,OAAQ2f,MAAO4qJ,IACpCD,EAAQ/7J,KAAK,CAAEvO,KAAM,MAAO2f,MAAOwY,IAC5B,CAAEmyI,UAASnyI,M,CAGtB,IAAK,SACL,IAAK,UAAW,CAEZ,MAAM8uG,EAAuB,WAAX5mE,EAAuB,oBAAqB,eAC9DiqG,EAAQ/7J,KAAK,CAAEvO,KAAMqgE,EAAQ1gD,MAAO4qJ,IAGpC,MAAMC,QAAcv6J,KAAKmnH,aACzB,GAAa,MAATozC,EAEA,OADAF,EAAQ/7J,KAAK,CAAEvO,KAAM,SAAU2f,MAAO,KAC/B,CAAEwY,IAAK,KAAMmyI,WAGxB,MAAMxkC,GAASnsH,EAAM,IAAM,IAAI0B,MAAM,KACrC,GAAqB,IAAjByqH,EAAM1hI,OAEN,OADAkmK,EAAQ/7J,KAAK,CAAEvO,KAAM,IAAFkS,OAAYmuD,EAAO,QAAQ1gD,MAAQhG,EAAM,IAAM,KAC3D,CAAEwe,IAAK,KAAMmyI,WAGxB,MAAMG,EAAU3kC,EAAM,GAEhBqa,EAAW,IAAI2E,GAAShf,EAAM,GAAI,CAEpC,gDACA,gDAGA,2CACA,4DACD71H,KAAKuqI,UAGR,GAAe,WAAXn6E,EAAqB,CACrB,MAAMqqG,QAAmBvqB,EAASwqB,QAAQF,GAE1C,GAAID,IAAUE,EAEV,OADAJ,EAAQ/7J,KAAK,CAAEvO,KAAM,SAAU2f,MAAO+qJ,IAC/B,CAAEvyI,IAAK,KAAMmyI,WAExBA,EAAQ/7J,KAAK,CAAEvO,KAAM,QAAS2f,MAAO+qJ,G,MAElC,GAAe,YAAXrqG,EAAsB,CAC7B,MAAMuqG,QAAgBzqB,EAAS0qB,UAAUL,EAAOC,GAChD,IAAKG,EAED,OADAN,EAAQ/7J,KAAK,CAAEvO,KAAM,WAAY2f,MAAO,MACjC,CAAEwY,IAAK,KAAMmyI,WAExBA,EAAQ/7J,KAAK,CAAEvO,KAAM,UAAW2f,MAAOirJ,EAAQ3+J,Y,CAInD,IAAI6+J,QAAoB3qB,EAASlZ,GAAUwjC,GAC3C,GAAmB,MAAfK,GAAuC,OAAhBA,EAEvB,OADAR,EAAQ/7J,KAAK,CAAEvO,KAAM,gBAAiB2f,MAAO,KACtC,CAAEwY,IAAK,KAAMmyI,WAGxBA,EAAQ/7J,KAAK,CAAEvO,KAAM,oBAAqB2f,MAAOmrJ,IAGlC,YAAXzqG,IACAyqG,EAAcA,EAAY3uJ,QAAQ,OAAQuwG,GAAQ+9C,EAAS,IAAI/kJ,UAAU,IACzE4kJ,EAAQ/7J,KAAK,CAAEvO,KAAM,wBAAyB2f,MAAOmrJ,KAIrDA,EAAYnxJ,MAAM,aAClBmxJ,EAAclC,GAAYkC,IAE9BR,EAAQ/7J,KAAK,CAAEvO,KAAM,eAAgB2f,MAAOmrJ,IAG5C,IAAIC,EAAgB,CAAC,EACrB,MAAMr3B,QAAkB,IAAI7D,GAAai7B,GAAcjyF,OACvD66D,EAASG,WAET,IACIk3B,EAAWr3B,EAASe,Q,CACtB,MAAOn0I,GACL,IACIgqK,EAAQ/7J,KAAK,CAAEvO,KAAM,YAAa2f,MAAO+zH,EAASc,U,CACpD,MAAOl0I,GACL,MAAMuL,EAAQ6nI,EAAStzI,KAIvB,OAHIyL,GACAy+J,EAAQ/7J,KAAK,CAAEvO,KAAM,YAAa2f,MAAO0rG,GAAQx/G,KAE9C,CAAEssB,IAAK,KAAMmyI,U,CAExB,MAAO,CAAEnyI,IAAK,KAAMmyI,U,CAGxB,IAAKS,EAED,OADAT,EAAQ/7J,KAAK,CAAEvO,KAAM,YAAa2f,MAAO,KAClC,CAAEwY,IAAK,KAAMmyI,WAGxBA,EAAQ/7J,KAAK,CAAEvO,KAAM,WAAY2f,MAAO2+B,KAAKC,UAAUwsH,KAGvD,IAAIC,EAAWD,EAASE,MACxB,GAAyB,kBAAdD,EAEP,OADAV,EAAQ/7J,KAAK,CAAEvO,KAAM,YAAa2f,MAAO,KAClC,CAAEwY,IAAK,KAAMmyI,WAGxB,GAAIU,EAASrxJ,MAAM,6BAEZ,CAGH,GAAY,MADCqxJ,EAASrxJ,MAAMwvJ,IAGxB,OADAmB,EAAQ/7J,KAAK,CAAEvO,KAAM,iBAAkB2f,MAAOqrJ,IACvC,CAAE7yI,IAAK,KAAMmyI,WAGxBA,EAAQ/7J,KAAK,CAAEvO,KAAM,gBAAiB2f,MAAOqrJ,IAC7CA,EAAWpC,GAAYoC,E,CAK3B,OAFAV,EAAQ/7J,KAAK,CAAEvO,KAAM,MAAO2f,MAAOqrJ,IAE5B,CAAEV,UAASnyI,IAAK6yI,E,IAIrC,MAAO1qK,GAAQ,CAEjB,MAAO,CAAEgqK,UAASnyI,IAAK,KAC3B,CAEA,0BAAa+yI,CAAc1wB,GACvB,MAAM2wB,QAAgB3wB,EAAS4wB,aAEzBC,EAAYF,EAAQG,UAAqB,kCAM/C,OAHAlhD,GAAOihD,EAAW,+BAAgC,wBAAyB,CACvEvgD,UAAW,gBAAiBz0G,KAAM,CAAE80J,aAEjCE,EAAUz0C,OACrB,CA8BA,qBAAa20C,CAAS/wB,EAA4B90I,GAE9C,IAAI8lK,EAAc9lK,EAClB,OAAa,CACT,GAAoB,KAAhB8lK,GAAsC,MAAhBA,EAAuB,OAAO,KAIxD,GAAa,QAAT9lK,GAAkC,QAAhB8lK,EAAyB,OAAO,KAGtD,MAAMt/B,QAAau/B,GAAwBzjK,KAAxBwhK,GAAyBhvB,EAAUgxB,GAGtD,GAAY,MAARt/B,EAAc,CACd,MAAMnD,EAAW,IAAIygC,GAAYhvB,EAAUtO,EAAMxmI,GAGjD,OAAI8lK,IAAgB9lK,SAAgBqjI,EAAS0gC,mBAEtC1gC,EAFoE,I,CAM/EyiC,EAAcA,EAAYnwJ,MAAM,KAAK5K,MAAM,GAAGmJ,KAAK,I,CAE3D,EA9boB,eAAA+vJ,GA4DP+B,EAAkBjjH,GAC3BA,GAAUA,GAAU,IAAIh4C,QACxB,MAAMgvI,EAAQxxB,GAAKq7C,GAALr5J,MAAeyvI,UAG7Bj3F,EAAO3oB,QAAQ0tH,GAASv9I,KAAKvK,OAE7B,IAAIrC,EAAoC,WAC9B4M,KAAKw5J,qBACXpmK,EAAWo8I,EAAMhJ,YAAYi1B,GAC7BthD,GAAO/mH,EAAU,mBAAoB,gBAAiB,CAClDgT,KAAM,CAAEq1J,cAGZjjH,EAAS,CACLglG,GAAUx9I,KAAKvK,KAAM,KACrB+5I,EAAM/H,mBAAmBr0I,EAAUolD,IAGvCijH,EAAW,wBAGfjjH,EAAOl6C,KAAK,CACR0rI,gBAAgB,IAGpB,IACI,MAAMjwF,QAAeikE,GAAKq7C,GAALr5J,MAAey7J,MAAajjH,GAEjD,OAAIplD,EACOo8I,EAAM9H,qBAAqBt0I,EAAU2mD,GAAQ,GAGjDA,C,CACT,MAAO1pD,GACL,IAAKwpH,GAAQxpH,EAAO,kBAAqB,MAAMA,C,CAGnD,OAAO,IACX,CAAC,eAAAmrK,GAqSyBjxB,EAAoB90I,GAC1C,MAAMimK,QAAgBnC,GAAY0B,cAAc1wB,GAEhD,IACI,MAAM2F,EAAW,IAAI2E,GAAS6mB,EAAS,CACnC,qDACDnxB,GAEGtO,QAAaiU,EAASpX,SAASykB,GAAS9nJ,GAAO,CACjDu0I,gBAAgB,IAGpB,OAAI/N,IAAS4I,GAAsB,KAC5B5I,C,CAET,MAAO5rI,GAGL,MAAMA,C,CAId,CAiCHsrK,GA/bYpC,GC5Ib,MAAM79C,GAAO9B,OAAO,GAId,SAAUgiD,GAAUt2J,EAAoBu2J,GAC1C,OAAQ,SAASnsJ,GACb,OAAa,MAATA,EAAwBmsJ,EACrBv2J,EAAOoK,EAClB,CACJ,CAEM,SAAUosJ,GAAQx2J,EAAoBs2J,GACxC,OAASpxD,IACL,GAAIoxD,GAAsB,MAATpxD,EAAiB,OAAO,KACzC,IAAKlxG,MAAMiG,QAAQirG,GAAU,MAAM,IAAIx6G,MAAM,gBAC7C,OAAOw6G,EAAMr/C,IAAKt2D,GAAMyQ,EAAOzQ,IAEvC,CAKM,SAAUqtG,GAAO58F,EAAoCmtD,GACvD,OAAS/iD,IACL,MAAMqqC,EAAc,CAAC,EACrB,IAAK,MAAMppD,KAAO2U,EAAQ,CACtB,IAAIy2J,EAASprK,EACb,GAAI8hE,GAAY9hE,KAAO8hE,KAAcspG,KAAUrsJ,GAC3C,IAAK,MAAMwS,KAAUuwC,EAAS9hE,GAC1B,GAAIuxB,KAAUxS,EAAO,CACjBqsJ,EAAS75I,EACT,K,CAKZ,IACI,MAAMqiI,EAAKj/I,EAAO3U,GAAK+e,EAAMqsJ,SAClB9hH,IAAPsqG,IAAoBxqG,EAAOppD,GAAO4zJ,E,CACxC,MAAOl0J,GACL,MAAMuU,EAAWvU,aAAiBL,MAASK,EAAMuU,QAAS,eAC1Du1G,IAAO,EAAO,2BAAFl4G,OAA8BtR,EAAI,MAAAsR,OAAM2C,EAAQ,KAAK,WAAY,CAAE8K,S,EAGvF,OAAOqqC,EAEf,CAYM,SAAUiiH,GAAWtsJ,GAEvB,OADA2qG,GAAeY,GAAYvrG,GAAO,GAAO,eAAgB,QAASA,GAC3DA,CACX,CAEM,SAAUusJ,GAAWvsJ,GAEvB,OADA2qG,GAAeY,GAAYvrG,EAAO,IAAK,eAAgB,QAASA,GACzDA,CACX,CASA,MAAMwsJ,GAAah6D,GAAO,CACtBykB,QAASQ,GACT+kB,UAAW+vB,GACX9vB,YAAalwB,GACbt/G,KAAMq/J,GACNv3J,MAAOw3G,GACPmwB,QAASwvB,GAjCP,SAAwBlsJ,GAC1B,OAAQA,GACJ,KAAK,EAAM,IAAK,OACZ,OAAO,EACX,KAAK,EAAO,IAAK,QACb,OAAO,EAEf2qG,IAAe,EAAO,oBAAFp4G,OAAuBosC,KAAKC,UAAU5+B,IAAW,QAASA,EAClF,GAyBsC,GAClCq4H,OAAQ+zB,GAAQG,IAChBhwB,gBAAiBgwB,GACjB5vB,iBAAkBpwB,IACnB,CACCx3G,MAAO,CAAE,cAOb,MAAM03J,GAAej6D,GAAO,CACxB7sD,KAAMumH,GAAUK,IAChBvxB,WAAYuxB,GACZtxB,sBAAuBixB,GAAUK,GAAY,MAE7Cr0I,OAAQq0F,GAERt2G,UAAWs2G,GACXxT,MAAOmzD,GAAUI,IACjBpxB,WAAY5uB,GAEZ6uB,SAAU7uB,GACV8uB,QAAS9uB,GAETqvB,UAAWuwB,GAAUK,GAAY,MACjC3wB,aAAcswB,GAAUK,GAAY,MAEpClxB,YAAa6wB,GAAU5/C,GAAW,MAClCgvB,cAAe4wB,GAAU5/C,GAAW,MAEpCivB,MAAO2wB,GAAUz0C,IACjB+jB,WAAY0wB,GAAUK,GAAY,MAClC9wB,UAAW6wB,GAEX5wB,cAAewwB,GAAU5/C,KAC1B,CACCkvB,WAAY,CAAE,aAYlB,MAAMkxB,GAAoBl6D,GAAO,CAC7BmqC,iBAAkBpwB,GAClBkwB,YAAalwB,GACbgwB,gBAAiBgwB,GACjBt1C,QAASQ,GACT4gB,OAAQ+zB,GAAQG,IAChBt/J,KAAMq/J,GACNv3J,MAAOw3G,GACPiwB,UAAW+vB,IACZ,CACCx3J,MAAO,CAAE,cAOb,MAAM43J,GAA4Bn6D,GAAO,CACrC9P,GAAIwpE,GAAUz0C,GAAY,MAC1BryC,KAAM8mF,GAAUz0C,GAAY,MAC5B2lB,gBAAiB8uB,GAAUz0C,GAAY,MAEvC1iH,MAAOw3G,GACPrQ,KAAMgwD,GAAUxgD,IAChB0vB,QAAS9uB,GACT+uB,YAAa6wB,GAAU5/C,GAAW,MAClC+wB,UAAW6uB,GAAUI,IACrB9vB,UAAW+vB,GACX5mH,KAAM4mH,GACNrvB,KAAMkvB,GAhBJ,SAA2BpsJ,GAC7B,OAAO0sJ,GAAkB1sJ,EAC7B,GAeIy8H,YAAalwB,GAEb+wB,kBAAmBhxB,GACnB6wB,kBAAmB+uB,GAAU5/C,IAC7BixB,aAAc2uB,GAAU5/C,GAAW,MACnC5hB,OAAQwhE,GAAU3/C,IAClBlsH,KAAM6rK,GAAU3/C,GAAW,IAC5B,CACC4wB,kBAAmB,CAAE,YACrBx3F,KAAM,CAAE,mBACR5wC,MAAO,CAAE,sBAOP,SAAU63J,GAA0B5sJ,GAIlCA,EAAM0iF,IAAM4pB,GAAUtsG,EAAM0iF,MAAQspB,KACpChsG,EAAM0iF,GAAK,8CAGf,MAAMr4C,EAASmoD,GAAO,CAClB7sD,KAAM4mH,GAGNx3J,MAAOm3J,GAAU3/C,QAAWhiE,GAE5BlqD,KAAO2f,GACW,OAAVA,GAA2B,MAATA,EAAwB,EACvCusG,GAAUvsG,GAErBm6H,WAAY+xB,GAAUx/B,GAAe,MACrC8N,oBAAqB0xB,GAAUE,GAAQG,IAAY,GAAO,MAE1DnyB,kBAAmB8xB,GAAUE,GAASlxJ,IAClC,IAAI6gF,EACJ,GAAI7gF,EAAE8lD,UACF+6B,EAAM7gF,EAAE8lD,cAEL,CACH,IAAI0sE,EAAUxyH,EAAEwyH,QACA,SAAZA,EACAA,EAAU,EACS,SAAZA,IACPA,EAAU,GAEd3xC,EAAM30F,OAAOyW,OAAO,CAAC,EAAI3C,EAAG,CAAEwyH,W,CAGlC,MAAO,CACHzW,QAASQ,GAAWv8G,EAAE+7G,SACtByS,QAASpd,GAAUpxG,EAAEwuH,SACrB3wB,MAAOuT,GAAUpxG,EAAE69F,OACnB/3C,UAAWqsE,GAAUjoD,KAAK2W,MAE/B,GAAQ,MAEXygD,UAAW0vB,GAAUK,GAAY,MACjC9vB,YAAayvB,GAAU3/C,GAAW,MAClCowB,iBAAkBuvB,GAAU3/C,GAAW,MAEvCnnC,KAAMqyC,GAGNoiB,SAAUqyB,GAAU5/C,IACpBytB,qBAAsBmyB,GAAU5/C,IAChCwtB,aAAcoyB,GAAU5/C,IACxB4xB,iBAAkBguB,GAAU5/C,GAAW,MAEvC6uB,SAAU7uB,GACV5pB,GAAIwpE,GAAUz0C,GAAY,MAC1Bz3G,MAAOssG,GACPvT,MAAOwT,GACPt/G,KAAMq/J,GAENO,QAASX,GAAUz0C,GAAY,MAE/BiS,QAASwiC,GAAU5/C,GAAW,OAC/B,CACCr/G,KAAM,CAAE,SACRkuI,SAAU,CAAE,OACZpmI,MAAO,CAAE,qBA5DEy9F,CA6DZxyF,GAsBH,GAnBiB,MAAbqqC,EAAOq4C,IAAgC,MAAlBr4C,EAAOwiH,UAC5BxiH,EAAOwiH,QC/OT,SAA2BxvE,GAC7B,MAAMjY,EAAOqyC,GAAWp6B,EAAGjY,MAG3B,IAAI0nF,EAFUxgD,GAAUjvB,EAAG0b,MAAO,YAEbzsG,SAAS,IAS9B,OAPIwgK,EADa,MAAbA,EACW,KACJA,EAASroK,OAAS,EACd,MAAQqoK,EAER,KAAOA,EAGfr1C,GAAW5L,GAAUgL,GAAU0tC,GAAU,CAAEn/E,EAAM0nF,KAAc,IAC1E,CDiOyBC,CAAiB1iH,IAMlB,IAAfrqC,EAAM3f,MAA6B,IAAf2f,EAAM3f,MAAmC,MAApB2f,EAAMm6H,aAChD9vF,EAAO8vF,WAAa,IAIpBn6H,EAAMghD,UACN3W,EAAO2W,UAAYqsE,GAAUjoD,KAAKplE,EAAMghD,WAExC3W,EAAO2W,UAAYqsE,GAAUjoD,KAAKplE,GAIhB,MAAlBqqC,EAAOq/E,QAAiB,CACxB,MAAMA,EAAUr/E,EAAO2W,UAAUwsE,cAClB,MAAX9D,IAAmBr/E,EAAOq/E,QAAUA,E,CA4C5C,OAJIr/E,EAAOmyF,WAAalwB,GAAUjiE,EAAOmyF,aAAexwB,KACpD3hE,EAAOmyF,UAAY,MAGhBnyF,CACX,CEjUM,MAAO2iH,GAYTztJ,WAAAA,CAAYxZ,GAXZ67F,EAAA,oBAYIK,GAAgC3xF,KAAM,CAAEvK,QAC5C,CAKAszF,KAAAA,GACI,OAAO,IAAI2zE,GAAc18J,KAAKvK,KAClC,EA+CE,MAAOknK,WAAsBD,GA6C/BztJ,WAAAA,CAAY2tJ,EAAyBC,GACX,MAAlBD,IAA0BA,EAAiB,GAC/Cr+D,MAAM,sCAADt8F,OAAyC26J,GAAkB,IA9CpEtrE,EAAA,8BAQAA,EAAA,sBAKAA,EAAA,wBAKAA,EAAA,0BAKAA,EAAA,6BAKAA,EAAA,sCAKAA,EAAA,mCAeI,MAAMp5F,EAAgC,CAAE0kK,kBACxC,SAAS7uJ,EAAItY,EAA+BqnK,GACxC,IAAIptJ,GAASmtJ,GAAS,CAAC,GAAIpnK,GACd,MAATia,IAAiBA,EAAQotJ,GAC7BziD,GAAiC,kBAAX3qG,EAAqB,qBAAFzN,OAAwBxM,GAAS,QAASonK,GACnF3kK,EAAMzC,GAAQia,CAClB,CAEA3B,EAAI,SAAU,MACdA,EAAI,WAAY,MAChBA,EAAI,aAAc,GAClBA,EAAI,gBAAiB,IACrBA,EAAI,yBAA0B,MAC9BA,EAAI,sBAAuB,MAE3B4jF,GAAgC3xF,KAAM9H,EAC1C,CAEA6wF,KAAAA,GACI,OAAO,IAAI4zE,GAAc38J,KAAK48J,eAAgB58J,KAClD,EAYE,MAAO+8J,WAAkBL,GAiB3BztJ,WAAAA,CAAY03G,EAAyBq2C,GACjCz+D,MAAM,kCAhBVjN,EAAA,uBAKAA,EAAA,6BAYIK,GAA4B3xF,KAAM,CAC9B2mH,QAAUA,GA9KH,6CA+KPq2C,cAAkC,MAAjBA,EAAyB,EAAGA,GAErD,CAEAj0E,KAAAA,GACI,OAAO,IAAIg0E,GAAU/8J,KAAK2mH,QAAS3mH,KAAKg9J,cAC5C,EAsCH,IAAAr8B,GAAA,IAAAv/F,QAAA67H,GAAA,IAAA77H,QAEK,MAAO87H,WAAqCR,GAO9C,OAAIx0I,GAAgB,OAAO81F,GAAK2iB,GAAL3gI,KAAW,CAKtC,eAAIgiI,GAAwL,OAAOhkB,GAAKi/C,GAALj9J,KAAmB,CAMtNiP,WAAAA,CAAYiZ,EAAa85G,GACrBzjC,MAAM,oDAlBD0a,GAAA,KAAA0nB,QAAI,GACJ1nB,GAAA,KAAAgkD,QAAY,GAkBjBl/C,GAAK4iB,GAAL3gI,KAAYkoB,GACZ61F,GAAKk/C,GAALj9J,KAAoBgiI,EACxB,CAGAj5C,KAAAA,GAAwC,OAAO/oF,IAAM,ECrMzD,MAAMm9J,GAAgD,IAAIlgJ,IAG1D,IAAAmgJ,GAAA,IAAAh8H,QAAAo0H,GAAA,IAAAp0H,QAAAi8H,GAAA,IAAAj8H,QAIM,MAAOk8H,GASTruJ,WAAAA,CAAYxZ,EAAc2jI,GAR1BngB,GAAA,KAAAmkD,QAAK,GACLnkD,GAAA,KAAAu8C,QAAQ,GAERv8C,GAAA,KAAAokD,QAAQ,GAMJt/C,GAAKq/C,GAALp9J,KAAavK,GACbsoH,GAAKy3C,GAALx1J,KAAgBg8G,GAAUod,IAC1Brb,GAAKs/C,GAALr9J,KAAgB,IAAIid,IACxB,CAKA08F,MAAAA,GACI,MAAO,CAAElkH,KAAMuK,KAAKvK,KAAM2jI,QAASh9H,OAAO4D,KAAKo5H,SACnD,CAQA,QAAI3jI,GAAiB,OAAOuoH,GAAKo/C,GAALp9J,KAAY,CACxC,QAAIvK,CAAKia,GAAiBquG,GAAKq/C,GAALp9J,KAAc0P,EAAO,CAK/C,WAAI0pH,GAAoB,OAAOpb,GAAKw3C,GAALx1J,KAAe,CAC9C,WAAIo5H,CAAQ1pH,GAAuBquG,GAAKy3C,GAALx1J,KAAgBg8G,GAAUtsG,EAAO,WAAY,CAShF4lF,OAAAA,CAAQm4C,GACJ,GAAa,MAATA,EAAiB,OAAO,EAE5B,GAAsB,kBAAXA,EAAqB,CAC5B,IACI,OAAQztI,KAAKo5H,UAAYpd,GAAUyxB,E,CACrC,MAAOp9I,GAAQ,CACjB,OAAQ2P,KAAKvK,OAASg4I,C,CAG1B,GAAsB,kBAAXA,GAAyC,kBAAXA,EAAqB,CAC1D,IACI,OAAQztI,KAAKo5H,UAAYpd,GAAUyxB,E,CACrC,MAAOp9I,GAAQ,CACjB,OAAO,C,CAGX,GAAsB,kBAAXo9I,EAAqB,CAC5B,GAAqB,MAAjBA,EAAMrU,QAAiB,CACvB,IACI,OAAQp5H,KAAKo5H,UAAYpd,GAAUyxB,EAAMrU,Q,CAC3C,MAAO/oI,GAAQ,CACjB,OAAO,C,CAEX,OAAkB,MAAdo9I,EAAMh4I,MACEuK,KAAKvK,OAASg4I,EAAMh4I,I,CAKpC,OAAO,CACX,CAKA,WAAIokK,GACA,OAAOvgK,MAAMw7E,KAAKkpC,GAAKq/C,GAALr9J,MAAck+C,SACpC,CAMAq/G,YAAAA,CAAa1kK,GACT,GAAImlH,GAAKq/C,GAALr9J,MAAciH,IAAIpO,EAAOpD,MACzB,MAAM,IAAIzF,MAAM,mCAADiS,OAAqCpJ,EAAOpD,KAAK,MAGpE,OADAuoH,GAAKq/C,GAALr9J,MAAc+N,IAAIlV,EAAOpD,KAAMoD,EAAOkwF,SAC/B/oF,IACX,CAOAq7J,SAAAA,CAAmD5lK,GAC/C,OAAWuoH,GAAKq/C,GAALr9J,MAAciH,IAAIxR,IAAU,IAC3C,CAMA+nK,UAAAA,CAAoD/oE,GAChD,OAAkBz0F,KAAK65J,QAAQv7G,OAAQlnD,GAAOA,EAAE3B,KAAK2V,MAAM,KAAK,KAAOqpF,EAC3E,CAKA1L,KAAAA,GACI,MAAMA,EAAQ,IAAIu0E,GAAQt9J,KAAKvK,KAAMuK,KAAKo5H,SAI1C,OAHAp5H,KAAK65J,QAAQxuJ,QAASxS,IAClBkwF,EAAMw0E,aAAa1kK,EAAOkwF,WAEvBA,CACX,CAQA00E,mBAAAA,CAAoB1wE,GAChB,MAAM8vE,EAAQ78J,KAAKq7J,UAAyB,uCAA0C,IAAIsB,GAE1F,IAAItlC,EAAMwlC,EAAMa,OAEhB,GADa,MAAT3wE,EAAGqF,KAAcilC,GAAOwlC,EAAMc,UAC9B5wE,EAAGpwF,KACH,IAAK,IAAI9H,EAAI,EAAGA,EAAIk4F,EAAGpwF,KAAKxI,OAAQU,GAAK,EACD,OAAhCk4F,EAAGpwF,KAAK8Y,UAAU5gB,EAAGA,EAAI,GACzBwiI,GAAOwlC,EAAMe,WAEbvmC,GAAOwlC,EAAMgB,cAKzB,GAAI9wE,EAAG88C,WAAY,CACf,MAAMA,EAAazN,GAAcrvC,EAAG88C,YACpC,IAAK,MAAM5N,KAAQ4N,EACfxS,GAAOwlC,EAAMiB,oBAAsBjB,EAAMkB,uBAAyBl0B,EAAW5N,GAAMC,YAAY/nI,M,CAIvG,OAAOkjI,CACX,CAKA,WAAOviD,CAAKomF,GAIR,GA4HR,WACI,GAAI8C,GAAY,OAIhB,SAASC,EAAYxoK,EAAc2jI,EAAiBhqI,GAChD,MAAMg5D,EAAO,WACT,MAAM8yG,EAAU,IAAIoC,GAAQ7nK,EAAM2jI,GAalC,OAV0B,MAAtBhqI,EAAQ8uK,YACRhD,EAAQqC,aAAa,IAAIR,GAAU,KAAM3tK,EAAQ8uK,aAGrDhD,EAAQqC,aAAa,IAAIZ,KAExBvtK,EAAQyqK,SAAW,IAAIxuJ,QAASxS,IAC7BqiK,EAAQqC,aAAa1kK,KAGlBqiK,CACX,EAGAoC,GAAQ92C,SAAS/wH,EAAM2yD,GACvBk1G,GAAQ92C,SAAS4S,EAAShxE,GAEtBh5D,EAAQqjE,UACRrjE,EAAQqjE,SAASpnD,QAAS5V,IACtB6nK,GAAQ92C,SAAS/wH,EAAM2yD,IAGnC,CA9BA41G,IAAW,EAgCXC,EAAY,UAAW,EAAG,CAAEC,WAAY,EAAGzrG,SAAU,CAAE,eACvDwrG,EAAY,UAAW,EAAG,CAAEC,WAAY,IACxCD,EAAY,UAAW,EAAG,CAAEC,WAAY,IACxCD,EAAY,SAAU,EAAG,CAAEC,WAAY,IACvCD,EAAY,QAAS,GAAI,CAAEC,WAAY,KACvCD,EAAY,UAAW,SAAU,CAAEC,WAAY,WAC/CD,EAAY,UAAW,KAAO,CAAEC,WAAY,OAE5CD,EAAY,UAAW,GAAI,CAAC,GAC5BA,EAAY,eAAgB,EAAG,CAAC,GAEhCA,EAAY,WAAY,MAAO,CAC3BC,WAAY,IAEhBD,EAAY,kBAAmB,OAAQ,CAAC,GACxCA,EAAY,mBAAoB,OAAQ,CAAC,GAEzCA,EAAY,OAAQ,KAAM,CAAEC,WAAY,IACxCD,EAAY,cAAe,MAAO,CAAC,GACnCA,EAAY,eAAgB,MAAO,CAAC,GAEpCA,EAAY,MAAO,GAAI,CAAEC,WAAY,IACrCD,EAAY,OAAQ,GAAI,CAAC,GAEzBA,EAAY,QAAS,MAAO,CAAEC,WAAY,IAC1CD,EAAY,eAAgB,MAAO,CAAC,GACpCA,EAAY,gBAAiB,MAAO,CAAC,GAErCA,EAAY,QAAS,IAAK,CACtBC,WAAY,EACZrE,QAAS,CACLsE,GAAoB,+CAG5BF,EAAY,aAAc,MAAO,CAAC,GAClCA,EAAY,eAAgB,MAAO,CAC/BxrG,SAAU,CAAE,cAAe,YAC3BonG,QAAS,CACLsE,GAAoB,uDAI5BF,EAAY,WAAY,GAAI,CACxBC,WAAY,EACZrE,QAAS,KAEboE,EAAY,kBAAmB,IAAK,CAAC,GACrCA,EAAY,mBAAoB,SAAU,CAAC,GAE3CA,EAAY,OAAQ,IAAK,CAAEC,WAAY,GAC3C,CAnNQE,GAGe,MAAXlD,EAAmB,OAAOoC,GAAQxoF,KAAK,WAI3C,GADwB,kBAAbomF,IAAyBA,EAAUthD,OAAOshD,IAC7B,kBAAbA,GAA6C,kBAAbA,EAAuB,CAC9D,MAAMmD,EAAclB,GAASl2J,IAAIi0J,GACjC,GAAImD,EAAe,OAAOA,IAC1B,GAAwB,kBAAbnD,EACP,OAAO,IAAIoC,GAAQ,UAAWpC,GAGlC7gD,IAAe,EAAO,kBAAmB,UAAW6gD,E,CAIxD,GAAyC,oBAApBA,EAASnyE,MAAuB,CAIjD,OAHwBmyE,EAASnyE,O,CAOrC,GAAwB,kBAAbmyE,EAAuB,CAC9B7gD,GAAwC,kBAAlB6gD,EAAQzlK,MAAkD,kBAArBylK,EAAQ9hC,QAC/D,yCAA0C,UAAW8hC,GAEzD,MAAM1nD,EAAS,IAAI8pD,GAAiBpC,EAAQzlK,KAAgBylK,EAAQ9hC,SAUpE,OARU8hC,EAASoD,YAA2C,MAAvBpD,EAASgD,aAC5C1qD,EAAO+pD,aAAa,IAAIR,GAAgB7B,EAASoD,WAAkBpD,EAASgD,aAOzE1qD,C,CAGX6G,IAAe,EAAO,kBAAmB,UAAW6gD,EACxD,CAMA,eAAO10C,CAAS+3C,EAAyCF,GACvB,kBAAnBE,IAA+BA,EAAgB3kD,OAAO2kD,IACjE,MAAMC,EAAWrB,GAASl2J,IAAIs3J,GAC1BC,GACAnkD,IAAe,EAAO,2BAAFp4G,OAA8BosC,KAAKC,UAAUkwH,EAAS/oK,OAAU,gBAAiB8oK,GAEzGpB,GAASpvJ,IAAIwwJ,EAAeF,EAChC,EAcJ,SAASI,GAAW3iD,EAAyB9yD,GACzC,MAAMt5C,EAAQtT,OAAO0/G,GACrB,IAAKpsG,EAAMhG,MAAM,aACb,MAAM,IAAI1Z,MAAM,uBAADiS,OAAyB65G,IAI5C,MAAM+Z,EAAQnmH,EAAMtE,MAAM,KAI1B,GAHqB,IAAjByqH,EAAM1hI,QAAgB0hI,EAAMv3H,KAAK,IAGhB,IAAjBu3H,EAAM1hI,OACN,MAAM,IAAInE,MAAM,uBAADiS,OAAyB65G,IAI5C,KAAO+Z,EAAM,GAAG1hI,OAAS60D,GAAY6sE,EAAM,IAAM,IAGjD,GAAIA,EAAM,GAAG1hI,OAAS,EAAG,CACrB,IAAIuqK,EAAO9kD,OAAOic,EAAM,GAAGpgH,UAAU,EAAG,IACnCogH,EAAM,GAAGpgH,UAAU,GAAG/L,MAAM,SAAWg1J,IAC5C7oC,EAAM,GAAK6oC,EAAK1iK,U,CAGpB,OAAO49G,OAAOic,EAAM,GAAKA,EAAM,GACnC,CAGA,SAASsoC,GAAoBj2I,GACzB,OAAO,IAAIg1I,GAA6Bh1I,EAAKi0E,MAAOwiE,EAAcp0B,EAAUnK,KAKxE,IAAIqD,EAFJrD,EAAQsB,UAAU,aAAc,UAGhC,IACI,MAAQ4B,EAAWs7B,SAAmBhuI,QAAQ+2E,IAAI,CAC9Cy4B,EAAQx3D,OAAQ+1F,MAEpBl7B,EAAWH,EACX,MAAM1qG,EAAU6qG,EAASe,SAASv/H,SAMlC,MALgB,CACZskI,SAAUq1B,EAASr1B,SACnBC,aAAci1B,GAAW7lI,EAAQimI,OAAQ,GACzCp1B,qBAAsBg1B,GAAW7lI,EAAQkmI,eAAgB,G,CAG/D,MAAOzuK,GACL8pH,IAAO,EAAO,+CAAFl4G,OAAkDosC,KAAKC,UAAU8xF,EAAQl4G,KAAK,KAAK,eAAgB,CAAEk4G,UAASqD,WAAUpzI,S,GAGhJ,CAGA,IAAI2tK,IAAW,ECxVf,SAASp1J,GAAKrY,GACV,OAAO89C,KAAKuZ,MAAMvZ,KAAKC,UAAU/9C,GACrC,CAkBA,IAAAwuK,GAAA,IAAA39H,QAAA49H,GAAA,IAAA59H,QAAA69H,GAAA,IAAA79H,QAAA89H,GAAA,IAAA99H,QAAA+9H,GAAA,IAAA54H,QAMM,MAAO64H,GAaTnwJ,WAAAA,CAAYs7H,GAA0BzvB,GAAA,KAAAqkD,IAZtClmD,GAAA,KAAA8lD,QAAS,GACT9lD,GAAA,KAAA+lD,QAAO,GAEP/lD,GAAA,KAAAgmD,QAAS,GAIThmD,GAAA,KAAAimD,QAAY,GAMRnhD,GAAKghD,GAAL/+J,KAAiBuqI,GACjBxsB,GAAKihD,GAALh/J,KAAe,MACf+9G,GAAKkhD,GAALj/J,KAAiB,KAEjB+9G,GAAKmhD,GAALl/J,MAAqB,EACzB,CAKA,mBAAIq/J,GAA4B,OAAOrhD,GAAKihD,GAALj/J,KAAgB,CACvD,mBAAIq/J,CAAgB3vJ,GAAiBquG,GAAKkhD,GAALj/J,KAAiB0P,EAAO,CAqC7D7b,KAAAA,GACQmqH,GAAKghD,GAALh/J,QACJ+9G,GAAKihD,GAALh/J,KAAeg+G,GAAK+gD,GAAL/+J,MAAes/J,YAAYpmD,GAAAimD,GAAAn/J,KAAKu/J,IAAM7wI,KAAK1uB,MAAOg+G,GAAKihD,GAALj/J,QACjEk5G,GAAAimD,GAAAn/J,KAAKu/J,IAAKxnK,KAAViI,MACJ,CAEA6yI,IAAAA,GACS70B,GAAKghD,GAALh/J,QACLg+G,GAAK+gD,GAAL/+J,MAAew/J,cAAcxhD,GAAKghD,GAALh/J,OAC7B+9G,GAAKihD,GAALh/J,KAAe,MACnB,CAEAy/J,KAAAA,CAAMC,GACF1/J,KAAK6yI,OACD6sB,GAAmB3hD,GAAKmhD,GAALl/J,MAAqB,EAChD,CAEA2/J,MAAAA,GACI3/J,KAAKnM,OACT,EAIJ,eAAA0rK,KAzDQ,IACI,MAAMpzB,QAAoBnuB,GAAK+gD,GAAL/+J,MAAestI,iBAGzC,IAA2B,IAAvBtvB,GAAKkhD,GAALl/J,MAEA,YADA+9G,GAAKmhD,GAALl/J,KAAoBmsI,GAMxB,GAAIA,IAAgBnuB,GAAKkhD,GAALl/J,MAAmB,CACnC,IAAK,IAAIrI,EAAIqmH,GAAKkhD,GAALl/J,MAAoB,EAAGrI,GAAKw0I,EAAax0I,IAAK,CAEvD,GAAoB,MAAhBqmH,GAAKghD,GAALh/J,MAAwB,aAEtBg+G,GAAK+gD,GAAL/+J,MAAe2yI,KAAK,QAASh7I,E,CAGvComH,GAAKmhD,GAALl/J,KAAoBmsI,E,EAG1B,MAAO97I,GAGL,CAIgB,MAAhB2tH,GAAKghD,GAALh/J,OAEJ+9G,GAAKihD,GAALh/J,KAAeg+G,GAAK+gD,GAAL/+J,MAAes/J,YAAYpmD,GAAAimD,GAAAn/J,KAAKu/J,IAAM7wI,KAAK1uB,MAAOg+G,GAAKihD,GAALj/J,OACrE,CAAC,IAAA4/J,GAAA,IAAAx+H,QAAAy+H,GAAA,IAAAz+H,QAAA0+H,GAAA,IAAA1+H,QA+BC,MAAO2+H,GAQT9wJ,WAAAA,CAAYs7H,GAPZtxB,GAAA,KAAA2mD,QAAS,GACT3mD,GAAA,KAAA4mD,QAAK,GACL5mD,GAAA,KAAA6mD,QAAQ,GAMJ/hD,GAAK6hD,GAAL5/J,KAAiBuqI,GACjBxsB,GAAK+hD,GAAL9/J,MAAgB,GAChB+9G,GAAK8hD,GAAL7/J,KAAcmsI,IACVnsI,KAAKu/J,MAAMpzB,EAAanuB,GAAK4hD,GAAL5/J,QAEhC,CAKA,WAAMu/J,CAAMpzB,EAAqB5B,GAC7B,MAAM,IAAIv6I,MAAM,iCACpB,CAEA6D,KAAAA,GACQmqH,GAAK8hD,GAAL9/J,QACJ+9G,GAAK+hD,GAAL9/J,MAAgB,GAEhBg+G,GAAK6hD,GAAL7/J,MAAUjI,KAAViI,MAAY,GACZg+G,GAAK4hD,GAAL5/J,MAAe6uI,GAAG,QAAS7wB,GAAK6hD,GAAL7/J,OAC/B,CAEA6yI,IAAAA,GACS70B,GAAK8hD,GAAL9/J,QACL+9G,GAAK+hD,GAAL9/J,MAAgB,GAEhBg+G,GAAK4hD,GAAL5/J,MAAe4uI,IAAI,QAAS5wB,GAAK6hD,GAAL7/J,OAChC,CAEAy/J,KAAAA,CAAMC,GAAmC1/J,KAAK6yI,MAAQ,CACtD8sB,MAAAA,GAAiB3/J,KAAKnM,OAAS,EAClC,IAAA0N,GAAA,IAAA6/B,QAAA4+H,GAAA,IAAA5+H,QAEK,MAAO6+H,WAAkCF,GAI3C9wJ,WAAAA,CAAYs7H,EAA4B/oI,GACpC+8F,MAAMgsC,GAJDtxB,GAAA,KAAA13G,QAAI,GACb03G,GAAA,KAAA+mD,QAAU,GAINjiD,GAAKx8G,GAALvB,KAAYwB,GACZu8G,GAAKiiD,GAALhgK,MAAmB,EACvB,CAEAy/J,KAAAA,CAAMC,GACEA,GAAmB3hD,GAAKiiD,GAALhgK,MAAmB,GAC1Cu+F,MAAMkhE,MAAMC,EAChB,CAEA,WAAMH,CAAMpzB,EAAqB5B,GAC7B,MAAMv0I,QAAcu0I,EAAS+B,SAAStuB,GAAKz8G,GAALvB,OACzB,MAAThK,KAEqB,IAArBgoH,GAAKgiD,GAALhgK,MACA+9G,GAAKiiD,GAALhgK,KAAkBhK,EAAM4xB,QACjB5xB,EAAM4xB,OAASo2F,GAAKgiD,GAALhgK,QACtBuqI,EAASoI,KAAK30B,GAAKz8G,GAALvB,MAAWhK,EAAM4xB,QAC/Bm2F,GAAKiiD,GAALhgK,KAAkBhK,EAAM4xB,SAEhC,EAIJ,IAAAgpH,GAAA,IAAAxvG,QAKM,MAAO8+H,WAAgCH,GAGzC9wJ,WAAAA,CAAYs7H,EAA4BjsF,GACpCigD,MAAMgsC,GAHVtxB,GAAA,KAAA23B,QAAO,GAIH7yB,GAAK6yB,GAAL5wI,KAAe4I,GAAK01C,GACxB,CAEA,WAAMihH,CAAMpzB,EAAqB5B,GAC7B,MAAM,IAAIv6I,MAAM,QAEpB,EAGJ,IAAAmwK,GAAA,IAAA/+H,QAMM,MAAOg/H,WAAqCL,GAO9C9wJ,WAAAA,CAAYs7H,EAA4Bl1F,GACpCkpD,MAAMgsC,GAPVtxB,GAAA,KAAAknD,QAAK,GAQDpiD,GAAKoiD,GAALngK,KAAaq1C,EACjB,CAEA,WAAMkqH,CAAMpzB,EAAqB5B,GAC7B,MAAMx9C,QAAWw9C,EAASgC,sBAAsBvuB,GAAKmiD,GAALngK,OAC5C+sF,GAAMw9C,EAASoI,KAAK30B,GAAKmiD,GAALngK,MAAY+sF,EACxC,EAGJ,IAAAszE,GAAA,IAAAj/H,QAAAk/H,GAAA,IAAAl/H,QAAAm/H,GAAA,IAAAn/H,QAAAo/H,GAAA,IAAAp/H,QAAAq/H,GAAA,IAAAr/H,QAAAs/H,GAAA,IAAAn6H,QAKM,MAAOo6H,GAeT1xJ,WAAAA,CAAYs7H,EAA4BjsF,GAAmBw8D,GAAA,KAAA4lD,IAd3DznD,GAAA,KAAAonD,QAAS,GACTpnD,GAAA,KAAAqnD,QAAO,GACPrnD,GAAA,KAAAsnD,QAAO,GAEPtnD,GAAA,KAAAunD,QAAQ,GAIRvnD,GAAA,KAAAwnD,QAAY,GAOR1iD,GAAKsiD,GAALrgK,KAAiBuqI,GACjBxsB,GAAKuiD,GAALtgK,KAAe4I,GAAK01C,IACpBy/D,GAAKwiD,GAALvgK,KAAek5G,GAAAwnD,GAAA1gK,KAAK4gK,IAAMlyI,KAAK1uB,OAC/B+9G,GAAKyiD,GAALxgK,MAAgB,GAChB+9G,GAAK0iD,GAALzgK,MAAqB,EACzB,CA+BAnM,KAAAA,GACQmqH,GAAKwiD,GAALxgK,QACJ+9G,GAAKyiD,GAALxgK,MAAgB,IAEW,IAAvBg+G,GAAKyiD,GAALzgK,OACAg+G,GAAKqiD,GAALrgK,MAAestI,iBAAiBt8G,KAAMm7G,IAClCpuB,GAAK0iD,GAALzgK,KAAoBmsI,KAG5BnuB,GAAKqiD,GAALrgK,MAAe6uI,GAAG,QAAS7wB,GAAKuiD,GAALvgK,OAC/B,CAEA6yI,IAAAA,GACS70B,GAAKwiD,GAALxgK,QACL+9G,GAAKyiD,GAALxgK,MAAgB,GAEhBg+G,GAAKqiD,GAALrgK,MAAe4uI,IAAI,QAAS5wB,GAAKuiD,GAALvgK,OAChC,CAEAy/J,KAAAA,CAAMC,GACF1/J,KAAK6yI,OACD6sB,GAAmB3hD,GAAK0iD,GAALzgK,MAAqB,EAChD,CAEA2/J,MAAAA,GACI3/J,KAAKnM,OACT,EACH,eAAA+sK,GAxDez0B,GAER,IAA2B,IAAvBnuB,GAAKyiD,GAALzgK,MAA4B,OAEhC,MAAMs+C,EAAS11C,GAAKo1G,GAAKsiD,GAALtgK,OACpBs+C,EAAO+1F,UAAYr2B,GAAKyiD,GAALzgK,MAAoB,EACvCs+C,EAAOg2F,QAAUnI,EAEjB,MAAMS,QAAa5uB,GAAKqiD,GAALrgK,MAAeu0I,QAAQj2F,GAI1C,GAAoB,IAAhBsuF,EAAKz4I,OAOT,IAAK,MAAM6P,KAAO4oI,EACd5uB,GAAKqiD,GAALrgK,MAAe2yI,KAAK30B,GAAKsiD,GAALtgK,MAAcgE,GAKlC+5G,GAAK0iD,GAALzgK,KAAoBgE,EAAImoI,kBAZpBnuB,GAAKyiD,GAALzgK,MAAoBmsI,EAAc,IAClCpuB,GAAK0iD,GAALzgK,KAAoBmsI,EAAc,GAa9C,CCnOJ,MAAM5P,GAAO3iB,OAAO,GAIpB,SAASinD,GAAmBnxJ,GACxB,OAAQA,GAAgC,oBAAhBA,EAAMshB,IAClC,CAEA,SAAS8vI,GAAO/9D,EAAgBrzF,GAC5B,OAAOqzF,EAAS,IAAM10D,KAAKC,UAAU5+B,EAAO,CAACjZ,EAAGmU,KAC5C,GAAS,MAALA,EAAa,MAAO,OACxB,GAAkB,kBAAPA,EAAmB,MAAO,UAAP3I,OAAkB2I,EAAE5O,YAClD,GAAkB,kBAAP4O,EAAmB,OAAOA,EAAEU,cAGvC,GAAkB,kBAAPV,IAAoBtR,MAAMiG,QAAQqL,GAAI,CAC7C,MAAM7Y,EAAO+E,OAAO/E,KAAK6Y,GAEzB,OADA7Y,EAAK+iG,OACE/iG,EAAK+4D,OAAO,CAAC0uD,EAAO7oH,KACvB6oH,EAAM7oH,GAAOia,EAAEja,GACR6oH,GACH,CAAC,E,CAGb,OAAO5uG,GAEf,CAoGM,MAAOm2J,GAST9xJ,WAAAA,CAAYxZ,GARZ67F,EAAA,oBAQ4BK,GAAsC3xF,KAAM,CAAEvK,QAAS,CAEnF5B,KAAAA,GAAgB,CAChBg/I,IAAAA,GAAe,CAEf4sB,KAAAA,CAAMC,GAAmC,CACzCC,MAAAA,GAAiB,EAkBrB,SAASqB,GAAUzjD,GAGf,OAFAA,EAAQjkH,MAAMw7E,KAAM,IAAI9qE,IAAIuzG,GAAQr/D,WAC9B42C,OACCyoB,CACX,CAGAphB,eAAe8kE,GAAgBC,EAAuB32B,GAClD,GAAc,MAAV22B,EAAkB,MAAM,IAAIlxK,MAAM,iBAKtC,GAFIsJ,MAAMiG,QAAQ2hK,KAAWA,EAAS,CAAEn5B,OAAQm5B,IAEzB,kBAAZA,EACP,OAAQA,GACJ,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,YACL,IAAK,UACL,IAAK,UACL,IAAK,OACD,MAAO,CAAEnxK,KAAMmxK,EAAQ1/J,IAAK0/J,GAKxC,GAAIjmD,GAAYimD,EAAQ,IAAK,CACzB,MAAM7rH,EAAO6rH,EAAO51J,cACpB,MAAO,CAAEvb,KAAM,cAAeyR,IAAKs/J,GAAO,KAAM,CAAEzrH,SAASA,O,CAG/D,GAAU6rH,EAAQn1B,OAAQ,CACtB,MAAMxjH,EAAsB24I,EAE5B,MAAO,CAAEnxK,KAAM,SAAUyR,IAAKs/J,GAAO,SAAUv4I,GAAQ+1B,QAvCxC5uC,EAuCqD6Y,EAtCjE8lB,KAAKuZ,MAAMvZ,KAAKC,UAAU5+B,K,CADrC,IAAuBA,EA0CnB,GAAWwxJ,EAAQv6C,SAAiBu6C,EAAQn5B,OAAS,CACjD,MAAMx/G,EAAqB24I,EAErB5iH,EAAc,CAChBypF,QAAUx/G,EAAMw/G,QAAU,IAAI58E,IAAKtnD,GACtB,MAALA,EAAoB,KACpBvK,MAAMiG,QAAQsE,GACPm9J,GAAUn9J,EAAEsnD,IAAKtnD,GAAMA,EAAEyH,gBAE7BzH,EAAEyH,gBAIjB,GAAIid,EAAMo+F,QAAS,CACf,MAAMw6C,EAA2B,GAC3BzrC,EAAiC,GAEjC0rC,EAAcnlC,IACZhhB,GAAYghB,GACZklC,EAAU7iK,KAAK29H,GAEfvG,EAASp3H,KAAK,WACV6iK,EAAU7iK,WAAWu6H,GAAeoD,EAAMsO,GAC7C,EAFa,KAMlBjxI,MAAMiG,QAAQgpB,EAAMo+F,SACpBp+F,EAAMo+F,QAAQt7G,QAAQ+1J,GAEtBA,EAAW74I,EAAMo+F,SAEjB+O,EAASvhI,cAAgBy8B,QAAQ+2E,IAAI+tB,GACzCp3E,EAAOqoE,QAAUq6C,GAAUG,EAAUh2G,IAAK1zD,GAAMA,EAAE6T,e,CAGtD,MAAO,CAAEgzC,SAAQ98C,IAAKs/J,GAAO,QAASxiH,GAASvuD,KAAM,Q,CAGzDsqH,IAAe,EAAO,wBAAyB,QAAS6mD,EAC5D,CAEA,SAAS1+B,KAAoB,OAAQ,IAAI58H,MAAQ48H,SAAW,CA0H5D,MAAM6+B,GAAiB,CACnBC,aAAc,IACdjC,gBAAiB,KAYrB,IAAAkC,GAAA,IAAAngI,QAAAi8H,GAAA,IAAAj8H,QAAAogI,GAAA,IAAApgI,QAAAqgI,GAAA,IAAArgI,QAAAsgI,GAAA,IAAAtgI,QAAAugI,GAAA,IAAAvgI,QAAAwgI,GAAA,IAAAxgI,QAAAygI,GAAA,IAAAzgI,QAAA0gI,GAAA,IAAA1gI,QAAA2gI,GAAA,IAAA3gI,QAAA4gI,GAAA,IAAA5gI,QAAAqmF,GAAA,IAAArmF,QAAA6gI,GAAA,IAAA17H,QAMM,MAAO27H,GA8BTjzJ,WAAAA,CAAYkzJ,EAA+B/yK,GAGvC,GAqEJ0rH,GAAA,KAAAmnD,IApGAhpD,GAAA,KAAAsoD,QAAK,GACLtoD,GAAA,KAAAokD,QAAQ,GAGRpkD,GAAA,KAAAuoD,QAAY,GAEZvoD,GAAA,KAAAwoD,QAAU,GAEVxoD,GAAA,KAAAyoD,QAAe,GACNzoD,GAAA,KAAA0oD,QAAW,GAEpB1oD,GAAA,KAAA2oD,QAAa,GAGb3oD,GAAA,KAAA4oD,QAAgB,GAEhB5oD,GAAA,KAAA6oD,QAAU,GACV7oD,GAAA,KAAA8oD,QAAO,GAEP9oD,GAAA,KAAA+oD,QAAgB,GAEhB/oD,GAAA,KAAAwO,QAAQ,GAQJ1J,GAAK0J,GAALznH,KAAgBlJ,OAAOyW,OAAO,CAAC,EAAI8zJ,GAAgBjyK,GAAW,CAAC,IAE9C,QAAb+yK,EACApkD,GAAK4jD,GAAL3hK,MAAmB,GACnB+9G,GAAK2jD,GAAL1hK,KAAuB,WACpB,GAAImiK,EAAU,CACjB,MAAMjH,EAAUoC,GAAQxoF,KAAKqtF,GAC7BpkD,GAAK4jD,GAAL3hK,MAAmB,GACnB+9G,GAAK2jD,GAAL1hK,KAAuB4wB,QAAQG,QAAQmqI,IACvC1qI,WAAW,KAAQxwB,KAAK2yI,KAAK,UAAWuoB,EAAS,OAAU,E,MAE3Dn9C,GAAK4jD,GAAL3hK,MAAmB,GACnB+9G,GAAK2jD,GAAL1hK,KAAuB,MAG3B+9G,GAAK8jD,GAAL7hK,MAAyB,GAEzB+9G,GAAK6jD,GAAL5hK,KAAqB,IAAIid,KAEzB8gG,GAAKwjD,GAALvhK,KAAa,IAAIid,KACjB8gG,GAAKs/C,GAALr9J,KAAgB,IAAIid,KACpB8gG,GAAKyjD,GAALxhK,KAAoB,MAEpB+9G,GAAK0jD,GAALzhK,MAAkB,GAElB+9G,GAAK+jD,GAAL9hK,KAAkB,GAClB+9G,GAAKgkD,GAAL/hK,KAAe,IAAIid,KAEnB8gG,GAAKikD,GAALhiK,MAAwB,EAC5B,CAEA,mBAAIq/J,GAA4B,OAAOrhD,GAAKyJ,GAALznH,MAAcq/J,eAAiB,CAMtE,YAAI90B,GAAmB,OAAOvqI,IAAM,CAKpC,WAAI65J,GACA,OAAOvgK,MAAMw7E,KAAKkpC,GAAKq/C,GAALr9J,MAAck+C,SACpC,CAKAq/G,YAAAA,CAAa1kK,GACT,GAAImlH,GAAKq/C,GAALr9J,MAAciH,IAAIpO,EAAOpD,MACzB,MAAM,IAAIzF,MAAM,mCAADiS,OAAqCpJ,EAAOpD,KAAK,MAGpE,OADAuoH,GAAKq/C,GAALr9J,MAAc+N,IAAIlV,EAAOpD,KAAOoD,EAAO46I,QAAQzzI,OACxCA,IACX,CAKAq7J,SAAAA,CAAqE5lK,GACjE,OAAWuoH,GAAKq/C,GAALr9J,MAAciH,IAAIxR,IAAU,IAC3C,CAMA,mBAAI2sK,GAA6B,OAAOpkD,GAAKgkD,GAALhiK,KAAuB,CAC/D,mBAAIoiK,CAAgB1yJ,GAAkBquG,GAAKikD,GAALhiK,OAA0B0P,EAAO,CA+BvE,mBAAM2yJ,CAAct1E,EAA8Bu1E,EAAkBC,GAChE,GAAIviK,KAAKoiK,iBAAmC,IAAhBG,EAAKpuK,QAAyB,MAAT44F,EAAGqF,GAAc,OAAO,KAEzE,MAAMowE,EAASz1E,EAAGqF,GAAG9mF,cACf3O,EAAO2lK,EAASh3J,cAEhBm3J,EAA+B,GAErC,IAAK,IAAI5tK,EAAI,EAAGA,EAAI0tK,EAAKpuK,OAAQU,IAAK,CAClC,MAAMqzB,EAAMq6I,EAAK1tK,GAGXiS,EAAOohB,EAAIhc,QAAQ,WAAYs2J,GAAQt2J,QAAQ,SAAUvP,GASzDyjI,EAAU,IAAIR,GAAa94H,IACF,IAA3BohB,EAAI5S,QAAQ,YACZ8qH,EAAQjwI,KAAO,CAAEwM,OAAM6lK,WAG3BxiK,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,2BAA4BwkG,UAAS37H,MAAO5P,EAAG0tK,SAE5E,IAGIzjC,EAHA4jC,EAAe,gBAInB,IACI5jC,QAAasB,EAAQx3D,M,CACvB,MAAOv4E,GAGLoyK,EAAcnkK,KAAKjO,EAAMuU,SACzB5E,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,4BAA6BwkG,UAASrmF,OAAQ,CAAE1pD,WAC7E,Q,CAGJ,IACI,MAAM0pD,EAAS+kF,EAAK0F,SACpB,GAAIzqF,EAAOp9C,KAEP,OADAqD,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,6BAA8BwkG,UAASrmF,WAC7DA,EAAOp9C,KAEdo9C,EAAOn1C,UAAW89J,EAAe3oH,EAAOn1C,SAC5C5E,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,4BAA6BwkG,UAASrmF,U,CACrE,MAAO1pD,GAAQ,CAGjB8pH,GAAO2kB,EAAKI,WAAa,KAAOJ,EAAKI,YAAc,IAAK,yCAAFj9H,OAA4CygK,GAC9F,iBAAkB,CAAEpyC,OAAQ,uBAAwBmI,YAAa1rC,EAAI3mF,KAAM,CAAE8hB,MAAKw6I,kBAGtFD,EAAcnkK,KAAKokK,E,CAGvBvoD,IAAO,EAAO,wCAAFl4G,OAA2CwgK,EAAct3G,IAAKt0D,GAAMw3C,KAAKC,UAAUz3C,IAAI8S,KAAK,OAAU,iBAAkB,CAChI2mH,OAAQ,mBACRmI,YAAa1rC,EAAI3mF,KAAM,CAAEm8J,OAAME,kBAEvC,CAOAE,UAAAA,CAAWjzJ,EAAoBwrJ,GAC3B,OAAO,IAAI5wB,GL5fb,SAAsB56H,GACxB,MAAMqqC,EAASoiH,GAAazsJ,GAK5B,OAJAqqC,EAAOywF,aAAe96H,EAAM86H,aAAar/E,IAAK4hC,GACvB,kBAARA,EAA2BA,EAC/BuvE,GAA0BvvE,IAE9BhzC,CACX,CKqfyB6oH,CAAYlzJ,GAAQ1P,KACzC,CAOA6iK,QAAAA,CAASnzJ,EAAkBwrJ,GACvB,OAAO,IAAIlvB,GLtiBb,SAAoBt8H,GACtB,OAAOwsJ,GAAWxsJ,EACtB,CKoiBuBozJ,CAAUpzJ,GAAQ1P,KACrC,CAOA+iK,uBAAAA,CAAwBrzJ,EAAiCwrJ,GACrD,OAAO,IAAIvuB,GL1db,SAAmCj9H,GACrC,OAAO2sJ,GAA0B3sJ,EACrC,CKwdsCszJ,CAAyBtzJ,GAAQ1P,KACnE,CAOAijK,wBAAAA,CAAyBl2E,EAA+BmuE,GACpD,OAAO,IAAIzwB,GAAoB6xB,GAA0BvvE,GAAK/sF,KAClE,CAQAkjK,cAAAA,GACI/oD,IAAO,EAAO,kCAAmC,wBAAyB,CACtEU,UAAW,kBAEnB,CAQA,cAAMsoD,CAAkBllC,GACpB9jB,IAAO,EAAO,uBAAFl4G,OAA0Bg8H,EAAIz7B,QAAW,wBAAyB,CAC1EqY,UAAWojB,EAAIz7B,OACfp8F,KAAM63H,GAEd,CAIA,oBAAMqP,GACF,MAAMnB,EAAclwB,SAAgB/C,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CAAEwiG,OAAQ,mBAAqB,aAEjF,OADIwb,GAAK6jD,GAAL7hK,OAAyB,GAAK+9G,GAAK8jD,GAAL7hK,KAAwBmsI,GACnDA,CACX,CAOAi3B,WAAAA,CAAYz8C,GACR,OAAOkS,GAAelS,EAAS3mH,KACnC,CAMAqjK,YAAAA,CAAat5B,GACT,GAAgB,MAAZA,EAAoB,MAAO,SAE/B,OAAQA,GACJ,IAAK,WACD,MAAO,MACX,IAAK,YACL,IAAK,SACL,IAAK,UACL,IAAK,OACD,OAAOA,EAIf,OAAI9uB,GAAY8uB,GACR9uB,GAAY8uB,EAAU,IAAcA,EACjCptB,GAAWotB,IAGG,kBAAdA,IACPA,EAAW9tB,GAAU8tB,EAAU,aAGV,kBAAdA,EACHA,GAAY,EAAYptB,GAAWotB,GACnC/rB,GAAK6jD,GAAL7hK,OAAyB,EAAY28G,GAAWqB,GAAK6jD,GAAL7hK,MAAwB+pI,GACrE/pI,KAAKstI,iBAAiBt8G,KAAMr5B,GAAMglH,GAAWhlH,EAAYoyI,SAGpE1vB,IAAe,EAAO,mBAAoB,WAAY0vB,GAC1D,CAOAu5B,UAAAA,CAAWhlH,GAGP,MAAMypF,GAAUzpF,EAAOypF,QAAU,IAAK58E,IAAKtnD,GAC9B,MAALA,EAAoB,KACpBvK,MAAMiG,QAAQsE,GACPm9J,GAAUn9J,EAAEsnD,IAAKtnD,GAAMA,EAAEyH,gBAE7BzH,EAAEyH,eAGP4gI,EAAa,cAAe5tF,EAAUA,EAAO4tF,eAAWjyF,EAExDlpB,EAAUA,CAACwyI,EAAyBlvB,EAAoBC,KAC1D,IAAI3tB,EACJ,OAAQ48C,EAASpvK,QACb,KAAK,EAAG,MACR,KAAK,EACDwyH,EAAU48C,EAAS,GACnB,MACJ,QACIA,EAASzuE,OACT6xB,EAAU48C,EAGlB,GAAIr3B,IACiB,MAAbmI,GAAgC,MAAXC,GACrB,MAAM,IAAItkJ,MAAM,kBAIxB,MAAMsuD,EAAc,CAAC,EAOrB,OANIqoE,IAAWroE,EAAOqoE,QAAUA,GAC5BohB,EAAO5zI,SAAUmqD,EAAOypF,OAASA,GACjCsM,IAAa/1F,EAAO+1F,UAAYA,GAChCC,IAAWh2F,EAAOg2F,QAAUA,GAC5BpI,IAAa5tF,EAAO4tF,UAAYA,GAE7B5tF,GAIX,IASI+1F,EAGAC,EAZA3tB,EAA2C,GAC/C,GAAIroE,EAAOqoE,QACP,GAAIrtH,MAAMiG,QAAQ++C,EAAOqoE,SACrB,IAAK,MAAMsV,KAAQ39E,EAAOqoE,QAAWA,EAAQroH,KAAK0B,KAAKojK,YAAYnnC,SAEnEtV,EAAQroH,KAAK0B,KAAKojK,YAAY9kH,EAAOqoE,UAU7C,MALI,cAAeroE,IAAU+1F,EAAYr0I,KAAKqjK,aAAa/kH,EAAO+1F,YAG9D,YAAa/1F,IAAUg2F,EAAUt0I,KAAKqjK,aAAa/kH,EAAOg2F,UAE1D3tB,EAAQroE,OAAQ7mD,GAAqB,kBAAPA,GAAkBtD,QAClC,MAAbkgJ,GAA2C,kBAAfA,GACjB,MAAXC,GAAuC,kBAAbA,EAEpB1jH,QAAQ+2E,IAAI,CAAE/2E,QAAQ+2E,IAAIgf,GAAU0tB,EAAWC,IAAWtjH,KAAM+oB,GAC5DhpB,EAAQgpB,EAAO,GAAIA,EAAO,GAAIA,EAAO,KAI7ChpB,EAAuB41F,EAAS0tB,EAAWC,EACtD,CAOAkvB,sBAAAA,CAAuBngC,GACnB,MAAMjD,EAAoCsJ,GAAYrG,GAEhD3N,EAAiC,GAYvC,GAXA,CAAE,KAAM,QAASrqH,QAAS1a,IACtB,GAA2B,MAAjByvI,EAASzvI,GAAgB,OAEnC,MAAMsrI,EAAOpD,GAAqBuH,EAASzvI,GAAMqP,MAC7C6gK,GAAU5kC,GACVvG,EAASp3H,KAAM69F,iBAAyBikC,EAASzvI,SAAasrI,CAAM,CAArD9/B,IAETikC,EAASzvI,GAAOsrI,IAIN,MAApBmE,EAAQ2J,SAAkB,CAC1B,MAAMA,EAAW/pI,KAAKqjK,aAAajjC,EAAQ2J,UACvC82B,GAAU92B,GACVrU,EAASp3H,KAAM69F,iBAAmBikC,EAAQ2J,eAAiBA,CAAU,CAAtD5tC,IAEfikC,EAAQ2J,SAAWA,C,CAI3B,OAAIrU,EAASvhI,OACDgoG,iBAEJ,aADMvrE,QAAQ+2E,IAAI+tB,GACX0K,CACX,CAHQjkC,GAMLikC,CACX,CAEA,gBAAM+6B,GAGF,GAA4B,MAAxBn9C,GAAK0jD,GAAL1hK,MAA8B,CAG9B,MAAMyjK,EAAgB,WAClB,IACI,MAAMvI,QAAgBl7J,KAAKkjK,iBAE3B,OADAljK,KAAK2yI,KAAK,UAAWuoB,EAAS,MACvBA,C,CACT,MAAO7qK,GAIL,MAHI2tH,GAAK0jD,GAAL1hK,QAAyByjK,GACzB1lD,GAAK2jD,GAAL1hK,KAAuB,MAErB3P,C,CAEb,EAXqB,GActB,OADA0tH,GAAK2jD,GAAL1hK,KAAuByjK,UACTA,GAAe16E,O,CAGjC,MAAM26E,EAAiB1lD,GAAK0jD,GAAL1hK,OAEfqgF,EAAUsjF,SAAiB/yI,QAAQ+2E,IAAI,CAC3C+7D,EACA1jK,KAAKkjK,mBAoBT,OAjBI7iF,EAAS+4C,UAAYuqC,EAAOvqC,UACxBpb,GAAK2jD,GAAL3hK,OAEAA,KAAK2yI,KAAK,UAAWgxB,EAAQtjF,GAGzB29B,GAAK0jD,GAAL1hK,QAAyB0jK,GACzB3lD,GAAK2jD,GAAL1hK,KAAuB4wB,QAAQG,QAAQ4yI,KAI3CxpD,IAAO,EAAO,oBAAFl4G,OAAuBo+E,EAAS+4C,QAAQ,QAAAn3H,OAAQ0hK,EAAOvqC,QAAQ,KAAK,gBAAiB,CAC7F7wG,MAAO,aAKZ83D,EAAS0I,OACpB,CAEA,gBAAM66E,GACF,MAAM1I,QAAgBl7J,KAAKm7J,aAErB0I,EAAiB1nE,UACnB,MAAM,OAAE2nE,EAAM,SAAEv6B,EAAQ,YAAEw6B,SAAsBxqD,GAAkB,CAC9DuqD,OAAQ5qD,GAAA+oD,GAAAjiK,KAAKgkK,IAASjsK,KAAdiI,KAAe,UAAU,GACjCupI,SAAW,WACP,IAEI,OAAOvtB,SADa9C,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CAAEwiG,OAAQ,gBACpB,Y,CAC1B,MAAOnyG,GAAQ,CACjB,OAAO,IACV,EANU,GAOX0zK,YAAc,WACV,IAEI,OAAO/nD,SADa9C,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CAAEwiG,OAAQ,mBACpB,Y,CAC1B,MAAOnyG,GAAQ,CACjB,OAAO,IACV,EANa,KASlB,IAAIm5I,EAA8B,KAC9BC,EAAsC,KAG1C,MAAMzzI,EAAQgK,KAAK2iK,WAAWmB,EAAQ5I,GAMtC,OALIllK,GAASA,EAAMo1I,gBACf3B,EAAuC,MAAfs6B,EAAuBA,EAAanqD,OAAO,cACnE4vB,EAAgBxzI,EAAMo1I,cAAgB7O,GAAQkN,GAG3C,IAAIH,GAAQC,EAAUC,EAAcC,IAIzC5wI,EAAuCqiK,EAAQG,UAAU,oDAC/D,GAAIxiK,EAAQ,CACR,MAAMolI,EAAM,IAAI2B,GAAa/mI,EAAOqvB,KAC9B+7I,QAAgBprK,EAAOmpI,YAAY6hC,EAAgB7jK,KAAMi+H,GAC/D,OAAO,IAAIqL,GAAQ26B,EAAQ16B,SAAU06B,EAAQz6B,aAAcy6B,EAAQx6B,qB,CAGvE,aAAao6B,GACjB,CAGA,iBAAMtzB,CAAY2zB,GACd,IAAIn3E,EAAK/sF,KAAKwjK,uBAAuBU,GAErC,OADIrD,GAAU9zE,KAAOA,QAAWA,GACzBivB,SAAgB9C,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CACjCwiG,OAAQ,cAAei2B,YAAa1rC,IACpC,YACR,CA6EA,UAAMh1F,CAAKmsK,GACP,MAAM,GAAEn3E,EAAE,SAAEg9C,SAAmBxwB,GAAkB,CAC7CxsB,GAAI/sF,KAAKwjK,uBAAuBU,GAChCn6B,SAAU/pI,KAAKqjK,aAAaa,EAAIn6B,YAGpC,aAAa7wB,GAAA+oD,GAAAjiK,KAAKmkK,IAAapsK,KAAlBiI,KAAmBk5G,GAAA+oD,GAAAjiK,KAAKokK,IAAKrsK,KAAViI,KAAW+sF,EAAIg9C,EAAUm6B,EAAIl6B,eAAiB,GAAI,GACtF,CAcA,gBAAMq6B,CAAW19C,EAAsBojB,GACnC,OAAO/tB,SAAgB9C,GAAA+oD,GAAAjiK,KAAKskK,IAAgBvsK,KAArBiI,KAAsB,CAAEwiG,OAAQ,cAAgBmkB,EAASojB,GAAW,YAC/F,CAEA,yBAAMoE,CAAoBxnB,EAAsBojB,GAC5C,OAAO9tB,SAAgB/C,GAAA+oD,GAAAjiK,KAAKskK,IAAgBvsK,KAArBiI,KAAsB,CAAEwiG,OAAQ,uBAAyBmkB,EAASojB,GAAW,YACxG,CAEA,aAAM6J,CAAQjtB,EAAsBojB,GAChC,OAAO3uB,SAAclC,GAAA+oD,GAAAjiK,KAAKskK,IAAgBvsK,KAArBiI,KAAsB,CAAEwiG,OAAQ,WAAamkB,EAASojB,GAC/E,CAEA,gBAAMw6B,CAAW59C,EAAsB69C,EAAyBz6B,GAC5D,MAAMx1B,EAAWyH,GAAUwoD,EAAW,YACtC,OAAOppD,SAAclC,GAAA+oD,GAAAjiK,KAAKskK,IAAgBvsK,KAArBiI,KAAsB,CAAEwiG,OAAQ,aAAc+R,YAAYoS,EAASojB,GAC5F,CAGA,0BAAM06B,CAAqBC,GACvB,MAAM,YAAEv4B,EAAW,KAAE92F,EAAI,QAAE6lH,SAAkB3hD,GAAkB,CAC1D4yB,YAAansI,KAAKstI,iBAClBj4F,KAAMr1C,KAAKmjK,SAAS,CAChB3gE,OAAQ,uBACRmiE,kBAAmBD,IAEvBxJ,QAASl7J,KAAKm7J,eAGbpuE,EAAKipE,GAAYlhF,KAAK4vF,GAC5B,GAAI33E,EAAG13C,OAASA,EACZ,MAAM,IAAIrlD,MAAM,0CAGpB,OAAOgQ,KAAKijK,yBAA8Bl2E,EAAImuE,GAAS5sB,uBAAuBnC,EAClF,CAoBA,cAAMG,CAASt2I,EAA0B4uK,GACrC,MAAM,QAAE1J,EAAO,OAAE1iH,SAAiB+gE,GAAkB,CAChD2hD,QAASl7J,KAAKm7J,aACd3iH,OAAQ0gE,GAAA+oD,GAAAjiK,KAAKgkK,IAASjsK,KAAdiI,KAAehK,IAAS4uK,KAEpC,OAAc,MAAVpsH,EAAyB,KAEtBx4C,KAAK2iK,WAAWnqH,EAAQ0iH,EACnC,CAEA,oBAAMzvB,CAAep2F,GACjB,MAAM,QAAE6lH,EAAO,OAAE1iH,SAAiB+gE,GAAkB,CAChD2hD,QAASl7J,KAAKm7J,aACd3iH,OAAQ0gE,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CAAEwiG,OAAQ,iBAAkBntD,WAEtD,OAAc,MAAVmD,EAAyB,KAEtBx4C,KAAKijK,yBAAyBzqH,EAAQ0iH,EACjD,CAEA,2BAAM3uB,CAAsBl3F,GACxB,MAAM,QAAE6lH,EAAO,OAAE1iH,SAAiB+gE,GAAkB,CAChD2hD,QAASl7J,KAAKm7J,aACd3iH,OAAQ0gE,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CAAEwiG,OAAQ,wBAAyBntD,WAE7D,GAAc,MAAVmD,EAAkB,OAAO,KAI7B,GAAuB,MAAnBA,EAAO+wF,UAAgD,MAA5B/wF,EAAOq0F,kBAA2B,CAC7D,MAAM9/C,QAAWmsB,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CAAEwiG,OAAQ,iBAAkBntD,SAC3D,GAAU,MAAN03C,EAAc,MAAM,IAAI/8F,MAAM,uDAClCwoD,EAAOq0F,kBAAoB9/C,EAAGw8C,Q,CAGlC,OAAOvpI,KAAK+iK,wBAAwBvqH,EAAQ0iH,EAChD,CAEA,0BAAM9tB,CAAqB/3F,GACvB,MAAM,OAAE0E,SAAiBw/D,GAAkB,CACvC2hD,QAASl7J,KAAKm7J,aACdphH,OAAQm/D,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CAAEwiG,OAAQ,uBAAwBntD,WAE5D,OAAc,MAAV0E,EAAyB,KACtBqhE,GAAQrhE,EACnB,CAGA,aAAMw6F,CAAQ3D,GACV,IAAItyF,EAASt+C,KAAKsjK,WAAW1yB,GACzBiwB,GAAUviH,KAAWA,QAAeA,GAExC,MAAM,QAAE48G,EAAO,OAAE1iH,SAAiB+gE,GAAkB,CAChD2hD,QAASl7J,KAAKm7J,aACd3iH,OAAQ0gE,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAgC,CAAEwiG,OAAQ,UAAWlkD,aAGjE,OAAO9F,EAAO2S,IAAK/zD,GAAM4I,KAAK6iK,SAASzrK,EAAG8jK,GAC9C,CAGA2J,YAAAA,CAAazrC,GACTjf,IAAO,EAAO,4CAA6C,wBAAyB,CAChFU,UAAW,kBAEnB,CAEA,iBAAM81B,CAAYl7I,GACd,aAAa8jK,GAAY+B,SAASt7J,KAAMvK,EAC5C,CAEA,eAAM0kK,CAAU1kK,GACZ,MAAMqjI,QAAiB94H,KAAK2wI,YAAYl7I,GACxC,OAAIqjI,QAAyBA,EAASqhC,YAC/B,IACX,CAEA,iBAAMphC,CAAYtjI,GACd,MAAMqjI,QAAiB94H,KAAK2wI,YAAYl7I,GACxC,OAAIqjI,QAAyBA,EAAS3R,aAC/B,IACX,CAEA,mBAAM29C,CAAcn+C,GAEhB,MAAM18F,EAAOszH,IADb52B,EAAUQ,GAAWR,IACSlxG,UAAU,GAAGnK,cAAgB,iBAE3D,IAEI,MAAMowJ,QAAgBnC,GAAY0B,cAAcj7J,MAC1C+kK,EAAc,IAAIlwB,GAAS6mB,EAAS,CACtC,qDACD17J,MAEG84H,QAAiBisC,EAAYjsC,SAAS7uG,GAC5C,GAAgB,MAAZ6uG,GAAoBA,IAAa+L,GAAe,OAAO,KAE3D,MAAMmgC,EAAmB,IAAInwB,GAAS/b,EAAU,CAC5C,gDACD94H,MACGvK,QAAauvK,EAAiBvvK,KAAKw0B,GAIzC,aADoBjqB,KAAK+4H,YAAYtjI,KACvBkxH,EAAkB,KAEzBlxH,C,CAET,MAAOpF,GAEL,GAAIwpH,GAAQxpH,EAAO,aAA+B,OAAhBA,EAAMqf,MACpC,OAAO,KAIX,GAAImqG,GAAQxpH,EAAO,kBAAqB,OAAO,KAE/C,MAAMA,C,CAId,CAEA,wBAAM40K,CAAmB5vH,EAAcw4F,EAA2BnP,GAC9D,MAAMoP,EAAyB,MAAbD,EAAqBA,EAAW,EAClD,OAAiB,IAAbC,EAAyB9tI,KAAKusI,sBAAsBl3F,GAEjD,IAAIzkB,QAAQurE,MAAOprE,EAAS09G,KAC/B,IAAIjQ,EAAsB,KAE1B,MAAM9hI,EAAYy/F,UACd,IACI,MAAMqwC,QAAgBxsI,KAAKusI,sBAAsBl3F,GACjD,GAAe,MAAXm3F,GACIL,EAAcK,EAAQL,YAAc,GAAK2B,EAOzC,OANA/8G,EAAQy7G,QAEJhO,IACA9tG,aAAa8tG,GACbA,EAAQ,M,CAKtB,MAAOnuI,GACL6V,QAAQlC,IAAI,MAAO3T,E,CAEvB2P,KAAK+uI,KAAK,QAASryI,IAGR,MAAXgiI,IACAF,EAAQhuG,WAAW,KACF,MAATguG,IACJA,EAAQ,KACRx+H,KAAK4uI,IAAI,QAASlyI,GAClB+xI,EAAO10B,GAAU,UAAW,UAAW,CAAEuW,OAAQ,eAClDoO,IAGPhiI,QAAesD,KAAKstI,mBAE5B,CAEA,kBAAM43B,CAAan7B,GACf5vB,IAAO,EAAO,sBAAuB,kBAAmB,CACpDU,UAAW,gBAEnB,CAKA2kD,aAAAA,CAAc2F,GACV,MAAM3mC,EAAQxgB,GAAK+jD,GAAL/hK,MAAaiH,IAAIk+J,GAC1B3mC,IACDA,EAAMA,OAAS9tG,aAAa8tG,EAAMA,OACtCxgB,GAAK+jD,GAAL/hK,MAAasd,OAAO6nJ,GACxB,CAUA7F,WAAAA,CAAY8F,EAAmB1mC,GAAgB,IAAA2mC,EAAAC,EAC5B,MAAX5mC,IAAmBA,EAAU,GACjC,MAAMymC,GAAUpnD,GAAK+jD,GAAL9hK,MAAIqlK,EAAJrnD,GAAK8jD,GAAL9hK,MAAeslK,EAAAD,IAAAA,IAAAC,GACzBl9G,EAAOA,KACT41D,GAAK+jD,GAAL/hK,MAAasd,OAAO6nJ,GACpBC,KAGJ,GAAIplK,KAAKulK,OACLvnD,GAAK+jD,GAAL/hK,MAAa+N,IAAIo3J,EAAS,CAAE3mC,MAAO,KAAMp2E,OAAMpvD,KAAM0lI,QAClD,CACH,MAAMF,EAAQhuG,WAAW43B,EAAMs2E,GAC/B1gB,GAAK+jD,GAAL/hK,MAAa+N,IAAIo3J,EAAS,CAAE3mC,QAAOp2E,OAAMpvD,KAAMwpI,M,CAGnD,OAAO2iC,CACX,CAKAK,kBAAAA,CAAmBp9G,GACf,IAAK,MAAM+b,KAAO65C,GAAKujD,GAALvhK,MAAWk+C,SACzBkK,EAAK+b,EAAIshG,WAEjB,CAMAC,cAAAA,CAAevhG,GACX,OAAQA,EAAIp0E,MACR,IAAK,QACL,IAAK,QACL,IAAK,UACD,OAAO,IAAIgxK,GAAoB58F,EAAIp0E,MACvC,IAAK,QAAS,CACV,MAAM01K,EAAa,IAAIrG,GAAuBp/J,MAE9C,OADAylK,EAAWpG,gBAAkBr/J,KAAKq/J,gBAC3BoG,C,CAEX,IAAK,OAAQ,IAAK,YACd,OAAO,IAAIxF,GAA0BjgK,KAAMmkE,EAAIp0E,MACnD,IAAK,QACD,OAAO,IAAI4wK,GAAuB3gK,KAAMmkE,EAAI7lB,QAChD,IAAK,cACD,OAAO,IAAI8hH,GAA6BpgK,KAAMmkE,EAAI9uB,MACtD,IAAK,SACD,OAAO,IAAI6qH,GAAwBlgK,KAAMmkE,EAAI7lB,QAGrD,MAAM,IAAItuD,MAAM,sBAADiS,OAAwBkiE,EAAIp0E,MAC/C,CAWA41K,kBAAAA,CAAmBC,EAAoBC,GACnC,IAAK,MAAM1hG,KAAO65C,GAAKujD,GAALvhK,MAAWk+C,SACzB,GAAIimB,EAAIshG,aAAeG,EAAQ,CACvBzhG,EAAI2uE,SAAW3uE,EAAIshG,WAAW5yB,OAClC1uE,EAAIshG,WAAaI,EACb1hG,EAAI2uE,SAAW+yB,EAAOhyK,QACD,MAArBmqH,GAAKwjD,GAALxhK,OAA6B6lK,EAAOpG,MAAMzhD,GAAKwjD,GAALxhK,OAC9C,K,CAGZ,CA+BA,QAAM6uI,CAAGtmH,EAAsB7rB,GAC3B,MAAMynE,QAAY+0C,GAAA+oD,GAAAjiK,KAAK8lK,IAAO/tK,KAAZiI,KAAauoB,GAO/B,OANA47C,EAAI37C,UAAUlqB,KAAK,CAAE5B,WAAUqyI,MAAM,IAChC5qE,EAAI2uE,UACL3uE,EAAIshG,WAAW5xK,QACfswE,EAAI2uE,SAAU,EACW,MAArB90B,GAAKwjD,GAALxhK,OAA6BmkE,EAAIshG,WAAWhG,MAAMzhD,GAAKwjD,GAALxhK,QAEnDA,IACX,CAEA,UAAM+uI,CAAKxmH,EAAsB7rB,GAC7B,MAAMynE,QAAY+0C,GAAA+oD,GAAAjiK,KAAK8lK,IAAO/tK,KAAZiI,KAAauoB,GAO/B,OANA47C,EAAI37C,UAAUlqB,KAAK,CAAE5B,WAAUqyI,MAAM,IAChC5qE,EAAI2uE,UACL3uE,EAAIshG,WAAW5xK,QACfswE,EAAI2uE,SAAU,EACW,MAArB90B,GAAKwjD,GAALxhK,OAA6BmkE,EAAIshG,WAAWhG,MAAMzhD,GAAKwjD,GAALxhK,QAEnDA,IACX,CAEA,UAAM2yI,CAAKpqH,GAAyC,QAAAq1F,EAAAl4G,UAAAvR,OAAhBiR,EAAgB,IAAA9L,MAAAskH,EAAA,EAAAA,EAAA,KAAAzjC,EAAA,EAAAA,EAAAyjC,EAAAzjC,IAAhB/0E,EAAgB+0E,EAAA,GAAAz0E,UAAAy0E,GAChD,MAAMhW,QAAY+0C,GAAA+oD,GAAAjiK,KAAK+lK,IAAOhuK,KAAZiI,KAAauoB,EAAOnjB,GAGtC,IAAK++D,GAAgC,IAAzBA,EAAI37C,UAAUr0B,OAAgB,OAAO,EAEjD,MAAMoG,EAAQ4pE,EAAI37C,UAAUr0B,OAc5B,OAbAgwE,EAAI37C,UAAY27C,EAAI37C,UAAU81B,OAAOq0C,IAAuB,IAAtB,SAAEj2F,EAAQ,KAAEqyI,GAAMp8C,EACpD,MAAM/5D,EAAU,IAAIw2G,GAAapvI,KAAO+uI,EAAO,KAAMryI,EAAW6rB,GAChE,IACI7rB,EAAS3E,KAAKiI,QAASoF,EAAMwzB,E,CAC/B,MAAMvoC,GAAQ,CAChB,OAAQ0+I,IAGiB,IAAzB5qE,EAAI37C,UAAUr0B,SACVgwE,EAAI2uE,SAAW3uE,EAAIshG,WAAW5yB,OAClC70B,GAAKujD,GAALvhK,MAAWsd,OAAO6mD,EAAI3iE,MAGlBjH,EAAQ,CACpB,CAEA,mBAAMm6I,CAAcnsH,GAChB,GAAIA,EAAO,CACP,MAAM47C,QAAY+0C,GAAA+oD,GAAAjiK,KAAK+lK,IAAOhuK,KAAZiI,KAAauoB,GAC/B,OAAK47C,EACEA,EAAI37C,UAAUr0B,OADF,C,CAIvB,IAAI0sF,EAAQ,EACZ,IAAK,MAAM,UAAEr4D,KAAew1F,GAAKujD,GAALvhK,MAAWk+C,SACnC2iC,GAASr4D,EAAUr0B,OAEvB,OAAO0sF,CACX,CAEA,eAAMr4D,CAAUD,GACZ,GAAIA,EAAO,CACP,MAAM47C,QAAY+0C,GAAA+oD,GAAAjiK,KAAK+lK,IAAOhuK,KAAZiI,KAAauoB,GAC/B,OAAK47C,EACEA,EAAI37C,UAAU2iC,IAAIktC,IAAA,IAAC,SAAE37F,GAAU27F,EAAA,OAAK37F,IADvB,E,CAGxB,IAAIq9C,EAA0B,GAC9B,IAAK,MAAM,UAAEvxB,KAAew1F,GAAKujD,GAALvhK,MAAWk+C,SACnCnE,EAASA,EAAO93C,OAAOumB,EAAU2iC,IAAIyqD,IAAA,IAAC,SAAEl5G,GAAUk5G,EAAA,OAAKl5G,KAE3D,OAAOq9C,CACX,CAEA,SAAM60F,CAAIrmH,EAAsB7rB,GAC5B,MAAMynE,QAAY+0C,GAAA+oD,GAAAjiK,KAAK+lK,IAAOhuK,KAAZiI,KAAauoB,GAC/B,IAAK47C,EAAO,OAAOnkE,KAEnB,GAAItD,EAAU,CACV,MAAM+H,EAAQ0/D,EAAI37C,UAAU2iC,IAAI8qD,IAAA,IAAC,SAAEv5G,GAAUu5G,EAAA,OAAKv5G,IAAU4Y,QAAQ5Y,GAChE+H,GAAS,GAAK0/D,EAAI37C,UAAU2lB,OAAO1pC,EAAO,E,CAQlD,OALK/H,GAAqC,IAAzBynE,EAAI37C,UAAUr0B,SACvBgwE,EAAI2uE,SAAW3uE,EAAIshG,WAAW5yB,OAClC70B,GAAKujD,GAALvhK,MAAWsd,OAAO6mD,EAAI3iE,MAGnBxB,IACX,CAEA,wBAAM20I,CAAmBpsH,GACrB,GAAIA,EAAO,CACP,MAAM,IAAE/mB,EAAG,QAAEsxI,EAAO,WAAE2yB,SAAqBvsD,GAAA+oD,GAAAjiK,KAAK8lK,IAAO/tK,KAAZiI,KAAauoB,GACpDuqH,GAAW2yB,EAAW5yB,OAC1B70B,GAAKujD,GAALvhK,MAAWsd,OAAO9b,E,MAElB,IAAK,MAAQA,GAAK,QAAEsxI,EAAO,WAAE2yB,MAAkBznD,GAAKujD,GAALvhK,MACvC8yI,GAAW2yB,EAAW5yB,OAC1B70B,GAAKujD,GAALvhK,MAAWsd,OAAO9b,GAG1B,OAAOxB,IACX,CAGA,iBAAM2+H,CAAYp2G,EAAsB7rB,GACrC,aAAasD,KAAK6uI,GAAGtmH,EAAO7rB,EAC/B,CAGA,oBAAM4yI,CAAe/mH,EAAsB7rB,GACxC,OAAOsD,KAAK4uI,IAAIrmH,EAAO7rB,EAC1B,CASA,aAAIwkH,GACA,OAAOlD,GAAKyjD,GAALzhK,KACX,CAQAi9B,OAAAA,GAEIj9B,KAAK20I,qBAGL,IAAK,MAAMwwB,KAAWnnD,GAAK+jD,GAAL/hK,MAAajO,OAC/BiO,KAAKw/J,cAAc2F,GAGvBpnD,GAAK0jD,GAALzhK,MAAkB,EACtB,CAaA,UAAIulK,GAAoB,OAA6B,MAArBvnD,GAAKwjD,GAALxhK,KAA4B,CAC5D,UAAIulK,CAAO9F,KACDA,IAAUz/J,KAAKulK,SAEjBvlK,KAAKulK,OACLvlK,KAAK2/J,SAEL3/J,KAAKy/J,OAAM,GAEnB,CAOAA,KAAAA,CAAMC,GAGF,GAFA3hD,GAAK8jD,GAAL7hK,MAAyB,GAEA,MAArBg+G,GAAKwjD,GAALxhK,MAA2B,CAC3B,GAAIg+G,GAAKwjD,GAALxhK,SAAuB0/J,EAAmB,OAC9CvlD,IAAO,EAAO,yCAA0C,wBAAyB,CAC7EU,UAAW,S,CAInB76G,KAAKwlK,mBAAoBzyK,GAAMA,EAAE0sK,MAAMC,IACvC3hD,GAAKyjD,GAALxhK,OAAsB0/J,GAEtB,IAAK,MAAMlhC,KAASxgB,GAAK+jD,GAAL/hK,MAAak+C,SAEzBsgF,EAAMA,OAAS9tG,aAAa8tG,EAAMA,OAGtCA,EAAMxlI,KAAOwpI,KAAYhE,EAAMxlI,IAEvC,CAKA2mK,MAAAA,GACI,GAAyB,MAArB3hD,GAAKwjD,GAALxhK,MAAJ,CAEAA,KAAKwlK,mBAAoBzyK,GAAMA,EAAE4sK,UACjC5hD,GAAKyjD,GAALxhK,KAAoB,MACpB,IAAK,MAAMw+H,KAASxgB,GAAK+jD,GAAL/hK,MAAak+C,SAAU,CAEvC,IAAIwgF,EAAUF,EAAMxlI,KAChB0lI,EAAU,IAAKA,EAAU,GAG7BF,EAAMxlI,KAAOwpI,KAGbhyG,WAAWguG,EAAMp2E,KAAMs2E,E,EAE/B,EACH,eAAAykC,GAvjC2BllC,GACpB,MAAMS,EAAU1gB,GAAKyJ,GAALznH,MAAcshK,aAG9B,GAAI5iC,EAAU,EAAK,aAAa1+H,KAAKmjK,SAASllC,GAG9C,MAAMz8H,EAAMs/J,GAAO7iC,EAAIz7B,OAAQy7B,GAE/B,IAAI+nC,EAAUhoD,GAAK4jD,GAAL5hK,MAAmBiH,IAAIzF,GAarC,OAZKwkK,IACDA,EAAUhmK,KAAKmjK,SAASllC,GAExBjgB,GAAK4jD,GAAL5hK,MAAmB+N,IAAIvM,EAAKwkK,GAE5Bx1I,WAAW,KACHwtF,GAAK4jD,GAAL5hK,MAAmBiH,IAAIzF,KAASwkK,GAChChoD,GAAK4jD,GAAL5hK,MAAmBsd,OAAO9b,IAE/Bk9H,UAGMsnC,CACjB,CAAC,eAAA5B,GAmZWr3E,EAA8Bg9C,EAAkB5G,GACxDhpB,GAAQgpB,EA74BW,GA64BmB,0CAA2C,iBAAkB,CAC9F7S,OAAQ,qBACRmI,YAAa3hI,OAAOyW,OAAO,CAAC,EAAIw/E,EAAI,CAAEg9C,WAAUC,gBAAgB,MAIpE,MAAMvR,EAAwCiR,GAAY38C,GAE1D,IACI,OAAOquB,SAAcp7G,KAAKmjK,SAAS,CAAE3gE,OAAQ,OAAQi2B,cAAasR,a,CAEpE,MAAO15I,GAEL,IAAK2P,KAAKoiK,iBAAmBtoD,GAAgBzpH,IAAUA,EAAMsM,MAAQwmI,GAAW,GAAkB,WAAb4G,GAA2C,MAAlBtR,EAAYrmC,IAA8C,eAAhCmpB,GAAUlrH,EAAMsM,KAAM,EAAG,GAAqB,CAClL,MAAMA,EAAOtM,EAAMsM,KAEbspK,QAAiBptC,GAAeJ,EAAYrmC,GAAIpyF,MAGtD,IAAIkmK,EACJ,IACIA,EA4rBrB,SAA6BvpK,GACzB,MAAMo9C,EAAmB,CACrByoH,OAAQ,GAAID,KAAM,GAAKD,SAAU,GAAItrC,SAAU,GAAImU,UAAW,GAAIg7B,UAAW,IAGjFhsD,GAAOmB,GAAW3+G,IAAS,IAAQ,mCAAoC,iBAAkB,CACrF2zH,OAAQ,qCAGZ,MAAMkyC,EAASjnD,GAAU5+G,EAAM,EAAG,IAClCw9G,GAAOoB,GAAUinD,EAAQ,EAAG,MAAQjnD,GAAUxlE,GAAO,EAAG,IAAK,gCAAiC,iBAAkB,CAC5Gu6E,OAAQ,kCAEZv2E,EAAOyoH,OAASjnD,GAAUinD,EAAQ,IAGlC,IACI,MAAMD,EAAsB,GACtB6D,EAAanqD,GAAUV,GAAU5+G,EAAM,GAAI,KAC3C0pK,EAAapqD,GAAUV,GAAU5+G,EAAMypK,EAAYA,EAAa,KAChEE,EAAW/qD,GAAU5+G,EAAMypK,EAAa,IAC9C,IAAK,IAAIt3I,EAAI,EAAGA,EAAIu3I,EAAYv3I,IAAK,CACjC,MAAM5G,EAAMq+I,GAAaD,EAAc,GAAJx3I,GACnC,GAAW,MAAP5G,EAAe,MAAM,IAAIl4B,MAAM,SACnCuyK,EAAKjkK,KAAK4pB,E,CAEd6xB,EAAOwoH,KAAOA,C,CAChB,MAAOlyK,GACL8pH,IAAO,EAAO,8BAA+B,iBAAkB,CAC3DmW,OAAQ,+B,CAKhB,IACI,MAAMgyC,EAAWkE,GAAY7pK,EAAM,IACnC,GAAgB,MAAZ2lK,EAAoB,MAAM,IAAItyK,MAAM,SACxC+pD,EAAOuoH,SAAWA,C,CACpB,MAAOjyK,GACL8pH,IAAO,EAAO,kCAAmC,iBAAkB,CAC/DmW,OAAQ,mC,CAKhBnW,GAAOoB,GAAU5+G,EAAM,IAAK,OAAS4+G,GAAUxlE,GAAO,EAAG,IAAK,2CAA4C,iBAAkB,CACxHu6E,OAAQ,6CAEZv2E,EAAOi9E,SAAWzb,GAAU5+G,EAAM,GAAI,KAGtC,IACI,MAAMwuI,EAAYq7B,GAAY7pK,EAAM,KACpC,GAAiB,MAAbwuI,EAAqB,MAAM,IAAIn7I,MAAM,SACzC+pD,EAAOoxF,UAAYA,C,CACrB,MAAO96I,GACL8pH,IAAO,EAAO,mCAAoC,iBAAkB,CAChEmW,OAAQ,oC,CAMhB,OAFAv2E,EAAOosH,UAAY,0CAA0C/6J,MAAM,KAAK+/C,IAAK10D,GAAYsjD,EAAQtjD,IAE1FsjD,CACX,CA5vBgC0sH,CAAoBlrD,GAAUlrH,EAAMsM,KAAM,G,CACvD,MAAOtM,GACL8pH,IAAO,EAAO9pH,EAAMuU,QAAS,iBAAkB,CAC3C0rH,OAAQ,WAAYmI,cAAaryH,KAAM,CAAEzJ,S,CAIjDw9G,GAAO+rD,EAAS1D,OAAOl3J,gBAAkB26J,EAAS36J,cAC9C,4BAA6B,iBAAkB,CAC3CswB,OAAQ,OACRj/B,OACA2zH,OAAQ,iBACRmI,YAAkBA,EAClBC,WAAY,KACZ7yC,OAAQ,CACJn1B,UAAW,sDACXj7D,KAAM,iBACN2P,KAAM8gK,EAASC,aAI3B,MAAMO,QAAmB1mK,KAAKqiK,cAAc5pC,EAAaytC,EAAS5D,SAAU4D,EAAS3D,MACrFpoD,GAAqB,MAAdusD,EAAoB,iCAAkC,iBAAkB,CAC3Ep2C,OAAQ,eAAgBmI,cAAaryH,KAAM,CAAEzJ,KAAMtM,EAAMsM,KAAMwpK,UAAWD,EAASC,aAEvF,MAAMp5E,EAAK,CACPqF,GAAI6zE,EACJtpK,KAAMsF,GAAO,CAAEikK,EAASlvC,SAAU2vC,GAAY,CAAED,EAAYR,EAAS/6B,eAGzEnrI,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,mBAAoB68F,YAAa1rC,IAC9D,IACI,MAAMhzC,QAAem/D,GAAA+oD,GAAAjiK,KAAKokK,IAAKrsK,KAAViI,KAAW+sF,EAAIg9C,EAAU5G,EAAU,GAExD,OADAnjI,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,4BAA6B68F,YAAa3hI,OAAOyW,OAAO,CAAC,EAAIw/E,GAAKhzC,WACxFA,C,CACT,MAAO1pD,GAEL,MADA2P,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,2BAA4B68F,YAAa3hI,OAAOyW,OAAO,CAAC,EAAIw/E,GAAK18F,UACxFA,C,EAId,MAAMA,C,CAEf,CAAC,eAAA8zK,GAEsBlwD,GACnB,MAAM,MAAEvkG,SAAgB6pG,GAAkB,CACtC2hD,QAASl7J,KAAKm7J,aACdzrJ,MAAOukG,IAEX,OAAOvkG,CACX,CAAC,eAAA40J,GAYsBlkC,EAAiCmjC,EAAuBqD,GAC3E,IAAIjgD,EAAoC3mH,KAAKojK,YAAYG,GACrDx5B,EAAqC/pI,KAAKqjK,aAAauD,GAM3D,MAJwB,kBAAbjgD,GAA8C,kBAAdojB,KACrCpjB,EAASojB,SAAmBn5G,QAAQ+2E,IAAI,CAAEgf,EAASojB,WAG5C7wB,GAAA+oD,GAAAjiK,KAAKmkK,IAAapsK,KAAlBiI,KAAmBk5G,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAclJ,OAAOyW,OAAO6yH,EAAS,CAAEzZ,UAASojB,cACpF,CAAC,eAAAi6B,GAsCehuK,EAA0B6wK,GAGtC,GAAI5rD,GAAYjlH,EAAO,IACnB,aAAakjH,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CACvBwiG,OAAQ,WAAY0pC,UAAWl2I,EAAO6wK,wBAI9C,IAAI98B,EAAW/pI,KAAKqjK,aAAartK,GAGjC,MAFyB,kBAAd+zI,IAA0BA,QAAiBA,SAEzC7wB,GAAA+oD,GAAAjiK,KAAKmjK,IAAQprK,KAAbiI,KAAc,CACvBwiG,OAAQ,WAAYunC,WAAU88B,uBAEtC,CAAC,eAAAd,GA0Qax9I,EAAsBu+I,GAChC,IAAI3iG,QAAY88F,GAAgB14I,EAAOvoB,MAMvC,MAHiB,UAAbmkE,EAAIp0E,MAAoB+2K,GAAYA,EAAS3yK,OAAS,IAA6B,IAAxB2yK,EAAS,GAAG16B,UACvEjoE,QAAY88F,GAAgB,CAAEl1B,OAAQ,WAAY/nI,IAAK8iK,EAAS,IAAM9mK,OAEnEg+G,GAAKujD,GAALvhK,MAAWiH,IAAIk9D,EAAI3iE,MAAQ,IACtC,CAAC,eAAAskK,GAEav9I,GACV,MAAMw+I,QAAqB9F,GAAgB14I,EAAOvoB,MAG5CwB,EAAMulK,EAAavlK,IAEzB,IAAI2iE,EAAM65C,GAAKujD,GAALvhK,MAAWiH,IAAIzF,GACzB,IAAK2iE,EAAK,CAKNA,EAAM,CAAEshG,WAJWzlK,KAAK0lK,eAAeqB,GAInBvlK,MAAKwlK,eAFF,IAAI5lI,QAEc6lI,QADzB,IAAIhqJ,IAC8B61H,SAAS,EAAOtqH,UAAW,IAC7Ew1F,GAAKujD,GAALvhK,MAAW+N,IAAIvM,EAAK2iE,E,CAGxB,OAAOA,CACX,CAwNJ,SAASoiG,GAAaxsH,EAAgBlmD,GAClC,IACI,MAAM+H,EAAQ4qK,GAAYzsH,EAAQlmD,GAClC,GAAI+H,EAAS,OAAOo1H,GAAap1H,E,CACnC,MAAMvL,GAAQ,CAChB,OAAO,IACX,CAEA,SAASm2K,GAAYzsH,EAAgBlmD,GACjC,GAAe,OAAXkmD,EAAmB,OAAO,KAC9B,IACI,MAAM7vB,EAAS+xF,GAAUV,GAAUxhE,EAAQlmD,EAAOA,EAAQ,KACpDM,EAAS8nH,GAAUV,GAAUxhE,EAAQ7vB,EAAQA,EAAS,KAE5D,OAAOqxF,GAAUxhE,EAAQ7vB,EAAS,GAAIA,EAAS,GAAK/1B,E,CACtD,MAAO9D,GAAQ,CACjB,OAAO,IACX,CAEA,SAAS62K,GAAOx3J,GACZ,MAAMqqC,EAAS2iE,GAAUhtG,GACzB,GAAIqqC,EAAO5lD,OAAS,GAAM,MAAM,IAAInE,MAAM,+BAE1C,MAAMsmK,EAAS,IAAItzG,WAAW,IAE9B,OADAszG,EAAOvoJ,IAAIgsC,EAAQ,GAAKA,EAAO5lD,QACxBmiK,CACX,CAEA,SAAS6Q,GAASz3J,GACd,GAAKA,EAAMvb,OAAS,KAAQ,EAAK,OAAOub,EAExC,MAAMqqC,EAAS,IAAIiJ,WAA0C,GAA/BxoD,KAAKkD,KAAKgS,EAAMvb,OAAS,KAEvD,OADA4lD,EAAOhsC,IAAI2B,GACJqqC,CACX,CAEA,MAAMiO,GAAoB,IAAIhF,WAAW,IAGzC,SAAS2jH,GAAYtrD,GACjB,MAAMthE,EAA4B,GAElC,IAAIkoB,EAAY,EAGhB,IAAK,IAAIptE,EAAI,EAAGA,EAAIwmH,EAAMlnH,OAAQU,IAC9BklD,EAAOz7C,KAAK0pD,IACZia,GAAa,GAGjB,IAAK,IAAIptE,EAAI,EAAGA,EAAIwmH,EAAMlnH,OAAQU,IAAK,CACnC,MAAM8H,EAAO5L,GAASsqH,EAAMxmH,IAG5BklD,EAAOllD,GAAKqyK,GAAOjlG,GAGnBloB,EAAOz7C,KAAK4oK,GAAOvqK,EAAKxI,SACxB4lD,EAAOz7C,KAAK6oK,GAASxqK,IACrBslE,GAAa,GAAmC,GAA9BznE,KAAKkD,KAAKf,EAAKxI,OAAS,G,CAG9C,OAAO8N,GAAO83C,EAClB,CAEA,MAAMhE,GAAQ,qECroDd,SAASqxH,GAAcvpG,EAAwBg9C,GAC3C,GAAIh9C,EAAO0sE,SAAY,OAAO1sE,EAAO0sE,SACrCpwB,IAAO,EAAO,mBAAoB,wBAAyB,CAAEU,aACjE,CAEA1e,eAAekrE,GAASxpG,EAAwBkvB,GAC5C,IAAI5X,EAAWu0D,GAAY38C,GAI3B,GAFc,MAAV5X,EAAIid,KAAcjd,EAAIid,GAAKymC,GAAe1jD,EAAIid,GAAIv0B,IAEtC,MAAZsX,EAAIL,KAAc,CAClB,MAAMA,EAAOK,EAAIL,KACjBK,EAAIL,KAAOlkD,QAAQ+2E,IAAI,CACnB9pC,EAAOspD,aACP0R,GAAe/jD,EAAMjX,KACtB7sC,KAAK2hE,IAAsB,IAAnBg0B,EAAS7xC,GAAM6d,EAGtB,OAFA0nB,GAAesM,EAAQr7G,gBAAkBwpE,EAAKxpE,cAC1C,4BAA6B,UAAWwpE,GACrC6xC,G,MAGXxxC,EAAIL,KAAOjX,EAAOspD,aAGtB,aAAa5N,GAAkBpkC,EACnC,CASM,MAAgBmyF,GASlBr4J,WAAAA,CAAYs7H,GARZj5C,EAAA,wBASIK,GAAiC3xF,KAAM,CAAEuqI,SAAWA,GAAY,MACpE,CAeA,cAAMg9B,CAASx9B,GACX,OAAOq9B,GAAcpnK,KAAM,uBAAuBmuI,0BAA0BnuI,KAAKmnH,aAAc4iB,EACnG,CAEA,kBAAMy9B,CAAaz6E,GAEf,aADkBs6E,GAASrnK,KAAM+sF,EAErC,CAEA,yBAAMykD,CAAoBzkD,GACtB,MAAMw9C,EAAW68B,GAAcpnK,KAAM,uBAE/Bm1E,QAAYkyF,GAASrnK,KAAM+sF,GAEhB,MAAb5X,EAAIszB,QACJtzB,EAAIszB,YAAczoG,KAAKunK,SAAS,YAGhB,MAAhBpyF,EAAI01D,WACJ11D,EAAI01D,eAAiB7qI,KAAKuwI,YAAYp7D,IAI1C,MAAM+lF,QAA4Bl7J,KAAKuqI,SAAW4wB,aAClD,GAAmB,MAAfhmF,EAAIikD,QAAiB,CAErB/e,GADgB2B,GAAU7mC,EAAIikD,WACH8hC,EAAQ9hC,QAAS,+BAAgC,aAAcrsC,EAAGqsC,Q,MAE7FjkD,EAAIikD,QAAU8hC,EAAQ9hC,QAI1B,MAAMquC,EAAkC,MAApBtyF,EAAIq0D,cAAoD,MAA5Br0D,EAAIs0D,qBAOpD,GANoB,MAAhBt0D,EAAIo0D,UAAkC,IAAbp0D,EAAIplF,OAAc03K,EAEtB,IAAbtyF,EAAIplF,MAA2B,IAAbolF,EAAIplF,OAAe03K,GAC7CptD,IAAe,EAAO,4EAA6E,KAAMttB,GAFzGstB,IAAe,EAAO,+CAAgD,KAAMttB,GAK9D,IAAb5X,EAAIplF,MAA0B,MAAZolF,EAAIplF,MAAsC,MAApBolF,EAAIq0D,cAAoD,MAA5Br0D,EAAIs0D,qBAItE,GAAiB,IAAbt0D,EAAIplF,MAA2B,IAAbolF,EAAIplF,KAAY,CAIzC,MAAMk0K,QAAgB15B,EAASq5B,aAE/BzpD,GAA2B,MAApB8pD,EAAQ16B,SAAkB,oCAAqC,wBAAyB,CAC3F1uB,UAAW,gBAGK,MAAhB1lC,EAAIo0D,WAAoBp0D,EAAIo0D,SAAW06B,EAAQ16B,S,KAEhD,CAGH,MAAM06B,QAAgB15B,EAASq5B,aAE/B,GAAgB,MAAZzuF,EAAIplF,KAGJ,GAA4B,MAAxBk0K,EAAQz6B,cAAwD,MAAhCy6B,EAAQx6B,qBAUxC,GANIt0D,EAAI20D,mBAAqB30D,EAAI20D,kBAAkB31I,OAC/CghF,EAAIplF,KAAO,EAEXolF,EAAIplF,KAAO,EAGK,MAAhBolF,EAAIo0D,SAAkB,CAGtB,MAAMA,EAAWp0D,EAAIo0D,gBACdp0D,EAAIo0D,SACXp0D,EAAIq0D,aAAeD,EACnBp0D,EAAIs0D,qBAAuBF,C,MAKH,MAApBp0D,EAAIq0D,eACJr0D,EAAIq0D,aAAey6B,EAAQz6B,cAGC,MAA5Br0D,EAAIs0D,uBACJt0D,EAAIs0D,qBAAuBw6B,EAAQx6B,2BAIhB,MAApBw6B,EAAQ16B,UAIfpvB,IAAQstD,EAAY,oCAAqC,wBAAyB,CAC1E5sD,UAAW,wBAGC,MAAhB1lC,EAAIo0D,WACJp0D,EAAIo0D,SAAW06B,EAAQ16B,UAK3Bp0D,EAAIplF,KAAO,GAIXoqH,IAAO,EAAO,oCAAqC,wBAAyB,CACxEU,UAAW,2BAGC,IAAb1lC,EAAIplF,MAA2B,IAAbolF,EAAIplF,MAA2B,IAAbolF,EAAIplF,OAIvB,MAApBolF,EAAIq0D,eACJr0D,EAAIq0D,aAAey6B,EAAQz6B,cAGC,MAA5Br0D,EAAIs0D,uBACJt0D,EAAIs0D,qBAAuBw6B,EAAQx6B,sB,MAnF3Ct0D,EAAIplF,KAAO,EA0Ff,aAAawpH,GAAkBpkC,EACnC,CAEA,2BAAMuyF,CAAsBC,GACxB,MAAM5pC,EAAOjnI,OAAOyW,OAAO,CAAC,EAAIo6J,GAWhC,OARoB,MAAhB5pC,EAAK3E,UACL2E,EAAK3E,eAAiBguC,GAAcpnK,KAAM,cAAcm7J,cAAc/hC,SAKxD,MAAd2E,EAAKt1B,QAAiBs1B,EAAKt1B,YAAczoG,KAAKunK,YAE3CxpC,CACX,CAEA,iBAAMwS,CAAYxjD,GACd,OAAOq6E,GAAcpnK,KAAM,eAAeuwI,kBAAkBvwI,KAAKwnK,aAAaz6E,GAClF,CAEA,UAAMh1F,CAAKg1F,GACP,OAAOq6E,GAAcpnK,KAAM,QAAQjI,WAAWiI,KAAKwnK,aAAaz6E,GACpE,CAEA,iBAAMgsC,CAAYtjI,GACd,MAAM80I,EAAW68B,GAAcpnK,KAAM,eACrC,aAAauqI,EAASxR,YAAYtjI,EACtC,CAEA,qBAAMi7I,CAAgB3jD,GAClB,MAAMw9C,EAAW68B,GAAcpnK,KAAM,mBAE/Bm1E,QAAYn1E,KAAKwxI,oBAAoBzkD,UACpC5X,EAAIL,KACX,MAAM8yF,EAAQ5R,GAAYlhF,KAAKK,GAC/B,aAAao1D,EAASk6B,2BAA2BzkK,KAAK6nK,gBAAgBD,GAC1E,CAGAE,SAAAA,CAAUC,GACN5tD,IAAO,EAAO,gDACZ,wBAAyB,CAAEU,UAAW,aAC5C,ECxPJ,IAAAkkD,GAAA,IAAA39H,QAAA4mI,GAAA,IAAA5mI,QAAA49H,GAAA,IAAA59H,QAAA0+H,GAAA,IAAA1+H,QAAA+gI,GAAA,IAAA/gI,QAAA6mI,GAAA,IAAA7mI,QAAA8mI,GAAA,IAAA3hI,QAUM,MAAO4hI,GAiBTl5J,WAAAA,CAAYs7H,GAA4BzvB,GAAA,KAAAotD,IAhBxCjvD,GAAA,KAAA8lD,QAAS,GAET9lD,GAAA,KAAA+uD,QAAgB,GAChB/uD,GAAA,KAAA+lD,QAAO,GAEP/lD,GAAA,KAAA6mD,QAAQ,GAER7mD,GAAA,KAAAkpD,QAAQ,GAERlpD,GAAA,KAAAgvD,QAAM,GAQFlqD,GAAKghD,GAAL/+J,KAAiBuqI,GAEjBxsB,GAAKiqD,GAALhoK,KAAwB,MACxB+9G,GAAKihD,GAALh/J,KAAek5G,GAAAgvD,GAAAloK,KAAKu/J,IAAM7wI,KAAK1uB,OAE/B+9G,GAAK+hD,GAAL9/J,MAAgB,GAEhB+9G,GAAKokD,GAALniK,KAAgB,MAEhB+9G,GAAKkqD,GAALjoK,MAAc,EAClB,CAKAooK,UAAAA,CAAW79B,GACP,MAAM,IAAIv6I,MAAM,gCACpB,CAKAq4K,YAAAA,CAAa99B,EAA4BxwF,GACrC,MAAM,IAAI/pD,MAAM,gCACpB,CAKAs4K,QAAAA,CAAS/9B,GACL,MAAM,IAAIv6I,MAAM,gCACpB,CAsDA6D,KAAAA,GACQmqH,GAAK8hD,GAAL9/J,QACJ+9G,GAAK+hD,GAAL9/J,MAAgB,GAEhBk5G,GAAAgvD,GAAAloK,KAAKu/J,IAAKxnK,KAAViI,MAAY,GAChB,CAEA6yI,IAAAA,GACS70B,GAAK8hD,GAAL9/J,QACL+9G,GAAK+hD,GAAL9/J,MAAgB,GAEhB+9G,GAAKkqD,GAALjoK,MAAc,GACdk5G,GAAAgvD,GAAAloK,KAAKuoK,IAASxwK,KAAdiI,MACAg+G,GAAK+gD,GAAL/+J,MAAe4uI,IAAI,QAAS5wB,GAAKghD,GAALh/J,OAChC,CAEAy/J,KAAAA,CAAMC,GACEA,GAAkBxmD,GAAAgvD,GAAAloK,KAAKuoK,IAASxwK,KAAdiI,MACtBg+G,GAAK+gD,GAAL/+J,MAAe4uI,IAAI,QAAS5wB,GAAKghD,GAALh/J,MAChC,CAEA2/J,MAAAA,GAAiB3/J,KAAKnM,OAAS,EAGnC,eAAA0rK,GA5EgBpzB,GACR,IAEiC,MAAzBnuB,GAAKgqD,GAALhoK,OACA+9G,GAAKiqD,GAALhoK,KAAwBA,KAAKooK,WAAWpqD,GAAK+gD,GAAL/+J,QAI5C,IAAIwoK,EAA0B,KAC9B,IACIA,QAAiBxqD,GAAKgqD,GAALhoK,K,CACnB,MAAO3P,GACL,IAAKwpH,GAAQxpH,EAAO,0BAAgD,kBAApBA,EAAMwqH,UAClD,MAAMxqH,C,CAMd,GAAgB,MAAZm4K,EAGA,OAFAzqD,GAAKiqD,GAALhoK,KAAwB,WACxBg+G,GAAK+gD,GAAL/+J,MAAe2lK,mBAAmB3lK,KAAMA,KAAKsoK,SAAStqD,GAAK+gD,GAAL/+J,QAI1D,MAAMk7J,QAAgBl9C,GAAK+gD,GAAL/+J,MAAem7J,aAGrC,GAFKn9C,GAAKmkD,GAALniK,OAAiB+9G,GAAKokD,GAALniK,KAAgBk7J,GAEjCl9C,GAAKmkD,GAALniK,MAA0Bo5H,UAAY8hC,EAAQ9hC,QAC/C,MAAM,IAAIppI,MAAM,iBAGpB,GAAIguH,GAAKiqD,GAALjoK,MAAe,OAEnB,MAAM+5C,QAAeikE,GAAK+gD,GAAL/+J,MAAe4oE,KAAK,uBAAwB,CAAE4/F,UAC7DxoK,KAAKqoK,aAAarqD,GAAK+gD,GAAL/+J,MAAgB+5C,E,CAC1C,MAAO1pD,GAAS6V,QAAQlC,IAAI,QAAS3T,E,CAEvC2tH,GAAK+gD,GAAL/+J,MAAe+uI,KAAK,QAAS/wB,GAAKghD,GAALh/J,MACjC,CAAC,SAAAuoK,KAGG,MAAME,EAAkBzqD,GAAKgqD,GAALhoK,MACpByoK,IACA1qD,GAAKiqD,GAALhoK,KAAwB,MACxByoK,EAAgBz3I,KAAMw3I,IACdxqD,GAAK+gD,GAAL/+J,MAAekhH,WACnBlD,GAAK+gD,GAAL/+J,MAAe4oE,KAAK,sBAAuB,CAAE4/F,MAGzD,CAAC,IAAAtH,GAAA,IAAA9/H,QA+BC,MAAOsnI,WAAgCP,GAOzCl5J,WAAAA,CAAYs7H,EAA8BjsF,GAzJ9C,IAAc/tD,EA0JNguG,MAAMgsC,GAPVtxB,GAAA,KAAAioD,QAAM,GAQFnjD,GAAKmjD,GAALlhK,MA3JMzP,EA2Ja+tD,EA1JhBjQ,KAAKuZ,MAAMvZ,KAAKC,UAAU/9C,KA2JjC,CAEA+3K,QAAAA,CAAS/9B,GACL,OAAO,IAAIo2B,GAAuBp2B,EAAUvsB,GAAKkjD,GAALlhK,MAChD,CAEA,gBAAMooK,CAAW79B,GAEb,aADuBA,EAAS3hE,KAAK,gBAAiB,CAAEo1C,GAAKkjD,GAALlhK,OAE5D,CAEA,kBAAMqoK,CAAa99B,EAA8Bt/E,GAC7C,IAAK,MAAMlR,KAAUkR,EACjBs/E,EAASoI,KAAK30B,GAAKkjD,GAALlhK,MAAauqI,EAASs4B,SAAS9oH,EAAQwwF,EAAS43B,UAEtE,EAQE,MAAOwG,WAAkCR,GAC3C,gBAAMC,CAAW79B,GACb,aAAaA,EAAS3hE,KAAK,kCAAmC,GAClE,CAEA,kBAAMy/F,CAAa99B,EAA8Bt/E,GAC7C,IAAK,MAAMlR,KAAUkR,EACjBs/E,EAASoI,KAAK,UAAW54F,EAEjC,EC1JJ,MAAM6uH,GAAY,+CAA+Cx9J,MAAM,MAEvE,SAASy9J,GAAkBn5J,GACvB,GAAa,MAATA,GAAiBk5J,GAAUtzJ,eAAe5F,IAAW,EACrD,OAAOA,EAIX,GAAwC,oBAAvBA,EAAOy3G,WACpB,OAAOz3G,EAGX,GAAIpW,MAAMiG,QAAQmQ,GAAU,OAAaA,EAAMy7C,IAAI09G,IAEnD,GAAsB,kBAAXn5J,EACP,OAAO5Y,OAAO/E,KAAK2d,GAAOo7C,OAAO,CAAC0uD,EAAO7oH,KACrC6oH,EAAM7oH,GAAa+e,EAAO/e,GACnB6oH,GACH,CAAC,GAGb,MAAM,IAAIxpH,MAAM,sBAADiS,OAAwByN,EAAM,MAAAzN,cAAayN,EAAO,KACrE,CAEA,SAASi0H,GAAMxvB,GACX,OAAO,IAAIvjF,QAASG,IAAcP,WAAWO,EAASojF,IAC1D,CAEA,SAAS20D,GAAap5J,GAClB,OAAIA,EAAgBA,EAAMpE,cACnBoE,CACX,CAMA,SAASq5J,GAAWr5J,GAChB,OAAQA,GAA2C,kBAA3BA,EAAM2vJ,eAClC,CAsHA,MAAMgC,GAAiB,CACnB2H,SAAS,EACTC,cAAe,KAEfC,eAAgB,GAChBC,aAAe,GAAK,GACpBC,cAAe,IAEf9H,aAAc,IACdjC,gBAAiB,KAkFf,MAAOgK,WAAsB/B,GAG/Br4J,WAAAA,CAAYs7H,EAA8B5jB,GACtCpoB,MAAMgsC,GAAUj5C,EAAA,uBAEhBK,GAAgC3xF,KAAM,CAAE2mH,QADxCA,EAAUQ,GAAWR,IAEzB,CAEA8sB,OAAAA,CAAQlJ,GACJpwB,IAAO,EAAO,iCAAkC,wBAAyB,CACrEU,UAAW,kBAEnB,CAEA,gBAAMsM,GACF,OAAOnnH,KAAK2mH,OAChB,CAGA,yBAAM6qB,CAAoBzkD,GACtB,aAAa/sF,KAAKwnK,aAAaz6E,EACnC,CAIA,8BAAMu8E,CAAyBpF,GAC3B,MAAMn3E,EAAK87E,GAAS3E,GAEdxuC,EAAiC,GAGvC,GAAI3oC,EAAGjY,KAAM,CACT,MAAMy0F,EAAQx8E,EAAGjY,KACjB4gD,EAASp3H,KAAK,WACV,MAAMw2E,QAAa+jD,GAAe0wC,EAAOvpK,KAAKuqI,UAC9ClwB,GAAuB,MAARvlC,GAAgBA,EAAKxpE,gBAAkBtL,KAAK2mH,QAAQr7G,cAC/D,wBAAyB,cAAe44J,GAC5Cn3E,EAAGjY,KAAOA,CACb,EALa,G,MAOdiY,EAAGjY,KAAO90E,KAAK2mH,QAanB,GAPmB,MAAf55B,EAAG89C,UACHnV,EAASp3H,KAAK,WACVyuF,EAAG89C,eAAiB7qI,KAAKuqI,SAASgG,YAAW99C,EAAAA,EAAC,CAAC,EAAI1F,GAAE,IAAEjY,KAAM90E,KAAK2mH,UACrE,EAFa,IAML,MAAT55B,EAAGqF,GAAY,CACf,MAAM6iE,EAAMloE,EAAGqF,GACfsjC,EAASp3H,KAAK,WACVyuF,EAAGqF,SAAWymC,GAAeo8B,EAAKj1J,KAAKuqI,SAC1C,EAFa,G,CAMd7U,EAASvhI,cAAgBy8B,QAAQ+2E,IAAI+tB,GAEzC,MAAM8zC,EAAQxpK,KAAKuqI,SAASk/B,kBAAkB18E,GAE9C,OAAO/sF,KAAKuqI,SAAS3hE,KAAK,sBAAuB,CAAE4gG,GACvD,CAEA,qBAAM94B,CAAgB3jD,GAElB,MAAMo/C,QAAoBnsI,KAAKuqI,SAAS+C,iBAGlCj4F,QAAar1C,KAAKspK,yBAAyBv8E,GAKjD,aAAc,IAAIn8D,QAAQ,CAACG,EAAS09G,KAChC,MAAMi7B,EAAW,CAAE,IAAM,KACzB,IAAIC,EAAW,EAEf,MAAMC,EAAUztE,UAEZ,IAEI,MAAMpP,QAAW/sF,KAAKuqI,SAASkB,eAAep2F,GAE9C,GAAU,MAAN03C,EAEA,YADAh8D,EAAQg8D,EAAGuhD,uBAAuBnC,G,CAIxC,MAAO97I,GAML,GAAIwpH,GAAQxpH,EAAO,cAAgBwpH,GAAQxpH,EAAO,aAC9CwpH,GAAQxpH,EAAO,kBAAoBwpH,GAAQxpH,EAAO,yBAMlD,OAJkB,MAAdA,EAAM+V,OAAgB/V,EAAM+V,KAAO,CAAC,GACxC/V,EAAM+V,KAAKyjK,oBAAsBx0H,OAEjCo5F,EAAOp+I,GAKX,GAAIwpH,GAAQxpH,EAAO,sBACfs5K,IACkB,MAAdt5K,EAAM+V,OAAgB/V,EAAM+V,KAAO,CAAC,GACxC/V,EAAM+V,KAAKyjK,oBAAsBx0H,EAC7Bs0H,EAAW,IAEX,YADAl7B,EAAOp+I,GAOf2P,KAAKuqI,SAASoI,KAAK,QAAS54B,GAAU,4DAA6D,gBAAiB,CAAE1pH,U,CAI1H2P,KAAKuqI,SAAS+0B,YAAY,KAAQsK,KAAcF,EAASv0F,OAAS,MAEtEy0F,KAER,CAEA,qBAAM/B,CAAgB3D,GAClB,MAAMn3E,EAAK87E,GAAS3E,GAGpB,GAAIn3E,EAAGjY,KAAM,CACT,MAAMA,QAAa+jD,GAAe9rC,EAAGjY,KAAM90E,KAAKuqI,UAChDlwB,GAAuB,MAARvlC,GAAgBA,EAAKxpE,gBAAkBtL,KAAK2mH,QAAQr7G,cAC/D,wBAAyB,cAAe44J,GAC5Cn3E,EAAGjY,KAAOA,C,MAEViY,EAAGjY,KAAO90E,KAAK2mH,QAGnB,MAAM6iD,EAAQxpK,KAAKuqI,SAASk/B,kBAAkB18E,GAC9C,aAAa/sF,KAAKuqI,SAAS3hE,KAAK,sBAAuB,CAAE4gG,GAC7D,CAGA,iBAAMM,CAAYC,GACd,MAAMnlK,EAAiC,kBAAdmlK,EAA0Bj5C,GAAYi5C,GAAWA,EAC1E,aAAa/pK,KAAKuqI,SAAS3hE,KAAK,gBAAiB,CAC7CwyC,GAAQx2G,GAAU5E,KAAK2mH,QAAQr7G,eACvC,CAEA,mBAAM0+J,CAAc3uC,EAAyBhiB,EAA8CyC,GACvF,MAAMpsG,EAAQm5J,GAAS/sD,GAGjBmuD,QAAkB5vC,GAAiBmB,aAAaH,EAAQhiB,EAAO3pG,EAAOysF,UACxE,MAAMwqB,QAAgBkS,GAAenpH,GAErC,OADA2qG,GAA0B,MAAXsM,EAAiB,0CAA2C,QAASj3G,GAC7Ei3G,IAGX,aAAa3mH,KAAKuqI,SAAS3hE,KAAK,uBAAwB,CACpD5oE,KAAK2mH,QAAQr7G,cACb+iC,KAAKC,UAAU+rF,GAAiBqB,WAAWuuC,EAAU5uC,OAAQhiB,EAAO4wD,EAAUv6J,SAEtF,CAEA,YAAMw6J,CAAOriJ,GACT,OAAO7nB,KAAKuqI,SAAS3hE,KAAK,yBAA0B,CAChD5oE,KAAK2mH,QAAQr7G,cAAeuc,EAAU,MAC9C,CAGA,wBAAMsiJ,CAAmBJ,GACrB,MAAMnlK,EAAiC,kBAAdmlK,EAA0Bj5C,GAAYi5C,GAAWA,EAC1E,aAAa/pK,KAAKuqI,SAAS3hE,KAAK,WAAY,CACxC5oE,KAAK2mH,QAAQr7G,cAAe8vG,GAAQx2G,IAC5C,EAQJ,IAAA6iH,GAAA,IAAArmF,QAAAgpI,GAAA,IAAAhpI,QAAAipI,GAAA,IAAAjpI,QAAAkpI,GAAA,IAAAlpI,QAAAmpI,GAAA,IAAAnpI,QAAA+gI,GAAA,IAAA/gI,QAAAopI,GAAA,IAAAppI,QAAAqpI,GAAA,IAAAlkI,QAUM,MAAgBmkI,WAA2BxI,GAmG7CjzJ,WAAAA,CAAYisJ,EAAsB9rK,GAC9BmvG,MAAM28D,EAAS9rK,GAAS0rH,GAAA,KAAA2vD,IAlG5BxxD,GAAA,KAAAwO,QAAQ,GAGRxO,GAAA,KAAAmxD,QAAO,GAGPnxD,GAAA,KAAAoxD,QAAS,GACTpxD,GAAA,KAAAqxD,QAAW,GAEXrxD,GAAA,KAAAsxD,QAAS,GAKTtxD,GAAA,KAAAkpD,QAAQ,GACRlpD,GAAA,KAAAuxD,QAAqB,GAqFjBzsD,GAAKqsD,GAALpqK,KAAe,GACf+9G,GAAK0J,GAALznH,KAAgBlJ,OAAOyW,OAAO,CAAC,EAAI8zJ,GAAgBjyK,GAAW,CAAC,IAE/D2uH,GAAKssD,GAALrqK,KAAiB,IACjB+9G,GAAKusD,GAALtqK,KAAmB,MAEnB+9G,GAAKokD,GAALniK,KAAgB,MAChB+9G,GAAKysD,GAALxqK,KAA6B,MAE7B,CACI,IAAI+wB,EAA0C,KAC9C,MAAMkjF,EAAU,IAAIrjF,QAAS+5I,IACzB55I,EAAU45I,IAEd5sD,GAAKwsD,GAALvqK,KAAiB,CAAEi0G,UAASljF,W,CAGhC,MAAMk4I,EAAgBjpK,KAAK4qK,WAAW,iBACR,mBAAnB3B,GACP5uD,IAAgB4uD,GAA6B,QAAZ/N,EAAmB,wDAAyD,UAAW9rK,GACpH65K,GAA4B,MAAX/N,GACjBn9C,GAAKokD,GAALniK,KAAgBs9J,GAAQxoF,KAAKomF,KAG1B+N,IAEP5uD,GAA0B,MAAX6gD,GAAmB+N,EAAc3zE,QAAQ4lE,GACpD,0CAA2C,UAAW9rK,GAC1D2uH,GAAKokD,GAALniK,KAAgBipK,GAExB,CAOA2B,UAAAA,CAAsDj6K,GAClD,OAAOqtH,GAAKyJ,GAALznH,MAAcrP,EACzB,CAMA,YAAIwxK,GAEA,OADAhoD,GAAQ6D,GAAKmkD,GAALniK,MAAe,+BAAgC,iBAChDg+G,GAAKmkD,GAALniK,KACX,CAgBA,cAAMmjK,CAASllC,GAIX,GAAmB,SAAfA,EAAIz7B,QAAoC,gBAAfy7B,EAAIz7B,OAA0B,CACvD,IAAIzV,EAAKkxC,EAAIxF,YACb,GAAI1rC,GAAiB,MAAXA,EAAGh9F,MAAgBisH,GAAUjvB,EAAGh9F,OAEf,MAAnBg9F,EAAGy8C,cAAmD,MAA3Bz8C,EAAG08C,qBAA8B,CAC5D,MAAMw6B,QAAgBjkK,KAAK4jK,aACC,MAAxBK,EAAQz6B,cAAwD,MAAhCy6B,EAAQx6B,uBAExCxL,EAAMnnI,OAAOyW,OAAO,CAAC,EAAI0wH,EAAK,CAC1BxF,YAAa3hI,OAAOyW,OAAO,CAAC,EAAIw/E,EAAI,CAAEh9F,UAAMkqD,M,EAOhE,MAAMmmF,EAAUpgI,KAAK6qK,cAAc5sC,GAEnC,OAAe,MAAXmC,QACapgI,KAAK4oE,KAAKw3D,EAAQ59B,OAAQ49B,EAAQh7H,MAG5Cm5F,MAAM4kE,SAASllC,EAC1B,CASA,oBAAMilC,GACF,MAAMhI,EAAUl7J,KAAK4qK,WAAW,iBAChC,GAAI1P,EAAS,CACT,IAAgB,IAAZA,EAGA,OAAOA,EAFP,GAAIl9C,GAAKmkD,GAALniK,MAAiB,OAAOg+G,GAAKmkD,GAALniK,K,CAMpC,OAAIg+G,GAAKwsD,GAALxqK,YACag+G,GAAKwsD,GAALxqK,MAIbA,KAAK8yE,OACLirC,GAAKysD,GAALxqK,KAA6B,WACzB,IACI,MAAM+5C,EAASujH,GAAQxoF,KAAKknC,SAAgBh8G,KAAK4oE,KAAK,cAAe,MAErE,OADAm1C,GAAKysD,GAALxqK,KAA6B,MACtB+5C,C,CACT,MAAO1pD,GAEL,MADA0tH,GAAKysD,GAALxqK,KAA6B,MACvB3P,C,CAEb,EAT4B,UAUhB2tH,GAAKwsD,GAALxqK,QAIjB+9G,GAAKysD,GAALxqK,KAA6B,OAAC8qK,EAAAC,KAC1B,MAAMnyI,EAA0B,CAC5BpjC,IAAIuoH,GAAKqsD,GAALpqK,MAAI8qK,EAAJ9sD,GAAKosD,GAALpqK,MAAY+qK,EAAAD,IAAAA,IAAAC,GAAIvoE,OAAQ,cAAehqD,OAAQ,GAAKwyH,QAAS,OAKrE,IAAIjxH,EAFJ/5C,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,iBAAkBhD,YAG/C,IACImhB,SAAgB/5C,KAAKuiI,MAAM3pG,IAAU,GACrCmlF,GAAKysD,GAALxqK,KAA6B,K,CAC/B,MAAO3P,GAGL,MAFA0tH,GAAKysD,GAALxqK,KAA6B,MAC7BA,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,kBAAmBvrC,UAC1CA,C,CAKV,GAFA2P,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,mBAAoBme,WAE7C,WAAYA,EACZ,OAAOujH,GAAQxoF,KAAKknC,GAAUjiE,EAAOA,SAGzC,MAAM/5C,KAAKirK,YAAYryI,EAASmhB,EACnC,EAxB4B,UA0BhBikE,GAAKwsD,GAALxqK,MACjB,CASAkrK,MAAAA,GAC0B,MAAlBltD,GAAKusD,GAALvqK,OAAoD,MAA1Bg+G,GAAKusD,GAALvqK,MAAe+wB,UAE7CitF,GAAKusD,GAALvqK,MAAe+wB,UACfgtF,GAAKwsD,GAALvqK,KAAiB,MAEjB,WAGI,KAAwB,MAAjBg+G,GAAKmkD,GAALniK,QAA0BA,KAAKkhH,WAClC,IACInD,GAAKokD,GAALniK,WAAsBA,KAAKkjK,iB,CAC7B,MAAO7yK,GACL,GAAI2P,KAAKkhH,UAAa,MACtBh7G,QAAQlC,IAAI,mIACZhE,KAAK2yI,KAAK,QAAS54B,GAAU,wCAAyC,gBAAiB,CAAExxF,MAAO,4BAA6BniB,KAAM,CAAE/V,kBAC/HszI,GAAM,I,CAKpBzqB,GAAAuxD,GAAAzqK,KAAKmrK,IAAcpzK,KAAnBiI,KACH,EAhBD,GAiBJ,CAOA,qBAAMorK,GACF,GAAsB,MAAlBptD,GAAKusD,GAALvqK,MACJ,aAAag+G,GAAKusD,GAALvqK,MAAei0G,OAChC,CASAyxD,cAAAA,CAAevhG,GAGX,MAAiB,YAAbA,EAAIp0E,KAA6B,IAAI44K,GAA0B3oK,MAElD,UAAbmkE,EAAIp0E,KACAiQ,KAAK4qK,WAAW,WACT,IAAIjK,GAAuB3gK,KAAMmkE,EAAI7lB,QAEzC,IAAIoqH,GAAwB1oK,KAAMmkE,EAAI7lB,QAKhC,WAAb6lB,EAAIp0E,MAA2C,aAAtBo0E,EAAI7lB,OAAOytF,OAC7B,IAAIg1B,GAAoB,UAG5BxiE,MAAMmnE,eAAevhG,EAChC,CAKA,SAAI2O,GAAmB,OAAyB,MAAlBkrC,GAAKusD,GAALvqK,KAAwB,CAOtDypK,iBAAAA,CAAkB18E,GACd,MAAMhzC,EAAoC,CAAC,EA6C3C,MA1CA,CAAC,UAAW,WAAY,WAAY,OAAQ,eAAgB,uBAAwB,QAAS,SAAS1uC,QAAS1a,IAC3G,GAAsB,MAAZo8F,EAAIp8F,GAAgB,OAC9B,IAAI06K,EAAS16K,EACD,aAARA,IAAsB06K,EAAS,OAC7BtxH,EAAQsxH,GAAU1uD,GAAWX,GAAgBjvB,EAAIp8F,GAAM,MAAFsR,OAAStR,OAIxE,CAAC,OAAQ,KAAM,QAAQ0a,QAAS1a,IACN,MAAZo8F,EAAIp8F,KACRopD,EAAQppD,GAAOyqH,GAAcruB,EAAIp8F,OAIvCo8F,EAAG88C,aACH9vF,EAAmB,WAAIqiF,GAAcrvC,EAAG88C,aAGxC98C,EAAGm9C,sBAEGnwF,EAA6B,oBAAIgzC,EAAGm9C,oBAAoB/+E,IAAIrzD,GAAKA,EAAEwT,gBAGzEyhF,EAAG+8C,oBACH/vF,EAA0B,kBAAIgzC,EAAG+8C,kBAAkB3+E,IAAKmgH,IACpD,MAAM7zK,EAAIqmI,GAAiBwtC,GAC3B,MAAO,CACH3kD,QAASlvH,EAAEkvH,QACXle,MAAOkU,GAAWllH,EAAEgxG,OACpB2wB,QAASzc,GAAWllH,EAAE2hI,SACtBgE,QAASzgB,GAAWllH,EAAEi5D,UAAU0sE,SAChC9mG,EAAGqmF,GAAWllH,EAAEi5D,UAAUp6B,GAC1BvjC,EAAG4pH,GAAWllH,EAAEi5D,UAAU39D,OAU/BgnD,CACX,CAMA8wH,aAAAA,CAAc5sC,GACV,OAAQA,EAAIz7B,QACR,IAAK,UACD,MAAO,CAAEA,OAAQ,cAAep9F,KAAM,IAE1C,IAAK,iBACD,MAAO,CAAEo9F,OAAQ,kBAAmBp9F,KAAM,IAE9C,IAAK,cACD,MAAO,CAAEo9F,OAAQ,eAAgBp9F,KAAM,IAE3C,IAAK,iBACD,MAAO,CAAEo9F,OAAQ,2BAA4Bp9F,KAAM,IAEvD,IAAK,aACD,MAAO,CACHo9F,OAAQ,iBACRp9F,KAAM,CAAE0jK,GAAa7qC,EAAItX,SAAUsX,EAAI8L,WAG/C,IAAK,sBACD,MAAO,CACHvnC,OAAQ,0BACRp9F,KAAM,CAAE0jK,GAAa7qC,EAAItX,SAAUsX,EAAI8L,WAG/C,IAAK,UACD,MAAO,CACHvnC,OAAQ,cACRp9F,KAAM,CAAE0jK,GAAa7qC,EAAItX,SAAUsX,EAAI8L,WAG/C,IAAK,aACD,MAAO,CACHvnC,OAAQ,mBACRp9F,KAAM,CACF0jK,GAAa7qC,EAAItX,SAChB,KAAOsX,EAAI1pB,SAASv4G,SAAS,IAC9BiiI,EAAI8L,WAIhB,IAAK,uBACD,MAAO,CACHvnC,OAAQ,yBACRp9F,KAAM,CAAE64H,EAAI0mC,oBAGpB,IAAK,WACD,GAAI,aAAc1mC,EACd,MAAO,CACHz7B,OAAQ,uBACRp9F,KAAM,CAAE64H,EAAI8L,WAAY9L,EAAI4oC,sBAE7B,GAAI,cAAe5oC,EACtB,MAAO,CACHz7B,OAAQ,qBACRp9F,KAAM,CAAE64H,EAAIiO,YAAajO,EAAI4oC,sBAGrC,MAEJ,IAAK,iBACD,MAAO,CACHrkE,OAAQ,2BACRp9F,KAAM,CAAE64H,EAAI5oF,OAGpB,IAAK,wBACD,MAAO,CACHmtD,OAAQ,4BACRp9F,KAAM,CAAE64H,EAAI5oF,OAGpB,IAAK,OACD,MAAO,CACHmtD,OAAQ,WACRp9F,KAAM,CAAEpF,KAAKypK,kBAAkBxrC,EAAIxF,aAAcwF,EAAI8L,WAG7D,IAAK,cACD,MAAO,CACHvnC,OAAQ,kBACRp9F,KAAM,CAAEpF,KAAKypK,kBAAkBxrC,EAAIxF,eAI3C,IAAK,UAQD,OAPIwF,EAAI3/E,QAAgC,MAAtB2/E,EAAI3/E,OAAOqoE,UACrBrtH,MAAMiG,QAAQ0+H,EAAI3/E,OAAOqoE,SACzBsX,EAAI3/E,OAAOqoE,QAAUsX,EAAI3/E,OAAOqoE,QAAQx7D,IAAI29G,IAE5C7qC,EAAI3/E,OAAOqoE,QAAUmiD,GAAa7qC,EAAI3/E,OAAOqoE,UAG9C,CAAEnkB,OAAQ,cAAep9F,KAAM,CAAE64H,EAAI3/E,SAGpD,OAAO,IACX,CAQA2sH,WAAAA,CAAYryI,EAAyBmmG,GACjC,MAAM,OAAEv8B,GAAW5pE,GACb,MAAEvoC,GAAU0uI,EAElB,GAAe,oBAAXv8B,GAAgCnyG,EAAMuU,QAAS,CAC/C,MAAMhV,EAAMS,EAAMuU,QAClB,IAAKhV,EAAI8Z,MAAM,YAAc9Z,EAAI8Z,MAAM,uBACnC,OAAOqwG,GAAU,qBAAsB,qBAAsB,CACzD0e,YAAoB7/F,EAAS4f,OAAO,GACpCpyC,KAAM,CAAEwyB,UAASvoC,WAElB,GAAIT,EAAI8Z,MAAM,WAAa9Z,EAAI8Z,MAAM,YACxC,OAAOqwG,GAAU,8BAA+B,gBAAiB,CAC7D0e,YAAoB7/F,EAAS4f,OAAO,GACpCpyC,KAAM,CAAEwyB,UAASvoC,U,CAK7B,GAAe,aAAXmyG,GAAoC,oBAAXA,EAA8B,CACvD,MAAMzoD,EAASwxH,GAAYl7K,GAErBwH,EAAIqgI,GAASK,wBACH,aAAX/1B,EAAyB,OAAQ,cAC3B5pE,EAAS4f,OAAO,GACtBuB,EAASA,EAAOp9C,KAAM,MAG3B,OADA9E,EAAEuO,KAAO,CAAE/V,QAAOuoC,WACX/gC,C,CAMX,MAAM+M,EAAUypC,KAAKC,UA+S7B,SAAwB5+B,GACpB,MAAMqqC,EAAwB,GAE9B,OADAyxH,GAAgB97J,EAAOqqC,GAChBA,CACX,CAnTuC0xH,CAAep7K,IAE9C,GAA8B,kBAAnBA,EAAMuU,SAAyBvU,EAAMuU,QAAQ8E,MAAM,mCAAoC,CAW9F,OAAOqwG,GAAU,uBAAwB,kBAAmB,CACxDn+E,OAXyH,CACzH8vI,SAAU,cACVC,cAAe,cACfC,qBAAsB,gBACtBC,oBAAqB,kBACrBC,oBAAqB,kBACrBC,oBAAqB,gBACrBC,uBAAwB,iBAILxpE,IAAW,UAC9B8tB,OAAQ,WACRlqH,KAAM,CAAEwyB,UAASvoC,U,CAIzB,GAAe,2BAAXmyG,GAAkD,wBAAXA,EAAkC,CACzE,MAAMi2B,EAA8C7/F,EAAS4f,OAAO,GAEpE,GAAI5zC,EAAQ8E,MAAM,kDACd,OAAOqwG,GAAU,oDAAqD,qBAAsB,CACxF0e,cAAaryH,KAAM,CAAE/V,WAI7B,GAAIuU,EAAQ8E,MAAM,WAAa9E,EAAQ8E,MAAM,YACzC,OAAOqwG,GAAU,8BAA+B,gBAAiB,CAAE0e,cAAaryH,KAAM,CAAE/V,WAI5F,GAAIuU,EAAQ8E,MAAM,6BAA+B9E,EAAQ8E,MAAM,gBAC3D,OAAOqwG,GAAU,0BAA2B,0BAA2B,CAAE0e,cAAaryH,KAAM,CAAE/V,WAGlG,GAAIuU,EAAQ8E,MAAM,0BACd,OAAOqwG,GAAU,gDAAiD,wBAAyB,CACvFc,UAAWrY,EAAQp8F,KAAM,CAAEqyH,cAAaryH,KAAM,CAAE/V,W,CAK5D,IAAI47K,IAAgBrnK,EAAQ8E,MAAM,iCAOlC,OANKuiK,GACG57K,GAAeA,EAAO4pH,SAAiB5pH,EAAO4pH,QAAQ7lB,WAAW,0BACjE63E,GAAc,GAIlBA,EACOlyD,GAAU,wBAAyB,wBAAyB,CAC/Dc,UAAWjiF,EAAQ4pE,OAAQp8F,KAAM,CAAE/V,QAAOuoC,aAI3CmhF,GAAU,2BAA4B,gBAAiB,CAAE1pH,QAAOuoC,WAC3E,CAgBAgwC,IAAAA,CAAK45B,EAAgBhqD,GAAwC,IAAA0zH,EAAAC,EAIzD,GAAInsK,KAAKkhH,UACL,OAAOtwF,QAAQ69G,OAAO10B,GAAU,wCAAyC,wBAAyB,CAAEc,UAAWrY,KAGnH,MAAMhtG,GAAKuoH,GAAKqsD,GAALpqK,MAAIksK,EAAJluD,GAAKosD,GAALpqK,MAAYmsK,EAAAD,IAAAA,IAAAC,GACjBl4D,EAAU,IAAIrjF,QAAQ,CAACG,EAAS09G,KAClCzwB,GAAKqsD,GAALrqK,MAAe1B,KAAK,CAChByyB,UAAS09G,SACT71G,QAAS,CAAE4pE,SAAQhqD,SAAQhjD,KAAIw1K,QAAS,WAOhD,OAFA9xD,GAAAuxD,GAAAzqK,KAAKmrK,IAAcpzK,KAAnBiI,MAE+Bi0G,CACnC,CAcA,eAAMm4D,CAAUzlD,GACG,MAAXA,IAAmBA,EAAU,GAEjC,MAAM0lD,EAAkBrsK,KAAK4oE,KAAK,eAAgB,IAGlD,GAAwB,kBAAb+9C,EAAuB,CAC9B,MAAM2lD,QAAiCD,EACvC,GAAI1lD,GAAW2lD,EAASn4K,OAAU,MAAM,IAAInE,MAAM,mBAClD,OAAO,IAAIq5K,GAAcrpK,KAAMssK,EAAS3lD,G,CAG5C,MAAM,SAAE2lD,SAAmB/yD,GAAkB,CACzC2hD,QAASl7J,KAAKm7J,aACdmR,SAAUD,IAId1lD,EAAUQ,GAAWR,GACrB,IAAK,MAAM4lD,KAAWD,EAClB,GAAInlD,GAAWolD,KAAa5lD,EACxB,OAAO,IAAI0iD,GAAcrpK,KAAM2mH,GAIvC,MAAM,IAAI32H,MAAM,kBACpB,CAEA,kBAAMw8K,GAEF,aADsCxsK,KAAK4oE,KAAK,eAAgB,KAChDzd,IAAK1zD,GAAM,IAAI4xK,GAAcrpK,KAAMvI,GACvD,CAEAwlC,OAAAA,GAGQ+gF,GAAKssD,GAALtqK,QACA0wB,aAAastF,GAAKssD,GAALtqK,OACb+9G,GAAKusD,GAALtqK,KAAmB,OAIvB,IAAK,MAAM,QAAE44B,EAAO,OAAE61G,KAAYzwB,GAAKqsD,GAALrqK,MAC9ByuI,EAAO10B,GAAU,wCAAyC,wBAAyB,CAAEc,UAAWjiF,EAAQ4pE,UAG5Gub,GAAKssD,GAALrqK,KAAiB,IAGjBu+F,MAAMthE,SAEV,EAMJ,SAAAkuI,KAzqBQ,GAAIntD,GAAKssD,GAALtqK,MAAoB,OAGxB,MAAMysK,EAAkD,IAArCzsK,KAAK4qK,WAAW,iBAA0B,EAAG5qK,KAAK4qK,WAAW,kBAEhF7sD,GAAKusD,GAALtqK,KAAmBwwB,WAAW,KAC1ButF,GAAKusD,GAALtqK,KAAmB,MAEnB,MAAM0sK,EAAW1uD,GAAKqsD,GAALrqK,MAGjB,IAFA+9G,GAAKssD,GAALrqK,KAAiB,IAEV0sK,EAASv4K,QAAQ,CAGpB,MAAMw4K,EAAQ,CAAYD,EAASpuJ,SACnC,KAAOouJ,EAASv4K,QACRw4K,EAAMx4K,SAAW6pH,GAAKyJ,GAALznH,MAAcopK,eADf,CAEpBuD,EAAMruK,KAAeouK,EAASpuJ,SAC9B,MAAM1iB,EAAQyyC,KAAKC,UAAUq+H,EAAMxhH,IAAK/zD,GAAMA,EAAEwhC,UAChD,GAAIh9B,EAAMzH,OAAS6pH,GAAKyJ,GAALznH,MAAcmpK,aAAc,CAC3CuD,EAAS78I,QAAkB88I,EAAMx3F,OACjC,K,EAKR,WACI,MAAMv8C,EAA6B,IAAjB+zI,EAAMx4K,OAAgBw4K,EAAM,GAAG/zI,QAAS+zI,EAAMxhH,IAAK/zD,GAAMA,EAAEwhC,SAE7E54B,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,iBAAkBhD,YAE/C,IACI,MAAMmhB,QAAe/5C,KAAKuiI,MAAM3pG,GAChC54B,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,mBAAoBme,WAGjD,IAAK,MAAM,QAAEhpB,EAAO,OAAE09G,EAAM,QAAE71G,KAAa+zI,EAAO,CAE9C,GAAI3sK,KAAKkhH,UAAW,CAChButB,EAAO10B,GAAU,wCAAyC,wBAAyB,CAAEc,UAAWjiF,EAAQ4pE,UACxG,Q,CAIJ,MAAMs8B,EAAO/kF,EAAOuE,OAAQhoB,GAAOA,EAAE9gC,KAAOojC,EAAQpjC,IAAK,GAGzD,GAAY,MAARspI,EAAc,CACd,MAAMzuI,EAAQ0pH,GAAU,+BAAgC,WAAY,CAChErqG,MAAOqqC,EAAQ3zC,KAAM,CAAEwyB,aAE3B54B,KAAK2yI,KAAK,QAAStiJ,GACnBo+I,EAAOp+I,GACP,Q,CAIA,UAAWyuI,EACX2P,EAAOzuI,KAAKirK,YAAYryI,EAASkmG,IAKrC/tG,EAAQ+tG,EAAK/kF,O,EAGnB,MAAO1pD,GACL2P,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,kBAAmBvrC,UAEhD,IAAK,MAAM,OAAEo+I,KAAYk+B,EAErBl+B,EAAOp+I,E,CAGlB,EAhDD,E,GAkDLo8K,GACP,CAAC,IAAAG,GAAA,IAAAxrI,QA+lBC,MAAgByrI,WAAkCnC,GAEpDz7J,WAAAA,CAAYisJ,EAAsB9rK,GAC9BmvG,MAAM28D,EAAS9rK,GAFnB6pH,GAAA,KAAA2zD,QAAgB,GAIZ,IAAIvN,EAAkBr/J,KAAK4qK,WAAW,mBACf,MAAnBvL,IAA2BA,EAAkBgC,GAAehC,iBAEhEthD,GAAK6uD,GAAL5sK,KAAwBq/J,EAC5B,CAEAqG,cAAAA,CAAevhG,GACX,MAAMshG,EAAalnE,MAAMmnE,eAAevhG,GAIxC,OAHI4kG,GAAWtD,KACXA,EAAWpG,gBAAkBrhD,GAAK4uD,GAAL5sK,OAE1BylK,CACX,CAKA,mBAAIpG,GAA4B,OAAOrhD,GAAK4uD,GAAL5sK,KAAuB,CAC9D,mBAAIq/J,CAAgB3vJ,GAChB,IAAK2hF,OAAOirB,UAAU5sG,IAAUA,EAAQ,EAAK,MAAM,IAAI1f,MAAM,oBAC7D+tH,GAAK6uD,GAAL5sK,KAAwB0P,GACxB1P,KAAKwlK,mBAAoBrhG,IACjB4kG,GAAW5kG,KACXA,EAAIk7F,gBAAkBrhD,GAAK4uD,GAAL5sK,QAGlC,EAqDJ,SAASurK,GAAY77J,GACjB,GAAa,MAATA,EAAiB,OAAO,KAG5B,GAA8B,kBAAnBA,EAAM9K,SAAyB8K,EAAM9K,QAAQ8E,MAAM,YAAcuxG,GAAYvrG,EAAM/S,MAC1F,MAAO,CAAEiI,QAAS8K,EAAM9K,QAASjI,KAAM+S,EAAM/S,MAIjD,GAAsB,kBAAX+S,EAAqB,CAC5B,IAAK,MAAM/e,KAAO+e,EAAO,CACrB,MAAMqqC,EAASwxH,GAAY77J,EAAM/e,IACjC,GAAIopD,EAAU,OAAOA,C,CAEzB,OAAO,I,CAIX,GAAsB,kBAAXrqC,EACP,IACI,OAAO67J,GAAYl9H,KAAKuZ,MAAMl4C,G,CAChC,MAAOrf,GAAQ,CAGrB,OAAO,IACX,CAEA,SAASm7K,GAAgB97J,EAAYqqC,GACjC,GAAa,MAATrqC,EAAJ,CAQA,GAL8B,kBAAnBA,EAAM9K,SACbm1C,EAAOz7C,KAAKoR,EAAM9K,SAIA,kBAAX8K,EACP,IAAK,MAAM/e,KAAO+e,EACd87J,GAAgB97J,EAAM/e,GAAMopD,GAKpC,GAAsB,kBAAXrqC,EACP,IACI,OAAO87J,GAAgBn9H,KAAKuZ,MAAMl4C,GAAQqqC,E,CAC5C,MAAO1pD,GAAQ,C,CAEzB,CCvsCA,IAAAgzI,GAAA,IAAAjiG,QAAA0rI,GAAA,IAAA1rI,QAKM,MAAO2rI,WAAwBF,GASjC59J,WAAAA,CAAY+9J,EAA2B9R,EAAsBzzC,GAGzD,MAAMr4H,EAAqC0H,OAAOyW,OAAO,CAAC,EAC1C,MAAZk6G,EAAoBA,EAAU,CAAC,EACjC,CAAE2hD,cAAe,IAEnB/uD,GAAe2yD,GAAYA,EAAS5sC,QAAS,4BAA6B,WAAY4sC,GAEtFzuE,MAAM28D,EAAS9rK,GAjBnB6pH,GAAA,KAAAoqB,QAAQ,GAERpqB,GAAA,KAAA6zD,QAAa,GAiBT/uD,GAAK+uD,GAAL9sK,KAAqB,MACjBynH,GAAYA,EAASwlD,cACrBlvD,GAAK+uD,GAAL9sK,KAAqBynH,EAASwlD,cAGlClvD,GAAKslB,GAALrjI,KAAgBm8F,MAAOqG,EAAgBhqD,KACnC,MAAM5f,EAAU,CAAE4pE,SAAQhqD,UAC1Bx4C,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,qBAAsBhD,YACnD,IACI,MAAMmhB,QAAeizH,EAAS5sC,QAAQxnG,GAEtC,OADA54B,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,uBAAwBme,WAC9CA,C,CACT,MAAOliD,IACL,MAAMxH,EAAQ,IAAIL,MAAM6H,GAAE+M,SAK1B,MAJMvU,EAAOy0B,KAAOjtB,GAAEitB,KAChBz0B,EAAOsM,KAAO9E,GAAE8E,KAChBtM,EAAOuoC,QAAUA,EACvB54B,KAAK2yI,KAAK,QAAS,CAAE/2G,OAAQ,sBAAuBvrC,UAC9CA,C,GAGlB,CAEA,gBAAI48K,GACA,OAAOjvD,GAAK8uD,GAAL9sK,KACX,CAEA,UAAM4oE,CAAK45B,EAAgBhqD,GAGvB,aAFMx4C,KAAKkrK,eAEE3sE,MAAM31B,KAAK45B,EAAQhqD,EACpC,CAEA,WAAM+pF,CAAM3pG,GACRyhF,IAAgB/gH,MAAMiG,QAAQq5B,GAAU,0CAA2C,UAAWA,GAE9F,IACI,MAAMmhB,QAAeikE,GAAKqlB,GAALrjI,MAAajI,KAAbiI,KAAc44B,EAAQ4pE,OAAQ5pE,EAAQ4f,QAAU,IACrE,MAAO,CAAE,CAAEhjD,GAAIojC,EAAQpjC,GAAIukD,U,CAC7B,MAAOliD,IACL,MAAO,CAAE,CACLrC,GAAIojC,EAAQpjC,GACZnF,MAAO,CAAEy0B,KAAMjtB,GAAEitB,KAAMnoB,KAAM9E,GAAE8E,KAAMiI,QAAS/M,GAAE+M,U,CAG5D,CAEAqmK,WAAAA,CAAYryI,EAAyBvoC,GAMjC,QAJAA,EAAQg+C,KAAKuZ,MAAMvZ,KAAKC,UAAUj+C,KAIpBA,MAAMy0B,OAAS,GACzB,KAAK,KACDz0B,EAAMA,MAAMuU,QAAU,uBAAH3C,OAA2B5R,EAAMA,MAAMuU,SAC1D,MACJ,KAAK,KACDvU,EAAMA,MAAMuU,QAAU,uBAAH3C,OAA2B5R,EAAMA,MAAMuU,SAIlE,OAAO25F,MAAM0sE,YAAYryI,EAASvoC,EACtC,CAKA,eAAM68K,CAAUvmD,GACG,MAAXA,IAAmBA,EAAU,GAEjC,MAAM2lD,QAAiBtsK,KAAK4oE,KAAK,eAAgB,IACjD,MAAwB,kBAAb+9C,EACC2lD,EAASn4K,OAASwyH,GAG9BA,EAAUA,EAAQr7G,cAC8D,IAAzEghK,EAAShuH,OAAQ7mD,GAAeA,EAAE6T,gBAAkBq7G,GAAUxyH,OACzE,CAEA,eAAMi4K,CAAUzlD,GAGZ,GAFe,MAAXA,IAAmBA,EAAU,UAErB3mH,KAAKktK,UAAUvmD,GACvB,UACU3I,GAAKqlB,GAALrjI,MAAajI,KAAbiI,KAAc,sBAAuB,G,CAE7C,MAAO3P,GACL,MAAMuoC,EAAUvoC,EAAMuoC,QACtB,MAAM54B,KAAKirK,YAAYryI,EAAS,CAAEpjC,GAAIojC,EAAQpjC,GAAInF,S,CAI1D,aAAakuG,MAAM6tE,UAAUzlD,EACjC,CAOA,qBAAa7Z,CAAS19G,GAGlB,GAFe,MAAXA,IAAmBA,EAAU,CAAC,GAE9BA,EAAQm7I,SACR,OAAO,IAAIwiC,GAAgB39K,EAAQm7I,UAGvC,MAAM/yG,EAAUpoC,EAAQsX,OAAStX,EAAQsX,OACjB,qBAAZA,OAA2BA,OAAQ,KAE/C,GAAe,MAAX8wB,EAAmB,OAAO,KAE9B,MAAM21I,EAAc/9K,EAAQ+9K,YAC5B,GAAIA,GAAe31I,EAAQw1I,SACvB,OAAO,IAAID,GAAgBv1I,EAAQw1I,UAGvC,KAAM,qBAAsBx1I,GAAW,kBAAmBA,GACrD,wBAAyBA,GAC1B,OAAO,KAGX,MAAMknG,EAAUtvI,EAAQsvI,QAAUtvI,EAAQsvI,QAAS,IACnD,OAAgB,IAAZA,EAAwB,WAEd,IAAI9tG,QAAQ,CAACG,EAAS09G,KAChC,IAAIpzD,EAAsC,GAE1C,MAAM+xF,EAAe7kJ,IACjB8yD,EAAM/8E,KAAKiqB,EAAMhH,QACb4rJ,GAAeE,KAGjBA,EAAWA,KAGb,GAFA38I,aAAa8tG,GAETnjD,EAAMlnF,OAGN,GAAI/E,GAAWA,EAAQkvD,OAAQ,CAG3B,MAAMgvH,EAAWl+K,EAAQkvD,OAAO+8B,EAAMlwB,IAAIt2D,GACxCiC,OAAOyW,OAAO,CAAC,EAAK1Y,EAAEuR,QAExB,GAAgB,MAAZknK,EAEAv8I,EAAQ,WAEL,GAAIu8I,aAAoBP,GAE3Bh8I,EAAQu8I,OAEL,CAEH,IAAI5jK,EAAsC,KAC1C,GAAI4jK,EAASC,KAAM,CACf,MAAMj4E,EAAUja,EAAM/8B,OAAO9nD,GAC1B82K,EAASC,OAAS/2K,EAAE4P,KAAKmnK,MAG5B7jK,EAAQ4rF,EAAQ,E,CAGpB,GAAI5rF,EAAO,CACP,MAAM,SAAE6gI,EAAQ,KAAEnkI,GAASsD,EAC3BqnB,EAAQ,IAAIg8I,GAAgBxiC,OAAUtwF,EAAW,CAC7CgzH,aAAc7mK,I,MAGlBqoI,EAAO10B,GAAU,+BAAgC,wBAAyB,CACtErqG,MAAO49J,I,MAKhB,CAGH,MAAM,SAAE/iC,EAAQ,KAAEnkI,GAASi1E,EAAM,GACjCtqD,EAAQ,IAAIg8I,GAAgBxiC,OAAUtwF,EAAW,CAC7CgzH,aAAc7mK,I,MAMtB2qB,EAAQ,MAGZyG,EAAQ56B,oBAAyB,2BAC/BwwK,IAGA5uC,EAAQhuG,WAAW,KAAQ68I,KAAe3uC,GAEhDlnG,EAAQ/6B,iBAAsB,2BAC5B2wK,GAEF51I,EAAQnZ,cAAc,IAAImvJ,MAAM,6BAExC,E,cCxTJ,MAAMC,IAAcjgH,EAAAA,EAAAA,oBAA2CvT,GAElDyzH,GAAUA,KACrB,MAAMl2I,GAAUgH,EAAAA,EAAAA,YAAWivI,IAC3B,QAAgBxzH,IAAZziB,EACF,MAAM,IAAIxnC,MAAM,+CAElB,OAAOwnC,GAOIm2I,GAA4Ch7E,IAAmB,IAAlB,SAAE1hF,GAAU0hF,EACpE,MAAOi7E,EAAMC,IAAW7uI,EAAAA,EAAAA,UAAsB,OACvCu0E,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChC3uC,EAAO09K,IAAY/uI,EAAAA,EAAAA,UAAwB,MAE5CgvC,IAAoB,OAAJ4/F,QAAI,IAAJA,IAAAA,EAAMjnD,SACtBqnD,IAAyB,OAAJJ,QAAI,IAAJA,IAAAA,EAAMjnD,SAAe,OAAJinD,QAAI,IAAJA,IAAAA,EAAMK,MAGlDxvI,EAAAA,EAAAA,WAAU,KACR,MAAMyvI,EAAY3lH,aAAaZ,QAAQ,mBACvC,GAAIumH,EACF,IACE,MAAMC,EAAa9/H,KAAKuZ,MAAMsmH,GAC9BL,EAAQM,GAGJA,EAAWF,KACbG,EAAcD,EAAWF,IAE7B,CAAE,MAAO59K,GACP6V,QAAQ7V,MAAM,8BAA+BA,GAC7Ck4D,aAAaf,WAAW,kBAC1B,GAED,IAGH,MAAM4mH,EAAgBjyE,UACpB,WACyB4V,MAAM,GAAD9vG,OAAIosK,KAAY,kBAAkB,CAC5DxuG,QAAS,CACP,cAAgB,UAAD59D,OAAYkxH,OAIjBnqF,KAEZ9iC,QAAQlC,IAAI,+CACZ6pK,EAAQ,MACRtlH,aAAaf,WAAW,mBACxBsrD,GAAMziH,MAAM,wCAEhB,CAAE,MAAOA,GACP6V,QAAQ7V,MAAM,0BAA2BA,GACzCw9K,EAAQ,MACRtlH,aAAaf,WAAW,kBAC1B,GA2GI93C,EAAyB,CAC7Bk+J,OACAr6D,UACAljH,QACAi+K,cA5GoBnyE,UACpB,IAIE,GAHA2xE,GAAW,GACXC,EAAS,OAEJrnK,OAAOsmK,SACV,MAAM,IAAIh9K,MAAM,6BAGlB,MAAMu6I,EAAW,IAAIgkC,GAAuB7nK,OAAOsmK,UAC7CV,QAAiB/hC,EAAS3hE,KAAK,sBAAuB,IAE5D,GAAwB,IAApB0jG,EAASn4K,OACX,MAAM,IAAInE,MAAM,qBAGlB,MAAM22H,EAAU2lD,EAAS,GACzBuB,EAAQ,CAAElnD,YAGVp+D,aAAad,QAAQ,kBAAmBpZ,KAAKC,UAAU,CAAEq4E,aAEzD7T,GAAMQ,QAAQ,gCAChB,CAAE,MAAO73G,GACP,MAAMinK,EAAejnK,EAAImJ,SAAW,2BACpCmpK,EAASrL,GACT5vD,GAAMziH,MAAMqyK,EACd,CAAC,QACCoL,GAAW,EACb,GAgFAU,MA7EYryE,UACZ,GAAS,OAAJyxE,QAAI,IAAJA,GAAAA,EAAMjnD,QAKX,IACEmnD,GAAW,GACXC,EAAS,MAGT,MAAMU,QAAsB18D,MAAM,GAAD9vG,OAAIosK,KAAY,mBAAmB,CAClE7rE,OAAQ,OACR3iC,QAAS,CACP,eAAgB,oBAElB1vE,KAAMk+C,KAAKC,UAAU,CAAEq4E,QAASinD,EAAKjnD,YAGvC,IAAK8nD,EAAczlI,GACjB,MAAM,IAAIh5C,MAAM,uBAGlB,MAAM,MAAEy4G,SAAgBgmE,EAAcC,OAGhCnkC,EAAW,IAAIgkC,GAAuB7nK,OAAOsmK,UAC7CnvG,QAAe0sE,EAAS6hC,YACxBxnK,EAAO,2BAAA3C,OAA8BwmG,GACrC/3C,QAAkBmN,EAAOisG,YAAYllK,GAGrC+pK,QAAsB58D,MAAM,GAAD9vG,OAAIosK,KAAY,eAAe,CAC9D7rE,OAAQ,OACR3iC,QAAS,CACP,eAAgB,oBAElB1vE,KAAMk+C,KAAKC,UAAU,CACnBq4E,QAASinD,EAAKjnD,QACdj2D,gBAIJ,IAAKi+G,EAAc3lI,GACjB,MAAM,IAAIh5C,MAAM,gBAGlB,MAAM,MAAEmjI,SAAgBw7C,EAAcD,OAGhCE,EAAWn8E,EAAAA,EAAA,GAAQm7E,GAAI,IAAEK,IAAK96C,IACpC06C,EAAQe,GAGRrmH,aAAad,QAAQ,kBAAmBpZ,KAAKC,UAAUsgI,IAEvD97D,GAAMQ,QAAQ,mBAChB,CAAE,MAAO73G,GACP,MAAMinK,EAAejnK,EAAImJ,SAAW,eACpCmpK,EAASrL,GACT5vD,GAAMziH,MAAMqyK,EACd,CAAC,QACCoL,GAAW,EACb,MA7DEh7D,GAAMziH,MAAM,qCA4Edw+K,OAZaA,KACbhB,EAAQ,MACRtlH,aAAaf,WAAW,mBACxBsrD,GAAMQ,QAAQ,4BAUdtlC,cACAggG,mBAGF,OACEc,EAAAA,GAAAA,KAACrB,GAAY9/G,SAAQ,CAACj+C,MAAOA,EAAMuB,SAChCA,KAMP,SAASo9J,KAIP,MAAO,EACT,C,eCvMM,MAAAU,GAAcl3D,GAAiB,cAAe,CAClD,CAAC,OAAQ,CAAEjgH,EAAG,qCAAsCjH,IAAK,WACzD,CAAC,WAAY,CAAE8nH,OAAQ,wBAAyB9nH,IAAK,aCFjDq+K,GAAWn3D,GAAiB,WAAY,CAC5C,CAAC,OAAQ,CAAEjgH,EAAG,4CAA6CjH,IAAK,WAChE,CAAC,WAAY,CAAE8nH,OAAQ,mBAAoB9nH,IAAK,WAChD,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,IAAKloH,IAAK,aCHnDs+K,GAASp3D,GAAiB,SAAU,CACxC,CAAC,OAAQ,CAAEjgH,EAAG,UAAWjH,IAAK,WAC9B,CAAC,OAAQ,CAAEiH,EAAG,wCAAyCjH,IAAK,WAC5D,CAAC,OAAQ,CAAEiH,EAAG,qCAAsCjH,IAAK,WACzD,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,WACxD,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,Y,eClB1D,SAAS2lC,GAAEz+B,GAAG,IAAIgM,EAAErN,EAAES,EAAE,GAAG,GAAG,iBAAiBY,GAAG,iBAAiBA,EAAEZ,GAAGY,OAAO,GAAG,iBAAiBA,EAAE,GAAGyB,MAAMiG,QAAQ1H,GAAG,IAAIgM,EAAE,EAAEA,EAAEhM,EAAE1D,OAAO0P,IAAIhM,EAAEgM,KAAKrN,EAAE8/B,GAAEz+B,EAAEgM,OAAO5M,IAAIA,GAAG,KAAKA,GAAGT,QAAQ,IAAIqN,KAAKhM,EAAEA,EAAEgM,KAAK5M,IAAIA,GAAG,KAAKA,GAAG4M,GAAG,OAAO5M,CAAC,CAAQ,SAASi4K,KAAO,IAAI,IAAIr3K,EAAEgM,EAAErN,EAAE,EAAES,EAAE,GAAGT,EAAEkP,UAAUvR,SAAS0D,EAAE6N,UAAUlP,QAAQqN,EAAEyyB,GAAEz+B,MAAMZ,IAAIA,GAAG,KAAKA,GAAG4M,GAAG,OAAO5M,CAAC,CAAC,M,yFCYrVk4K,GAAgCx8E,IAUtC,IAVuC,QAC5Cy8E,EAAU,UAAS,KACnBjsK,EAAO,KAAI,SACXksK,EAAQ,UACRC,EAAS,QACT/7D,EAAO,SACPtiG,EAAQ,UACRs+F,EAAS,SACTz+F,GAED6hF,EADIz6F,EAAKivG,EAAAxU,EAAAsX,IAkBR,OACEslE,EAAAA,GAAAA,MAAA,SAAA98E,EAAAA,EAAA,CACE8c,UAAW2/D,GAlBK,iPAEH,CACfl6D,QAAS,yKACTC,UAAW,mKACXu6D,QAAS,uHACTC,OAAQ,wGACRC,MAAO,6FAaMN,GAVD,CACZhkF,GAAI,oBACJhyF,GAAI,sBACJo6B,GAAI,uBAQMrwB,GACN,sOACAosG,GAEFz+F,SAAUA,GAAYyiG,GAClBr7G,GAAK,IAAA+Y,SAAA,CAERsiG,IACCg8D,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,+EACfu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAM,mBAGRsiG,IACAg8D,EAAAA,GAAAA,MAAAI,GAAAA,SAAA,CAAA1+J,SAAA,CACGo+J,GACDP,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,oBAAmBt+F,SAAEA,IACpCq+J,U,oCCrDEM,GAA4Bj9E,IAKlC,IALmC,SACxC1hF,EAAQ,MACR4+J,GAAQ,EAAI,UACZtgE,GAED5c,EADIz6F,EAAKivG,EAAAxU,EAAAsX,IAER,OACE6kE,EAAAA,GAAAA,KAAA,MAAAr8E,EAAAA,EAAA,CACE8c,UAAW2/D,GACT,mDACAW,GAAS,aACTtgE,IAEEr3G,GAAK,IAAA+Y,SAERA,MCXM6+J,GAAwCn9E,IAAkB,IAAjB,QAAEo9E,GAASp9E,EAC/D,MAAOq9E,EAASC,IAAcjxI,EAAAA,EAAAA,WAAS,IAChCuW,EAAW2rC,IAAgBliD,EAAAA,EAAAA,UAAwB,OACnDu0E,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChCkxI,EAAcC,IAAmBnxI,EAAAA,EAAAA,WAAS,GAE3CoxI,GAA0B7xI,EAAAA,EAAAA,aAAY49D,UAC1C,IACE,MAAMyxE,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,IAAKimH,EAAKK,IAAK,OAEf,MAAMxqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,kBAAkB,CAC5DxuG,QAAS,CACP,cAAgB,UAAD59D,OAAY2rK,EAAKK,QAIpC,GAAIxqC,EAASz6F,GAAI,CACf,MAAMrsC,QAAa8mI,EAASirC,OAC5ByB,EAAgBxzK,EAAK0zK,eACvB,CACF,CAAE,MAAOhgL,GACP6V,QAAQ7V,MAAM,uCAAwCA,EACxD,GACC,IAEGigL,GAAiB/xI,EAAAA,EAAAA,aAAY49D,UACjC,MAAMo0E,EAAen8F,GAAAA,cAAcH,aAGnC,GAFAg8F,EAAWM,GAEPA,EAAc,CAChB,MAAM98F,EAAUW,GAAAA,cAAcL,aAC9BmN,GAAoB,OAAPzN,QAAO,IAAPA,OAAO,EAAPA,EAASl+B,YAAa,YAG7B66H,GACR,GACC,CAACA,KAEJ3xI,EAAAA,EAAAA,WAAU,KACR6xI,KACC,CAACA,IAEJ,MAoFMjC,EAAaA,IAIV,GAGT,OAAO99H,EAAAA,GAAAA,eACLu+H,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,4FAA4Fl6F,MAAO,CAAEk/F,SAAU,QAASpoF,IAAK,EAAGF,KAAM,EAAG0nB,MAAO,EAAGojE,OAAQ,GAAI9lG,UAC5Ks+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,+CAA8Ct+F,SAAA,EAC5Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,+BAA8Bt+F,SAAC,wBAC7C69J,EAAAA,GAAAA,KAAA,UACElpI,QAASmqI,EACTxgE,UAAU,wDAAuDt+F,SAClE,eAKHs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EAExBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6DAA4Dt+F,SAAA,CACxE++J,GACClB,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,4BAEvBu/D,EAAAA,GAAAA,KAAC/1D,GAAW,CAACxJ,UAAU,6BAEzBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iCAAgCt+F,SAC1C++J,EAAU,qBAAuB,uBAEpClB,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAClC++J,EACIE,EAAe,kCAAoC,4BACpD,oDAORF,IACAT,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,2CAClBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,uBACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,8IAInC69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAvIOu2D,UACnB,IACE2xE,GAAW,GACX,MAAMr6F,EAAUW,GAAAA,cAAcT,kBAC9Bs8F,GAAW,GACX/uF,EAAazN,EAAQl+B,WACrB46H,GAAgB,GAChBr9D,GAAMQ,QAAQ,sCAChB,CAAE,MAAOjjH,GACPyiH,GAAMziH,MAAM,8BACd,CAAC,QACCy9K,GAAW,EACb,GA4HYv6D,QAASA,EACT87D,UAAUP,EAAAA,GAAAA,KAACh2D,GAAG,CAACvJ,UAAU,YACzBA,UAAU,+CAA8Ct+F,SACzD,yBAOJ++J,IACCT,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iCAAgCt+F,SAAA,EAC7C69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,8BAA6Bt+F,SAAC,gBAC5Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,gFAA+Et+F,SAAA,CAClF,OAATskC,QAAS,IAATA,OAAS,EAATA,EAAW9/B,UAAU,EAAG,KAAK,aAIlC85J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,uBAAsBt+F,SAAA,EACjCi/J,IACApB,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QA/IQu2D,UACxB,GAAK5mD,EAEL,IACEu4H,GAAW,GACX,MAAMF,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,IAAKimH,EAAKK,IAER,YADAn7D,GAAMziH,MAAM,sBAId,MAAMozI,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,qBAAqB,CAC/D7rE,OAAQ,OACR3iC,QAAS,CACP,cAAgB,UAAD59D,OAAY2rK,EAAKK,KAChC,eAAgB,oBAElB99K,KAAMk+C,KAAKC,UAAU,CACnBkiI,eAAgBj7H,MAIpB,GAAIkuF,EAASz6F,GACXmnI,GAAgB,GAChBr9D,GAAMQ,QAAQ,0CACT,CACL,MAAMjjH,QAAcozI,EAASx7G,OAC7B6qF,GAAMziH,MAAM,kCAAD4R,OAAmC5R,GAChD,CACF,CAAE,MAAOA,GACPyiH,GAAMziH,MAAM,gCACd,CAAC,QACCy9K,GAAW,EACb,GA+GgBv6D,QAASA,EACT87D,UAAUP,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,YAC5BA,UAAU,kCAAiCt+F,SAC5C,yBAKH69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QA3GK6qI,KACnB,MAAMh9F,EAAUW,GAAAA,cAAcL,aAC9B,IAAKN,EAAS,OAEd,MAAM92E,EAAO,CACXmL,WAAY2rE,EAAQ3rE,WACpBytC,UAAWk+B,EAAQl+B,UACnB5vC,WAAW,IAAIC,MAAO8qK,eAGlBra,EAAO,IAAIhsG,KAAK,CAAChc,KAAKC,UAAU3xC,EAAM,KAAM,IAAK,CAAE5M,KAAM,qBACzDm4B,EAAMrhB,IAAI0jD,gBAAgB8rG,GAC1B5+J,EAAI6S,SAASC,cAAc,KACjC9S,EAAEqP,KAAOohB,EACTzwB,EAAEk5K,SAAW,2BACbrmK,SAASna,KAAK4hB,YAAYta,GAC1BA,EAAEm5K,QACF/pK,IAAIkkD,gBAAgB7iC,GACpB5d,SAASna,KAAK2hB,YAAYra,GAE1Bq7G,GAAMQ,QAAQ,wBAwFA87D,QAAQ,UACRC,UAAUP,EAAAA,GAAAA,KAACE,GAAQ,CAACz/D,UAAU,YAAat+F,SAC5C,mBAID69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QA7HGirI,KACbnqK,OAAOoqK,QAAQ,8FACjB18F,GAAAA,cAAcF,eACd+7F,GAAW,GACX/uF,EAAa,MACbivF,GAAgB,GAChBr9D,GAAMQ,QAAQ,sBAwHF87D,QAAQ,SACRC,UAAUP,EAAAA,GAAAA,KAACG,GAAM,CAAC1/D,UAAU,YAAat+F,SAC1C,mBAKFi/J,IACCpB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,4DAA2Dt+F,UACxEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,4BACvBu/D,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,iEAUnD69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,0DAAyDt+F,UACtEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6BAA4Bt+F,SAAA,EACzC69J,EAAAA,GAAAA,KAAC/1D,GAAW,CAACxJ,UAAU,gDACvBggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wBAAuBt+F,SAAA,EACpC69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,mBAAkBt+F,SAAC,qBAChC69J,EAAAA,GAAAA,KAAA,KAAA79J,SAAG,kJAUf3G,SAASna,OCrQA4gL,GAAmBA,KAAO,IAADC,EAAAC,EAAAC,EAAAC,EACpC,MAAM,KAAEvD,EAAI,QAAEr6D,EAAO,MAAEljH,EAAK,cAAEi+K,EAAa,MAAEE,EAAK,OAAEK,EAAM,YAAE7gG,EAAW,gBAAEggG,GAAoBN,MACtF0D,EAAgBC,IAAqBryI,EAAAA,EAAAA,WAAS,IAC9CsyI,EAAYC,IAAiBvyI,EAAAA,EAAAA,WAAS,GACvCr4B,EAAW80F,KAMjB,OAJAf,EAAAA,UAAgB,KACd62E,EAAcn9F,GAAAA,cAAcH,eAC3B,KAGDs7F,EAAAA,GAAAA,MAAA,UAAQhgE,UAAU,yFAAwFt+F,SAAA,EACxG69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,8BAA6Bt+F,UAC1Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAEhDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,sGAAqGt+F,UAClH69J,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,0BAEpBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,+BAA8Bt+F,SAAC,gBAC7C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,8BAKzC+8J,IACCuB,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1Cs+J,EAAAA,GAAAA,MAAC7iE,GAAI,CACHta,GAAG,IACHmd,UAAS,0FAAAttG,OACe,MAAtB0E,EAASsrF,SACL,+BACA,yDACHhhF,SAAA,EAEH69J,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,aAClBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAM,cAERs+J,EAAAA,GAAAA,MAAC7iE,GAAI,CACHta,GAAG,SACHmd,UAAS,0FAAAttG,OACe,WAAtB0E,EAASsrF,SACL,+BACA,yDACHhhF,SAAA,EAEH69J,EAAAA,GAAAA,KAAC32D,GAAK,CAAC5I,UAAU,aACjBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAM,oBAOds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EACxC+8D,IACAuhG,EAAAA,GAAAA,MAAA,UACE3pI,QAAS0oI,EACTx9J,SAAUyiG,EACVhE,UAAU,+NAA8Nt+F,SAAA,EAExO69J,EAAAA,GAAAA,KAAC12D,GAAM,CAAC7I,UAAU,aAClBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAM,sBAIT+8D,IAAgBggG,IACfuB,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8FAA6Ft+F,SAAA,EAC1G69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qDACfggE,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,mCAAkCt+F,SAAA,CAC3C,OAAJ28J,QAAI,IAAJA,GAAa,QAAToD,EAAJpD,EAAMjnD,eAAO,IAAAqqD,OAAT,EAAJA,EAAexwK,MAAM,EAAG,GAAG,MAAQ,OAAJotK,QAAI,IAAJA,GAAa,QAATqD,EAAJrD,EAAMjnD,eAAO,IAAAsqD,OAAT,EAAJA,EAAezwK,OAAO,UAG1D+uK,EAAAA,GAAAA,MAAA,UACE3pI,QAAS4oI,EACT19J,SAAUyiG,EACVhE,UAAU,sMAAqMt+F,SAAA,CAE9MsiG,GACCu7D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,sFAEfu/D,EAAAA,GAAAA,KAACz2D,GAAI,CAAC9I,UAAU,aAElBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAOsiG,EAAU,aAAe,cAElCu7D,EAAAA,GAAAA,KAAA,UACElpI,QAASipI,EACTt/D,UAAU,uEAAsEt+F,UAEhF69J,EAAAA,GAAAA,KAACt2D,GAAM,CAACjJ,UAAU,iBAKvBy+D,IACCuB,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8FAA6Ft+F,SAAA,EAC1G69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uCACfggE,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,mCAAkCt+F,SAAA,CAC3C,OAAJ28J,QAAI,IAAJA,GAAa,QAATsD,EAAJtD,EAAMjnD,eAAO,IAAAuqD,OAAT,EAAJA,EAAe1wK,MAAM,EAAG,GAAG,MAAQ,OAAJotK,QAAI,IAAJA,GAAa,QAATuD,EAAJvD,EAAMjnD,eAAO,IAAAwqD,OAAT,EAAJA,EAAe3wK,OAAO,UAG1D+uK,EAAAA,GAAAA,MAAA,UACE3pI,QAASA,IAAMyrI,GAAkB,GACjC9hE,UAAS,gFAAAttG,OACPqvK,EACI,kFACA,uFACHrgK,SAAA,EAEH69J,EAAAA,GAAAA,KAACh2D,GAAG,CAACvJ,UAAU,aACfu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAOqgK,EAAa,WAAa,kBAEnC/B,EAAAA,GAAAA,MAAA,UACE3pI,QAASipI,EACTt/D,UAAU,uJAAsJt+F,SAAA,EAEhK69J,EAAAA,GAAAA,KAACt2D,GAAM,CAACjJ,UAAU,aAClBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAM,iBAKX5gB,IACCk/K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,0FAAyFt+F,SAAA,EACtG69J,EAAAA,GAAAA,KAAC/1D,GAAW,CAACxJ,UAAU,0BACvBu/D,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,uBAAsBt+F,SAAE5gB,eAQjD+gL,IACCtC,EAAAA,GAAAA,KAACgB,GAAU,CAACC,QAASA,IAAMsB,GAAkB,SCpI/CG,GAAS35D,GAAiB,SAAU,CACxC,CAAC,OAAQ,CAAEjgH,EAAG,4CAA6CjH,IAAK,WAChE,CAAC,WAAY,CAAE8nH,OAAQ,gBAAiB9nH,IAAK,WAC7C,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,KAAMC,GAAI,IAAKC,GAAI,KAAMloH,IAAK,aCHnD8gL,GAAS55D,GAAiB,SAAU,CACxC,CAAC,SAAU,CAAES,GAAI,KAAMC,GAAI,KAAMjiF,EAAG,IAAK3lC,IAAK,WAC9C,CAAC,OAAQ,CAAEiH,EAAG,iBAAkBjH,IAAK,aCFjC+gL,GAAO75D,GAAiB,OAAQ,CACpC,CAAC,OAAQ,CAAEjgH,EAAG,WAAYjH,IAAK,WAC/B,CAAC,OAAQ,CAAEiH,EAAG,WAAYjH,IAAK,aCF3BghL,GAAa95D,GAAiB,aAAc,CAChD,CACE,OACA,CACEjgH,EAAG,sLACHjH,IAAK,aCLLihL,GAAS/5D,GAAiB,SAAU,CACxC,CAAC,SAAU,CAAES,GAAI,KAAMC,GAAI,IAAKjiF,EAAG,IAAK3lC,IAAK,WAC7C,CAAC,SAAU,CAAE2nH,GAAI,IAAKC,GAAI,KAAMjiF,EAAG,IAAK3lC,IAAK,WAC7C,CAAC,SAAU,CAAE2nH,GAAI,KAAMC,GAAI,KAAMjiF,EAAG,IAAK3lC,IAAK,WAC9C,CACE,OACA,CAAE+nH,GAAI,OAAQC,GAAI,QAASC,GAAI,QAASC,GAAI,QAASloH,IAAK,WAE5D,CAAC,OAAQ,CAAE+nH,GAAI,QAASC,GAAI,OAAQC,GAAI,OAAQC,GAAI,QAASloH,IAAK,aCqB9DkhL,IAAcrkH,EAAAA,EAAAA,oBAA2CvT,GAElD63H,GAAWA,KACtB,MAAMt6I,GAAUgH,EAAAA,EAAAA,YAAWqzI,IAC3B,QAAgB53H,IAAZziB,EACF,MAAM,IAAIxnC,MAAM,+CAElB,OAAOwnC,GAOIu6I,GAA4Cp/E,IAAmB,IAAlB,SAAE1hF,GAAU0hF,EACpE,MAAOq/E,EAAOC,IAAYjzI,EAAAA,EAAAA,UAAiB,KACpCkzI,EAAaC,IAAkBnzI,EAAAA,EAAAA,UAAiB,KAChDozI,EAAgBC,IAAqBrzI,EAAAA,EAAAA,UAAkB,KACvDu0E,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChC3uC,EAAO09K,IAAY/uI,EAAAA,EAAAA,UAAwB,MAS5CszI,EAAiBA,KACrB,MAAM1E,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,IAAKimH,EAAKK,IACR,MAAM,IAAIj+K,MAAM,sDAElB,MAAO,CACL,cAAgB,UAADiS,OAAY2rK,EAAKK,OAgB9BsE,EAAgCA,KACpC,MAAM3E,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,MAAO,CACL,cAAgB,UAAD1lD,OAAY2rK,EAAKK,KAChC,eAAgB,qBAmLduE,GAAej0I,EAAAA,EAAAA,aAAY49D,UAC/B,IACE,MAAMsnC,QAAiB1xB,MAAM,GAAD9vG,OAlNvB,GAkNuC,WAAW,CACrD49D,QAAS0yG,MAGX,GAAI9uC,EAASz6F,GAAI,CACf,MAAMrsC,QAAa8mI,EAASirC,OAC5BuD,EAASt1K,EAAK4gH,OAAS,GACzB,CACF,CAAE,MAAO9hH,GACPyK,QAAQ7V,MAAM,2BAA4BoL,EAC5C,GACC,IAEGg3K,GAAqBl0I,EAAAA,EAAAA,aAAY49D,UACrC,IACE,MAAMsnC,QAAiB1xB,MAAM,GAAD9vG,OAjOvB,GAiOuC,iBAAiB,CAC3D49D,QAAS0yG,MAGX,GAAI9uC,EAASz6F,GAAI,CACf,MAAMrsC,QAAa8mI,EAASirC,OAC5ByD,EAAex1K,EAAK+1K,QAAU,GAChC,CACF,CAAE,MAAOj3K,GACPyK,QAAQ7V,MAAM,kCAAmCoL,EACnD,GACC,IAEGk3K,GAAwBp0I,EAAAA,EAAAA,aAAY49D,UACxC,IACE,MAAMsnC,QAAiB1xB,MAAM,GAAD9vG,OAhPvB,GAgPuC,0BAA0B,CACpE49D,QAAS0yG,MAGX,GAAI9uC,EAASz6F,GAAI,CACf,MAAMrsC,QAAa8mI,EAASirC,OAC5B2D,EAAkB11K,EAAK+1K,QAAU,GACnC,CACF,CAAE,MAAOj3K,GACPyK,QAAQ7V,MAAM,qCAAsCoL,EACtD,GACC,KAGHgjC,EAAAA,EAAAA,WAAU,KACK4P,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MAC1DsmH,MACPuE,IACAC,IACAE,MAED,CAACH,EAAcC,EAAoBE,IAEtC,MAAMjjK,EAAyB,CAC7BsiK,QACAE,cACAE,iBACA7+D,UACAljH,QACAuiL,WA5OiBz2E,MAAO02E,EAAW9qK,EAAoB+qK,EAAcC,KACrE,IACEjF,GAAW,GACXC,EAAS,MAET,MAAMtrE,EAAW,IAAIE,SACrBF,EAASO,OAAO,OAAQ6vE,GACxBpwE,EAASO,OAAO,MAAOj7F,GACnB+qK,GAAKrwE,EAASO,OAAO,MAAO8vE,GAC5BC,GAAQtwE,EAASO,OAAO,SAAU+vE,GAEtC,MAAMtvC,QAAiB1xB,MAAM,GAAD9vG,OA5CvB,GA4CuC,WAAW,CACrDugG,OAAQ,OACR3iC,QAAS,CACP,cAAiByyG,IAAiBU,eAEpC7iL,KAAMsyG,IAGHghC,EAASz6F,IAtCKiqI,EAACxvC,EAAoB5oB,KAC1C,GAAwB,MAApB4oB,EAASrpC,OAKX,MAHA7xC,aAAaf,WAAW,mBACxBumH,EAAS,wCACTj7D,GAAMziH,MAAM,wCACN,IAAIL,MAAM,mBAElB,MAAM,IAAIA,MAAM,GAADiS,OAAI44G,EAAS,aAAA54G,OAAYwhI,EAASrpC,OAAM,KAAAn4F,OAAIwhI,EAASppC,cA+BhE44E,CAAexvC,EAAU,UAG3B3wB,GAAMQ,QAAQ,oCACRk/D,GACR,CAAE,MAAO/2K,GACP,MAAMinK,EAAejnK,EAAImJ,SAAW,gBACpCmpK,EAASrL,GACT5vD,GAAMziH,MAAMqyK,EACd,CAAC,QACCoL,GAAW,EACb,GA8MAoF,aA3MmB/2E,eAAOg3E,EAAgBprK,GAA8E,IAA1DqrK,EAAqB1tK,UAAAvR,OAAA,QAAA8lD,IAAAv0C,UAAA,IAAAA,UAAA,GAAU2tK,EAAqB3tK,UAAAvR,OAAA,EAAAuR,UAAA,QAAAu0C,EAClH,IACE6zH,GAAW,GACXC,EAAS,MAET,IAAIuF,EAAmBvrK,EAGvB,GAAIqrK,GAAgBC,EAClB,IACEntK,QAAQlC,IAAI,gCAAiC,CAAEovK,eAAcG,kBAAmBF,IAChF,MAAM,cAAEj/F,SAAwB,uCAC1BtsE,EAAassE,EAAczH,gBACjC,IAAK7kE,EACH,MAAM,IAAI9X,MAAM,8DAIlB,MAAMT,SAAe,4CAAsBs9D,QACrC2mH,EAAgBjkL,EAAME,IAAIW,kBAAkB0X,GAC5C2rK,EAAiBlkL,EAAMU,KAAKy2D,SAAS2sH,GAE3CC,EAAmBE,EAAcl/K,QAAQm/K,EAAgB,WAAY,CACnEr6K,GAAI7J,EAAM6J,GAAGw4C,OAAOx8C,SACpBuO,KAAMpU,EAAMmU,IAAIC,KAAKvO,OAAO7F,EAAM6J,GAAGw4C,OAAOx8C,YAE9C8Q,QAAQlC,IAAI,+BAAgCsvK,EAAiBn/K,OAC/D,CAAE,MAAOu/K,GAEP,MADAxtK,QAAQ7V,MAAM,yBAA0BqjL,GAClC,IAAI1jL,MAAM,kFAClB,CAGF,MAAMyzI,QAAiB1xB,MAAM,GAAD9vG,OApGvB,GAoGuC,WAAAA,OAAUkxK,EAAM,SAAAlxK,OAAQ6H,mBAAmBwpK,IAAqB,CAC1G9wE,OAAQ,MACR3iC,QAAS0yG,MAGX,IAAK9uC,EAASz6F,GACZ,MAAM,IAAIh5C,MAAM,mBAGlB,MAAMqmK,QAAa5yB,EAAS4yB,OACtBnuI,EAAMxhB,OAAOG,IAAI0jD,gBAAgB8rG,GACjC5+J,EAAI6S,SAASC,cAAc,KACjC9S,EAAEqP,KAAOohB,EACTzwB,EAAEk5K,SAAQ,QAAA1uK,OAAWkxK,GACrB7oK,SAASna,KAAK4hB,YAAYta,GAC1BA,EAAEm5K,QACFlqK,OAAOG,IAAIkkD,gBAAgB7iC,GAC3B5d,SAASna,KAAK2hB,YAAYra,GAE1Bq7G,GAAMQ,QAAQ,+BAChB,CAAE,MAAO73G,GACP,MAAMinK,EAAejnK,EAAImJ,SAAW,kBACpCmpK,EAASrL,GACT5vD,GAAMziH,MAAMqyK,EACd,CAAC,QACCoL,GAAW,EACb,CACF,EAgJE6F,WA9IiBx3E,UACjB,IACE2xE,GAAW,GACXC,EAAS,MAOT,WALuBh8D,MAAM,GAAD9vG,OAtIvB,GAsIuC,WAAAA,OAAUkxK,GAAU,CAC9D3wE,OAAQ,SACR3iC,QAAS0yG,OAGGvpI,GACZ,MAAM,IAAIh5C,MAAM,iBAGlB8iH,GAAMQ,QAAQ,mCACRk/D,GACR,CAAE,MAAO/2K,GACP,MAAMinK,EAAejnK,EAAImJ,SAAW,gBACpCmpK,EAASrL,GACT5vD,GAAMziH,MAAMqyK,EACd,CAAC,QACCoL,GAAW,EACb,GAyHA8F,UAtHgBz3E,MAAOg3E,EAAgBU,EAA0B9rK,KACjE,IACE+lK,GAAW,GACXC,EAAS,MAWT,WATuBh8D,MAAM,GAAD9vG,OA/JvB,GA+JuC,WAAAA,OAAUkxK,EAAM,UAAU,CACpE3wE,OAAQ,OACR3iC,QAAS0yG,IACTpiL,KAAMk+C,KAAKC,UAAU,CACnBywB,UAAW80G,EACX9rK,kBAIUihC,GACZ,MAAM,IAAIh5C,MAAM,gBAGlB8iH,GAAMQ,QAAQ,kCACRq/D,GACR,CAAE,MAAOl3K,GACP,MAAMinK,EAAejnK,EAAImJ,SAAW,eACpCmpK,EAASrL,GACT5vD,GAAMziH,MAAMqyK,EACd,CAAC,QACCoL,GAAW,EACb,GA6FAgG,YA1FkB33E,UAClB,IACE2xE,GAAW,GACXC,EAAS,MAOT,WALuBh8D,MAAM,GAAD9vG,OA5LvB,GA4LuC,kBAAAA,OAAiB8xK,GAAW,CACtEvxE,OAAQ,SACR3iC,QAAS0yG,OAGGvpI,GACZ,MAAM,IAAIh5C,MAAM,iBAGlB8iH,GAAMQ,QAAQ,oCACRq/D,GACR,CAAE,MAAOl3K,GACP,MAAMinK,EAAejnK,EAAImJ,SAAW,gBACpCmpK,EAASrL,GACT5vD,GAAMziH,MAAMqyK,EACd,CAAC,QACCoL,GAAW,EACb,GAqEA0E,eACAC,qBACAE,yBAGF,OACE7D,EAAAA,GAAAA,KAAC+C,GAAYlkH,SAAQ,CAACj+C,MAAOA,EAAMuB,SAChCA,KC/UDs2B,GAAIswE,GAAiB,IAAK,CAC9B,CAAC,OAAQ,CAAEjgH,EAAG,aAAcjH,IAAK,WACjC,CAAC,OAAQ,CAAEiH,EAAG,aAAcjH,IAAK,aCF7BqjL,GAAOn8D,GAAiB,OAAQ,CACpC,CACE,OACA,CACEjgH,EAAG,wEACHjH,IAAK,WAGT,CAAC,WAAY,CAAE8nH,OAAQ,iBAAkB9nH,IAAK,aCR1CsjL,GAAOp8D,GAAiB,OAAQ,CACpC,CACE,OACA,CACEzyF,MAAO,KACPC,OAAQ,KACRlpB,EAAG,IACHoG,EAAG,KACH2xK,GAAI,IACJC,GAAI,IACJxjL,IAAK,WAGT,CAAC,OAAQ,CAAEiH,EAAG,2BAA4BjH,IAAK,aCb3CyjL,GAASv8D,GAAiB,SAAU,CACxC,CACE,OACA,CACEjgH,EAAG,6HACHjH,IAAK,a,wDCRE0jL,GAA8B1hF,IAOpC,IAPqC,SAC1C08E,EAAQ,UACRC,EAAS,MACTj/K,EAAK,MACLi0E,EAAK,UACLirC,GAED5c,EADIz6F,EAAKivG,EAAAxU,EAAAsX,IAER,OACEslE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,CACvBqzD,IACCwqG,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,2CAA0Ct+F,SACxDqzD,KAGLirG,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,WAAUt+F,SAAA,CACtBo+J,IACCP,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,oEAAmEt+F,SAC/Eo+J,KAGLP,EAAAA,GAAAA,KAAA,QAAAr8E,EAAA,CACE8c,UAAW2/D,GACT,yOACAG,GAAY,QACZC,GAAa,QACbj/K,GAAS,0CACTk/G,IAEEr3G,IAELo3K,IACCR,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qEAAoEt+F,SAChFq+J,OAINj/K,IACCy+K,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,uBAAsBt+F,SAAE5gB,QCrChCikL,GAAwC3hF,IAAkB,IAAjB,QAAEo9E,GAASp9E,EAC/D,MAAM,WAAEigF,EAAU,QAAEr/D,GAAYu+D,MACzBe,EAAM0B,IAAWv1I,EAAAA,EAAAA,UAAsB,OACvCj3B,EAAYysK,IAAiBx1I,EAAAA,EAAAA,UAAS,KACtC8zI,EAAK2B,IAAUz1I,EAAAA,EAAAA,UAAS,KACxB+zI,EAAQ2B,IAAa11I,EAAAA,EAAAA,UAAS,KAC9B21I,EAAYC,IAAiB51I,EAAAA,EAAAA,WAAS,GACvC61I,GAAe91I,EAAAA,EAAAA,QAAyB,MAExC+1I,EAAcj9K,IAClBA,EAAEyoB,iBACFzoB,EAAEunB,kBACa,cAAXvnB,EAAE9H,MAAmC,aAAX8H,EAAE9H,KAC9B6kL,GAAc,GACM,cAAX/8K,EAAE9H,MACX6kL,GAAc,IAqClB,OACE9F,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnGs+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,0BAAyBt+F,SAAA,EACvCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,+BAA8Bt+F,SAAC,iBAC7C69J,EAAAA,GAAAA,KAAA,UACElpI,QAASmqI,EACTxgE,UAAU,wDAAuDt+F,UAEjE69J,EAAAA,GAAAA,KAACvnI,GAAC,CAACgoE,UAAU,kBAKjBu/D,EAAAA,GAAAA,KAAA,OACEv/D,UAAS,iFAAAttG,OACP0yK,EACI,iCACA,2CAENI,YAAaD,EACbE,YAAaF,EACbG,WAAYH,EACZI,OAxDYr9K,IAClBA,EAAEyoB,iBACFzoB,EAAEunB,kBACFw1J,GAAc,GAEV/8K,EAAEkrB,aAAaivJ,OAASn6K,EAAEkrB,aAAaivJ,MAAM,IAC/CuC,EAAQ18K,EAAEkrB,aAAaivJ,MAAM,KAkDN/gK,SAElB4hK,GACCtD,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxB69J,EAAAA,GAAAA,KAACkF,GAAI,CAACzkE,UAAU,mCAChBu/D,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAE4hK,EAAKp9K,QAC5Cq5K,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SArCzBrV,KACtB,GAAc,IAAVA,EAAa,MAAO,UACxB,MAEM/G,EAAI2F,KAAKK,MAAML,KAAKwJ,IAAIpI,GAASpB,KAAKwJ,IAFlC,OAGV,OAAOk/D,YAAYtnE,EAAQpB,KAAKkI,IAHtB,KAG6B7N,IAAIu0D,QAAQ,IAAM,IAF3C,CAAC,QAAS,KAAM,KAAM,MAEiCv0D,IAgCpBsgL,CAAetC,EAAK1vK,YAG7DosK,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxB69J,EAAAA,GAAAA,KAAC0C,GAAM,CAACjiE,UAAU,oCAClBu/D,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,uCACtC69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,mCAK5C69J,EAAAA,GAAAA,KAAA,SACEz3K,IAAKw9K,EACL9kL,KAAK,OACLqlL,SAlEkBv9K,IACpBA,EAAEkf,OAAOi7J,OAASn6K,EAAEkf,OAAOi7J,MAAM,IACnCuC,EAAQ18K,EAAEkf,OAAOi7J,MAAM,KAiEnBziE,UAAU,YAGVsjE,IACA/D,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,KAAA,IAAAyvI,EAAA,OAA0B,QAA1BA,EAAMR,EAAaz8K,eAAO,IAAAi9K,OAAA,EAApBA,EAAsBzE,SACrCxB,QAAQ,UACR7/D,UAAU,cAAat+F,SACxB,gBAKF4hK,IACC/D,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IAAM2uI,EAAQ,MACvBnF,QAAQ,QACR7/D,UAAU,cAAat+F,SACxB,gBAMF4hK,IACCtD,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAACuF,GAAK,CACJ/vG,MAAM,wBACNv0E,KAAK,WACLulL,YAAY,kCACZ5lK,MAAO3H,EACPqtK,SAAWv9K,GAAM28K,EAAc38K,EAAEkf,OAAOrH,OACxC2/J,UAAUP,EAAAA,GAAAA,KAACmF,GAAI,CAAC1kE,UAAU,YAC1B5Y,UAAQ,KAGVm4E,EAAAA,GAAAA,KAACuF,GAAK,CACJ/vG,MAAM,2CACNv0E,KAAK,OACLulL,YAAY,uCACZ5lK,MAAOojK,EACPsC,SAAWv9K,GAAM48K,EAAO58K,EAAEkf,OAAOrH,UAGnCo/J,EAAAA,GAAAA,KAACuF,GAAK,CACJ/vG,MAAM,oBACNv0E,KAAK,OACLulL,YAAY,qBACZ5lK,MAAOqjK,EACPqC,SAAWv9K,GAAM68K,EAAU78K,EAAEkf,OAAOrH,OACpC2/J,UAAUP,EAAAA,GAAAA,KAACsF,GAAM,CAAC7kE,UAAU,eAG9BggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASmqI,EACTX,QAAQ,UACR7/D,UAAU,SAAQt+F,SACnB,YAGD69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QA3HOu2D,UACd02E,GAAS9qK,UAIR6qK,EAAWC,EAAa9qK,EAAY+qK,QAAO74H,EAAW84H,QAAU94H,GACtE81H,MAsHYj/J,UAAW/I,GAAcwrG,EACzBA,QAASA,EACThE,UAAU,SAAQt+F,SACnB,uBChKTskK,GAAQ19D,GAAiB,QAAS,CACtC,CAAC,SAAU,CAAES,GAAI,KAAMC,GAAI,KAAMjiF,EAAG,KAAM3lC,IAAK,WAC/C,CAAC,WAAY,CAAE8nH,OAAQ,mBAAoB9nH,IAAK,aCF5C6kL,GAAY39D,GAAiB,YAAa,CAC9C,CAAC,OAAQ,CAAEa,GAAI,KAAMC,GAAI,IAAKC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,WACvD,CACE,OACA,CACEiH,EAAG,6GACHjH,IAAK,WAGT,CAAC,OAAQ,CAAE+nH,GAAI,IAAKC,GAAI,OAAQC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,WACzD,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,QAASC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,aCVvD8kL,GAAW59D,GAAiB,WAAY,CAC5C,CACE,OACA,CACEzyF,MAAO,KACPC,OAAQ,KACRlpB,EAAG,IACHoG,EAAG,IACH2xK,GAAI,IACJC,GAAI,IACJxjL,IAAK,WAGT,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,KAAMC,GAAI,IAAKC,GAAI,IAAKloH,IAAK,WACtD,CAAC,OAAQ,CAAE+nH,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKloH,IAAK,WACpD,CAAC,OAAQ,CAAE+nH,GAAI,IAAKC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,aCN5C+kL,GAAoC/iF,IAK1C,IAL2C,MAChDq/E,EAAQ,GAAE,OACVU,EAAS,GAAE,QACXiD,EAAO,KACP5lL,GACD4iG,EACC,MAAM,aAAEugF,EAAY,WAAES,EAAU,YAAEG,EAAW,QAAEvgE,GAAYu+D,MACpD8D,EAAcC,IAAmB72I,EAAAA,EAAAA,UAAwB,OACzD82I,EAAkBC,IAAuB/2I,EAAAA,EAAAA,UAAc,OACvDj3B,EAAYysK,IAAiBx1I,EAAAA,EAAAA,UAAS,KACtCg3I,EAAqBC,IAA0Bj3I,EAAAA,EAAAA,WAAS,GAEzDm2I,EAAkBv5K,IACtB,IAAKA,GAAmB,IAAVA,EAAa,MAAO,UAClC,IACE,MAAMnF,EAAI,KACJy/K,EAAQ,CAAC,QAAS,KAAM,KAAM,MAC9BrhL,EAAI2F,KAAKK,MAAML,KAAKwJ,IAAIpI,GAASpB,KAAKwJ,IAAIvN,IAChD,OAAOysE,YAAYtnE,EAAQpB,KAAKkI,IAAIjM,EAAG5B,IAAIu0D,QAAQ,IAAM,IAAM8sH,EAAMrhL,EACvE,CAAE,MAAOxE,GAEP,OADA6V,QAAQC,KAAK,8BAA+BvK,EAAOvL,GAC5C,cACT,GAGI8lL,EAAcC,IAClB,IAAKA,EAAY,MAAO,eACxB,IACE,OAAO,IAAIxwK,KAAKwwK,GAAYC,mBAAmB,QAAS,CACtD/zG,KAAM,UACN36C,MAAO,QACP2uJ,IAAK,UACLC,KAAM,UACNC,OAAQ,WAEZ,CAAE,MAAOnmL,GAEP,OADA6V,QAAQC,KAAK,yBAA0BiwK,EAAY/lL,GAC5C,cACT,GAGIomL,EAAiBA,CAACtD,EAAgBN,KACtCgD,EAAgB1C,GAChB4C,EAAoBlD,GACpBoD,GAAuB,IAgCnBS,EAAeC,IACnB,IAAKA,GAAgC,kBAAbA,GAA6C,KAApBA,EAASjpK,OAAe,MAAO,eAChF,IACE,MAAMkpK,EAAiBD,EAASjpK,OAAOpC,cACvC,GAAuB,KAAnBsrK,EAAuB,MAAO,eAElC,MAAMhuH,EAAQguH,EAAexrK,MAAM,KACnC,IAAKw9C,GAA0B,IAAjBA,EAAMz0D,OAAc,MAAO,eAEzC,MAAMghE,EAAMvM,EAAMA,EAAMz0D,OAAS,GACjC,OAAKghE,GAAe,KAARA,EAER,CAAC,MAAO,OAAQ,MAAO,MAAO,MAAO,OAAQ,OAAOhnD,SAASgnD,GAAa,qBAC1E,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,OAAOhnD,SAASgnD,GAAa,eACzE,CAAC,MAAO,MAAO,OAAQ,MAAO,MAAO,OAAOhnD,SAASgnD,GAAa,eAClE,CAAC,OAAOhnD,SAASgnD,GAAa,eAC9B,CAAC,MAAO,KAAM,MAAO,OAAQ,OAAOhnD,SAASgnD,GAAa,eAC1D,CAAC,MAAO,MAAO,KAAM,MAAO,MAAMhnD,SAASgnD,GAAa,eACrD,eARwB,cASjC,CAAE,MAAO9kE,GAEP,OADA6V,QAAQC,KAAK,+BAAgCwwK,EAAUtmL,GAChD,cACT,GAGF,MAAa,WAATN,GAEA++K,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,YAAWt+F,SACG,KAAzByhK,GAAU,IAAIv+K,QACdo7K,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,oBAAmBt+F,SAAA,EACjC69J,EAAAA,GAAAA,KAAC8C,GAAM,CAACriE,UAAU,2CAClBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,mBACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,sDAG/ByhK,GAAU,IAAIp0H,OAAOu4H,GAASA,GAA0B,kBAAVA,GAAoB1rH,IAAK0rH,IACtE,MAAM9C,GAAe,OAAL8C,QAAK,IAALA,OAAK,EAALA,EAAOC,WAAY,UAC7BH,GAAgB,OAALE,QAAK,IAALA,OAAK,EAALA,EAAOE,YAAa,eAC/BC,GAAkB,OAALH,QAAK,IAALA,OAAK,EAALA,EAAOI,eAAoB,OAALJ,QAAK,IAALA,OAAK,EAALA,EAAO93G,YAAa,UACvD00C,GAAiB,OAALojE,QAAK,IAALA,OAAK,EAALA,EAAOK,cAAc,IAAItxK,MAAO8qK,cAElD,OACE5B,EAAAA,GAAAA,KAACc,GAAI,CAAergE,UAAU,0CAAyCt+F,UACrEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qEAAoEt+F,UACjF69J,EAAAA,GAAAA,KAACkF,GAAI,CAACzkE,UAAU,8BAElBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAE0lK,KACxCpH,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,qDAAoDt+F,SAAA,EACjEs+J,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,8BAA6Bt+F,SAAA,EAC3C69J,EAAAA,GAAAA,KAACz2D,GAAI,CAAC9I,UAAU,aAChBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAO+lK,GAAoC,kBAAfA,EAAuB,GAAA/0K,OAAM+0K,EAAWx2K,MAAM,EAAG,GAAE,OAAAyB,OAAM+0K,EAAWx2K,OAAO,IAAO,gBAEhH+uK,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,8BAA6Bt+F,SAAA,EAC3C69J,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,aACjBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAOklK,EAAW1iE,kBAK5Bq7D,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IArECu2D,WACpBz1F,OAAOoqK,QAAQ,sDACXgD,EAAYC,IAmESoD,CAAkBpD,GACjC3E,QAAQ,SACRjsK,KAAK,KACL2N,SAAUyiG,EAAQtiG,SACnB,eAzBQ8iK,QAsCrBxE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,CACI,KAAxB+gK,GAAS,IAAI79K,QACfo7K,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,oBAAmBt+F,SAAA,EACjC69J,EAAAA,GAAAA,KAACkF,GAAI,CAACzkE,UAAU,2CAChBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SACzC,aAATlhB,EAAsB,eAAiB,qBAE1C++K,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SACjB,aAATlhB,EACG,yCACA,gDAKPiiL,GAAS,IAAI1zH,OAAOu0H,GAAQA,GAAwB,kBAATA,GAAmB1nH,IAAK0nH,IAElE,MAAM8D,GAAe,OAAJ9D,QAAI,IAAJA,OAAI,EAAJA,EAAMp9K,QAAY,OAAJo9K,QAAI,IAAJA,OAAI,EAAJA,EAAMkE,YAAa,eAC5CK,GAAe,OAAJvE,QAAI,IAAJA,OAAI,EAAJA,EAAM1vK,QAAY,OAAJ0vK,QAAI,IAAJA,OAAI,EAAJA,EAAMwE,YAAa,EAC5ClE,GAAa,OAAJN,QAAI,IAAJA,OAAI,EAAJA,EAAMyE,WAAe,OAAJzE,QAAI,IAAJA,OAAI,EAAJA,EAAMr9K,KAAM,UACtCi+G,GAAgB,OAAJo/D,QAAI,IAAJA,OAAI,EAAJA,EAAMqE,cAAc,IAAItxK,MAAO8qK,cAC3CqC,EAAa,OAAJF,QAAI,IAAJA,OAAI,EAAJA,EAAME,OAErB,OACEjE,EAAAA,GAAAA,KAACc,GAAI,CAAcrgE,UAAU,0CAAyCt+F,UACpEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qEAAoEt+F,UACjF69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,UAASt+F,SAAEylK,EAAYC,QAEzCpH,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAE0lK,KACxCpH,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,qDAAoDt+F,SAAA,EACjEs+J,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,8BAA6Bt+F,SAAA,EAC3C69J,EAAAA,GAAAA,KAAC0G,GAAS,CAACjmE,UAAU,aACrBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAOkkK,EAAeiC,SAExB7H,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,8BAA6Bt+F,SAAA,EAC3C69J,EAAAA,GAAAA,KAAC2G,GAAQ,CAAClmE,UAAU,aACpBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAOklK,EAAW1iE,QAEnBs/D,IACCxD,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,gBAAet+F,SAAA,CAAC,gBAAI8hK,eAK9CxD,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CAChC,aAATlhB,IACCw/K,EAAAA,GAAAA,MAAAI,GAAAA,SAAA,CAAA1+J,SAAA,EACE69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IAAM6wI,EAAetD,EAAQN,GACtCzD,QAAQ,UACRjsK,KAAK,KACLksK,UAAUP,EAAAA,GAAAA,KAACE,GAAQ,CAACz/D,UAAU,YAAat+F,SAC5C,aAGA0kK,IACC7G,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IAAM+vI,EAAQxC,GACvB/D,QAAQ,UACRjsK,KAAK,KACLksK,UAAUP,EAAAA,GAAAA,KAAC8C,GAAM,CAACriE,UAAU,YAAat+F,SAC1C,WAIH69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IAjKRu2D,WACfz1F,OAAOoqK,QAAQ,qDACX6C,EAAWR,IA+JcoE,CAAapE,GAC5B/D,QAAQ,SACRjsK,KAAK,KACLksK,UAAUP,EAAAA,GAAAA,KAACG,GAAM,CAAC1/D,UAAU,YAC5Bz+F,SAAUyiG,EAAQtiG,SACnB,cAKK,WAATlhB,IACC++K,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IAAM6wI,EAAetD,EAAQN,GACtCzD,QAAQ,UACRjsK,KAAK,KACLksK,UAAUP,EAAAA,GAAAA,KAACE,GAAQ,CAACz/D,UAAU,YAAat+F,SAC5C,oBA7DIkiK,KAyEhB6C,IACClH,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnGs+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,kBAAiBt+F,SAAA,EAC/Bs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,sBACjD69J,EAAAA,GAAAA,KAAA,UACElpI,QAASA,IAAMqwI,GAAuB,GACtC1mE,UAAU,kCAAiCt+F,SAC5C,eAIH69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,qDAGnC69J,EAAAA,GAAAA,KAAA,SACE/+K,KAAK,WACLulL,YAAY,mBACZ5lK,MAAO3H,EACPqtK,SAAWv9K,GAAM28K,EAAc38K,EAAEkf,OAAOrH,OACxC6/F,UAAU,yKAEZggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IAAMqwI,GAAuB,GACtC7G,QAAQ,UACR7/D,UAAU,SAAQt+F,SACnB,YAGD69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QA7OUu2D,UACtB,GAAIy5E,GAAgB7tK,EAAY,CAE9B,MAAMqrK,EAAe0C,GAAoBA,EAAiB0B,cACpDnE,EAA+B,OAAhByC,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkB0B,cAGjCC,EAAerE,EAA+B,OAAhB0C,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBwB,QAAU1B,QAE1D1C,EAAauE,EAAc1vK,EAAYqrK,EAAcC,GAC3D4C,GAAuB,GACvBJ,EAAgB,MAChBE,EAAoB,MACpBvB,EAAc,GAChB,GAgOY1jK,UAAW/I,EACXwnG,UAAU,SAAQt+F,SACnB,yBCxSTymK,GAAQ7/D,GAAiB,QAAS,CACtC,CAAC,WAAY,CAAEY,OAAQ,iBAAkB9nH,IAAK,aCD1CgnL,GAAO9/D,GAAiB,OAAQ,CACpC,CACE,OACA,CACEzyF,MAAO,KACPC,OAAQ,KACRlpB,EAAG,IACHoG,EAAG,IACH2xK,GAAI,IACJC,GAAI,IACJxjL,IAAK,WAGT,CACE,OACA,CACEiH,EAAG,0DACHjH,IAAK,aChBEinL,GAAwCjlF,IAA0B,IAAzB,OAAEwgF,EAAM,QAAEpD,GAASp9E,EACvE,MAAM,UAAEihF,EAAS,QAAErgE,GAAYu+D,MACxB+B,EAAkBgE,IAAuB74I,EAAAA,EAAAA,UAAS,KAClDj3B,EAAYysK,IAAiBx1I,EAAAA,EAAAA,UAAS,KACtC84I,EAAQC,IAAa/4I,EAAAA,EAAAA,WAAS,IAC9BsyI,EAAYC,IAAiBvyI,EAAAA,EAAAA,WAAS,IACtCg5I,EAAuBC,IAA4Bj5I,EAAAA,EAAAA,WAAS,GAE7Dk5I,GAAiB35I,EAAAA,EAAAA,aAAY49D,UACjC,MAAM6zE,EAAU57F,GAAAA,cAAcH,aAG9B,GAFAs9F,EAAcvB,GAEVA,EAEF,IACE,MAAMpC,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,GAAIimH,EAAKK,IAAK,CACZ,MAAMxqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,kBAAkB,CAC5DxuG,QAAS,CACP,cAAgB,UAAD59D,OAAY2rK,EAAKK,QAIpC,GAAIxqC,EAASz6F,GAAI,CACf,MAAMrsC,QAAa8mI,EAASirC,OAC5BuJ,EAAyBt7K,EAAK0zK,eAChC,CACF,CACF,CAAE,MAAOhgL,GACP6V,QAAQ7V,MAAM,2CAA4CA,EAC5D,GAED,KAEHouC,EAAAA,EAAAA,WAAU,KACRy5I,KACC,CAACA,IAEJ,MAgBM7J,EAAaA,IAIV,GAUT,OACES,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnGs+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,kBAAiBt+F,SAAA,EAC/Bs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,+BAA8Bt+F,SAAC,gBAC7C69J,EAAAA,GAAAA,KAAA,UACElpI,QAASmqI,EACTxgE,UAAU,wDAAuDt+F,UAEjE69J,EAAAA,GAAAA,KAACvnI,GAAC,CAACgoE,UAAU,kBAIjBggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EAEtBqgK,IACAxC,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wDAAuDt+F,UACpEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6BAA4Bt+F,SAAA,EACzC69J,EAAAA,GAAAA,KAACh2D,GAAG,CAACvJ,UAAU,+CACfggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,uBAAsBt+F,SAAA,EACnC69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,mBAAkBt+F,SAAC,uBAChC69J,EAAAA,GAAAA,KAAA,KAAA79J,SAAG,8IASVqgK,IAAe0G,IACdlJ,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,8DAA6Dt+F,UAC1Es+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6BAA4Bt+F,SAAA,EACzC69J,EAAAA,GAAAA,KAAC/1D,GAAW,CAACxJ,UAAU,kDACvBggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,0BAAyBt+F,SAAA,EACtC69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,mBAAkBt+F,SAAC,+BAChC69J,EAAAA,GAAAA,KAAA,KAAA79J,SAAG,sJASX69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,0DAAyDt+F,UACtEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6BAA4Bt+F,SAAA,EACzC69J,EAAAA,GAAAA,KAAC/1D,GAAW,CAACxJ,UAAU,gDACvBggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wBAAuBt+F,SAAA,EACpC69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,mBAAkBt+F,SAAC,6BAChC69J,EAAAA,GAAAA,KAAA,KAAA79J,SAAG,wIAQT69J,EAAAA,GAAAA,KAACuF,GAAK,CACJ/vG,MAAM,oBACNv0E,KAAK,OACLulL,YAAY,QACZ5lK,MAAOmkK,EACPuB,SAAWv9K,GAAMggL,EAAoBhgL,EAAEkf,OAAOrH,OAC9C2/J,UAAUP,EAAAA,GAAAA,KAACz2D,GAAI,CAAC9I,UAAU,YAC1B5Y,UAAQ,KAGVm4E,EAAAA,GAAAA,KAACuF,GAAK,CACJ/vG,MAAM,wBACNv0E,KAAK,WACLulL,YAAY,qCACZ5lK,MAAO3H,EACPqtK,SAAWv9K,GAAM28K,EAAc38K,EAAEkf,OAAOrH,OACxC2/J,UAAUP,EAAAA,GAAAA,KAACmF,GAAI,CAAC1kE,UAAU,YAC1B5Y,UAAQ,KAGVm4E,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,iCAAgCt+F,UAC7Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,cACzCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,qEAAoEt+F,SACjFkiK,KAEHrE,EAAAA,GAAAA,KAAA,UACElpI,QAASA,KAAMuyI,OA7FNlwJ,EA6FsBkrJ,EA5F7CrhI,UAAUsmI,UAAUC,UAAUpwJ,GAC9B8vJ,GAAU,GACVvnJ,WAAW,IAAMunJ,GAAU,GAAQ,UACnCjlE,GAAMQ,QAAQ,uBAJSrrF,OA8FTsnF,UAAU,wDAAuDt+F,SAEhE6mK,GACChJ,EAAAA,GAAAA,KAAC4I,GAAK,CAACnoE,UAAU,4BAEjBu/D,EAAAA,GAAAA,KAAC6I,GAAI,CAACpoE,UAAU,uBAO1BggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASmqI,EACTX,QAAQ,UACR7/D,UAAU,SAAQt+F,SACnB,YAGD69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QA1IQu2D,UACb03E,GAAqB9rK,EAMrB8rK,EAAiBz/E,WAAW,OAAqC,KAA5By/E,EAAiB1/K,cAKrDy/K,EAAUT,EAAQU,EAAkB9rK,GAC1CgoK,KALEj9D,GAAMziH,MAAM,yCANZyiH,GAAMziH,MAAM,8BAyIJygB,UAAW+iK,IAAqB9rK,GAAcwrG,IAAY+9D,IAAe0G,EACzEzkE,QAASA,EACThE,UAAU,SAAQt+F,SACnB,2BCvLAqnK,GAAsBA,KACjC,MAAM,gBAAEtK,GAAoBN,MACtB,MAAEsE,EAAK,YAAEE,EAAW,eAAEE,GAAmBN,MACxCyG,EAAWC,IAAgBx5I,EAAAA,EAAAA,UAA2C,aACtEy5I,EAAaC,IAAkB15I,EAAAA,EAAAA,UAAS,KACxC25I,EAAYC,IAAiB55I,EAAAA,EAAAA,WAAS,IACtC65I,EAAgBC,IAAqB95I,EAAAA,EAAAA,WAAS,IAC9C42I,EAAcC,IAAmB72I,EAAAA,EAAAA,UAAwB,MAEhE,IAAKgvI,EACH,OACEc,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,gDAA+Ct+F,UAC5Ds+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,mCAAkCt+F,SAAA,EAChD69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qHAAoHt+F,UACjI69J,EAAAA,GAAAA,KAAC0C,GAAM,CAACjiE,UAAU,0BAEpBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,qCAAoCt+F,SAAC,2BACnD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,oGAGnCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yBAAwBt+F,SAAA,EACrC69J,EAAAA,GAAAA,KAAA,KAAA79J,SAAG,kCACH69J,EAAAA,GAAAA,KAAA,KAAA79J,SAAG,gCACH69J,EAAAA,GAAAA,KAAA,KAAA79J,SAAG,gCACH69J,EAAAA,GAAAA,KAAA,KAAA79J,SAAG,oCAOb,MAAM8nK,GAAiB/G,GAAS,IAAI1zH,OAAOu0H,GACzCA,EAAKp9K,MAAQo9K,EAAKp9K,KAAK6V,cAAc6C,SAASsqK,EAAYntK,gBAGtD0tK,GAAuB9G,GAAe,IAAI5zH,OAAOu0H,IACrD,MAAM8D,EAAW9D,EAAKp9K,MAAQo9K,EAAKkE,UACnC,OAAOJ,GAAYA,EAASrrK,cAAc6C,SAASsqK,EAAYntK,iBAG3D2tK,GAA0B7G,GAAkB,IAAI9zH,OAAOu4H,GAC3DA,EAAME,WAAaF,EAAME,UAAUzrK,cAAc6C,SAASsqK,EAAYntK,gBAGxE,OACEikK,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EAExBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,cAAat+F,SAAA,EAC1B69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,qCAAoCt+F,SAAC,uBACnD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,yDAIhCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,kCAAiCt+F,SAAA,EAC9C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,SAAQt+F,UACrB69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,OACLulL,YAAY,kBACZ5lK,MAAO+oK,EACPrD,SAAWv9K,GAAM6gL,EAAe7gL,EAAEkf,OAAOrH,OACzC2/J,UAAUP,EAAAA,GAAAA,KAAC2C,GAAM,CAACliE,UAAU,iBAGhCu/D,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IAAMgzI,GAAc,GAC7BvJ,UAAUP,EAAAA,GAAAA,KAAC4C,GAAI,CAACniE,UAAU,YAC1BA,UAAU,uFAAsFt+F,SACjG,oBAMHs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,gDAA+Ct+F,SAAA,EAC5Ds+J,EAAAA,GAAAA,MAAA,UACE3pI,QAASA,IAAM4yI,EAAa,YAC5BjpE,UAAS,sGAAAttG,OACO,aAAds2K,EACI,0BACA,mCACHtnK,SAAA,EAEH69J,EAAAA,GAAAA,KAAC6C,GAAU,CAACpiE,UAAU,aACtBggE,EAAAA,GAAAA,MAAA,QAAAt+J,SAAA,CAAM,cAAY+gK,GAAS,IAAI79K,OAAO,WAExCo7K,EAAAA,GAAAA,MAAA,UACE3pI,QAASA,IAAM4yI,EAAa,UAC5BjpE,UAAS,sGAAAttG,OACO,WAAds2K,EACI,0BACA,mCACHtnK,SAAA,EAEH69J,EAAAA,GAAAA,KAACE,GAAQ,CAACz/D,UAAU,aACpBggE,EAAAA,GAAAA,MAAA,QAAAt+J,SAAA,CAAM,oBAAkBihK,GAAe,IAAI/9K,OAAO,WAEpDo7K,EAAAA,GAAAA,MAAA,UACE3pI,QAASA,IAAM4yI,EAAa,UAC5BjpE,UAAS,sGAAAttG,OACO,WAAds2K,EACI,0BACA,mCACHtnK,SAAA,EAEH69J,EAAAA,GAAAA,KAAC8C,GAAM,CAACriE,UAAU,aAClBggE,EAAAA,GAAAA,MAAA,QAAAt+J,SAAA,CAAM,eAAamhK,GAAkB,IAAIj+K,OAAO,cAKpDo7K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,kBAAiBt+F,SAAA,CACf,aAAdsnK,IACCzJ,EAAAA,GAAAA,KAAC4G,GAAQ,CACP1D,MAAO+G,EACPpD,QAAUxC,IACR0C,EAAgB1C,GAChB2F,GAAkB,IAEpB/oL,KAAK,aAGM,WAAdwoL,IACCzJ,EAAAA,GAAAA,KAAC4G,GAAQ,CACP1D,MAAOgH,EACPjpL,KAAK,WAGM,WAAdwoL,IACCzJ,EAAAA,GAAAA,KAAC4G,GAAQ,CACPhD,OAAQuG,EACRlpL,KAAK,cAMV4oL,IACC7J,EAAAA,GAAAA,KAACwF,GAAU,CACTvE,QAASA,IAAM6I,GAAc,KAKhCC,GAAkBjD,IACjB9G,EAAAA,GAAAA,KAAC8I,GAAU,CACTzE,OAAQyC,EACR7F,QAASA,KACP+I,GAAkB,GAClBjD,EAAgB,aClJtBqD,GAAQrhE,GAAiB,QAAS,CACtC,CAAC,OAAQ,CAAEjgH,EAAG,4CAA6CjH,IAAK,WAChE,CAAC,SAAU,CAAE2nH,GAAI,IAAKC,GAAI,IAAKjiF,EAAG,IAAK3lC,IAAK,UAC5C,CAAC,OAAQ,CAAEiH,EAAG,6BAA8BjH,IAAK,WACjD,CAAC,OAAQ,CAAEiH,EAAG,4BAA6BjH,IAAK,aCJ5CwoL,GAAWthE,GAAiB,WAAY,CAC5C,CACE,OACA,CACEjgH,EAAG,wEACHjH,IAAK,WAGT,CAAC,WAAY,CAAE8nH,OAAQ,iBAAkB9nH,IAAK,WAC9C,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,IAAKC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,WACvD,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,IAAKC,GAAI,KAAMC,GAAI,KAAMloH,IAAK,WACvD,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKloH,IAAK,aCXjDyoL,GAAUvhE,GAAiB,UAAW,CAC1C,CAAC,OAAQ,CAAEjgH,EAAG,0BAA2BjH,IAAK,WAC9C,CAAC,OAAQ,CAAEiH,EAAG,yCAA0CjH,IAAK,WAC7D,CAAC,OAAQ,CAAEiH,EAAG,mBAAoBjH,IAAK,WACvC,CAAC,SAAU,CAAE2nH,GAAI,KAAMC,GAAI,KAAMjiF,EAAG,IAAK3lC,IAAK,aCJ1C0oL,GAAQxhE,GAAiB,QAAS,CACtC,CACE,OACA,CACEjgH,EAAG,oKACHjH,IAAK,WAGT,CACE,OACA,CACEiH,EAAG,sKACHjH,IAAK,aCZL2oL,GAAYzhE,GAAiB,YAAa,CAC9C,CACE,OACA,CACEjgH,EAAG,6DACHjH,IAAK,WAGT,CACE,OACA,CAAEiH,EAAG,gDAAiDjH,IAAK,aChB/D,MAAM4oL,GACOp9E,MAAO+5B,EAAasjD,EAAkBC,WAEzC,IAAI7oJ,QAAQG,GAAWP,WAAWO,EAAS,MAC1C,CACL0lI,MAAO,CACLijB,KAAM,CAAC,IAAK,IAAK,KACjBC,KAAM,CAAC,CAAC,IAAK,KAAM,CAAC,IAAK,KAAM,CAAC,IAAK,MACrCC,KAAM,CAAC,IAAK,IAAK,KACjBrsE,SAAU,UACVo4C,MAAO,SAETk0B,cAAe,CAAC,IAAK,IAAK,OAZ1BN,GAeoBp9E,MAAOs6D,EAAYojB,IAElCxrI,KAAKC,UAAU,CAACmoH,EAAOojB,IAmB3B,MAAMC,GAGX,kBAAcpmG,GAIZ,OAHKomG,GAAiB3rJ,WACpB2rJ,GAAiB3rJ,SAAW,IAAI2rJ,IAE3BA,GAAiB3rJ,QAC1B,CAQA,4BAAM4rJ,CAAuBC,EAAsBC,GACjD,IAEE,MAAMC,EAAgB,CACpBC,YAAan6K,KAAKo6K,oBAAoBJ,EAAU,GAChDK,UAAWJ,IAIP,MAAExjB,EAAK,cAAEojB,SAAwBN,GACrCW,EACA,2BACA,kCAGF,MAAO,CAAEzjB,QAAOojB,gBAClB,CAAE,MAAOxpL,GAEP,MADA6V,QAAQ7V,MAAM,oCAAqCA,GAC7C,IAAIL,MAAM,qCAClB,CACF,CAUA,uBAAMsqL,CACJC,EACAC,EACAC,EACAC,GAEA,IACE,MAAMR,EAAgB,CACpBl5G,SAAUhhE,KAAKo6K,oBAAoBG,EAAc,GACjDI,YAAa36K,KAAKo6K,oBAAoBI,EAAiB,GACvDI,cAAeH,EACfI,iBAAkBH,IAGd,MAAEjkB,EAAK,cAAEojB,SAAwBN,GACrCW,EACA,2BACA,kCAGF,MAAO,CAAEzjB,QAAOojB,gBAClB,CAAE,MAAOxpL,GAEP,MADA6V,QAAQ7V,MAAM,+BAAgCA,GACxC,IAAIL,MAAM,gCAClB,CACF,CASA,uBAAM8qL,CACJC,EACAC,EACAC,GAEA,IACE,MAAMf,EAAgB,CACpB/9K,EAAG4+K,EAAU/+K,WACbnF,EAAGmkL,EAAYnkL,EAAEmF,WACjBrE,EAAGqjL,EAAYrjL,EAAEqE,WACjBuG,EAAG04K,EAAej/K,aAGd,MAAEy6J,EAAK,cAAEojB,SAAwBN,GACrCW,EACA,8BACA,qCAGF,MAAO,CAAEzjB,QAAOojB,gBAClB,CAAE,MAAOxpL,GAEP,MADA6V,QAAQ7V,MAAM,+BAAgCA,GACxC,IAAIL,MAAM,gCAClB,CACF,CAQA,4BAAMkrL,CAAuBzkB,EAAgBojB,GAM3C,IACE,MAAMvX,QAAiBiX,GAA+B9iB,EAAOojB,GACvDsB,EAAO9sI,KAAKuZ,MAAM,IAAD3lD,OAAKqgK,EAAQ,MAEpC,MAAO,CACL7qK,EAAG0jL,EAAK,GACRxjL,EAAGwjL,EAAK,GACR9pL,EAAG8pL,EAAK,GACRC,aAAcD,EAAK,GAEvB,CAAE,MAAO9qL,GAEP,MADA6V,QAAQ7V,MAAM,uCAAwCA,GAChD,IAAIL,MAAM,sCAClB,CACF,CAQQoqL,mBAAAA,CAAoBz9K,EAAkBwrF,GAC5C,MAAM0hB,EAAmB,GACzB,IAAK,IAAIh1G,EAAI,EAAGA,EAAI8H,EAAKxI,OAAQU,GAAKszF,EAAW,CAC/C,MAAM1tC,EAAQ99C,EAAK6D,MAAM3L,EAAGA,EAAIszF,GAChC0hB,EAAOvrG,KAAK0B,KAAKq7K,gBAAgB5gI,GACnC,CACA,OAAOovD,CACT,CAOQwxE,eAAAA,CAAgB1+K,GACtB,OAAOrD,MAAMw7E,KAAKn4E,GACfwuD,IAAIs2F,GAAQA,EAAKzlJ,SAAS,IAAIi7I,SAAS,EAAG,MAC1CttI,KAAK,GACV,CAOA,kBAAM2xK,CAAa3+K,GAGjB,MAAM04C,QAAaj7C,OAAO6lF,OAAO5qF,OAAO,UAAWsH,GAEnD,OADkBrD,MAAMw7E,KAAK,IAAI9xB,WAAW3N,IAC3B8V,IAAIxzD,GAAKA,EAAEqE,SAAS,IAAIi7I,SAAS,EAAG,MAAMttI,KAAK,GAClE,EA3KWmwK,GACI3rJ,cAAQ,EAgLlB,MAAMotJ,GAOX,0BAAOC,CAAoBjB,EAA0BkB,GAInD,MAAMC,EAAe,IAAI14H,WAAWu3H,GAGpC,GAAkB,OAAdkB,QAAc,IAAdA,GAAAA,EAAgBE,aAClB,IAAK,MAAMC,KAAcH,EAAeE,aAAc,CACpD,MAAMjjF,EAA0B,GAAbkjF,EACbC,EAAWrhL,KAAKE,IAAIg+F,EAAa,GAAIgjF,EAAavnL,QAExD,QAAmC8lD,IAA/BwhI,EAAeK,YAEjB,IAAK,IAAIjnL,EAAI6jG,EAAY7jG,EAAIgnL,EAAUhnL,IACrC6mL,EAAa7mL,GAAK4mL,EAAeK,iBAInC,IAAK,IAAIjnL,EAAI6jG,EAAY7jG,EAAIgnL,EAAUhnL,IACrC6mL,EAAa7mL,GAAK,CAGxB,CAGF,OAAO6mL,CACT,CASA,iCAAOK,CACLtB,EACAC,EACAsB,GAEA,MAAO,CACLvB,eACAC,kBACAsB,qBACAr2K,UAAWC,KAAKsb,MAChB+6J,YAAY,EAEhB,EAMK,MAAMC,GAOX,wBAAOC,CAAkB9nL,EAAe2mL,GACtC,OAAOA,EAAYnkL,EAAIxC,EAAQ2mL,EAAYrjL,CAC7C,CASA,2BAAOykL,CACL/nL,EACA2mL,EACAC,GAEA,MAAMoB,EAAer8K,KAAKm8K,kBAAkB9nL,EAAO2mL,GACnD,OAAOxgL,KAAK2uD,IAAIkzH,EAAepB,GAAkB,IACnD,EAGF,MCzSaqB,GAA8D3pF,IAA6B,IAA5B,QAAEo9E,EAAO,UAAEwM,GAAW5pF,EAChG,MAAOijF,EAAcC,IAAmB72I,EAAAA,EAAAA,UAAsB,OACvDu0E,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChCw9I,EAAMC,IAAWz9I,EAAAA,EAAAA,UAA6D,WAC9E09I,EAAcC,IAAmB39I,EAAAA,EAAAA,UAAiB,IAwEnD49I,EAAezgF,gBAEb,IAAIvrE,QAAQG,GAAWP,WAAWO,EAAS,MACjD7qB,QAAQlC,IAAI,2BAAD/B,OAA4B4wK,EAAKp9K,KAAI,MAAAwM,OAAK4wK,EAAK1vK,KAAI,YACxD,KAANlB,OAAYzH,KAAK7G,SAASqI,SAAS,IAAIyZ,UAAU,EAAG,MAIhDonK,EAA0B1gF,MAAO2gF,EAAarmB,WAE5C,IAAI7lI,QAAQG,GAAWP,WAAWO,EAAS,MACjD7qB,QAAQlC,IAAI,gCAAiC,CAC3C84K,MACArmB,QACAsmB,KAAM,mDAIJC,EAAeC,GACfT,IAASS,GACJnO,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,oEAAmEt+F,UACvF69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,kDAGN,aAATitE,GAAoC,cAAbS,GAClBnO,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,4BAEzBu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qCAGxB,OACEu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnGs+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,gDAA+Ct+F,SAAA,EAC7Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uEAAsEt+F,UACnF69J,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,6BAEpBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,uBACjD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,wDAG1C69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASmqI,EACTX,QAAQ,QACRjsK,KAAK,KACLosG,UAAU,kCAAiCt+F,UAE3C69J,EAAAA,GAAAA,KAACvnI,GAAC,CAACgoE,UAAU,kBAKjBu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,OAAMt+F,UACnBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,WACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,eAE3C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,mCACfggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,eACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,gBAE3C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,mCACfggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,cACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,mBAMrC,WAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,qEAAoEt+F,SAAA,EACjF69J,EAAAA,GAAAA,KAACqK,GAAQ,CAAC5pE,UAAU,2CACpBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,iCACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,6EAGnC69J,EAAAA,GAAAA,KAAA,SACE/+K,KAAK,OACLqlL,SA1JY7sJ,IAAgD,IAAD20J,EACvE,MAAMrK,EAAyB,QAArBqK,EAAG30J,EAAMxR,OAAOi7J,aAAK,IAAAkL,OAAA,EAAlBA,EAAqB,GAC9BrK,IACFgD,EAAgBhD,GAChB4J,EAAQ,YAuJEltE,UAAU,SACV/5G,GAAG,aACH2nL,OAAO,0BAET5N,EAAAA,GAAAA,MAAA,SACE6N,QAAQ,aACR7tE,UAAU,wGAAuGt+F,SAAA,EAEjH69J,EAAAA,GAAAA,KAAC0C,GAAM,CAACjiE,UAAU,iBAAiB,oBAKtCqmE,IACC9G,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,iCAAgCt+F,UAC7Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAACqK,GAAQ,CAAC5pE,UAAU,2BACpBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAE2kK,EAAangL,QACpD85K,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,yBAAwBt+F,SAAA,EACjC2kK,EAAazyK,KAAO,MAAMimD,QAAQ,GAAG,kBAOjD0lH,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,4DAA2Dt+F,UACxEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6BAA4Bt+F,SAAA,EACzC69J,EAAAA,GAAAA,KAAC/1D,GAAW,CAACxJ,UAAU,mCACvBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,kCAAiCt+F,SAAC,kBAChD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SAAC,wIAI3Cs+J,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,yBAAwBt+F,SAAA,EACnC69J,EAAAA,GAAAA,KAAA,UAAA79J,SAAQ,cAAkB,6JAS5B,eAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,sFAAqFt+F,UAClG69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAEjBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,yBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,iFAGnCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,kDAAiDt+F,SAAA,EAC9Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iDAAgDt+F,SAAA,EAC7D69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,gBACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,uBAAsBt+F,SACnC2kK,GAAgBA,EAAazyK,KAAO,KAAO,MAAMimD,QAAQ,GAAK,MAAQ,uBAG3EmmH,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,aACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,0BAAyBt+F,SAAC,2BAMxC,cAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnG69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wFAEjBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,yBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,0DAG7ByrK,IACCnN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,sCAAqCt+F,SAAA,EAClD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SAAC,oBAC3C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yCAAwCt+F,SAAEyrK,UAMrD,aAATF,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,2CACvBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,yBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,+FAIlCyrK,IACCnN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,sCAAqCt+F,SAAA,EAClD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SAAC,oBAC3C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yCAAwCt+F,SAAEyrK,KACvD5N,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SAAC,yEASnDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,kCAAiCt+F,SAAA,EAC9C69J,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAASmqI,EAASX,QAAQ,UAASn+J,SAC/B,aAATurK,EAAsB,QAAU,WAEzB,WAATA,GAAqB5G,IACpB9G,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QArQKu2D,UACrB,GAAKy5E,EAAL,CAEA9H,GAAW,GACX2O,EAAQ,cAER,IAEE,MAAMzC,EAAW,IAAIh3H,iBAAiB4yH,EAAa32C,eAC7Co+C,EAAYvD,GAAiBpmG,cAC7BumG,QAAiBoD,EAAU/B,aAAatB,GAC9C2C,EAAgB1C,GAGhB,MAAM6C,QAAYF,EAAahH,GAC/B6G,EAAQ,aAGR,MAAM,MAAEhmB,EAAK,cAAEojB,SAAwBwD,EAAUtD,uBAAuBC,EAAUC,GAG5EqD,QAAuBD,EAAUnC,uBAAuBzkB,EAAOojB,SAG/DgD,EAAwBC,EAAKQ,GAEnCb,EAAQ,YACR3pE,GAAMQ,QAAQ,sDAGd,MAAMiqE,EAAgB,CACpB/nL,GAAIoQ,KAAKsb,MAAMllB,WACfs7K,QAAS1xK,KAAKsb,MAAMllB,WACpBvG,KAAMmgL,EAAangL,KACnB+nL,QAASvD,EACT6C,IAAKA,EACL1iF,OAAQ,aACRz0F,UAAWC,KAAKsb,MAChBq5I,MAAO,eACPkjB,eAAgBxD,EAChByD,QAASZ,EACTa,QAASL,GAILM,EAAevvI,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MAC3Ei2H,EAAat/K,KAAKi/K,GAClBh1H,aAAad,QAAQ,kBAAmBpZ,KAAKC,UAAUsvI,IAEvDrB,GAEF,CAAE,MAAOlsL,GACP6V,QAAQ7V,MAAM,6BAA8BA,GAC5CyiH,GAAMziH,MAAM,0CACZosL,EAAQ,SACV,CAAC,QACC3O,GAAW,EACb,CAxDyB,GAoQgBv6D,QAASA,EAAQtiG,SAAC,+BClRzD4sK,GAAgBhmE,GAAiB,gBAAiB,CACtD,CACE,OACA,CACEjgH,EAAG,4EACHjH,IAAK,WAGT,CAAC,OAAQ,CAAEiH,EAAG,UAAWjH,IAAK,WAC9B,CAAC,OAAQ,CAAEiH,EAAG,aAAcjH,IAAK,aCHtBmtL,GAAgDnrF,IAAuC,IAAtC,SAAEroF,EAAQ,QAAEylK,EAAO,UAAEwM,GAAW5pF,EAC5F,MAAO4gB,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChCw9I,EAAMC,IAAWz9I,EAAAA,EAAAA,UAAgE,cACjFy8I,EAAgBsC,IAAqB/+I,EAAAA,EAAAA,UAAS,CACnD28I,aAAc,GACdG,YAAa,EACbkC,YAAa,MAERtD,EAAiBuD,IAAsBj/I,EAAAA,EAAAA,UAAiB,IAEzDk/I,EAA4BA,CAACC,EAAczuK,KAC/CquK,EAAkB5nC,GAAI1jD,EAAAA,EAAA,GACjB0jD,GAAI,IACP,CAACgoC,GAAOzuK,MA2DN0uK,EAAkBjiF,gBAEhB,IAAIvrE,QAAQG,GAAWP,WAAWO,EAAS,MAC1C,IAAIiyB,WAAW,MAAMw0D,KAAK,IAG7B6mE,EAAyBliF,gBAEvB,IAAIvrE,QAAQG,GAAWP,WAAWO,EAAS,MAC3C,KAAN9uB,OAAYzH,KAAK7G,SAASqI,SAAS,IAAIyZ,UAAU,EAAG,MAGhD6oK,EAAgCniF,MAAO2gF,EAAarmB,WAElD,IAAI7lI,QAAQG,GAAWP,WAAWO,EAAS,MACjD7qB,QAAQlC,IAAI,sCAAuC,CAAE84K,MAAKrmB,WAGtD8nB,EAAiCpiF,MAAO2gF,EAAaznI,EAAcohH,KAEvE,MAAM+nB,EAAmB,CACvBhpL,GAAIoQ,KAAKsb,MAAMllB,WACfs7K,QAAS1xK,KAAKsb,MAAMllB,WACpBvG,KAAK,YAADwM,OAAcqI,EAAS7U,MAC3B+nL,QAASnoI,EACTynI,IAAKA,EACL1iF,OAAQ,aACRz0F,UAAWC,KAAKsb,MAChBq5I,MAAO,eACPkjB,eAAgBpoI,EAChBqoI,QAASZ,EACTa,QAASlnB,EACT/rB,WAAYpgI,EAASkzK,QACrBxB,mBAAoB,YACpBP,eAAgBA,EAChBgD,mBAAoBn0K,EAASgtK,SAIzBsG,EAAevvI,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MAC3Ei2H,EAAat/K,KAAKkgL,GAClBj2H,aAAad,QAAQ,kBAAmBpZ,KAAKC,UAAUsvI,IAGvD,MAAMc,EAAa,CACjBlpL,GAAG,UAADyM,OAAYu8K,EAAiBhpL,IAC/BmpL,WAAYH,EAAiBlH,QAC7BsH,aAAcJ,EAAiB/oL,KAC/BmmC,OAAQ,oBACRj2B,UAAW64K,EAAiB74K,UAC5BioK,KAAM4Q,EAAiBjkB,MACvBtgD,QAAQ,iDAADh4G,OAAmDosC,KAAKC,UAAUkwI,EAAiB/C,iBAC1F1rL,KAAM,iBACNisL,mBAAoB,YACpBtxC,WAAY8zC,EAAiB9zC,WAC7B+zC,mBAAoBD,EAAiBC,mBACrCppI,KAAMmpI,EAAiBhB,QACvBV,IAAK0B,EAAiB1B,KAIlB+B,EAAgBxwI,KAAKuZ,MAAMW,aAAaZ,QAAQ,qBAAuB,MAC7Ek3H,EAAcvgL,KAAKogL,GACnBn2H,aAAad,QAAQ,mBAAoBpZ,KAAKC,UAAUuwI,IAGxDn4K,OAAO2X,cAAc,IAAIygK,YAAY,0BACrCp4K,OAAO2X,cAAc,IAAIygK,YAAY,0BAErC54K,QAAQlC,IAAI,mDAAoDw6K,GAChEt4K,QAAQlC,IAAI,gCAAiC06K,IAGzC1B,EAAeC,GACfT,IAASS,GACJnO,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,oEAAmEt+F,UACvF69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,kDAGN,aAATitE,GAAoC,cAAbS,GAClBnO,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,4BAEzBu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qCAGxB,OACEu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnGs+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,gDAA+Ct+F,SAAA,EAC7Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,yEAAwEt+F,UACrF69J,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,+BAEpBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,iCACjD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,wDAG1C69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASmqI,EACTX,QAAQ,QACRjsK,KAAK,KACLosG,UAAU,kCAAiCt+F,UAE3C69J,EAAAA,GAAAA,KAACvnI,GAAC,CAACgoE,UAAU,kBAKjBu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,OAAMt+F,UACnBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,cACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,kBAE3C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,mCACfggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,eACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,gBAE3C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,mCACfggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,cACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,mBAMrC,cAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EAExBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iCAAgCt+F,SAAA,EAC7C69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,8BAA6Bt+F,SAAC,uBAC5C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAE3G,EAAS7U,QAChDq5K,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,mCAAkCt+F,SAAE3G,EAASkzK,cAI5DjO,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxB69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAC,6BAEvCs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,gDAGjE69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,OACLulL,YAAY,cACZ5lK,MAAO+rK,EAAeE,aAAahyK,KAAK,KACxCyrK,SAAWv9K,IACT,MAAMgyG,EAAShyG,EAAEkf,OAAOrH,MAAMtE,MAAM,KAAK+/C,IAAIp4D,GAAKmsD,SAASnsD,EAAE2a,SAAS4wC,OAAOrnD,IAAM0U,MAAM1U,IACzFinL,EAA0B,eAAgBr0E,UAKhD0lE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,+BAGjE69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,SACL2K,IAAI,IACJD,IAAI,MACJiV,MAAO+rK,EAAeK,YACtB1G,SAAWv9K,GAAMqmL,EAA0B,cAAeh/H,SAASrnD,EAAEkf,OAAOrH,cAIhF6/J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,mCAGjE69J,EAAAA,GAAAA,KAAA,YACEv/D,UAAU,0FACVwvE,KAAM,EACNzJ,YAAY,yEACZ5lK,MAAO+rK,EAAeuC,YACtB5I,SAAWv9K,GAAMqmL,EAA0B,cAAermL,EAAEkf,OAAOrH,gBAMzEo/J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,4DAA2Dt+F,UACxEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6BAA4Bt+F,SAAA,EACzC69J,EAAAA,GAAAA,KAAC+O,GAAa,CAACtuE,UAAU,mCACzBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,kCAAiCt+F,SAAC,iBAChD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,oKAUtC,eAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wFAAuFt+F,UACpG69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,yFAEjBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,0BACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,yEAMxB,cAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnG69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wFAEjBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,2BACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,sDAG7BypK,IACCnL,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,sCAAqCt+F,SAAA,EAClD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SAAC,gCAC3C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yCAAwCt+F,SAAEypK,UAMrD,aAAT8B,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,2CACvBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,wBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,iGAGlCypK,IACCnL,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,sCAAqCt+F,SAAA,EAClD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SAAC,gCAC3C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yCAAwCt+F,SAAEypK,WAO/DnL,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,kCAAiCt+F,SAAA,EAC9C69J,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAASmqI,EAASX,QAAQ,UAASn+J,SAC/B,aAATurK,EAAsB,QAAU,WAEzB,cAATA,IACC1N,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAnTYu2D,UAC5B2xE,GAAW,GACX2O,EAAQ,cAER,IAEE,MAAMlC,QAAqB6D,EAAgB9zK,EAASwyK,KACpDL,EAAQ,aAGR,MAAMf,EAAeH,GAAoBC,oBAAoBjB,EAAc,CACzEoB,aAAcF,EAAeE,aAC7BG,YAAaL,EAAeK,cAIxBuB,EAAYvD,GAAiBpmG,cAC7B+mG,QAAqB4C,EAAU/B,aAAaf,GAC5CG,QAAwB2C,EAAU/B,aAAaI,GACrDuC,EAAmBvD,GAGnB,MAAM,MAAEjkB,EAAK,cAAEojB,SAAwBwD,EAAU/C,kBAC/CC,EACAmB,EACAjB,EACAC,GAII4C,QAAuBD,EAAUnC,uBAAuBzkB,EAAOojB,GAG/DmF,QAAoBX,EAAuB3C,SAG3C4C,EAA8BU,EAAa1B,SAG3CiB,EAA+BS,EAAatE,EAAiB4C,GAEnEb,EAAQ,YACR3pE,GAAMQ,QAAQ,qDACdipE,GAEF,CAAE,MAAOlsL,GACP6V,QAAQ7V,MAAM,4BAA6BA,GAC3CyiH,GAAMziH,MAAM,gDACZosL,EAAQ,YACV,CAAC,QACC3O,GAAW,EACb,GAgQgDv6D,QAASA,EAAQtiG,SAAC,yCCpUzDguK,GAAkDtsF,IAAuC,IAAtC,SAAEroF,EAAQ,QAAEylK,EAAO,UAAEwM,GAAW5pF,EAC9F,MAAM,KAAEi7E,GAASF,MACVn6D,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChCw9I,EAAMC,IAAWz9I,EAAAA,EAAAA,UAA6C,YAC9DkgJ,EAAkBC,IAAuBngJ,EAAAA,EAAAA,UAAS,CACvDw+B,QAAS,GACT4hH,aAAc,GACdC,SAAU,GACVC,cAAe,MAEVC,EAAiBC,IAAsBxgJ,EAAAA,EAAAA,UAI3C,CACD23D,SAAU,EACV8oF,UAAW,EACXjiH,QAAS,KA+JLkiH,EAAmBvjF,gBAEjB,IAAIvrE,QAAQG,GAAWP,WAAWO,EAAS,MAC3C,KAAN9uB,OAAYzH,KAAK7G,SAASqI,SAAS,IAAIyZ,UAAU,EAAG,KAAGxT,OAAGzH,KAAK7G,SAASqI,SAAS,IAAIyZ,UAAU,EAAG,MAkBpG,OACEq5J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnGs+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,gDAA+Ct+F,SAAA,EAC7Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wEAAuEt+F,UACpF69J,EAAAA,GAAAA,KAACsK,GAAO,CAAC7pE,UAAU,8BAErBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,0BACjD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,iEAG1C69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASmqI,EACTX,QAAQ,QACRjsK,KAAK,KACLosG,UAAU,kCAAiCt+F,UAE3C69J,EAAAA,GAAAA,KAACvnI,GAAC,CAACgoE,UAAU,kBAKjBggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,sCAAqCt+F,SAAA,EAClD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,8BAA6Bt+F,SAAC,cAC5C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAE3G,EAAS7U,QAChDq5K,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,mCAAkCt+F,SAAE3G,EAASkzK,aAIlD,YAAThB,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,kDAGjE69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,OACLulL,YAAY,kCACZ5lK,MAAOwvK,EAAiB1hH,QAAQ7zD,KAAK,MACrCyrK,SAAWv9K,IACT,MAAMspK,EAAYtpK,EAAEkf,OAAOrH,MAAMtE,MAAM,KAAK+/C,IAAI8wE,GAAQA,EAAKvuH,QAAQ4wC,OAAO29E,GAAQA,GACpFkjD,EAAoBhpC,GAAI1jD,EAAAA,EAAA,GAAU0jD,GAAI,IAAE34E,QAAS2jG,YAKvDoO,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,oCAGjE69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,SACLysL,KAAK,QACLlH,YAAY,MACZ5lK,MAAOwvK,EAAiBE,aACxBhK,SAAWv9K,GAAMsnL,EAAoBhpC,GAAI1jD,EAAAA,EAAA,GAAU0jD,GAAI,IAAEipC,aAAcvnL,EAAEkf,OAAOrH,eAIpF6/J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,wBAGjE69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,iBACL2f,MAAOwvK,EAAiBG,SACxBjK,SAAWv9K,GAAMsnL,EAAoBhpC,GAAI1jD,EAAAA,EAAA,GAAU0jD,GAAI,IAAEkpC,SAAUxnL,EAAEkf,OAAOrH,eAIhF6/J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,+BAGjE69J,EAAAA,GAAAA,KAAA,YACEv/D,UAAU,gFACVwvE,KAAM,EACNzJ,YAAY,sCACZ5lK,MAAOwvK,EAAiBI,cACxBlK,SAAWv9K,GAAMsnL,EAAoBhpC,GAAI1jD,EAAAA,EAAA,GAAU0jD,GAAI,IAAEmpC,cAAeznL,EAAEkf,OAAOrH,eAKrFo/J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,0DAAyDt+F,UACtEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6BAA4Bt+F,SAAA,EACzC69J,EAAAA,GAAAA,KAAC/1D,GAAW,CAACxJ,UAAU,kCACvBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,iCAAgCt+F,SAAC,2BAC/C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,wBAAuBt+F,SAAC,6JAWrC,YAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,cAAat+F,SAAA,EAC1B69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,wBACpD69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,4CAA2Ct+F,UACxD69J,EAAAA,GAAAA,KAAA,OACEv/D,UAAU,4DACVl6F,MAAO,CAAE+P,MAAM,GAADnjB,OAAMs9K,EAAgBE,UAAYF,EAAgB5oF,SAAY,IAAG,WAGnF44E,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,yBAAwBt+F,SAAA,CAClCsuK,EAAgBE,UAAU,OAAKF,EAAgB5oF,SAAS,+BAI7Dm4E,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,YAAWt+F,SACvBsuK,EAAgB/hH,QAAQrS,IAAI,CAAC0S,EAAQp5D,KAAK,IAAAk7K,EAAA,OACzCpQ,EAAAA,GAAAA,MAAA,OAAiBhgE,UAAU,mEAAkEt+F,SAAA,EAC3Fs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAS,yDAAAttG,OACZ47D,EAAOypD,OAAS,iCAAmC,+BAClDr2G,SACA4sD,EAAOypD,QAASwnD,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,aAAeu/D,EAAAA,GAAAA,KAACoK,GAAK,CAAC3pE,UAAU,eAE1EggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACEs+J,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,iCAAgCt+F,SAAA,CAC1C4sD,EAAO8oD,QAAQnmH,MAAM,EAAG,GAAG,MAAIq9D,EAAO8oD,QAAQnmH,OAAO,OAExDsuK,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAClC4sD,EAAOypD,OAAS,SAAW,kBAIjCzpD,EAAOypD,SACNioD,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mCAAkCt+F,SAAA,CAC9B,QAD8B0uK,EAC9C9hH,EAAOnN,iBAAS,IAAAivH,OAAA,EAAhBA,EAAkBn/K,MAAM,EAAG,IAAI,WAlB5BiE,OA/HRm7K,MACd,GAAS,OAAJhS,QAAI,IAAJA,IAAAA,EAAMjnD,QAAS,OAAO,EAC3B,MAAM9oD,EAAS0hH,EAAgB/hH,QAAQu1C,KAAKhgH,IAAC,IAAAm+K,EAAA,OAC3Cn+K,EAAE4zH,QAAQr7G,iBAA8B,QAAjB4lK,EAAKtD,EAAKjnD,eAAO,IAAAuqD,OAAA,EAAZA,EAAc5lK,iBAE5C,OAAOuyD,IAAWA,EAAOypD,QAmJhBs4D,KACCrQ,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4DAA2Dt+F,SAAA,EACxEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mCAAkCt+F,SAAA,EAC/C69J,EAAAA,GAAAA,KAACsK,GAAO,CAAC7pE,UAAU,4BACnBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,6BAA4Bt+F,SAAC,gCAE7C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SAAC,mFAG3C69J,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAlQKu2D,UACzB,GAAS,OAAJyxE,QAAI,IAAJA,GAAAA,EAAMjnD,QAAX,CAKAmnD,GAAW,GAEX,IAEE,MAAMO,EAAaA,KACV31K,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYmnL,mBAAqB,yBAIpCvN,EAAiBA,KACrB,MAAM1E,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,IAAKimH,EAAKK,IACR,MAAM,IAAIj+K,MAAM,sDAElB,MAAO,CACL,cAAgB,UAADiS,OAAY2rK,EAAKK,KAChC,eAAgB,qBAKdv9G,QAAkBgvH,EAAiBp1K,EAASkzK,SAG5C/5C,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,eAAApsK,OAAcqI,EAASgtK,QAAO,SAAS,CACjF90E,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU,CACnBwxI,cAAelS,EAAKjnD,QACpBj2D,UAAWA,MAIf,IAAK+yE,EAASz6F,GACZ,MAAM,IAAIh5C,MAAM,4BAADiS,OAA6BwhI,EAASrpC,eAGjDqpC,EAASirC,OAGf8Q,EAAmBrpC,IACjB,MAAM4pC,EAAiB5pC,EAAK34E,QAAQrS,IAAI0S,IAAM,IAAAmzG,EAAA,OAC5CnzG,EAAO8oD,QAAQr7G,iBAA8B,QAAjB0lK,EAAKpD,EAAKjnD,eAAO,IAAAqqD,OAAA,EAAZA,EAAc1lK,eAAamnF,EAAAA,EAAA,GACnD50B,GAAM,IAAEypD,QAAQ,EAAM52D,cAC3BmN,IAGA4hH,EAAYM,EAAezhI,OAAOvrD,GAAKA,EAAEu0H,QAAQnzH,OAEvD,OAAAs+F,EAAAA,EAAA,GACK0jD,GAAI,IACPspC,YACAjiH,QAASuiH,MAITR,EAAgBE,UAAY,GAAKF,EAAgB5oF,UACnD8lF,EAAQ,YACR3pE,GAAMQ,QAAQ,iDAEdR,GAAMQ,QAAQ,oCAGlB,CAAE,MAAOjjH,GACP6V,QAAQ7V,MAAM,0BAA2BA,GACzCyiH,GAAMziH,MAAM,mCACd,CAAC,QACCy9K,GAAW,EACb,CAtEA,MAFEh7D,GAAMziH,MAAM,uCAgQmCkjH,QAASA,EAAQtiG,SAAC,uBAvK1D,OAAJ28J,QAAI,IAAJA,GAAAA,EAAMjnD,SACJu4D,EAAiB1hH,QAAQ85B,KAAK2kC,IAAI,IAAAg1C,EAAA,OACvCh1C,EAAK3wH,iBAA8B,QAAjB2lK,EAAKrD,EAAKjnD,eAAO,IAAAsqD,OAAA,EAAZA,EAAc3lK,oBA4K7BwjK,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,4DAA2Dt+F,UACxE69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,kFASpC,aAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,2CACvBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,wBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,iFAGlCiuK,EAAiBE,eAChB7P,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iCAAgCt+F,SAAA,EAC7C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,6BACtCs+J,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,mCAAkCt+F,SAAA,CAAEiuK,EAAiBE,aAAa,iBAOvF7P,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,kCAAiCt+F,SAAA,EAC9C69J,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAASmqI,EAASX,QAAQ,UAASn+J,SAC/B,aAATurK,EAAsB,QAAU,WAEzB,YAATA,IACC1N,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAjXcu2D,UAC9B2xE,GAAW,GAEX,IAEE,GAAwC,IAApCoR,EAAiB1hH,QAAQrpE,OAE3B,YADA2+G,GAAMziH,MAAM,sCAId,GAAI6uL,EAAiBG,UAAY,IAAIz5K,KAAKs5K,EAAiBG,WAAa,IAAIz5K,KAE1E,YADAktG,GAAMziH,MAAM,kCAKd,MAAMg+K,EAAaA,KACV31K,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYmnL,mBAAqB,yBAIpCvN,EAAiBA,KACrB,MAAM1E,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,IAAKimH,EAAKK,IACR,MAAM,IAAIj+K,MAAM,sDAElB,MAAO,CACL,cAAgB,UAADiS,OAAY2rK,EAAKK,KAChC,eAAgB,qBAKdxqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,eAAApsK,OAAcqI,EAASgtK,QAAO,sBAAsB,CAC9F90E,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU,CACnBkvB,QAAS0hH,EAAiB1hH,QAAQrS,IAAI8wE,IAAI,CACxCtV,QAASsV,EACTxmI,KAAM,GACNiyB,MAAO,MAETs4J,aAAiB,OAAJpS,QAAI,IAAJA,OAAI,EAAJA,EAAMjnD,UAAW,GAC9Bi4D,aAAct0K,EAAS7U,KACvBmP,QAASs6K,EAAiBI,eAAiB,4BAC3CW,UAAWf,EAAiBG,UAAY,IAAIz5K,KAAKA,KAAKsb,MAAQ,QAAyBwvJ,kBAI3F,IAAKjtC,EAASz6F,GACZ,MAAM,IAAIh5C,MAAM,iCAADiS,OAAkCwhI,EAASrpC,eAGtDqpC,EAASirC,OAEf8Q,EAAmB,CACjB7oF,SAAUuoF,EAAiB1hH,QAAQrpE,OACnCsrL,UAAW,EACXjiH,QAAS0hH,EAAiB1hH,QAAQrS,IAAI8wE,IAAI,CAAOtV,QAASsV,EAAM3U,QAAQ,OAG1Em1D,EAAQ,WACR3pE,GAAMQ,QAAQ,uCAEhB,CAAE,MAAOjjH,GACP6V,QAAQ7V,MAAM,+BAAgCA,GAC9CyiH,GAAMziH,MAAM,iDACd,CAAC,QACCy9K,GAAW,EACb,GA4SkDv6D,QAASA,EAAQtiG,SAAC,gCC3YlEivK,GAAYroE,GAAiB,YAAa,CAC9C,CAAC,OAAQ,CAAEjgH,EAAG,aAAcjH,IAAK,WACjC,CAAC,OAAQ,CAAEiH,EAAG,WAAYjH,IAAK,WAC/B,CAAC,OAAQ,CAAEiH,EAAG,WAAYjH,IAAK,WAC/B,CAAC,OAAQ,CAAEiH,EAAG,WAAYjH,IAAK,aCJ3BwvL,GAAMtoE,GAAiB,MAAO,CAClC,CACE,UACA,CAAEY,OAAQ,yCAA0C9nH,IAAK,aCEhDyvL,GAAsDztF,IAAuC,IAAtC,SAAEroF,EAAQ,QAAEylK,EAAO,UAAEwM,GAAW5pF,EAClG,MAAO4gB,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChCw9I,EAAMC,IAAWz9I,EAAAA,EAAAA,UAAgE,cACjFqhJ,EAAgBC,IAAqBthJ,EAAAA,EAAAA,UAAS,CACnDuhJ,UAAW,oBACXxF,UAAW,IACXC,YAAa,CAAEnkL,EAAG,EAAGc,EAAG,GACxBsjL,eAAgB,QAEXuF,EAAgBC,IAAqBzhJ,EAAAA,EAAAA,UAKlC,MAEJ0hJ,EAA6BA,CAAC7nF,EAAenpF,KACjD4wK,EAAkBnqC,GAAI1jD,EAAAA,EAAA,GACjB0jD,GAAI,IACP,CAACt9C,GAAQnpF,MA4DPixK,EAA2BxkF,MAAOqhF,EAAiB/mB,WAEjD,IAAI7lI,QAAQG,GAAWP,WAAWO,EAAS,MACjD7qB,QAAQlC,IAAI,kCAAmC,CAAEw5K,UAAS/mB,WAGtDumB,EAAeC,GACfT,IAASS,GACJnO,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,oEAAmEt+F,UACvF69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,kDAGN,aAATitE,GAAoC,cAAbS,GAClBnO,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,4BAEzBu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qCAGxB,OACEu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnGs+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,gDAA+Ct+F,SAAA,EAC7Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,yEAAwEt+F,UACrF69J,EAAAA,GAAAA,KAACuK,GAAK,CAAC9pE,UAAU,+BAEnBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,mBACjD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,8DAG1C69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASmqI,EACTX,QAAQ,QACRjsK,KAAK,KACLosG,UAAU,kCAAiCt+F,UAE3C69J,EAAAA,GAAAA,KAACvnI,GAAC,CAACgoE,UAAU,kBAKjBu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,OAAMt+F,UACnBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,cACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,kBAE3C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,mCACfggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,eACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,gBAE3C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,mCACfggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,cACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,mBAMrC,cAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EAExBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iCAAgCt+F,SAAA,EAC7C69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,8BAA6Bt+F,SAAC,cAC5C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAE3G,EAAS7U,QAChDq5K,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,mCAAkCt+F,SAAE3G,EAASkzK,cAI5DjO,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxB69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAC,4BAEvCs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,gBAGjEs+J,EAAAA,GAAAA,MAAA,UACEhgE,UAAU,wEACV7/F,MAAO2wK,EAAeE,UACtBnL,SAAWv9K,GAAM6oL,EAA2B,YAAa7oL,EAAEkf,OAAOrH,OAAOuB,SAAA,EAEzE69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,oBAAmBuB,SAAC,oCAClC69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,iBAAgBuB,SAAC,6BAC/B69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,YAAWuB,SAAC,8BAI9Bs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yBAAwBt+F,SAAA,EACrCs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,qBAGjE69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,SACLysL,KAAK,MACL9sK,MAAO2wK,EAAetF,UACtB3F,SAAWv9K,GAAM6oL,EAA2B,YAAa7oL,EAAEkf,OAAOrH,aAGtE6/J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,yBAGjE69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,SACLysL,KAAK,MACL9sK,MAAO2wK,EAAepF,eACtB7F,SAAWv9K,GAAM6oL,EAA2B,iBAAkB7oL,EAAEkf,OAAOrH,gBAK7E6/J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yBAAwBt+F,SAAA,EACrCs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,yBAGjE69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,SACLysL,KAAK,MACL9sK,MAAO2wK,EAAerF,YAAYnkL,EAClCu+K,SAAWv9K,GAAM6oL,EAA2B,cAAajuF,EAAAA,EAAA,GACpD4tF,EAAerF,aAAW,IAC7BnkL,EAAGqsE,WAAWrrE,EAAEkf,OAAOrH,gBAI7B6/J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,gDAA+Ct+F,SAAC,yBAGjE69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,SACLysL,KAAK,MACL9sK,MAAO2wK,EAAerF,YAAYrjL,EAClCy9K,SAAWv9K,GAAM6oL,EAA2B,cAAajuF,EAAAA,EAAA,GACpD4tF,EAAerF,aAAW,IAC7BrjL,EAAGurE,WAAWrrE,EAAEkf,OAAOrH,sBAQjC6/J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,0DAAyDt+F,SAAA,EACtEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mCAAkCt+F,SAAA,EAC/C69J,EAAAA,GAAAA,KAACoR,GAAS,CAAC3wE,UAAU,2BACrBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,4BAA2Bt+F,SAAC,sBAE5Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wBAAuBt+F,SAAA,EACpCs+J,EAAAA,GAAAA,MAAA,KAAAt+J,SAAA,CAAG,cAAYovK,EAAerF,YAAYnkL,EAAE,OAAKwpL,EAAerF,YAAYrjL,MAC5E43K,EAAAA,GAAAA,MAAA,KAAAt+J,SAAA,CAAG,cAAYovK,EAAetF,cAC9BxL,EAAAA,GAAAA,MAAA,KAAAt+J,SAAA,CAAG,wBAAsBovK,EAAepF,mBACxC1L,EAAAA,GAAAA,MAAA,KAAAt+J,SAAA,CAAG,0BAAwBirK,GAAeC,kBACxCj5G,WAAWm9G,EAAetF,YAAc,EACxCsF,EAAerF,uBAMrBlM,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,8DAA6Dt+F,UAC1Es+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6BAA4Bt+F,SAAA,EACzC69J,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,oCAClBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,mBACjD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,0BAAyBt+F,SAAC,wJAUvC,eAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wFAAuFt+F,UACpG69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,yFAEjBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,yBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,mEAMxB,cAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnG69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wFAEjBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,2BACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,uDAMxB,aAATurK,GAAuBgE,IACtBjR,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,cAAat+F,SAAA,EAC1B69J,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,2CACvBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,2BACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,gFAKhCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iCAAgCt+F,SAAA,EAC7C69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,8BAA6Bt+F,SAAC,sBAC5Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oBAAmBt+F,SAAA,EAChCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,uBAAsBt+F,SAAA,EACnC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,aAAYt+F,SAAEuvK,EAAensL,YAE/Ck7K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,uBAAsBt+F,SAAA,EACnC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,aACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,aAAYt+F,SAAEuvK,EAAezsL,aAE/Cw7K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,uBAAsBt+F,SAAA,EACnC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjCs+J,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,aAAYt+F,SAAA,CAAC,OAAKuvK,EAAexF,YAAYnkL,EAAE,OAAK2pL,EAAexF,YAAYrjL,SAEjG43K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,uBAAsBt+F,SAAA,EACnC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,iBACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,+BAA8Bt+F,SAAEuvK,EAAeI,sBAKrE9R,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,4DAA2Dt+F,UACxEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAACqR,GAAG,CAAC5wE,UAAU,4BACfggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,kCAAiCt+F,SAAC,2BAChD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,uJAWhDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,kCAAiCt+F,SAAA,EAC9C69J,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAASmqI,EAASX,QAAQ,UAASn+J,SAC/B,aAATurK,EAAsB,QAAU,WAEzB,cAATA,IACC1N,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAzTQu2D,UACxB2xE,GAAW,GACX2O,EAAQ,cAER,IAEE,MAAM1B,EAAY73G,WAAWm9G,EAAetF,WACtCE,EAAiB/3G,WAAWm9G,EAAepF,gBAG3CoB,EAAeH,GAAeC,kBAAkBpB,EAAWsF,EAAerF,aAKhF,IAFgBkB,GAAeE,qBAAqBrB,EAAWsF,EAAerF,YAAaC,GAGzF,MAAM,IAAIjrL,MAAM,uCAGlBysL,EAAQ,aAGR,MAAMY,EAAYvD,GAAiBpmG,eAC7B,MAAE+iF,EAAK,cAAEojB,SAAwBwD,EAAUvC,kBAC/CC,EACAsF,EAAerF,YACfC,GAIIqC,QAAuBD,EAAUnC,uBAAuBzkB,EAAOojB,SAG/D8G,EAAyBr2K,EAASkzK,QAASF,GAEjDmD,EAAkB,CAChBpsL,MAAO0mL,EACPhnL,OAAQsoL,EACRrB,YAAaqF,EAAerF,YAC5B4F,UAAU,KAAD3+K,OAAOzH,KAAK7G,SAASqI,SAAS,IAAIyZ,UAAU,EAAG,OAG1DgnK,EAAQ,YACR3pE,GAAMQ,QAAQ,kCACdipE,GAEF,CAAE,MAAOlsL,GACP6V,QAAQ7V,MAAM,+BAAgCA,GAC9CyiH,GAAMziH,MAAM,yCACZosL,EAAQ,YACV,CAAC,QACC3O,GAAW,EACb,GAqQ4Cv6D,QAASA,EAAQtiG,SAAC,+BCrV5D4vK,GAAgBhpE,GAAiB,gBAAiB,CACtD,CACE,OACA,CACEjgH,EAAG,gEACHjH,IAAK,aCLLmwL,GAAejpE,GAAiB,eAAgB,CACpD,CACE,OACA,CACEjgH,EAAG,2DACHjH,IAAK,WAGT,CAAC,WAAY,CAAE8nH,OAAQ,iBAAkB9nH,IAAK,WAC9C,CAAC,OAAQ,CAAE+nH,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,IAAKloH,IAAK,aCI5CowL,GAA8BA,KACzC,MAAM,KAAEnT,GAASF,MACVsT,EAAmBC,IAAwBjiJ,EAAAA,EAAAA,UAA6B,KACxEu0E,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChC3uC,EAAO09K,IAAY/uI,EAAAA,EAAAA,UAAwB,MAG5CqvI,EAAaA,KACV31K,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYmnL,mBAAqB,yBAIpCvN,EAAiBA,KACrB,MAAM1E,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,IAAKimH,EAAKK,IACR,MAAM,IAAIj+K,MAAM,sDAElB,MAAO,CACL,cAAgB,UAADiS,OAAY2rK,EAAKK,KAChC,eAAgB,qBAKdiT,GAAwB3iJ,EAAAA,EAAAA,aAAY49D,UACxC2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,qCAAApsK,QAAwC,OAAJ2rK,QAAI,IAAJA,OAAI,EAAJA,EAAMjnD,UAAW,IAAM,CACrG9mD,QAASyyG,MAGX,IAAK7uC,EAASz6F,GACZ,MAAM,IAAIh5C,MAAM,sCAADiS,OAAuCwhI,EAASrpC,SAGjE,MAAMz9F,QAAa8mI,EAASirC,OAC5BuS,EAAqBtkL,EAAKqkL,kBAC5B,CAAE,MAAO3wL,GACP6V,QAAQ7V,MAAM,oCAAqCA,GACnD09K,EAAS,oCACX,CAAC,QACCD,GAAW,EACb,GACC,CAAK,OAAJF,QAAI,IAAJA,OAAI,EAAJA,EAAMjnD,WA2DVloF,EAAAA,EAAAA,WAAU,KACRyiJ,KACC,CAACA,IAEJ,MAAMC,EAAkB/mF,IACtB,OAAQA,GACN,IAAK,UACH,MAAO,mCACT,IAAK,SACH,MAAO,iCACT,IAAK,UACH,MAAO,6BAGT,QACE,MAAO,iCAIPgnF,EAAiBhnF,IACrB,OAAQA,GACN,IAAK,UACH,OAAO00E,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,4BAC1B,IAAK,SACH,OAAOu/D,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,2BAChC,IAAK,UACH,OAAOu/D,EAAAA,GAAAA,KAAC+O,GAAa,CAACtuE,UAAU,yBAClC,IAAK,WACH,OAAOu/D,EAAAA,GAAAA,KAAC+O,GAAa,CAACtuE,UAAU,0BAClC,QACE,OAAOu/D,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,4BAIxB4mE,EAAcC,GACX,IAAIxwK,KAAKwwK,GAAYC,mBAAmB,QAAS,CACtD/zG,KAAM,UACN36C,MAAO,QACP2uJ,IAAK,UACLC,KAAM,UACNC,OAAQ,YAIN6K,EAAapB,GACVr6K,KAAKsb,MAAQ++J,EAGtB,OAAI1sE,GAAwC,IAA7BytE,EAAkB7sL,QAE7B26K,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wCAAuCt+F,UACpD69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,sFAKjBl/G,GAEAk/K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAC+O,GAAa,CAACtuE,UAAU,yCACzBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,sCACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAE5gB,KACpCy+K,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAASs7I,EAAsBjwK,SAAC,kBAQ5Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EAExBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChDs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,gCAA+Bt+F,SAAC,wBAC9C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,6CAEhC69J,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAASs7I,EAAuB9R,QAAQ,UAASn+J,SAAC,eAM9B,IAA7B+vK,EAAkB7sL,QACjBo7K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oBAAmBt+F,SAAA,EAChC69J,EAAAA,GAAAA,KAACqK,GAAQ,CAAC5pE,UAAU,2CACpBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,2BACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,qEAKhC69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,YAAWt+F,SACvB+vK,EAAkB71H,IAAKi1E,IACtB0uC,EAAAA,GAAAA,KAACc,GAAI,CAAkBrgE,UAAU,0CAAyCt+F,UACxEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,MAAKt+F,SAAA,EAClBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wCAAuCt+F,SAAA,EACpDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qEAAoEt+F,UACjF69J,EAAAA,GAAAA,KAACqK,GAAQ,CAAC5pE,UAAU,8BAEtBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAEmvH,EAAQw+C,gBAChDrP,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,yBAAwBt+F,SAAA,CAAC,gBACtBmvH,EAAQ4/C,YAAYx/K,MAAM,EAAG,GAAG,MAAI4/H,EAAQ4/C,YAAYx/K,OAAO,aAInF+uK,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzCmwK,EAAchhD,EAAQhmC,SACvB00E,EAAAA,GAAAA,KAAA,QAAMv/D,UAAS,yCAAAttG,OAA2Ck/K,EAAe/gD,EAAQhmC,SAAUnpF,SACxFmvH,EAAQhmC,gBAKfm1E,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7Bs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,sCAAqCt+F,SAAA,EAClD69J,EAAAA,GAAAA,KAAC+R,GAAa,CAACtxE,UAAU,4BACzBu/D,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAEmvH,EAAQx7H,cAG5C2qK,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,qDAAoDt+F,SAAA,EACjEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAC2G,GAAQ,CAAClmE,UAAU,aACpBggE,EAAAA,GAAAA,MAAA,QAAAt+J,SAAA,CAAM,aAAWklK,EAAW/1C,EAAQ3sB,kBAEtC87D,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,aACjBggE,EAAAA,GAAAA,MAAA,QAAAt+J,SAAA,CAAM,WACKklK,EAAW/1C,EAAQ6/C,UAAUjkL,qBAK3CqlL,EAAUjhD,EAAQ6/C,YAAiC,YAAnB7/C,EAAQhmC,SACvCm1E,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mDAAkDt+F,SAAA,EAC/D69J,EAAAA,GAAAA,KAAC+O,GAAa,CAACtuE,UAAU,aACzBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAM,6CAKQ,YAAnBmvH,EAAQhmC,SAAyBinF,EAAUjhD,EAAQ6/C,aAClD1Q,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7Bs+J,EAAAA,GAAAA,MAACJ,GAAM,CACLvpI,QAASA,IA1MRu2D,WACnB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,eAAApsK,OAAc08K,EAAU,SAAS,CAC3En8E,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU,CACnBwxI,eAAmB,OAAJlS,QAAI,IAAJA,OAAI,EAAJA,EAAMjnD,UAAW,GAChCj2D,UAAU,aAADzuD,OAAe2D,KAAKsb,WAIjC,IAAKuiH,EAASz6F,GACZ,MAAM,IAAIh5C,MAAM,4BAADiS,OAA6BwhI,EAASrpC,eAGjDqpC,EAASirC,OACf57D,GAAMQ,QAAQ,iCAGd2tE,EAAqB9qC,GACnBA,EAAKhrF,IAAI8yE,GACPA,EAAI0gD,aAAeA,EAAUlsF,EAAAA,EAAA,GACpBwrC,GAAG,IAAE7jC,OAAQ,WAClB6jC,UAKFijD,GACR,CAAE,MAAO7wL,GACP6V,QAAQ7V,MAAM,0BAA2BA,GACzCyiH,GAAMziH,MAAM,0BACd,CAAC,QACCy9K,GAAW,EACb,GAuKiCwT,CAAalhD,EAAQu+C,YACpC7tK,SAAUyiG,EACVhE,UAAU,kCAAiCt+F,SAAA,EAE3C69J,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,iBAAiB,oBAG1Cu/D,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IA3KJu2D,WACvB2xE,GAAW,GACX,IAEEh7D,GAAMQ,QAAQ,8BAGd2tE,EAAqB9qC,GAAQA,EAAK73F,OAAO2/E,GAAOA,EAAIzoI,KAAO+rL,GAC7D,CAAE,MAAOlxL,GACP6V,QAAQ7V,MAAM,6BAA8BA,GAC5CyiH,GAAMziH,MAAM,sCACd,CAAC,QACCy9K,GAAW,EACb,GA8JiC0T,CAAiBphD,EAAQ5qI,IACxC45K,QAAQ,UACRt+J,SAAUyiG,EAAQtiG,SACnB,aAGDs+J,EAAAA,GAAAA,MAACJ,GAAM,CACLC,QAAQ,UACRjsK,KAAK,KACLyiC,QAASA,KAEPl/B,OAAOiiE,KAAK,kBAAD1mE,OAAmBm+H,EAAQu+C,WAAU,aAAa,WAC7D1tK,SAAA,EAEF69J,EAAAA,GAAAA,KAACgS,GAAY,CAACvxE,UAAU,iBAAiB,sBAM3B,WAAnB6wB,EAAQhmC,SACPm1E,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6CAA4Ct+F,SAAA,EACzD69J,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,aACvBu/D,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,UAASt+F,SAAC,yCAnFvBmvH,EAAQ5qI,WC/LlBisL,GAAkCA,KAC7C,MAAM,KAAE7T,GAASF,MACVsT,EAAmBC,IAAwBjiJ,EAAAA,EAAAA,UAAiC,KAC5Eu0E,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChC3uC,EAAO09K,IAAY/uI,EAAAA,EAAAA,UAAwB,MAQ5CszI,EAAiBA,KACrB,MAAM1E,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,IAAKimH,EAAKK,IACR,MAAM,IAAIj+K,MAAM,sDAElB,MAAO,CACL,cAAgB,UAADiS,OAAY2rK,EAAKK,KAChC,eAAgB,qBAKdyT,GAA4BnjJ,EAAAA,EAAAA,aAAY49D,UAC5C2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAnBvBvJ,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYmnL,mBAAqB,wBAmBM,0CAAA59K,QAA6C,OAAJ2rK,QAAI,IAAJA,OAAI,EAAJA,EAAMjnD,UAAW,IAAM,CAC1G9mD,QAASyyG,MAGX,IAAK7uC,EAASz6F,GACZ,MAAM,IAAIh5C,MAAM,2CAADiS,OAA4CwhI,EAASrpC,SAGtE,MAAMz9F,QAAa8mI,EAASirC,OAC5BuS,EAAqBtkL,EAAKqkL,kBAC5B,CAAE,MAAO3wL,GACP6V,QAAQ7V,MAAM,yCAA0CA,GACxD09K,EAAS,yCACX,CAAC,QACCD,GAAW,EACb,GACC,CAAK,OAAJF,QAAI,IAAJA,OAAI,EAAJA,EAAMjnD,WAGVloF,EAAAA,EAAAA,WAAU,KACRijJ,KACC,CAACA,IAEJ,MAAMP,EAAkB/mF,IACtB,OAAQA,GACN,IAAK,UACH,MAAO,mCACT,IAAK,SACH,MAAO,iCACT,IAAK,UACH,MAAO,6BAGT,QACE,MAAO,iCAIPgnF,EAAiBhnF,IACrB,OAAQA,GACN,IAAK,UACH,OAAO00E,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,4BAC1B,IAAK,SACH,OAAOu/D,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,2BAChC,IAAK,UACH,OAAOu/D,EAAAA,GAAAA,KAAC+O,GAAa,CAACtuE,UAAU,yBAClC,IAAK,WACH,OAAOu/D,EAAAA,GAAAA,KAAC+O,GAAa,CAACtuE,UAAU,0BAClC,QACE,OAAOu/D,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,4BAIxB4mE,EAAcC,GACX,IAAIxwK,KAAKwwK,GAAYC,mBAAmB,QAAS,CACtD/zG,KAAM,UACN36C,MAAO,QACP2uJ,IAAK,UACLC,KAAM,UACNC,OAAQ,YAQZ,OAAIjjE,GAAwC,IAA7BytE,EAAkB7sL,QAE7B26K,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wCAAuCt+F,UACpD69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,sFAKjBl/G,GAEAk/K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAC+O,GAAa,CAACtuE,UAAU,yCACzBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,iCACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAE5gB,KACpCy+K,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAAS87I,EAA0BzwK,SAAC,kBAQhDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EAExBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChDs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,gCAA+Bt+F,SAAC,6BAC9C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,iDAEhC69J,EAAAA,GAAAA,KAACK,GAAM,CAACvpI,QAAS87I,EAA2BtS,QAAQ,UAASn+J,SAAC,eAMlC,IAA7B+vK,EAAkB7sL,QACjBo7K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oBAAmBt+F,SAAA,EAChC69J,EAAAA,GAAAA,KAACqK,GAAQ,CAAC5pE,UAAU,2CACpBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,sBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,qDAKhC69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,YAAWt+F,SACvB+vK,EAAkB71H,IAAKi1E,IAAO,IAAAuhD,EAAAC,EAjDpB3B,EAiDoB,OAC7BnR,EAAAA,GAAAA,KAACc,GAAI,CAAkBrgE,UAAU,0CAAyCt+F,UACxEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,MAAKt+F,SAAA,EAClBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wCAAuCt+F,SAAA,EACpDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,qEAAoEt+F,UACjF69J,EAAAA,GAAAA,KAACqK,GAAQ,CAAC5pE,UAAU,8BAEtBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAEmvH,EAAQw+C,gBAChDrP,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,yBAAwBt+F,SAAA,CAAC,WAC3BmvH,EAAQ5iE,QAAQrpE,OAAO,UAAmC,IAA3BisI,EAAQ5iE,QAAQrpE,OAAe,IAAM,aAInFo7K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzCmwK,EAAchhD,EAAQhmC,SACvB00E,EAAAA,GAAAA,KAAA,QAAMv/D,UAAS,yCAAAttG,OAA2Ck/K,EAAe/gD,EAAQhmC,SAAUnpF,SACxFmvH,EAAQhmC,gBAKfm1E,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7Bs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,sCAAqCt+F,SAAA,EAClD69J,EAAAA,GAAAA,KAAC+R,GAAa,CAACtxE,UAAU,4BACzBu/D,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAEmvH,EAAQx7H,cAG5C2qK,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,qDAAoDt+F,SAAA,EACjEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAC2G,GAAQ,CAAClmE,UAAU,aACpBggE,EAAAA,GAAAA,MAAA,QAAAt+J,SAAA,CAAM,QAAMklK,EAAW/1C,EAAQ3sB,kBAEjC87D,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,aACjBggE,EAAAA,GAAAA,MAAA,QAAAt+J,SAAA,CAAM,WACKklK,EAAW/1C,EAAQ6/C,qBAtF/BA,EA2FQ7/C,EAAQ6/C,UA1F1Br6K,KAAKsb,MAAQ,IAAItb,KAAKq6K,GAAWz9C,WA0F0B,YAAnBpC,EAAQhmC,SACvCm1E,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mDAAkDt+F,SAAA,EAC/D69J,EAAAA,GAAAA,KAAC+O,GAAa,CAACtuE,UAAU,aACzBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAM,2CAIU,WAAnBmvH,EAAQhmC,SACPm1E,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,qDAAoDt+F,SAAA,EACjE69J,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,aACvBggE,EAAAA,GAAAA,MAAA,QAAAt+J,SAAA,CAAM,aACuB,QAAjB0wK,EAACvhD,EAAQyhD,gBAAQ,IAAAF,OAAA,EAAhBA,EAAkBnhL,MAAM,EAAG,GAAG,MAAoB,QAAjBohL,EAACxhD,EAAQyhD,gBAAQ,IAAAD,OAAA,EAAhBA,EAAkBphL,OAAO,GAAG,OAAK21K,EAAW/1C,EAAQ0hD,UAAY,cAOrHvS,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,OAAMt+F,SAAA,EACnB69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,cACpD69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,YAAWt+F,SACvBmvH,EAAQ5iE,QAAQrS,IAAI,CAAC0S,EAAQp5D,KAC5B8qK,EAAAA,GAAAA,MAAA,OAAiBhgE,UAAU,gEAA+Dt+F,SAAA,EACxFs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,qBAAoBt+F,SAAE4sD,EAAOpoE,MAAQ,aAClDq5K,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAE4sD,EAAO8oD,cAEhDmoD,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,8BAA6Bt+F,SACzCmvH,EAAQyhD,WAAahkH,EAAO8oD,SAC3BmoD,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,4BAEvBu/D,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,gCATb9qG,UAiBhB8qK,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7Bs+J,EAAAA,GAAAA,MAACJ,GAAM,CACLC,QAAQ,UACRjsK,KAAK,KACLyiC,QAASA,KAEPl/B,OAAOiiE,KAAK,kBAAD1mE,OAAmBm+H,EAAQu+C,WAAU,aAAa,WAC7D1tK,SAAA,EAEF69J,EAAAA,GAAAA,KAACgS,GAAY,CAACvxE,UAAU,iBAAiB,mBAGvB,WAAnB6wB,EAAQhmC,SACPm1E,EAAAA,GAAAA,MAACJ,GAAM,CACLC,QAAQ,UACRjsK,KAAK,KACLosG,UAAU,wDAAuDt+F,SAAA,EAEjE69J,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,iBAAiB,qCAlGvC6wB,EAAQ5qI,YCvFzBusL,IAAcv0H,EAAAA,EAAAA,oBAA2CvT,GAclD+nI,GAA4CrvF,IAAmB,IAAlB,SAAE1hF,GAAU0hF,EACpE,MAAOsvF,EAAOC,IAAYljJ,EAAAA,EAAAA,UAAqB,KACxCmjJ,EAAaC,IAAkBpjJ,EAAAA,EAAAA,UAA0B,OACzDqjJ,EAAWC,IAAgBtjJ,EAAAA,EAAAA,UAA+B,OAC1DujJ,EAAOC,IAAYxjJ,EAAAA,EAAAA,UAAqB,KACxCyjJ,EAAWC,IAAgB1jJ,EAAAA,EAAAA,UAAyB,KACpD2jJ,IAAa3jJ,EAAAA,EAAAA,UAAyB,KACtC4jJ,EAAaC,IAAkB7jJ,EAAAA,EAAAA,UAA2B,KAC1D8jJ,EAAaC,IAAkB/jJ,EAAAA,EAAAA,UAA+B,KAC9DgkJ,EAASC,IAAcjkJ,EAAAA,EAAAA,UAA4B,KACnDkkJ,EAAYC,IAAiBnkJ,EAAAA,EAAAA,UAAuB,KACpDu0E,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChC3uC,EAAO09K,IAAY/uI,EAAAA,EAAAA,UAAwB,MAG5CqvI,EAAaA,KACV31K,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYmnL,mBAAqB,yBAIpCvN,EAAiBA,KACrB,MAAM1E,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACnE,IAAKimH,EAAKK,IACR,MAAM,IAAIj+K,MAAM,sDAElB,MAAO,CACL,cAAgB,UAADiS,OAAY2rK,EAAKK,KAChC,eAAgB,qBAKdgF,EAAiBA,CAACxvC,EAAoB5oB,KAC1C,GAAwB,MAApB4oB,EAASrpC,OAIX,MAHA7xC,aAAaf,WAAW,mBACxBumH,EAAS,wCACTj7D,GAAMziH,MAAM,wCACN,IAAIL,MAAM,mBAElB,MAAM,IAAIA,MAAM,GAADiS,OAAI44G,EAAS,aAAA54G,OAAYwhI,EAASrpC,OAAM,KAAAn4F,OAAIwhI,EAASppC,cAqFhE+oF,EAAUjnF,UACd2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,GAAU,CAC9DxjH,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,YAI3B,aADuBA,EAASirC,MAElC,CAAE,MAAOr+K,GAGP,MAFA6V,QAAQ7V,MAAM,sBAAuBA,GACrC09K,EAAS,sBACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAGIwV,GAAW/kJ,EAAAA,EAAAA,aAAY49D,UAC3B2xE,GAAW,GACX,IACE,MAAMyV,EAAc,IAAIryE,gBACpBsiC,GACF18I,OAAO23G,QAAQ+kC,GAASnoI,QAAQgtF,IAAmB,IAAjB1nG,EAAK+e,GAAM2oF,OAC7Bp+C,IAAVvqC,GACF6zK,EAAYvgF,OAAOryG,EAAK2I,MAAMiG,QAAQmQ,GAASA,EAAM/F,KAAK,KAAO+F,EAAM1T,cAK7E,MAAMynI,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUshL,GAAe,CACnE1jH,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,aAG3B,MAAM9mI,QAAa8mI,EAASirC,OAE5B,OADAwT,EAASvlL,EAAKslL,OACPtlL,CACT,CAAE,MAAOtM,GAGP,MAFA6V,QAAQ7V,MAAM,uBAAwBA,GACtC09K,EAAS,uBACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GACC,IAEG0V,EAAkBrnF,UACtB,IACE,MAAMsnF,QAAiBL,EAAQC,GAC/BjB,EAAeqB,SAGT7yJ,QAAQ+2E,IAAI,CAChB+7E,EAAaL,GACbM,EAASN,GACTO,EAAaP,GACbQ,EAAcR,IAElB,CAAE,MAAOhzL,GACP6V,QAAQ7V,MAAM,8BAA+BA,GAC7C09K,EAAS,sBACX,GAwDI6V,EAAeznF,MAAOknF,EAAgB7vC,KAC1Cs6B,GAAW,GACX,IACE,MAAMyV,EAAc,IAAIryE,gBACpBsiC,GACF18I,OAAO23G,QAAQ+kC,GAASnoI,QAAQuqG,IAAmB,IAAjBjlH,EAAK+e,GAAMkmG,OAC7B37D,IAAVvqC,GACF6zK,EAAYvgF,OAAOryG,EAAK2I,MAAMiG,QAAQmQ,GAASA,EAAM/F,KAAK,KAAO+F,EAAM1T,cAK7E,MAAMynI,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,EAAM,eAAAphL,OAAcshL,GAAe,CACvF1jH,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,iBAG3B,MAAM9mI,QAAa8mI,EAASirC,OAE5B,OADAgU,EAAa/lL,EAAK8lL,WACX9lL,CACT,CAAE,MAAOtM,GAGP,MAFA6V,QAAQ7V,MAAM,2BAA4BA,GAC1C09K,EAAS,2BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAqDIgW,EAAa3nF,MAAO4nF,EAAgBC,KACxClW,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAU8hL,GAAU,CAC9DvhF,OAAQ,MACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU01I,KAGlBvgD,EAASz6F,IACZiqI,EAAexvC,EAAU,eAG3B,MAAMwgD,QAAoBxgD,EAASirC,OAGnC,OAFA8T,EAASrsC,GAAQA,EAAKhrF,IAAItnD,GAAKA,EAAErO,KAAOuuL,EAASE,EAAcpgL,IAC/DivG,GAAMQ,QAAQ,6BACP2wE,CACT,CAAE,MAAO5zL,GAGP,MAFA6V,QAAQ7V,MAAM,uBAAwBA,GACtC09K,EAAS,yBACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAUI6V,EAAWxnF,MAAOknF,EAAgB7vC,KACtCs6B,GAAW,GACX,IACE,MAAMyV,EAAc,IAAIryE,gBACpBsiC,GACF18I,OAAO23G,QAAQ+kC,GAASnoI,QAAQ4qG,IAAmB,IAAjBtlH,EAAK+e,GAAMumG,OAC7Bh8D,IAAVvqC,GACF6zK,EAAYvgF,OAAOryG,EAAK2I,MAAMiG,QAAQmQ,GAASA,EAAM/F,KAAK,KAAO+F,EAAM1T,cAK7E,MAAMynI,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,EAAM,WAAAphL,OAAUshL,GAAe,CACnF1jH,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,aAG3B,MAAM9mI,QAAa8mI,EAASirC,OAE5B,OADA8T,EAAS7lL,EAAK4lL,OACP5lL,CACT,CAAE,MAAOtM,GAGP,MAFA6V,QAAQ7V,MAAM,uBAAwBA,GACtC09K,EAAS,uBACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAqDIoW,EAAmB/nF,MAAOgoF,EAAkBH,KAChDlW,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,UAAApsK,OAASkiL,GAAY,CAC/D3hF,OAAQ,MACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU01I,KAGlBvgD,EAASz6F,IACZiqI,EAAexvC,EAAU,sBAG3B,MAAM2gD,QAAsB3gD,EAASirC,OAGrC,OAFAmU,EAAe1sC,GAAQA,EAAKhrF,IAAIt0D,GAAKA,EAAEwtL,gBAAkBF,EAAWC,EAAgBvtL,IACpFi8G,GAAMQ,QAAQ,oCACP8wE,CACT,CAAE,MAAO/zL,GAGP,MAFA6V,QAAQ7V,MAAM,8BAA+BA,GAC7C09K,EAAS,gCACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GA0MI+V,EAAgB1nF,MAAOknF,EAAgB1E,KAC3C7Q,GAAW,GACX,IACE,MAAM5lJ,EAAMy2J,EAAU,GAAA18K,OACfosK,IAAY,WAAApsK,OAAUohL,EAAM,eAAAphL,OAAc08K,EAAU,aAAA18K,OACpDosK,IAAY,WAAApsK,OAAUohL,EAAM,UAE7B5/C,QAAiB1xB,MAAM7pF,EAAK,CAChC23C,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,mBAG3B,MAAMy/C,QAAmBz/C,EAASirC,OAElC,OADAyU,EAAcD,GACPA,CACT,CAAE,MAAO7yL,GAGP,MAFA6V,QAAQ7V,MAAM,6BAA8BA,GAC5C09K,EAAS,6BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GA+BI4V,EAAevnF,UACnB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,EAAM,cAAc,CACxExjH,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,iBAG3B,MAAM4+C,QAAkB5+C,EAASirC,OAEjC,OADA4T,EAAaD,GACNA,CACT,CAAE,MAAOhyL,GAGP,MAFA6V,QAAQ7V,MAAM,2BAA4BA,GAC1C09K,EAAS,2BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,IAeFrvI,EAAAA,EAAAA,WAAU,KACR6kJ,IAAWryJ,MAAM/qB,QAAQ7V,QACxB,CAACizL,IAEJ,MAAM5zK,EAAyB,CAE7BuyK,QACAE,cACAE,YACAE,QACAE,YACAE,YACAC,cACAE,cACAE,UACAE,aACA3vE,UACAljH,QAGAi0L,WAluBiBnoF,UACjB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,UAAU,CACpD7rE,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAUm1I,KAGlBhgD,EAASz6F,IACZiqI,EAAexvC,EAAU,eAG3B,MAAM8gD,QAAgB9gD,EAASirC,OAG/B,OAFAwT,EAAS/rC,GAAQ,IAAIA,EAAMouC,IAC3BzxE,GAAMQ,QAAQ,6BACPixE,CACT,CAAE,MAAOl0L,GAGP,MAFA6V,QAAQ7V,MAAM,uBAAwBA,GACtC09K,EAAS,yBACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GA4sBA0W,WAzsBiBroF,MAAOknF,EAAgBW,KACxClW,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,GAAU,CAC9D7gF,OAAQ,MACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU01I,KAGlBvgD,EAASz6F,IACZiqI,EAAexvC,EAAU,eAG3B,MAAMghD,QAAoBhhD,EAASirC,OAMnC,OALAwT,EAAS/rC,GAAQA,EAAKhrF,IAAI95D,GAAKA,EAAEmE,KAAO6tL,EAASoB,EAAcpzL,KAChD,OAAX8wL,QAAW,IAAXA,OAAW,EAAXA,EAAa3sL,MAAO6tL,GACtBjB,EAAeqC,GAEjB3xE,GAAMQ,QAAQ,6BACPmxE,CACT,CAAE,MAAOp0L,GAGP,MAFA6V,QAAQ7V,MAAM,uBAAwBA,GACtC09K,EAAS,yBACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAgrBA4W,WA7qBiBvoF,UACjB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,GAAU,CAC9D7gF,OAAQ,SACR3iC,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,eAG3By+C,EAAS/rC,GAAQA,EAAK73F,OAAOjtD,GAAKA,EAAEmE,KAAO6tL,KAC5B,OAAXlB,QAAW,IAAXA,OAAW,EAAXA,EAAa3sL,MAAO6tL,GACtBjB,EAAe,MAEjBtvE,GAAMQ,QAAQ,4BAChB,CAAE,MAAOjjH,GAGP,MAFA6V,QAAQ7V,MAAM,uBAAwBA,GACtC09K,EAAS,yBACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAupBAsV,UACAE,WACAE,kBAGAmB,kBAhlBwBxoF,MAAOknF,EAAgB/4K,KAC/CwjK,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,EAAM,cAAc,CACxE7gF,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAUhkC,KAGlBm5H,EAASz6F,IACZiqI,EAAexvC,EAAU,gBAG3B,MAAMmhD,QAAoBnhD,EAASirC,OAGnC,OAFAgU,EAAavsC,GAAQ,IAAIA,EAAMyuC,IAC/B9xE,GAAMQ,QAAQ,0BACPsxE,CACT,CAAE,MAAOv0L,GAGP,MAFA6V,QAAQ7V,MAAM,yBAA0BA,GACxC09K,EAAS,0BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GA0jBA+W,eAvjBqB1oF,MAAOwiF,EAAoBqF,KAChDlW,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,eAAApsK,OAAc08K,GAAc,CACtEn8E,OAAQ,MACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU01I,KAGlBvgD,EAASz6F,IACZiqI,EAAexvC,EAAU,mBAG3B,MAAMqhD,QAAwBrhD,EAASirC,OAGvC,OAFAgU,EAAavsC,GAAQA,EAAKhrF,IAAIvzD,GAAKA,EAAEpC,KAAOmpL,EAAamG,EAAkBltL,IAC3Ek7G,GAAMQ,QAAQ,iCACPwxE,CACT,CAAE,MAAOz0L,GAGP,MAFA6V,QAAQ7V,MAAM,2BAA4BA,GAC1C09K,EAAS,6BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAiiBA8V,eACAmB,eA/fqB5oF,UACrB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,eAAApsK,OAAc08K,GAAc,CACtEn8E,OAAQ,SACR3iC,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,mBAG3Bi/C,EAAavsC,GAAQA,EAAK73F,OAAO1mD,GAAKA,EAAEpC,KAAOmpL,IAC/C7rE,GAAMQ,QAAQ,gCAChB,CAAE,MAAOjjH,GAGP,MAFA6V,QAAQ7V,MAAM,2BAA4BA,GAC1C09K,EAAS,6BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GA8eAkX,WA1eiB7oF,MAAOknF,EAAgB4B,KACxCnX,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,EAAM,UAAU,CACpE7gF,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU22I,KAGlBxhD,EAASz6F,IACZiqI,EAAexvC,EAAU,eAG3B,MAAMyhD,QAAgBzhD,EAASirC,OAG/B,OAFA8T,EAASrsC,GAAQ,IAAIA,EAAM+uC,IAC3BpyE,GAAMQ,QAAQ,6BACP4xE,CACT,CAAE,MAAO70L,GAGP,MAFA6V,QAAQ7V,MAAM,uBAAwBA,GACtC09K,EAAS,yBACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAodAgW,aACAqB,aAxbmBhpF,SACZ2nF,EAAWC,EAAQ,CACxB3pF,OAAQ,YACRgrF,YAAa,IAAIx/K,OAsbnB+9K,WACA0B,WAnZiBlpF,UACjB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAU8hL,GAAU,CAC9DvhF,OAAQ,SACR3iC,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,eAG3B++C,EAASrsC,GAAQA,EAAK73F,OAAOz6C,GAAKA,EAAErO,KAAOuuL,IAC3CjxE,GAAMQ,QAAQ,4BAChB,CAAE,MAAOjjH,GAGP,MAFA6V,QAAQ7V,MAAM,uBAAwBA,GACtC09K,EAAS,yBACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAkYAwX,cA9XoBnpF,MAAOknF,EAAgBkC,KAC3CzX,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,EAAM,SAAS,CACnE7gF,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAUi3I,KAGlB9hD,EAASz6F,IACZiqI,EAAexvC,EAAU,mBAG3B,MAAM+hD,QAAkB/hD,EAASirC,OAGjC,OAFAmU,EAAe1sC,GAAQ,IAAIA,EAAMqvC,IACjC1yE,GAAMQ,QAAQ,kCACPkyE,CACT,CAAE,MAAOn1L,GAGP,MAFA6V,QAAQ7V,MAAM,4BAA6BA,GAC3C09K,EAAS,6BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAwWAoW,mBACAuB,iBA5UuBtpF,UACvB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,UAAApsK,OAASkiL,GAAY,CAC/D3hF,OAAQ,SACR3iC,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,sBAG3Bo/C,EAAe1sC,GAAQA,EAAK73F,OAAOznD,GAAKA,EAAEwtL,gBAAkBF,IAC5DrxE,GAAMQ,QAAQ,mCAChB,CAAE,MAAOjjH,GAGP,MAFA6V,QAAQ7V,MAAM,8BAA+BA,GAC7C09K,EAAS,gCACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAyTA4X,kBAtTwBvpF,MAAOgoF,EAAkBwB,WAC3CzB,EAAiBC,EAAU,CAAEwB,iBAwTnCC,cApToBzpF,MAAOwiF,EAAoBkH,KAC/C/X,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,eAAApsK,OAAc08K,EAAU,gBAAgB,CAClFn8E,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAUu3I,KAGlBpiD,EAASz6F,IACZiqI,EAAexvC,EAAU,kBAG3B,MAAMqiD,QAAsBriD,EAASirC,OAGrC,OAFAqU,EAAe5sC,GAAQ,IAAIA,EAAM2vC,IACjChzE,GAAMQ,QAAQ,iCACPwyE,CACT,CAAE,MAAOz1L,GAGP,MAFA6V,QAAQ7V,MAAM,2BAA4BA,GAC1C09K,EAAS,4BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GA8RAiY,iBA3RuB5pF,MAAO6pF,EAAsBhC,KACpDlW,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,iBAAApsK,OAAgB+jL,GAAgB,CAC1ExjF,OAAQ,MACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU01I,KAGlBvgD,EAASz6F,IACZiqI,EAAexvC,EAAU,qBAG3B,MAAMwiD,QAA0BxiD,EAASirC,OAGzC,OAFAqU,EAAe5sC,GAAQA,EAAKhrF,IAAI1zD,GAAKA,EAAEjC,KAAOwwL,EAAeC,EAAoBxuL,IACjFq7G,GAAMQ,QAAQ,mCACP2yE,CACT,CAAE,MAAO51L,GAGP,MAFA6V,QAAQ7V,MAAM,6BAA8BA,GAC5C09K,EAAS,+BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAqQAoY,iBAlQuB/pF,UACvB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,iBAAApsK,OAAgB+jL,GAAgB,CAC1ExjF,OAAQ,SACR3iC,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,qBAG3Bs/C,EAAe5sC,GAAQA,EAAK73F,OAAO7mD,GAAKA,EAAEjC,KAAOwwL,IACjDlzE,GAAMQ,QAAQ,kCAChB,CAAE,MAAOjjH,GAGP,MAFA6V,QAAQ7V,MAAM,6BAA8BA,GAC5C09K,EAAS,+BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GA+OAqY,eA5OqBhqF,UACrB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,eAAApsK,OAAc08K,EAAU,gBAAgB,CAClF9+G,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,mBAG3B,MAAMq/C,QAAoBr/C,EAASirC,OAEnC,OADAqU,EAAeD,GACRA,CACT,CAAE,MAAOzyL,GAGP,MAFA6V,QAAQ7V,MAAM,6BAA8BA,GAC5C09K,EAAS,6BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GA2NAsY,aAvNmBjqF,MAAOknF,EAAgBgD,KAC1CvY,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,WAAApsK,OAAUohL,EAAM,YAAY,CACtE7gF,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU+3I,KAGlB5iD,EAASz6F,IACZiqI,EAAexvC,EAAU,iBAG3B,MAAM6iD,QAAkB7iD,EAASirC,OAGjC,OAFAuU,EAAW9sC,GAAQ,IAAIA,EAAMmwC,IAC7BxzE,GAAMQ,QAAQ,yCACPgzE,CACT,CAAE,MAAOj2L,GAGP,MAFA6V,QAAQ7V,MAAM,yBAA0BA,GACxC09K,EAAS,2BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAiMAyY,YA9LkBpqF,MAAOqqF,EAAkB3qH,KAC3CiyG,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,aAAApsK,OAAYukL,EAAQ,UAAU,CACxEhkF,OAAQ,OACR3iC,QAASyyG,IACTniL,KAAMk+C,KAAKC,UAAU,CAAEutB,iBAGpB4nE,EAASz6F,IACZiqI,EAAexvC,EAAU,gBAG3B3wB,GAAMQ,QAAQ,6BAChB,CAAE,MAAOjjH,GAGP,MAFA6V,QAAQ7V,MAAM,wBAAyBA,GACvC09K,EAAS,0BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GA2KA2Y,aAxKmBtqF,UACnB2xE,GAAW,GACX,IACE,MAAMrqC,QAAiB1xB,MAAM,GAAD9vG,OAAIosK,IAAY,aAAApsK,OAAYukL,EAAQ,WAAW,CACzE3mH,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,iBAI3B,aADqBA,EAASirC,QAChB5zG,QAChB,CAAE,MAAOzqE,GAGP,MAFA6V,QAAQ7V,MAAM,0BAA2BA,GACzC09K,EAAS,2BACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAwJA+V,gBACA6C,oBA1H0BvqF,MAAOknF,EAAgB1E,KACjD7Q,GAAW,GACX,IACE,MAAM5lJ,EAAMy2J,EAAU,GAAA18K,OACfosK,IAAY,WAAApsK,OAAUohL,EAAM,eAAAphL,OAAc08K,EAAU,oBAAA18K,OACpDosK,IAAY,WAAApsK,OAAUohL,EAAM,iBAE7B5/C,QAAiB1xB,MAAM7pF,EAAK,CAChCs6E,OAAQ,OACR3iC,QAASyyG,MAGN7uC,EAASz6F,IACZiqI,EAAexvC,EAAU,yBAG3B,MAAM1pF,QAAe0pF,EAASirC,OAE9B,OADA57D,GAAMQ,QAAQ,uCACPv5D,EAAO4sI,SAChB,CAAE,MAAOt2L,GAGP,MAFA6V,QAAQ7V,MAAM,iCAAkCA,GAChD09K,EAAS,mCACH19K,CACR,CAAC,QACCy9K,GAAW,EACb,GAkGA4V,eAGAkD,YA1EkBzqF,UACdgmF,SACIqB,EAAgBrB,EAAY3sL,KAyEpCqxL,WArEiBA,KACjB9Y,EAAS,QAuEX,OACEe,EAAAA,GAAAA,KAACiT,GAAYp0H,SAAQ,CAACj+C,MAAOA,EAAMuB,SAChCA,KCv2BM61K,GAAyC,CACpD,gBAAiB,CAEfC,aAAa,EACbC,eAAe,EACfC,oBAAoB,EACpBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,qBAAqB,EACrBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,mBAAmB,EACnBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,eAAe,EACfC,kBAAkB,EAGlBC,oBAAoB,GAGtBC,UAAW,CAETd,aAAa,EACbC,eAAe,EACfC,oBAAoB,EACpBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,qBAAqB,EACrBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,mBAAmB,EACnBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,eAAe,EACfC,kBAAkB,EAGlBC,oBAAoB,GAGtBE,UAAW,CAETf,aAAa,EACbC,eAAe,EACfC,oBAAoB,EACpBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,qBAAqB,EACrBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,mBAAmB,EACnBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,eAAe,EACfC,kBAAkB,EAGlBC,oBAAoB,GAGtBr2L,OAAQ,CAENw1L,aAAa,EACbC,eAAe,EACfC,oBAAoB,EACpBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,qBAAqB,EACrBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,mBAAmB,EACnBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,eAAe,EACfC,kBAAkB,EAGlBC,oBAAoB,GAGtB,mBAAoB,CAElBb,aAAa,EACbC,eAAe,EACfC,oBAAoB,EACpBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,qBAAqB,EACrBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,mBAAmB,EACnBC,qBAAqB,EAGrBC,sBAAsB,EACtBC,eAAe,EACfC,kBAAkB,EAGlBC,oBAAoB,IAKjB,SAASG,GAAsBp0E,GACpC,OAAOmzE,GAAiBnzE,IAASmzE,GAAiBv1L,MACpD,CASO,SAASy2L,GAAmBr0E,GAQjC,MAP+C,CAC7C,gBAAiB,gBACjBk0E,UAAW,qBACXC,UAAW,YACXv2L,OAAQ,SACR,mBAAoB,oBAEFoiH,EACtB,CCrKO,MAoBMs0E,GAAmBC,IAC9B3/H,aAAad,QAAQ,eAAgBpZ,KAAKC,UAAU45I,KAGzCC,GAAkBA,KAC7B,IACE,MAAMC,EAAc7/H,aAAaZ,QAAQ,gBACzC,IAAKygI,EAAa,OAAO,KAEzB,MAAMF,EAAU75I,KAAKuZ,MAAMwgI,GAM3B,OAHAF,EAAQG,aAAc,IAAIziL,MAAO8qK,cACjCuX,GAAgBC,GAETA,CACT,CAAE,MAAO73L,GAEP,OADA6V,QAAQ7V,MAAM,8BAA+BA,GACtC,IACT,GClDIi4L,IAAc96H,EAAAA,EAAAA,oBAA2CvT,GAMlDsuI,GAA4C51F,IAAmB,IAAlB,SAAE1hF,GAAU0hF,EACpE,MAAO61F,EAAaC,IAAkBzpJ,EAAAA,EAAAA,UAA6B,OAC5D0pJ,EAAoBC,IAAyB3pJ,EAAAA,EAAAA,UAAuB,KACpE4pJ,EAAeC,IAAoB7pJ,EAAAA,EAAAA,UAAwB,OAC3D8pJ,EAAiBC,IAAsB/pJ,EAAAA,EAAAA,UAAiC,OACxEgqJ,EAAaC,IAAkBjqJ,EAAAA,EAAAA,UAA6B,OAC5DkqJ,EAAaC,IAAkBnqJ,EAAAA,EAAAA,WAAkB,IAGxDP,EAAAA,EAAAA,WAAU,KACR,GAAe,OAAX+pJ,QAAW,IAAXA,GAAAA,EAAaY,YAAa,CAC5B,MAAMzD,EAAcoC,GAAsBS,EAAYY,aACtDL,EAAmBpD,EACrB,MACEoD,EAAmB,OAEpB,CAAY,OAAXP,QAAW,IAAXA,OAAW,EAAXA,EAAaY,eAGjB3qJ,EAAAA,EAAAA,WAAU,KACR,MAAMyvI,EAAY3lH,aAAaZ,QAAQ,qBACvC,GAAIumH,EACF,IACE,MAAMmb,EAAch7I,KAAKuZ,MAAMsmH,GAC/Bua,EAAeY,EACjB,CAAE,MAAOh5L,GACP6V,QAAQ7V,MAAM,8BAA+BA,EAC/C,CAIFi5L,KACC,KAGH7qJ,EAAAA,EAAAA,WAAU,KACJ+pJ,GACFjgI,aAAad,QAAQ,oBAAqBpZ,KAAKC,UAAUk6I,KAE1D,CAACA,IAEJ,MAiDMe,EAAiBC,KAChBV,GACEA,EAAgBU,GA0CnBF,EAA6BA,KACjC,MAAMpB,EAAUC,KAChBc,EAAef,GACfiB,GAAsB,OAAPjB,QAAO,IAAPA,OAAO,EAAPA,EAASgB,eAAe,GAGnChB,GAAWA,EAAQv0E,MACrB80E,EAAetyC,GAAQA,EAAI1jD,EAAAA,EAAA,GACtB0jD,GAAI,IACPizC,YAAalB,EAAQv0E,KACrB0wE,cAAe6D,EAAQ7D,gBACrB,CACFA,cAAe6D,EAAQ7D,cACvB+E,YAAalB,EAAQv0E,KACrBi1E,mBAAe3uI,KAgCfvqC,EAAyB,CAC7B84K,cACAE,qBACAE,gBACAE,kBACAE,cACAE,cACAT,eAlJ6B7a,IAC7B6a,EAAe7a,IAkJfwU,eA/IqBA,CAACiB,EAAgBoG,KAKtC,GAJAZ,EAAiBxF,GACjBsF,EAAsBc,GAGlBjB,EAAa,CACf,MAAMkB,EAAaD,EAAQ12E,KAAKwyE,GAAUA,EAAOlB,gBAAkBmE,EAAYnE,eAC3EqF,GACFjB,EAAch2F,EAAAA,EAAC,CAAC,EACX+1F,GAAW,IACdY,YAAaM,EAAW/1E,KACxBi1E,cAAevF,IAGrB,GAkIAsG,eA/HqBA,CAACtF,EAAuBuF,KAC7CjB,EAAsBxyC,GACpBA,EAAKhrF,IAAIo6H,GACPA,EAAOlB,gBAAkBA,EAAa5xF,EAAAA,EAAA,GAC7B8yF,GAAM,IAAE5xE,KAAMi2E,IACnBrE,KAKO,OAAXiD,QAAW,IAAXA,OAAW,EAAXA,EAAanE,iBAAkBA,GACjCoE,EAAch2F,EAAAA,EAAC,CAAC,EACX+1F,GAAW,IACdY,YAAaQ,MAmHjBC,cA9GqBtE,IACrBoD,EAAsBxyC,GAAQ,IAAIA,EAAMovC,KA8GxCuE,iBA3GwBzF,IACxBsE,EAAsBxyC,GACpBA,EAAK73F,OAAOinI,GAAUA,EAAOlB,gBAAkBA,KA0GjD8D,gBAAiBmB,EACjBS,kBAxCyBC,IACzB,IAAKhB,EAAa,OAElB,MAAMiB,EAAcx3F,EAAAA,EAAA,GAAQu2F,GAAgBgB,GAC5Cf,EAAegB,GACfhC,GAAgBgC,IAoChBC,mBAjCyBA,CAACv2E,EAAgBw2E,KAC1C,GAAgB,OAAX3B,QAAW,IAAXA,IAAAA,EAAanE,cAAe,OAEjC,MAAM+F,ED/JuBC,EAC/BhG,EACA1wE,EACAw2E,KAEO,CACL9F,gBACA1wE,OACAw2E,WACAG,aAAa,IAAI1kL,MAAO8qK,cACxBwY,aAAa,EACbb,aAAa,IAAIziL,MAAO8qK,cACxB6Z,YAAa,CACXh4E,MAAO,OACPi4E,eAAe,EACfC,UAAU,KCgJOJ,CAAkB7B,EAAYnE,cAAe1wE,EAAMw2E,GACtElB,EAAemB,GACfjB,GAAe,GACflB,GAAgBmC,GAGhB3B,EAAetyC,GAAQA,EAAI1jD,EAAAA,EAAA,GACtB0jD,GAAI,IACPizC,YAAaz1E,IACX,CACF0wE,cAAemE,EAAYnE,cAC3B+E,YAAaz1E,EACbi1E,mBAAe3uI,KAmBjBsvI,gBACAmB,iBArGwB9uJ,IACxB,IAAKktJ,EAAiB,OAAO,EAG7B,MAiBMU,EAjB6D,CACjE,UAAa,cACb,cAAiB,gBACjB,UAAa,qBACb,eAAkB,sBAClB,qBAAwB,uBACxB,eAAkB,sBAClB,oBAAuB,sBACvB,aAAgB,uBAChB,YAAe,oBACf,cAAiB,sBACjB,qBAAwB,uBACxB,YAAe,gBACf,iBAAoB,mBACpB,mBAAsB,sBAGe5tJ,GACvC,QAAO4tJ,GAAaD,EAAcC,IAgFlCmB,YA7EmBtG,IACnB,MAAMkB,EAASmD,EAAmB31E,KAAKwyE,GAAUA,EAAOlB,gBAAkBA,GAC1E,OAAOkB,EAASA,EAAO5xE,KAAO,MA4E9Bi3E,YAzEkBA,IACkB,mBAAlB,OAAXpC,QAAW,IAAXA,OAAW,EAAXA,EAAaY,aAyEpByB,aAtEmBA,IACZnC,EAAmBpxF,KAAKiuF,GAAUA,EAAOlB,iBAA6B,OAAXmE,QAAW,IAAXA,OAAW,EAAXA,EAAanE,iBAwEjF,OACEvV,EAAAA,GAAAA,KAACwZ,GAAY36H,SAAQ,CAACj+C,MAAOA,EAAMuB,SAChCA,KAKM65K,GAAUA,KACrB,MAAMtzJ,GAAUgH,EAAAA,EAAAA,YAAW8pJ,IAC3B,QAAgBruI,IAAZziB,EACF,MAAM,IAAIxnC,MAAM,8CAElB,OAAOwnC,GC9OIuzJ,GAAkDp4F,IAA6B,IAA5B,QAAEo9E,EAAO,UAAEwM,GAAW5pF,EACpF,MAAM,WAAE2xF,GJqEa0G,MACrB,MAAMxzJ,GAAUgH,EAAAA,EAAAA,YAAWujJ,IAC3B,IAAKvqJ,EACH,MAAM,IAAIxnC,MAAM,8CAElB,OAAOwnC,GI1EgBwzJ,IACjB,YAAExC,GAAgBsC,MACjBv3E,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,IAChCw9I,EAAMC,IAAWz9I,EAAAA,EAAAA,UAAsC,UAEvDyjE,EAAUwoF,IAAejsJ,EAAAA,EAAAA,UAA4B,CAC1DqsE,MAAO,GACPxiC,YAAa,GACbqiH,WAAY,GACZC,aAAc,GACdC,aAAc,YACdptK,SAAU,SACVo8E,OAAQ,SACRixF,KAAM,GACN5I,UAAW,GACXF,MAAO,GACPI,UAAW,GACXG,YAAa,GACbwI,cAAe,CACbjI,OAAQ,GACRsC,YAAa,CAAC,EACd4F,gBAAiB,CAAC,EAClB93E,UAAW,IAAI7tG,KACf4lL,UAAW,IAAI5lL,SAIZg9K,EAAaC,IAAkB7jJ,EAAAA,EAAAA,UAAuB,KACtDwmJ,EAAWiG,IAAgBzsJ,EAAAA,EAAAA,UAAS,CACzCqlJ,cAAe,GACf5uL,KAAM,GACNiyB,MAAO,GACPisF,KAAM,cAwDF+3E,EAAoBA,CAAC7yF,EAAuBnpF,KAChDu7K,EAAY90C,GAAI1jD,EAAAA,EAAA,GACX0jD,GAAI,IACP,CAACt9C,GAAQnpF,MAoDPq4K,EAAyBp0E,IAC7B,OAAQA,GACN,IAAK,gBACH,MAAO,CAAC,OAAQ,UAAW,OAAQ,SAAU,QAAS,eACxD,IAAK,YACH,MAAO,CAAC,OAAQ,UAAW,OAAQ,SACrC,IAAK,YAIL,IAAK,mBACH,MAAO,CAAC,OAAQ,WAClB,QACE,MAAO,CAAC,UAIRqpE,EAAeC,GACfT,IAASS,GACJnO,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,oEAAmEt+F,UACvF69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,mDAGZu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,sCAGxB,OACEu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uFAAsFt+F,UACnG69J,EAAAA,GAAAA,KAACc,GAAI,CAACrgE,UAAU,gDAA+Ct+F,UAC7Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,MAAKt+F,SAAA,EAClBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,gCAA+Bt+F,SAAC,qBAC9C69J,EAAAA,GAAAA,KAACK,GAAM,CAACC,QAAQ,QAAQxpI,QAASmqI,EAAQ9+J,UACvC69J,EAAAA,GAAAA,KAACvnI,GAAC,CAACgoE,UAAU,kBAKjBu/D,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wCAAuCt+F,UACpDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,UACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAS,WAAAttG,OAAsB,UAATu6K,EAAmB,gBAAkB,kBAAmBvrK,SAAC,mBAIvF69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,2BACfggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,SACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAS,WAAAttG,OAAsB,SAATu6K,EAAkB,gBAAkB,kBAAmBvrK,SAAC,aAItF69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,2BACfggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzC+rK,EAAY,WACblO,EAAAA,GAAAA,KAAA,QAAMv/D,UAAS,WAAAttG,OAAsB,WAATu6K,EAAoB,gBAAkB,kBAAmBvrK,SAAC,mBAQlF,UAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wCAAuCt+F,SAAA,EACpDs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,kBAG7D69J,EAAAA,GAAAA,KAAA,SACE/+K,KAAK,OACL2f,MAAO+yF,EAAS4I,OAAS,GACzB+pE,SAAWv9K,GAAM6zL,EAAkB,QAAS7zL,EAAEkf,OAAOrH,OACrD6/F,UAAU,kIACV+lE,YAAY,+BAIhB/F,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,mBAG7D69J,EAAAA,GAAAA,KAAA,SACE/+K,KAAK,OACL2f,MAAO+yF,EAASyoF,YAAc,GAC9B9V,SAAWv9K,GAAM6zL,EAAkB,aAAc7zL,EAAEkf,OAAOrH,OAC1D6/F,UAAU,kIACV+lE,YAAY,+BAIhB/F,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,qBAG7D69J,EAAAA,GAAAA,KAAA,SACE/+K,KAAK,OACL2f,MAAO+yF,EAAS0oF,cAAgB,GAChC/V,SAAWv9K,GAAM6zL,EAAkB,eAAgB7zL,EAAEkf,OAAOrH,OAC5D6/F,UAAU,kIACV+lE,YAAY,uBAIhB/F,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,mBAG7D69J,EAAAA,GAAAA,KAAA,UACEp/J,MAAO+yF,EAAS2oF,cAAgB,YAChChW,SAAWv9K,GAAM6zL,EAAkB,eAAgB7zL,EAAEkf,OAAOrH,OAC5D6/F,UAAU,kIAAiIt+F,SA7NvH,CACpC,YAAa,aAAc,cAAe,SAAU,WACpD,cAAe,wBAAyB,aAAc,MAAO,SA6N9Bk6C,IAAIv1C,IACjBk5J,EAAAA,GAAAA,KAAA,UAAmBp/J,MAAOkG,EAAK3E,SAC5B2E,EAAK1J,QAAQ,IAAK,KAAKA,QAAQ,QAAStV,GAAKA,EAAE8N,gBADrCkR,UAOnB25J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,cAG7D69J,EAAAA,GAAAA,KAAA,UACEp/J,MAAO+yF,EAASzkF,UAAY,SAC5Bo3J,SAAWv9K,GAAM6zL,EAAkB,WAAY7zL,EAAEkf,OAAOrH,OACxD6/F,UAAU,kIAAiIt+F,SAzO1H,CAAC,MAAO,SAAU,OAAQ,UA2O/Bk6C,IAAIntC,IACd8wJ,EAAAA,GAAAA,KAAA,UAAuBp/J,MAAOsO,EAAS/M,SACpC+M,EAASxI,OAAO,GAAG9Q,cAAgBsZ,EAASxd,MAAM,IADxCwd,UAOnBuxJ,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,YAG7Ds+J,EAAAA,GAAAA,MAAA,UACE7/J,MAAO+yF,EAASrI,QAAU,SAC1Bg7E,SAAWv9K,GAAM6zL,EAAkB,SAAU7zL,EAAEkf,OAAOrH,OACtD6/F,UAAU,kIAAiIt+F,SAAA,EAE3I69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,SAAQuB,SAAC,YACvB69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,UAASuB,SAAC,aACxB69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,SAAQuB,SAAC,YACvB69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,WAAUuB,SAAC,uBAK/Bs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,iBAG7D69J,EAAAA,GAAAA,KAAA,YACEp/J,MAAO+yF,EAAS55B,aAAe,GAC/BusG,SAAWv9K,GAAM6zL,EAAkB,cAAe7zL,EAAEkf,OAAOrH,OAC3DqvK,KAAM,EACNxvE,UAAU,kIACV+lE,YAAY,2CAOV,SAATkH,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxB69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,oCAAmCt+F,UAChDs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,kBACjD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,+DAO1Cs+J,EAAAA,GAAAA,MAACK,GAAI,CAACrgE,UAAU,MAAKt+F,SAAA,EACnB69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,8BAA6Bt+F,SAAC,qBAC5Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6CAA4Ct+F,SAAA,EACzDs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,sBAG7D69J,EAAAA,GAAAA,KAACuF,GAAK,CACJ3kK,MAAO81K,EAAUnB,cACjBjP,SAAWv9K,GAAM4zL,EAAat1C,GAAI1jD,EAAAA,EAAA,GAAU0jD,GAAI,IAAEkuC,cAAexsL,EAAEkf,OAAOrH,SAC1E4lK,YAAY,QACZ/lE,UAAU,0BAGdggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,YAG7D69J,EAAAA,GAAAA,KAACuF,GAAK,CACJ3kK,MAAO81K,EAAU/vL,KACjB2/K,SAAWv9K,GAAM4zL,EAAat1C,GAAI1jD,EAAAA,EAAA,GAAU0jD,GAAI,IAAE1gJ,KAAMoC,EAAEkf,OAAOrH,SACjE4lK,YAAY,iBAGhB/F,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,WAG7D69J,EAAAA,GAAAA,KAACuF,GAAK,CACJtkL,KAAK,QACL2f,MAAO81K,EAAU99J,MACjB0tJ,SAAWv9K,GAAM4zL,EAAat1C,GAAI1jD,EAAAA,EAAA,GAAU0jD,GAAI,IAAEzuH,MAAO7vB,EAAEkf,OAAOrH,SAClE4lK,YAAY,yBAGhB/F,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,YAG7Ds+J,EAAAA,GAAAA,MAAA,UACE7/J,MAAO81K,EAAU7xE,KACjByhE,SAAWv9K,GAAM4zL,EAAat1C,GAAI1jD,EAAAA,EAAA,GAAU0jD,GAAI,IAAExiC,KAAM97G,EAAEkf,OAAOrH,SACjE6/F,UAAU,kIAAiIt+F,SAAA,EAE3I69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,YAAWuB,SAAC,wBAC1B69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,YAAWuB,SAAC,eAC1B69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,SAAQuB,SAAC,YACvB69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,mBAAkBuB,SAAC,+BAIvCs+J,EAAAA,GAAAA,MAACJ,GAAM,CAACvpI,QAjVA0/I,KACpB,IAAKE,EAAUnB,gBAAkBmB,EAAU/vL,KAEzC,YADAq9G,GAAMziH,MAAM,0CAKd,GAAIuyL,EAAYtrF,KAAKiuF,GAAUA,EAAOlB,gBAAkBmB,EAAUnB,eAEhE,YADAvxE,GAAMziH,MAAM,oDAId,MAAMk1L,EAAqB,CACzBlB,cAAemB,EAAUnB,cACzB1wE,KAAM6xE,EAAU7xE,KAChBl+G,KAAM+vL,EAAU/vL,KAChBiyB,MAAO89J,EAAU99J,MACjBikK,QAAS,IAAI/lL,KACbgmL,SAAoB,OAAXpD,QAAW,IAAXA,OAAW,EAAXA,EAAanE,gBAAiB,WAGzCxB,EAAe1sC,GAAQ,IAAIA,EAAMovC,IACjCkG,EAAa,CACXpH,cAAe,GACf5uL,KAAM,GACNiyB,MAAO,GACPisF,KAAM,cAERb,GAAMQ,QAAQ,mCAqT8BnwG,KAAK,KAAI8N,SAAA,EACvC69J,EAAAA,GAAAA,KAAC4C,GAAI,CAACniE,UAAU,iBAAiB,oBAMrCggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxB69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAC,yBACtC2xK,EAAYz3H,IAAI,CAACo6H,EAAQ9gL,KACxB8qK,SAAAA,GAAAA,MAACK,GAAI,CAAargE,UAAU,MAAKt+F,SAAA,EAC/Bs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wCAAuCt+F,SAAA,EACpDs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAEs0K,EAAO9vL,QAC/Cq5K,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,mCAAkCt+F,SAAEs0K,EAAOlB,gBACvDkB,EAAO79J,QACNonJ,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAEs0K,EAAO79J,YAGlDonJ,EAAAA,GAAAA,KAACK,GAAM,CACLC,QAAQ,QACRjsK,KAAK,KACLyiC,QAASA,KAAM6/I,OAxUXpB,EAwU4BkB,EAAOlB,cAvU3DxB,EAAe1sC,GAAQA,EAAK73F,OAAOinI,GAAUA,EAAOlB,gBAAkBA,SACtEvxE,GAAMQ,QAAQ,uBAFU+wE,OAyUJ90E,UAAU,kCAAiCt+F,UAE3C69J,EAAAA,GAAAA,KAACG,GAAM,CAAC1/D,UAAU,kBAItBggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChDs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,yBAAwBt+F,SAAC,YACzC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,oCAAmCt+F,SAChD+2K,GAAmBzC,EAAO5xE,YAG/B47D,EAAAA,GAAAA,MAAA,UACE7/J,MAAO61K,EAAO5xE,KACdyhE,SAAWv9K,IAAMg0L,OAnVbxH,EAmV8BkB,EAAOlB,cAnVduF,EAmV6B/xL,EAAEkf,OAAOrH,WAlVrFmzK,EAAe1sC,GACbA,EAAKhrF,IAAIo6H,GACPA,EAAOlB,gBAAkBA,EAAa5xF,EAAAA,EAAA,GAC7B8yF,GAAM,IAAE5xE,KAAMi2E,IACnBrE,IALesG,IAACxH,EAAuBuF,GAoV3Br6E,UAAU,gIAA+Ht+F,SAAA,EAEzI69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,YAAWuB,SAAC,wBAC1B69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,YAAWuB,SAAC,eAC1B69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,SAAQuB,SAAC,YACvB69J,EAAAA,GAAAA,KAAA,UAAQp/J,MAAM,mBAAkBuB,SAAC,4BAIrC69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,OAAMt+F,UACnB69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,UHxOxB0iG,EGyOS4xE,EAAO5xE,KHxOF,CAC7C,gBAAiB,6EACjBk0E,UAAW,iFACXC,UAAW,mEACXv2L,OAAQ,8EACR,mBAAoB,+EAEFoiH,UGyLOlvG,GHjMtB,IAA4BkvG,IG+OK,IAAvBivE,EAAYzuL,SACXo7K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAACoK,GAAK,CAAC3pE,UAAU,2CACjBu/D,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,+BAC9B69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,0DAQtC,WAATurK,IACCjN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iCAAgCt+F,SAAA,EAC7C69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,kBAEtDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wCAAuCt+F,SAAA,EACpDs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,qCAAoCt+F,SAAC,WACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,aAAYt+F,SAAEwxF,EAAS4I,YAEtCkkE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,qCAAoCt+F,SAAC,YACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,aAAYt+F,SAAEwxF,EAASyoF,iBAEtC3b,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,qCAAoCt+F,SAAC,mBACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,aAAYt+F,SAAEwxF,EAAS0oF,mBAEtC5b,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,qCAAoCt+F,SAAC,mBACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,aAAYt+F,SAAEwxF,EAAS2oF,mBAEtC7b,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,qCAAoCt+F,SAAC,cACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,aAAYt+F,SAAEwxF,EAASzkF,eAEtCuxJ,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,qCAAoCt+F,SAAC,YACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,aAAYt+F,SAAEwxF,EAASrI,eAIvCqI,EAAS55B,cACR0mG,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,qCAAoCt+F,SAAC,iBACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,aAAYt+F,SAAEwxF,EAAS55B,kBAIxC0mG,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,qCAAoCt+F,SAAC,kBACtDs+J,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,aAAYt+F,SAAA,CAAE2xK,EAAYzuL,OAAO,cAC7CyuL,EAAYz3H,IAAI,CAACo6H,EAAQ9gL,KACxB8qK,EAAAA,GAAAA,MAAA,OAAiBhgE,UAAU,8BAA6Bt+F,SAAA,CACrDs0K,EAAO9vL,KAAK,KAAG8vL,EAAO5xE,KAAK,OAAK4xE,EAAOlB,cAAc7jL,MAAM,EAAG,IAAI,QAD3DiE,cAQlBqqK,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,4DAA2Dt+F,UACxEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,6BAA4Bt+F,SAAA,EACzC69J,EAAAA,GAAAA,KAAC/1D,GAAW,CAACxJ,UAAU,mCACvBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,kCAAiCt+F,SAAC,kBAChD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,oLAWhDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4BAA2Bt+F,SAAA,EACxC69J,EAAAA,GAAAA,KAAA,OAAA79J,SACY,UAATurK,IACC1N,EAAAA,GAAAA,KAACK,GAAM,CACLC,QAAQ,UACRxpI,QAASA,KACM,SAAT42I,GAAiBC,EAAQ,SAChB,WAATD,GAAmBC,EAAQ,SAC/BxrK,SACH,gBAMLs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAACK,GAAM,CAACC,QAAQ,UAAUxpI,QAASmqI,EAAQ9+J,SAAC,WAIlC,WAATurK,GACC1N,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,KACM,UAAT42I,GAAkBC,EAAQ,QACjB,SAATD,GAAiBC,EAAQ,WAC7BxrK,SACH,UAID69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAlcKu2D,UACnB,GAAKsG,EAAS4I,OAAU5I,EAASyoF,YAAezoF,EAAS0oF,aAAzD,CAKArd,GAAW,GACX,IAEE,MASMge,EAAiB,CATe,CACpCzH,eAA0B,OAAXmE,QAAW,IAAXA,OAAW,EAAXA,EAAanE,gBAAiB,UAC7C1wE,KAAM,gBACNl+G,MAAiB,OAAX+yL,QAAW,IAAXA,OAAW,EAAXA,EAAanE,gBAAiB,eACpC38J,MAAO,GACPikK,QAAS,IAAI/lL,KACbgmL,SAAoB,OAAXpD,QAAW,IAAXA,OAAW,EAAXA,EAAanE,gBAAiB,cAGKzB,GAExCa,EAAQhxF,EAAAA,EAAA,GACTgQ,GAAQ,IACX4oF,KAAMS,EAAe3gI,IAAIo6H,IAAM,CAC7BlB,cAAekB,EAAOlB,cACtB5uL,KAAM8vL,EAAO9vL,KACbk+G,KAAM4xE,EAAO5xE,KACbjsF,MAAO69J,EAAO79J,OAAS,GACvBikK,QAASpG,EAAOoG,QAChBC,QAASrG,EAAOqG,QAChBjG,YAAaoC,EAAsBxC,EAAO5xE,SAE5CF,UAAW,IAAI7tG,KACf4lL,UAAW,IAAI5lL,OAGX2+K,QAAgBD,EAAWb,GACjC3wE,GAAMQ,QAAQ,6BACdipE,EAAUgI,EAAQ/uL,IAClBu6K,GACF,CAAE,MAAO1/K,GACP6V,QAAQ7V,MAAM,uBAAwBA,GACtCyiH,GAAMziH,MAAM,wBACd,CAAC,QACCy9K,GAAW,EACb,CAxCA,MAFEh7D,GAAMziH,MAAM,uCAicAygB,SAAUyiG,EACVhE,UAAU,kCAAiCt+F,SAE1CsiG,EAAU,cAAgB,8BCljBtC,MAAMw4E,GACX,iBAAe1d,GAIb,MAAO,EACT,CAKA,8BAAa2d,GACX,IAEE,aADuBj6E,MAAM,GAAD9vG,OAAIjC,KAAKquK,aAAY,aACjCrlI,EAClB,CAAE,MAAO34C,GAEP,OADA6V,QAAQ7V,MAAM,+BAAgCA,IACvC,CACT,CACF,CAKA,yBAAa47L,CAAatlE,GACxB,IAEE,MAAM8nD,QAAsB18D,MAAM,GAAD9vG,OAAIjC,KAAKquK,aAAY,mBAAmB,CACvE7rE,OAAQ,OACR3iC,QAAS,CAAE,eAAgB,oBAC3B1vE,KAAMk+C,KAAKC,UAAU,CAAEq4E,cAGzB,IAAK8nD,EAAczlI,GACjB,MAAO,CAAEsqE,SAAS,EAAOjjH,MAAO,uBAGlC,MAAM,MAAEo4G,SAAgBgmE,EAAcC,OAItC,OAHAxoK,QAAQlC,IAAI,yBAAqBykG,GAG1B,CAAE6K,SAAS,EACpB,CAAE,MAAOjjH,GAEP,OADA6V,QAAQ7V,MAAM,yBAA0BA,GACjC,CAAEijH,SAAS,EAAOjjH,MAAOA,aAAiBL,MAAQK,EAAMuU,QAAU,gBAC3E,CACF,CAKA,2BAAasnL,CAAe/4D,GAC1B,IAEE,MACMg5D,EAAW,IAAInY,KAAK,CADN,sCACqB,WAAY,CAAEjkL,KAAM,eAEvD0yG,EAAW,IAAIE,SACrBF,EAASO,OAAO,OAAQmpF,GACxB1pF,EAASO,OAAO,MAAO,kBAEvB,MAAMygC,QAAiB1xB,MAAM,GAAD9vG,OAAIjC,KAAKquK,aAAY,WAAW,CAC1D7rE,OAAQ,OACR3iC,QAAS,CACP,cAAgB,UAAD59D,OAAYkxH,IAE7BhjI,KAAMsyG,IAGR,OAAKghC,EAASz6F,IAOd9iC,QAAQlC,IAAI,sCACL,CAAEsvG,SAAS,IAPT,CACLA,SAAS,EACTjjH,MAAM,kBAAD4R,OAAoBwhI,EAASrpC,OAAM,KAAAn4F,OAAIwhI,EAASppC,YAM3D,CAAE,MAAOhqG,GAEP,OADA6V,QAAQ7V,MAAM,2BAA4BA,GACnC,CAAEijH,SAAS,EAAOjjH,MAAOA,aAAiBL,MAAQK,EAAMuU,QAAU,gBAC3E,CACF,CAKA,wBAAawnL,GAKXlmL,QAAQlC,IAAI,sCAGZ,MAAMqoL,QAAsBrsL,KAAKgsL,oBACjC9lL,QAAQlC,IAAI,kBAAmBqoL,EAAgB,YAAS,iBAGxD,MAAMC,QAAiBtsL,KAAKisL,aAAa,8CAIzC,IAAIM,EAHJrmL,QAAQlC,IAAI,aAAcsoL,EAASh5E,QAAU,YAAM,kBAAArxG,OAAgBqqL,EAASj8L,QAI5E,MAAMu9K,EAAOv/H,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MAQnE,OAPIimH,EAAKK,KACPse,QAAmBvsL,KAAKksL,eAAete,EAAKK,KAC5C/nK,QAAQlC,IAAI,eAAgBuoL,EAAWj5E,QAAU,YAAM,kBAAArxG,OAAgBsqL,EAAWl8L,SAElF6V,QAAQlC,IAAI,gDAGP,CACLqoL,gBACAC,WACAC,aAEJ,EC2hBK,MAAMC,GAAiB,IA5nBvB,MAKLv9K,WAAAA,GAAe,KAJPw9K,YAAsB,EAAE,KACxBC,WAAqB,EAAM,KAC3BC,SAAgB,CAAC,EAGvB3sL,KAAK4sL,eACP,CAEQA,aAAAA,GACN5sL,KAAK2sL,SAAW,CACd1K,MAAO,CACL,CACEzsL,GAAI,WACJ61G,MAAO,4BACPxiC,YAAa,mEACbuxB,OAAQ,SACRyyF,aAAc,CACZ,CAAEp3L,KAAM,aAAck+G,KAAM,gBAAiBm5E,OAAQ,aACrD,CAAEr3L,KAAM,YAAak+G,KAAM,YAAam5E,OAAQ,aAChD,CAAEr3L,KAAM,cAAek+G,KAAM,YAAam5E,OAAQ,cAEpDC,gBAAiB,GACjBC,YAAa,EACbC,sBAAuB,IAEzB,CACEz3L,GAAI,WACJ61G,MAAO,8BACPxiC,YAAa,iDACbuxB,OAAQ,SACRyyF,aAAc,CACZ,CAAEp3L,KAAM,eAAgBk+G,KAAM,gBAAiBm5E,OAAQ,aACvD,CAAEr3L,KAAM,YAAak+G,KAAM,YAAam5E,OAAQ,aAChD,CAAEr3L,KAAM,eAAgBk+G,KAAM,SAAUm5E,OAAQ,cAElDC,gBAAiB,GACjBC,YAAa,GACbC,sBAAuB,KAG3BxK,UAAW,CACT,CACEjtL,GAAI,UACJC,KAAM,mCACN1F,KAAM,WACNqqG,OAAQ,aACR/kD,KAAM,kBACN63I,SAAU,cACVC,gBAAiB,wBACjBC,SAAU,eACVC,QAAS,WACTC,YAAa,aACbnqL,KAAM,SACNo3J,MAAO,aACPgzB,oBAAqB,YAEvB,CACE/3L,GAAI,UACJC,KAAM,4CACN1F,KAAM,oBACNqqG,OAAQ,aACR/kD,KAAM,kBACN63I,SAAU,cACVC,gBAAiB,qBACjBC,SAAU,eACVI,WAAY,iBACZC,gBAAiB,UACjBC,gBAAiB,kDACjBL,QAAS,WACTC,YAAa,aACbnqL,KAAM,SACNo3J,MAAO,aACPgzB,oBAAqB,aAGzBI,mBAAoB,CAClB,CACEn4L,GAAI,cACJo4L,YAAa,UACbC,cAAe,mCACfrrB,OAAQ,aACRsrB,cAAe,YACf/uH,UAAW,aACXgvH,iBAAkB,YAClB3zF,OAAQ,UACR4zF,aAAc,aACd3O,SAAU,aACVz6K,QAAS,oDAGbqpL,YAAa,CACX,CACEz4L,GAAI,SACJo4L,YAAa,UACbC,cAAe,mCACfK,cAAe,2BACfC,WAAY,oBACZC,iBAAkB,CAAEv3L,EAAG,EAAGc,EAAG,GAC7B02L,cAAe,MACfC,gBAAiB,OACjBC,cAAe,OACfC,WAAY,iBACZC,iBAAkB,IAClBC,WAAY,SACZC,cAAe,aACfC,QAAS,YACTrB,oBAAqB,aAI7B,CAKAsB,gBAAAA,GACE,MAAO,CACL7uL,KAAK8uL,wBACL9uL,KAAK+uL,8BACL/uL,KAAKgvL,6BACLhvL,KAAKivL,8BACLjvL,KAAKkvL,oBACLlvL,KAAKmvL,0BAET,CAKQL,qBAAAA,GACN,MAAO,CACLt5L,GAAI,kBACJ61G,MAAO,4BACPxiC,YAAa,4EACbumH,cAAe,IACfC,MAAO,CACL,CACE75L,GAAI,cACJ61G,MAAO,kBACPxiC,YAAa,4DACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,mEACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,0CAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,mBACJ61G,MAAO,mBACPxiC,YAAa,wDACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,qCACZkC,QAAQlC,IAAI,kCACZkC,QAAQlC,IAAI,6BACZkC,QAAQlC,IAAI,qCACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,0DAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,kBACJ61G,MAAO,2BACPxiC,YAAa,sDACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,4CACZkC,QAAQlC,IAAI,mCACZkC,QAAQlC,IAAI,qCACZkC,QAAQlC,IAAI,0CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,qCAEdmwG,SAAU,MAIlB,CAKQ46E,2BAAAA,GACN,MAAO,CACLv5L,GAAI,wBACJ61G,MAAO,uCACPxiC,YAAa,2EACbumH,cAAe,KACfC,MAAO,CACL,CACE75L,GAAI,kBACJ61G,MAAO,kBACPxiC,YAAa,2CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,qEACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,0CAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,iBACJ61G,MAAO,+BACPxiC,YAAa,8CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,wDACNhE,KAAKsvL,cAAc,MACzBppL,QAAQlC,IAAI,4CAEdmwG,SAAU,MAEZ,CACE3+G,GAAI,cACJ61G,MAAO,iBACPxiC,YAAa,2CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,2CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,iCAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,oBACJ61G,MAAO,oBACPxiC,YAAa,sDACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,6CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,4CAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,0BACJ61G,MAAO,0BACPxiC,YAAa,6CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,mDACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,4CACZkC,QAAQlC,IAAI,mDAEdmwG,SAAU,MAIlB,CAKQ66E,0BAAAA,GACN,MAAO,CACLx5L,GAAI,uBACJ61G,MAAO,8BACPxiC,YAAa,4EACbumH,cAAe,IACfC,MAAO,CACL,CACE75L,GAAI,kBACJ61G,MAAO,gCACPxiC,YAAa,+DACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,sEACZkC,QAAQlC,IAAI,+DACNhE,KAAKsvL,cAAc,MACzBppL,QAAQlC,IAAI,2CAEdmwG,SAAU,MAEZ,CACE3+G,GAAI,sBACJ61G,MAAO,4BACPxiC,YAAa,8CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,6CACZkC,QAAQlC,IAAI,uDACZkC,QAAQlC,IAAI,0CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,sCAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,kBACJ61G,MAAO,kBACPxiC,YAAa,uDACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,4CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,qCAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,sBACJ61G,MAAO,sBACPxiC,YAAa,kDACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,+CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,+CACZkC,QAAQlC,IAAI,iDAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,wBACJ61G,MAAO,wBACPxiC,YAAa,6CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,kDACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,kCACZkC,QAAQlC,IAAI,uCAEdmwG,SAAU,MAIlB,CAKQ86E,2BAAAA,GACN,MAAO,CACLz5L,GAAI,yBACJ61G,MAAO,gCACPxiC,YAAa,oEACbumH,cAAe,KACfC,MAAO,CACL,CACE75L,GAAI,kBACJ61G,MAAO,kBACPxiC,YAAa,4CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,wDACZkC,QAAQlC,IAAI,iDACNhE,KAAKsvL,cAAc,MACzBppL,QAAQlC,IAAI,6BAEdmwG,SAAU,MAEZ,CACE3+G,GAAI,qBACJ61G,MAAO,qBACPxiC,YAAa,wCACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,sCACZkC,QAAQlC,IAAI,2BACZkC,QAAQlC,IAAI,oCACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,+BAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,eACJ61G,MAAO,kBACPxiC,YAAa,0CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,6CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,6BACZkC,QAAQlC,IAAI,2CAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,sBACJ61G,MAAO,sBACPxiC,YAAa,kDACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,+CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,+CACZkC,QAAQlC,IAAI,gDAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,kBACJ61G,MAAO,kBACPxiC,YAAa,iDACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,yCACZkC,QAAQlC,IAAI,4BACZkC,QAAQlC,IAAI,iCACZkC,QAAQlC,IAAI,8BAEdmwG,SAAU,MAIlB,CAKQ+6E,iBAAAA,GACN,MAAO,CACL15L,GAAI,cACJ61G,MAAO,uBACPxiC,YAAa,kDACbumH,cAAe,IACfC,MAAO,CACL,CACE75L,GAAI,2BACJ61G,MAAO,2BACPxiC,YAAa,0CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,4CACZkC,QAAQlC,IAAI,mDACZkC,QAAQlC,IAAI,8BACZkC,QAAQlC,IAAI,mCACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,qCAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,eACJ61G,MAAO,eACPxiC,YAAa,8CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,mDACNhE,KAAKsvL,cAAc,MACzBppL,QAAQlC,IAAI,qCAEdmwG,SAAU,MAEZ,CACE3+G,GAAI,mBACJ61G,MAAO,mBACPxiC,YAAa,2CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,sDACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,wCAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,mBACJ61G,MAAO,mBACPxiC,YAAa,kCACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,6CACNhE,KAAKsvL,cAAc,MACzBppL,QAAQlC,IAAI,6BACZkC,QAAQlC,IAAI,mCAEdmwG,SAAU,OAIlB,CAKQg7E,uBAAAA,GACN,MAAO,CACL35L,GAAI,oBACJ61G,MAAO,0BACPxiC,YAAa,4EACbumH,cAAe,IACfC,MAAO,CACL,CACE75L,GAAI,aACJ61G,MAAO,aACPxiC,YAAa,4CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,iEACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,+BAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,kBACJ61G,MAAO,kBACPxiC,YAAa,sCACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,6CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,4CAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,qBACJ61G,MAAO,qBACPxiC,YAAa,+CACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,0DACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,8CAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,cACJ61G,MAAO,cACPxiC,YAAa,mCACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,6CACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,iDAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,qBACJ61G,MAAO,qBACPxiC,YAAa,iCACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,qDACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,6CAEdmwG,SAAU,KAEZ,CACE3+G,GAAI,cACJ61G,MAAO,cACPxiC,YAAa,qCACbjtC,OAAQugE,UACNj2F,QAAQlC,IAAI,gDACNhE,KAAKsvL,cAAc,KACzBppL,QAAQlC,IAAI,gCACZkC,QAAQlC,IAAI,wCAEdmwG,SAAU,MAIlB,CAKA,aAAMo7E,CAAQC,GACZ,MACMC,EADYzvL,KAAK6uL,mBACI97E,KAAKhgH,GAAKA,EAAEyC,KAAOg6L,GAE9C,IAAKC,EACH,MAAM,IAAIz/L,MAAM,kBAADiS,OAAmButL,EAAU,gBAG9CtpL,QAAQlC,IAAI,+BAAD/B,OAAsBwtL,EAASpkF,QAC1CnlG,QAAQlC,IAAI,6BAAD/B,OAAoBwtL,EAAS5mH,cACxC3iE,QAAQlC,IAAI,oCAAD/B,OAA2BwtL,EAASL,cAAgB,IAAI,aACnElpL,QAAQlC,IAAI,IAAI+gB,OAAO,KAEvB/kB,KAAK0sL,WAAY,EACjB1sL,KAAKysL,YAAc,EAEnB,IACE,IAAK,MAAMjQ,KAAQiT,EAASJ,MAC1BrvL,KAAKysL,cACLvmL,QAAQlC,IAAI,uBAAD/B,OAAcjC,KAAKysL,YAAW,KAAAxqL,OAAIwtL,EAASJ,MAAMl7L,OAAM,MAAA8N,OAAKu6K,EAAKnxE,QAC5EnlG,QAAQlC,IAAI,gBAAD/B,OAAOu6K,EAAK3zG,cACvB3iE,QAAQlC,IAAI,IAAI+gB,OAAO,WAEjBy3J,EAAK5gJ,SAEP57B,KAAKysL,YAAcgD,EAASJ,MAAMl7L,SACpC+R,QAAQlC,IAAI,kBAAD/B,OAAcu6K,EAAKroE,SAAW,IAAI,sBACvCn0G,KAAKsvL,cAAc9S,EAAKroE,WAIlCjuG,QAAQlC,IAAI,yCACZkC,QAAQlC,IAAI,0CAEd,CAAE,MAAO3T,GAEP,MADA6V,QAAQ7V,MAAM,sBAAkBA,GAC1BA,CACR,CAAC,QACC2P,KAAK0sL,WAAY,CACnB,CACF,CAKA,iBAAMgD,GACJ,MAAMC,EAAY3vL,KAAK6uL,mBAEvB3oL,QAAQlC,IAAI,sDACZkC,QAAQlC,IAAI,iCAAD/B,OAAwB0tL,EAAUx7L,SAC7C+R,QAAQlC,IAAI,IAAI+gB,OAAO,KAEvB,IAAK,MAAM0qK,KAAYE,QACf3vL,KAAKuvL,QAAQE,EAASj6L,IAC5B0Q,QAAQlC,IAAI,KAAO,IAAI+gB,OAAO,KAGhC7e,QAAQlC,IAAI,uCACZkC,QAAQlC,IAAI,iEACd,CAKA4rL,WAAAA,CAAY1+C,GACV,OAAOlxI,KAAK2sL,SAASz7C,IAAY,IACnC,CAKA2+C,aAAAA,GACE,OAAO7vL,KAAK0sL,SACd,CAKAoD,cAAAA,GACE,OAAO9vL,KAAKysL,WACd,CAKA,mBAAc6C,CAAcnoG,GAC1B,OAAO,IAAIv2D,QAAQG,GAAWP,WAAWO,EAASo2D,GACpD,GCvbF,GAnNgEwL,IAAkB,IAAjB,QAAEo9E,GAASp9E,EAC1E,MAAOg9F,EAAWI,IAAgB/wJ,EAAAA,EAAAA,UAAyB,KACpDgxJ,EAAkBC,IAAuBjxJ,EAAAA,EAAAA,UAAiB,KAC1D0tJ,EAAWwD,IAAgBlxJ,EAAAA,EAAAA,WAAS,IAEpCmxJ,EAASC,IAAcpxJ,EAAAA,EAAAA,UAAmB,KAEjDP,EAAAA,EAAAA,WAAU,KACR,MAAM4xJ,EAAgB7D,GAAeqC,mBACrCkB,EAAaM,IACZ,IAEH,MA4DMC,EAAuBX,EAAU58E,KAAKhgH,GAAKA,EAAEyC,KAAOw6L,GAE1D,OACElhB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,iFAAgFt+F,UAC7Fs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4EAA2Et+F,SAAA,EAExFs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,+BAA8Bt+F,SAAC,0BAC5C8+J,IACCjB,EAAAA,GAAAA,KAAA,UACElpI,QAASmqI,EACTxgE,UAAU,2DAA0Dt+F,SACrE,eAOL69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,iBAAgBt+F,UAC7B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,kCAAiCt+F,UAC9C69J,EAAAA,GAAAA,KAAA,UACElpI,QAtDQu2D,UAClB,IAAIuwF,EAAJ,CAEAwD,GAAa,GAEbE,EAAW,IAEX,IAEE,MAAMG,EAAcrqL,QAAQlC,IAC5BkC,QAAQlC,IAAM,WAAc,IAAD,IAAAo6G,EAAA14G,UAAAvR,OAATiR,EAAI,IAAA9L,MAAA8kH,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJj5G,EAAIi5G,GAAA34G,UAAA24G,GACpB,MAAMz5G,EAAUQ,EAAKuE,KAAK,KAC1BymL,EAAWj6C,GAAQ,IAAIA,EAAMvxI,IAC7B2rL,KAAenrL,EACjB,QAEMonL,GAAekD,cAGrBxpL,QAAQlC,IAAMusL,CAChB,CAAE,MAAOlgM,GACP6V,QAAQ7V,MAAM,eAAgBA,GAC9B+/L,EAAWj6C,GAAQ,IAAIA,EAAK,uBAADl0I,OAAoB5R,IACjD,CAAC,QACC6/L,GAAa,EACf,CAxBqB,GAsDXp/K,SAAU47K,EACVn9E,UAAU,8NAA6Nt+F,SAEtOy7K,EAAY,oCAA4B,oCAM/Cnd,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,OAAMt+F,SAAA,EACnB69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,8BACtD69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wCAAuCt+F,SACnD0+K,EAAUxkI,IAAKskI,IACdlgB,EAAAA,GAAAA,MAAA,UAEE3pI,QAASA,IAAMqqJ,EAAoBR,EAASj6L,IAC5C+5G,UAAS,sDAAAttG,OACP+tL,IAAqBP,EAASj6L,GAC1B,yBACA,iDACHyb,SAAA,EAEH69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,cAAat+F,SAAEw+K,EAASpkF,SACvCkkE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,0BAAyBt+F,SAAA,CACrCw+K,EAASL,cAAgB,IAAK,SAV5BK,EAASj6L,UAkBrBw6L,IACClhB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,OAAMt+F,UACnB69J,EAAAA,GAAAA,KAAA,UACElpI,QAASA,IAtHLu2D,WACd,IAAIuwF,EAAJ,CAEAwD,GAAa,GAEbE,EAAW,IAEX,IAEE,MAAMG,EAAcrqL,QAAQlC,IAC5BkC,QAAQlC,IAAM,WAAc,IAAD,IAAA45G,EAAAl4G,UAAAvR,OAATiR,EAAI,IAAA9L,MAAAskH,GAAAzjC,EAAA,EAAAA,EAAAyjC,EAAAzjC,IAAJ/0E,EAAI+0E,GAAAz0E,UAAAy0E,GACpB,MAAMv1E,EAAUQ,EAAKuE,KAAK,KAC1BymL,EAAWj6C,GAAQ,IAAIA,EAAMvxI,IAC7B2rL,KAAenrL,EACjB,QAEMonL,GAAe+C,QAAQC,GAG7BtpL,QAAQlC,IAAMusL,CAChB,CAAE,MAAOlgM,GACP6V,QAAQ7V,MAAM,eAAgBA,GAC9B+/L,EAAWj6C,GAAQ,IAAIA,EAAK,uBAADl0I,OAAoB5R,IACjD,CAAC,QACC6/L,GAAa,EACf,CAxBqB,GAqHIX,CAAQS,GACvBl/K,SAAU47K,EACVn9E,UAAU,+JAA8Jt+F,SAEvKy7K,EAAY,0BAAe,oBAAAzqL,OAAiC,OAApBquL,QAAoB,IAApBA,OAAoB,EAApBA,EAAsBjlF,YAMrEkkE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,OAAMt+F,SAAA,EACnBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,iBACjD69J,EAAAA,GAAAA,KAAA,UACElpI,QA5EK4qJ,KACfJ,EAAW,KA4ED7gF,UAAU,2DAA0Dt+F,SACrE,kBAKH69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,+CAA8Ct+F,UAC3D69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,6CAA4Ct+F,SACrC,IAAnBk/K,EAAQh8L,QACP26K,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,gBAAet+F,SAAC,+EAE/Bk/K,EAAQhlI,IAAI,CAAC1E,EAAMhiD,KACjBqqK,EAAAA,GAAAA,KAAA,OAAiBv/D,UAAU,sBAAqBt+F,SAC7Cw1C,GADOhiD,WAUnBioL,IACC5d,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,gDAA+Ct+F,UAC5Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,kEACfu/D,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,gBAAet+F,SAAC,6BAMtCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,0CAAyCt+F,SAAC,mBACxDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,gDAA+Ct+F,SAAA,EAC5Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,gBAAet+F,SAAC,wBAElCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,gBAAet+F,SAAC,8BAElCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,gBAAet+F,SAAC,6BAElCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,gBAAet+F,SAAC,oBAElCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,gBAAet+F,SAAC,qBAElCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,gBAAet+F,SAAC,gCC3L9C,GAnB+Bw/K,KAC7B,MAAOC,EAAUC,IAAe3xJ,EAAAA,EAAAA,WAAS,GAEzC,OACEuwI,EAAAA,GAAAA,MAAAI,GAAAA,SAAA,CAAA1+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,UACElpI,QAASA,IAAM+qJ,GAAY,GAC3BphF,UAAU,6KAA4Kt+F,SACvL,6BAIAy/K,IACC5hB,EAAAA,GAAAA,KAAC8hB,GAAmB,CAAC7gB,QAASA,IAAM4gB,GAAY,SCHlDE,GAAYh5E,GAAiB,YAAa,CAC9C,CAAC,OAAQ,CAAEjgH,EAAG,4CAA6CjH,IAAK,WAChE,CAAC,OAAQ,CAAEiH,EAAG,0CAA2CjH,IAAK,WAC9D,CAAC,OAAQ,CAAEiH,EAAG,2CAA4CjH,IAAK,WAC/D,CAAC,OAAQ,CAAEiH,EAAG,UAAWjH,IAAK,WAC9B,CAAC,OAAQ,CAAEiH,EAAG,WAAYjH,IAAK,WAC/B,CAAC,OAAQ,CAAEiH,EAAG,WAAYjH,IAAK,WAC/B,CAAC,OAAQ,CAAEiH,EAAG,WAAYjH,IAAK,aCPpBmgM,GAAgDn+F,IAAkC,IAAjC,WAAEo+F,EAAU,YAAEC,GAAar+F,EACvF,MAAO6pF,EAAMC,IAAWz9I,EAAAA,EAAAA,UAAuC,SACxDiyJ,EAAcC,IAAmBlyJ,EAAAA,EAAAA,UAA0B,OAC3DmrJ,EAAUgH,IAAenyJ,EAAAA,EAAAA,UAAS,KAClCu0E,EAASu6D,IAAc9uI,EAAAA,EAAAA,WAAS,GAEjCoyJ,EAAuBz9E,IAC3Bu9E,EAAgBv9E,GAGH,kBAATA,GAAqC,cAATA,GAAiC,cAATA,EACtD8oE,EAAQ,QAGR4U,EAAe19E,IAIb09E,EAAiBl1F,UACrB,MAAMm1F,EAAY39E,GAAQs9E,EAC1B,GAAKK,EAAL,CAEAxjB,GAAW,GACX,IAEE,MAAMkb,EAAc,CAClB3E,cAAe2M,EACfr9E,KAAM29E,EACNnH,SAAUA,GAAY,KACtBG,aAAa,IAAI1kL,MAAO8qK,cACxBwY,aAAa,GAGf3gI,aAAad,QAAQ,eAAgBpZ,KAAKC,UAAU06I,IAGpDtiL,OAAO2X,cAAc,IAAIygK,YAAY,gBAAiB,CACpDv9J,OAAQ,CAAEoyF,KAAM29E,EAAWnH,eAG7Br3E,GAAMQ,QAAQ,wCAADrxG,OAAyC+lL,EAAmBsJ,KACzEP,EAAWO,EAAWnH,EACxB,CAAE,MAAO95L,GACP6V,QAAQ7V,MAAM,+BAAgCA,GAC9CyiH,GAAMziH,MAAM,gCACd,CAAC,QACCy9K,GAAW,EACb,CA3BsB,GA8BlBka,EAAsBr0E,IACqB,CAC7C,gBAAiB,gBACjBk0E,UAAW,qBACXC,UAAW,YACXv2L,OAAQ,SACR,mBAAoB,oBAEFoiH,IAGhB49E,EAAsB59E,IACqB,CAC7C,gBAAiB,6EACjBk0E,UAAW,iFACXC,UAAW,mEACXv2L,OAAQ,6EACR,mBAAoB,8EAEFoiH,IAGhB69E,EAAe79E,IACnB,OAAQA,GACN,IAAK,gBACH,OAAOm7D,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,0BAC3B,IAAK,YACH,OAAOu/D,EAAAA,GAAAA,KAACoK,GAAK,CAAC3pE,UAAU,2BAC1B,IAAK,YACH,OAAOu/D,EAAAA,GAAAA,KAACz2D,GAAI,CAAC9I,UAAU,4BACzB,IAAK,SACH,OAAOu/D,EAAAA,GAAAA,KAACz2D,GAAI,CAAC9I,UAAU,4BACzB,IAAK,mBACH,OAAOu/D,EAAAA,GAAAA,KAAC+hB,GAAS,CAACthF,UAAU,4BAC9B,QACE,OAAOu/D,EAAAA,GAAAA,KAACz2D,GAAI,CAAC9I,UAAU,4BAI7B,MAAa,SAATitE,GAEA1N,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,gHAA+Gt+F,UAC5H69J,EAAAA,GAAAA,KAACc,GAAI,CAACrgE,UAAU,mBAAkBt+F,UAChCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,MAAKt+F,SAAA,EAClBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,qCAAoCt+F,SAAC,iCACnD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,kFAGtC69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,sCAAqCt+F,UAClDs+J,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,yBAAwBt+F,SAAA,EACnC69J,EAAAA,GAAAA,KAAA,UAAA79J,SAAQ,oBAAwB,KAAC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,0BAAyBt+F,SAAE+/K,aAKlFzhB,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,uDAAsDt+F,SAAA,EAEnE69J,EAAAA,GAAAA,KAACc,GAAI,CACHrgE,UAAU,kHACV3pE,QAASA,IAAMwrJ,EAAoB,iBAAiBngL,UAEpDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,cAAat+F,SAAA,EAC1B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,2BAA0Bt+F,SACtCugL,EAAY,oBAEf1iB,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,mBACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SACvCsgL,EAAmB,oBAEtBziB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,wBAAuBt+F,SAAC,qCAO3C69J,EAAAA,GAAAA,KAACc,GAAI,CACHrgE,UAAU,mHACV3pE,QAASA,IAAMwrJ,EAAoB,aAAangL,UAEhDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,cAAat+F,SAAA,EAC1B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,2BAA0Bt+F,SACtCugL,EAAY,gBAEf1iB,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,wBACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SACvCsgL,EAAmB,gBAEtBziB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,yBAAwBt+F,SAAC,qCAO5C69J,EAAAA,GAAAA,KAACc,GAAI,CACHrgE,UAAU,oHACV3pE,QAASA,IAAMwrJ,EAAoB,aAAangL,UAEhDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,cAAat+F,SAAA,EAC1B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,2BAA0Bt+F,SACtCugL,EAAY,gBAEf1iB,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,eACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SACvCsgL,EAAmB,gBAEtBziB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,0BAAyBt+F,SAAC,qCAO7C69J,EAAAA,GAAAA,KAACc,GAAI,CACHrgE,UAAU,oHACV3pE,QAASA,IAAMwrJ,EAAoB,UAAUngL,UAE7Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,cAAat+F,SAAA,EAC1B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,2BAA0Bt+F,SACtCugL,EAAY,aAEf1iB,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,YACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SACvCsgL,EAAmB,aAEtBziB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,0BAAyBt+F,SAAC,kCAO7C69J,EAAAA,GAAAA,KAACc,GAAI,CACHrgE,UAAU,oHACV3pE,QAASA,IAAMwrJ,EAAoB,oBAAoBngL,UAEvDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,cAAat+F,SAAA,EAC1B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,2BAA0Bt+F,SACtCugL,EAAY,uBAEf1iB,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,sBACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,8BAA6Bt+F,SACvCsgL,EAAmB,uBAEtBziB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,0BAAyBt+F,SAAC,2CAY5C,SAATurK,GAEA1N,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,gHAA+Gt+F,UAC5H69J,EAAAA,GAAAA,KAACc,GAAI,CAACrgE,UAAU,mBAAkBt+F,UAChCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,MAAKt+F,SAAA,EAClBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mBAAkBt+F,SAAA,EAC/B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,2BAA0Bt+F,SACtCggL,GAAgBO,EAAYP,MAE/BniB,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,qCAAoCt+F,SAAC,4BAGnDs+J,EAAAA,GAAAA,MAAA,KAAGhgE,UAAU,iBAAgBt+F,SAAA,CAAC,QACtB+2K,EAAmBiJ,GAAe,kFAI5C1hB,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,SAAOv/D,UAAU,4CAA2Ct+F,SAAC,qBAG7D69J,EAAAA,GAAAA,KAACuF,GAAK,CACJ3kK,MAAOy6K,EACP/U,SAAWv9K,GAAMs5L,EAAYt5L,EAAEkf,OAAOrH,OACtC4lK,YAAY,2BACZ/lE,UAAU,eAIdggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iCAAgCt+F,SAAA,EAC7C69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,wBACpDs+J,EAAAA,GAAAA,MAAA,MAAIhgE,UAAU,mCAAkCt+F,SAAA,EAC9C69J,EAAAA,GAAAA,KAAA,MAAA79J,SAAI,uDACJ69J,EAAAA,GAAAA,KAAA,MAAA79J,SAAI,2DACJ69J,EAAAA,GAAAA,KAAA,MAAA79J,SAAI,gEACJ69J,EAAAA,GAAAA,KAAA,MAAA79J,SAAI,2EAIRs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAACK,GAAM,CACLC,QAAQ,UACRxpI,QAASA,IAAM62I,EAAQ,QACvBltE,UAAU,SAAQt+F,SACnB,UAGD69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,IAAMyrJ,IACfvgL,UAAWq5K,EAASz8K,QAAU6lG,EAC9BhE,UAAU,SAAQt+F,SAEjBsiG,EAAU,iBAAmB,0CAUvC,MC/QHk+E,GAAa55E,GAAiB,aAAc,CAChD,CAAC,OAAQ,CAAEjgH,EAAG,WAAYjH,IAAK,WAC/B,CAAC,OAAQ,CAAEiH,EAAG,gBAAiBjH,IAAK,aCLzB+gM,GAAoD/+F,IAAoB,IAAnB,UAAEg/F,GAAWh/F,EAC7E,MAAOi/F,EAAYC,IAAiB7yJ,EAAAA,EAAAA,WAAS,GAiC7C,OACE8vI,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,gHAA+Gt+F,UAC5H69J,EAAAA,GAAAA,KAACc,GAAI,CAACrgE,UAAU,kBAAiBt+F,UAC/Bs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,kBAAiBt+F,SAAA,EAC9B69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,mFAAkFt+F,UAC/F69J,EAAAA,GAAAA,KAAC12D,GAAM,CAAC7I,UAAU,0BAGpBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,qCAAoCt+F,SAAC,iCAInD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,4HAInC69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAhDYu2D,UACpB01F,GAAc,GACd,IAEE,GAA+B,qBAApBnrL,OAAOsmK,SAEhB,YADAl6D,GAAMziH,MAAM,mEAKd,MAAMi8K,QAAiB5lK,OAAOsmK,SAAS5sC,QAAQ,CAC7C59B,OAAQ,wBAGV,GAAI8pE,EAASn4K,OAAS,EAAG,CACvB,MAAMwyH,EAAU2lD,EAAS,GACzBqlB,EAAUhrE,GACV7T,GAAMQ,QAAQ,iCAChB,CACF,CAAE,MAAOjjH,GACP6V,QAAQ7V,MAAM,2BAA4BA,GACvB,OAAfA,EAAMy0B,KACRguF,GAAMziH,MAAM,2CAEZyiH,GAAMziH,MAAM,8CAEhB,CAAC,QACCwhM,GAAc,EAChB,GAqBQ/gL,SAAU8gL,EACVriF,UAAU,SACVpsG,KAAK,KAAI8N,SAER2gL,GACCriB,EAAAA,GAAAA,MAAAI,GAAAA,SAAA,CAAA1+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,mEAAuE,oBAIxFggE,EAAAA,GAAAA,MAAAI,GAAAA,SAAA,CAAA1+J,SAAA,EACE69J,EAAAA,GAAAA,KAAC12D,GAAM,CAAC7I,UAAU,iBAAiB,kBAEnCu/D,EAAAA,GAAAA,KAAC2iB,GAAU,CAACliF,UAAU,uBAK5BggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,sCAAqCt+F,SAAA,EAClD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,eACpDs+J,EAAAA,GAAAA,MAAA,MAAIhgE,UAAU,mCAAkCt+F,SAAA,EAC9C69J,EAAAA,GAAAA,KAAA,MAAA79J,SAAI,iDACJ69J,EAAAA,GAAAA,KAAA,MAAA79J,SAAI,yDACJ69J,EAAAA,GAAAA,KAAA,MAAA79J,SAAI,sCACJ69J,EAAAA,GAAAA,KAAA,MAAA79J,SAAI,iDACJ69J,EAAAA,GAAAA,KAAA,MAAA79J,SAAI,iDChFZ6gL,GAAsF,CAC1F,UAAa,cACb,cAAiB,gBACjB,UAAa,qBACb,eAAkB,sBAClB,qBAAwB,uBACxB,eAAkB,sBAClB,oBAAuB,sBACvB,aAAgB,uBAChB,YAAe,oBACf,cAAiB,sBACjB,qBAAwB,uBACxB,YAAe,gBACf,iBAAoB,mBACpB,mBAAsB,sBC2CXC,GAA2BA,KACtC,MAAM,YAAEvJ,EAAW,iBAAEkC,EAAgB,YAAExB,EAAW,mBAAEgB,EAAkB,YAAElB,EAAW,eAAEP,GAAmBqC,MACjGrS,EAAaC,IAAkB15I,EAAAA,EAAAA,UAAS,KACxCgzJ,EAAaC,IAAkBjzJ,EAAAA,EAAAA,UAA0F,UACzHkzJ,EAAgBC,IAAqBnzJ,EAAAA,EAAAA,UAAgB,KACrDozJ,EAAmBC,IAAwBrzJ,EAAAA,EAAAA,WAAS,IACpDszJ,EAAoBC,IAAyBvzJ,EAAAA,EAAAA,WAAS,IACtDwzJ,EAAqBC,IAA0BzzJ,EAAAA,EAAAA,WAAS,IACxD0zJ,EAAeC,IAAoB3zJ,EAAAA,EAAAA,WAAS,IAC5C4zJ,EAAqBC,IAA0B7zJ,EAAAA,EAAAA,WAAS,IACxD8zJ,EAA2BC,IAAgC/zJ,EAAAA,EAAAA,WAAS,IACpEg0J,EAAkBC,IAAuBj0J,EAAAA,EAAAA,UAA+B,OACxEk0J,EAAgBC,IAAqBn0J,EAAAA,EAAAA,WAAS,IAC9Co0J,EAAcC,IAAmBr0J,EAAAA,EAAAA,UAAc,OAG/Cs0J,EAAgBC,IAAqBv0J,EAAAA,EAAAA,UAA0B,IACjDqP,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,OAIrE6rI,EAAoBF,EAAeh1I,OAAOm1I,GAC9CA,EAAIh+L,KAAK6V,cAAc6C,SAASsqK,EAAYntK,gBAGxCooL,GAAmBn1J,EAAAA,EAAAA,aAAY,KACnC,MAAMo1J,EAAatlJ,KAAKuZ,MAAMW,aAAaZ,QAAQ,oBAAsB,MACzE4rI,EAAkBI,GAClBC,EAAoBD,IACnB,IAEGC,EAAuBnR,IAC3B,MAAMtiI,EAAe,GAGf0+H,EAAgBxwI,KAAKuZ,MAAMW,aAAaZ,QAAQ,qBAAuB,MAC7ExH,EAAM7hD,QAAQugL,GAGd4D,EAAUp3K,QAAQooL,IAEhBtzI,EAAM7hD,KAAK,CACT9I,GAAG,UAADyM,OAAYwxL,EAAIj+L,IAClBmpL,WAAY8U,EAAInc,QAChBsH,aAAc6U,EAAIh+L,KAClBmmC,OAAQ,qBACRj2B,UAAW8tL,EAAI9tL,UACfioK,KAAM6lB,EAAIl5B,MACVtgD,QAAS,0DACTlqH,KAAM,WACNslD,KAAMo+I,EAAIjW,QACVV,IAAK2W,EAAI3W,IACT1iF,OAAQq5F,EAAIr5F,SAIiB,cAA3Bq5F,EAAIzX,oBACN77H,EAAM7hD,KAAK,CACT9I,GAAG,UAADyM,OAAYwxL,EAAIj+L,IAClBmpL,WAAY8U,EAAInc,QAChBsH,aAAc6U,EAAIh+L,KAClBmmC,OAAQ,oBACRj2B,UAAW8tL,EAAI9tL,UACfioK,KAAM6lB,EAAIl5B,MACVtgD,QAAQ,iDAADh4G,OAAmDosC,KAAKC,UAAUmlJ,EAAIhY,iBAC7E1rL,KAAM,iBACNisL,mBAAoB,YACpBtxC,WAAY+oD,EAAI/oD,WAChB+zC,mBAAoBgV,EAAIhV,mBACxBppI,KAAMo+I,EAAIjW,QACVV,IAAK2W,EAAI3W,MAKT2W,EAAII,YACNJ,EAAII,WAAWr2H,QAAQnyD,QAAQ,CAACwyD,EAAQp5D,KAClCo5D,EAAOypD,QACTnnE,EAAM7hD,KAAK,CACT9I,GAAG,QAADyM,OAAUwxL,EAAIj+L,GAAE,KAAAyM,OAAIwC,GACtBk6K,WAAY8U,EAAInc,QAChBsH,aAAc6U,EAAIh+L,KAClBmmC,OAAQ,kBACRj2B,UAAW8tL,EAAI9tL,UAAqB,IAARlB,EAC5BmpK,KAAM/vG,EAAO8oD,QACb1M,QAAQ,qCAADh4G,OAAuC47D,EAAO8oD,SACrD52H,KAAM,YACNslD,KAAMo+I,EAAIjW,YAOdiW,EAAIK,YACN3zI,EAAM7hD,KAAK,CACT9I,GAAG,MAADyM,OAAQwxL,EAAIj+L,IACdmpL,WAAY8U,EAAInc,QAChBsH,aAAc6U,EAAIh+L,KAClBmmC,OAAQ,wBACRj2B,UAAW8tL,EAAI9tL,UAAY,IAC3BioK,KAAM,YACN3zD,QAAQ,qDAADh4G,OAAuDwxL,EAAIK,WAAWC,MAAK,cAAA9xL,OAAawxL,EAAIK,WAAW/5I,QAC9GhqD,KAAM,WACN+qE,SAAU24H,EAAIK,WAAWh5H,SACzBzlB,KAAMo+I,EAAIjW,YAMhBr9H,EAAM20C,KAAK,CAACr9F,EAAGE,IAAMA,EAAEgO,UAAYlO,EAAEkO,WAErCwsL,EAAkBhyI,KAIpB1hB,EAAAA,EAAAA,WAAU,KACRi1J,IAGA,MAAMM,EAAuBn8L,IACb,oBAAVA,EAAElH,KACJ+iM,KAKEO,EAAyBA,KAC7BP,KAIIQ,EAA8BA,KAClCR,KAOF,OAJAhtL,OAAOjK,iBAAiB,UAAWu3L,GACnCttL,OAAOjK,iBAAiB,wBAAyBw3L,GACjDvtL,OAAOjK,iBAAiB,wBAAyBy3L,GAE1C,KACLxtL,OAAO9J,oBAAoB,UAAWo3L,GACtCttL,OAAO9J,oBAAoB,wBAAyBq3L,GACpDvtL,OAAO9J,oBAAoB,wBAAyBs3L,KAErD,CAACR,IAEJ,MAAMtS,EAAiBhnF,IACrB,OAAQA,GACN,IAAK,aACH,OAAO00E,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,2BAChC,IAAK,sBACH,OAAOu/D,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,4BAC1B,IAAK,WACH,OAAOu/D,EAAAA,GAAAA,KAACC,GAAW,CAACx/D,UAAU,0BAChC,IAAK,UACH,OAAOu/D,EAAAA,GAAAA,KAAC/1D,GAAW,CAACxJ,UAAU,yBAChC,QACE,OAAOu/D,EAAAA,GAAAA,KAACyG,GAAK,CAAChmE,UAAU,4BAIxB4kF,EAAuBA,CAACv4J,EAAgBtxB,KAG5C,OAFA2oL,EAAoB3oL,GAEZsxB,GACN,IAAK,SACH22J,GAAsB,GACtB,MACF,IAAK,OACHE,GAAuB,GACvB,MACF,IAAK,oBACHM,GAA6B,GAC7B,MACF,IAAK,UACHJ,GAAiB,KA8BjByB,EAAO,CACX,CAAE5+L,GAAI,QAAS8uE,MAAO,kBAAmBuxC,KAAMqjE,IAC/C,CAAE1jL,GAAI,YAAa8uE,MAAO,kBAAmBuxC,KAAMsjE,IACnD,CAAE3jL,GAAI,aAAc8uE,MAAO,qBAAsBuxC,KAAMujE,IACvD,CAAE5jL,GAAI,kBAAmB8uE,MAAO,gBAAiBuxC,KAAMqjE,IACvD,CAAE1jL,GAAI,WAAY8uE,MAAO,cAAeuxC,KAAMwjE,IAC9C,CAAE7jL,GAAI,QAAS8uE,MAAO,mBAAoBuxC,KAAMqC,KAIlD,OAAgB,OAAXswE,QAAW,IAAXA,GAAAA,EAAanE,eAeb6E,GAA0B,OAAXV,QAAW,IAAXA,GAAAA,EAAanE,eAE7BvV,EAAAA,GAAAA,KAACgiB,GAAc,CACbC,WAAYA,CAACp9E,EAAMw2E,KACjBD,EAAmBv2E,EAAMw2E,GACzBr3E,GAAMQ,QAAQ,iCAEhB09E,YAAaxI,EAAYnE,iBAMhB,OAAXmE,QAAW,IAAXA,GAAAA,EAAaY,cACfljL,QAAQlC,IAAI,qBAAsBwkL,EAAYY,aChTbz1E,KACnCztG,QAAQlC,IAAI,kCACZkC,QAAQlC,IAAI,aAAc2vG,GAE1B,MAAMgyE,EAAcoC,GAAsBp0E,GAC1CztG,QAAQlC,IAAI,eAAgB2hL,GAE5Bz/K,QAAQlC,IAAI,mBAAoB2hL,EAAYqB,eAC5C9gL,QAAQlC,IAAI,0BAA2B2hL,EAAYwB,sBACnDjhL,QAAQlC,IAAI,yBAA0B2hL,EAAY0B,qBAClDnhL,QAAQlC,IAAI,sBAAuB2hL,EAAYgC,kBAC/CzhL,QAAQlC,IAAI,0BAA2B2hL,EAAY8B,sBACnDvhL,QAAQlC,IAAI,yBAA0B2hL,EAAYiC,oBAElD1hL,QAAQlC,IAAI,sBDmSVqwL,CAAqB7L,EAAYY,eAIjC7Z,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4BAA2Bt+F,SAAA,EAExC69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,yCAAwCt+F,UACrD69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,yCAAwCt+F,UACrDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,oEAAmEt+F,UAChF69J,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,0BAEpBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,sBACzDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,0CAC1B,OAAXu3K,QAAW,IAAXA,OAAW,EAAXA,EAAaY,eACZ7Z,EAAAA,GAAAA,MAAAI,GAAAA,SAAA,CAAA1+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,oCAAmCt+F,SAChD+2K,GAAmBQ,EAAYY,mBAI1B,OAAXJ,QAAW,IAAXA,OAAW,EAAXA,EAAamB,YACZ5a,EAAAA,GAAAA,MAAAI,GAAAA,SAAA,CAAA1+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,YACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,qCAAoCt+F,SACjD+3K,EAAYmB,wBAOjB5a,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAAC2hB,GAAY,KACb3hB,EAAAA,GAAAA,KAACK,GAAM,CACLC,QAAQ,UACRjsK,KAAK,KACLyiC,QAASA,IAAMutJ,GAAmBD,GAAgBjiL,SACnD,WAGW,OAAXu3K,QAAW,IAAXA,OAAW,EAAXA,EAAaY,eACZ7Z,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yBAAwBt+F,SAAA,CAAC,oBACpBy5K,EAAiB,iBAAmB,SAAM,sBASvEwI,IACCpkB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,6CAA4Ct+F,UACzDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oBAAmBt+F,SAAA,EAChCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrD69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,iBACjDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAACK,GAAM,CACLC,QAAQ,UACRjsK,KAAK,KACLyiC,QAhIMu2D,UACpB,IACE,MAAMlxC,QAAgB8gI,GAAUK,cAChCiH,EAAgBpoI,GAChB6nD,GAAMQ,QAAQ,wBAChB,CAAE,MAAOjjH,GACP6V,QAAQ7V,MAAM,sBAAuBA,GACrCyiH,GAAMziH,MAAM,qBACd,GAwHqC4gB,SACxB,eAGD69J,EAAAA,GAAAA,KAACK,GAAM,CACLC,QAAQ,UACRjsK,KAAK,KACLyiC,QA5HW0uJ,KACzBpuL,QAAQlC,IAAI,+BE7PdkC,QAAQlC,IAAI,8CAEc,CAAC,gBAAiB,YAAa,YAAa,SAAU,oBAE1EqH,QAAQsoG,IACZztG,QAAQlC,IAAI,gCAAD/B,OAAuB0xG,IAClCztG,QAAQlC,IAAI,IAAI+gB,OAAO,KAEvB,MAAM4gK,EAAcoC,GAAsBp0E,GAG1CztG,QAAQlC,IAAI,2BAAD/B,OAAuB0jL,EAAYqB,cAAgB,MAAQ,OAGtE9gL,QAAQlC,IAAI,wCAAD/B,OAA+B0jL,EAAYwB,qBAAuB,MAAQ,OACrFjhL,QAAQlC,IAAI,uCAAD/B,OAA8B0jL,EAAY0B,oBAAsB,MAAQ,OACnFnhL,QAAQlC,IAAI,oCAAD/B,OAA2B0jL,EAAYgC,iBAAmB,MAAQ,OAC7EzhL,QAAQlC,IAAI,wCAAD/B,OAA+B0jL,EAAY8B,qBAAuB,MAAQ,OAGrFvhL,QAAQlC,IAAI,uCAAD/B,OAA8B0jL,EAAYiC,mBAAqB,MAAQ,OAGlF1hL,QAAQlC,IAAI,qCAAD/B,OAAuB0jL,EAAYoB,YAAc,MAAQ,OACpE7gL,QAAQlC,IAAI,uCAAD/B,OAA8B0jL,EAAYsB,mBAAqB,MAAQ,OAClF/gL,QAAQlC,IAAI,wCAAD/B,OAA+B0jL,EAAYuB,oBAAsB,MAAQ,SAGtFhhL,QAAQlC,IAAI,oCACZkC,QAAQlC,IAAI,0DACZkC,QAAQlC,IAAI,sDACZkC,QAAQlC,IAAI,0DACZkC,QAAQlC,IAAI,uDACZkC,QAAQlC,IAAI,iEF8NV8uG,GAAMQ,QAAQ,+CAyH4BriG,SAC7B,sBAGD69J,EAAAA,GAAAA,KAACK,GAAM,CACLC,QAAQ,UACRjsK,KAAK,KACLyiC,QA7HkB2uJ,KAChCruL,QAAQlC,IAAI,uCDlPqBwwL,MACnCtuL,QAAQlC,IAAI,gDAEZ,MAAMywL,EAAqB,gBACrB9O,EAAcoC,GAAsB0M,GAE1CvuL,QAAQlC,IAAI,iBAAD/B,OAAkBwyL,IAC7BvuL,QAAQlC,IAAI,IAAI+gB,OAAO,KAGvB,MAAM6W,EAAS,gBACT4tJ,EAAasI,GAAoBl2J,GAEvC11B,QAAQlC,IAAI,WAAD/B,OAAY25B,IACvB11B,QAAQlC,IAAI,sBAAD/B,OAAuBunL,IAClCtjL,QAAQlC,IAAI,qBAAD/B,OAAsB0jL,EAAY6D,KAC7CtjL,QAAQlC,IAAI,WAAD/B,OAAY0jL,EAAY6D,GAAe,iBAAc,kBAGhEtjL,QAAQlC,IAAI,uCACZlN,OAAO23G,QAAQqjF,IAAqBzmL,QAAQsnF,IAA2B,IAAzB/2D,EAAQ4tJ,GAAW72F,EAC/D,MAAM42F,EAAgB5D,EAAY6D,GAClCtjL,QAAQlC,IAAI,GAAD/B,OAAI25B,EAAM,MAAA35B,OAAKsnL,EAAgB,SAAM,aAG3C5D,EAAY6D,IC0NjBgL,GACA1hF,GAAMQ,QAAQ,uDA0HmCriG,SACpC,wBAKJmiL,IACCtkB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,8BAA6Bt+F,UAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uCAAsCt+F,SAClDo9B,KAAKC,UAAU8kJ,EAAc,KAAM,aAShD7jB,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8CAA6Ct+F,SAAA,EAE1Ds+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yCAAwCt+F,SAAA,EACrD69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,kBAAiBt+F,UAC9Bs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,WAAUt+F,SAAA,EACvB69J,EAAAA,GAAAA,KAAC2C,GAAM,CAACliE,UAAU,+EAClBu/D,EAAAA,GAAAA,KAACuF,GAAK,CACJiB,YAAY,sBACZ5lK,MAAO+oK,EACPrD,SAAWv9K,GAAM6gL,EAAe7gL,EAAEkf,OAAOrH,OACzC6/F,UAAU,gBAIhBggE,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,CAC5By5K,EAAiB,0BAChBnb,EAAAA,GAAAA,MAACJ,GAAM,CACLvpI,QAASA,IAAMysJ,GAAqB,GACpC9iF,UAAU,8BAA6Bt+F,SAAA,EAEvC69J,EAAAA,GAAAA,KAAC4C,GAAI,CAACniE,UAAU,aAChBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAM,yBAGTy5K,EAAiB,mBAChBnb,EAAAA,GAAAA,MAACJ,GAAM,CACLC,QAAQ,UACRxpI,QAASA,IAAMitJ,GAAuB,GACtCtjF,UAAU,8BAA6Bt+F,SAAA,EAEvC69J,EAAAA,GAAAA,KAAC4C,GAAI,CAACniE,UAAU,aAChBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAM,uBAOd69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,6CAA4Ct+F,SACxDmjL,EAAKjpI,IAAKupI,IACT,MAAMC,EAAOD,EAAI7+E,KACjB,OACE05D,EAAAA,GAAAA,MAAA,UAEE3pI,QAASA,IAAMqsJ,EAAeyC,EAAIl/L,IAClC+5G,UAAS,0FAAAttG,OACP+vL,IAAgB0C,EAAIl/L,GAChB,yBACA,sDACHyb,SAAA,EAEH69J,EAAAA,GAAAA,KAAC6lB,EAAI,CAACplF,UAAU,aAChBu/D,EAAAA,GAAAA,KAAA,QAAA79J,SAAOyjL,EAAIpwH,UATNowH,EAAIl/L,SAgBjB+5K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,OAAMt+F,SAAA,CACF,UAAhB+gL,IACCljB,EAAAA,GAAAA,KAACkT,GAAY,CAAA/wK,UACX69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,YAAWt+F,UACxBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oBAAmBt+F,SAAA,EAChC69J,EAAAA,GAAAA,KAACoK,GAAK,CAAC3pE,UAAU,2CACjBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,qBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,6EAQrB,cAAhB+gL,IACCljB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,YAAWt+F,SACM,IAA7BuiL,EAAkBr/L,QACjBo7K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oBAAmBt+F,SAAA,EAChC69J,EAAAA,GAAAA,KAACqK,GAAQ,CAAC5pE,UAAU,2CACpBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,wBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,oFAKhC69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uDAAsDt+F,SAClEuiL,EAAkBroI,IAAK7gD,IACtBwkK,EAAAA,GAAAA,KAACc,GAAI,CAAmBrgE,UAAU,0CAAyCt+F,UACzEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,MAAKt+F,SAAA,EAClBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wCAAuCt+F,SAAA,EACpDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1C69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,uEAAsEt+F,UACnF69J,EAAAA,GAAAA,KAACqK,GAAQ,CAAC5pE,UAAU,6BAEtBggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAE3G,EAAS7U,QACjDq5K,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAClC,IAAIrL,KAAK0E,EAAS3E,WAAW0wK,8BAIpC9G,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,CACzCmwK,EAAc92K,EAAS8vF,SACxB00E,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,oCAAmCt+F,SAChD3G,EAAS8vF,OAAOluF,QAAQ,IAAK,cAKpCqjK,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7Bs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,WACjCs+J,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,+BAA8Bt+F,SAAA,CAC3C3G,EAASkzK,QAAQh9K,MAAM,EAAG,GAAG,aAGlC+uK,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,eACjCs+J,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,+BAA8Bt+F,SAAA,CAC3C3G,EAASwyK,IAAIt8K,MAAM,EAAG,GAAG,YAG7B8J,EAASogI,aACR6kC,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,sBACjCs+J,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,kCAAiCt+F,SAAA,CAC9C3G,EAASogI,WAAWlqI,MAAM,EAAG,GAAG,YAItC8J,EAAS0xK,qBACRzM,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,qBACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,6BAA4Bt+F,SACzC3G,EAAS0xK,4BAMlBzM,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,uBAAsBt+F,SAAA,CAClCy5K,EAAiB,wBAChBnb,EAAAA,GAAAA,MAACJ,GAAM,CACLhsK,KAAK,KACLisK,QAAQ,UACRxpI,QAASA,IAAMuuJ,EAAqB,SAAU7pL,GAAU2G,SAAA,EAExD69J,EAAAA,GAAAA,KAAC8lB,GAAI,CAACrlF,UAAU,iBAAiB,aAInCggE,EAAAA,GAAAA,MAACJ,GAAM,CACLhsK,KAAK,KACLisK,QAAQ,UACRt+J,UAAQ,EACRy+F,UAAU,gCACVlE,MAAK,GAAAppG,OAAK+lL,IAA8B,OAAXQ,QAAW,IAAXA,OAAW,EAAXA,EAAaY,cAAe,UAAS,kCAAiCn4K,SAAA,EAEnG69J,EAAAA,GAAAA,KAACmF,GAAI,CAAC1kE,UAAU,iBAAiB,YAKpCm7E,EAAiB,qBAChBnb,EAAAA,GAAAA,MAACJ,GAAM,CACLhsK,KAAK,KACLisK,QAAQ,UACRxpI,QAASA,IAAMuuJ,EAAqB,OAAQ7pL,GAAU2G,SAAA,EAEtD69J,EAAAA,GAAAA,KAACsK,GAAO,CAAC7pE,UAAU,iBAAiB,WAItCggE,EAAAA,GAAAA,MAACJ,GAAM,CACLhsK,KAAK,KACLisK,QAAQ,UACRt+J,UAAQ,EACRy+F,UAAU,gCACVlE,MAAK,GAAAppG,OAAK+lL,IAA8B,OAAXQ,QAAW,IAAXA,OAAW,EAAXA,EAAaY,cAAe,UAAS,+BAA8Bn4K,SAAA,EAEhG69J,EAAAA,GAAAA,KAACmF,GAAI,CAAC1kE,UAAU,iBAAiB,UAKpCm7E,EAAiB,yBAChBnb,EAAAA,GAAAA,MAACJ,GAAM,CACLhsK,KAAK,KACLisK,QAAQ,UACRxpI,QAASA,IAAMuuJ,EAAqB,oBAAqB7pL,GAAU2G,SAAA,EAEnE69J,EAAAA,GAAAA,KAACoK,GAAK,CAAC3pE,UAAU,iBAAiB,cAIpCggE,EAAAA,GAAAA,MAACJ,GAAM,CACLhsK,KAAK,KACLisK,QAAQ,UACRt+J,UAAQ,EACRy+F,UAAU,gCACVlE,MAAK,GAAAppG,OAAK+lL,IAA8B,OAAXQ,QAAW,IAAXA,OAAW,EAAXA,EAAaY,cAAe,UAAS,mCAAkCn4K,SAAA,EAEpG69J,EAAAA,GAAAA,KAACmF,GAAI,CAAC1kE,UAAU,iBAAiB,aAKpCm7E,EAAiB,uBAChBnb,EAAAA,GAAAA,MAACJ,GAAM,CACLhsK,KAAK,KACLisK,QAAQ,UACRxpI,QAASA,IAAMuuJ,EAAqB,UAAW7pL,GAAU2G,SAAA,EAEzD69J,EAAAA,GAAAA,KAACuK,GAAK,CAAC9pE,UAAU,iBAAiB,cAIpCggE,EAAAA,GAAAA,MAACJ,GAAM,CACLhsK,KAAK,KACLisK,QAAQ,UACRt+J,UAAQ,EACRy+F,UAAU,gCACVlE,MAAK,GAAAppG,OAAK+lL,IAA8B,OAAXQ,QAAW,IAAXA,OAAW,EAAXA,EAAaY,cAAe,UAAS,gCAA+Bn4K,SAAA,EAEjG69J,EAAAA,GAAAA,KAACmF,GAAI,CAAC1kE,UAAU,iBAAiB,cAKrCggE,EAAAA,GAAAA,MAACJ,GAAM,CACLhsK,KAAK,KACLisK,QAAQ,UACRxpI,QAASA,IAAMl/B,OAAOiiE,KAAK,cAAD1mE,OAAeqI,EAASgtK,QAAO,aAAa,UAAUrmK,SAAA,EAEhF69J,EAAAA,GAAAA,KAACE,GAAQ,CAACz/D,UAAU,iBAAiB,qBAnJlCjlG,EAAS9U,SA+Jb,eAAhBw8L,IAAgCljB,EAAAA,GAAAA,KAACiS,GAAiB,IAClC,oBAAhBiR,IAAqCljB,EAAAA,GAAAA,KAAC2S,GAAqB,IAC3C,aAAhBuQ,IACCziB,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oBAAmBt+F,SAAA,EAChC69J,EAAAA,GAAAA,KAACuK,GAAK,CAAC9pE,UAAU,2CACjBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,iBACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,+EAMjB,UAAhB+gL,IACCziB,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,YAAWt+F,SAAA,EACxBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oCAAmCt+F,SAAA,EAChDs+J,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,mCAAkCt+F,SAAC,sBACjD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAC,yEAIxCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,yBAAwBt+F,SAAA,CACpCihL,EAAe/9L,OAAO,iBAIA,IAA1B+9L,EAAe/9L,QACdo7K,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,oBAAmBt+F,SAAA,EAChC69J,EAAAA,GAAAA,KAAC52D,GAAM,CAAC3I,UAAU,2CAClBu/D,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,sCAAqCt+F,SAAC,8BACpD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,iBAAgBt+F,SAAC,qEAKhC69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,YAAWt+F,SACvBihL,EAAe/mI,IAAI,CAACo/C,EAAO9lG,KAC1BqqK,EAAAA,GAAAA,KAACc,GAAI,CAAgBrgE,UAAU,0CAAyCt+F,UACtEs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,MAAKt+F,SAAA,EAClBs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,wCAAuCt+F,SAAA,EACpDs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,8BAA6Bt+F,SAAA,EAC1Cs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAS,yDAAAttG,OACG,aAAfsoG,EAAMx6G,KAAsB,kBACb,mBAAfw6G,EAAMx6G,KAA4B,mBACnB,cAAfw6G,EAAMx6G,KAAuB,iBACd,aAAfw6G,EAAMx6G,KAAsB,mBAC5B,mBACCkhB,SAAA,CACe,aAAfs5F,EAAMx6G,OAAuB++K,EAAAA,GAAAA,KAACqK,GAAQ,CAAC5pE,UAAU,2BAClC,mBAAfhF,EAAMx6G,OAA6B++K,EAAAA,GAAAA,KAAC8lB,GAAI,CAACrlF,UAAU,4BACpC,cAAfhF,EAAMx6G,OAAwB++K,EAAAA,GAAAA,KAACsK,GAAO,CAAC7pE,UAAU,0BAClC,aAAfhF,EAAMx6G,OAAuB++K,EAAAA,GAAAA,KAACuK,GAAK,CAAC9pE,UAAU,gCAEjDggE,EAAAA,GAAAA,MAAA,OAAAt+J,SAAA,EACE69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,yBAAwBt+F,SAAEs5F,EAAM3uE,UAC9CkzI,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAEs5F,EAAMq0E,sBAGjDrP,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,aAAYt+F,SAAA,EACzB69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,yBAAwBt+F,SACpC,IAAIrL,KAAK2kG,EAAM5kG,WAAWkvL,oBAE7B/lB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,yBAAwBt+F,SACpCs5F,EAAMqjE,cAKb2B,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,yBAAwBt+F,SAAEs5F,EAAM0P,UAE5C1P,EAAMl1D,OACLk6H,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,oBACjCs+J,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,+BAA8Bt+F,SAAA,CAC3Cs5F,EAAMl1D,KAAK70C,MAAM,EAAG,IAAI,YAK9B+pG,EAAMuyE,MACLvN,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,eACjCs+J,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,+BAA8Bt+F,SAAA,CAC3Cs5F,EAAMuyE,IAAIt8K,MAAM,EAAG,IAAI,YAK7B+pG,EAAMmgC,aACL6kC,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,sBACjCs+J,EAAAA,GAAAA,MAAA,QAAMhgE,UAAU,kCAAiCt+F,SAAA,CAC9Cs5F,EAAMmgC,WAAWlqI,MAAM,EAAG,IAAI,YAKpC+pG,EAAMyxE,qBACLzM,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,qBACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,6BAA4Bt+F,SACzCs5F,EAAMyxE,6BAKO/hI,IAAnBswD,EAAMzvC,WACLy0G,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,4CAA2Ct+F,SAAA,EACxD69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,iBAAgBt+F,SAAC,eACjC69J,EAAAA,GAAAA,KAAA,QAAMv/D,UAAS,GAAAttG,OAAKsoG,EAAMzvC,SAAW,iBAAmB,gBAAiB7pD,SACtEs5F,EAAMzvC,SAAW,MAAQ,aAOjCr2D,EAAQytL,EAAe/9L,OAAS,IAC/B26K,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,sBAAqBt+F,UAClC69J,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,gCAnFZhF,EAAM/0G,gBAiG9B48L,IACCtjB,EAAAA,GAAAA,KAACwN,GAAqB,CACpBvM,QAASA,IAAMsiB,GAAqB,GACpC9V,UAAWA,KACT8V,GAAqB,GACrBqB,IACA5gF,GAAMQ,QAAQ,uCAKnBg/E,GAAsBU,IACrBlkB,EAAAA,GAAAA,KAACgP,GAAc,CACbxzK,SAAU0oL,EACVjjB,QAASA,KACPwiB,GAAsB,GACtBU,EAAoB,OAEtB1W,UAAWA,KACTgW,GAAsB,GACtBU,EAAoB,MACpBS,IACA5gF,GAAMQ,QAAQ,oCAKnBk/E,GAAuBQ,IACtBlkB,EAAAA,GAAAA,KAACmQ,GAAe,CACd30K,SAAU0oL,EACVjjB,QAASA,KACP0iB,GAAuB,GACvBQ,EAAoB,OAEtB1W,UAAWA,KACTkW,GAAuB,GACvBQ,EAAoB,MACpBS,IACA5gF,GAAMQ,QAAQ,oCAKnBo/E,GAAiBM,IAChBlkB,EAAAA,GAAAA,KAACsR,GAAiB,CAChB91K,SAAU0oL,EACVjjB,QAASA,KACP4iB,GAAiB,GACjBM,EAAoB,OAEtB1W,UAAWA,KACToW,GAAiB,GACjBM,EAAoB,MACpBS,IACA5gF,GAAMQ,QAAQ,6BAKnBs/E,IACC9jB,EAAAA,GAAAA,KAACkT,GAAY,CAAA/wK,UACX69J,EAAAA,GAAAA,KAACic,GAAe,CACdhb,QAASA,IAAM8iB,GAAuB,GACtCtW,UAAY8G,IACVwP,GAAuB,GACvB//E,GAAMQ,QAAQ,mCAMrBw/E,GAA6BE,IAC5BlkB,EAAAA,GAAAA,KAAA,OAAKv/D,UAAU,kEAAiEt+F,UAC9Es+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,mDAAkDt+F,SAAA,EAC/D69J,EAAAA,GAAAA,KAAA,MAAIv/D,UAAU,wCAAuCt+F,SAAC,uBACtD69J,EAAAA,GAAAA,KAAA,KAAGv/D,UAAU,sBAAqBt+F,SAAC,+DAGnCs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,iBAAgBt+F,SAAA,EAC7B69J,EAAAA,GAAAA,KAACK,GAAM,CACLC,QAAQ,UACRxpI,QAASA,KACPmtJ,GAA6B,GAC7BE,EAAoB,OAEtB1jF,UAAU,SAAQt+F,SACnB,YAGD69J,EAAAA,GAAAA,KAACK,GAAM,CACLvpI,QAASA,KACPmtJ,GAA6B,GAC7BE,EAAoB,MACpBngF,GAAMQ,QAAQ,4BAEhB/D,UAAU,SAAQt+F,SACnB,8BAzlBT69J,EAAAA,GAAAA,KAAC4iB,GAAgB,CACfC,UAAYhrE,IACV8hE,EAAe,CACbpE,cAAe19D,EACfyiE,iBAAanvI,EACb2uI,mBAAe3uI,QGxO3B,SA9CA,WACE,OACE60H,EAAAA,GAAAA,KAACnB,GAAY,CAAA18J,UACX69J,EAAAA,GAAAA,KAACiD,GAAY,CAAA9gK,UACX69J,EAAAA,GAAAA,KAACyZ,GAAY,CAAAt3K,UACX69J,EAAAA,GAAAA,KAAC/tE,GAAM,CAAA9vF,UACPs+J,EAAAA,GAAAA,MAAA,OAAKhgE,UAAU,2EAA0Et+F,SAAA,EACvF69J,EAAAA,GAAAA,KAACiC,GAAM,KACPjC,EAAAA,GAAAA,KAAA,QAAMv/D,UAAU,8BAA6Bt+F,UAC3Cs+J,EAAAA,GAAAA,MAAChuE,GAAM,CAAAtwF,SAAA,EACL69J,EAAAA,GAAAA,KAAChuE,GAAK,CAAClO,KAAK,IAAI5mE,SAAS8iJ,EAAAA,GAAAA,KAACwJ,GAAS,OACnCxJ,EAAAA,GAAAA,KAAChuE,GAAK,CAAClO,KAAK,SAAS5mE,SAAS8iJ,EAAAA,GAAAA,KAACijB,GAAc,YAGjDjjB,EAAAA,GAAAA,KAACgmB,GAAO,CACNvgF,SAAS,YACTqC,aAAc,CACZzC,SAAU,IACV9+F,MAAO,CACLm2F,WAAY,wBACZjkF,MAAO,UACPwtK,OAAQ,oCACRC,eAAgB,cAElB1hF,QAAS,CACPwC,UAAW,CACTd,QAAS,UACTC,UAAW,YAGf5kH,MAAO,CACLylH,UAAW,CACTd,QAAS,UACTC,UAAW,yBAW/B,ECjDaggF,EAAAA,WACX3qL,SAAS4qL,eAAe,SAGrB7mL,QACHygK,EAAAA,GAAAA,KAACp0E,EAAAA,WAAgB,CAAAzpF,UACf69J,EAAAA,GAAAA,KAACqmB,GAAG,M","sources":["../node_modules/node-forge/lib/forge.js","../node_modules/node-forge/lib/index.js","../node_modules/node-forge/lib/pki.js","../node_modules/react/jsx-runtime.js","../node_modules/node-forge/lib/aesCipherSuites.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/node-forge/lib/prng.js","../node_modules/node-forge/lib/rc2.js","../node_modules/node-forge/lib/cipherModes.js","../node_modules/node-forge/lib/mgf1.js","../node_modules/node-forge/lib/log.js","../node_modules/node-forge/lib/ssh.js","../node_modules/node-forge/lib/md.all.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/node-forge/lib/random.js","../node_modules/node-forge/lib/des.js","../node_modules/node-forge/lib/oids.js","../node_modules/node-forge/lib/kem.js","../node_modules/node-forge/lib/pbe.js","../node_modules/node-forge/lib/pkcs12.js","../node_modules/node-forge/lib/sha1.js","../node_modules/node-forge/lib/sha256.js","../node_modules/node-forge/lib/util.js","../node_modules/node-forge/lib/pss.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react-dom/client.js","../node_modules/node-forge/lib/x509.js","../node_modules/react/index.js","../node_modules/node-forge/lib/pkcs7.js","../node_modules/node-forge/lib/pem.js","../node_modules/node-forge/lib/asn1.js","../node_modules/node-forge/lib/md.js","../node_modules/node-forge/lib/tls.js","utils/rsa.ts","../node_modules/node-forge/lib/baseN.js","../node_modules/node-forge/lib/md5.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/node-forge/lib/pkcs1.js","../node_modules/react-dom/index.js","../node_modules/node-forge/lib/pbkdf2.js","../node_modules/node-forge/lib/sha512.js","../node_modules/node-forge/lib/hmac.js","../node_modules/node-forge/lib/prime.js","../node_modules/scheduler/index.js","../node_modules/node-forge/lib/pkcs7asn1.js","../node_modules/node-forge/lib/cipher.js","../node_modules/node-forge/lib/asn1-validator.js","../node_modules/node-forge/lib/aes.js","../node_modules/node-forge/lib/rsa.js","../node_modules/node-forge/lib/jsbn.js","../node_modules/node-forge/lib/ed25519.js","../node_modules/node-forge/lib/mgf.js","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs","../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../node_modules/goober/dist/goober.modern.js","../node_modules/react-hot-toast/src/core/types.ts","../node_modules/react-hot-toast/src/core/utils.ts","../node_modules/react-hot-toast/src/core/store.ts","../node_modules/react-hot-toast/src/core/toast.ts","../node_modules/react-hot-toast/src/core/use-toaster.ts","../node_modules/react-hot-toast/src/components/error.tsx","../node_modules/react-hot-toast/src/components/loader.tsx","../node_modules/react-hot-toast/src/components/checkmark.tsx","../node_modules/react-hot-toast/src/components/toast-icon.tsx","../node_modules/react-hot-toast/src/components/toast-bar.tsx","../node_modules/react-hot-toast/src/components/toaster.tsx","../node_modules/react-hot-toast/src/index.ts","../node_modules/lucide-react/src/defaultAttributes.ts","../node_modules/lucide-react/src/createLucideIcon.ts","../node_modules/lucide-react/src/icons/shield.ts","../node_modules/lucide-react/src/icons/scale.ts","../node_modules/lucide-react/src/icons/wallet.ts","../node_modules/lucide-react/src/icons/user.ts","../node_modules/lucide-react/src/icons/log-out.ts","../node_modules/lucide-react/src/icons/key.ts","../node_modules/lucide-react/src/icons/alert-circle.ts","../node_modules/@babel/runtime/helpers/esm/checkPrivateRedeclaration.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js","../node_modules/@babel/runtime/helpers/esm/assertClassBrand.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js","../node_modules/ethers/src.ts/utils/properties.ts","../node_modules/ethers/src.ts/utils/errors.ts","../node_modules/ethers/src.ts/_version.ts","../node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js","../node_modules/ethers/src.ts/utils/data.ts","../node_modules/ethers/src.ts/utils/maths.ts","../node_modules/ethers/src.ts/abi/coders/abstract-coder.ts","../node_modules/@noble/hashes/src/_assert.ts","../node_modules/@noble/hashes/src/_u64.ts","../node_modules/@noble/hashes/src/crypto.ts","../node_modules/@noble/hashes/src/utils.ts","../node_modules/@noble/hashes/src/sha3.ts","../node_modules/ethers/src.ts/crypto/keccak.ts","../node_modules/ethers/src.ts/address/address.ts","../node_modules/ethers/src.ts/abi/typed.ts","../node_modules/ethers/src.ts/abi/coders/address.ts","../node_modules/ethers/src.ts/abi/coders/anonymous.ts","../node_modules/ethers/src.ts/abi/coders/array.ts","../node_modules/ethers/src.ts/abi/coders/boolean.ts","../node_modules/ethers/src.ts/abi/coders/bytes.ts","../node_modules/ethers/src.ts/abi/coders/fixed-bytes.ts","../node_modules/ethers/src.ts/abi/coders/null.ts","../node_modules/ethers/src.ts/abi/coders/number.ts","../node_modules/ethers/src.ts/utils/utf8.ts","../node_modules/ethers/src.ts/abi/coders/string.ts","../node_modules/ethers/src.ts/abi/coders/tuple.ts","../node_modules/ethers/src.ts/hash/id.ts","../node_modules/ethers/src.ts/abi/fragments.ts","../node_modules/ethers/src.ts/abi/abi-coder.ts","../node_modules/ethers/src.ts/address/checks.ts","../node_modules/ethers/src.ts/hash/typed-data.ts","../node_modules/ethers/src.ts/transaction/accesslist.ts","../node_modules/ethers/src.ts/constants/hashes.ts","../node_modules/ethers/src.ts/crypto/signature.ts","../node_modules/ethers/src.ts/transaction/authorization.ts","../node_modules/ethers/src.ts/utils/geturl-browser.ts","../node_modules/ethers/src.ts/utils/fetch.ts","../node_modules/ethers/src.ts/utils/base64-browser.ts","../node_modules/ethers/src.ts/constants/addresses.ts","../node_modules/ethers/src.ts/abi/interface.ts","../node_modules/ethers/src.ts/providers/provider.ts","../node_modules/ethers/src.ts/utils/events.ts","../node_modules/ethers/src.ts/contract/wrappers.ts","../node_modules/ethers/src.ts/contract/contract.ts","../node_modules/@adraffy/ens-normalize/dist/index.mjs","../node_modules/ethers/src.ts/hash/namehash.ts","../node_modules/@noble/hashes/src/_sha2.ts","../node_modules/@noble/hashes/src/sha256.ts","../node_modules/@noble/hashes/src/sha512.ts","../node_modules/ethers/src.ts/crypto/crypto-browser.ts","../node_modules/ethers/src.ts/crypto/sha2.ts","../node_modules/@noble/curves/src/abstract/utils.ts","../node_modules/@noble/curves/src/abstract/modular.ts","../node_modules/@noble/hashes/src/hmac.ts","../node_modules/@noble/curves/src/abstract/curve.ts","../node_modules/@noble/curves/src/abstract/weierstrass.ts","../node_modules/@noble/curves/src/_shortw_utils.ts","../node_modules/@noble/curves/src/secp256k1.ts","../node_modules/ethers/src.ts/crypto/signing-key.ts","../node_modules/ethers/src.ts/utils/rlp-decode.ts","../node_modules/ethers/src.ts/utils/rlp-encode.ts","../node_modules/ethers/src.ts/transaction/address.ts","../node_modules/ethers/src.ts/transaction/transaction.ts","../node_modules/ethers/src.ts/utils/base58.ts","../node_modules/ethers/src.ts/providers/ens-resolver.ts","../node_modules/ethers/src.ts/providers/format.ts","../node_modules/ethers/src.ts/address/contract-address.ts","../node_modules/ethers/src.ts/providers/plugins-network.ts","../node_modules/ethers/src.ts/providers/network.ts","../node_modules/ethers/src.ts/providers/subscriber-polling.ts","../node_modules/ethers/src.ts/providers/abstract-provider.ts","../node_modules/ethers/src.ts/providers/abstract-signer.ts","../node_modules/ethers/src.ts/providers/subscriber-filterid.ts","../node_modules/ethers/src.ts/providers/provider-jsonrpc.ts","../node_modules/ethers/src.ts/providers/provider-browser.ts","contexts/AuthContext.tsx","../node_modules/lucide-react/src/icons/check-circle.ts","../node_modules/lucide-react/src/icons/download.ts","../node_modules/lucide-react/src/icons/trash-2.ts","../node_modules/clsx/dist/clsx.m.js","components/ui/Button.tsx","components/ui/Card.tsx","components/RSAManager.tsx","components/Header.tsx","../node_modules/lucide-react/src/icons/upload.ts","../node_modules/lucide-react/src/icons/search.ts","../node_modules/lucide-react/src/icons/plus.ts","../node_modules/lucide-react/src/icons/folder-open.ts","../node_modules/lucide-react/src/icons/share-2.ts","contexts/FileContext.tsx","../node_modules/lucide-react/src/icons/x.ts","../node_modules/lucide-react/src/icons/file.ts","../node_modules/lucide-react/src/icons/lock.ts","../node_modules/lucide-react/src/icons/folder.ts","components/ui/Input.tsx","components/FileUpload.tsx","../node_modules/lucide-react/src/icons/clock.ts","../node_modules/lucide-react/src/icons/hard-drive.ts","../node_modules/lucide-react/src/icons/calendar.ts","components/FileList.tsx","../node_modules/lucide-react/src/icons/check.ts","../node_modules/lucide-react/src/icons/copy.ts","components/ShareModal.tsx","pages/Dashboard.tsx","../node_modules/lucide-react/src/icons/users.ts","../node_modules/lucide-react/src/icons/file-text.ts","../node_modules/lucide-react/src/icons/pen-tool.ts","../node_modules/lucide-react/src/icons/brain.ts","../node_modules/lucide-react/src/icons/pen-square.ts","utils/zkCircuits.ts","components/legal/NotarizeDocumentModal.tsx","../node_modules/lucide-react/src/icons/alert-triangle.ts","components/legal/RedactionModal.tsx","components/legal/ESignatureModal.tsx","../node_modules/lucide-react/src/icons/bar-chart-3.ts","../node_modules/lucide-react/src/icons/zap.ts","components/legal/ZKMLAnalysisModal.tsx","../node_modules/lucide-react/src/icons/message-square.ts","../node_modules/lucide-react/src/icons/external-link.ts","components/legal/SignatureRequests.tsx","components/legal/SentSignatureRequests.tsx","contexts/CaseContext.tsx","types/rbac.ts","types/userProfile.ts","contexts/RBACContext.tsx","components/case/CreateCaseModal.tsx","utils/apiTest.ts","utils/demoAutomation.ts","components/demo/SimpleDemoInterface.tsx","components/demo/DemoLauncher.tsx","../node_modules/lucide-react/src/icons/building-2.ts","components/onboarding/UserOnboarding.tsx","../node_modules/lucide-react/src/icons/arrow-right.ts","components/auth/WalletConnection.tsx","utils/testPermissionMapping.ts","pages/LegalDashboard.tsx","utils/debugPermissions.ts","utils/testPermissions.ts","App.tsx","index.tsx"],"sourcesContent":["/**\n * Node.js module for Forge.\n *\n * @author Dave Longley\n *\n * Copyright 2011-2016 Digital Bazaar, Inc.\n */\nmodule.exports = {\n  // default options\n  options: {\n    usePureJavaScript: false\n  }\n};\n","/**\n * Node.js module for Forge.\n *\n * @author Dave Longley\n *\n * Copyright 2011-2016 Digital Bazaar, Inc.\n */\nmodule.exports = require('./forge');\nrequire('./aes');\nrequire('./aesCipherSuites');\nrequire('./asn1');\nrequire('./cipher');\nrequire('./des');\nrequire('./ed25519');\nrequire('./hmac');\nrequire('./kem');\nrequire('./log');\nrequire('./md.all');\nrequire('./mgf1');\nrequire('./pbkdf2');\nrequire('./pem');\nrequire('./pkcs1');\nrequire('./pkcs12');\nrequire('./pkcs7');\nrequire('./pki');\nrequire('./prime');\nrequire('./prng');\nrequire('./pss');\nrequire('./random');\nrequire('./rc2');\nrequire('./ssh');\nrequire('./tls');\nrequire('./util');\n","/**\n * Javascript implementation of a basic Public Key Infrastructure, including\n * support for RSA public and private keys.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2013 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./asn1');\nrequire('./oids');\nrequire('./pbe');\nrequire('./pem');\nrequire('./pbkdf2');\nrequire('./pkcs12');\nrequire('./pss');\nrequire('./rsa');\nrequire('./util');\nrequire('./x509');\n\n// shortcut for asn.1 API\nvar asn1 = forge.asn1;\n\n/* Public Key Infrastructure (PKI) implementation. */\nvar pki = module.exports = forge.pki = forge.pki || {};\n\n/**\n * NOTE: THIS METHOD IS DEPRECATED. Use pem.decode() instead.\n *\n * Converts PEM-formatted data to DER.\n *\n * @param pem the PEM-formatted data.\n *\n * @return the DER-formatted data.\n */\npki.pemToDer = function(pem) {\n  var msg = forge.pem.decode(pem)[0];\n  if(msg.procType && msg.procType.type === 'ENCRYPTED') {\n    throw new Error('Could not convert PEM to DER; PEM is encrypted.');\n  }\n  return forge.util.createBuffer(msg.body);\n};\n\n/**\n * Converts an RSA private key from PEM format.\n *\n * @param pem the PEM-formatted private key.\n *\n * @return the private key.\n */\npki.privateKeyFromPem = function(pem) {\n  var msg = forge.pem.decode(pem)[0];\n\n  if(msg.type !== 'PRIVATE KEY' && msg.type !== 'RSA PRIVATE KEY') {\n    var error = new Error('Could not convert private key from PEM; PEM ' +\n      'header type is not \"PRIVATE KEY\" or \"RSA PRIVATE KEY\".');\n    error.headerType = msg.type;\n    throw error;\n  }\n  if(msg.procType && msg.procType.type === 'ENCRYPTED') {\n    throw new Error('Could not convert private key from PEM; PEM is encrypted.');\n  }\n\n  // convert DER to ASN.1 object\n  var obj = asn1.fromDer(msg.body);\n\n  return pki.privateKeyFromAsn1(obj);\n};\n\n/**\n * Converts an RSA private key to PEM format.\n *\n * @param key the private key.\n * @param maxline the maximum characters per line, defaults to 64.\n *\n * @return the PEM-formatted private key.\n */\npki.privateKeyToPem = function(key, maxline) {\n  // convert to ASN.1, then DER, then PEM-encode\n  var msg = {\n    type: 'RSA PRIVATE KEY',\n    body: asn1.toDer(pki.privateKeyToAsn1(key)).getBytes()\n  };\n  return forge.pem.encode(msg, {maxline: maxline});\n};\n\n/**\n * Converts a PrivateKeyInfo to PEM format.\n *\n * @param pki the PrivateKeyInfo.\n * @param maxline the maximum characters per line, defaults to 64.\n *\n * @return the PEM-formatted private key.\n */\npki.privateKeyInfoToPem = function(pki, maxline) {\n  // convert to DER, then PEM-encode\n  var msg = {\n    type: 'PRIVATE KEY',\n    body: asn1.toDer(pki).getBytes()\n  };\n  return forge.pem.encode(msg, {maxline: maxline});\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * A Javascript implementation of AES Cipher Suites for TLS.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2009-2015 Digital Bazaar, Inc.\n *\n */\nvar forge = require('./forge');\nrequire('./aes');\nrequire('./tls');\n\nvar tls = module.exports = forge.tls;\n\n/**\n * Supported cipher suites.\n */\ntls.CipherSuites['TLS_RSA_WITH_AES_128_CBC_SHA'] = {\n  id: [0x00, 0x2f],\n  name: 'TLS_RSA_WITH_AES_128_CBC_SHA',\n  initSecurityParameters: function(sp) {\n    sp.bulk_cipher_algorithm = tls.BulkCipherAlgorithm.aes;\n    sp.cipher_type = tls.CipherType.block;\n    sp.enc_key_length = 16;\n    sp.block_length = 16;\n    sp.fixed_iv_length = 16;\n    sp.record_iv_length = 16;\n    sp.mac_algorithm = tls.MACAlgorithm.hmac_sha1;\n    sp.mac_length = 20;\n    sp.mac_key_length = 20;\n  },\n  initConnectionState: initConnectionState\n};\ntls.CipherSuites['TLS_RSA_WITH_AES_256_CBC_SHA'] = {\n  id: [0x00, 0x35],\n  name: 'TLS_RSA_WITH_AES_256_CBC_SHA',\n  initSecurityParameters: function(sp) {\n    sp.bulk_cipher_algorithm = tls.BulkCipherAlgorithm.aes;\n    sp.cipher_type = tls.CipherType.block;\n    sp.enc_key_length = 32;\n    sp.block_length = 16;\n    sp.fixed_iv_length = 16;\n    sp.record_iv_length = 16;\n    sp.mac_algorithm = tls.MACAlgorithm.hmac_sha1;\n    sp.mac_length = 20;\n    sp.mac_key_length = 20;\n  },\n  initConnectionState: initConnectionState\n};\n\nfunction initConnectionState(state, c, sp) {\n  var client = (c.entity === forge.tls.ConnectionEnd.client);\n\n  // cipher setup\n  state.read.cipherState = {\n    init: false,\n    cipher: forge.cipher.createDecipher('AES-CBC', client ?\n      sp.keys.server_write_key : sp.keys.client_write_key),\n    iv: client ? sp.keys.server_write_IV : sp.keys.client_write_IV\n  };\n  state.write.cipherState = {\n    init: false,\n    cipher: forge.cipher.createCipher('AES-CBC', client ?\n      sp.keys.client_write_key : sp.keys.server_write_key),\n    iv: client ? sp.keys.client_write_IV : sp.keys.server_write_IV\n  };\n  state.read.cipherFunction = decrypt_aes_cbc_sha1;\n  state.write.cipherFunction = encrypt_aes_cbc_sha1;\n\n  // MAC setup\n  state.read.macLength = state.write.macLength = sp.mac_length;\n  state.read.macFunction = state.write.macFunction = tls.hmac_sha1;\n}\n\n/**\n * Encrypts the TLSCompressed record into a TLSCipherText record using AES\n * in CBC mode.\n *\n * @param record the TLSCompressed record to encrypt.\n * @param s the ConnectionState to use.\n *\n * @return true on success, false on failure.\n */\nfunction encrypt_aes_cbc_sha1(record, s) {\n  var rval = false;\n\n  // append MAC to fragment, update sequence number\n  var mac = s.macFunction(s.macKey, s.sequenceNumber, record);\n  record.fragment.putBytes(mac);\n  s.updateSequenceNumber();\n\n  // TLS 1.1+ use an explicit IV every time to protect against CBC attacks\n  var iv;\n  if(record.version.minor === tls.Versions.TLS_1_0.minor) {\n    // use the pre-generated IV when initializing for TLS 1.0, otherwise use\n    // the residue from the previous encryption\n    iv = s.cipherState.init ? null : s.cipherState.iv;\n  } else {\n    iv = forge.random.getBytesSync(16);\n  }\n\n  s.cipherState.init = true;\n\n  // start cipher\n  var cipher = s.cipherState.cipher;\n  cipher.start({iv: iv});\n\n  // TLS 1.1+ write IV into output\n  if(record.version.minor >= tls.Versions.TLS_1_1.minor) {\n    cipher.output.putBytes(iv);\n  }\n\n  // do encryption (default padding is appropriate)\n  cipher.update(record.fragment);\n  if(cipher.finish(encrypt_aes_cbc_sha1_padding)) {\n    // set record fragment to encrypted output\n    record.fragment = cipher.output;\n    record.length = record.fragment.length();\n    rval = true;\n  }\n\n  return rval;\n}\n\n/**\n * Handles padding for aes_cbc_sha1 in encrypt mode.\n *\n * @param blockSize the block size.\n * @param input the input buffer.\n * @param decrypt true in decrypt mode, false in encrypt mode.\n *\n * @return true on success, false on failure.\n */\nfunction encrypt_aes_cbc_sha1_padding(blockSize, input, decrypt) {\n  /* The encrypted data length (TLSCiphertext.length) is one more than the sum\n   of SecurityParameters.block_length, TLSCompressed.length,\n   SecurityParameters.mac_length, and padding_length.\n\n   The padding may be any length up to 255 bytes long, as long as it results in\n   the TLSCiphertext.length being an integral multiple of the block length.\n   Lengths longer than necessary might be desirable to frustrate attacks on a\n   protocol based on analysis of the lengths of exchanged messages. Each uint8\n   in the padding data vector must be filled with the padding length value.\n\n   The padding length should be such that the total size of the\n   GenericBlockCipher structure is a multiple of the cipher's block length.\n   Legal values range from zero to 255, inclusive. This length specifies the\n   length of the padding field exclusive of the padding_length field itself.\n\n   This is slightly different from PKCS#7 because the padding value is 1\n   less than the actual number of padding bytes if you include the\n   padding_length uint8 itself as a padding byte. */\n  if(!decrypt) {\n    // get the number of padding bytes required to reach the blockSize and\n    // subtract 1 for the padding value (to make room for the padding_length\n    // uint8)\n    var padding = blockSize - (input.length() % blockSize);\n    input.fillWithByte(padding - 1, padding);\n  }\n  return true;\n}\n\n/**\n * Handles padding for aes_cbc_sha1 in decrypt mode.\n *\n * @param blockSize the block size.\n * @param output the output buffer.\n * @param decrypt true in decrypt mode, false in encrypt mode.\n *\n * @return true on success, false on failure.\n */\nfunction decrypt_aes_cbc_sha1_padding(blockSize, output, decrypt) {\n  var rval = true;\n  if(decrypt) {\n    /* The last byte in the output specifies the number of padding bytes not\n      including itself. Each of the padding bytes has the same value as that\n      last byte (known as the padding_length). Here we check all padding\n      bytes to ensure they have the value of padding_length even if one of\n      them is bad in order to ward-off timing attacks. */\n    var len = output.length();\n    var paddingLength = output.last();\n    for(var i = len - 1 - paddingLength; i < len - 1; ++i) {\n      rval = rval && (output.at(i) == paddingLength);\n    }\n    if(rval) {\n      // trim off padding bytes and last padding length byte\n      output.truncate(paddingLength + 1);\n    }\n  }\n  return rval;\n}\n\n/**\n * Decrypts a TLSCipherText record into a TLSCompressed record using\n * AES in CBC mode.\n *\n * @param record the TLSCipherText record to decrypt.\n * @param s the ConnectionState to use.\n *\n * @return true on success, false on failure.\n */\nfunction decrypt_aes_cbc_sha1(record, s) {\n  var rval = false;\n\n  var iv;\n  if(record.version.minor === tls.Versions.TLS_1_0.minor) {\n    // use pre-generated IV when initializing for TLS 1.0, otherwise use the\n    // residue from the previous decryption\n    iv = s.cipherState.init ? null : s.cipherState.iv;\n  } else {\n    // TLS 1.1+ use an explicit IV every time to protect against CBC attacks\n    // that is appended to the record fragment\n    iv = record.fragment.getBytes(16);\n  }\n\n  s.cipherState.init = true;\n\n  // start cipher\n  var cipher = s.cipherState.cipher;\n  cipher.start({iv: iv});\n\n  // do decryption\n  cipher.update(record.fragment);\n  rval = cipher.finish(decrypt_aes_cbc_sha1_padding);\n\n  // even if decryption fails, keep going to minimize timing attacks\n\n  // decrypted data:\n  // first (len - 20) bytes = application data\n  // last 20 bytes          = MAC\n  var macLen = s.macLength;\n\n  // create a random MAC to check against should the mac length check fail\n  // Note: do this regardless of the failure to keep timing consistent\n  var mac = forge.random.getBytesSync(macLen);\n\n  // get fragment and mac\n  var len = cipher.output.length();\n  if(len >= macLen) {\n    record.fragment = cipher.output.getBytes(len - macLen);\n    mac = cipher.output.getBytes(macLen);\n  } else {\n    // bad data, but get bytes anyway to try to keep timing consistent\n    record.fragment = cipher.output.getBytes();\n  }\n  record.fragment = forge.util.createBuffer(record.fragment);\n  record.length = record.fragment.length();\n\n  // see if data integrity checks out, update sequence number\n  var mac2 = s.macFunction(s.macKey, s.sequenceNumber, record);\n  s.updateSequenceNumber();\n  rval = compareMacs(s.macKey, mac, mac2) && rval;\n  return rval;\n}\n\n/**\n * Safely compare two MACs. This function will compare two MACs in a way\n * that protects against timing attacks.\n *\n * TODO: Expose elsewhere as a utility API.\n *\n * See: https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/february/double-hmac-verification/\n *\n * @param key the MAC key to use.\n * @param mac1 as a binary-encoded string of bytes.\n * @param mac2 as a binary-encoded string of bytes.\n *\n * @return true if the MACs are the same, false if not.\n */\nfunction compareMacs(key, mac1, mac2) {\n  var hmac = forge.hmac.create();\n\n  hmac.start('SHA1', key);\n  hmac.update(mac1);\n  mac1 = hmac.digest().getBytes();\n\n  hmac.start(null, null);\n  hmac.update(mac2);\n  mac2 = hmac.digest().getBytes();\n\n  return mac1 === mac2;\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","/**\n * A javascript implementation of a cryptographically-secure\n * Pseudo Random Number Generator (PRNG). The Fortuna algorithm is followed\n * here though the use of SHA-256 is not enforced; when generating an\n * a PRNG context, the hashing algorithm and block cipher used for\n * the generator are specified via a plugin.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./util');\n\nvar _crypto = null;\nif(forge.util.isNodejs && !forge.options.usePureJavaScript &&\n  !process.versions['node-webkit']) {\n  _crypto = require('crypto');\n}\n\n/* PRNG API */\nvar prng = module.exports = forge.prng = forge.prng || {};\n\n/**\n * Creates a new PRNG context.\n *\n * A PRNG plugin must be passed in that will provide:\n *\n * 1. A function that initializes the key and seed of a PRNG context. It\n *   will be given a 16 byte key and a 16 byte seed. Any key expansion\n *   or transformation of the seed from a byte string into an array of\n *   integers (or similar) should be performed.\n * 2. The cryptographic function used by the generator. It takes a key and\n *   a seed.\n * 3. A seed increment function. It takes the seed and returns seed + 1.\n * 4. An api to create a message digest.\n *\n * For an example, see random.js.\n *\n * @param plugin the PRNG plugin to use.\n */\nprng.create = function(plugin) {\n  var ctx = {\n    plugin: plugin,\n    key: null,\n    seed: null,\n    time: null,\n    // number of reseeds so far\n    reseeds: 0,\n    // amount of data generated so far\n    generated: 0,\n    // no initial key bytes\n    keyBytes: ''\n  };\n\n  // create 32 entropy pools (each is a message digest)\n  var md = plugin.md;\n  var pools = new Array(32);\n  for(var i = 0; i < 32; ++i) {\n    pools[i] = md.create();\n  }\n  ctx.pools = pools;\n\n  // entropy pools are written to cyclically, starting at index 0\n  ctx.pool = 0;\n\n  /**\n   * Generates random bytes. The bytes may be generated synchronously or\n   * asynchronously. Web workers must use the asynchronous interface or\n   * else the behavior is undefined.\n   *\n   * @param count the number of random bytes to generate.\n   * @param [callback(err, bytes)] called once the operation completes.\n   *\n   * @return count random bytes as a string.\n   */\n  ctx.generate = function(count, callback) {\n    // do synchronously\n    if(!callback) {\n      return ctx.generateSync(count);\n    }\n\n    // simple generator using counter-based CBC\n    var cipher = ctx.plugin.cipher;\n    var increment = ctx.plugin.increment;\n    var formatKey = ctx.plugin.formatKey;\n    var formatSeed = ctx.plugin.formatSeed;\n    var b = forge.util.createBuffer();\n\n    // paranoid deviation from Fortuna:\n    // reset key for every request to protect previously\n    // generated random bytes should the key be discovered;\n    // there is no 100ms based reseeding because of this\n    // forced reseed for every `generate` call\n    ctx.key = null;\n\n    generate();\n\n    function generate(err) {\n      if(err) {\n        return callback(err);\n      }\n\n      // sufficient bytes generated\n      if(b.length() >= count) {\n        return callback(null, b.getBytes(count));\n      }\n\n      // if amount of data generated is greater than 1 MiB, trigger reseed\n      if(ctx.generated > 0xfffff) {\n        ctx.key = null;\n      }\n\n      if(ctx.key === null) {\n        // prevent stack overflow\n        return forge.util.nextTick(function() {\n          _reseed(generate);\n        });\n      }\n\n      // generate the random bytes\n      var bytes = cipher(ctx.key, ctx.seed);\n      ctx.generated += bytes.length;\n      b.putBytes(bytes);\n\n      // generate bytes for a new key and seed\n      ctx.key = formatKey(cipher(ctx.key, increment(ctx.seed)));\n      ctx.seed = formatSeed(cipher(ctx.key, ctx.seed));\n\n      forge.util.setImmediate(generate);\n    }\n  };\n\n  /**\n   * Generates random bytes synchronously.\n   *\n   * @param count the number of random bytes to generate.\n   *\n   * @return count random bytes as a string.\n   */\n  ctx.generateSync = function(count) {\n    // simple generator using counter-based CBC\n    var cipher = ctx.plugin.cipher;\n    var increment = ctx.plugin.increment;\n    var formatKey = ctx.plugin.formatKey;\n    var formatSeed = ctx.plugin.formatSeed;\n\n    // paranoid deviation from Fortuna:\n    // reset key for every request to protect previously\n    // generated random bytes should the key be discovered;\n    // there is no 100ms based reseeding because of this\n    // forced reseed for every `generateSync` call\n    ctx.key = null;\n\n    var b = forge.util.createBuffer();\n    while(b.length() < count) {\n      // if amount of data generated is greater than 1 MiB, trigger reseed\n      if(ctx.generated > 0xfffff) {\n        ctx.key = null;\n      }\n\n      if(ctx.key === null) {\n        _reseedSync();\n      }\n\n      // generate the random bytes\n      var bytes = cipher(ctx.key, ctx.seed);\n      ctx.generated += bytes.length;\n      b.putBytes(bytes);\n\n      // generate bytes for a new key and seed\n      ctx.key = formatKey(cipher(ctx.key, increment(ctx.seed)));\n      ctx.seed = formatSeed(cipher(ctx.key, ctx.seed));\n    }\n\n    return b.getBytes(count);\n  };\n\n  /**\n   * Private function that asynchronously reseeds a generator.\n   *\n   * @param callback(err) called once the operation completes.\n   */\n  function _reseed(callback) {\n    if(ctx.pools[0].messageLength >= 32) {\n      _seed();\n      return callback();\n    }\n    // not enough seed data...\n    var needed = (32 - ctx.pools[0].messageLength) << 5;\n    ctx.seedFile(needed, function(err, bytes) {\n      if(err) {\n        return callback(err);\n      }\n      ctx.collect(bytes);\n      _seed();\n      callback();\n    });\n  }\n\n  /**\n   * Private function that synchronously reseeds a generator.\n   */\n  function _reseedSync() {\n    if(ctx.pools[0].messageLength >= 32) {\n      return _seed();\n    }\n    // not enough seed data...\n    var needed = (32 - ctx.pools[0].messageLength) << 5;\n    ctx.collect(ctx.seedFileSync(needed));\n    _seed();\n  }\n\n  /**\n   * Private function that seeds a generator once enough bytes are available.\n   */\n  function _seed() {\n    // update reseed count\n    ctx.reseeds = (ctx.reseeds === 0xffffffff) ? 0 : ctx.reseeds + 1;\n\n    // goal is to update `key` via:\n    // key = hash(key + s)\n    //   where 's' is all collected entropy from selected pools, then...\n\n    // create a plugin-based message digest\n    var md = ctx.plugin.md.create();\n\n    // consume current key bytes\n    md.update(ctx.keyBytes);\n\n    // digest the entropy of pools whose index k meet the\n    // condition 'n mod 2^k == 0' where n is the number of reseeds\n    var _2powK = 1;\n    for(var k = 0; k < 32; ++k) {\n      if(ctx.reseeds % _2powK === 0) {\n        md.update(ctx.pools[k].digest().getBytes());\n        ctx.pools[k].start();\n      }\n      _2powK = _2powK << 1;\n    }\n\n    // get digest for key bytes\n    ctx.keyBytes = md.digest().getBytes();\n\n    // paranoid deviation from Fortuna:\n    // update `seed` via `seed = hash(key)`\n    // instead of initializing to zero once and only\n    // ever incrementing it\n    md.start();\n    md.update(ctx.keyBytes);\n    var seedBytes = md.digest().getBytes();\n\n    // update state\n    ctx.key = ctx.plugin.formatKey(ctx.keyBytes);\n    ctx.seed = ctx.plugin.formatSeed(seedBytes);\n    ctx.generated = 0;\n  }\n\n  /**\n   * The built-in default seedFile. This seedFile is used when entropy\n   * is needed immediately.\n   *\n   * @param needed the number of bytes that are needed.\n   *\n   * @return the random bytes.\n   */\n  function defaultSeedFile(needed) {\n    // use window.crypto.getRandomValues strong source of entropy if available\n    var getRandomValues = null;\n    var globalScope = forge.util.globalScope;\n    var _crypto = globalScope.crypto || globalScope.msCrypto;\n    if(_crypto && _crypto.getRandomValues) {\n      getRandomValues = function(arr) {\n        return _crypto.getRandomValues(arr);\n      };\n    }\n\n    var b = forge.util.createBuffer();\n    if(getRandomValues) {\n      while(b.length() < needed) {\n        // max byte length is 65536 before QuotaExceededError is thrown\n        // http://www.w3.org/TR/WebCryptoAPI/#RandomSource-method-getRandomValues\n        var count = Math.max(1, Math.min(needed - b.length(), 65536) / 4);\n        var entropy = new Uint32Array(Math.floor(count));\n        try {\n          getRandomValues(entropy);\n          for(var i = 0; i < entropy.length; ++i) {\n            b.putInt32(entropy[i]);\n          }\n        } catch(e) {\n          /* only ignore QuotaExceededError */\n          if(!(typeof QuotaExceededError !== 'undefined' &&\n            e instanceof QuotaExceededError)) {\n            throw e;\n          }\n        }\n      }\n    }\n\n    // be sad and add some weak random data\n    if(b.length() < needed) {\n      /* Draws from Park-Miller \"minimal standard\" 31 bit PRNG,\n      implemented with David G. Carta's optimization: with 32 bit math\n      and without division (Public Domain). */\n      var hi, lo, next;\n      var seed = Math.floor(Math.random() * 0x010000);\n      while(b.length() < needed) {\n        lo = 16807 * (seed & 0xFFFF);\n        hi = 16807 * (seed >> 16);\n        lo += (hi & 0x7FFF) << 16;\n        lo += hi >> 15;\n        lo = (lo & 0x7FFFFFFF) + (lo >> 31);\n        seed = lo & 0xFFFFFFFF;\n\n        // consume lower 3 bytes of seed\n        for(var i = 0; i < 3; ++i) {\n          // throw in more pseudo random\n          next = seed >>> (i << 3);\n          next ^= Math.floor(Math.random() * 0x0100);\n          b.putByte(next & 0xFF);\n        }\n      }\n    }\n\n    return b.getBytes(needed);\n  }\n  // initialize seed file APIs\n  if(_crypto) {\n    // use nodejs async API\n    ctx.seedFile = function(needed, callback) {\n      _crypto.randomBytes(needed, function(err, bytes) {\n        if(err) {\n          return callback(err);\n        }\n        callback(null, bytes.toString());\n      });\n    };\n    // use nodejs sync API\n    ctx.seedFileSync = function(needed) {\n      return _crypto.randomBytes(needed).toString();\n    };\n  } else {\n    ctx.seedFile = function(needed, callback) {\n      try {\n        callback(null, defaultSeedFile(needed));\n      } catch(e) {\n        callback(e);\n      }\n    };\n    ctx.seedFileSync = defaultSeedFile;\n  }\n\n  /**\n   * Adds entropy to a prng ctx's accumulator.\n   *\n   * @param bytes the bytes of entropy as a string.\n   */\n  ctx.collect = function(bytes) {\n    // iterate over pools distributing entropy cyclically\n    var count = bytes.length;\n    for(var i = 0; i < count; ++i) {\n      ctx.pools[ctx.pool].update(bytes.substr(i, 1));\n      ctx.pool = (ctx.pool === 31) ? 0 : ctx.pool + 1;\n    }\n  };\n\n  /**\n   * Collects an integer of n bits.\n   *\n   * @param i the integer entropy.\n   * @param n the number of bits in the integer.\n   */\n  ctx.collectInt = function(i, n) {\n    var bytes = '';\n    for(var x = 0; x < n; x += 8) {\n      bytes += String.fromCharCode((i >> x) & 0xFF);\n    }\n    ctx.collect(bytes);\n  };\n\n  /**\n   * Registers a Web Worker to receive immediate entropy from the main thread.\n   * This method is required until Web Workers can access the native crypto\n   * API. This method should be called twice for each created worker, once in\n   * the main thread, and once in the worker itself.\n   *\n   * @param worker the worker to register.\n   */\n  ctx.registerWorker = function(worker) {\n    // worker receives random bytes\n    if(worker === self) {\n      ctx.seedFile = function(needed, callback) {\n        function listener(e) {\n          var data = e.data;\n          if(data.forge && data.forge.prng) {\n            self.removeEventListener('message', listener);\n            callback(data.forge.prng.err, data.forge.prng.bytes);\n          }\n        }\n        self.addEventListener('message', listener);\n        self.postMessage({forge: {prng: {needed: needed}}});\n      };\n    } else {\n      // main thread sends random bytes upon request\n      var listener = function(e) {\n        var data = e.data;\n        if(data.forge && data.forge.prng) {\n          ctx.seedFile(data.forge.prng.needed, function(err, bytes) {\n            worker.postMessage({forge: {prng: {err: err, bytes: bytes}}});\n          });\n        }\n      };\n      // TODO: do we need to remove the event listener when the worker dies?\n      worker.addEventListener('message', listener);\n    }\n  };\n\n  return ctx;\n};\n","/**\n * RC2 implementation.\n *\n * @author Stefan Siegl\n *\n * Copyright (c) 2012 Stefan Siegl <stesie@brokenpipe.de>\n *\n * Information on the RC2 cipher is available from RFC #2268,\n * http://www.ietf.org/rfc/rfc2268.txt\n */\nvar forge = require('./forge');\nrequire('./util');\n\nvar piTable = [\n  0xd9, 0x78, 0xf9, 0xc4, 0x19, 0xdd, 0xb5, 0xed, 0x28, 0xe9, 0xfd, 0x79, 0x4a, 0xa0, 0xd8, 0x9d,\n  0xc6, 0x7e, 0x37, 0x83, 0x2b, 0x76, 0x53, 0x8e, 0x62, 0x4c, 0x64, 0x88, 0x44, 0x8b, 0xfb, 0xa2,\n  0x17, 0x9a, 0x59, 0xf5, 0x87, 0xb3, 0x4f, 0x13, 0x61, 0x45, 0x6d, 0x8d, 0x09, 0x81, 0x7d, 0x32,\n  0xbd, 0x8f, 0x40, 0xeb, 0x86, 0xb7, 0x7b, 0x0b, 0xf0, 0x95, 0x21, 0x22, 0x5c, 0x6b, 0x4e, 0x82,\n  0x54, 0xd6, 0x65, 0x93, 0xce, 0x60, 0xb2, 0x1c, 0x73, 0x56, 0xc0, 0x14, 0xa7, 0x8c, 0xf1, 0xdc,\n  0x12, 0x75, 0xca, 0x1f, 0x3b, 0xbe, 0xe4, 0xd1, 0x42, 0x3d, 0xd4, 0x30, 0xa3, 0x3c, 0xb6, 0x26,\n  0x6f, 0xbf, 0x0e, 0xda, 0x46, 0x69, 0x07, 0x57, 0x27, 0xf2, 0x1d, 0x9b, 0xbc, 0x94, 0x43, 0x03,\n  0xf8, 0x11, 0xc7, 0xf6, 0x90, 0xef, 0x3e, 0xe7, 0x06, 0xc3, 0xd5, 0x2f, 0xc8, 0x66, 0x1e, 0xd7,\n  0x08, 0xe8, 0xea, 0xde, 0x80, 0x52, 0xee, 0xf7, 0x84, 0xaa, 0x72, 0xac, 0x35, 0x4d, 0x6a, 0x2a,\n  0x96, 0x1a, 0xd2, 0x71, 0x5a, 0x15, 0x49, 0x74, 0x4b, 0x9f, 0xd0, 0x5e, 0x04, 0x18, 0xa4, 0xec,\n  0xc2, 0xe0, 0x41, 0x6e, 0x0f, 0x51, 0xcb, 0xcc, 0x24, 0x91, 0xaf, 0x50, 0xa1, 0xf4, 0x70, 0x39,\n  0x99, 0x7c, 0x3a, 0x85, 0x23, 0xb8, 0xb4, 0x7a, 0xfc, 0x02, 0x36, 0x5b, 0x25, 0x55, 0x97, 0x31,\n  0x2d, 0x5d, 0xfa, 0x98, 0xe3, 0x8a, 0x92, 0xae, 0x05, 0xdf, 0x29, 0x10, 0x67, 0x6c, 0xba, 0xc9,\n  0xd3, 0x00, 0xe6, 0xcf, 0xe1, 0x9e, 0xa8, 0x2c, 0x63, 0x16, 0x01, 0x3f, 0x58, 0xe2, 0x89, 0xa9,\n  0x0d, 0x38, 0x34, 0x1b, 0xab, 0x33, 0xff, 0xb0, 0xbb, 0x48, 0x0c, 0x5f, 0xb9, 0xb1, 0xcd, 0x2e,\n  0xc5, 0xf3, 0xdb, 0x47, 0xe5, 0xa5, 0x9c, 0x77, 0x0a, 0xa6, 0x20, 0x68, 0xfe, 0x7f, 0xc1, 0xad\n];\n\nvar s = [1, 2, 3, 5];\n\n/**\n * Rotate a word left by given number of bits.\n *\n * Bits that are shifted out on the left are put back in on the right\n * hand side.\n *\n * @param word The word to shift left.\n * @param bits The number of bits to shift by.\n * @return The rotated word.\n */\nvar rol = function(word, bits) {\n  return ((word << bits) & 0xffff) | ((word & 0xffff) >> (16 - bits));\n};\n\n/**\n * Rotate a word right by given number of bits.\n *\n * Bits that are shifted out on the right are put back in on the left\n * hand side.\n *\n * @param word The word to shift right.\n * @param bits The number of bits to shift by.\n * @return The rotated word.\n */\nvar ror = function(word, bits) {\n  return ((word & 0xffff) >> bits) | ((word << (16 - bits)) & 0xffff);\n};\n\n/* RC2 API */\nmodule.exports = forge.rc2 = forge.rc2 || {};\n\n/**\n * Perform RC2 key expansion as per RFC #2268, section 2.\n *\n * @param key variable-length user key (between 1 and 128 bytes)\n * @param effKeyBits number of effective key bits (default: 128)\n * @return the expanded RC2 key (ByteBuffer of 128 bytes)\n */\nforge.rc2.expandKey = function(key, effKeyBits) {\n  if(typeof key === 'string') {\n    key = forge.util.createBuffer(key);\n  }\n  effKeyBits = effKeyBits || 128;\n\n  /* introduce variables that match the names used in RFC #2268 */\n  var L = key;\n  var T = key.length();\n  var T1 = effKeyBits;\n  var T8 = Math.ceil(T1 / 8);\n  var TM = 0xff >> (T1 & 0x07);\n  var i;\n\n  for(i = T; i < 128; i++) {\n    L.putByte(piTable[(L.at(i - 1) + L.at(i - T)) & 0xff]);\n  }\n\n  L.setAt(128 - T8, piTable[L.at(128 - T8) & TM]);\n\n  for(i = 127 - T8; i >= 0; i--) {\n    L.setAt(i, piTable[L.at(i + 1) ^ L.at(i + T8)]);\n  }\n\n  return L;\n};\n\n/**\n * Creates a RC2 cipher object.\n *\n * @param key the symmetric key to use (as base for key generation).\n * @param bits the number of effective key bits.\n * @param encrypt false for decryption, true for encryption.\n *\n * @return the cipher.\n */\nvar createCipher = function(key, bits, encrypt) {\n  var _finish = false, _input = null, _output = null, _iv = null;\n  var mixRound, mashRound;\n  var i, j, K = [];\n\n  /* Expand key and fill into K[] Array */\n  key = forge.rc2.expandKey(key, bits);\n  for(i = 0; i < 64; i++) {\n    K.push(key.getInt16Le());\n  }\n\n  if(encrypt) {\n    /**\n     * Perform one mixing round \"in place\".\n     *\n     * @param R Array of four words to perform mixing on.\n     */\n    mixRound = function(R) {\n      for(i = 0; i < 4; i++) {\n        R[i] += K[j] + (R[(i + 3) % 4] & R[(i + 2) % 4]) +\n          ((~R[(i + 3) % 4]) & R[(i + 1) % 4]);\n        R[i] = rol(R[i], s[i]);\n        j++;\n      }\n    };\n\n    /**\n     * Perform one mashing round \"in place\".\n     *\n     * @param R Array of four words to perform mashing on.\n     */\n    mashRound = function(R) {\n      for(i = 0; i < 4; i++) {\n        R[i] += K[R[(i + 3) % 4] & 63];\n      }\n    };\n  } else {\n    /**\n     * Perform one r-mixing round \"in place\".\n     *\n     * @param R Array of four words to perform mixing on.\n     */\n    mixRound = function(R) {\n      for(i = 3; i >= 0; i--) {\n        R[i] = ror(R[i], s[i]);\n        R[i] -= K[j] + (R[(i + 3) % 4] & R[(i + 2) % 4]) +\n          ((~R[(i + 3) % 4]) & R[(i + 1) % 4]);\n        j--;\n      }\n    };\n\n    /**\n     * Perform one r-mashing round \"in place\".\n     *\n     * @param R Array of four words to perform mashing on.\n     */\n    mashRound = function(R) {\n      for(i = 3; i >= 0; i--) {\n        R[i] -= K[R[(i + 3) % 4] & 63];\n      }\n    };\n  }\n\n  /**\n   * Run the specified cipher execution plan.\n   *\n   * This function takes four words from the input buffer, applies the IV on\n   * it (if requested) and runs the provided execution plan.\n   *\n   * The plan must be put together in form of a array of arrays.  Where the\n   * outer one is simply a list of steps to perform and the inner one needs\n   * to have two elements: the first one telling how many rounds to perform,\n   * the second one telling what to do (i.e. the function to call).\n   *\n   * @param {Array} plan The plan to execute.\n   */\n  var runPlan = function(plan) {\n    var R = [];\n\n    /* Get data from input buffer and fill the four words into R */\n    for(i = 0; i < 4; i++) {\n      var val = _input.getInt16Le();\n\n      if(_iv !== null) {\n        if(encrypt) {\n          /* We're encrypting, apply the IV first. */\n          val ^= _iv.getInt16Le();\n        } else {\n          /* We're decryption, keep cipher text for next block. */\n          _iv.putInt16Le(val);\n        }\n      }\n\n      R.push(val & 0xffff);\n    }\n\n    /* Reset global \"j\" variable as per spec. */\n    j = encrypt ? 0 : 63;\n\n    /* Run execution plan. */\n    for(var ptr = 0; ptr < plan.length; ptr++) {\n      for(var ctr = 0; ctr < plan[ptr][0]; ctr++) {\n        plan[ptr][1](R);\n      }\n    }\n\n    /* Write back result to output buffer. */\n    for(i = 0; i < 4; i++) {\n      if(_iv !== null) {\n        if(encrypt) {\n          /* We're encrypting in CBC-mode, feed back encrypted bytes into\n             IV buffer to carry it forward to next block. */\n          _iv.putInt16Le(R[i]);\n        } else {\n          R[i] ^= _iv.getInt16Le();\n        }\n      }\n\n      _output.putInt16Le(R[i]);\n    }\n  };\n\n  /* Create cipher object */\n  var cipher = null;\n  cipher = {\n    /**\n     * Starts or restarts the encryption or decryption process, whichever\n     * was previously configured.\n     *\n     * To use the cipher in CBC mode, iv may be given either as a string\n     * of bytes, or as a byte buffer.  For ECB mode, give null as iv.\n     *\n     * @param iv the initialization vector to use, null for ECB mode.\n     * @param output the output the buffer to write to, null to create one.\n     */\n    start: function(iv, output) {\n      if(iv) {\n        /* CBC mode */\n        if(typeof iv === 'string') {\n          iv = forge.util.createBuffer(iv);\n        }\n      }\n\n      _finish = false;\n      _input = forge.util.createBuffer();\n      _output = output || new forge.util.createBuffer();\n      _iv = iv;\n\n      cipher.output = _output;\n    },\n\n    /**\n     * Updates the next block.\n     *\n     * @param input the buffer to read from.\n     */\n    update: function(input) {\n      if(!_finish) {\n        // not finishing, so fill the input buffer with more input\n        _input.putBuffer(input);\n      }\n\n      while(_input.length() >= 8) {\n        runPlan([\n            [ 5, mixRound ],\n            [ 1, mashRound ],\n            [ 6, mixRound ],\n            [ 1, mashRound ],\n            [ 5, mixRound ]\n          ]);\n      }\n    },\n\n    /**\n     * Finishes encrypting or decrypting.\n     *\n     * @param pad a padding function to use, null for PKCS#7 padding,\n     *           signature(blockSize, buffer, decrypt).\n     *\n     * @return true if successful, false on error.\n     */\n    finish: function(pad) {\n      var rval = true;\n\n      if(encrypt) {\n        if(pad) {\n          rval = pad(8, _input, !encrypt);\n        } else {\n          // add PKCS#7 padding to block (each pad byte is the\n          // value of the number of pad bytes)\n          var padding = (_input.length() === 8) ? 8 : (8 - _input.length());\n          _input.fillWithByte(padding, padding);\n        }\n      }\n\n      if(rval) {\n        // do final update\n        _finish = true;\n        cipher.update();\n      }\n\n      if(!encrypt) {\n        // check for error: input data not a multiple of block size\n        rval = (_input.length() === 0);\n        if(rval) {\n          if(pad) {\n            rval = pad(8, _output, !encrypt);\n          } else {\n            // ensure padding byte count is valid\n            var len = _output.length();\n            var count = _output.at(len - 1);\n\n            if(count > len) {\n              rval = false;\n            } else {\n              // trim off padding bytes\n              _output.truncate(count);\n            }\n          }\n        }\n      }\n\n      return rval;\n    }\n  };\n\n  return cipher;\n};\n\n/**\n * Creates an RC2 cipher object to encrypt data in ECB or CBC mode using the\n * given symmetric key. The output will be stored in the 'output' member\n * of the returned cipher.\n *\n * The key and iv may be given as a string of bytes or a byte buffer.\n * The cipher is initialized to use 128 effective key bits.\n *\n * @param key the symmetric key to use.\n * @param iv the initialization vector to use.\n * @param output the buffer to write to, null to create one.\n *\n * @return the cipher.\n */\nforge.rc2.startEncrypting = function(key, iv, output) {\n  var cipher = forge.rc2.createEncryptionCipher(key, 128);\n  cipher.start(iv, output);\n  return cipher;\n};\n\n/**\n * Creates an RC2 cipher object to encrypt data in ECB or CBC mode using the\n * given symmetric key.\n *\n * The key may be given as a string of bytes or a byte buffer.\n *\n * To start encrypting call start() on the cipher with an iv and optional\n * output buffer.\n *\n * @param key the symmetric key to use.\n *\n * @return the cipher.\n */\nforge.rc2.createEncryptionCipher = function(key, bits) {\n  return createCipher(key, bits, true);\n};\n\n/**\n * Creates an RC2 cipher object to decrypt data in ECB or CBC mode using the\n * given symmetric key. The output will be stored in the 'output' member\n * of the returned cipher.\n *\n * The key and iv may be given as a string of bytes or a byte buffer.\n * The cipher is initialized to use 128 effective key bits.\n *\n * @param key the symmetric key to use.\n * @param iv the initialization vector to use.\n * @param output the buffer to write to, null to create one.\n *\n * @return the cipher.\n */\nforge.rc2.startDecrypting = function(key, iv, output) {\n  var cipher = forge.rc2.createDecryptionCipher(key, 128);\n  cipher.start(iv, output);\n  return cipher;\n};\n\n/**\n * Creates an RC2 cipher object to decrypt data in ECB or CBC mode using the\n * given symmetric key.\n *\n * The key may be given as a string of bytes or a byte buffer.\n *\n * To start decrypting call start() on the cipher with an iv and optional\n * output buffer.\n *\n * @param key the symmetric key to use.\n *\n * @return the cipher.\n */\nforge.rc2.createDecryptionCipher = function(key, bits) {\n  return createCipher(key, bits, false);\n};\n","/**\n * Supported cipher modes.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./util');\n\nforge.cipher = forge.cipher || {};\n\n// supported cipher modes\nvar modes = module.exports = forge.cipher.modes = forge.cipher.modes || {};\n\n/** Electronic codebook (ECB) (Don't use this; it's not secure) **/\n\nmodes.ecb = function(options) {\n  options = options || {};\n  this.name = 'ECB';\n  this.cipher = options.cipher;\n  this.blockSize = options.blockSize || 16;\n  this._ints = this.blockSize / 4;\n  this._inBlock = new Array(this._ints);\n  this._outBlock = new Array(this._ints);\n};\n\nmodes.ecb.prototype.start = function(options) {};\n\nmodes.ecb.prototype.encrypt = function(input, output, finish) {\n  // not enough input to encrypt\n  if(input.length() < this.blockSize && !(finish && input.length() > 0)) {\n    return true;\n  }\n\n  // get next block\n  for(var i = 0; i < this._ints; ++i) {\n    this._inBlock[i] = input.getInt32();\n  }\n\n  // encrypt block\n  this.cipher.encrypt(this._inBlock, this._outBlock);\n\n  // write output\n  for(var i = 0; i < this._ints; ++i) {\n    output.putInt32(this._outBlock[i]);\n  }\n};\n\nmodes.ecb.prototype.decrypt = function(input, output, finish) {\n  // not enough input to decrypt\n  if(input.length() < this.blockSize && !(finish && input.length() > 0)) {\n    return true;\n  }\n\n  // get next block\n  for(var i = 0; i < this._ints; ++i) {\n    this._inBlock[i] = input.getInt32();\n  }\n\n  // decrypt block\n  this.cipher.decrypt(this._inBlock, this._outBlock);\n\n  // write output\n  for(var i = 0; i < this._ints; ++i) {\n    output.putInt32(this._outBlock[i]);\n  }\n};\n\nmodes.ecb.prototype.pad = function(input, options) {\n  // add PKCS#7 padding to block (each pad byte is the\n  // value of the number of pad bytes)\n  var padding = (input.length() === this.blockSize ?\n    this.blockSize : (this.blockSize - input.length()));\n  input.fillWithByte(padding, padding);\n  return true;\n};\n\nmodes.ecb.prototype.unpad = function(output, options) {\n  // check for error: input data not a multiple of blockSize\n  if(options.overflow > 0) {\n    return false;\n  }\n\n  // ensure padding byte count is valid\n  var len = output.length();\n  var count = output.at(len - 1);\n  if(count > (this.blockSize << 2)) {\n    return false;\n  }\n\n  // trim off padding bytes\n  output.truncate(count);\n  return true;\n};\n\n/** Cipher-block Chaining (CBC) **/\n\nmodes.cbc = function(options) {\n  options = options || {};\n  this.name = 'CBC';\n  this.cipher = options.cipher;\n  this.blockSize = options.blockSize || 16;\n  this._ints = this.blockSize / 4;\n  this._inBlock = new Array(this._ints);\n  this._outBlock = new Array(this._ints);\n};\n\nmodes.cbc.prototype.start = function(options) {\n  // Note: legacy support for using IV residue (has security flaws)\n  // if IV is null, reuse block from previous processing\n  if(options.iv === null) {\n    // must have a previous block\n    if(!this._prev) {\n      throw new Error('Invalid IV parameter.');\n    }\n    this._iv = this._prev.slice(0);\n  } else if(!('iv' in options)) {\n    throw new Error('Invalid IV parameter.');\n  } else {\n    // save IV as \"previous\" block\n    this._iv = transformIV(options.iv, this.blockSize);\n    this._prev = this._iv.slice(0);\n  }\n};\n\nmodes.cbc.prototype.encrypt = function(input, output, finish) {\n  // not enough input to encrypt\n  if(input.length() < this.blockSize && !(finish && input.length() > 0)) {\n    return true;\n  }\n\n  // get next block\n  // CBC XOR's IV (or previous block) with plaintext\n  for(var i = 0; i < this._ints; ++i) {\n    this._inBlock[i] = this._prev[i] ^ input.getInt32();\n  }\n\n  // encrypt block\n  this.cipher.encrypt(this._inBlock, this._outBlock);\n\n  // write output, save previous block\n  for(var i = 0; i < this._ints; ++i) {\n    output.putInt32(this._outBlock[i]);\n  }\n  this._prev = this._outBlock;\n};\n\nmodes.cbc.prototype.decrypt = function(input, output, finish) {\n  // not enough input to decrypt\n  if(input.length() < this.blockSize && !(finish && input.length() > 0)) {\n    return true;\n  }\n\n  // get next block\n  for(var i = 0; i < this._ints; ++i) {\n    this._inBlock[i] = input.getInt32();\n  }\n\n  // decrypt block\n  this.cipher.decrypt(this._inBlock, this._outBlock);\n\n  // write output, save previous ciphered block\n  // CBC XOR's IV (or previous block) with ciphertext\n  for(var i = 0; i < this._ints; ++i) {\n    output.putInt32(this._prev[i] ^ this._outBlock[i]);\n  }\n  this._prev = this._inBlock.slice(0);\n};\n\nmodes.cbc.prototype.pad = function(input, options) {\n  // add PKCS#7 padding to block (each pad byte is the\n  // value of the number of pad bytes)\n  var padding = (input.length() === this.blockSize ?\n    this.blockSize : (this.blockSize - input.length()));\n  input.fillWithByte(padding, padding);\n  return true;\n};\n\nmodes.cbc.prototype.unpad = function(output, options) {\n  // check for error: input data not a multiple of blockSize\n  if(options.overflow > 0) {\n    return false;\n  }\n\n  // ensure padding byte count is valid\n  var len = output.length();\n  var count = output.at(len - 1);\n  if(count > (this.blockSize << 2)) {\n    return false;\n  }\n\n  // trim off padding bytes\n  output.truncate(count);\n  return true;\n};\n\n/** Cipher feedback (CFB) **/\n\nmodes.cfb = function(options) {\n  options = options || {};\n  this.name = 'CFB';\n  this.cipher = options.cipher;\n  this.blockSize = options.blockSize || 16;\n  this._ints = this.blockSize / 4;\n  this._inBlock = null;\n  this._outBlock = new Array(this._ints);\n  this._partialBlock = new Array(this._ints);\n  this._partialOutput = forge.util.createBuffer();\n  this._partialBytes = 0;\n};\n\nmodes.cfb.prototype.start = function(options) {\n  if(!('iv' in options)) {\n    throw new Error('Invalid IV parameter.');\n  }\n  // use IV as first input\n  this._iv = transformIV(options.iv, this.blockSize);\n  this._inBlock = this._iv.slice(0);\n  this._partialBytes = 0;\n};\n\nmodes.cfb.prototype.encrypt = function(input, output, finish) {\n  // not enough input to encrypt\n  var inputLength = input.length();\n  if(inputLength === 0) {\n    return true;\n  }\n\n  // encrypt block\n  this.cipher.encrypt(this._inBlock, this._outBlock);\n\n  // handle full block\n  if(this._partialBytes === 0 && inputLength >= this.blockSize) {\n    // XOR input with output, write input as output\n    for(var i = 0; i < this._ints; ++i) {\n      this._inBlock[i] = input.getInt32() ^ this._outBlock[i];\n      output.putInt32(this._inBlock[i]);\n    }\n    return;\n  }\n\n  // handle partial block\n  var partialBytes = (this.blockSize - inputLength) % this.blockSize;\n  if(partialBytes > 0) {\n    partialBytes = this.blockSize - partialBytes;\n  }\n\n  // XOR input with output, write input as partial output\n  this._partialOutput.clear();\n  for(var i = 0; i < this._ints; ++i) {\n    this._partialBlock[i] = input.getInt32() ^ this._outBlock[i];\n    this._partialOutput.putInt32(this._partialBlock[i]);\n  }\n\n  if(partialBytes > 0) {\n    // block still incomplete, restore input buffer\n    input.read -= this.blockSize;\n  } else {\n    // block complete, update input block\n    for(var i = 0; i < this._ints; ++i) {\n      this._inBlock[i] = this._partialBlock[i];\n    }\n  }\n\n  // skip any previous partial bytes\n  if(this._partialBytes > 0) {\n    this._partialOutput.getBytes(this._partialBytes);\n  }\n\n  if(partialBytes > 0 && !finish) {\n    output.putBytes(this._partialOutput.getBytes(\n      partialBytes - this._partialBytes));\n    this._partialBytes = partialBytes;\n    return true;\n  }\n\n  output.putBytes(this._partialOutput.getBytes(\n    inputLength - this._partialBytes));\n  this._partialBytes = 0;\n};\n\nmodes.cfb.prototype.decrypt = function(input, output, finish) {\n  // not enough input to decrypt\n  var inputLength = input.length();\n  if(inputLength === 0) {\n    return true;\n  }\n\n  // encrypt block (CFB always uses encryption mode)\n  this.cipher.encrypt(this._inBlock, this._outBlock);\n\n  // handle full block\n  if(this._partialBytes === 0 && inputLength >= this.blockSize) {\n    // XOR input with output, write input as output\n    for(var i = 0; i < this._ints; ++i) {\n      this._inBlock[i] = input.getInt32();\n      output.putInt32(this._inBlock[i] ^ this._outBlock[i]);\n    }\n    return;\n  }\n\n  // handle partial block\n  var partialBytes = (this.blockSize - inputLength) % this.blockSize;\n  if(partialBytes > 0) {\n    partialBytes = this.blockSize - partialBytes;\n  }\n\n  // XOR input with output, write input as partial output\n  this._partialOutput.clear();\n  for(var i = 0; i < this._ints; ++i) {\n    this._partialBlock[i] = input.getInt32();\n    this._partialOutput.putInt32(this._partialBlock[i] ^ this._outBlock[i]);\n  }\n\n  if(partialBytes > 0) {\n    // block still incomplete, restore input buffer\n    input.read -= this.blockSize;\n  } else {\n    // block complete, update input block\n    for(var i = 0; i < this._ints; ++i) {\n      this._inBlock[i] = this._partialBlock[i];\n    }\n  }\n\n  // skip any previous partial bytes\n  if(this._partialBytes > 0) {\n    this._partialOutput.getBytes(this._partialBytes);\n  }\n\n  if(partialBytes > 0 && !finish) {\n    output.putBytes(this._partialOutput.getBytes(\n      partialBytes - this._partialBytes));\n    this._partialBytes = partialBytes;\n    return true;\n  }\n\n  output.putBytes(this._partialOutput.getBytes(\n    inputLength - this._partialBytes));\n  this._partialBytes = 0;\n};\n\n/** Output feedback (OFB) **/\n\nmodes.ofb = function(options) {\n  options = options || {};\n  this.name = 'OFB';\n  this.cipher = options.cipher;\n  this.blockSize = options.blockSize || 16;\n  this._ints = this.blockSize / 4;\n  this._inBlock = null;\n  this._outBlock = new Array(this._ints);\n  this._partialOutput = forge.util.createBuffer();\n  this._partialBytes = 0;\n};\n\nmodes.ofb.prototype.start = function(options) {\n  if(!('iv' in options)) {\n    throw new Error('Invalid IV parameter.');\n  }\n  // use IV as first input\n  this._iv = transformIV(options.iv, this.blockSize);\n  this._inBlock = this._iv.slice(0);\n  this._partialBytes = 0;\n};\n\nmodes.ofb.prototype.encrypt = function(input, output, finish) {\n  // not enough input to encrypt\n  var inputLength = input.length();\n  if(input.length() === 0) {\n    return true;\n  }\n\n  // encrypt block (OFB always uses encryption mode)\n  this.cipher.encrypt(this._inBlock, this._outBlock);\n\n  // handle full block\n  if(this._partialBytes === 0 && inputLength >= this.blockSize) {\n    // XOR input with output and update next input\n    for(var i = 0; i < this._ints; ++i) {\n      output.putInt32(input.getInt32() ^ this._outBlock[i]);\n      this._inBlock[i] = this._outBlock[i];\n    }\n    return;\n  }\n\n  // handle partial block\n  var partialBytes = (this.blockSize - inputLength) % this.blockSize;\n  if(partialBytes > 0) {\n    partialBytes = this.blockSize - partialBytes;\n  }\n\n  // XOR input with output\n  this._partialOutput.clear();\n  for(var i = 0; i < this._ints; ++i) {\n    this._partialOutput.putInt32(input.getInt32() ^ this._outBlock[i]);\n  }\n\n  if(partialBytes > 0) {\n    // block still incomplete, restore input buffer\n    input.read -= this.blockSize;\n  } else {\n    // block complete, update input block\n    for(var i = 0; i < this._ints; ++i) {\n      this._inBlock[i] = this._outBlock[i];\n    }\n  }\n\n  // skip any previous partial bytes\n  if(this._partialBytes > 0) {\n    this._partialOutput.getBytes(this._partialBytes);\n  }\n\n  if(partialBytes > 0 && !finish) {\n    output.putBytes(this._partialOutput.getBytes(\n      partialBytes - this._partialBytes));\n    this._partialBytes = partialBytes;\n    return true;\n  }\n\n  output.putBytes(this._partialOutput.getBytes(\n    inputLength - this._partialBytes));\n  this._partialBytes = 0;\n};\n\nmodes.ofb.prototype.decrypt = modes.ofb.prototype.encrypt;\n\n/** Counter (CTR) **/\n\nmodes.ctr = function(options) {\n  options = options || {};\n  this.name = 'CTR';\n  this.cipher = options.cipher;\n  this.blockSize = options.blockSize || 16;\n  this._ints = this.blockSize / 4;\n  this._inBlock = null;\n  this._outBlock = new Array(this._ints);\n  this._partialOutput = forge.util.createBuffer();\n  this._partialBytes = 0;\n};\n\nmodes.ctr.prototype.start = function(options) {\n  if(!('iv' in options)) {\n    throw new Error('Invalid IV parameter.');\n  }\n  // use IV as first input\n  this._iv = transformIV(options.iv, this.blockSize);\n  this._inBlock = this._iv.slice(0);\n  this._partialBytes = 0;\n};\n\nmodes.ctr.prototype.encrypt = function(input, output, finish) {\n  // not enough input to encrypt\n  var inputLength = input.length();\n  if(inputLength === 0) {\n    return true;\n  }\n\n  // encrypt block (CTR always uses encryption mode)\n  this.cipher.encrypt(this._inBlock, this._outBlock);\n\n  // handle full block\n  if(this._partialBytes === 0 && inputLength >= this.blockSize) {\n    // XOR input with output\n    for(var i = 0; i < this._ints; ++i) {\n      output.putInt32(input.getInt32() ^ this._outBlock[i]);\n    }\n  } else {\n    // handle partial block\n    var partialBytes = (this.blockSize - inputLength) % this.blockSize;\n    if(partialBytes > 0) {\n      partialBytes = this.blockSize - partialBytes;\n    }\n\n    // XOR input with output\n    this._partialOutput.clear();\n    for(var i = 0; i < this._ints; ++i) {\n      this._partialOutput.putInt32(input.getInt32() ^ this._outBlock[i]);\n    }\n\n    if(partialBytes > 0) {\n      // block still incomplete, restore input buffer\n      input.read -= this.blockSize;\n    }\n\n    // skip any previous partial bytes\n    if(this._partialBytes > 0) {\n      this._partialOutput.getBytes(this._partialBytes);\n    }\n\n    if(partialBytes > 0 && !finish) {\n      output.putBytes(this._partialOutput.getBytes(\n        partialBytes - this._partialBytes));\n      this._partialBytes = partialBytes;\n      return true;\n    }\n\n    output.putBytes(this._partialOutput.getBytes(\n      inputLength - this._partialBytes));\n    this._partialBytes = 0;\n  }\n\n  // block complete, increment counter (input block)\n  inc32(this._inBlock);\n};\n\nmodes.ctr.prototype.decrypt = modes.ctr.prototype.encrypt;\n\n/** Galois/Counter Mode (GCM) **/\n\nmodes.gcm = function(options) {\n  options = options || {};\n  this.name = 'GCM';\n  this.cipher = options.cipher;\n  this.blockSize = options.blockSize || 16;\n  this._ints = this.blockSize / 4;\n  this._inBlock = new Array(this._ints);\n  this._outBlock = new Array(this._ints);\n  this._partialOutput = forge.util.createBuffer();\n  this._partialBytes = 0;\n\n  // R is actually this value concatenated with 120 more zero bits, but\n  // we only XOR against R so the other zeros have no effect -- we just\n  // apply this value to the first integer in a block\n  this._R = 0xE1000000;\n};\n\nmodes.gcm.prototype.start = function(options) {\n  if(!('iv' in options)) {\n    throw new Error('Invalid IV parameter.');\n  }\n  // ensure IV is a byte buffer\n  var iv = forge.util.createBuffer(options.iv);\n\n  // no ciphered data processed yet\n  this._cipherLength = 0;\n\n  // default additional data is none\n  var additionalData;\n  if('additionalData' in options) {\n    additionalData = forge.util.createBuffer(options.additionalData);\n  } else {\n    additionalData = forge.util.createBuffer();\n  }\n\n  // default tag length is 128 bits\n  if('tagLength' in options) {\n    this._tagLength = options.tagLength;\n  } else {\n    this._tagLength = 128;\n  }\n\n  // if tag is given, ensure tag matches tag length\n  this._tag = null;\n  if(options.decrypt) {\n    // save tag to check later\n    this._tag = forge.util.createBuffer(options.tag).getBytes();\n    if(this._tag.length !== (this._tagLength / 8)) {\n      throw new Error('Authentication tag does not match tag length.');\n    }\n  }\n\n  // create tmp storage for hash calculation\n  this._hashBlock = new Array(this._ints);\n\n  // no tag generated yet\n  this.tag = null;\n\n  // generate hash subkey\n  // (apply block cipher to \"zero\" block)\n  this._hashSubkey = new Array(this._ints);\n  this.cipher.encrypt([0, 0, 0, 0], this._hashSubkey);\n\n  // generate table M\n  // use 4-bit tables (32 component decomposition of a 16 byte value)\n  // 8-bit tables take more space and are known to have security\n  // vulnerabilities (in native implementations)\n  this.componentBits = 4;\n  this._m = this.generateHashTable(this._hashSubkey, this.componentBits);\n\n  // Note: support IV length different from 96 bits? (only supporting\n  // 96 bits is recommended by NIST SP-800-38D)\n  // generate J_0\n  var ivLength = iv.length();\n  if(ivLength === 12) {\n    // 96-bit IV\n    this._j0 = [iv.getInt32(), iv.getInt32(), iv.getInt32(), 1];\n  } else {\n    // IV is NOT 96-bits\n    this._j0 = [0, 0, 0, 0];\n    while(iv.length() > 0) {\n      this._j0 = this.ghash(\n        this._hashSubkey, this._j0,\n        [iv.getInt32(), iv.getInt32(), iv.getInt32(), iv.getInt32()]);\n    }\n    this._j0 = this.ghash(\n      this._hashSubkey, this._j0, [0, 0].concat(from64To32(ivLength * 8)));\n  }\n\n  // generate ICB (initial counter block)\n  this._inBlock = this._j0.slice(0);\n  inc32(this._inBlock);\n  this._partialBytes = 0;\n\n  // consume authentication data\n  additionalData = forge.util.createBuffer(additionalData);\n  // save additional data length as a BE 64-bit number\n  this._aDataLength = from64To32(additionalData.length() * 8);\n  // pad additional data to 128 bit (16 byte) block size\n  var overflow = additionalData.length() % this.blockSize;\n  if(overflow) {\n    additionalData.fillWithByte(0, this.blockSize - overflow);\n  }\n  this._s = [0, 0, 0, 0];\n  while(additionalData.length() > 0) {\n    this._s = this.ghash(this._hashSubkey, this._s, [\n      additionalData.getInt32(),\n      additionalData.getInt32(),\n      additionalData.getInt32(),\n      additionalData.getInt32()\n    ]);\n  }\n};\n\nmodes.gcm.prototype.encrypt = function(input, output, finish) {\n  // not enough input to encrypt\n  var inputLength = input.length();\n  if(inputLength === 0) {\n    return true;\n  }\n\n  // encrypt block\n  this.cipher.encrypt(this._inBlock, this._outBlock);\n\n  // handle full block\n  if(this._partialBytes === 0 && inputLength >= this.blockSize) {\n    // XOR input with output\n    for(var i = 0; i < this._ints; ++i) {\n      output.putInt32(this._outBlock[i] ^= input.getInt32());\n    }\n    this._cipherLength += this.blockSize;\n  } else {\n    // handle partial block\n    var partialBytes = (this.blockSize - inputLength) % this.blockSize;\n    if(partialBytes > 0) {\n      partialBytes = this.blockSize - partialBytes;\n    }\n\n    // XOR input with output\n    this._partialOutput.clear();\n    for(var i = 0; i < this._ints; ++i) {\n      this._partialOutput.putInt32(input.getInt32() ^ this._outBlock[i]);\n    }\n\n    if(partialBytes <= 0 || finish) {\n      // handle overflow prior to hashing\n      if(finish) {\n        // get block overflow\n        var overflow = inputLength % this.blockSize;\n        this._cipherLength += overflow;\n        // truncate for hash function\n        this._partialOutput.truncate(this.blockSize - overflow);\n      } else {\n        this._cipherLength += this.blockSize;\n      }\n\n      // get output block for hashing\n      for(var i = 0; i < this._ints; ++i) {\n        this._outBlock[i] = this._partialOutput.getInt32();\n      }\n      this._partialOutput.read -= this.blockSize;\n    }\n\n    // skip any previous partial bytes\n    if(this._partialBytes > 0) {\n      this._partialOutput.getBytes(this._partialBytes);\n    }\n\n    if(partialBytes > 0 && !finish) {\n      // block still incomplete, restore input buffer, get partial output,\n      // and return early\n      input.read -= this.blockSize;\n      output.putBytes(this._partialOutput.getBytes(\n        partialBytes - this._partialBytes));\n      this._partialBytes = partialBytes;\n      return true;\n    }\n\n    output.putBytes(this._partialOutput.getBytes(\n      inputLength - this._partialBytes));\n    this._partialBytes = 0;\n  }\n\n  // update hash block S\n  this._s = this.ghash(this._hashSubkey, this._s, this._outBlock);\n\n  // increment counter (input block)\n  inc32(this._inBlock);\n};\n\nmodes.gcm.prototype.decrypt = function(input, output, finish) {\n  // not enough input to decrypt\n  var inputLength = input.length();\n  if(inputLength < this.blockSize && !(finish && inputLength > 0)) {\n    return true;\n  }\n\n  // encrypt block (GCM always uses encryption mode)\n  this.cipher.encrypt(this._inBlock, this._outBlock);\n\n  // increment counter (input block)\n  inc32(this._inBlock);\n\n  // update hash block S\n  this._hashBlock[0] = input.getInt32();\n  this._hashBlock[1] = input.getInt32();\n  this._hashBlock[2] = input.getInt32();\n  this._hashBlock[3] = input.getInt32();\n  this._s = this.ghash(this._hashSubkey, this._s, this._hashBlock);\n\n  // XOR hash input with output\n  for(var i = 0; i < this._ints; ++i) {\n    output.putInt32(this._outBlock[i] ^ this._hashBlock[i]);\n  }\n\n  // increment cipher data length\n  if(inputLength < this.blockSize) {\n    this._cipherLength += inputLength % this.blockSize;\n  } else {\n    this._cipherLength += this.blockSize;\n  }\n};\n\nmodes.gcm.prototype.afterFinish = function(output, options) {\n  var rval = true;\n\n  // handle overflow\n  if(options.decrypt && options.overflow) {\n    output.truncate(this.blockSize - options.overflow);\n  }\n\n  // handle authentication tag\n  this.tag = forge.util.createBuffer();\n\n  // concatenate additional data length with cipher length\n  var lengths = this._aDataLength.concat(from64To32(this._cipherLength * 8));\n\n  // include lengths in hash\n  this._s = this.ghash(this._hashSubkey, this._s, lengths);\n\n  // do GCTR(J_0, S)\n  var tag = [];\n  this.cipher.encrypt(this._j0, tag);\n  for(var i = 0; i < this._ints; ++i) {\n    this.tag.putInt32(this._s[i] ^ tag[i]);\n  }\n\n  // trim tag to length\n  this.tag.truncate(this.tag.length() % (this._tagLength / 8));\n\n  // check authentication tag\n  if(options.decrypt && this.tag.bytes() !== this._tag) {\n    rval = false;\n  }\n\n  return rval;\n};\n\n/**\n * See NIST SP-800-38D 6.3 (Algorithm 1). This function performs Galois\n * field multiplication. The field, GF(2^128), is defined by the polynomial:\n *\n * x^128 + x^7 + x^2 + x + 1\n *\n * Which is represented in little-endian binary form as: 11100001 (0xe1). When\n * the value of a coefficient is 1, a bit is set. The value R, is the\n * concatenation of this value and 120 zero bits, yielding a 128-bit value\n * which matches the block size.\n *\n * This function will multiply two elements (vectors of bytes), X and Y, in\n * the field GF(2^128). The result is initialized to zero. For each bit of\n * X (out of 128), x_i, if x_i is set, then the result is multiplied (XOR'd)\n * by the current value of Y. For each bit, the value of Y will be raised by\n * a power of x (multiplied by the polynomial x). This can be achieved by\n * shifting Y once to the right. If the current value of Y, prior to being\n * multiplied by x, has 0 as its LSB, then it is a 127th degree polynomial.\n * Otherwise, we must divide by R after shifting to find the remainder.\n *\n * @param x the first block to multiply by the second.\n * @param y the second block to multiply by the first.\n *\n * @return the block result of the multiplication.\n */\nmodes.gcm.prototype.multiply = function(x, y) {\n  var z_i = [0, 0, 0, 0];\n  var v_i = y.slice(0);\n\n  // calculate Z_128 (block has 128 bits)\n  for(var i = 0; i < 128; ++i) {\n    // if x_i is 0, Z_{i+1} = Z_i (unchanged)\n    // else Z_{i+1} = Z_i ^ V_i\n    // get x_i by finding 32-bit int position, then left shift 1 by remainder\n    var x_i = x[(i / 32) | 0] & (1 << (31 - i % 32));\n    if(x_i) {\n      z_i[0] ^= v_i[0];\n      z_i[1] ^= v_i[1];\n      z_i[2] ^= v_i[2];\n      z_i[3] ^= v_i[3];\n    }\n\n    // if LSB(V_i) is 1, V_i = V_i >> 1\n    // else V_i = (V_i >> 1) ^ R\n    this.pow(v_i, v_i);\n  }\n\n  return z_i;\n};\n\nmodes.gcm.prototype.pow = function(x, out) {\n  // if LSB(x) is 1, x = x >>> 1\n  // else x = (x >>> 1) ^ R\n  var lsb = x[3] & 1;\n\n  // always do x >>> 1:\n  // starting with the rightmost integer, shift each integer to the right\n  // one bit, pulling in the bit from the integer to the left as its top\n  // most bit (do this for the last 3 integers)\n  for(var i = 3; i > 0; --i) {\n    out[i] = (x[i] >>> 1) | ((x[i - 1] & 1) << 31);\n  }\n  // shift the first integer normally\n  out[0] = x[0] >>> 1;\n\n  // if lsb was not set, then polynomial had a degree of 127 and doesn't\n  // need to divided; otherwise, XOR with R to find the remainder; we only\n  // need to XOR the first integer since R technically ends w/120 zero bits\n  if(lsb) {\n    out[0] ^= this._R;\n  }\n};\n\nmodes.gcm.prototype.tableMultiply = function(x) {\n  // assumes 4-bit tables are used\n  var z = [0, 0, 0, 0];\n  for(var i = 0; i < 32; ++i) {\n    var idx = (i / 8) | 0;\n    var x_i = (x[idx] >>> ((7 - (i % 8)) * 4)) & 0xF;\n    var ah = this._m[i][x_i];\n    z[0] ^= ah[0];\n    z[1] ^= ah[1];\n    z[2] ^= ah[2];\n    z[3] ^= ah[3];\n  }\n  return z;\n};\n\n/**\n * A continuing version of the GHASH algorithm that operates on a single\n * block. The hash block, last hash value (Ym) and the new block to hash\n * are given.\n *\n * @param h the hash block.\n * @param y the previous value for Ym, use [0, 0, 0, 0] for a new hash.\n * @param x the block to hash.\n *\n * @return the hashed value (Ym).\n */\nmodes.gcm.prototype.ghash = function(h, y, x) {\n  y[0] ^= x[0];\n  y[1] ^= x[1];\n  y[2] ^= x[2];\n  y[3] ^= x[3];\n  return this.tableMultiply(y);\n  //return this.multiply(y, h);\n};\n\n/**\n * Precomputes a table for multiplying against the hash subkey. This\n * mechanism provides a substantial speed increase over multiplication\n * performed without a table. The table-based multiplication this table is\n * for solves X * H by multiplying each component of X by H and then\n * composing the results together using XOR.\n *\n * This function can be used to generate tables with different bit sizes\n * for the components, however, this implementation assumes there are\n * 32 components of X (which is a 16 byte vector), therefore each component\n * takes 4-bits (so the table is constructed with bits=4).\n *\n * @param h the hash subkey.\n * @param bits the bit size for a component.\n */\nmodes.gcm.prototype.generateHashTable = function(h, bits) {\n  // TODO: There are further optimizations that would use only the\n  // first table M_0 (or some variant) along with a remainder table;\n  // this can be explored in the future\n  var multiplier = 8 / bits;\n  var perInt = 4 * multiplier;\n  var size = 16 * multiplier;\n  var m = new Array(size);\n  for(var i = 0; i < size; ++i) {\n    var tmp = [0, 0, 0, 0];\n    var idx = (i / perInt) | 0;\n    var shft = ((perInt - 1 - (i % perInt)) * bits);\n    tmp[idx] = (1 << (bits - 1)) << shft;\n    m[i] = this.generateSubHashTable(this.multiply(tmp, h), bits);\n  }\n  return m;\n};\n\n/**\n * Generates a table for multiplying against the hash subkey for one\n * particular component (out of all possible component values).\n *\n * @param mid the pre-multiplied value for the middle key of the table.\n * @param bits the bit size for a component.\n */\nmodes.gcm.prototype.generateSubHashTable = function(mid, bits) {\n  // compute the table quickly by minimizing the number of\n  // POW operations -- they only need to be performed for powers of 2,\n  // all other entries can be composed from those powers using XOR\n  var size = 1 << bits;\n  var half = size >>> 1;\n  var m = new Array(size);\n  m[half] = mid.slice(0);\n  var i = half >>> 1;\n  while(i > 0) {\n    // raise m0[2 * i] and store in m0[i]\n    this.pow(m[2 * i], m[i] = []);\n    i >>= 1;\n  }\n  i = 2;\n  while(i < half) {\n    for(var j = 1; j < i; ++j) {\n      var m_i = m[i];\n      var m_j = m[j];\n      m[i + j] = [\n        m_i[0] ^ m_j[0],\n        m_i[1] ^ m_j[1],\n        m_i[2] ^ m_j[2],\n        m_i[3] ^ m_j[3]\n      ];\n    }\n    i *= 2;\n  }\n  m[0] = [0, 0, 0, 0];\n  /* Note: We could avoid storing these by doing composition during multiply\n  calculate top half using composition by speed is preferred. */\n  for(i = half + 1; i < size; ++i) {\n    var c = m[i ^ half];\n    m[i] = [mid[0] ^ c[0], mid[1] ^ c[1], mid[2] ^ c[2], mid[3] ^ c[3]];\n  }\n  return m;\n};\n\n/** Utility functions */\n\nfunction transformIV(iv, blockSize) {\n  if(typeof iv === 'string') {\n    // convert iv string into byte buffer\n    iv = forge.util.createBuffer(iv);\n  }\n\n  if(forge.util.isArray(iv) && iv.length > 4) {\n    // convert iv byte array into byte buffer\n    var tmp = iv;\n    iv = forge.util.createBuffer();\n    for(var i = 0; i < tmp.length; ++i) {\n      iv.putByte(tmp[i]);\n    }\n  }\n\n  if(iv.length() < blockSize) {\n    throw new Error(\n      'Invalid IV length; got ' + iv.length() +\n      ' bytes and expected ' + blockSize + ' bytes.');\n  }\n\n  if(!forge.util.isArray(iv)) {\n    // convert iv byte buffer into 32-bit integer array\n    var ints = [];\n    var blocks = blockSize / 4;\n    for(var i = 0; i < blocks; ++i) {\n      ints.push(iv.getInt32());\n    }\n    iv = ints;\n  }\n\n  return iv;\n}\n\nfunction inc32(block) {\n  // increment last 32 bits of block only\n  block[block.length - 1] = (block[block.length - 1] + 1) & 0xFFFFFFFF;\n}\n\nfunction from64To32(num) {\n  // convert 64-bit number to two BE Int32s\n  return [(num / 0x100000000) | 0, num & 0xFFFFFFFF];\n}\n","/**\n * Javascript implementation of mask generation function MGF1.\n *\n * @author Stefan Siegl\n * @author Dave Longley\n *\n * Copyright (c) 2012 Stefan Siegl <stesie@brokenpipe.de>\n * Copyright (c) 2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./util');\n\nforge.mgf = forge.mgf || {};\nvar mgf1 = module.exports = forge.mgf.mgf1 = forge.mgf1 = forge.mgf1 || {};\n\n/**\n * Creates a MGF1 mask generation function object.\n *\n * @param md the message digest API to use (eg: forge.md.sha1.create()).\n *\n * @return a mask generation function object.\n */\nmgf1.create = function(md) {\n  var mgf = {\n    /**\n     * Generate mask of specified length.\n     *\n     * @param {String} seed The seed for mask generation.\n     * @param maskLen Number of bytes to generate.\n     * @return {String} The generated mask.\n     */\n    generate: function(seed, maskLen) {\n      /* 2. Let T be the empty octet string. */\n      var t = new forge.util.ByteBuffer();\n\n      /* 3. For counter from 0 to ceil(maskLen / hLen), do the following: */\n      var len = Math.ceil(maskLen / md.digestLength);\n      for(var i = 0; i < len; i++) {\n        /* a. Convert counter to an octet string C of length 4 octets */\n        var c = new forge.util.ByteBuffer();\n        c.putInt32(i);\n\n        /* b. Concatenate the hash of the seed mgfSeed and C to the octet\n         * string T: */\n        md.start();\n        md.update(seed + c.getBytes());\n        t.putBuffer(md.digest());\n      }\n\n      /* Output the leading maskLen octets of T as the octet string mask. */\n      t.truncate(t.length() - maskLen);\n      return t.getBytes();\n    }\n  };\n\n  return mgf;\n};\n","/**\n * Cross-browser support for logging in a web application.\n *\n * @author David I. Lehn <dlehn@digitalbazaar.com>\n *\n * Copyright (c) 2008-2013 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./util');\n\n/* LOG API */\nmodule.exports = forge.log = forge.log || {};\n\n/**\n * Application logging system.\n *\n * Each logger level available as it's own function of the form:\n *   forge.log.level(category, args...)\n * The category is an arbitrary string, and the args are the same as\n * Firebug's console.log API. By default the call will be output as:\n *   'LEVEL [category] <args[0]>, args[1], ...'\n * This enables proper % formatting via the first argument.\n * Each category is enabled by default but can be enabled or disabled with\n * the setCategoryEnabled() function.\n */\n// list of known levels\nforge.log.levels = [\n  'none', 'error', 'warning', 'info', 'debug', 'verbose', 'max'];\n// info on the levels indexed by name:\n//   index: level index\n//   name: uppercased display name\nvar sLevelInfo = {};\n// list of loggers\nvar sLoggers = [];\n/**\n * Standard console logger. If no console support is enabled this will\n * remain null. Check before using.\n */\nvar sConsoleLogger = null;\n\n// logger flags\n/**\n * Lock the level at the current value. Used in cases where user config may\n * set the level such that only critical messages are seen but more verbose\n * messages are needed for debugging or other purposes.\n */\nforge.log.LEVEL_LOCKED = (1 << 1);\n/**\n * Always call log function. By default, the logging system will check the\n * message level against logger.level before calling the log function. This\n * flag allows the function to do its own check.\n */\nforge.log.NO_LEVEL_CHECK = (1 << 2);\n/**\n * Perform message interpolation with the passed arguments. \"%\" style\n * fields in log messages will be replaced by arguments as needed. Some\n * loggers, such as Firebug, may do this automatically. The original log\n * message will be available as 'message' and the interpolated version will\n * be available as 'fullMessage'.\n */\nforge.log.INTERPOLATE = (1 << 3);\n\n// setup each log level\nfor(var i = 0; i < forge.log.levels.length; ++i) {\n  var level = forge.log.levels[i];\n  sLevelInfo[level] = {\n    index: i,\n    name: level.toUpperCase()\n  };\n}\n\n/**\n * Message logger. Will dispatch a message to registered loggers as needed.\n *\n * @param message message object\n */\nforge.log.logMessage = function(message) {\n  var messageLevelIndex = sLevelInfo[message.level].index;\n  for(var i = 0; i < sLoggers.length; ++i) {\n    var logger = sLoggers[i];\n    if(logger.flags & forge.log.NO_LEVEL_CHECK) {\n      logger.f(message);\n    } else {\n      // get logger level\n      var loggerLevelIndex = sLevelInfo[logger.level].index;\n      // check level\n      if(messageLevelIndex <= loggerLevelIndex) {\n        // message critical enough, call logger\n        logger.f(logger, message);\n      }\n    }\n  }\n};\n\n/**\n * Sets the 'standard' key on a message object to:\n * \"LEVEL [category] \" + message\n *\n * @param message a message log object\n */\nforge.log.prepareStandard = function(message) {\n  if(!('standard' in message)) {\n    message.standard =\n      sLevelInfo[message.level].name +\n      //' ' + +message.timestamp +\n      ' [' + message.category + '] ' +\n      message.message;\n  }\n};\n\n/**\n * Sets the 'full' key on a message object to the original message\n * interpolated via % formatting with the message arguments.\n *\n * @param message a message log object.\n */\nforge.log.prepareFull = function(message) {\n  if(!('full' in message)) {\n    // copy args and insert message at the front\n    var args = [message.message];\n    args = args.concat([] || message['arguments']);\n    // format the message\n    message.full = forge.util.format.apply(this, args);\n  }\n};\n\n/**\n * Applies both preparseStandard() and prepareFull() to a message object and\n * store result in 'standardFull'.\n *\n * @param message a message log object.\n */\nforge.log.prepareStandardFull = function(message) {\n  if(!('standardFull' in message)) {\n    // FIXME implement 'standardFull' logging\n    forge.log.prepareStandard(message);\n    message.standardFull = message.standard;\n  }\n};\n\n// create log level functions\nif(true) {\n  // levels for which we want functions\n  var levels = ['error', 'warning', 'info', 'debug', 'verbose'];\n  for(var i = 0; i < levels.length; ++i) {\n    // wrap in a function to ensure proper level var is passed\n    (function(level) {\n      // create function for this level\n      forge.log[level] = function(category, message/*, args...*/) {\n        // convert arguments to real array, remove category and message\n        var args = Array.prototype.slice.call(arguments).slice(2);\n        // create message object\n        // Note: interpolation and standard formatting is done lazily\n        var msg = {\n          timestamp: new Date(),\n          level: level,\n          category: category,\n          message: message,\n          'arguments': args\n          /*standard*/\n          /*full*/\n          /*fullMessage*/\n        };\n        // process this message\n        forge.log.logMessage(msg);\n      };\n    })(levels[i]);\n  }\n}\n\n/**\n * Creates a new logger with specified custom logging function.\n *\n * The logging function has a signature of:\n *   function(logger, message)\n * logger: current logger\n * message: object:\n *   level: level id\n *   category: category\n *   message: string message\n *   arguments: Array of extra arguments\n *   fullMessage: interpolated message and arguments if INTERPOLATE flag set\n *\n * @param logFunction a logging function which takes a log message object\n *          as a parameter.\n *\n * @return a logger object.\n */\nforge.log.makeLogger = function(logFunction) {\n  var logger = {\n    flags: 0,\n    f: logFunction\n  };\n  forge.log.setLevel(logger, 'none');\n  return logger;\n};\n\n/**\n * Sets the current log level on a logger.\n *\n * @param logger the target logger.\n * @param level the new maximum log level as a string.\n *\n * @return true if set, false if not.\n */\nforge.log.setLevel = function(logger, level) {\n  var rval = false;\n  if(logger && !(logger.flags & forge.log.LEVEL_LOCKED)) {\n    for(var i = 0; i < forge.log.levels.length; ++i) {\n      var aValidLevel = forge.log.levels[i];\n      if(level == aValidLevel) {\n        // set level\n        logger.level = level;\n        rval = true;\n        break;\n      }\n    }\n  }\n\n  return rval;\n};\n\n/**\n * Locks the log level at its current value.\n *\n * @param logger the target logger.\n * @param lock boolean lock value, default to true.\n */\nforge.log.lock = function(logger, lock) {\n  if(typeof lock === 'undefined' || lock) {\n    logger.flags |= forge.log.LEVEL_LOCKED;\n  } else {\n    logger.flags &= ~forge.log.LEVEL_LOCKED;\n  }\n};\n\n/**\n * Adds a logger.\n *\n * @param logger the logger object.\n */\nforge.log.addLogger = function(logger) {\n  sLoggers.push(logger);\n};\n\n// setup the console logger if possible, else create fake console.log\nif(typeof(console) !== 'undefined' && 'log' in console) {\n  var logger;\n  if(console.error && console.warn && console.info && console.debug) {\n    // looks like Firebug-style logging is available\n    // level handlers map\n    var levelHandlers = {\n      error: console.error,\n      warning: console.warn,\n      info: console.info,\n      debug: console.debug,\n      verbose: console.debug\n    };\n    var f = function(logger, message) {\n      forge.log.prepareStandard(message);\n      var handler = levelHandlers[message.level];\n      // prepend standard message and concat args\n      var args = [message.standard];\n      args = args.concat(message['arguments'].slice());\n      // apply to low-level console function\n      handler.apply(console, args);\n    };\n    logger = forge.log.makeLogger(f);\n  } else {\n    // only appear to have basic console.log\n    var f = function(logger, message) {\n      forge.log.prepareStandardFull(message);\n      console.log(message.standardFull);\n    };\n    logger = forge.log.makeLogger(f);\n  }\n  forge.log.setLevel(logger, 'debug');\n  forge.log.addLogger(logger);\n  sConsoleLogger = logger;\n} else {\n  // define fake console.log to avoid potential script errors on\n  // browsers that do not have console logging\n  console = {\n    log: function() {}\n  };\n}\n\n/*\n * Check for logging control query vars in current URL.\n *\n * console.level=<level-name>\n * Set's the console log level by name.  Useful to override defaults and\n * allow more verbose logging before a user config is loaded.\n *\n * console.lock=<true|false>\n * Lock the console log level at whatever level it is set at.  This is run\n * after console.level is processed.  Useful to force a level of verbosity\n * that could otherwise be limited by a user config.\n */\nif(sConsoleLogger !== null &&\n  typeof window !== 'undefined' && window.location\n) {\n  var query = new URL(window.location.href).searchParams;\n  if(query.has('console.level')) {\n    // set with last value\n    forge.log.setLevel(\n      sConsoleLogger, query.get('console.level').slice(-1)[0]);\n  }\n  if(query.has('console.lock')) {\n    // set with last value\n    var lock = query.get('console.lock').slice(-1)[0];\n    if(lock == 'true') {\n      forge.log.lock(sConsoleLogger);\n    }\n  }\n}\n\n// provide public access to console logger\nforge.log.consoleLogger = sConsoleLogger;\n","/**\n * Functions to output keys in SSH-friendly formats.\n *\n * This is part of the Forge project which may be used under the terms of\n * either the BSD License or the GNU General Public License (GPL) Version 2.\n *\n * See: https://github.com/digitalbazaar/forge/blob/cbebca3780658703d925b61b2caffb1d263a6c1d/LICENSE\n *\n * @author https://github.com/shellac\n */\nvar forge = require('./forge');\nrequire('./aes');\nrequire('./hmac');\nrequire('./md5');\nrequire('./sha1');\nrequire('./util');\n\nvar ssh = module.exports = forge.ssh = forge.ssh || {};\n\n/**\n * Encodes (and optionally encrypts) a private RSA key as a Putty PPK file.\n *\n * @param privateKey the key.\n * @param passphrase a passphrase to protect the key (falsy for no encryption).\n * @param comment a comment to include in the key file.\n *\n * @return the PPK file as a string.\n */\nssh.privateKeyToPutty = function(privateKey, passphrase, comment) {\n  comment = comment || '';\n  passphrase = passphrase || '';\n  var algorithm = 'ssh-rsa';\n  var encryptionAlgorithm = (passphrase === '') ? 'none' : 'aes256-cbc';\n\n  var ppk = 'PuTTY-User-Key-File-2: ' + algorithm + '\\r\\n';\n  ppk += 'Encryption: ' + encryptionAlgorithm + '\\r\\n';\n  ppk += 'Comment: ' + comment + '\\r\\n';\n\n  // public key into buffer for ppk\n  var pubbuffer = forge.util.createBuffer();\n  _addStringToBuffer(pubbuffer, algorithm);\n  _addBigIntegerToBuffer(pubbuffer, privateKey.e);\n  _addBigIntegerToBuffer(pubbuffer, privateKey.n);\n\n  // write public key\n  var pub = forge.util.encode64(pubbuffer.bytes(), 64);\n  var length = Math.floor(pub.length / 66) + 1; // 66 = 64 + \\r\\n\n  ppk += 'Public-Lines: ' + length + '\\r\\n';\n  ppk += pub;\n\n  // private key into a buffer\n  var privbuffer = forge.util.createBuffer();\n  _addBigIntegerToBuffer(privbuffer, privateKey.d);\n  _addBigIntegerToBuffer(privbuffer, privateKey.p);\n  _addBigIntegerToBuffer(privbuffer, privateKey.q);\n  _addBigIntegerToBuffer(privbuffer, privateKey.qInv);\n\n  // optionally encrypt the private key\n  var priv;\n  if(!passphrase) {\n    // use the unencrypted buffer\n    priv = forge.util.encode64(privbuffer.bytes(), 64);\n  } else {\n    // encrypt RSA key using passphrase\n    var encLen = privbuffer.length() + 16 - 1;\n    encLen -= encLen % 16;\n\n    // pad private key with sha1-d data -- needs to be a multiple of 16\n    var padding = _sha1(privbuffer.bytes());\n\n    padding.truncate(padding.length() - encLen + privbuffer.length());\n    privbuffer.putBuffer(padding);\n\n    var aeskey = forge.util.createBuffer();\n    aeskey.putBuffer(_sha1('\\x00\\x00\\x00\\x00', passphrase));\n    aeskey.putBuffer(_sha1('\\x00\\x00\\x00\\x01', passphrase));\n\n    // encrypt some bytes using CBC mode\n    // key is 40 bytes, so truncate *by* 8 bytes\n    var cipher = forge.aes.createEncryptionCipher(aeskey.truncate(8), 'CBC');\n    cipher.start(forge.util.createBuffer().fillWithByte(0, 16));\n    cipher.update(privbuffer.copy());\n    cipher.finish();\n    var encrypted = cipher.output;\n\n    // Note: this appears to differ from Putty -- is forge wrong, or putty?\n    // due to padding we finish as an exact multiple of 16\n    encrypted.truncate(16); // all padding\n\n    priv = forge.util.encode64(encrypted.bytes(), 64);\n  }\n\n  // output private key\n  length = Math.floor(priv.length / 66) + 1; // 64 + \\r\\n\n  ppk += '\\r\\nPrivate-Lines: ' + length + '\\r\\n';\n  ppk += priv;\n\n  // MAC\n  var mackey = _sha1('putty-private-key-file-mac-key', passphrase);\n\n  var macbuffer = forge.util.createBuffer();\n  _addStringToBuffer(macbuffer, algorithm);\n  _addStringToBuffer(macbuffer, encryptionAlgorithm);\n  _addStringToBuffer(macbuffer, comment);\n  macbuffer.putInt32(pubbuffer.length());\n  macbuffer.putBuffer(pubbuffer);\n  macbuffer.putInt32(privbuffer.length());\n  macbuffer.putBuffer(privbuffer);\n\n  var hmac = forge.hmac.create();\n  hmac.start('sha1', mackey);\n  hmac.update(macbuffer.bytes());\n\n  ppk += '\\r\\nPrivate-MAC: ' + hmac.digest().toHex() + '\\r\\n';\n\n  return ppk;\n};\n\n/**\n * Encodes a public RSA key as an OpenSSH file.\n *\n * @param key the key.\n * @param comment a comment.\n *\n * @return the public key in OpenSSH format.\n */\nssh.publicKeyToOpenSSH = function(key, comment) {\n  var type = 'ssh-rsa';\n  comment = comment || '';\n\n  var buffer = forge.util.createBuffer();\n  _addStringToBuffer(buffer, type);\n  _addBigIntegerToBuffer(buffer, key.e);\n  _addBigIntegerToBuffer(buffer, key.n);\n\n  return type + ' ' + forge.util.encode64(buffer.bytes()) + ' ' + comment;\n};\n\n/**\n * Encodes a private RSA key as an OpenSSH file.\n *\n * @param key the key.\n * @param passphrase a passphrase to protect the key (falsy for no encryption).\n *\n * @return the public key in OpenSSH format.\n */\nssh.privateKeyToOpenSSH = function(privateKey, passphrase) {\n  if(!passphrase) {\n    return forge.pki.privateKeyToPem(privateKey);\n  }\n  // OpenSSH private key is just a legacy format, it seems\n  return forge.pki.encryptRsaPrivateKey(privateKey, passphrase,\n    {legacy: true, algorithm: 'aes128'});\n};\n\n/**\n * Gets the SSH fingerprint for the given public key.\n *\n * @param options the options to use.\n *          [md] the message digest object to use (defaults to forge.md.md5).\n *          [encoding] an alternative output encoding, such as 'hex'\n *            (defaults to none, outputs a byte buffer).\n *          [delimiter] the delimiter to use between bytes for 'hex' encoded\n *            output, eg: ':' (defaults to none).\n *\n * @return the fingerprint as a byte buffer or other encoding based on options.\n */\nssh.getPublicKeyFingerprint = function(key, options) {\n  options = options || {};\n  var md = options.md || forge.md.md5.create();\n\n  var type = 'ssh-rsa';\n  var buffer = forge.util.createBuffer();\n  _addStringToBuffer(buffer, type);\n  _addBigIntegerToBuffer(buffer, key.e);\n  _addBigIntegerToBuffer(buffer, key.n);\n\n  // hash public key bytes\n  md.start();\n  md.update(buffer.getBytes());\n  var digest = md.digest();\n  if(options.encoding === 'hex') {\n    var hex = digest.toHex();\n    if(options.delimiter) {\n      return hex.match(/.{2}/g).join(options.delimiter);\n    }\n    return hex;\n  } else if(options.encoding === 'binary') {\n    return digest.getBytes();\n  } else if(options.encoding) {\n    throw new Error('Unknown encoding \"' + options.encoding + '\".');\n  }\n  return digest;\n};\n\n/**\n * Adds len(val) then val to a buffer.\n *\n * @param buffer the buffer to add to.\n * @param val a big integer.\n */\nfunction _addBigIntegerToBuffer(buffer, val) {\n  var hexVal = val.toString(16);\n  // ensure 2s complement +ve\n  if(hexVal[0] >= '8') {\n    hexVal = '00' + hexVal;\n  }\n  var bytes = forge.util.hexToBytes(hexVal);\n  buffer.putInt32(bytes.length);\n  buffer.putBytes(bytes);\n}\n\n/**\n * Adds len(val) then val to a buffer.\n *\n * @param buffer the buffer to add to.\n * @param val a string.\n */\nfunction _addStringToBuffer(buffer, val) {\n  buffer.putInt32(val.length);\n  buffer.putString(val);\n}\n\n/**\n * Hashes the arguments into one value using SHA-1.\n *\n * @return the sha1 hash of the provided arguments.\n */\nfunction _sha1() {\n  var sha = forge.md.sha1.create();\n  var num = arguments.length;\n  for (var i = 0; i < num; ++i) {\n    sha.update(arguments[i]);\n  }\n  return sha.digest();\n}\n","/**\n * Node.js module for all known Forge message digests.\n *\n * @author Dave Longley\n *\n * Copyright 2011-2017 Digital Bazaar, Inc.\n */\nmodule.exports = require('./md');\n\nrequire('./md5');\nrequire('./sha1');\nrequire('./sha256');\nrequire('./sha512');\n","/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),ca=require(\"scheduler\");function p(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+\"Capture\",b)}\nfunction ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}\nvar ia=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,la=\n{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction qa(a,b,c,d){if(null===b||\"undefined\"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(ra,\nsa);z[b]=new v(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});\nz.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}\nvar ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for(\"react.element\"),wa=Symbol.for(\"react.portal\"),ya=Symbol.for(\"react.fragment\"),za=Symbol.for(\"react.strict_mode\"),Aa=Symbol.for(\"react.profiler\"),Ba=Symbol.for(\"react.provider\"),Ca=Symbol.for(\"react.context\"),Da=Symbol.for(\"react.forward_ref\"),Ea=Symbol.for(\"react.suspense\"),Fa=Symbol.for(\"react.suspense_list\"),Ga=Symbol.for(\"react.memo\"),Ha=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar Ia=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var Ja=Symbol.iterator;function Ka(a){if(null===a||\"object\"!==typeof a)return null;a=Ja&&a[Ja]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);La=b&&b[1]||\"\"}return\"\\n\"+La+a}var Na=!1;\nfunction Oa(a,b){if(!a||Na)return\"\";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Ma(a):\"\"}\nfunction Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma(\"Lazy\");case 13:return Ma(\"Suspense\");case 19:return Ma(\"SuspenseList\");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return\"\"}}\nfunction Qa(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ya:return\"Fragment\";case wa:return\"Portal\";case Aa:return\"Profiler\";case za:return\"StrictMode\";case Ea:return\"Suspense\";case Fa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||\"Context\")+\".Consumer\";case Ba:return(a._context.displayName||\"Context\")+\".Provider\";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||\"Memo\";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}\nfunction Ra(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Qa(b);case 8:return b===za?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"string\":case \"undefined\":return a;case \"object\":return a;default:return\"\"}}\nfunction Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,\"checked\",b,!1)}\nfunction bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?cb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction db(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction cb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var eb=Array.isArray;\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}\nfunction lb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?kb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar mb,nb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(\"http://www.w3.org/2000/svg\"!==a.namespaceURI||\"innerHTML\"in a)a.innerHTML=b;else{mb=mb||document.createElement(\"div\");mb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,\nzoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(\"\"+b).trim():b+\"px\"}\nfunction sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=rb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if(\"object\"!==typeof b.dangerouslySetInnerHTML||!(\"__html\"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(p(62));}}\nfunction vb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}\nfunction Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,\"passive\",{get:function(){Lb=!0}});window.addEventListener(\"test\",Mb,Mb);window.removeEventListener(\"test\",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}\nfunction Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}\nfunction Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}\nvar ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&\"function\"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}\nvar oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;\nfunction tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}\nfunction Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction Sc(a,b){switch(a){case \"focusin\":case \"focusout\":Lc=null;break;case \"dragenter\":case \"dragleave\":Mc=null;break;case \"mouseover\":case \"mouseout\":Nc=null;break;case \"pointerover\":case \"pointerout\":Oc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Pc.delete(b.pointerId)}}\nfunction Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction Uc(a,b,c,d,e){switch(b){case \"focusin\":return Lc=Tc(Lc,a,b,c,d,e),!0;case \"dragenter\":return Mc=Tc(Mc,a,b,c,d,e),!0;case \"mouseover\":return Nc=Tc(Nc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}\nfunction ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}\nfunction bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;\nfunction ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}\nfunction fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;\nfunction Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}\nfunction jd(a){switch(a){case \"cancel\":case \"click\":case \"close\":case \"contextmenu\":case \"copy\":case \"cut\":case \"auxclick\":case \"dblclick\":case \"dragend\":case \"dragstart\":case \"drop\":case \"focusin\":case \"focusout\":case \"input\":case \"invalid\":case \"keydown\":case \"keypress\":case \"keyup\":case \"mousedown\":case \"mouseup\":case \"paste\":case \"pause\":case \"play\":case \"pointercancel\":case \"pointerdown\":case \"pointerup\":case \"ratechange\":case \"reset\":case \"resize\":case \"seeked\":case \"submit\":case \"touchcancel\":case \"touchend\":case \"touchstart\":case \"volumechange\":case \"change\":case \"selectionchange\":case \"textInput\":case \"compositionstart\":case \"compositionend\":case \"compositionupdate\":case \"beforeblur\":case \"afterblur\":case \"beforeinput\":case \"blur\":case \"fullscreenchange\":case \"focus\":case \"hashchange\":case \"popstate\":case \"select\":case \"selectstart\":return 1;case \"drag\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"mousemove\":case \"mouseout\":case \"mouseover\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"scroll\":case \"toggle\":case \"touchmove\":case \"wheel\":case \"mouseenter\":case \"mouseleave\":case \"pointerenter\":case \"pointerleave\":return 4;\ncase \"message\":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}\nfunction od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&\"CompositionEvent\"in window,be=null;ia&&\"documentMode\"in document&&(be=document.documentMode);var ce=ia&&\"TextEvent\"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge;\nfunction Ie(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nfunction Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,\nd);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});\"function\"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}\nvar Pe=ia&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nfunction Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var We={animationend:Ve(\"Animation\",\"AnimationEnd\"),animationiteration:Ve(\"Animation\",\"AnimationIteration\"),animationstart:Ve(\"Animation\",\"AnimationStart\"),transitionend:Ve(\"Transition\",\"TransitionEnd\")},Xe={},Ye={};\nia&&(Ye=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),\"TransitionEvent\"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze(\"animationend\"),af=Ze(\"animationiteration\"),bf=Ze(\"animationstart\"),cf=Ze(\"transitionend\"),df=new Map,ef=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");\nfunction ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,\"on\"+kf)}ff($e,\"onAnimationEnd\");ff(af,\"onAnimationIteration\");ff(bf,\"onAnimationStart\");ff(\"dblclick\",\"onDoubleClick\");ff(\"focusin\",\"onFocus\");ff(\"focusout\",\"onBlur\");ff(cf,\"onTransitionEnd\");ha(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);ha(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ha(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);\nha(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);fa(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));fa(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));fa(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);fa(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));fa(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));\nfa(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var lf=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),mf=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(lf));\nfunction nf(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}\nfunction D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+\"__bubble\";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf=\"_reactListening\"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){\"selectionchange\"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf(\"selectionchange\",!1,b))}}\nfunction pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];\na:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":n=\"focus\";k=Fd;break;case \"focusout\":n=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var t=0!==(b&4),J=!t&&\"scroll\"===a,x=t?null!==h?h+\"Capture\":null:h;t=[];for(var w=d,u;null!==\nw;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==\nn&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F=\"onMouseLeave\";x=\"onMouseEnter\";w=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)t=Td,F=\"onPointerLeave\",x=\"onPointerEnter\",w=\"pointer\";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+\"leave\",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+\"enter\",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=\nvf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);\"focusout\"===a&&(xa=h._wrapperState)&&\nxa.controlled&&\"number\"===h.type&&cb(h,\"number\",h.value)}xa=d?ue(d):window;switch(a){case \"focusin\":if(me(xa)||\"true\"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case \"compositionstart\":var ba=\"onCompositionStart\";break b;case \"compositionend\":ba=\"onCompositionEnd\";\nbreak b;case \"compositionupdate\":ba=\"onCompositionUpdate\";break b}ba=void 0}else ie?ge(a,c)&&(ba=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(ba=\"onCompositionStart\");ba&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==ba?\"onCompositionEnd\"===ba&&ie&&($a=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),\n0<d.length&&(e=new Ld(\"onBeforeInput\",\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\\r\\n?/g,yf=/\\u0000|\\uFFFD/g;function zf(a){return(\"string\"===typeof a?a:\"\"+a).replace(xf,\"\\n\").replace(yf,\"\")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}\nvar Cf=null,Df=null;function Ef(a,b){return\"textarea\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}\nvar Ff=\"function\"===typeof setTimeout?setTimeout:void 0,Gf=\"function\"===typeof clearTimeout?clearTimeout:void 0,Hf=\"function\"===typeof Promise?Promise:void 0,Jf=\"function\"===typeof queueMicrotask?queueMicrotask:\"undefined\"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}\nfunction Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,\"/$\"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else\"$\"!==c&&\"$?\"!==c&&\"$!\"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if(\"$\"===b||\"$!\"===b||\"$?\"===b)break;if(\"/$\"===b)return null}}return a}\nfunction Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of=\"__reactFiber$\"+Nf,Pf=\"__reactProps$\"+Nf,uf=\"__reactContainer$\"+Nf,of=\"__reactEvents$\"+Nf,Qf=\"__reactListeners$\"+Nf,Rf=\"__reactHandles$\"+Nf;\nfunction Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}\nfunction E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||\"Unknown\",e));return A({},c,d)}\nfunction cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}\nfunction jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg=\"\";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}\nfunction ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;\nfunction Ag(a,b){var c=Bg(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=\nnull,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}\nfunction Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b=\"head\"!==b&&\"body\"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}yg=\nnull}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;\nfunction Lg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}\nfunction Mg(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function Ng(a){var b=a._init;return b(a._payload)}\nfunction Og(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Pg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Qg(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===Ha&&Ng(f)===b.type))return d=e(b,c.props),d.ref=Lg(a,b,c),d.return=a,d;d=Rg(c.type,c.key,c.props,null,a.mode,d);d.ref=Lg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=Sg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Tg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=Qg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=Rg(b.type,b.key,b.props,null,a.mode,c),\nc.ref=Lg(a,null,b),c.return=a,c;case wa:return b=Sg(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Tg(b,a.mode,c,null),b.return=a,b;Mg(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,\nb,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);Mg(a,c)}return null}function y(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);Mg(b,d)}return null}\nfunction n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===\nx.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if(\"function\"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,\nm),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=\nf.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===Ha&&Ng(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=Lg(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Tg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Rg(f.type,f.key,f.props,null,a.mode,h),h.ref=Lg(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==\nd;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=Sg(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);Mg(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):\n(c(a,d),d=Qg(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var b=Wg.current;E(Wg);a._currentValue=b}function bh(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}\nfunction ch(a,b){Xg=a;Zg=Yg=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(dh=!0),a.firstContext=null)}function eh(a){var b=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:b,next:null},null===Yg){if(null===Xg)throw Error(p(308));Yg=a;Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return b}var fh=null;function gh(a){null===fh?fh=[a]:fh.push(a)}\nfunction hh(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,gh(b)):(c.next=e.next,e.next=c);b.interleaved=c;return ih(a,d)}function ih(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}\nfunction lh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction nh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return ih(a,c)}e=d.interleaved;null===e?(b.next=b,gh(d)):(b.next=e.next,e.next=b);d.interleaved=b;return ih(a,c)}function oh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nfunction ph(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction qh(a,b,c,d){var e=a.updateQueue;jh=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if(\"function\"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r=\"function\"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:jh=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;\nh=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);rh|=g;a.lanes=g;a.memoizedState=q}}\nfunction sh(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(p(191,e));e.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p(174));return a}\nfunction yh(a,b){G(wh,b);G(vh,a);G(uh,th);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(uh);G(uh,b)}function zh(){E(uh);E(vh);E(wh)}function Ah(a){xh(wh.current);var b=xh(uh.current);var c=lb(b,a.type);b!==c&&(G(vh,a),G(uh,c))}function Bh(a){vh.current===a&&(E(uh),E(vh))}var L=Uf(0);\nfunction Ch(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Dh=[];\nfunction Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321));}function Mh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Nh(a,b,c,d,e,f){Hh=f;M=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Fh.current=null===a||null===a.memoizedState?Oh:Ph;a=c(d,e);if(Jh){f=0;do{Jh=!1;Kh=0;if(25<=f)throw Error(p(301));f+=1;O=N=null;b.updateQueue=null;Fh.current=Qh;a=c(d,e)}while(Jh)}Fh.current=Rh;b=null!==N&&null!==N.next;Hh=0;O=N=M=null;Ih=!1;if(b)throw Error(p(300));return a}function Sh(){var a=0!==Kh;Kh=0;return a}\nfunction Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===O?M.memoizedState=O=a:O=O.next=a;return O}function Uh(){if(null===N){var a=M.alternate;a=null!==a?a.memoizedState:null}else a=N.next;var b=null===O?M.memoizedState:O.next;if(null!==b)O=b,N=a;else{if(null===a)throw Error(p(310));N=a;a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null};null===O?M.memoizedState=O=a:O=O.next=a}return O}\nfunction Vh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Wh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=N,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Hh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;M.lanes|=m;rh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(dh=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,M.lanes|=f,rh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction Xh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(dh=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function Yh(){}\nfunction Zh(a,b){var c=M,d=Uh(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,dh=!0);d=d.queue;$h(ai.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==O&&O.memoizedState.tag&1){c.flags|=2048;bi(9,ci.bind(null,c,d,e,b),void 0,null);if(null===Q)throw Error(p(349));0!==(Hh&30)||di(c,b,e)}return e}function di(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction ci(a,b,c,d){b.value=c;b.getSnapshot=d;ei(b)&&fi(a)}function ai(a,b,c){return c(function(){ei(b)&&fi(a)})}function ei(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function fi(a){var b=ih(a,1);null!==b&&gi(b,a,1,-1)}\nfunction hi(a){var b=Th();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a};b.queue=a;a=a.dispatch=ii.bind(null,M,a);return[b.memoizedState,a]}\nfunction bi(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function ji(){return Uh().memoizedState}function ki(a,b,c,d){var e=Th();M.flags|=a;e.memoizedState=bi(1|b,c,void 0,void 0===d?null:d)}\nfunction li(a,b,c,d){var e=Uh();d=void 0===d?null:d;var f=void 0;if(null!==N){var g=N.memoizedState;f=g.destroy;if(null!==d&&Mh(d,g.deps)){e.memoizedState=bi(b,c,f,d);return}}M.flags|=a;e.memoizedState=bi(1|b,c,f,d)}function mi(a,b){return ki(8390656,8,a,b)}function $h(a,b){return li(2048,8,a,b)}function ni(a,b){return li(4,2,a,b)}function oi(a,b){return li(4,4,a,b)}\nfunction pi(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function qi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return li(4,4,pi.bind(null,b,a),c)}function ri(){}function si(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction ti(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function ui(a,b,c){if(0===(Hh&21))return a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=c;He(c,b)||(c=yc(),M.lanes|=c,rh|=c,a.baseState=!0);return b}function vi(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Gh.transition;Gh.transition={};try{a(!1),b()}finally{C=c,Gh.transition=d}}function wi(){return Uh().memoizedState}\nfunction xi(a,b,c){var d=yi(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,c);else if(c=hh(a,b,c,d),null!==c){var e=R();gi(c,a,d,e);Bi(c,b,d)}}\nfunction ii(a,b,c){var d=yi(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,gh(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=hh(a,b,e,d);null!==c&&(e=R(),gi(c,a,d,e),Bi(c,b,d))}}\nfunction zi(a){var b=a.alternate;return a===M||null!==b&&b===M}function Ai(a,b){Jh=Ih=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Bi(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nvar Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,b){Th().memoizedState=[a,void 0===b?null:b];return a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ki(4194308,\n4,pi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ki(4194308,4,a,b)},useInsertionEffect:function(a,b){return ki(4,2,a,b)},useMemo:function(a,b){var c=Th();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Th();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=xi.bind(null,M,a);return[d.memoizedState,a]},useRef:function(a){var b=\nTh();a={current:a};return b.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),b=a[0];a=vi.bind(null,a[1]);Th().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=M,e=Th();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===Q)throw Error(p(349));0!==(Hh&30)||di(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;mi(ai.bind(null,d,\nf,a),[a]);d.flags|=2048;bi(9,ci.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=Th(),b=Q.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=Kh++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Lh++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},\nuseDebugValue:ri,useDeferredValue:function(a){var b=Uh();return ui(b,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var b=Uh();return null===\nN?b.memoizedState=a:ui(b,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}function Di(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=R(),d=\nyi(a),e=mh(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=nh(a,e,d);null!==b&&(gi(b,a,d,c),oh(b,a,d))}};function Fi(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}\nfunction Gi(a,b,c){var d=!1,e=Vf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=eh(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Ei;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Hi(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Ei.enqueueReplaceState(b,b.state,null)}\nfunction Ii(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs={};kh(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=eh(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Di(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Ei.enqueueReplaceState(e,e.state,null),qh(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}function Ji(a,b){try{var c=\"\",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e,digest:null}}\nfunction Ki(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}function Li(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Mi=\"function\"===typeof WeakMap?WeakMap:Map;function Ni(a,b,c){c=mh(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Oi||(Oi=!0,Pi=d);Li(a,b)};return c}\nfunction Qi(a,b,c){c=mh(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Li(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){Li(a,b);\"function\"!==typeof d&&(null===Ri?Ri=new Set([this]):Ri.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Si(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Mi;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ti.bind(null,a,b,c),b.then(a,a))}function Ui(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction Vi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=mh(-1,1),b.tag=2,nh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,b,c,d){b.child=null===a?Vg(b,null,c,d):Ug(b,a.child,c,d)}\nfunction Yi(a,b,c,d,e){c=c.render;var f=b.ref;ch(b,e);d=Nh(a,b,c,d,f,e);c=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&c&&vg(b);b.flags|=1;Xi(a,b,d,e);return b.child}\nfunction $i(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!aj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,bj(a,b,f,d,e);a=Rg(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return Zi(a,b,e)}b.flags|=1;a=Pg(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction bj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(dh=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(dh=!0);else return b.lanes=a.lanes,Zi(a,b,e)}return cj(a,b,c,d,e)}\nfunction dj(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(ej,fj),fj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(ej,fj);fj|=d}else null!==\nf?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(ej,fj),fj|=d;Xi(a,b,e,c);return b.child}function gj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function cj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);ch(b,e);c=Nh(a,b,c,d,f,e);d=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&d&&vg(b);b.flags|=1;Xi(a,b,c,e);return b.child}\nfunction hj(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;ch(b,e);if(null===b.stateNode)ij(a,b),Gi(b,c,d),Ii(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=eh(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;q||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||\n(h!==d||k!==l)&&Hi(b,g,d,l);jh=!1;var r=b.memoizedState;g.state=r;qh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||jh?(\"function\"===typeof m&&(Di(b,c,m,d),k=b.memoizedState),(h=jh||Fi(b,c,h,d,r,k,l))?(q||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&(b.flags|=4194308)):\n(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;lh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Ci(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=eh(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m=\"function\"===typeof y||\"function\"===typeof g.getSnapshotBeforeUpdate)||\n\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&Hi(b,g,d,k);jh=!1;r=b.memoizedState;g.state=r;qh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||jh?(\"function\"===typeof y&&(Di(b,c,y,d),n=b.memoizedState),(l=jh||Fi(b,c,l,d,r,n,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&\ng.UNSAFE_componentWillUpdate(d,n,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===\na.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return jj(a,b,c,d,f,e)}\nfunction jj(a,b,c,d,e,f){gj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),Zi(a,b,f);d=b.stateNode;Wi.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Ug(b,a.child,null,f),b.child=Ug(b,null,h,f)):Xi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function kj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);yh(a,b.containerInfo)}\nfunction lj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Xi(a,b,c,d);return b.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}\nfunction oj(a,b,c){var d=b.pendingProps,e=L.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(L,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:\"$!\"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:\"hidden\",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=\ng):f=pj(g,d,0,null),a=Tg(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=nj(c),b.memoizedState=mj,a):qj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return rj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:\"hidden\",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=Pg(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=Pg(h,f):(f=Tg(f,g,c,null),f.flags|=2);f.return=\nb;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?nj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=mj;return d}f=a.child;a=f.sibling;d=Pg(f,{mode:\"visible\",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}\nfunction qj(a,b){b=pj({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function sj(a,b,c,d){null!==d&&Jg(d);Ug(b,a.child,null,c);a=qj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction rj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Ki(Error(p(422))),sj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=pj({mode:\"visible\",children:d.children},e,0,null);f=Tg(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Ug(b,a.child,null,g);b.child.memoizedState=nj(g);b.memoizedState=mj;return f}if(0===(b.mode&1))return sj(a,b,g,null);if(\"$!\"===e.data){d=e.nextSibling&&e.nextSibling.dataset;\nif(d)var h=d.dgst;d=h;f=Error(p(419));d=Ki(f,d,void 0);return sj(a,b,g,d)}h=0!==(g&a.childLanes);if(dh||h){d=Q;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;\n0!==e&&e!==f.retryLane&&(f.retryLane=e,ih(a,e),gi(d,a,e,-1))}tj();d=Ki(Error(p(421)));return sj(a,b,g,d)}if(\"$?\"===e.data)return b.flags|=128,b.child=a.child,b=uj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=qj(b,d.children);b.flags|=4096;return b}function vj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);bh(a.return,b,c)}\nfunction wj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction xj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Xi(a,b,d.children,c);d=L.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&vj(a,c,b);else if(19===a.tag)vj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(L,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Ch(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);wj(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Ch(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}wj(b,!0,c,null,f);break;case \"together\":wj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction ij(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function Zi(a,b,c){null!==a&&(b.dependencies=a.dependencies);rh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=Pg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction yj(a,b,c){switch(b.tag){case 3:kj(b);Ig();break;case 5:Ah(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:yh(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Wg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(L,L.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return oj(a,b,c);G(L,L.current&1);a=Zi(a,b,c);return null!==a?a.sibling:null}G(L,L.current&1);break;case 19:d=0!==(c&\nb.childLanes);if(0!==(a.flags&128)){if(d)return xj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(L,L.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,dj(a,b,c)}return Zi(a,b,c)}var zj,Aj,Bj,Cj;\nzj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Aj=function(){};\nBj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;xh(uh.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"select\":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&\n(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,\nc)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ea.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&D(\"scroll\",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Cj=function(a,b,c,d){c!==d&&(b.flags|=4)};\nfunction Dj(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Ej(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;zh();E(Wf);E(H);Eh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Fj(zg),zg=null));Aj(a,b);S(b);return null;case 5:Bh(b);var e=xh(wh.current);\nc=b.type;if(null!==a&&null!=b.stateNode)Bj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case \"dialog\":D(\"cancel\",d);D(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",d);break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],d);break;case \"source\":D(\"error\",d);break;case \"img\":case \"image\":case \"link\":D(\"error\",\nd);D(\"load\",d);break;case \"details\":D(\"toggle\",d);break;case \"input\":Za(d,f);D(\"invalid\",d);break;case \"select\":d._wrapperState={wasMultiple:!!f.multiple};D(\"invalid\",d);break;case \"textarea\":hb(d,f),D(\"invalid\",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,\nh,a),e=[\"children\",\"\"+h]):ea.hasOwnProperty(g)&&null!=h&&\"onScroll\"===g&&D(\"scroll\",d)}switch(c){case \"input\":Va(d);db(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;\"http://www.w3.org/1999/xhtml\"===a&&(a=kb(c));\"http://www.w3.org/1999/xhtml\"===a?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\n\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;zj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case \"dialog\":D(\"cancel\",a);D(\"close\",a);e=d;break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case \"source\":D(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":D(\"error\",\na);D(\"load\",a);e=d;break;case \"details\":D(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);D(\"invalid\",a);break;case \"option\":e=d;break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D(\"invalid\",a);break;case \"textarea\":hb(a,d);e=gb(a,d);D(\"invalid\",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?sb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==\nc||\"\"!==k)&&ob(a,k):\"number\"===typeof k&&ob(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ea.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&D(\"scroll\",a):null!=k&&ta(a,f,k,g))}switch(c){case \"input\":Va(a);db(a,d,!1);break;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,\n!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case \"button\":case \"input\":case \"select\":case \"textarea\":d=!!d.autoFocus;break a;case \"img\":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Cj(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(p(166));c=xh(wh.current);xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=\nxg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(L);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===\na){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Fj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(L.current&1)?0===T&&(T=3):tj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return zh(),\nAj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return ah(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(L);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Dj(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Ch(a);if(null!==g){b.flags|=128;Dj(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,\ng=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(L,L.current&1|2);return b.child}a=\na.sibling}null!==f.tail&&B()>Gj&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304)}else{if(!d)if(a=Ch(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Dj(f,!0),null===f.tail&&\"hidden\"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Gj&&1073741824!==c&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=\nb,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=L.current,G(L,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Hj(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(fj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}\nfunction Ij(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return zh(),E(Wf),E(H),Eh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Bh(b),null;case 13:E(L);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(b.type._context),null;case 22:case 23:return Hj(),\nnull;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=\"function\"===typeof WeakSet?WeakSet:Set,V=null;function Lj(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Mj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Nj=!1;\nfunction Oj(a,b){Cf=dd;a=Me();if(Ne(a)){if(\"selectionStart\"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=\nq.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;\ncase 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Ci(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent=\"\":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Nj;Nj=!1;return n}\nfunction Pj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Mj(b,c,f)}e=e.next}while(e!==d)}}function Qj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Rj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Sj(a){var b=a.alternate;null!==b&&(a.alternate=null,Sj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Tj(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Uj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Tj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Vj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Vj(a,b,c),a=a.sibling;null!==a;)Vj(a,b,c),a=a.sibling}\nfunction Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}var X=null,Xj=!1;function Yj(a,b,c){for(c=c.child;null!==c;)Zj(a,b,c),c=c.sibling}\nfunction Zj(a,b,c){if(lc&&\"function\"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Lj(c,b);case 6:var d=X,e=Xj;X=null;Yj(a,b,c);X=d;Xj=e;null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Xj;X=c.stateNode.containerInfo;Xj=!0;\nYj(a,b,c);X=d;Xj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Mj(c,b,g):0!==(f&4)&&Mj(c,b,g));e=e.next}while(e!==d)}Yj(a,b,c);break;case 1:if(!U&&(Lj(c,b),d=c.stateNode,\"function\"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Yj(a,b,c);break;case 21:Yj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==\nc.memoizedState,Yj(a,b,c),U=d):Yj(a,b,c);break;default:Yj(a,b,c)}}function ak(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Kj);b.forEach(function(b){var d=bk.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction ck(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Xj=!1;break a;case 3:X=h.stateNode.containerInfo;Xj=!0;break a;case 4:X=h.stateNode.containerInfo;Xj=!0;break a}h=h.return}if(null===X)throw Error(p(160));Zj(f,g,e);X=null;Xj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)dk(b,a),b=b.sibling}\nfunction dk(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ck(b,a);ek(a);if(d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(t){W(a,a.return,t)}try{Pj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);break;case 5:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,\"\")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;\na.updateQueue=null;if(null!==k)try{\"input\"===h&&\"radio\"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];\"style\"===m?sb(e,q):\"dangerouslySetInnerHTML\"===m?nb(e,q):\"children\"===m?ob(e,q):ta(e,m,q,l)}switch(h){case \"input\":bb(e,f);break;case \"textarea\":ib(e,f);break;case \"select\":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,\nf.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:\"\",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:ck(b,a);ek(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:ck(b,a);ek(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:ck(b,a);ek(a);break;case 13:ck(b,a);ek(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||\nnull!==e.alternate&&null!==e.alternate.memoizedState||(fk=B()));d&4&&ak(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,ck(b,a),U=l):ck(b,a);ek(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Pj(4,r,r.return);break;case 1:Lj(r,r.return);var n=r.stateNode;if(\"function\"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=\nb.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Lj(r,r.return);break;case 22:if(null!==r.memoizedState){gk(q);continue}}null!==y?(y.return=r,V=y):gk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty(\"display\")?k.display:null,h.style.display=\nrb(\"display\",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?\"\":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:ck(b,a);ek(a);d&4&&ak(a);break;case 21:break;default:ck(b,\na),ek(a)}}function ek(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Tj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,\"\"),d.flags&=-33);var f=Uj(a);Wj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Uj(a);Vj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function hk(a,b,c){V=a;ik(a,b,c)}\nfunction ik(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Jj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Jj;var l=U;Jj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?jk(e):null!==k?(k.return=g,V=k):jk(e);for(;null!==f;)V=f,ik(f,b,c),f=f.sibling;V=e;Jj=h;U=l}kk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):kk(a,b,c)}}\nfunction kk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Qj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Ci(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&sh(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nb.child.stateNode;break;case 1:c=b.child.stateNode}sh(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case \"button\":case \"input\":case \"select\":case \"textarea\":k.autoFocus&&c.focus();break;case \"img\":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;\ndefault:throw Error(p(163));}U||b.flags&512&&Rj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function gk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}\nfunction jk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Qj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Rj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Rj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}\nvar lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=Infinity,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return 0!==(K&6)?B():-1!==Ak?Ak:Ak=B()}\nfunction yi(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Bk&&(Bk=yc()),Bk;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function gi(a,b,c,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==Q)a===Q&&(0===(K&2)&&(qk|=c),4===T&&Ck(a,Z)),Dk(a,d),1===c&&0===K&&0===(b.mode&1)&&(Gj=B()+500,fg&&jg())}\nfunction Dk(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===Q?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Gk(a,b){Ak=-1;Bk=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc(a,a===Q?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Ik(a,d);else{b=d;var e=K;K|=2;var f=Jk();if(Q!==a||Z!==b)uk=null,Gj=B()+500,Kk(a,b);do try{Lk();break}catch(h){Mk(a,h)}while(1);$g();mk.current=f;K=e;null!==Y?b=0:(Q=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Nk(a,e)));if(1===b)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;if(6===b)Ck(a,d);\nelse{e=a.current.alternate;if(0===(d&30)&&!Ok(e)&&(b=Ik(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Nk(a,f))),1===b))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Pk(a,tk,uk);break;case 3:Ck(a,d);if((d&130023424)===d&&(b=fk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){R();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),b);break}Pk(a,tk,uk);break;case 4:Ck(a,d);if((d&4194240)===\nd)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*lk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p(329));}}}Dk(a,B());return a.callbackNode===c?Gk.bind(null,a):null}\nfunction Nk(a,b){var c=sk;a.current.memoizedState.isDehydrated&&(Kk(a,b).flags|=256);a=Ik(a,b);2!==a&&(b=tk,tk=c,null!==b&&Fj(b));return a}function Fj(a){null===tk?tk=a:tk.push.apply(tk,a)}\nfunction Ok(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Ck(a,b){b&=~rk;b&=~qk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Ek(a){if(0!==(K&6))throw Error(p(327));Hk();var b=uc(a,0);if(0===(b&1))return Dk(a,B()),null;var c=Ik(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Nk(a,d))}if(1===c)throw c=pk,Kk(a,0),Ck(a,b),Dk(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Pk(a,tk,uk);Dk(a,B());return null}\nfunction Qk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Gj=B()+500,fg&&jg())}}function Rk(a){null!==wk&&0===wk.tag&&0===(K&6)&&Hk();var b=K;K|=1;var c=ok.transition,d=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=d,ok.transition=c,K=b,0===(K&6)&&jg()}}function Hj(){fj=ej.current;E(ej)}\nfunction Kk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:zh();E(Wf);E(H);Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}Q=a;Y=a=Pg(a.current,null);Z=fj=b;T=0;pk=null;rk=qk=rh=0;tk=sk=null;if(null!==fh){for(b=\n0;b<fh.length;b++)if(c=fh[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}fh=null}return a}\nfunction Mk(a,b){do{var c=Y;try{$g();Fh.current=Rh;if(Ih){for(var d=M.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Ih=!1}Hh=0;O=N=M=null;Jh=!1;Kh=0;nk.current=null;if(null===c||null===c.return){T=1;pk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Ui(g);if(null!==y){y.flags&=-257;Vi(y,g,h,f,b);y.mode&1&&Si(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Si(f,l,b);tj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Ui(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Vi(J,g,h,f,b);Jg(Ji(k,h));break a}}f=k=Ji(k,h);4!==T&&(T=2);null===sk?sk=[f]:sk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;\nb&=-b;f.lanes|=b;var x=Ni(f,k,b);ph(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Ri||!Ri.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Qi(f,h,b);ph(f,F);break a}}f=f.return}while(null!==f)}Sk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Jk(){var a=mk.current;mk.current=Rh;return null===a?Rh:a}\nfunction tj(){if(0===T||3===T||2===T)T=4;null===Q||0===(rh&268435455)&&0===(qk&268435455)||Ck(Q,Z)}function Ik(a,b){var c=K;K|=2;var d=Jk();if(Q!==a||Z!==b)uk=null,Kk(a,b);do try{Tk();break}catch(e){Mk(a,e)}while(1);$g();K=c;mk.current=d;if(null!==Y)throw Error(p(261));Q=null;Z=0;return T}function Tk(){for(;null!==Y;)Uk(Y)}function Lk(){for(;null!==Y&&!cc();)Uk(Y)}function Uk(a){var b=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps;null===b?Sk(a):Y=b;nk.current=null}\nfunction Sk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Ej(c,b,fj),null!==c){Y=c;return}}else{c=Ij(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Pk(a,b,c){var d=C,e=ok.transition;try{ok.transition=null,C=1,Wk(a,b,c,d)}finally{ok.transition=e,C=d}return null}\nfunction Wk(a,b,c,d){do Hk();while(null!==wk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===Q&&(Y=Q=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||vk||(vk=!0,Fk(hc,function(){Hk();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=ok.transition;ok.transition=null;\nvar g=C;C=1;var h=K;K|=4;nk.current=null;Oj(a,c);dk(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;hk(c,a,e);dc();K=h;C=g;ok.transition=f}else a.current=c;vk&&(vk=!1,wk=a,xk=e);f=a.pendingLanes;0===f&&(Ri=null);mc(c.stateNode,d);Dk(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;0!==(xk&1)&&0!==a.tag&&Hk();f=a.pendingLanes;0!==(f&1)?a===zk?yk++:(yk=0,zk=a):yk=0;jg();return null}\nfunction Hk(){if(null!==wk){var a=Dc(xk),b=ok.transition,c=C;try{ok.transition=null;C=16>a?16:a;if(null===wk)var d=!1;else{a=wk;wk=null;xk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Pj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Sj(m);if(m===\nl){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Pj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&\"function\"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,ok.transition=b}}return!1}function Xk(a,b,c){b=Ji(c,b);b=Ni(a,b,1);a=nh(a,b,1);b=R();null!==a&&(Ac(a,1,b),Dk(a,b))}\nfunction W(a,b,c){if(3===a.tag)Xk(a,a,c);else for(;null!==b;){if(3===b.tag){Xk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ri||!Ri.has(d))){a=Ji(c,a);a=Qi(b,a,1);b=nh(b,a,1);a=R();null!==b&&(Ac(b,1,a),Dk(b,a));break}}b=b.return}}\nfunction Ti(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=R();a.pingedLanes|=a.suspendedLanes&c;Q===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-fk?Kk(a,0):rk|=c);Dk(a,b)}function Yk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=R();a=ih(a,b);null!==a&&(Ac(a,b,c),Dk(a,c))}function uj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Yk(a,c)}\nfunction bk(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Yk(a,c)}var Vk;\nVk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)dh=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return dh=!1,yj(a,b,c);dh=0!==(a.flags&131072)?!0:!1}else dh=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;ij(a,b);a=b.pendingProps;var e=Yf(b,H.current);ch(b,c);e=Nh(null,b,d,a,e,c);var f=Sh();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=\nnull,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,kh(b),e.updater=Ei,b.stateNode=e,e._reactInternals=b,Ii(b,d,a,c),b=jj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Xi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{ij(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=Zk(d);a=Ci(d,a);switch(e){case 0:b=cj(null,b,d,a,c);break a;case 1:b=hj(null,b,d,a,c);break a;case 11:b=Yi(null,b,d,a,c);break a;case 14:b=$i(null,b,d,Ci(d.type,a),c);break a}throw Error(p(306,\nd,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),cj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),hj(a,b,d,e,c);case 3:a:{kj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;lh(a,b);qh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=\nf,b.memoizedState=f,b.flags&256){e=Ji(Error(p(423)),b);b=lj(a,b,d,c,e);break a}else if(d!==e){e=Ji(Error(p(424)),b);b=lj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Vg(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=Zi(a,b,c);break a}Xi(a,b,d,c)}b=b.child}return b;case 5:return Ah(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),\ngj(a,b),Xi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return oj(a,b,c);case 4:return yh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Ug(b,null,d,c):Xi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),Yi(a,b,d,e,c);case 7:return Xi(a,b,b.pendingProps,c),b.child;case 8:return Xi(a,b,b.pendingProps.children,c),b.child;case 12:return Xi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;\ng=e.value;G(Wg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=Zi(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=mh(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);bh(f.return,\nc,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);bh(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Xi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,ch(b,c),e=eh(e),d=d(e),b.flags|=1,Xi(a,b,d,c),\nb.child;case 14:return d=b.type,e=Ci(d,b.pendingProps),e=Ci(d.type,e),$i(a,b,d,e,c);case 15:return bj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),ij(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,ch(b,c),Gi(b,d,e),Ii(b,d,e,c),jj(null,b,d,!0,a,c);case 19:return xj(a,b,c);case 22:return dj(a,b,c)}throw Error(p(156,b.tag));};function Fk(a,b){return ac(a,b)}\nfunction $k(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new $k(a,b,c,d)}function aj(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction Zk(a){if(\"function\"===typeof a)return aj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}\nfunction Pg(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Rg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)aj(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ya:return Tg(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return pj(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;\nbreak a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,\"\"));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Tg(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function pj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function Qg(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}\nfunction Sg(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction al(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=\nnull}function bl(a,b,c,d,e,f,g,h,k){a=new al(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};kh(f);return a}function cl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction dl(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}\nfunction el(a,b,c,d,e,f,g,h,k){a=bl(c,d,!0,a,e,f,g,h,k);a.context=dl(null);c=a.current;d=R();e=yi(c);f=mh(d,e);f.callback=void 0!==b&&null!==b?b:null;nh(c,f,e);a.current.lanes=e;Ac(a,e,d);Dk(a,d);return a}function fl(a,b,c,d){var e=b.current,f=R(),g=yi(e);c=dl(c);null===b.context?b.context=c:b.pendingContext=c;b=mh(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=nh(e,b,g);null!==a&&(gi(a,e,g,f),oh(a,e,g));return g}\nfunction gl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function il(a,b){hl(a,b);(a=a.alternate)&&hl(a,b)}function jl(){return null}var kl=\"function\"===typeof reportError?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}\nml.prototype.render=ll.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));fl(a,b,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Rk(function(){fl(null,a,null,null)});b[uf]=null}};function ml(a){this._internalRoot=a}\nml.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function nl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function pl(){}\nfunction ql(a,b,c,d,e){if(e){if(\"function\"===typeof d){var f=d;d=function(){var a=gl(g);f.call(a)}}var g=el(b,d,a,0,null,!1,!1,\"\",pl);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Rk();return g}for(;e=a.lastChild;)a.removeChild(e);if(\"function\"===typeof d){var h=d;d=function(){var a=gl(k);h.call(a)}}var k=bl(a,0,!1,null,null,!1,!1,\"\",pl);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Rk(function(){fl(b,k,c,d)});return k}\nfunction rl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if(\"function\"===typeof e){var h=e;e=function(){var a=gl(g);h.call(a)}}fl(b,g,a,e)}else g=ql(c,b,a,e,d);return gl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Dk(b,B()),0===(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var b=ih(a,1);if(null!==b){var c=R();gi(b,a,1,c)}}),il(a,1)}};\nFc=function(a){if(13===a.tag){var b=ih(a,134217728);if(null!==b){var c=R();gi(b,a,134217728,c)}il(a,134217728)}};Gc=function(a){if(13===a.tag){var b=yi(a),c=ih(a,b);if(null!==c){var d=R();gi(c,a,b,d)}il(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};\nyb=function(a,b,c){switch(b){case \"input\":bb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Qk;Hb=Rk;\nvar sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"};\nvar ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||\njl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;\nexports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(b))throw Error(p(200));return cl(a,b,null,c)};exports.createRoot=function(a,b){if(!nl(a))throw Error(p(299));var c=!1,d=\"\",e=kl;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=bl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ll(b)};\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(\",\");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Rk(a)};exports.hydrate=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!0,c)};\nexports.hydrateRoot=function(a,b,c){if(!nl(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f=\"\",g=kl;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=el(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,\ne);return new ml(b)};exports.render=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Qk;\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!ol(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return rl(a,b,c,!1,d)};exports.version=\"18.3.1-next-f1338f8080-20240426\";\n","/**\n * An API for getting cryptographically-secure random bytes. The bytes are\n * generated using the Fortuna algorithm devised by Bruce Schneier and\n * Niels Ferguson.\n *\n * Getting strong random bytes is not yet easy to do in javascript. The only\n * truish random entropy that can be collected is from the mouse, keyboard, or\n * from timing with respect to page loads, etc. This generator makes a poor\n * attempt at providing random bytes when those sources haven't yet provided\n * enough entropy to initially seed or to reseed the PRNG.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2009-2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./aes');\nrequire('./sha256');\nrequire('./prng');\nrequire('./util');\n\n(function() {\n\n// forge.random already defined\nif(forge.random && forge.random.getBytes) {\n  module.exports = forge.random;\n  return;\n}\n\n(function(jQuery) {\n\n// the default prng plugin, uses AES-128\nvar prng_aes = {};\nvar _prng_aes_output = new Array(4);\nvar _prng_aes_buffer = forge.util.createBuffer();\nprng_aes.formatKey = function(key) {\n  // convert the key into 32-bit integers\n  var tmp = forge.util.createBuffer(key);\n  key = new Array(4);\n  key[0] = tmp.getInt32();\n  key[1] = tmp.getInt32();\n  key[2] = tmp.getInt32();\n  key[3] = tmp.getInt32();\n\n  // return the expanded key\n  return forge.aes._expandKey(key, false);\n};\nprng_aes.formatSeed = function(seed) {\n  // convert seed into 32-bit integers\n  var tmp = forge.util.createBuffer(seed);\n  seed = new Array(4);\n  seed[0] = tmp.getInt32();\n  seed[1] = tmp.getInt32();\n  seed[2] = tmp.getInt32();\n  seed[3] = tmp.getInt32();\n  return seed;\n};\nprng_aes.cipher = function(key, seed) {\n  forge.aes._updateBlock(key, seed, _prng_aes_output, false);\n  _prng_aes_buffer.putInt32(_prng_aes_output[0]);\n  _prng_aes_buffer.putInt32(_prng_aes_output[1]);\n  _prng_aes_buffer.putInt32(_prng_aes_output[2]);\n  _prng_aes_buffer.putInt32(_prng_aes_output[3]);\n  return _prng_aes_buffer.getBytes();\n};\nprng_aes.increment = function(seed) {\n  // FIXME: do we care about carry or signed issues?\n  ++seed[3];\n  return seed;\n};\nprng_aes.md = forge.md.sha256;\n\n/**\n * Creates a new PRNG.\n */\nfunction spawnPrng() {\n  var ctx = forge.prng.create(prng_aes);\n\n  /**\n   * Gets random bytes. If a native secure crypto API is unavailable, this\n   * method tries to make the bytes more unpredictable by drawing from data that\n   * can be collected from the user of the browser, eg: mouse movement.\n   *\n   * If a callback is given, this method will be called asynchronously.\n   *\n   * @param count the number of random bytes to get.\n   * @param [callback(err, bytes)] called once the operation completes.\n   *\n   * @return the random bytes in a string.\n   */\n  ctx.getBytes = function(count, callback) {\n    return ctx.generate(count, callback);\n  };\n\n  /**\n   * Gets random bytes asynchronously. If a native secure crypto API is\n   * unavailable, this method tries to make the bytes more unpredictable by\n   * drawing from data that can be collected from the user of the browser,\n   * eg: mouse movement.\n   *\n   * @param count the number of random bytes to get.\n   *\n   * @return the random bytes in a string.\n   */\n  ctx.getBytesSync = function(count) {\n    return ctx.generate(count);\n  };\n\n  return ctx;\n}\n\n// create default prng context\nvar _ctx = spawnPrng();\n\n// add other sources of entropy only if window.crypto.getRandomValues is not\n// available -- otherwise this source will be automatically used by the prng\nvar getRandomValues = null;\nvar globalScope = forge.util.globalScope;\nvar _crypto = globalScope.crypto || globalScope.msCrypto;\nif(_crypto && _crypto.getRandomValues) {\n  getRandomValues = function(arr) {\n    return _crypto.getRandomValues(arr);\n  };\n}\n\nif(forge.options.usePureJavaScript ||\n  (!forge.util.isNodejs && !getRandomValues)) {\n  // if this is a web worker, do not use weak entropy, instead register to\n  // receive strong entropy asynchronously from the main thread\n  if(typeof window === 'undefined' || window.document === undefined) {\n    // FIXME:\n  }\n\n  // get load time entropy\n  _ctx.collectInt(+new Date(), 32);\n\n  // add some entropy from navigator object\n  if(typeof(navigator) !== 'undefined') {\n    var _navBytes = '';\n    for(var key in navigator) {\n      try {\n        if(typeof(navigator[key]) == 'string') {\n          _navBytes += navigator[key];\n        }\n      } catch(e) {\n        /* Some navigator keys might not be accessible, e.g. the geolocation\n          attribute throws an exception if touched in Mozilla chrome://\n          context.\n\n          Silently ignore this and just don't use this as a source of\n          entropy. */\n      }\n    }\n    _ctx.collect(_navBytes);\n    _navBytes = null;\n  }\n\n  // add mouse and keyboard collectors if jquery is available\n  if(jQuery) {\n    // set up mouse entropy capture\n    jQuery().mousemove(function(e) {\n      // add mouse coords\n      _ctx.collectInt(e.clientX, 16);\n      _ctx.collectInt(e.clientY, 16);\n    });\n\n    // set up keyboard entropy capture\n    jQuery().keypress(function(e) {\n      _ctx.collectInt(e.charCode, 8);\n    });\n  }\n}\n\n/* Random API */\nif(!forge.random) {\n  forge.random = _ctx;\n} else {\n  // extend forge.random with _ctx\n  for(var key in _ctx) {\n    forge.random[key] = _ctx[key];\n  }\n}\n\n// expose spawn PRNG\nforge.random.createInstance = spawnPrng;\n\nmodule.exports = forge.random;\n\n})(typeof(jQuery) !== 'undefined' ? jQuery : null);\n\n})();\n","/**\n * DES (Data Encryption Standard) implementation.\n *\n * This implementation supports DES as well as 3DES-EDE in ECB and CBC mode.\n * It is based on the BSD-licensed implementation by Paul Tero:\n *\n * Paul Tero, July 2001\n * http://www.tero.co.uk/des/\n *\n * Optimised for performance with large blocks by\n * Michael Hayworth, November 2001\n * http://www.netdealing.com\n *\n * THIS SOFTWARE IS PROVIDED \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS\n * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n * SUCH DAMAGE.\n *\n * @author Stefan Siegl\n * @author Dave Longley\n *\n * Copyright (c) 2012 Stefan Siegl <stesie@brokenpipe.de>\n * Copyright (c) 2012-2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./cipher');\nrequire('./cipherModes');\nrequire('./util');\n\n/* DES API */\nmodule.exports = forge.des = forge.des || {};\n\n/**\n * Deprecated. Instead, use:\n *\n * var cipher = forge.cipher.createCipher('DES-<mode>', key);\n * cipher.start({iv: iv});\n *\n * Creates an DES cipher object to encrypt data using the given symmetric key.\n * The output will be stored in the 'output' member of the returned cipher.\n *\n * The key and iv may be given as binary-encoded strings of bytes or\n * byte buffers.\n *\n * @param key the symmetric key to use (64 or 192 bits).\n * @param iv the initialization vector to use.\n * @param output the buffer to write to, null to create one.\n * @param mode the cipher mode to use (default: 'CBC' if IV is\n *          given, 'ECB' if null).\n *\n * @return the cipher.\n */\nforge.des.startEncrypting = function(key, iv, output, mode) {\n  var cipher = _createCipher({\n    key: key,\n    output: output,\n    decrypt: false,\n    mode: mode || (iv === null ? 'ECB' : 'CBC')\n  });\n  cipher.start(iv);\n  return cipher;\n};\n\n/**\n * Deprecated. Instead, use:\n *\n * var cipher = forge.cipher.createCipher('DES-<mode>', key);\n *\n * Creates an DES cipher object to encrypt data using the given symmetric key.\n *\n * The key may be given as a binary-encoded string of bytes or a byte buffer.\n *\n * @param key the symmetric key to use (64 or 192 bits).\n * @param mode the cipher mode to use (default: 'CBC').\n *\n * @return the cipher.\n */\nforge.des.createEncryptionCipher = function(key, mode) {\n  return _createCipher({\n    key: key,\n    output: null,\n    decrypt: false,\n    mode: mode\n  });\n};\n\n/**\n * Deprecated. Instead, use:\n *\n * var decipher = forge.cipher.createDecipher('DES-<mode>', key);\n * decipher.start({iv: iv});\n *\n * Creates an DES cipher object to decrypt data using the given symmetric key.\n * The output will be stored in the 'output' member of the returned cipher.\n *\n * The key and iv may be given as binary-encoded strings of bytes or\n * byte buffers.\n *\n * @param key the symmetric key to use (64 or 192 bits).\n * @param iv the initialization vector to use.\n * @param output the buffer to write to, null to create one.\n * @param mode the cipher mode to use (default: 'CBC' if IV is\n *          given, 'ECB' if null).\n *\n * @return the cipher.\n */\nforge.des.startDecrypting = function(key, iv, output, mode) {\n  var cipher = _createCipher({\n    key: key,\n    output: output,\n    decrypt: true,\n    mode: mode || (iv === null ? 'ECB' : 'CBC')\n  });\n  cipher.start(iv);\n  return cipher;\n};\n\n/**\n * Deprecated. Instead, use:\n *\n * var decipher = forge.cipher.createDecipher('DES-<mode>', key);\n *\n * Creates an DES cipher object to decrypt data using the given symmetric key.\n *\n * The key may be given as a binary-encoded string of bytes or a byte buffer.\n *\n * @param key the symmetric key to use (64 or 192 bits).\n * @param mode the cipher mode to use (default: 'CBC').\n *\n * @return the cipher.\n */\nforge.des.createDecryptionCipher = function(key, mode) {\n  return _createCipher({\n    key: key,\n    output: null,\n    decrypt: true,\n    mode: mode\n  });\n};\n\n/**\n * Creates a new DES cipher algorithm object.\n *\n * @param name the name of the algorithm.\n * @param mode the mode factory function.\n *\n * @return the DES algorithm object.\n */\nforge.des.Algorithm = function(name, mode) {\n  var self = this;\n  self.name = name;\n  self.mode = new mode({\n    blockSize: 8,\n    cipher: {\n      encrypt: function(inBlock, outBlock) {\n        return _updateBlock(self._keys, inBlock, outBlock, false);\n      },\n      decrypt: function(inBlock, outBlock) {\n        return _updateBlock(self._keys, inBlock, outBlock, true);\n      }\n    }\n  });\n  self._init = false;\n};\n\n/**\n * Initializes this DES algorithm by expanding its key.\n *\n * @param options the options to use.\n *          key the key to use with this algorithm.\n *          decrypt true if the algorithm should be initialized for decryption,\n *            false for encryption.\n */\nforge.des.Algorithm.prototype.initialize = function(options) {\n  if(this._init) {\n    return;\n  }\n\n  var key = forge.util.createBuffer(options.key);\n  if(this.name.indexOf('3DES') === 0) {\n    if(key.length() !== 24) {\n      throw new Error('Invalid Triple-DES key size: ' + key.length() * 8);\n    }\n  }\n\n  // do key expansion to 16 or 48 subkeys (single or triple DES)\n  this._keys = _createKeys(key);\n  this._init = true;\n};\n\n/** Register DES algorithms **/\n\nregisterAlgorithm('DES-ECB', forge.cipher.modes.ecb);\nregisterAlgorithm('DES-CBC', forge.cipher.modes.cbc);\nregisterAlgorithm('DES-CFB', forge.cipher.modes.cfb);\nregisterAlgorithm('DES-OFB', forge.cipher.modes.ofb);\nregisterAlgorithm('DES-CTR', forge.cipher.modes.ctr);\n\nregisterAlgorithm('3DES-ECB', forge.cipher.modes.ecb);\nregisterAlgorithm('3DES-CBC', forge.cipher.modes.cbc);\nregisterAlgorithm('3DES-CFB', forge.cipher.modes.cfb);\nregisterAlgorithm('3DES-OFB', forge.cipher.modes.ofb);\nregisterAlgorithm('3DES-CTR', forge.cipher.modes.ctr);\n\nfunction registerAlgorithm(name, mode) {\n  var factory = function() {\n    return new forge.des.Algorithm(name, mode);\n  };\n  forge.cipher.registerAlgorithm(name, factory);\n}\n\n/** DES implementation **/\n\nvar spfunction1 = [0x1010400,0,0x10000,0x1010404,0x1010004,0x10404,0x4,0x10000,0x400,0x1010400,0x1010404,0x400,0x1000404,0x1010004,0x1000000,0x4,0x404,0x1000400,0x1000400,0x10400,0x10400,0x1010000,0x1010000,0x1000404,0x10004,0x1000004,0x1000004,0x10004,0,0x404,0x10404,0x1000000,0x10000,0x1010404,0x4,0x1010000,0x1010400,0x1000000,0x1000000,0x400,0x1010004,0x10000,0x10400,0x1000004,0x400,0x4,0x1000404,0x10404,0x1010404,0x10004,0x1010000,0x1000404,0x1000004,0x404,0x10404,0x1010400,0x404,0x1000400,0x1000400,0,0x10004,0x10400,0,0x1010004];\nvar spfunction2 = [-0x7fef7fe0,-0x7fff8000,0x8000,0x108020,0x100000,0x20,-0x7fefffe0,-0x7fff7fe0,-0x7fffffe0,-0x7fef7fe0,-0x7fef8000,-0x80000000,-0x7fff8000,0x100000,0x20,-0x7fefffe0,0x108000,0x100020,-0x7fff7fe0,0,-0x80000000,0x8000,0x108020,-0x7ff00000,0x100020,-0x7fffffe0,0,0x108000,0x8020,-0x7fef8000,-0x7ff00000,0x8020,0,0x108020,-0x7fefffe0,0x100000,-0x7fff7fe0,-0x7ff00000,-0x7fef8000,0x8000,-0x7ff00000,-0x7fff8000,0x20,-0x7fef7fe0,0x108020,0x20,0x8000,-0x80000000,0x8020,-0x7fef8000,0x100000,-0x7fffffe0,0x100020,-0x7fff7fe0,-0x7fffffe0,0x100020,0x108000,0,-0x7fff8000,0x8020,-0x80000000,-0x7fefffe0,-0x7fef7fe0,0x108000];\nvar spfunction3 = [0x208,0x8020200,0,0x8020008,0x8000200,0,0x20208,0x8000200,0x20008,0x8000008,0x8000008,0x20000,0x8020208,0x20008,0x8020000,0x208,0x8000000,0x8,0x8020200,0x200,0x20200,0x8020000,0x8020008,0x20208,0x8000208,0x20200,0x20000,0x8000208,0x8,0x8020208,0x200,0x8000000,0x8020200,0x8000000,0x20008,0x208,0x20000,0x8020200,0x8000200,0,0x200,0x20008,0x8020208,0x8000200,0x8000008,0x200,0,0x8020008,0x8000208,0x20000,0x8000000,0x8020208,0x8,0x20208,0x20200,0x8000008,0x8020000,0x8000208,0x208,0x8020000,0x20208,0x8,0x8020008,0x20200];\nvar spfunction4 = [0x802001,0x2081,0x2081,0x80,0x802080,0x800081,0x800001,0x2001,0,0x802000,0x802000,0x802081,0x81,0,0x800080,0x800001,0x1,0x2000,0x800000,0x802001,0x80,0x800000,0x2001,0x2080,0x800081,0x1,0x2080,0x800080,0x2000,0x802080,0x802081,0x81,0x800080,0x800001,0x802000,0x802081,0x81,0,0,0x802000,0x2080,0x800080,0x800081,0x1,0x802001,0x2081,0x2081,0x80,0x802081,0x81,0x1,0x2000,0x800001,0x2001,0x802080,0x800081,0x2001,0x2080,0x800000,0x802001,0x80,0x800000,0x2000,0x802080];\nvar spfunction5 = [0x100,0x2080100,0x2080000,0x42000100,0x80000,0x100,0x40000000,0x2080000,0x40080100,0x80000,0x2000100,0x40080100,0x42000100,0x42080000,0x80100,0x40000000,0x2000000,0x40080000,0x40080000,0,0x40000100,0x42080100,0x42080100,0x2000100,0x42080000,0x40000100,0,0x42000000,0x2080100,0x2000000,0x42000000,0x80100,0x80000,0x42000100,0x100,0x2000000,0x40000000,0x2080000,0x42000100,0x40080100,0x2000100,0x40000000,0x42080000,0x2080100,0x40080100,0x100,0x2000000,0x42080000,0x42080100,0x80100,0x42000000,0x42080100,0x2080000,0,0x40080000,0x42000000,0x80100,0x2000100,0x40000100,0x80000,0,0x40080000,0x2080100,0x40000100];\nvar spfunction6 = [0x20000010,0x20400000,0x4000,0x20404010,0x20400000,0x10,0x20404010,0x400000,0x20004000,0x404010,0x400000,0x20000010,0x400010,0x20004000,0x20000000,0x4010,0,0x400010,0x20004010,0x4000,0x404000,0x20004010,0x10,0x20400010,0x20400010,0,0x404010,0x20404000,0x4010,0x404000,0x20404000,0x20000000,0x20004000,0x10,0x20400010,0x404000,0x20404010,0x400000,0x4010,0x20000010,0x400000,0x20004000,0x20000000,0x4010,0x20000010,0x20404010,0x404000,0x20400000,0x404010,0x20404000,0,0x20400010,0x10,0x4000,0x20400000,0x404010,0x4000,0x400010,0x20004010,0,0x20404000,0x20000000,0x400010,0x20004010];\nvar spfunction7 = [0x200000,0x4200002,0x4000802,0,0x800,0x4000802,0x200802,0x4200800,0x4200802,0x200000,0,0x4000002,0x2,0x4000000,0x4200002,0x802,0x4000800,0x200802,0x200002,0x4000800,0x4000002,0x4200000,0x4200800,0x200002,0x4200000,0x800,0x802,0x4200802,0x200800,0x2,0x4000000,0x200800,0x4000000,0x200800,0x200000,0x4000802,0x4000802,0x4200002,0x4200002,0x2,0x200002,0x4000000,0x4000800,0x200000,0x4200800,0x802,0x200802,0x4200800,0x802,0x4000002,0x4200802,0x4200000,0x200800,0,0x2,0x4200802,0,0x200802,0x4200000,0x800,0x4000002,0x4000800,0x800,0x200002];\nvar spfunction8 = [0x10001040,0x1000,0x40000,0x10041040,0x10000000,0x10001040,0x40,0x10000000,0x40040,0x10040000,0x10041040,0x41000,0x10041000,0x41040,0x1000,0x40,0x10040000,0x10000040,0x10001000,0x1040,0x41000,0x40040,0x10040040,0x10041000,0x1040,0,0,0x10040040,0x10000040,0x10001000,0x41040,0x40000,0x41040,0x40000,0x10041000,0x1000,0x40,0x10040040,0x1000,0x41040,0x10001000,0x40,0x10000040,0x10040000,0x10040040,0x10000000,0x40000,0x10001040,0,0x10041040,0x40040,0x10000040,0x10040000,0x10001000,0x10001040,0,0x10041040,0x41000,0x41000,0x1040,0x1040,0x40040,0x10000000,0x10041000];\n\n/**\n * Create necessary sub keys.\n *\n * @param key the 64-bit or 192-bit key.\n *\n * @return the expanded keys.\n */\nfunction _createKeys(key) {\n  var pc2bytes0  = [0,0x4,0x20000000,0x20000004,0x10000,0x10004,0x20010000,0x20010004,0x200,0x204,0x20000200,0x20000204,0x10200,0x10204,0x20010200,0x20010204],\n      pc2bytes1  = [0,0x1,0x100000,0x100001,0x4000000,0x4000001,0x4100000,0x4100001,0x100,0x101,0x100100,0x100101,0x4000100,0x4000101,0x4100100,0x4100101],\n      pc2bytes2  = [0,0x8,0x800,0x808,0x1000000,0x1000008,0x1000800,0x1000808,0,0x8,0x800,0x808,0x1000000,0x1000008,0x1000800,0x1000808],\n      pc2bytes3  = [0,0x200000,0x8000000,0x8200000,0x2000,0x202000,0x8002000,0x8202000,0x20000,0x220000,0x8020000,0x8220000,0x22000,0x222000,0x8022000,0x8222000],\n      pc2bytes4  = [0,0x40000,0x10,0x40010,0,0x40000,0x10,0x40010,0x1000,0x41000,0x1010,0x41010,0x1000,0x41000,0x1010,0x41010],\n      pc2bytes5  = [0,0x400,0x20,0x420,0,0x400,0x20,0x420,0x2000000,0x2000400,0x2000020,0x2000420,0x2000000,0x2000400,0x2000020,0x2000420],\n      pc2bytes6  = [0,0x10000000,0x80000,0x10080000,0x2,0x10000002,0x80002,0x10080002,0,0x10000000,0x80000,0x10080000,0x2,0x10000002,0x80002,0x10080002],\n      pc2bytes7  = [0,0x10000,0x800,0x10800,0x20000000,0x20010000,0x20000800,0x20010800,0x20000,0x30000,0x20800,0x30800,0x20020000,0x20030000,0x20020800,0x20030800],\n      pc2bytes8  = [0,0x40000,0,0x40000,0x2,0x40002,0x2,0x40002,0x2000000,0x2040000,0x2000000,0x2040000,0x2000002,0x2040002,0x2000002,0x2040002],\n      pc2bytes9  = [0,0x10000000,0x8,0x10000008,0,0x10000000,0x8,0x10000008,0x400,0x10000400,0x408,0x10000408,0x400,0x10000400,0x408,0x10000408],\n      pc2bytes10 = [0,0x20,0,0x20,0x100000,0x100020,0x100000,0x100020,0x2000,0x2020,0x2000,0x2020,0x102000,0x102020,0x102000,0x102020],\n      pc2bytes11 = [0,0x1000000,0x200,0x1000200,0x200000,0x1200000,0x200200,0x1200200,0x4000000,0x5000000,0x4000200,0x5000200,0x4200000,0x5200000,0x4200200,0x5200200],\n      pc2bytes12 = [0,0x1000,0x8000000,0x8001000,0x80000,0x81000,0x8080000,0x8081000,0x10,0x1010,0x8000010,0x8001010,0x80010,0x81010,0x8080010,0x8081010],\n      pc2bytes13 = [0,0x4,0x100,0x104,0,0x4,0x100,0x104,0x1,0x5,0x101,0x105,0x1,0x5,0x101,0x105];\n\n  // how many iterations (1 for des, 3 for triple des)\n  // changed by Paul 16/6/2007 to use Triple DES for 9+ byte keys\n  var iterations = key.length() > 8 ? 3 : 1;\n\n  // stores the return keys\n  var keys = [];\n\n  // now define the left shifts which need to be done\n  var shifts = [0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0];\n\n  var n = 0, tmp;\n  for(var j = 0; j < iterations; j++) {\n    var left = key.getInt32();\n    var right = key.getInt32();\n\n    tmp = ((left >>> 4) ^ right) & 0x0f0f0f0f;\n    right ^= tmp;\n    left ^= (tmp << 4);\n\n    tmp = ((right >>> -16) ^ left) & 0x0000ffff;\n    left ^= tmp;\n    right ^= (tmp << -16);\n\n    tmp = ((left >>> 2) ^ right) & 0x33333333;\n    right ^= tmp;\n    left ^= (tmp << 2);\n\n    tmp = ((right >>> -16) ^ left) & 0x0000ffff;\n    left ^= tmp;\n    right ^= (tmp << -16);\n\n    tmp = ((left >>> 1) ^ right) & 0x55555555;\n    right ^= tmp;\n    left ^= (tmp << 1);\n\n    tmp = ((right >>> 8) ^ left) & 0x00ff00ff;\n    left ^= tmp;\n    right ^= (tmp << 8);\n\n    tmp = ((left >>> 1) ^ right) & 0x55555555;\n    right ^= tmp;\n    left ^= (tmp << 1);\n\n    // right needs to be shifted and OR'd with last four bits of left\n    tmp = (left << 8) | ((right >>> 20) & 0x000000f0);\n\n    // left needs to be put upside down\n    left = ((right << 24) | ((right << 8) & 0xff0000) |\n      ((right >>> 8) & 0xff00) | ((right >>> 24) & 0xf0));\n    right = tmp;\n\n    // now go through and perform these shifts on the left and right keys\n    for(var i = 0; i < shifts.length; ++i) {\n      //shift the keys either one or two bits to the left\n      if(shifts[i]) {\n        left = (left << 2) | (left >>> 26);\n        right = (right << 2) | (right >>> 26);\n      } else {\n        left = (left << 1) | (left >>> 27);\n        right = (right << 1) | (right >>> 27);\n      }\n      left &= -0xf;\n      right &= -0xf;\n\n      // now apply PC-2, in such a way that E is easier when encrypting or\n      // decrypting this conversion will look like PC-2 except only the last 6\n      // bits of each byte are used rather than 48 consecutive bits and the\n      // order of lines will be according to how the S selection functions will\n      // be applied: S2, S4, S6, S8, S1, S3, S5, S7\n      var lefttmp = (\n        pc2bytes0[left >>> 28] | pc2bytes1[(left >>> 24) & 0xf] |\n        pc2bytes2[(left >>> 20) & 0xf] | pc2bytes3[(left >>> 16) & 0xf] |\n        pc2bytes4[(left >>> 12) & 0xf] | pc2bytes5[(left >>> 8) & 0xf] |\n        pc2bytes6[(left >>> 4) & 0xf]);\n      var righttmp = (\n        pc2bytes7[right >>> 28] | pc2bytes8[(right >>> 24) & 0xf] |\n        pc2bytes9[(right >>> 20) & 0xf] | pc2bytes10[(right >>> 16) & 0xf] |\n        pc2bytes11[(right >>> 12) & 0xf] | pc2bytes12[(right >>> 8) & 0xf] |\n        pc2bytes13[(right >>> 4) & 0xf]);\n      tmp = ((righttmp >>> 16) ^ lefttmp) & 0x0000ffff;\n      keys[n++] = lefttmp ^ tmp;\n      keys[n++] = righttmp ^ (tmp << 16);\n    }\n  }\n\n  return keys;\n}\n\n/**\n * Updates a single block (1 byte) using DES. The update will either\n * encrypt or decrypt the block.\n *\n * @param keys the expanded keys.\n * @param input the input block (an array of 32-bit words).\n * @param output the updated output block.\n * @param decrypt true to decrypt the block, false to encrypt it.\n */\nfunction _updateBlock(keys, input, output, decrypt) {\n  // set up loops for single or triple DES\n  var iterations = keys.length === 32 ? 3 : 9;\n  var looping;\n  if(iterations === 3) {\n    looping = decrypt ? [30, -2, -2] : [0, 32, 2];\n  } else {\n    looping = (decrypt ?\n      [94, 62, -2, 32, 64, 2, 30, -2, -2] :\n      [0, 32, 2, 62, 30, -2, 64, 96, 2]);\n  }\n\n  var tmp;\n\n  var left = input[0];\n  var right = input[1];\n\n  // first each 64 bit chunk of the message must be permuted according to IP\n  tmp = ((left >>> 4) ^ right) & 0x0f0f0f0f;\n  right ^= tmp;\n  left ^= (tmp << 4);\n\n  tmp = ((left >>> 16) ^ right) & 0x0000ffff;\n  right ^= tmp;\n  left ^= (tmp << 16);\n\n  tmp = ((right >>> 2) ^ left) & 0x33333333;\n  left ^= tmp;\n  right ^= (tmp << 2);\n\n  tmp = ((right >>> 8) ^ left) & 0x00ff00ff;\n  left ^= tmp;\n  right ^= (tmp << 8);\n\n  tmp = ((left >>> 1) ^ right) & 0x55555555;\n  right ^= tmp;\n  left ^= (tmp << 1);\n\n  // rotate left 1 bit\n  left = ((left << 1) | (left >>> 31));\n  right = ((right << 1) | (right >>> 31));\n\n  for(var j = 0; j < iterations; j += 3) {\n    var endloop = looping[j + 1];\n    var loopinc = looping[j + 2];\n\n    // now go through and perform the encryption or decryption\n    for(var i = looping[j]; i != endloop; i += loopinc) {\n      var right1 = right ^ keys[i];\n      var right2 = ((right >>> 4) | (right << 28)) ^ keys[i + 1];\n\n      // passing these bytes through the S selection functions\n      tmp = left;\n      left = right;\n      right = tmp ^ (\n        spfunction2[(right1 >>> 24) & 0x3f] |\n        spfunction4[(right1 >>> 16) & 0x3f] |\n        spfunction6[(right1 >>>  8) & 0x3f] |\n        spfunction8[right1 & 0x3f] |\n        spfunction1[(right2 >>> 24) & 0x3f] |\n        spfunction3[(right2 >>> 16) & 0x3f] |\n        spfunction5[(right2 >>>  8) & 0x3f] |\n        spfunction7[right2 & 0x3f]);\n    }\n    // unreverse left and right\n    tmp = left;\n    left = right;\n    right = tmp;\n  }\n\n  // rotate right 1 bit\n  left = ((left >>> 1) | (left << 31));\n  right = ((right >>> 1) | (right << 31));\n\n  // now perform IP-1, which is IP in the opposite direction\n  tmp = ((left >>> 1) ^ right) & 0x55555555;\n  right ^= tmp;\n  left ^= (tmp << 1);\n\n  tmp = ((right >>> 8) ^ left) & 0x00ff00ff;\n  left ^= tmp;\n  right ^= (tmp << 8);\n\n  tmp = ((right >>> 2) ^ left) & 0x33333333;\n  left ^= tmp;\n  right ^= (tmp << 2);\n\n  tmp = ((left >>> 16) ^ right) & 0x0000ffff;\n  right ^= tmp;\n  left ^= (tmp << 16);\n\n  tmp = ((left >>> 4) ^ right) & 0x0f0f0f0f;\n  right ^= tmp;\n  left ^= (tmp << 4);\n\n  output[0] = left;\n  output[1] = right;\n}\n\n/**\n * Deprecated. Instead, use:\n *\n * forge.cipher.createCipher('DES-<mode>', key);\n * forge.cipher.createDecipher('DES-<mode>', key);\n *\n * Creates a deprecated DES cipher object. This object's mode will default to\n * CBC (cipher-block-chaining).\n *\n * The key may be given as a binary-encoded string of bytes or a byte buffer.\n *\n * @param options the options to use.\n *          key the symmetric key to use (64 or 192 bits).\n *          output the buffer to write to.\n *          decrypt true for decryption, false for encryption.\n *          mode the cipher mode to use (default: 'CBC').\n *\n * @return the cipher.\n */\nfunction _createCipher(options) {\n  options = options || {};\n  var mode = (options.mode || 'CBC').toUpperCase();\n  var algorithm = 'DES-' + mode;\n\n  var cipher;\n  if(options.decrypt) {\n    cipher = forge.cipher.createDecipher(algorithm, options.key);\n  } else {\n    cipher = forge.cipher.createCipher(algorithm, options.key);\n  }\n\n  // backwards compatible start API\n  var start = cipher.start;\n  cipher.start = function(iv, options) {\n    // backwards compatibility: support second arg as output buffer\n    var output = null;\n    if(options instanceof forge.util.ByteBuffer) {\n      output = options;\n      options = {};\n    }\n    options = options || {};\n    options.output = output;\n    options.iv = iv;\n    start.call(cipher, options);\n  };\n\n  return cipher;\n}\n","/**\n * Object IDs for ASN.1.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2013 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\n\nforge.pki = forge.pki || {};\nvar oids = module.exports = forge.pki.oids = forge.oids = forge.oids || {};\n\n// set id to name mapping and name to id mapping\nfunction _IN(id, name) {\n  oids[id] = name;\n  oids[name] = id;\n}\n// set id to name mapping only\nfunction _I_(id, name) {\n  oids[id] = name;\n}\n\n// algorithm OIDs\n_IN('1.2.840.113549.1.1.1', 'rsaEncryption');\n// Note: md2 & md4 not implemented\n//_IN('1.2.840.113549.1.1.2', 'md2WithRSAEncryption');\n//_IN('1.2.840.113549.1.1.3', 'md4WithRSAEncryption');\n_IN('1.2.840.113549.1.1.4', 'md5WithRSAEncryption');\n_IN('1.2.840.113549.1.1.5', 'sha1WithRSAEncryption');\n_IN('1.2.840.113549.1.1.7', 'RSAES-OAEP');\n_IN('1.2.840.113549.1.1.8', 'mgf1');\n_IN('1.2.840.113549.1.1.9', 'pSpecified');\n_IN('1.2.840.113549.1.1.10', 'RSASSA-PSS');\n_IN('1.2.840.113549.1.1.11', 'sha256WithRSAEncryption');\n_IN('1.2.840.113549.1.1.12', 'sha384WithRSAEncryption');\n_IN('1.2.840.113549.1.1.13', 'sha512WithRSAEncryption');\n// Edwards-curve Digital Signature Algorithm (EdDSA) Ed25519\n_IN('1.3.101.112', 'EdDSA25519');\n\n_IN('1.2.840.10040.4.3', 'dsa-with-sha1');\n\n_IN('1.3.14.3.2.7', 'desCBC');\n\n_IN('1.3.14.3.2.26', 'sha1');\n// Deprecated equivalent of sha1WithRSAEncryption\n_IN('1.3.14.3.2.29', 'sha1WithRSASignature');\n_IN('2.16.840.1.101.3.4.2.1', 'sha256');\n_IN('2.16.840.1.101.3.4.2.2', 'sha384');\n_IN('2.16.840.1.101.3.4.2.3', 'sha512');\n_IN('2.16.840.1.101.3.4.2.4', 'sha224');\n_IN('2.16.840.1.101.3.4.2.5', 'sha512-224');\n_IN('2.16.840.1.101.3.4.2.6', 'sha512-256');\n_IN('1.2.840.113549.2.2', 'md2');\n_IN('1.2.840.113549.2.5', 'md5');\n\n// pkcs#7 content types\n_IN('1.2.840.113549.1.7.1', 'data');\n_IN('1.2.840.113549.1.7.2', 'signedData');\n_IN('1.2.840.113549.1.7.3', 'envelopedData');\n_IN('1.2.840.113549.1.7.4', 'signedAndEnvelopedData');\n_IN('1.2.840.113549.1.7.5', 'digestedData');\n_IN('1.2.840.113549.1.7.6', 'encryptedData');\n\n// pkcs#9 oids\n_IN('1.2.840.113549.1.9.1', 'emailAddress');\n_IN('1.2.840.113549.1.9.2', 'unstructuredName');\n_IN('1.2.840.113549.1.9.3', 'contentType');\n_IN('1.2.840.113549.1.9.4', 'messageDigest');\n_IN('1.2.840.113549.1.9.5', 'signingTime');\n_IN('1.2.840.113549.1.9.6', 'counterSignature');\n_IN('1.2.840.113549.1.9.7', 'challengePassword');\n_IN('1.2.840.113549.1.9.8', 'unstructuredAddress');\n_IN('1.2.840.113549.1.9.14', 'extensionRequest');\n\n_IN('1.2.840.113549.1.9.20', 'friendlyName');\n_IN('1.2.840.113549.1.9.21', 'localKeyId');\n_IN('1.2.840.113549.1.9.22.1', 'x509Certificate');\n\n// pkcs#12 safe bags\n_IN('1.2.840.113549.1.12.10.1.1', 'keyBag');\n_IN('1.2.840.113549.1.12.10.1.2', 'pkcs8ShroudedKeyBag');\n_IN('1.2.840.113549.1.12.10.1.3', 'certBag');\n_IN('1.2.840.113549.1.12.10.1.4', 'crlBag');\n_IN('1.2.840.113549.1.12.10.1.5', 'secretBag');\n_IN('1.2.840.113549.1.12.10.1.6', 'safeContentsBag');\n\n// password-based-encryption for pkcs#12\n_IN('1.2.840.113549.1.5.13', 'pkcs5PBES2');\n_IN('1.2.840.113549.1.5.12', 'pkcs5PBKDF2');\n\n_IN('1.2.840.113549.1.12.1.1', 'pbeWithSHAAnd128BitRC4');\n_IN('1.2.840.113549.1.12.1.2', 'pbeWithSHAAnd40BitRC4');\n_IN('1.2.840.113549.1.12.1.3', 'pbeWithSHAAnd3-KeyTripleDES-CBC');\n_IN('1.2.840.113549.1.12.1.4', 'pbeWithSHAAnd2-KeyTripleDES-CBC');\n_IN('1.2.840.113549.1.12.1.5', 'pbeWithSHAAnd128BitRC2-CBC');\n_IN('1.2.840.113549.1.12.1.6', 'pbewithSHAAnd40BitRC2-CBC');\n\n// hmac OIDs\n_IN('1.2.840.113549.2.7', 'hmacWithSHA1');\n_IN('1.2.840.113549.2.8', 'hmacWithSHA224');\n_IN('1.2.840.113549.2.9', 'hmacWithSHA256');\n_IN('1.2.840.113549.2.10', 'hmacWithSHA384');\n_IN('1.2.840.113549.2.11', 'hmacWithSHA512');\n\n// symmetric key algorithm oids\n_IN('1.2.840.113549.3.7', 'des-EDE3-CBC');\n_IN('2.16.840.1.101.3.4.1.2', 'aes128-CBC');\n_IN('2.16.840.1.101.3.4.1.22', 'aes192-CBC');\n_IN('2.16.840.1.101.3.4.1.42', 'aes256-CBC');\n\n// certificate issuer/subject OIDs\n_IN('2.5.4.3', 'commonName');\n_IN('2.5.4.4', 'surname');\n_IN('2.5.4.5', 'serialNumber');\n_IN('2.5.4.6', 'countryName');\n_IN('2.5.4.7', 'localityName');\n_IN('2.5.4.8', 'stateOrProvinceName');\n_IN('2.5.4.9', 'streetAddress');\n_IN('2.5.4.10', 'organizationName');\n_IN('2.5.4.11', 'organizationalUnitName');\n_IN('2.5.4.12', 'title');\n_IN('2.5.4.13', 'description');\n_IN('2.5.4.15', 'businessCategory');\n_IN('2.5.4.17', 'postalCode');\n_IN('2.5.4.42', 'givenName');\n_IN('1.3.6.1.4.1.311.60.2.1.2', 'jurisdictionOfIncorporationStateOrProvinceName');\n_IN('1.3.6.1.4.1.311.60.2.1.3', 'jurisdictionOfIncorporationCountryName');\n\n// X.509 extension OIDs\n_IN('2.16.840.1.113730.1.1', 'nsCertType');\n_IN('2.16.840.1.113730.1.13', 'nsComment'); // deprecated in theory; still widely used\n_I_('2.5.29.1', 'authorityKeyIdentifier'); // deprecated, use .35\n_I_('2.5.29.2', 'keyAttributes'); // obsolete use .37 or .15\n_I_('2.5.29.3', 'certificatePolicies'); // deprecated, use .32\n_I_('2.5.29.4', 'keyUsageRestriction'); // obsolete use .37 or .15\n_I_('2.5.29.5', 'policyMapping'); // deprecated use .33\n_I_('2.5.29.6', 'subtreesConstraint'); // obsolete use .30\n_I_('2.5.29.7', 'subjectAltName'); // deprecated use .17\n_I_('2.5.29.8', 'issuerAltName'); // deprecated use .18\n_I_('2.5.29.9', 'subjectDirectoryAttributes');\n_I_('2.5.29.10', 'basicConstraints'); // deprecated use .19\n_I_('2.5.29.11', 'nameConstraints'); // deprecated use .30\n_I_('2.5.29.12', 'policyConstraints'); // deprecated use .36\n_I_('2.5.29.13', 'basicConstraints'); // deprecated use .19\n_IN('2.5.29.14', 'subjectKeyIdentifier');\n_IN('2.5.29.15', 'keyUsage');\n_I_('2.5.29.16', 'privateKeyUsagePeriod');\n_IN('2.5.29.17', 'subjectAltName');\n_IN('2.5.29.18', 'issuerAltName');\n_IN('2.5.29.19', 'basicConstraints');\n_I_('2.5.29.20', 'cRLNumber');\n_I_('2.5.29.21', 'cRLReason');\n_I_('2.5.29.22', 'expirationDate');\n_I_('2.5.29.23', 'instructionCode');\n_I_('2.5.29.24', 'invalidityDate');\n_I_('2.5.29.25', 'cRLDistributionPoints'); // deprecated use .31\n_I_('2.5.29.26', 'issuingDistributionPoint'); // deprecated use .28\n_I_('2.5.29.27', 'deltaCRLIndicator');\n_I_('2.5.29.28', 'issuingDistributionPoint');\n_I_('2.5.29.29', 'certificateIssuer');\n_I_('2.5.29.30', 'nameConstraints');\n_IN('2.5.29.31', 'cRLDistributionPoints');\n_IN('2.5.29.32', 'certificatePolicies');\n_I_('2.5.29.33', 'policyMappings');\n_I_('2.5.29.34', 'policyConstraints'); // deprecated use .36\n_IN('2.5.29.35', 'authorityKeyIdentifier');\n_I_('2.5.29.36', 'policyConstraints');\n_IN('2.5.29.37', 'extKeyUsage');\n_I_('2.5.29.46', 'freshestCRL');\n_I_('2.5.29.54', 'inhibitAnyPolicy');\n\n// extKeyUsage purposes\n_IN('1.3.6.1.4.1.11129.2.4.2', 'timestampList');\n_IN('1.3.6.1.5.5.7.1.1', 'authorityInfoAccess');\n_IN('1.3.6.1.5.5.7.3.1', 'serverAuth');\n_IN('1.3.6.1.5.5.7.3.2', 'clientAuth');\n_IN('1.3.6.1.5.5.7.3.3', 'codeSigning');\n_IN('1.3.6.1.5.5.7.3.4', 'emailProtection');\n_IN('1.3.6.1.5.5.7.3.8', 'timeStamping');\n","/**\n * Javascript implementation of RSA-KEM.\n *\n * @author Lautaro Cozzani Rodriguez\n * @author Dave Longley\n *\n * Copyright (c) 2014 Lautaro Cozzani <lautaro.cozzani@scytl.com>\n * Copyright (c) 2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./util');\nrequire('./random');\nrequire('./jsbn');\n\nmodule.exports = forge.kem = forge.kem || {};\n\nvar BigInteger = forge.jsbn.BigInteger;\n\n/**\n * The API for the RSA Key Encapsulation Mechanism (RSA-KEM) from ISO 18033-2.\n */\nforge.kem.rsa = {};\n\n/**\n * Creates an RSA KEM API object for generating a secret asymmetric key.\n *\n * The symmetric key may be generated via a call to 'encrypt', which will\n * produce a ciphertext to be transmitted to the recipient and a key to be\n * kept secret. The ciphertext is a parameter to be passed to 'decrypt' which\n * will produce the same secret key for the recipient to use to decrypt a\n * message that was encrypted with the secret key.\n *\n * @param kdf the KDF API to use (eg: new forge.kem.kdf1()).\n * @param options the options to use.\n *          [prng] a custom crypto-secure pseudo-random number generator to use,\n *            that must define \"getBytesSync\".\n */\nforge.kem.rsa.create = function(kdf, options) {\n  options = options || {};\n  var prng = options.prng || forge.random;\n\n  var kem = {};\n\n  /**\n   * Generates a secret key and its encapsulation.\n   *\n   * @param publicKey the RSA public key to encrypt with.\n   * @param keyLength the length, in bytes, of the secret key to generate.\n   *\n   * @return an object with:\n   *   encapsulation: the ciphertext for generating the secret key, as a\n   *     binary-encoded string of bytes.\n   *   key: the secret key to use for encrypting a message.\n   */\n  kem.encrypt = function(publicKey, keyLength) {\n    // generate a random r where 1 < r < n\n    var byteLength = Math.ceil(publicKey.n.bitLength() / 8);\n    var r;\n    do {\n      r = new BigInteger(\n        forge.util.bytesToHex(prng.getBytesSync(byteLength)),\n        16).mod(publicKey.n);\n    } while(r.compareTo(BigInteger.ONE) <= 0);\n\n    // prepend r with zeros\n    r = forge.util.hexToBytes(r.toString(16));\n    var zeros = byteLength - r.length;\n    if(zeros > 0) {\n      r = forge.util.fillString(String.fromCharCode(0), zeros) + r;\n    }\n\n    // encrypt the random\n    var encapsulation = publicKey.encrypt(r, 'NONE');\n\n    // generate the secret key\n    var key = kdf.generate(r, keyLength);\n\n    return {encapsulation: encapsulation, key: key};\n  };\n\n  /**\n   * Decrypts an encapsulated secret key.\n   *\n   * @param privateKey the RSA private key to decrypt with.\n   * @param encapsulation the ciphertext for generating the secret key, as\n   *          a binary-encoded string of bytes.\n   * @param keyLength the length, in bytes, of the secret key to generate.\n   *\n   * @return the secret key as a binary-encoded string of bytes.\n   */\n  kem.decrypt = function(privateKey, encapsulation, keyLength) {\n    // decrypt the encapsulation and generate the secret key\n    var r = privateKey.decrypt(encapsulation, 'NONE');\n    return kdf.generate(r, keyLength);\n  };\n\n  return kem;\n};\n\n// TODO: add forge.kem.kdf.create('KDF1', {md: ..., ...}) API?\n\n/**\n * Creates a key derivation API object that implements KDF1 per ISO 18033-2.\n *\n * @param md the hash API to use.\n * @param [digestLength] an optional digest length that must be positive and\n *          less than or equal to md.digestLength.\n *\n * @return a KDF1 API object.\n */\nforge.kem.kdf1 = function(md, digestLength) {\n  _createKDF(this, md, 0, digestLength || md.digestLength);\n};\n\n/**\n * Creates a key derivation API object that implements KDF2 per ISO 18033-2.\n *\n * @param md the hash API to use.\n * @param [digestLength] an optional digest length that must be positive and\n *          less than or equal to md.digestLength.\n *\n * @return a KDF2 API object.\n */\nforge.kem.kdf2 = function(md, digestLength) {\n  _createKDF(this, md, 1, digestLength || md.digestLength);\n};\n\n/**\n * Creates a KDF1 or KDF2 API object.\n *\n * @param md the hash API to use.\n * @param counterStart the starting index for the counter.\n * @param digestLength the digest length to use.\n *\n * @return the KDF API object.\n */\nfunction _createKDF(kdf, md, counterStart, digestLength) {\n  /**\n   * Generate a key of the specified length.\n   *\n   * @param x the binary-encoded byte string to generate a key from.\n   * @param length the number of bytes to generate (the size of the key).\n   *\n   * @return the key as a binary-encoded string.\n   */\n  kdf.generate = function(x, length) {\n    var key = new forge.util.ByteBuffer();\n\n    // run counter from counterStart to ceil(length / Hash.len)\n    var k = Math.ceil(length / digestLength) + counterStart;\n\n    var c = new forge.util.ByteBuffer();\n    for(var i = counterStart; i < k; ++i) {\n      // I2OSP(i, 4): convert counter to an octet string of 4 octets\n      c.putInt32(i);\n\n      // digest 'x' and the counter and add the result to the key\n      md.start();\n      md.update(x + c.getBytes());\n      var hash = md.digest();\n      key.putBytes(hash.getBytes(digestLength));\n    }\n\n    // truncate to the correct key length\n    key.truncate(key.length() - length);\n    return key.getBytes();\n  };\n}\n","/**\n * Password-based encryption functions.\n *\n * @author Dave Longley\n * @author Stefan Siegl <stesie@brokenpipe.de>\n *\n * Copyright (c) 2010-2013 Digital Bazaar, Inc.\n * Copyright (c) 2012 Stefan Siegl <stesie@brokenpipe.de>\n *\n * An EncryptedPrivateKeyInfo:\n *\n * EncryptedPrivateKeyInfo ::= SEQUENCE {\n *   encryptionAlgorithm  EncryptionAlgorithmIdentifier,\n *   encryptedData        EncryptedData }\n *\n * EncryptionAlgorithmIdentifier ::= AlgorithmIdentifier\n *\n * EncryptedData ::= OCTET STRING\n */\nvar forge = require('./forge');\nrequire('./aes');\nrequire('./asn1');\nrequire('./des');\nrequire('./md');\nrequire('./oids');\nrequire('./pbkdf2');\nrequire('./pem');\nrequire('./random');\nrequire('./rc2');\nrequire('./rsa');\nrequire('./util');\n\nif(typeof BigInteger === 'undefined') {\n  var BigInteger = forge.jsbn.BigInteger;\n}\n\n// shortcut for asn.1 API\nvar asn1 = forge.asn1;\n\n/* Password-based encryption implementation. */\nvar pki = forge.pki = forge.pki || {};\nmodule.exports = pki.pbe = forge.pbe = forge.pbe || {};\nvar oids = pki.oids;\n\n// validator for an EncryptedPrivateKeyInfo structure\n// Note: Currently only works w/algorithm params\nvar encryptedPrivateKeyValidator = {\n  name: 'EncryptedPrivateKeyInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'EncryptedPrivateKeyInfo.encryptionAlgorithm',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'AlgorithmIdentifier.algorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'encryptionOid'\n    }, {\n      name: 'AlgorithmIdentifier.parameters',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      captureAsn1: 'encryptionParams'\n    }]\n  }, {\n    // encryptedData\n    name: 'EncryptedPrivateKeyInfo.encryptedData',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OCTETSTRING,\n    constructed: false,\n    capture: 'encryptedData'\n  }]\n};\n\n// validator for a PBES2Algorithms structure\n// Note: Currently only works w/PBKDF2 + AES encryption schemes\nvar PBES2AlgorithmsValidator = {\n  name: 'PBES2Algorithms',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'PBES2Algorithms.keyDerivationFunc',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'PBES2Algorithms.keyDerivationFunc.oid',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'kdfOid'\n    }, {\n      name: 'PBES2Algorithms.params',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      value: [{\n        name: 'PBES2Algorithms.params.salt',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.OCTETSTRING,\n        constructed: false,\n        capture: 'kdfSalt'\n      }, {\n        name: 'PBES2Algorithms.params.iterationCount',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.INTEGER,\n        constructed: false,\n        capture: 'kdfIterationCount'\n      }, {\n        name: 'PBES2Algorithms.params.keyLength',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.INTEGER,\n        constructed: false,\n        optional: true,\n        capture: 'keyLength'\n      }, {\n        // prf\n        name: 'PBES2Algorithms.params.prf',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.SEQUENCE,\n        constructed: true,\n        optional: true,\n        value: [{\n          name: 'PBES2Algorithms.params.prf.algorithm',\n          tagClass: asn1.Class.UNIVERSAL,\n          type: asn1.Type.OID,\n          constructed: false,\n          capture: 'prfOid'\n        }]\n      }]\n    }]\n  }, {\n    name: 'PBES2Algorithms.encryptionScheme',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'PBES2Algorithms.encryptionScheme.oid',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'encOid'\n    }, {\n      name: 'PBES2Algorithms.encryptionScheme.iv',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OCTETSTRING,\n      constructed: false,\n      capture: 'encIv'\n    }]\n  }]\n};\n\nvar pkcs12PbeParamsValidator = {\n  name: 'pkcs-12PbeParams',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'pkcs-12PbeParams.salt',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OCTETSTRING,\n    constructed: false,\n    capture: 'salt'\n  }, {\n    name: 'pkcs-12PbeParams.iterations',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'iterations'\n  }]\n};\n\n/**\n * Encrypts a ASN.1 PrivateKeyInfo object, producing an EncryptedPrivateKeyInfo.\n *\n * PBES2Algorithms ALGORITHM-IDENTIFIER ::=\n *   { {PBES2-params IDENTIFIED BY id-PBES2}, ...}\n *\n * id-PBES2 OBJECT IDENTIFIER ::= {pkcs-5 13}\n *\n * PBES2-params ::= SEQUENCE {\n *   keyDerivationFunc AlgorithmIdentifier {{PBES2-KDFs}},\n *   encryptionScheme AlgorithmIdentifier {{PBES2-Encs}}\n * }\n *\n * PBES2-KDFs ALGORITHM-IDENTIFIER ::=\n *   { {PBKDF2-params IDENTIFIED BY id-PBKDF2}, ... }\n *\n * PBES2-Encs ALGORITHM-IDENTIFIER ::= { ... }\n *\n * PBKDF2-params ::= SEQUENCE {\n *   salt CHOICE {\n *     specified OCTET STRING,\n *     otherSource AlgorithmIdentifier {{PBKDF2-SaltSources}}\n *   },\n *   iterationCount INTEGER (1..MAX),\n *   keyLength INTEGER (1..MAX) OPTIONAL,\n *   prf AlgorithmIdentifier {{PBKDF2-PRFs}} DEFAULT algid-hmacWithSHA1\n * }\n *\n * @param obj the ASN.1 PrivateKeyInfo object.\n * @param password the password to encrypt with.\n * @param options:\n *          algorithm the encryption algorithm to use\n *            ('aes128', 'aes192', 'aes256', '3des'), defaults to 'aes128'.\n *          count the iteration count to use.\n *          saltSize the salt size to use.\n *          prfAlgorithm the PRF message digest algorithm to use\n *            ('sha1', 'sha224', 'sha256', 'sha384', 'sha512')\n *\n * @return the ASN.1 EncryptedPrivateKeyInfo.\n */\npki.encryptPrivateKeyInfo = function(obj, password, options) {\n  // set default options\n  options = options || {};\n  options.saltSize = options.saltSize || 8;\n  options.count = options.count || 2048;\n  options.algorithm = options.algorithm || 'aes128';\n  options.prfAlgorithm = options.prfAlgorithm || 'sha1';\n\n  // generate PBE params\n  var salt = forge.random.getBytesSync(options.saltSize);\n  var count = options.count;\n  var countBytes = asn1.integerToDer(count);\n  var dkLen;\n  var encryptionAlgorithm;\n  var encryptedData;\n  if(options.algorithm.indexOf('aes') === 0 || options.algorithm === 'des') {\n    // do PBES2\n    var ivLen, encOid, cipherFn;\n    switch(options.algorithm) {\n    case 'aes128':\n      dkLen = 16;\n      ivLen = 16;\n      encOid = oids['aes128-CBC'];\n      cipherFn = forge.aes.createEncryptionCipher;\n      break;\n    case 'aes192':\n      dkLen = 24;\n      ivLen = 16;\n      encOid = oids['aes192-CBC'];\n      cipherFn = forge.aes.createEncryptionCipher;\n      break;\n    case 'aes256':\n      dkLen = 32;\n      ivLen = 16;\n      encOid = oids['aes256-CBC'];\n      cipherFn = forge.aes.createEncryptionCipher;\n      break;\n    case 'des':\n      dkLen = 8;\n      ivLen = 8;\n      encOid = oids['desCBC'];\n      cipherFn = forge.des.createEncryptionCipher;\n      break;\n    default:\n      var error = new Error('Cannot encrypt private key. Unknown encryption algorithm.');\n      error.algorithm = options.algorithm;\n      throw error;\n    }\n\n    // get PRF message digest\n    var prfAlgorithm = 'hmacWith' + options.prfAlgorithm.toUpperCase();\n    var md = prfAlgorithmToMessageDigest(prfAlgorithm);\n\n    // encrypt private key using pbe SHA-1 and AES/DES\n    var dk = forge.pkcs5.pbkdf2(password, salt, count, dkLen, md);\n    var iv = forge.random.getBytesSync(ivLen);\n    var cipher = cipherFn(dk);\n    cipher.start(iv);\n    cipher.update(asn1.toDer(obj));\n    cipher.finish();\n    encryptedData = cipher.output.getBytes();\n\n    // get PBKDF2-params\n    var params = createPbkdf2Params(salt, countBytes, dkLen, prfAlgorithm);\n\n    encryptionAlgorithm = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(oids['pkcs5PBES2']).getBytes()),\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // keyDerivationFunc\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n            asn1.oidToDer(oids['pkcs5PBKDF2']).getBytes()),\n          // PBKDF2-params\n          params\n        ]),\n        // encryptionScheme\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n            asn1.oidToDer(encOid).getBytes()),\n          // iv\n          asn1.create(\n            asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false, iv)\n        ])\n      ])\n    ]);\n  } else if(options.algorithm === '3des') {\n    // Do PKCS12 PBE\n    dkLen = 24;\n\n    var saltBytes = new forge.util.ByteBuffer(salt);\n    var dk = pki.pbe.generatePkcs12Key(password, saltBytes, 1, count, dkLen);\n    var iv = pki.pbe.generatePkcs12Key(password, saltBytes, 2, count, dkLen);\n    var cipher = forge.des.createEncryptionCipher(dk);\n    cipher.start(iv);\n    cipher.update(asn1.toDer(obj));\n    cipher.finish();\n    encryptedData = cipher.output.getBytes();\n\n    encryptionAlgorithm = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(oids['pbeWithSHAAnd3-KeyTripleDES-CBC']).getBytes()),\n      // pkcs-12PbeParams\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // salt\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false, salt),\n        // iteration count\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n          countBytes.getBytes())\n      ])\n    ]);\n  } else {\n    var error = new Error('Cannot encrypt private key. Unknown encryption algorithm.');\n    error.algorithm = options.algorithm;\n    throw error;\n  }\n\n  // EncryptedPrivateKeyInfo\n  var rval = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // encryptionAlgorithm\n    encryptionAlgorithm,\n    // encryptedData\n    asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false, encryptedData)\n  ]);\n  return rval;\n};\n\n/**\n * Decrypts a ASN.1 PrivateKeyInfo object.\n *\n * @param obj the ASN.1 EncryptedPrivateKeyInfo object.\n * @param password the password to decrypt with.\n *\n * @return the ASN.1 PrivateKeyInfo on success, null on failure.\n */\npki.decryptPrivateKeyInfo = function(obj, password) {\n  var rval = null;\n\n  // get PBE params\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(obj, encryptedPrivateKeyValidator, capture, errors)) {\n    var error = new Error('Cannot read encrypted private key. ' +\n      'ASN.1 object is not a supported EncryptedPrivateKeyInfo.');\n    error.errors = errors;\n    throw error;\n  }\n\n  // get cipher\n  var oid = asn1.derToOid(capture.encryptionOid);\n  var cipher = pki.pbe.getCipher(oid, capture.encryptionParams, password);\n\n  // get encrypted data\n  var encrypted = forge.util.createBuffer(capture.encryptedData);\n\n  cipher.update(encrypted);\n  if(cipher.finish()) {\n    rval = asn1.fromDer(cipher.output);\n  }\n\n  return rval;\n};\n\n/**\n * Converts a EncryptedPrivateKeyInfo to PEM format.\n *\n * @param epki the EncryptedPrivateKeyInfo.\n * @param maxline the maximum characters per line, defaults to 64.\n *\n * @return the PEM-formatted encrypted private key.\n */\npki.encryptedPrivateKeyToPem = function(epki, maxline) {\n  // convert to DER, then PEM-encode\n  var msg = {\n    type: 'ENCRYPTED PRIVATE KEY',\n    body: asn1.toDer(epki).getBytes()\n  };\n  return forge.pem.encode(msg, {maxline: maxline});\n};\n\n/**\n * Converts a PEM-encoded EncryptedPrivateKeyInfo to ASN.1 format. Decryption\n * is not performed.\n *\n * @param pem the EncryptedPrivateKeyInfo in PEM-format.\n *\n * @return the ASN.1 EncryptedPrivateKeyInfo.\n */\npki.encryptedPrivateKeyFromPem = function(pem) {\n  var msg = forge.pem.decode(pem)[0];\n\n  if(msg.type !== 'ENCRYPTED PRIVATE KEY') {\n    var error = new Error('Could not convert encrypted private key from PEM; ' +\n      'PEM header type is \"ENCRYPTED PRIVATE KEY\".');\n    error.headerType = msg.type;\n    throw error;\n  }\n  if(msg.procType && msg.procType.type === 'ENCRYPTED') {\n    throw new Error('Could not convert encrypted private key from PEM; ' +\n      'PEM is encrypted.');\n  }\n\n  // convert DER to ASN.1 object\n  return asn1.fromDer(msg.body);\n};\n\n/**\n * Encrypts an RSA private key. By default, the key will be wrapped in\n * a PrivateKeyInfo and encrypted to produce a PKCS#8 EncryptedPrivateKeyInfo.\n * This is the standard, preferred way to encrypt a private key.\n *\n * To produce a non-standard PEM-encrypted private key that uses encapsulated\n * headers to indicate the encryption algorithm (old-style non-PKCS#8 OpenSSL\n * private key encryption), set the 'legacy' option to true. Note: Using this\n * option will cause the iteration count to be forced to 1.\n *\n * Note: The 'des' algorithm is supported, but it is not considered to be\n * secure because it only uses a single 56-bit key. If possible, it is highly\n * recommended that a different algorithm be used.\n *\n * @param rsaKey the RSA key to encrypt.\n * @param password the password to use.\n * @param options:\n *          algorithm: the encryption algorithm to use\n *            ('aes128', 'aes192', 'aes256', '3des', 'des').\n *          count: the iteration count to use.\n *          saltSize: the salt size to use.\n *          legacy: output an old non-PKCS#8 PEM-encrypted+encapsulated\n *            headers (DEK-Info) private key.\n *\n * @return the PEM-encoded ASN.1 EncryptedPrivateKeyInfo.\n */\npki.encryptRsaPrivateKey = function(rsaKey, password, options) {\n  // standard PKCS#8\n  options = options || {};\n  if(!options.legacy) {\n    // encrypt PrivateKeyInfo\n    var rval = pki.wrapRsaPrivateKey(pki.privateKeyToAsn1(rsaKey));\n    rval = pki.encryptPrivateKeyInfo(rval, password, options);\n    return pki.encryptedPrivateKeyToPem(rval);\n  }\n\n  // legacy non-PKCS#8\n  var algorithm;\n  var iv;\n  var dkLen;\n  var cipherFn;\n  switch(options.algorithm) {\n  case 'aes128':\n    algorithm = 'AES-128-CBC';\n    dkLen = 16;\n    iv = forge.random.getBytesSync(16);\n    cipherFn = forge.aes.createEncryptionCipher;\n    break;\n  case 'aes192':\n    algorithm = 'AES-192-CBC';\n    dkLen = 24;\n    iv = forge.random.getBytesSync(16);\n    cipherFn = forge.aes.createEncryptionCipher;\n    break;\n  case 'aes256':\n    algorithm = 'AES-256-CBC';\n    dkLen = 32;\n    iv = forge.random.getBytesSync(16);\n    cipherFn = forge.aes.createEncryptionCipher;\n    break;\n  case '3des':\n    algorithm = 'DES-EDE3-CBC';\n    dkLen = 24;\n    iv = forge.random.getBytesSync(8);\n    cipherFn = forge.des.createEncryptionCipher;\n    break;\n  case 'des':\n    algorithm = 'DES-CBC';\n    dkLen = 8;\n    iv = forge.random.getBytesSync(8);\n    cipherFn = forge.des.createEncryptionCipher;\n    break;\n  default:\n    var error = new Error('Could not encrypt RSA private key; unsupported ' +\n      'encryption algorithm \"' + options.algorithm + '\".');\n    error.algorithm = options.algorithm;\n    throw error;\n  }\n\n  // encrypt private key using OpenSSL legacy key derivation\n  var dk = forge.pbe.opensslDeriveBytes(password, iv.substr(0, 8), dkLen);\n  var cipher = cipherFn(dk);\n  cipher.start(iv);\n  cipher.update(asn1.toDer(pki.privateKeyToAsn1(rsaKey)));\n  cipher.finish();\n\n  var msg = {\n    type: 'RSA PRIVATE KEY',\n    procType: {\n      version: '4',\n      type: 'ENCRYPTED'\n    },\n    dekInfo: {\n      algorithm: algorithm,\n      parameters: forge.util.bytesToHex(iv).toUpperCase()\n    },\n    body: cipher.output.getBytes()\n  };\n  return forge.pem.encode(msg);\n};\n\n/**\n * Decrypts an RSA private key.\n *\n * @param pem the PEM-formatted EncryptedPrivateKeyInfo to decrypt.\n * @param password the password to use.\n *\n * @return the RSA key on success, null on failure.\n */\npki.decryptRsaPrivateKey = function(pem, password) {\n  var rval = null;\n\n  var msg = forge.pem.decode(pem)[0];\n\n  if(msg.type !== 'ENCRYPTED PRIVATE KEY' &&\n    msg.type !== 'PRIVATE KEY' &&\n    msg.type !== 'RSA PRIVATE KEY') {\n    var error = new Error('Could not convert private key from PEM; PEM header type ' +\n      'is not \"ENCRYPTED PRIVATE KEY\", \"PRIVATE KEY\", or \"RSA PRIVATE KEY\".');\n    error.headerType = error;\n    throw error;\n  }\n\n  if(msg.procType && msg.procType.type === 'ENCRYPTED') {\n    var dkLen;\n    var cipherFn;\n    switch(msg.dekInfo.algorithm) {\n    case 'DES-CBC':\n      dkLen = 8;\n      cipherFn = forge.des.createDecryptionCipher;\n      break;\n    case 'DES-EDE3-CBC':\n      dkLen = 24;\n      cipherFn = forge.des.createDecryptionCipher;\n      break;\n    case 'AES-128-CBC':\n      dkLen = 16;\n      cipherFn = forge.aes.createDecryptionCipher;\n      break;\n    case 'AES-192-CBC':\n      dkLen = 24;\n      cipherFn = forge.aes.createDecryptionCipher;\n      break;\n    case 'AES-256-CBC':\n      dkLen = 32;\n      cipherFn = forge.aes.createDecryptionCipher;\n      break;\n    case 'RC2-40-CBC':\n      dkLen = 5;\n      cipherFn = function(key) {\n        return forge.rc2.createDecryptionCipher(key, 40);\n      };\n      break;\n    case 'RC2-64-CBC':\n      dkLen = 8;\n      cipherFn = function(key) {\n        return forge.rc2.createDecryptionCipher(key, 64);\n      };\n      break;\n    case 'RC2-128-CBC':\n      dkLen = 16;\n      cipherFn = function(key) {\n        return forge.rc2.createDecryptionCipher(key, 128);\n      };\n      break;\n    default:\n      var error = new Error('Could not decrypt private key; unsupported ' +\n        'encryption algorithm \"' + msg.dekInfo.algorithm + '\".');\n      error.algorithm = msg.dekInfo.algorithm;\n      throw error;\n    }\n\n    // use OpenSSL legacy key derivation\n    var iv = forge.util.hexToBytes(msg.dekInfo.parameters);\n    var dk = forge.pbe.opensslDeriveBytes(password, iv.substr(0, 8), dkLen);\n    var cipher = cipherFn(dk);\n    cipher.start(iv);\n    cipher.update(forge.util.createBuffer(msg.body));\n    if(cipher.finish()) {\n      rval = cipher.output.getBytes();\n    } else {\n      return rval;\n    }\n  } else {\n    rval = msg.body;\n  }\n\n  if(msg.type === 'ENCRYPTED PRIVATE KEY') {\n    rval = pki.decryptPrivateKeyInfo(asn1.fromDer(rval), password);\n  } else {\n    // decryption already performed above\n    rval = asn1.fromDer(rval);\n  }\n\n  if(rval !== null) {\n    rval = pki.privateKeyFromAsn1(rval);\n  }\n\n  return rval;\n};\n\n/**\n * Derives a PKCS#12 key.\n *\n * @param password the password to derive the key material from, null or\n *          undefined for none.\n * @param salt the salt, as a ByteBuffer, to use.\n * @param id the PKCS#12 ID byte (1 = key material, 2 = IV, 3 = MAC).\n * @param iter the iteration count.\n * @param n the number of bytes to derive from the password.\n * @param md the message digest to use, defaults to SHA-1.\n *\n * @return a ByteBuffer with the bytes derived from the password.\n */\npki.pbe.generatePkcs12Key = function(password, salt, id, iter, n, md) {\n  var j, l;\n\n  if(typeof md === 'undefined' || md === null) {\n    if(!('sha1' in forge.md)) {\n      throw new Error('\"sha1\" hash algorithm unavailable.');\n    }\n    md = forge.md.sha1.create();\n  }\n\n  var u = md.digestLength;\n  var v = md.blockLength;\n  var result = new forge.util.ByteBuffer();\n\n  /* Convert password to Unicode byte buffer + trailing 0-byte. */\n  var passBuf = new forge.util.ByteBuffer();\n  if(password !== null && password !== undefined) {\n    for(l = 0; l < password.length; l++) {\n      passBuf.putInt16(password.charCodeAt(l));\n    }\n    passBuf.putInt16(0);\n  }\n\n  /* Length of salt and password in BYTES. */\n  var p = passBuf.length();\n  var s = salt.length();\n\n  /* 1. Construct a string, D (the \"diversifier\"), by concatenating\n        v copies of ID. */\n  var D = new forge.util.ByteBuffer();\n  D.fillWithByte(id, v);\n\n  /* 2. Concatenate copies of the salt together to create a string S of length\n        v * ceil(s / v) bytes (the final copy of the salt may be trunacted\n        to create S).\n        Note that if the salt is the empty string, then so is S. */\n  var Slen = v * Math.ceil(s / v);\n  var S = new forge.util.ByteBuffer();\n  for(l = 0; l < Slen; l++) {\n    S.putByte(salt.at(l % s));\n  }\n\n  /* 3. Concatenate copies of the password together to create a string P of\n        length v * ceil(p / v) bytes (the final copy of the password may be\n        truncated to create P).\n        Note that if the password is the empty string, then so is P. */\n  var Plen = v * Math.ceil(p / v);\n  var P = new forge.util.ByteBuffer();\n  for(l = 0; l < Plen; l++) {\n    P.putByte(passBuf.at(l % p));\n  }\n\n  /* 4. Set I=S||P to be the concatenation of S and P. */\n  var I = S;\n  I.putBuffer(P);\n\n  /* 5. Set c=ceil(n / u). */\n  var c = Math.ceil(n / u);\n\n  /* 6. For i=1, 2, ..., c, do the following: */\n  for(var i = 1; i <= c; i++) {\n    /* a) Set Ai=H^r(D||I). (l.e. the rth hash of D||I, H(H(H(...H(D||I)))) */\n    var buf = new forge.util.ByteBuffer();\n    buf.putBytes(D.bytes());\n    buf.putBytes(I.bytes());\n    for(var round = 0; round < iter; round++) {\n      md.start();\n      md.update(buf.getBytes());\n      buf = md.digest();\n    }\n\n    /* b) Concatenate copies of Ai to create a string B of length v bytes (the\n          final copy of Ai may be truncated to create B). */\n    var B = new forge.util.ByteBuffer();\n    for(l = 0; l < v; l++) {\n      B.putByte(buf.at(l % u));\n    }\n\n    /* c) Treating I as a concatenation I0, I1, ..., Ik-1 of v-byte blocks,\n          where k=ceil(s / v) + ceil(p / v), modify I by setting\n          Ij=(Ij+B+1) mod 2v for each j.  */\n    var k = Math.ceil(s / v) + Math.ceil(p / v);\n    var Inew = new forge.util.ByteBuffer();\n    for(j = 0; j < k; j++) {\n      var chunk = new forge.util.ByteBuffer(I.getBytes(v));\n      var x = 0x1ff;\n      for(l = B.length() - 1; l >= 0; l--) {\n        x = x >> 8;\n        x += B.at(l) + chunk.at(l);\n        chunk.setAt(l, x & 0xff);\n      }\n      Inew.putBuffer(chunk);\n    }\n    I = Inew;\n\n    /* Add Ai to A. */\n    result.putBuffer(buf);\n  }\n\n  result.truncate(result.length() - n);\n  return result;\n};\n\n/**\n * Get new Forge cipher object instance.\n *\n * @param oid the OID (in string notation).\n * @param params the ASN.1 params object.\n * @param password the password to decrypt with.\n *\n * @return new cipher object instance.\n */\npki.pbe.getCipher = function(oid, params, password) {\n  switch(oid) {\n  case pki.oids['pkcs5PBES2']:\n    return pki.pbe.getCipherForPBES2(oid, params, password);\n\n  case pki.oids['pbeWithSHAAnd3-KeyTripleDES-CBC']:\n  case pki.oids['pbewithSHAAnd40BitRC2-CBC']:\n    return pki.pbe.getCipherForPKCS12PBE(oid, params, password);\n\n  default:\n    var error = new Error('Cannot read encrypted PBE data block. Unsupported OID.');\n    error.oid = oid;\n    error.supportedOids = [\n      'pkcs5PBES2',\n      'pbeWithSHAAnd3-KeyTripleDES-CBC',\n      'pbewithSHAAnd40BitRC2-CBC'\n    ];\n    throw error;\n  }\n};\n\n/**\n * Get new Forge cipher object instance according to PBES2 params block.\n *\n * The returned cipher instance is already started using the IV\n * from PBES2 parameter block.\n *\n * @param oid the PKCS#5 PBKDF2 OID (in string notation).\n * @param params the ASN.1 PBES2-params object.\n * @param password the password to decrypt with.\n *\n * @return new cipher object instance.\n */\npki.pbe.getCipherForPBES2 = function(oid, params, password) {\n  // get PBE params\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(params, PBES2AlgorithmsValidator, capture, errors)) {\n    var error = new Error('Cannot read password-based-encryption algorithm ' +\n      'parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');\n    error.errors = errors;\n    throw error;\n  }\n\n  // check oids\n  oid = asn1.derToOid(capture.kdfOid);\n  if(oid !== pki.oids['pkcs5PBKDF2']) {\n    var error = new Error('Cannot read encrypted private key. ' +\n      'Unsupported key derivation function OID.');\n    error.oid = oid;\n    error.supportedOids = ['pkcs5PBKDF2'];\n    throw error;\n  }\n  oid = asn1.derToOid(capture.encOid);\n  if(oid !== pki.oids['aes128-CBC'] &&\n    oid !== pki.oids['aes192-CBC'] &&\n    oid !== pki.oids['aes256-CBC'] &&\n    oid !== pki.oids['des-EDE3-CBC'] &&\n    oid !== pki.oids['desCBC']) {\n    var error = new Error('Cannot read encrypted private key. ' +\n      'Unsupported encryption scheme OID.');\n    error.oid = oid;\n    error.supportedOids = [\n      'aes128-CBC', 'aes192-CBC', 'aes256-CBC', 'des-EDE3-CBC', 'desCBC'];\n    throw error;\n  }\n\n  // set PBE params\n  var salt = capture.kdfSalt;\n  var count = forge.util.createBuffer(capture.kdfIterationCount);\n  count = count.getInt(count.length() << 3);\n  var dkLen;\n  var cipherFn;\n  switch(pki.oids[oid]) {\n  case 'aes128-CBC':\n    dkLen = 16;\n    cipherFn = forge.aes.createDecryptionCipher;\n    break;\n  case 'aes192-CBC':\n    dkLen = 24;\n    cipherFn = forge.aes.createDecryptionCipher;\n    break;\n  case 'aes256-CBC':\n    dkLen = 32;\n    cipherFn = forge.aes.createDecryptionCipher;\n    break;\n  case 'des-EDE3-CBC':\n    dkLen = 24;\n    cipherFn = forge.des.createDecryptionCipher;\n    break;\n  case 'desCBC':\n    dkLen = 8;\n    cipherFn = forge.des.createDecryptionCipher;\n    break;\n  }\n\n  // get PRF message digest\n  var md = prfOidToMessageDigest(capture.prfOid);\n\n  // decrypt private key using pbe with chosen PRF and AES/DES\n  var dk = forge.pkcs5.pbkdf2(password, salt, count, dkLen, md);\n  var iv = capture.encIv;\n  var cipher = cipherFn(dk);\n  cipher.start(iv);\n\n  return cipher;\n};\n\n/**\n * Get new Forge cipher object instance for PKCS#12 PBE.\n *\n * The returned cipher instance is already started using the key & IV\n * derived from the provided password and PKCS#12 PBE salt.\n *\n * @param oid The PKCS#12 PBE OID (in string notation).\n * @param params The ASN.1 PKCS#12 PBE-params object.\n * @param password The password to decrypt with.\n *\n * @return the new cipher object instance.\n */\npki.pbe.getCipherForPKCS12PBE = function(oid, params, password) {\n  // get PBE params\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(params, pkcs12PbeParamsValidator, capture, errors)) {\n    var error = new Error('Cannot read password-based-encryption algorithm ' +\n      'parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');\n    error.errors = errors;\n    throw error;\n  }\n\n  var salt = forge.util.createBuffer(capture.salt);\n  var count = forge.util.createBuffer(capture.iterations);\n  count = count.getInt(count.length() << 3);\n\n  var dkLen, dIvLen, cipherFn;\n  switch(oid) {\n    case pki.oids['pbeWithSHAAnd3-KeyTripleDES-CBC']:\n      dkLen = 24;\n      dIvLen = 8;\n      cipherFn = forge.des.startDecrypting;\n      break;\n\n    case pki.oids['pbewithSHAAnd40BitRC2-CBC']:\n      dkLen = 5;\n      dIvLen = 8;\n      cipherFn = function(key, iv) {\n        var cipher = forge.rc2.createDecryptionCipher(key, 40);\n        cipher.start(iv, null);\n        return cipher;\n      };\n      break;\n\n    default:\n      var error = new Error('Cannot read PKCS #12 PBE data block. Unsupported OID.');\n      error.oid = oid;\n      throw error;\n  }\n\n  // get PRF message digest\n  var md = prfOidToMessageDigest(capture.prfOid);\n  var key = pki.pbe.generatePkcs12Key(password, salt, 1, count, dkLen, md);\n  md.start();\n  var iv = pki.pbe.generatePkcs12Key(password, salt, 2, count, dIvLen, md);\n\n  return cipherFn(key, iv);\n};\n\n/**\n * OpenSSL's legacy key derivation function.\n *\n * See: http://www.openssl.org/docs/crypto/EVP_BytesToKey.html\n *\n * @param password the password to derive the key from.\n * @param salt the salt to use, null for none.\n * @param dkLen the number of bytes needed for the derived key.\n * @param [options] the options to use:\n *          [md] an optional message digest object to use.\n */\npki.pbe.opensslDeriveBytes = function(password, salt, dkLen, md) {\n  if(typeof md === 'undefined' || md === null) {\n    if(!('md5' in forge.md)) {\n      throw new Error('\"md5\" hash algorithm unavailable.');\n    }\n    md = forge.md.md5.create();\n  }\n  if(salt === null) {\n    salt = '';\n  }\n  var digests = [hash(md, password + salt)];\n  for(var length = 16, i = 1; length < dkLen; ++i, length += 16) {\n    digests.push(hash(md, digests[i - 1] + password + salt));\n  }\n  return digests.join('').substr(0, dkLen);\n};\n\nfunction hash(md, bytes) {\n  return md.start().update(bytes).digest().getBytes();\n}\n\nfunction prfOidToMessageDigest(prfOid) {\n  // get PRF algorithm, default to SHA-1\n  var prfAlgorithm;\n  if(!prfOid) {\n    prfAlgorithm = 'hmacWithSHA1';\n  } else {\n    prfAlgorithm = pki.oids[asn1.derToOid(prfOid)];\n    if(!prfAlgorithm) {\n      var error = new Error('Unsupported PRF OID.');\n      error.oid = prfOid;\n      error.supported = [\n        'hmacWithSHA1', 'hmacWithSHA224', 'hmacWithSHA256', 'hmacWithSHA384',\n        'hmacWithSHA512'];\n      throw error;\n    }\n  }\n  return prfAlgorithmToMessageDigest(prfAlgorithm);\n}\n\nfunction prfAlgorithmToMessageDigest(prfAlgorithm) {\n  var factory = forge.md;\n  switch(prfAlgorithm) {\n  case 'hmacWithSHA224':\n    factory = forge.md.sha512;\n  case 'hmacWithSHA1':\n  case 'hmacWithSHA256':\n  case 'hmacWithSHA384':\n  case 'hmacWithSHA512':\n    prfAlgorithm = prfAlgorithm.substr(8).toLowerCase();\n    break;\n  default:\n    var error = new Error('Unsupported PRF algorithm.');\n    error.algorithm = prfAlgorithm;\n    error.supported = [\n      'hmacWithSHA1', 'hmacWithSHA224', 'hmacWithSHA256', 'hmacWithSHA384',\n      'hmacWithSHA512'];\n    throw error;\n  }\n  if(!factory || !(prfAlgorithm in factory)) {\n    throw new Error('Unknown hash algorithm: ' + prfAlgorithm);\n  }\n  return factory[prfAlgorithm].create();\n}\n\nfunction createPbkdf2Params(salt, countBytes, dkLen, prfAlgorithm) {\n  var params = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // salt\n    asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false, salt),\n    // iteration count\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      countBytes.getBytes())\n  ]);\n  // when PRF algorithm is not SHA-1 default, add key length and PRF algorithm\n  if(prfAlgorithm !== 'hmacWithSHA1') {\n    params.value.push(\n      // key length\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n        forge.util.hexToBytes(dkLen.toString(16))),\n      // AlgorithmIdentifier\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // algorithm\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          asn1.oidToDer(pki.oids[prfAlgorithm]).getBytes()),\n        // parameters (null)\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n      ]));\n  }\n  return params;\n}\n","/**\n * Javascript implementation of PKCS#12.\n *\n * @author Dave Longley\n * @author Stefan Siegl <stesie@brokenpipe.de>\n *\n * Copyright (c) 2010-2014 Digital Bazaar, Inc.\n * Copyright (c) 2012 Stefan Siegl <stesie@brokenpipe.de>\n *\n * The ASN.1 representation of PKCS#12 is as follows\n * (see ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-12/pkcs-12-tc1.pdf for details)\n *\n * PFX ::= SEQUENCE {\n *   version  INTEGER {v3(3)}(v3,...),\n *   authSafe ContentInfo,\n *   macData  MacData OPTIONAL\n * }\n *\n * MacData ::= SEQUENCE {\n *   mac DigestInfo,\n *   macSalt OCTET STRING,\n *   iterations INTEGER DEFAULT 1\n * }\n * Note: The iterations default is for historical reasons and its use is\n * deprecated. A higher value, like 1024, is recommended.\n *\n * DigestInfo is defined in PKCS#7 as follows:\n *\n * DigestInfo ::= SEQUENCE {\n *   digestAlgorithm DigestAlgorithmIdentifier,\n *   digest Digest\n * }\n *\n * DigestAlgorithmIdentifier ::= AlgorithmIdentifier\n *\n * The AlgorithmIdentifier contains an Object Identifier (OID) and parameters\n * for the algorithm, if any. In the case of SHA1 there is none.\n *\n * AlgorithmIdentifer ::= SEQUENCE {\n *    algorithm OBJECT IDENTIFIER,\n *    parameters ANY DEFINED BY algorithm OPTIONAL\n * }\n *\n * Digest ::= OCTET STRING\n *\n *\n * ContentInfo ::= SEQUENCE {\n *   contentType ContentType,\n *   content     [0] EXPLICIT ANY DEFINED BY contentType OPTIONAL\n * }\n *\n * ContentType ::= OBJECT IDENTIFIER\n *\n * AuthenticatedSafe ::= SEQUENCE OF ContentInfo\n * -- Data if unencrypted\n * -- EncryptedData if password-encrypted\n * -- EnvelopedData if public key-encrypted\n *\n *\n * SafeContents ::= SEQUENCE OF SafeBag\n *\n * SafeBag ::= SEQUENCE {\n *   bagId     BAG-TYPE.&id ({PKCS12BagSet})\n *   bagValue  [0] EXPLICIT BAG-TYPE.&Type({PKCS12BagSet}{@bagId}),\n *   bagAttributes SET OF PKCS12Attribute OPTIONAL\n * }\n *\n * PKCS12Attribute ::= SEQUENCE {\n *   attrId ATTRIBUTE.&id ({PKCS12AttrSet}),\n *   attrValues SET OF ATTRIBUTE.&Type ({PKCS12AttrSet}{@attrId})\n * } -- This type is compatible with the X.500 type 'Attribute'\n *\n * PKCS12AttrSet ATTRIBUTE ::= {\n *   friendlyName | -- from PKCS #9\n *   localKeyId, -- from PKCS #9\n *   ... -- Other attributes are allowed\n * }\n *\n * CertBag ::= SEQUENCE {\n *   certId    BAG-TYPE.&id   ({CertTypes}),\n *   certValue [0] EXPLICIT BAG-TYPE.&Type ({CertTypes}{@certId})\n * }\n *\n * x509Certificate BAG-TYPE ::= {OCTET STRING IDENTIFIED BY {certTypes 1}}\n *   -- DER-encoded X.509 certificate stored in OCTET STRING\n *\n * sdsiCertificate BAG-TYPE ::= {IA5String IDENTIFIED BY {certTypes 2}}\n * -- Base64-encoded SDSI certificate stored in IA5String\n *\n * CertTypes BAG-TYPE ::= {\n *   x509Certificate |\n *   sdsiCertificate,\n *   ... -- For future extensions\n * }\n */\nvar forge = require('./forge');\nrequire('./asn1');\nrequire('./hmac');\nrequire('./oids');\nrequire('./pkcs7asn1');\nrequire('./pbe');\nrequire('./random');\nrequire('./rsa');\nrequire('./sha1');\nrequire('./util');\nrequire('./x509');\n\n// shortcut for asn.1 & PKI API\nvar asn1 = forge.asn1;\nvar pki = forge.pki;\n\n// shortcut for PKCS#12 API\nvar p12 = module.exports = forge.pkcs12 = forge.pkcs12 || {};\n\nvar contentInfoValidator = {\n  name: 'ContentInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,  // a ContentInfo\n  constructed: true,\n  value: [{\n    name: 'ContentInfo.contentType',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OID,\n    constructed: false,\n    capture: 'contentType'\n  }, {\n    name: 'ContentInfo.content',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    constructed: true,\n    captureAsn1: 'content'\n  }]\n};\n\nvar pfxValidator = {\n  name: 'PFX',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'PFX.version',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'version'\n  },\n  contentInfoValidator, {\n    name: 'PFX.macData',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    optional: true,\n    captureAsn1: 'mac',\n    value: [{\n      name: 'PFX.macData.mac',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,  // DigestInfo\n      constructed: true,\n      value: [{\n        name: 'PFX.macData.mac.digestAlgorithm',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.SEQUENCE,  // DigestAlgorithmIdentifier\n        constructed: true,\n        value: [{\n          name: 'PFX.macData.mac.digestAlgorithm.algorithm',\n          tagClass: asn1.Class.UNIVERSAL,\n          type: asn1.Type.OID,\n          constructed: false,\n          capture: 'macAlgorithm'\n        }, {\n          name: 'PFX.macData.mac.digestAlgorithm.parameters',\n          tagClass: asn1.Class.UNIVERSAL,\n          captureAsn1: 'macAlgorithmParameters'\n        }]\n      }, {\n        name: 'PFX.macData.mac.digest',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.OCTETSTRING,\n        constructed: false,\n        capture: 'macDigest'\n      }]\n    }, {\n      name: 'PFX.macData.macSalt',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OCTETSTRING,\n      constructed: false,\n      capture: 'macSalt'\n    }, {\n      name: 'PFX.macData.iterations',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.INTEGER,\n      constructed: false,\n      optional: true,\n      capture: 'macIterations'\n    }]\n  }]\n};\n\nvar safeBagValidator = {\n  name: 'SafeBag',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'SafeBag.bagId',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OID,\n    constructed: false,\n    capture: 'bagId'\n  }, {\n    name: 'SafeBag.bagValue',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    constructed: true,\n    captureAsn1: 'bagValue'\n  }, {\n    name: 'SafeBag.bagAttributes',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SET,\n    constructed: true,\n    optional: true,\n    capture: 'bagAttributes'\n  }]\n};\n\nvar attributeValidator = {\n  name: 'Attribute',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'Attribute.attrId',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OID,\n    constructed: false,\n    capture: 'oid'\n  }, {\n    name: 'Attribute.attrValues',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SET,\n    constructed: true,\n    capture: 'values'\n  }]\n};\n\nvar certBagValidator = {\n  name: 'CertBag',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'CertBag.certId',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OID,\n    constructed: false,\n    capture: 'certId'\n  }, {\n    name: 'CertBag.certValue',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    constructed: true,\n    /* So far we only support X.509 certificates (which are wrapped in\n       an OCTET STRING, hence hard code that here). */\n    value: [{\n      name: 'CertBag.certValue[0]',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Class.OCTETSTRING,\n      constructed: false,\n      capture: 'cert'\n    }]\n  }]\n};\n\n/**\n * Search SafeContents structure for bags with matching attributes.\n *\n * The search can optionally be narrowed by a certain bag type.\n *\n * @param safeContents the SafeContents structure to search in.\n * @param attrName the name of the attribute to compare against.\n * @param attrValue the attribute value to search for.\n * @param [bagType] bag type to narrow search by.\n *\n * @return an array of matching bags.\n */\nfunction _getBagsByAttribute(safeContents, attrName, attrValue, bagType) {\n  var result = [];\n\n  for(var i = 0; i < safeContents.length; i++) {\n    for(var j = 0; j < safeContents[i].safeBags.length; j++) {\n      var bag = safeContents[i].safeBags[j];\n      if(bagType !== undefined && bag.type !== bagType) {\n        continue;\n      }\n      // only filter by bag type, no attribute specified\n      if(attrName === null) {\n        result.push(bag);\n        continue;\n      }\n      if(bag.attributes[attrName] !== undefined &&\n        bag.attributes[attrName].indexOf(attrValue) >= 0) {\n        result.push(bag);\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * Converts a PKCS#12 PFX in ASN.1 notation into a PFX object.\n *\n * @param obj The PKCS#12 PFX in ASN.1 notation.\n * @param strict true to use strict DER decoding, false not to (default: true).\n * @param {String} password Password to decrypt with (optional).\n *\n * @return PKCS#12 PFX object.\n */\np12.pkcs12FromAsn1 = function(obj, strict, password) {\n  // handle args\n  if(typeof strict === 'string') {\n    password = strict;\n    strict = true;\n  } else if(strict === undefined) {\n    strict = true;\n  }\n\n  // validate PFX and capture data\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(obj, pfxValidator, capture, errors)) {\n    var error = new Error('Cannot read PKCS#12 PFX. ' +\n      'ASN.1 object is not an PKCS#12 PFX.');\n    error.errors = error;\n    throw error;\n  }\n\n  var pfx = {\n    version: capture.version.charCodeAt(0),\n    safeContents: [],\n\n    /**\n     * Gets bags with matching attributes.\n     *\n     * @param filter the attributes to filter by:\n     *          [localKeyId] the localKeyId to search for.\n     *          [localKeyIdHex] the localKeyId in hex to search for.\n     *          [friendlyName] the friendly name to search for.\n     *          [bagType] bag type to narrow each attribute search by.\n     *\n     * @return a map of attribute type to an array of matching bags or, if no\n     *           attribute was given but a bag type, the map key will be the\n     *           bag type.\n     */\n    getBags: function(filter) {\n      var rval = {};\n\n      var localKeyId;\n      if('localKeyId' in filter) {\n        localKeyId = filter.localKeyId;\n      } else if('localKeyIdHex' in filter) {\n        localKeyId = forge.util.hexToBytes(filter.localKeyIdHex);\n      }\n\n      // filter on bagType only\n      if(localKeyId === undefined && !('friendlyName' in filter) &&\n        'bagType' in filter) {\n        rval[filter.bagType] = _getBagsByAttribute(\n          pfx.safeContents, null, null, filter.bagType);\n      }\n\n      if(localKeyId !== undefined) {\n        rval.localKeyId = _getBagsByAttribute(\n          pfx.safeContents, 'localKeyId',\n          localKeyId, filter.bagType);\n      }\n      if('friendlyName' in filter) {\n        rval.friendlyName = _getBagsByAttribute(\n          pfx.safeContents, 'friendlyName',\n          filter.friendlyName, filter.bagType);\n      }\n\n      return rval;\n    },\n\n    /**\n     * DEPRECATED: use getBags() instead.\n     *\n     * Get bags with matching friendlyName attribute.\n     *\n     * @param friendlyName the friendly name to search for.\n     * @param [bagType] bag type to narrow search by.\n     *\n     * @return an array of bags with matching friendlyName attribute.\n     */\n    getBagsByFriendlyName: function(friendlyName, bagType) {\n      return _getBagsByAttribute(\n        pfx.safeContents, 'friendlyName', friendlyName, bagType);\n    },\n\n    /**\n     * DEPRECATED: use getBags() instead.\n     *\n     * Get bags with matching localKeyId attribute.\n     *\n     * @param localKeyId the localKeyId to search for.\n     * @param [bagType] bag type to narrow search by.\n     *\n     * @return an array of bags with matching localKeyId attribute.\n     */\n    getBagsByLocalKeyId: function(localKeyId, bagType) {\n      return _getBagsByAttribute(\n        pfx.safeContents, 'localKeyId', localKeyId, bagType);\n    }\n  };\n\n  if(capture.version.charCodeAt(0) !== 3) {\n    var error = new Error('PKCS#12 PFX of version other than 3 not supported.');\n    error.version = capture.version.charCodeAt(0);\n    throw error;\n  }\n\n  if(asn1.derToOid(capture.contentType) !== pki.oids.data) {\n    var error = new Error('Only PKCS#12 PFX in password integrity mode supported.');\n    error.oid = asn1.derToOid(capture.contentType);\n    throw error;\n  }\n\n  var data = capture.content.value[0];\n  if(data.tagClass !== asn1.Class.UNIVERSAL ||\n     data.type !== asn1.Type.OCTETSTRING) {\n    throw new Error('PKCS#12 authSafe content data is not an OCTET STRING.');\n  }\n  data = _decodePkcs7Data(data);\n\n  // check for MAC\n  if(capture.mac) {\n    var md = null;\n    var macKeyBytes = 0;\n    var macAlgorithm = asn1.derToOid(capture.macAlgorithm);\n    switch(macAlgorithm) {\n    case pki.oids.sha1:\n      md = forge.md.sha1.create();\n      macKeyBytes = 20;\n      break;\n    case pki.oids.sha256:\n      md = forge.md.sha256.create();\n      macKeyBytes = 32;\n      break;\n    case pki.oids.sha384:\n      md = forge.md.sha384.create();\n      macKeyBytes = 48;\n      break;\n    case pki.oids.sha512:\n      md = forge.md.sha512.create();\n      macKeyBytes = 64;\n      break;\n    case pki.oids.md5:\n      md = forge.md.md5.create();\n      macKeyBytes = 16;\n      break;\n    }\n    if(md === null) {\n      throw new Error('PKCS#12 uses unsupported MAC algorithm: ' + macAlgorithm);\n    }\n\n    // verify MAC (iterations default to 1)\n    var macSalt = new forge.util.ByteBuffer(capture.macSalt);\n    var macIterations = (('macIterations' in capture) ?\n      parseInt(forge.util.bytesToHex(capture.macIterations), 16) : 1);\n    var macKey = p12.generateKey(\n      password, macSalt, 3, macIterations, macKeyBytes, md);\n    var mac = forge.hmac.create();\n    mac.start(md, macKey);\n    mac.update(data.value);\n    var macValue = mac.getMac();\n    if(macValue.getBytes() !== capture.macDigest) {\n      throw new Error('PKCS#12 MAC could not be verified. Invalid password?');\n    }\n  }\n\n  _decodeAuthenticatedSafe(pfx, data.value, strict, password);\n  return pfx;\n};\n\n/**\n * Decodes PKCS#7 Data. PKCS#7 (RFC 2315) defines \"Data\" as an OCTET STRING,\n * but it is sometimes an OCTET STRING that is composed/constructed of chunks,\n * each its own OCTET STRING. This is BER-encoding vs. DER-encoding. This\n * function transforms this corner-case into the usual simple,\n * non-composed/constructed OCTET STRING.\n *\n * This function may be moved to ASN.1 at some point to better deal with\n * more BER-encoding issues, should they arise.\n *\n * @param data the ASN.1 Data object to transform.\n */\nfunction _decodePkcs7Data(data) {\n  // handle special case of \"chunked\" data content: an octet string composed\n  // of other octet strings\n  if(data.composed || data.constructed) {\n    var value = forge.util.createBuffer();\n    for(var i = 0; i < data.value.length; ++i) {\n      value.putBytes(data.value[i].value);\n    }\n    data.composed = data.constructed = false;\n    data.value = value.getBytes();\n  }\n  return data;\n}\n\n/**\n * Decode PKCS#12 AuthenticatedSafe (BER encoded) into PFX object.\n *\n * The AuthenticatedSafe is a BER-encoded SEQUENCE OF ContentInfo.\n *\n * @param pfx The PKCS#12 PFX object to fill.\n * @param {String} authSafe BER-encoded AuthenticatedSafe.\n * @param strict true to use strict DER decoding, false not to.\n * @param {String} password Password to decrypt with (optional).\n */\nfunction _decodeAuthenticatedSafe(pfx, authSafe, strict, password) {\n  authSafe = asn1.fromDer(authSafe, strict);  /* actually it's BER encoded */\n\n  if(authSafe.tagClass !== asn1.Class.UNIVERSAL ||\n     authSafe.type !== asn1.Type.SEQUENCE ||\n     authSafe.constructed !== true) {\n    throw new Error('PKCS#12 AuthenticatedSafe expected to be a ' +\n      'SEQUENCE OF ContentInfo');\n  }\n\n  for(var i = 0; i < authSafe.value.length; i++) {\n    var contentInfo = authSafe.value[i];\n\n    // validate contentInfo and capture data\n    var capture = {};\n    var errors = [];\n    if(!asn1.validate(contentInfo, contentInfoValidator, capture, errors)) {\n      var error = new Error('Cannot read ContentInfo.');\n      error.errors = errors;\n      throw error;\n    }\n\n    var obj = {\n      encrypted: false\n    };\n    var safeContents = null;\n    var data = capture.content.value[0];\n    switch(asn1.derToOid(capture.contentType)) {\n    case pki.oids.data:\n      if(data.tagClass !== asn1.Class.UNIVERSAL ||\n         data.type !== asn1.Type.OCTETSTRING) {\n        throw new Error('PKCS#12 SafeContents Data is not an OCTET STRING.');\n      }\n      safeContents = _decodePkcs7Data(data).value;\n      break;\n    case pki.oids.encryptedData:\n      safeContents = _decryptSafeContents(data, password);\n      obj.encrypted = true;\n      break;\n    default:\n      var error = new Error('Unsupported PKCS#12 contentType.');\n      error.contentType = asn1.derToOid(capture.contentType);\n      throw error;\n    }\n\n    obj.safeBags = _decodeSafeContents(safeContents, strict, password);\n    pfx.safeContents.push(obj);\n  }\n}\n\n/**\n * Decrypt PKCS#7 EncryptedData structure.\n *\n * @param data ASN.1 encoded EncryptedContentInfo object.\n * @param password The user-provided password.\n *\n * @return The decrypted SafeContents (ASN.1 object).\n */\nfunction _decryptSafeContents(data, password) {\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(\n    data, forge.pkcs7.asn1.encryptedDataValidator, capture, errors)) {\n    var error = new Error('Cannot read EncryptedContentInfo.');\n    error.errors = errors;\n    throw error;\n  }\n\n  var oid = asn1.derToOid(capture.contentType);\n  if(oid !== pki.oids.data) {\n    var error = new Error(\n      'PKCS#12 EncryptedContentInfo ContentType is not Data.');\n    error.oid = oid;\n    throw error;\n  }\n\n  // get cipher\n  oid = asn1.derToOid(capture.encAlgorithm);\n  var cipher = pki.pbe.getCipher(oid, capture.encParameter, password);\n\n  // get encrypted data\n  var encryptedContentAsn1 = _decodePkcs7Data(capture.encryptedContentAsn1);\n  var encrypted = forge.util.createBuffer(encryptedContentAsn1.value);\n\n  cipher.update(encrypted);\n  if(!cipher.finish()) {\n    throw new Error('Failed to decrypt PKCS#12 SafeContents.');\n  }\n\n  return cipher.output.getBytes();\n}\n\n/**\n * Decode PKCS#12 SafeContents (BER-encoded) into array of Bag objects.\n *\n * The safeContents is a BER-encoded SEQUENCE OF SafeBag.\n *\n * @param {String} safeContents BER-encoded safeContents.\n * @param strict true to use strict DER decoding, false not to.\n * @param {String} password Password to decrypt with (optional).\n *\n * @return {Array} Array of Bag objects.\n */\nfunction _decodeSafeContents(safeContents, strict, password) {\n  // if strict and no safe contents, return empty safes\n  if(!strict && safeContents.length === 0) {\n    return [];\n  }\n\n  // actually it's BER-encoded\n  safeContents = asn1.fromDer(safeContents, strict);\n\n  if(safeContents.tagClass !== asn1.Class.UNIVERSAL ||\n    safeContents.type !== asn1.Type.SEQUENCE ||\n    safeContents.constructed !== true) {\n    throw new Error(\n      'PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.');\n  }\n\n  var res = [];\n  for(var i = 0; i < safeContents.value.length; i++) {\n    var safeBag = safeContents.value[i];\n\n    // validate SafeBag and capture data\n    var capture = {};\n    var errors = [];\n    if(!asn1.validate(safeBag, safeBagValidator, capture, errors)) {\n      var error = new Error('Cannot read SafeBag.');\n      error.errors = errors;\n      throw error;\n    }\n\n    /* Create bag object and push to result array. */\n    var bag = {\n      type: asn1.derToOid(capture.bagId),\n      attributes: _decodeBagAttributes(capture.bagAttributes)\n    };\n    res.push(bag);\n\n    var validator, decoder;\n    var bagAsn1 = capture.bagValue.value[0];\n    switch(bag.type) {\n      case pki.oids.pkcs8ShroudedKeyBag:\n        /* bagAsn1 has a EncryptedPrivateKeyInfo, which we need to decrypt.\n           Afterwards we can handle it like a keyBag,\n           which is a PrivateKeyInfo. */\n        bagAsn1 = pki.decryptPrivateKeyInfo(bagAsn1, password);\n        if(bagAsn1 === null) {\n          throw new Error(\n            'Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?');\n        }\n\n        /* fall through */\n      case pki.oids.keyBag:\n        /* A PKCS#12 keyBag is a simple PrivateKeyInfo as understood by our\n           PKI module, hence we don't have to do validation/capturing here,\n           just pass what we already got. */\n        try {\n          bag.key = pki.privateKeyFromAsn1(bagAsn1);\n        } catch(e) {\n          // ignore unknown key type, pass asn1 value\n          bag.key = null;\n          bag.asn1 = bagAsn1;\n        }\n        continue;  /* Nothing more to do. */\n\n      case pki.oids.certBag:\n        /* A PKCS#12 certBag can wrap both X.509 and sdsi certificates.\n           Therefore put the SafeBag content through another validator to\n           capture the fields.  Afterwards check & store the results. */\n        validator = certBagValidator;\n        decoder = function() {\n          if(asn1.derToOid(capture.certId) !== pki.oids.x509Certificate) {\n            var error = new Error(\n              'Unsupported certificate type, only X.509 supported.');\n            error.oid = asn1.derToOid(capture.certId);\n            throw error;\n          }\n\n          // true=produce cert hash\n          var certAsn1 = asn1.fromDer(capture.cert, strict);\n          try {\n            bag.cert = pki.certificateFromAsn1(certAsn1, true);\n          } catch(e) {\n            // ignore unknown cert type, pass asn1 value\n            bag.cert = null;\n            bag.asn1 = certAsn1;\n          }\n        };\n        break;\n\n      default:\n        var error = new Error('Unsupported PKCS#12 SafeBag type.');\n        error.oid = bag.type;\n        throw error;\n    }\n\n    /* Validate SafeBag value (i.e. CertBag, etc.) and capture data if needed. */\n    if(validator !== undefined &&\n       !asn1.validate(bagAsn1, validator, capture, errors)) {\n      var error = new Error('Cannot read PKCS#12 ' + validator.name);\n      error.errors = errors;\n      throw error;\n    }\n\n    /* Call decoder function from above to store the results. */\n    decoder();\n  }\n\n  return res;\n}\n\n/**\n * Decode PKCS#12 SET OF PKCS12Attribute into JavaScript object.\n *\n * @param attributes SET OF PKCS12Attribute (ASN.1 object).\n *\n * @return the decoded attributes.\n */\nfunction _decodeBagAttributes(attributes) {\n  var decodedAttrs = {};\n\n  if(attributes !== undefined) {\n    for(var i = 0; i < attributes.length; ++i) {\n      var capture = {};\n      var errors = [];\n      if(!asn1.validate(attributes[i], attributeValidator, capture, errors)) {\n        var error = new Error('Cannot read PKCS#12 BagAttribute.');\n        error.errors = errors;\n        throw error;\n      }\n\n      var oid = asn1.derToOid(capture.oid);\n      if(pki.oids[oid] === undefined) {\n        // unsupported attribute type, ignore.\n        continue;\n      }\n\n      decodedAttrs[pki.oids[oid]] = [];\n      for(var j = 0; j < capture.values.length; ++j) {\n        decodedAttrs[pki.oids[oid]].push(capture.values[j].value);\n      }\n    }\n  }\n\n  return decodedAttrs;\n}\n\n/**\n * Wraps a private key and certificate in a PKCS#12 PFX wrapper. If a\n * password is provided then the private key will be encrypted.\n *\n * An entire certificate chain may also be included. To do this, pass\n * an array for the \"cert\" parameter where the first certificate is\n * the one that is paired with the private key and each subsequent one\n * verifies the previous one. The certificates may be in PEM format or\n * have been already parsed by Forge.\n *\n * @todo implement password-based-encryption for the whole package\n *\n * @param key the private key.\n * @param cert the certificate (may be an array of certificates in order\n *          to specify a certificate chain).\n * @param password the password to use, null for none.\n * @param options:\n *          algorithm the encryption algorithm to use\n *            ('aes128', 'aes192', 'aes256', '3des'), defaults to 'aes128'.\n *          count the iteration count to use.\n *          saltSize the salt size to use.\n *          useMac true to include a MAC, false not to, defaults to true.\n *          localKeyId the local key ID to use, in hex.\n *          friendlyName the friendly name to use.\n *          generateLocalKeyId true to generate a random local key ID,\n *            false not to, defaults to true.\n *\n * @return the PKCS#12 PFX ASN.1 object.\n */\np12.toPkcs12Asn1 = function(key, cert, password, options) {\n  // set default options\n  options = options || {};\n  options.saltSize = options.saltSize || 8;\n  options.count = options.count || 2048;\n  options.algorithm = options.algorithm || options.encAlgorithm || 'aes128';\n  if(!('useMac' in options)) {\n    options.useMac = true;\n  }\n  if(!('localKeyId' in options)) {\n    options.localKeyId = null;\n  }\n  if(!('generateLocalKeyId' in options)) {\n    options.generateLocalKeyId = true;\n  }\n\n  var localKeyId = options.localKeyId;\n  var bagAttrs;\n  if(localKeyId !== null) {\n    localKeyId = forge.util.hexToBytes(localKeyId);\n  } else if(options.generateLocalKeyId) {\n    // use SHA-1 of paired cert, if available\n    if(cert) {\n      var pairedCert = forge.util.isArray(cert) ? cert[0] : cert;\n      if(typeof pairedCert === 'string') {\n        pairedCert = pki.certificateFromPem(pairedCert);\n      }\n      var sha1 = forge.md.sha1.create();\n      sha1.update(asn1.toDer(pki.certificateToAsn1(pairedCert)).getBytes());\n      localKeyId = sha1.digest().getBytes();\n    } else {\n      // FIXME: consider using SHA-1 of public key (which can be generated\n      // from private key components), see: cert.generateSubjectKeyIdentifier\n      // generate random bytes\n      localKeyId = forge.random.getBytes(20);\n    }\n  }\n\n  var attrs = [];\n  if(localKeyId !== null) {\n    attrs.push(\n      // localKeyID\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // attrId\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          asn1.oidToDer(pki.oids.localKeyId).getBytes()),\n        // attrValues\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true, [\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n            localKeyId)\n        ])\n      ]));\n  }\n  if('friendlyName' in options) {\n    attrs.push(\n      // friendlyName\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // attrId\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          asn1.oidToDer(pki.oids.friendlyName).getBytes()),\n        // attrValues\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true, [\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.BMPSTRING, false,\n            options.friendlyName)\n        ])\n      ]));\n  }\n\n  if(attrs.length > 0) {\n    bagAttrs = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true, attrs);\n  }\n\n  // collect contents for AuthenticatedSafe\n  var contents = [];\n\n  // create safe bag(s) for certificate chain\n  var chain = [];\n  if(cert !== null) {\n    if(forge.util.isArray(cert)) {\n      chain = cert;\n    } else {\n      chain = [cert];\n    }\n  }\n\n  var certSafeBags = [];\n  for(var i = 0; i < chain.length; ++i) {\n    // convert cert from PEM as necessary\n    cert = chain[i];\n    if(typeof cert === 'string') {\n      cert = pki.certificateFromPem(cert);\n    }\n\n    // SafeBag\n    var certBagAttrs = (i === 0) ? bagAttrs : undefined;\n    var certAsn1 = pki.certificateToAsn1(cert);\n    var certSafeBag =\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // bagId\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          asn1.oidToDer(pki.oids.certBag).getBytes()),\n        // bagValue\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n          // CertBag\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n            // certId\n            asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n              asn1.oidToDer(pki.oids.x509Certificate).getBytes()),\n            // certValue (x509Certificate)\n            asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n              asn1.create(\n                asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n                asn1.toDer(certAsn1).getBytes())\n            ])])]),\n        // bagAttributes (OPTIONAL)\n        certBagAttrs\n      ]);\n    certSafeBags.push(certSafeBag);\n  }\n\n  if(certSafeBags.length > 0) {\n    // SafeContents\n    var certSafeContents = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, certSafeBags);\n\n    // ContentInfo\n    var certCI =\n      // PKCS#7 ContentInfo\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // contentType\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          // OID for the content type is 'data'\n          asn1.oidToDer(pki.oids.data).getBytes()),\n        // content\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n          asn1.create(\n            asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n            asn1.toDer(certSafeContents).getBytes())\n        ])\n      ]);\n    contents.push(certCI);\n  }\n\n  // create safe contents for private key\n  var keyBag = null;\n  if(key !== null) {\n    // SafeBag\n    var pkAsn1 = pki.wrapRsaPrivateKey(pki.privateKeyToAsn1(key));\n    if(password === null) {\n      // no encryption\n      keyBag = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // bagId\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          asn1.oidToDer(pki.oids.keyBag).getBytes()),\n        // bagValue\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n          // PrivateKeyInfo\n          pkAsn1\n        ]),\n        // bagAttributes (OPTIONAL)\n        bagAttrs\n      ]);\n    } else {\n      // encrypted PrivateKeyInfo\n      keyBag = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // bagId\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          asn1.oidToDer(pki.oids.pkcs8ShroudedKeyBag).getBytes()),\n        // bagValue\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n          // EncryptedPrivateKeyInfo\n          pki.encryptPrivateKeyInfo(pkAsn1, password, options)\n        ]),\n        // bagAttributes (OPTIONAL)\n        bagAttrs\n      ]);\n    }\n\n    // SafeContents\n    var keySafeContents =\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [keyBag]);\n\n    // ContentInfo\n    var keyCI =\n      // PKCS#7 ContentInfo\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // contentType\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          // OID for the content type is 'data'\n          asn1.oidToDer(pki.oids.data).getBytes()),\n        // content\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n          asn1.create(\n            asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n            asn1.toDer(keySafeContents).getBytes())\n        ])\n      ]);\n    contents.push(keyCI);\n  }\n\n  // create AuthenticatedSafe by stringing together the contents\n  var safe = asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, contents);\n\n  var macData;\n  if(options.useMac) {\n    // MacData\n    var sha1 = forge.md.sha1.create();\n    var macSalt = new forge.util.ByteBuffer(\n      forge.random.getBytes(options.saltSize));\n    var count = options.count;\n    // 160-bit key\n    var key = p12.generateKey(password, macSalt, 3, count, 20);\n    var mac = forge.hmac.create();\n    mac.start(sha1, key);\n    mac.update(asn1.toDer(safe).getBytes());\n    var macValue = mac.getMac();\n    macData = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // mac DigestInfo\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // digestAlgorithm\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n          // algorithm = SHA-1\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n            asn1.oidToDer(pki.oids.sha1).getBytes()),\n          // parameters = Null\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n        ]),\n        // digest\n        asn1.create(\n          asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING,\n          false, macValue.getBytes())\n      ]),\n      // macSalt OCTET STRING\n      asn1.create(\n        asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false, macSalt.getBytes()),\n      // iterations INTEGER (XXX: Only support count < 65536)\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n        asn1.integerToDer(count).getBytes()\n      )\n    ]);\n  }\n\n  // PFX\n  return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // version (3)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      asn1.integerToDer(3).getBytes()),\n    // PKCS#7 ContentInfo\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // contentType\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        // OID for the content type is 'data'\n        asn1.oidToDer(pki.oids.data).getBytes()),\n      // content\n      asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n        asn1.create(\n          asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n          asn1.toDer(safe).getBytes())\n      ])\n    ]),\n    macData\n  ]);\n};\n\n/**\n * Derives a PKCS#12 key.\n *\n * @param password the password to derive the key material from, null or\n *          undefined for none.\n * @param salt the salt, as a ByteBuffer, to use.\n * @param id the PKCS#12 ID byte (1 = key material, 2 = IV, 3 = MAC).\n * @param iter the iteration count.\n * @param n the number of bytes to derive from the password.\n * @param md the message digest to use, defaults to SHA-1.\n *\n * @return a ByteBuffer with the bytes derived from the password.\n */\np12.generateKey = forge.pbe.generatePkcs12Key;\n","/**\n * Secure Hash Algorithm with 160-bit digest (SHA-1) implementation.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2015 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./md');\nrequire('./util');\n\nvar sha1 = module.exports = forge.sha1 = forge.sha1 || {};\nforge.md.sha1 = forge.md.algorithms.sha1 = sha1;\n\n/**\n * Creates a SHA-1 message digest object.\n *\n * @return a message digest object.\n */\nsha1.create = function() {\n  // do initialization as necessary\n  if(!_initialized) {\n    _init();\n  }\n\n  // SHA-1 state contains five 32-bit integers\n  var _state = null;\n\n  // input buffer\n  var _input = forge.util.createBuffer();\n\n  // used for word storage\n  var _w = new Array(80);\n\n  // message digest object\n  var md = {\n    algorithm: 'sha1',\n    blockLength: 64,\n    digestLength: 20,\n    // 56-bit length of message so far (does not including padding)\n    messageLength: 0,\n    // true message length\n    fullMessageLength: null,\n    // size of message length in bytes\n    messageLengthSize: 8\n  };\n\n  /**\n   * Starts the digest.\n   *\n   * @return this digest object.\n   */\n  md.start = function() {\n    // up to 56-bit message length for convenience\n    md.messageLength = 0;\n\n    // full message length (set md.messageLength64 for backwards-compatibility)\n    md.fullMessageLength = md.messageLength64 = [];\n    var int32s = md.messageLengthSize / 4;\n    for(var i = 0; i < int32s; ++i) {\n      md.fullMessageLength.push(0);\n    }\n    _input = forge.util.createBuffer();\n    _state = {\n      h0: 0x67452301,\n      h1: 0xEFCDAB89,\n      h2: 0x98BADCFE,\n      h3: 0x10325476,\n      h4: 0xC3D2E1F0\n    };\n    return md;\n  };\n  // start digest automatically for first time\n  md.start();\n\n  /**\n   * Updates the digest with the given message input. The given input can\n   * treated as raw input (no encoding will be applied) or an encoding of\n   * 'utf8' maybe given to encode the input using UTF-8.\n   *\n   * @param msg the message input to update with.\n   * @param encoding the encoding to use (default: 'raw', other: 'utf8').\n   *\n   * @return this digest object.\n   */\n  md.update = function(msg, encoding) {\n    if(encoding === 'utf8') {\n      msg = forge.util.encodeUtf8(msg);\n    }\n\n    // update message length\n    var len = msg.length;\n    md.messageLength += len;\n    len = [(len / 0x100000000) >>> 0, len >>> 0];\n    for(var i = md.fullMessageLength.length - 1; i >= 0; --i) {\n      md.fullMessageLength[i] += len[1];\n      len[1] = len[0] + ((md.fullMessageLength[i] / 0x100000000) >>> 0);\n      md.fullMessageLength[i] = md.fullMessageLength[i] >>> 0;\n      len[0] = ((len[1] / 0x100000000) >>> 0);\n    }\n\n    // add bytes to input buffer\n    _input.putBytes(msg);\n\n    // process bytes\n    _update(_state, _w, _input);\n\n    // compact input buffer every 2K or if empty\n    if(_input.read > 2048 || _input.length() === 0) {\n      _input.compact();\n    }\n\n    return md;\n  };\n\n  /**\n   * Produces the digest.\n   *\n   * @return a byte buffer containing the digest value.\n   */\n  md.digest = function() {\n    /* Note: Here we copy the remaining bytes in the input buffer and\n    add the appropriate SHA-1 padding. Then we do the final update\n    on a copy of the state so that if the user wants to get\n    intermediate digests they can do so. */\n\n    /* Determine the number of bytes that must be added to the message\n    to ensure its length is congruent to 448 mod 512. In other words,\n    the data to be digested must be a multiple of 512 bits (or 128 bytes).\n    This data includes the message, some padding, and the length of the\n    message. Since the length of the message will be encoded as 8 bytes (64\n    bits), that means that the last segment of the data must have 56 bytes\n    (448 bits) of message and padding. Therefore, the length of the message\n    plus the padding must be congruent to 448 mod 512 because\n    512 - 128 = 448.\n\n    In order to fill up the message length it must be filled with\n    padding that begins with 1 bit followed by all 0 bits. Padding\n    must *always* be present, so if the message length is already\n    congruent to 448 mod 512, then 512 padding bits must be added. */\n\n    var finalBlock = forge.util.createBuffer();\n    finalBlock.putBytes(_input.bytes());\n\n    // compute remaining size to be digested (include message length size)\n    var remaining = (\n      md.fullMessageLength[md.fullMessageLength.length - 1] +\n      md.messageLengthSize);\n\n    // add padding for overflow blockSize - overflow\n    // _padding starts with 1 byte with first bit is set (byte value 128), then\n    // there may be up to (blockSize - 1) other pad bytes\n    var overflow = remaining & (md.blockLength - 1);\n    finalBlock.putBytes(_padding.substr(0, md.blockLength - overflow));\n\n    // serialize message length in bits in big-endian order; since length\n    // is stored in bytes we multiply by 8 and add carry from next int\n    var next, carry;\n    var bits = md.fullMessageLength[0] * 8;\n    for(var i = 0; i < md.fullMessageLength.length - 1; ++i) {\n      next = md.fullMessageLength[i + 1] * 8;\n      carry = (next / 0x100000000) >>> 0;\n      bits += carry;\n      finalBlock.putInt32(bits >>> 0);\n      bits = next >>> 0;\n    }\n    finalBlock.putInt32(bits);\n\n    var s2 = {\n      h0: _state.h0,\n      h1: _state.h1,\n      h2: _state.h2,\n      h3: _state.h3,\n      h4: _state.h4\n    };\n    _update(s2, _w, finalBlock);\n    var rval = forge.util.createBuffer();\n    rval.putInt32(s2.h0);\n    rval.putInt32(s2.h1);\n    rval.putInt32(s2.h2);\n    rval.putInt32(s2.h3);\n    rval.putInt32(s2.h4);\n    return rval;\n  };\n\n  return md;\n};\n\n// sha-1 padding bytes not initialized yet\nvar _padding = null;\nvar _initialized = false;\n\n/**\n * Initializes the constant tables.\n */\nfunction _init() {\n  // create padding\n  _padding = String.fromCharCode(128);\n  _padding += forge.util.fillString(String.fromCharCode(0x00), 64);\n\n  // now initialized\n  _initialized = true;\n}\n\n/**\n * Updates a SHA-1 state with the given byte buffer.\n *\n * @param s the SHA-1 state to update.\n * @param w the array to use to store words.\n * @param bytes the byte buffer to update with.\n */\nfunction _update(s, w, bytes) {\n  // consume 512 bit (64 byte) chunks\n  var t, a, b, c, d, e, f, i;\n  var len = bytes.length();\n  while(len >= 64) {\n    // the w array will be populated with sixteen 32-bit big-endian words\n    // and then extended into 80 32-bit words according to SHA-1 algorithm\n    // and for 32-79 using Max Locktyukhin's optimization\n\n    // initialize hash value for this chunk\n    a = s.h0;\n    b = s.h1;\n    c = s.h2;\n    d = s.h3;\n    e = s.h4;\n\n    // round 1\n    for(i = 0; i < 16; ++i) {\n      t = bytes.getInt32();\n      w[i] = t;\n      f = d ^ (b & (c ^ d));\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x5A827999 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    for(; i < 20; ++i) {\n      t = (w[i - 3] ^ w[i - 8] ^ w[i - 14] ^ w[i - 16]);\n      t = (t << 1) | (t >>> 31);\n      w[i] = t;\n      f = d ^ (b & (c ^ d));\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x5A827999 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    // round 2\n    for(; i < 32; ++i) {\n      t = (w[i - 3] ^ w[i - 8] ^ w[i - 14] ^ w[i - 16]);\n      t = (t << 1) | (t >>> 31);\n      w[i] = t;\n      f = b ^ c ^ d;\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x6ED9EBA1 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    for(; i < 40; ++i) {\n      t = (w[i - 6] ^ w[i - 16] ^ w[i - 28] ^ w[i - 32]);\n      t = (t << 2) | (t >>> 30);\n      w[i] = t;\n      f = b ^ c ^ d;\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x6ED9EBA1 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    // round 3\n    for(; i < 60; ++i) {\n      t = (w[i - 6] ^ w[i - 16] ^ w[i - 28] ^ w[i - 32]);\n      t = (t << 2) | (t >>> 30);\n      w[i] = t;\n      f = (b & c) | (d & (b ^ c));\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x8F1BBCDC + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    // round 4\n    for(; i < 80; ++i) {\n      t = (w[i - 6] ^ w[i - 16] ^ w[i - 28] ^ w[i - 32]);\n      t = (t << 2) | (t >>> 30);\n      w[i] = t;\n      f = b ^ c ^ d;\n      t = ((a << 5) | (a >>> 27)) + f + e + 0xCA62C1D6 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n\n    // update hash state\n    s.h0 = (s.h0 + a) | 0;\n    s.h1 = (s.h1 + b) | 0;\n    s.h2 = (s.h2 + c) | 0;\n    s.h3 = (s.h3 + d) | 0;\n    s.h4 = (s.h4 + e) | 0;\n\n    len -= 64;\n  }\n}\n","/**\n * Secure Hash Algorithm with 256-bit digest (SHA-256) implementation.\n *\n * See FIPS 180-2 for details.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2015 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./md');\nrequire('./util');\n\nvar sha256 = module.exports = forge.sha256 = forge.sha256 || {};\nforge.md.sha256 = forge.md.algorithms.sha256 = sha256;\n\n/**\n * Creates a SHA-256 message digest object.\n *\n * @return a message digest object.\n */\nsha256.create = function() {\n  // do initialization as necessary\n  if(!_initialized) {\n    _init();\n  }\n\n  // SHA-256 state contains eight 32-bit integers\n  var _state = null;\n\n  // input buffer\n  var _input = forge.util.createBuffer();\n\n  // used for word storage\n  var _w = new Array(64);\n\n  // message digest object\n  var md = {\n    algorithm: 'sha256',\n    blockLength: 64,\n    digestLength: 32,\n    // 56-bit length of message so far (does not including padding)\n    messageLength: 0,\n    // true message length\n    fullMessageLength: null,\n    // size of message length in bytes\n    messageLengthSize: 8\n  };\n\n  /**\n   * Starts the digest.\n   *\n   * @return this digest object.\n   */\n  md.start = function() {\n    // up to 56-bit message length for convenience\n    md.messageLength = 0;\n\n    // full message length (set md.messageLength64 for backwards-compatibility)\n    md.fullMessageLength = md.messageLength64 = [];\n    var int32s = md.messageLengthSize / 4;\n    for(var i = 0; i < int32s; ++i) {\n      md.fullMessageLength.push(0);\n    }\n    _input = forge.util.createBuffer();\n    _state = {\n      h0: 0x6A09E667,\n      h1: 0xBB67AE85,\n      h2: 0x3C6EF372,\n      h3: 0xA54FF53A,\n      h4: 0x510E527F,\n      h5: 0x9B05688C,\n      h6: 0x1F83D9AB,\n      h7: 0x5BE0CD19\n    };\n    return md;\n  };\n  // start digest automatically for first time\n  md.start();\n\n  /**\n   * Updates the digest with the given message input. The given input can\n   * treated as raw input (no encoding will be applied) or an encoding of\n   * 'utf8' maybe given to encode the input using UTF-8.\n   *\n   * @param msg the message input to update with.\n   * @param encoding the encoding to use (default: 'raw', other: 'utf8').\n   *\n   * @return this digest object.\n   */\n  md.update = function(msg, encoding) {\n    if(encoding === 'utf8') {\n      msg = forge.util.encodeUtf8(msg);\n    }\n\n    // update message length\n    var len = msg.length;\n    md.messageLength += len;\n    len = [(len / 0x100000000) >>> 0, len >>> 0];\n    for(var i = md.fullMessageLength.length - 1; i >= 0; --i) {\n      md.fullMessageLength[i] += len[1];\n      len[1] = len[0] + ((md.fullMessageLength[i] / 0x100000000) >>> 0);\n      md.fullMessageLength[i] = md.fullMessageLength[i] >>> 0;\n      len[0] = ((len[1] / 0x100000000) >>> 0);\n    }\n\n    // add bytes to input buffer\n    _input.putBytes(msg);\n\n    // process bytes\n    _update(_state, _w, _input);\n\n    // compact input buffer every 2K or if empty\n    if(_input.read > 2048 || _input.length() === 0) {\n      _input.compact();\n    }\n\n    return md;\n  };\n\n  /**\n   * Produces the digest.\n   *\n   * @return a byte buffer containing the digest value.\n   */\n  md.digest = function() {\n    /* Note: Here we copy the remaining bytes in the input buffer and\n    add the appropriate SHA-256 padding. Then we do the final update\n    on a copy of the state so that if the user wants to get\n    intermediate digests they can do so. */\n\n    /* Determine the number of bytes that must be added to the message\n    to ensure its length is congruent to 448 mod 512. In other words,\n    the data to be digested must be a multiple of 512 bits (or 128 bytes).\n    This data includes the message, some padding, and the length of the\n    message. Since the length of the message will be encoded as 8 bytes (64\n    bits), that means that the last segment of the data must have 56 bytes\n    (448 bits) of message and padding. Therefore, the length of the message\n    plus the padding must be congruent to 448 mod 512 because\n    512 - 128 = 448.\n\n    In order to fill up the message length it must be filled with\n    padding that begins with 1 bit followed by all 0 bits. Padding\n    must *always* be present, so if the message length is already\n    congruent to 448 mod 512, then 512 padding bits must be added. */\n\n    var finalBlock = forge.util.createBuffer();\n    finalBlock.putBytes(_input.bytes());\n\n    // compute remaining size to be digested (include message length size)\n    var remaining = (\n      md.fullMessageLength[md.fullMessageLength.length - 1] +\n      md.messageLengthSize);\n\n    // add padding for overflow blockSize - overflow\n    // _padding starts with 1 byte with first bit is set (byte value 128), then\n    // there may be up to (blockSize - 1) other pad bytes\n    var overflow = remaining & (md.blockLength - 1);\n    finalBlock.putBytes(_padding.substr(0, md.blockLength - overflow));\n\n    // serialize message length in bits in big-endian order; since length\n    // is stored in bytes we multiply by 8 and add carry from next int\n    var next, carry;\n    var bits = md.fullMessageLength[0] * 8;\n    for(var i = 0; i < md.fullMessageLength.length - 1; ++i) {\n      next = md.fullMessageLength[i + 1] * 8;\n      carry = (next / 0x100000000) >>> 0;\n      bits += carry;\n      finalBlock.putInt32(bits >>> 0);\n      bits = next >>> 0;\n    }\n    finalBlock.putInt32(bits);\n\n    var s2 = {\n      h0: _state.h0,\n      h1: _state.h1,\n      h2: _state.h2,\n      h3: _state.h3,\n      h4: _state.h4,\n      h5: _state.h5,\n      h6: _state.h6,\n      h7: _state.h7\n    };\n    _update(s2, _w, finalBlock);\n    var rval = forge.util.createBuffer();\n    rval.putInt32(s2.h0);\n    rval.putInt32(s2.h1);\n    rval.putInt32(s2.h2);\n    rval.putInt32(s2.h3);\n    rval.putInt32(s2.h4);\n    rval.putInt32(s2.h5);\n    rval.putInt32(s2.h6);\n    rval.putInt32(s2.h7);\n    return rval;\n  };\n\n  return md;\n};\n\n// sha-256 padding bytes not initialized yet\nvar _padding = null;\nvar _initialized = false;\n\n// table of constants\nvar _k = null;\n\n/**\n * Initializes the constant tables.\n */\nfunction _init() {\n  // create padding\n  _padding = String.fromCharCode(128);\n  _padding += forge.util.fillString(String.fromCharCode(0x00), 64);\n\n  // create K table for SHA-256\n  _k = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n    0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n    0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n    0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n    0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n    0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n    0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n    0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n    0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2];\n\n  // now initialized\n  _initialized = true;\n}\n\n/**\n * Updates a SHA-256 state with the given byte buffer.\n *\n * @param s the SHA-256 state to update.\n * @param w the array to use to store words.\n * @param bytes the byte buffer to update with.\n */\nfunction _update(s, w, bytes) {\n  // consume 512 bit (64 byte) chunks\n  var t1, t2, s0, s1, ch, maj, i, a, b, c, d, e, f, g, h;\n  var len = bytes.length();\n  while(len >= 64) {\n    // the w array will be populated with sixteen 32-bit big-endian words\n    // and then extended into 64 32-bit words according to SHA-256\n    for(i = 0; i < 16; ++i) {\n      w[i] = bytes.getInt32();\n    }\n    for(; i < 64; ++i) {\n      // XOR word 2 words ago rot right 17, rot right 19, shft right 10\n      t1 = w[i - 2];\n      t1 =\n        ((t1 >>> 17) | (t1 << 15)) ^\n        ((t1 >>> 19) | (t1 << 13)) ^\n        (t1 >>> 10);\n      // XOR word 15 words ago rot right 7, rot right 18, shft right 3\n      t2 = w[i - 15];\n      t2 =\n        ((t2 >>> 7) | (t2 << 25)) ^\n        ((t2 >>> 18) | (t2 << 14)) ^\n        (t2 >>> 3);\n      // sum(t1, word 7 ago, t2, word 16 ago) modulo 2^32\n      w[i] = (t1 + w[i - 7] + t2 + w[i - 16]) | 0;\n    }\n\n    // initialize hash value for this chunk\n    a = s.h0;\n    b = s.h1;\n    c = s.h2;\n    d = s.h3;\n    e = s.h4;\n    f = s.h5;\n    g = s.h6;\n    h = s.h7;\n\n    // round function\n    for(i = 0; i < 64; ++i) {\n      // Sum1(e)\n      s1 =\n        ((e >>> 6) | (e << 26)) ^\n        ((e >>> 11) | (e << 21)) ^\n        ((e >>> 25) | (e << 7));\n      // Ch(e, f, g) (optimized the same way as SHA-1)\n      ch = g ^ (e & (f ^ g));\n      // Sum0(a)\n      s0 =\n        ((a >>> 2) | (a << 30)) ^\n        ((a >>> 13) | (a << 19)) ^\n        ((a >>> 22) | (a << 10));\n      // Maj(a, b, c) (optimized the same way as SHA-1)\n      maj = (a & b) | (c & (a ^ b));\n\n      // main algorithm\n      t1 = h + s1 + ch + _k[i] + w[i];\n      t2 = s0 + maj;\n      h = g;\n      g = f;\n      f = e;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      // can't truncate with `| 0`\n      e = (d + t1) >>> 0;\n      d = c;\n      c = b;\n      b = a;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      // can't truncate with `| 0`\n      a = (t1 + t2) >>> 0;\n    }\n\n    // update hash state\n    s.h0 = (s.h0 + a) | 0;\n    s.h1 = (s.h1 + b) | 0;\n    s.h2 = (s.h2 + c) | 0;\n    s.h3 = (s.h3 + d) | 0;\n    s.h4 = (s.h4 + e) | 0;\n    s.h5 = (s.h5 + f) | 0;\n    s.h6 = (s.h6 + g) | 0;\n    s.h7 = (s.h7 + h) | 0;\n    len -= 64;\n  }\n}\n","/**\n * Utility functions for web applications.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2018 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nvar baseN = require('./baseN');\n\n/* Utilities API */\nvar util = module.exports = forge.util = forge.util || {};\n\n// define setImmediate and nextTick\n(function() {\n  // use native nextTick (unless we're in webpack)\n  // webpack (or better node-libs-browser polyfill) sets process.browser.\n  // this way we can detect webpack properly\n  if(typeof process !== 'undefined' && process.nextTick && !process.browser) {\n    util.nextTick = process.nextTick;\n    if(typeof setImmediate === 'function') {\n      util.setImmediate = setImmediate;\n    } else {\n      // polyfill setImmediate with nextTick, older versions of node\n      // (those w/o setImmediate) won't totally starve IO\n      util.setImmediate = util.nextTick;\n    }\n    return;\n  }\n\n  // polyfill nextTick with native setImmediate\n  if(typeof setImmediate === 'function') {\n    util.setImmediate = function() { return setImmediate.apply(undefined, arguments); };\n    util.nextTick = function(callback) {\n      return setImmediate(callback);\n    };\n    return;\n  }\n\n  /* Note: A polyfill upgrade pattern is used here to allow combining\n  polyfills. For example, MutationObserver is fast, but blocks UI updates,\n  so it needs to allow UI updates periodically, so it falls back on\n  postMessage or setTimeout. */\n\n  // polyfill with setTimeout\n  util.setImmediate = function(callback) {\n    setTimeout(callback, 0);\n  };\n\n  // upgrade polyfill to use postMessage\n  if(typeof window !== 'undefined' &&\n    typeof window.postMessage === 'function') {\n    var msg = 'forge.setImmediate';\n    var callbacks = [];\n    util.setImmediate = function(callback) {\n      callbacks.push(callback);\n      // only send message when one hasn't been sent in\n      // the current turn of the event loop\n      if(callbacks.length === 1) {\n        window.postMessage(msg, '*');\n      }\n    };\n    function handler(event) {\n      if(event.source === window && event.data === msg) {\n        event.stopPropagation();\n        var copy = callbacks.slice();\n        callbacks.length = 0;\n        copy.forEach(function(callback) {\n          callback();\n        });\n      }\n    }\n    window.addEventListener('message', handler, true);\n  }\n\n  // upgrade polyfill to use MutationObserver\n  if(typeof MutationObserver !== 'undefined') {\n    // polyfill with MutationObserver\n    var now = Date.now();\n    var attr = true;\n    var div = document.createElement('div');\n    var callbacks = [];\n    new MutationObserver(function() {\n      var copy = callbacks.slice();\n      callbacks.length = 0;\n      copy.forEach(function(callback) {\n        callback();\n      });\n    }).observe(div, {attributes: true});\n    var oldSetImmediate = util.setImmediate;\n    util.setImmediate = function(callback) {\n      if(Date.now() - now > 15) {\n        now = Date.now();\n        oldSetImmediate(callback);\n      } else {\n        callbacks.push(callback);\n        // only trigger observer when it hasn't been triggered in\n        // the current turn of the event loop\n        if(callbacks.length === 1) {\n          div.setAttribute('a', attr = !attr);\n        }\n      }\n    };\n  }\n\n  util.nextTick = util.setImmediate;\n})();\n\n// check if running under Node.js\nutil.isNodejs =\n  typeof process !== 'undefined' && process.versions && process.versions.node;\n\n\n// 'self' will also work in Web Workers (instance of WorkerGlobalScope) while\n// it will point to `window` in the main thread.\n// To remain compatible with older browsers, we fall back to 'window' if 'self'\n// is not available.\nutil.globalScope = (function() {\n  if(util.isNodejs) {\n    return global;\n  }\n\n  return typeof self === 'undefined' ? window : self;\n})();\n\n// define isArray\nutil.isArray = Array.isArray || function(x) {\n  return Object.prototype.toString.call(x) === '[object Array]';\n};\n\n// define isArrayBuffer\nutil.isArrayBuffer = function(x) {\n  return typeof ArrayBuffer !== 'undefined' && x instanceof ArrayBuffer;\n};\n\n// define isArrayBufferView\nutil.isArrayBufferView = function(x) {\n  return x && util.isArrayBuffer(x.buffer) && x.byteLength !== undefined;\n};\n\n/**\n * Ensure a bits param is 8, 16, 24, or 32. Used to validate input for\n * algorithms where bit manipulation, JavaScript limitations, and/or algorithm\n * design only allow for byte operations of a limited size.\n *\n * @param n number of bits.\n *\n * Throw Error if n invalid.\n */\nfunction _checkBitsParam(n) {\n  if(!(n === 8 || n === 16 || n === 24 || n === 32)) {\n    throw new Error('Only 8, 16, 24, or 32 bits supported: ' + n);\n  }\n}\n\n// TODO: set ByteBuffer to best available backing\nutil.ByteBuffer = ByteStringBuffer;\n\n/** Buffer w/BinaryString backing */\n\n/**\n * Constructor for a binary string backed byte buffer.\n *\n * @param [b] the bytes to wrap (either encoded as string, one byte per\n *          character, or as an ArrayBuffer or Typed Array).\n */\nfunction ByteStringBuffer(b) {\n  // TODO: update to match DataBuffer API\n\n  // the data in this buffer\n  this.data = '';\n  // the pointer for reading from this buffer\n  this.read = 0;\n\n  if(typeof b === 'string') {\n    this.data = b;\n  } else if(util.isArrayBuffer(b) || util.isArrayBufferView(b)) {\n    if(typeof Buffer !== 'undefined' && b instanceof Buffer) {\n      this.data = b.toString('binary');\n    } else {\n      // convert native buffer to forge buffer\n      // FIXME: support native buffers internally instead\n      var arr = new Uint8Array(b);\n      try {\n        this.data = String.fromCharCode.apply(null, arr);\n      } catch(e) {\n        for(var i = 0; i < arr.length; ++i) {\n          this.putByte(arr[i]);\n        }\n      }\n    }\n  } else if(b instanceof ByteStringBuffer ||\n    (typeof b === 'object' && typeof b.data === 'string' &&\n    typeof b.read === 'number')) {\n    // copy existing buffer\n    this.data = b.data;\n    this.read = b.read;\n  }\n\n  // used for v8 optimization\n  this._constructedStringLength = 0;\n}\nutil.ByteStringBuffer = ByteStringBuffer;\n\n/* Note: This is an optimization for V8-based browsers. When V8 concatenates\n  a string, the strings are only joined logically using a \"cons string\" or\n  \"constructed/concatenated string\". These containers keep references to one\n  another and can result in very large memory usage. For example, if a 2MB\n  string is constructed by concatenating 4 bytes together at a time, the\n  memory usage will be ~44MB; so ~22x increase. The strings are only joined\n  together when an operation requiring their joining takes place, such as\n  substr(). This function is called when adding data to this buffer to ensure\n  these types of strings are periodically joined to reduce the memory\n  footprint. */\nvar _MAX_CONSTRUCTED_STRING_LENGTH = 4096;\nutil.ByteStringBuffer.prototype._optimizeConstructedString = function(x) {\n  this._constructedStringLength += x;\n  if(this._constructedStringLength > _MAX_CONSTRUCTED_STRING_LENGTH) {\n    // this substr() should cause the constructed string to join\n    this.data.substr(0, 1);\n    this._constructedStringLength = 0;\n  }\n};\n\n/**\n * Gets the number of bytes in this buffer.\n *\n * @return the number of bytes in this buffer.\n */\nutil.ByteStringBuffer.prototype.length = function() {\n  return this.data.length - this.read;\n};\n\n/**\n * Gets whether or not this buffer is empty.\n *\n * @return true if this buffer is empty, false if not.\n */\nutil.ByteStringBuffer.prototype.isEmpty = function() {\n  return this.length() <= 0;\n};\n\n/**\n * Puts a byte in this buffer.\n *\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putByte = function(b) {\n  return this.putBytes(String.fromCharCode(b));\n};\n\n/**\n * Puts a byte in this buffer N times.\n *\n * @param b the byte to put.\n * @param n the number of bytes of value b to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.fillWithByte = function(b, n) {\n  b = String.fromCharCode(b);\n  var d = this.data;\n  while(n > 0) {\n    if(n & 1) {\n      d += b;\n    }\n    n >>>= 1;\n    if(n > 0) {\n      b += b;\n    }\n  }\n  this.data = d;\n  this._optimizeConstructedString(n);\n  return this;\n};\n\n/**\n * Puts bytes in this buffer.\n *\n * @param bytes the bytes (as a binary encoded string) to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putBytes = function(bytes) {\n  this.data += bytes;\n  this._optimizeConstructedString(bytes.length);\n  return this;\n};\n\n/**\n * Puts a UTF-16 encoded string into this buffer.\n *\n * @param str the string to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putString = function(str) {\n  return this.putBytes(util.encodeUtf8(str));\n};\n\n/**\n * Puts a 16-bit integer in this buffer in big-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt16 = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n/**\n * Puts a 24-bit integer in this buffer in big-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt24 = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n/**\n * Puts a 32-bit integer in this buffer in big-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt32 = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i >> 24 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n/**\n * Puts a 16-bit integer in this buffer in little-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt16Le = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF));\n};\n\n/**\n * Puts a 24-bit integer in this buffer in little-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt24Le = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF));\n};\n\n/**\n * Puts a 32-bit integer in this buffer in little-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt32Le = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 24 & 0xFF));\n};\n\n/**\n * Puts an n-bit integer in this buffer in big-endian order.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt = function(i, n) {\n  _checkBitsParam(n);\n  var bytes = '';\n  do {\n    n -= 8;\n    bytes += String.fromCharCode((i >> n) & 0xFF);\n  } while(n > 0);\n  return this.putBytes(bytes);\n};\n\n/**\n * Puts a signed n-bit integer in this buffer in big-endian order. Two's\n * complement representation is used.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putSignedInt = function(i, n) {\n  // putInt checks n\n  if(i < 0) {\n    i += 2 << (n - 1);\n  }\n  return this.putInt(i, n);\n};\n\n/**\n * Puts the given buffer into this buffer.\n *\n * @param buffer the buffer to put into this one.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putBuffer = function(buffer) {\n  return this.putBytes(buffer.getBytes());\n};\n\n/**\n * Gets a byte from this buffer and advances the read pointer by 1.\n *\n * @return the byte.\n */\nutil.ByteStringBuffer.prototype.getByte = function() {\n  return this.data.charCodeAt(this.read++);\n};\n\n/**\n * Gets a uint16 from this buffer in big-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.ByteStringBuffer.prototype.getInt16 = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) << 8 ^\n    this.data.charCodeAt(this.read + 1));\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in big-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.ByteStringBuffer.prototype.getInt24 = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) << 16 ^\n    this.data.charCodeAt(this.read + 1) << 8 ^\n    this.data.charCodeAt(this.read + 2));\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in big-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.ByteStringBuffer.prototype.getInt32 = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) << 24 ^\n    this.data.charCodeAt(this.read + 1) << 16 ^\n    this.data.charCodeAt(this.read + 2) << 8 ^\n    this.data.charCodeAt(this.read + 3));\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets a uint16 from this buffer in little-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.ByteStringBuffer.prototype.getInt16Le = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) ^\n    this.data.charCodeAt(this.read + 1) << 8);\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in little-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.ByteStringBuffer.prototype.getInt24Le = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) ^\n    this.data.charCodeAt(this.read + 1) << 8 ^\n    this.data.charCodeAt(this.read + 2) << 16);\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in little-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.ByteStringBuffer.prototype.getInt32Le = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) ^\n    this.data.charCodeAt(this.read + 1) << 8 ^\n    this.data.charCodeAt(this.read + 2) << 16 ^\n    this.data.charCodeAt(this.read + 3) << 24);\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets an n-bit integer from this buffer in big-endian order and advances the\n * read pointer by ceil(n/8).\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.ByteStringBuffer.prototype.getInt = function(n) {\n  _checkBitsParam(n);\n  var rval = 0;\n  do {\n    // TODO: Use (rval * 0x100) if adding support for 33 to 53 bits.\n    rval = (rval << 8) + this.data.charCodeAt(this.read++);\n    n -= 8;\n  } while(n > 0);\n  return rval;\n};\n\n/**\n * Gets a signed n-bit integer from this buffer in big-endian order, using\n * two's complement, and advances the read pointer by n/8.\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.ByteStringBuffer.prototype.getSignedInt = function(n) {\n  // getInt checks n\n  var x = this.getInt(n);\n  var max = 2 << (n - 2);\n  if(x >= max) {\n    x -= max << 1;\n  }\n  return x;\n};\n\n/**\n * Reads bytes out as a binary encoded string and clears them from the\n * buffer. Note that the resulting string is binary encoded (in node.js this\n * encoding is referred to as `binary`, it is *not* `utf8`).\n *\n * @param count the number of bytes to read, undefined or null for all.\n *\n * @return a binary encoded string of bytes.\n */\nutil.ByteStringBuffer.prototype.getBytes = function(count) {\n  var rval;\n  if(count) {\n    // read count bytes\n    count = Math.min(this.length(), count);\n    rval = this.data.slice(this.read, this.read + count);\n    this.read += count;\n  } else if(count === 0) {\n    rval = '';\n  } else {\n    // read all bytes, optimize to only copy when needed\n    rval = (this.read === 0) ? this.data : this.data.slice(this.read);\n    this.clear();\n  }\n  return rval;\n};\n\n/**\n * Gets a binary encoded string of the bytes from this buffer without\n * modifying the read pointer.\n *\n * @param count the number of bytes to get, omit to get all.\n *\n * @return a string full of binary encoded characters.\n */\nutil.ByteStringBuffer.prototype.bytes = function(count) {\n  return (typeof(count) === 'undefined' ?\n    this.data.slice(this.read) :\n    this.data.slice(this.read, this.read + count));\n};\n\n/**\n * Gets a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n *\n * @return the byte.\n */\nutil.ByteStringBuffer.prototype.at = function(i) {\n  return this.data.charCodeAt(this.read + i);\n};\n\n/**\n * Puts a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.setAt = function(i, b) {\n  this.data = this.data.substr(0, this.read + i) +\n    String.fromCharCode(b) +\n    this.data.substr(this.read + i + 1);\n  return this;\n};\n\n/**\n * Gets the last byte without modifying the read pointer.\n *\n * @return the last byte.\n */\nutil.ByteStringBuffer.prototype.last = function() {\n  return this.data.charCodeAt(this.data.length - 1);\n};\n\n/**\n * Creates a copy of this buffer.\n *\n * @return the copy.\n */\nutil.ByteStringBuffer.prototype.copy = function() {\n  var c = util.createBuffer(this.data);\n  c.read = this.read;\n  return c;\n};\n\n/**\n * Compacts this buffer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.compact = function() {\n  if(this.read > 0) {\n    this.data = this.data.slice(this.read);\n    this.read = 0;\n  }\n  return this;\n};\n\n/**\n * Clears this buffer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.clear = function() {\n  this.data = '';\n  this.read = 0;\n  return this;\n};\n\n/**\n * Shortens this buffer by triming bytes off of the end of this buffer.\n *\n * @param count the number of bytes to trim off.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.truncate = function(count) {\n  var len = Math.max(0, this.length() - count);\n  this.data = this.data.substr(this.read, len);\n  this.read = 0;\n  return this;\n};\n\n/**\n * Converts this buffer to a hexadecimal string.\n *\n * @return a hexadecimal string.\n */\nutil.ByteStringBuffer.prototype.toHex = function() {\n  var rval = '';\n  for(var i = this.read; i < this.data.length; ++i) {\n    var b = this.data.charCodeAt(i);\n    if(b < 16) {\n      rval += '0';\n    }\n    rval += b.toString(16);\n  }\n  return rval;\n};\n\n/**\n * Converts this buffer to a UTF-16 string (standard JavaScript string).\n *\n * @return a UTF-16 string.\n */\nutil.ByteStringBuffer.prototype.toString = function() {\n  return util.decodeUtf8(this.bytes());\n};\n\n/** End Buffer w/BinaryString backing */\n\n/** Buffer w/UInt8Array backing */\n\n/**\n * FIXME: Experimental. Do not use yet.\n *\n * Constructor for an ArrayBuffer-backed byte buffer.\n *\n * The buffer may be constructed from a string, an ArrayBuffer, DataView, or a\n * TypedArray.\n *\n * If a string is given, its encoding should be provided as an option,\n * otherwise it will default to 'binary'. A 'binary' string is encoded such\n * that each character is one byte in length and size.\n *\n * If an ArrayBuffer, DataView, or TypedArray is given, it will be used\n * *directly* without any copying. Note that, if a write to the buffer requires\n * more space, the buffer will allocate a new backing ArrayBuffer to\n * accommodate. The starting read and write offsets for the buffer may be\n * given as options.\n *\n * @param [b] the initial bytes for this buffer.\n * @param options the options to use:\n *          [readOffset] the starting read offset to use (default: 0).\n *          [writeOffset] the starting write offset to use (default: the\n *            length of the first parameter).\n *          [growSize] the minimum amount, in bytes, to grow the buffer by to\n *            accommodate writes (default: 1024).\n *          [encoding] the encoding ('binary', 'utf8', 'utf16', 'hex') for the\n *            first parameter, if it is a string (default: 'binary').\n */\nfunction DataBuffer(b, options) {\n  // default options\n  options = options || {};\n\n  // pointers for read from/write to buffer\n  this.read = options.readOffset || 0;\n  this.growSize = options.growSize || 1024;\n\n  var isArrayBuffer = util.isArrayBuffer(b);\n  var isArrayBufferView = util.isArrayBufferView(b);\n  if(isArrayBuffer || isArrayBufferView) {\n    // use ArrayBuffer directly\n    if(isArrayBuffer) {\n      this.data = new DataView(b);\n    } else {\n      // TODO: adjust read/write offset based on the type of view\n      // or specify that this must be done in the options ... that the\n      // offsets are byte-based\n      this.data = new DataView(b.buffer, b.byteOffset, b.byteLength);\n    }\n    this.write = ('writeOffset' in options ?\n      options.writeOffset : this.data.byteLength);\n    return;\n  }\n\n  // initialize to empty array buffer and add any given bytes using putBytes\n  this.data = new DataView(new ArrayBuffer(0));\n  this.write = 0;\n\n  if(b !== null && b !== undefined) {\n    this.putBytes(b);\n  }\n\n  if('writeOffset' in options) {\n    this.write = options.writeOffset;\n  }\n}\nutil.DataBuffer = DataBuffer;\n\n/**\n * Gets the number of bytes in this buffer.\n *\n * @return the number of bytes in this buffer.\n */\nutil.DataBuffer.prototype.length = function() {\n  return this.write - this.read;\n};\n\n/**\n * Gets whether or not this buffer is empty.\n *\n * @return true if this buffer is empty, false if not.\n */\nutil.DataBuffer.prototype.isEmpty = function() {\n  return this.length() <= 0;\n};\n\n/**\n * Ensures this buffer has enough empty space to accommodate the given number\n * of bytes. An optional parameter may be given that indicates a minimum\n * amount to grow the buffer if necessary. If the parameter is not given,\n * the buffer will be grown by some previously-specified default amount\n * or heuristic.\n *\n * @param amount the number of bytes to accommodate.\n * @param [growSize] the minimum amount, in bytes, to grow the buffer by if\n *          necessary.\n */\nutil.DataBuffer.prototype.accommodate = function(amount, growSize) {\n  if(this.length() >= amount) {\n    return this;\n  }\n  growSize = Math.max(growSize || this.growSize, amount);\n\n  // grow buffer\n  var src = new Uint8Array(\n    this.data.buffer, this.data.byteOffset, this.data.byteLength);\n  var dst = new Uint8Array(this.length() + growSize);\n  dst.set(src);\n  this.data = new DataView(dst.buffer);\n\n  return this;\n};\n\n/**\n * Puts a byte in this buffer.\n *\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putByte = function(b) {\n  this.accommodate(1);\n  this.data.setUint8(this.write++, b);\n  return this;\n};\n\n/**\n * Puts a byte in this buffer N times.\n *\n * @param b the byte to put.\n * @param n the number of bytes of value b to put.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.fillWithByte = function(b, n) {\n  this.accommodate(n);\n  for(var i = 0; i < n; ++i) {\n    this.data.setUint8(b);\n  }\n  return this;\n};\n\n/**\n * Puts bytes in this buffer. The bytes may be given as a string, an\n * ArrayBuffer, a DataView, or a TypedArray.\n *\n * @param bytes the bytes to put.\n * @param [encoding] the encoding for the first parameter ('binary', 'utf8',\n *          'utf16', 'hex'), if it is a string (default: 'binary').\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putBytes = function(bytes, encoding) {\n  if(util.isArrayBufferView(bytes)) {\n    var src = new Uint8Array(bytes.buffer, bytes.byteOffset, bytes.byteLength);\n    var len = src.byteLength - src.byteOffset;\n    this.accommodate(len);\n    var dst = new Uint8Array(this.data.buffer, this.write);\n    dst.set(src);\n    this.write += len;\n    return this;\n  }\n\n  if(util.isArrayBuffer(bytes)) {\n    var src = new Uint8Array(bytes);\n    this.accommodate(src.byteLength);\n    var dst = new Uint8Array(this.data.buffer);\n    dst.set(src, this.write);\n    this.write += src.byteLength;\n    return this;\n  }\n\n  // bytes is a util.DataBuffer or equivalent\n  if(bytes instanceof util.DataBuffer ||\n    (typeof bytes === 'object' &&\n    typeof bytes.read === 'number' && typeof bytes.write === 'number' &&\n    util.isArrayBufferView(bytes.data))) {\n    var src = new Uint8Array(bytes.data.byteLength, bytes.read, bytes.length());\n    this.accommodate(src.byteLength);\n    var dst = new Uint8Array(bytes.data.byteLength, this.write);\n    dst.set(src);\n    this.write += src.byteLength;\n    return this;\n  }\n\n  if(bytes instanceof util.ByteStringBuffer) {\n    // copy binary string and process as the same as a string parameter below\n    bytes = bytes.data;\n    encoding = 'binary';\n  }\n\n  // string conversion\n  encoding = encoding || 'binary';\n  if(typeof bytes === 'string') {\n    var view;\n\n    // decode from string\n    if(encoding === 'hex') {\n      this.accommodate(Math.ceil(bytes.length / 2));\n      view = new Uint8Array(this.data.buffer, this.write);\n      this.write += util.binary.hex.decode(bytes, view, this.write);\n      return this;\n    }\n    if(encoding === 'base64') {\n      this.accommodate(Math.ceil(bytes.length / 4) * 3);\n      view = new Uint8Array(this.data.buffer, this.write);\n      this.write += util.binary.base64.decode(bytes, view, this.write);\n      return this;\n    }\n\n    // encode text as UTF-8 bytes\n    if(encoding === 'utf8') {\n      // encode as UTF-8 then decode string as raw binary\n      bytes = util.encodeUtf8(bytes);\n      encoding = 'binary';\n    }\n\n    // decode string as raw binary\n    if(encoding === 'binary' || encoding === 'raw') {\n      // one byte per character\n      this.accommodate(bytes.length);\n      view = new Uint8Array(this.data.buffer, this.write);\n      this.write += util.binary.raw.decode(view);\n      return this;\n    }\n\n    // encode text as UTF-16 bytes\n    if(encoding === 'utf16') {\n      // two bytes per character\n      this.accommodate(bytes.length * 2);\n      view = new Uint16Array(this.data.buffer, this.write);\n      this.write += util.text.utf16.encode(view);\n      return this;\n    }\n\n    throw new Error('Invalid encoding: ' + encoding);\n  }\n\n  throw Error('Invalid parameter: ' + bytes);\n};\n\n/**\n * Puts the given buffer into this buffer.\n *\n * @param buffer the buffer to put into this one.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putBuffer = function(buffer) {\n  this.putBytes(buffer);\n  buffer.clear();\n  return this;\n};\n\n/**\n * Puts a string into this buffer.\n *\n * @param str the string to put.\n * @param [encoding] the encoding for the string (default: 'utf16').\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putString = function(str) {\n  return this.putBytes(str, 'utf16');\n};\n\n/**\n * Puts a 16-bit integer in this buffer in big-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt16 = function(i) {\n  this.accommodate(2);\n  this.data.setInt16(this.write, i);\n  this.write += 2;\n  return this;\n};\n\n/**\n * Puts a 24-bit integer in this buffer in big-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt24 = function(i) {\n  this.accommodate(3);\n  this.data.setInt16(this.write, i >> 8 & 0xFFFF);\n  this.data.setInt8(this.write, i >> 16 & 0xFF);\n  this.write += 3;\n  return this;\n};\n\n/**\n * Puts a 32-bit integer in this buffer in big-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt32 = function(i) {\n  this.accommodate(4);\n  this.data.setInt32(this.write, i);\n  this.write += 4;\n  return this;\n};\n\n/**\n * Puts a 16-bit integer in this buffer in little-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt16Le = function(i) {\n  this.accommodate(2);\n  this.data.setInt16(this.write, i, true);\n  this.write += 2;\n  return this;\n};\n\n/**\n * Puts a 24-bit integer in this buffer in little-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt24Le = function(i) {\n  this.accommodate(3);\n  this.data.setInt8(this.write, i >> 16 & 0xFF);\n  this.data.setInt16(this.write, i >> 8 & 0xFFFF, true);\n  this.write += 3;\n  return this;\n};\n\n/**\n * Puts a 32-bit integer in this buffer in little-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt32Le = function(i) {\n  this.accommodate(4);\n  this.data.setInt32(this.write, i, true);\n  this.write += 4;\n  return this;\n};\n\n/**\n * Puts an n-bit integer in this buffer in big-endian order.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt = function(i, n) {\n  _checkBitsParam(n);\n  this.accommodate(n / 8);\n  do {\n    n -= 8;\n    this.data.setInt8(this.write++, (i >> n) & 0xFF);\n  } while(n > 0);\n  return this;\n};\n\n/**\n * Puts a signed n-bit integer in this buffer in big-endian order. Two's\n * complement representation is used.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putSignedInt = function(i, n) {\n  _checkBitsParam(n);\n  this.accommodate(n / 8);\n  if(i < 0) {\n    i += 2 << (n - 1);\n  }\n  return this.putInt(i, n);\n};\n\n/**\n * Gets a byte from this buffer and advances the read pointer by 1.\n *\n * @return the byte.\n */\nutil.DataBuffer.prototype.getByte = function() {\n  return this.data.getInt8(this.read++);\n};\n\n/**\n * Gets a uint16 from this buffer in big-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.DataBuffer.prototype.getInt16 = function() {\n  var rval = this.data.getInt16(this.read);\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in big-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.DataBuffer.prototype.getInt24 = function() {\n  var rval = (\n    this.data.getInt16(this.read) << 8 ^\n    this.data.getInt8(this.read + 2));\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in big-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.DataBuffer.prototype.getInt32 = function() {\n  var rval = this.data.getInt32(this.read);\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets a uint16 from this buffer in little-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.DataBuffer.prototype.getInt16Le = function() {\n  var rval = this.data.getInt16(this.read, true);\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in little-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.DataBuffer.prototype.getInt24Le = function() {\n  var rval = (\n    this.data.getInt8(this.read) ^\n    this.data.getInt16(this.read + 1, true) << 8);\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in little-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.DataBuffer.prototype.getInt32Le = function() {\n  var rval = this.data.getInt32(this.read, true);\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets an n-bit integer from this buffer in big-endian order and advances the\n * read pointer by n/8.\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.DataBuffer.prototype.getInt = function(n) {\n  _checkBitsParam(n);\n  var rval = 0;\n  do {\n    // TODO: Use (rval * 0x100) if adding support for 33 to 53 bits.\n    rval = (rval << 8) + this.data.getInt8(this.read++);\n    n -= 8;\n  } while(n > 0);\n  return rval;\n};\n\n/**\n * Gets a signed n-bit integer from this buffer in big-endian order, using\n * two's complement, and advances the read pointer by n/8.\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.DataBuffer.prototype.getSignedInt = function(n) {\n  // getInt checks n\n  var x = this.getInt(n);\n  var max = 2 << (n - 2);\n  if(x >= max) {\n    x -= max << 1;\n  }\n  return x;\n};\n\n/**\n * Reads bytes out as a binary encoded string and clears them from the\n * buffer.\n *\n * @param count the number of bytes to read, undefined or null for all.\n *\n * @return a binary encoded string of bytes.\n */\nutil.DataBuffer.prototype.getBytes = function(count) {\n  // TODO: deprecate this method, it is poorly named and\n  // this.toString('binary') replaces it\n  // add a toTypedArray()/toArrayBuffer() function\n  var rval;\n  if(count) {\n    // read count bytes\n    count = Math.min(this.length(), count);\n    rval = this.data.slice(this.read, this.read + count);\n    this.read += count;\n  } else if(count === 0) {\n    rval = '';\n  } else {\n    // read all bytes, optimize to only copy when needed\n    rval = (this.read === 0) ? this.data : this.data.slice(this.read);\n    this.clear();\n  }\n  return rval;\n};\n\n/**\n * Gets a binary encoded string of the bytes from this buffer without\n * modifying the read pointer.\n *\n * @param count the number of bytes to get, omit to get all.\n *\n * @return a string full of binary encoded characters.\n */\nutil.DataBuffer.prototype.bytes = function(count) {\n  // TODO: deprecate this method, it is poorly named, add \"getString()\"\n  return (typeof(count) === 'undefined' ?\n    this.data.slice(this.read) :\n    this.data.slice(this.read, this.read + count));\n};\n\n/**\n * Gets a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n *\n * @return the byte.\n */\nutil.DataBuffer.prototype.at = function(i) {\n  return this.data.getUint8(this.read + i);\n};\n\n/**\n * Puts a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.setAt = function(i, b) {\n  this.data.setUint8(i, b);\n  return this;\n};\n\n/**\n * Gets the last byte without modifying the read pointer.\n *\n * @return the last byte.\n */\nutil.DataBuffer.prototype.last = function() {\n  return this.data.getUint8(this.write - 1);\n};\n\n/**\n * Creates a copy of this buffer.\n *\n * @return the copy.\n */\nutil.DataBuffer.prototype.copy = function() {\n  return new util.DataBuffer(this);\n};\n\n/**\n * Compacts this buffer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.compact = function() {\n  if(this.read > 0) {\n    var src = new Uint8Array(this.data.buffer, this.read);\n    var dst = new Uint8Array(src.byteLength);\n    dst.set(src);\n    this.data = new DataView(dst);\n    this.write -= this.read;\n    this.read = 0;\n  }\n  return this;\n};\n\n/**\n * Clears this buffer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.clear = function() {\n  this.data = new DataView(new ArrayBuffer(0));\n  this.read = this.write = 0;\n  return this;\n};\n\n/**\n * Shortens this buffer by triming bytes off of the end of this buffer.\n *\n * @param count the number of bytes to trim off.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.truncate = function(count) {\n  this.write = Math.max(0, this.length() - count);\n  this.read = Math.min(this.read, this.write);\n  return this;\n};\n\n/**\n * Converts this buffer to a hexadecimal string.\n *\n * @return a hexadecimal string.\n */\nutil.DataBuffer.prototype.toHex = function() {\n  var rval = '';\n  for(var i = this.read; i < this.data.byteLength; ++i) {\n    var b = this.data.getUint8(i);\n    if(b < 16) {\n      rval += '0';\n    }\n    rval += b.toString(16);\n  }\n  return rval;\n};\n\n/**\n * Converts this buffer to a string, using the given encoding. If no\n * encoding is given, 'utf8' (UTF-8) is used.\n *\n * @param [encoding] the encoding to use: 'binary', 'utf8', 'utf16', 'hex',\n *          'base64' (default: 'utf8').\n *\n * @return a string representation of the bytes in this buffer.\n */\nutil.DataBuffer.prototype.toString = function(encoding) {\n  var view = new Uint8Array(this.data, this.read, this.length());\n  encoding = encoding || 'utf8';\n\n  // encode to string\n  if(encoding === 'binary' || encoding === 'raw') {\n    return util.binary.raw.encode(view);\n  }\n  if(encoding === 'hex') {\n    return util.binary.hex.encode(view);\n  }\n  if(encoding === 'base64') {\n    return util.binary.base64.encode(view);\n  }\n\n  // decode to text\n  if(encoding === 'utf8') {\n    return util.text.utf8.decode(view);\n  }\n  if(encoding === 'utf16') {\n    return util.text.utf16.decode(view);\n  }\n\n  throw new Error('Invalid encoding: ' + encoding);\n};\n\n/** End Buffer w/UInt8Array backing */\n\n/**\n * Creates a buffer that stores bytes. A value may be given to populate the\n * buffer with data. This value can either be string of encoded bytes or a\n * regular string of characters. When passing a string of binary encoded\n * bytes, the encoding `raw` should be given. This is also the default. When\n * passing a string of characters, the encoding `utf8` should be given.\n *\n * @param [input] a string with encoded bytes to store in the buffer.\n * @param [encoding] (default: 'raw', other: 'utf8').\n */\nutil.createBuffer = function(input, encoding) {\n  // TODO: deprecate, use new ByteBuffer() instead\n  encoding = encoding || 'raw';\n  if(input !== undefined && encoding === 'utf8') {\n    input = util.encodeUtf8(input);\n  }\n  return new util.ByteBuffer(input);\n};\n\n/**\n * Fills a string with a particular value. If you want the string to be a byte\n * string, pass in String.fromCharCode(theByte).\n *\n * @param c the character to fill the string with, use String.fromCharCode\n *          to fill the string with a byte value.\n * @param n the number of characters of value c to fill with.\n *\n * @return the filled string.\n */\nutil.fillString = function(c, n) {\n  var s = '';\n  while(n > 0) {\n    if(n & 1) {\n      s += c;\n    }\n    n >>>= 1;\n    if(n > 0) {\n      c += c;\n    }\n  }\n  return s;\n};\n\n/**\n * Performs a per byte XOR between two byte strings and returns the result as a\n * string of bytes.\n *\n * @param s1 first string of bytes.\n * @param s2 second string of bytes.\n * @param n the number of bytes to XOR.\n *\n * @return the XOR'd result.\n */\nutil.xorBytes = function(s1, s2, n) {\n  var s3 = '';\n  var b = '';\n  var t = '';\n  var i = 0;\n  var c = 0;\n  for(; n > 0; --n, ++i) {\n    b = s1.charCodeAt(i) ^ s2.charCodeAt(i);\n    if(c >= 10) {\n      s3 += t;\n      t = '';\n      c = 0;\n    }\n    t += String.fromCharCode(b);\n    ++c;\n  }\n  s3 += t;\n  return s3;\n};\n\n/**\n * Converts a hex string into a 'binary' encoded string of bytes.\n *\n * @param hex the hexadecimal string to convert.\n *\n * @return the binary-encoded string of bytes.\n */\nutil.hexToBytes = function(hex) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.hex.decode instead.\"\n  var rval = '';\n  var i = 0;\n  if(hex.length & 1 == 1) {\n    // odd number of characters, convert first character alone\n    i = 1;\n    rval += String.fromCharCode(parseInt(hex[0], 16));\n  }\n  // convert 2 characters (1 byte) at a time\n  for(; i < hex.length; i += 2) {\n    rval += String.fromCharCode(parseInt(hex.substr(i, 2), 16));\n  }\n  return rval;\n};\n\n/**\n * Converts a 'binary' encoded string of bytes to hex.\n *\n * @param bytes the byte string to convert.\n *\n * @return the string of hexadecimal characters.\n */\nutil.bytesToHex = function(bytes) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.hex.encode instead.\"\n  return util.createBuffer(bytes).toHex();\n};\n\n/**\n * Converts an 32-bit integer to 4-big-endian byte string.\n *\n * @param i the integer.\n *\n * @return the byte string.\n */\nutil.int32ToBytes = function(i) {\n  return (\n    String.fromCharCode(i >> 24 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n// base64 characters, reverse mapping\nvar _base64 =\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nvar _base64Idx = [\n/*43 -43 = 0*/\n/*'+',  1,  2,  3,'/' */\n   62, -1, -1, -1, 63,\n\n/*'0','1','2','3','4','5','6','7','8','9' */\n   52, 53, 54, 55, 56, 57, 58, 59, 60, 61,\n\n/*15, 16, 17,'=', 19, 20, 21 */\n  -1, -1, -1, 64, -1, -1, -1,\n\n/*65 - 43 = 22*/\n/*'A','B','C','D','E','F','G','H','I','J','K','L','M', */\n   0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,\n\n/*'N','O','P','Q','R','S','T','U','V','W','X','Y','Z' */\n   13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,\n\n/*91 - 43 = 48 */\n/*48, 49, 50, 51, 52, 53 */\n  -1, -1, -1, -1, -1, -1,\n\n/*97 - 43 = 54*/\n/*'a','b','c','d','e','f','g','h','i','j','k','l','m' */\n   26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38,\n\n/*'n','o','p','q','r','s','t','u','v','w','x','y','z' */\n   39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n];\n\n// base58 characters (Bitcoin alphabet)\nvar _base58 = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\n\n/**\n * Base64 encodes a 'binary' encoded string of bytes.\n *\n * @param input the binary encoded string of bytes to base64-encode.\n * @param maxline the maximum number of encoded characters per line to use,\n *          defaults to none.\n *\n * @return the base64-encoded output.\n */\nutil.encode64 = function(input, maxline) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.base64.encode instead.\"\n  var line = '';\n  var output = '';\n  var chr1, chr2, chr3;\n  var i = 0;\n  while(i < input.length) {\n    chr1 = input.charCodeAt(i++);\n    chr2 = input.charCodeAt(i++);\n    chr3 = input.charCodeAt(i++);\n\n    // encode 4 character group\n    line += _base64.charAt(chr1 >> 2);\n    line += _base64.charAt(((chr1 & 3) << 4) | (chr2 >> 4));\n    if(isNaN(chr2)) {\n      line += '==';\n    } else {\n      line += _base64.charAt(((chr2 & 15) << 2) | (chr3 >> 6));\n      line += isNaN(chr3) ? '=' : _base64.charAt(chr3 & 63);\n    }\n\n    if(maxline && line.length > maxline) {\n      output += line.substr(0, maxline) + '\\r\\n';\n      line = line.substr(maxline);\n    }\n  }\n  output += line;\n  return output;\n};\n\n/**\n * Base64 decodes a string into a 'binary' encoded string of bytes.\n *\n * @param input the base64-encoded input.\n *\n * @return the binary encoded string.\n */\nutil.decode64 = function(input) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.base64.decode instead.\"\n\n  // remove all non-base64 characters\n  input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n  var output = '';\n  var enc1, enc2, enc3, enc4;\n  var i = 0;\n\n  while(i < input.length) {\n    enc1 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc2 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc3 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc4 = _base64Idx[input.charCodeAt(i++) - 43];\n\n    output += String.fromCharCode((enc1 << 2) | (enc2 >> 4));\n    if(enc3 !== 64) {\n      // decoded at least 2 bytes\n      output += String.fromCharCode(((enc2 & 15) << 4) | (enc3 >> 2));\n      if(enc4 !== 64) {\n        // decoded 3 bytes\n        output += String.fromCharCode(((enc3 & 3) << 6) | enc4);\n      }\n    }\n  }\n\n  return output;\n};\n\n/**\n * Encodes the given string of characters (a standard JavaScript\n * string) as a binary encoded string where the bytes represent\n * a UTF-8 encoded string of characters. Non-ASCII characters will be\n * encoded as multiple bytes according to UTF-8.\n *\n * @param str a standard string of characters to encode.\n *\n * @return the binary encoded string.\n */\nutil.encodeUtf8 = function(str) {\n  return unescape(encodeURIComponent(str));\n};\n\n/**\n * Decodes a binary encoded string that contains bytes that\n * represent a UTF-8 encoded string of characters -- into a\n * string of characters (a standard JavaScript string).\n *\n * @param str the binary encoded string to decode.\n *\n * @return the resulting standard string of characters.\n */\nutil.decodeUtf8 = function(str) {\n  return decodeURIComponent(escape(str));\n};\n\n// binary encoding/decoding tools\n// FIXME: Experimental. Do not use yet.\nutil.binary = {\n  raw: {},\n  hex: {},\n  base64: {},\n  base58: {},\n  baseN : {\n    encode: baseN.encode,\n    decode: baseN.decode\n  }\n};\n\n/**\n * Encodes a Uint8Array as a binary-encoded string. This encoding uses\n * a value between 0 and 255 for each character.\n *\n * @param bytes the Uint8Array to encode.\n *\n * @return the binary-encoded string.\n */\nutil.binary.raw.encode = function(bytes) {\n  return String.fromCharCode.apply(null, bytes);\n};\n\n/**\n * Decodes a binary-encoded string to a Uint8Array. This encoding uses\n * a value between 0 and 255 for each character.\n *\n * @param str the binary-encoded string to decode.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.binary.raw.decode = function(str, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(str.length);\n  }\n  offset = offset || 0;\n  var j = offset;\n  for(var i = 0; i < str.length; ++i) {\n    out[j++] = str.charCodeAt(i);\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Encodes a 'binary' string, ArrayBuffer, DataView, TypedArray, or\n * ByteBuffer as a string of hexadecimal characters.\n *\n * @param bytes the bytes to convert.\n *\n * @return the string of hexadecimal characters.\n */\nutil.binary.hex.encode = util.bytesToHex;\n\n/**\n * Decodes a hex-encoded string to a Uint8Array.\n *\n * @param hex the hexadecimal string to convert.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.binary.hex.decode = function(hex, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(Math.ceil(hex.length / 2));\n  }\n  offset = offset || 0;\n  var i = 0, j = offset;\n  if(hex.length & 1) {\n    // odd number of characters, convert first character alone\n    i = 1;\n    out[j++] = parseInt(hex[0], 16);\n  }\n  // convert 2 characters (1 byte) at a time\n  for(; i < hex.length; i += 2) {\n    out[j++] = parseInt(hex.substr(i, 2), 16);\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Base64-encodes a Uint8Array.\n *\n * @param input the Uint8Array to encode.\n * @param maxline the maximum number of encoded characters per line to use,\n *          defaults to none.\n *\n * @return the base64-encoded output string.\n */\nutil.binary.base64.encode = function(input, maxline) {\n  var line = '';\n  var output = '';\n  var chr1, chr2, chr3;\n  var i = 0;\n  while(i < input.byteLength) {\n    chr1 = input[i++];\n    chr2 = input[i++];\n    chr3 = input[i++];\n\n    // encode 4 character group\n    line += _base64.charAt(chr1 >> 2);\n    line += _base64.charAt(((chr1 & 3) << 4) | (chr2 >> 4));\n    if(isNaN(chr2)) {\n      line += '==';\n    } else {\n      line += _base64.charAt(((chr2 & 15) << 2) | (chr3 >> 6));\n      line += isNaN(chr3) ? '=' : _base64.charAt(chr3 & 63);\n    }\n\n    if(maxline && line.length > maxline) {\n      output += line.substr(0, maxline) + '\\r\\n';\n      line = line.substr(maxline);\n    }\n  }\n  output += line;\n  return output;\n};\n\n/**\n * Decodes a base64-encoded string to a Uint8Array.\n *\n * @param input the base64-encoded input string.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.binary.base64.decode = function(input, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(Math.ceil(input.length / 4) * 3);\n  }\n\n  // remove all non-base64 characters\n  input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n  offset = offset || 0;\n  var enc1, enc2, enc3, enc4;\n  var i = 0, j = offset;\n\n  while(i < input.length) {\n    enc1 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc2 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc3 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc4 = _base64Idx[input.charCodeAt(i++) - 43];\n\n    out[j++] = (enc1 << 2) | (enc2 >> 4);\n    if(enc3 !== 64) {\n      // decoded at least 2 bytes\n      out[j++] = ((enc2 & 15) << 4) | (enc3 >> 2);\n      if(enc4 !== 64) {\n        // decoded 3 bytes\n        out[j++] = ((enc3 & 3) << 6) | enc4;\n      }\n    }\n  }\n\n  // make sure result is the exact decoded length\n  return output ? (j - offset) : out.subarray(0, j);\n};\n\n// add support for base58 encoding/decoding with Bitcoin alphabet\nutil.binary.base58.encode = function(input, maxline) {\n  return util.binary.baseN.encode(input, _base58, maxline);\n};\nutil.binary.base58.decode = function(input, maxline) {\n  return util.binary.baseN.decode(input, _base58, maxline);\n};\n\n// text encoding/decoding tools\n// FIXME: Experimental. Do not use yet.\nutil.text = {\n  utf8: {},\n  utf16: {}\n};\n\n/**\n * Encodes the given string as UTF-8 in a Uint8Array.\n *\n * @param str the string to encode.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.text.utf8.encode = function(str, output, offset) {\n  str = util.encodeUtf8(str);\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(str.length);\n  }\n  offset = offset || 0;\n  var j = offset;\n  for(var i = 0; i < str.length; ++i) {\n    out[j++] = str.charCodeAt(i);\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Decodes the UTF-8 contents from a Uint8Array.\n *\n * @param bytes the Uint8Array to decode.\n *\n * @return the resulting string.\n */\nutil.text.utf8.decode = function(bytes) {\n  return util.decodeUtf8(String.fromCharCode.apply(null, bytes));\n};\n\n/**\n * Encodes the given string as UTF-16 in a Uint8Array.\n *\n * @param str the string to encode.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.text.utf16.encode = function(str, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(str.length * 2);\n  }\n  var view = new Uint16Array(out.buffer);\n  offset = offset || 0;\n  var j = offset;\n  var k = offset;\n  for(var i = 0; i < str.length; ++i) {\n    view[k++] = str.charCodeAt(i);\n    j += 2;\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Decodes the UTF-16 contents from a Uint8Array.\n *\n * @param bytes the Uint8Array to decode.\n *\n * @return the resulting string.\n */\nutil.text.utf16.decode = function(bytes) {\n  return String.fromCharCode.apply(null, new Uint16Array(bytes.buffer));\n};\n\n/**\n * Deflates the given data using a flash interface.\n *\n * @param api the flash interface.\n * @param bytes the data.\n * @param raw true to return only raw deflate data, false to include zlib\n *          header and trailer.\n *\n * @return the deflated data as a string.\n */\nutil.deflate = function(api, bytes, raw) {\n  bytes = util.decode64(api.deflate(util.encode64(bytes)).rval);\n\n  // strip zlib header and trailer if necessary\n  if(raw) {\n    // zlib header is 2 bytes (CMF,FLG) where FLG indicates that\n    // there is a 4-byte DICT (alder-32) block before the data if\n    // its 5th bit is set\n    var start = 2;\n    var flg = bytes.charCodeAt(1);\n    if(flg & 0x20) {\n      start = 6;\n    }\n    // zlib trailer is 4 bytes of adler-32\n    bytes = bytes.substring(start, bytes.length - 4);\n  }\n\n  return bytes;\n};\n\n/**\n * Inflates the given data using a flash interface.\n *\n * @param api the flash interface.\n * @param bytes the data.\n * @param raw true if the incoming data has no zlib header or trailer and is\n *          raw DEFLATE data.\n *\n * @return the inflated data as a string, null on error.\n */\nutil.inflate = function(api, bytes, raw) {\n  // TODO: add zlib header and trailer if necessary/possible\n  var rval = api.inflate(util.encode64(bytes)).rval;\n  return (rval === null) ? null : util.decode64(rval);\n};\n\n/**\n * Sets a storage object.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param obj the storage object, null to remove.\n */\nvar _setStorageObject = function(api, id, obj) {\n  if(!api) {\n    throw new Error('WebStorage not available.');\n  }\n\n  var rval;\n  if(obj === null) {\n    rval = api.removeItem(id);\n  } else {\n    // json-encode and base64-encode object\n    obj = util.encode64(JSON.stringify(obj));\n    rval = api.setItem(id, obj);\n  }\n\n  // handle potential flash error\n  if(typeof(rval) !== 'undefined' && rval.rval !== true) {\n    var error = new Error(rval.error.message);\n    error.id = rval.error.id;\n    error.name = rval.error.name;\n    throw error;\n  }\n};\n\n/**\n * Gets a storage object.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n *\n * @return the storage object entry or null if none exists.\n */\nvar _getStorageObject = function(api, id) {\n  if(!api) {\n    throw new Error('WebStorage not available.');\n  }\n\n  // get the existing entry\n  var rval = api.getItem(id);\n\n  /* Note: We check api.init because we can't do (api == localStorage)\n    on IE because of \"Class doesn't support Automation\" exception. Only\n    the flash api has an init method so this works too, but we need a\n    better solution in the future. */\n\n  // flash returns item wrapped in an object, handle special case\n  if(api.init) {\n    if(rval.rval === null) {\n      if(rval.error) {\n        var error = new Error(rval.error.message);\n        error.id = rval.error.id;\n        error.name = rval.error.name;\n        throw error;\n      }\n      // no error, but also no item\n      rval = null;\n    } else {\n      rval = rval.rval;\n    }\n  }\n\n  // handle decoding\n  if(rval !== null) {\n    // base64-decode and json-decode data\n    rval = JSON.parse(util.decode64(rval));\n  }\n\n  return rval;\n};\n\n/**\n * Stores an item in local storage.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param data the data for the item (any javascript object/primitive).\n */\nvar _setItem = function(api, id, key, data) {\n  // get storage object\n  var obj = _getStorageObject(api, id);\n  if(obj === null) {\n    // create a new storage object\n    obj = {};\n  }\n  // update key\n  obj[key] = data;\n\n  // set storage object\n  _setStorageObject(api, id, obj);\n};\n\n/**\n * Gets an item from local storage.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n *\n * @return the item.\n */\nvar _getItem = function(api, id, key) {\n  // get storage object\n  var rval = _getStorageObject(api, id);\n  if(rval !== null) {\n    // return data at key\n    rval = (key in rval) ? rval[key] : null;\n  }\n\n  return rval;\n};\n\n/**\n * Removes an item from local storage.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n */\nvar _removeItem = function(api, id, key) {\n  // get storage object\n  var obj = _getStorageObject(api, id);\n  if(obj !== null && key in obj) {\n    // remove key\n    delete obj[key];\n\n    // see if entry has no keys remaining\n    var empty = true;\n    for(var prop in obj) {\n      empty = false;\n      break;\n    }\n    if(empty) {\n      // remove entry entirely if no keys are left\n      obj = null;\n    }\n\n    // set storage object\n    _setStorageObject(api, id, obj);\n  }\n};\n\n/**\n * Clears the local disk storage identified by the given ID.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n */\nvar _clearItems = function(api, id) {\n  _setStorageObject(api, id, null);\n};\n\n/**\n * Calls a storage function.\n *\n * @param func the function to call.\n * @param args the arguments for the function.\n * @param location the location argument.\n *\n * @return the return value from the function.\n */\nvar _callStorageFunction = function(func, args, location) {\n  var rval = null;\n\n  // default storage types\n  if(typeof(location) === 'undefined') {\n    location = ['web', 'flash'];\n  }\n\n  // apply storage types in order of preference\n  var type;\n  var done = false;\n  var exception = null;\n  for(var idx in location) {\n    type = location[idx];\n    try {\n      if(type === 'flash' || type === 'both') {\n        if(args[0] === null) {\n          throw new Error('Flash local storage not available.');\n        }\n        rval = func.apply(this, args);\n        done = (type === 'flash');\n      }\n      if(type === 'web' || type === 'both') {\n        args[0] = localStorage;\n        rval = func.apply(this, args);\n        done = true;\n      }\n    } catch(ex) {\n      exception = ex;\n    }\n    if(done) {\n      break;\n    }\n  }\n\n  if(!done) {\n    throw exception;\n  }\n\n  return rval;\n};\n\n/**\n * Stores an item on local disk.\n *\n * The available types of local storage include 'flash', 'web', and 'both'.\n *\n * The type 'flash' refers to flash local storage (SharedObject). In order\n * to use flash local storage, the 'api' parameter must be valid. The type\n * 'web' refers to WebStorage, if supported by the browser. The type 'both'\n * refers to storing using both 'flash' and 'web', not just one or the\n * other.\n *\n * The location array should list the storage types to use in order of\n * preference:\n *\n * ['flash']: flash only storage\n * ['web']: web only storage\n * ['both']: try to store in both\n * ['flash','web']: store in flash first, but if not available, 'web'\n * ['web','flash']: store in web first, but if not available, 'flash'\n *\n * The location array defaults to: ['web', 'flash']\n *\n * @param api the flash interface, null to use only WebStorage.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param data the data for the item (any javascript object/primitive).\n * @param location an array with the preferred types of storage to use.\n */\nutil.setItem = function(api, id, key, data, location) {\n  _callStorageFunction(_setItem, arguments, location);\n};\n\n/**\n * Gets an item on local disk.\n *\n * Set setItem() for details on storage types.\n *\n * @param api the flash interface, null to use only WebStorage.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param location an array with the preferred types of storage to use.\n *\n * @return the item.\n */\nutil.getItem = function(api, id, key, location) {\n  return _callStorageFunction(_getItem, arguments, location);\n};\n\n/**\n * Removes an item on local disk.\n *\n * Set setItem() for details on storage types.\n *\n * @param api the flash interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param location an array with the preferred types of storage to use.\n */\nutil.removeItem = function(api, id, key, location) {\n  _callStorageFunction(_removeItem, arguments, location);\n};\n\n/**\n * Clears the local disk storage identified by the given ID.\n *\n * Set setItem() for details on storage types.\n *\n * @param api the flash interface if flash is available.\n * @param id the storage ID to use.\n * @param location an array with the preferred types of storage to use.\n */\nutil.clearItems = function(api, id, location) {\n  _callStorageFunction(_clearItems, arguments, location);\n};\n\n/**\n * Check if an object is empty.\n *\n * Taken from:\n * http://stackoverflow.com/questions/679915/how-do-i-test-for-an-empty-javascript-object-from-json/679937#679937\n *\n * @param object the object to check.\n */\nutil.isEmpty = function(obj) {\n  for(var prop in obj) {\n    if(obj.hasOwnProperty(prop)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Format with simple printf-style interpolation.\n *\n * %%: literal '%'\n * %s,%o: convert next argument into a string.\n *\n * @param format the string to format.\n * @param ... arguments to interpolate into the format string.\n */\nutil.format = function(format) {\n  var re = /%./g;\n  // current match\n  var match;\n  // current part\n  var part;\n  // current arg index\n  var argi = 0;\n  // collected parts to recombine later\n  var parts = [];\n  // last index found\n  var last = 0;\n  // loop while matches remain\n  while((match = re.exec(format))) {\n    part = format.substring(last, re.lastIndex - 2);\n    // don't add empty strings (ie, parts between %s%s)\n    if(part.length > 0) {\n      parts.push(part);\n    }\n    last = re.lastIndex;\n    // switch on % code\n    var code = match[0][1];\n    switch(code) {\n    case 's':\n    case 'o':\n      // check if enough arguments were given\n      if(argi < arguments.length) {\n        parts.push(arguments[argi++ + 1]);\n      } else {\n        parts.push('<?>');\n      }\n      break;\n    // FIXME: do proper formating for numbers, etc\n    //case 'f':\n    //case 'd':\n    case '%':\n      parts.push('%');\n      break;\n    default:\n      parts.push('<%' + code + '?>');\n    }\n  }\n  // add trailing part of format string\n  parts.push(format.substring(last));\n  return parts.join('');\n};\n\n/**\n * Formats a number.\n *\n * http://snipplr.com/view/5945/javascript-numberformat--ported-from-php/\n */\nutil.formatNumber = function(number, decimals, dec_point, thousands_sep) {\n  // http://kevin.vanzonneveld.net\n  // +   original by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)\n  // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  // +     bugfix by: Michael White (http://crestidg.com)\n  // +     bugfix by: Benjamin Lupton\n  // +     bugfix by: Allan Jensen (http://www.winternet.no)\n  // +    revised by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)\n  // *     example 1: number_format(1234.5678, 2, '.', '');\n  // *     returns 1: 1234.57\n\n  var n = number, c = isNaN(decimals = Math.abs(decimals)) ? 2 : decimals;\n  var d = dec_point === undefined ? ',' : dec_point;\n  var t = thousands_sep === undefined ?\n   '.' : thousands_sep, s = n < 0 ? '-' : '';\n  var i = parseInt((n = Math.abs(+n || 0).toFixed(c)), 10) + '';\n  var j = (i.length > 3) ? i.length % 3 : 0;\n  return s + (j ? i.substr(0, j) + t : '') +\n    i.substr(j).replace(/(\\d{3})(?=\\d)/g, '$1' + t) +\n    (c ? d + Math.abs(n - i).toFixed(c).slice(2) : '');\n};\n\n/**\n * Formats a byte size.\n *\n * http://snipplr.com/view/5949/format-humanize-file-byte-size-presentation-in-javascript/\n */\nutil.formatSize = function(size) {\n  if(size >= 1073741824) {\n    size = util.formatNumber(size / 1073741824, 2, '.', '') + ' GiB';\n  } else if(size >= 1048576) {\n    size = util.formatNumber(size / 1048576, 2, '.', '') + ' MiB';\n  } else if(size >= 1024) {\n    size = util.formatNumber(size / 1024, 0) + ' KiB';\n  } else {\n    size = util.formatNumber(size, 0) + ' bytes';\n  }\n  return size;\n};\n\n/**\n * Converts an IPv4 or IPv6 string representation into bytes (in network order).\n *\n * @param ip the IPv4 or IPv6 address to convert.\n *\n * @return the 4-byte IPv6 or 16-byte IPv6 address or null if the address can't\n *         be parsed.\n */\nutil.bytesFromIP = function(ip) {\n  if(ip.indexOf('.') !== -1) {\n    return util.bytesFromIPv4(ip);\n  }\n  if(ip.indexOf(':') !== -1) {\n    return util.bytesFromIPv6(ip);\n  }\n  return null;\n};\n\n/**\n * Converts an IPv4 string representation into bytes (in network order).\n *\n * @param ip the IPv4 address to convert.\n *\n * @return the 4-byte address or null if the address can't be parsed.\n */\nutil.bytesFromIPv4 = function(ip) {\n  ip = ip.split('.');\n  if(ip.length !== 4) {\n    return null;\n  }\n  var b = util.createBuffer();\n  for(var i = 0; i < ip.length; ++i) {\n    var num = parseInt(ip[i], 10);\n    if(isNaN(num)) {\n      return null;\n    }\n    b.putByte(num);\n  }\n  return b.getBytes();\n};\n\n/**\n * Converts an IPv6 string representation into bytes (in network order).\n *\n * @param ip the IPv6 address to convert.\n *\n * @return the 16-byte address or null if the address can't be parsed.\n */\nutil.bytesFromIPv6 = function(ip) {\n  var blanks = 0;\n  ip = ip.split(':').filter(function(e) {\n    if(e.length === 0) ++blanks;\n    return true;\n  });\n  var zeros = (8 - ip.length + blanks) * 2;\n  var b = util.createBuffer();\n  for(var i = 0; i < 8; ++i) {\n    if(!ip[i] || ip[i].length === 0) {\n      b.fillWithByte(0, zeros);\n      zeros = 0;\n      continue;\n    }\n    var bytes = util.hexToBytes(ip[i]);\n    if(bytes.length < 2) {\n      b.putByte(0);\n    }\n    b.putBytes(bytes);\n  }\n  return b.getBytes();\n};\n\n/**\n * Converts 4-bytes into an IPv4 string representation or 16-bytes into\n * an IPv6 string representation. The bytes must be in network order.\n *\n * @param bytes the bytes to convert.\n *\n * @return the IPv4 or IPv6 string representation if 4 or 16 bytes,\n *         respectively, are given, otherwise null.\n */\nutil.bytesToIP = function(bytes) {\n  if(bytes.length === 4) {\n    return util.bytesToIPv4(bytes);\n  }\n  if(bytes.length === 16) {\n    return util.bytesToIPv6(bytes);\n  }\n  return null;\n};\n\n/**\n * Converts 4-bytes into an IPv4 string representation. The bytes must be\n * in network order.\n *\n * @param bytes the bytes to convert.\n *\n * @return the IPv4 string representation or null for an invalid # of bytes.\n */\nutil.bytesToIPv4 = function(bytes) {\n  if(bytes.length !== 4) {\n    return null;\n  }\n  var ip = [];\n  for(var i = 0; i < bytes.length; ++i) {\n    ip.push(bytes.charCodeAt(i));\n  }\n  return ip.join('.');\n};\n\n/**\n * Converts 16-bytes into an IPv16 string representation. The bytes must be\n * in network order.\n *\n * @param bytes the bytes to convert.\n *\n * @return the IPv16 string representation or null for an invalid # of bytes.\n */\nutil.bytesToIPv6 = function(bytes) {\n  if(bytes.length !== 16) {\n    return null;\n  }\n  var ip = [];\n  var zeroGroups = [];\n  var zeroMaxGroup = 0;\n  for(var i = 0; i < bytes.length; i += 2) {\n    var hex = util.bytesToHex(bytes[i] + bytes[i + 1]);\n    // canonicalize zero representation\n    while(hex[0] === '0' && hex !== '0') {\n      hex = hex.substr(1);\n    }\n    if(hex === '0') {\n      var last = zeroGroups[zeroGroups.length - 1];\n      var idx = ip.length;\n      if(!last || idx !== last.end + 1) {\n        zeroGroups.push({start: idx, end: idx});\n      } else {\n        last.end = idx;\n        if((last.end - last.start) >\n          (zeroGroups[zeroMaxGroup].end - zeroGroups[zeroMaxGroup].start)) {\n          zeroMaxGroup = zeroGroups.length - 1;\n        }\n      }\n    }\n    ip.push(hex);\n  }\n  if(zeroGroups.length > 0) {\n    var group = zeroGroups[zeroMaxGroup];\n    // only shorten group of length > 0\n    if(group.end - group.start > 0) {\n      ip.splice(group.start, group.end - group.start + 1, '');\n      if(group.start === 0) {\n        ip.unshift('');\n      }\n      if(group.end === 7) {\n        ip.push('');\n      }\n    }\n  }\n  return ip.join(':');\n};\n\n/**\n * Estimates the number of processes that can be run concurrently. If\n * creating Web Workers, keep in mind that the main JavaScript process needs\n * its own core.\n *\n * @param options the options to use:\n *          update true to force an update (not use the cached value).\n * @param callback(err, max) called once the operation completes.\n */\nutil.estimateCores = function(options, callback) {\n  if(typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n  options = options || {};\n  if('cores' in util && !options.update) {\n    return callback(null, util.cores);\n  }\n  if(typeof navigator !== 'undefined' &&\n    'hardwareConcurrency' in navigator &&\n    navigator.hardwareConcurrency > 0) {\n    util.cores = navigator.hardwareConcurrency;\n    return callback(null, util.cores);\n  }\n  if(typeof Worker === 'undefined') {\n    // workers not available\n    util.cores = 1;\n    return callback(null, util.cores);\n  }\n  if(typeof Blob === 'undefined') {\n    // can't estimate, default to 2\n    util.cores = 2;\n    return callback(null, util.cores);\n  }\n\n  // create worker concurrency estimation code as blob\n  var blobUrl = URL.createObjectURL(new Blob(['(',\n    function() {\n      self.addEventListener('message', function(e) {\n        // run worker for 4 ms\n        var st = Date.now();\n        var et = st + 4;\n        while(Date.now() < et);\n        self.postMessage({st: st, et: et});\n      });\n    }.toString(),\n  ')()'], {type: 'application/javascript'}));\n\n  // take 5 samples using 16 workers\n  sample([], 5, 16);\n\n  function sample(max, samples, numWorkers) {\n    if(samples === 0) {\n      // get overlap average\n      var avg = Math.floor(max.reduce(function(avg, x) {\n        return avg + x;\n      }, 0) / max.length);\n      util.cores = Math.max(1, avg);\n      URL.revokeObjectURL(blobUrl);\n      return callback(null, util.cores);\n    }\n    map(numWorkers, function(err, results) {\n      max.push(reduce(numWorkers, results));\n      sample(max, samples - 1, numWorkers);\n    });\n  }\n\n  function map(numWorkers, callback) {\n    var workers = [];\n    var results = [];\n    for(var i = 0; i < numWorkers; ++i) {\n      var worker = new Worker(blobUrl);\n      worker.addEventListener('message', function(e) {\n        results.push(e.data);\n        if(results.length === numWorkers) {\n          for(var i = 0; i < numWorkers; ++i) {\n            workers[i].terminate();\n          }\n          callback(null, results);\n        }\n      });\n      workers.push(worker);\n    }\n    for(var i = 0; i < numWorkers; ++i) {\n      workers[i].postMessage(i);\n    }\n  }\n\n  function reduce(numWorkers, results) {\n    // find overlapping time windows\n    var overlaps = [];\n    for(var n = 0; n < numWorkers; ++n) {\n      var r1 = results[n];\n      var overlap = overlaps[n] = [];\n      for(var i = 0; i < numWorkers; ++i) {\n        if(n === i) {\n          continue;\n        }\n        var r2 = results[i];\n        if((r1.st > r2.st && r1.st < r2.et) ||\n          (r2.st > r1.st && r2.st < r1.et)) {\n          overlap.push(i);\n        }\n      }\n    }\n    // get maximum overlaps ... don't include overlapping worker itself\n    // as the main JS process was also being scheduled during the work and\n    // would have to be subtracted from the estimate anyway\n    return overlaps.reduce(function(max, overlap) {\n      return Math.max(max, overlap.length);\n    }, 0);\n  }\n};\n","/**\n * Javascript implementation of PKCS#1 PSS signature padding.\n *\n * @author Stefan Siegl\n *\n * Copyright (c) 2012 Stefan Siegl <stesie@brokenpipe.de>\n */\nvar forge = require('./forge');\nrequire('./random');\nrequire('./util');\n\n// shortcut for PSS API\nvar pss = module.exports = forge.pss = forge.pss || {};\n\n/**\n * Creates a PSS signature scheme object.\n *\n * There are several ways to provide a salt for encoding:\n *\n * 1. Specify the saltLength only and the built-in PRNG will generate it.\n * 2. Specify the saltLength and a custom PRNG with 'getBytesSync' defined that\n *   will be used.\n * 3. Specify the salt itself as a forge.util.ByteBuffer.\n *\n * @param options the options to use:\n *          md the message digest object to use, a forge md instance.\n *          mgf the mask generation function to use, a forge mgf instance.\n *          [saltLength] the length of the salt in octets.\n *          [prng] the pseudo-random number generator to use to produce a salt.\n *          [salt] the salt to use when encoding.\n *\n * @return a signature scheme object.\n */\npss.create = function(options) {\n  // backwards compatibility w/legacy args: hash, mgf, sLen\n  if(arguments.length === 3) {\n    options = {\n      md: arguments[0],\n      mgf: arguments[1],\n      saltLength: arguments[2]\n    };\n  }\n\n  var hash = options.md;\n  var mgf = options.mgf;\n  var hLen = hash.digestLength;\n\n  var salt_ = options.salt || null;\n  if(typeof salt_ === 'string') {\n    // assume binary-encoded string\n    salt_ = forge.util.createBuffer(salt_);\n  }\n\n  var sLen;\n  if('saltLength' in options) {\n    sLen = options.saltLength;\n  } else if(salt_ !== null) {\n    sLen = salt_.length();\n  } else {\n    throw new Error('Salt length not specified or specific salt not given.');\n  }\n\n  if(salt_ !== null && salt_.length() !== sLen) {\n    throw new Error('Given salt length does not match length of given salt.');\n  }\n\n  var prng = options.prng || forge.random;\n\n  var pssobj = {};\n\n  /**\n   * Encodes a PSS signature.\n   *\n   * This function implements EMSA-PSS-ENCODE as per RFC 3447, section 9.1.1.\n   *\n   * @param md the message digest object with the hash to sign.\n   * @param modsBits the length of the RSA modulus in bits.\n   *\n   * @return the encoded message as a binary-encoded string of length\n   *           ceil((modBits - 1) / 8).\n   */\n  pssobj.encode = function(md, modBits) {\n    var i;\n    var emBits = modBits - 1;\n    var emLen = Math.ceil(emBits / 8);\n\n    /* 2. Let mHash = Hash(M), an octet string of length hLen. */\n    var mHash = md.digest().getBytes();\n\n    /* 3. If emLen < hLen + sLen + 2, output \"encoding error\" and stop. */\n    if(emLen < hLen + sLen + 2) {\n      throw new Error('Message is too long to encrypt.');\n    }\n\n    /* 4. Generate a random octet string salt of length sLen; if sLen = 0,\n     *    then salt is the empty string. */\n    var salt;\n    if(salt_ === null) {\n      salt = prng.getBytesSync(sLen);\n    } else {\n      salt = salt_.bytes();\n    }\n\n    /* 5. Let M' = (0x)00 00 00 00 00 00 00 00 || mHash || salt; */\n    var m_ = new forge.util.ByteBuffer();\n    m_.fillWithByte(0, 8);\n    m_.putBytes(mHash);\n    m_.putBytes(salt);\n\n    /* 6. Let H = Hash(M'), an octet string of length hLen. */\n    hash.start();\n    hash.update(m_.getBytes());\n    var h = hash.digest().getBytes();\n\n    /* 7. Generate an octet string PS consisting of emLen - sLen - hLen - 2\n     *    zero octets.  The length of PS may be 0. */\n    var ps = new forge.util.ByteBuffer();\n    ps.fillWithByte(0, emLen - sLen - hLen - 2);\n\n    /* 8. Let DB = PS || 0x01 || salt; DB is an octet string of length\n     *    emLen - hLen - 1. */\n    ps.putByte(0x01);\n    ps.putBytes(salt);\n    var db = ps.getBytes();\n\n    /* 9. Let dbMask = MGF(H, emLen - hLen - 1). */\n    var maskLen = emLen - hLen - 1;\n    var dbMask = mgf.generate(h, maskLen);\n\n    /* 10. Let maskedDB = DB \\xor dbMask. */\n    var maskedDB = '';\n    for(i = 0; i < maskLen; i++) {\n      maskedDB += String.fromCharCode(db.charCodeAt(i) ^ dbMask.charCodeAt(i));\n    }\n\n    /* 11. Set the leftmost 8emLen - emBits bits of the leftmost octet in\n     *     maskedDB to zero. */\n    var mask = (0xFF00 >> (8 * emLen - emBits)) & 0xFF;\n    maskedDB = String.fromCharCode(maskedDB.charCodeAt(0) & ~mask) +\n      maskedDB.substr(1);\n\n    /* 12. Let EM = maskedDB || H || 0xbc.\n     * 13. Output EM. */\n    return maskedDB + h + String.fromCharCode(0xbc);\n  };\n\n  /**\n   * Verifies a PSS signature.\n   *\n   * This function implements EMSA-PSS-VERIFY as per RFC 3447, section 9.1.2.\n   *\n   * @param mHash the message digest hash, as a binary-encoded string, to\n   *         compare against the signature.\n   * @param em the encoded message, as a binary-encoded string\n   *          (RSA decryption result).\n   * @param modsBits the length of the RSA modulus in bits.\n   *\n   * @return true if the signature was verified, false if not.\n   */\n  pssobj.verify = function(mHash, em, modBits) {\n    var i;\n    var emBits = modBits - 1;\n    var emLen = Math.ceil(emBits / 8);\n\n    /* c. Convert the message representative m to an encoded message EM\n     *    of length emLen = ceil((modBits - 1) / 8) octets, where modBits\n     *    is the length in bits of the RSA modulus n */\n    em = em.substr(-emLen);\n\n    /* 3. If emLen < hLen + sLen + 2, output \"inconsistent\" and stop. */\n    if(emLen < hLen + sLen + 2) {\n      throw new Error('Inconsistent parameters to PSS signature verification.');\n    }\n\n    /* 4. If the rightmost octet of EM does not have hexadecimal value\n     *    0xbc, output \"inconsistent\" and stop. */\n    if(em.charCodeAt(emLen - 1) !== 0xbc) {\n      throw new Error('Encoded message does not end in 0xBC.');\n    }\n\n    /* 5. Let maskedDB be the leftmost emLen - hLen - 1 octets of EM, and\n     *    let H be the next hLen octets. */\n    var maskLen = emLen - hLen - 1;\n    var maskedDB = em.substr(0, maskLen);\n    var h = em.substr(maskLen, hLen);\n\n    /* 6. If the leftmost 8emLen - emBits bits of the leftmost octet in\n     *    maskedDB are not all equal to zero, output \"inconsistent\" and stop. */\n    var mask = (0xFF00 >> (8 * emLen - emBits)) & 0xFF;\n    if((maskedDB.charCodeAt(0) & mask) !== 0) {\n      throw new Error('Bits beyond keysize not zero as expected.');\n    }\n\n    /* 7. Let dbMask = MGF(H, emLen - hLen - 1). */\n    var dbMask = mgf.generate(h, maskLen);\n\n    /* 8. Let DB = maskedDB \\xor dbMask. */\n    var db = '';\n    for(i = 0; i < maskLen; i++) {\n      db += String.fromCharCode(maskedDB.charCodeAt(i) ^ dbMask.charCodeAt(i));\n    }\n\n    /* 9. Set the leftmost 8emLen - emBits bits of the leftmost octet\n     * in DB to zero. */\n    db = String.fromCharCode(db.charCodeAt(0) & ~mask) + db.substr(1);\n\n    /* 10. If the emLen - hLen - sLen - 2 leftmost octets of DB are not zero\n     * or if the octet at position emLen - hLen - sLen - 1 (the leftmost\n     * position is \"position 1\") does not have hexadecimal value 0x01,\n     * output \"inconsistent\" and stop. */\n    var checkLen = emLen - hLen - sLen - 2;\n    for(i = 0; i < checkLen; i++) {\n      if(db.charCodeAt(i) !== 0x00) {\n        throw new Error('Leftmost octets not zero as expected');\n      }\n    }\n\n    if(db.charCodeAt(checkLen) !== 0x01) {\n      throw new Error('Inconsistent PSS signature, 0x01 marker not found');\n    }\n\n    /* 11. Let salt be the last sLen octets of DB. */\n    var salt = db.substr(-sLen);\n\n    /* 12.  Let M' = (0x)00 00 00 00 00 00 00 00 || mHash || salt */\n    var m_ = new forge.util.ByteBuffer();\n    m_.fillWithByte(0, 8);\n    m_.putBytes(mHash);\n    m_.putBytes(salt);\n\n    /* 13. Let H' = Hash(M'), an octet string of length hLen. */\n    hash.start();\n    hash.update(m_.getBytes());\n    var h_ = hash.digest().getBytes();\n\n    /* 14. If H = H', output \"consistent.\" Otherwise, output \"inconsistent.\" */\n    return h === h_;\n  };\n\n  return pssobj;\n};\n","/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};function X(){throw Error(\"act(...) is not supported in production builds of React.\");}\nexports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;exports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;\nexports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;exports.act=X;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=X;exports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};\nexports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};exports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};\nexports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};exports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.3.1\";\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * Javascript implementation of X.509 and related components (such as\n * Certification Signing Requests) of a Public Key Infrastructure.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2014 Digital Bazaar, Inc.\n *\n * The ASN.1 representation of an X.509v3 certificate is as follows\n * (see RFC 2459):\n *\n * Certificate ::= SEQUENCE {\n *   tbsCertificate       TBSCertificate,\n *   signatureAlgorithm   AlgorithmIdentifier,\n *   signatureValue       BIT STRING\n * }\n *\n * TBSCertificate ::= SEQUENCE {\n *   version         [0]  EXPLICIT Version DEFAULT v1,\n *   serialNumber         CertificateSerialNumber,\n *   signature            AlgorithmIdentifier,\n *   issuer               Name,\n *   validity             Validity,\n *   subject              Name,\n *   subjectPublicKeyInfo SubjectPublicKeyInfo,\n *   issuerUniqueID  [1]  IMPLICIT UniqueIdentifier OPTIONAL,\n *                        -- If present, version shall be v2 or v3\n *   subjectUniqueID [2]  IMPLICIT UniqueIdentifier OPTIONAL,\n *                        -- If present, version shall be v2 or v3\n *   extensions      [3]  EXPLICIT Extensions OPTIONAL\n *                        -- If present, version shall be v3\n * }\n *\n * Version ::= INTEGER  { v1(0), v2(1), v3(2) }\n *\n * CertificateSerialNumber ::= INTEGER\n *\n * Name ::= CHOICE {\n *   // only one possible choice for now\n *   RDNSequence\n * }\n *\n * RDNSequence ::= SEQUENCE OF RelativeDistinguishedName\n *\n * RelativeDistinguishedName ::= SET OF AttributeTypeAndValue\n *\n * AttributeTypeAndValue ::= SEQUENCE {\n *   type     AttributeType,\n *   value    AttributeValue\n * }\n * AttributeType ::= OBJECT IDENTIFIER\n * AttributeValue ::= ANY DEFINED BY AttributeType\n *\n * Validity ::= SEQUENCE {\n *   notBefore      Time,\n *   notAfter       Time\n * }\n *\n * Time ::= CHOICE {\n *   utcTime        UTCTime,\n *   generalTime    GeneralizedTime\n * }\n *\n * UniqueIdentifier ::= BIT STRING\n *\n * SubjectPublicKeyInfo ::= SEQUENCE {\n *   algorithm            AlgorithmIdentifier,\n *   subjectPublicKey     BIT STRING\n * }\n *\n * Extensions ::= SEQUENCE SIZE (1..MAX) OF Extension\n *\n * Extension ::= SEQUENCE {\n *   extnID      OBJECT IDENTIFIER,\n *   critical    BOOLEAN DEFAULT FALSE,\n *   extnValue   OCTET STRING\n * }\n *\n * The only key algorithm currently supported for PKI is RSA.\n *\n * RSASSA-PSS signatures are described in RFC 3447 and RFC 4055.\n *\n * PKCS#10 v1.7 describes certificate signing requests:\n *\n * CertificationRequestInfo:\n *\n * CertificationRequestInfo ::= SEQUENCE {\n *   version       INTEGER { v1(0) } (v1,...),\n *   subject       Name,\n *   subjectPKInfo SubjectPublicKeyInfo{{ PKInfoAlgorithms }},\n *   attributes    [0] Attributes{{ CRIAttributes }}\n * }\n *\n * Attributes { ATTRIBUTE:IOSet } ::= SET OF Attribute{{ IOSet }}\n *\n * CRIAttributes  ATTRIBUTE  ::= {\n *   ... -- add any locally defined attributes here -- }\n *\n * Attribute { ATTRIBUTE:IOSet } ::= SEQUENCE {\n *   type   ATTRIBUTE.&id({IOSet}),\n *   values SET SIZE(1..MAX) OF ATTRIBUTE.&Type({IOSet}{@type})\n * }\n *\n * CertificationRequest ::= SEQUENCE {\n *   certificationRequestInfo CertificationRequestInfo,\n *   signatureAlgorithm AlgorithmIdentifier{{ SignatureAlgorithms }},\n *   signature          BIT STRING\n * }\n */\nvar forge = require('./forge');\nrequire('./aes');\nrequire('./asn1');\nrequire('./des');\nrequire('./md');\nrequire('./mgf');\nrequire('./oids');\nrequire('./pem');\nrequire('./pss');\nrequire('./rsa');\nrequire('./util');\n\n// shortcut for asn.1 API\nvar asn1 = forge.asn1;\n\n/* Public Key Infrastructure (PKI) implementation. */\nvar pki = module.exports = forge.pki = forge.pki || {};\nvar oids = pki.oids;\n\n// short name OID mappings\nvar _shortNames = {};\n_shortNames['CN'] = oids['commonName'];\n_shortNames['commonName'] = 'CN';\n_shortNames['C'] = oids['countryName'];\n_shortNames['countryName'] = 'C';\n_shortNames['L'] = oids['localityName'];\n_shortNames['localityName'] = 'L';\n_shortNames['ST'] = oids['stateOrProvinceName'];\n_shortNames['stateOrProvinceName'] = 'ST';\n_shortNames['O'] = oids['organizationName'];\n_shortNames['organizationName'] = 'O';\n_shortNames['OU'] = oids['organizationalUnitName'];\n_shortNames['organizationalUnitName'] = 'OU';\n_shortNames['E'] = oids['emailAddress'];\n_shortNames['emailAddress'] = 'E';\n\n// validator for an SubjectPublicKeyInfo structure\n// Note: Currently only works with an RSA public key\nvar publicKeyValidator = forge.pki.rsa.publicKeyValidator;\n\n// validator for an X.509v3 certificate\nvar x509CertificateValidator = {\n  name: 'Certificate',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'Certificate.TBSCertificate',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    captureAsn1: 'tbsCertificate',\n    value: [{\n      name: 'Certificate.TBSCertificate.version',\n      tagClass: asn1.Class.CONTEXT_SPECIFIC,\n      type: 0,\n      constructed: true,\n      optional: true,\n      value: [{\n        name: 'Certificate.TBSCertificate.version.integer',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.INTEGER,\n        constructed: false,\n        capture: 'certVersion'\n      }]\n    }, {\n      name: 'Certificate.TBSCertificate.serialNumber',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.INTEGER,\n      constructed: false,\n      capture: 'certSerialNumber'\n    }, {\n      name: 'Certificate.TBSCertificate.signature',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      value: [{\n        name: 'Certificate.TBSCertificate.signature.algorithm',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.OID,\n        constructed: false,\n        capture: 'certinfoSignatureOid'\n      }, {\n        name: 'Certificate.TBSCertificate.signature.parameters',\n        tagClass: asn1.Class.UNIVERSAL,\n        optional: true,\n        captureAsn1: 'certinfoSignatureParams'\n      }]\n    }, {\n      name: 'Certificate.TBSCertificate.issuer',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      captureAsn1: 'certIssuer'\n    }, {\n      name: 'Certificate.TBSCertificate.validity',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      // Note: UTC and generalized times may both appear so the capture\n      // names are based on their detected order, the names used below\n      // are only for the common case, which validity time really means\n      // \"notBefore\" and which means \"notAfter\" will be determined by order\n      value: [{\n        // notBefore (Time) (UTC time case)\n        name: 'Certificate.TBSCertificate.validity.notBefore (utc)',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.UTCTIME,\n        constructed: false,\n        optional: true,\n        capture: 'certValidity1UTCTime'\n      }, {\n        // notBefore (Time) (generalized time case)\n        name: 'Certificate.TBSCertificate.validity.notBefore (generalized)',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.GENERALIZEDTIME,\n        constructed: false,\n        optional: true,\n        capture: 'certValidity2GeneralizedTime'\n      }, {\n        // notAfter (Time) (only UTC time is supported)\n        name: 'Certificate.TBSCertificate.validity.notAfter (utc)',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.UTCTIME,\n        constructed: false,\n        optional: true,\n        capture: 'certValidity3UTCTime'\n      }, {\n        // notAfter (Time) (only UTC time is supported)\n        name: 'Certificate.TBSCertificate.validity.notAfter (generalized)',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.GENERALIZEDTIME,\n        constructed: false,\n        optional: true,\n        capture: 'certValidity4GeneralizedTime'\n      }]\n    }, {\n      // Name (subject) (RDNSequence)\n      name: 'Certificate.TBSCertificate.subject',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      captureAsn1: 'certSubject'\n    },\n    // SubjectPublicKeyInfo\n    publicKeyValidator,\n    {\n      // issuerUniqueID (optional)\n      name: 'Certificate.TBSCertificate.issuerUniqueID',\n      tagClass: asn1.Class.CONTEXT_SPECIFIC,\n      type: 1,\n      constructed: true,\n      optional: true,\n      value: [{\n        name: 'Certificate.TBSCertificate.issuerUniqueID.id',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.BITSTRING,\n        constructed: false,\n        // TODO: support arbitrary bit length ids\n        captureBitStringValue: 'certIssuerUniqueId'\n      }]\n    }, {\n      // subjectUniqueID (optional)\n      name: 'Certificate.TBSCertificate.subjectUniqueID',\n      tagClass: asn1.Class.CONTEXT_SPECIFIC,\n      type: 2,\n      constructed: true,\n      optional: true,\n      value: [{\n        name: 'Certificate.TBSCertificate.subjectUniqueID.id',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.BITSTRING,\n        constructed: false,\n        // TODO: support arbitrary bit length ids\n        captureBitStringValue: 'certSubjectUniqueId'\n      }]\n    }, {\n      // Extensions (optional)\n      name: 'Certificate.TBSCertificate.extensions',\n      tagClass: asn1.Class.CONTEXT_SPECIFIC,\n      type: 3,\n      constructed: true,\n      captureAsn1: 'certExtensions',\n      optional: true\n    }]\n  }, {\n    // AlgorithmIdentifier (signature algorithm)\n    name: 'Certificate.signatureAlgorithm',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      // algorithm\n      name: 'Certificate.signatureAlgorithm.algorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'certSignatureOid'\n    }, {\n      name: 'Certificate.TBSCertificate.signature.parameters',\n      tagClass: asn1.Class.UNIVERSAL,\n      optional: true,\n      captureAsn1: 'certSignatureParams'\n    }]\n  }, {\n    // SignatureValue\n    name: 'Certificate.signatureValue',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.BITSTRING,\n    constructed: false,\n    captureBitStringValue: 'certSignature'\n  }]\n};\n\nvar rsassaPssParameterValidator = {\n  name: 'rsapss',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'rsapss.hashAlgorithm',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 0,\n    constructed: true,\n    value: [{\n      name: 'rsapss.hashAlgorithm.AlgorithmIdentifier',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Class.SEQUENCE,\n      constructed: true,\n      optional: true,\n      value: [{\n        name: 'rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.OID,\n        constructed: false,\n        capture: 'hashOid'\n        /* parameter block omitted, for SHA1 NULL anyhow. */\n      }]\n    }]\n  }, {\n    name: 'rsapss.maskGenAlgorithm',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 1,\n    constructed: true,\n    value: [{\n      name: 'rsapss.maskGenAlgorithm.AlgorithmIdentifier',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Class.SEQUENCE,\n      constructed: true,\n      optional: true,\n      value: [{\n        name: 'rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.OID,\n        constructed: false,\n        capture: 'maskGenOid'\n      }, {\n        name: 'rsapss.maskGenAlgorithm.AlgorithmIdentifier.params',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.SEQUENCE,\n        constructed: true,\n        value: [{\n          name: 'rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm',\n          tagClass: asn1.Class.UNIVERSAL,\n          type: asn1.Type.OID,\n          constructed: false,\n          capture: 'maskGenHashOid'\n          /* parameter block omitted, for SHA1 NULL anyhow. */\n        }]\n      }]\n    }]\n  }, {\n    name: 'rsapss.saltLength',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 2,\n    optional: true,\n    value: [{\n      name: 'rsapss.saltLength.saltLength',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Class.INTEGER,\n      constructed: false,\n      capture: 'saltLength'\n    }]\n  }, {\n    name: 'rsapss.trailerField',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 3,\n    optional: true,\n    value: [{\n      name: 'rsapss.trailer.trailer',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Class.INTEGER,\n      constructed: false,\n      capture: 'trailer'\n    }]\n  }]\n};\n\n// validator for a CertificationRequestInfo structure\nvar certificationRequestInfoValidator = {\n  name: 'CertificationRequestInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  captureAsn1: 'certificationRequestInfo',\n  value: [{\n    name: 'CertificationRequestInfo.integer',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'certificationRequestInfoVersion'\n  }, {\n    // Name (subject) (RDNSequence)\n    name: 'CertificationRequestInfo.subject',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    captureAsn1: 'certificationRequestInfoSubject'\n  },\n  // SubjectPublicKeyInfo\n  publicKeyValidator,\n  {\n    name: 'CertificationRequestInfo.attributes',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 0,\n    constructed: true,\n    optional: true,\n    capture: 'certificationRequestInfoAttributes',\n    value: [{\n      name: 'CertificationRequestInfo.attributes',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      value: [{\n        name: 'CertificationRequestInfo.attributes.type',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.OID,\n        constructed: false\n      }, {\n        name: 'CertificationRequestInfo.attributes.value',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.SET,\n        constructed: true\n      }]\n    }]\n  }]\n};\n\n// validator for a CertificationRequest structure\nvar certificationRequestValidator = {\n  name: 'CertificationRequest',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  captureAsn1: 'csr',\n  value: [\n    certificationRequestInfoValidator, {\n      // AlgorithmIdentifier (signature algorithm)\n      name: 'CertificationRequest.signatureAlgorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      value: [{\n        // algorithm\n        name: 'CertificationRequest.signatureAlgorithm.algorithm',\n        tagClass: asn1.Class.UNIVERSAL,\n        type: asn1.Type.OID,\n        constructed: false,\n        capture: 'csrSignatureOid'\n      }, {\n        name: 'CertificationRequest.signatureAlgorithm.parameters',\n        tagClass: asn1.Class.UNIVERSAL,\n        optional: true,\n        captureAsn1: 'csrSignatureParams'\n      }]\n    }, {\n      // signature\n      name: 'CertificationRequest.signature',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.BITSTRING,\n      constructed: false,\n      captureBitStringValue: 'csrSignature'\n    }\n  ]\n};\n\n/**\n * Converts an RDNSequence of ASN.1 DER-encoded RelativeDistinguishedName\n * sets into an array with objects that have type and value properties.\n *\n * @param rdn the RDNSequence to convert.\n * @param md a message digest to append type and value to if provided.\n */\npki.RDNAttributesAsArray = function(rdn, md) {\n  var rval = [];\n\n  // each value in 'rdn' in is a SET of RelativeDistinguishedName\n  var set, attr, obj;\n  for(var si = 0; si < rdn.value.length; ++si) {\n    // get the RelativeDistinguishedName set\n    set = rdn.value[si];\n\n    // each value in the SET is an AttributeTypeAndValue sequence\n    // containing first a type (an OID) and second a value (defined by\n    // the OID)\n    for(var i = 0; i < set.value.length; ++i) {\n      obj = {};\n      attr = set.value[i];\n      obj.type = asn1.derToOid(attr.value[0].value);\n      obj.value = attr.value[1].value;\n      obj.valueTagClass = attr.value[1].type;\n      // if the OID is known, get its name and short name\n      if(obj.type in oids) {\n        obj.name = oids[obj.type];\n        if(obj.name in _shortNames) {\n          obj.shortName = _shortNames[obj.name];\n        }\n      }\n      if(md) {\n        md.update(obj.type);\n        md.update(obj.value);\n      }\n      rval.push(obj);\n    }\n  }\n\n  return rval;\n};\n\n/**\n * Converts ASN.1 CRIAttributes into an array with objects that have type and\n * value properties.\n *\n * @param attributes the CRIAttributes to convert.\n */\npki.CRIAttributesAsArray = function(attributes) {\n  var rval = [];\n\n  // each value in 'attributes' in is a SEQUENCE with an OID and a SET\n  for(var si = 0; si < attributes.length; ++si) {\n    // get the attribute sequence\n    var seq = attributes[si];\n\n    // each value in the SEQUENCE containing first a type (an OID) and\n    // second a set of values (defined by the OID)\n    var type = asn1.derToOid(seq.value[0].value);\n    var values = seq.value[1].value;\n    for(var vi = 0; vi < values.length; ++vi) {\n      var obj = {};\n      obj.type = type;\n      obj.value = values[vi].value;\n      obj.valueTagClass = values[vi].type;\n      // if the OID is known, get its name and short name\n      if(obj.type in oids) {\n        obj.name = oids[obj.type];\n        if(obj.name in _shortNames) {\n          obj.shortName = _shortNames[obj.name];\n        }\n      }\n      // parse extensions\n      if(obj.type === oids.extensionRequest) {\n        obj.extensions = [];\n        for(var ei = 0; ei < obj.value.length; ++ei) {\n          obj.extensions.push(pki.certificateExtensionFromAsn1(obj.value[ei]));\n        }\n      }\n      rval.push(obj);\n    }\n  }\n\n  return rval;\n};\n\n/**\n * Gets an issuer or subject attribute from its name, type, or short name.\n *\n * @param obj the issuer or subject object.\n * @param options a short name string or an object with:\n *          shortName the short name for the attribute.\n *          name the name for the attribute.\n *          type the type for the attribute.\n *\n * @return the attribute.\n */\nfunction _getAttribute(obj, options) {\n  if(typeof options === 'string') {\n    options = {shortName: options};\n  }\n\n  var rval = null;\n  var attr;\n  for(var i = 0; rval === null && i < obj.attributes.length; ++i) {\n    attr = obj.attributes[i];\n    if(options.type && options.type === attr.type) {\n      rval = attr;\n    } else if(options.name && options.name === attr.name) {\n      rval = attr;\n    } else if(options.shortName && options.shortName === attr.shortName) {\n      rval = attr;\n    }\n  }\n  return rval;\n}\n\n/**\n * Converts signature parameters from ASN.1 structure.\n *\n * Currently only RSASSA-PSS supported.  The PKCS#1 v1.5 signature scheme had\n * no parameters.\n *\n * RSASSA-PSS-params  ::=  SEQUENCE  {\n *   hashAlgorithm      [0] HashAlgorithm DEFAULT\n *                             sha1Identifier,\n *   maskGenAlgorithm   [1] MaskGenAlgorithm DEFAULT\n *                             mgf1SHA1Identifier,\n *   saltLength         [2] INTEGER DEFAULT 20,\n *   trailerField       [3] INTEGER DEFAULT 1\n * }\n *\n * HashAlgorithm  ::=  AlgorithmIdentifier\n *\n * MaskGenAlgorithm  ::=  AlgorithmIdentifier\n *\n * AlgorithmIdentifer ::= SEQUENCE {\n *   algorithm OBJECT IDENTIFIER,\n *   parameters ANY DEFINED BY algorithm OPTIONAL\n * }\n *\n * @param oid The OID specifying the signature algorithm\n * @param obj The ASN.1 structure holding the parameters\n * @param fillDefaults Whether to use return default values where omitted\n * @return signature parameter object\n */\nvar _readSignatureParameters = function(oid, obj, fillDefaults) {\n  var params = {};\n\n  if(oid !== oids['RSASSA-PSS']) {\n    return params;\n  }\n\n  if(fillDefaults) {\n    params = {\n      hash: {\n        algorithmOid: oids['sha1']\n      },\n      mgf: {\n        algorithmOid: oids['mgf1'],\n        hash: {\n          algorithmOid: oids['sha1']\n        }\n      },\n      saltLength: 20\n    };\n  }\n\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(obj, rsassaPssParameterValidator, capture, errors)) {\n    var error = new Error('Cannot read RSASSA-PSS parameter block.');\n    error.errors = errors;\n    throw error;\n  }\n\n  if(capture.hashOid !== undefined) {\n    params.hash = params.hash || {};\n    params.hash.algorithmOid = asn1.derToOid(capture.hashOid);\n  }\n\n  if(capture.maskGenOid !== undefined) {\n    params.mgf = params.mgf || {};\n    params.mgf.algorithmOid = asn1.derToOid(capture.maskGenOid);\n    params.mgf.hash = params.mgf.hash || {};\n    params.mgf.hash.algorithmOid = asn1.derToOid(capture.maskGenHashOid);\n  }\n\n  if(capture.saltLength !== undefined) {\n    params.saltLength = capture.saltLength.charCodeAt(0);\n  }\n\n  return params;\n};\n\n/**\n * Create signature digest for OID.\n *\n * @param options\n *   signatureOid: the OID specifying the signature algorithm.\n *   type: a human readable type for error messages\n * @return a created md instance. throws if unknown oid.\n */\nvar _createSignatureDigest = function(options) {\n  switch(oids[options.signatureOid]) {\n    case 'sha1WithRSAEncryption':\n    // deprecated alias\n    case 'sha1WithRSASignature':\n      return forge.md.sha1.create();\n    case 'md5WithRSAEncryption':\n      return forge.md.md5.create();\n    case 'sha256WithRSAEncryption':\n      return forge.md.sha256.create();\n    case 'sha384WithRSAEncryption':\n      return forge.md.sha384.create();\n    case 'sha512WithRSAEncryption':\n      return forge.md.sha512.create();\n    case 'RSASSA-PSS':\n      return forge.md.sha256.create();\n    default:\n      var error = new Error(\n        'Could not compute ' + options.type + ' digest. ' +\n        'Unknown signature OID.');\n      error.signatureOid = options.signatureOid;\n      throw error;\n  }\n};\n\n/**\n * Verify signature on certificate or CSR.\n *\n * @param options:\n *   certificate the certificate or CSR to verify.\n *   md the signature digest.\n *   signature the signature\n * @return a created md instance. throws if unknown oid.\n */\nvar _verifySignature = function(options) {\n  var cert = options.certificate;\n  var scheme;\n\n  switch(cert.signatureOid) {\n    case oids.sha1WithRSAEncryption:\n    // deprecated alias\n    case oids.sha1WithRSASignature:\n      /* use PKCS#1 v1.5 padding scheme */\n      break;\n    case oids['RSASSA-PSS']:\n      var hash, mgf;\n\n      /* initialize mgf */\n      hash = oids[cert.signatureParameters.mgf.hash.algorithmOid];\n      if(hash === undefined || forge.md[hash] === undefined) {\n        var error = new Error('Unsupported MGF hash function.');\n        error.oid = cert.signatureParameters.mgf.hash.algorithmOid;\n        error.name = hash;\n        throw error;\n      }\n\n      mgf = oids[cert.signatureParameters.mgf.algorithmOid];\n      if(mgf === undefined || forge.mgf[mgf] === undefined) {\n        var error = new Error('Unsupported MGF function.');\n        error.oid = cert.signatureParameters.mgf.algorithmOid;\n        error.name = mgf;\n        throw error;\n      }\n\n      mgf = forge.mgf[mgf].create(forge.md[hash].create());\n\n      /* initialize hash function */\n      hash = oids[cert.signatureParameters.hash.algorithmOid];\n      if(hash === undefined || forge.md[hash] === undefined) {\n        var error = new Error('Unsupported RSASSA-PSS hash function.');\n        error.oid = cert.signatureParameters.hash.algorithmOid;\n        error.name = hash;\n        throw error;\n      }\n\n      scheme = forge.pss.create(\n        forge.md[hash].create(), mgf, cert.signatureParameters.saltLength\n      );\n      break;\n  }\n\n  // verify signature on cert using public key\n  return cert.publicKey.verify(\n    options.md.digest().getBytes(), options.signature, scheme\n  );\n};\n\n/**\n * Converts an X.509 certificate from PEM format.\n *\n * Note: If the certificate is to be verified then compute hash should\n * be set to true. This will scan the TBSCertificate part of the ASN.1\n * object while it is converted so it doesn't need to be converted back\n * to ASN.1-DER-encoding later.\n *\n * @param pem the PEM-formatted certificate.\n * @param computeHash true to compute the hash for verification.\n * @param strict true to be strict when checking ASN.1 value lengths, false to\n *          allow truncated values (default: true).\n *\n * @return the certificate.\n */\npki.certificateFromPem = function(pem, computeHash, strict) {\n  var msg = forge.pem.decode(pem)[0];\n\n  if(msg.type !== 'CERTIFICATE' &&\n    msg.type !== 'X509 CERTIFICATE' &&\n    msg.type !== 'TRUSTED CERTIFICATE') {\n    var error = new Error(\n      'Could not convert certificate from PEM; PEM header type ' +\n      'is not \"CERTIFICATE\", \"X509 CERTIFICATE\", or \"TRUSTED CERTIFICATE\".');\n    error.headerType = msg.type;\n    throw error;\n  }\n  if(msg.procType && msg.procType.type === 'ENCRYPTED') {\n    throw new Error(\n      'Could not convert certificate from PEM; PEM is encrypted.');\n  }\n\n  // convert DER to ASN.1 object\n  var obj = asn1.fromDer(msg.body, strict);\n\n  return pki.certificateFromAsn1(obj, computeHash);\n};\n\n/**\n * Converts an X.509 certificate to PEM format.\n *\n * @param cert the certificate.\n * @param maxline the maximum characters per line, defaults to 64.\n *\n * @return the PEM-formatted certificate.\n */\npki.certificateToPem = function(cert, maxline) {\n  // convert to ASN.1, then DER, then PEM-encode\n  var msg = {\n    type: 'CERTIFICATE',\n    body: asn1.toDer(pki.certificateToAsn1(cert)).getBytes()\n  };\n  return forge.pem.encode(msg, {maxline: maxline});\n};\n\n/**\n * Converts an RSA public key from PEM format.\n *\n * @param pem the PEM-formatted public key.\n *\n * @return the public key.\n */\npki.publicKeyFromPem = function(pem) {\n  var msg = forge.pem.decode(pem)[0];\n\n  if(msg.type !== 'PUBLIC KEY' && msg.type !== 'RSA PUBLIC KEY') {\n    var error = new Error('Could not convert public key from PEM; PEM header ' +\n      'type is not \"PUBLIC KEY\" or \"RSA PUBLIC KEY\".');\n    error.headerType = msg.type;\n    throw error;\n  }\n  if(msg.procType && msg.procType.type === 'ENCRYPTED') {\n    throw new Error('Could not convert public key from PEM; PEM is encrypted.');\n  }\n\n  // convert DER to ASN.1 object\n  var obj = asn1.fromDer(msg.body);\n\n  return pki.publicKeyFromAsn1(obj);\n};\n\n/**\n * Converts an RSA public key to PEM format (using a SubjectPublicKeyInfo).\n *\n * @param key the public key.\n * @param maxline the maximum characters per line, defaults to 64.\n *\n * @return the PEM-formatted public key.\n */\npki.publicKeyToPem = function(key, maxline) {\n  // convert to ASN.1, then DER, then PEM-encode\n  var msg = {\n    type: 'PUBLIC KEY',\n    body: asn1.toDer(pki.publicKeyToAsn1(key)).getBytes()\n  };\n  return forge.pem.encode(msg, {maxline: maxline});\n};\n\n/**\n * Converts an RSA public key to PEM format (using an RSAPublicKey).\n *\n * @param key the public key.\n * @param maxline the maximum characters per line, defaults to 64.\n *\n * @return the PEM-formatted public key.\n */\npki.publicKeyToRSAPublicKeyPem = function(key, maxline) {\n  // convert to ASN.1, then DER, then PEM-encode\n  var msg = {\n    type: 'RSA PUBLIC KEY',\n    body: asn1.toDer(pki.publicKeyToRSAPublicKey(key)).getBytes()\n  };\n  return forge.pem.encode(msg, {maxline: maxline});\n};\n\n/**\n * Gets a fingerprint for the given public key.\n *\n * @param options the options to use.\n *          [md] the message digest object to use (defaults to forge.md.sha1).\n *          [type] the type of fingerprint, such as 'RSAPublicKey',\n *            'SubjectPublicKeyInfo' (defaults to 'RSAPublicKey').\n *          [encoding] an alternative output encoding, such as 'hex'\n *            (defaults to none, outputs a byte buffer).\n *          [delimiter] the delimiter to use between bytes for 'hex' encoded\n *            output, eg: ':' (defaults to none).\n *\n * @return the fingerprint as a byte buffer or other encoding based on options.\n */\npki.getPublicKeyFingerprint = function(key, options) {\n  options = options || {};\n  var md = options.md || forge.md.sha1.create();\n  var type = options.type || 'RSAPublicKey';\n\n  var bytes;\n  switch(type) {\n    case 'RSAPublicKey':\n      bytes = asn1.toDer(pki.publicKeyToRSAPublicKey(key)).getBytes();\n      break;\n    case 'SubjectPublicKeyInfo':\n      bytes = asn1.toDer(pki.publicKeyToAsn1(key)).getBytes();\n      break;\n    default:\n      throw new Error('Unknown fingerprint type \"' + options.type + '\".');\n  }\n\n  // hash public key bytes\n  md.start();\n  md.update(bytes);\n  var digest = md.digest();\n  if(options.encoding === 'hex') {\n    var hex = digest.toHex();\n    if(options.delimiter) {\n      return hex.match(/.{2}/g).join(options.delimiter);\n    }\n    return hex;\n  } else if(options.encoding === 'binary') {\n    return digest.getBytes();\n  } else if(options.encoding) {\n    throw new Error('Unknown encoding \"' + options.encoding + '\".');\n  }\n  return digest;\n};\n\n/**\n * Converts a PKCS#10 certification request (CSR) from PEM format.\n *\n * Note: If the certification request is to be verified then compute hash\n * should be set to true. This will scan the CertificationRequestInfo part of\n * the ASN.1 object while it is converted so it doesn't need to be converted\n * back to ASN.1-DER-encoding later.\n *\n * @param pem the PEM-formatted certificate.\n * @param computeHash true to compute the hash for verification.\n * @param strict true to be strict when checking ASN.1 value lengths, false to\n *          allow truncated values (default: true).\n *\n * @return the certification request (CSR).\n */\npki.certificationRequestFromPem = function(pem, computeHash, strict) {\n  var msg = forge.pem.decode(pem)[0];\n\n  if(msg.type !== 'CERTIFICATE REQUEST') {\n    var error = new Error('Could not convert certification request from PEM; ' +\n      'PEM header type is not \"CERTIFICATE REQUEST\".');\n    error.headerType = msg.type;\n    throw error;\n  }\n  if(msg.procType && msg.procType.type === 'ENCRYPTED') {\n    throw new Error('Could not convert certification request from PEM; ' +\n      'PEM is encrypted.');\n  }\n\n  // convert DER to ASN.1 object\n  var obj = asn1.fromDer(msg.body, strict);\n\n  return pki.certificationRequestFromAsn1(obj, computeHash);\n};\n\n/**\n * Converts a PKCS#10 certification request (CSR) to PEM format.\n *\n * @param csr the certification request.\n * @param maxline the maximum characters per line, defaults to 64.\n *\n * @return the PEM-formatted certification request.\n */\npki.certificationRequestToPem = function(csr, maxline) {\n  // convert to ASN.1, then DER, then PEM-encode\n  var msg = {\n    type: 'CERTIFICATE REQUEST',\n    body: asn1.toDer(pki.certificationRequestToAsn1(csr)).getBytes()\n  };\n  return forge.pem.encode(msg, {maxline: maxline});\n};\n\n/**\n * Creates an empty X.509v3 RSA certificate.\n *\n * @return the certificate.\n */\npki.createCertificate = function() {\n  var cert = {};\n  cert.version = 0x02;\n  cert.serialNumber = '00';\n  cert.signatureOid = null;\n  cert.signature = null;\n  cert.siginfo = {};\n  cert.siginfo.algorithmOid = null;\n  cert.validity = {};\n  cert.validity.notBefore = new Date();\n  cert.validity.notAfter = new Date();\n\n  cert.issuer = {};\n  cert.issuer.getField = function(sn) {\n    return _getAttribute(cert.issuer, sn);\n  };\n  cert.issuer.addField = function(attr) {\n    _fillMissingFields([attr]);\n    cert.issuer.attributes.push(attr);\n  };\n  cert.issuer.attributes = [];\n  cert.issuer.hash = null;\n\n  cert.subject = {};\n  cert.subject.getField = function(sn) {\n    return _getAttribute(cert.subject, sn);\n  };\n  cert.subject.addField = function(attr) {\n    _fillMissingFields([attr]);\n    cert.subject.attributes.push(attr);\n  };\n  cert.subject.attributes = [];\n  cert.subject.hash = null;\n\n  cert.extensions = [];\n  cert.publicKey = null;\n  cert.md = null;\n\n  /**\n   * Sets the subject of this certificate.\n   *\n   * @param attrs the array of subject attributes to use.\n   * @param uniqueId an optional a unique ID to use.\n   */\n  cert.setSubject = function(attrs, uniqueId) {\n    // set new attributes, clear hash\n    _fillMissingFields(attrs);\n    cert.subject.attributes = attrs;\n    delete cert.subject.uniqueId;\n    if(uniqueId) {\n      // TODO: support arbitrary bit length ids\n      cert.subject.uniqueId = uniqueId;\n    }\n    cert.subject.hash = null;\n  };\n\n  /**\n   * Sets the issuer of this certificate.\n   *\n   * @param attrs the array of issuer attributes to use.\n   * @param uniqueId an optional a unique ID to use.\n   */\n  cert.setIssuer = function(attrs, uniqueId) {\n    // set new attributes, clear hash\n    _fillMissingFields(attrs);\n    cert.issuer.attributes = attrs;\n    delete cert.issuer.uniqueId;\n    if(uniqueId) {\n      // TODO: support arbitrary bit length ids\n      cert.issuer.uniqueId = uniqueId;\n    }\n    cert.issuer.hash = null;\n  };\n\n  /**\n   * Sets the extensions of this certificate.\n   *\n   * @param exts the array of extensions to use.\n   */\n  cert.setExtensions = function(exts) {\n    for(var i = 0; i < exts.length; ++i) {\n      _fillMissingExtensionFields(exts[i], {cert: cert});\n    }\n    // set new extensions\n    cert.extensions = exts;\n  };\n\n  /**\n   * Gets an extension by its name or id.\n   *\n   * @param options the name to use or an object with:\n   *          name the name to use.\n   *          id the id to use.\n   *\n   * @return the extension or null if not found.\n   */\n  cert.getExtension = function(options) {\n    if(typeof options === 'string') {\n      options = {name: options};\n    }\n\n    var rval = null;\n    var ext;\n    for(var i = 0; rval === null && i < cert.extensions.length; ++i) {\n      ext = cert.extensions[i];\n      if(options.id && ext.id === options.id) {\n        rval = ext;\n      } else if(options.name && ext.name === options.name) {\n        rval = ext;\n      }\n    }\n    return rval;\n  };\n\n  /**\n   * Signs this certificate using the given private key.\n   *\n   * @param key the private key to sign with.\n   * @param md the message digest object to use (defaults to forge.md.sha1).\n   */\n  cert.sign = function(key, md) {\n    // TODO: get signature OID from private key\n    cert.md = md || forge.md.sha1.create();\n    var algorithmOid = oids[cert.md.algorithm + 'WithRSAEncryption'];\n    if(!algorithmOid) {\n      var error = new Error('Could not compute certificate digest. ' +\n        'Unknown message digest algorithm OID.');\n      error.algorithm = cert.md.algorithm;\n      throw error;\n    }\n    cert.signatureOid = cert.siginfo.algorithmOid = algorithmOid;\n\n    // get TBSCertificate, convert to DER\n    cert.tbsCertificate = pki.getTBSCertificate(cert);\n    var bytes = asn1.toDer(cert.tbsCertificate);\n\n    // digest and sign\n    cert.md.update(bytes.getBytes());\n    cert.signature = key.sign(cert.md);\n  };\n\n  /**\n   * Attempts verify the signature on the passed certificate using this\n   * certificate's public key.\n   *\n   * @param child the certificate to verify.\n   *\n   * @return true if verified, false if not.\n   */\n  cert.verify = function(child) {\n    var rval = false;\n\n    if(!cert.issued(child)) {\n      var issuer = child.issuer;\n      var subject = cert.subject;\n      var error = new Error(\n        'The parent certificate did not issue the given child ' +\n        'certificate; the child certificate\\'s issuer does not match the ' +\n        'parent\\'s subject.');\n      error.expectedIssuer = subject.attributes;\n      error.actualIssuer = issuer.attributes;\n      throw error;\n    }\n\n    var md = child.md;\n    if(md === null) {\n      // create digest for OID signature types\n      md = _createSignatureDigest({\n        signatureOid: child.signatureOid,\n        type: 'certificate'\n      });\n\n      // produce DER formatted TBSCertificate and digest it\n      var tbsCertificate = child.tbsCertificate || pki.getTBSCertificate(child);\n      var bytes = asn1.toDer(tbsCertificate);\n      md.update(bytes.getBytes());\n    }\n\n    if(md !== null) {\n      rval = _verifySignature({\n        certificate: cert, md: md, signature: child.signature\n      });\n    }\n\n    return rval;\n  };\n\n  /**\n   * Returns true if this certificate's issuer matches the passed\n   * certificate's subject. Note that no signature check is performed.\n   *\n   * @param parent the certificate to check.\n   *\n   * @return true if this certificate's issuer matches the passed certificate's\n   *         subject.\n   */\n  cert.isIssuer = function(parent) {\n    var rval = false;\n\n    var i = cert.issuer;\n    var s = parent.subject;\n\n    // compare hashes if present\n    if(i.hash && s.hash) {\n      rval = (i.hash === s.hash);\n    } else if(i.attributes.length === s.attributes.length) {\n      // all attributes are the same so issuer matches subject\n      rval = true;\n      var iattr, sattr;\n      for(var n = 0; rval && n < i.attributes.length; ++n) {\n        iattr = i.attributes[n];\n        sattr = s.attributes[n];\n        if(iattr.type !== sattr.type || iattr.value !== sattr.value) {\n          // attribute mismatch\n          rval = false;\n        }\n      }\n    }\n\n    return rval;\n  };\n\n  /**\n   * Returns true if this certificate's subject matches the issuer of the\n   * given certificate). Note that not signature check is performed.\n   *\n   * @param child the certificate to check.\n   *\n   * @return true if this certificate's subject matches the passed\n   *         certificate's issuer.\n   */\n  cert.issued = function(child) {\n    return child.isIssuer(cert);\n  };\n\n  /**\n   * Generates the subjectKeyIdentifier for this certificate as byte buffer.\n   *\n   * @return the subjectKeyIdentifier for this certificate as byte buffer.\n   */\n  cert.generateSubjectKeyIdentifier = function() {\n    /* See: 4.2.1.2 section of the the RFC3280, keyIdentifier is either:\n\n      (1) The keyIdentifier is composed of the 160-bit SHA-1 hash of the\n        value of the BIT STRING subjectPublicKey (excluding the tag,\n        length, and number of unused bits).\n\n      (2) The keyIdentifier is composed of a four bit type field with\n        the value 0100 followed by the least significant 60 bits of the\n        SHA-1 hash of the value of the BIT STRING subjectPublicKey\n        (excluding the tag, length, and number of unused bit string bits).\n    */\n\n    // skipping the tag, length, and number of unused bits is the same\n    // as just using the RSAPublicKey (for RSA keys, which are the\n    // only ones supported)\n    return pki.getPublicKeyFingerprint(cert.publicKey, {type: 'RSAPublicKey'});\n  };\n\n  /**\n   * Verifies the subjectKeyIdentifier extension value for this certificate\n   * against its public key. If no extension is found, false will be\n   * returned.\n   *\n   * @return true if verified, false if not.\n   */\n  cert.verifySubjectKeyIdentifier = function() {\n    var oid = oids['subjectKeyIdentifier'];\n    for(var i = 0; i < cert.extensions.length; ++i) {\n      var ext = cert.extensions[i];\n      if(ext.id === oid) {\n        var ski = cert.generateSubjectKeyIdentifier().getBytes();\n        return (forge.util.hexToBytes(ext.subjectKeyIdentifier) === ski);\n      }\n    }\n    return false;\n  };\n\n  return cert;\n};\n\n/**\n * Converts an X.509v3 RSA certificate from an ASN.1 object.\n *\n * Note: If the certificate is to be verified then compute hash should\n * be set to true. There is currently no implementation for converting\n * a certificate back to ASN.1 so the TBSCertificate part of the ASN.1\n * object needs to be scanned before the cert object is created.\n *\n * @param obj the asn1 representation of an X.509v3 RSA certificate.\n * @param computeHash true to compute the hash for verification.\n *\n * @return the certificate.\n */\npki.certificateFromAsn1 = function(obj, computeHash) {\n  // validate certificate and capture data\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(obj, x509CertificateValidator, capture, errors)) {\n    var error = new Error('Cannot read X.509 certificate. ' +\n      'ASN.1 object is not an X509v3 Certificate.');\n    error.errors = errors;\n    throw error;\n  }\n\n  // get oid\n  var oid = asn1.derToOid(capture.publicKeyOid);\n  if(oid !== pki.oids.rsaEncryption) {\n    throw new Error('Cannot read public key. OID is not RSA.');\n  }\n\n  // create certificate\n  var cert = pki.createCertificate();\n  cert.version = capture.certVersion ?\n    capture.certVersion.charCodeAt(0) : 0;\n  var serial = forge.util.createBuffer(capture.certSerialNumber);\n  cert.serialNumber = serial.toHex();\n  cert.signatureOid = forge.asn1.derToOid(capture.certSignatureOid);\n  cert.signatureParameters = _readSignatureParameters(\n    cert.signatureOid, capture.certSignatureParams, true);\n  cert.siginfo.algorithmOid = forge.asn1.derToOid(capture.certinfoSignatureOid);\n  cert.siginfo.parameters = _readSignatureParameters(cert.siginfo.algorithmOid,\n    capture.certinfoSignatureParams, false);\n  cert.signature = capture.certSignature;\n\n  var validity = [];\n  if(capture.certValidity1UTCTime !== undefined) {\n    validity.push(asn1.utcTimeToDate(capture.certValidity1UTCTime));\n  }\n  if(capture.certValidity2GeneralizedTime !== undefined) {\n    validity.push(asn1.generalizedTimeToDate(\n      capture.certValidity2GeneralizedTime));\n  }\n  if(capture.certValidity3UTCTime !== undefined) {\n    validity.push(asn1.utcTimeToDate(capture.certValidity3UTCTime));\n  }\n  if(capture.certValidity4GeneralizedTime !== undefined) {\n    validity.push(asn1.generalizedTimeToDate(\n      capture.certValidity4GeneralizedTime));\n  }\n  if(validity.length > 2) {\n    throw new Error('Cannot read notBefore/notAfter validity times; more ' +\n      'than two times were provided in the certificate.');\n  }\n  if(validity.length < 2) {\n    throw new Error('Cannot read notBefore/notAfter validity times; they ' +\n      'were not provided as either UTCTime or GeneralizedTime.');\n  }\n  cert.validity.notBefore = validity[0];\n  cert.validity.notAfter = validity[1];\n\n  // keep TBSCertificate to preserve signature when exporting\n  cert.tbsCertificate = capture.tbsCertificate;\n\n  if(computeHash) {\n    // create digest for OID signature type\n    cert.md = _createSignatureDigest({\n      signatureOid: cert.signatureOid,\n      type: 'certificate'\n    });\n\n    // produce DER formatted TBSCertificate and digest it\n    var bytes = asn1.toDer(cert.tbsCertificate);\n    cert.md.update(bytes.getBytes());\n  }\n\n  // handle issuer, build issuer message digest\n  var imd = forge.md.sha1.create();\n  var ibytes = asn1.toDer(capture.certIssuer);\n  imd.update(ibytes.getBytes());\n  cert.issuer.getField = function(sn) {\n    return _getAttribute(cert.issuer, sn);\n  };\n  cert.issuer.addField = function(attr) {\n    _fillMissingFields([attr]);\n    cert.issuer.attributes.push(attr);\n  };\n  cert.issuer.attributes = pki.RDNAttributesAsArray(capture.certIssuer);\n  if(capture.certIssuerUniqueId) {\n    cert.issuer.uniqueId = capture.certIssuerUniqueId;\n  }\n  cert.issuer.hash = imd.digest().toHex();\n\n  // handle subject, build subject message digest\n  var smd = forge.md.sha1.create();\n  var sbytes = asn1.toDer(capture.certSubject);\n  smd.update(sbytes.getBytes());\n  cert.subject.getField = function(sn) {\n    return _getAttribute(cert.subject, sn);\n  };\n  cert.subject.addField = function(attr) {\n    _fillMissingFields([attr]);\n    cert.subject.attributes.push(attr);\n  };\n  cert.subject.attributes = pki.RDNAttributesAsArray(capture.certSubject);\n  if(capture.certSubjectUniqueId) {\n    cert.subject.uniqueId = capture.certSubjectUniqueId;\n  }\n  cert.subject.hash = smd.digest().toHex();\n\n  // handle extensions\n  if(capture.certExtensions) {\n    cert.extensions = pki.certificateExtensionsFromAsn1(capture.certExtensions);\n  } else {\n    cert.extensions = [];\n  }\n\n  // convert RSA public key from ASN.1\n  cert.publicKey = pki.publicKeyFromAsn1(capture.subjectPublicKeyInfo);\n\n  return cert;\n};\n\n/**\n * Converts an ASN.1 extensions object (with extension sequences as its\n * values) into an array of extension objects with types and values.\n *\n * Supported extensions:\n *\n * id-ce-keyUsage OBJECT IDENTIFIER ::=  { id-ce 15 }\n * KeyUsage ::= BIT STRING {\n *   digitalSignature        (0),\n *   nonRepudiation          (1),\n *   keyEncipherment         (2),\n *   dataEncipherment        (3),\n *   keyAgreement            (4),\n *   keyCertSign             (5),\n *   cRLSign                 (6),\n *   encipherOnly            (7),\n *   decipherOnly            (8)\n * }\n *\n * id-ce-basicConstraints OBJECT IDENTIFIER ::=  { id-ce 19 }\n * BasicConstraints ::= SEQUENCE {\n *   cA                      BOOLEAN DEFAULT FALSE,\n *   pathLenConstraint       INTEGER (0..MAX) OPTIONAL\n * }\n *\n * subjectAltName EXTENSION ::= {\n *   SYNTAX GeneralNames\n *   IDENTIFIED BY id-ce-subjectAltName\n * }\n *\n * GeneralNames ::= SEQUENCE SIZE (1..MAX) OF GeneralName\n *\n * GeneralName ::= CHOICE {\n *   otherName      [0] INSTANCE OF OTHER-NAME,\n *   rfc822Name     [1] IA5String,\n *   dNSName        [2] IA5String,\n *   x400Address    [3] ORAddress,\n *   directoryName  [4] Name,\n *   ediPartyName   [5] EDIPartyName,\n *   uniformResourceIdentifier [6] IA5String,\n *   IPAddress      [7] OCTET STRING,\n *   registeredID   [8] OBJECT IDENTIFIER\n * }\n *\n * OTHER-NAME ::= TYPE-IDENTIFIER\n *\n * EDIPartyName ::= SEQUENCE {\n *   nameAssigner [0] DirectoryString {ub-name} OPTIONAL,\n *   partyName    [1] DirectoryString {ub-name}\n * }\n *\n * @param exts the extensions ASN.1 with extension sequences to parse.\n *\n * @return the array.\n */\npki.certificateExtensionsFromAsn1 = function(exts) {\n  var rval = [];\n  for(var i = 0; i < exts.value.length; ++i) {\n    // get extension sequence\n    var extseq = exts.value[i];\n    for(var ei = 0; ei < extseq.value.length; ++ei) {\n      rval.push(pki.certificateExtensionFromAsn1(extseq.value[ei]));\n    }\n  }\n\n  return rval;\n};\n\n/**\n * Parses a single certificate extension from ASN.1.\n *\n * @param ext the extension in ASN.1 format.\n *\n * @return the parsed extension as an object.\n */\npki.certificateExtensionFromAsn1 = function(ext) {\n  // an extension has:\n  // [0] extnID      OBJECT IDENTIFIER\n  // [1] critical    BOOLEAN DEFAULT FALSE\n  // [2] extnValue   OCTET STRING\n  var e = {};\n  e.id = asn1.derToOid(ext.value[0].value);\n  e.critical = false;\n  if(ext.value[1].type === asn1.Type.BOOLEAN) {\n    e.critical = (ext.value[1].value.charCodeAt(0) !== 0x00);\n    e.value = ext.value[2].value;\n  } else {\n    e.value = ext.value[1].value;\n  }\n  // if the oid is known, get its name\n  if(e.id in oids) {\n    e.name = oids[e.id];\n\n    // handle key usage\n    if(e.name === 'keyUsage') {\n      // get value as BIT STRING\n      var ev = asn1.fromDer(e.value);\n      var b2 = 0x00;\n      var b3 = 0x00;\n      if(ev.value.length > 1) {\n        // skip first byte, just indicates unused bits which\n        // will be padded with 0s anyway\n        // get bytes with flag bits\n        b2 = ev.value.charCodeAt(1);\n        b3 = ev.value.length > 2 ? ev.value.charCodeAt(2) : 0;\n      }\n      // set flags\n      e.digitalSignature = (b2 & 0x80) === 0x80;\n      e.nonRepudiation = (b2 & 0x40) === 0x40;\n      e.keyEncipherment = (b2 & 0x20) === 0x20;\n      e.dataEncipherment = (b2 & 0x10) === 0x10;\n      e.keyAgreement = (b2 & 0x08) === 0x08;\n      e.keyCertSign = (b2 & 0x04) === 0x04;\n      e.cRLSign = (b2 & 0x02) === 0x02;\n      e.encipherOnly = (b2 & 0x01) === 0x01;\n      e.decipherOnly = (b3 & 0x80) === 0x80;\n    } else if(e.name === 'basicConstraints') {\n      // handle basic constraints\n      // get value as SEQUENCE\n      var ev = asn1.fromDer(e.value);\n      // get cA BOOLEAN flag (defaults to false)\n      if(ev.value.length > 0 && ev.value[0].type === asn1.Type.BOOLEAN) {\n        e.cA = (ev.value[0].value.charCodeAt(0) !== 0x00);\n      } else {\n        e.cA = false;\n      }\n      // get path length constraint\n      var value = null;\n      if(ev.value.length > 0 && ev.value[0].type === asn1.Type.INTEGER) {\n        value = ev.value[0].value;\n      } else if(ev.value.length > 1) {\n        value = ev.value[1].value;\n      }\n      if(value !== null) {\n        e.pathLenConstraint = asn1.derToInteger(value);\n      }\n    } else if(e.name === 'extKeyUsage') {\n      // handle extKeyUsage\n      // value is a SEQUENCE of OIDs\n      var ev = asn1.fromDer(e.value);\n      for(var vi = 0; vi < ev.value.length; ++vi) {\n        var oid = asn1.derToOid(ev.value[vi].value);\n        if(oid in oids) {\n          e[oids[oid]] = true;\n        } else {\n          e[oid] = true;\n        }\n      }\n    } else if(e.name === 'nsCertType') {\n      // handle nsCertType\n      // get value as BIT STRING\n      var ev = asn1.fromDer(e.value);\n      var b2 = 0x00;\n      if(ev.value.length > 1) {\n        // skip first byte, just indicates unused bits which\n        // will be padded with 0s anyway\n        // get bytes with flag bits\n        b2 = ev.value.charCodeAt(1);\n      }\n      // set flags\n      e.client = (b2 & 0x80) === 0x80;\n      e.server = (b2 & 0x40) === 0x40;\n      e.email = (b2 & 0x20) === 0x20;\n      e.objsign = (b2 & 0x10) === 0x10;\n      e.reserved = (b2 & 0x08) === 0x08;\n      e.sslCA = (b2 & 0x04) === 0x04;\n      e.emailCA = (b2 & 0x02) === 0x02;\n      e.objCA = (b2 & 0x01) === 0x01;\n    } else if(\n      e.name === 'subjectAltName' ||\n      e.name === 'issuerAltName') {\n      // handle subjectAltName/issuerAltName\n      e.altNames = [];\n\n      // ev is a SYNTAX SEQUENCE\n      var gn;\n      var ev = asn1.fromDer(e.value);\n      for(var n = 0; n < ev.value.length; ++n) {\n        // get GeneralName\n        gn = ev.value[n];\n\n        var altName = {\n          type: gn.type,\n          value: gn.value\n        };\n        e.altNames.push(altName);\n\n        // Note: Support for types 1,2,6,7,8\n        switch(gn.type) {\n          // rfc822Name\n          case 1:\n          // dNSName\n          case 2:\n          // uniformResourceIdentifier (URI)\n          case 6:\n            break;\n          // IPAddress\n          case 7:\n            // convert to IPv4/IPv6 string representation\n            altName.ip = forge.util.bytesToIP(gn.value);\n            break;\n          // registeredID\n          case 8:\n            altName.oid = asn1.derToOid(gn.value);\n            break;\n          default:\n            // unsupported\n        }\n      }\n    } else if(e.name === 'subjectKeyIdentifier') {\n      // value is an OCTETSTRING w/the hash of the key-type specific\n      // public key structure (eg: RSAPublicKey)\n      var ev = asn1.fromDer(e.value);\n      e.subjectKeyIdentifier = forge.util.bytesToHex(ev.value);\n    }\n  }\n  return e;\n};\n\n/**\n * Converts a PKCS#10 certification request (CSR) from an ASN.1 object.\n *\n * Note: If the certification request is to be verified then compute hash\n * should be set to true. There is currently no implementation for converting\n * a certificate back to ASN.1 so the CertificationRequestInfo part of the\n * ASN.1 object needs to be scanned before the csr object is created.\n *\n * @param obj the asn1 representation of a PKCS#10 certification request (CSR).\n * @param computeHash true to compute the hash for verification.\n *\n * @return the certification request (CSR).\n */\npki.certificationRequestFromAsn1 = function(obj, computeHash) {\n  // validate certification request and capture data\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(obj, certificationRequestValidator, capture, errors)) {\n    var error = new Error('Cannot read PKCS#10 certificate request. ' +\n      'ASN.1 object is not a PKCS#10 CertificationRequest.');\n    error.errors = errors;\n    throw error;\n  }\n\n  // get oid\n  var oid = asn1.derToOid(capture.publicKeyOid);\n  if(oid !== pki.oids.rsaEncryption) {\n    throw new Error('Cannot read public key. OID is not RSA.');\n  }\n\n  // create certification request\n  var csr = pki.createCertificationRequest();\n  csr.version = capture.csrVersion ? capture.csrVersion.charCodeAt(0) : 0;\n  csr.signatureOid = forge.asn1.derToOid(capture.csrSignatureOid);\n  csr.signatureParameters = _readSignatureParameters(\n    csr.signatureOid, capture.csrSignatureParams, true);\n  csr.siginfo.algorithmOid = forge.asn1.derToOid(capture.csrSignatureOid);\n  csr.siginfo.parameters = _readSignatureParameters(\n    csr.siginfo.algorithmOid, capture.csrSignatureParams, false);\n  csr.signature = capture.csrSignature;\n\n  // keep CertificationRequestInfo to preserve signature when exporting\n  csr.certificationRequestInfo = capture.certificationRequestInfo;\n\n  if(computeHash) {\n    // create digest for OID signature type\n    csr.md = _createSignatureDigest({\n      signatureOid: csr.signatureOid,\n      type: 'certification request'\n    });\n\n    // produce DER formatted CertificationRequestInfo and digest it\n    var bytes = asn1.toDer(csr.certificationRequestInfo);\n    csr.md.update(bytes.getBytes());\n  }\n\n  // handle subject, build subject message digest\n  var smd = forge.md.sha1.create();\n  csr.subject.getField = function(sn) {\n    return _getAttribute(csr.subject, sn);\n  };\n  csr.subject.addField = function(attr) {\n    _fillMissingFields([attr]);\n    csr.subject.attributes.push(attr);\n  };\n  csr.subject.attributes = pki.RDNAttributesAsArray(\n    capture.certificationRequestInfoSubject, smd);\n  csr.subject.hash = smd.digest().toHex();\n\n  // convert RSA public key from ASN.1\n  csr.publicKey = pki.publicKeyFromAsn1(capture.subjectPublicKeyInfo);\n\n  // convert attributes from ASN.1\n  csr.getAttribute = function(sn) {\n    return _getAttribute(csr, sn);\n  };\n  csr.addAttribute = function(attr) {\n    _fillMissingFields([attr]);\n    csr.attributes.push(attr);\n  };\n  csr.attributes = pki.CRIAttributesAsArray(\n    capture.certificationRequestInfoAttributes || []);\n\n  return csr;\n};\n\n/**\n * Creates an empty certification request (a CSR or certificate signing\n * request). Once created, its public key and attributes can be set and then\n * it can be signed.\n *\n * @return the empty certification request.\n */\npki.createCertificationRequest = function() {\n  var csr = {};\n  csr.version = 0x00;\n  csr.signatureOid = null;\n  csr.signature = null;\n  csr.siginfo = {};\n  csr.siginfo.algorithmOid = null;\n\n  csr.subject = {};\n  csr.subject.getField = function(sn) {\n    return _getAttribute(csr.subject, sn);\n  };\n  csr.subject.addField = function(attr) {\n    _fillMissingFields([attr]);\n    csr.subject.attributes.push(attr);\n  };\n  csr.subject.attributes = [];\n  csr.subject.hash = null;\n\n  csr.publicKey = null;\n  csr.attributes = [];\n  csr.getAttribute = function(sn) {\n    return _getAttribute(csr, sn);\n  };\n  csr.addAttribute = function(attr) {\n    _fillMissingFields([attr]);\n    csr.attributes.push(attr);\n  };\n  csr.md = null;\n\n  /**\n   * Sets the subject of this certification request.\n   *\n   * @param attrs the array of subject attributes to use.\n   */\n  csr.setSubject = function(attrs) {\n    // set new attributes\n    _fillMissingFields(attrs);\n    csr.subject.attributes = attrs;\n    csr.subject.hash = null;\n  };\n\n  /**\n   * Sets the attributes of this certification request.\n   *\n   * @param attrs the array of attributes to use.\n   */\n  csr.setAttributes = function(attrs) {\n    // set new attributes\n    _fillMissingFields(attrs);\n    csr.attributes = attrs;\n  };\n\n  /**\n   * Signs this certification request using the given private key.\n   *\n   * @param key the private key to sign with.\n   * @param md the message digest object to use (defaults to forge.md.sha1).\n   */\n  csr.sign = function(key, md) {\n    // TODO: get signature OID from private key\n    csr.md = md || forge.md.sha1.create();\n    var algorithmOid = oids[csr.md.algorithm + 'WithRSAEncryption'];\n    if(!algorithmOid) {\n      var error = new Error('Could not compute certification request digest. ' +\n        'Unknown message digest algorithm OID.');\n      error.algorithm = csr.md.algorithm;\n      throw error;\n    }\n    csr.signatureOid = csr.siginfo.algorithmOid = algorithmOid;\n\n    // get CertificationRequestInfo, convert to DER\n    csr.certificationRequestInfo = pki.getCertificationRequestInfo(csr);\n    var bytes = asn1.toDer(csr.certificationRequestInfo);\n\n    // digest and sign\n    csr.md.update(bytes.getBytes());\n    csr.signature = key.sign(csr.md);\n  };\n\n  /**\n   * Attempts verify the signature on the passed certification request using\n   * its public key.\n   *\n   * A CSR that has been exported to a file in PEM format can be verified using\n   * OpenSSL using this command:\n   *\n   * openssl req -in <the-csr-pem-file> -verify -noout -text\n   *\n   * @return true if verified, false if not.\n   */\n  csr.verify = function() {\n    var rval = false;\n\n    var md = csr.md;\n    if(md === null) {\n      md = _createSignatureDigest({\n        signatureOid: csr.signatureOid,\n        type: 'certification request'\n      });\n\n      // produce DER formatted CertificationRequestInfo and digest it\n      var cri = csr.certificationRequestInfo ||\n        pki.getCertificationRequestInfo(csr);\n      var bytes = asn1.toDer(cri);\n      md.update(bytes.getBytes());\n    }\n\n    if(md !== null) {\n      rval = _verifySignature({\n        certificate: csr, md: md, signature: csr.signature\n      });\n    }\n\n    return rval;\n  };\n\n  return csr;\n};\n\n/**\n * Converts an X.509 subject or issuer to an ASN.1 RDNSequence.\n *\n * @param obj the subject or issuer (distinguished name).\n *\n * @return the ASN.1 RDNSequence.\n */\nfunction _dnToAsn1(obj) {\n  // create an empty RDNSequence\n  var rval = asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n\n  // iterate over attributes\n  var attr, set;\n  var attrs = obj.attributes;\n  for(var i = 0; i < attrs.length; ++i) {\n    attr = attrs[i];\n    var value = attr.value;\n\n    // reuse tag class for attribute value if available\n    var valueTagClass = asn1.Type.PRINTABLESTRING;\n    if('valueTagClass' in attr) {\n      valueTagClass = attr.valueTagClass;\n\n      if(valueTagClass === asn1.Type.UTF8) {\n        value = forge.util.encodeUtf8(value);\n      }\n      // FIXME: handle more encodings\n    }\n\n    // create a RelativeDistinguishedName set\n    // each value in the set is an AttributeTypeAndValue first\n    // containing the type (an OID) and second the value\n    set = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true, [\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // AttributeType\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          asn1.oidToDer(attr.type).getBytes()),\n        // AttributeValue\n        asn1.create(asn1.Class.UNIVERSAL, valueTagClass, false, value)\n      ])\n    ]);\n    rval.value.push(set);\n  }\n\n  return rval;\n}\n\n/**\n * Gets all printable attributes (typically of an issuer or subject) in a\n * simplified JSON format for display.\n *\n * @param attrs the attributes.\n *\n * @return the JSON for display.\n */\nfunction _getAttributesAsJson(attrs) {\n  var rval = {};\n  for(var i = 0; i < attrs.length; ++i) {\n    var attr = attrs[i];\n    if(attr.shortName && (\n      attr.valueTagClass === asn1.Type.UTF8 ||\n      attr.valueTagClass === asn1.Type.PRINTABLESTRING ||\n      attr.valueTagClass === asn1.Type.IA5STRING)) {\n      var value = attr.value;\n      if(attr.valueTagClass === asn1.Type.UTF8) {\n        value = forge.util.encodeUtf8(attr.value);\n      }\n      if(!(attr.shortName in rval)) {\n        rval[attr.shortName] = value;\n      } else if(forge.util.isArray(rval[attr.shortName])) {\n        rval[attr.shortName].push(value);\n      } else {\n        rval[attr.shortName] = [rval[attr.shortName], value];\n      }\n    }\n  }\n  return rval;\n}\n\n/**\n * Fills in missing fields in attributes.\n *\n * @param attrs the attributes to fill missing fields in.\n */\nfunction _fillMissingFields(attrs) {\n  var attr;\n  for(var i = 0; i < attrs.length; ++i) {\n    attr = attrs[i];\n\n    // populate missing name\n    if(typeof attr.name === 'undefined') {\n      if(attr.type && attr.type in pki.oids) {\n        attr.name = pki.oids[attr.type];\n      } else if(attr.shortName && attr.shortName in _shortNames) {\n        attr.name = pki.oids[_shortNames[attr.shortName]];\n      }\n    }\n\n    // populate missing type (OID)\n    if(typeof attr.type === 'undefined') {\n      if(attr.name && attr.name in pki.oids) {\n        attr.type = pki.oids[attr.name];\n      } else {\n        var error = new Error('Attribute type not specified.');\n        error.attribute = attr;\n        throw error;\n      }\n    }\n\n    // populate missing shortname\n    if(typeof attr.shortName === 'undefined') {\n      if(attr.name && attr.name in _shortNames) {\n        attr.shortName = _shortNames[attr.name];\n      }\n    }\n\n    // convert extensions to value\n    if(attr.type === oids.extensionRequest) {\n      attr.valueConstructed = true;\n      attr.valueTagClass = asn1.Type.SEQUENCE;\n      if(!attr.value && attr.extensions) {\n        attr.value = [];\n        for(var ei = 0; ei < attr.extensions.length; ++ei) {\n          attr.value.push(pki.certificateExtensionToAsn1(\n            _fillMissingExtensionFields(attr.extensions[ei])));\n        }\n      }\n    }\n\n    if(typeof attr.value === 'undefined') {\n      var error = new Error('Attribute value not specified.');\n      error.attribute = attr;\n      throw error;\n    }\n  }\n}\n\n/**\n * Fills in missing fields in certificate extensions.\n *\n * @param e the extension.\n * @param [options] the options to use.\n *          [cert] the certificate the extensions are for.\n *\n * @return the extension.\n */\nfunction _fillMissingExtensionFields(e, options) {\n  options = options || {};\n\n  // populate missing name\n  if(typeof e.name === 'undefined') {\n    if(e.id && e.id in pki.oids) {\n      e.name = pki.oids[e.id];\n    }\n  }\n\n  // populate missing id\n  if(typeof e.id === 'undefined') {\n    if(e.name && e.name in pki.oids) {\n      e.id = pki.oids[e.name];\n    } else {\n      var error = new Error('Extension ID not specified.');\n      error.extension = e;\n      throw error;\n    }\n  }\n\n  if(typeof e.value !== 'undefined') {\n    return e;\n  }\n\n  // handle missing value:\n\n  // value is a BIT STRING\n  if(e.name === 'keyUsage') {\n    // build flags\n    var unused = 0;\n    var b2 = 0x00;\n    var b3 = 0x00;\n    if(e.digitalSignature) {\n      b2 |= 0x80;\n      unused = 7;\n    }\n    if(e.nonRepudiation) {\n      b2 |= 0x40;\n      unused = 6;\n    }\n    if(e.keyEncipherment) {\n      b2 |= 0x20;\n      unused = 5;\n    }\n    if(e.dataEncipherment) {\n      b2 |= 0x10;\n      unused = 4;\n    }\n    if(e.keyAgreement) {\n      b2 |= 0x08;\n      unused = 3;\n    }\n    if(e.keyCertSign) {\n      b2 |= 0x04;\n      unused = 2;\n    }\n    if(e.cRLSign) {\n      b2 |= 0x02;\n      unused = 1;\n    }\n    if(e.encipherOnly) {\n      b2 |= 0x01;\n      unused = 0;\n    }\n    if(e.decipherOnly) {\n      b3 |= 0x80;\n      unused = 7;\n    }\n\n    // create bit string\n    var value = String.fromCharCode(unused);\n    if(b3 !== 0) {\n      value += String.fromCharCode(b2) + String.fromCharCode(b3);\n    } else if(b2 !== 0) {\n      value += String.fromCharCode(b2);\n    }\n    e.value = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.BITSTRING, false, value);\n  } else if(e.name === 'basicConstraints') {\n    // basicConstraints is a SEQUENCE\n    e.value = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n    // cA BOOLEAN flag defaults to false\n    if(e.cA) {\n      e.value.value.push(asn1.create(\n        asn1.Class.UNIVERSAL, asn1.Type.BOOLEAN, false,\n        String.fromCharCode(0xFF)));\n    }\n    if('pathLenConstraint' in e) {\n      e.value.value.push(asn1.create(\n        asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n        asn1.integerToDer(e.pathLenConstraint).getBytes()));\n    }\n  } else if(e.name === 'extKeyUsage') {\n    // extKeyUsage is a SEQUENCE of OIDs\n    e.value = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n    var seq = e.value.value;\n    for(var key in e) {\n      if(e[key] !== true) {\n        continue;\n      }\n      // key is name in OID map\n      if(key in oids) {\n        seq.push(asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID,\n          false, asn1.oidToDer(oids[key]).getBytes()));\n      } else if(key.indexOf('.') !== -1) {\n        // assume key is an OID\n        seq.push(asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID,\n          false, asn1.oidToDer(key).getBytes()));\n      }\n    }\n  } else if(e.name === 'nsCertType') {\n    // nsCertType is a BIT STRING\n    // build flags\n    var unused = 0;\n    var b2 = 0x00;\n\n    if(e.client) {\n      b2 |= 0x80;\n      unused = 7;\n    }\n    if(e.server) {\n      b2 |= 0x40;\n      unused = 6;\n    }\n    if(e.email) {\n      b2 |= 0x20;\n      unused = 5;\n    }\n    if(e.objsign) {\n      b2 |= 0x10;\n      unused = 4;\n    }\n    if(e.reserved) {\n      b2 |= 0x08;\n      unused = 3;\n    }\n    if(e.sslCA) {\n      b2 |= 0x04;\n      unused = 2;\n    }\n    if(e.emailCA) {\n      b2 |= 0x02;\n      unused = 1;\n    }\n    if(e.objCA) {\n      b2 |= 0x01;\n      unused = 0;\n    }\n\n    // create bit string\n    var value = String.fromCharCode(unused);\n    if(b2 !== 0) {\n      value += String.fromCharCode(b2);\n    }\n    e.value = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.BITSTRING, false, value);\n  } else if(e.name === 'subjectAltName' || e.name === 'issuerAltName') {\n    // SYNTAX SEQUENCE\n    e.value = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n\n    var altName;\n    for(var n = 0; n < e.altNames.length; ++n) {\n      altName = e.altNames[n];\n      var value = altName.value;\n      // handle IP\n      if(altName.type === 7 && altName.ip) {\n        value = forge.util.bytesFromIP(altName.ip);\n        if(value === null) {\n          var error = new Error(\n            'Extension \"ip\" value is not a valid IPv4 or IPv6 address.');\n          error.extension = e;\n          throw error;\n        }\n      } else if(altName.type === 8) {\n        // handle OID\n        if(altName.oid) {\n          value = asn1.oidToDer(asn1.oidToDer(altName.oid));\n        } else {\n          // deprecated ... convert value to OID\n          value = asn1.oidToDer(value);\n        }\n      }\n      e.value.value.push(asn1.create(\n        asn1.Class.CONTEXT_SPECIFIC, altName.type, false,\n        value));\n    }\n  } else if(e.name === 'nsComment' && options.cert) {\n    // sanity check value is ASCII (req'd) and not too big\n    if(!(/^[\\x00-\\x7F]*$/.test(e.comment)) ||\n      (e.comment.length < 1) || (e.comment.length > 128)) {\n      throw new Error('Invalid \"nsComment\" content.');\n    }\n    // IA5STRING opaque comment\n    e.value = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.IA5STRING, false, e.comment);\n  } else if(e.name === 'subjectKeyIdentifier' && options.cert) {\n    var ski = options.cert.generateSubjectKeyIdentifier();\n    e.subjectKeyIdentifier = ski.toHex();\n    // OCTETSTRING w/digest\n    e.value = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false, ski.getBytes());\n  } else if(e.name === 'authorityKeyIdentifier' && options.cert) {\n    // SYNTAX SEQUENCE\n    e.value = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n    var seq = e.value.value;\n\n    if(e.keyIdentifier) {\n      var keyIdentifier = (e.keyIdentifier === true ?\n        options.cert.generateSubjectKeyIdentifier().getBytes() :\n        e.keyIdentifier);\n      seq.push(\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, false, keyIdentifier));\n    }\n\n    if(e.authorityCertIssuer) {\n      var authorityCertIssuer = [\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 4, true, [\n          _dnToAsn1(e.authorityCertIssuer === true ?\n            options.cert.issuer : e.authorityCertIssuer)\n        ])\n      ];\n      seq.push(\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 1, true, authorityCertIssuer));\n    }\n\n    if(e.serialNumber) {\n      var serialNumber = forge.util.hexToBytes(e.serialNumber === true ?\n        options.cert.serialNumber : e.serialNumber);\n      seq.push(\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 2, false, serialNumber));\n    }\n  } else if(e.name === 'cRLDistributionPoints') {\n    e.value = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n    var seq = e.value.value;\n\n    // Create sub SEQUENCE of DistributionPointName\n    var subSeq = asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n\n    // Create fullName CHOICE\n    var fullNameGeneralNames = asn1.create(\n      asn1.Class.CONTEXT_SPECIFIC, 0, true, []);\n    var altName;\n    for(var n = 0; n < e.altNames.length; ++n) {\n      altName = e.altNames[n];\n      var value = altName.value;\n      // handle IP\n      if(altName.type === 7 && altName.ip) {\n        value = forge.util.bytesFromIP(altName.ip);\n        if(value === null) {\n          var error = new Error(\n            'Extension \"ip\" value is not a valid IPv4 or IPv6 address.');\n          error.extension = e;\n          throw error;\n        }\n      } else if(altName.type === 8) {\n        // handle OID\n        if(altName.oid) {\n          value = asn1.oidToDer(asn1.oidToDer(altName.oid));\n        } else {\n          // deprecated ... convert value to OID\n          value = asn1.oidToDer(value);\n        }\n      }\n      fullNameGeneralNames.value.push(asn1.create(\n        asn1.Class.CONTEXT_SPECIFIC, altName.type, false,\n        value));\n    }\n\n    // Add to the parent SEQUENCE\n    subSeq.value.push(asn1.create(\n      asn1.Class.CONTEXT_SPECIFIC, 0, true, [fullNameGeneralNames]));\n    seq.push(subSeq);\n  }\n\n  // ensure value has been defined by now\n  if(typeof e.value === 'undefined') {\n    var error = new Error('Extension value not specified.');\n    error.extension = e;\n    throw error;\n  }\n\n  return e;\n}\n\n/**\n * Convert signature parameters object to ASN.1\n *\n * @param {String} oid Signature algorithm OID\n * @param params The signature parametrs object\n * @return ASN.1 object representing signature parameters\n */\nfunction _signatureParametersToAsn1(oid, params) {\n  switch(oid) {\n    case oids['RSASSA-PSS']:\n      var parts = [];\n\n      if(params.hash.algorithmOid !== undefined) {\n        parts.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n            asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n              asn1.oidToDer(params.hash.algorithmOid).getBytes()),\n            asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n          ])\n        ]));\n      }\n\n      if(params.mgf.algorithmOid !== undefined) {\n        parts.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC, 1, true, [\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n            asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n              asn1.oidToDer(params.mgf.algorithmOid).getBytes()),\n            asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n              asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n                asn1.oidToDer(params.mgf.hash.algorithmOid).getBytes()),\n              asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n            ])\n          ])\n        ]));\n      }\n\n      if(params.saltLength !== undefined) {\n        parts.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC, 2, true, [\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n            asn1.integerToDer(params.saltLength).getBytes())\n        ]));\n      }\n\n      return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, parts);\n\n    default:\n      return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '');\n  }\n}\n\n/**\n * Converts a certification request's attributes to an ASN.1 set of\n * CRIAttributes.\n *\n * @param csr certification request.\n *\n * @return the ASN.1 set of CRIAttributes.\n */\nfunction _CRIAttributesToAsn1(csr) {\n  // create an empty context-specific container\n  var rval = asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, []);\n\n  // no attributes, return empty container\n  if(csr.attributes.length === 0) {\n    return rval;\n  }\n\n  // each attribute has a sequence with a type and a set of values\n  var attrs = csr.attributes;\n  for(var i = 0; i < attrs.length; ++i) {\n    var attr = attrs[i];\n    var value = attr.value;\n\n    // reuse tag class for attribute value if available\n    var valueTagClass = asn1.Type.UTF8;\n    if('valueTagClass' in attr) {\n      valueTagClass = attr.valueTagClass;\n    }\n    if(valueTagClass === asn1.Type.UTF8) {\n      value = forge.util.encodeUtf8(value);\n    }\n    var valueConstructed = false;\n    if('valueConstructed' in attr) {\n      valueConstructed = attr.valueConstructed;\n    }\n    // FIXME: handle more encodings\n\n    // create a RelativeDistinguishedName set\n    // each value in the set is an AttributeTypeAndValue first\n    // containing the type (an OID) and second the value\n    var seq = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // AttributeType\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(attr.type).getBytes()),\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true, [\n        // AttributeValue\n        asn1.create(\n          asn1.Class.UNIVERSAL, valueTagClass, valueConstructed, value)\n      ])\n    ]);\n    rval.value.push(seq);\n  }\n\n  return rval;\n}\n\nvar jan_1_1950 = new Date('1950-01-01T00:00:00Z');\nvar jan_1_2050 = new Date('2050-01-01T00:00:00Z');\n\n/**\n * Converts a Date object to ASN.1\n * Handles the different format before and after 1st January 2050\n *\n * @param date date object.\n *\n * @return the ASN.1 object representing the date.\n */\nfunction _dateToAsn1(date) {\n  if(date >= jan_1_1950 && date < jan_1_2050) {\n    return asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.UTCTIME, false,\n      asn1.dateToUtcTime(date));\n  } else {\n    return asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.GENERALIZEDTIME, false,\n      asn1.dateToGeneralizedTime(date));\n  }\n}\n\n/**\n * Gets the ASN.1 TBSCertificate part of an X.509v3 certificate.\n *\n * @param cert the certificate.\n *\n * @return the asn1 TBSCertificate.\n */\npki.getTBSCertificate = function(cert) {\n  // TBSCertificate\n  var notBefore = _dateToAsn1(cert.validity.notBefore);\n  var notAfter = _dateToAsn1(cert.validity.notAfter);\n  var tbs = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // version\n    asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n      // integer\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n        asn1.integerToDer(cert.version).getBytes())\n    ]),\n    // serialNumber\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      forge.util.hexToBytes(cert.serialNumber)),\n    // signature\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // algorithm\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(cert.siginfo.algorithmOid).getBytes()),\n      // parameters\n      _signatureParametersToAsn1(\n        cert.siginfo.algorithmOid, cert.siginfo.parameters)\n    ]),\n    // issuer\n    _dnToAsn1(cert.issuer),\n    // validity\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      notBefore,\n      notAfter\n    ]),\n    // subject\n    _dnToAsn1(cert.subject),\n    // SubjectPublicKeyInfo\n    pki.publicKeyToAsn1(cert.publicKey)\n  ]);\n\n  if(cert.issuer.uniqueId) {\n    // issuerUniqueID (optional)\n    tbs.value.push(\n      asn1.create(asn1.Class.CONTEXT_SPECIFIC, 1, true, [\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.BITSTRING, false,\n          // TODO: support arbitrary bit length ids\n          String.fromCharCode(0x00) +\n          cert.issuer.uniqueId\n        )\n      ])\n    );\n  }\n  if(cert.subject.uniqueId) {\n    // subjectUniqueID (optional)\n    tbs.value.push(\n      asn1.create(asn1.Class.CONTEXT_SPECIFIC, 2, true, [\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.BITSTRING, false,\n          // TODO: support arbitrary bit length ids\n          String.fromCharCode(0x00) +\n          cert.subject.uniqueId\n        )\n      ])\n    );\n  }\n\n  if(cert.extensions.length > 0) {\n    // extensions (optional)\n    tbs.value.push(pki.certificateExtensionsToAsn1(cert.extensions));\n  }\n\n  return tbs;\n};\n\n/**\n * Gets the ASN.1 CertificationRequestInfo part of a\n * PKCS#10 CertificationRequest.\n *\n * @param csr the certification request.\n *\n * @return the asn1 CertificationRequestInfo.\n */\npki.getCertificationRequestInfo = function(csr) {\n  // CertificationRequestInfo\n  var cri = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // version\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      asn1.integerToDer(csr.version).getBytes()),\n    // subject\n    _dnToAsn1(csr.subject),\n    // SubjectPublicKeyInfo\n    pki.publicKeyToAsn1(csr.publicKey),\n    // attributes\n    _CRIAttributesToAsn1(csr)\n  ]);\n\n  return cri;\n};\n\n/**\n * Converts a DistinguishedName (subject or issuer) to an ASN.1 object.\n *\n * @param dn the DistinguishedName.\n *\n * @return the asn1 representation of a DistinguishedName.\n */\npki.distinguishedNameToAsn1 = function(dn) {\n  return _dnToAsn1(dn);\n};\n\n/**\n * Converts an X.509v3 RSA certificate to an ASN.1 object.\n *\n * @param cert the certificate.\n *\n * @return the asn1 representation of an X.509v3 RSA certificate.\n */\npki.certificateToAsn1 = function(cert) {\n  // prefer cached TBSCertificate over generating one\n  var tbsCertificate = cert.tbsCertificate || pki.getTBSCertificate(cert);\n\n  // Certificate\n  return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // TBSCertificate\n    tbsCertificate,\n    // AlgorithmIdentifier (signature algorithm)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // algorithm\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(cert.signatureOid).getBytes()),\n      // parameters\n      _signatureParametersToAsn1(cert.signatureOid, cert.signatureParameters)\n    ]),\n    // SignatureValue\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.BITSTRING, false,\n      String.fromCharCode(0x00) + cert.signature)\n  ]);\n};\n\n/**\n * Converts X.509v3 certificate extensions to ASN.1.\n *\n * @param exts the extensions to convert.\n *\n * @return the extensions in ASN.1 format.\n */\npki.certificateExtensionsToAsn1 = function(exts) {\n  // create top-level extension container\n  var rval = asn1.create(asn1.Class.CONTEXT_SPECIFIC, 3, true, []);\n\n  // create extension sequence (stores a sequence for each extension)\n  var seq = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n  rval.value.push(seq);\n\n  for(var i = 0; i < exts.length; ++i) {\n    seq.value.push(pki.certificateExtensionToAsn1(exts[i]));\n  }\n\n  return rval;\n};\n\n/**\n * Converts a single certificate extension to ASN.1.\n *\n * @param ext the extension to convert.\n *\n * @return the extension in ASN.1 format.\n */\npki.certificateExtensionToAsn1 = function(ext) {\n  // create a sequence for each extension\n  var extseq = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n\n  // extnID (OID)\n  extseq.value.push(asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n    asn1.oidToDer(ext.id).getBytes()));\n\n  // critical defaults to false\n  if(ext.critical) {\n    // critical BOOLEAN DEFAULT FALSE\n    extseq.value.push(asn1.create(\n      asn1.Class.UNIVERSAL, asn1.Type.BOOLEAN, false,\n      String.fromCharCode(0xFF)));\n  }\n\n  var value = ext.value;\n  if(typeof ext.value !== 'string') {\n    // value is asn.1\n    value = asn1.toDer(value).getBytes();\n  }\n\n  // extnValue (OCTET STRING)\n  extseq.value.push(asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false, value));\n\n  return extseq;\n};\n\n/**\n * Converts a PKCS#10 certification request to an ASN.1 object.\n *\n * @param csr the certification request.\n *\n * @return the asn1 representation of a certification request.\n */\npki.certificationRequestToAsn1 = function(csr) {\n  // prefer cached CertificationRequestInfo over generating one\n  var cri = csr.certificationRequestInfo ||\n    pki.getCertificationRequestInfo(csr);\n\n  // Certificate\n  return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // CertificationRequestInfo\n    cri,\n    // AlgorithmIdentifier (signature algorithm)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // algorithm\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(csr.signatureOid).getBytes()),\n      // parameters\n      _signatureParametersToAsn1(csr.signatureOid, csr.signatureParameters)\n    ]),\n    // signature\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.BITSTRING, false,\n      String.fromCharCode(0x00) + csr.signature)\n  ]);\n};\n\n/**\n * Creates a CA store.\n *\n * @param certs an optional array of certificate objects or PEM-formatted\n *          certificate strings to add to the CA store.\n *\n * @return the CA store.\n */\npki.createCaStore = function(certs) {\n  // create CA store\n  var caStore = {\n    // stored certificates\n    certs: {}\n  };\n\n  /**\n   * Gets the certificate that issued the passed certificate or its\n   * 'parent'.\n   *\n   * @param cert the certificate to get the parent for.\n   *\n   * @return the parent certificate or null if none was found.\n   */\n  caStore.getIssuer = function(cert) {\n    var rval = getBySubject(cert.issuer);\n\n    // see if there are multiple matches\n    /*if(forge.util.isArray(rval)) {\n      // TODO: resolve multiple matches by checking\n      // authorityKey/subjectKey/issuerUniqueID/other identifiers, etc.\n      // FIXME: or alternatively do authority key mapping\n      // if possible (X.509v1 certs can't work?)\n      throw new Error('Resolving multiple issuer matches not implemented yet.');\n    }*/\n\n    return rval;\n  };\n\n  /**\n   * Adds a trusted certificate to the store.\n   *\n   * @param cert the certificate to add as a trusted certificate (either a\n   *          pki.certificate object or a PEM-formatted certificate).\n   */\n  caStore.addCertificate = function(cert) {\n    // convert from pem if necessary\n    if(typeof cert === 'string') {\n      cert = forge.pki.certificateFromPem(cert);\n    }\n\n    ensureSubjectHasHash(cert.subject);\n\n    if(!caStore.hasCertificate(cert)) { // avoid duplicate certificates in store\n      if(cert.subject.hash in caStore.certs) {\n        // subject hash already exists, append to array\n        var tmp = caStore.certs[cert.subject.hash];\n        if(!forge.util.isArray(tmp)) {\n          tmp = [tmp];\n        }\n        tmp.push(cert);\n        caStore.certs[cert.subject.hash] = tmp;\n      } else {\n        caStore.certs[cert.subject.hash] = cert;\n      }\n    }\n  };\n\n  /**\n   * Checks to see if the given certificate is in the store.\n   *\n   * @param cert the certificate to check (either a pki.certificate or a\n   *          PEM-formatted certificate).\n   *\n   * @return true if the certificate is in the store, false if not.\n   */\n  caStore.hasCertificate = function(cert) {\n    // convert from pem if necessary\n    if(typeof cert === 'string') {\n      cert = forge.pki.certificateFromPem(cert);\n    }\n\n    var match = getBySubject(cert.subject);\n    if(!match) {\n      return false;\n    }\n    if(!forge.util.isArray(match)) {\n      match = [match];\n    }\n    // compare DER-encoding of certificates\n    var der1 = asn1.toDer(pki.certificateToAsn1(cert)).getBytes();\n    for(var i = 0; i < match.length; ++i) {\n      var der2 = asn1.toDer(pki.certificateToAsn1(match[i])).getBytes();\n      if(der1 === der2) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * Lists all of the certificates kept in the store.\n   *\n   * @return an array of all of the pki.certificate objects in the store.\n   */\n  caStore.listAllCertificates = function() {\n    var certList = [];\n\n    for(var hash in caStore.certs) {\n      if(caStore.certs.hasOwnProperty(hash)) {\n        var value = caStore.certs[hash];\n        if(!forge.util.isArray(value)) {\n          certList.push(value);\n        } else {\n          for(var i = 0; i < value.length; ++i) {\n            certList.push(value[i]);\n          }\n        }\n      }\n    }\n\n    return certList;\n  };\n\n  /**\n   * Removes a certificate from the store.\n   *\n   * @param cert the certificate to remove (either a pki.certificate or a\n   *          PEM-formatted certificate).\n   *\n   * @return the certificate that was removed or null if the certificate\n   *           wasn't in store.\n   */\n  caStore.removeCertificate = function(cert) {\n    var result;\n\n    // convert from pem if necessary\n    if(typeof cert === 'string') {\n      cert = forge.pki.certificateFromPem(cert);\n    }\n    ensureSubjectHasHash(cert.subject);\n    if(!caStore.hasCertificate(cert)) {\n      return null;\n    }\n\n    var match = getBySubject(cert.subject);\n\n    if(!forge.util.isArray(match)) {\n      result = caStore.certs[cert.subject.hash];\n      delete caStore.certs[cert.subject.hash];\n      return result;\n    }\n\n    // compare DER-encoding of certificates\n    var der1 = asn1.toDer(pki.certificateToAsn1(cert)).getBytes();\n    for(var i = 0; i < match.length; ++i) {\n      var der2 = asn1.toDer(pki.certificateToAsn1(match[i])).getBytes();\n      if(der1 === der2) {\n        result = match[i];\n        match.splice(i, 1);\n      }\n    }\n    if(match.length === 0) {\n      delete caStore.certs[cert.subject.hash];\n    }\n\n    return result;\n  };\n\n  function getBySubject(subject) {\n    ensureSubjectHasHash(subject);\n    return caStore.certs[subject.hash] || null;\n  }\n\n  function ensureSubjectHasHash(subject) {\n    // produce subject hash if it doesn't exist\n    if(!subject.hash) {\n      var md = forge.md.sha1.create();\n      subject.attributes = pki.RDNAttributesAsArray(_dnToAsn1(subject), md);\n      subject.hash = md.digest().toHex();\n    }\n  }\n\n  // auto-add passed in certs\n  if(certs) {\n    // parse PEM-formatted certificates as necessary\n    for(var i = 0; i < certs.length; ++i) {\n      var cert = certs[i];\n      caStore.addCertificate(cert);\n    }\n  }\n\n  return caStore;\n};\n\n/**\n * Certificate verification errors, based on TLS.\n */\npki.certificateError = {\n  bad_certificate: 'forge.pki.BadCertificate',\n  unsupported_certificate: 'forge.pki.UnsupportedCertificate',\n  certificate_revoked: 'forge.pki.CertificateRevoked',\n  certificate_expired: 'forge.pki.CertificateExpired',\n  certificate_unknown: 'forge.pki.CertificateUnknown',\n  unknown_ca: 'forge.pki.UnknownCertificateAuthority'\n};\n\n/**\n * Verifies a certificate chain against the given Certificate Authority store\n * with an optional custom verify callback.\n *\n * @param caStore a certificate store to verify against.\n * @param chain the certificate chain to verify, with the root or highest\n *          authority at the end (an array of certificates).\n * @param options a callback to be called for every certificate in the chain or\n *                  an object with:\n *                  verify a callback to be called for every certificate in the\n *                    chain\n *                  validityCheckDate the date against which the certificate\n *                    validity period should be checked. Pass null to not check\n *                    the validity period. By default, the current date is used.\n *\n * The verify callback has the following signature:\n *\n * verified - Set to true if certificate was verified, otherwise the\n *   pki.certificateError for why the certificate failed.\n * depth - The current index in the chain, where 0 is the end point's cert.\n * certs - The certificate chain, *NOTE* an empty chain indicates an anonymous\n *   end point.\n *\n * The function returns true on success and on failure either the appropriate\n * pki.certificateError or an object with 'error' set to the appropriate\n * pki.certificateError and 'message' set to a custom error message.\n *\n * @return true if successful, error thrown if not.\n */\npki.verifyCertificateChain = function(caStore, chain, options) {\n  /* From: RFC3280 - Internet X.509 Public Key Infrastructure Certificate\n    Section 6: Certification Path Validation\n    See inline parentheticals related to this particular implementation.\n\n    The primary goal of path validation is to verify the binding between\n    a subject distinguished name or a subject alternative name and subject\n    public key, as represented in the end entity certificate, based on the\n    public key of the trust anchor. This requires obtaining a sequence of\n    certificates that support that binding. That sequence should be provided\n    in the passed 'chain'. The trust anchor should be in the given CA\n    store. The 'end entity' certificate is the certificate provided by the\n    end point (typically a server) and is the first in the chain.\n\n    To meet this goal, the path validation process verifies, among other\n    things, that a prospective certification path (a sequence of n\n    certificates or a 'chain') satisfies the following conditions:\n\n    (a) for all x in {1, ..., n-1}, the subject of certificate x is\n          the issuer of certificate x+1;\n\n    (b) certificate 1 is issued by the trust anchor;\n\n    (c) certificate n is the certificate to be validated; and\n\n    (d) for all x in {1, ..., n}, the certificate was valid at the\n          time in question.\n\n    Note that here 'n' is index 0 in the chain and 1 is the last certificate\n    in the chain and it must be signed by a certificate in the connection's\n    CA store.\n\n    The path validation process also determines the set of certificate\n    policies that are valid for this path, based on the certificate policies\n    extension, policy mapping extension, policy constraints extension, and\n    inhibit any-policy extension.\n\n    Note: Policy mapping extension not supported (Not Required).\n\n    Note: If the certificate has an unsupported critical extension, then it\n    must be rejected.\n\n    Note: A certificate is self-issued if the DNs that appear in the subject\n    and issuer fields are identical and are not empty.\n\n    The path validation algorithm assumes the following seven inputs are\n    provided to the path processing logic. What this specific implementation\n    will use is provided parenthetically:\n\n    (a) a prospective certification path of length n (the 'chain')\n    (b) the current date/time: ('now').\n    (c) user-initial-policy-set: A set of certificate policy identifiers\n          naming the policies that are acceptable to the certificate user.\n          The user-initial-policy-set contains the special value any-policy\n          if the user is not concerned about certificate policy\n          (Not implemented. Any policy is accepted).\n    (d) trust anchor information, describing a CA that serves as a trust\n          anchor for the certification path. The trust anchor information\n          includes:\n\n      (1)  the trusted issuer name,\n      (2)  the trusted public key algorithm,\n      (3)  the trusted public key, and\n      (4)  optionally, the trusted public key parameters associated\n             with the public key.\n\n      (Trust anchors are provided via certificates in the CA store).\n\n      The trust anchor information may be provided to the path processing\n      procedure in the form of a self-signed certificate. The trusted anchor\n      information is trusted because it was delivered to the path processing\n      procedure by some trustworthy out-of-band procedure. If the trusted\n      public key algorithm requires parameters, then the parameters are\n      provided along with the trusted public key (No parameters used in this\n      implementation).\n\n    (e) initial-policy-mapping-inhibit, which indicates if policy mapping is\n          allowed in the certification path.\n          (Not implemented, no policy checking)\n\n    (f) initial-explicit-policy, which indicates if the path must be valid\n          for at least one of the certificate policies in the user-initial-\n          policy-set.\n          (Not implemented, no policy checking)\n\n    (g) initial-any-policy-inhibit, which indicates whether the\n          anyPolicy OID should be processed if it is included in a\n          certificate.\n          (Not implemented, so any policy is valid provided that it is\n          not marked as critical) */\n\n  /* Basic Path Processing:\n\n    For each certificate in the 'chain', the following is checked:\n\n    1. The certificate validity period includes the current time.\n    2. The certificate was signed by its parent (where the parent is either\n       the next in the chain or from the CA store). Allow processing to\n       continue to the next step if no parent is found but the certificate is\n       in the CA store.\n    3. TODO: The certificate has not been revoked.\n    4. The certificate issuer name matches the parent's subject name.\n    5. TODO: If the certificate is self-issued and not the final certificate\n       in the chain, skip this step, otherwise verify that the subject name\n       is within one of the permitted subtrees of X.500 distinguished names\n       and that each of the alternative names in the subjectAltName extension\n       (critical or non-critical) is within one of the permitted subtrees for\n       that name type.\n    6. TODO: If the certificate is self-issued and not the final certificate\n       in the chain, skip this step, otherwise verify that the subject name\n       is not within one of the excluded subtrees for X.500 distinguished\n       names and none of the subjectAltName extension names are excluded for\n       that name type.\n    7. The other steps in the algorithm for basic path processing involve\n       handling the policy extension which is not presently supported in this\n       implementation. Instead, if a critical policy extension is found, the\n       certificate is rejected as not supported.\n    8. If the certificate is not the first or if its the only certificate in\n       the chain (having no parent from the CA store or is self-signed) and it\n       has a critical key usage extension, verify that the keyCertSign bit is\n       set. If the key usage extension exists, verify that the basic\n       constraints extension exists. If the basic constraints extension exists,\n       verify that the cA flag is set. If pathLenConstraint is set, ensure that\n       the number of certificates that precede in the chain (come earlier\n       in the chain as implemented below), excluding the very first in the\n       chain (typically the end-entity one), isn't greater than the\n       pathLenConstraint. This constraint limits the number of intermediate\n       CAs that may appear below a CA before only end-entity certificates\n       may be issued. */\n\n  // if a verify callback is passed as the third parameter, package it within\n  // the options object. This is to support a legacy function signature that\n  // expected the verify callback as the third parameter.\n  if(typeof options === 'function') {\n    options = {verify: options};\n  }\n  options = options || {};\n\n  // copy cert chain references to another array to protect against changes\n  // in verify callback\n  chain = chain.slice(0);\n  var certs = chain.slice(0);\n\n  var validityCheckDate = options.validityCheckDate;\n  // if no validityCheckDate is specified, default to the current date. Make\n  // sure to maintain the value null because it indicates that the validity\n  // period should not be checked.\n  if(typeof validityCheckDate === 'undefined') {\n    validityCheckDate = new Date();\n  }\n\n  // verify each cert in the chain using its parent, where the parent\n  // is either the next in the chain or from the CA store\n  var first = true;\n  var error = null;\n  var depth = 0;\n  do {\n    var cert = chain.shift();\n    var parent = null;\n    var selfSigned = false;\n\n    if(validityCheckDate) {\n      // 1. check valid time\n      if(validityCheckDate < cert.validity.notBefore ||\n         validityCheckDate > cert.validity.notAfter) {\n        error = {\n          message: 'Certificate is not valid yet or has expired.',\n          error: pki.certificateError.certificate_expired,\n          notBefore: cert.validity.notBefore,\n          notAfter: cert.validity.notAfter,\n          // TODO: we might want to reconsider renaming 'now' to\n          // 'validityCheckDate' should this API be changed in the future.\n          now: validityCheckDate\n        };\n      }\n    }\n\n    // 2. verify with parent from chain or CA store\n    if(error === null) {\n      parent = chain[0] || caStore.getIssuer(cert);\n      if(parent === null) {\n        // check for self-signed cert\n        if(cert.isIssuer(cert)) {\n          selfSigned = true;\n          parent = cert;\n        }\n      }\n\n      if(parent) {\n        // FIXME: current CA store implementation might have multiple\n        // certificates where the issuer can't be determined from the\n        // certificate (happens rarely with, eg: old certificates) so normalize\n        // by always putting parents into an array\n        // TODO: there's may be an extreme degenerate case currently uncovered\n        // where an old intermediate certificate seems to have a matching parent\n        // but none of the parents actually verify ... but the intermediate\n        // is in the CA and it should pass this check; needs investigation\n        var parents = parent;\n        if(!forge.util.isArray(parents)) {\n          parents = [parents];\n        }\n\n        // try to verify with each possible parent (typically only one)\n        var verified = false;\n        while(!verified && parents.length > 0) {\n          parent = parents.shift();\n          try {\n            verified = parent.verify(cert);\n          } catch(ex) {\n            // failure to verify, don't care why, try next one\n          }\n        }\n\n        if(!verified) {\n          error = {\n            message: 'Certificate signature is invalid.',\n            error: pki.certificateError.bad_certificate\n          };\n        }\n      }\n\n      if(error === null && (!parent || selfSigned) &&\n        !caStore.hasCertificate(cert)) {\n        // no parent issuer and certificate itself is not trusted\n        error = {\n          message: 'Certificate is not trusted.',\n          error: pki.certificateError.unknown_ca\n        };\n      }\n    }\n\n    // TODO: 3. check revoked\n\n    // 4. check for matching issuer/subject\n    if(error === null && parent && !cert.isIssuer(parent)) {\n      // parent is not issuer\n      error = {\n        message: 'Certificate issuer is invalid.',\n        error: pki.certificateError.bad_certificate\n      };\n    }\n\n    // 5. TODO: check names with permitted names tree\n\n    // 6. TODO: check names against excluded names tree\n\n    // 7. check for unsupported critical extensions\n    if(error === null) {\n      // supported extensions\n      var se = {\n        keyUsage: true,\n        basicConstraints: true\n      };\n      for(var i = 0; error === null && i < cert.extensions.length; ++i) {\n        var ext = cert.extensions[i];\n        if(ext.critical && !(ext.name in se)) {\n          error = {\n            message:\n              'Certificate has an unsupported critical extension.',\n            error: pki.certificateError.unsupported_certificate\n          };\n        }\n      }\n    }\n\n    // 8. check for CA if cert is not first or is the only certificate\n    // remaining in chain with no parent or is self-signed\n    if(error === null &&\n      (!first || (chain.length === 0 && (!parent || selfSigned)))) {\n      // first check keyUsage extension and then basic constraints\n      var bcExt = cert.getExtension('basicConstraints');\n      var keyUsageExt = cert.getExtension('keyUsage');\n      if(keyUsageExt !== null) {\n        // keyCertSign must be true and there must be a basic\n        // constraints extension\n        if(!keyUsageExt.keyCertSign || bcExt === null) {\n          // bad certificate\n          error = {\n            message:\n              'Certificate keyUsage or basicConstraints conflict ' +\n              'or indicate that the certificate is not a CA. ' +\n              'If the certificate is the only one in the chain or ' +\n              'isn\\'t the first then the certificate must be a ' +\n              'valid CA.',\n            error: pki.certificateError.bad_certificate\n          };\n        }\n      }\n      // basic constraints cA flag must be set\n      if(error === null && bcExt !== null && !bcExt.cA) {\n        // bad certificate\n        error = {\n          message:\n            'Certificate basicConstraints indicates the certificate ' +\n            'is not a CA.',\n          error: pki.certificateError.bad_certificate\n        };\n      }\n      // if error is not null and keyUsage is available, then we know it\n      // has keyCertSign and there is a basic constraints extension too,\n      // which means we can check pathLenConstraint (if it exists)\n      if(error === null && keyUsageExt !== null &&\n        'pathLenConstraint' in bcExt) {\n        // pathLen is the maximum # of intermediate CA certs that can be\n        // found between the current certificate and the end-entity (depth 0)\n        // certificate; this number does not include the end-entity (depth 0,\n        // last in the chain) even if it happens to be a CA certificate itself\n        var pathLen = depth - 1;\n        if(pathLen > bcExt.pathLenConstraint) {\n          // pathLenConstraint violated, bad certificate\n          error = {\n            message:\n              'Certificate basicConstraints pathLenConstraint violated.',\n            error: pki.certificateError.bad_certificate\n          };\n        }\n      }\n    }\n\n    // call application callback\n    var vfd = (error === null) ? true : error.error;\n    var ret = options.verify ? options.verify(vfd, depth, certs) : vfd;\n    if(ret === true) {\n      // clear any set error\n      error = null;\n    } else {\n      // if passed basic tests, set default message and alert\n      if(vfd === true) {\n        error = {\n          message: 'The application rejected the certificate.',\n          error: pki.certificateError.bad_certificate\n        };\n      }\n\n      // check for custom error info\n      if(ret || ret === 0) {\n        // set custom message and error\n        if(typeof ret === 'object' && !forge.util.isArray(ret)) {\n          if(ret.message) {\n            error.message = ret.message;\n          }\n          if(ret.error) {\n            error.error = ret.error;\n          }\n        } else if(typeof ret === 'string') {\n          // set custom error\n          error.error = ret;\n        }\n      }\n\n      // throw error\n      throw error;\n    }\n\n    // no longer first cert in chain\n    first = false;\n    ++depth;\n  } while(chain.length > 0);\n\n  return true;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * Javascript implementation of PKCS#7 v1.5.\n *\n * @author Stefan Siegl\n * @author Dave Longley\n *\n * Copyright (c) 2012 Stefan Siegl <stesie@brokenpipe.de>\n * Copyright (c) 2012-2015 Digital Bazaar, Inc.\n *\n * Currently this implementation only supports ContentType of EnvelopedData,\n * EncryptedData, or SignedData at the root level. The top level elements may\n * contain only a ContentInfo of ContentType Data, i.e. plain data. Further\n * nesting is not (yet) supported.\n *\n * The Forge validators for PKCS #7's ASN.1 structures are available from\n * a separate file pkcs7asn1.js, since those are referenced from other\n * PKCS standards like PKCS #12.\n */\nvar forge = require('./forge');\nrequire('./aes');\nrequire('./asn1');\nrequire('./des');\nrequire('./oids');\nrequire('./pem');\nrequire('./pkcs7asn1');\nrequire('./random');\nrequire('./util');\nrequire('./x509');\n\n// shortcut for ASN.1 API\nvar asn1 = forge.asn1;\n\n// shortcut for PKCS#7 API\nvar p7 = module.exports = forge.pkcs7 = forge.pkcs7 || {};\n\n/**\n * Converts a PKCS#7 message from PEM format.\n *\n * @param pem the PEM-formatted PKCS#7 message.\n *\n * @return the PKCS#7 message.\n */\np7.messageFromPem = function(pem) {\n  var msg = forge.pem.decode(pem)[0];\n\n  if(msg.type !== 'PKCS7') {\n    var error = new Error('Could not convert PKCS#7 message from PEM; PEM ' +\n      'header type is not \"PKCS#7\".');\n    error.headerType = msg.type;\n    throw error;\n  }\n  if(msg.procType && msg.procType.type === 'ENCRYPTED') {\n    throw new Error('Could not convert PKCS#7 message from PEM; PEM is encrypted.');\n  }\n\n  // convert DER to ASN.1 object\n  var obj = asn1.fromDer(msg.body);\n\n  return p7.messageFromAsn1(obj);\n};\n\n/**\n * Converts a PKCS#7 message to PEM format.\n *\n * @param msg The PKCS#7 message object\n * @param maxline The maximum characters per line, defaults to 64.\n *\n * @return The PEM-formatted PKCS#7 message.\n */\np7.messageToPem = function(msg, maxline) {\n  // convert to ASN.1, then DER, then PEM-encode\n  var pemObj = {\n    type: 'PKCS7',\n    body: asn1.toDer(msg.toAsn1()).getBytes()\n  };\n  return forge.pem.encode(pemObj, {maxline: maxline});\n};\n\n/**\n * Converts a PKCS#7 message from an ASN.1 object.\n *\n * @param obj the ASN.1 representation of a ContentInfo.\n *\n * @return the PKCS#7 message.\n */\np7.messageFromAsn1 = function(obj) {\n  // validate root level ContentInfo and capture data\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(obj, p7.asn1.contentInfoValidator, capture, errors)) {\n    var error = new Error('Cannot read PKCS#7 message. ' +\n      'ASN.1 object is not an PKCS#7 ContentInfo.');\n    error.errors = errors;\n    throw error;\n  }\n\n  var contentType = asn1.derToOid(capture.contentType);\n  var msg;\n\n  switch(contentType) {\n    case forge.pki.oids.envelopedData:\n      msg = p7.createEnvelopedData();\n      break;\n\n    case forge.pki.oids.encryptedData:\n      msg = p7.createEncryptedData();\n      break;\n\n    case forge.pki.oids.signedData:\n      msg = p7.createSignedData();\n      break;\n\n    default:\n      throw new Error('Cannot read PKCS#7 message. ContentType with OID ' +\n        contentType + ' is not (yet) supported.');\n  }\n\n  msg.fromAsn1(capture.content.value[0]);\n  return msg;\n};\n\np7.createSignedData = function() {\n  var msg = null;\n  msg = {\n    type: forge.pki.oids.signedData,\n    version: 1,\n    certificates: [],\n    crls: [],\n    // TODO: add json-formatted signer stuff here?\n    signers: [],\n    // populated during sign()\n    digestAlgorithmIdentifiers: [],\n    contentInfo: null,\n    signerInfos: [],\n\n    fromAsn1: function(obj) {\n      // validate SignedData content block and capture data.\n      _fromAsn1(msg, obj, p7.asn1.signedDataValidator);\n      msg.certificates = [];\n      msg.crls = [];\n      msg.digestAlgorithmIdentifiers = [];\n      msg.contentInfo = null;\n      msg.signerInfos = [];\n\n      if(msg.rawCapture.certificates) {\n        var certs = msg.rawCapture.certificates.value;\n        for(var i = 0; i < certs.length; ++i) {\n          msg.certificates.push(forge.pki.certificateFromAsn1(certs[i]));\n        }\n      }\n\n      // TODO: parse crls\n    },\n\n    toAsn1: function() {\n      // degenerate case with no content\n      if(!msg.contentInfo) {\n        msg.sign();\n      }\n\n      var certs = [];\n      for(var i = 0; i < msg.certificates.length; ++i) {\n        certs.push(forge.pki.certificateToAsn1(msg.certificates[i]));\n      }\n\n      var crls = [];\n      // TODO: implement CRLs\n\n      // [0] SignedData\n      var signedData = asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n          // Version\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n            asn1.integerToDer(msg.version).getBytes()),\n          // DigestAlgorithmIdentifiers\n          asn1.create(\n            asn1.Class.UNIVERSAL, asn1.Type.SET, true,\n            msg.digestAlgorithmIdentifiers),\n          // ContentInfo\n          msg.contentInfo\n        ])\n      ]);\n      if(certs.length > 0) {\n        // [0] IMPLICIT ExtendedCertificatesAndCertificates OPTIONAL\n        signedData.value[0].value.push(\n          asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, certs));\n      }\n      if(crls.length > 0) {\n        // [1] IMPLICIT CertificateRevocationLists OPTIONAL\n        signedData.value[0].value.push(\n          asn1.create(asn1.Class.CONTEXT_SPECIFIC, 1, true, crls));\n      }\n      // SignerInfos\n      signedData.value[0].value.push(\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true,\n          msg.signerInfos));\n\n      // ContentInfo\n      return asn1.create(\n        asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n          // ContentType\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n            asn1.oidToDer(msg.type).getBytes()),\n          // [0] SignedData\n          signedData\n        ]);\n    },\n\n    /**\n     * Add (another) entity to list of signers.\n     *\n     * Note: If authenticatedAttributes are provided, then, per RFC 2315,\n     * they must include at least two attributes: content type and\n     * message digest. The message digest attribute value will be\n     * auto-calculated during signing and will be ignored if provided.\n     *\n     * Here's an example of providing these two attributes:\n     *\n     * forge.pkcs7.createSignedData();\n     * p7.addSigner({\n     *   issuer: cert.issuer.attributes,\n     *   serialNumber: cert.serialNumber,\n     *   key: privateKey,\n     *   digestAlgorithm: forge.pki.oids.sha1,\n     *   authenticatedAttributes: [{\n     *     type: forge.pki.oids.contentType,\n     *     value: forge.pki.oids.data\n     *   }, {\n     *     type: forge.pki.oids.messageDigest\n     *   }]\n     * });\n     *\n     * TODO: Support [subjectKeyIdentifier] as signer's ID.\n     *\n     * @param signer the signer information:\n     *          key the signer's private key.\n     *          [certificate] a certificate containing the public key\n     *            associated with the signer's private key; use this option as\n     *            an alternative to specifying signer.issuer and\n     *            signer.serialNumber.\n     *          [issuer] the issuer attributes (eg: cert.issuer.attributes).\n     *          [serialNumber] the signer's certificate's serial number in\n     *           hexadecimal (eg: cert.serialNumber).\n     *          [digestAlgorithm] the message digest OID, as a string, to use\n     *            (eg: forge.pki.oids.sha1).\n     *          [authenticatedAttributes] an optional array of attributes\n     *            to also sign along with the content.\n     */\n    addSigner: function(signer) {\n      var issuer = signer.issuer;\n      var serialNumber = signer.serialNumber;\n      if(signer.certificate) {\n        var cert = signer.certificate;\n        if(typeof cert === 'string') {\n          cert = forge.pki.certificateFromPem(cert);\n        }\n        issuer = cert.issuer.attributes;\n        serialNumber = cert.serialNumber;\n      }\n      var key = signer.key;\n      if(!key) {\n        throw new Error(\n          'Could not add PKCS#7 signer; no private key specified.');\n      }\n      if(typeof key === 'string') {\n        key = forge.pki.privateKeyFromPem(key);\n      }\n\n      // ensure OID known for digest algorithm\n      var digestAlgorithm = signer.digestAlgorithm || forge.pki.oids.sha1;\n      switch(digestAlgorithm) {\n      case forge.pki.oids.sha1:\n      case forge.pki.oids.sha256:\n      case forge.pki.oids.sha384:\n      case forge.pki.oids.sha512:\n      case forge.pki.oids.md5:\n        break;\n      default:\n        throw new Error(\n          'Could not add PKCS#7 signer; unknown message digest algorithm: ' +\n          digestAlgorithm);\n      }\n\n      // if authenticatedAttributes is present, then the attributes\n      // must contain at least PKCS #9 content-type and message-digest\n      var authenticatedAttributes = signer.authenticatedAttributes || [];\n      if(authenticatedAttributes.length > 0) {\n        var contentType = false;\n        var messageDigest = false;\n        for(var i = 0; i < authenticatedAttributes.length; ++i) {\n          var attr = authenticatedAttributes[i];\n          if(!contentType && attr.type === forge.pki.oids.contentType) {\n            contentType = true;\n            if(messageDigest) {\n              break;\n            }\n            continue;\n          }\n          if(!messageDigest && attr.type === forge.pki.oids.messageDigest) {\n            messageDigest = true;\n            if(contentType) {\n              break;\n            }\n            continue;\n          }\n        }\n\n        if(!contentType || !messageDigest) {\n          throw new Error('Invalid signer.authenticatedAttributes. If ' +\n            'signer.authenticatedAttributes is specified, then it must ' +\n            'contain at least two attributes, PKCS #9 content-type and ' +\n            'PKCS #9 message-digest.');\n        }\n      }\n\n      msg.signers.push({\n        key: key,\n        version: 1,\n        issuer: issuer,\n        serialNumber: serialNumber,\n        digestAlgorithm: digestAlgorithm,\n        signatureAlgorithm: forge.pki.oids.rsaEncryption,\n        signature: null,\n        authenticatedAttributes: authenticatedAttributes,\n        unauthenticatedAttributes: []\n      });\n    },\n\n    /**\n     * Signs the content.\n     * @param options Options to apply when signing:\n     *    [detached] boolean. If signing should be done in detached mode. Defaults to false.\n     */\n    sign: function(options) {\n      options = options || {};\n      // auto-generate content info\n      if(typeof msg.content !== 'object' || msg.contentInfo === null) {\n        // use Data ContentInfo\n        msg.contentInfo = asn1.create(\n          asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n            // ContentType\n            asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n              asn1.oidToDer(forge.pki.oids.data).getBytes())\n          ]);\n\n        // add actual content, if present\n        if('content' in msg) {\n          var content;\n          if(msg.content instanceof forge.util.ByteBuffer) {\n            content = msg.content.bytes();\n          } else if(typeof msg.content === 'string') {\n            content = forge.util.encodeUtf8(msg.content);\n          }\n\n          if (options.detached) {\n            msg.detachedContent = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false, content);\n          } else {\n            msg.contentInfo.value.push(\n              // [0] EXPLICIT content\n              asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n                asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n                  content)\n              ]));\n          }\n        }\n      }\n\n      // no signers, return early (degenerate case for certificate container)\n      if(msg.signers.length === 0) {\n        return;\n      }\n\n      // generate digest algorithm identifiers\n      var mds = addDigestAlgorithmIds();\n\n      // generate signerInfos\n      addSignerInfos(mds);\n    },\n\n    verify: function() {\n      throw new Error('PKCS#7 signature verification not yet implemented.');\n    },\n\n    /**\n     * Add a certificate.\n     *\n     * @param cert the certificate to add.\n     */\n    addCertificate: function(cert) {\n      // convert from PEM\n      if(typeof cert === 'string') {\n        cert = forge.pki.certificateFromPem(cert);\n      }\n      msg.certificates.push(cert);\n    },\n\n    /**\n     * Add a certificate revokation list.\n     *\n     * @param crl the certificate revokation list to add.\n     */\n    addCertificateRevokationList: function(crl) {\n      throw new Error('PKCS#7 CRL support not yet implemented.');\n    }\n  };\n  return msg;\n\n  function addDigestAlgorithmIds() {\n    var mds = {};\n\n    for(var i = 0; i < msg.signers.length; ++i) {\n      var signer = msg.signers[i];\n      var oid = signer.digestAlgorithm;\n      if(!(oid in mds)) {\n        // content digest\n        mds[oid] = forge.md[forge.pki.oids[oid]].create();\n      }\n      if(signer.authenticatedAttributes.length === 0) {\n        // no custom attributes to digest; use content message digest\n        signer.md = mds[oid];\n      } else {\n        // custom attributes to be digested; use own message digest\n        // TODO: optimize to just copy message digest state if that\n        // feature is ever supported with message digests\n        signer.md = forge.md[forge.pki.oids[oid]].create();\n      }\n    }\n\n    // add unique digest algorithm identifiers\n    msg.digestAlgorithmIdentifiers = [];\n    for(var oid in mds) {\n      msg.digestAlgorithmIdentifiers.push(\n        // AlgorithmIdentifier\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n          // algorithm\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n            asn1.oidToDer(oid).getBytes()),\n          // parameters (null)\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n        ]));\n    }\n\n    return mds;\n  }\n\n  function addSignerInfos(mds) {\n    var content;\n\n    if (msg.detachedContent) {\n      // Signature has been made in detached mode.\n      content = msg.detachedContent;\n    } else {\n      // Note: ContentInfo is a SEQUENCE with 2 values, second value is\n      // the content field and is optional for a ContentInfo but required here\n      // since signers are present\n      // get ContentInfo content\n      content = msg.contentInfo.value[1];\n      // skip [0] EXPLICIT content wrapper\n      content = content.value[0];\n    }\n\n    if(!content) {\n      throw new Error(\n        'Could not sign PKCS#7 message; there is no content to sign.');\n    }\n\n    // get ContentInfo content type\n    var contentType = asn1.derToOid(msg.contentInfo.value[0].value);\n\n    // serialize content\n    var bytes = asn1.toDer(content);\n\n    // skip identifier and length per RFC 2315 9.3\n    // skip identifier (1 byte)\n    bytes.getByte();\n    // read and discard length bytes\n    asn1.getBerValueLength(bytes);\n    bytes = bytes.getBytes();\n\n    // digest content DER value bytes\n    for(var oid in mds) {\n      mds[oid].start().update(bytes);\n    }\n\n    // sign content\n    var signingTime = new Date();\n    for(var i = 0; i < msg.signers.length; ++i) {\n      var signer = msg.signers[i];\n\n      if(signer.authenticatedAttributes.length === 0) {\n        // if ContentInfo content type is not \"Data\", then\n        // authenticatedAttributes must be present per RFC 2315\n        if(contentType !== forge.pki.oids.data) {\n          throw new Error(\n            'Invalid signer; authenticatedAttributes must be present ' +\n            'when the ContentInfo content type is not PKCS#7 Data.');\n        }\n      } else {\n        // process authenticated attributes\n        // [0] IMPLICIT\n        signer.authenticatedAttributesAsn1 = asn1.create(\n          asn1.Class.CONTEXT_SPECIFIC, 0, true, []);\n\n        // per RFC 2315, attributes are to be digested using a SET container\n        // not the above [0] IMPLICIT container\n        var attrsAsn1 = asn1.create(\n          asn1.Class.UNIVERSAL, asn1.Type.SET, true, []);\n\n        for(var ai = 0; ai < signer.authenticatedAttributes.length; ++ai) {\n          var attr = signer.authenticatedAttributes[ai];\n          if(attr.type === forge.pki.oids.messageDigest) {\n            // use content message digest as value\n            attr.value = mds[signer.digestAlgorithm].digest();\n          } else if(attr.type === forge.pki.oids.signingTime) {\n            // auto-populate signing time if not already set\n            if(!attr.value) {\n              attr.value = signingTime;\n            }\n          }\n\n          // convert to ASN.1 and push onto Attributes SET (for signing) and\n          // onto authenticatedAttributesAsn1 to complete SignedData ASN.1\n          // TODO: optimize away duplication\n          attrsAsn1.value.push(_attributeToAsn1(attr));\n          signer.authenticatedAttributesAsn1.value.push(_attributeToAsn1(attr));\n        }\n\n        // DER-serialize and digest SET OF attributes only\n        bytes = asn1.toDer(attrsAsn1).getBytes();\n        signer.md.start().update(bytes);\n      }\n\n      // sign digest\n      signer.signature = signer.key.sign(signer.md, 'RSASSA-PKCS1-V1_5');\n    }\n\n    // add signer info\n    msg.signerInfos = _signersToAsn1(msg.signers);\n  }\n};\n\n/**\n * Creates an empty PKCS#7 message of type EncryptedData.\n *\n * @return the message.\n */\np7.createEncryptedData = function() {\n  var msg = null;\n  msg = {\n    type: forge.pki.oids.encryptedData,\n    version: 0,\n    encryptedContent: {\n      algorithm: forge.pki.oids['aes256-CBC']\n    },\n\n    /**\n     * Reads an EncryptedData content block (in ASN.1 format)\n     *\n     * @param obj The ASN.1 representation of the EncryptedData content block\n     */\n    fromAsn1: function(obj) {\n      // Validate EncryptedData content block and capture data.\n      _fromAsn1(msg, obj, p7.asn1.encryptedDataValidator);\n    },\n\n    /**\n     * Decrypt encrypted content\n     *\n     * @param key The (symmetric) key as a byte buffer\n     */\n    decrypt: function(key) {\n      if(key !== undefined) {\n        msg.encryptedContent.key = key;\n      }\n      _decryptContent(msg);\n    }\n  };\n  return msg;\n};\n\n/**\n * Creates an empty PKCS#7 message of type EnvelopedData.\n *\n * @return the message.\n */\np7.createEnvelopedData = function() {\n  var msg = null;\n  msg = {\n    type: forge.pki.oids.envelopedData,\n    version: 0,\n    recipients: [],\n    encryptedContent: {\n      algorithm: forge.pki.oids['aes256-CBC']\n    },\n\n    /**\n     * Reads an EnvelopedData content block (in ASN.1 format)\n     *\n     * @param obj the ASN.1 representation of the EnvelopedData content block.\n     */\n    fromAsn1: function(obj) {\n      // validate EnvelopedData content block and capture data\n      var capture = _fromAsn1(msg, obj, p7.asn1.envelopedDataValidator);\n      msg.recipients = _recipientsFromAsn1(capture.recipientInfos.value);\n    },\n\n    toAsn1: function() {\n      // ContentInfo\n      return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n        // ContentType\n        asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n          asn1.oidToDer(msg.type).getBytes()),\n        // [0] EnvelopedData\n        asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n          asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n            // Version\n            asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n              asn1.integerToDer(msg.version).getBytes()),\n            // RecipientInfos\n            asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true,\n              _recipientsToAsn1(msg.recipients)),\n            // EncryptedContentInfo\n            asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true,\n              _encryptedContentToAsn1(msg.encryptedContent))\n          ])\n        ])\n      ]);\n    },\n\n    /**\n     * Find recipient by X.509 certificate's issuer.\n     *\n     * @param cert the certificate with the issuer to look for.\n     *\n     * @return the recipient object.\n     */\n    findRecipient: function(cert) {\n      var sAttr = cert.issuer.attributes;\n\n      for(var i = 0; i < msg.recipients.length; ++i) {\n        var r = msg.recipients[i];\n        var rAttr = r.issuer;\n\n        if(r.serialNumber !== cert.serialNumber) {\n          continue;\n        }\n\n        if(rAttr.length !== sAttr.length) {\n          continue;\n        }\n\n        var match = true;\n        for(var j = 0; j < sAttr.length; ++j) {\n          if(rAttr[j].type !== sAttr[j].type ||\n            rAttr[j].value !== sAttr[j].value) {\n            match = false;\n            break;\n          }\n        }\n\n        if(match) {\n          return r;\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Decrypt enveloped content\n     *\n     * @param recipient The recipient object related to the private key\n     * @param privKey The (RSA) private key object\n     */\n    decrypt: function(recipient, privKey) {\n      if(msg.encryptedContent.key === undefined && recipient !== undefined &&\n        privKey !== undefined) {\n        switch(recipient.encryptedContent.algorithm) {\n          case forge.pki.oids.rsaEncryption:\n          case forge.pki.oids.desCBC:\n            var key = privKey.decrypt(recipient.encryptedContent.content);\n            msg.encryptedContent.key = forge.util.createBuffer(key);\n            break;\n\n          default:\n            throw new Error('Unsupported asymmetric cipher, ' +\n              'OID ' + recipient.encryptedContent.algorithm);\n        }\n      }\n\n      _decryptContent(msg);\n    },\n\n    /**\n     * Add (another) entity to list of recipients.\n     *\n     * @param cert The certificate of the entity to add.\n     */\n    addRecipient: function(cert) {\n      msg.recipients.push({\n        version: 0,\n        issuer: cert.issuer.attributes,\n        serialNumber: cert.serialNumber,\n        encryptedContent: {\n          // We simply assume rsaEncryption here, since forge.pki only\n          // supports RSA so far.  If the PKI module supports other\n          // ciphers one day, we need to modify this one as well.\n          algorithm: forge.pki.oids.rsaEncryption,\n          key: cert.publicKey\n        }\n      });\n    },\n\n    /**\n     * Encrypt enveloped content.\n     *\n     * This function supports two optional arguments, cipher and key, which\n     * can be used to influence symmetric encryption.  Unless cipher is\n     * provided, the cipher specified in encryptedContent.algorithm is used\n     * (defaults to AES-256-CBC).  If no key is provided, encryptedContent.key\n     * is (re-)used.  If that one's not set, a random key will be generated\n     * automatically.\n     *\n     * @param [key] The key to be used for symmetric encryption.\n     * @param [cipher] The OID of the symmetric cipher to use.\n     */\n    encrypt: function(key, cipher) {\n      // Part 1: Symmetric encryption\n      if(msg.encryptedContent.content === undefined) {\n        cipher = cipher || msg.encryptedContent.algorithm;\n        key = key || msg.encryptedContent.key;\n\n        var keyLen, ivLen, ciphFn;\n        switch(cipher) {\n          case forge.pki.oids['aes128-CBC']:\n            keyLen = 16;\n            ivLen = 16;\n            ciphFn = forge.aes.createEncryptionCipher;\n            break;\n\n          case forge.pki.oids['aes192-CBC']:\n            keyLen = 24;\n            ivLen = 16;\n            ciphFn = forge.aes.createEncryptionCipher;\n            break;\n\n          case forge.pki.oids['aes256-CBC']:\n            keyLen = 32;\n            ivLen = 16;\n            ciphFn = forge.aes.createEncryptionCipher;\n            break;\n\n          case forge.pki.oids['des-EDE3-CBC']:\n            keyLen = 24;\n            ivLen = 8;\n            ciphFn = forge.des.createEncryptionCipher;\n            break;\n\n          default:\n            throw new Error('Unsupported symmetric cipher, OID ' + cipher);\n        }\n\n        if(key === undefined) {\n          key = forge.util.createBuffer(forge.random.getBytes(keyLen));\n        } else if(key.length() != keyLen) {\n          throw new Error('Symmetric key has wrong length; ' +\n            'got ' + key.length() + ' bytes, expected ' + keyLen + '.');\n        }\n\n        // Keep a copy of the key & IV in the object, so the caller can\n        // use it for whatever reason.\n        msg.encryptedContent.algorithm = cipher;\n        msg.encryptedContent.key = key;\n        msg.encryptedContent.parameter = forge.util.createBuffer(\n          forge.random.getBytes(ivLen));\n\n        var ciph = ciphFn(key);\n        ciph.start(msg.encryptedContent.parameter.copy());\n        ciph.update(msg.content);\n\n        // The finish function does PKCS#7 padding by default, therefore\n        // no action required by us.\n        if(!ciph.finish()) {\n          throw new Error('Symmetric encryption failed.');\n        }\n\n        msg.encryptedContent.content = ciph.output;\n      }\n\n      // Part 2: asymmetric encryption for each recipient\n      for(var i = 0; i < msg.recipients.length; ++i) {\n        var recipient = msg.recipients[i];\n\n        // Nothing to do, encryption already done.\n        if(recipient.encryptedContent.content !== undefined) {\n          continue;\n        }\n\n        switch(recipient.encryptedContent.algorithm) {\n          case forge.pki.oids.rsaEncryption:\n            recipient.encryptedContent.content =\n              recipient.encryptedContent.key.encrypt(\n                msg.encryptedContent.key.data);\n            break;\n\n          default:\n            throw new Error('Unsupported asymmetric cipher, OID ' +\n              recipient.encryptedContent.algorithm);\n        }\n      }\n    }\n  };\n  return msg;\n};\n\n/**\n * Converts a single recipient from an ASN.1 object.\n *\n * @param obj the ASN.1 RecipientInfo.\n *\n * @return the recipient object.\n */\nfunction _recipientFromAsn1(obj) {\n  // validate EnvelopedData content block and capture data\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(obj, p7.asn1.recipientInfoValidator, capture, errors)) {\n    var error = new Error('Cannot read PKCS#7 RecipientInfo. ' +\n      'ASN.1 object is not an PKCS#7 RecipientInfo.');\n    error.errors = errors;\n    throw error;\n  }\n\n  return {\n    version: capture.version.charCodeAt(0),\n    issuer: forge.pki.RDNAttributesAsArray(capture.issuer),\n    serialNumber: forge.util.createBuffer(capture.serial).toHex(),\n    encryptedContent: {\n      algorithm: asn1.derToOid(capture.encAlgorithm),\n      parameter: capture.encParameter ? capture.encParameter.value : undefined,\n      content: capture.encKey\n    }\n  };\n}\n\n/**\n * Converts a single recipient object to an ASN.1 object.\n *\n * @param obj the recipient object.\n *\n * @return the ASN.1 RecipientInfo.\n */\nfunction _recipientToAsn1(obj) {\n  return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // Version\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      asn1.integerToDer(obj.version).getBytes()),\n    // IssuerAndSerialNumber\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // Name\n      forge.pki.distinguishedNameToAsn1({attributes: obj.issuer}),\n      // Serial\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n        forge.util.hexToBytes(obj.serialNumber))\n    ]),\n    // KeyEncryptionAlgorithmIdentifier\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // Algorithm\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(obj.encryptedContent.algorithm).getBytes()),\n      // Parameter, force NULL, only RSA supported for now.\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n    ]),\n    // EncryptedKey\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n      obj.encryptedContent.content)\n  ]);\n}\n\n/**\n * Map a set of RecipientInfo ASN.1 objects to recipient objects.\n *\n * @param infos an array of ASN.1 representations RecipientInfo (i.e. SET OF).\n *\n * @return an array of recipient objects.\n */\nfunction _recipientsFromAsn1(infos) {\n  var ret = [];\n  for(var i = 0; i < infos.length; ++i) {\n    ret.push(_recipientFromAsn1(infos[i]));\n  }\n  return ret;\n}\n\n/**\n * Map an array of recipient objects to ASN.1 RecipientInfo objects.\n *\n * @param recipients an array of recipientInfo objects.\n *\n * @return an array of ASN.1 RecipientInfos.\n */\nfunction _recipientsToAsn1(recipients) {\n  var ret = [];\n  for(var i = 0; i < recipients.length; ++i) {\n    ret.push(_recipientToAsn1(recipients[i]));\n  }\n  return ret;\n}\n\n/**\n * Converts a single signer from an ASN.1 object.\n *\n * @param obj the ASN.1 representation of a SignerInfo.\n *\n * @return the signer object.\n */\nfunction _signerFromAsn1(obj) {\n  // validate EnvelopedData content block and capture data\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(obj, p7.asn1.signerInfoValidator, capture, errors)) {\n    var error = new Error('Cannot read PKCS#7 SignerInfo. ' +\n      'ASN.1 object is not an PKCS#7 SignerInfo.');\n    error.errors = errors;\n    throw error;\n  }\n\n  var rval = {\n    version: capture.version.charCodeAt(0),\n    issuer: forge.pki.RDNAttributesAsArray(capture.issuer),\n    serialNumber: forge.util.createBuffer(capture.serial).toHex(),\n    digestAlgorithm: asn1.derToOid(capture.digestAlgorithm),\n    signatureAlgorithm: asn1.derToOid(capture.signatureAlgorithm),\n    signature: capture.signature,\n    authenticatedAttributes: [],\n    unauthenticatedAttributes: []\n  };\n\n  // TODO: convert attributes\n  var authenticatedAttributes = capture.authenticatedAttributes || [];\n  var unauthenticatedAttributes = capture.unauthenticatedAttributes || [];\n\n  return rval;\n}\n\n/**\n * Converts a single signerInfo object to an ASN.1 object.\n *\n * @param obj the signerInfo object.\n *\n * @return the ASN.1 representation of a SignerInfo.\n */\nfunction _signerToAsn1(obj) {\n  // SignerInfo\n  var rval = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // version\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      asn1.integerToDer(obj.version).getBytes()),\n    // issuerAndSerialNumber\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // name\n      forge.pki.distinguishedNameToAsn1({attributes: obj.issuer}),\n      // serial\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n        forge.util.hexToBytes(obj.serialNumber))\n    ]),\n    // digestAlgorithm\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // algorithm\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(obj.digestAlgorithm).getBytes()),\n      // parameters (null)\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n    ])\n  ]);\n\n  // authenticatedAttributes (OPTIONAL)\n  if(obj.authenticatedAttributesAsn1) {\n    // add ASN.1 previously generated during signing\n    rval.value.push(obj.authenticatedAttributesAsn1);\n  }\n\n  // digestEncryptionAlgorithm\n  rval.value.push(asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // algorithm\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n      asn1.oidToDer(obj.signatureAlgorithm).getBytes()),\n    // parameters (null)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n  ]));\n\n  // encryptedDigest\n  rval.value.push(asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false, obj.signature));\n\n  // unauthenticatedAttributes (OPTIONAL)\n  if(obj.unauthenticatedAttributes.length > 0) {\n    // [1] IMPLICIT\n    var attrsAsn1 = asn1.create(asn1.Class.CONTEXT_SPECIFIC, 1, true, []);\n    for(var i = 0; i < obj.unauthenticatedAttributes.length; ++i) {\n      var attr = obj.unauthenticatedAttributes[i];\n      attrsAsn1.values.push(_attributeToAsn1(attr));\n    }\n    rval.value.push(attrsAsn1);\n  }\n\n  return rval;\n}\n\n/**\n * Map a set of SignerInfo ASN.1 objects to an array of signer objects.\n *\n * @param signerInfoAsn1s an array of ASN.1 SignerInfos (i.e. SET OF).\n *\n * @return an array of signers objects.\n */\nfunction _signersFromAsn1(signerInfoAsn1s) {\n  var ret = [];\n  for(var i = 0; i < signerInfoAsn1s.length; ++i) {\n    ret.push(_signerFromAsn1(signerInfoAsn1s[i]));\n  }\n  return ret;\n}\n\n/**\n * Map an array of signer objects to ASN.1 objects.\n *\n * @param signers an array of signer objects.\n *\n * @return an array of ASN.1 SignerInfos.\n */\nfunction _signersToAsn1(signers) {\n  var ret = [];\n  for(var i = 0; i < signers.length; ++i) {\n    ret.push(_signerToAsn1(signers[i]));\n  }\n  return ret;\n}\n\n/**\n * Convert an attribute object to an ASN.1 Attribute.\n *\n * @param attr the attribute object.\n *\n * @return the ASN.1 Attribute.\n */\nfunction _attributeToAsn1(attr) {\n  var value;\n\n  // TODO: generalize to support more attributes\n  if(attr.type === forge.pki.oids.contentType) {\n    value = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n      asn1.oidToDer(attr.value).getBytes());\n  } else if(attr.type === forge.pki.oids.messageDigest) {\n    value = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n      attr.value.bytes());\n  } else if(attr.type === forge.pki.oids.signingTime) {\n    /* Note per RFC 2985: Dates between 1 January 1950 and 31 December 2049\n      (inclusive) MUST be encoded as UTCTime. Any dates with year values\n      before 1950 or after 2049 MUST be encoded as GeneralizedTime. [Further,]\n      UTCTime values MUST be expressed in Greenwich Mean Time (Zulu) and MUST\n      include seconds (i.e., times are YYMMDDHHMMSSZ), even where the\n      number of seconds is zero.  Midnight (GMT) must be represented as\n      \"YYMMDD000000Z\". */\n    // TODO: make these module-level constants\n    var jan_1_1950 = new Date('1950-01-01T00:00:00Z');\n    var jan_1_2050 = new Date('2050-01-01T00:00:00Z');\n    var date = attr.value;\n    if(typeof date === 'string') {\n      // try to parse date\n      var timestamp = Date.parse(date);\n      if(!isNaN(timestamp)) {\n        date = new Date(timestamp);\n      } else if(date.length === 13) {\n        // YYMMDDHHMMSSZ (13 chars for UTCTime)\n        date = asn1.utcTimeToDate(date);\n      } else {\n        // assume generalized time\n        date = asn1.generalizedTimeToDate(date);\n      }\n    }\n\n    if(date >= jan_1_1950 && date < jan_1_2050) {\n      value = asn1.create(\n        asn1.Class.UNIVERSAL, asn1.Type.UTCTIME, false,\n        asn1.dateToUtcTime(date));\n    } else {\n      value = asn1.create(\n        asn1.Class.UNIVERSAL, asn1.Type.GENERALIZEDTIME, false,\n        asn1.dateToGeneralizedTime(date));\n    }\n  }\n\n  // TODO: expose as common API call\n  // create a RelativeDistinguishedName set\n  // each value in the set is an AttributeTypeAndValue first\n  // containing the type (an OID) and second the value\n  return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // AttributeType\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n      asn1.oidToDer(attr.type).getBytes()),\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true, [\n      // AttributeValue\n      value\n    ])\n  ]);\n}\n\n/**\n * Map messages encrypted content to ASN.1 objects.\n *\n * @param ec The encryptedContent object of the message.\n *\n * @return ASN.1 representation of the encryptedContent object (SEQUENCE).\n */\nfunction _encryptedContentToAsn1(ec) {\n  return [\n    // ContentType, always Data for the moment\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n      asn1.oidToDer(forge.pki.oids.data).getBytes()),\n    // ContentEncryptionAlgorithmIdentifier\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // Algorithm\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(ec.algorithm).getBytes()),\n      // Parameters (IV)\n      !ec.parameter ?\n        undefined :\n        asn1.create(\n          asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n          ec.parameter.getBytes())\n    ]),\n    // [0] EncryptedContent\n    asn1.create(asn1.Class.CONTEXT_SPECIFIC, 0, true, [\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n        ec.content.getBytes())\n    ])\n  ];\n}\n\n/**\n * Reads the \"common part\" of an PKCS#7 content block (in ASN.1 format)\n *\n * This function reads the \"common part\" of the PKCS#7 content blocks\n * EncryptedData and EnvelopedData, i.e. version number and symmetrically\n * encrypted content block.\n *\n * The result of the ASN.1 validate and capture process is returned\n * to allow the caller to extract further data, e.g. the list of recipients\n * in case of a EnvelopedData object.\n *\n * @param msg the PKCS#7 object to read the data to.\n * @param obj the ASN.1 representation of the content block.\n * @param validator the ASN.1 structure validator object to use.\n *\n * @return the value map captured by validator object.\n */\nfunction _fromAsn1(msg, obj, validator) {\n  var capture = {};\n  var errors = [];\n  if(!asn1.validate(obj, validator, capture, errors)) {\n    var error = new Error('Cannot read PKCS#7 message. ' +\n      'ASN.1 object is not a supported PKCS#7 message.');\n    error.errors = error;\n    throw error;\n  }\n\n  // Check contentType, so far we only support (raw) Data.\n  var contentType = asn1.derToOid(capture.contentType);\n  if(contentType !== forge.pki.oids.data) {\n    throw new Error('Unsupported PKCS#7 message. ' +\n      'Only wrapped ContentType Data supported.');\n  }\n\n  if(capture.encryptedContent) {\n    var content = '';\n    if(forge.util.isArray(capture.encryptedContent)) {\n      for(var i = 0; i < capture.encryptedContent.length; ++i) {\n        if(capture.encryptedContent[i].type !== asn1.Type.OCTETSTRING) {\n          throw new Error('Malformed PKCS#7 message, expecting encrypted ' +\n            'content constructed of only OCTET STRING objects.');\n        }\n        content += capture.encryptedContent[i].value;\n      }\n    } else {\n      content = capture.encryptedContent;\n    }\n    msg.encryptedContent = {\n      algorithm: asn1.derToOid(capture.encAlgorithm),\n      parameter: forge.util.createBuffer(capture.encParameter.value),\n      content: forge.util.createBuffer(content)\n    };\n  }\n\n  if(capture.content) {\n    var content = '';\n    if(forge.util.isArray(capture.content)) {\n      for(var i = 0; i < capture.content.length; ++i) {\n        if(capture.content[i].type !== asn1.Type.OCTETSTRING) {\n          throw new Error('Malformed PKCS#7 message, expecting ' +\n            'content constructed of only OCTET STRING objects.');\n        }\n        content += capture.content[i].value;\n      }\n    } else {\n      content = capture.content;\n    }\n    msg.content = forge.util.createBuffer(content);\n  }\n\n  msg.version = capture.version.charCodeAt(0);\n  msg.rawCapture = capture;\n\n  return capture;\n}\n\n/**\n * Decrypt the symmetrically encrypted content block of the PKCS#7 message.\n *\n * Decryption is skipped in case the PKCS#7 message object already has a\n * (decrypted) content attribute.  The algorithm, key and cipher parameters\n * (probably the iv) are taken from the encryptedContent attribute of the\n * message object.\n *\n * @param The PKCS#7 message object.\n */\nfunction _decryptContent(msg) {\n  if(msg.encryptedContent.key === undefined) {\n    throw new Error('Symmetric key not available.');\n  }\n\n  if(msg.content === undefined) {\n    var ciph;\n\n    switch(msg.encryptedContent.algorithm) {\n      case forge.pki.oids['aes128-CBC']:\n      case forge.pki.oids['aes192-CBC']:\n      case forge.pki.oids['aes256-CBC']:\n        ciph = forge.aes.createDecryptionCipher(msg.encryptedContent.key);\n        break;\n\n      case forge.pki.oids['desCBC']:\n      case forge.pki.oids['des-EDE3-CBC']:\n        ciph = forge.des.createDecryptionCipher(msg.encryptedContent.key);\n        break;\n\n      default:\n        throw new Error('Unsupported symmetric cipher, OID ' +\n          msg.encryptedContent.algorithm);\n    }\n    ciph.start(msg.encryptedContent.parameter);\n    ciph.update(msg.encryptedContent.content);\n\n    if(!ciph.finish()) {\n      throw new Error('Symmetric decryption failed.');\n    }\n\n    msg.content = ciph.output;\n  }\n}\n","/**\n * Javascript implementation of basic PEM (Privacy Enhanced Mail) algorithms.\n *\n * See: RFC 1421.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2013-2014 Digital Bazaar, Inc.\n *\n * A Forge PEM object has the following fields:\n *\n * type: identifies the type of message (eg: \"RSA PRIVATE KEY\").\n *\n * procType: identifies the type of processing performed on the message,\n *   it has two subfields: version and type, eg: 4,ENCRYPTED.\n *\n * contentDomain: identifies the type of content in the message, typically\n *   only uses the value: \"RFC822\".\n *\n * dekInfo: identifies the message encryption algorithm and mode and includes\n *   any parameters for the algorithm, it has two subfields: algorithm and\n *   parameters, eg: DES-CBC,F8143EDE5960C597.\n *\n * headers: contains all other PEM encapsulated headers -- where order is\n *   significant (for pairing data like recipient ID + key info).\n *\n * body: the binary-encoded body.\n */\nvar forge = require('./forge');\nrequire('./util');\n\n// shortcut for pem API\nvar pem = module.exports = forge.pem = forge.pem || {};\n\n/**\n * Encodes (serializes) the given PEM object.\n *\n * @param msg the PEM message object to encode.\n * @param options the options to use:\n *          maxline the maximum characters per line for the body, (default: 64).\n *\n * @return the PEM-formatted string.\n */\npem.encode = function(msg, options) {\n  options = options || {};\n  var rval = '-----BEGIN ' + msg.type + '-----\\r\\n';\n\n  // encode special headers\n  var header;\n  if(msg.procType) {\n    header = {\n      name: 'Proc-Type',\n      values: [String(msg.procType.version), msg.procType.type]\n    };\n    rval += foldHeader(header);\n  }\n  if(msg.contentDomain) {\n    header = {name: 'Content-Domain', values: [msg.contentDomain]};\n    rval += foldHeader(header);\n  }\n  if(msg.dekInfo) {\n    header = {name: 'DEK-Info', values: [msg.dekInfo.algorithm]};\n    if(msg.dekInfo.parameters) {\n      header.values.push(msg.dekInfo.parameters);\n    }\n    rval += foldHeader(header);\n  }\n\n  if(msg.headers) {\n    // encode all other headers\n    for(var i = 0; i < msg.headers.length; ++i) {\n      rval += foldHeader(msg.headers[i]);\n    }\n  }\n\n  // terminate header\n  if(msg.procType) {\n    rval += '\\r\\n';\n  }\n\n  // add body\n  rval += forge.util.encode64(msg.body, options.maxline || 64) + '\\r\\n';\n\n  rval += '-----END ' + msg.type + '-----\\r\\n';\n  return rval;\n};\n\n/**\n * Decodes (deserializes) all PEM messages found in the given string.\n *\n * @param str the PEM-formatted string to decode.\n *\n * @return the PEM message objects in an array.\n */\npem.decode = function(str) {\n  var rval = [];\n\n  // split string into PEM messages (be lenient w/EOF on BEGIN line)\n  var rMessage = /\\s*-----BEGIN ([A-Z0-9- ]+)-----\\r?\\n?([\\x21-\\x7e\\s]+?(?:\\r?\\n\\r?\\n))?([:A-Za-z0-9+\\/=\\s]+?)-----END \\1-----/g;\n  var rHeader = /([\\x21-\\x7e]+):\\s*([\\x21-\\x7e\\s^:]+)/;\n  var rCRLF = /\\r?\\n/;\n  var match;\n  while(true) {\n    match = rMessage.exec(str);\n    if(!match) {\n      break;\n    }\n\n    // accept \"NEW CERTIFICATE REQUEST\" as \"CERTIFICATE REQUEST\"\n    // https://datatracker.ietf.org/doc/html/rfc7468#section-7\n    var type = match[1];\n    if(type === 'NEW CERTIFICATE REQUEST') {\n      type = 'CERTIFICATE REQUEST';\n    }\n\n    var msg = {\n      type: type,\n      procType: null,\n      contentDomain: null,\n      dekInfo: null,\n      headers: [],\n      body: forge.util.decode64(match[3])\n    };\n    rval.push(msg);\n\n    // no headers\n    if(!match[2]) {\n      continue;\n    }\n\n    // parse headers\n    var lines = match[2].split(rCRLF);\n    var li = 0;\n    while(match && li < lines.length) {\n      // get line, trim any rhs whitespace\n      var line = lines[li].replace(/\\s+$/, '');\n\n      // RFC2822 unfold any following folded lines\n      for(var nl = li + 1; nl < lines.length; ++nl) {\n        var next = lines[nl];\n        if(!/\\s/.test(next[0])) {\n          break;\n        }\n        line += next;\n        li = nl;\n      }\n\n      // parse header\n      match = line.match(rHeader);\n      if(match) {\n        var header = {name: match[1], values: []};\n        var values = match[2].split(',');\n        for(var vi = 0; vi < values.length; ++vi) {\n          header.values.push(ltrim(values[vi]));\n        }\n\n        // Proc-Type must be the first header\n        if(!msg.procType) {\n          if(header.name !== 'Proc-Type') {\n            throw new Error('Invalid PEM formatted message. The first ' +\n              'encapsulated header must be \"Proc-Type\".');\n          } else if(header.values.length !== 2) {\n            throw new Error('Invalid PEM formatted message. The \"Proc-Type\" ' +\n              'header must have two subfields.');\n          }\n          msg.procType = {version: values[0], type: values[1]};\n        } else if(!msg.contentDomain && header.name === 'Content-Domain') {\n          // special-case Content-Domain\n          msg.contentDomain = values[0] || '';\n        } else if(!msg.dekInfo && header.name === 'DEK-Info') {\n          // special-case DEK-Info\n          if(header.values.length === 0) {\n            throw new Error('Invalid PEM formatted message. The \"DEK-Info\" ' +\n              'header must have at least one subfield.');\n          }\n          msg.dekInfo = {algorithm: values[0], parameters: values[1] || null};\n        } else {\n          msg.headers.push(header);\n        }\n      }\n\n      ++li;\n    }\n\n    if(msg.procType === 'ENCRYPTED' && !msg.dekInfo) {\n      throw new Error('Invalid PEM formatted message. The \"DEK-Info\" ' +\n        'header must be present if \"Proc-Type\" is \"ENCRYPTED\".');\n    }\n  }\n\n  if(rval.length === 0) {\n    throw new Error('Invalid PEM formatted message.');\n  }\n\n  return rval;\n};\n\nfunction foldHeader(header) {\n  var rval = header.name + ': ';\n\n  // ensure values with CRLF are folded\n  var values = [];\n  var insertSpace = function(match, $1) {\n    return ' ' + $1;\n  };\n  for(var i = 0; i < header.values.length; ++i) {\n    values.push(header.values[i].replace(/^(\\S+\\r\\n)/, insertSpace));\n  }\n  rval += values.join(',') + '\\r\\n';\n\n  // do folding\n  var length = 0;\n  var candidate = -1;\n  for(var i = 0; i < rval.length; ++i, ++length) {\n    if(length > 65 && candidate !== -1) {\n      var insert = rval[candidate];\n      if(insert === ',') {\n        ++candidate;\n        rval = rval.substr(0, candidate) + '\\r\\n ' + rval.substr(candidate);\n      } else {\n        rval = rval.substr(0, candidate) +\n          '\\r\\n' + insert + rval.substr(candidate + 1);\n      }\n      length = (i - candidate - 1);\n      candidate = -1;\n      ++i;\n    } else if(rval[i] === ' ' || rval[i] === '\\t' || rval[i] === ',') {\n      candidate = i;\n    }\n  }\n\n  return rval;\n}\n\nfunction ltrim(str) {\n  return str.replace(/^\\s+/, '');\n}\n","/**\n * Javascript implementation of Abstract Syntax Notation Number One.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2015 Digital Bazaar, Inc.\n *\n * An API for storing data using the Abstract Syntax Notation Number One\n * format using DER (Distinguished Encoding Rules) encoding. This encoding is\n * commonly used to store data for PKI, i.e. X.509 Certificates, and this\n * implementation exists for that purpose.\n *\n * Abstract Syntax Notation Number One (ASN.1) is used to define the abstract\n * syntax of information without restricting the way the information is encoded\n * for transmission. It provides a standard that allows for open systems\n * communication. ASN.1 defines the syntax of information data and a number of\n * simple data types as well as a notation for describing them and specifying\n * values for them.\n *\n * The RSA algorithm creates public and private keys that are often stored in\n * X.509 or PKCS#X formats -- which use ASN.1 (encoded in DER format). This\n * class provides the most basic functionality required to store and load DSA\n * keys that are encoded according to ASN.1.\n *\n * The most common binary encodings for ASN.1 are BER (Basic Encoding Rules)\n * and DER (Distinguished Encoding Rules). DER is just a subset of BER that\n * has stricter requirements for how data must be encoded.\n *\n * Each ASN.1 structure has a tag (a byte identifying the ASN.1 structure type)\n * and a byte array for the value of this ASN1 structure which may be data or a\n * list of ASN.1 structures.\n *\n * Each ASN.1 structure using BER is (Tag-Length-Value):\n *\n * | byte 0 | bytes X | bytes Y |\n * |--------|---------|----------\n * |  tag   | length  |  value  |\n *\n * ASN.1 allows for tags to be of \"High-tag-number form\" which allows a tag to\n * be two or more octets, but that is not supported by this class. A tag is\n * only 1 byte. Bits 1-5 give the tag number (ie the data type within a\n * particular 'class'), 6 indicates whether or not the ASN.1 value is\n * constructed from other ASN.1 values, and bits 7 and 8 give the 'class'. If\n * bits 7 and 8 are both zero, the class is UNIVERSAL. If only bit 7 is set,\n * then the class is APPLICATION. If only bit 8 is set, then the class is\n * CONTEXT_SPECIFIC. If both bits 7 and 8 are set, then the class is PRIVATE.\n * The tag numbers for the data types for the class UNIVERSAL are listed below:\n *\n * UNIVERSAL 0 Reserved for use by the encoding rules\n * UNIVERSAL 1 Boolean type\n * UNIVERSAL 2 Integer type\n * UNIVERSAL 3 Bitstring type\n * UNIVERSAL 4 Octetstring type\n * UNIVERSAL 5 Null type\n * UNIVERSAL 6 Object identifier type\n * UNIVERSAL 7 Object descriptor type\n * UNIVERSAL 8 External type and Instance-of type\n * UNIVERSAL 9 Real type\n * UNIVERSAL 10 Enumerated type\n * UNIVERSAL 11 Embedded-pdv type\n * UNIVERSAL 12 UTF8String type\n * UNIVERSAL 13 Relative object identifier type\n * UNIVERSAL 14-15 Reserved for future editions\n * UNIVERSAL 16 Sequence and Sequence-of types\n * UNIVERSAL 17 Set and Set-of types\n * UNIVERSAL 18-22, 25-30 Character string types\n * UNIVERSAL 23-24 Time types\n *\n * The length of an ASN.1 structure is specified after the tag identifier.\n * There is a definite form and an indefinite form. The indefinite form may\n * be used if the encoding is constructed and not all immediately available.\n * The indefinite form is encoded using a length byte with only the 8th bit\n * set. The end of the constructed object is marked using end-of-contents\n * octets (two zero bytes).\n *\n * The definite form looks like this:\n *\n * The length may take up 1 or more bytes, it depends on the length of the\n * value of the ASN.1 structure. DER encoding requires that if the ASN.1\n * structure has a value that has a length greater than 127, more than 1 byte\n * will be used to store its length, otherwise just one byte will be used.\n * This is strict.\n *\n * In the case that the length of the ASN.1 value is less than 127, 1 octet\n * (byte) is used to store the \"short form\" length. The 8th bit has a value of\n * 0 indicating the length is \"short form\" and not \"long form\" and bits 7-1\n * give the length of the data. (The 8th bit is the left-most, most significant\n * bit: also known as big endian or network format).\n *\n * In the case that the length of the ASN.1 value is greater than 127, 2 to\n * 127 octets (bytes) are used to store the \"long form\" length. The first\n * byte's 8th bit is set to 1 to indicate the length is \"long form.\" Bits 7-1\n * give the number of additional octets. All following octets are in base 256\n * with the most significant digit first (typical big-endian binary unsigned\n * integer storage). So, for instance, if the length of a value was 257, the\n * first byte would be set to:\n *\n * 10000010 = 130 = 0x82.\n *\n * This indicates there are 2 octets (base 256) for the length. The second and\n * third bytes (the octets just mentioned) would store the length in base 256:\n *\n * octet 2: 00000001 = 1 * 256^1 = 256\n * octet 3: 00000001 = 1 * 256^0 = 1\n * total = 257\n *\n * The algorithm for converting a js integer value of 257 to base-256 is:\n *\n * var value = 257;\n * var bytes = [];\n * bytes[0] = (value >>> 8) & 0xFF; // most significant byte first\n * bytes[1] = value & 0xFF;        // least significant byte last\n *\n * On the ASN.1 UNIVERSAL Object Identifier (OID) type:\n *\n * An OID can be written like: \"value1.value2.value3...valueN\"\n *\n * The DER encoding rules:\n *\n * The first byte has the value 40 * value1 + value2.\n * The following bytes, if any, encode the remaining values. Each value is\n * encoded in base 128, most significant digit first (big endian), with as\n * few digits as possible, and the most significant bit of each byte set\n * to 1 except the last in each value's encoding. For example: Given the\n * OID \"1.2.840.113549\", its DER encoding is (remember each byte except the\n * last one in each encoding is OR'd with 0x80):\n *\n * byte 1: 40 * 1 + 2 = 42 = 0x2A.\n * bytes 2-3: 128 * 6 + 72 = 840 = 6 72 = 6 72 = 0x0648 = 0x8648\n * bytes 4-6: 16384 * 6 + 128 * 119 + 13 = 6 119 13 = 0x06770D = 0x86F70D\n *\n * The final value is: 0x2A864886F70D.\n * The full OID (including ASN.1 tag and length of 6 bytes) is:\n * 0x06062A864886F70D\n */\nvar forge = require('./forge');\nrequire('./util');\nrequire('./oids');\n\n/* ASN.1 API */\nvar asn1 = module.exports = forge.asn1 = forge.asn1 || {};\n\n/**\n * ASN.1 classes.\n */\nasn1.Class = {\n  UNIVERSAL:        0x00,\n  APPLICATION:      0x40,\n  CONTEXT_SPECIFIC: 0x80,\n  PRIVATE:          0xC0\n};\n\n/**\n * ASN.1 types. Not all types are supported by this implementation, only\n * those necessary to implement a simple PKI are implemented.\n */\nasn1.Type = {\n  NONE:             0,\n  BOOLEAN:          1,\n  INTEGER:          2,\n  BITSTRING:        3,\n  OCTETSTRING:      4,\n  NULL:             5,\n  OID:              6,\n  ODESC:            7,\n  EXTERNAL:         8,\n  REAL:             9,\n  ENUMERATED:      10,\n  EMBEDDED:        11,\n  UTF8:            12,\n  ROID:            13,\n  SEQUENCE:        16,\n  SET:             17,\n  PRINTABLESTRING: 19,\n  IA5STRING:       22,\n  UTCTIME:         23,\n  GENERALIZEDTIME: 24,\n  BMPSTRING:       30\n};\n\n/**\n * Creates a new asn1 object.\n *\n * @param tagClass the tag class for the object.\n * @param type the data type (tag number) for the object.\n * @param constructed true if the asn1 object is in constructed form.\n * @param value the value for the object, if it is not constructed.\n * @param [options] the options to use:\n *          [bitStringContents] the plain BIT STRING content including padding\n *            byte.\n *\n * @return the asn1 object.\n */\nasn1.create = function(tagClass, type, constructed, value, options) {\n  /* An asn1 object has a tagClass, a type, a constructed flag, and a\n    value. The value's type depends on the constructed flag. If\n    constructed, it will contain a list of other asn1 objects. If not,\n    it will contain the ASN.1 value as an array of bytes formatted\n    according to the ASN.1 data type. */\n\n  // remove undefined values\n  if(forge.util.isArray(value)) {\n    var tmp = [];\n    for(var i = 0; i < value.length; ++i) {\n      if(value[i] !== undefined) {\n        tmp.push(value[i]);\n      }\n    }\n    value = tmp;\n  }\n\n  var obj = {\n    tagClass: tagClass,\n    type: type,\n    constructed: constructed,\n    composed: constructed || forge.util.isArray(value),\n    value: value\n  };\n  if(options && 'bitStringContents' in options) {\n    // TODO: copy byte buffer if it's a buffer not a string\n    obj.bitStringContents = options.bitStringContents;\n    // TODO: add readonly flag to avoid this overhead\n    // save copy to detect changes\n    obj.original = asn1.copy(obj);\n  }\n  return obj;\n};\n\n/**\n * Copies an asn1 object.\n *\n * @param obj the asn1 object.\n * @param [options] copy options:\n *          [excludeBitStringContents] true to not copy bitStringContents\n *\n * @return the a copy of the asn1 object.\n */\nasn1.copy = function(obj, options) {\n  var copy;\n\n  if(forge.util.isArray(obj)) {\n    copy = [];\n    for(var i = 0; i < obj.length; ++i) {\n      copy.push(asn1.copy(obj[i], options));\n    }\n    return copy;\n  }\n\n  if(typeof obj === 'string') {\n    // TODO: copy byte buffer if it's a buffer not a string\n    return obj;\n  }\n\n  copy = {\n    tagClass: obj.tagClass,\n    type: obj.type,\n    constructed: obj.constructed,\n    composed: obj.composed,\n    value: asn1.copy(obj.value, options)\n  };\n  if(options && !options.excludeBitStringContents) {\n    // TODO: copy byte buffer if it's a buffer not a string\n    copy.bitStringContents = obj.bitStringContents;\n  }\n  return copy;\n};\n\n/**\n * Compares asn1 objects for equality.\n *\n * Note this function does not run in constant time.\n *\n * @param obj1 the first asn1 object.\n * @param obj2 the second asn1 object.\n * @param [options] compare options:\n *          [includeBitStringContents] true to compare bitStringContents\n *\n * @return true if the asn1 objects are equal.\n */\nasn1.equals = function(obj1, obj2, options) {\n  if(forge.util.isArray(obj1)) {\n    if(!forge.util.isArray(obj2)) {\n      return false;\n    }\n    if(obj1.length !== obj2.length) {\n      return false;\n    }\n    for(var i = 0; i < obj1.length; ++i) {\n      if(!asn1.equals(obj1[i], obj2[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  if(typeof obj1 !== typeof obj2) {\n    return false;\n  }\n\n  if(typeof obj1 === 'string') {\n    return obj1 === obj2;\n  }\n\n  var equal = obj1.tagClass === obj2.tagClass &&\n    obj1.type === obj2.type &&\n    obj1.constructed === obj2.constructed &&\n    obj1.composed === obj2.composed &&\n    asn1.equals(obj1.value, obj2.value);\n  if(options && options.includeBitStringContents) {\n    equal = equal && (obj1.bitStringContents === obj2.bitStringContents);\n  }\n\n  return equal;\n};\n\n/**\n * Gets the length of a BER-encoded ASN.1 value.\n *\n * In case the length is not specified, undefined is returned.\n *\n * @param b the BER-encoded ASN.1 byte buffer, starting with the first\n *          length byte.\n *\n * @return the length of the BER-encoded ASN.1 value or undefined.\n */\nasn1.getBerValueLength = function(b) {\n  // TODO: move this function and related DER/BER functions to a der.js\n  // file; better abstract ASN.1 away from der/ber.\n  var b2 = b.getByte();\n  if(b2 === 0x80) {\n    return undefined;\n  }\n\n  // see if the length is \"short form\" or \"long form\" (bit 8 set)\n  var length;\n  var longForm = b2 & 0x80;\n  if(!longForm) {\n    // length is just the first byte\n    length = b2;\n  } else {\n    // the number of bytes the length is specified in bits 7 through 1\n    // and each length byte is in big-endian base-256\n    length = b.getInt((b2 & 0x7F) << 3);\n  }\n  return length;\n};\n\n/**\n * Check if the byte buffer has enough bytes. Throws an Error if not.\n *\n * @param bytes the byte buffer to parse from.\n * @param remaining the bytes remaining in the current parsing state.\n * @param n the number of bytes the buffer must have.\n */\nfunction _checkBufferLength(bytes, remaining, n) {\n  if(n > remaining) {\n    var error = new Error('Too few bytes to parse DER.');\n    error.available = bytes.length();\n    error.remaining = remaining;\n    error.requested = n;\n    throw error;\n  }\n}\n\n/**\n * Gets the length of a BER-encoded ASN.1 value.\n *\n * In case the length is not specified, undefined is returned.\n *\n * @param bytes the byte buffer to parse from.\n * @param remaining the bytes remaining in the current parsing state.\n *\n * @return the length of the BER-encoded ASN.1 value or undefined.\n */\nvar _getValueLength = function(bytes, remaining) {\n  // TODO: move this function and related DER/BER functions to a der.js\n  // file; better abstract ASN.1 away from der/ber.\n  // fromDer already checked that this byte exists\n  var b2 = bytes.getByte();\n  remaining--;\n  if(b2 === 0x80) {\n    return undefined;\n  }\n\n  // see if the length is \"short form\" or \"long form\" (bit 8 set)\n  var length;\n  var longForm = b2 & 0x80;\n  if(!longForm) {\n    // length is just the first byte\n    length = b2;\n  } else {\n    // the number of bytes the length is specified in bits 7 through 1\n    // and each length byte is in big-endian base-256\n    var longFormBytes = b2 & 0x7F;\n    _checkBufferLength(bytes, remaining, longFormBytes);\n    length = bytes.getInt(longFormBytes << 3);\n  }\n  // FIXME: this will only happen for 32 bit getInt with high bit set\n  if(length < 0) {\n    throw new Error('Negative length: ' + length);\n  }\n  return length;\n};\n\n/**\n * Parses an asn1 object from a byte buffer in DER format.\n *\n * @param bytes the byte buffer to parse from.\n * @param [strict] true to be strict when checking value lengths, false to\n *          allow truncated values (default: true).\n * @param [options] object with options or boolean strict flag\n *          [strict] true to be strict when checking value lengths, false to\n *            allow truncated values (default: true).\n *          [parseAllBytes] true to ensure all bytes are parsed\n *            (default: true)\n *          [decodeBitStrings] true to attempt to decode the content of\n *            BIT STRINGs (not OCTET STRINGs) using strict mode. Note that\n *            without schema support to understand the data context this can\n *            erroneously decode values that happen to be valid ASN.1. This\n *            flag will be deprecated or removed as soon as schema support is\n *            available. (default: true)\n *\n * @throws Will throw an error for various malformed input conditions.\n *\n * @return the parsed asn1 object.\n */\nasn1.fromDer = function(bytes, options) {\n  if(options === undefined) {\n    options = {\n      strict: true,\n      parseAllBytes: true,\n      decodeBitStrings: true\n    };\n  }\n  if(typeof options === 'boolean') {\n    options = {\n      strict: options,\n      parseAllBytes: true,\n      decodeBitStrings: true\n    };\n  }\n  if(!('strict' in options)) {\n    options.strict = true;\n  }\n  if(!('parseAllBytes' in options)) {\n    options.parseAllBytes = true;\n  }\n  if(!('decodeBitStrings' in options)) {\n    options.decodeBitStrings = true;\n  }\n\n  // wrap in buffer if needed\n  if(typeof bytes === 'string') {\n    bytes = forge.util.createBuffer(bytes);\n  }\n\n  var byteCount = bytes.length();\n  var value = _fromDer(bytes, bytes.length(), 0, options);\n  if(options.parseAllBytes && bytes.length() !== 0) {\n    var error = new Error('Unparsed DER bytes remain after ASN.1 parsing.');\n    error.byteCount = byteCount;\n    error.remaining = bytes.length();\n    throw error;\n  }\n  return value;\n};\n\n/**\n * Internal function to parse an asn1 object from a byte buffer in DER format.\n *\n * @param bytes the byte buffer to parse from.\n * @param remaining the number of bytes remaining for this chunk.\n * @param depth the current parsing depth.\n * @param options object with same options as fromDer().\n *\n * @return the parsed asn1 object.\n */\nfunction _fromDer(bytes, remaining, depth, options) {\n  // temporary storage for consumption calculations\n  var start;\n\n  // minimum length for ASN.1 DER structure is 2\n  _checkBufferLength(bytes, remaining, 2);\n\n  // get the first byte\n  var b1 = bytes.getByte();\n  // consumed one byte\n  remaining--;\n\n  // get the tag class\n  var tagClass = (b1 & 0xC0);\n\n  // get the type (bits 1-5)\n  var type = b1 & 0x1F;\n\n  // get the variable value length and adjust remaining bytes\n  start = bytes.length();\n  var length = _getValueLength(bytes, remaining);\n  remaining -= start - bytes.length();\n\n  // ensure there are enough bytes to get the value\n  if(length !== undefined && length > remaining) {\n    if(options.strict) {\n      var error = new Error('Too few bytes to read ASN.1 value.');\n      error.available = bytes.length();\n      error.remaining = remaining;\n      error.requested = length;\n      throw error;\n    }\n    // Note: be lenient with truncated values and use remaining state bytes\n    length = remaining;\n  }\n\n  // value storage\n  var value;\n  // possible BIT STRING contents storage\n  var bitStringContents;\n\n  // constructed flag is bit 6 (32 = 0x20) of the first byte\n  var constructed = ((b1 & 0x20) === 0x20);\n  if(constructed) {\n    // parse child asn1 objects from the value\n    value = [];\n    if(length === undefined) {\n      // asn1 object of indefinite length, read until end tag\n      for(;;) {\n        _checkBufferLength(bytes, remaining, 2);\n        if(bytes.bytes(2) === String.fromCharCode(0, 0)) {\n          bytes.getBytes(2);\n          remaining -= 2;\n          break;\n        }\n        start = bytes.length();\n        value.push(_fromDer(bytes, remaining, depth + 1, options));\n        remaining -= start - bytes.length();\n      }\n    } else {\n      // parsing asn1 object of definite length\n      while(length > 0) {\n        start = bytes.length();\n        value.push(_fromDer(bytes, length, depth + 1, options));\n        remaining -= start - bytes.length();\n        length -= start - bytes.length();\n      }\n    }\n  }\n\n  // if a BIT STRING, save the contents including padding\n  if(value === undefined && tagClass === asn1.Class.UNIVERSAL &&\n    type === asn1.Type.BITSTRING) {\n    bitStringContents = bytes.bytes(length);\n  }\n\n  // determine if a non-constructed value should be decoded as a composed\n  // value that contains other ASN.1 objects. BIT STRINGs (and OCTET STRINGs)\n  // can be used this way.\n  if(value === undefined && options.decodeBitStrings &&\n    tagClass === asn1.Class.UNIVERSAL &&\n    // FIXME: OCTET STRINGs not yet supported here\n    // .. other parts of forge expect to decode OCTET STRINGs manually\n    (type === asn1.Type.BITSTRING /*|| type === asn1.Type.OCTETSTRING*/) &&\n    length > 1) {\n    // save read position\n    var savedRead = bytes.read;\n    var savedRemaining = remaining;\n    var unused = 0;\n    if(type === asn1.Type.BITSTRING) {\n      /* The first octet gives the number of bits by which the length of the\n        bit string is less than the next multiple of eight (this is called\n        the \"number of unused bits\").\n\n        The second and following octets give the value of the bit string\n        converted to an octet string. */\n      _checkBufferLength(bytes, remaining, 1);\n      unused = bytes.getByte();\n      remaining--;\n    }\n    // if all bits are used, maybe the BIT/OCTET STRING holds ASN.1 objs\n    if(unused === 0) {\n      try {\n        // attempt to parse child asn1 object from the value\n        // (stored in array to signal composed value)\n        start = bytes.length();\n        var subOptions = {\n          // enforce strict mode to avoid parsing ASN.1 from plain data\n          strict: true,\n          decodeBitStrings: true\n        };\n        var composed = _fromDer(bytes, remaining, depth + 1, subOptions);\n        var used = start - bytes.length();\n        remaining -= used;\n        if(type == asn1.Type.BITSTRING) {\n          used++;\n        }\n\n        // if the data all decoded and the class indicates UNIVERSAL or\n        // CONTEXT_SPECIFIC then assume we've got an encapsulated ASN.1 object\n        var tc = composed.tagClass;\n        if(used === length &&\n          (tc === asn1.Class.UNIVERSAL || tc === asn1.Class.CONTEXT_SPECIFIC)) {\n          value = [composed];\n        }\n      } catch(ex) {\n      }\n    }\n    if(value === undefined) {\n      // restore read position\n      bytes.read = savedRead;\n      remaining = savedRemaining;\n    }\n  }\n\n  if(value === undefined) {\n    // asn1 not constructed or composed, get raw value\n    // TODO: do DER to OID conversion and vice-versa in .toDer?\n\n    if(length === undefined) {\n      if(options.strict) {\n        throw new Error('Non-constructed ASN.1 object of indefinite length.');\n      }\n      // be lenient and use remaining state bytes\n      length = remaining;\n    }\n\n    if(type === asn1.Type.BMPSTRING) {\n      value = '';\n      for(; length > 0; length -= 2) {\n        _checkBufferLength(bytes, remaining, 2);\n        value += String.fromCharCode(bytes.getInt16());\n        remaining -= 2;\n      }\n    } else {\n      value = bytes.getBytes(length);\n      remaining -= length;\n    }\n  }\n\n  // add BIT STRING contents if available\n  var asn1Options = bitStringContents === undefined ? null : {\n    bitStringContents: bitStringContents\n  };\n\n  // create and return asn1 object\n  return asn1.create(tagClass, type, constructed, value, asn1Options);\n}\n\n/**\n * Converts the given asn1 object to a buffer of bytes in DER format.\n *\n * @param asn1 the asn1 object to convert to bytes.\n *\n * @return the buffer of bytes.\n */\nasn1.toDer = function(obj) {\n  var bytes = forge.util.createBuffer();\n\n  // build the first byte\n  var b1 = obj.tagClass | obj.type;\n\n  // for storing the ASN.1 value\n  var value = forge.util.createBuffer();\n\n  // use BIT STRING contents if available and data not changed\n  var useBitStringContents = false;\n  if('bitStringContents' in obj) {\n    useBitStringContents = true;\n    if(obj.original) {\n      useBitStringContents = asn1.equals(obj, obj.original);\n    }\n  }\n\n  if(useBitStringContents) {\n    value.putBytes(obj.bitStringContents);\n  } else if(obj.composed) {\n    // if composed, use each child asn1 object's DER bytes as value\n    // turn on 6th bit (0x20 = 32) to indicate asn1 is constructed\n    // from other asn1 objects\n    if(obj.constructed) {\n      b1 |= 0x20;\n    } else {\n      // type is a bit string, add unused bits of 0x00\n      value.putByte(0x00);\n    }\n\n    // add all of the child DER bytes together\n    for(var i = 0; i < obj.value.length; ++i) {\n      if(obj.value[i] !== undefined) {\n        value.putBuffer(asn1.toDer(obj.value[i]));\n      }\n    }\n  } else {\n    // use asn1.value directly\n    if(obj.type === asn1.Type.BMPSTRING) {\n      for(var i = 0; i < obj.value.length; ++i) {\n        value.putInt16(obj.value.charCodeAt(i));\n      }\n    } else {\n      // ensure integer is minimally-encoded\n      // TODO: should all leading bytes be stripped vs just one?\n      // .. ex '00 00 01' => '01'?\n      if(obj.type === asn1.Type.INTEGER &&\n        obj.value.length > 1 &&\n        // leading 0x00 for positive integer\n        ((obj.value.charCodeAt(0) === 0 &&\n        (obj.value.charCodeAt(1) & 0x80) === 0) ||\n        // leading 0xFF for negative integer\n        (obj.value.charCodeAt(0) === 0xFF &&\n        (obj.value.charCodeAt(1) & 0x80) === 0x80))) {\n        value.putBytes(obj.value.substr(1));\n      } else {\n        value.putBytes(obj.value);\n      }\n    }\n  }\n\n  // add tag byte\n  bytes.putByte(b1);\n\n  // use \"short form\" encoding\n  if(value.length() <= 127) {\n    // one byte describes the length\n    // bit 8 = 0 and bits 7-1 = length\n    bytes.putByte(value.length() & 0x7F);\n  } else {\n    // use \"long form\" encoding\n    // 2 to 127 bytes describe the length\n    // first byte: bit 8 = 1 and bits 7-1 = # of additional bytes\n    // other bytes: length in base 256, big-endian\n    var len = value.length();\n    var lenBytes = '';\n    do {\n      lenBytes += String.fromCharCode(len & 0xFF);\n      len = len >>> 8;\n    } while(len > 0);\n\n    // set first byte to # bytes used to store the length and turn on\n    // bit 8 to indicate long-form length is used\n    bytes.putByte(lenBytes.length | 0x80);\n\n    // concatenate length bytes in reverse since they were generated\n    // little endian and we need big endian\n    for(var i = lenBytes.length - 1; i >= 0; --i) {\n      bytes.putByte(lenBytes.charCodeAt(i));\n    }\n  }\n\n  // concatenate value bytes\n  bytes.putBuffer(value);\n  return bytes;\n};\n\n/**\n * Converts an OID dot-separated string to a byte buffer. The byte buffer\n * contains only the DER-encoded value, not any tag or length bytes.\n *\n * @param oid the OID dot-separated string.\n *\n * @return the byte buffer.\n */\nasn1.oidToDer = function(oid) {\n  // split OID into individual values\n  var values = oid.split('.');\n  var bytes = forge.util.createBuffer();\n\n  // first byte is 40 * value1 + value2\n  bytes.putByte(40 * parseInt(values[0], 10) + parseInt(values[1], 10));\n  // other bytes are each value in base 128 with 8th bit set except for\n  // the last byte for each value\n  var last, valueBytes, value, b;\n  for(var i = 2; i < values.length; ++i) {\n    // produce value bytes in reverse because we don't know how many\n    // bytes it will take to store the value\n    last = true;\n    valueBytes = [];\n    value = parseInt(values[i], 10);\n    do {\n      b = value & 0x7F;\n      value = value >>> 7;\n      // if value is not last, then turn on 8th bit\n      if(!last) {\n        b |= 0x80;\n      }\n      valueBytes.push(b);\n      last = false;\n    } while(value > 0);\n\n    // add value bytes in reverse (needs to be in big endian)\n    for(var n = valueBytes.length - 1; n >= 0; --n) {\n      bytes.putByte(valueBytes[n]);\n    }\n  }\n\n  return bytes;\n};\n\n/**\n * Converts a DER-encoded byte buffer to an OID dot-separated string. The\n * byte buffer should contain only the DER-encoded value, not any tag or\n * length bytes.\n *\n * @param bytes the byte buffer.\n *\n * @return the OID dot-separated string.\n */\nasn1.derToOid = function(bytes) {\n  var oid;\n\n  // wrap in buffer if needed\n  if(typeof bytes === 'string') {\n    bytes = forge.util.createBuffer(bytes);\n  }\n\n  // first byte is 40 * value1 + value2\n  var b = bytes.getByte();\n  oid = Math.floor(b / 40) + '.' + (b % 40);\n\n  // other bytes are each value in base 128 with 8th bit set except for\n  // the last byte for each value\n  var value = 0;\n  while(bytes.length() > 0) {\n    b = bytes.getByte();\n    value = value << 7;\n    // not the last byte for the value\n    if(b & 0x80) {\n      value += b & 0x7F;\n    } else {\n      // last byte\n      oid += '.' + (value + b);\n      value = 0;\n    }\n  }\n\n  return oid;\n};\n\n/**\n * Converts a UTCTime value to a date.\n *\n * Note: GeneralizedTime has 4 digits for the year and is used for X.509\n * dates past 2049. Parsing that structure hasn't been implemented yet.\n *\n * @param utc the UTCTime value to convert.\n *\n * @return the date.\n */\nasn1.utcTimeToDate = function(utc) {\n  /* The following formats can be used:\n\n    YYMMDDhhmmZ\n    YYMMDDhhmm+hh'mm'\n    YYMMDDhhmm-hh'mm'\n    YYMMDDhhmmssZ\n    YYMMDDhhmmss+hh'mm'\n    YYMMDDhhmmss-hh'mm'\n\n    Where:\n\n    YY is the least significant two digits of the year\n    MM is the month (01 to 12)\n    DD is the day (01 to 31)\n    hh is the hour (00 to 23)\n    mm are the minutes (00 to 59)\n    ss are the seconds (00 to 59)\n    Z indicates that local time is GMT, + indicates that local time is\n    later than GMT, and - indicates that local time is earlier than GMT\n    hh' is the absolute value of the offset from GMT in hours\n    mm' is the absolute value of the offset from GMT in minutes */\n  var date = new Date();\n\n  // if YY >= 50 use 19xx, if YY < 50 use 20xx\n  var year = parseInt(utc.substr(0, 2), 10);\n  year = (year >= 50) ? 1900 + year : 2000 + year;\n  var MM = parseInt(utc.substr(2, 2), 10) - 1; // use 0-11 for month\n  var DD = parseInt(utc.substr(4, 2), 10);\n  var hh = parseInt(utc.substr(6, 2), 10);\n  var mm = parseInt(utc.substr(8, 2), 10);\n  var ss = 0;\n\n  // not just YYMMDDhhmmZ\n  if(utc.length > 11) {\n    // get character after minutes\n    var c = utc.charAt(10);\n    var end = 10;\n\n    // see if seconds are present\n    if(c !== '+' && c !== '-') {\n      // get seconds\n      ss = parseInt(utc.substr(10, 2), 10);\n      end += 2;\n    }\n  }\n\n  // update date\n  date.setUTCFullYear(year, MM, DD);\n  date.setUTCHours(hh, mm, ss, 0);\n\n  if(end) {\n    // get +/- after end of time\n    c = utc.charAt(end);\n    if(c === '+' || c === '-') {\n      // get hours+minutes offset\n      var hhoffset = parseInt(utc.substr(end + 1, 2), 10);\n      var mmoffset = parseInt(utc.substr(end + 4, 2), 10);\n\n      // calculate offset in milliseconds\n      var offset = hhoffset * 60 + mmoffset;\n      offset *= 60000;\n\n      // apply offset\n      if(c === '+') {\n        date.setTime(+date - offset);\n      } else {\n        date.setTime(+date + offset);\n      }\n    }\n  }\n\n  return date;\n};\n\n/**\n * Converts a GeneralizedTime value to a date.\n *\n * @param gentime the GeneralizedTime value to convert.\n *\n * @return the date.\n */\nasn1.generalizedTimeToDate = function(gentime) {\n  /* The following formats can be used:\n\n    YYYYMMDDHHMMSS\n    YYYYMMDDHHMMSS.fff\n    YYYYMMDDHHMMSSZ\n    YYYYMMDDHHMMSS.fffZ\n    YYYYMMDDHHMMSS+hh'mm'\n    YYYYMMDDHHMMSS.fff+hh'mm'\n    YYYYMMDDHHMMSS-hh'mm'\n    YYYYMMDDHHMMSS.fff-hh'mm'\n\n    Where:\n\n    YYYY is the year\n    MM is the month (01 to 12)\n    DD is the day (01 to 31)\n    hh is the hour (00 to 23)\n    mm are the minutes (00 to 59)\n    ss are the seconds (00 to 59)\n    .fff is the second fraction, accurate to three decimal places\n    Z indicates that local time is GMT, + indicates that local time is\n    later than GMT, and - indicates that local time is earlier than GMT\n    hh' is the absolute value of the offset from GMT in hours\n    mm' is the absolute value of the offset from GMT in minutes */\n  var date = new Date();\n\n  var YYYY = parseInt(gentime.substr(0, 4), 10);\n  var MM = parseInt(gentime.substr(4, 2), 10) - 1; // use 0-11 for month\n  var DD = parseInt(gentime.substr(6, 2), 10);\n  var hh = parseInt(gentime.substr(8, 2), 10);\n  var mm = parseInt(gentime.substr(10, 2), 10);\n  var ss = parseInt(gentime.substr(12, 2), 10);\n  var fff = 0;\n  var offset = 0;\n  var isUTC = false;\n\n  if(gentime.charAt(gentime.length - 1) === 'Z') {\n    isUTC = true;\n  }\n\n  var end = gentime.length - 5, c = gentime.charAt(end);\n  if(c === '+' || c === '-') {\n    // get hours+minutes offset\n    var hhoffset = parseInt(gentime.substr(end + 1, 2), 10);\n    var mmoffset = parseInt(gentime.substr(end + 4, 2), 10);\n\n    // calculate offset in milliseconds\n    offset = hhoffset * 60 + mmoffset;\n    offset *= 60000;\n\n    // apply offset\n    if(c === '+') {\n      offset *= -1;\n    }\n\n    isUTC = true;\n  }\n\n  // check for second fraction\n  if(gentime.charAt(14) === '.') {\n    fff = parseFloat(gentime.substr(14), 10) * 1000;\n  }\n\n  if(isUTC) {\n    date.setUTCFullYear(YYYY, MM, DD);\n    date.setUTCHours(hh, mm, ss, fff);\n\n    // apply offset\n    date.setTime(+date + offset);\n  } else {\n    date.setFullYear(YYYY, MM, DD);\n    date.setHours(hh, mm, ss, fff);\n  }\n\n  return date;\n};\n\n/**\n * Converts a date to a UTCTime value.\n *\n * Note: GeneralizedTime has 4 digits for the year and is used for X.509\n * dates past 2049. Converting to a GeneralizedTime hasn't been\n * implemented yet.\n *\n * @param date the date to convert.\n *\n * @return the UTCTime value.\n */\nasn1.dateToUtcTime = function(date) {\n  // TODO: validate; currently assumes proper format\n  if(typeof date === 'string') {\n    return date;\n  }\n\n  var rval = '';\n\n  // create format YYMMDDhhmmssZ\n  var format = [];\n  format.push(('' + date.getUTCFullYear()).substr(2));\n  format.push('' + (date.getUTCMonth() + 1));\n  format.push('' + date.getUTCDate());\n  format.push('' + date.getUTCHours());\n  format.push('' + date.getUTCMinutes());\n  format.push('' + date.getUTCSeconds());\n\n  // ensure 2 digits are used for each format entry\n  for(var i = 0; i < format.length; ++i) {\n    if(format[i].length < 2) {\n      rval += '0';\n    }\n    rval += format[i];\n  }\n  rval += 'Z';\n\n  return rval;\n};\n\n/**\n * Converts a date to a GeneralizedTime value.\n *\n * @param date the date to convert.\n *\n * @return the GeneralizedTime value as a string.\n */\nasn1.dateToGeneralizedTime = function(date) {\n  // TODO: validate; currently assumes proper format\n  if(typeof date === 'string') {\n    return date;\n  }\n\n  var rval = '';\n\n  // create format YYYYMMDDHHMMSSZ\n  var format = [];\n  format.push('' + date.getUTCFullYear());\n  format.push('' + (date.getUTCMonth() + 1));\n  format.push('' + date.getUTCDate());\n  format.push('' + date.getUTCHours());\n  format.push('' + date.getUTCMinutes());\n  format.push('' + date.getUTCSeconds());\n\n  // ensure 2 digits are used for each format entry\n  for(var i = 0; i < format.length; ++i) {\n    if(format[i].length < 2) {\n      rval += '0';\n    }\n    rval += format[i];\n  }\n  rval += 'Z';\n\n  return rval;\n};\n\n/**\n * Converts a javascript integer to a DER-encoded byte buffer to be used\n * as the value for an INTEGER type.\n *\n * @param x the integer.\n *\n * @return the byte buffer.\n */\nasn1.integerToDer = function(x) {\n  var rval = forge.util.createBuffer();\n  if(x >= -0x80 && x < 0x80) {\n    return rval.putSignedInt(x, 8);\n  }\n  if(x >= -0x8000 && x < 0x8000) {\n    return rval.putSignedInt(x, 16);\n  }\n  if(x >= -0x800000 && x < 0x800000) {\n    return rval.putSignedInt(x, 24);\n  }\n  if(x >= -0x80000000 && x < 0x80000000) {\n    return rval.putSignedInt(x, 32);\n  }\n  var error = new Error('Integer too large; max is 32-bits.');\n  error.integer = x;\n  throw error;\n};\n\n/**\n * Converts a DER-encoded byte buffer to a javascript integer. This is\n * typically used to decode the value of an INTEGER type.\n *\n * @param bytes the byte buffer.\n *\n * @return the integer.\n */\nasn1.derToInteger = function(bytes) {\n  // wrap in buffer if needed\n  if(typeof bytes === 'string') {\n    bytes = forge.util.createBuffer(bytes);\n  }\n\n  var n = bytes.length() * 8;\n  if(n > 32) {\n    throw new Error('Integer too large; max is 32-bits.');\n  }\n  return bytes.getSignedInt(n);\n};\n\n/**\n * Validates that the given ASN.1 object is at least a super set of the\n * given ASN.1 structure. Only tag classes and types are checked. An\n * optional map may also be provided to capture ASN.1 values while the\n * structure is checked.\n *\n * To capture an ASN.1 value, set an object in the validator's 'capture'\n * parameter to the key to use in the capture map. To capture the full\n * ASN.1 object, specify 'captureAsn1'. To capture BIT STRING bytes, including\n * the leading unused bits counter byte, specify 'captureBitStringContents'.\n * To capture BIT STRING bytes, without the leading unused bits counter byte,\n * specify 'captureBitStringValue'.\n *\n * Objects in the validator may set a field 'optional' to true to indicate\n * that it isn't necessary to pass validation.\n *\n * @param obj the ASN.1 object to validate.\n * @param v the ASN.1 structure validator.\n * @param capture an optional map to capture values in.\n * @param errors an optional array for storing validation errors.\n *\n * @return true on success, false on failure.\n */\nasn1.validate = function(obj, v, capture, errors) {\n  var rval = false;\n\n  // ensure tag class and type are the same if specified\n  if((obj.tagClass === v.tagClass || typeof(v.tagClass) === 'undefined') &&\n    (obj.type === v.type || typeof(v.type) === 'undefined')) {\n    // ensure constructed flag is the same if specified\n    if(obj.constructed === v.constructed ||\n      typeof(v.constructed) === 'undefined') {\n      rval = true;\n\n      // handle sub values\n      if(v.value && forge.util.isArray(v.value)) {\n        var j = 0;\n        for(var i = 0; rval && i < v.value.length; ++i) {\n          rval = v.value[i].optional || false;\n          if(obj.value[j]) {\n            rval = asn1.validate(obj.value[j], v.value[i], capture, errors);\n            if(rval) {\n              ++j;\n            } else if(v.value[i].optional) {\n              rval = true;\n            }\n          }\n          if(!rval && errors) {\n            errors.push(\n              '[' + v.name + '] ' +\n              'Tag class \"' + v.tagClass + '\", type \"' +\n              v.type + '\" expected value length \"' +\n              v.value.length + '\", got \"' +\n              obj.value.length + '\"');\n          }\n        }\n      }\n\n      if(rval && capture) {\n        if(v.capture) {\n          capture[v.capture] = obj.value;\n        }\n        if(v.captureAsn1) {\n          capture[v.captureAsn1] = obj;\n        }\n        if(v.captureBitStringContents && 'bitStringContents' in obj) {\n          capture[v.captureBitStringContents] = obj.bitStringContents;\n        }\n        if(v.captureBitStringValue && 'bitStringContents' in obj) {\n          var value;\n          if(obj.bitStringContents.length < 2) {\n            capture[v.captureBitStringValue] = '';\n          } else {\n            // FIXME: support unused bits with data shifting\n            var unused = obj.bitStringContents.charCodeAt(0);\n            if(unused !== 0) {\n              throw new Error(\n                'captureBitStringValue only supported for zero unused bits');\n            }\n            capture[v.captureBitStringValue] = obj.bitStringContents.slice(1);\n          }\n        }\n      }\n    } else if(errors) {\n      errors.push(\n        '[' + v.name + '] ' +\n        'Expected constructed \"' + v.constructed + '\", got \"' +\n        obj.constructed + '\"');\n    }\n  } else if(errors) {\n    if(obj.tagClass !== v.tagClass) {\n      errors.push(\n        '[' + v.name + '] ' +\n        'Expected tag class \"' + v.tagClass + '\", got \"' +\n        obj.tagClass + '\"');\n    }\n    if(obj.type !== v.type) {\n      errors.push(\n        '[' + v.name + '] ' +\n        'Expected type \"' + v.type + '\", got \"' + obj.type + '\"');\n    }\n  }\n  return rval;\n};\n\n// regex for testing for non-latin characters\nvar _nonLatinRegex = /[^\\\\u0000-\\\\u00ff]/;\n\n/**\n * Pretty prints an ASN.1 object to a string.\n *\n * @param obj the object to write out.\n * @param level the level in the tree.\n * @param indentation the indentation to use.\n *\n * @return the string.\n */\nasn1.prettyPrint = function(obj, level, indentation) {\n  var rval = '';\n\n  // set default level and indentation\n  level = level || 0;\n  indentation = indentation || 2;\n\n  // start new line for deep levels\n  if(level > 0) {\n    rval += '\\n';\n  }\n\n  // create indent\n  var indent = '';\n  for(var i = 0; i < level * indentation; ++i) {\n    indent += ' ';\n  }\n\n  // print class:type\n  rval += indent + 'Tag: ';\n  switch(obj.tagClass) {\n  case asn1.Class.UNIVERSAL:\n    rval += 'Universal:';\n    break;\n  case asn1.Class.APPLICATION:\n    rval += 'Application:';\n    break;\n  case asn1.Class.CONTEXT_SPECIFIC:\n    rval += 'Context-Specific:';\n    break;\n  case asn1.Class.PRIVATE:\n    rval += 'Private:';\n    break;\n  }\n\n  if(obj.tagClass === asn1.Class.UNIVERSAL) {\n    rval += obj.type;\n\n    // known types\n    switch(obj.type) {\n    case asn1.Type.NONE:\n      rval += ' (None)';\n      break;\n    case asn1.Type.BOOLEAN:\n      rval += ' (Boolean)';\n      break;\n    case asn1.Type.INTEGER:\n      rval += ' (Integer)';\n      break;\n    case asn1.Type.BITSTRING:\n      rval += ' (Bit string)';\n      break;\n    case asn1.Type.OCTETSTRING:\n      rval += ' (Octet string)';\n      break;\n    case asn1.Type.NULL:\n      rval += ' (Null)';\n      break;\n    case asn1.Type.OID:\n      rval += ' (Object Identifier)';\n      break;\n    case asn1.Type.ODESC:\n      rval += ' (Object Descriptor)';\n      break;\n    case asn1.Type.EXTERNAL:\n      rval += ' (External or Instance of)';\n      break;\n    case asn1.Type.REAL:\n      rval += ' (Real)';\n      break;\n    case asn1.Type.ENUMERATED:\n      rval += ' (Enumerated)';\n      break;\n    case asn1.Type.EMBEDDED:\n      rval += ' (Embedded PDV)';\n      break;\n    case asn1.Type.UTF8:\n      rval += ' (UTF8)';\n      break;\n    case asn1.Type.ROID:\n      rval += ' (Relative Object Identifier)';\n      break;\n    case asn1.Type.SEQUENCE:\n      rval += ' (Sequence)';\n      break;\n    case asn1.Type.SET:\n      rval += ' (Set)';\n      break;\n    case asn1.Type.PRINTABLESTRING:\n      rval += ' (Printable String)';\n      break;\n    case asn1.Type.IA5String:\n      rval += ' (IA5String (ASCII))';\n      break;\n    case asn1.Type.UTCTIME:\n      rval += ' (UTC time)';\n      break;\n    case asn1.Type.GENERALIZEDTIME:\n      rval += ' (Generalized time)';\n      break;\n    case asn1.Type.BMPSTRING:\n      rval += ' (BMP String)';\n      break;\n    }\n  } else {\n    rval += obj.type;\n  }\n\n  rval += '\\n';\n  rval += indent + 'Constructed: ' + obj.constructed + '\\n';\n\n  if(obj.composed) {\n    var subvalues = 0;\n    var sub = '';\n    for(var i = 0; i < obj.value.length; ++i) {\n      if(obj.value[i] !== undefined) {\n        subvalues += 1;\n        sub += asn1.prettyPrint(obj.value[i], level + 1, indentation);\n        if((i + 1) < obj.value.length) {\n          sub += ',';\n        }\n      }\n    }\n    rval += indent + 'Sub values: ' + subvalues + sub;\n  } else {\n    rval += indent + 'Value: ';\n    if(obj.type === asn1.Type.OID) {\n      var oid = asn1.derToOid(obj.value);\n      rval += oid;\n      if(forge.pki && forge.pki.oids) {\n        if(oid in forge.pki.oids) {\n          rval += ' (' + forge.pki.oids[oid] + ') ';\n        }\n      }\n    }\n    if(obj.type === asn1.Type.INTEGER) {\n      try {\n        rval += asn1.derToInteger(obj.value);\n      } catch(ex) {\n        rval += '0x' + forge.util.bytesToHex(obj.value);\n      }\n    } else if(obj.type === asn1.Type.BITSTRING) {\n      // TODO: shift bits as needed to display without padding\n      if(obj.value.length > 1) {\n        // remove unused bits field\n        rval += '0x' + forge.util.bytesToHex(obj.value.slice(1));\n      } else {\n        rval += '(none)';\n      }\n      // show unused bit count\n      if(obj.value.length > 0) {\n        var unused = obj.value.charCodeAt(0);\n        if(unused == 1) {\n          rval += ' (1 unused bit shown)';\n        } else if(unused > 1) {\n          rval += ' (' + unused + ' unused bits shown)';\n        }\n      }\n    } else if(obj.type === asn1.Type.OCTETSTRING) {\n      if(!_nonLatinRegex.test(obj.value)) {\n        rval += '(' + obj.value + ') ';\n      }\n      rval += '0x' + forge.util.bytesToHex(obj.value);\n    } else if(obj.type === asn1.Type.UTF8) {\n      try {\n        rval += forge.util.decodeUtf8(obj.value);\n      } catch(e) {\n        if(e.message === 'URI malformed') {\n          rval +=\n            '0x' + forge.util.bytesToHex(obj.value) + ' (malformed UTF8)';\n        } else {\n          throw e;\n        }\n      }\n    } else if(obj.type === asn1.Type.PRINTABLESTRING ||\n      obj.type === asn1.Type.IA5String) {\n      rval += obj.value;\n    } else if(_nonLatinRegex.test(obj.value)) {\n      rval += '0x' + forge.util.bytesToHex(obj.value);\n    } else if(obj.value.length === 0) {\n      rval += '[null]';\n    } else {\n      rval += obj.value;\n    }\n  }\n\n  return rval;\n};\n","/**\n * Node.js module for Forge message digests.\n *\n * @author Dave Longley\n *\n * Copyright 2011-2017 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\n\nmodule.exports = forge.md = forge.md || {};\nforge.md.algorithms = forge.md.algorithms || {};\n","/**\n * A Javascript implementation of Transport Layer Security (TLS).\n *\n * @author Dave Longley\n *\n * Copyright (c) 2009-2014 Digital Bazaar, Inc.\n *\n * The TLS Handshake Protocol involves the following steps:\n *\n * - Exchange hello messages to agree on algorithms, exchange random values,\n * and check for session resumption.\n *\n * - Exchange the necessary cryptographic parameters to allow the client and\n * server to agree on a premaster secret.\n *\n * - Exchange certificates and cryptographic information to allow the client\n * and server to authenticate themselves.\n *\n * - Generate a master secret from the premaster secret and exchanged random\n * values.\n *\n * - Provide security parameters to the record layer.\n *\n * - Allow the client and server to verify that their peer has calculated the\n * same security parameters and that the handshake occurred without tampering\n * by an attacker.\n *\n * Up to 4 different messages may be sent during a key exchange. The server\n * certificate, the server key exchange, the client certificate, and the\n * client key exchange.\n *\n * A typical handshake (from the client's perspective).\n *\n * 1. Client sends ClientHello.\n * 2. Client receives ServerHello.\n * 3. Client receives optional Certificate.\n * 4. Client receives optional ServerKeyExchange.\n * 5. Client receives ServerHelloDone.\n * 6. Client sends optional Certificate.\n * 7. Client sends ClientKeyExchange.\n * 8. Client sends optional CertificateVerify.\n * 9. Client sends ChangeCipherSpec.\n * 10. Client sends Finished.\n * 11. Client receives ChangeCipherSpec.\n * 12. Client receives Finished.\n * 13. Client sends/receives application data.\n *\n * To reuse an existing session:\n *\n * 1. Client sends ClientHello with session ID for reuse.\n * 2. Client receives ServerHello with same session ID if reusing.\n * 3. Client receives ChangeCipherSpec message if reusing.\n * 4. Client receives Finished.\n * 5. Client sends ChangeCipherSpec.\n * 6. Client sends Finished.\n *\n * Note: Client ignores HelloRequest if in the middle of a handshake.\n *\n * Record Layer:\n *\n * The record layer fragments information blocks into TLSPlaintext records\n * carrying data in chunks of 2^14 bytes or less. Client message boundaries are\n * not preserved in the record layer (i.e., multiple client messages of the\n * same ContentType MAY be coalesced into a single TLSPlaintext record, or a\n * single message MAY be fragmented across several records).\n *\n * struct {\n *   uint8 major;\n *   uint8 minor;\n * } ProtocolVersion;\n *\n * struct {\n *   ContentType type;\n *   ProtocolVersion version;\n *   uint16 length;\n *   opaque fragment[TLSPlaintext.length];\n * } TLSPlaintext;\n *\n * type:\n *   The higher-level protocol used to process the enclosed fragment.\n *\n * version:\n *   The version of the protocol being employed. TLS Version 1.2 uses version\n *   {3, 3}. TLS Version 1.0 uses version {3, 1}. Note that a client that\n *   supports multiple versions of TLS may not know what version will be\n *   employed before it receives the ServerHello.\n *\n * length:\n *   The length (in bytes) of the following TLSPlaintext.fragment. The length\n *   MUST NOT exceed 2^14 = 16384 bytes.\n *\n * fragment:\n *   The application data. This data is transparent and treated as an\n *   independent block to be dealt with by the higher-level protocol specified\n *   by the type field.\n *\n * Implementations MUST NOT send zero-length fragments of Handshake, Alert, or\n * ChangeCipherSpec content types. Zero-length fragments of Application data\n * MAY be sent as they are potentially useful as a traffic analysis\n * countermeasure.\n *\n * Note: Data of different TLS record layer content types MAY be interleaved.\n * Application data is generally of lower precedence for transmission than\n * other content types. However, records MUST be delivered to the network in\n * the same order as they are protected by the record layer. Recipients MUST\n * receive and process interleaved application layer traffic during handshakes\n * subsequent to the first one on a connection.\n *\n * struct {\n *   ContentType type;       // same as TLSPlaintext.type\n *   ProtocolVersion version;// same as TLSPlaintext.version\n *   uint16 length;\n *   opaque fragment[TLSCompressed.length];\n * } TLSCompressed;\n *\n * length:\n *   The length (in bytes) of the following TLSCompressed.fragment.\n *   The length MUST NOT exceed 2^14 + 1024.\n *\n * fragment:\n *   The compressed form of TLSPlaintext.fragment.\n *\n * Note: A CompressionMethod.null operation is an identity operation; no fields\n * are altered. In this implementation, since no compression is supported,\n * uncompressed records are always the same as compressed records.\n *\n * Encryption Information:\n *\n * The encryption and MAC functions translate a TLSCompressed structure into a\n * TLSCiphertext. The decryption functions reverse the process. The MAC of the\n * record also includes a sequence number so that missing, extra, or repeated\n * messages are detectable.\n *\n * struct {\n *   ContentType type;\n *   ProtocolVersion version;\n *   uint16 length;\n *   select (SecurityParameters.cipher_type) {\n *     case stream: GenericStreamCipher;\n *     case block:  GenericBlockCipher;\n *     case aead:   GenericAEADCipher;\n *   } fragment;\n * } TLSCiphertext;\n *\n * type:\n *   The type field is identical to TLSCompressed.type.\n *\n * version:\n *   The version field is identical to TLSCompressed.version.\n *\n * length:\n *   The length (in bytes) of the following TLSCiphertext.fragment.\n *   The length MUST NOT exceed 2^14 + 2048.\n *\n * fragment:\n *   The encrypted form of TLSCompressed.fragment, with the MAC.\n *\n * Note: Only CBC Block Ciphers are supported by this implementation.\n *\n * The TLSCompressed.fragment structures are converted to/from block\n * TLSCiphertext.fragment structures.\n *\n * struct {\n *   opaque IV[SecurityParameters.record_iv_length];\n *   block-ciphered struct {\n *     opaque content[TLSCompressed.length];\n *     opaque MAC[SecurityParameters.mac_length];\n *     uint8 padding[GenericBlockCipher.padding_length];\n *     uint8 padding_length;\n *   };\n * } GenericBlockCipher;\n *\n * The MAC is generated as described in Section 6.2.3.1.\n *\n * IV:\n *   The Initialization Vector (IV) SHOULD be chosen at random, and MUST be\n *   unpredictable. Note that in versions of TLS prior to 1.1, there was no\n *   IV field, and the last ciphertext block of the previous record (the \"CBC\n *   residue\") was used as the IV. This was changed to prevent the attacks\n *   described in [CBCATT]. For block ciphers, the IV length is of length\n *   SecurityParameters.record_iv_length, which is equal to the\n *   SecurityParameters.block_size.\n *\n * padding:\n *   Padding that is added to force the length of the plaintext to be an\n *   integral multiple of the block cipher's block length. The padding MAY be\n *   any length up to 255 bytes, as long as it results in the\n *   TLSCiphertext.length being an integral multiple of the block length.\n *   Lengths longer than necessary might be desirable to frustrate attacks on\n *   a protocol that are based on analysis of the lengths of exchanged\n *   messages. Each uint8 in the padding data vector MUST be filled with the\n *   padding length value. The receiver MUST check this padding and MUST use\n *   the bad_record_mac alert to indicate padding errors.\n *\n * padding_length:\n *   The padding length MUST be such that the total size of the\n *   GenericBlockCipher structure is a multiple of the cipher's block length.\n *   Legal values range from zero to 255, inclusive. This length specifies the\n *   length of the padding field exclusive of the padding_length field itself.\n *\n * The encrypted data length (TLSCiphertext.length) is one more than the sum of\n * SecurityParameters.block_length, TLSCompressed.length,\n * SecurityParameters.mac_length, and padding_length.\n *\n * Example: If the block length is 8 bytes, the content length\n * (TLSCompressed.length) is 61 bytes, and the MAC length is 20 bytes, then the\n * length before padding is 82 bytes (this does not include the IV. Thus, the\n * padding length modulo 8 must be equal to 6 in order to make the total length\n * an even multiple of 8 bytes (the block length). The padding length can be\n * 6, 14, 22, and so on, through 254. If the padding length were the minimum\n * necessary, 6, the padding would be 6 bytes, each containing the value 6.\n * Thus, the last 8 octets of the GenericBlockCipher before block encryption\n * would be xx 06 06 06 06 06 06 06, where xx is the last octet of the MAC.\n *\n * Note: With block ciphers in CBC mode (Cipher Block Chaining), it is critical\n * that the entire plaintext of the record be known before any ciphertext is\n * transmitted. Otherwise, it is possible for the attacker to mount the attack\n * described in [CBCATT].\n *\n * Implementation note: Canvel et al. [CBCTIME] have demonstrated a timing\n * attack on CBC padding based on the time required to compute the MAC. In\n * order to defend against this attack, implementations MUST ensure that\n * record processing time is essentially the same whether or not the padding\n * is correct. In general, the best way to do this is to compute the MAC even\n * if the padding is incorrect, and only then reject the packet. For instance,\n * if the pad appears to be incorrect, the implementation might assume a\n * zero-length pad and then compute the MAC. This leaves a small timing\n * channel, since MAC performance depends, to some extent, on the size of the\n * data fragment, but it is not believed to be large enough to be exploitable,\n * due to the large block size of existing MACs and the small size of the\n * timing signal.\n */\nvar forge = require('./forge');\nrequire('./asn1');\nrequire('./hmac');\nrequire('./md5');\nrequire('./pem');\nrequire('./pki');\nrequire('./random');\nrequire('./sha1');\nrequire('./util');\n\n/**\n * Generates pseudo random bytes by mixing the result of two hash functions,\n * MD5 and SHA-1.\n *\n * prf_TLS1(secret, label, seed) =\n *   P_MD5(S1, label + seed) XOR P_SHA-1(S2, label + seed);\n *\n * Each P_hash function functions as follows:\n *\n * P_hash(secret, seed) = HMAC_hash(secret, A(1) + seed) +\n *                        HMAC_hash(secret, A(2) + seed) +\n *                        HMAC_hash(secret, A(3) + seed) + ...\n * A() is defined as:\n *   A(0) = seed\n *   A(i) = HMAC_hash(secret, A(i-1))\n *\n * The '+' operator denotes concatenation.\n *\n * As many iterations A(N) as are needed are performed to generate enough\n * pseudo random byte output. If an iteration creates more data than is\n * necessary, then it is truncated.\n *\n * Therefore:\n * A(1) = HMAC_hash(secret, A(0))\n *      = HMAC_hash(secret, seed)\n * A(2) = HMAC_hash(secret, A(1))\n *      = HMAC_hash(secret, HMAC_hash(secret, seed))\n *\n * Therefore:\n * P_hash(secret, seed) =\n *   HMAC_hash(secret, HMAC_hash(secret, A(0)) + seed) +\n *   HMAC_hash(secret, HMAC_hash(secret, A(1)) + seed) +\n *   ...\n *\n * Therefore:\n * P_hash(secret, seed) =\n *   HMAC_hash(secret, HMAC_hash(secret, seed) + seed) +\n *   HMAC_hash(secret, HMAC_hash(secret, HMAC_hash(secret, seed)) + seed) +\n *   ...\n *\n * @param secret the secret to use.\n * @param label the label to use.\n * @param seed the seed value to use.\n * @param length the number of bytes to generate.\n *\n * @return the pseudo random bytes in a byte buffer.\n */\nvar prf_TLS1 = function(secret, label, seed, length) {\n  var rval = forge.util.createBuffer();\n\n  /* For TLS 1.0, the secret is split in half, into two secrets of equal\n    length. If the secret has an odd length then the last byte of the first\n    half will be the same as the first byte of the second. The length of the\n    two secrets is half of the secret rounded up. */\n  var idx = (secret.length >> 1);\n  var slen = idx + (secret.length & 1);\n  var s1 = secret.substr(0, slen);\n  var s2 = secret.substr(idx, slen);\n  var ai = forge.util.createBuffer();\n  var hmac = forge.hmac.create();\n  seed = label + seed;\n\n  // determine the number of iterations that must be performed to generate\n  // enough output bytes, md5 creates 16 byte hashes, sha1 creates 20\n  var md5itr = Math.ceil(length / 16);\n  var sha1itr = Math.ceil(length / 20);\n\n  // do md5 iterations\n  hmac.start('MD5', s1);\n  var md5bytes = forge.util.createBuffer();\n  ai.putBytes(seed);\n  for(var i = 0; i < md5itr; ++i) {\n    // HMAC_hash(secret, A(i-1))\n    hmac.start(null, null);\n    hmac.update(ai.getBytes());\n    ai.putBuffer(hmac.digest());\n\n    // HMAC_hash(secret, A(i) + seed)\n    hmac.start(null, null);\n    hmac.update(ai.bytes() + seed);\n    md5bytes.putBuffer(hmac.digest());\n  }\n\n  // do sha1 iterations\n  hmac.start('SHA1', s2);\n  var sha1bytes = forge.util.createBuffer();\n  ai.clear();\n  ai.putBytes(seed);\n  for(var i = 0; i < sha1itr; ++i) {\n    // HMAC_hash(secret, A(i-1))\n    hmac.start(null, null);\n    hmac.update(ai.getBytes());\n    ai.putBuffer(hmac.digest());\n\n    // HMAC_hash(secret, A(i) + seed)\n    hmac.start(null, null);\n    hmac.update(ai.bytes() + seed);\n    sha1bytes.putBuffer(hmac.digest());\n  }\n\n  // XOR the md5 bytes with the sha1 bytes\n  rval.putBytes(forge.util.xorBytes(\n    md5bytes.getBytes(), sha1bytes.getBytes(), length));\n\n  return rval;\n};\n\n/**\n * Generates pseudo random bytes using a SHA256 algorithm. For TLS 1.2.\n *\n * @param secret the secret to use.\n * @param label the label to use.\n * @param seed the seed value to use.\n * @param length the number of bytes to generate.\n *\n * @return the pseudo random bytes in a byte buffer.\n */\nvar prf_sha256 = function(secret, label, seed, length) {\n   // FIXME: implement me for TLS 1.2\n};\n\n/**\n * Gets a MAC for a record using the SHA-1 hash algorithm.\n *\n * @param key the mac key.\n * @param state the sequence number (array of two 32-bit integers).\n * @param record the record.\n *\n * @return the sha-1 hash (20 bytes) for the given record.\n */\nvar hmac_sha1 = function(key, seqNum, record) {\n  /* MAC is computed like so:\n  HMAC_hash(\n    key, seqNum +\n      TLSCompressed.type +\n      TLSCompressed.version +\n      TLSCompressed.length +\n      TLSCompressed.fragment)\n  */\n  var hmac = forge.hmac.create();\n  hmac.start('SHA1', key);\n  var b = forge.util.createBuffer();\n  b.putInt32(seqNum[0]);\n  b.putInt32(seqNum[1]);\n  b.putByte(record.type);\n  b.putByte(record.version.major);\n  b.putByte(record.version.minor);\n  b.putInt16(record.length);\n  b.putBytes(record.fragment.bytes());\n  hmac.update(b.getBytes());\n  return hmac.digest().getBytes();\n};\n\n/**\n * Compresses the TLSPlaintext record into a TLSCompressed record using the\n * deflate algorithm.\n *\n * @param c the TLS connection.\n * @param record the TLSPlaintext record to compress.\n * @param s the ConnectionState to use.\n *\n * @return true on success, false on failure.\n */\nvar deflate = function(c, record, s) {\n  var rval = false;\n\n  try {\n    var bytes = c.deflate(record.fragment.getBytes());\n    record.fragment = forge.util.createBuffer(bytes);\n    record.length = bytes.length;\n    rval = true;\n  } catch(ex) {\n    // deflate error, fail out\n  }\n\n  return rval;\n};\n\n/**\n * Decompresses the TLSCompressed record into a TLSPlaintext record using the\n * deflate algorithm.\n *\n * @param c the TLS connection.\n * @param record the TLSCompressed record to decompress.\n * @param s the ConnectionState to use.\n *\n * @return true on success, false on failure.\n */\nvar inflate = function(c, record, s) {\n  var rval = false;\n\n  try {\n    var bytes = c.inflate(record.fragment.getBytes());\n    record.fragment = forge.util.createBuffer(bytes);\n    record.length = bytes.length;\n    rval = true;\n  } catch(ex) {\n    // inflate error, fail out\n  }\n\n  return rval;\n};\n\n/**\n * Reads a TLS variable-length vector from a byte buffer.\n *\n * Variable-length vectors are defined by specifying a subrange of legal\n * lengths, inclusively, using the notation <floor..ceiling>. When these are\n * encoded, the actual length precedes the vector's contents in the byte\n * stream. The length will be in the form of a number consuming as many bytes\n * as required to hold the vector's specified maximum (ceiling) length. A\n * variable-length vector with an actual length field of zero is referred to\n * as an empty vector.\n *\n * @param b the byte buffer.\n * @param lenBytes the number of bytes required to store the length.\n *\n * @return the resulting byte buffer.\n */\nvar readVector = function(b, lenBytes) {\n  var len = 0;\n  switch(lenBytes) {\n  case 1:\n    len = b.getByte();\n    break;\n  case 2:\n    len = b.getInt16();\n    break;\n  case 3:\n    len = b.getInt24();\n    break;\n  case 4:\n    len = b.getInt32();\n    break;\n  }\n\n  // read vector bytes into a new buffer\n  return forge.util.createBuffer(b.getBytes(len));\n};\n\n/**\n * Writes a TLS variable-length vector to a byte buffer.\n *\n * @param b the byte buffer.\n * @param lenBytes the number of bytes required to store the length.\n * @param v the byte buffer vector.\n */\nvar writeVector = function(b, lenBytes, v) {\n  // encode length at the start of the vector, where the number of bytes for\n  // the length is the maximum number of bytes it would take to encode the\n  // vector's ceiling\n  b.putInt(v.length(), lenBytes << 3);\n  b.putBuffer(v);\n};\n\n/**\n * The tls implementation.\n */\nvar tls = {};\n\n/**\n * Version: TLS 1.2 = 3.3, TLS 1.1 = 3.2, TLS 1.0 = 3.1. Both TLS 1.1 and\n * TLS 1.2 were still too new (ie: openSSL didn't implement them) at the time\n * of this implementation so TLS 1.0 was implemented instead.\n */\ntls.Versions = {\n  TLS_1_0: {major: 3, minor: 1},\n  TLS_1_1: {major: 3, minor: 2},\n  TLS_1_2: {major: 3, minor: 3}\n};\ntls.SupportedVersions = [\n  tls.Versions.TLS_1_1,\n  tls.Versions.TLS_1_0\n];\ntls.Version = tls.SupportedVersions[0];\n\n/**\n * Maximum fragment size. True maximum is 16384, but we fragment before that\n * to allow for unusual small increases during compression.\n */\ntls.MaxFragment = 16384 - 1024;\n\n/**\n * Whether this entity is considered the \"client\" or \"server\".\n * enum { server, client } ConnectionEnd;\n */\ntls.ConnectionEnd = {\n  server: 0,\n  client: 1\n};\n\n/**\n * Pseudo-random function algorithm used to generate keys from the master\n * secret.\n * enum { tls_prf_sha256 } PRFAlgorithm;\n */\ntls.PRFAlgorithm = {\n  tls_prf_sha256: 0\n};\n\n/**\n * Bulk encryption algorithms.\n * enum { null, rc4, des3, aes } BulkCipherAlgorithm;\n */\ntls.BulkCipherAlgorithm = {\n  none: null,\n  rc4: 0,\n  des3: 1,\n  aes: 2\n};\n\n/**\n * Cipher types.\n * enum { stream, block, aead } CipherType;\n */\ntls.CipherType = {\n  stream: 0,\n  block: 1,\n  aead: 2\n};\n\n/**\n * MAC (Message Authentication Code) algorithms.\n * enum { null, hmac_md5, hmac_sha1, hmac_sha256,\n *   hmac_sha384, hmac_sha512} MACAlgorithm;\n */\ntls.MACAlgorithm = {\n  none: null,\n  hmac_md5: 0,\n  hmac_sha1: 1,\n  hmac_sha256: 2,\n  hmac_sha384: 3,\n  hmac_sha512: 4\n};\n\n/**\n * Compression algorithms.\n * enum { null(0), deflate(1), (255) } CompressionMethod;\n */\ntls.CompressionMethod = {\n  none: 0,\n  deflate: 1\n};\n\n/**\n * TLS record content types.\n * enum {\n *   change_cipher_spec(20), alert(21), handshake(22),\n *   application_data(23), (255)\n * } ContentType;\n */\ntls.ContentType = {\n  change_cipher_spec: 20,\n  alert: 21,\n  handshake: 22,\n  application_data: 23,\n  heartbeat: 24\n};\n\n/**\n * TLS handshake types.\n * enum {\n *   hello_request(0), client_hello(1), server_hello(2),\n *   certificate(11), server_key_exchange (12),\n *   certificate_request(13), server_hello_done(14),\n *   certificate_verify(15), client_key_exchange(16),\n *   finished(20), (255)\n * } HandshakeType;\n */\ntls.HandshakeType = {\n  hello_request: 0,\n  client_hello: 1,\n  server_hello: 2,\n  certificate: 11,\n  server_key_exchange: 12,\n  certificate_request: 13,\n  server_hello_done: 14,\n  certificate_verify: 15,\n  client_key_exchange: 16,\n  finished: 20\n};\n\n/**\n * TLS Alert Protocol.\n *\n * enum { warning(1), fatal(2), (255) } AlertLevel;\n *\n * enum {\n *   close_notify(0),\n *   unexpected_message(10),\n *   bad_record_mac(20),\n *   decryption_failed(21),\n *   record_overflow(22),\n *   decompression_failure(30),\n *   handshake_failure(40),\n *   bad_certificate(42),\n *   unsupported_certificate(43),\n *   certificate_revoked(44),\n *   certificate_expired(45),\n *   certificate_unknown(46),\n *   illegal_parameter(47),\n *   unknown_ca(48),\n *   access_denied(49),\n *   decode_error(50),\n *   decrypt_error(51),\n *   export_restriction(60),\n *   protocol_version(70),\n *   insufficient_security(71),\n *   internal_error(80),\n *   user_canceled(90),\n *   no_renegotiation(100),\n *   (255)\n * } AlertDescription;\n *\n * struct {\n *   AlertLevel level;\n *   AlertDescription description;\n * } Alert;\n */\ntls.Alert = {};\ntls.Alert.Level = {\n  warning: 1,\n  fatal: 2\n};\ntls.Alert.Description = {\n  close_notify: 0,\n  unexpected_message: 10,\n  bad_record_mac: 20,\n  decryption_failed: 21,\n  record_overflow: 22,\n  decompression_failure: 30,\n  handshake_failure: 40,\n  bad_certificate: 42,\n  unsupported_certificate: 43,\n  certificate_revoked: 44,\n  certificate_expired: 45,\n  certificate_unknown: 46,\n  illegal_parameter: 47,\n  unknown_ca: 48,\n  access_denied: 49,\n  decode_error: 50,\n  decrypt_error: 51,\n  export_restriction: 60,\n  protocol_version: 70,\n  insufficient_security: 71,\n  internal_error: 80,\n  user_canceled: 90,\n  no_renegotiation: 100\n};\n\n/**\n * TLS Heartbeat Message types.\n * enum {\n *   heartbeat_request(1),\n *   heartbeat_response(2),\n *   (255)\n * } HeartbeatMessageType;\n */\ntls.HeartbeatMessageType = {\n  heartbeat_request: 1,\n  heartbeat_response: 2\n};\n\n/**\n * Supported cipher suites.\n */\ntls.CipherSuites = {};\n\n/**\n * Gets a supported cipher suite from its 2 byte ID.\n *\n * @param twoBytes two bytes in a string.\n *\n * @return the matching supported cipher suite or null.\n */\ntls.getCipherSuite = function(twoBytes) {\n  var rval = null;\n  for(var key in tls.CipherSuites) {\n    var cs = tls.CipherSuites[key];\n    if(cs.id[0] === twoBytes.charCodeAt(0) &&\n      cs.id[1] === twoBytes.charCodeAt(1)) {\n      rval = cs;\n      break;\n    }\n  }\n  return rval;\n};\n\n/**\n * Called when an unexpected record is encountered.\n *\n * @param c the connection.\n * @param record the record.\n */\ntls.handleUnexpected = function(c, record) {\n  // if connection is client and closed, ignore unexpected messages\n  var ignore = (!c.open && c.entity === tls.ConnectionEnd.client);\n  if(!ignore) {\n    c.error(c, {\n      message: 'Unexpected message. Received TLS record out of order.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.unexpected_message\n      }\n    });\n  }\n};\n\n/**\n * Called when a client receives a HelloRequest record.\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleHelloRequest = function(c, record, length) {\n  // ignore renegotiation requests from the server during a handshake, but\n  // if handshaking, send a warning alert that renegotation is denied\n  if(!c.handshaking && c.handshakes > 0) {\n    // send alert warning\n    tls.queue(c, tls.createAlert(c, {\n       level: tls.Alert.Level.warning,\n       description: tls.Alert.Description.no_renegotiation\n    }));\n    tls.flush(c);\n  }\n\n  // continue\n  c.process();\n};\n\n/**\n * Parses a hello message from a ClientHello or ServerHello record.\n *\n * @param record the record to parse.\n *\n * @return the parsed message.\n */\ntls.parseHelloMessage = function(c, record, length) {\n  var msg = null;\n\n  var client = (c.entity === tls.ConnectionEnd.client);\n\n  // minimum of 38 bytes in message\n  if(length < 38) {\n    c.error(c, {\n      message: client ?\n        'Invalid ServerHello message. Message too short.' :\n        'Invalid ClientHello message. Message too short.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.illegal_parameter\n      }\n    });\n  } else {\n    // use 'remaining' to calculate # of remaining bytes in the message\n    var b = record.fragment;\n    var remaining = b.length();\n    msg = {\n      version: {\n        major: b.getByte(),\n        minor: b.getByte()\n      },\n      random: forge.util.createBuffer(b.getBytes(32)),\n      session_id: readVector(b, 1),\n      extensions: []\n    };\n    if(client) {\n      msg.cipher_suite = b.getBytes(2);\n      msg.compression_method = b.getByte();\n    } else {\n      msg.cipher_suites = readVector(b, 2);\n      msg.compression_methods = readVector(b, 1);\n    }\n\n    // read extensions if there are any bytes left in the message\n    remaining = length - (remaining - b.length());\n    if(remaining > 0) {\n      // parse extensions\n      var exts = readVector(b, 2);\n      while(exts.length() > 0) {\n        msg.extensions.push({\n          type: [exts.getByte(), exts.getByte()],\n          data: readVector(exts, 2)\n        });\n      }\n\n      // TODO: make extension support modular\n      if(!client) {\n        for(var i = 0; i < msg.extensions.length; ++i) {\n          var ext = msg.extensions[i];\n\n          // support SNI extension\n          if(ext.type[0] === 0x00 && ext.type[1] === 0x00) {\n            // get server name list\n            var snl = readVector(ext.data, 2);\n            while(snl.length() > 0) {\n              // read server name type\n              var snType = snl.getByte();\n\n              // only HostName type (0x00) is known, break out if\n              // another type is detected\n              if(snType !== 0x00) {\n                break;\n              }\n\n              // add host name to server name list\n              c.session.extensions.server_name.serverNameList.push(\n                readVector(snl, 2).getBytes());\n            }\n          }\n        }\n      }\n    }\n\n    // version already set, do not allow version change\n    if(c.session.version) {\n      if(msg.version.major !== c.session.version.major ||\n        msg.version.minor !== c.session.version.minor) {\n        return c.error(c, {\n          message: 'TLS version change is disallowed during renegotiation.',\n          send: true,\n          alert: {\n            level: tls.Alert.Level.fatal,\n            description: tls.Alert.Description.protocol_version\n          }\n        });\n      }\n    }\n\n    // get the chosen (ServerHello) cipher suite\n    if(client) {\n      // FIXME: should be checking configured acceptable cipher suites\n      c.session.cipherSuite = tls.getCipherSuite(msg.cipher_suite);\n    } else {\n      // get a supported preferred (ClientHello) cipher suite\n      // choose the first supported cipher suite\n      var tmp = forge.util.createBuffer(msg.cipher_suites.bytes());\n      while(tmp.length() > 0) {\n        // FIXME: should be checking configured acceptable suites\n        // cipher suites take up 2 bytes\n        c.session.cipherSuite = tls.getCipherSuite(tmp.getBytes(2));\n        if(c.session.cipherSuite !== null) {\n          break;\n        }\n      }\n    }\n\n    // cipher suite not supported\n    if(c.session.cipherSuite === null) {\n      return c.error(c, {\n        message: 'No cipher suites in common.',\n        send: true,\n        alert: {\n          level: tls.Alert.Level.fatal,\n          description: tls.Alert.Description.handshake_failure\n        },\n        cipherSuite: forge.util.bytesToHex(msg.cipher_suite)\n      });\n    }\n\n    // TODO: handle compression methods\n    if(client) {\n      c.session.compressionMethod = msg.compression_method;\n    } else {\n      // no compression\n      c.session.compressionMethod = tls.CompressionMethod.none;\n    }\n  }\n\n  return msg;\n};\n\n/**\n * Creates security parameters for the given connection based on the given\n * hello message.\n *\n * @param c the TLS connection.\n * @param msg the hello message.\n */\ntls.createSecurityParameters = function(c, msg) {\n  /* Note: security params are from TLS 1.2, some values like prf_algorithm\n  are ignored for TLS 1.0/1.1 and the builtin as specified in the spec is\n  used. */\n\n  // TODO: handle other options from server when more supported\n\n  // get client and server randoms\n  var client = (c.entity === tls.ConnectionEnd.client);\n  var msgRandom = msg.random.bytes();\n  var cRandom = client ? c.session.sp.client_random : msgRandom;\n  var sRandom = client ? msgRandom : tls.createRandom().getBytes();\n\n  // create new security parameters\n  c.session.sp = {\n    entity: c.entity,\n    prf_algorithm: tls.PRFAlgorithm.tls_prf_sha256,\n    bulk_cipher_algorithm: null,\n    cipher_type: null,\n    enc_key_length: null,\n    block_length: null,\n    fixed_iv_length: null,\n    record_iv_length: null,\n    mac_algorithm: null,\n    mac_length: null,\n    mac_key_length: null,\n    compression_algorithm: c.session.compressionMethod,\n    pre_master_secret: null,\n    master_secret: null,\n    client_random: cRandom,\n    server_random: sRandom\n  };\n};\n\n/**\n * Called when a client receives a ServerHello record.\n *\n * When a ServerHello message will be sent:\n *   The server will send this message in response to a client hello message\n *   when it was able to find an acceptable set of algorithms. If it cannot\n *   find such a match, it will respond with a handshake failure alert.\n *\n * uint24 length;\n * struct {\n *   ProtocolVersion server_version;\n *   Random random;\n *   SessionID session_id;\n *   CipherSuite cipher_suite;\n *   CompressionMethod compression_method;\n *   select(extensions_present) {\n *     case false:\n *       struct {};\n *     case true:\n *       Extension extensions<0..2^16-1>;\n *   };\n * } ServerHello;\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleServerHello = function(c, record, length) {\n  var msg = tls.parseHelloMessage(c, record, length);\n  if(c.fail) {\n    return;\n  }\n\n  // ensure server version is compatible\n  if(msg.version.minor <= c.version.minor) {\n    c.version.minor = msg.version.minor;\n  } else {\n    return c.error(c, {\n      message: 'Incompatible TLS version.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.protocol_version\n      }\n    });\n  }\n\n  // indicate session version has been set\n  c.session.version = c.version;\n\n  // get the session ID from the message\n  var sessionId = msg.session_id.bytes();\n\n  // if the session ID is not blank and matches the cached one, resume\n  // the session\n  if(sessionId.length > 0 && sessionId === c.session.id) {\n    // resuming session, expect a ChangeCipherSpec next\n    c.expect = SCC;\n    c.session.resuming = true;\n\n    // get new server random\n    c.session.sp.server_random = msg.random.bytes();\n  } else {\n    // not resuming, expect a server Certificate message next\n    c.expect = SCE;\n    c.session.resuming = false;\n\n    // create new security parameters\n    tls.createSecurityParameters(c, msg);\n  }\n\n  // set new session ID\n  c.session.id = sessionId;\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a server receives a ClientHello record.\n *\n * When a ClientHello message will be sent:\n *   When a client first connects to a server it is required to send the\n *   client hello as its first message. The client can also send a client\n *   hello in response to a hello request or on its own initiative in order\n *   to renegotiate the security parameters in an existing connection.\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleClientHello = function(c, record, length) {\n  var msg = tls.parseHelloMessage(c, record, length);\n  if(c.fail) {\n    return;\n  }\n\n  // get the session ID from the message\n  var sessionId = msg.session_id.bytes();\n\n  // see if the given session ID is in the cache\n  var session = null;\n  if(c.sessionCache) {\n    session = c.sessionCache.getSession(sessionId);\n    if(session === null) {\n      // session ID not found\n      sessionId = '';\n    } else if(session.version.major !== msg.version.major ||\n      session.version.minor > msg.version.minor) {\n      // if session version is incompatible with client version, do not resume\n      session = null;\n      sessionId = '';\n    }\n  }\n\n  // no session found to resume, generate a new session ID\n  if(sessionId.length === 0) {\n    sessionId = forge.random.getBytes(32);\n  }\n\n  // update session\n  c.session.id = sessionId;\n  c.session.clientHelloVersion = msg.version;\n  c.session.sp = {};\n  if(session) {\n    // use version and security parameters from resumed session\n    c.version = c.session.version = session.version;\n    c.session.sp = session.sp;\n  } else {\n    // use highest compatible minor version\n    var version;\n    for(var i = 1; i < tls.SupportedVersions.length; ++i) {\n      version = tls.SupportedVersions[i];\n      if(version.minor <= msg.version.minor) {\n        break;\n      }\n    }\n    c.version = {major: version.major, minor: version.minor};\n    c.session.version = c.version;\n  }\n\n  // if a session is set, resume it\n  if(session !== null) {\n    // resuming session, expect a ChangeCipherSpec next\n    c.expect = CCC;\n    c.session.resuming = true;\n\n    // get new client random\n    c.session.sp.client_random = msg.random.bytes();\n  } else {\n    // not resuming, expect a Certificate or ClientKeyExchange\n    c.expect = (c.verifyClient !== false) ? CCE : CKE;\n    c.session.resuming = false;\n\n    // create new security parameters\n    tls.createSecurityParameters(c, msg);\n  }\n\n  // connection now open\n  c.open = true;\n\n  // queue server hello\n  tls.queue(c, tls.createRecord(c, {\n    type: tls.ContentType.handshake,\n    data: tls.createServerHello(c)\n  }));\n\n  if(c.session.resuming) {\n    // queue change cipher spec message\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.change_cipher_spec,\n      data: tls.createChangeCipherSpec()\n    }));\n\n    // create pending state\n    c.state.pending = tls.createConnectionState(c);\n\n    // change current write state to pending write state\n    c.state.current.write = c.state.pending.write;\n\n    // queue finished\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.handshake,\n      data: tls.createFinished(c)\n    }));\n  } else {\n    // queue server certificate\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.handshake,\n      data: tls.createCertificate(c)\n    }));\n\n    if(!c.fail) {\n      // queue server key exchange\n      tls.queue(c, tls.createRecord(c, {\n        type: tls.ContentType.handshake,\n        data: tls.createServerKeyExchange(c)\n      }));\n\n      // request client certificate if set\n      if(c.verifyClient !== false) {\n        // queue certificate request\n        tls.queue(c, tls.createRecord(c, {\n          type: tls.ContentType.handshake,\n          data: tls.createCertificateRequest(c)\n        }));\n      }\n\n      // queue server hello done\n      tls.queue(c, tls.createRecord(c, {\n        type: tls.ContentType.handshake,\n        data: tls.createServerHelloDone(c)\n      }));\n    }\n  }\n\n  // send records\n  tls.flush(c);\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a client receives a Certificate record.\n *\n * When this message will be sent:\n *   The server must send a certificate whenever the agreed-upon key exchange\n *   method is not an anonymous one. This message will always immediately\n *   follow the server hello message.\n *\n * Meaning of this message:\n *   The certificate type must be appropriate for the selected cipher suite's\n *   key exchange algorithm, and is generally an X.509v3 certificate. It must\n *   contain a key which matches the key exchange method, as follows. Unless\n *   otherwise specified, the signing algorithm for the certificate must be\n *   the same as the algorithm for the certificate key. Unless otherwise\n *   specified, the public key may be of any length.\n *\n * opaque ASN.1Cert<1..2^24-1>;\n * struct {\n *   ASN.1Cert certificate_list<1..2^24-1>;\n * } Certificate;\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleCertificate = function(c, record, length) {\n  // minimum of 3 bytes in message\n  if(length < 3) {\n    return c.error(c, {\n      message: 'Invalid Certificate message. Message too short.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.illegal_parameter\n      }\n    });\n  }\n\n  var b = record.fragment;\n  var msg = {\n    certificate_list: readVector(b, 3)\n  };\n\n  /* The sender's certificate will be first in the list (chain), each\n    subsequent one that follows will certify the previous one, but root\n    certificates (self-signed) that specify the certificate authority may\n    be omitted under the assumption that clients must already possess it. */\n  var cert, asn1;\n  var certs = [];\n  try {\n    while(msg.certificate_list.length() > 0) {\n      // each entry in msg.certificate_list is a vector with 3 len bytes\n      cert = readVector(msg.certificate_list, 3);\n      asn1 = forge.asn1.fromDer(cert);\n      cert = forge.pki.certificateFromAsn1(asn1, true);\n      certs.push(cert);\n    }\n  } catch(ex) {\n    return c.error(c, {\n      message: 'Could not parse certificate list.',\n      cause: ex,\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.bad_certificate\n      }\n    });\n  }\n\n  // ensure at least 1 certificate was provided if in client-mode\n  // or if verifyClient was set to true to require a certificate\n  // (as opposed to 'optional')\n  var client = (c.entity === tls.ConnectionEnd.client);\n  if((client || c.verifyClient === true) && certs.length === 0) {\n    // error, no certificate\n    c.error(c, {\n      message: client ?\n        'No server certificate provided.' :\n        'No client certificate provided.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.illegal_parameter\n      }\n    });\n  } else if(certs.length === 0) {\n    // no certs to verify\n    // expect a ServerKeyExchange or ClientKeyExchange message next\n    c.expect = client ? SKE : CKE;\n  } else {\n    // save certificate in session\n    if(client) {\n      c.session.serverCertificate = certs[0];\n    } else {\n      c.session.clientCertificate = certs[0];\n    }\n\n    if(tls.verifyCertificateChain(c, certs)) {\n      // expect a ServerKeyExchange or ClientKeyExchange message next\n      c.expect = client ? SKE : CKE;\n    }\n  }\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a client receives a ServerKeyExchange record.\n *\n * When this message will be sent:\n *   This message will be sent immediately after the server certificate\n *   message (or the server hello message, if this is an anonymous\n *   negotiation).\n *\n *   The server key exchange message is sent by the server only when the\n *   server certificate message (if sent) does not contain enough data to\n *   allow the client to exchange a premaster secret.\n *\n * Meaning of this message:\n *   This message conveys cryptographic information to allow the client to\n *   communicate the premaster secret: either an RSA public key to encrypt\n *   the premaster secret with, or a Diffie-Hellman public key with which the\n *   client can complete a key exchange (with the result being the premaster\n *   secret.)\n *\n * enum {\n *   dhe_dss, dhe_rsa, dh_anon, rsa, dh_dss, dh_rsa\n * } KeyExchangeAlgorithm;\n *\n * struct {\n *   opaque dh_p<1..2^16-1>;\n *   opaque dh_g<1..2^16-1>;\n *   opaque dh_Ys<1..2^16-1>;\n * } ServerDHParams;\n *\n * struct {\n *   select(KeyExchangeAlgorithm) {\n *     case dh_anon:\n *       ServerDHParams params;\n *     case dhe_dss:\n *     case dhe_rsa:\n *       ServerDHParams params;\n *       digitally-signed struct {\n *         opaque client_random[32];\n *         opaque server_random[32];\n *         ServerDHParams params;\n *       } signed_params;\n *     case rsa:\n *     case dh_dss:\n *     case dh_rsa:\n *       struct {};\n *   };\n * } ServerKeyExchange;\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleServerKeyExchange = function(c, record, length) {\n  // this implementation only supports RSA, no Diffie-Hellman support\n  // so any length > 0 is invalid\n  if(length > 0) {\n    return c.error(c, {\n      message: 'Invalid key parameters. Only RSA is supported.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.unsupported_certificate\n      }\n    });\n  }\n\n  // expect an optional CertificateRequest message next\n  c.expect = SCR;\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a client receives a ClientKeyExchange record.\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleClientKeyExchange = function(c, record, length) {\n  // this implementation only supports RSA, no Diffie-Hellman support\n  // so any length < 48 is invalid\n  if(length < 48) {\n    return c.error(c, {\n      message: 'Invalid key parameters. Only RSA is supported.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.unsupported_certificate\n      }\n    });\n  }\n\n  var b = record.fragment;\n  var msg = {\n    enc_pre_master_secret: readVector(b, 2).getBytes()\n  };\n\n  // do rsa decryption\n  var privateKey = null;\n  if(c.getPrivateKey) {\n    try {\n      privateKey = c.getPrivateKey(c, c.session.serverCertificate);\n      privateKey = forge.pki.privateKeyFromPem(privateKey);\n    } catch(ex) {\n      c.error(c, {\n        message: 'Could not get private key.',\n        cause: ex,\n        send: true,\n        alert: {\n          level: tls.Alert.Level.fatal,\n          description: tls.Alert.Description.internal_error\n        }\n      });\n    }\n  }\n\n  if(privateKey === null) {\n    return c.error(c, {\n      message: 'No private key set.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.internal_error\n      }\n    });\n  }\n\n  try {\n    // decrypt 48-byte pre-master secret\n    var sp = c.session.sp;\n    sp.pre_master_secret = privateKey.decrypt(msg.enc_pre_master_secret);\n\n    // ensure client hello version matches first 2 bytes\n    var version = c.session.clientHelloVersion;\n    if(version.major !== sp.pre_master_secret.charCodeAt(0) ||\n      version.minor !== sp.pre_master_secret.charCodeAt(1)) {\n      // error, do not send alert (see BLEI attack below)\n      throw new Error('TLS version rollback attack detected.');\n    }\n  } catch(ex) {\n    /* Note: Daniel Bleichenbacher [BLEI] can be used to attack a\n      TLS server which is using PKCS#1 encoded RSA, so instead of\n      failing here, we generate 48 random bytes and use that as\n      the pre-master secret. */\n    sp.pre_master_secret = forge.random.getBytes(48);\n  }\n\n  // expect a CertificateVerify message if a Certificate was received that\n  // does not have fixed Diffie-Hellman params, otherwise expect\n  // ChangeCipherSpec\n  c.expect = CCC;\n  if(c.session.clientCertificate !== null) {\n    // only RSA support, so expect CertificateVerify\n    // TODO: support Diffie-Hellman\n    c.expect = CCV;\n  }\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a client receives a CertificateRequest record.\n *\n * When this message will be sent:\n *   A non-anonymous server can optionally request a certificate from the\n *   client, if appropriate for the selected cipher suite. This message, if\n *   sent, will immediately follow the Server Key Exchange message (if it is\n *   sent; otherwise, the Server Certificate message).\n *\n * enum {\n *   rsa_sign(1), dss_sign(2), rsa_fixed_dh(3), dss_fixed_dh(4),\n *   rsa_ephemeral_dh_RESERVED(5), dss_ephemeral_dh_RESERVED(6),\n *   fortezza_dms_RESERVED(20), (255)\n * } ClientCertificateType;\n *\n * opaque DistinguishedName<1..2^16-1>;\n *\n * struct {\n *   ClientCertificateType certificate_types<1..2^8-1>;\n *   SignatureAndHashAlgorithm supported_signature_algorithms<2^16-1>;\n *   DistinguishedName certificate_authorities<0..2^16-1>;\n * } CertificateRequest;\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleCertificateRequest = function(c, record, length) {\n  // minimum of 3 bytes in message\n  if(length < 3) {\n    return c.error(c, {\n      message: 'Invalid CertificateRequest. Message too short.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.illegal_parameter\n      }\n    });\n  }\n\n  // TODO: TLS 1.2+ has different format including\n  // SignatureAndHashAlgorithm after cert types\n  var b = record.fragment;\n  var msg = {\n    certificate_types: readVector(b, 1),\n    certificate_authorities: readVector(b, 2)\n  };\n\n  // save certificate request in session\n  c.session.certificateRequest = msg;\n\n  // expect a ServerHelloDone message next\n  c.expect = SHD;\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a server receives a CertificateVerify record.\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleCertificateVerify = function(c, record, length) {\n  if(length < 2) {\n    return c.error(c, {\n      message: 'Invalid CertificateVerify. Message too short.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.illegal_parameter\n      }\n    });\n  }\n\n  // rewind to get full bytes for message so it can be manually\n  // digested below (special case for CertificateVerify messages because\n  // they must be digested *after* handling as opposed to all others)\n  var b = record.fragment;\n  b.read -= 4;\n  var msgBytes = b.bytes();\n  b.read += 4;\n\n  var msg = {\n    signature: readVector(b, 2).getBytes()\n  };\n\n  // TODO: add support for DSA\n\n  // generate data to verify\n  var verify = forge.util.createBuffer();\n  verify.putBuffer(c.session.md5.digest());\n  verify.putBuffer(c.session.sha1.digest());\n  verify = verify.getBytes();\n\n  try {\n    var cert = c.session.clientCertificate;\n    /*b = forge.pki.rsa.decrypt(\n      msg.signature, cert.publicKey, true, verify.length);\n    if(b !== verify) {*/\n    if(!cert.publicKey.verify(verify, msg.signature, 'NONE')) {\n      throw new Error('CertificateVerify signature does not match.');\n    }\n\n    // digest message now that it has been handled\n    c.session.md5.update(msgBytes);\n    c.session.sha1.update(msgBytes);\n  } catch(ex) {\n    return c.error(c, {\n      message: 'Bad signature in CertificateVerify.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.handshake_failure\n      }\n    });\n  }\n\n  // expect ChangeCipherSpec\n  c.expect = CCC;\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a client receives a ServerHelloDone record.\n *\n * When this message will be sent:\n *   The server hello done message is sent by the server to indicate the end\n *   of the server hello and associated messages. After sending this message\n *   the server will wait for a client response.\n *\n * Meaning of this message:\n *   This message means that the server is done sending messages to support\n *   the key exchange, and the client can proceed with its phase of the key\n *   exchange.\n *\n *   Upon receipt of the server hello done message the client should verify\n *   that the server provided a valid certificate if required and check that\n *   the server hello parameters are acceptable.\n *\n * struct {} ServerHelloDone;\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleServerHelloDone = function(c, record, length) {\n  // len must be 0 bytes\n  if(length > 0) {\n    return c.error(c, {\n      message: 'Invalid ServerHelloDone message. Invalid length.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.record_overflow\n      }\n    });\n  }\n\n  if(c.serverCertificate === null) {\n    // no server certificate was provided\n    var error = {\n      message: 'No server certificate provided. Not enough security.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.insufficient_security\n      }\n    };\n\n    // call application callback\n    var depth = 0;\n    var ret = c.verify(c, error.alert.description, depth, []);\n    if(ret !== true) {\n      // check for custom alert info\n      if(ret || ret === 0) {\n        // set custom message and alert description\n        if(typeof ret === 'object' && !forge.util.isArray(ret)) {\n          if(ret.message) {\n            error.message = ret.message;\n          }\n          if(ret.alert) {\n            error.alert.description = ret.alert;\n          }\n        } else if(typeof ret === 'number') {\n          // set custom alert description\n          error.alert.description = ret;\n        }\n      }\n\n      // send error\n      return c.error(c, error);\n    }\n  }\n\n  // create client certificate message if requested\n  if(c.session.certificateRequest !== null) {\n    record = tls.createRecord(c, {\n      type: tls.ContentType.handshake,\n      data: tls.createCertificate(c)\n    });\n    tls.queue(c, record);\n  }\n\n  // create client key exchange message\n  record = tls.createRecord(c, {\n     type: tls.ContentType.handshake,\n     data: tls.createClientKeyExchange(c)\n  });\n  tls.queue(c, record);\n\n  // expect no messages until the following callback has been called\n  c.expect = SER;\n\n  // create callback to handle client signature (for client-certs)\n  var callback = function(c, signature) {\n    if(c.session.certificateRequest !== null &&\n      c.session.clientCertificate !== null) {\n      // create certificate verify message\n      tls.queue(c, tls.createRecord(c, {\n        type: tls.ContentType.handshake,\n        data: tls.createCertificateVerify(c, signature)\n      }));\n    }\n\n    // create change cipher spec message\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.change_cipher_spec,\n      data: tls.createChangeCipherSpec()\n    }));\n\n    // create pending state\n    c.state.pending = tls.createConnectionState(c);\n\n    // change current write state to pending write state\n    c.state.current.write = c.state.pending.write;\n\n    // create finished message\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.handshake,\n      data: tls.createFinished(c)\n    }));\n\n    // expect a server ChangeCipherSpec message next\n    c.expect = SCC;\n\n    // send records\n    tls.flush(c);\n\n    // continue\n    c.process();\n  };\n\n  // if there is no certificate request or no client certificate, do\n  // callback immediately\n  if(c.session.certificateRequest === null ||\n    c.session.clientCertificate === null) {\n    return callback(c, null);\n  }\n\n  // otherwise get the client signature\n  tls.getClientSignature(c, callback);\n};\n\n/**\n * Called when a ChangeCipherSpec record is received.\n *\n * @param c the connection.\n * @param record the record.\n */\ntls.handleChangeCipherSpec = function(c, record) {\n  if(record.fragment.getByte() !== 0x01) {\n    return c.error(c, {\n      message: 'Invalid ChangeCipherSpec message received.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.illegal_parameter\n      }\n    });\n  }\n\n  // create pending state if:\n  // 1. Resuming session in client mode OR\n  // 2. NOT resuming session in server mode\n  var client = (c.entity === tls.ConnectionEnd.client);\n  if((c.session.resuming && client) || (!c.session.resuming && !client)) {\n    c.state.pending = tls.createConnectionState(c);\n  }\n\n  // change current read state to pending read state\n  c.state.current.read = c.state.pending.read;\n\n  // clear pending state if:\n  // 1. NOT resuming session in client mode OR\n  // 2. resuming a session in server mode\n  if((!c.session.resuming && client) || (c.session.resuming && !client)) {\n    c.state.pending = null;\n  }\n\n  // expect a Finished record next\n  c.expect = client ? SFI : CFI;\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a Finished record is received.\n *\n * When this message will be sent:\n *   A finished message is always sent immediately after a change\n *   cipher spec message to verify that the key exchange and\n *   authentication processes were successful. It is essential that a\n *   change cipher spec message be received between the other\n *   handshake messages and the Finished message.\n *\n * Meaning of this message:\n *   The finished message is the first protected with the just-\n *   negotiated algorithms, keys, and secrets. Recipients of finished\n *   messages must verify that the contents are correct.  Once a side\n *   has sent its Finished message and received and validated the\n *   Finished message from its peer, it may begin to send and receive\n *   application data over the connection.\n *\n * struct {\n *   opaque verify_data[verify_data_length];\n * } Finished;\n *\n * verify_data\n *   PRF(master_secret, finished_label, Hash(handshake_messages))\n *     [0..verify_data_length-1];\n *\n * finished_label\n *   For Finished messages sent by the client, the string\n *   \"client finished\". For Finished messages sent by the server, the\n *   string \"server finished\".\n *\n * verify_data_length depends on the cipher suite. If it is not specified\n * by the cipher suite, then it is 12. Versions of TLS < 1.2 always used\n * 12 bytes.\n *\n * @param c the connection.\n * @param record the record.\n * @param length the length of the handshake message.\n */\ntls.handleFinished = function(c, record, length) {\n  // rewind to get full bytes for message so it can be manually\n  // digested below (special case for Finished messages because they\n  // must be digested *after* handling as opposed to all others)\n  var b = record.fragment;\n  b.read -= 4;\n  var msgBytes = b.bytes();\n  b.read += 4;\n\n  // message contains only verify_data\n  var vd = record.fragment.getBytes();\n\n  // ensure verify data is correct\n  b = forge.util.createBuffer();\n  b.putBuffer(c.session.md5.digest());\n  b.putBuffer(c.session.sha1.digest());\n\n  // set label based on entity type\n  var client = (c.entity === tls.ConnectionEnd.client);\n  var label = client ? 'server finished' : 'client finished';\n\n  // TODO: determine prf function and verify length for TLS 1.2\n  var sp = c.session.sp;\n  var vdl = 12;\n  var prf = prf_TLS1;\n  b = prf(sp.master_secret, label, b.getBytes(), vdl);\n  if(b.getBytes() !== vd) {\n    return c.error(c, {\n      message: 'Invalid verify_data in Finished message.',\n      send: true,\n      alert: {\n        level: tls.Alert.Level.fatal,\n        description: tls.Alert.Description.decrypt_error\n      }\n    });\n  }\n\n  // digest finished message now that it has been handled\n  c.session.md5.update(msgBytes);\n  c.session.sha1.update(msgBytes);\n\n  // resuming session as client or NOT resuming session as server\n  if((c.session.resuming && client) || (!c.session.resuming && !client)) {\n    // create change cipher spec message\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.change_cipher_spec,\n      data: tls.createChangeCipherSpec()\n    }));\n\n    // change current write state to pending write state, clear pending\n    c.state.current.write = c.state.pending.write;\n    c.state.pending = null;\n\n    // create finished message\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.handshake,\n      data: tls.createFinished(c)\n    }));\n  }\n\n  // expect application data next\n  c.expect = client ? SAD : CAD;\n\n  // handshake complete\n  c.handshaking = false;\n  ++c.handshakes;\n\n  // save access to peer certificate\n  c.peerCertificate = client ?\n    c.session.serverCertificate : c.session.clientCertificate;\n\n  // send records\n  tls.flush(c);\n\n  // now connected\n  c.isConnected = true;\n  c.connected(c);\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when an Alert record is received.\n *\n * @param c the connection.\n * @param record the record.\n */\ntls.handleAlert = function(c, record) {\n  // read alert\n  var b = record.fragment;\n  var alert = {\n    level: b.getByte(),\n    description: b.getByte()\n  };\n\n  // TODO: consider using a table?\n  // get appropriate message\n  var msg;\n  switch(alert.description) {\n  case tls.Alert.Description.close_notify:\n    msg = 'Connection closed.';\n    break;\n  case tls.Alert.Description.unexpected_message:\n    msg = 'Unexpected message.';\n    break;\n  case tls.Alert.Description.bad_record_mac:\n    msg = 'Bad record MAC.';\n    break;\n  case tls.Alert.Description.decryption_failed:\n    msg = 'Decryption failed.';\n    break;\n  case tls.Alert.Description.record_overflow:\n    msg = 'Record overflow.';\n    break;\n  case tls.Alert.Description.decompression_failure:\n    msg = 'Decompression failed.';\n    break;\n  case tls.Alert.Description.handshake_failure:\n    msg = 'Handshake failure.';\n    break;\n  case tls.Alert.Description.bad_certificate:\n    msg = 'Bad certificate.';\n    break;\n  case tls.Alert.Description.unsupported_certificate:\n    msg = 'Unsupported certificate.';\n    break;\n  case tls.Alert.Description.certificate_revoked:\n    msg = 'Certificate revoked.';\n    break;\n  case tls.Alert.Description.certificate_expired:\n    msg = 'Certificate expired.';\n    break;\n  case tls.Alert.Description.certificate_unknown:\n    msg = 'Certificate unknown.';\n    break;\n  case tls.Alert.Description.illegal_parameter:\n    msg = 'Illegal parameter.';\n    break;\n  case tls.Alert.Description.unknown_ca:\n    msg = 'Unknown certificate authority.';\n    break;\n  case tls.Alert.Description.access_denied:\n    msg = 'Access denied.';\n    break;\n  case tls.Alert.Description.decode_error:\n    msg = 'Decode error.';\n    break;\n  case tls.Alert.Description.decrypt_error:\n    msg = 'Decrypt error.';\n    break;\n  case tls.Alert.Description.export_restriction:\n    msg = 'Export restriction.';\n    break;\n  case tls.Alert.Description.protocol_version:\n    msg = 'Unsupported protocol version.';\n    break;\n  case tls.Alert.Description.insufficient_security:\n    msg = 'Insufficient security.';\n    break;\n  case tls.Alert.Description.internal_error:\n    msg = 'Internal error.';\n    break;\n  case tls.Alert.Description.user_canceled:\n    msg = 'User canceled.';\n    break;\n  case tls.Alert.Description.no_renegotiation:\n    msg = 'Renegotiation not supported.';\n    break;\n  default:\n    msg = 'Unknown error.';\n    break;\n  }\n\n  // close connection on close_notify, not an error\n  if(alert.description === tls.Alert.Description.close_notify) {\n    return c.close();\n  }\n\n  // call error handler\n  c.error(c, {\n    message: msg,\n    send: false,\n    // origin is the opposite end\n    origin: (c.entity === tls.ConnectionEnd.client) ? 'server' : 'client',\n    alert: alert\n  });\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a Handshake record is received.\n *\n * @param c the connection.\n * @param record the record.\n */\ntls.handleHandshake = function(c, record) {\n  // get the handshake type and message length\n  var b = record.fragment;\n  var type = b.getByte();\n  var length = b.getInt24();\n\n  // see if the record fragment doesn't yet contain the full message\n  if(length > b.length()) {\n    // cache the record, clear its fragment, and reset the buffer read\n    // pointer before the type and length were read\n    c.fragmented = record;\n    record.fragment = forge.util.createBuffer();\n    b.read -= 4;\n\n    // continue\n    return c.process();\n  }\n\n  // full message now available, clear cache, reset read pointer to\n  // before type and length\n  c.fragmented = null;\n  b.read -= 4;\n\n  // save the handshake bytes for digestion after handler is found\n  // (include type and length of handshake msg)\n  var bytes = b.bytes(length + 4);\n\n  // restore read pointer\n  b.read += 4;\n\n  // handle expected message\n  if(type in hsTable[c.entity][c.expect]) {\n    // initialize server session\n    if(c.entity === tls.ConnectionEnd.server && !c.open && !c.fail) {\n      c.handshaking = true;\n      c.session = {\n        version: null,\n        extensions: {\n          server_name: {\n            serverNameList: []\n          }\n        },\n        cipherSuite: null,\n        compressionMethod: null,\n        serverCertificate: null,\n        clientCertificate: null,\n        md5: forge.md.md5.create(),\n        sha1: forge.md.sha1.create()\n      };\n    }\n\n    /* Update handshake messages digest. Finished and CertificateVerify\n      messages are not digested here. They can't be digested as part of\n      the verify_data that they contain. These messages are manually\n      digested in their handlers. HelloRequest messages are simply never\n      included in the handshake message digest according to spec. */\n    if(type !== tls.HandshakeType.hello_request &&\n      type !== tls.HandshakeType.certificate_verify &&\n      type !== tls.HandshakeType.finished) {\n      c.session.md5.update(bytes);\n      c.session.sha1.update(bytes);\n    }\n\n    // handle specific handshake type record\n    hsTable[c.entity][c.expect][type](c, record, length);\n  } else {\n    // unexpected record\n    tls.handleUnexpected(c, record);\n  }\n};\n\n/**\n * Called when an ApplicationData record is received.\n *\n * @param c the connection.\n * @param record the record.\n */\ntls.handleApplicationData = function(c, record) {\n  // buffer data, notify that its ready\n  c.data.putBuffer(record.fragment);\n  c.dataReady(c);\n\n  // continue\n  c.process();\n};\n\n/**\n * Called when a Heartbeat record is received.\n *\n * @param c the connection.\n * @param record the record.\n */\ntls.handleHeartbeat = function(c, record) {\n  // get the heartbeat type and payload\n  var b = record.fragment;\n  var type = b.getByte();\n  var length = b.getInt16();\n  var payload = b.getBytes(length);\n\n  if(type === tls.HeartbeatMessageType.heartbeat_request) {\n    // discard request during handshake or if length is too large\n    if(c.handshaking || length > payload.length) {\n      // continue\n      return c.process();\n    }\n    // retransmit payload\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.heartbeat,\n      data: tls.createHeartbeat(\n        tls.HeartbeatMessageType.heartbeat_response, payload)\n    }));\n    tls.flush(c);\n  } else if(type === tls.HeartbeatMessageType.heartbeat_response) {\n    // check payload against expected payload, discard heartbeat if no match\n    if(payload !== c.expectedHeartbeatPayload) {\n      // continue\n      return c.process();\n    }\n\n    // notify that a valid heartbeat was received\n    if(c.heartbeatReceived) {\n      c.heartbeatReceived(c, forge.util.createBuffer(payload));\n    }\n  }\n\n  // continue\n  c.process();\n};\n\n/**\n * The transistional state tables for receiving TLS records. It maps the\n * current TLS engine state and a received record to a function to handle the\n * record and update the state.\n *\n * For instance, if the current state is SHE, then the TLS engine is expecting\n * a ServerHello record. Once a record is received, the handler function is\n * looked up using the state SHE and the record's content type.\n *\n * The resulting function will either be an error handler or a record handler.\n * The function will take whatever action is appropriate and update the state\n * for the next record.\n *\n * The states are all based on possible server record types. Note that the\n * client will never specifically expect to receive a HelloRequest or an alert\n * from the server so there is no state that reflects this. These messages may\n * occur at any time.\n *\n * There are two tables for mapping states because there is a second tier of\n * types for handshake messages. Once a record with a content type of handshake\n * is received, the handshake record handler will look up the handshake type in\n * the secondary map to get its appropriate handler.\n *\n * Valid message orders are as follows:\n *\n * =======================FULL HANDSHAKE======================\n * Client                                               Server\n *\n * ClientHello                  -------->\n *                                                 ServerHello\n *                                                Certificate*\n *                                          ServerKeyExchange*\n *                                         CertificateRequest*\n *                              <--------      ServerHelloDone\n * Certificate*\n * ClientKeyExchange\n * CertificateVerify*\n * [ChangeCipherSpec]\n * Finished                     -------->\n *                                          [ChangeCipherSpec]\n *                              <--------             Finished\n * Application Data             <------->     Application Data\n *\n * =====================SESSION RESUMPTION=====================\n * Client                                                Server\n *\n * ClientHello                   -------->\n *                                                  ServerHello\n *                                           [ChangeCipherSpec]\n *                               <--------             Finished\n * [ChangeCipherSpec]\n * Finished                      -------->\n * Application Data              <------->     Application Data\n */\n// client expect states (indicate which records are expected to be received)\nvar SHE = 0; // rcv server hello\nvar SCE = 1; // rcv server certificate\nvar SKE = 2; // rcv server key exchange\nvar SCR = 3; // rcv certificate request\nvar SHD = 4; // rcv server hello done\nvar SCC = 5; // rcv change cipher spec\nvar SFI = 6; // rcv finished\nvar SAD = 7; // rcv application data\nvar SER = 8; // not expecting any messages at this point\n\n// server expect states\nvar CHE = 0; // rcv client hello\nvar CCE = 1; // rcv client certificate\nvar CKE = 2; // rcv client key exchange\nvar CCV = 3; // rcv certificate verify\nvar CCC = 4; // rcv change cipher spec\nvar CFI = 5; // rcv finished\nvar CAD = 6; // rcv application data\nvar CER = 7; // not expecting any messages at this point\n\n// map client current expect state and content type to function\nvar __ = tls.handleUnexpected;\nvar R0 = tls.handleChangeCipherSpec;\nvar R1 = tls.handleAlert;\nvar R2 = tls.handleHandshake;\nvar R3 = tls.handleApplicationData;\nvar R4 = tls.handleHeartbeat;\nvar ctTable = [];\nctTable[tls.ConnectionEnd.client] = [\n//      CC,AL,HS,AD,HB\n/*SHE*/[__,R1,R2,__,R4],\n/*SCE*/[__,R1,R2,__,R4],\n/*SKE*/[__,R1,R2,__,R4],\n/*SCR*/[__,R1,R2,__,R4],\n/*SHD*/[__,R1,R2,__,R4],\n/*SCC*/[R0,R1,__,__,R4],\n/*SFI*/[__,R1,R2,__,R4],\n/*SAD*/[__,R1,R2,R3,R4],\n/*SER*/[__,R1,R2,__,R4]\n];\n\n// map server current expect state and content type to function\nctTable[tls.ConnectionEnd.server] = [\n//      CC,AL,HS,AD\n/*CHE*/[__,R1,R2,__,R4],\n/*CCE*/[__,R1,R2,__,R4],\n/*CKE*/[__,R1,R2,__,R4],\n/*CCV*/[__,R1,R2,__,R4],\n/*CCC*/[R0,R1,__,__,R4],\n/*CFI*/[__,R1,R2,__,R4],\n/*CAD*/[__,R1,R2,R3,R4],\n/*CER*/[__,R1,R2,__,R4]\n];\n\n// map client current expect state and handshake type to function\nvar H0 = tls.handleHelloRequest;\nvar H1 = tls.handleServerHello;\nvar H2 = tls.handleCertificate;\nvar H3 = tls.handleServerKeyExchange;\nvar H4 = tls.handleCertificateRequest;\nvar H5 = tls.handleServerHelloDone;\nvar H6 = tls.handleFinished;\nvar hsTable = [];\nhsTable[tls.ConnectionEnd.client] = [\n//      HR,01,SH,03,04,05,06,07,08,09,10,SC,SK,CR,HD,15,CK,17,18,19,FI\n/*SHE*/[__,__,H1,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],\n/*SCE*/[H0,__,__,__,__,__,__,__,__,__,__,H2,H3,H4,H5,__,__,__,__,__,__],\n/*SKE*/[H0,__,__,__,__,__,__,__,__,__,__,__,H3,H4,H5,__,__,__,__,__,__],\n/*SCR*/[H0,__,__,__,__,__,__,__,__,__,__,__,__,H4,H5,__,__,__,__,__,__],\n/*SHD*/[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,H5,__,__,__,__,__,__],\n/*SCC*/[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],\n/*SFI*/[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H6],\n/*SAD*/[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],\n/*SER*/[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__]\n];\n\n// map server current expect state and handshake type to function\n// Note: CAD[CH] does not map to FB because renegotation is prohibited\nvar H7 = tls.handleClientHello;\nvar H8 = tls.handleClientKeyExchange;\nvar H9 = tls.handleCertificateVerify;\nhsTable[tls.ConnectionEnd.server] = [\n//      01,CH,02,03,04,05,06,07,08,09,10,CC,12,13,14,CV,CK,17,18,19,FI\n/*CHE*/[__,H7,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],\n/*CCE*/[__,__,__,__,__,__,__,__,__,__,__,H2,__,__,__,__,__,__,__,__,__],\n/*CKE*/[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H8,__,__,__,__],\n/*CCV*/[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H9,__,__,__,__,__],\n/*CCC*/[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],\n/*CFI*/[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H6],\n/*CAD*/[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],\n/*CER*/[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__]\n];\n\n/**\n * Generates the master_secret and keys using the given security parameters.\n *\n * The security parameters for a TLS connection state are defined as such:\n *\n * struct {\n *   ConnectionEnd          entity;\n *   PRFAlgorithm           prf_algorithm;\n *   BulkCipherAlgorithm    bulk_cipher_algorithm;\n *   CipherType             cipher_type;\n *   uint8                  enc_key_length;\n *   uint8                  block_length;\n *   uint8                  fixed_iv_length;\n *   uint8                  record_iv_length;\n *   MACAlgorithm           mac_algorithm;\n *   uint8                  mac_length;\n *   uint8                  mac_key_length;\n *   CompressionMethod      compression_algorithm;\n *   opaque                 master_secret[48];\n *   opaque                 client_random[32];\n *   opaque                 server_random[32];\n * } SecurityParameters;\n *\n * Note that this definition is from TLS 1.2. In TLS 1.0 some of these\n * parameters are ignored because, for instance, the PRFAlgorithm is a\n * builtin-fixed algorithm combining iterations of MD5 and SHA-1 in TLS 1.0.\n *\n * The Record Protocol requires an algorithm to generate keys required by the\n * current connection state.\n *\n * The master secret is expanded into a sequence of secure bytes, which is then\n * split to a client write MAC key, a server write MAC key, a client write\n * encryption key, and a server write encryption key. In TLS 1.0 a client write\n * IV and server write IV are also generated. Each of these is generated from\n * the byte sequence in that order. Unused values are empty. In TLS 1.2, some\n * AEAD ciphers may additionally require a client write IV and a server write\n * IV (see Section 6.2.3.3).\n *\n * When keys, MAC keys, and IVs are generated, the master secret is used as an\n * entropy source.\n *\n * To generate the key material, compute:\n *\n * master_secret = PRF(pre_master_secret, \"master secret\",\n *                     ClientHello.random + ServerHello.random)\n *\n * key_block = PRF(SecurityParameters.master_secret,\n *                 \"key expansion\",\n *                 SecurityParameters.server_random +\n *                 SecurityParameters.client_random);\n *\n * until enough output has been generated. Then, the key_block is\n * partitioned as follows:\n *\n * client_write_MAC_key[SecurityParameters.mac_key_length]\n * server_write_MAC_key[SecurityParameters.mac_key_length]\n * client_write_key[SecurityParameters.enc_key_length]\n * server_write_key[SecurityParameters.enc_key_length]\n * client_write_IV[SecurityParameters.fixed_iv_length]\n * server_write_IV[SecurityParameters.fixed_iv_length]\n *\n * In TLS 1.2, the client_write_IV and server_write_IV are only generated for\n * implicit nonce techniques as described in Section 3.2.1 of [AEAD]. This\n * implementation uses TLS 1.0 so IVs are generated.\n *\n * Implementation note: The currently defined cipher suite which requires the\n * most material is AES_256_CBC_SHA256. It requires 2 x 32 byte keys and 2 x 32\n * byte MAC keys, for a total 128 bytes of key material. In TLS 1.0 it also\n * requires 2 x 16 byte IVs, so it actually takes 160 bytes of key material.\n *\n * @param c the connection.\n * @param sp the security parameters to use.\n *\n * @return the security keys.\n */\ntls.generateKeys = function(c, sp) {\n  // TLS_RSA_WITH_AES_128_CBC_SHA (required to be compliant with TLS 1.2) &\n  // TLS_RSA_WITH_AES_256_CBC_SHA are the only cipher suites implemented\n  // at present\n\n  // TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA is required to be compliant with\n  // TLS 1.0 but we don't care right now because AES is better and we have\n  // an implementation for it\n\n  // TODO: TLS 1.2 implementation\n  /*\n  // determine the PRF\n  var prf;\n  switch(sp.prf_algorithm) {\n  case tls.PRFAlgorithm.tls_prf_sha256:\n    prf = prf_sha256;\n    break;\n  default:\n    // should never happen\n    throw new Error('Invalid PRF');\n  }\n  */\n\n  // TLS 1.0/1.1 implementation\n  var prf = prf_TLS1;\n\n  // concatenate server and client random\n  var random = sp.client_random + sp.server_random;\n\n  // only create master secret if session is new\n  if(!c.session.resuming) {\n    // create master secret, clean up pre-master secret\n    sp.master_secret = prf(\n      sp.pre_master_secret, 'master secret', random, 48).bytes();\n    sp.pre_master_secret = null;\n  }\n\n  // generate the amount of key material needed\n  random = sp.server_random + sp.client_random;\n  var length = 2 * sp.mac_key_length + 2 * sp.enc_key_length;\n\n  // include IV for TLS/1.0\n  var tls10 = (c.version.major === tls.Versions.TLS_1_0.major &&\n    c.version.minor === tls.Versions.TLS_1_0.minor);\n  if(tls10) {\n    length += 2 * sp.fixed_iv_length;\n  }\n  var km = prf(sp.master_secret, 'key expansion', random, length);\n\n  // split the key material into the MAC and encryption keys\n  var rval = {\n    client_write_MAC_key: km.getBytes(sp.mac_key_length),\n    server_write_MAC_key: km.getBytes(sp.mac_key_length),\n    client_write_key: km.getBytes(sp.enc_key_length),\n    server_write_key: km.getBytes(sp.enc_key_length)\n  };\n\n  // include TLS 1.0 IVs\n  if(tls10) {\n    rval.client_write_IV = km.getBytes(sp.fixed_iv_length);\n    rval.server_write_IV = km.getBytes(sp.fixed_iv_length);\n  }\n\n  return rval;\n};\n\n/**\n * Creates a new initialized TLS connection state. A connection state has\n * a read mode and a write mode.\n *\n * compression state:\n *   The current state of the compression algorithm.\n *\n * cipher state:\n *   The current state of the encryption algorithm. This will consist of the\n *   scheduled key for that connection. For stream ciphers, this will also\n *   contain whatever state information is necessary to allow the stream to\n *   continue to encrypt or decrypt data.\n *\n * MAC key:\n *   The MAC key for the connection.\n *\n * sequence number:\n *   Each connection state contains a sequence number, which is maintained\n *   separately for read and write states. The sequence number MUST be set to\n *   zero whenever a connection state is made the active state. Sequence\n *   numbers are of type uint64 and may not exceed 2^64-1. Sequence numbers do\n *   not wrap. If a TLS implementation would need to wrap a sequence number,\n *   it must renegotiate instead. A sequence number is incremented after each\n *   record: specifically, the first record transmitted under a particular\n *   connection state MUST use sequence number 0.\n *\n * @param c the connection.\n *\n * @return the new initialized TLS connection state.\n */\ntls.createConnectionState = function(c) {\n  var client = (c.entity === tls.ConnectionEnd.client);\n\n  var createMode = function() {\n    var mode = {\n      // two 32-bit numbers, first is most significant\n      sequenceNumber: [0, 0],\n      macKey: null,\n      macLength: 0,\n      macFunction: null,\n      cipherState: null,\n      cipherFunction: function(record) {return true;},\n      compressionState: null,\n      compressFunction: function(record) {return true;},\n      updateSequenceNumber: function() {\n        if(mode.sequenceNumber[1] === 0xFFFFFFFF) {\n          mode.sequenceNumber[1] = 0;\n          ++mode.sequenceNumber[0];\n        } else {\n          ++mode.sequenceNumber[1];\n        }\n      }\n    };\n    return mode;\n  };\n  var state = {\n    read: createMode(),\n    write: createMode()\n  };\n\n  // update function in read mode will decrypt then decompress a record\n  state.read.update = function(c, record) {\n    if(!state.read.cipherFunction(record, state.read)) {\n      c.error(c, {\n        message: 'Could not decrypt record or bad MAC.',\n        send: true,\n        alert: {\n          level: tls.Alert.Level.fatal,\n          // doesn't matter if decryption failed or MAC was\n          // invalid, return the same error so as not to reveal\n          // which one occurred\n          description: tls.Alert.Description.bad_record_mac\n        }\n      });\n    } else if(!state.read.compressFunction(c, record, state.read)) {\n      c.error(c, {\n        message: 'Could not decompress record.',\n        send: true,\n        alert: {\n          level: tls.Alert.Level.fatal,\n          description: tls.Alert.Description.decompression_failure\n        }\n      });\n    }\n    return !c.fail;\n  };\n\n  // update function in write mode will compress then encrypt a record\n  state.write.update = function(c, record) {\n    if(!state.write.compressFunction(c, record, state.write)) {\n      // error, but do not send alert since it would require\n      // compression as well\n      c.error(c, {\n        message: 'Could not compress record.',\n        send: false,\n        alert: {\n          level: tls.Alert.Level.fatal,\n          description: tls.Alert.Description.internal_error\n        }\n      });\n    } else if(!state.write.cipherFunction(record, state.write)) {\n      // error, but do not send alert since it would require\n      // encryption as well\n      c.error(c, {\n        message: 'Could not encrypt record.',\n        send: false,\n        alert: {\n          level: tls.Alert.Level.fatal,\n          description: tls.Alert.Description.internal_error\n        }\n      });\n    }\n    return !c.fail;\n  };\n\n  // handle security parameters\n  if(c.session) {\n    var sp = c.session.sp;\n    c.session.cipherSuite.initSecurityParameters(sp);\n\n    // generate keys\n    sp.keys = tls.generateKeys(c, sp);\n    state.read.macKey = client ?\n      sp.keys.server_write_MAC_key : sp.keys.client_write_MAC_key;\n    state.write.macKey = client ?\n      sp.keys.client_write_MAC_key : sp.keys.server_write_MAC_key;\n\n    // cipher suite setup\n    c.session.cipherSuite.initConnectionState(state, c, sp);\n\n    // compression setup\n    switch(sp.compression_algorithm) {\n    case tls.CompressionMethod.none:\n      break;\n    case tls.CompressionMethod.deflate:\n      state.read.compressFunction = inflate;\n      state.write.compressFunction = deflate;\n      break;\n    default:\n      throw new Error('Unsupported compression algorithm.');\n    }\n  }\n\n  return state;\n};\n\n/**\n * Creates a Random structure.\n *\n * struct {\n *   uint32 gmt_unix_time;\n *   opaque random_bytes[28];\n * } Random;\n *\n * gmt_unix_time:\n *   The current time and date in standard UNIX 32-bit format (seconds since\n *   the midnight starting Jan 1, 1970, UTC, ignoring leap seconds) according\n *   to the sender's internal clock. Clocks are not required to be set\n *   correctly by the basic TLS protocol; higher-level or application\n *   protocols may define additional requirements. Note that, for historical\n *   reasons, the data element is named using GMT, the predecessor of the\n *   current worldwide time base, UTC.\n * random_bytes:\n *   28 bytes generated by a secure random number generator.\n *\n * @return the Random structure as a byte array.\n */\ntls.createRandom = function() {\n  // get UTC milliseconds\n  var d = new Date();\n  var utc = +d + d.getTimezoneOffset() * 60000;\n  var rval = forge.util.createBuffer();\n  rval.putInt32(utc);\n  rval.putBytes(forge.random.getBytes(28));\n  return rval;\n};\n\n/**\n * Creates a TLS record with the given type and data.\n *\n * @param c the connection.\n * @param options:\n *   type: the record type.\n *   data: the plain text data in a byte buffer.\n *\n * @return the created record.\n */\ntls.createRecord = function(c, options) {\n  if(!options.data) {\n    return null;\n  }\n  var record = {\n    type: options.type,\n    version: {\n      major: c.version.major,\n      minor: c.version.minor\n    },\n    length: options.data.length(),\n    fragment: options.data\n  };\n  return record;\n};\n\n/**\n * Creates a TLS alert record.\n *\n * @param c the connection.\n * @param alert:\n *   level: the TLS alert level.\n *   description: the TLS alert description.\n *\n * @return the created alert record.\n */\ntls.createAlert = function(c, alert) {\n  var b = forge.util.createBuffer();\n  b.putByte(alert.level);\n  b.putByte(alert.description);\n  return tls.createRecord(c, {\n    type: tls.ContentType.alert,\n    data: b\n  });\n};\n\n/* The structure of a TLS handshake message.\n *\n * struct {\n *    HandshakeType msg_type;    // handshake type\n *    uint24 length;             // bytes in message\n *    select(HandshakeType) {\n *       case hello_request:       HelloRequest;\n *       case client_hello:        ClientHello;\n *       case server_hello:        ServerHello;\n *       case certificate:         Certificate;\n *       case server_key_exchange: ServerKeyExchange;\n *       case certificate_request: CertificateRequest;\n *       case server_hello_done:   ServerHelloDone;\n *       case certificate_verify:  CertificateVerify;\n *       case client_key_exchange: ClientKeyExchange;\n *       case finished:            Finished;\n *    } body;\n * } Handshake;\n */\n\n/**\n * Creates a ClientHello message.\n *\n * opaque SessionID<0..32>;\n * enum { null(0), deflate(1), (255) } CompressionMethod;\n * uint8 CipherSuite[2];\n *\n * struct {\n *   ProtocolVersion client_version;\n *   Random random;\n *   SessionID session_id;\n *   CipherSuite cipher_suites<2..2^16-2>;\n *   CompressionMethod compression_methods<1..2^8-1>;\n *   select(extensions_present) {\n *     case false:\n *       struct {};\n *     case true:\n *       Extension extensions<0..2^16-1>;\n *   };\n * } ClientHello;\n *\n * The extension format for extended client hellos and server hellos is:\n *\n * struct {\n *   ExtensionType extension_type;\n *   opaque extension_data<0..2^16-1>;\n * } Extension;\n *\n * Here:\n *\n * - \"extension_type\" identifies the particular extension type.\n * - \"extension_data\" contains information specific to the particular\n * extension type.\n *\n * The extension types defined in this document are:\n *\n * enum {\n *   server_name(0), max_fragment_length(1),\n *   client_certificate_url(2), trusted_ca_keys(3),\n *   truncated_hmac(4), status_request(5), (65535)\n * } ExtensionType;\n *\n * @param c the connection.\n *\n * @return the ClientHello byte buffer.\n */\ntls.createClientHello = function(c) {\n  // save hello version\n  c.session.clientHelloVersion = {\n    major: c.version.major,\n    minor: c.version.minor\n  };\n\n  // create supported cipher suites\n  var cipherSuites = forge.util.createBuffer();\n  for(var i = 0; i < c.cipherSuites.length; ++i) {\n    var cs = c.cipherSuites[i];\n    cipherSuites.putByte(cs.id[0]);\n    cipherSuites.putByte(cs.id[1]);\n  }\n  var cSuites = cipherSuites.length();\n\n  // create supported compression methods, null always supported, but\n  // also support deflate if connection has inflate and deflate methods\n  var compressionMethods = forge.util.createBuffer();\n  compressionMethods.putByte(tls.CompressionMethod.none);\n  // FIXME: deflate support disabled until issues with raw deflate data\n  // without zlib headers are resolved\n  /*\n  if(c.inflate !== null && c.deflate !== null) {\n    compressionMethods.putByte(tls.CompressionMethod.deflate);\n  }\n  */\n  var cMethods = compressionMethods.length();\n\n  // create TLS SNI (server name indication) extension if virtual host\n  // has been specified, see RFC 3546\n  var extensions = forge.util.createBuffer();\n  if(c.virtualHost) {\n    // create extension struct\n    var ext = forge.util.createBuffer();\n    ext.putByte(0x00); // type server_name (ExtensionType is 2 bytes)\n    ext.putByte(0x00);\n\n    /* In order to provide the server name, clients MAY include an\n     * extension of type \"server_name\" in the (extended) client hello.\n     * The \"extension_data\" field of this extension SHALL contain\n     * \"ServerNameList\" where:\n     *\n     * struct {\n     *   NameType name_type;\n     *   select(name_type) {\n     *     case host_name: HostName;\n     *   } name;\n     * } ServerName;\n     *\n     * enum {\n     *   host_name(0), (255)\n     * } NameType;\n     *\n     * opaque HostName<1..2^16-1>;\n     *\n     * struct {\n     *   ServerName server_name_list<1..2^16-1>\n     * } ServerNameList;\n     */\n    var serverName = forge.util.createBuffer();\n    serverName.putByte(0x00); // type host_name\n    writeVector(serverName, 2, forge.util.createBuffer(c.virtualHost));\n\n    // ServerNameList is in extension_data\n    var snList = forge.util.createBuffer();\n    writeVector(snList, 2, serverName);\n    writeVector(ext, 2, snList);\n    extensions.putBuffer(ext);\n  }\n  var extLength = extensions.length();\n  if(extLength > 0) {\n    // add extension vector length\n    extLength += 2;\n  }\n\n  // determine length of the handshake message\n  // cipher suites and compression methods size will need to be\n  // updated if more get added to the list\n  var sessionId = c.session.id;\n  var length =\n    sessionId.length + 1 + // session ID vector\n    2 +                    // version (major + minor)\n    4 + 28 +               // random time and random bytes\n    2 + cSuites +          // cipher suites vector\n    1 + cMethods +         // compression methods vector\n    extLength;             // extensions vector\n\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  rval.putByte(tls.HandshakeType.client_hello);\n  rval.putInt24(length);                     // handshake length\n  rval.putByte(c.version.major);             // major version\n  rval.putByte(c.version.minor);             // minor version\n  rval.putBytes(c.session.sp.client_random); // random time + bytes\n  writeVector(rval, 1, forge.util.createBuffer(sessionId));\n  writeVector(rval, 2, cipherSuites);\n  writeVector(rval, 1, compressionMethods);\n  if(extLength > 0) {\n    writeVector(rval, 2, extensions);\n  }\n  return rval;\n};\n\n/**\n * Creates a ServerHello message.\n *\n * @param c the connection.\n *\n * @return the ServerHello byte buffer.\n */\ntls.createServerHello = function(c) {\n  // determine length of the handshake message\n  var sessionId = c.session.id;\n  var length =\n    sessionId.length + 1 + // session ID vector\n    2 +                    // version (major + minor)\n    4 + 28 +               // random time and random bytes\n    2 +                    // chosen cipher suite\n    1;                     // chosen compression method\n\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  rval.putByte(tls.HandshakeType.server_hello);\n  rval.putInt24(length);                     // handshake length\n  rval.putByte(c.version.major);             // major version\n  rval.putByte(c.version.minor);             // minor version\n  rval.putBytes(c.session.sp.server_random); // random time + bytes\n  writeVector(rval, 1, forge.util.createBuffer(sessionId));\n  rval.putByte(c.session.cipherSuite.id[0]);\n  rval.putByte(c.session.cipherSuite.id[1]);\n  rval.putByte(c.session.compressionMethod);\n  return rval;\n};\n\n/**\n * Creates a Certificate message.\n *\n * When this message will be sent:\n *   This is the first message the client can send after receiving a server\n *   hello done message and the first message the server can send after\n *   sending a ServerHello. This client message is only sent if the server\n *   requests a certificate. If no suitable certificate is available, the\n *   client should send a certificate message containing no certificates. If\n *   client authentication is required by the server for the handshake to\n *   continue, it may respond with a fatal handshake failure alert.\n *\n * opaque ASN.1Cert<1..2^24-1>;\n *\n * struct {\n *   ASN.1Cert certificate_list<0..2^24-1>;\n * } Certificate;\n *\n * @param c the connection.\n *\n * @return the Certificate byte buffer.\n */\ntls.createCertificate = function(c) {\n  // TODO: check certificate request to ensure types are supported\n\n  // get a certificate (a certificate as a PEM string)\n  var client = (c.entity === tls.ConnectionEnd.client);\n  var cert = null;\n  if(c.getCertificate) {\n    var hint;\n    if(client) {\n      hint = c.session.certificateRequest;\n    } else {\n      hint = c.session.extensions.server_name.serverNameList;\n    }\n    cert = c.getCertificate(c, hint);\n  }\n\n  // buffer to hold certificate list\n  var certList = forge.util.createBuffer();\n  if(cert !== null) {\n    try {\n      // normalize cert to a chain of certificates\n      if(!forge.util.isArray(cert)) {\n        cert = [cert];\n      }\n      var asn1 = null;\n      for(var i = 0; i < cert.length; ++i) {\n        var msg = forge.pem.decode(cert[i])[0];\n        if(msg.type !== 'CERTIFICATE' &&\n          msg.type !== 'X509 CERTIFICATE' &&\n          msg.type !== 'TRUSTED CERTIFICATE') {\n          var error = new Error('Could not convert certificate from PEM; PEM ' +\n            'header type is not \"CERTIFICATE\", \"X509 CERTIFICATE\", or ' +\n            '\"TRUSTED CERTIFICATE\".');\n          error.headerType = msg.type;\n          throw error;\n        }\n        if(msg.procType && msg.procType.type === 'ENCRYPTED') {\n          throw new Error('Could not convert certificate from PEM; PEM is encrypted.');\n        }\n\n        var der = forge.util.createBuffer(msg.body);\n        if(asn1 === null) {\n          asn1 = forge.asn1.fromDer(der.bytes(), false);\n        }\n\n        // certificate entry is itself a vector with 3 length bytes\n        var certBuffer = forge.util.createBuffer();\n        writeVector(certBuffer, 3, der);\n\n        // add cert vector to cert list vector\n        certList.putBuffer(certBuffer);\n      }\n\n      // save certificate\n      cert = forge.pki.certificateFromAsn1(asn1);\n      if(client) {\n        c.session.clientCertificate = cert;\n      } else {\n        c.session.serverCertificate = cert;\n      }\n    } catch(ex) {\n      return c.error(c, {\n        message: 'Could not send certificate list.',\n        cause: ex,\n        send: true,\n        alert: {\n          level: tls.Alert.Level.fatal,\n          description: tls.Alert.Description.bad_certificate\n        }\n      });\n    }\n  }\n\n  // determine length of the handshake message\n  var length = 3 + certList.length(); // cert list vector\n\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  rval.putByte(tls.HandshakeType.certificate);\n  rval.putInt24(length);\n  writeVector(rval, 3, certList);\n  return rval;\n};\n\n/**\n * Creates a ClientKeyExchange message.\n *\n * When this message will be sent:\n *   This message is always sent by the client. It will immediately follow the\n *   client certificate message, if it is sent. Otherwise it will be the first\n *   message sent by the client after it receives the server hello done\n *   message.\n *\n * Meaning of this message:\n *   With this message, the premaster secret is set, either though direct\n *   transmission of the RSA-encrypted secret, or by the transmission of\n *   Diffie-Hellman parameters which will allow each side to agree upon the\n *   same premaster secret. When the key exchange method is DH_RSA or DH_DSS,\n *   client certification has been requested, and the client was able to\n *   respond with a certificate which contained a Diffie-Hellman public key\n *   whose parameters (group and generator) matched those specified by the\n *   server in its certificate, this message will not contain any data.\n *\n * Meaning of this message:\n *   If RSA is being used for key agreement and authentication, the client\n *   generates a 48-byte premaster secret, encrypts it using the public key\n *   from the server's certificate or the temporary RSA key provided in a\n *   server key exchange message, and sends the result in an encrypted\n *   premaster secret message. This structure is a variant of the client\n *   key exchange message, not a message in itself.\n *\n * struct {\n *   select(KeyExchangeAlgorithm) {\n *     case rsa: EncryptedPreMasterSecret;\n *     case diffie_hellman: ClientDiffieHellmanPublic;\n *   } exchange_keys;\n * } ClientKeyExchange;\n *\n * struct {\n *   ProtocolVersion client_version;\n *   opaque random[46];\n * } PreMasterSecret;\n *\n * struct {\n *   public-key-encrypted PreMasterSecret pre_master_secret;\n * } EncryptedPreMasterSecret;\n *\n * A public-key-encrypted element is encoded as a vector <0..2^16-1>.\n *\n * @param c the connection.\n *\n * @return the ClientKeyExchange byte buffer.\n */\ntls.createClientKeyExchange = function(c) {\n  // create buffer to encrypt\n  var b = forge.util.createBuffer();\n\n  // add highest client-supported protocol to help server avoid version\n  // rollback attacks\n  b.putByte(c.session.clientHelloVersion.major);\n  b.putByte(c.session.clientHelloVersion.minor);\n\n  // generate and add 46 random bytes\n  b.putBytes(forge.random.getBytes(46));\n\n  // save pre-master secret\n  var sp = c.session.sp;\n  sp.pre_master_secret = b.getBytes();\n\n  // RSA-encrypt the pre-master secret\n  var key = c.session.serverCertificate.publicKey;\n  b = key.encrypt(sp.pre_master_secret);\n\n  /* Note: The encrypted pre-master secret will be stored in a\n    public-key-encrypted opaque vector that has the length prefixed using\n    2 bytes, so include those 2 bytes in the handshake message length. This\n    is done as a minor optimization instead of calling writeVector(). */\n\n  // determine length of the handshake message\n  var length = b.length + 2;\n\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  rval.putByte(tls.HandshakeType.client_key_exchange);\n  rval.putInt24(length);\n  // add vector length bytes\n  rval.putInt16(b.length);\n  rval.putBytes(b);\n  return rval;\n};\n\n/**\n * Creates a ServerKeyExchange message.\n *\n * @param c the connection.\n *\n * @return the ServerKeyExchange byte buffer.\n */\ntls.createServerKeyExchange = function(c) {\n  // this implementation only supports RSA, no Diffie-Hellman support,\n  // so this record is empty\n\n  // determine length of the handshake message\n  var length = 0;\n\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  if(length > 0) {\n    rval.putByte(tls.HandshakeType.server_key_exchange);\n    rval.putInt24(length);\n  }\n  return rval;\n};\n\n/**\n * Gets the signed data used to verify a client-side certificate. See\n * tls.createCertificateVerify() for details.\n *\n * @param c the connection.\n * @param callback the callback to call once the signed data is ready.\n */\ntls.getClientSignature = function(c, callback) {\n  // generate data to RSA encrypt\n  var b = forge.util.createBuffer();\n  b.putBuffer(c.session.md5.digest());\n  b.putBuffer(c.session.sha1.digest());\n  b = b.getBytes();\n\n  // create default signing function as necessary\n  c.getSignature = c.getSignature || function(c, b, callback) {\n    // do rsa encryption, call callback\n    var privateKey = null;\n    if(c.getPrivateKey) {\n      try {\n        privateKey = c.getPrivateKey(c, c.session.clientCertificate);\n        privateKey = forge.pki.privateKeyFromPem(privateKey);\n      } catch(ex) {\n        c.error(c, {\n          message: 'Could not get private key.',\n          cause: ex,\n          send: true,\n          alert: {\n            level: tls.Alert.Level.fatal,\n            description: tls.Alert.Description.internal_error\n          }\n        });\n      }\n    }\n    if(privateKey === null) {\n      c.error(c, {\n        message: 'No private key set.',\n        send: true,\n        alert: {\n          level: tls.Alert.Level.fatal,\n          description: tls.Alert.Description.internal_error\n        }\n      });\n    } else {\n      b = privateKey.sign(b, null);\n    }\n    callback(c, b);\n  };\n\n  // get client signature\n  c.getSignature(c, b, callback);\n};\n\n/**\n * Creates a CertificateVerify message.\n *\n * Meaning of this message:\n *   This structure conveys the client's Diffie-Hellman public value\n *   (Yc) if it was not already included in the client's certificate.\n *   The encoding used for Yc is determined by the enumerated\n *   PublicValueEncoding. This structure is a variant of the client\n *   key exchange message, not a message in itself.\n *\n * When this message will be sent:\n *   This message is used to provide explicit verification of a client\n *   certificate. This message is only sent following a client\n *   certificate that has signing capability (i.e. all certificates\n *   except those containing fixed Diffie-Hellman parameters). When\n *   sent, it will immediately follow the client key exchange message.\n *\n * struct {\n *   Signature signature;\n * } CertificateVerify;\n *\n * CertificateVerify.signature.md5_hash\n *   MD5(handshake_messages);\n *\n * Certificate.signature.sha_hash\n *   SHA(handshake_messages);\n *\n * Here handshake_messages refers to all handshake messages sent or\n * received starting at client hello up to but not including this\n * message, including the type and length fields of the handshake\n * messages.\n *\n * select(SignatureAlgorithm) {\n *   case anonymous: struct { };\n *   case rsa:\n *     digitally-signed struct {\n *       opaque md5_hash[16];\n *       opaque sha_hash[20];\n *     };\n *   case dsa:\n *     digitally-signed struct {\n *       opaque sha_hash[20];\n *     };\n * } Signature;\n *\n * In digital signing, one-way hash functions are used as input for a\n * signing algorithm. A digitally-signed element is encoded as an opaque\n * vector <0..2^16-1>, where the length is specified by the signing\n * algorithm and key.\n *\n * In RSA signing, a 36-byte structure of two hashes (one SHA and one\n * MD5) is signed (encrypted with the private key). It is encoded with\n * PKCS #1 block type 0 or type 1 as described in [PKCS1].\n *\n * In DSS, the 20 bytes of the SHA hash are run directly through the\n * Digital Signing Algorithm with no additional hashing.\n *\n * @param c the connection.\n * @param signature the signature to include in the message.\n *\n * @return the CertificateVerify byte buffer.\n */\ntls.createCertificateVerify = function(c, signature) {\n  /* Note: The signature will be stored in a \"digitally-signed\" opaque\n    vector that has the length prefixed using 2 bytes, so include those\n    2 bytes in the handshake message length. This is done as a minor\n    optimization instead of calling writeVector(). */\n\n  // determine length of the handshake message\n  var length = signature.length + 2;\n\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  rval.putByte(tls.HandshakeType.certificate_verify);\n  rval.putInt24(length);\n  // add vector length bytes\n  rval.putInt16(signature.length);\n  rval.putBytes(signature);\n  return rval;\n};\n\n/**\n * Creates a CertificateRequest message.\n *\n * @param c the connection.\n *\n * @return the CertificateRequest byte buffer.\n */\ntls.createCertificateRequest = function(c) {\n  // TODO: support other certificate types\n  var certTypes = forge.util.createBuffer();\n\n  // common RSA certificate type\n  certTypes.putByte(0x01);\n\n  // add distinguished names from CA store\n  var cAs = forge.util.createBuffer();\n  for(var key in c.caStore.certs) {\n    var cert = c.caStore.certs[key];\n    var dn = forge.pki.distinguishedNameToAsn1(cert.subject);\n    var byteBuffer = forge.asn1.toDer(dn);\n    cAs.putInt16(byteBuffer.length());\n    cAs.putBuffer(byteBuffer);\n  }\n\n  // TODO: TLS 1.2+ has a different format\n\n  // determine length of the handshake message\n  var length =\n    1 + certTypes.length() +\n    2 + cAs.length();\n\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  rval.putByte(tls.HandshakeType.certificate_request);\n  rval.putInt24(length);\n  writeVector(rval, 1, certTypes);\n  writeVector(rval, 2, cAs);\n  return rval;\n};\n\n/**\n * Creates a ServerHelloDone message.\n *\n * @param c the connection.\n *\n * @return the ServerHelloDone byte buffer.\n */\ntls.createServerHelloDone = function(c) {\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  rval.putByte(tls.HandshakeType.server_hello_done);\n  rval.putInt24(0);\n  return rval;\n};\n\n/**\n * Creates a ChangeCipherSpec message.\n *\n * The change cipher spec protocol exists to signal transitions in\n * ciphering strategies. The protocol consists of a single message,\n * which is encrypted and compressed under the current (not the pending)\n * connection state. The message consists of a single byte of value 1.\n *\n * struct {\n *   enum { change_cipher_spec(1), (255) } type;\n * } ChangeCipherSpec;\n *\n * @return the ChangeCipherSpec byte buffer.\n */\ntls.createChangeCipherSpec = function() {\n  var rval = forge.util.createBuffer();\n  rval.putByte(0x01);\n  return rval;\n};\n\n/**\n * Creates a Finished message.\n *\n * struct {\n *   opaque verify_data[12];\n * } Finished;\n *\n * verify_data\n *   PRF(master_secret, finished_label, MD5(handshake_messages) +\n *   SHA-1(handshake_messages)) [0..11];\n *\n * finished_label\n *   For Finished messages sent by the client, the string \"client\n *   finished\". For Finished messages sent by the server, the\n *   string \"server finished\".\n *\n * handshake_messages\n *   All of the data from all handshake messages up to but not\n *   including this message. This is only data visible at the\n *   handshake layer and does not include record layer headers.\n *   This is the concatenation of all the Handshake structures as\n *   defined in 7.4 exchanged thus far.\n *\n * @param c the connection.\n *\n * @return the Finished byte buffer.\n */\ntls.createFinished = function(c) {\n  // generate verify_data\n  var b = forge.util.createBuffer();\n  b.putBuffer(c.session.md5.digest());\n  b.putBuffer(c.session.sha1.digest());\n\n  // TODO: determine prf function and verify length for TLS 1.2\n  var client = (c.entity === tls.ConnectionEnd.client);\n  var sp = c.session.sp;\n  var vdl = 12;\n  var prf = prf_TLS1;\n  var label = client ? 'client finished' : 'server finished';\n  b = prf(sp.master_secret, label, b.getBytes(), vdl);\n\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  rval.putByte(tls.HandshakeType.finished);\n  rval.putInt24(b.length());\n  rval.putBuffer(b);\n  return rval;\n};\n\n/**\n * Creates a HeartbeatMessage (See RFC 6520).\n *\n * struct {\n *   HeartbeatMessageType type;\n *   uint16 payload_length;\n *   opaque payload[HeartbeatMessage.payload_length];\n *   opaque padding[padding_length];\n * } HeartbeatMessage;\n *\n * The total length of a HeartbeatMessage MUST NOT exceed 2^14 or\n * max_fragment_length when negotiated as defined in [RFC6066].\n *\n * type: The message type, either heartbeat_request or heartbeat_response.\n *\n * payload_length: The length of the payload.\n *\n * payload: The payload consists of arbitrary content.\n *\n * padding: The padding is random content that MUST be ignored by the\n *   receiver. The length of a HeartbeatMessage is TLSPlaintext.length\n *   for TLS and DTLSPlaintext.length for DTLS. Furthermore, the\n *   length of the type field is 1 byte, and the length of the\n *   payload_length is 2. Therefore, the padding_length is\n *   TLSPlaintext.length - payload_length - 3 for TLS and\n *   DTLSPlaintext.length - payload_length - 3 for DTLS. The\n *   padding_length MUST be at least 16.\n *\n * The sender of a HeartbeatMessage MUST use a random padding of at\n * least 16 bytes. The padding of a received HeartbeatMessage message\n * MUST be ignored.\n *\n * If the payload_length of a received HeartbeatMessage is too large,\n * the received HeartbeatMessage MUST be discarded silently.\n *\n * @param c the connection.\n * @param type the tls.HeartbeatMessageType.\n * @param payload the heartbeat data to send as the payload.\n * @param [payloadLength] the payload length to use, defaults to the\n *          actual payload length.\n *\n * @return the HeartbeatRequest byte buffer.\n */\ntls.createHeartbeat = function(type, payload, payloadLength) {\n  if(typeof payloadLength === 'undefined') {\n    payloadLength = payload.length;\n  }\n  // build record fragment\n  var rval = forge.util.createBuffer();\n  rval.putByte(type);               // heartbeat message type\n  rval.putInt16(payloadLength);     // payload length\n  rval.putBytes(payload);           // payload\n  // padding\n  var plaintextLength = rval.length();\n  var paddingLength = Math.max(16, plaintextLength - payloadLength - 3);\n  rval.putBytes(forge.random.getBytes(paddingLength));\n  return rval;\n};\n\n/**\n * Fragments, compresses, encrypts, and queues a record for delivery.\n *\n * @param c the connection.\n * @param record the record to queue.\n */\ntls.queue = function(c, record) {\n  // error during record creation\n  if(!record) {\n    return;\n  }\n\n  if(record.fragment.length() === 0) {\n    if(record.type === tls.ContentType.handshake ||\n      record.type === tls.ContentType.alert ||\n      record.type === tls.ContentType.change_cipher_spec) {\n      // Empty handshake, alert of change cipher spec messages are not allowed per the TLS specification and should not be sent.\n      return;\n    }\n  }\n\n  // if the record is a handshake record, update handshake hashes\n  if(record.type === tls.ContentType.handshake) {\n    var bytes = record.fragment.bytes();\n    c.session.md5.update(bytes);\n    c.session.sha1.update(bytes);\n    bytes = null;\n  }\n\n  // handle record fragmentation\n  var records;\n  if(record.fragment.length() <= tls.MaxFragment) {\n    records = [record];\n  } else {\n    // fragment data as long as it is too long\n    records = [];\n    var data = record.fragment.bytes();\n    while(data.length > tls.MaxFragment) {\n      records.push(tls.createRecord(c, {\n        type: record.type,\n        data: forge.util.createBuffer(data.slice(0, tls.MaxFragment))\n      }));\n      data = data.slice(tls.MaxFragment);\n    }\n    // add last record\n    if(data.length > 0) {\n      records.push(tls.createRecord(c, {\n        type: record.type,\n        data: forge.util.createBuffer(data)\n      }));\n    }\n  }\n\n  // compress and encrypt all fragmented records\n  for(var i = 0; i < records.length && !c.fail; ++i) {\n    // update the record using current write state\n    var rec = records[i];\n    var s = c.state.current.write;\n    if(s.update(c, rec)) {\n      // store record\n      c.records.push(rec);\n    }\n  }\n};\n\n/**\n * Flushes all queued records to the output buffer and calls the\n * tlsDataReady() handler on the given connection.\n *\n * @param c the connection.\n *\n * @return true on success, false on failure.\n */\ntls.flush = function(c) {\n  for(var i = 0; i < c.records.length; ++i) {\n    var record = c.records[i];\n\n    // add record header and fragment\n    c.tlsData.putByte(record.type);\n    c.tlsData.putByte(record.version.major);\n    c.tlsData.putByte(record.version.minor);\n    c.tlsData.putInt16(record.fragment.length());\n    c.tlsData.putBuffer(c.records[i].fragment);\n  }\n  c.records = [];\n  return c.tlsDataReady(c);\n};\n\n/**\n * Maps a pki.certificateError to a tls.Alert.Description.\n *\n * @param error the error to map.\n *\n * @return the alert description.\n */\nvar _certErrorToAlertDesc = function(error) {\n  switch(error) {\n  case true:\n    return true;\n  case forge.pki.certificateError.bad_certificate:\n    return tls.Alert.Description.bad_certificate;\n  case forge.pki.certificateError.unsupported_certificate:\n    return tls.Alert.Description.unsupported_certificate;\n  case forge.pki.certificateError.certificate_revoked:\n    return tls.Alert.Description.certificate_revoked;\n  case forge.pki.certificateError.certificate_expired:\n    return tls.Alert.Description.certificate_expired;\n  case forge.pki.certificateError.certificate_unknown:\n    return tls.Alert.Description.certificate_unknown;\n  case forge.pki.certificateError.unknown_ca:\n    return tls.Alert.Description.unknown_ca;\n  default:\n    return tls.Alert.Description.bad_certificate;\n  }\n};\n\n/**\n * Maps a tls.Alert.Description to a pki.certificateError.\n *\n * @param desc the alert description.\n *\n * @return the certificate error.\n */\nvar _alertDescToCertError = function(desc) {\n  switch(desc) {\n  case true:\n    return true;\n  case tls.Alert.Description.bad_certificate:\n    return forge.pki.certificateError.bad_certificate;\n  case tls.Alert.Description.unsupported_certificate:\n    return forge.pki.certificateError.unsupported_certificate;\n  case tls.Alert.Description.certificate_revoked:\n    return forge.pki.certificateError.certificate_revoked;\n  case tls.Alert.Description.certificate_expired:\n    return forge.pki.certificateError.certificate_expired;\n  case tls.Alert.Description.certificate_unknown:\n    return forge.pki.certificateError.certificate_unknown;\n  case tls.Alert.Description.unknown_ca:\n    return forge.pki.certificateError.unknown_ca;\n  default:\n    return forge.pki.certificateError.bad_certificate;\n  }\n};\n\n/**\n * Verifies a certificate chain against the given connection's\n * Certificate Authority store.\n *\n * @param c the TLS connection.\n * @param chain the certificate chain to verify, with the root or highest\n *          authority at the end.\n *\n * @return true if successful, false if not.\n */\ntls.verifyCertificateChain = function(c, chain) {\n  try {\n    // Make a copy of c.verifyOptions so that we can modify options.verify\n    // without modifying c.verifyOptions.\n    var options = {};\n    for (var key in c.verifyOptions) {\n      options[key] = c.verifyOptions[key];\n    }\n\n    options.verify = function(vfd, depth, chain) {\n      // convert pki.certificateError to tls alert description\n      var desc = _certErrorToAlertDesc(vfd);\n\n      // call application callback\n      var ret = c.verify(c, vfd, depth, chain);\n      if(ret !== true) {\n        if(typeof ret === 'object' && !forge.util.isArray(ret)) {\n          // throw custom error\n          var error = new Error('The application rejected the certificate.');\n          error.send = true;\n          error.alert = {\n            level: tls.Alert.Level.fatal,\n            description: tls.Alert.Description.bad_certificate\n          };\n          if(ret.message) {\n            error.message = ret.message;\n          }\n          if(ret.alert) {\n            error.alert.description = ret.alert;\n          }\n          throw error;\n        }\n\n        // convert tls alert description to pki.certificateError\n        if(ret !== vfd) {\n          ret = _alertDescToCertError(ret);\n        }\n      }\n\n      return ret;\n    };\n\n    // verify chain\n    forge.pki.verifyCertificateChain(c.caStore, chain, options);\n  } catch(ex) {\n    // build tls error if not already customized\n    var err = ex;\n    if(typeof err !== 'object' || forge.util.isArray(err)) {\n      err = {\n        send: true,\n        alert: {\n          level: tls.Alert.Level.fatal,\n          description: _certErrorToAlertDesc(ex)\n        }\n      };\n    }\n    if(!('send' in err)) {\n      err.send = true;\n    }\n    if(!('alert' in err)) {\n      err.alert = {\n        level: tls.Alert.Level.fatal,\n        description: _certErrorToAlertDesc(err.error)\n      };\n    }\n\n    // send error\n    c.error(c, err);\n  }\n\n  return !c.fail;\n};\n\n/**\n * Creates a new TLS session cache.\n *\n * @param cache optional map of session ID to cached session.\n * @param capacity the maximum size for the cache (default: 100).\n *\n * @return the new TLS session cache.\n */\ntls.createSessionCache = function(cache, capacity) {\n  var rval = null;\n\n  // assume input is already a session cache object\n  if(cache && cache.getSession && cache.setSession && cache.order) {\n    rval = cache;\n  } else {\n    // create cache\n    rval = {};\n    rval.cache = cache || {};\n    rval.capacity = Math.max(capacity || 100, 1);\n    rval.order = [];\n\n    // store order for sessions, delete session overflow\n    for(var key in cache) {\n      if(rval.order.length <= capacity) {\n        rval.order.push(key);\n      } else {\n        delete cache[key];\n      }\n    }\n\n    // get a session from a session ID (or get any session)\n    rval.getSession = function(sessionId) {\n      var session = null;\n      var key = null;\n\n      // if session ID provided, use it\n      if(sessionId) {\n        key = forge.util.bytesToHex(sessionId);\n      } else if(rval.order.length > 0) {\n        // get first session from cache\n        key = rval.order[0];\n      }\n\n      if(key !== null && key in rval.cache) {\n        // get cached session and remove from cache\n        session = rval.cache[key];\n        delete rval.cache[key];\n        for(var i in rval.order) {\n          if(rval.order[i] === key) {\n            rval.order.splice(i, 1);\n            break;\n          }\n        }\n      }\n\n      return session;\n    };\n\n    // set a session in the cache\n    rval.setSession = function(sessionId, session) {\n      // remove session from cache if at capacity\n      if(rval.order.length === rval.capacity) {\n        var key = rval.order.shift();\n        delete rval.cache[key];\n      }\n      // add session to cache\n      var key = forge.util.bytesToHex(sessionId);\n      rval.order.push(key);\n      rval.cache[key] = session;\n    };\n  }\n\n  return rval;\n};\n\n/**\n * Creates a new TLS connection.\n *\n * See public createConnection() docs for more details.\n *\n * @param options the options for this connection.\n *\n * @return the new TLS connection.\n */\ntls.createConnection = function(options) {\n  var caStore = null;\n  if(options.caStore) {\n    // if CA store is an array, convert it to a CA store object\n    if(forge.util.isArray(options.caStore)) {\n      caStore = forge.pki.createCaStore(options.caStore);\n    } else {\n      caStore = options.caStore;\n    }\n  } else {\n    // create empty CA store\n    caStore = forge.pki.createCaStore();\n  }\n\n  // setup default cipher suites\n  var cipherSuites = options.cipherSuites || null;\n  if(cipherSuites === null) {\n    cipherSuites = [];\n    for(var key in tls.CipherSuites) {\n      cipherSuites.push(tls.CipherSuites[key]);\n    }\n  }\n\n  // set default entity\n  var entity = (options.server || false) ?\n    tls.ConnectionEnd.server : tls.ConnectionEnd.client;\n\n  // create session cache if requested\n  var sessionCache = options.sessionCache ?\n    tls.createSessionCache(options.sessionCache) : null;\n\n  // create TLS connection\n  var c = {\n    version: {major: tls.Version.major, minor: tls.Version.minor},\n    entity: entity,\n    sessionId: options.sessionId,\n    caStore: caStore,\n    sessionCache: sessionCache,\n    cipherSuites: cipherSuites,\n    connected: options.connected,\n    virtualHost: options.virtualHost || null,\n    verifyClient: options.verifyClient || false,\n    verify: options.verify || function(cn, vfd, dpth, cts) {return vfd;},\n    verifyOptions: options.verifyOptions || {},\n    getCertificate: options.getCertificate || null,\n    getPrivateKey: options.getPrivateKey || null,\n    getSignature: options.getSignature || null,\n    input: forge.util.createBuffer(),\n    tlsData: forge.util.createBuffer(),\n    data: forge.util.createBuffer(),\n    tlsDataReady: options.tlsDataReady,\n    dataReady: options.dataReady,\n    heartbeatReceived: options.heartbeatReceived,\n    closed: options.closed,\n    error: function(c, ex) {\n      // set origin if not set\n      ex.origin = ex.origin ||\n        ((c.entity === tls.ConnectionEnd.client) ? 'client' : 'server');\n\n      // send TLS alert\n      if(ex.send) {\n        tls.queue(c, tls.createAlert(c, ex.alert));\n        tls.flush(c);\n      }\n\n      // error is fatal by default\n      var fatal = (ex.fatal !== false);\n      if(fatal) {\n        // set fail flag\n        c.fail = true;\n      }\n\n      // call error handler first\n      options.error(c, ex);\n\n      if(fatal) {\n        // fatal error, close connection, do not clear fail\n        c.close(false);\n      }\n    },\n    deflate: options.deflate || null,\n    inflate: options.inflate || null\n  };\n\n  /**\n   * Resets a closed TLS connection for reuse. Called in c.close().\n   *\n   * @param clearFail true to clear the fail flag (default: true).\n   */\n  c.reset = function(clearFail) {\n    c.version = {major: tls.Version.major, minor: tls.Version.minor};\n    c.record = null;\n    c.session = null;\n    c.peerCertificate = null;\n    c.state = {\n      pending: null,\n      current: null\n    };\n    c.expect = (c.entity === tls.ConnectionEnd.client) ? SHE : CHE;\n    c.fragmented = null;\n    c.records = [];\n    c.open = false;\n    c.handshakes = 0;\n    c.handshaking = false;\n    c.isConnected = false;\n    c.fail = !(clearFail || typeof(clearFail) === 'undefined');\n    c.input.clear();\n    c.tlsData.clear();\n    c.data.clear();\n    c.state.current = tls.createConnectionState(c);\n  };\n\n  // do initial reset of connection\n  c.reset();\n\n  /**\n   * Updates the current TLS engine state based on the given record.\n   *\n   * @param c the TLS connection.\n   * @param record the TLS record to act on.\n   */\n  var _update = function(c, record) {\n    // get record handler (align type in table by subtracting lowest)\n    var aligned = record.type - tls.ContentType.change_cipher_spec;\n    var handlers = ctTable[c.entity][c.expect];\n    if(aligned in handlers) {\n      handlers[aligned](c, record);\n    } else {\n      // unexpected record\n      tls.handleUnexpected(c, record);\n    }\n  };\n\n  /**\n   * Reads the record header and initializes the next record on the given\n   * connection.\n   *\n   * @param c the TLS connection with the next record.\n   *\n   * @return 0 if the input data could be processed, otherwise the\n   *         number of bytes required for data to be processed.\n   */\n  var _readRecordHeader = function(c) {\n    var rval = 0;\n\n    // get input buffer and its length\n    var b = c.input;\n    var len = b.length();\n\n    // need at least 5 bytes to initialize a record\n    if(len < 5) {\n      rval = 5 - len;\n    } else {\n      // enough bytes for header\n      // initialize record\n      c.record = {\n        type: b.getByte(),\n        version: {\n          major: b.getByte(),\n          minor: b.getByte()\n        },\n        length: b.getInt16(),\n        fragment: forge.util.createBuffer(),\n        ready: false\n      };\n\n      // check record version\n      var compatibleVersion = (c.record.version.major === c.version.major);\n      if(compatibleVersion && c.session && c.session.version) {\n        // session version already set, require same minor version\n        compatibleVersion = (c.record.version.minor === c.version.minor);\n      }\n      if(!compatibleVersion) {\n        c.error(c, {\n          message: 'Incompatible TLS version.',\n          send: true,\n          alert: {\n            level: tls.Alert.Level.fatal,\n            description: tls.Alert.Description.protocol_version\n          }\n        });\n      }\n    }\n\n    return rval;\n  };\n\n  /**\n   * Reads the next record's contents and appends its message to any\n   * previously fragmented message.\n   *\n   * @param c the TLS connection with the next record.\n   *\n   * @return 0 if the input data could be processed, otherwise the\n   *         number of bytes required for data to be processed.\n   */\n  var _readRecord = function(c) {\n    var rval = 0;\n\n    // ensure there is enough input data to get the entire record\n    var b = c.input;\n    var len = b.length();\n    if(len < c.record.length) {\n      // not enough data yet, return how much is required\n      rval = c.record.length - len;\n    } else {\n      // there is enough data to parse the pending record\n      // fill record fragment and compact input buffer\n      c.record.fragment.putBytes(b.getBytes(c.record.length));\n      b.compact();\n\n      // update record using current read state\n      var s = c.state.current.read;\n      if(s.update(c, c.record)) {\n        // see if there is a previously fragmented message that the\n        // new record's message fragment should be appended to\n        if(c.fragmented !== null) {\n          // if the record type matches a previously fragmented\n          // record, append the record fragment to it\n          if(c.fragmented.type === c.record.type) {\n            // concatenate record fragments\n            c.fragmented.fragment.putBuffer(c.record.fragment);\n            c.record = c.fragmented;\n          } else {\n            // error, invalid fragmented record\n            c.error(c, {\n              message: 'Invalid fragmented record.',\n              send: true,\n              alert: {\n                level: tls.Alert.Level.fatal,\n                description:\n                  tls.Alert.Description.unexpected_message\n              }\n            });\n          }\n        }\n\n        // record is now ready\n        c.record.ready = true;\n      }\n    }\n\n    return rval;\n  };\n\n  /**\n   * Performs a handshake using the TLS Handshake Protocol, as a client.\n   *\n   * This method should only be called if the connection is in client mode.\n   *\n   * @param sessionId the session ID to use, null to start a new one.\n   */\n  c.handshake = function(sessionId) {\n    // error to call this in non-client mode\n    if(c.entity !== tls.ConnectionEnd.client) {\n      // not fatal error\n      c.error(c, {\n        message: 'Cannot initiate handshake as a server.',\n        fatal: false\n      });\n    } else if(c.handshaking) {\n      // handshake is already in progress, fail but not fatal error\n      c.error(c, {\n        message: 'Handshake already in progress.',\n        fatal: false\n      });\n    } else {\n      // clear fail flag on reuse\n      if(c.fail && !c.open && c.handshakes === 0) {\n        c.fail = false;\n      }\n\n      // now handshaking\n      c.handshaking = true;\n\n      // default to blank (new session)\n      sessionId = sessionId || '';\n\n      // if a session ID was specified, try to find it in the cache\n      var session = null;\n      if(sessionId.length > 0) {\n        if(c.sessionCache) {\n          session = c.sessionCache.getSession(sessionId);\n        }\n\n        // matching session not found in cache, clear session ID\n        if(session === null) {\n          sessionId = '';\n        }\n      }\n\n      // no session given, grab a session from the cache, if available\n      if(sessionId.length === 0 && c.sessionCache) {\n        session = c.sessionCache.getSession();\n        if(session !== null) {\n          sessionId = session.id;\n        }\n      }\n\n      // set up session\n      c.session = {\n        id: sessionId,\n        version: null,\n        cipherSuite: null,\n        compressionMethod: null,\n        serverCertificate: null,\n        certificateRequest: null,\n        clientCertificate: null,\n        sp: {},\n        md5: forge.md.md5.create(),\n        sha1: forge.md.sha1.create()\n      };\n\n      // use existing session information\n      if(session) {\n        // only update version on connection, session version not yet set\n        c.version = session.version;\n        c.session.sp = session.sp;\n      }\n\n      // generate new client random\n      c.session.sp.client_random = tls.createRandom().getBytes();\n\n      // connection now open\n      c.open = true;\n\n      // send hello\n      tls.queue(c, tls.createRecord(c, {\n        type: tls.ContentType.handshake,\n        data: tls.createClientHello(c)\n      }));\n      tls.flush(c);\n    }\n  };\n\n  /**\n   * Called when TLS protocol data has been received from somewhere and should\n   * be processed by the TLS engine.\n   *\n   * @param data the TLS protocol data, as a string, to process.\n   *\n   * @return 0 if the data could be processed, otherwise the number of bytes\n   *         required for data to be processed.\n   */\n  c.process = function(data) {\n    var rval = 0;\n\n    // buffer input data\n    if(data) {\n      c.input.putBytes(data);\n    }\n\n    // process next record if no failure, process will be called after\n    // each record is handled (since handling can be asynchronous)\n    if(!c.fail) {\n      // reset record if ready and now empty\n      if(c.record !== null &&\n        c.record.ready && c.record.fragment.isEmpty()) {\n        c.record = null;\n      }\n\n      // if there is no pending record, try to read record header\n      if(c.record === null) {\n        rval = _readRecordHeader(c);\n      }\n\n      // read the next record (if record not yet ready)\n      if(!c.fail && c.record !== null && !c.record.ready) {\n        rval = _readRecord(c);\n      }\n\n      // record ready to be handled, update engine state\n      if(!c.fail && c.record !== null && c.record.ready) {\n        _update(c, c.record);\n      }\n    }\n\n    return rval;\n  };\n\n  /**\n   * Requests that application data be packaged into a TLS record. The\n   * tlsDataReady handler will be called when the TLS record(s) have been\n   * prepared.\n   *\n   * @param data the application data, as a raw 'binary' encoded string, to\n   *          be sent; to send utf-16/utf-8 string data, use the return value\n   *          of util.encodeUtf8(str).\n   *\n   * @return true on success, false on failure.\n   */\n  c.prepare = function(data) {\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.application_data,\n      data: forge.util.createBuffer(data)\n    }));\n    return tls.flush(c);\n  };\n\n  /**\n   * Requests that a heartbeat request be packaged into a TLS record for\n   * transmission. The tlsDataReady handler will be called when TLS record(s)\n   * have been prepared.\n   *\n   * When a heartbeat response has been received, the heartbeatReceived\n   * handler will be called with the matching payload. This handler can\n   * be used to clear a retransmission timer, etc.\n   *\n   * @param payload the heartbeat data to send as the payload in the message.\n   * @param [payloadLength] the payload length to use, defaults to the\n   *          actual payload length.\n   *\n   * @return true on success, false on failure.\n   */\n  c.prepareHeartbeatRequest = function(payload, payloadLength) {\n    if(payload instanceof forge.util.ByteBuffer) {\n      payload = payload.bytes();\n    }\n    if(typeof payloadLength === 'undefined') {\n      payloadLength = payload.length;\n    }\n    c.expectedHeartbeatPayload = payload;\n    tls.queue(c, tls.createRecord(c, {\n      type: tls.ContentType.heartbeat,\n      data: tls.createHeartbeat(\n        tls.HeartbeatMessageType.heartbeat_request, payload, payloadLength)\n    }));\n    return tls.flush(c);\n  };\n\n  /**\n   * Closes the connection (sends a close_notify alert).\n   *\n   * @param clearFail true to clear the fail flag (default: true).\n   */\n  c.close = function(clearFail) {\n    // save session if connection didn't fail\n    if(!c.fail && c.sessionCache && c.session) {\n      // only need to preserve session ID, version, and security params\n      var session = {\n        id: c.session.id,\n        version: c.session.version,\n        sp: c.session.sp\n      };\n      session.sp.keys = null;\n      c.sessionCache.setSession(session.id, session);\n    }\n\n    if(c.open) {\n      // connection no longer open, clear input\n      c.open = false;\n      c.input.clear();\n\n      // if connected or handshaking, send an alert\n      if(c.isConnected || c.handshaking) {\n        c.isConnected = c.handshaking = false;\n\n        // send close_notify alert\n        tls.queue(c, tls.createAlert(c, {\n          level: tls.Alert.Level.warning,\n          description: tls.Alert.Description.close_notify\n        }));\n        tls.flush(c);\n      }\n\n      // call handler\n      c.closed(c);\n    }\n\n    // reset TLS connection, do not clear fail flag\n    c.reset(clearFail);\n  };\n\n  return c;\n};\n\n/* TLS API */\nmodule.exports = forge.tls = forge.tls || {};\n\n// expose non-functions\nfor(var key in tls) {\n  if(typeof tls[key] !== 'function') {\n    forge.tls[key] = tls[key];\n  }\n}\n\n// expose prf_tls1 for testing\nforge.tls.prf_tls1 = prf_TLS1;\n\n// expose sha1 hmac method\nforge.tls.hmac_sha1 = hmac_sha1;\n\n// expose session cache creation\nforge.tls.createSessionCache = tls.createSessionCache;\n\n/**\n * Creates a new TLS connection. This does not make any assumptions about the\n * transport layer that TLS is working on top of, ie: it does not assume there\n * is a TCP/IP connection or establish one. A TLS connection is totally\n * abstracted away from the layer is runs on top of, it merely establishes a\n * secure channel between a client\" and a \"server\".\n *\n * A TLS connection contains 4 connection states: pending read and write, and\n * current read and write.\n *\n * At initialization, the current read and write states will be null. Only once\n * the security parameters have been set and the keys have been generated can\n * the pending states be converted into current states. Current states will be\n * updated for each record processed.\n *\n * A custom certificate verify callback may be provided to check information\n * like the common name on the server's certificate. It will be called for\n * every certificate in the chain. It has the following signature:\n *\n * variable func(c, certs, index, preVerify)\n * Where:\n * c         The TLS connection\n * verified  Set to true if certificate was verified, otherwise the alert\n *           tls.Alert.Description for why the certificate failed.\n * depth     The current index in the chain, where 0 is the server's cert.\n * certs     The certificate chain, *NOTE* if the server was anonymous then\n *           the chain will be empty.\n *\n * The function returns true on success and on failure either the appropriate\n * tls.Alert.Description or an object with 'alert' set to the appropriate\n * tls.Alert.Description and 'message' set to a custom error message. If true\n * is not returned then the connection will abort using, in order of\n * availability, first the returned alert description, second the preVerify\n * alert description, and lastly the default 'bad_certificate'.\n *\n * There are three callbacks that can be used to make use of client-side\n * certificates where each takes the TLS connection as the first parameter:\n *\n * getCertificate(conn, hint)\n *   The second parameter is a hint as to which certificate should be\n *   returned. If the connection entity is a client, then the hint will be\n *   the CertificateRequest message from the server that is part of the\n *   TLS protocol. If the connection entity is a server, then it will be\n *   the servername list provided via an SNI extension the ClientHello, if\n *   one was provided (empty array if not). The hint can be examined to\n *   determine which certificate to use (advanced). Most implementations\n *   will just return a certificate. The return value must be a\n *   PEM-formatted certificate or an array of PEM-formatted certificates\n *   that constitute a certificate chain, with the first in the array/chain\n *   being the client's certificate.\n * getPrivateKey(conn, certificate)\n *   The second parameter is an forge.pki X.509 certificate object that\n *   is associated with the requested private key. The return value must\n *   be a PEM-formatted private key.\n * getSignature(conn, bytes, callback)\n *   This callback can be used instead of getPrivateKey if the private key\n *   is not directly accessible in javascript or should not be. For\n *   instance, a secure external web service could provide the signature\n *   in exchange for appropriate credentials. The second parameter is a\n *   string of bytes to be signed that are part of the TLS protocol. These\n *   bytes are used to verify that the private key for the previously\n *   provided client-side certificate is accessible to the client. The\n *   callback is a function that takes 2 parameters, the TLS connection\n *   and the RSA encrypted (signed) bytes as a string. This callback must\n *   be called once the signature is ready.\n *\n * @param options the options for this connection:\n *   server: true if the connection is server-side, false for client.\n *   sessionId: a session ID to reuse, null for a new connection.\n *   caStore: an array of certificates to trust.\n *   sessionCache: a session cache to use.\n *   cipherSuites: an optional array of cipher suites to use,\n *     see tls.CipherSuites.\n *   connected: function(conn) called when the first handshake completes.\n *   virtualHost: the virtual server name to use in a TLS SNI extension.\n *   verifyClient: true to require a client certificate in server mode,\n *     'optional' to request one, false not to (default: false).\n *   verify: a handler used to custom verify certificates in the chain.\n *   verifyOptions: an object with options for the certificate chain validation.\n *     See documentation of pki.verifyCertificateChain for possible options.\n *     verifyOptions.verify is ignored. If you wish to specify a verify handler\n *     use the verify key.\n *   getCertificate: an optional callback used to get a certificate or\n *     a chain of certificates (as an array).\n *   getPrivateKey: an optional callback used to get a private key.\n *   getSignature: an optional callback used to get a signature.\n *   tlsDataReady: function(conn) called when TLS protocol data has been\n *     prepared and is ready to be used (typically sent over a socket\n *     connection to its destination), read from conn.tlsData buffer.\n *   dataReady: function(conn) called when application data has\n *     been parsed from a TLS record and should be consumed by the\n *     application, read from conn.data buffer.\n *   closed: function(conn) called when the connection has been closed.\n *   error: function(conn, error) called when there was an error.\n *   deflate: function(inBytes) if provided, will deflate TLS records using\n *     the deflate algorithm if the server supports it.\n *   inflate: function(inBytes) if provided, will inflate TLS records using\n *     the deflate algorithm if the server supports it.\n *\n * @return the new TLS connection.\n */\nforge.tls.createConnection = tls.createConnection;\n","import forge from 'node-forge';\r\n\r\nexport interface RSAKeyPair {\r\n  privateKey: string;\r\n  publicKey: string;\r\n}\r\n\r\nexport class RSAKeyManager {\r\n  private static instance: RSAKeyManager;\r\n  private keyPair: RSAKeyPair | null = null;\r\n\r\n  private constructor() {}\r\n\r\n  static getInstance(): RSAKeyManager {\r\n    if (!RSAKeyManager.instance) {\r\n      RSAKeyManager.instance = new RSAKeyManager();\r\n    }\r\n    return RSAKeyManager.instance;\r\n  }\r\n\r\n  generateKeyPair(): RSAKeyPair {\r\n    const keypair = forge.pki.rsa.generateKeyPair(2048);\r\n    const privateKeyPem = forge.pki.privateKeyToPem(keypair.privateKey);\r\n    const publicKeyPem = forge.pki.publicKeyToPem(keypair.publicKey);\r\n    \r\n    this.keyPair = {\r\n      privateKey: privateKeyPem,\r\n      publicKey: publicKeyPem\r\n    };\r\n\r\n    // Store in localStorage\r\n    localStorage.setItem('blockvault_rsa_keys', JSON.stringify(this.keyPair));\r\n    \r\n    return this.keyPair;\r\n  }\r\n\r\n  getKeyPair(): RSAKeyPair | null {\r\n    if (this.keyPair) {\r\n      return this.keyPair;\r\n    }\r\n\r\n    // Try to load from localStorage\r\n    const stored = localStorage.getItem('blockvault_rsa_keys');\r\n    if (stored) {\r\n      try {\r\n        this.keyPair = JSON.parse(stored);\r\n        return this.keyPair;\r\n      } catch (error) {\r\n        console.error('Failed to parse stored RSA keys:', error);\r\n        localStorage.removeItem('blockvault_rsa_keys');\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  hasKeyPair(): boolean {\r\n    return this.getKeyPair() !== null;\r\n  }\r\n\r\n  clearKeyPair(): void {\r\n    this.keyPair = null;\r\n    localStorage.removeItem('blockvault_rsa_keys');\r\n  }\r\n\r\n  getPublicKey(): string | null {\r\n    const keyPair = this.getKeyPair();\r\n    return keyPair ? keyPair.publicKey : null;\r\n  }\r\n\r\n  getPrivateKey(): string | null {\r\n    const keyPair = this.getKeyPair();\r\n    return keyPair ? keyPair.privateKey : null;\r\n  }\r\n}\r\n\r\nexport const rsaKeyManager = RSAKeyManager.getInstance();\r\n","/**\n * Base-N/Base-X encoding/decoding functions.\n *\n * Original implementation from base-x:\n * https://github.com/cryptocoinjs/base-x\n *\n * Which is MIT licensed:\n *\n * The MIT License (MIT)\n *\n * Copyright base-x contributors (c) 2016\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nvar api = {};\nmodule.exports = api;\n\n// baseN alphabet indexes\nvar _reverseAlphabets = {};\n\n/**\n * BaseN-encodes a Uint8Array using the given alphabet.\n *\n * @param input the Uint8Array to encode.\n * @param maxline the maximum number of encoded characters per line to use,\n *          defaults to none.\n *\n * @return the baseN-encoded output string.\n */\napi.encode = function(input, alphabet, maxline) {\n  if(typeof alphabet !== 'string') {\n    throw new TypeError('\"alphabet\" must be a string.');\n  }\n  if(maxline !== undefined && typeof maxline !== 'number') {\n    throw new TypeError('\"maxline\" must be a number.');\n  }\n\n  var output = '';\n\n  if(!(input instanceof Uint8Array)) {\n    // assume forge byte buffer\n    output = _encodeWithByteBuffer(input, alphabet);\n  } else {\n    var i = 0;\n    var base = alphabet.length;\n    var first = alphabet.charAt(0);\n    var digits = [0];\n    for(i = 0; i < input.length; ++i) {\n      for(var j = 0, carry = input[i]; j < digits.length; ++j) {\n        carry += digits[j] << 8;\n        digits[j] = carry % base;\n        carry = (carry / base) | 0;\n      }\n\n      while(carry > 0) {\n        digits.push(carry % base);\n        carry = (carry / base) | 0;\n      }\n    }\n\n    // deal with leading zeros\n    for(i = 0; input[i] === 0 && i < input.length - 1; ++i) {\n      output += first;\n    }\n    // convert digits to a string\n    for(i = digits.length - 1; i >= 0; --i) {\n      output += alphabet[digits[i]];\n    }\n  }\n\n  if(maxline) {\n    var regex = new RegExp('.{1,' + maxline + '}', 'g');\n    output = output.match(regex).join('\\r\\n');\n  }\n\n  return output;\n};\n\n/**\n * Decodes a baseN-encoded (using the given alphabet) string to a\n * Uint8Array.\n *\n * @param input the baseN-encoded input string.\n *\n * @return the Uint8Array.\n */\napi.decode = function(input, alphabet) {\n  if(typeof input !== 'string') {\n    throw new TypeError('\"input\" must be a string.');\n  }\n  if(typeof alphabet !== 'string') {\n    throw new TypeError('\"alphabet\" must be a string.');\n  }\n\n  var table = _reverseAlphabets[alphabet];\n  if(!table) {\n    // compute reverse alphabet\n    table = _reverseAlphabets[alphabet] = [];\n    for(var i = 0; i < alphabet.length; ++i) {\n      table[alphabet.charCodeAt(i)] = i;\n    }\n  }\n\n  // remove whitespace characters\n  input = input.replace(/\\s/g, '');\n\n  var base = alphabet.length;\n  var first = alphabet.charAt(0);\n  var bytes = [0];\n  for(var i = 0; i < input.length; i++) {\n    var value = table[input.charCodeAt(i)];\n    if(value === undefined) {\n      return;\n    }\n\n    for(var j = 0, carry = value; j < bytes.length; ++j) {\n      carry += bytes[j] * base;\n      bytes[j] = carry & 0xff;\n      carry >>= 8;\n    }\n\n    while(carry > 0) {\n      bytes.push(carry & 0xff);\n      carry >>= 8;\n    }\n  }\n\n  // deal with leading zeros\n  for(var k = 0; input[k] === first && k < input.length - 1; ++k) {\n    bytes.push(0);\n  }\n\n  if(typeof Buffer !== 'undefined') {\n    return Buffer.from(bytes.reverse());\n  }\n\n  return new Uint8Array(bytes.reverse());\n};\n\nfunction _encodeWithByteBuffer(input, alphabet) {\n  var i = 0;\n  var base = alphabet.length;\n  var first = alphabet.charAt(0);\n  var digits = [0];\n  for(i = 0; i < input.length(); ++i) {\n    for(var j = 0, carry = input.at(i); j < digits.length; ++j) {\n      carry += digits[j] << 8;\n      digits[j] = carry % base;\n      carry = (carry / base) | 0;\n    }\n\n    while(carry > 0) {\n      digits.push(carry % base);\n      carry = (carry / base) | 0;\n    }\n  }\n\n  var output = '';\n\n  // deal with leading zeros\n  for(i = 0; input.at(i) === 0 && i < input.length() - 1; ++i) {\n    output += first;\n  }\n  // convert digits to a string\n  for(i = digits.length - 1; i >= 0; --i) {\n    output += alphabet[digits[i]];\n  }\n\n  return output;\n}\n","/**\n * Message Digest Algorithm 5 with 128-bit digest (MD5) implementation.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./md');\nrequire('./util');\n\nvar md5 = module.exports = forge.md5 = forge.md5 || {};\nforge.md.md5 = forge.md.algorithms.md5 = md5;\n\n/**\n * Creates an MD5 message digest object.\n *\n * @return a message digest object.\n */\nmd5.create = function() {\n  // do initialization as necessary\n  if(!_initialized) {\n    _init();\n  }\n\n  // MD5 state contains four 32-bit integers\n  var _state = null;\n\n  // input buffer\n  var _input = forge.util.createBuffer();\n\n  // used for word storage\n  var _w = new Array(16);\n\n  // message digest object\n  var md = {\n    algorithm: 'md5',\n    blockLength: 64,\n    digestLength: 16,\n    // 56-bit length of message so far (does not including padding)\n    messageLength: 0,\n    // true message length\n    fullMessageLength: null,\n    // size of message length in bytes\n    messageLengthSize: 8\n  };\n\n  /**\n   * Starts the digest.\n   *\n   * @return this digest object.\n   */\n  md.start = function() {\n    // up to 56-bit message length for convenience\n    md.messageLength = 0;\n\n    // full message length (set md.messageLength64 for backwards-compatibility)\n    md.fullMessageLength = md.messageLength64 = [];\n    var int32s = md.messageLengthSize / 4;\n    for(var i = 0; i < int32s; ++i) {\n      md.fullMessageLength.push(0);\n    }\n    _input = forge.util.createBuffer();\n    _state = {\n      h0: 0x67452301,\n      h1: 0xEFCDAB89,\n      h2: 0x98BADCFE,\n      h3: 0x10325476\n    };\n    return md;\n  };\n  // start digest automatically for first time\n  md.start();\n\n  /**\n   * Updates the digest with the given message input. The given input can\n   * treated as raw input (no encoding will be applied) or an encoding of\n   * 'utf8' maybe given to encode the input using UTF-8.\n   *\n   * @param msg the message input to update with.\n   * @param encoding the encoding to use (default: 'raw', other: 'utf8').\n   *\n   * @return this digest object.\n   */\n  md.update = function(msg, encoding) {\n    if(encoding === 'utf8') {\n      msg = forge.util.encodeUtf8(msg);\n    }\n\n    // update message length\n    var len = msg.length;\n    md.messageLength += len;\n    len = [(len / 0x100000000) >>> 0, len >>> 0];\n    for(var i = md.fullMessageLength.length - 1; i >= 0; --i) {\n      md.fullMessageLength[i] += len[1];\n      len[1] = len[0] + ((md.fullMessageLength[i] / 0x100000000) >>> 0);\n      md.fullMessageLength[i] = md.fullMessageLength[i] >>> 0;\n      len[0] = (len[1] / 0x100000000) >>> 0;\n    }\n\n    // add bytes to input buffer\n    _input.putBytes(msg);\n\n    // process bytes\n    _update(_state, _w, _input);\n\n    // compact input buffer every 2K or if empty\n    if(_input.read > 2048 || _input.length() === 0) {\n      _input.compact();\n    }\n\n    return md;\n  };\n\n  /**\n   * Produces the digest.\n   *\n   * @return a byte buffer containing the digest value.\n   */\n  md.digest = function() {\n    /* Note: Here we copy the remaining bytes in the input buffer and\n    add the appropriate MD5 padding. Then we do the final update\n    on a copy of the state so that if the user wants to get\n    intermediate digests they can do so. */\n\n    /* Determine the number of bytes that must be added to the message\n    to ensure its length is congruent to 448 mod 512. In other words,\n    the data to be digested must be a multiple of 512 bits (or 128 bytes).\n    This data includes the message, some padding, and the length of the\n    message. Since the length of the message will be encoded as 8 bytes (64\n    bits), that means that the last segment of the data must have 56 bytes\n    (448 bits) of message and padding. Therefore, the length of the message\n    plus the padding must be congruent to 448 mod 512 because\n    512 - 128 = 448.\n\n    In order to fill up the message length it must be filled with\n    padding that begins with 1 bit followed by all 0 bits. Padding\n    must *always* be present, so if the message length is already\n    congruent to 448 mod 512, then 512 padding bits must be added. */\n\n    var finalBlock = forge.util.createBuffer();\n    finalBlock.putBytes(_input.bytes());\n\n    // compute remaining size to be digested (include message length size)\n    var remaining = (\n      md.fullMessageLength[md.fullMessageLength.length - 1] +\n      md.messageLengthSize);\n\n    // add padding for overflow blockSize - overflow\n    // _padding starts with 1 byte with first bit is set (byte value 128), then\n    // there may be up to (blockSize - 1) other pad bytes\n    var overflow = remaining & (md.blockLength - 1);\n    finalBlock.putBytes(_padding.substr(0, md.blockLength - overflow));\n\n    // serialize message length in bits in little-endian order; since length\n    // is stored in bytes we multiply by 8 and add carry\n    var bits, carry = 0;\n    for(var i = md.fullMessageLength.length - 1; i >= 0; --i) {\n      bits = md.fullMessageLength[i] * 8 + carry;\n      carry = (bits / 0x100000000) >>> 0;\n      finalBlock.putInt32Le(bits >>> 0);\n    }\n\n    var s2 = {\n      h0: _state.h0,\n      h1: _state.h1,\n      h2: _state.h2,\n      h3: _state.h3\n    };\n    _update(s2, _w, finalBlock);\n    var rval = forge.util.createBuffer();\n    rval.putInt32Le(s2.h0);\n    rval.putInt32Le(s2.h1);\n    rval.putInt32Le(s2.h2);\n    rval.putInt32Le(s2.h3);\n    return rval;\n  };\n\n  return md;\n};\n\n// padding, constant tables for calculating md5\nvar _padding = null;\nvar _g = null;\nvar _r = null;\nvar _k = null;\nvar _initialized = false;\n\n/**\n * Initializes the constant tables.\n */\nfunction _init() {\n  // create padding\n  _padding = String.fromCharCode(128);\n  _padding += forge.util.fillString(String.fromCharCode(0x00), 64);\n\n  // g values\n  _g = [\n    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n    1, 6, 11, 0, 5, 10, 15, 4, 9, 14, 3, 8, 13, 2, 7, 12,\n    5, 8, 11, 14, 1, 4, 7, 10, 13, 0, 3, 6, 9, 12, 15, 2,\n    0, 7, 14, 5, 12, 3, 10, 1, 8, 15, 6, 13, 4, 11, 2, 9];\n\n  // rounds table\n  _r = [\n    7, 12, 17, 22,  7, 12, 17, 22,  7, 12, 17, 22,  7, 12, 17, 22,\n    5,  9, 14, 20,  5,  9, 14, 20,  5,  9, 14, 20,  5,  9, 14, 20,\n    4, 11, 16, 23,  4, 11, 16, 23,  4, 11, 16, 23,  4, 11, 16, 23,\n    6, 10, 15, 21,  6, 10, 15, 21,  6, 10, 15, 21,  6, 10, 15, 21];\n\n  // get the result of abs(sin(i + 1)) as a 32-bit integer\n  _k = new Array(64);\n  for(var i = 0; i < 64; ++i) {\n    _k[i] = Math.floor(Math.abs(Math.sin(i + 1)) * 0x100000000);\n  }\n\n  // now initialized\n  _initialized = true;\n}\n\n/**\n * Updates an MD5 state with the given byte buffer.\n *\n * @param s the MD5 state to update.\n * @param w the array to use to store words.\n * @param bytes the byte buffer to update with.\n */\nfunction _update(s, w, bytes) {\n  // consume 512 bit (64 byte) chunks\n  var t, a, b, c, d, f, r, i;\n  var len = bytes.length();\n  while(len >= 64) {\n    // initialize hash value for this chunk\n    a = s.h0;\n    b = s.h1;\n    c = s.h2;\n    d = s.h3;\n\n    // round 1\n    for(i = 0; i < 16; ++i) {\n      w[i] = bytes.getInt32Le();\n      f = d ^ (b & (c ^ d));\n      t = (a + f + _k[i] + w[i]);\n      r = _r[i];\n      a = d;\n      d = c;\n      c = b;\n      b += (t << r) | (t >>> (32 - r));\n    }\n    // round 2\n    for(; i < 32; ++i) {\n      f = c ^ (d & (b ^ c));\n      t = (a + f + _k[i] + w[_g[i]]);\n      r = _r[i];\n      a = d;\n      d = c;\n      c = b;\n      b += (t << r) | (t >>> (32 - r));\n    }\n    // round 3\n    for(; i < 48; ++i) {\n      f = b ^ c ^ d;\n      t = (a + f + _k[i] + w[_g[i]]);\n      r = _r[i];\n      a = d;\n      d = c;\n      c = b;\n      b += (t << r) | (t >>> (32 - r));\n    }\n    // round 4\n    for(; i < 64; ++i) {\n      f = c ^ (b | ~d);\n      t = (a + f + _k[i] + w[_g[i]]);\n      r = _r[i];\n      a = d;\n      d = c;\n      c = b;\n      b += (t << r) | (t >>> (32 - r));\n    }\n\n    // update hash state\n    s.h0 = (s.h0 + a) | 0;\n    s.h1 = (s.h1 + b) | 0;\n    s.h2 = (s.h2 + c) | 0;\n    s.h3 = (s.h3 + d) | 0;\n\n    len -= 64;\n  }\n}\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","/**\n * Partial implementation of PKCS#1 v2.2: RSA-OEAP\n *\n * Modified but based on the following MIT and BSD licensed code:\n *\n * https://github.com/kjur/jsjws/blob/master/rsa.js:\n *\n * The 'jsjws'(JSON Web Signature JavaScript Library) License\n *\n * Copyright (c) 2012 Kenji Urushima\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * http://webrsa.cvs.sourceforge.net/viewvc/webrsa/Client/RSAES-OAEP.js?content-type=text%2Fplain:\n *\n * RSAES-OAEP.js\n * $Id: RSAES-OAEP.js,v 1.1.1.1 2003/03/19 15:37:20 ellispritchard Exp $\n * JavaScript Implementation of PKCS #1 v2.1 RSA CRYPTOGRAPHY STANDARD (RSA Laboratories, June 14, 2002)\n * Copyright (C) Ellis Pritchard, Guardian Unlimited 2003.\n * Contact: ellis@nukinetics.com\n * Distributed under the BSD License.\n *\n * Official documentation: http://www.rsa.com/rsalabs/node.asp?id=2125\n *\n * @author Evan Jones (http://evanjones.ca/)\n * @author Dave Longley\n *\n * Copyright (c) 2013-2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./util');\nrequire('./random');\nrequire('./sha1');\n\n// shortcut for PKCS#1 API\nvar pkcs1 = module.exports = forge.pkcs1 = forge.pkcs1 || {};\n\n/**\n * Encode the given RSAES-OAEP message (M) using key, with optional label (L)\n * and seed.\n *\n * This method does not perform RSA encryption, it only encodes the message\n * using RSAES-OAEP.\n *\n * @param key the RSA key to use.\n * @param message the message to encode.\n * @param options the options to use:\n *          label an optional label to use.\n *          seed the seed to use.\n *          md the message digest object to use, undefined for SHA-1.\n *          mgf1 optional mgf1 parameters:\n *            md the message digest object to use for MGF1.\n *\n * @return the encoded message bytes.\n */\npkcs1.encode_rsa_oaep = function(key, message, options) {\n  // parse arguments\n  var label;\n  var seed;\n  var md;\n  var mgf1Md;\n  // legacy args (label, seed, md)\n  if(typeof options === 'string') {\n    label = options;\n    seed = arguments[3] || undefined;\n    md = arguments[4] || undefined;\n  } else if(options) {\n    label = options.label || undefined;\n    seed = options.seed || undefined;\n    md = options.md || undefined;\n    if(options.mgf1 && options.mgf1.md) {\n      mgf1Md = options.mgf1.md;\n    }\n  }\n\n  // default OAEP to SHA-1 message digest\n  if(!md) {\n    md = forge.md.sha1.create();\n  } else {\n    md.start();\n  }\n\n  // default MGF-1 to same as OAEP\n  if(!mgf1Md) {\n    mgf1Md = md;\n  }\n\n  // compute length in bytes and check output\n  var keyLength = Math.ceil(key.n.bitLength() / 8);\n  var maxLength = keyLength - 2 * md.digestLength - 2;\n  if(message.length > maxLength) {\n    var error = new Error('RSAES-OAEP input message length is too long.');\n    error.length = message.length;\n    error.maxLength = maxLength;\n    throw error;\n  }\n\n  if(!label) {\n    label = '';\n  }\n  md.update(label, 'raw');\n  var lHash = md.digest();\n\n  var PS = '';\n  var PS_length = maxLength - message.length;\n  for(var i = 0; i < PS_length; i++) {\n    PS += '\\x00';\n  }\n\n  var DB = lHash.getBytes() + PS + '\\x01' + message;\n\n  if(!seed) {\n    seed = forge.random.getBytes(md.digestLength);\n  } else if(seed.length !== md.digestLength) {\n    var error = new Error('Invalid RSAES-OAEP seed. The seed length must ' +\n      'match the digest length.');\n    error.seedLength = seed.length;\n    error.digestLength = md.digestLength;\n    throw error;\n  }\n\n  var dbMask = rsa_mgf1(seed, keyLength - md.digestLength - 1, mgf1Md);\n  var maskedDB = forge.util.xorBytes(DB, dbMask, DB.length);\n\n  var seedMask = rsa_mgf1(maskedDB, md.digestLength, mgf1Md);\n  var maskedSeed = forge.util.xorBytes(seed, seedMask, seed.length);\n\n  // return encoded message\n  return '\\x00' + maskedSeed + maskedDB;\n};\n\n/**\n * Decode the given RSAES-OAEP encoded message (EM) using key, with optional\n * label (L).\n *\n * This method does not perform RSA decryption, it only decodes the message\n * using RSAES-OAEP.\n *\n * @param key the RSA key to use.\n * @param em the encoded message to decode.\n * @param options the options to use:\n *          label an optional label to use.\n *          md the message digest object to use for OAEP, undefined for SHA-1.\n *          mgf1 optional mgf1 parameters:\n *            md the message digest object to use for MGF1.\n *\n * @return the decoded message bytes.\n */\npkcs1.decode_rsa_oaep = function(key, em, options) {\n  // parse args\n  var label;\n  var md;\n  var mgf1Md;\n  // legacy args\n  if(typeof options === 'string') {\n    label = options;\n    md = arguments[3] || undefined;\n  } else if(options) {\n    label = options.label || undefined;\n    md = options.md || undefined;\n    if(options.mgf1 && options.mgf1.md) {\n      mgf1Md = options.mgf1.md;\n    }\n  }\n\n  // compute length in bytes\n  var keyLength = Math.ceil(key.n.bitLength() / 8);\n\n  if(em.length !== keyLength) {\n    var error = new Error('RSAES-OAEP encoded message length is invalid.');\n    error.length = em.length;\n    error.expectedLength = keyLength;\n    throw error;\n  }\n\n  // default OAEP to SHA-1 message digest\n  if(md === undefined) {\n    md = forge.md.sha1.create();\n  } else {\n    md.start();\n  }\n\n  // default MGF-1 to same as OAEP\n  if(!mgf1Md) {\n    mgf1Md = md;\n  }\n\n  if(keyLength < 2 * md.digestLength + 2) {\n    throw new Error('RSAES-OAEP key is too short for the hash function.');\n  }\n\n  if(!label) {\n    label = '';\n  }\n  md.update(label, 'raw');\n  var lHash = md.digest().getBytes();\n\n  // split the message into its parts\n  var y = em.charAt(0);\n  var maskedSeed = em.substring(1, md.digestLength + 1);\n  var maskedDB = em.substring(1 + md.digestLength);\n\n  var seedMask = rsa_mgf1(maskedDB, md.digestLength, mgf1Md);\n  var seed = forge.util.xorBytes(maskedSeed, seedMask, maskedSeed.length);\n\n  var dbMask = rsa_mgf1(seed, keyLength - md.digestLength - 1, mgf1Md);\n  var db = forge.util.xorBytes(maskedDB, dbMask, maskedDB.length);\n\n  var lHashPrime = db.substring(0, md.digestLength);\n\n  // constant time check that all values match what is expected\n  var error = (y !== '\\x00');\n\n  // constant time check lHash vs lHashPrime\n  for(var i = 0; i < md.digestLength; ++i) {\n    error |= (lHash.charAt(i) !== lHashPrime.charAt(i));\n  }\n\n  // \"constant time\" find the 0x1 byte separating the padding (zeros) from the\n  // message\n  // TODO: It must be possible to do this in a better/smarter way?\n  var in_ps = 1;\n  var index = md.digestLength;\n  for(var j = md.digestLength; j < db.length; j++) {\n    var code = db.charCodeAt(j);\n\n    var is_0 = (code & 0x1) ^ 0x1;\n\n    // non-zero if not 0 or 1 in the ps section\n    var error_mask = in_ps ? 0xfffe : 0x0000;\n    error |= (code & error_mask);\n\n    // latch in_ps to zero after we find 0x1\n    in_ps = in_ps & is_0;\n    index += in_ps;\n  }\n\n  if(error || db.charCodeAt(index) !== 0x1) {\n    throw new Error('Invalid RSAES-OAEP padding.');\n  }\n\n  return db.substring(index + 1);\n};\n\nfunction rsa_mgf1(seed, maskLength, hash) {\n  // default to SHA-1 message digest\n  if(!hash) {\n    hash = forge.md.sha1.create();\n  }\n  var t = '';\n  var count = Math.ceil(maskLength / hash.digestLength);\n  for(var i = 0; i < count; ++i) {\n    var c = String.fromCharCode(\n      (i >> 24) & 0xFF, (i >> 16) & 0xFF, (i >> 8) & 0xFF, i & 0xFF);\n    hash.start();\n    hash.update(seed + c);\n    t += hash.digest().getBytes();\n  }\n  return t.substring(0, maskLength);\n}\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","/**\n * Password-Based Key-Derivation Function #2 implementation.\n *\n * See RFC 2898 for details.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2013 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./hmac');\nrequire('./md');\nrequire('./util');\n\nvar pkcs5 = forge.pkcs5 = forge.pkcs5 || {};\n\nvar crypto;\nif(forge.util.isNodejs && !forge.options.usePureJavaScript) {\n  crypto = require('crypto');\n}\n\n/**\n * Derives a key from a password.\n *\n * @param p the password as a binary-encoded string of bytes.\n * @param s the salt as a binary-encoded string of bytes.\n * @param c the iteration count, a positive integer.\n * @param dkLen the intended length, in bytes, of the derived key,\n *          (max: 2^32 - 1) * hash length of the PRF.\n * @param [md] the message digest (or algorithm identifier as a string) to use\n *          in the PRF, defaults to SHA-1.\n * @param [callback(err, key)] presence triggers asynchronous version, called\n *          once the operation completes.\n *\n * @return the derived key, as a binary-encoded string of bytes, for the\n *           synchronous version (if no callback is specified).\n */\nmodule.exports = forge.pbkdf2 = pkcs5.pbkdf2 = function(\n  p, s, c, dkLen, md, callback) {\n  if(typeof md === 'function') {\n    callback = md;\n    md = null;\n  }\n\n  // use native implementation if possible and not disabled, note that\n  // some node versions only support SHA-1, others allow digest to be changed\n  if(forge.util.isNodejs && !forge.options.usePureJavaScript &&\n    crypto.pbkdf2 && (md === null || typeof md !== 'object') &&\n    (crypto.pbkdf2Sync.length > 4 || (!md || md === 'sha1'))) {\n    if(typeof md !== 'string') {\n      // default prf to SHA-1\n      md = 'sha1';\n    }\n    p = Buffer.from(p, 'binary');\n    s = Buffer.from(s, 'binary');\n    if(!callback) {\n      if(crypto.pbkdf2Sync.length === 4) {\n        return crypto.pbkdf2Sync(p, s, c, dkLen).toString('binary');\n      }\n      return crypto.pbkdf2Sync(p, s, c, dkLen, md).toString('binary');\n    }\n    if(crypto.pbkdf2Sync.length === 4) {\n      return crypto.pbkdf2(p, s, c, dkLen, function(err, key) {\n        if(err) {\n          return callback(err);\n        }\n        callback(null, key.toString('binary'));\n      });\n    }\n    return crypto.pbkdf2(p, s, c, dkLen, md, function(err, key) {\n      if(err) {\n        return callback(err);\n      }\n      callback(null, key.toString('binary'));\n    });\n  }\n\n  if(typeof md === 'undefined' || md === null) {\n    // default prf to SHA-1\n    md = 'sha1';\n  }\n  if(typeof md === 'string') {\n    if(!(md in forge.md.algorithms)) {\n      throw new Error('Unknown hash algorithm: ' + md);\n    }\n    md = forge.md[md].create();\n  }\n\n  var hLen = md.digestLength;\n\n  /* 1. If dkLen > (2^32 - 1) * hLen, output \"derived key too long\" and\n    stop. */\n  if(dkLen > (0xFFFFFFFF * hLen)) {\n    var err = new Error('Derived key is too long.');\n    if(callback) {\n      return callback(err);\n    }\n    throw err;\n  }\n\n  /* 2. Let len be the number of hLen-octet blocks in the derived key,\n    rounding up, and let r be the number of octets in the last\n    block:\n\n    len = CEIL(dkLen / hLen),\n    r = dkLen - (len - 1) * hLen. */\n  var len = Math.ceil(dkLen / hLen);\n  var r = dkLen - (len - 1) * hLen;\n\n  /* 3. For each block of the derived key apply the function F defined\n    below to the password P, the salt S, the iteration count c, and\n    the block index to compute the block:\n\n    T_1 = F(P, S, c, 1),\n    T_2 = F(P, S, c, 2),\n    ...\n    T_len = F(P, S, c, len),\n\n    where the function F is defined as the exclusive-or sum of the\n    first c iterates of the underlying pseudorandom function PRF\n    applied to the password P and the concatenation of the salt S\n    and the block index i:\n\n    F(P, S, c, i) = u_1 XOR u_2 XOR ... XOR u_c\n\n    where\n\n    u_1 = PRF(P, S || INT(i)),\n    u_2 = PRF(P, u_1),\n    ...\n    u_c = PRF(P, u_{c-1}).\n\n    Here, INT(i) is a four-octet encoding of the integer i, most\n    significant octet first. */\n  var prf = forge.hmac.create();\n  prf.start(md, p);\n  var dk = '';\n  var xor, u_c, u_c1;\n\n  // sync version\n  if(!callback) {\n    for(var i = 1; i <= len; ++i) {\n      // PRF(P, S || INT(i)) (first iteration)\n      prf.start(null, null);\n      prf.update(s);\n      prf.update(forge.util.int32ToBytes(i));\n      xor = u_c1 = prf.digest().getBytes();\n\n      // PRF(P, u_{c-1}) (other iterations)\n      for(var j = 2; j <= c; ++j) {\n        prf.start(null, null);\n        prf.update(u_c1);\n        u_c = prf.digest().getBytes();\n        // F(p, s, c, i)\n        xor = forge.util.xorBytes(xor, u_c, hLen);\n        u_c1 = u_c;\n      }\n\n      /* 4. Concatenate the blocks and extract the first dkLen octets to\n        produce a derived key DK:\n\n        DK = T_1 || T_2 ||  ...  || T_len<0..r-1> */\n      dk += (i < len) ? xor : xor.substr(0, r);\n    }\n    /* 5. Output the derived key DK. */\n    return dk;\n  }\n\n  // async version\n  var i = 1, j;\n  function outer() {\n    if(i > len) {\n      // done\n      return callback(null, dk);\n    }\n\n    // PRF(P, S || INT(i)) (first iteration)\n    prf.start(null, null);\n    prf.update(s);\n    prf.update(forge.util.int32ToBytes(i));\n    xor = u_c1 = prf.digest().getBytes();\n\n    // PRF(P, u_{c-1}) (other iterations)\n    j = 2;\n    inner();\n  }\n\n  function inner() {\n    if(j <= c) {\n      prf.start(null, null);\n      prf.update(u_c1);\n      u_c = prf.digest().getBytes();\n      // F(p, s, c, i)\n      xor = forge.util.xorBytes(xor, u_c, hLen);\n      u_c1 = u_c;\n      ++j;\n      return forge.util.setImmediate(inner);\n    }\n\n    /* 4. Concatenate the blocks and extract the first dkLen octets to\n      produce a derived key DK:\n\n      DK = T_1 || T_2 ||  ...  || T_len<0..r-1> */\n    dk += (i < len) ? xor : xor.substr(0, r);\n\n    ++i;\n    outer();\n  }\n\n  outer();\n};\n","/**\n * Secure Hash Algorithm with a 1024-bit block size implementation.\n *\n * This includes: SHA-512, SHA-384, SHA-512/224, and SHA-512/256. For\n * SHA-256 (block size 512 bits), see sha256.js.\n *\n * See FIPS 180-4 for details.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2014-2015 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./md');\nrequire('./util');\n\nvar sha512 = module.exports = forge.sha512 = forge.sha512 || {};\n\n// SHA-512\nforge.md.sha512 = forge.md.algorithms.sha512 = sha512;\n\n// SHA-384\nvar sha384 = forge.sha384 = forge.sha512.sha384 = forge.sha512.sha384 || {};\nsha384.create = function() {\n  return sha512.create('SHA-384');\n};\nforge.md.sha384 = forge.md.algorithms.sha384 = sha384;\n\n// SHA-512/256\nforge.sha512.sha256 = forge.sha512.sha256 || {\n  create: function() {\n    return sha512.create('SHA-512/256');\n  }\n};\nforge.md['sha512/256'] = forge.md.algorithms['sha512/256'] =\n  forge.sha512.sha256;\n\n// SHA-512/224\nforge.sha512.sha224 = forge.sha512.sha224 || {\n  create: function() {\n    return sha512.create('SHA-512/224');\n  }\n};\nforge.md['sha512/224'] = forge.md.algorithms['sha512/224'] =\n  forge.sha512.sha224;\n\n/**\n * Creates a SHA-2 message digest object.\n *\n * @param algorithm the algorithm to use (SHA-512, SHA-384, SHA-512/224,\n *          SHA-512/256).\n *\n * @return a message digest object.\n */\nsha512.create = function(algorithm) {\n  // do initialization as necessary\n  if(!_initialized) {\n    _init();\n  }\n\n  if(typeof algorithm === 'undefined') {\n    algorithm = 'SHA-512';\n  }\n\n  if(!(algorithm in _states)) {\n    throw new Error('Invalid SHA-512 algorithm: ' + algorithm);\n  }\n\n  // SHA-512 state contains eight 64-bit integers (each as two 32-bit ints)\n  var _state = _states[algorithm];\n  var _h = null;\n\n  // input buffer\n  var _input = forge.util.createBuffer();\n\n  // used for 64-bit word storage\n  var _w = new Array(80);\n  for(var wi = 0; wi < 80; ++wi) {\n    _w[wi] = new Array(2);\n  }\n\n  // determine digest length by algorithm name (default)\n  var digestLength = 64;\n  switch(algorithm) {\n    case 'SHA-384':\n      digestLength = 48;\n      break;\n    case 'SHA-512/256':\n      digestLength = 32;\n      break;\n    case 'SHA-512/224':\n      digestLength = 28;\n      break;\n  }\n\n  // message digest object\n  var md = {\n    // SHA-512 => sha512\n    algorithm: algorithm.replace('-', '').toLowerCase(),\n    blockLength: 128,\n    digestLength: digestLength,\n    // 56-bit length of message so far (does not including padding)\n    messageLength: 0,\n    // true message length\n    fullMessageLength: null,\n    // size of message length in bytes\n    messageLengthSize: 16\n  };\n\n  /**\n   * Starts the digest.\n   *\n   * @return this digest object.\n   */\n  md.start = function() {\n    // up to 56-bit message length for convenience\n    md.messageLength = 0;\n\n    // full message length (set md.messageLength128 for backwards-compatibility)\n    md.fullMessageLength = md.messageLength128 = [];\n    var int32s = md.messageLengthSize / 4;\n    for(var i = 0; i < int32s; ++i) {\n      md.fullMessageLength.push(0);\n    }\n    _input = forge.util.createBuffer();\n    _h = new Array(_state.length);\n    for(var i = 0; i < _state.length; ++i) {\n      _h[i] = _state[i].slice(0);\n    }\n    return md;\n  };\n  // start digest automatically for first time\n  md.start();\n\n  /**\n   * Updates the digest with the given message input. The given input can\n   * treated as raw input (no encoding will be applied) or an encoding of\n   * 'utf8' maybe given to encode the input using UTF-8.\n   *\n   * @param msg the message input to update with.\n   * @param encoding the encoding to use (default: 'raw', other: 'utf8').\n   *\n   * @return this digest object.\n   */\n  md.update = function(msg, encoding) {\n    if(encoding === 'utf8') {\n      msg = forge.util.encodeUtf8(msg);\n    }\n\n    // update message length\n    var len = msg.length;\n    md.messageLength += len;\n    len = [(len / 0x100000000) >>> 0, len >>> 0];\n    for(var i = md.fullMessageLength.length - 1; i >= 0; --i) {\n      md.fullMessageLength[i] += len[1];\n      len[1] = len[0] + ((md.fullMessageLength[i] / 0x100000000) >>> 0);\n      md.fullMessageLength[i] = md.fullMessageLength[i] >>> 0;\n      len[0] = ((len[1] / 0x100000000) >>> 0);\n    }\n\n    // add bytes to input buffer\n    _input.putBytes(msg);\n\n    // process bytes\n    _update(_h, _w, _input);\n\n    // compact input buffer every 2K or if empty\n    if(_input.read > 2048 || _input.length() === 0) {\n      _input.compact();\n    }\n\n    return md;\n  };\n\n  /**\n   * Produces the digest.\n   *\n   * @return a byte buffer containing the digest value.\n   */\n  md.digest = function() {\n    /* Note: Here we copy the remaining bytes in the input buffer and\n    add the appropriate SHA-512 padding. Then we do the final update\n    on a copy of the state so that if the user wants to get\n    intermediate digests they can do so. */\n\n    /* Determine the number of bytes that must be added to the message\n    to ensure its length is congruent to 896 mod 1024. In other words,\n    the data to be digested must be a multiple of 1024 bits (or 128 bytes).\n    This data includes the message, some padding, and the length of the\n    message. Since the length of the message will be encoded as 16 bytes (128\n    bits), that means that the last segment of the data must have 112 bytes\n    (896 bits) of message and padding. Therefore, the length of the message\n    plus the padding must be congruent to 896 mod 1024 because\n    1024 - 128 = 896.\n\n    In order to fill up the message length it must be filled with\n    padding that begins with 1 bit followed by all 0 bits. Padding\n    must *always* be present, so if the message length is already\n    congruent to 896 mod 1024, then 1024 padding bits must be added. */\n\n    var finalBlock = forge.util.createBuffer();\n    finalBlock.putBytes(_input.bytes());\n\n    // compute remaining size to be digested (include message length size)\n    var remaining = (\n      md.fullMessageLength[md.fullMessageLength.length - 1] +\n      md.messageLengthSize);\n\n    // add padding for overflow blockSize - overflow\n    // _padding starts with 1 byte with first bit is set (byte value 128), then\n    // there may be up to (blockSize - 1) other pad bytes\n    var overflow = remaining & (md.blockLength - 1);\n    finalBlock.putBytes(_padding.substr(0, md.blockLength - overflow));\n\n    // serialize message length in bits in big-endian order; since length\n    // is stored in bytes we multiply by 8 and add carry from next int\n    var next, carry;\n    var bits = md.fullMessageLength[0] * 8;\n    for(var i = 0; i < md.fullMessageLength.length - 1; ++i) {\n      next = md.fullMessageLength[i + 1] * 8;\n      carry = (next / 0x100000000) >>> 0;\n      bits += carry;\n      finalBlock.putInt32(bits >>> 0);\n      bits = next >>> 0;\n    }\n    finalBlock.putInt32(bits);\n\n    var h = new Array(_h.length);\n    for(var i = 0; i < _h.length; ++i) {\n      h[i] = _h[i].slice(0);\n    }\n    _update(h, _w, finalBlock);\n    var rval = forge.util.createBuffer();\n    var hlen;\n    if(algorithm === 'SHA-512') {\n      hlen = h.length;\n    } else if(algorithm === 'SHA-384') {\n      hlen = h.length - 2;\n    } else {\n      hlen = h.length - 4;\n    }\n    for(var i = 0; i < hlen; ++i) {\n      rval.putInt32(h[i][0]);\n      if(i !== hlen - 1 || algorithm !== 'SHA-512/224') {\n        rval.putInt32(h[i][1]);\n      }\n    }\n    return rval;\n  };\n\n  return md;\n};\n\n// sha-512 padding bytes not initialized yet\nvar _padding = null;\nvar _initialized = false;\n\n// table of constants\nvar _k = null;\n\n// initial hash states\nvar _states = null;\n\n/**\n * Initializes the constant tables.\n */\nfunction _init() {\n  // create padding\n  _padding = String.fromCharCode(128);\n  _padding += forge.util.fillString(String.fromCharCode(0x00), 128);\n\n  // create K table for SHA-512\n  _k = [\n    [0x428a2f98, 0xd728ae22], [0x71374491, 0x23ef65cd],\n    [0xb5c0fbcf, 0xec4d3b2f], [0xe9b5dba5, 0x8189dbbc],\n    [0x3956c25b, 0xf348b538], [0x59f111f1, 0xb605d019],\n    [0x923f82a4, 0xaf194f9b], [0xab1c5ed5, 0xda6d8118],\n    [0xd807aa98, 0xa3030242], [0x12835b01, 0x45706fbe],\n    [0x243185be, 0x4ee4b28c], [0x550c7dc3, 0xd5ffb4e2],\n    [0x72be5d74, 0xf27b896f], [0x80deb1fe, 0x3b1696b1],\n    [0x9bdc06a7, 0x25c71235], [0xc19bf174, 0xcf692694],\n    [0xe49b69c1, 0x9ef14ad2], [0xefbe4786, 0x384f25e3],\n    [0x0fc19dc6, 0x8b8cd5b5], [0x240ca1cc, 0x77ac9c65],\n    [0x2de92c6f, 0x592b0275], [0x4a7484aa, 0x6ea6e483],\n    [0x5cb0a9dc, 0xbd41fbd4], [0x76f988da, 0x831153b5],\n    [0x983e5152, 0xee66dfab], [0xa831c66d, 0x2db43210],\n    [0xb00327c8, 0x98fb213f], [0xbf597fc7, 0xbeef0ee4],\n    [0xc6e00bf3, 0x3da88fc2], [0xd5a79147, 0x930aa725],\n    [0x06ca6351, 0xe003826f], [0x14292967, 0x0a0e6e70],\n    [0x27b70a85, 0x46d22ffc], [0x2e1b2138, 0x5c26c926],\n    [0x4d2c6dfc, 0x5ac42aed], [0x53380d13, 0x9d95b3df],\n    [0x650a7354, 0x8baf63de], [0x766a0abb, 0x3c77b2a8],\n    [0x81c2c92e, 0x47edaee6], [0x92722c85, 0x1482353b],\n    [0xa2bfe8a1, 0x4cf10364], [0xa81a664b, 0xbc423001],\n    [0xc24b8b70, 0xd0f89791], [0xc76c51a3, 0x0654be30],\n    [0xd192e819, 0xd6ef5218], [0xd6990624, 0x5565a910],\n    [0xf40e3585, 0x5771202a], [0x106aa070, 0x32bbd1b8],\n    [0x19a4c116, 0xb8d2d0c8], [0x1e376c08, 0x5141ab53],\n    [0x2748774c, 0xdf8eeb99], [0x34b0bcb5, 0xe19b48a8],\n    [0x391c0cb3, 0xc5c95a63], [0x4ed8aa4a, 0xe3418acb],\n    [0x5b9cca4f, 0x7763e373], [0x682e6ff3, 0xd6b2b8a3],\n    [0x748f82ee, 0x5defb2fc], [0x78a5636f, 0x43172f60],\n    [0x84c87814, 0xa1f0ab72], [0x8cc70208, 0x1a6439ec],\n    [0x90befffa, 0x23631e28], [0xa4506ceb, 0xde82bde9],\n    [0xbef9a3f7, 0xb2c67915], [0xc67178f2, 0xe372532b],\n    [0xca273ece, 0xea26619c], [0xd186b8c7, 0x21c0c207],\n    [0xeada7dd6, 0xcde0eb1e], [0xf57d4f7f, 0xee6ed178],\n    [0x06f067aa, 0x72176fba], [0x0a637dc5, 0xa2c898a6],\n    [0x113f9804, 0xbef90dae], [0x1b710b35, 0x131c471b],\n    [0x28db77f5, 0x23047d84], [0x32caab7b, 0x40c72493],\n    [0x3c9ebe0a, 0x15c9bebc], [0x431d67c4, 0x9c100d4c],\n    [0x4cc5d4be, 0xcb3e42b6], [0x597f299c, 0xfc657e2a],\n    [0x5fcb6fab, 0x3ad6faec], [0x6c44198c, 0x4a475817]\n  ];\n\n  // initial hash states\n  _states = {};\n  _states['SHA-512'] = [\n    [0x6a09e667, 0xf3bcc908],\n    [0xbb67ae85, 0x84caa73b],\n    [0x3c6ef372, 0xfe94f82b],\n    [0xa54ff53a, 0x5f1d36f1],\n    [0x510e527f, 0xade682d1],\n    [0x9b05688c, 0x2b3e6c1f],\n    [0x1f83d9ab, 0xfb41bd6b],\n    [0x5be0cd19, 0x137e2179]\n  ];\n  _states['SHA-384'] = [\n    [0xcbbb9d5d, 0xc1059ed8],\n    [0x629a292a, 0x367cd507],\n    [0x9159015a, 0x3070dd17],\n    [0x152fecd8, 0xf70e5939],\n    [0x67332667, 0xffc00b31],\n    [0x8eb44a87, 0x68581511],\n    [0xdb0c2e0d, 0x64f98fa7],\n    [0x47b5481d, 0xbefa4fa4]\n  ];\n  _states['SHA-512/256'] = [\n    [0x22312194, 0xFC2BF72C],\n    [0x9F555FA3, 0xC84C64C2],\n    [0x2393B86B, 0x6F53B151],\n    [0x96387719, 0x5940EABD],\n    [0x96283EE2, 0xA88EFFE3],\n    [0xBE5E1E25, 0x53863992],\n    [0x2B0199FC, 0x2C85B8AA],\n    [0x0EB72DDC, 0x81C52CA2]\n  ];\n  _states['SHA-512/224'] = [\n    [0x8C3D37C8, 0x19544DA2],\n    [0x73E19966, 0x89DCD4D6],\n    [0x1DFAB7AE, 0x32FF9C82],\n    [0x679DD514, 0x582F9FCF],\n    [0x0F6D2B69, 0x7BD44DA8],\n    [0x77E36F73, 0x04C48942],\n    [0x3F9D85A8, 0x6A1D36C8],\n    [0x1112E6AD, 0x91D692A1]\n  ];\n\n  // now initialized\n  _initialized = true;\n}\n\n/**\n * Updates a SHA-512 state with the given byte buffer.\n *\n * @param s the SHA-512 state to update.\n * @param w the array to use to store words.\n * @param bytes the byte buffer to update with.\n */\nfunction _update(s, w, bytes) {\n  // consume 512 bit (128 byte) chunks\n  var t1_hi, t1_lo;\n  var t2_hi, t2_lo;\n  var s0_hi, s0_lo;\n  var s1_hi, s1_lo;\n  var ch_hi, ch_lo;\n  var maj_hi, maj_lo;\n  var a_hi, a_lo;\n  var b_hi, b_lo;\n  var c_hi, c_lo;\n  var d_hi, d_lo;\n  var e_hi, e_lo;\n  var f_hi, f_lo;\n  var g_hi, g_lo;\n  var h_hi, h_lo;\n  var i, hi, lo, w2, w7, w15, w16;\n  var len = bytes.length();\n  while(len >= 128) {\n    // the w array will be populated with sixteen 64-bit big-endian words\n    // and then extended into 64 64-bit words according to SHA-512\n    for(i = 0; i < 16; ++i) {\n      w[i][0] = bytes.getInt32() >>> 0;\n      w[i][1] = bytes.getInt32() >>> 0;\n    }\n    for(; i < 80; ++i) {\n      // for word 2 words ago: ROTR 19(x) ^ ROTR 61(x) ^ SHR 6(x)\n      w2 = w[i - 2];\n      hi = w2[0];\n      lo = w2[1];\n\n      // high bits\n      t1_hi = (\n        ((hi >>> 19) | (lo << 13)) ^ // ROTR 19\n        ((lo >>> 29) | (hi << 3)) ^ // ROTR 61/(swap + ROTR 29)\n        (hi >>> 6)) >>> 0; // SHR 6\n      // low bits\n      t1_lo = (\n        ((hi << 13) | (lo >>> 19)) ^ // ROTR 19\n        ((lo << 3) | (hi >>> 29)) ^ // ROTR 61/(swap + ROTR 29)\n        ((hi << 26) | (lo >>> 6))) >>> 0; // SHR 6\n\n      // for word 15 words ago: ROTR 1(x) ^ ROTR 8(x) ^ SHR 7(x)\n      w15 = w[i - 15];\n      hi = w15[0];\n      lo = w15[1];\n\n      // high bits\n      t2_hi = (\n        ((hi >>> 1) | (lo << 31)) ^ // ROTR 1\n        ((hi >>> 8) | (lo << 24)) ^ // ROTR 8\n        (hi >>> 7)) >>> 0; // SHR 7\n      // low bits\n      t2_lo = (\n        ((hi << 31) | (lo >>> 1)) ^ // ROTR 1\n        ((hi << 24) | (lo >>> 8)) ^ // ROTR 8\n        ((hi << 25) | (lo >>> 7))) >>> 0; // SHR 7\n\n      // sum(t1, word 7 ago, t2, word 16 ago) modulo 2^64 (carry lo overflow)\n      w7 = w[i - 7];\n      w16 = w[i - 16];\n      lo = (t1_lo + w7[1] + t2_lo + w16[1]);\n      w[i][0] = (t1_hi + w7[0] + t2_hi + w16[0] +\n        ((lo / 0x100000000) >>> 0)) >>> 0;\n      w[i][1] = lo >>> 0;\n    }\n\n    // initialize hash value for this chunk\n    a_hi = s[0][0];\n    a_lo = s[0][1];\n    b_hi = s[1][0];\n    b_lo = s[1][1];\n    c_hi = s[2][0];\n    c_lo = s[2][1];\n    d_hi = s[3][0];\n    d_lo = s[3][1];\n    e_hi = s[4][0];\n    e_lo = s[4][1];\n    f_hi = s[5][0];\n    f_lo = s[5][1];\n    g_hi = s[6][0];\n    g_lo = s[6][1];\n    h_hi = s[7][0];\n    h_lo = s[7][1];\n\n    // round function\n    for(i = 0; i < 80; ++i) {\n      // Sum1(e) = ROTR 14(e) ^ ROTR 18(e) ^ ROTR 41(e)\n      s1_hi = (\n        ((e_hi >>> 14) | (e_lo << 18)) ^ // ROTR 14\n        ((e_hi >>> 18) | (e_lo << 14)) ^ // ROTR 18\n        ((e_lo >>> 9) | (e_hi << 23))) >>> 0; // ROTR 41/(swap + ROTR 9)\n      s1_lo = (\n        ((e_hi << 18) | (e_lo >>> 14)) ^ // ROTR 14\n        ((e_hi << 14) | (e_lo >>> 18)) ^ // ROTR 18\n        ((e_lo << 23) | (e_hi >>> 9))) >>> 0; // ROTR 41/(swap + ROTR 9)\n\n      // Ch(e, f, g) (optimized the same way as SHA-1)\n      ch_hi = (g_hi ^ (e_hi & (f_hi ^ g_hi))) >>> 0;\n      ch_lo = (g_lo ^ (e_lo & (f_lo ^ g_lo))) >>> 0;\n\n      // Sum0(a) = ROTR 28(a) ^ ROTR 34(a) ^ ROTR 39(a)\n      s0_hi = (\n        ((a_hi >>> 28) | (a_lo << 4)) ^ // ROTR 28\n        ((a_lo >>> 2) | (a_hi << 30)) ^ // ROTR 34/(swap + ROTR 2)\n        ((a_lo >>> 7) | (a_hi << 25))) >>> 0; // ROTR 39/(swap + ROTR 7)\n      s0_lo = (\n        ((a_hi << 4) | (a_lo >>> 28)) ^ // ROTR 28\n        ((a_lo << 30) | (a_hi >>> 2)) ^ // ROTR 34/(swap + ROTR 2)\n        ((a_lo << 25) | (a_hi >>> 7))) >>> 0; // ROTR 39/(swap + ROTR 7)\n\n      // Maj(a, b, c) (optimized the same way as SHA-1)\n      maj_hi = ((a_hi & b_hi) | (c_hi & (a_hi ^ b_hi))) >>> 0;\n      maj_lo = ((a_lo & b_lo) | (c_lo & (a_lo ^ b_lo))) >>> 0;\n\n      // main algorithm\n      // t1 = (h + s1 + ch + _k[i] + _w[i]) modulo 2^64 (carry lo overflow)\n      lo = (h_lo + s1_lo + ch_lo + _k[i][1] + w[i][1]);\n      t1_hi = (h_hi + s1_hi + ch_hi + _k[i][0] + w[i][0] +\n        ((lo / 0x100000000) >>> 0)) >>> 0;\n      t1_lo = lo >>> 0;\n\n      // t2 = s0 + maj modulo 2^64 (carry lo overflow)\n      lo = s0_lo + maj_lo;\n      t2_hi = (s0_hi + maj_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n      t2_lo = lo >>> 0;\n\n      h_hi = g_hi;\n      h_lo = g_lo;\n\n      g_hi = f_hi;\n      g_lo = f_lo;\n\n      f_hi = e_hi;\n      f_lo = e_lo;\n\n      // e = (d + t1) modulo 2^64 (carry lo overflow)\n      lo = d_lo + t1_lo;\n      e_hi = (d_hi + t1_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n      e_lo = lo >>> 0;\n\n      d_hi = c_hi;\n      d_lo = c_lo;\n\n      c_hi = b_hi;\n      c_lo = b_lo;\n\n      b_hi = a_hi;\n      b_lo = a_lo;\n\n      // a = (t1 + t2) modulo 2^64 (carry lo overflow)\n      lo = t1_lo + t2_lo;\n      a_hi = (t1_hi + t2_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n      a_lo = lo >>> 0;\n    }\n\n    // update hash state (additional modulo 2^64)\n    lo = s[0][1] + a_lo;\n    s[0][0] = (s[0][0] + a_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n    s[0][1] = lo >>> 0;\n\n    lo = s[1][1] + b_lo;\n    s[1][0] = (s[1][0] + b_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n    s[1][1] = lo >>> 0;\n\n    lo = s[2][1] + c_lo;\n    s[2][0] = (s[2][0] + c_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n    s[2][1] = lo >>> 0;\n\n    lo = s[3][1] + d_lo;\n    s[3][0] = (s[3][0] + d_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n    s[3][1] = lo >>> 0;\n\n    lo = s[4][1] + e_lo;\n    s[4][0] = (s[4][0] + e_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n    s[4][1] = lo >>> 0;\n\n    lo = s[5][1] + f_lo;\n    s[5][0] = (s[5][0] + f_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n    s[5][1] = lo >>> 0;\n\n    lo = s[6][1] + g_lo;\n    s[6][0] = (s[6][0] + g_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n    s[6][1] = lo >>> 0;\n\n    lo = s[7][1] + h_lo;\n    s[7][0] = (s[7][0] + h_hi + ((lo / 0x100000000) >>> 0)) >>> 0;\n    s[7][1] = lo >>> 0;\n\n    len -= 128;\n  }\n}\n","/**\n * Hash-based Message Authentication Code implementation. Requires a message\n * digest object that can be obtained, for example, from forge.md.sha1 or\n * forge.md.md5.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2012 Digital Bazaar, Inc. All rights reserved.\n */\nvar forge = require('./forge');\nrequire('./md');\nrequire('./util');\n\n/* HMAC API */\nvar hmac = module.exports = forge.hmac = forge.hmac || {};\n\n/**\n * Creates an HMAC object that uses the given message digest object.\n *\n * @return an HMAC object.\n */\nhmac.create = function() {\n  // the hmac key to use\n  var _key = null;\n\n  // the message digest to use\n  var _md = null;\n\n  // the inner padding\n  var _ipadding = null;\n\n  // the outer padding\n  var _opadding = null;\n\n  // hmac context\n  var ctx = {};\n\n  /**\n   * Starts or restarts the HMAC with the given key and message digest.\n   *\n   * @param md the message digest to use, null to reuse the previous one,\n   *           a string to use builtin 'sha1', 'md5', 'sha256'.\n   * @param key the key to use as a string, array of bytes, byte buffer,\n   *           or null to reuse the previous key.\n   */\n  ctx.start = function(md, key) {\n    if(md !== null) {\n      if(typeof md === 'string') {\n        // create builtin message digest\n        md = md.toLowerCase();\n        if(md in forge.md.algorithms) {\n          _md = forge.md.algorithms[md].create();\n        } else {\n          throw new Error('Unknown hash algorithm \"' + md + '\"');\n        }\n      } else {\n        // store message digest\n        _md = md;\n      }\n    }\n\n    if(key === null) {\n      // reuse previous key\n      key = _key;\n    } else {\n      if(typeof key === 'string') {\n        // convert string into byte buffer\n        key = forge.util.createBuffer(key);\n      } else if(forge.util.isArray(key)) {\n        // convert byte array into byte buffer\n        var tmp = key;\n        key = forge.util.createBuffer();\n        for(var i = 0; i < tmp.length; ++i) {\n          key.putByte(tmp[i]);\n        }\n      }\n\n      // if key is longer than blocksize, hash it\n      var keylen = key.length();\n      if(keylen > _md.blockLength) {\n        _md.start();\n        _md.update(key.bytes());\n        key = _md.digest();\n      }\n\n      // mix key into inner and outer padding\n      // ipadding = [0x36 * blocksize] ^ key\n      // opadding = [0x5C * blocksize] ^ key\n      _ipadding = forge.util.createBuffer();\n      _opadding = forge.util.createBuffer();\n      keylen = key.length();\n      for(var i = 0; i < keylen; ++i) {\n        var tmp = key.at(i);\n        _ipadding.putByte(0x36 ^ tmp);\n        _opadding.putByte(0x5C ^ tmp);\n      }\n\n      // if key is shorter than blocksize, add additional padding\n      if(keylen < _md.blockLength) {\n        var tmp = _md.blockLength - keylen;\n        for(var i = 0; i < tmp; ++i) {\n          _ipadding.putByte(0x36);\n          _opadding.putByte(0x5C);\n        }\n      }\n      _key = key;\n      _ipadding = _ipadding.bytes();\n      _opadding = _opadding.bytes();\n    }\n\n    // digest is done like so: hash(opadding | hash(ipadding | message))\n\n    // prepare to do inner hash\n    // hash(ipadding | message)\n    _md.start();\n    _md.update(_ipadding);\n  };\n\n  /**\n   * Updates the HMAC with the given message bytes.\n   *\n   * @param bytes the bytes to update with.\n   */\n  ctx.update = function(bytes) {\n    _md.update(bytes);\n  };\n\n  /**\n   * Produces the Message Authentication Code (MAC).\n   *\n   * @return a byte buffer containing the digest value.\n   */\n  ctx.getMac = function() {\n    // digest is done like so: hash(opadding | hash(ipadding | message))\n    // here we do the outer hashing\n    var inner = _md.digest().bytes();\n    _md.start();\n    _md.update(_opadding);\n    _md.update(inner);\n    return _md.digest();\n  };\n  // alias for getMac\n  ctx.digest = ctx.getMac;\n\n  return ctx;\n};\n","/**\n * Prime number generation API.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./util');\nrequire('./jsbn');\nrequire('./random');\n\n(function() {\n\n// forge.prime already defined\nif(forge.prime) {\n  module.exports = forge.prime;\n  return;\n}\n\n/* PRIME API */\nvar prime = module.exports = forge.prime = forge.prime || {};\n\nvar BigInteger = forge.jsbn.BigInteger;\n\n// primes are 30k+i for i = 1, 7, 11, 13, 17, 19, 23, 29\nvar GCD_30_DELTA = [6, 4, 2, 4, 2, 4, 6, 2];\nvar THIRTY = new BigInteger(null);\nTHIRTY.fromInt(30);\nvar op_or = function(x, y) {return x|y;};\n\n/**\n * Generates a random probable prime with the given number of bits.\n *\n * Alternative algorithms can be specified by name as a string or as an\n * object with custom options like so:\n *\n * {\n *   name: 'PRIMEINC',\n *   options: {\n *     maxBlockTime: <the maximum amount of time to block the main\n *       thread before allowing I/O other JS to run>,\n *     millerRabinTests: <the number of miller-rabin tests to run>,\n *     workerScript: <the worker script URL>,\n *     workers: <the number of web workers (if supported) to use,\n *       -1 to use estimated cores minus one>.\n *     workLoad: the size of the work load, ie: number of possible prime\n *       numbers for each web worker to check per work assignment,\n *       (default: 100).\n *   }\n * }\n *\n * @param bits the number of bits for the prime number.\n * @param options the options to use.\n *          [algorithm] the algorithm to use (default: 'PRIMEINC').\n *          [prng] a custom crypto-secure pseudo-random number generator to use,\n *            that must define \"getBytesSync\".\n *\n * @return callback(err, num) called once the operation completes.\n */\nprime.generateProbablePrime = function(bits, options, callback) {\n  if(typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n  options = options || {};\n\n  // default to PRIMEINC algorithm\n  var algorithm = options.algorithm || 'PRIMEINC';\n  if(typeof algorithm === 'string') {\n    algorithm = {name: algorithm};\n  }\n  algorithm.options = algorithm.options || {};\n\n  // create prng with api that matches BigInteger secure random\n  var prng = options.prng || forge.random;\n  var rng = {\n    // x is an array to fill with bytes\n    nextBytes: function(x) {\n      var b = prng.getBytesSync(x.length);\n      for(var i = 0; i < x.length; ++i) {\n        x[i] = b.charCodeAt(i);\n      }\n    }\n  };\n\n  if(algorithm.name === 'PRIMEINC') {\n    return primeincFindPrime(bits, rng, algorithm.options, callback);\n  }\n\n  throw new Error('Invalid prime generation algorithm: ' + algorithm.name);\n};\n\nfunction primeincFindPrime(bits, rng, options, callback) {\n  if('workers' in options) {\n    return primeincFindPrimeWithWorkers(bits, rng, options, callback);\n  }\n  return primeincFindPrimeWithoutWorkers(bits, rng, options, callback);\n}\n\nfunction primeincFindPrimeWithoutWorkers(bits, rng, options, callback) {\n  // initialize random number\n  var num = generateRandom(bits, rng);\n\n  /* Note: All primes are of the form 30k+i for i < 30 and gcd(30, i)=1. The\n  number we are given is always aligned at 30k + 1. Each time the number is\n  determined not to be prime we add to get to the next 'i', eg: if the number\n  was at 30k + 1 we add 6. */\n  var deltaIdx = 0;\n\n  // get required number of MR tests\n  var mrTests = getMillerRabinTests(num.bitLength());\n  if('millerRabinTests' in options) {\n    mrTests = options.millerRabinTests;\n  }\n\n  // find prime nearest to 'num' for maxBlockTime ms\n  // 10 ms gives 5ms of leeway for other calculations before dropping\n  // below 60fps (1000/60 == 16.67), but in reality, the number will\n  // likely be higher due to an 'atomic' big int modPow\n  var maxBlockTime = 10;\n  if('maxBlockTime' in options) {\n    maxBlockTime = options.maxBlockTime;\n  }\n\n  _primeinc(num, bits, rng, deltaIdx, mrTests, maxBlockTime, callback);\n}\n\nfunction _primeinc(num, bits, rng, deltaIdx, mrTests, maxBlockTime, callback) {\n  var start = +new Date();\n  do {\n    // overflow, regenerate random number\n    if(num.bitLength() > bits) {\n      num = generateRandom(bits, rng);\n    }\n    // do primality test\n    if(num.isProbablePrime(mrTests)) {\n      return callback(null, num);\n    }\n    // get next potential prime\n    num.dAddOffset(GCD_30_DELTA[deltaIdx++ % 8], 0);\n  } while(maxBlockTime < 0 || (+new Date() - start < maxBlockTime));\n\n  // keep trying later\n  forge.util.setImmediate(function() {\n    _primeinc(num, bits, rng, deltaIdx, mrTests, maxBlockTime, callback);\n  });\n}\n\n// NOTE: This algorithm is indeterminate in nature because workers\n// run in parallel looking at different segments of numbers. Even if this\n// algorithm is run twice with the same input from a predictable RNG, it\n// may produce different outputs.\nfunction primeincFindPrimeWithWorkers(bits, rng, options, callback) {\n  // web workers unavailable\n  if(typeof Worker === 'undefined') {\n    return primeincFindPrimeWithoutWorkers(bits, rng, options, callback);\n  }\n\n  // initialize random number\n  var num = generateRandom(bits, rng);\n\n  // use web workers to generate keys\n  var numWorkers = options.workers;\n  var workLoad = options.workLoad || 100;\n  var range = workLoad * 30 / 8;\n  var workerScript = options.workerScript || 'forge/prime.worker.js';\n  if(numWorkers === -1) {\n    return forge.util.estimateCores(function(err, cores) {\n      if(err) {\n        // default to 2\n        cores = 2;\n      }\n      numWorkers = cores - 1;\n      generate();\n    });\n  }\n  generate();\n\n  function generate() {\n    // require at least 1 worker\n    numWorkers = Math.max(1, numWorkers);\n\n    // TODO: consider optimizing by starting workers outside getPrime() ...\n    // note that in order to clean up they will have to be made internally\n    // asynchronous which may actually be slower\n\n    // start workers immediately\n    var workers = [];\n    for(var i = 0; i < numWorkers; ++i) {\n      // FIXME: fix path or use blob URLs\n      workers[i] = new Worker(workerScript);\n    }\n    var running = numWorkers;\n\n    // listen for requests from workers and assign ranges to find prime\n    for(var i = 0; i < numWorkers; ++i) {\n      workers[i].addEventListener('message', workerMessage);\n    }\n\n    /* Note: The distribution of random numbers is unknown. Therefore, each\n    web worker is continuously allocated a range of numbers to check for a\n    random number until one is found.\n\n    Every 30 numbers will be checked just 8 times, because prime numbers\n    have the form:\n\n    30k+i, for i < 30 and gcd(30, i)=1 (there are 8 values of i for this)\n\n    Therefore, if we want a web worker to run N checks before asking for\n    a new range of numbers, each range must contain N*30/8 numbers.\n\n    For 100 checks (workLoad), this is a range of 375. */\n\n    var found = false;\n    function workerMessage(e) {\n      // ignore message, prime already found\n      if(found) {\n        return;\n      }\n\n      --running;\n      var data = e.data;\n      if(data.found) {\n        // terminate all workers\n        for(var i = 0; i < workers.length; ++i) {\n          workers[i].terminate();\n        }\n        found = true;\n        return callback(null, new BigInteger(data.prime, 16));\n      }\n\n      // overflow, regenerate random number\n      if(num.bitLength() > bits) {\n        num = generateRandom(bits, rng);\n      }\n\n      // assign new range to check\n      var hex = num.toString(16);\n\n      // start prime search\n      e.target.postMessage({\n        hex: hex,\n        workLoad: workLoad\n      });\n\n      num.dAddOffset(range, 0);\n    }\n  }\n}\n\n/**\n * Generates a random number using the given number of bits and RNG.\n *\n * @param bits the number of bits for the number.\n * @param rng the random number generator to use.\n *\n * @return the random number.\n */\nfunction generateRandom(bits, rng) {\n  var num = new BigInteger(bits, rng);\n  // force MSB set\n  var bits1 = bits - 1;\n  if(!num.testBit(bits1)) {\n    num.bitwiseTo(BigInteger.ONE.shiftLeft(bits1), op_or, num);\n  }\n  // align number on 30k+1 boundary\n  num.dAddOffset(31 - num.mod(THIRTY).byteValue(), 0);\n  return num;\n}\n\n/**\n * Returns the required number of Miller-Rabin tests to generate a\n * prime with an error probability of (1/2)^80.\n *\n * See Handbook of Applied Cryptography Chapter 4, Table 4.4.\n *\n * @param bits the bit size.\n *\n * @return the required number of iterations.\n */\nfunction getMillerRabinTests(bits) {\n  if(bits <= 100) return 27;\n  if(bits <= 150) return 18;\n  if(bits <= 200) return 15;\n  if(bits <= 250) return 12;\n  if(bits <= 300) return 9;\n  if(bits <= 350) return 8;\n  if(bits <= 400) return 7;\n  if(bits <= 500) return 6;\n  if(bits <= 600) return 5;\n  if(bits <= 800) return 4;\n  if(bits <= 1250) return 3;\n  return 2;\n}\n\n})();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * Javascript implementation of ASN.1 validators for PKCS#7 v1.5.\n *\n * @author Dave Longley\n * @author Stefan Siegl\n *\n * Copyright (c) 2012-2015 Digital Bazaar, Inc.\n * Copyright (c) 2012 Stefan Siegl <stesie@brokenpipe.de>\n *\n * The ASN.1 representation of PKCS#7 is as follows\n * (see RFC #2315 for details, http://www.ietf.org/rfc/rfc2315.txt):\n *\n * A PKCS#7 message consists of a ContentInfo on root level, which may\n * contain any number of further ContentInfo nested into it.\n *\n * ContentInfo ::= SEQUENCE {\n *   contentType                ContentType,\n *   content               [0]  EXPLICIT ANY DEFINED BY contentType OPTIONAL\n * }\n *\n * ContentType ::= OBJECT IDENTIFIER\n *\n * EnvelopedData ::= SEQUENCE {\n *   version                    Version,\n *   recipientInfos             RecipientInfos,\n *   encryptedContentInfo       EncryptedContentInfo\n * }\n *\n * EncryptedData ::= SEQUENCE {\n *   version                    Version,\n *   encryptedContentInfo       EncryptedContentInfo\n * }\n *\n * id-signedData OBJECT IDENTIFIER ::= { iso(1) member-body(2)\n *   us(840) rsadsi(113549) pkcs(1) pkcs7(7) 2 }\n *\n * SignedData ::= SEQUENCE {\n *   version           INTEGER,\n *   digestAlgorithms  DigestAlgorithmIdentifiers,\n *   contentInfo       ContentInfo,\n *   certificates      [0] IMPLICIT Certificates OPTIONAL,\n *   crls              [1] IMPLICIT CertificateRevocationLists OPTIONAL,\n *   signerInfos       SignerInfos\n * }\n *\n * SignerInfos ::= SET OF SignerInfo\n *\n * SignerInfo ::= SEQUENCE {\n *   version                    Version,\n *   issuerAndSerialNumber      IssuerAndSerialNumber,\n *   digestAlgorithm            DigestAlgorithmIdentifier,\n *   authenticatedAttributes    [0] IMPLICIT Attributes OPTIONAL,\n *   digestEncryptionAlgorithm  DigestEncryptionAlgorithmIdentifier,\n *   encryptedDigest            EncryptedDigest,\n *   unauthenticatedAttributes  [1] IMPLICIT Attributes OPTIONAL\n * }\n *\n * EncryptedDigest ::= OCTET STRING\n *\n * Attributes ::= SET OF Attribute\n *\n * Attribute ::= SEQUENCE {\n *   attrType    OBJECT IDENTIFIER,\n *   attrValues  SET OF AttributeValue\n * }\n *\n * AttributeValue ::= ANY\n *\n * Version ::= INTEGER\n *\n * RecipientInfos ::= SET OF RecipientInfo\n *\n * EncryptedContentInfo ::= SEQUENCE {\n *   contentType                 ContentType,\n *   contentEncryptionAlgorithm  ContentEncryptionAlgorithmIdentifier,\n *   encryptedContent       [0]  IMPLICIT EncryptedContent OPTIONAL\n * }\n *\n * ContentEncryptionAlgorithmIdentifier ::= AlgorithmIdentifier\n *\n * The AlgorithmIdentifier contains an Object Identifier (OID) and parameters\n * for the algorithm, if any. In the case of AES and DES3, there is only one,\n * the IV.\n *\n * AlgorithmIdentifer ::= SEQUENCE {\n *    algorithm OBJECT IDENTIFIER,\n *    parameters ANY DEFINED BY algorithm OPTIONAL\n * }\n *\n * EncryptedContent ::= OCTET STRING\n *\n * RecipientInfo ::= SEQUENCE {\n *   version                     Version,\n *   issuerAndSerialNumber       IssuerAndSerialNumber,\n *   keyEncryptionAlgorithm      KeyEncryptionAlgorithmIdentifier,\n *   encryptedKey                EncryptedKey\n * }\n *\n * IssuerAndSerialNumber ::= SEQUENCE {\n *   issuer                      Name,\n *   serialNumber                CertificateSerialNumber\n * }\n *\n * CertificateSerialNumber ::= INTEGER\n *\n * KeyEncryptionAlgorithmIdentifier ::= AlgorithmIdentifier\n *\n * EncryptedKey ::= OCTET STRING\n */\nvar forge = require('./forge');\nrequire('./asn1');\nrequire('./util');\n\n// shortcut for ASN.1 API\nvar asn1 = forge.asn1;\n\n// shortcut for PKCS#7 API\nvar p7v = module.exports = forge.pkcs7asn1 = forge.pkcs7asn1 || {};\nforge.pkcs7 = forge.pkcs7 || {};\nforge.pkcs7.asn1 = p7v;\n\nvar contentInfoValidator = {\n  name: 'ContentInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'ContentInfo.ContentType',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OID,\n    constructed: false,\n    capture: 'contentType'\n  }, {\n    name: 'ContentInfo.content',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 0,\n    constructed: true,\n    optional: true,\n    captureAsn1: 'content'\n  }]\n};\np7v.contentInfoValidator = contentInfoValidator;\n\nvar encryptedContentInfoValidator = {\n  name: 'EncryptedContentInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'EncryptedContentInfo.contentType',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OID,\n    constructed: false,\n    capture: 'contentType'\n  }, {\n    name: 'EncryptedContentInfo.contentEncryptionAlgorithm',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'EncryptedContentInfo.contentEncryptionAlgorithm.algorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'encAlgorithm'\n    }, {\n      name: 'EncryptedContentInfo.contentEncryptionAlgorithm.parameter',\n      tagClass: asn1.Class.UNIVERSAL,\n      captureAsn1: 'encParameter'\n    }]\n  }, {\n    name: 'EncryptedContentInfo.encryptedContent',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 0,\n    /* The PKCS#7 structure output by OpenSSL somewhat differs from what\n     * other implementations do generate.\n     *\n     * OpenSSL generates a structure like this:\n     * SEQUENCE {\n     *    ...\n     *    [0]\n     *       26 DA 67 D2 17 9C 45 3C B1 2A A8 59 2F 29 33 38\n     *       C3 C3 DF 86 71 74 7A 19 9F 40 D0 29 BE 85 90 45\n     *       ...\n     * }\n     *\n     * Whereas other implementations (and this PKCS#7 module) generate:\n     * SEQUENCE {\n     *    ...\n     *    [0] {\n     *       OCTET STRING\n     *          26 DA 67 D2 17 9C 45 3C B1 2A A8 59 2F 29 33 38\n     *          C3 C3 DF 86 71 74 7A 19 9F 40 D0 29 BE 85 90 45\n     *          ...\n     *    }\n     * }\n     *\n     * In order to support both, we just capture the context specific\n     * field here.  The OCTET STRING bit is removed below.\n     */\n    capture: 'encryptedContent',\n    captureAsn1: 'encryptedContentAsn1'\n  }]\n};\n\np7v.envelopedDataValidator = {\n  name: 'EnvelopedData',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'EnvelopedData.Version',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'version'\n  }, {\n    name: 'EnvelopedData.RecipientInfos',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SET,\n    constructed: true,\n    captureAsn1: 'recipientInfos'\n  }].concat(encryptedContentInfoValidator)\n};\n\np7v.encryptedDataValidator = {\n  name: 'EncryptedData',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'EncryptedData.Version',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'version'\n  }].concat(encryptedContentInfoValidator)\n};\n\nvar signerValidator = {\n  name: 'SignerInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'SignerInfo.version',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false\n  }, {\n    name: 'SignerInfo.issuerAndSerialNumber',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'SignerInfo.issuerAndSerialNumber.issuer',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      captureAsn1: 'issuer'\n    }, {\n      name: 'SignerInfo.issuerAndSerialNumber.serialNumber',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.INTEGER,\n      constructed: false,\n      capture: 'serial'\n    }]\n  }, {\n    name: 'SignerInfo.digestAlgorithm',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'SignerInfo.digestAlgorithm.algorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'digestAlgorithm'\n    }, {\n      name: 'SignerInfo.digestAlgorithm.parameter',\n      tagClass: asn1.Class.UNIVERSAL,\n      constructed: false,\n      captureAsn1: 'digestParameter',\n      optional: true\n    }]\n  }, {\n    name: 'SignerInfo.authenticatedAttributes',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 0,\n    constructed: true,\n    optional: true,\n    capture: 'authenticatedAttributes'\n  }, {\n    name: 'SignerInfo.digestEncryptionAlgorithm',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    capture: 'signatureAlgorithm'\n  }, {\n    name: 'SignerInfo.encryptedDigest',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OCTETSTRING,\n    constructed: false,\n    capture: 'signature'\n  }, {\n    name: 'SignerInfo.unauthenticatedAttributes',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 1,\n    constructed: true,\n    optional: true,\n    capture: 'unauthenticatedAttributes'\n  }]\n};\n\np7v.signedDataValidator = {\n  name: 'SignedData',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'SignedData.Version',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'version'\n  }, {\n    name: 'SignedData.DigestAlgorithms',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SET,\n    constructed: true,\n    captureAsn1: 'digestAlgorithms'\n  },\n  contentInfoValidator,\n  {\n    name: 'SignedData.Certificates',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 0,\n    optional: true,\n    captureAsn1: 'certificates'\n  }, {\n    name: 'SignedData.CertificateRevocationLists',\n    tagClass: asn1.Class.CONTEXT_SPECIFIC,\n    type: 1,\n    optional: true,\n    captureAsn1: 'crls'\n  }, {\n    name: 'SignedData.SignerInfos',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SET,\n    capture: 'signerInfos',\n    optional: true,\n    value: [signerValidator]\n  }]\n};\n\np7v.recipientInfoValidator = {\n  name: 'RecipientInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'RecipientInfo.version',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'version'\n  }, {\n    name: 'RecipientInfo.issuerAndSerial',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'RecipientInfo.issuerAndSerial.issuer',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      captureAsn1: 'issuer'\n    }, {\n      name: 'RecipientInfo.issuerAndSerial.serialNumber',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.INTEGER,\n      constructed: false,\n      capture: 'serial'\n    }]\n  }, {\n    name: 'RecipientInfo.keyEncryptionAlgorithm',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'RecipientInfo.keyEncryptionAlgorithm.algorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'encAlgorithm'\n    }, {\n      name: 'RecipientInfo.keyEncryptionAlgorithm.parameter',\n      tagClass: asn1.Class.UNIVERSAL,\n      constructed: false,\n      captureAsn1: 'encParameter',\n      optional: true\n    }]\n  }, {\n    name: 'RecipientInfo.encryptedKey',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OCTETSTRING,\n    constructed: false,\n    capture: 'encKey'\n  }]\n};\n","/**\n * Cipher base API.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./util');\n\nmodule.exports = forge.cipher = forge.cipher || {};\n\n// registered algorithms\nforge.cipher.algorithms = forge.cipher.algorithms || {};\n\n/**\n * Creates a cipher object that can be used to encrypt data using the given\n * algorithm and key. The algorithm may be provided as a string value for a\n * previously registered algorithm or it may be given as a cipher algorithm\n * API object.\n *\n * @param algorithm the algorithm to use, either a string or an algorithm API\n *          object.\n * @param key the key to use, as a binary-encoded string of bytes or a\n *          byte buffer.\n *\n * @return the cipher.\n */\nforge.cipher.createCipher = function(algorithm, key) {\n  var api = algorithm;\n  if(typeof api === 'string') {\n    api = forge.cipher.getAlgorithm(api);\n    if(api) {\n      api = api();\n    }\n  }\n  if(!api) {\n    throw new Error('Unsupported algorithm: ' + algorithm);\n  }\n\n  // assume block cipher\n  return new forge.cipher.BlockCipher({\n    algorithm: api,\n    key: key,\n    decrypt: false\n  });\n};\n\n/**\n * Creates a decipher object that can be used to decrypt data using the given\n * algorithm and key. The algorithm may be provided as a string value for a\n * previously registered algorithm or it may be given as a cipher algorithm\n * API object.\n *\n * @param algorithm the algorithm to use, either a string or an algorithm API\n *          object.\n * @param key the key to use, as a binary-encoded string of bytes or a\n *          byte buffer.\n *\n * @return the cipher.\n */\nforge.cipher.createDecipher = function(algorithm, key) {\n  var api = algorithm;\n  if(typeof api === 'string') {\n    api = forge.cipher.getAlgorithm(api);\n    if(api) {\n      api = api();\n    }\n  }\n  if(!api) {\n    throw new Error('Unsupported algorithm: ' + algorithm);\n  }\n\n  // assume block cipher\n  return new forge.cipher.BlockCipher({\n    algorithm: api,\n    key: key,\n    decrypt: true\n  });\n};\n\n/**\n * Registers an algorithm by name. If the name was already registered, the\n * algorithm API object will be overwritten.\n *\n * @param name the name of the algorithm.\n * @param algorithm the algorithm API object.\n */\nforge.cipher.registerAlgorithm = function(name, algorithm) {\n  name = name.toUpperCase();\n  forge.cipher.algorithms[name] = algorithm;\n};\n\n/**\n * Gets a registered algorithm by name.\n *\n * @param name the name of the algorithm.\n *\n * @return the algorithm, if found, null if not.\n */\nforge.cipher.getAlgorithm = function(name) {\n  name = name.toUpperCase();\n  if(name in forge.cipher.algorithms) {\n    return forge.cipher.algorithms[name];\n  }\n  return null;\n};\n\nvar BlockCipher = forge.cipher.BlockCipher = function(options) {\n  this.algorithm = options.algorithm;\n  this.mode = this.algorithm.mode;\n  this.blockSize = this.mode.blockSize;\n  this._finish = false;\n  this._input = null;\n  this.output = null;\n  this._op = options.decrypt ? this.mode.decrypt : this.mode.encrypt;\n  this._decrypt = options.decrypt;\n  this.algorithm.initialize(options);\n};\n\n/**\n * Starts or restarts the encryption or decryption process, whichever\n * was previously configured.\n *\n * For non-GCM mode, the IV may be a binary-encoded string of bytes, an array\n * of bytes, a byte buffer, or an array of 32-bit integers. If the IV is in\n * bytes, then it must be Nb (16) bytes in length. If the IV is given in as\n * 32-bit integers, then it must be 4 integers long.\n *\n * Note: an IV is not required or used in ECB mode.\n *\n * For GCM-mode, the IV must be given as a binary-encoded string of bytes or\n * a byte buffer. The number of bytes should be 12 (96 bits) as recommended\n * by NIST SP-800-38D but another length may be given.\n *\n * @param options the options to use:\n *          iv the initialization vector to use as a binary-encoded string of\n *            bytes, null to reuse the last ciphered block from a previous\n *            update() (this \"residue\" method is for legacy support only).\n *          additionalData additional authentication data as a binary-encoded\n *            string of bytes, for 'GCM' mode, (default: none).\n *          tagLength desired length of authentication tag, in bits, for\n *            'GCM' mode (0-128, default: 128).\n *          tag the authentication tag to check if decrypting, as a\n *             binary-encoded string of bytes.\n *          output the output the buffer to write to, null to create one.\n */\nBlockCipher.prototype.start = function(options) {\n  options = options || {};\n  var opts = {};\n  for(var key in options) {\n    opts[key] = options[key];\n  }\n  opts.decrypt = this._decrypt;\n  this._finish = false;\n  this._input = forge.util.createBuffer();\n  this.output = options.output || forge.util.createBuffer();\n  this.mode.start(opts);\n};\n\n/**\n * Updates the next block according to the cipher mode.\n *\n * @param input the buffer to read from.\n */\nBlockCipher.prototype.update = function(input) {\n  if(input) {\n    // input given, so empty it into the input buffer\n    this._input.putBuffer(input);\n  }\n\n  // do cipher operation until it needs more input and not finished\n  while(!this._op.call(this.mode, this._input, this.output, this._finish) &&\n    !this._finish) {}\n\n  // free consumed memory from input buffer\n  this._input.compact();\n};\n\n/**\n * Finishes encrypting or decrypting.\n *\n * @param pad a padding function to use in CBC mode, null for default,\n *          signature(blockSize, buffer, decrypt).\n *\n * @return true if successful, false on error.\n */\nBlockCipher.prototype.finish = function(pad) {\n  // backwards-compatibility w/deprecated padding API\n  // Note: will overwrite padding functions even after another start() call\n  if(pad && (this.mode.name === 'ECB' || this.mode.name === 'CBC')) {\n    this.mode.pad = function(input) {\n      return pad(this.blockSize, input, false);\n    };\n    this.mode.unpad = function(output) {\n      return pad(this.blockSize, output, true);\n    };\n  }\n\n  // build options for padding and afterFinish functions\n  var options = {};\n  options.decrypt = this._decrypt;\n\n  // get # of bytes that won't fill a block\n  options.overflow = this._input.length() % this.blockSize;\n\n  if(!this._decrypt && this.mode.pad) {\n    if(!this.mode.pad(this._input, options)) {\n      return false;\n    }\n  }\n\n  // do final update\n  this._finish = true;\n  this.update();\n\n  if(this._decrypt && this.mode.unpad) {\n    if(!this.mode.unpad(this.output, options)) {\n      return false;\n    }\n  }\n\n  if(this.mode.afterFinish) {\n    if(!this.mode.afterFinish(this.output, options)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","/**\n * Copyright (c) 2019 Digital Bazaar, Inc.\n */\n\nvar forge = require('./forge');\nrequire('./asn1');\nvar asn1 = forge.asn1;\n\nexports.privateKeyValidator = {\n  // PrivateKeyInfo\n  name: 'PrivateKeyInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    // Version (INTEGER)\n    name: 'PrivateKeyInfo.version',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyVersion'\n  }, {\n    // privateKeyAlgorithm\n    name: 'PrivateKeyInfo.privateKeyAlgorithm',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'AlgorithmIdentifier.algorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'privateKeyOid'\n    }]\n  }, {\n    // PrivateKey\n    name: 'PrivateKeyInfo',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OCTETSTRING,\n    constructed: false,\n    capture: 'privateKey'\n  }]\n};\n\nexports.publicKeyValidator = {\n  name: 'SubjectPublicKeyInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  captureAsn1: 'subjectPublicKeyInfo',\n  value: [{\n    name: 'SubjectPublicKeyInfo.AlgorithmIdentifier',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'AlgorithmIdentifier.algorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'publicKeyOid'\n    }]\n  },\n  // capture group for ed25519PublicKey\n  {\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.BITSTRING,\n    constructed: false,\n    composed: true,\n    captureBitStringValue: 'ed25519PublicKey'\n  }\n  // FIXME: this is capture group for rsaPublicKey, use it in this API or\n  // discard?\n  /* {\n    // subjectPublicKey\n    name: 'SubjectPublicKeyInfo.subjectPublicKey',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.BITSTRING,\n    constructed: false,\n    value: [{\n      // RSAPublicKey\n      name: 'SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      optional: true,\n      captureAsn1: 'rsaPublicKey'\n    }]\n  } */\n  ]\n};\n","/**\n * Advanced Encryption Standard (AES) implementation.\n *\n * This implementation is based on the public domain library 'jscrypto' which\n * was written by:\n *\n * Emily Stark (estark@stanford.edu)\n * Mike Hamburg (mhamburg@stanford.edu)\n * Dan Boneh (dabo@cs.stanford.edu)\n *\n * Parts of this code are based on the OpenSSL implementation of AES:\n * http://www.openssl.org\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2014 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./cipher');\nrequire('./cipherModes');\nrequire('./util');\n\n/* AES API */\nmodule.exports = forge.aes = forge.aes || {};\n\n/**\n * Deprecated. Instead, use:\n *\n * var cipher = forge.cipher.createCipher('AES-<mode>', key);\n * cipher.start({iv: iv});\n *\n * Creates an AES cipher object to encrypt data using the given symmetric key.\n * The output will be stored in the 'output' member of the returned cipher.\n *\n * The key and iv may be given as a string of bytes, an array of bytes,\n * a byte buffer, or an array of 32-bit words.\n *\n * @param key the symmetric key to use.\n * @param iv the initialization vector to use.\n * @param output the buffer to write to, null to create one.\n * @param mode the cipher mode to use (default: 'CBC').\n *\n * @return the cipher.\n */\nforge.aes.startEncrypting = function(key, iv, output, mode) {\n  var cipher = _createCipher({\n    key: key,\n    output: output,\n    decrypt: false,\n    mode: mode\n  });\n  cipher.start(iv);\n  return cipher;\n};\n\n/**\n * Deprecated. Instead, use:\n *\n * var cipher = forge.cipher.createCipher('AES-<mode>', key);\n *\n * Creates an AES cipher object to encrypt data using the given symmetric key.\n *\n * The key may be given as a string of bytes, an array of bytes, a\n * byte buffer, or an array of 32-bit words.\n *\n * @param key the symmetric key to use.\n * @param mode the cipher mode to use (default: 'CBC').\n *\n * @return the cipher.\n */\nforge.aes.createEncryptionCipher = function(key, mode) {\n  return _createCipher({\n    key: key,\n    output: null,\n    decrypt: false,\n    mode: mode\n  });\n};\n\n/**\n * Deprecated. Instead, use:\n *\n * var decipher = forge.cipher.createDecipher('AES-<mode>', key);\n * decipher.start({iv: iv});\n *\n * Creates an AES cipher object to decrypt data using the given symmetric key.\n * The output will be stored in the 'output' member of the returned cipher.\n *\n * The key and iv may be given as a string of bytes, an array of bytes,\n * a byte buffer, or an array of 32-bit words.\n *\n * @param key the symmetric key to use.\n * @param iv the initialization vector to use.\n * @param output the buffer to write to, null to create one.\n * @param mode the cipher mode to use (default: 'CBC').\n *\n * @return the cipher.\n */\nforge.aes.startDecrypting = function(key, iv, output, mode) {\n  var cipher = _createCipher({\n    key: key,\n    output: output,\n    decrypt: true,\n    mode: mode\n  });\n  cipher.start(iv);\n  return cipher;\n};\n\n/**\n * Deprecated. Instead, use:\n *\n * var decipher = forge.cipher.createDecipher('AES-<mode>', key);\n *\n * Creates an AES cipher object to decrypt data using the given symmetric key.\n *\n * The key may be given as a string of bytes, an array of bytes, a\n * byte buffer, or an array of 32-bit words.\n *\n * @param key the symmetric key to use.\n * @param mode the cipher mode to use (default: 'CBC').\n *\n * @return the cipher.\n */\nforge.aes.createDecryptionCipher = function(key, mode) {\n  return _createCipher({\n    key: key,\n    output: null,\n    decrypt: true,\n    mode: mode\n  });\n};\n\n/**\n * Creates a new AES cipher algorithm object.\n *\n * @param name the name of the algorithm.\n * @param mode the mode factory function.\n *\n * @return the AES algorithm object.\n */\nforge.aes.Algorithm = function(name, mode) {\n  if(!init) {\n    initialize();\n  }\n  var self = this;\n  self.name = name;\n  self.mode = new mode({\n    blockSize: 16,\n    cipher: {\n      encrypt: function(inBlock, outBlock) {\n        return _updateBlock(self._w, inBlock, outBlock, false);\n      },\n      decrypt: function(inBlock, outBlock) {\n        return _updateBlock(self._w, inBlock, outBlock, true);\n      }\n    }\n  });\n  self._init = false;\n};\n\n/**\n * Initializes this AES algorithm by expanding its key.\n *\n * @param options the options to use.\n *          key the key to use with this algorithm.\n *          decrypt true if the algorithm should be initialized for decryption,\n *            false for encryption.\n */\nforge.aes.Algorithm.prototype.initialize = function(options) {\n  if(this._init) {\n    return;\n  }\n\n  var key = options.key;\n  var tmp;\n\n  /* Note: The key may be a string of bytes, an array of bytes, a byte\n    buffer, or an array of 32-bit integers. If the key is in bytes, then\n    it must be 16, 24, or 32 bytes in length. If it is in 32-bit\n    integers, it must be 4, 6, or 8 integers long. */\n\n  if(typeof key === 'string' &&\n    (key.length === 16 || key.length === 24 || key.length === 32)) {\n    // convert key string into byte buffer\n    key = forge.util.createBuffer(key);\n  } else if(forge.util.isArray(key) &&\n    (key.length === 16 || key.length === 24 || key.length === 32)) {\n    // convert key integer array into byte buffer\n    tmp = key;\n    key = forge.util.createBuffer();\n    for(var i = 0; i < tmp.length; ++i) {\n      key.putByte(tmp[i]);\n    }\n  }\n\n  // convert key byte buffer into 32-bit integer array\n  if(!forge.util.isArray(key)) {\n    tmp = key;\n    key = [];\n\n    // key lengths of 16, 24, 32 bytes allowed\n    var len = tmp.length();\n    if(len === 16 || len === 24 || len === 32) {\n      len = len >>> 2;\n      for(var i = 0; i < len; ++i) {\n        key.push(tmp.getInt32());\n      }\n    }\n  }\n\n  // key must be an array of 32-bit integers by now\n  if(!forge.util.isArray(key) ||\n    !(key.length === 4 || key.length === 6 || key.length === 8)) {\n    throw new Error('Invalid key parameter.');\n  }\n\n  // encryption operation is always used for these modes\n  var mode = this.mode.name;\n  var encryptOp = (['CFB', 'OFB', 'CTR', 'GCM'].indexOf(mode) !== -1);\n\n  // do key expansion\n  this._w = _expandKey(key, options.decrypt && !encryptOp);\n  this._init = true;\n};\n\n/**\n * Expands a key. Typically only used for testing.\n *\n * @param key the symmetric key to expand, as an array of 32-bit words.\n * @param decrypt true to expand for decryption, false for encryption.\n *\n * @return the expanded key.\n */\nforge.aes._expandKey = function(key, decrypt) {\n  if(!init) {\n    initialize();\n  }\n  return _expandKey(key, decrypt);\n};\n\n/**\n * Updates a single block. Typically only used for testing.\n *\n * @param w the expanded key to use.\n * @param input an array of block-size 32-bit words.\n * @param output an array of block-size 32-bit words.\n * @param decrypt true to decrypt, false to encrypt.\n */\nforge.aes._updateBlock = _updateBlock;\n\n/** Register AES algorithms **/\n\nregisterAlgorithm('AES-ECB', forge.cipher.modes.ecb);\nregisterAlgorithm('AES-CBC', forge.cipher.modes.cbc);\nregisterAlgorithm('AES-CFB', forge.cipher.modes.cfb);\nregisterAlgorithm('AES-OFB', forge.cipher.modes.ofb);\nregisterAlgorithm('AES-CTR', forge.cipher.modes.ctr);\nregisterAlgorithm('AES-GCM', forge.cipher.modes.gcm);\n\nfunction registerAlgorithm(name, mode) {\n  var factory = function() {\n    return new forge.aes.Algorithm(name, mode);\n  };\n  forge.cipher.registerAlgorithm(name, factory);\n}\n\n/** AES implementation **/\n\nvar init = false; // not yet initialized\nvar Nb = 4;       // number of words comprising the state (AES = 4)\nvar sbox;         // non-linear substitution table used in key expansion\nvar isbox;        // inversion of sbox\nvar rcon;         // round constant word array\nvar mix;          // mix-columns table\nvar imix;         // inverse mix-columns table\n\n/**\n * Performs initialization, ie: precomputes tables to optimize for speed.\n *\n * One way to understand how AES works is to imagine that 'addition' and\n * 'multiplication' are interfaces that require certain mathematical\n * properties to hold true (ie: they are associative) but they might have\n * different implementations and produce different kinds of results ...\n * provided that their mathematical properties remain true. AES defines\n * its own methods of addition and multiplication but keeps some important\n * properties the same, ie: associativity and distributivity. The\n * explanation below tries to shed some light on how AES defines addition\n * and multiplication of bytes and 32-bit words in order to perform its\n * encryption and decryption algorithms.\n *\n * The basics:\n *\n * The AES algorithm views bytes as binary representations of polynomials\n * that have either 1 or 0 as the coefficients. It defines the addition\n * or subtraction of two bytes as the XOR operation. It also defines the\n * multiplication of two bytes as a finite field referred to as GF(2^8)\n * (Note: 'GF' means \"Galois Field\" which is a field that contains a finite\n * number of elements so GF(2^8) has 256 elements).\n *\n * This means that any two bytes can be represented as binary polynomials;\n * when they multiplied together and modularly reduced by an irreducible\n * polynomial of the 8th degree, the results are the field GF(2^8). The\n * specific irreducible polynomial that AES uses in hexadecimal is 0x11b.\n * This multiplication is associative with 0x01 as the identity:\n *\n * (b * 0x01 = GF(b, 0x01) = b).\n *\n * The operation GF(b, 0x02) can be performed at the byte level by left\n * shifting b once and then XOR'ing it (to perform the modular reduction)\n * with 0x11b if b is >= 128. Repeated application of the multiplication\n * of 0x02 can be used to implement the multiplication of any two bytes.\n *\n * For instance, multiplying 0x57 and 0x13, denoted as GF(0x57, 0x13), can\n * be performed by factoring 0x13 into 0x01, 0x02, and 0x10. Then these\n * factors can each be multiplied by 0x57 and then added together. To do\n * the multiplication, values for 0x57 multiplied by each of these 3 factors\n * can be precomputed and stored in a table. To add them, the values from\n * the table are XOR'd together.\n *\n * AES also defines addition and multiplication of words, that is 4-byte\n * numbers represented as polynomials of 3 degrees where the coefficients\n * are the values of the bytes.\n *\n * The word [a0, a1, a2, a3] is a polynomial a3x^3 + a2x^2 + a1x + a0.\n *\n * Addition is performed by XOR'ing like powers of x. Multiplication\n * is performed in two steps, the first is an algebriac expansion as\n * you would do normally (where addition is XOR). But the result is\n * a polynomial larger than 3 degrees and thus it cannot fit in a word. So\n * next the result is modularly reduced by an AES-specific polynomial of\n * degree 4 which will always produce a polynomial of less than 4 degrees\n * such that it will fit in a word. In AES, this polynomial is x^4 + 1.\n *\n * The modular product of two polynomials 'a' and 'b' is thus:\n *\n * d(x) = d3x^3 + d2x^2 + d1x + d0\n * with\n * d0 = GF(a0, b0) ^ GF(a3, b1) ^ GF(a2, b2) ^ GF(a1, b3)\n * d1 = GF(a1, b0) ^ GF(a0, b1) ^ GF(a3, b2) ^ GF(a2, b3)\n * d2 = GF(a2, b0) ^ GF(a1, b1) ^ GF(a0, b2) ^ GF(a3, b3)\n * d3 = GF(a3, b0) ^ GF(a2, b1) ^ GF(a1, b2) ^ GF(a0, b3)\n *\n * As a matrix:\n *\n * [d0] = [a0 a3 a2 a1][b0]\n * [d1]   [a1 a0 a3 a2][b1]\n * [d2]   [a2 a1 a0 a3][b2]\n * [d3]   [a3 a2 a1 a0][b3]\n *\n * Special polynomials defined by AES (0x02 == {02}):\n * a(x)    = {03}x^3 + {01}x^2 + {01}x + {02}\n * a^-1(x) = {0b}x^3 + {0d}x^2 + {09}x + {0e}.\n *\n * These polynomials are used in the MixColumns() and InverseMixColumns()\n * operations, respectively, to cause each element in the state to affect\n * the output (referred to as diffusing).\n *\n * RotWord() uses: a0 = a1 = a2 = {00} and a3 = {01}, which is the\n * polynomial x3.\n *\n * The ShiftRows() method modifies the last 3 rows in the state (where\n * the state is 4 words with 4 bytes per word) by shifting bytes cyclically.\n * The 1st byte in the second row is moved to the end of the row. The 1st\n * and 2nd bytes in the third row are moved to the end of the row. The 1st,\n * 2nd, and 3rd bytes are moved in the fourth row.\n *\n * More details on how AES arithmetic works:\n *\n * In the polynomial representation of binary numbers, XOR performs addition\n * and subtraction and multiplication in GF(2^8) denoted as GF(a, b)\n * corresponds with the multiplication of polynomials modulo an irreducible\n * polynomial of degree 8. In other words, for AES, GF(a, b) will multiply\n * polynomial 'a' with polynomial 'b' and then do a modular reduction by\n * an AES-specific irreducible polynomial of degree 8.\n *\n * A polynomial is irreducible if its only divisors are one and itself. For\n * the AES algorithm, this irreducible polynomial is:\n *\n * m(x) = x^8 + x^4 + x^3 + x + 1,\n *\n * or {01}{1b} in hexadecimal notation, where each coefficient is a bit:\n * 100011011 = 283 = 0x11b.\n *\n * For example, GF(0x57, 0x83) = 0xc1 because\n *\n * 0x57 = 87  = 01010111 = x^6 + x^4 + x^2 + x + 1\n * 0x85 = 131 = 10000101 = x^7 + x + 1\n *\n * (x^6 + x^4 + x^2 + x + 1) * (x^7 + x + 1)\n * =  x^13 + x^11 + x^9 + x^8 + x^7 +\n *    x^7 + x^5 + x^3 + x^2 + x +\n *    x^6 + x^4 + x^2 + x + 1\n * =  x^13 + x^11 + x^9 + x^8 + x^6 + x^5 + x^4 + x^3 + 1 = y\n *    y modulo (x^8 + x^4 + x^3 + x + 1)\n * =  x^7 + x^6 + 1.\n *\n * The modular reduction by m(x) guarantees the result will be a binary\n * polynomial of less than degree 8, so that it can fit in a byte.\n *\n * The operation to multiply a binary polynomial b with x (the polynomial\n * x in binary representation is 00000010) is:\n *\n * b_7x^8 + b_6x^7 + b_5x^6 + b_4x^5 + b_3x^4 + b_2x^3 + b_1x^2 + b_0x^1\n *\n * To get GF(b, x) we must reduce that by m(x). If b_7 is 0 (that is the\n * most significant bit is 0 in b) then the result is already reduced. If\n * it is 1, then we can reduce it by subtracting m(x) via an XOR.\n *\n * It follows that multiplication by x (00000010 or 0x02) can be implemented\n * by performing a left shift followed by a conditional bitwise XOR with\n * 0x1b. This operation on bytes is denoted by xtime(). Multiplication by\n * higher powers of x can be implemented by repeated application of xtime().\n *\n * By adding intermediate results, multiplication by any constant can be\n * implemented. For instance:\n *\n * GF(0x57, 0x13) = 0xfe because:\n *\n * xtime(b) = (b & 128) ? (b << 1 ^ 0x11b) : (b << 1)\n *\n * Note: We XOR with 0x11b instead of 0x1b because in javascript our\n * datatype for b can be larger than 1 byte, so a left shift will not\n * automatically eliminate bits that overflow a byte ... by XOR'ing the\n * overflow bit with 1 (the extra one from 0x11b) we zero it out.\n *\n * GF(0x57, 0x02) = xtime(0x57) = 0xae\n * GF(0x57, 0x04) = xtime(0xae) = 0x47\n * GF(0x57, 0x08) = xtime(0x47) = 0x8e\n * GF(0x57, 0x10) = xtime(0x8e) = 0x07\n *\n * GF(0x57, 0x13) = GF(0x57, (0x01 ^ 0x02 ^ 0x10))\n *\n * And by the distributive property (since XOR is addition and GF() is\n * multiplication):\n *\n * = GF(0x57, 0x01) ^ GF(0x57, 0x02) ^ GF(0x57, 0x10)\n * = 0x57 ^ 0xae ^ 0x07\n * = 0xfe.\n */\nfunction initialize() {\n  init = true;\n\n  /* Populate the Rcon table. These are the values given by\n    [x^(i-1),{00},{00},{00}] where x^(i-1) are powers of x (and x = 0x02)\n    in the field of GF(2^8), where i starts at 1.\n\n    rcon[0] = [0x00, 0x00, 0x00, 0x00]\n    rcon[1] = [0x01, 0x00, 0x00, 0x00] 2^(1-1) = 2^0 = 1\n    rcon[2] = [0x02, 0x00, 0x00, 0x00] 2^(2-1) = 2^1 = 2\n    ...\n    rcon[9]  = [0x1B, 0x00, 0x00, 0x00] 2^(9-1)  = 2^8 = 0x1B\n    rcon[10] = [0x36, 0x00, 0x00, 0x00] 2^(10-1) = 2^9 = 0x36\n\n    We only store the first byte because it is the only one used.\n  */\n  rcon = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1B, 0x36];\n\n  // compute xtime table which maps i onto GF(i, 0x02)\n  var xtime = new Array(256);\n  for(var i = 0; i < 128; ++i) {\n    xtime[i] = i << 1;\n    xtime[i + 128] = (i + 128) << 1 ^ 0x11B;\n  }\n\n  // compute all other tables\n  sbox = new Array(256);\n  isbox = new Array(256);\n  mix = new Array(4);\n  imix = new Array(4);\n  for(var i = 0; i < 4; ++i) {\n    mix[i] = new Array(256);\n    imix[i] = new Array(256);\n  }\n  var e = 0, ei = 0, e2, e4, e8, sx, sx2, me, ime;\n  for(var i = 0; i < 256; ++i) {\n    /* We need to generate the SubBytes() sbox and isbox tables so that\n      we can perform byte substitutions. This requires us to traverse\n      all of the elements in GF, find their multiplicative inverses,\n      and apply to each the following affine transformation:\n\n      bi' = bi ^ b(i + 4) mod 8 ^ b(i + 5) mod 8 ^ b(i + 6) mod 8 ^\n            b(i + 7) mod 8 ^ ci\n      for 0 <= i < 8, where bi is the ith bit of the byte, and ci is the\n      ith bit of a byte c with the value {63} or {01100011}.\n\n      It is possible to traverse every possible value in a Galois field\n      using what is referred to as a 'generator'. There are many\n      generators (128 out of 256): 3,5,6,9,11,82 to name a few. To fully\n      traverse GF we iterate 255 times, multiplying by our generator\n      each time.\n\n      On each iteration we can determine the multiplicative inverse for\n      the current element.\n\n      Suppose there is an element in GF 'e'. For a given generator 'g',\n      e = g^x. The multiplicative inverse of e is g^(255 - x). It turns\n      out that if use the inverse of a generator as another generator\n      it will produce all of the corresponding multiplicative inverses\n      at the same time. For this reason, we choose 5 as our inverse\n      generator because it only requires 2 multiplies and 1 add and its\n      inverse, 82, requires relatively few operations as well.\n\n      In order to apply the affine transformation, the multiplicative\n      inverse 'ei' of 'e' can be repeatedly XOR'd (4 times) with a\n      bit-cycling of 'ei'. To do this 'ei' is first stored in 's' and\n      'x'. Then 's' is left shifted and the high bit of 's' is made the\n      low bit. The resulting value is stored in 's'. Then 'x' is XOR'd\n      with 's' and stored in 'x'. On each subsequent iteration the same\n      operation is performed. When 4 iterations are complete, 'x' is\n      XOR'd with 'c' (0x63) and the transformed value is stored in 'x'.\n      For example:\n\n      s = 01000001\n      x = 01000001\n\n      iteration 1: s = 10000010, x ^= s\n      iteration 2: s = 00000101, x ^= s\n      iteration 3: s = 00001010, x ^= s\n      iteration 4: s = 00010100, x ^= s\n      x ^= 0x63\n\n      This can be done with a loop where s = (s << 1) | (s >> 7). However,\n      it can also be done by using a single 16-bit (in this case 32-bit)\n      number 'sx'. Since XOR is an associative operation, we can set 'sx'\n      to 'ei' and then XOR it with 'sx' left-shifted 1,2,3, and 4 times.\n      The most significant bits will flow into the high 8 bit positions\n      and be correctly XOR'd with one another. All that remains will be\n      to cycle the high 8 bits by XOR'ing them all with the lower 8 bits\n      afterwards.\n\n      At the same time we're populating sbox and isbox we can precompute\n      the multiplication we'll need to do to do MixColumns() later.\n    */\n\n    // apply affine transformation\n    sx = ei ^ (ei << 1) ^ (ei << 2) ^ (ei << 3) ^ (ei << 4);\n    sx = (sx >> 8) ^ (sx & 255) ^ 0x63;\n\n    // update tables\n    sbox[e] = sx;\n    isbox[sx] = e;\n\n    /* Mixing columns is done using matrix multiplication. The columns\n      that are to be mixed are each a single word in the current state.\n      The state has Nb columns (4 columns). Therefore each column is a\n      4 byte word. So to mix the columns in a single column 'c' where\n      its rows are r0, r1, r2, and r3, we use the following matrix\n      multiplication:\n\n      [2 3 1 1]*[r0,c]=[r'0,c]\n      [1 2 3 1] [r1,c] [r'1,c]\n      [1 1 2 3] [r2,c] [r'2,c]\n      [3 1 1 2] [r3,c] [r'3,c]\n\n      r0, r1, r2, and r3 are each 1 byte of one of the words in the\n      state (a column). To do matrix multiplication for each mixed\n      column c' we multiply the corresponding row from the left matrix\n      with the corresponding column from the right matrix. In total, we\n      get 4 equations:\n\n      r0,c' = 2*r0,c + 3*r1,c + 1*r2,c + 1*r3,c\n      r1,c' = 1*r0,c + 2*r1,c + 3*r2,c + 1*r3,c\n      r2,c' = 1*r0,c + 1*r1,c + 2*r2,c + 3*r3,c\n      r3,c' = 3*r0,c + 1*r1,c + 1*r2,c + 2*r3,c\n\n      As usual, the multiplication is as previously defined and the\n      addition is XOR. In order to optimize mixing columns we can store\n      the multiplication results in tables. If you think of the whole\n      column as a word (it might help to visualize by mentally rotating\n      the equations above by counterclockwise 90 degrees) then you can\n      see that it would be useful to map the multiplications performed on\n      each byte (r0, r1, r2, r3) onto a word as well. For instance, we\n      could map 2*r0,1*r0,1*r0,3*r0 onto a word by storing 2*r0 in the\n      highest 8 bits and 3*r0 in the lowest 8 bits (with the other two\n      respectively in the middle). This means that a table can be\n      constructed that uses r0 as an index to the word. We can do the\n      same with r1, r2, and r3, creating a total of 4 tables.\n\n      To construct a full c', we can just look up each byte of c in\n      their respective tables and XOR the results together.\n\n      Also, to build each table we only have to calculate the word\n      for 2,1,1,3 for every byte ... which we can do on each iteration\n      of this loop since we will iterate over every byte. After we have\n      calculated 2,1,1,3 we can get the results for the other tables\n      by cycling the byte at the end to the beginning. For instance\n      we can take the result of table 2,1,1,3 and produce table 3,2,1,1\n      by moving the right most byte to the left most position just like\n      how you can imagine the 3 moved out of 2,1,1,3 and to the front\n      to produce 3,2,1,1.\n\n      There is another optimization in that the same multiples of\n      the current element we need in order to advance our generator\n      to the next iteration can be reused in performing the 2,1,1,3\n      calculation. We also calculate the inverse mix column tables,\n      with e,9,d,b being the inverse of 2,1,1,3.\n\n      When we're done, and we need to actually mix columns, the first\n      byte of each state word should be put through mix[0] (2,1,1,3),\n      the second through mix[1] (3,2,1,1) and so forth. Then they should\n      be XOR'd together to produce the fully mixed column.\n    */\n\n    // calculate mix and imix table values\n    sx2 = xtime[sx];\n    e2 = xtime[e];\n    e4 = xtime[e2];\n    e8 = xtime[e4];\n    me =\n      (sx2 << 24) ^  // 2\n      (sx << 16) ^   // 1\n      (sx << 8) ^    // 1\n      (sx ^ sx2);    // 3\n    ime =\n      (e2 ^ e4 ^ e8) << 24 ^  // E (14)\n      (e ^ e8) << 16 ^        // 9\n      (e ^ e4 ^ e8) << 8 ^    // D (13)\n      (e ^ e2 ^ e8);          // B (11)\n    // produce each of the mix tables by rotating the 2,1,1,3 value\n    for(var n = 0; n < 4; ++n) {\n      mix[n][e] = me;\n      imix[n][sx] = ime;\n      // cycle the right most byte to the left most position\n      // ie: 2,1,1,3 becomes 3,2,1,1\n      me = me << 24 | me >>> 8;\n      ime = ime << 24 | ime >>> 8;\n    }\n\n    // get next element and inverse\n    if(e === 0) {\n      // 1 is the inverse of 1\n      e = ei = 1;\n    } else {\n      // e = 2e + 2*2*2*(10e)) = multiply e by 82 (chosen generator)\n      // ei = ei + 2*2*ei = multiply ei by 5 (inverse generator)\n      e = e2 ^ xtime[xtime[xtime[e2 ^ e8]]];\n      ei ^= xtime[xtime[ei]];\n    }\n  }\n}\n\n/**\n * Generates a key schedule using the AES key expansion algorithm.\n *\n * The AES algorithm takes the Cipher Key, K, and performs a Key Expansion\n * routine to generate a key schedule. The Key Expansion generates a total\n * of Nb*(Nr + 1) words: the algorithm requires an initial set of Nb words,\n * and each of the Nr rounds requires Nb words of key data. The resulting\n * key schedule consists of a linear array of 4-byte words, denoted [wi ],\n * with i in the range 0 <= i < Nb(Nr + 1).\n *\n * KeyExpansion(byte key[4*Nk], word w[Nb*(Nr+1)], Nk)\n * AES-128 (Nb=4, Nk=4, Nr=10)\n * AES-192 (Nb=4, Nk=6, Nr=12)\n * AES-256 (Nb=4, Nk=8, Nr=14)\n * Note: Nr=Nk+6.\n *\n * Nb is the number of columns (32-bit words) comprising the State (or\n * number of bytes in a block). For AES, Nb=4.\n *\n * @param key the key to schedule (as an array of 32-bit words).\n * @param decrypt true to modify the key schedule to decrypt, false not to.\n *\n * @return the generated key schedule.\n */\nfunction _expandKey(key, decrypt) {\n  // copy the key's words to initialize the key schedule\n  var w = key.slice(0);\n\n  /* RotWord() will rotate a word, moving the first byte to the last\n    byte's position (shifting the other bytes left).\n\n    We will be getting the value of Rcon at i / Nk. 'i' will iterate\n    from Nk to (Nb * Nr+1). Nk = 4 (4 byte key), Nb = 4 (4 words in\n    a block), Nr = Nk + 6 (10). Therefore 'i' will iterate from\n    4 to 44 (exclusive). Each time we iterate 4 times, i / Nk will\n    increase by 1. We use a counter iNk to keep track of this.\n   */\n\n  // go through the rounds expanding the key\n  var temp, iNk = 1;\n  var Nk = w.length;\n  var Nr1 = Nk + 6 + 1;\n  var end = Nb * Nr1;\n  for(var i = Nk; i < end; ++i) {\n    temp = w[i - 1];\n    if(i % Nk === 0) {\n      // temp = SubWord(RotWord(temp)) ^ Rcon[i / Nk]\n      temp =\n        sbox[temp >>> 16 & 255] << 24 ^\n        sbox[temp >>> 8 & 255] << 16 ^\n        sbox[temp & 255] << 8 ^\n        sbox[temp >>> 24] ^ (rcon[iNk] << 24);\n      iNk++;\n    } else if(Nk > 6 && (i % Nk === 4)) {\n      // temp = SubWord(temp)\n      temp =\n        sbox[temp >>> 24] << 24 ^\n        sbox[temp >>> 16 & 255] << 16 ^\n        sbox[temp >>> 8 & 255] << 8 ^\n        sbox[temp & 255];\n    }\n    w[i] = w[i - Nk] ^ temp;\n  }\n\n  /* When we are updating a cipher block we always use the code path for\n     encryption whether we are decrypting or not (to shorten code and\n     simplify the generation of look up tables). However, because there\n     are differences in the decryption algorithm, other than just swapping\n     in different look up tables, we must transform our key schedule to\n     account for these changes:\n\n     1. The decryption algorithm gets its key rounds in reverse order.\n     2. The decryption algorithm adds the round key before mixing columns\n       instead of afterwards.\n\n     We don't need to modify our key schedule to handle the first case,\n     we can just traverse the key schedule in reverse order when decrypting.\n\n     The second case requires a little work.\n\n     The tables we built for performing rounds will take an input and then\n     perform SubBytes() and MixColumns() or, for the decrypt version,\n     InvSubBytes() and InvMixColumns(). But the decrypt algorithm requires\n     us to AddRoundKey() before InvMixColumns(). This means we'll need to\n     apply some transformations to the round key to inverse-mix its columns\n     so they'll be correct for moving AddRoundKey() to after the state has\n     had its columns inverse-mixed.\n\n     To inverse-mix the columns of the state when we're decrypting we use a\n     lookup table that will apply InvSubBytes() and InvMixColumns() at the\n     same time. However, the round key's bytes are not inverse-substituted\n     in the decryption algorithm. To get around this problem, we can first\n     substitute the bytes in the round key so that when we apply the\n     transformation via the InvSubBytes()+InvMixColumns() table, it will\n     undo our substitution leaving us with the original value that we\n     want -- and then inverse-mix that value.\n\n     This change will correctly alter our key schedule so that we can XOR\n     each round key with our already transformed decryption state. This\n     allows us to use the same code path as the encryption algorithm.\n\n     We make one more change to the decryption key. Since the decryption\n     algorithm runs in reverse from the encryption algorithm, we reverse\n     the order of the round keys to avoid having to iterate over the key\n     schedule backwards when running the encryption algorithm later in\n     decryption mode. In addition to reversing the order of the round keys,\n     we also swap each round key's 2nd and 4th rows. See the comments\n     section where rounds are performed for more details about why this is\n     done. These changes are done inline with the other substitution\n     described above.\n  */\n  if(decrypt) {\n    var tmp;\n    var m0 = imix[0];\n    var m1 = imix[1];\n    var m2 = imix[2];\n    var m3 = imix[3];\n    var wnew = w.slice(0);\n    end = w.length;\n    for(var i = 0, wi = end - Nb; i < end; i += Nb, wi -= Nb) {\n      // do not sub the first or last round key (round keys are Nb\n      // words) as no column mixing is performed before they are added,\n      // but do change the key order\n      if(i === 0 || i === (end - Nb)) {\n        wnew[i] = w[wi];\n        wnew[i + 1] = w[wi + 3];\n        wnew[i + 2] = w[wi + 2];\n        wnew[i + 3] = w[wi + 1];\n      } else {\n        // substitute each round key byte because the inverse-mix\n        // table will inverse-substitute it (effectively cancel the\n        // substitution because round key bytes aren't sub'd in\n        // decryption mode) and swap indexes 3 and 1\n        for(var n = 0; n < Nb; ++n) {\n          tmp = w[wi + n];\n          wnew[i + (3&-n)] =\n            m0[sbox[tmp >>> 24]] ^\n            m1[sbox[tmp >>> 16 & 255]] ^\n            m2[sbox[tmp >>> 8 & 255]] ^\n            m3[sbox[tmp & 255]];\n        }\n      }\n    }\n    w = wnew;\n  }\n\n  return w;\n}\n\n/**\n * Updates a single block (16 bytes) using AES. The update will either\n * encrypt or decrypt the block.\n *\n * @param w the key schedule.\n * @param input the input block (an array of 32-bit words).\n * @param output the updated output block.\n * @param decrypt true to decrypt the block, false to encrypt it.\n */\nfunction _updateBlock(w, input, output, decrypt) {\n  /*\n  Cipher(byte in[4*Nb], byte out[4*Nb], word w[Nb*(Nr+1)])\n  begin\n    byte state[4,Nb]\n    state = in\n    AddRoundKey(state, w[0, Nb-1])\n    for round = 1 step 1 to Nr-1\n      SubBytes(state)\n      ShiftRows(state)\n      MixColumns(state)\n      AddRoundKey(state, w[round*Nb, (round+1)*Nb-1])\n    end for\n    SubBytes(state)\n    ShiftRows(state)\n    AddRoundKey(state, w[Nr*Nb, (Nr+1)*Nb-1])\n    out = state\n  end\n\n  InvCipher(byte in[4*Nb], byte out[4*Nb], word w[Nb*(Nr+1)])\n  begin\n    byte state[4,Nb]\n    state = in\n    AddRoundKey(state, w[Nr*Nb, (Nr+1)*Nb-1])\n    for round = Nr-1 step -1 downto 1\n      InvShiftRows(state)\n      InvSubBytes(state)\n      AddRoundKey(state, w[round*Nb, (round+1)*Nb-1])\n      InvMixColumns(state)\n    end for\n    InvShiftRows(state)\n    InvSubBytes(state)\n    AddRoundKey(state, w[0, Nb-1])\n    out = state\n  end\n  */\n\n  // Encrypt: AddRoundKey(state, w[0, Nb-1])\n  // Decrypt: AddRoundKey(state, w[Nr*Nb, (Nr+1)*Nb-1])\n  var Nr = w.length / 4 - 1;\n  var m0, m1, m2, m3, sub;\n  if(decrypt) {\n    m0 = imix[0];\n    m1 = imix[1];\n    m2 = imix[2];\n    m3 = imix[3];\n    sub = isbox;\n  } else {\n    m0 = mix[0];\n    m1 = mix[1];\n    m2 = mix[2];\n    m3 = mix[3];\n    sub = sbox;\n  }\n  var a, b, c, d, a2, b2, c2;\n  a = input[0] ^ w[0];\n  b = input[decrypt ? 3 : 1] ^ w[1];\n  c = input[2] ^ w[2];\n  d = input[decrypt ? 1 : 3] ^ w[3];\n  var i = 3;\n\n  /* In order to share code we follow the encryption algorithm when both\n    encrypting and decrypting. To account for the changes required in the\n    decryption algorithm, we use different lookup tables when decrypting\n    and use a modified key schedule to account for the difference in the\n    order of transformations applied when performing rounds. We also get\n    key rounds in reverse order (relative to encryption). */\n  for(var round = 1; round < Nr; ++round) {\n    /* As described above, we'll be using table lookups to perform the\n      column mixing. Each column is stored as a word in the state (the\n      array 'input' has one column as a word at each index). In order to\n      mix a column, we perform these transformations on each row in c,\n      which is 1 byte in each word. The new column for c0 is c'0:\n\n               m0      m1      m2      m3\n      r0,c'0 = 2*r0,c0 + 3*r1,c0 + 1*r2,c0 + 1*r3,c0\n      r1,c'0 = 1*r0,c0 + 2*r1,c0 + 3*r2,c0 + 1*r3,c0\n      r2,c'0 = 1*r0,c0 + 1*r1,c0 + 2*r2,c0 + 3*r3,c0\n      r3,c'0 = 3*r0,c0 + 1*r1,c0 + 1*r2,c0 + 2*r3,c0\n\n      So using mix tables where c0 is a word with r0 being its upper\n      8 bits and r3 being its lower 8 bits:\n\n      m0[c0 >> 24] will yield this word: [2*r0,1*r0,1*r0,3*r0]\n      ...\n      m3[c0 & 255] will yield this word: [1*r3,1*r3,3*r3,2*r3]\n\n      Therefore to mix the columns in each word in the state we\n      do the following (& 255 omitted for brevity):\n      c'0,r0 = m0[c0 >> 24] ^ m1[c1 >> 16] ^ m2[c2 >> 8] ^ m3[c3]\n      c'0,r1 = m0[c0 >> 24] ^ m1[c1 >> 16] ^ m2[c2 >> 8] ^ m3[c3]\n      c'0,r2 = m0[c0 >> 24] ^ m1[c1 >> 16] ^ m2[c2 >> 8] ^ m3[c3]\n      c'0,r3 = m0[c0 >> 24] ^ m1[c1 >> 16] ^ m2[c2 >> 8] ^ m3[c3]\n\n      However, before mixing, the algorithm requires us to perform\n      ShiftRows(). The ShiftRows() transformation cyclically shifts the\n      last 3 rows of the state over different offsets. The first row\n      (r = 0) is not shifted.\n\n      s'_r,c = s_r,(c + shift(r, Nb) mod Nb\n      for 0 < r < 4 and 0 <= c < Nb and\n      shift(1, 4) = 1\n      shift(2, 4) = 2\n      shift(3, 4) = 3.\n\n      This causes the first byte in r = 1 to be moved to the end of\n      the row, the first 2 bytes in r = 2 to be moved to the end of\n      the row, the first 3 bytes in r = 3 to be moved to the end of\n      the row:\n\n      r1: [c0 c1 c2 c3] => [c1 c2 c3 c0]\n      r2: [c0 c1 c2 c3]    [c2 c3 c0 c1]\n      r3: [c0 c1 c2 c3]    [c3 c0 c1 c2]\n\n      We can make these substitutions inline with our column mixing to\n      generate an updated set of equations to produce each word in the\n      state (note the columns have changed positions):\n\n      c0 c1 c2 c3 => c0 c1 c2 c3\n      c0 c1 c2 c3    c1 c2 c3 c0  (cycled 1 byte)\n      c0 c1 c2 c3    c2 c3 c0 c1  (cycled 2 bytes)\n      c0 c1 c2 c3    c3 c0 c1 c2  (cycled 3 bytes)\n\n      Therefore:\n\n      c'0 = 2*r0,c0 + 3*r1,c1 + 1*r2,c2 + 1*r3,c3\n      c'0 = 1*r0,c0 + 2*r1,c1 + 3*r2,c2 + 1*r3,c3\n      c'0 = 1*r0,c0 + 1*r1,c1 + 2*r2,c2 + 3*r3,c3\n      c'0 = 3*r0,c0 + 1*r1,c1 + 1*r2,c2 + 2*r3,c3\n\n      c'1 = 2*r0,c1 + 3*r1,c2 + 1*r2,c3 + 1*r3,c0\n      c'1 = 1*r0,c1 + 2*r1,c2 + 3*r2,c3 + 1*r3,c0\n      c'1 = 1*r0,c1 + 1*r1,c2 + 2*r2,c3 + 3*r3,c0\n      c'1 = 3*r0,c1 + 1*r1,c2 + 1*r2,c3 + 2*r3,c0\n\n      ... and so forth for c'2 and c'3. The important distinction is\n      that the columns are cycling, with c0 being used with the m0\n      map when calculating c0, but c1 being used with the m0 map when\n      calculating c1 ... and so forth.\n\n      When performing the inverse we transform the mirror image and\n      skip the bottom row, instead of the top one, and move upwards:\n\n      c3 c2 c1 c0 => c0 c3 c2 c1  (cycled 3 bytes) *same as encryption\n      c3 c2 c1 c0    c1 c0 c3 c2  (cycled 2 bytes)\n      c3 c2 c1 c0    c2 c1 c0 c3  (cycled 1 byte)  *same as encryption\n      c3 c2 c1 c0    c3 c2 c1 c0\n\n      If you compare the resulting matrices for ShiftRows()+MixColumns()\n      and for InvShiftRows()+InvMixColumns() the 2nd and 4th columns are\n      different (in encrypt mode vs. decrypt mode). So in order to use\n      the same code to handle both encryption and decryption, we will\n      need to do some mapping.\n\n      If in encryption mode we let a=c0, b=c1, c=c2, d=c3, and r<N> be\n      a row number in the state, then the resulting matrix in encryption\n      mode for applying the above transformations would be:\n\n      r1: a b c d\n      r2: b c d a\n      r3: c d a b\n      r4: d a b c\n\n      If we did the same in decryption mode we would get:\n\n      r1: a d c b\n      r2: b a d c\n      r3: c b a d\n      r4: d c b a\n\n      If instead we swap d and b (set b=c3 and d=c1), then we get:\n\n      r1: a b c d\n      r2: d a b c\n      r3: c d a b\n      r4: b c d a\n\n      Now the 1st and 3rd rows are the same as the encryption matrix. All\n      we need to do then to make the mapping exactly the same is to swap\n      the 2nd and 4th rows when in decryption mode. To do this without\n      having to do it on each iteration, we swapped the 2nd and 4th rows\n      in the decryption key schedule. We also have to do the swap above\n      when we first pull in the input and when we set the final output. */\n    a2 =\n      m0[a >>> 24] ^\n      m1[b >>> 16 & 255] ^\n      m2[c >>> 8 & 255] ^\n      m3[d & 255] ^ w[++i];\n    b2 =\n      m0[b >>> 24] ^\n      m1[c >>> 16 & 255] ^\n      m2[d >>> 8 & 255] ^\n      m3[a & 255] ^ w[++i];\n    c2 =\n      m0[c >>> 24] ^\n      m1[d >>> 16 & 255] ^\n      m2[a >>> 8 & 255] ^\n      m3[b & 255] ^ w[++i];\n    d =\n      m0[d >>> 24] ^\n      m1[a >>> 16 & 255] ^\n      m2[b >>> 8 & 255] ^\n      m3[c & 255] ^ w[++i];\n    a = a2;\n    b = b2;\n    c = c2;\n  }\n\n  /*\n    Encrypt:\n    SubBytes(state)\n    ShiftRows(state)\n    AddRoundKey(state, w[Nr*Nb, (Nr+1)*Nb-1])\n\n    Decrypt:\n    InvShiftRows(state)\n    InvSubBytes(state)\n    AddRoundKey(state, w[0, Nb-1])\n   */\n  // Note: rows are shifted inline\n  output[0] =\n    (sub[a >>> 24] << 24) ^\n    (sub[b >>> 16 & 255] << 16) ^\n    (sub[c >>> 8 & 255] << 8) ^\n    (sub[d & 255]) ^ w[++i];\n  output[decrypt ? 3 : 1] =\n    (sub[b >>> 24] << 24) ^\n    (sub[c >>> 16 & 255] << 16) ^\n    (sub[d >>> 8 & 255] << 8) ^\n    (sub[a & 255]) ^ w[++i];\n  output[2] =\n    (sub[c >>> 24] << 24) ^\n    (sub[d >>> 16 & 255] << 16) ^\n    (sub[a >>> 8 & 255] << 8) ^\n    (sub[b & 255]) ^ w[++i];\n  output[decrypt ? 1 : 3] =\n    (sub[d >>> 24] << 24) ^\n    (sub[a >>> 16 & 255] << 16) ^\n    (sub[b >>> 8 & 255] << 8) ^\n    (sub[c & 255]) ^ w[++i];\n}\n\n/**\n * Deprecated. Instead, use:\n *\n * forge.cipher.createCipher('AES-<mode>', key);\n * forge.cipher.createDecipher('AES-<mode>', key);\n *\n * Creates a deprecated AES cipher object. This object's mode will default to\n * CBC (cipher-block-chaining).\n *\n * The key and iv may be given as a string of bytes, an array of bytes, a\n * byte buffer, or an array of 32-bit words.\n *\n * @param options the options to use.\n *          key the symmetric key to use.\n *          output the buffer to write to.\n *          decrypt true for decryption, false for encryption.\n *          mode the cipher mode to use (default: 'CBC').\n *\n * @return the cipher.\n */\nfunction _createCipher(options) {\n  options = options || {};\n  var mode = (options.mode || 'CBC').toUpperCase();\n  var algorithm = 'AES-' + mode;\n\n  var cipher;\n  if(options.decrypt) {\n    cipher = forge.cipher.createDecipher(algorithm, options.key);\n  } else {\n    cipher = forge.cipher.createCipher(algorithm, options.key);\n  }\n\n  // backwards compatible start API\n  var start = cipher.start;\n  cipher.start = function(iv, options) {\n    // backwards compatibility: support second arg as output buffer\n    var output = null;\n    if(options instanceof forge.util.ByteBuffer) {\n      output = options;\n      options = {};\n    }\n    options = options || {};\n    options.output = output;\n    options.iv = iv;\n    start.call(cipher, options);\n  };\n\n  return cipher;\n}\n","/**\n * Javascript implementation of basic RSA algorithms.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2014 Digital Bazaar, Inc.\n *\n * The only algorithm currently supported for PKI is RSA.\n *\n * An RSA key is often stored in ASN.1 DER format. The SubjectPublicKeyInfo\n * ASN.1 structure is composed of an algorithm of type AlgorithmIdentifier\n * and a subjectPublicKey of type bit string.\n *\n * The AlgorithmIdentifier contains an Object Identifier (OID) and parameters\n * for the algorithm, if any. In the case of RSA, there aren't any.\n *\n * SubjectPublicKeyInfo ::= SEQUENCE {\n *   algorithm AlgorithmIdentifier,\n *   subjectPublicKey BIT STRING\n * }\n *\n * AlgorithmIdentifer ::= SEQUENCE {\n *   algorithm OBJECT IDENTIFIER,\n *   parameters ANY DEFINED BY algorithm OPTIONAL\n * }\n *\n * For an RSA public key, the subjectPublicKey is:\n *\n * RSAPublicKey ::= SEQUENCE {\n *   modulus            INTEGER,    -- n\n *   publicExponent     INTEGER     -- e\n * }\n *\n * PrivateKeyInfo ::= SEQUENCE {\n *   version                   Version,\n *   privateKeyAlgorithm       PrivateKeyAlgorithmIdentifier,\n *   privateKey                PrivateKey,\n *   attributes           [0]  IMPLICIT Attributes OPTIONAL\n * }\n *\n * Version ::= INTEGER\n * PrivateKeyAlgorithmIdentifier ::= AlgorithmIdentifier\n * PrivateKey ::= OCTET STRING\n * Attributes ::= SET OF Attribute\n *\n * An RSA private key as the following structure:\n *\n * RSAPrivateKey ::= SEQUENCE {\n *   version Version,\n *   modulus INTEGER, -- n\n *   publicExponent INTEGER, -- e\n *   privateExponent INTEGER, -- d\n *   prime1 INTEGER, -- p\n *   prime2 INTEGER, -- q\n *   exponent1 INTEGER, -- d mod (p-1)\n *   exponent2 INTEGER, -- d mod (q-1)\n *   coefficient INTEGER -- (inverse of q) mod p\n * }\n *\n * Version ::= INTEGER\n *\n * The OID for the RSA key algorithm is: 1.2.840.113549.1.1.1\n */\nvar forge = require('./forge');\nrequire('./asn1');\nrequire('./jsbn');\nrequire('./oids');\nrequire('./pkcs1');\nrequire('./prime');\nrequire('./random');\nrequire('./util');\n\nif(typeof BigInteger === 'undefined') {\n  var BigInteger = forge.jsbn.BigInteger;\n}\n\nvar _crypto = forge.util.isNodejs ? require('crypto') : null;\n\n// shortcut for asn.1 API\nvar asn1 = forge.asn1;\n\n// shortcut for util API\nvar util = forge.util;\n\n/*\n * RSA encryption and decryption, see RFC 2313.\n */\nforge.pki = forge.pki || {};\nmodule.exports = forge.pki.rsa = forge.rsa = forge.rsa || {};\nvar pki = forge.pki;\n\n// for finding primes, which are 30k+i for i = 1, 7, 11, 13, 17, 19, 23, 29\nvar GCD_30_DELTA = [6, 4, 2, 4, 2, 4, 6, 2];\n\n// validator for a PrivateKeyInfo structure\nvar privateKeyValidator = {\n  // PrivateKeyInfo\n  name: 'PrivateKeyInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    // Version (INTEGER)\n    name: 'PrivateKeyInfo.version',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyVersion'\n  }, {\n    // privateKeyAlgorithm\n    name: 'PrivateKeyInfo.privateKeyAlgorithm',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'AlgorithmIdentifier.algorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'privateKeyOid'\n    }]\n  }, {\n    // PrivateKey\n    name: 'PrivateKeyInfo',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OCTETSTRING,\n    constructed: false,\n    capture: 'privateKey'\n  }]\n};\n\n// validator for an RSA private key\nvar rsaPrivateKeyValidator = {\n  // RSAPrivateKey\n  name: 'RSAPrivateKey',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    // Version (INTEGER)\n    name: 'RSAPrivateKey.version',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyVersion'\n  }, {\n    // modulus (n)\n    name: 'RSAPrivateKey.modulus',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyModulus'\n  }, {\n    // publicExponent (e)\n    name: 'RSAPrivateKey.publicExponent',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyPublicExponent'\n  }, {\n    // privateExponent (d)\n    name: 'RSAPrivateKey.privateExponent',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyPrivateExponent'\n  }, {\n    // prime1 (p)\n    name: 'RSAPrivateKey.prime1',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyPrime1'\n  }, {\n    // prime2 (q)\n    name: 'RSAPrivateKey.prime2',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyPrime2'\n  }, {\n    // exponent1 (d mod (p-1))\n    name: 'RSAPrivateKey.exponent1',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyExponent1'\n  }, {\n    // exponent2 (d mod (q-1))\n    name: 'RSAPrivateKey.exponent2',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyExponent2'\n  }, {\n    // coefficient ((inverse of q) mod p)\n    name: 'RSAPrivateKey.coefficient',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'privateKeyCoefficient'\n  }]\n};\n\n// validator for an RSA public key\nvar rsaPublicKeyValidator = {\n  // RSAPublicKey\n  name: 'RSAPublicKey',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    // modulus (n)\n    name: 'RSAPublicKey.modulus',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'publicKeyModulus'\n  }, {\n    // publicExponent (e)\n    name: 'RSAPublicKey.exponent',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.INTEGER,\n    constructed: false,\n    capture: 'publicKeyExponent'\n  }]\n};\n\n// validator for an SubjectPublicKeyInfo structure\n// Note: Currently only works with an RSA public key\nvar publicKeyValidator = forge.pki.rsa.publicKeyValidator = {\n  name: 'SubjectPublicKeyInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  captureAsn1: 'subjectPublicKeyInfo',\n  value: [{\n    name: 'SubjectPublicKeyInfo.AlgorithmIdentifier',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'AlgorithmIdentifier.algorithm',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'publicKeyOid'\n    }]\n  }, {\n    // subjectPublicKey\n    name: 'SubjectPublicKeyInfo.subjectPublicKey',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.BITSTRING,\n    constructed: false,\n    value: [{\n      // RSAPublicKey\n      name: 'SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.SEQUENCE,\n      constructed: true,\n      optional: true,\n      captureAsn1: 'rsaPublicKey'\n    }]\n  }]\n};\n\n// validator for a DigestInfo structure\nvar digestInfoValidator = {\n  name: 'DigestInfo',\n  tagClass: asn1.Class.UNIVERSAL,\n  type: asn1.Type.SEQUENCE,\n  constructed: true,\n  value: [{\n    name: 'DigestInfo.DigestAlgorithm',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.SEQUENCE,\n    constructed: true,\n    value: [{\n      name: 'DigestInfo.DigestAlgorithm.algorithmIdentifier',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.OID,\n      constructed: false,\n      capture: 'algorithmIdentifier'\n    }, {\n      // NULL paramters\n      name: 'DigestInfo.DigestAlgorithm.parameters',\n      tagClass: asn1.Class.UNIVERSAL,\n      type: asn1.Type.NULL,\n      // captured only to check existence for md2 and md5\n      capture: 'parameters',\n      optional: true,\n      constructed: false\n    }]\n  }, {\n    // digest\n    name: 'DigestInfo.digest',\n    tagClass: asn1.Class.UNIVERSAL,\n    type: asn1.Type.OCTETSTRING,\n    constructed: false,\n    capture: 'digest'\n  }]\n};\n\n/**\n * Wrap digest in DigestInfo object.\n *\n * This function implements EMSA-PKCS1-v1_5-ENCODE as per RFC 3447.\n *\n * DigestInfo ::= SEQUENCE {\n *   digestAlgorithm DigestAlgorithmIdentifier,\n *   digest Digest\n * }\n *\n * DigestAlgorithmIdentifier ::= AlgorithmIdentifier\n * Digest ::= OCTET STRING\n *\n * @param md the message digest object with the hash to sign.\n *\n * @return the encoded message (ready for RSA encrytion)\n */\nvar emsaPkcs1v15encode = function(md) {\n  // get the oid for the algorithm\n  var oid;\n  if(md.algorithm in pki.oids) {\n    oid = pki.oids[md.algorithm];\n  } else {\n    var error = new Error('Unknown message digest algorithm.');\n    error.algorithm = md.algorithm;\n    throw error;\n  }\n  var oidBytes = asn1.oidToDer(oid).getBytes();\n\n  // create the digest info\n  var digestInfo = asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n  var digestAlgorithm = asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, []);\n  digestAlgorithm.value.push(asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.OID, false, oidBytes));\n  digestAlgorithm.value.push(asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.NULL, false, ''));\n  var digest = asn1.create(\n    asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING,\n    false, md.digest().getBytes());\n  digestInfo.value.push(digestAlgorithm);\n  digestInfo.value.push(digest);\n\n  // encode digest info\n  return asn1.toDer(digestInfo).getBytes();\n};\n\n/**\n * Performs x^c mod n (RSA encryption or decryption operation).\n *\n * @param x the number to raise and mod.\n * @param key the key to use.\n * @param pub true if the key is public, false if private.\n *\n * @return the result of x^c mod n.\n */\nvar _modPow = function(x, key, pub) {\n  if(pub) {\n    return x.modPow(key.e, key.n);\n  }\n\n  if(!key.p || !key.q) {\n    // allow calculation without CRT params (slow)\n    return x.modPow(key.d, key.n);\n  }\n\n  // pre-compute dP, dQ, and qInv if necessary\n  if(!key.dP) {\n    key.dP = key.d.mod(key.p.subtract(BigInteger.ONE));\n  }\n  if(!key.dQ) {\n    key.dQ = key.d.mod(key.q.subtract(BigInteger.ONE));\n  }\n  if(!key.qInv) {\n    key.qInv = key.q.modInverse(key.p);\n  }\n\n  /* Chinese remainder theorem (CRT) states:\n\n    Suppose n1, n2, ..., nk are positive integers which are pairwise\n    coprime (n1 and n2 have no common factors other than 1). For any\n    integers x1, x2, ..., xk there exists an integer x solving the\n    system of simultaneous congruences (where ~= means modularly\n    congruent so a ~= b mod n means a mod n = b mod n):\n\n    x ~= x1 mod n1\n    x ~= x2 mod n2\n    ...\n    x ~= xk mod nk\n\n    This system of congruences has a single simultaneous solution x\n    between 0 and n - 1. Furthermore, each xk solution and x itself\n    is congruent modulo the product n = n1*n2*...*nk.\n    So x1 mod n = x2 mod n = xk mod n = x mod n.\n\n    The single simultaneous solution x can be solved with the following\n    equation:\n\n    x = sum(xi*ri*si) mod n where ri = n/ni and si = ri^-1 mod ni.\n\n    Where x is less than n, xi = x mod ni.\n\n    For RSA we are only concerned with k = 2. The modulus n = pq, where\n    p and q are coprime. The RSA decryption algorithm is:\n\n    y = x^d mod n\n\n    Given the above:\n\n    x1 = x^d mod p\n    r1 = n/p = q\n    s1 = q^-1 mod p\n    x2 = x^d mod q\n    r2 = n/q = p\n    s2 = p^-1 mod q\n\n    So y = (x1r1s1 + x2r2s2) mod n\n         = ((x^d mod p)q(q^-1 mod p) + (x^d mod q)p(p^-1 mod q)) mod n\n\n    According to Fermat's Little Theorem, if the modulus P is prime,\n    for any integer A not evenly divisible by P, A^(P-1) ~= 1 mod P.\n    Since A is not divisible by P it follows that if:\n    N ~= M mod (P - 1), then A^N mod P = A^M mod P. Therefore:\n\n    A^N mod P = A^(M mod (P - 1)) mod P. (The latter takes less effort\n    to calculate). In order to calculate x^d mod p more quickly the\n    exponent d mod (p - 1) is stored in the RSA private key (the same\n    is done for x^d mod q). These values are referred to as dP and dQ\n    respectively. Therefore we now have:\n\n    y = ((x^dP mod p)q(q^-1 mod p) + (x^dQ mod q)p(p^-1 mod q)) mod n\n\n    Since we'll be reducing x^dP by modulo p (same for q) we can also\n    reduce x by p (and q respectively) before hand. Therefore, let\n\n    xp = ((x mod p)^dP mod p), and\n    xq = ((x mod q)^dQ mod q), yielding:\n\n    y = (xp*q*(q^-1 mod p) + xq*p*(p^-1 mod q)) mod n\n\n    This can be further reduced to a simple algorithm that only\n    requires 1 inverse (the q inverse is used) to be used and stored.\n    The algorithm is called Garner's algorithm. If qInv is the\n    inverse of q, we simply calculate:\n\n    y = (qInv*(xp - xq) mod p) * q + xq\n\n    However, there are two further complications. First, we need to\n    ensure that xp > xq to prevent signed BigIntegers from being used\n    so we add p until this is true (since we will be mod'ing with\n    p anyway). Then, there is a known timing attack on algorithms\n    using the CRT. To mitigate this risk, \"cryptographic blinding\"\n    should be used. This requires simply generating a random number r\n    between 0 and n-1 and its inverse and multiplying x by r^e before\n    calculating y and then multiplying y by r^-1 afterwards. Note that\n    r must be coprime with n (gcd(r, n) === 1) in order to have an\n    inverse.\n  */\n\n  // cryptographic blinding\n  var r;\n  do {\n    r = new BigInteger(\n      forge.util.bytesToHex(forge.random.getBytes(key.n.bitLength() / 8)),\n      16);\n  } while(r.compareTo(key.n) >= 0 || !r.gcd(key.n).equals(BigInteger.ONE));\n  x = x.multiply(r.modPow(key.e, key.n)).mod(key.n);\n\n  // calculate xp and xq\n  var xp = x.mod(key.p).modPow(key.dP, key.p);\n  var xq = x.mod(key.q).modPow(key.dQ, key.q);\n\n  // xp must be larger than xq to avoid signed bit usage\n  while(xp.compareTo(xq) < 0) {\n    xp = xp.add(key.p);\n  }\n\n  // do last step\n  var y = xp.subtract(xq)\n    .multiply(key.qInv).mod(key.p)\n    .multiply(key.q).add(xq);\n\n  // remove effect of random for cryptographic blinding\n  y = y.multiply(r.modInverse(key.n)).mod(key.n);\n\n  return y;\n};\n\n/**\n * NOTE: THIS METHOD IS DEPRECATED, use 'sign' on a private key object or\n * 'encrypt' on a public key object instead.\n *\n * Performs RSA encryption.\n *\n * The parameter bt controls whether to put padding bytes before the\n * message passed in. Set bt to either true or false to disable padding\n * completely (in order to handle e.g. EMSA-PSS encoding seperately before),\n * signaling whether the encryption operation is a public key operation\n * (i.e. encrypting data) or not, i.e. private key operation (data signing).\n *\n * For PKCS#1 v1.5 padding pass in the block type to use, i.e. either 0x01\n * (for signing) or 0x02 (for encryption). The key operation mode (private\n * or public) is derived from this flag in that case).\n *\n * @param m the message to encrypt as a byte string.\n * @param key the RSA key to use.\n * @param bt for PKCS#1 v1.5 padding, the block type to use\n *   (0x01 for private key, 0x02 for public),\n *   to disable padding: true = public key, false = private key.\n *\n * @return the encrypted bytes as a string.\n */\npki.rsa.encrypt = function(m, key, bt) {\n  var pub = bt;\n  var eb;\n\n  // get the length of the modulus in bytes\n  var k = Math.ceil(key.n.bitLength() / 8);\n\n  if(bt !== false && bt !== true) {\n    // legacy, default to PKCS#1 v1.5 padding\n    pub = (bt === 0x02);\n    eb = _encodePkcs1_v1_5(m, key, bt);\n  } else {\n    eb = forge.util.createBuffer();\n    eb.putBytes(m);\n  }\n\n  // load encryption block as big integer 'x'\n  // FIXME: hex conversion inefficient, get BigInteger w/byte strings\n  var x = new BigInteger(eb.toHex(), 16);\n\n  // do RSA encryption\n  var y = _modPow(x, key, pub);\n\n  // convert y into the encrypted data byte string, if y is shorter in\n  // bytes than k, then prepend zero bytes to fill up ed\n  // FIXME: hex conversion inefficient, get BigInteger w/byte strings\n  var yhex = y.toString(16);\n  var ed = forge.util.createBuffer();\n  var zeros = k - Math.ceil(yhex.length / 2);\n  while(zeros > 0) {\n    ed.putByte(0x00);\n    --zeros;\n  }\n  ed.putBytes(forge.util.hexToBytes(yhex));\n  return ed.getBytes();\n};\n\n/**\n * NOTE: THIS METHOD IS DEPRECATED, use 'decrypt' on a private key object or\n * 'verify' on a public key object instead.\n *\n * Performs RSA decryption.\n *\n * The parameter ml controls whether to apply PKCS#1 v1.5 padding\n * or not.  Set ml = false to disable padding removal completely\n * (in order to handle e.g. EMSA-PSS later on) and simply pass back\n * the RSA encryption block.\n *\n * @param ed the encrypted data to decrypt in as a byte string.\n * @param key the RSA key to use.\n * @param pub true for a public key operation, false for private.\n * @param ml the message length, if known, false to disable padding.\n *\n * @return the decrypted message as a byte string.\n */\npki.rsa.decrypt = function(ed, key, pub, ml) {\n  // get the length of the modulus in bytes\n  var k = Math.ceil(key.n.bitLength() / 8);\n\n  // error if the length of the encrypted data ED is not k\n  if(ed.length !== k) {\n    var error = new Error('Encrypted message length is invalid.');\n    error.length = ed.length;\n    error.expected = k;\n    throw error;\n  }\n\n  // convert encrypted data into a big integer\n  // FIXME: hex conversion inefficient, get BigInteger w/byte strings\n  var y = new BigInteger(forge.util.createBuffer(ed).toHex(), 16);\n\n  // y must be less than the modulus or it wasn't the result of\n  // a previous mod operation (encryption) using that modulus\n  if(y.compareTo(key.n) >= 0) {\n    throw new Error('Encrypted message is invalid.');\n  }\n\n  // do RSA decryption\n  var x = _modPow(y, key, pub);\n\n  // create the encryption block, if x is shorter in bytes than k, then\n  // prepend zero bytes to fill up eb\n  // FIXME: hex conversion inefficient, get BigInteger w/byte strings\n  var xhex = x.toString(16);\n  var eb = forge.util.createBuffer();\n  var zeros = k - Math.ceil(xhex.length / 2);\n  while(zeros > 0) {\n    eb.putByte(0x00);\n    --zeros;\n  }\n  eb.putBytes(forge.util.hexToBytes(xhex));\n\n  if(ml !== false) {\n    // legacy, default to PKCS#1 v1.5 padding\n    return _decodePkcs1_v1_5(eb.getBytes(), key, pub);\n  }\n\n  // return message\n  return eb.getBytes();\n};\n\n/**\n * Creates an RSA key-pair generation state object. It is used to allow\n * key-generation to be performed in steps. It also allows for a UI to\n * display progress updates.\n *\n * @param bits the size for the private key in bits, defaults to 2048.\n * @param e the public exponent to use, defaults to 65537 (0x10001).\n * @param [options] the options to use.\n *          prng a custom crypto-secure pseudo-random number generator to use,\n *            that must define \"getBytesSync\".\n *          algorithm the algorithm to use (default: 'PRIMEINC').\n *\n * @return the state object to use to generate the key-pair.\n */\npki.rsa.createKeyPairGenerationState = function(bits, e, options) {\n  // TODO: migrate step-based prime generation code to forge.prime\n\n  // set default bits\n  if(typeof(bits) === 'string') {\n    bits = parseInt(bits, 10);\n  }\n  bits = bits || 2048;\n\n  // create prng with api that matches BigInteger secure random\n  options = options || {};\n  var prng = options.prng || forge.random;\n  var rng = {\n    // x is an array to fill with bytes\n    nextBytes: function(x) {\n      var b = prng.getBytesSync(x.length);\n      for(var i = 0; i < x.length; ++i) {\n        x[i] = b.charCodeAt(i);\n      }\n    }\n  };\n\n  var algorithm = options.algorithm || 'PRIMEINC';\n\n  // create PRIMEINC algorithm state\n  var rval;\n  if(algorithm === 'PRIMEINC') {\n    rval = {\n      algorithm: algorithm,\n      state: 0,\n      bits: bits,\n      rng: rng,\n      eInt: e || 65537,\n      e: new BigInteger(null),\n      p: null,\n      q: null,\n      qBits: bits >> 1,\n      pBits: bits - (bits >> 1),\n      pqState: 0,\n      num: null,\n      keys: null\n    };\n    rval.e.fromInt(rval.eInt);\n  } else {\n    throw new Error('Invalid key generation algorithm: ' + algorithm);\n  }\n\n  return rval;\n};\n\n/**\n * Attempts to runs the key-generation algorithm for at most n seconds\n * (approximately) using the given state. When key-generation has completed,\n * the keys will be stored in state.keys.\n *\n * To use this function to update a UI while generating a key or to prevent\n * causing browser lockups/warnings, set \"n\" to a value other than 0. A\n * simple pattern for generating a key and showing a progress indicator is:\n *\n * var state = pki.rsa.createKeyPairGenerationState(2048);\n * var step = function() {\n *   // step key-generation, run algorithm for 100 ms, repeat\n *   if(!forge.pki.rsa.stepKeyPairGenerationState(state, 100)) {\n *     setTimeout(step, 1);\n *   } else {\n *     // key-generation complete\n *     // TODO: turn off progress indicator here\n *     // TODO: use the generated key-pair in \"state.keys\"\n *   }\n * };\n * // TODO: turn on progress indicator here\n * setTimeout(step, 0);\n *\n * @param state the state to use.\n * @param n the maximum number of milliseconds to run the algorithm for, 0\n *          to run the algorithm to completion.\n *\n * @return true if the key-generation completed, false if not.\n */\npki.rsa.stepKeyPairGenerationState = function(state, n) {\n  // set default algorithm if not set\n  if(!('algorithm' in state)) {\n    state.algorithm = 'PRIMEINC';\n  }\n\n  // TODO: migrate step-based prime generation code to forge.prime\n  // TODO: abstract as PRIMEINC algorithm\n\n  // do key generation (based on Tom Wu's rsa.js, see jsbn.js license)\n  // with some minor optimizations and designed to run in steps\n\n  // local state vars\n  var THIRTY = new BigInteger(null);\n  THIRTY.fromInt(30);\n  var deltaIdx = 0;\n  var op_or = function(x, y) {return x | y;};\n\n  // keep stepping until time limit is reached or done\n  var t1 = +new Date();\n  var t2;\n  var total = 0;\n  while(state.keys === null && (n <= 0 || total < n)) {\n    // generate p or q\n    if(state.state === 0) {\n      /* Note: All primes are of the form:\n\n        30k+i, for i < 30 and gcd(30, i)=1, where there are 8 values for i\n\n        When we generate a random number, we always align it at 30k + 1. Each\n        time the number is determined not to be prime we add to get to the\n        next 'i', eg: if the number was at 30k + 1 we add 6. */\n      var bits = (state.p === null) ? state.pBits : state.qBits;\n      var bits1 = bits - 1;\n\n      // get a random number\n      if(state.pqState === 0) {\n        state.num = new BigInteger(bits, state.rng);\n        // force MSB set\n        if(!state.num.testBit(bits1)) {\n          state.num.bitwiseTo(\n            BigInteger.ONE.shiftLeft(bits1), op_or, state.num);\n        }\n        // align number on 30k+1 boundary\n        state.num.dAddOffset(31 - state.num.mod(THIRTY).byteValue(), 0);\n        deltaIdx = 0;\n\n        ++state.pqState;\n      } else if(state.pqState === 1) {\n        // try to make the number a prime\n        if(state.num.bitLength() > bits) {\n          // overflow, try again\n          state.pqState = 0;\n          // do primality test\n        } else if(state.num.isProbablePrime(\n          _getMillerRabinTests(state.num.bitLength()))) {\n          ++state.pqState;\n        } else {\n          // get next potential prime\n          state.num.dAddOffset(GCD_30_DELTA[deltaIdx++ % 8], 0);\n        }\n      } else if(state.pqState === 2) {\n        // ensure number is coprime with e\n        state.pqState =\n          (state.num.subtract(BigInteger.ONE).gcd(state.e)\n            .compareTo(BigInteger.ONE) === 0) ? 3 : 0;\n      } else if(state.pqState === 3) {\n        // store p or q\n        state.pqState = 0;\n        if(state.p === null) {\n          state.p = state.num;\n        } else {\n          state.q = state.num;\n        }\n\n        // advance state if both p and q are ready\n        if(state.p !== null && state.q !== null) {\n          ++state.state;\n        }\n        state.num = null;\n      }\n    } else if(state.state === 1) {\n      // ensure p is larger than q (swap them if not)\n      if(state.p.compareTo(state.q) < 0) {\n        state.num = state.p;\n        state.p = state.q;\n        state.q = state.num;\n      }\n      ++state.state;\n    } else if(state.state === 2) {\n      // compute phi: (p - 1)(q - 1) (Euler's totient function)\n      state.p1 = state.p.subtract(BigInteger.ONE);\n      state.q1 = state.q.subtract(BigInteger.ONE);\n      state.phi = state.p1.multiply(state.q1);\n      ++state.state;\n    } else if(state.state === 3) {\n      // ensure e and phi are coprime\n      if(state.phi.gcd(state.e).compareTo(BigInteger.ONE) === 0) {\n        // phi and e are coprime, advance\n        ++state.state;\n      } else {\n        // phi and e aren't coprime, so generate a new p and q\n        state.p = null;\n        state.q = null;\n        state.state = 0;\n      }\n    } else if(state.state === 4) {\n      // create n, ensure n is has the right number of bits\n      state.n = state.p.multiply(state.q);\n\n      // ensure n is right number of bits\n      if(state.n.bitLength() === state.bits) {\n        // success, advance\n        ++state.state;\n      } else {\n        // failed, get new q\n        state.q = null;\n        state.state = 0;\n      }\n    } else if(state.state === 5) {\n      // set keys\n      var d = state.e.modInverse(state.phi);\n      state.keys = {\n        privateKey: pki.rsa.setPrivateKey(\n          state.n, state.e, d, state.p, state.q,\n          d.mod(state.p1), d.mod(state.q1),\n          state.q.modInverse(state.p)),\n        publicKey: pki.rsa.setPublicKey(state.n, state.e)\n      };\n    }\n\n    // update timing\n    t2 = +new Date();\n    total += t2 - t1;\n    t1 = t2;\n  }\n\n  return state.keys !== null;\n};\n\n/**\n * Generates an RSA public-private key pair in a single call.\n *\n * To generate a key-pair in steps (to allow for progress updates and to\n * prevent blocking or warnings in slow browsers) then use the key-pair\n * generation state functions.\n *\n * To generate a key-pair asynchronously (either through web-workers, if\n * available, or by breaking up the work on the main thread), pass a\n * callback function.\n *\n * @param [bits] the size for the private key in bits, defaults to 2048.\n * @param [e] the public exponent to use, defaults to 65537.\n * @param [options] options for key-pair generation, if given then 'bits'\n *            and 'e' must *not* be given:\n *          bits the size for the private key in bits, (default: 2048).\n *          e the public exponent to use, (default: 65537 (0x10001)).\n *          workerScript the worker script URL.\n *          workers the number of web workers (if supported) to use,\n *            (default: 2).\n *          workLoad the size of the work load, ie: number of possible prime\n *            numbers for each web worker to check per work assignment,\n *            (default: 100).\n *          prng a custom crypto-secure pseudo-random number generator to use,\n *            that must define \"getBytesSync\". Disables use of native APIs.\n *          algorithm the algorithm to use (default: 'PRIMEINC').\n * @param [callback(err, keypair)] called once the operation completes.\n *\n * @return an object with privateKey and publicKey properties.\n */\npki.rsa.generateKeyPair = function(bits, e, options, callback) {\n  // (bits), (options), (callback)\n  if(arguments.length === 1) {\n    if(typeof bits === 'object') {\n      options = bits;\n      bits = undefined;\n    } else if(typeof bits === 'function') {\n      callback = bits;\n      bits = undefined;\n    }\n  } else if(arguments.length === 2) {\n    // (bits, e), (bits, options), (bits, callback), (options, callback)\n    if(typeof bits === 'number') {\n      if(typeof e === 'function') {\n        callback = e;\n        e = undefined;\n      } else if(typeof e !== 'number') {\n        options = e;\n        e = undefined;\n      }\n    } else {\n      options = bits;\n      callback = e;\n      bits = undefined;\n      e = undefined;\n    }\n  } else if(arguments.length === 3) {\n    // (bits, e, options), (bits, e, callback), (bits, options, callback)\n    if(typeof e === 'number') {\n      if(typeof options === 'function') {\n        callback = options;\n        options = undefined;\n      }\n    } else {\n      callback = options;\n      options = e;\n      e = undefined;\n    }\n  }\n  options = options || {};\n  if(bits === undefined) {\n    bits = options.bits || 2048;\n  }\n  if(e === undefined) {\n    e = options.e || 0x10001;\n  }\n\n  // use native code if permitted, available, and parameters are acceptable\n  if(!forge.options.usePureJavaScript && !options.prng &&\n    bits >= 256 && bits <= 16384 && (e === 0x10001 || e === 3)) {\n    if(callback) {\n      // try native async\n      if(_detectNodeCrypto('generateKeyPair')) {\n        return _crypto.generateKeyPair('rsa', {\n          modulusLength: bits,\n          publicExponent: e,\n          publicKeyEncoding: {\n            type: 'spki',\n            format: 'pem'\n          },\n          privateKeyEncoding: {\n            type: 'pkcs8',\n            format: 'pem'\n          }\n        }, function(err, pub, priv) {\n          if(err) {\n            return callback(err);\n          }\n          callback(null, {\n            privateKey: pki.privateKeyFromPem(priv),\n            publicKey: pki.publicKeyFromPem(pub)\n          });\n        });\n      }\n      if(_detectSubtleCrypto('generateKey') &&\n        _detectSubtleCrypto('exportKey')) {\n        // use standard native generateKey\n        return util.globalScope.crypto.subtle.generateKey({\n          name: 'RSASSA-PKCS1-v1_5',\n          modulusLength: bits,\n          publicExponent: _intToUint8Array(e),\n          hash: {name: 'SHA-256'}\n        }, true /* key can be exported*/, ['sign', 'verify'])\n        .then(function(pair) {\n          return util.globalScope.crypto.subtle.exportKey(\n            'pkcs8', pair.privateKey);\n        // avoiding catch(function(err) {...}) to support IE <= 8\n        }).then(undefined, function(err) {\n          callback(err);\n        }).then(function(pkcs8) {\n          if(pkcs8) {\n            var privateKey = pki.privateKeyFromAsn1(\n              asn1.fromDer(forge.util.createBuffer(pkcs8)));\n            callback(null, {\n              privateKey: privateKey,\n              publicKey: pki.setRsaPublicKey(privateKey.n, privateKey.e)\n            });\n          }\n        });\n      }\n      if(_detectSubtleMsCrypto('generateKey') &&\n        _detectSubtleMsCrypto('exportKey')) {\n        var genOp = util.globalScope.msCrypto.subtle.generateKey({\n          name: 'RSASSA-PKCS1-v1_5',\n          modulusLength: bits,\n          publicExponent: _intToUint8Array(e),\n          hash: {name: 'SHA-256'}\n        }, true /* key can be exported*/, ['sign', 'verify']);\n        genOp.oncomplete = function(e) {\n          var pair = e.target.result;\n          var exportOp = util.globalScope.msCrypto.subtle.exportKey(\n            'pkcs8', pair.privateKey);\n          exportOp.oncomplete = function(e) {\n            var pkcs8 = e.target.result;\n            var privateKey = pki.privateKeyFromAsn1(\n              asn1.fromDer(forge.util.createBuffer(pkcs8)));\n            callback(null, {\n              privateKey: privateKey,\n              publicKey: pki.setRsaPublicKey(privateKey.n, privateKey.e)\n            });\n          };\n          exportOp.onerror = function(err) {\n            callback(err);\n          };\n        };\n        genOp.onerror = function(err) {\n          callback(err);\n        };\n        return;\n      }\n    } else {\n      // try native sync\n      if(_detectNodeCrypto('generateKeyPairSync')) {\n        var keypair = _crypto.generateKeyPairSync('rsa', {\n          modulusLength: bits,\n          publicExponent: e,\n          publicKeyEncoding: {\n            type: 'spki',\n            format: 'pem'\n          },\n          privateKeyEncoding: {\n            type: 'pkcs8',\n            format: 'pem'\n          }\n        });\n        return {\n          privateKey: pki.privateKeyFromPem(keypair.privateKey),\n          publicKey: pki.publicKeyFromPem(keypair.publicKey)\n        };\n      }\n    }\n  }\n\n  // use JavaScript implementation\n  var state = pki.rsa.createKeyPairGenerationState(bits, e, options);\n  if(!callback) {\n    pki.rsa.stepKeyPairGenerationState(state, 0);\n    return state.keys;\n  }\n  _generateKeyPair(state, options, callback);\n};\n\n/**\n * Sets an RSA public key from BigIntegers modulus and exponent.\n *\n * @param n the modulus.\n * @param e the exponent.\n *\n * @return the public key.\n */\npki.setRsaPublicKey = pki.rsa.setPublicKey = function(n, e) {\n  var key = {\n    n: n,\n    e: e\n  };\n\n  /**\n   * Encrypts the given data with this public key. Newer applications\n   * should use the 'RSA-OAEP' decryption scheme, 'RSAES-PKCS1-V1_5' is for\n   * legacy applications.\n   *\n   * @param data the byte string to encrypt.\n   * @param scheme the encryption scheme to use:\n   *          'RSAES-PKCS1-V1_5' (default),\n   *          'RSA-OAEP',\n   *          'RAW', 'NONE', or null to perform raw RSA encryption,\n   *          an object with an 'encode' property set to a function\n   *          with the signature 'function(data, key)' that returns\n   *          a binary-encoded string representing the encoded data.\n   * @param schemeOptions any scheme-specific options.\n   *\n   * @return the encrypted byte string.\n   */\n  key.encrypt = function(data, scheme, schemeOptions) {\n    if(typeof scheme === 'string') {\n      scheme = scheme.toUpperCase();\n    } else if(scheme === undefined) {\n      scheme = 'RSAES-PKCS1-V1_5';\n    }\n\n    if(scheme === 'RSAES-PKCS1-V1_5') {\n      scheme = {\n        encode: function(m, key, pub) {\n          return _encodePkcs1_v1_5(m, key, 0x02).getBytes();\n        }\n      };\n    } else if(scheme === 'RSA-OAEP' || scheme === 'RSAES-OAEP') {\n      scheme = {\n        encode: function(m, key) {\n          return forge.pkcs1.encode_rsa_oaep(key, m, schemeOptions);\n        }\n      };\n    } else if(['RAW', 'NONE', 'NULL', null].indexOf(scheme) !== -1) {\n      scheme = {encode: function(e) {return e;}};\n    } else if(typeof scheme === 'string') {\n      throw new Error('Unsupported encryption scheme: \"' + scheme + '\".');\n    }\n\n    // do scheme-based encoding then rsa encryption\n    var e = scheme.encode(data, key, true);\n    return pki.rsa.encrypt(e, key, true);\n  };\n\n  /**\n   * Verifies the given signature against the given digest.\n   *\n   * PKCS#1 supports multiple (currently two) signature schemes:\n   * RSASSA-PKCS1-V1_5 and RSASSA-PSS.\n   *\n   * By default this implementation uses the \"old scheme\", i.e.\n   * RSASSA-PKCS1-V1_5, in which case once RSA-decrypted, the\n   * signature is an OCTET STRING that holds a DigestInfo.\n   *\n   * DigestInfo ::= SEQUENCE {\n   *   digestAlgorithm DigestAlgorithmIdentifier,\n   *   digest Digest\n   * }\n   * DigestAlgorithmIdentifier ::= AlgorithmIdentifier\n   * Digest ::= OCTET STRING\n   *\n   * To perform PSS signature verification, provide an instance\n   * of Forge PSS object as the scheme parameter.\n   *\n   * @param digest the message digest hash to compare against the signature,\n   *          as a binary-encoded string.\n   * @param signature the signature to verify, as a binary-encoded string.\n   * @param scheme signature verification scheme to use:\n   *          'RSASSA-PKCS1-V1_5' or undefined for RSASSA PKCS#1 v1.5,\n   *          a Forge PSS object for RSASSA-PSS,\n   *          'NONE' or null for none, DigestInfo will not be expected, but\n   *            PKCS#1 v1.5 padding will still be used.\n   * @param options optional verify options\n   *          _parseAllDigestBytes testing flag to control parsing of all\n   *            digest bytes. Unsupported and not for general usage.\n   *            (default: true)\n   *\n   * @return true if the signature was verified, false if not.\n   */\n  key.verify = function(digest, signature, scheme, options) {\n    if(typeof scheme === 'string') {\n      scheme = scheme.toUpperCase();\n    } else if(scheme === undefined) {\n      scheme = 'RSASSA-PKCS1-V1_5';\n    }\n    if(options === undefined) {\n      options = {\n        _parseAllDigestBytes: true\n      };\n    }\n    if(!('_parseAllDigestBytes' in options)) {\n      options._parseAllDigestBytes = true;\n    }\n\n    if(scheme === 'RSASSA-PKCS1-V1_5') {\n      scheme = {\n        verify: function(digest, d) {\n          // remove padding\n          d = _decodePkcs1_v1_5(d, key, true);\n          // d is ASN.1 BER-encoded DigestInfo\n          var obj = asn1.fromDer(d, {\n            parseAllBytes: options._parseAllDigestBytes\n          });\n\n          // validate DigestInfo\n          var capture = {};\n          var errors = [];\n          if(!asn1.validate(obj, digestInfoValidator, capture, errors)) {\n            var error = new Error(\n              'ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 ' +\n              'DigestInfo value.');\n            error.errors = errors;\n            throw error;\n          }\n          // check hash algorithm identifier\n          // see PKCS1-v1-5DigestAlgorithms in RFC 8017\n          // FIXME: add support to vaidator for strict value choices\n          var oid = asn1.derToOid(capture.algorithmIdentifier);\n          if(!(oid === forge.oids.md2 ||\n            oid === forge.oids.md5 ||\n            oid === forge.oids.sha1 ||\n            oid === forge.oids.sha224 ||\n            oid === forge.oids.sha256 ||\n            oid === forge.oids.sha384 ||\n            oid === forge.oids.sha512 ||\n            oid === forge.oids['sha512-224'] ||\n            oid === forge.oids['sha512-256'])) {\n            var error = new Error(\n              'Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.');\n            error.oid = oid;\n            throw error;\n          }\n\n          // special check for md2 and md5 that NULL parameters exist\n          if(oid === forge.oids.md2 || oid === forge.oids.md5) {\n            if(!('parameters' in capture)) {\n              throw new Error(\n                'ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 ' +\n                'DigestInfo value. ' +\n                'Missing algorithm identifer NULL parameters.');\n            }\n          }\n\n          // compare the given digest to the decrypted one\n          return digest === capture.digest;\n        }\n      };\n    } else if(scheme === 'NONE' || scheme === 'NULL' || scheme === null) {\n      scheme = {\n        verify: function(digest, d) {\n          // remove padding\n          d = _decodePkcs1_v1_5(d, key, true);\n          return digest === d;\n        }\n      };\n    }\n\n    // do rsa decryption w/o any decoding, then verify -- which does decoding\n    var d = pki.rsa.decrypt(signature, key, true, false);\n    return scheme.verify(digest, d, key.n.bitLength());\n  };\n\n  return key;\n};\n\n/**\n * Sets an RSA private key from BigIntegers modulus, exponent, primes,\n * prime exponents, and modular multiplicative inverse.\n *\n * @param n the modulus.\n * @param e the public exponent.\n * @param d the private exponent ((inverse of e) mod n).\n * @param p the first prime.\n * @param q the second prime.\n * @param dP exponent1 (d mod (p-1)).\n * @param dQ exponent2 (d mod (q-1)).\n * @param qInv ((inverse of q) mod p)\n *\n * @return the private key.\n */\npki.setRsaPrivateKey = pki.rsa.setPrivateKey = function(\n  n, e, d, p, q, dP, dQ, qInv) {\n  var key = {\n    n: n,\n    e: e,\n    d: d,\n    p: p,\n    q: q,\n    dP: dP,\n    dQ: dQ,\n    qInv: qInv\n  };\n\n  /**\n   * Decrypts the given data with this private key. The decryption scheme\n   * must match the one used to encrypt the data.\n   *\n   * @param data the byte string to decrypt.\n   * @param scheme the decryption scheme to use:\n   *          'RSAES-PKCS1-V1_5' (default),\n   *          'RSA-OAEP',\n   *          'RAW', 'NONE', or null to perform raw RSA decryption.\n   * @param schemeOptions any scheme-specific options.\n   *\n   * @return the decrypted byte string.\n   */\n  key.decrypt = function(data, scheme, schemeOptions) {\n    if(typeof scheme === 'string') {\n      scheme = scheme.toUpperCase();\n    } else if(scheme === undefined) {\n      scheme = 'RSAES-PKCS1-V1_5';\n    }\n\n    // do rsa decryption w/o any decoding\n    var d = pki.rsa.decrypt(data, key, false, false);\n\n    if(scheme === 'RSAES-PKCS1-V1_5') {\n      scheme = {decode: _decodePkcs1_v1_5};\n    } else if(scheme === 'RSA-OAEP' || scheme === 'RSAES-OAEP') {\n      scheme = {\n        decode: function(d, key) {\n          return forge.pkcs1.decode_rsa_oaep(key, d, schemeOptions);\n        }\n      };\n    } else if(['RAW', 'NONE', 'NULL', null].indexOf(scheme) !== -1) {\n      scheme = {decode: function(d) {return d;}};\n    } else {\n      throw new Error('Unsupported encryption scheme: \"' + scheme + '\".');\n    }\n\n    // decode according to scheme\n    return scheme.decode(d, key, false);\n  };\n\n  /**\n   * Signs the given digest, producing a signature.\n   *\n   * PKCS#1 supports multiple (currently two) signature schemes:\n   * RSASSA-PKCS1-V1_5 and RSASSA-PSS.\n   *\n   * By default this implementation uses the \"old scheme\", i.e.\n   * RSASSA-PKCS1-V1_5. In order to generate a PSS signature, provide\n   * an instance of Forge PSS object as the scheme parameter.\n   *\n   * @param md the message digest object with the hash to sign.\n   * @param scheme the signature scheme to use:\n   *          'RSASSA-PKCS1-V1_5' or undefined for RSASSA PKCS#1 v1.5,\n   *          a Forge PSS object for RSASSA-PSS,\n   *          'NONE' or null for none, DigestInfo will not be used but\n   *            PKCS#1 v1.5 padding will still be used.\n   *\n   * @return the signature as a byte string.\n   */\n  key.sign = function(md, scheme) {\n    /* Note: The internal implementation of RSA operations is being\n      transitioned away from a PKCS#1 v1.5 hard-coded scheme. Some legacy\n      code like the use of an encoding block identifier 'bt' will eventually\n      be removed. */\n\n    // private key operation\n    var bt = false;\n\n    if(typeof scheme === 'string') {\n      scheme = scheme.toUpperCase();\n    }\n\n    if(scheme === undefined || scheme === 'RSASSA-PKCS1-V1_5') {\n      scheme = {encode: emsaPkcs1v15encode};\n      bt = 0x01;\n    } else if(scheme === 'NONE' || scheme === 'NULL' || scheme === null) {\n      scheme = {encode: function() {return md;}};\n      bt = 0x01;\n    }\n\n    // encode and then encrypt\n    var d = scheme.encode(md, key.n.bitLength());\n    return pki.rsa.encrypt(d, key, bt);\n  };\n\n  return key;\n};\n\n/**\n * Wraps an RSAPrivateKey ASN.1 object in an ASN.1 PrivateKeyInfo object.\n *\n * @param rsaKey the ASN.1 RSAPrivateKey.\n *\n * @return the ASN.1 PrivateKeyInfo.\n */\npki.wrapRsaPrivateKey = function(rsaKey) {\n  // PrivateKeyInfo\n  return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // version (0)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      asn1.integerToDer(0).getBytes()),\n    // privateKeyAlgorithm\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      asn1.create(\n        asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(pki.oids.rsaEncryption).getBytes()),\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n    ]),\n    // PrivateKey\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OCTETSTRING, false,\n      asn1.toDer(rsaKey).getBytes())\n  ]);\n};\n\n/**\n * Converts a private key from an ASN.1 object.\n *\n * @param obj the ASN.1 representation of a PrivateKeyInfo containing an\n *          RSAPrivateKey or an RSAPrivateKey.\n *\n * @return the private key.\n */\npki.privateKeyFromAsn1 = function(obj) {\n  // get PrivateKeyInfo\n  var capture = {};\n  var errors = [];\n  if(asn1.validate(obj, privateKeyValidator, capture, errors)) {\n    obj = asn1.fromDer(forge.util.createBuffer(capture.privateKey));\n  }\n\n  // get RSAPrivateKey\n  capture = {};\n  errors = [];\n  if(!asn1.validate(obj, rsaPrivateKeyValidator, capture, errors)) {\n    var error = new Error('Cannot read private key. ' +\n      'ASN.1 object does not contain an RSAPrivateKey.');\n    error.errors = errors;\n    throw error;\n  }\n\n  // Note: Version is currently ignored.\n  // capture.privateKeyVersion\n  // FIXME: inefficient, get a BigInteger that uses byte strings\n  var n, e, d, p, q, dP, dQ, qInv;\n  n = forge.util.createBuffer(capture.privateKeyModulus).toHex();\n  e = forge.util.createBuffer(capture.privateKeyPublicExponent).toHex();\n  d = forge.util.createBuffer(capture.privateKeyPrivateExponent).toHex();\n  p = forge.util.createBuffer(capture.privateKeyPrime1).toHex();\n  q = forge.util.createBuffer(capture.privateKeyPrime2).toHex();\n  dP = forge.util.createBuffer(capture.privateKeyExponent1).toHex();\n  dQ = forge.util.createBuffer(capture.privateKeyExponent2).toHex();\n  qInv = forge.util.createBuffer(capture.privateKeyCoefficient).toHex();\n\n  // set private key\n  return pki.setRsaPrivateKey(\n    new BigInteger(n, 16),\n    new BigInteger(e, 16),\n    new BigInteger(d, 16),\n    new BigInteger(p, 16),\n    new BigInteger(q, 16),\n    new BigInteger(dP, 16),\n    new BigInteger(dQ, 16),\n    new BigInteger(qInv, 16));\n};\n\n/**\n * Converts a private key to an ASN.1 RSAPrivateKey.\n *\n * @param key the private key.\n *\n * @return the ASN.1 representation of an RSAPrivateKey.\n */\npki.privateKeyToAsn1 = pki.privateKeyToRSAPrivateKey = function(key) {\n  // RSAPrivateKey\n  return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // version (0 = only 2 primes, 1 multiple primes)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      asn1.integerToDer(0).getBytes()),\n    // modulus (n)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.n)),\n    // publicExponent (e)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.e)),\n    // privateExponent (d)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.d)),\n    // privateKeyPrime1 (p)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.p)),\n    // privateKeyPrime2 (q)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.q)),\n    // privateKeyExponent1 (dP)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.dP)),\n    // privateKeyExponent2 (dQ)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.dQ)),\n    // coefficient (qInv)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.qInv))\n  ]);\n};\n\n/**\n * Converts a public key from an ASN.1 SubjectPublicKeyInfo or RSAPublicKey.\n *\n * @param obj the asn1 representation of a SubjectPublicKeyInfo or RSAPublicKey.\n *\n * @return the public key.\n */\npki.publicKeyFromAsn1 = function(obj) {\n  // get SubjectPublicKeyInfo\n  var capture = {};\n  var errors = [];\n  if(asn1.validate(obj, publicKeyValidator, capture, errors)) {\n    // get oid\n    var oid = asn1.derToOid(capture.publicKeyOid);\n    if(oid !== pki.oids.rsaEncryption) {\n      var error = new Error('Cannot read public key. Unknown OID.');\n      error.oid = oid;\n      throw error;\n    }\n    obj = capture.rsaPublicKey;\n  }\n\n  // get RSA params\n  errors = [];\n  if(!asn1.validate(obj, rsaPublicKeyValidator, capture, errors)) {\n    var error = new Error('Cannot read public key. ' +\n      'ASN.1 object does not contain an RSAPublicKey.');\n    error.errors = errors;\n    throw error;\n  }\n\n  // FIXME: inefficient, get a BigInteger that uses byte strings\n  var n = forge.util.createBuffer(capture.publicKeyModulus).toHex();\n  var e = forge.util.createBuffer(capture.publicKeyExponent).toHex();\n\n  // set public key\n  return pki.setRsaPublicKey(\n    new BigInteger(n, 16),\n    new BigInteger(e, 16));\n};\n\n/**\n * Converts a public key to an ASN.1 SubjectPublicKeyInfo.\n *\n * @param key the public key.\n *\n * @return the asn1 representation of a SubjectPublicKeyInfo.\n */\npki.publicKeyToAsn1 = pki.publicKeyToSubjectPublicKeyInfo = function(key) {\n  // SubjectPublicKeyInfo\n  return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // AlgorithmIdentifier\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n      // algorithm\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.OID, false,\n        asn1.oidToDer(pki.oids.rsaEncryption).getBytes()),\n      // parameters (null)\n      asn1.create(asn1.Class.UNIVERSAL, asn1.Type.NULL, false, '')\n    ]),\n    // subjectPublicKey\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.BITSTRING, false, [\n      pki.publicKeyToRSAPublicKey(key)\n    ])\n  ]);\n};\n\n/**\n * Converts a public key to an ASN.1 RSAPublicKey.\n *\n * @param key the public key.\n *\n * @return the asn1 representation of a RSAPublicKey.\n */\npki.publicKeyToRSAPublicKey = function(key) {\n  // RSAPublicKey\n  return asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SEQUENCE, true, [\n    // modulus (n)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.n)),\n    // publicExponent (e)\n    asn1.create(asn1.Class.UNIVERSAL, asn1.Type.INTEGER, false,\n      _bnToBytes(key.e))\n  ]);\n};\n\n/**\n * Encodes a message using PKCS#1 v1.5 padding.\n *\n * @param m the message to encode.\n * @param key the RSA key to use.\n * @param bt the block type to use, i.e. either 0x01 (for signing) or 0x02\n *          (for encryption).\n *\n * @return the padded byte buffer.\n */\nfunction _encodePkcs1_v1_5(m, key, bt) {\n  var eb = forge.util.createBuffer();\n\n  // get the length of the modulus in bytes\n  var k = Math.ceil(key.n.bitLength() / 8);\n\n  /* use PKCS#1 v1.5 padding */\n  if(m.length > (k - 11)) {\n    var error = new Error('Message is too long for PKCS#1 v1.5 padding.');\n    error.length = m.length;\n    error.max = k - 11;\n    throw error;\n  }\n\n  /* A block type BT, a padding string PS, and the data D shall be\n    formatted into an octet string EB, the encryption block:\n\n    EB = 00 || BT || PS || 00 || D\n\n    The block type BT shall be a single octet indicating the structure of\n    the encryption block. For this version of the document it shall have\n    value 00, 01, or 02. For a private-key operation, the block type\n    shall be 00 or 01. For a public-key operation, it shall be 02.\n\n    The padding string PS shall consist of k-3-||D|| octets. For block\n    type 00, the octets shall have value 00; for block type 01, they\n    shall have value FF; and for block type 02, they shall be\n    pseudorandomly generated and nonzero. This makes the length of the\n    encryption block EB equal to k. */\n\n  // build the encryption block\n  eb.putByte(0x00);\n  eb.putByte(bt);\n\n  // create the padding\n  var padNum = k - 3 - m.length;\n  var padByte;\n  // private key op\n  if(bt === 0x00 || bt === 0x01) {\n    padByte = (bt === 0x00) ? 0x00 : 0xFF;\n    for(var i = 0; i < padNum; ++i) {\n      eb.putByte(padByte);\n    }\n  } else {\n    // public key op\n    // pad with random non-zero values\n    while(padNum > 0) {\n      var numZeros = 0;\n      var padBytes = forge.random.getBytes(padNum);\n      for(var i = 0; i < padNum; ++i) {\n        padByte = padBytes.charCodeAt(i);\n        if(padByte === 0) {\n          ++numZeros;\n        } else {\n          eb.putByte(padByte);\n        }\n      }\n      padNum = numZeros;\n    }\n  }\n\n  // zero followed by message\n  eb.putByte(0x00);\n  eb.putBytes(m);\n\n  return eb;\n}\n\n/**\n * Decodes a message using PKCS#1 v1.5 padding.\n *\n * @param em the message to decode.\n * @param key the RSA key to use.\n * @param pub true if the key is a public key, false if it is private.\n * @param ml the message length, if specified.\n *\n * @return the decoded bytes.\n */\nfunction _decodePkcs1_v1_5(em, key, pub, ml) {\n  // get the length of the modulus in bytes\n  var k = Math.ceil(key.n.bitLength() / 8);\n\n  /* It is an error if any of the following conditions occurs:\n\n    1. The encryption block EB cannot be parsed unambiguously.\n    2. The padding string PS consists of fewer than eight octets\n      or is inconsisent with the block type BT.\n    3. The decryption process is a public-key operation and the block\n      type BT is not 00 or 01, or the decryption process is a\n      private-key operation and the block type is not 02.\n   */\n\n  // parse the encryption block\n  var eb = forge.util.createBuffer(em);\n  var first = eb.getByte();\n  var bt = eb.getByte();\n  if(first !== 0x00 ||\n    (pub && bt !== 0x00 && bt !== 0x01) ||\n    (!pub && bt != 0x02) ||\n    (pub && bt === 0x00 && typeof(ml) === 'undefined')) {\n    throw new Error('Encryption block is invalid.');\n  }\n\n  var padNum = 0;\n  if(bt === 0x00) {\n    // check all padding bytes for 0x00\n    padNum = k - 3 - ml;\n    for(var i = 0; i < padNum; ++i) {\n      if(eb.getByte() !== 0x00) {\n        throw new Error('Encryption block is invalid.');\n      }\n    }\n  } else if(bt === 0x01) {\n    // find the first byte that isn't 0xFF, should be after all padding\n    padNum = 0;\n    while(eb.length() > 1) {\n      if(eb.getByte() !== 0xFF) {\n        --eb.read;\n        break;\n      }\n      ++padNum;\n    }\n  } else if(bt === 0x02) {\n    // look for 0x00 byte\n    padNum = 0;\n    while(eb.length() > 1) {\n      if(eb.getByte() === 0x00) {\n        --eb.read;\n        break;\n      }\n      ++padNum;\n    }\n  }\n\n  // zero must be 0x00 and padNum must be (k - 3 - message length)\n  var zero = eb.getByte();\n  if(zero !== 0x00 || padNum !== (k - 3 - eb.length())) {\n    throw new Error('Encryption block is invalid.');\n  }\n\n  return eb.getBytes();\n}\n\n/**\n * Runs the key-generation algorithm asynchronously, either in the background\n * via Web Workers, or using the main thread and setImmediate.\n *\n * @param state the key-pair generation state.\n * @param [options] options for key-pair generation:\n *          workerScript the worker script URL.\n *          workers the number of web workers (if supported) to use,\n *            (default: 2, -1 to use estimated cores minus one).\n *          workLoad the size of the work load, ie: number of possible prime\n *            numbers for each web worker to check per work assignment,\n *            (default: 100).\n * @param callback(err, keypair) called once the operation completes.\n */\nfunction _generateKeyPair(state, options, callback) {\n  if(typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n  options = options || {};\n\n  var opts = {\n    algorithm: {\n      name: options.algorithm || 'PRIMEINC',\n      options: {\n        workers: options.workers || 2,\n        workLoad: options.workLoad || 100,\n        workerScript: options.workerScript\n      }\n    }\n  };\n  if('prng' in options) {\n    opts.prng = options.prng;\n  }\n\n  generate();\n\n  function generate() {\n    // find p and then q (done in series to simplify)\n    getPrime(state.pBits, function(err, num) {\n      if(err) {\n        return callback(err);\n      }\n      state.p = num;\n      if(state.q !== null) {\n        return finish(err, state.q);\n      }\n      getPrime(state.qBits, finish);\n    });\n  }\n\n  function getPrime(bits, callback) {\n    forge.prime.generateProbablePrime(bits, opts, callback);\n  }\n\n  function finish(err, num) {\n    if(err) {\n      return callback(err);\n    }\n\n    // set q\n    state.q = num;\n\n    // ensure p is larger than q (swap them if not)\n    if(state.p.compareTo(state.q) < 0) {\n      var tmp = state.p;\n      state.p = state.q;\n      state.q = tmp;\n    }\n\n    // ensure p is coprime with e\n    if(state.p.subtract(BigInteger.ONE).gcd(state.e)\n      .compareTo(BigInteger.ONE) !== 0) {\n      state.p = null;\n      generate();\n      return;\n    }\n\n    // ensure q is coprime with e\n    if(state.q.subtract(BigInteger.ONE).gcd(state.e)\n      .compareTo(BigInteger.ONE) !== 0) {\n      state.q = null;\n      getPrime(state.qBits, finish);\n      return;\n    }\n\n    // compute phi: (p - 1)(q - 1) (Euler's totient function)\n    state.p1 = state.p.subtract(BigInteger.ONE);\n    state.q1 = state.q.subtract(BigInteger.ONE);\n    state.phi = state.p1.multiply(state.q1);\n\n    // ensure e and phi are coprime\n    if(state.phi.gcd(state.e).compareTo(BigInteger.ONE) !== 0) {\n      // phi and e aren't coprime, so generate a new p and q\n      state.p = state.q = null;\n      generate();\n      return;\n    }\n\n    // create n, ensure n is has the right number of bits\n    state.n = state.p.multiply(state.q);\n    if(state.n.bitLength() !== state.bits) {\n      // failed, get new q\n      state.q = null;\n      getPrime(state.qBits, finish);\n      return;\n    }\n\n    // set keys\n    var d = state.e.modInverse(state.phi);\n    state.keys = {\n      privateKey: pki.rsa.setPrivateKey(\n        state.n, state.e, d, state.p, state.q,\n        d.mod(state.p1), d.mod(state.q1),\n        state.q.modInverse(state.p)),\n      publicKey: pki.rsa.setPublicKey(state.n, state.e)\n    };\n\n    callback(null, state.keys);\n  }\n}\n\n/**\n * Converts a positive BigInteger into 2's-complement big-endian bytes.\n *\n * @param b the big integer to convert.\n *\n * @return the bytes.\n */\nfunction _bnToBytes(b) {\n  // prepend 0x00 if first byte >= 0x80\n  var hex = b.toString(16);\n  if(hex[0] >= '8') {\n    hex = '00' + hex;\n  }\n  var bytes = forge.util.hexToBytes(hex);\n\n  // ensure integer is minimally-encoded\n  if(bytes.length > 1 &&\n    // leading 0x00 for positive integer\n    ((bytes.charCodeAt(0) === 0 &&\n    (bytes.charCodeAt(1) & 0x80) === 0) ||\n    // leading 0xFF for negative integer\n    (bytes.charCodeAt(0) === 0xFF &&\n    (bytes.charCodeAt(1) & 0x80) === 0x80))) {\n    return bytes.substr(1);\n  }\n  return bytes;\n}\n\n/**\n * Returns the required number of Miller-Rabin tests to generate a\n * prime with an error probability of (1/2)^80.\n *\n * See Handbook of Applied Cryptography Chapter 4, Table 4.4.\n *\n * @param bits the bit size.\n *\n * @return the required number of iterations.\n */\nfunction _getMillerRabinTests(bits) {\n  if(bits <= 100) return 27;\n  if(bits <= 150) return 18;\n  if(bits <= 200) return 15;\n  if(bits <= 250) return 12;\n  if(bits <= 300) return 9;\n  if(bits <= 350) return 8;\n  if(bits <= 400) return 7;\n  if(bits <= 500) return 6;\n  if(bits <= 600) return 5;\n  if(bits <= 800) return 4;\n  if(bits <= 1250) return 3;\n  return 2;\n}\n\n/**\n * Performs feature detection on the Node crypto interface.\n *\n * @param fn the feature (function) to detect.\n *\n * @return true if detected, false if not.\n */\nfunction _detectNodeCrypto(fn) {\n  return forge.util.isNodejs && typeof _crypto[fn] === 'function';\n}\n\n/**\n * Performs feature detection on the SubtleCrypto interface.\n *\n * @param fn the feature (function) to detect.\n *\n * @return true if detected, false if not.\n */\nfunction _detectSubtleCrypto(fn) {\n  return (typeof util.globalScope !== 'undefined' &&\n    typeof util.globalScope.crypto === 'object' &&\n    typeof util.globalScope.crypto.subtle === 'object' &&\n    typeof util.globalScope.crypto.subtle[fn] === 'function');\n}\n\n/**\n * Performs feature detection on the deprecated Microsoft Internet Explorer\n * outdated SubtleCrypto interface. This function should only be used after\n * checking for the modern, standard SubtleCrypto interface.\n *\n * @param fn the feature (function) to detect.\n *\n * @return true if detected, false if not.\n */\nfunction _detectSubtleMsCrypto(fn) {\n  return (typeof util.globalScope !== 'undefined' &&\n    typeof util.globalScope.msCrypto === 'object' &&\n    typeof util.globalScope.msCrypto.subtle === 'object' &&\n    typeof util.globalScope.msCrypto.subtle[fn] === 'function');\n}\n\nfunction _intToUint8Array(x) {\n  var bytes = forge.util.hexToBytes(x.toString(16));\n  var buffer = new Uint8Array(bytes.length);\n  for(var i = 0; i < bytes.length; ++i) {\n    buffer[i] = bytes.charCodeAt(i);\n  }\n  return buffer;\n}\n\nfunction _privateKeyFromJwk(jwk) {\n  if(jwk.kty !== 'RSA') {\n    throw new Error(\n      'Unsupported key algorithm \"' + jwk.kty + '\"; algorithm must be \"RSA\".');\n  }\n  return pki.setRsaPrivateKey(\n    _base64ToBigInt(jwk.n),\n    _base64ToBigInt(jwk.e),\n    _base64ToBigInt(jwk.d),\n    _base64ToBigInt(jwk.p),\n    _base64ToBigInt(jwk.q),\n    _base64ToBigInt(jwk.dp),\n    _base64ToBigInt(jwk.dq),\n    _base64ToBigInt(jwk.qi));\n}\n\nfunction _publicKeyFromJwk(jwk) {\n  if(jwk.kty !== 'RSA') {\n    throw new Error('Key algorithm must be \"RSA\".');\n  }\n  return pki.setRsaPublicKey(\n    _base64ToBigInt(jwk.n),\n    _base64ToBigInt(jwk.e));\n}\n\nfunction _base64ToBigInt(b64) {\n  return new BigInteger(forge.util.bytesToHex(forge.util.decode64(b64)), 16);\n}\n","// Copyright (c) 2005  Tom Wu\n// All Rights Reserved.\n// See \"LICENSE\" for details.\n\n// Basic JavaScript BN library - subset useful for RSA encryption.\n\n/*\nLicensing (LICENSE)\n-------------------\n\nThis software is covered under the following copyright:\n*/\n/*\n * Copyright (c) 2003-2005  Tom Wu\n * All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS-IS\" AND WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY\n * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n *\n * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,\n * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER\n * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF\n * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT\n * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * In addition, the following condition applies:\n *\n * All redistributions must retain an intact copy of this copyright notice\n * and disclaimer.\n */\n/*\nAddress all questions regarding this license to:\n\n  Tom Wu\n  tjw@cs.Stanford.EDU\n*/\nvar forge = require('./forge');\n\nmodule.exports = forge.jsbn = forge.jsbn || {};\n\n// Bits per digit\nvar dbits;\n\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = ((canary&0xffffff)==0xefcafe);\n\n// (public) Constructor\nfunction BigInteger(a,b,c) {\n  this.data = [];\n  if(a != null)\n    if(\"number\" == typeof a) this.fromNumber(a,b,c);\n    else if(b == null && \"string\" != typeof a) this.fromString(a,256);\n    else this.fromString(a,b);\n}\nforge.jsbn.BigInteger = BigInteger;\n\n// return new, unset BigInteger\nfunction nbi() { return new BigInteger(null); }\n\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i,x,w,j,c,n) {\n  while(--n >= 0) {\n    var v = x*this.data[i++]+w.data[j]+c;\n    c = Math.floor(v/0x4000000);\n    w.data[j++] = v&0x3ffffff;\n  }\n  return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i,x,w,j,c,n) {\n  var xl = x&0x7fff, xh = x>>15;\n  while(--n >= 0) {\n    var l = this.data[i]&0x7fff;\n    var h = this.data[i++]>>15;\n    var m = xh*l+h*xl;\n    l = xl*l+((m&0x7fff)<<15)+w.data[j]+(c&0x3fffffff);\n    c = (l>>>30)+(m>>>15)+xh*h+(c>>>30);\n    w.data[j++] = l&0x3fffffff;\n  }\n  return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i,x,w,j,c,n) {\n  var xl = x&0x3fff, xh = x>>14;\n  while(--n >= 0) {\n    var l = this.data[i]&0x3fff;\n    var h = this.data[i++]>>14;\n    var m = xh*l+h*xl;\n    l = xl*l+((m&0x3fff)<<14)+w.data[j]+c;\n    c = (l>>28)+(m>>14)+xh*h;\n    w.data[j++] = l&0xfffffff;\n  }\n  return c;\n}\n\n// node.js (no browser)\nif(typeof(navigator) === 'undefined')\n{\n   BigInteger.prototype.am = am3;\n   dbits = 28;\n} else if(j_lm && (navigator.appName == \"Microsoft Internet Explorer\")) {\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n} else if(j_lm && (navigator.appName != \"Netscape\")) {\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n} else { // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\n\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = ((1<<dbits)-1);\nBigInteger.prototype.DV = (1<<dbits);\n\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2,BI_FP);\nBigInteger.prototype.F1 = BI_FP-dbits;\nBigInteger.prototype.F2 = 2*dbits-BI_FP;\n\n// Digit conversions\nvar BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\nvar BI_RC = new Array();\nvar rr,vv;\nrr = \"0\".charCodeAt(0);\nfor(vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\nrr = \"a\".charCodeAt(0);\nfor(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nrr = \"A\".charCodeAt(0);\nfor(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\n\nfunction int2char(n) { return BI_RM.charAt(n); }\nfunction intAt(s,i) {\n  var c = BI_RC[s.charCodeAt(i)];\n  return (c==null)?-1:c;\n}\n\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n  for(var i = this.t-1; i >= 0; --i) r.data[i] = this.data[i];\n  r.t = this.t;\n  r.s = this.s;\n}\n\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n  this.t = 1;\n  this.s = (x<0)?-1:0;\n  if(x > 0) this.data[0] = x;\n  else if(x < -1) this.data[0] = x+this.DV;\n  else this.t = 0;\n}\n\n// return bigint initialized to value\nfunction nbv(i) { var r = nbi(); r.fromInt(i); return r; }\n\n// (protected) set from string and radix\nfunction bnpFromString(s,b) {\n  var k;\n  if(b == 16) k = 4;\n  else if(b == 8) k = 3;\n  else if(b == 256) k = 8; // byte array\n  else if(b == 2) k = 1;\n  else if(b == 32) k = 5;\n  else if(b == 4) k = 2;\n  else { this.fromRadix(s,b); return; }\n  this.t = 0;\n  this.s = 0;\n  var i = s.length, mi = false, sh = 0;\n  while(--i >= 0) {\n    var x = (k==8)?s[i]&0xff:intAt(s,i);\n    if(x < 0) {\n      if(s.charAt(i) == \"-\") mi = true;\n      continue;\n    }\n    mi = false;\n    if(sh == 0)\n      this.data[this.t++] = x;\n    else if(sh+k > this.DB) {\n      this.data[this.t-1] |= (x&((1<<(this.DB-sh))-1))<<sh;\n      this.data[this.t++] = (x>>(this.DB-sh));\n    } else\n      this.data[this.t-1] |= x<<sh;\n    sh += k;\n    if(sh >= this.DB) sh -= this.DB;\n  }\n  if(k == 8 && (s[0]&0x80) != 0) {\n    this.s = -1;\n    if(sh > 0) this.data[this.t-1] |= ((1<<(this.DB-sh))-1)<<sh;\n  }\n  this.clamp();\n  if(mi) BigInteger.ZERO.subTo(this,this);\n}\n\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n  var c = this.s&this.DM;\n  while(this.t > 0 && this.data[this.t-1] == c) --this.t;\n}\n\n// (public) return string representation in given radix\nfunction bnToString(b) {\n  if(this.s < 0) return \"-\"+this.negate().toString(b);\n  var k;\n  if(b == 16) k = 4;\n  else if(b == 8) k = 3;\n  else if(b == 2) k = 1;\n  else if(b == 32) k = 5;\n  else if(b == 4) k = 2;\n  else return this.toRadix(b);\n  var km = (1<<k)-1, d, m = false, r = \"\", i = this.t;\n  var p = this.DB-(i*this.DB)%k;\n  if(i-- > 0) {\n    if(p < this.DB && (d = this.data[i]>>p) > 0) { m = true; r = int2char(d); }\n    while(i >= 0) {\n      if(p < k) {\n        d = (this.data[i]&((1<<p)-1))<<(k-p);\n        d |= this.data[--i]>>(p+=this.DB-k);\n      } else {\n        d = (this.data[i]>>(p-=k))&km;\n        if(p <= 0) { p += this.DB; --i; }\n      }\n      if(d > 0) m = true;\n      if(m) r += int2char(d);\n    }\n  }\n  return m?r:\"0\";\n}\n\n// (public) -this\nfunction bnNegate() { var r = nbi(); BigInteger.ZERO.subTo(this,r); return r; }\n\n// (public) |this|\nfunction bnAbs() { return (this.s<0)?this.negate():this; }\n\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n  var r = this.s-a.s;\n  if(r != 0) return r;\n  var i = this.t;\n  r = i-a.t;\n  if(r != 0) return (this.s<0)?-r:r;\n  while(--i >= 0) if((r=this.data[i]-a.data[i]) != 0) return r;\n  return 0;\n}\n\n// returns bit length of the integer x\nfunction nbits(x) {\n  var r = 1, t;\n  if((t=x>>>16) != 0) { x = t; r += 16; }\n  if((t=x>>8) != 0) { x = t; r += 8; }\n  if((t=x>>4) != 0) { x = t; r += 4; }\n  if((t=x>>2) != 0) { x = t; r += 2; }\n  if((t=x>>1) != 0) { x = t; r += 1; }\n  return r;\n}\n\n// (public) return the number of bits in \"this\"\nfunction bnBitLength() {\n  if(this.t <= 0) return 0;\n  return this.DB*(this.t-1)+nbits(this.data[this.t-1]^(this.s&this.DM));\n}\n\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n,r) {\n  var i;\n  for(i = this.t-1; i >= 0; --i) r.data[i+n] = this.data[i];\n  for(i = n-1; i >= 0; --i) r.data[i] = 0;\n  r.t = this.t+n;\n  r.s = this.s;\n}\n\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n,r) {\n  for(var i = n; i < this.t; ++i) r.data[i-n] = this.data[i];\n  r.t = Math.max(this.t-n,0);\n  r.s = this.s;\n}\n\n// (protected) r = this << n\nfunction bnpLShiftTo(n,r) {\n  var bs = n%this.DB;\n  var cbs = this.DB-bs;\n  var bm = (1<<cbs)-1;\n  var ds = Math.floor(n/this.DB), c = (this.s<<bs)&this.DM, i;\n  for(i = this.t-1; i >= 0; --i) {\n    r.data[i+ds+1] = (this.data[i]>>cbs)|c;\n    c = (this.data[i]&bm)<<bs;\n  }\n  for(i = ds-1; i >= 0; --i) r.data[i] = 0;\n  r.data[ds] = c;\n  r.t = this.t+ds+1;\n  r.s = this.s;\n  r.clamp();\n}\n\n// (protected) r = this >> n\nfunction bnpRShiftTo(n,r) {\n  r.s = this.s;\n  var ds = Math.floor(n/this.DB);\n  if(ds >= this.t) { r.t = 0; return; }\n  var bs = n%this.DB;\n  var cbs = this.DB-bs;\n  var bm = (1<<bs)-1;\n  r.data[0] = this.data[ds]>>bs;\n  for(var i = ds+1; i < this.t; ++i) {\n    r.data[i-ds-1] |= (this.data[i]&bm)<<cbs;\n    r.data[i-ds] = this.data[i]>>bs;\n  }\n  if(bs > 0) r.data[this.t-ds-1] |= (this.s&bm)<<cbs;\n  r.t = this.t-ds;\n  r.clamp();\n}\n\n// (protected) r = this - a\nfunction bnpSubTo(a,r) {\n  var i = 0, c = 0, m = Math.min(a.t,this.t);\n  while(i < m) {\n    c += this.data[i]-a.data[i];\n    r.data[i++] = c&this.DM;\n    c >>= this.DB;\n  }\n  if(a.t < this.t) {\n    c -= a.s;\n    while(i < this.t) {\n      c += this.data[i];\n      r.data[i++] = c&this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while(i < a.t) {\n      c -= a.data[i];\n      r.data[i++] = c&this.DM;\n      c >>= this.DB;\n    }\n    c -= a.s;\n  }\n  r.s = (c<0)?-1:0;\n  if(c < -1) r.data[i++] = this.DV+c;\n  else if(c > 0) r.data[i++] = c;\n  r.t = i;\n  r.clamp();\n}\n\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a,r) {\n  var x = this.abs(), y = a.abs();\n  var i = x.t;\n  r.t = i+y.t;\n  while(--i >= 0) r.data[i] = 0;\n  for(i = 0; i < y.t; ++i) r.data[i+x.t] = x.am(0,y.data[i],r,i,0,x.t);\n  r.s = 0;\n  r.clamp();\n  if(this.s != a.s) BigInteger.ZERO.subTo(r,r);\n}\n\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n  var x = this.abs();\n  var i = r.t = 2*x.t;\n  while(--i >= 0) r.data[i] = 0;\n  for(i = 0; i < x.t-1; ++i) {\n    var c = x.am(i,x.data[i],r,2*i,0,1);\n    if((r.data[i+x.t]+=x.am(i+1,2*x.data[i],r,2*i+1,c,x.t-i-1)) >= x.DV) {\n      r.data[i+x.t] -= x.DV;\n      r.data[i+x.t+1] = 1;\n    }\n  }\n  if(r.t > 0) r.data[r.t-1] += x.am(i,x.data[i],r,2*i,0,1);\n  r.s = 0;\n  r.clamp();\n}\n\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m,q,r) {\n  var pm = m.abs();\n  if(pm.t <= 0) return;\n  var pt = this.abs();\n  if(pt.t < pm.t) {\n    if(q != null) q.fromInt(0);\n    if(r != null) this.copyTo(r);\n    return;\n  }\n  if(r == null) r = nbi();\n  var y = nbi(), ts = this.s, ms = m.s;\n  var nsh = this.DB-nbits(pm.data[pm.t-1]);\t// normalize modulus\n  if(nsh > 0) { pm.lShiftTo(nsh,y); pt.lShiftTo(nsh,r); } else { pm.copyTo(y); pt.copyTo(r); }\n  var ys = y.t;\n  var y0 = y.data[ys-1];\n  if(y0 == 0) return;\n  var yt = y0*(1<<this.F1)+((ys>1)?y.data[ys-2]>>this.F2:0);\n  var d1 = this.FV/yt, d2 = (1<<this.F1)/yt, e = 1<<this.F2;\n  var i = r.t, j = i-ys, t = (q==null)?nbi():q;\n  y.dlShiftTo(j,t);\n  if(r.compareTo(t) >= 0) {\n    r.data[r.t++] = 1;\n    r.subTo(t,r);\n  }\n  BigInteger.ONE.dlShiftTo(ys,t);\n  t.subTo(y,y);\t// \"negative\" y so we can replace sub with am later\n  while(y.t < ys) y.data[y.t++] = 0;\n  while(--j >= 0) {\n    // Estimate quotient digit\n    var qd = (r.data[--i]==y0)?this.DM:Math.floor(r.data[i]*d1+(r.data[i-1]+e)*d2);\n    if((r.data[i]+=y.am(0,qd,r,j,0,ys)) < qd) {\t// Try it out\n      y.dlShiftTo(j,t);\n      r.subTo(t,r);\n      while(r.data[i] < --qd) r.subTo(t,r);\n    }\n  }\n  if(q != null) {\n    r.drShiftTo(ys,q);\n    if(ts != ms) BigInteger.ZERO.subTo(q,q);\n  }\n  r.t = ys;\n  r.clamp();\n  if(nsh > 0) r.rShiftTo(nsh,r);\t// Denormalize remainder\n  if(ts < 0) BigInteger.ZERO.subTo(r,r);\n}\n\n// (public) this mod a\nfunction bnMod(a) {\n  var r = nbi();\n  this.abs().divRemTo(a,null,r);\n  if(this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r,r);\n  return r;\n}\n\n// Modular reduction using \"classic\" algorithm\nfunction Classic(m) { this.m = m; }\nfunction cConvert(x) {\n  if(x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);\n  else return x;\n}\nfunction cRevert(x) { return x; }\nfunction cReduce(x) { x.divRemTo(this.m,null,x); }\nfunction cMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\nfunction cSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\n\nClassic.prototype.convert = cConvert;\nClassic.prototype.revert = cRevert;\nClassic.prototype.reduce = cReduce;\nClassic.prototype.mulTo = cMulTo;\nClassic.prototype.sqrTo = cSqrTo;\n\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n  if(this.t < 1) return 0;\n  var x = this.data[0];\n  if((x&1) == 0) return 0;\n  var y = x&3;\t\t// y == 1/x mod 2^2\n  y = (y*(2-(x&0xf)*y))&0xf;\t// y == 1/x mod 2^4\n  y = (y*(2-(x&0xff)*y))&0xff;\t// y == 1/x mod 2^8\n  y = (y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;\t// y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n  y = (y*(2-x*y%this.DV))%this.DV;\t\t// y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n  return (y>0)?this.DV-y:-y;\n}\n\n// Montgomery reduction\nfunction Montgomery(m) {\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp&0x7fff;\n  this.mph = this.mp>>15;\n  this.um = (1<<(m.DB-15))-1;\n  this.mt2 = 2*m.t;\n}\n\n// xR mod m\nfunction montConvert(x) {\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t,r);\n  r.divRemTo(this.m,null,r);\n  if(x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r,r);\n  return r;\n}\n\n// x/R mod m\nfunction montRevert(x) {\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n}\n\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n  while(x.t <= this.mt2)\t// pad x so am has enough room later\n    x.data[x.t++] = 0;\n  for(var i = 0; i < this.m.t; ++i) {\n    // faster way of calculating u0 = x.data[i]*mp mod DV\n    var j = x.data[i]&0x7fff;\n    var u0 = (j*this.mpl+(((j*this.mph+(x.data[i]>>15)*this.mpl)&this.um)<<15))&x.DM;\n    // use am to combine the multiply-shift-add into one call\n    j = i+this.m.t;\n    x.data[j] += this.m.am(0,u0,x,i,0,this.m.t);\n    // propagate carry\n    while(x.data[j] >= x.DV) { x.data[j] -= x.DV; x.data[++j]++; }\n  }\n  x.clamp();\n  x.drShiftTo(this.m.t,x);\n  if(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\n}\n\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\n\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\n\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n\n// (protected) true iff this is even\nfunction bnpIsEven() { return ((this.t>0)?(this.data[0]&1):this.s) == 0; }\n\n// (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\nfunction bnpExp(e,z) {\n  if(e > 0xffffffff || e < 1) return BigInteger.ONE;\n  var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e)-1;\n  g.copyTo(r);\n  while(--i >= 0) {\n    z.sqrTo(r,r2);\n    if((e&(1<<i)) > 0) z.mulTo(r2,g,r);\n    else { var t = r; r = r2; r2 = t; }\n  }\n  return z.revert(r);\n}\n\n// (public) this^e % m, 0 <= e < 2^32\nfunction bnModPowInt(e,m) {\n  var z;\n  if(e < 256 || m.isEven()) z = new Classic(m); else z = new Montgomery(m);\n  return this.exp(e,z);\n}\n\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.isEven = bnpIsEven;\nBigInteger.prototype.exp = bnpExp;\n\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.modPowInt = bnModPowInt;\n\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);\n\n// jsbn2 lib\n\n//Copyright (c) 2005-2009  Tom Wu\n//All Rights Reserved.\n//See \"LICENSE\" for details (See jsbn.js for LICENSE).\n\n//Extended JavaScript BN functions, required for RSA private ops.\n\n//Version 1.1: new BigInteger(\"0\", 10) returns \"proper\" zero\n\n//(public)\nfunction bnClone() { var r = nbi(); this.copyTo(r); return r; }\n\n//(public) return value as integer\nfunction bnIntValue() {\nif(this.s < 0) {\n if(this.t == 1) return this.data[0]-this.DV;\n else if(this.t == 0) return -1;\n} else if(this.t == 1) return this.data[0];\nelse if(this.t == 0) return 0;\n// assumes 16 < DB < 32\nreturn ((this.data[1]&((1<<(32-this.DB))-1))<<this.DB)|this.data[0];\n}\n\n//(public) return value as byte\nfunction bnByteValue() { return (this.t==0)?this.s:(this.data[0]<<24)>>24; }\n\n//(public) return value as short (assumes DB>=16)\nfunction bnShortValue() { return (this.t==0)?this.s:(this.data[0]<<16)>>16; }\n\n//(protected) return x s.t. r^x < DV\nfunction bnpChunkSize(r) { return Math.floor(Math.LN2*this.DB/Math.log(r)); }\n\n//(public) 0 if this == 0, 1 if this > 0\nfunction bnSigNum() {\nif(this.s < 0) return -1;\nelse if(this.t <= 0 || (this.t == 1 && this.data[0] <= 0)) return 0;\nelse return 1;\n}\n\n//(protected) convert to radix string\nfunction bnpToRadix(b) {\nif(b == null) b = 10;\nif(this.signum() == 0 || b < 2 || b > 36) return \"0\";\nvar cs = this.chunkSize(b);\nvar a = Math.pow(b,cs);\nvar d = nbv(a), y = nbi(), z = nbi(), r = \"\";\nthis.divRemTo(d,y,z);\nwhile(y.signum() > 0) {\n r = (a+z.intValue()).toString(b).substr(1) + r;\n y.divRemTo(d,y,z);\n}\nreturn z.intValue().toString(b) + r;\n}\n\n//(protected) convert from radix string\nfunction bnpFromRadix(s,b) {\nthis.fromInt(0);\nif(b == null) b = 10;\nvar cs = this.chunkSize(b);\nvar d = Math.pow(b,cs), mi = false, j = 0, w = 0;\nfor(var i = 0; i < s.length; ++i) {\n var x = intAt(s,i);\n if(x < 0) {\n   if(s.charAt(i) == \"-\" && this.signum() == 0) mi = true;\n   continue;\n }\n w = b*w+x;\n if(++j >= cs) {\n   this.dMultiply(d);\n   this.dAddOffset(w,0);\n   j = 0;\n   w = 0;\n }\n}\nif(j > 0) {\n this.dMultiply(Math.pow(b,j));\n this.dAddOffset(w,0);\n}\nif(mi) BigInteger.ZERO.subTo(this,this);\n}\n\n//(protected) alternate constructor\nfunction bnpFromNumber(a,b,c) {\nif(\"number\" == typeof b) {\n // new BigInteger(int,int,RNG)\n if(a < 2) this.fromInt(1);\n else {\n   this.fromNumber(a,c);\n   if(!this.testBit(a-1))  // force MSB set\n     this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);\n   if(this.isEven()) this.dAddOffset(1,0); // force odd\n   while(!this.isProbablePrime(b)) {\n     this.dAddOffset(2,0);\n     if(this.bitLength() > a) this.subTo(BigInteger.ONE.shiftLeft(a-1),this);\n   }\n }\n} else {\n // new BigInteger(int,RNG)\n var x = new Array(), t = a&7;\n x.length = (a>>3)+1;\n b.nextBytes(x);\n if(t > 0) x[0] &= ((1<<t)-1); else x[0] = 0;\n this.fromString(x,256);\n}\n}\n\n//(public) convert to bigendian byte array\nfunction bnToByteArray() {\nvar i = this.t, r = new Array();\nr[0] = this.s;\nvar p = this.DB-(i*this.DB)%8, d, k = 0;\nif(i-- > 0) {\n if(p < this.DB && (d = this.data[i]>>p) != (this.s&this.DM)>>p)\n   r[k++] = d|(this.s<<(this.DB-p));\n while(i >= 0) {\n   if(p < 8) {\n     d = (this.data[i]&((1<<p)-1))<<(8-p);\n     d |= this.data[--i]>>(p+=this.DB-8);\n   } else {\n     d = (this.data[i]>>(p-=8))&0xff;\n     if(p <= 0) { p += this.DB; --i; }\n   }\n   if((d&0x80) != 0) d |= -256;\n   if(k == 0 && (this.s&0x80) != (d&0x80)) ++k;\n   if(k > 0 || d != this.s) r[k++] = d;\n }\n}\nreturn r;\n}\n\nfunction bnEquals(a) { return(this.compareTo(a)==0); }\nfunction bnMin(a) { return(this.compareTo(a)<0)?this:a; }\nfunction bnMax(a) { return(this.compareTo(a)>0)?this:a; }\n\n//(protected) r = this op a (bitwise)\nfunction bnpBitwiseTo(a,op,r) {\nvar i, f, m = Math.min(a.t,this.t);\nfor(i = 0; i < m; ++i) r.data[i] = op(this.data[i],a.data[i]);\nif(a.t < this.t) {\n f = a.s&this.DM;\n for(i = m; i < this.t; ++i) r.data[i] = op(this.data[i],f);\n r.t = this.t;\n} else {\n f = this.s&this.DM;\n for(i = m; i < a.t; ++i) r.data[i] = op(f,a.data[i]);\n r.t = a.t;\n}\nr.s = op(this.s,a.s);\nr.clamp();\n}\n\n//(public) this & a\nfunction op_and(x,y) { return x&y; }\nfunction bnAnd(a) { var r = nbi(); this.bitwiseTo(a,op_and,r); return r; }\n\n//(public) this | a\nfunction op_or(x,y) { return x|y; }\nfunction bnOr(a) { var r = nbi(); this.bitwiseTo(a,op_or,r); return r; }\n\n//(public) this ^ a\nfunction op_xor(x,y) { return x^y; }\nfunction bnXor(a) { var r = nbi(); this.bitwiseTo(a,op_xor,r); return r; }\n\n//(public) this & ~a\nfunction op_andnot(x,y) { return x&~y; }\nfunction bnAndNot(a) { var r = nbi(); this.bitwiseTo(a,op_andnot,r); return r; }\n\n//(public) ~this\nfunction bnNot() {\nvar r = nbi();\nfor(var i = 0; i < this.t; ++i) r.data[i] = this.DM&~this.data[i];\nr.t = this.t;\nr.s = ~this.s;\nreturn r;\n}\n\n//(public) this << n\nfunction bnShiftLeft(n) {\nvar r = nbi();\nif(n < 0) this.rShiftTo(-n,r); else this.lShiftTo(n,r);\nreturn r;\n}\n\n//(public) this >> n\nfunction bnShiftRight(n) {\nvar r = nbi();\nif(n < 0) this.lShiftTo(-n,r); else this.rShiftTo(n,r);\nreturn r;\n}\n\n//return index of lowest 1-bit in x, x < 2^31\nfunction lbit(x) {\nif(x == 0) return -1;\nvar r = 0;\nif((x&0xffff) == 0) { x >>= 16; r += 16; }\nif((x&0xff) == 0) { x >>= 8; r += 8; }\nif((x&0xf) == 0) { x >>= 4; r += 4; }\nif((x&3) == 0) { x >>= 2; r += 2; }\nif((x&1) == 0) ++r;\nreturn r;\n}\n\n//(public) returns index of lowest 1-bit (or -1 if none)\nfunction bnGetLowestSetBit() {\nfor(var i = 0; i < this.t; ++i)\n if(this.data[i] != 0) return i*this.DB+lbit(this.data[i]);\nif(this.s < 0) return this.t*this.DB;\nreturn -1;\n}\n\n//return number of 1 bits in x\nfunction cbit(x) {\nvar r = 0;\nwhile(x != 0) { x &= x-1; ++r; }\nreturn r;\n}\n\n//(public) return number of set bits\nfunction bnBitCount() {\nvar r = 0, x = this.s&this.DM;\nfor(var i = 0; i < this.t; ++i) r += cbit(this.data[i]^x);\nreturn r;\n}\n\n//(public) true iff nth bit is set\nfunction bnTestBit(n) {\nvar j = Math.floor(n/this.DB);\nif(j >= this.t) return(this.s!=0);\nreturn((this.data[j]&(1<<(n%this.DB)))!=0);\n}\n\n//(protected) this op (1<<n)\nfunction bnpChangeBit(n,op) {\nvar r = BigInteger.ONE.shiftLeft(n);\nthis.bitwiseTo(r,op,r);\nreturn r;\n}\n\n//(public) this | (1<<n)\nfunction bnSetBit(n) { return this.changeBit(n,op_or); }\n\n//(public) this & ~(1<<n)\nfunction bnClearBit(n) { return this.changeBit(n,op_andnot); }\n\n//(public) this ^ (1<<n)\nfunction bnFlipBit(n) { return this.changeBit(n,op_xor); }\n\n//(protected) r = this + a\nfunction bnpAddTo(a,r) {\nvar i = 0, c = 0, m = Math.min(a.t,this.t);\nwhile(i < m) {\n c += this.data[i]+a.data[i];\n r.data[i++] = c&this.DM;\n c >>= this.DB;\n}\nif(a.t < this.t) {\n c += a.s;\n while(i < this.t) {\n   c += this.data[i];\n   r.data[i++] = c&this.DM;\n   c >>= this.DB;\n }\n c += this.s;\n} else {\n c += this.s;\n while(i < a.t) {\n   c += a.data[i];\n   r.data[i++] = c&this.DM;\n   c >>= this.DB;\n }\n c += a.s;\n}\nr.s = (c<0)?-1:0;\nif(c > 0) r.data[i++] = c;\nelse if(c < -1) r.data[i++] = this.DV+c;\nr.t = i;\nr.clamp();\n}\n\n//(public) this + a\nfunction bnAdd(a) { var r = nbi(); this.addTo(a,r); return r; }\n\n//(public) this - a\nfunction bnSubtract(a) { var r = nbi(); this.subTo(a,r); return r; }\n\n//(public) this * a\nfunction bnMultiply(a) { var r = nbi(); this.multiplyTo(a,r); return r; }\n\n//(public) this / a\nfunction bnDivide(a) { var r = nbi(); this.divRemTo(a,r,null); return r; }\n\n//(public) this % a\nfunction bnRemainder(a) { var r = nbi(); this.divRemTo(a,null,r); return r; }\n\n//(public) [this/a,this%a]\nfunction bnDivideAndRemainder(a) {\nvar q = nbi(), r = nbi();\nthis.divRemTo(a,q,r);\nreturn new Array(q,r);\n}\n\n//(protected) this *= n, this >= 0, 1 < n < DV\nfunction bnpDMultiply(n) {\nthis.data[this.t] = this.am(0,n-1,this,0,0,this.t);\n++this.t;\nthis.clamp();\n}\n\n//(protected) this += n << w words, this >= 0\nfunction bnpDAddOffset(n,w) {\nif(n == 0) return;\nwhile(this.t <= w) this.data[this.t++] = 0;\nthis.data[w] += n;\nwhile(this.data[w] >= this.DV) {\n this.data[w] -= this.DV;\n if(++w >= this.t) this.data[this.t++] = 0;\n ++this.data[w];\n}\n}\n\n//A \"null\" reducer\nfunction NullExp() {}\nfunction nNop(x) { return x; }\nfunction nMulTo(x,y,r) { x.multiplyTo(y,r); }\nfunction nSqrTo(x,r) { x.squareTo(r); }\n\nNullExp.prototype.convert = nNop;\nNullExp.prototype.revert = nNop;\nNullExp.prototype.mulTo = nMulTo;\nNullExp.prototype.sqrTo = nSqrTo;\n\n//(public) this^e\nfunction bnPow(e) { return this.exp(e,new NullExp()); }\n\n//(protected) r = lower n words of \"this * a\", a.t <= n\n//\"this\" should be the larger one if appropriate.\nfunction bnpMultiplyLowerTo(a,n,r) {\nvar i = Math.min(this.t+a.t,n);\nr.s = 0; // assumes a,this >= 0\nr.t = i;\nwhile(i > 0) r.data[--i] = 0;\nvar j;\nfor(j = r.t-this.t; i < j; ++i) r.data[i+this.t] = this.am(0,a.data[i],r,i,0,this.t);\nfor(j = Math.min(a.t,n); i < j; ++i) this.am(0,a.data[i],r,i,0,n-i);\nr.clamp();\n}\n\n//(protected) r = \"this * a\" without lower n words, n > 0\n//\"this\" should be the larger one if appropriate.\nfunction bnpMultiplyUpperTo(a,n,r) {\n--n;\nvar i = r.t = this.t+a.t-n;\nr.s = 0; // assumes a,this >= 0\nwhile(--i >= 0) r.data[i] = 0;\nfor(i = Math.max(n-this.t,0); i < a.t; ++i)\n r.data[this.t+i-n] = this.am(n-i,a.data[i],r,0,0,this.t+i-n);\nr.clamp();\nr.drShiftTo(1,r);\n}\n\n//Barrett modular reduction\nfunction Barrett(m) {\n// setup Barrett\nthis.r2 = nbi();\nthis.q3 = nbi();\nBigInteger.ONE.dlShiftTo(2*m.t,this.r2);\nthis.mu = this.r2.divide(m);\nthis.m = m;\n}\n\nfunction barrettConvert(x) {\nif(x.s < 0 || x.t > 2*this.m.t) return x.mod(this.m);\nelse if(x.compareTo(this.m) < 0) return x;\nelse { var r = nbi(); x.copyTo(r); this.reduce(r); return r; }\n}\n\nfunction barrettRevert(x) { return x; }\n\n//x = x mod m (HAC 14.42)\nfunction barrettReduce(x) {\nx.drShiftTo(this.m.t-1,this.r2);\nif(x.t > this.m.t+1) { x.t = this.m.t+1; x.clamp(); }\nthis.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);\nthis.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);\nwhile(x.compareTo(this.r2) < 0) x.dAddOffset(1,this.m.t+1);\nx.subTo(this.r2,x);\nwhile(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\n}\n\n//r = x^2 mod m; x != r\nfunction barrettSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\n\n//r = x*y mod m; x,y != r\nfunction barrettMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\n\nBarrett.prototype.convert = barrettConvert;\nBarrett.prototype.revert = barrettRevert;\nBarrett.prototype.reduce = barrettReduce;\nBarrett.prototype.mulTo = barrettMulTo;\nBarrett.prototype.sqrTo = barrettSqrTo;\n\n//(public) this^e % m (HAC 14.85)\nfunction bnModPow(e,m) {\nvar i = e.bitLength(), k, r = nbv(1), z;\nif(i <= 0) return r;\nelse if(i < 18) k = 1;\nelse if(i < 48) k = 3;\nelse if(i < 144) k = 4;\nelse if(i < 768) k = 5;\nelse k = 6;\nif(i < 8)\n z = new Classic(m);\nelse if(m.isEven())\n z = new Barrett(m);\nelse\n z = new Montgomery(m);\n\n// precomputation\nvar g = new Array(), n = 3, k1 = k-1, km = (1<<k)-1;\ng[1] = z.convert(this);\nif(k > 1) {\n var g2 = nbi();\n z.sqrTo(g[1],g2);\n while(n <= km) {\n   g[n] = nbi();\n   z.mulTo(g2,g[n-2],g[n]);\n   n += 2;\n }\n}\n\nvar j = e.t-1, w, is1 = true, r2 = nbi(), t;\ni = nbits(e.data[j])-1;\nwhile(j >= 0) {\n if(i >= k1) w = (e.data[j]>>(i-k1))&km;\n else {\n   w = (e.data[j]&((1<<(i+1))-1))<<(k1-i);\n   if(j > 0) w |= e.data[j-1]>>(this.DB+i-k1);\n }\n\n n = k;\n while((w&1) == 0) { w >>= 1; --n; }\n if((i -= n) < 0) { i += this.DB; --j; }\n if(is1) {  // ret == 1, don't bother squaring or multiplying it\n   g[w].copyTo(r);\n   is1 = false;\n } else {\n   while(n > 1) { z.sqrTo(r,r2); z.sqrTo(r2,r); n -= 2; }\n   if(n > 0) z.sqrTo(r,r2); else { t = r; r = r2; r2 = t; }\n   z.mulTo(r2,g[w],r);\n }\n\n while(j >= 0 && (e.data[j]&(1<<i)) == 0) {\n   z.sqrTo(r,r2); t = r; r = r2; r2 = t;\n   if(--i < 0) { i = this.DB-1; --j; }\n }\n}\nreturn z.revert(r);\n}\n\n//(public) gcd(this,a) (HAC 14.54)\nfunction bnGCD(a) {\nvar x = (this.s<0)?this.negate():this.clone();\nvar y = (a.s<0)?a.negate():a.clone();\nif(x.compareTo(y) < 0) { var t = x; x = y; y = t; }\nvar i = x.getLowestSetBit(), g = y.getLowestSetBit();\nif(g < 0) return x;\nif(i < g) g = i;\nif(g > 0) {\n x.rShiftTo(g,x);\n y.rShiftTo(g,y);\n}\nwhile(x.signum() > 0) {\n if((i = x.getLowestSetBit()) > 0) x.rShiftTo(i,x);\n if((i = y.getLowestSetBit()) > 0) y.rShiftTo(i,y);\n if(x.compareTo(y) >= 0) {\n   x.subTo(y,x);\n   x.rShiftTo(1,x);\n } else {\n   y.subTo(x,y);\n   y.rShiftTo(1,y);\n }\n}\nif(g > 0) y.lShiftTo(g,y);\nreturn y;\n}\n\n//(protected) this % n, n < 2^26\nfunction bnpModInt(n) {\nif(n <= 0) return 0;\nvar d = this.DV%n, r = (this.s<0)?n-1:0;\nif(this.t > 0)\n if(d == 0) r = this.data[0]%n;\n else for(var i = this.t-1; i >= 0; --i) r = (d*r+this.data[i])%n;\nreturn r;\n}\n\n//(public) 1/this % m (HAC 14.61)\nfunction bnModInverse(m) {\nvar ac = m.isEven();\nif((this.isEven() && ac) || m.signum() == 0) return BigInteger.ZERO;\nvar u = m.clone(), v = this.clone();\nvar a = nbv(1), b = nbv(0), c = nbv(0), d = nbv(1);\nwhile(u.signum() != 0) {\n while(u.isEven()) {\n   u.rShiftTo(1,u);\n   if(ac) {\n     if(!a.isEven() || !b.isEven()) { a.addTo(this,a); b.subTo(m,b); }\n     a.rShiftTo(1,a);\n   } else if(!b.isEven()) b.subTo(m,b);\n   b.rShiftTo(1,b);\n }\n while(v.isEven()) {\n   v.rShiftTo(1,v);\n   if(ac) {\n     if(!c.isEven() || !d.isEven()) { c.addTo(this,c); d.subTo(m,d); }\n     c.rShiftTo(1,c);\n   } else if(!d.isEven()) d.subTo(m,d);\n   d.rShiftTo(1,d);\n }\n if(u.compareTo(v) >= 0) {\n   u.subTo(v,u);\n   if(ac) a.subTo(c,a);\n   b.subTo(d,b);\n } else {\n   v.subTo(u,v);\n   if(ac) c.subTo(a,c);\n   d.subTo(b,d);\n }\n}\nif(v.compareTo(BigInteger.ONE) != 0) return BigInteger.ZERO;\nif(d.compareTo(m) >= 0) return d.subtract(m);\nif(d.signum() < 0) d.addTo(m,d); else return d;\nif(d.signum() < 0) return d.add(m); else return d;\n}\n\nvar lowprimes = [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509];\nvar lplim = (1<<26)/lowprimes[lowprimes.length-1];\n\n//(public) test primality with certainty >= 1-.5^t\nfunction bnIsProbablePrime(t) {\nvar i, x = this.abs();\nif(x.t == 1 && x.data[0] <= lowprimes[lowprimes.length-1]) {\n for(i = 0; i < lowprimes.length; ++i)\n   if(x.data[0] == lowprimes[i]) return true;\n return false;\n}\nif(x.isEven()) return false;\ni = 1;\nwhile(i < lowprimes.length) {\n var m = lowprimes[i], j = i+1;\n while(j < lowprimes.length && m < lplim) m *= lowprimes[j++];\n m = x.modInt(m);\n while(i < j) if(m%lowprimes[i++] == 0) return false;\n}\nreturn x.millerRabin(t);\n}\n\n//(protected) true if probably prime (HAC 4.24, Miller-Rabin)\nfunction bnpMillerRabin(t) {\nvar n1 = this.subtract(BigInteger.ONE);\nvar k = n1.getLowestSetBit();\nif(k <= 0) return false;\nvar r = n1.shiftRight(k);\nvar prng = bnGetPrng();\nvar a;\nfor(var i = 0; i < t; ++i) {\n // select witness 'a' at random from between 1 and n1\n do {\n   a = new BigInteger(this.bitLength(), prng);\n }\n while(a.compareTo(BigInteger.ONE) <= 0 || a.compareTo(n1) >= 0);\n var y = a.modPow(r,this);\n if(y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\n   var j = 1;\n   while(j++ < k && y.compareTo(n1) != 0) {\n     y = y.modPowInt(2,this);\n     if(y.compareTo(BigInteger.ONE) == 0) return false;\n   }\n   if(y.compareTo(n1) != 0) return false;\n }\n}\nreturn true;\n}\n\n// get pseudo random number generator\nfunction bnGetPrng() {\n  // create prng with api that matches BigInteger secure random\n  return {\n    // x is an array to fill with bytes\n    nextBytes: function(x) {\n      for(var i = 0; i < x.length; ++i) {\n        x[i] = Math.floor(Math.random() * 0x0100);\n      }\n    }\n  };\n}\n\n//protected\nBigInteger.prototype.chunkSize = bnpChunkSize;\nBigInteger.prototype.toRadix = bnpToRadix;\nBigInteger.prototype.fromRadix = bnpFromRadix;\nBigInteger.prototype.fromNumber = bnpFromNumber;\nBigInteger.prototype.bitwiseTo = bnpBitwiseTo;\nBigInteger.prototype.changeBit = bnpChangeBit;\nBigInteger.prototype.addTo = bnpAddTo;\nBigInteger.prototype.dMultiply = bnpDMultiply;\nBigInteger.prototype.dAddOffset = bnpDAddOffset;\nBigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\nBigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\nBigInteger.prototype.modInt = bnpModInt;\nBigInteger.prototype.millerRabin = bnpMillerRabin;\n\n//public\nBigInteger.prototype.clone = bnClone;\nBigInteger.prototype.intValue = bnIntValue;\nBigInteger.prototype.byteValue = bnByteValue;\nBigInteger.prototype.shortValue = bnShortValue;\nBigInteger.prototype.signum = bnSigNum;\nBigInteger.prototype.toByteArray = bnToByteArray;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.min = bnMin;\nBigInteger.prototype.max = bnMax;\nBigInteger.prototype.and = bnAnd;\nBigInteger.prototype.or = bnOr;\nBigInteger.prototype.xor = bnXor;\nBigInteger.prototype.andNot = bnAndNot;\nBigInteger.prototype.not = bnNot;\nBigInteger.prototype.shiftLeft = bnShiftLeft;\nBigInteger.prototype.shiftRight = bnShiftRight;\nBigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\nBigInteger.prototype.bitCount = bnBitCount;\nBigInteger.prototype.testBit = bnTestBit;\nBigInteger.prototype.setBit = bnSetBit;\nBigInteger.prototype.clearBit = bnClearBit;\nBigInteger.prototype.flipBit = bnFlipBit;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.remainder = bnRemainder;\nBigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\nBigInteger.prototype.modPow = bnModPow;\nBigInteger.prototype.modInverse = bnModInverse;\nBigInteger.prototype.pow = bnPow;\nBigInteger.prototype.gcd = bnGCD;\nBigInteger.prototype.isProbablePrime = bnIsProbablePrime;\n\n//BigInteger interfaces not implemented in jsbn:\n\n//BigInteger(int signum, byte[] magnitude)\n//double doubleValue()\n//float floatValue()\n//int hashCode()\n//long longValue()\n//static BigInteger valueOf(long val)\n","/**\n * JavaScript implementation of Ed25519.\n *\n * Copyright (c) 2017-2019 Digital Bazaar, Inc.\n *\n * This implementation is based on the most excellent TweetNaCl which is\n * in the public domain. Many thanks to its contributors:\n *\n * https://github.com/dchest/tweetnacl-js\n */\nvar forge = require('./forge');\nrequire('./jsbn');\nrequire('./random');\nrequire('./sha512');\nrequire('./util');\nvar asn1Validator = require('./asn1-validator');\nvar publicKeyValidator = asn1Validator.publicKeyValidator;\nvar privateKeyValidator = asn1Validator.privateKeyValidator;\n\nif(typeof BigInteger === 'undefined') {\n  var BigInteger = forge.jsbn.BigInteger;\n}\n\nvar ByteBuffer = forge.util.ByteBuffer;\nvar NativeBuffer = typeof Buffer === 'undefined' ? Uint8Array : Buffer;\n\n/*\n * Ed25519 algorithms, see RFC 8032:\n * https://tools.ietf.org/html/rfc8032\n */\nforge.pki = forge.pki || {};\nmodule.exports = forge.pki.ed25519 = forge.ed25519 = forge.ed25519 || {};\nvar ed25519 = forge.ed25519;\n\ned25519.constants = {};\ned25519.constants.PUBLIC_KEY_BYTE_LENGTH = 32;\ned25519.constants.PRIVATE_KEY_BYTE_LENGTH = 64;\ned25519.constants.SEED_BYTE_LENGTH = 32;\ned25519.constants.SIGN_BYTE_LENGTH = 64;\ned25519.constants.HASH_BYTE_LENGTH = 64;\n\ned25519.generateKeyPair = function(options) {\n  options = options || {};\n  var seed = options.seed;\n  if(seed === undefined) {\n    // generate seed\n    seed = forge.random.getBytesSync(ed25519.constants.SEED_BYTE_LENGTH);\n  } else if(typeof seed === 'string') {\n    if(seed.length !== ed25519.constants.SEED_BYTE_LENGTH) {\n      throw new TypeError(\n        '\"seed\" must be ' + ed25519.constants.SEED_BYTE_LENGTH +\n        ' bytes in length.');\n    }\n  } else if(!(seed instanceof Uint8Array)) {\n    throw new TypeError(\n      '\"seed\" must be a node.js Buffer, Uint8Array, or a binary string.');\n  }\n\n  seed = messageToNativeBuffer({message: seed, encoding: 'binary'});\n\n  var pk = new NativeBuffer(ed25519.constants.PUBLIC_KEY_BYTE_LENGTH);\n  var sk = new NativeBuffer(ed25519.constants.PRIVATE_KEY_BYTE_LENGTH);\n  for(var i = 0; i < 32; ++i) {\n    sk[i] = seed[i];\n  }\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, privateKey: sk};\n};\n\n/**\n * Converts a private key from a RFC8410 ASN.1 encoding.\n *\n * @param obj - The asn1 representation of a private key.\n *\n * @returns {Object} keyInfo - The key information.\n * @returns {Buffer|Uint8Array} keyInfo.privateKeyBytes - 32 private key bytes.\n */\ned25519.privateKeyFromAsn1 = function(obj) {\n  var capture = {};\n  var errors = [];\n  var valid = forge.asn1.validate(obj, privateKeyValidator, capture, errors);\n  if(!valid) {\n    var error = new Error('Invalid Key.');\n    error.errors = errors;\n    throw error;\n  }\n  var oid = forge.asn1.derToOid(capture.privateKeyOid);\n  var ed25519Oid = forge.oids.EdDSA25519;\n  if(oid !== ed25519Oid) {\n    throw new Error('Invalid OID \"' + oid + '\"; OID must be \"' +\n      ed25519Oid + '\".');\n  }\n  var privateKey = capture.privateKey;\n  // manually extract the private key bytes from nested octet string, see FIXME:\n  // https://github.com/digitalbazaar/forge/blob/master/lib/asn1.js#L542\n  var privateKeyBytes = messageToNativeBuffer({\n    message: forge.asn1.fromDer(privateKey).value,\n    encoding: 'binary'\n  });\n  // TODO: RFC8410 specifies a format for encoding the public key bytes along\n  // with the private key bytes. `publicKeyBytes` can be returned in the\n  // future. https://tools.ietf.org/html/rfc8410#section-10.3\n  return {privateKeyBytes: privateKeyBytes};\n};\n\n/**\n * Converts a public key from a RFC8410 ASN.1 encoding.\n *\n * @param obj - The asn1 representation of a public key.\n *\n * @return {Buffer|Uint8Array} - 32 public key bytes.\n */\ned25519.publicKeyFromAsn1 = function(obj) {\n  // get SubjectPublicKeyInfo\n  var capture = {};\n  var errors = [];\n  var valid = forge.asn1.validate(obj, publicKeyValidator, capture, errors);\n  if(!valid) {\n    var error = new Error('Invalid Key.');\n    error.errors = errors;\n    throw error;\n  }\n  var oid = forge.asn1.derToOid(capture.publicKeyOid);\n  var ed25519Oid = forge.oids.EdDSA25519;\n  if(oid !== ed25519Oid) {\n    throw new Error('Invalid OID \"' + oid + '\"; OID must be \"' +\n      ed25519Oid + '\".');\n  }\n  var publicKeyBytes = capture.ed25519PublicKey;\n  if(publicKeyBytes.length !== ed25519.constants.PUBLIC_KEY_BYTE_LENGTH) {\n    throw new Error('Key length is invalid.');\n  }\n  return messageToNativeBuffer({\n    message: publicKeyBytes,\n    encoding: 'binary'\n  });\n};\n\ned25519.publicKeyFromPrivateKey = function(options) {\n  options = options || {};\n  var privateKey = messageToNativeBuffer({\n    message: options.privateKey, encoding: 'binary'\n  });\n  if(privateKey.length !== ed25519.constants.PRIVATE_KEY_BYTE_LENGTH) {\n    throw new TypeError(\n      '\"options.privateKey\" must have a byte length of ' +\n      ed25519.constants.PRIVATE_KEY_BYTE_LENGTH);\n  }\n\n  var pk = new NativeBuffer(ed25519.constants.PUBLIC_KEY_BYTE_LENGTH);\n  for(var i = 0; i < pk.length; ++i) {\n    pk[i] = privateKey[32 + i];\n  }\n  return pk;\n};\n\ned25519.sign = function(options) {\n  options = options || {};\n  var msg = messageToNativeBuffer(options);\n  var privateKey = messageToNativeBuffer({\n    message: options.privateKey,\n    encoding: 'binary'\n  });\n  if(privateKey.length === ed25519.constants.SEED_BYTE_LENGTH) {\n    var keyPair = ed25519.generateKeyPair({seed: privateKey});\n    privateKey = keyPair.privateKey;\n  } else if(privateKey.length !== ed25519.constants.PRIVATE_KEY_BYTE_LENGTH) {\n    throw new TypeError(\n      '\"options.privateKey\" must have a byte length of ' +\n      ed25519.constants.SEED_BYTE_LENGTH + ' or ' +\n      ed25519.constants.PRIVATE_KEY_BYTE_LENGTH);\n  }\n\n  var signedMsg = new NativeBuffer(\n    ed25519.constants.SIGN_BYTE_LENGTH + msg.length);\n  crypto_sign(signedMsg, msg, msg.length, privateKey);\n\n  var sig = new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH);\n  for(var i = 0; i < sig.length; ++i) {\n    sig[i] = signedMsg[i];\n  }\n  return sig;\n};\n\ned25519.verify = function(options) {\n  options = options || {};\n  var msg = messageToNativeBuffer(options);\n  if(options.signature === undefined) {\n    throw new TypeError(\n      '\"options.signature\" must be a node.js Buffer, a Uint8Array, a forge ' +\n      'ByteBuffer, or a binary string.');\n  }\n  var sig = messageToNativeBuffer({\n    message: options.signature,\n    encoding: 'binary'\n  });\n  if(sig.length !== ed25519.constants.SIGN_BYTE_LENGTH) {\n    throw new TypeError(\n      '\"options.signature\" must have a byte length of ' +\n      ed25519.constants.SIGN_BYTE_LENGTH);\n  }\n  var publicKey = messageToNativeBuffer({\n    message: options.publicKey,\n    encoding: 'binary'\n  });\n  if(publicKey.length !== ed25519.constants.PUBLIC_KEY_BYTE_LENGTH) {\n    throw new TypeError(\n      '\"options.publicKey\" must have a byte length of ' +\n      ed25519.constants.PUBLIC_KEY_BYTE_LENGTH);\n  }\n\n  var sm = new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH + msg.length);\n  var m = new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH + msg.length);\n  var i;\n  for(i = 0; i < ed25519.constants.SIGN_BYTE_LENGTH; ++i) {\n    sm[i] = sig[i];\n  }\n  for(i = 0; i < msg.length; ++i) {\n    sm[i + ed25519.constants.SIGN_BYTE_LENGTH] = msg[i];\n  }\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nfunction messageToNativeBuffer(options) {\n  var message = options.message;\n  if(message instanceof Uint8Array || message instanceof NativeBuffer) {\n    return message;\n  }\n\n  var encoding = options.encoding;\n  if(message === undefined) {\n    if(options.md) {\n      // TODO: more rigorous validation that `md` is a MessageDigest\n      message = options.md.digest().getBytes();\n      encoding = 'binary';\n    } else {\n      throw new TypeError('\"options.message\" or \"options.md\" not specified.');\n    }\n  }\n\n  if(typeof message === 'string' && !encoding) {\n    throw new TypeError('\"options.encoding\" must be \"binary\" or \"utf8\".');\n  }\n\n  if(typeof message === 'string') {\n    if(typeof Buffer !== 'undefined') {\n      return Buffer.from(message, encoding);\n    }\n    message = new ByteBuffer(message, encoding);\n  } else if(!(message instanceof ByteBuffer)) {\n    throw new TypeError(\n      '\"options.message\" must be a node.js Buffer, a Uint8Array, a forge ' +\n      'ByteBuffer, or a string with \"options.encoding\" specifying its ' +\n      'encoding.');\n  }\n\n  // convert to native buffer\n  var buffer = new NativeBuffer(message.length());\n  for(var i = 0; i < buffer.length; ++i) {\n    buffer[i] = message.at(i);\n  }\n  return buffer;\n}\n\nvar gf0 = gf();\nvar gf1 = gf([1]);\nvar D = gf([\n  0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070,\n  0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]);\nvar D2 = gf([\n  0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0,\n  0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]);\nvar X = gf([\n  0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c,\n  0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]);\nvar Y = gf([\n  0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666,\n  0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]);\nvar L = new Float64Array([\n  0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58,\n  0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\nvar I = gf([\n  0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43,\n  0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\n// TODO: update forge buffer implementation to use `Buffer` or `Uint8Array`,\n// whichever is available, to improve performance\nfunction sha512(msg, msgLen) {\n  // Note: `out` and `msg` are NativeBuffer\n  var md = forge.md.sha512.create();\n  var buffer = new ByteBuffer(msg);\n  md.update(buffer.getBytes(msgLen), 'binary');\n  var hash = md.digest().getBytes();\n  if(typeof Buffer !== 'undefined') {\n    return Buffer.from(hash, 'binary');\n  }\n  var out = new NativeBuffer(ed25519.constants.HASH_BYTE_LENGTH);\n  for(var i = 0; i < 64; ++i) {\n    out[i] = hash.charCodeAt(i);\n  }\n  return out;\n}\n\nfunction crypto_sign_keypair(pk, sk) {\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  var d = sha512(sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for(i = 0; i < 32; ++i) {\n    sk[i + 32] = pk[i];\n  }\n  return 0;\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  var d = sha512(sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for(i = 0; i < n; ++i) {\n    sm[64 + i] = m[i];\n  }\n  for(i = 0; i < 32; ++i) {\n    sm[32 + i] = d[32 + i];\n  }\n\n  var r = sha512(sm.subarray(32), n + 32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for(i = 32; i < 64; ++i) {\n    sm[i] = sk[i];\n  }\n  var h = sha512(sm, n + 64);\n  reduce(h);\n\n  for(i = 32; i < 64; ++i) {\n    x[i] = 0;\n  }\n  for(i = 0; i < 32; ++i) {\n    x[i] = r[i];\n  }\n  for(i = 0; i < 32; ++i) {\n    for(j = 0; j < 32; j++) {\n      x[i + j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i, mlen;\n  var t = new NativeBuffer(32);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  mlen = -1;\n  if(n < 64) {\n    return -1;\n  }\n\n  if(unpackneg(q, pk)) {\n    return -1;\n  }\n\n  for(i = 0; i < n; ++i) {\n    m[i] = sm[i];\n  }\n  for(i = 0; i < 32; ++i) {\n    m[i + 32] = pk[i];\n  }\n  var h = sha512(m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if(crypto_verify_32(sm, 0, t, 0)) {\n    for(i = 0; i < n; ++i) {\n      m[i] = 0;\n    }\n    return -1;\n  }\n\n  for(i = 0; i < n; ++i) {\n    m[i] = sm[i + 64];\n  }\n  mlen = n;\n  return mlen;\n}\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for(i = 63; i >= 32; --i) {\n    carry = 0;\n    for(j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = (x[j] + 128) >> 8;\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for(j = 0; j < 32; ++j) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for(j = 0; j < 32; ++j) {\n    x[j] -= carry * L[j];\n  }\n  for(i = 0; i < 32; ++i) {\n    x[i + 1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64);\n  for(var i = 0; i < 64; ++i) {\n    x[i] = r[i];\n    r[i] = 0;\n  }\n  modL(r, x);\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  for(var i = 0; i < 4; ++i) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for(i = 0; i < 16; ++i) {\n    t[i] = n[i];\n  }\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for(j = 0; j < 2; ++j) {\n    m[0] = t[0] - 0xffed;\n    for(i = 1; i < 15; ++i) {\n      m[i] = t[i] - 0xffff - ((m[i - 1] >> 16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14] >> 16) & 1);\n    b = (m[15] >> 16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1 - b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2 * i] = t[i] & 0xff;\n    o[2 * i + 1] = t[i] >> 8;\n  }\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if(neq25519(chk, num)) {\n    M(r[0], r[0], I);\n  }\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if(neq25519(chk, num)) {\n    return -1;\n  }\n\n  if(par25519(r[0]) === (p[31] >> 7)) {\n    Z(r[0], gf0, r[0]);\n  }\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for(i = 0; i < 16; ++i) {\n    o[i] = n[2 * i] + (n[2 * i + 1] << 8);\n  }\n  o[15] &= 0x7fff;\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for(a = 0; a < 16; ++a) {\n    c[a] = i[a];\n  }\n  for(a = 250; a >= 0; --a) {\n    S(c, c);\n    if(a !== 1) {\n      M(c, c, i);\n    }\n  }\n  for(a = 0; a < 16; ++a) {\n    o[a] = c[a];\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new NativeBuffer(32);\n  var d = new NativeBuffer(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x, xi, y, yi, 32);\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i, d = 0;\n  for(i = 0; i < n; ++i) {\n    d |= x[xi + i] ^ y[yi + i];\n  }\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction par25519(a) {\n  var d = new NativeBuffer(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for(i = 255; i >= 0; --i) {\n    b = (s[(i / 8)|0] >> (i & 7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction set25519(r, a) {\n  var i;\n  for(i = 0; i < 16; i++) {\n    r[i] = a[i] | 0;\n  }\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for(a = 0; a < 16; ++a) {\n    c[a] = i[a];\n  }\n  for(a = 253; a >= 0; --a) {\n    S(c, c);\n    if(a !== 2 && a !== 4) {\n      M(c, c, i);\n    }\n  }\n  for(a = 0; a < 16; ++a) {\n    o[a] = c[a];\n  }\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for(i = 0; i < 16; ++i) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c - 1 + 37 * (c - 1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b - 1);\n  for(var i = 0; i < 16; ++i) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction gf(init) {\n  var i, r = new Float64Array(16);\n  if(init) {\n    for(i = 0; i < init.length; ++i) {\n      r[i] = init[i];\n    }\n  }\n  return r;\n}\n\nfunction A(o, a, b) {\n  for(var i = 0; i < 16; ++i) {\n    o[i] = a[i] + b[i];\n  }\n}\n\nfunction Z(o, a, b) {\n  for(var i = 0; i < 16; ++i) {\n    o[i] = a[i] - b[i];\n  }\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n","/**\n * Node.js module for Forge mask generation functions.\n *\n * @author Stefan Siegl\n *\n * Copyright 2012 Stefan Siegl <stesie@brokenpipe.de>\n */\nvar forge = require('./forge');\nrequire('./mgf1');\n\nmodule.exports = forge.mgf = forge.mgf || {};\nforge.mgf.mgf1 = forge.mgf1;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nexport { _objectWithoutProperties as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","/**\n * react-router v7.9.4\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n\n// lib/router/history.ts\nvar Action = /* @__PURE__ */ ((Action2) => {\n  Action2[\"Pop\"] = \"POP\";\n  Action2[\"Push\"] = \"PUSH\";\n  Action2[\"Replace\"] = \"REPLACE\";\n  return Action2;\n})(Action || {});\nvar PopStateEventType = \"popstate\";\nfunction createMemoryHistory(options = {}) {\n  let { initialEntries = [\"/\"], initialIndex, v5Compat = false } = options;\n  let entries;\n  entries = initialEntries.map(\n    (entry, index2) => createMemoryLocation(\n      entry,\n      typeof entry === \"string\" ? null : entry.state,\n      index2 === 0 ? \"default\" : void 0\n    )\n  );\n  let index = clampIndex(\n    initialIndex == null ? entries.length - 1 : initialIndex\n  );\n  let action = \"POP\" /* Pop */;\n  let listener = null;\n  function clampIndex(n) {\n    return Math.min(Math.max(n, 0), entries.length - 1);\n  }\n  function getCurrentLocation() {\n    return entries[index];\n  }\n  function createMemoryLocation(to, state = null, key) {\n    let location = createLocation(\n      entries ? getCurrentLocation().pathname : \"/\",\n      to,\n      state,\n      key\n    );\n    warning(\n      location.pathname.charAt(0) === \"/\",\n      `relative pathnames are not supported in memory history: ${JSON.stringify(\n        to\n      )}`\n    );\n    return location;\n  }\n  function createHref2(to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  let history = {\n    get index() {\n      return index;\n    },\n    get action() {\n      return action;\n    },\n    get location() {\n      return getCurrentLocation();\n    },\n    createHref: createHref2,\n    createURL(to) {\n      return new URL(createHref2(to), \"http://localhost\");\n    },\n    encodeLocation(to) {\n      let path = typeof to === \"string\" ? parsePath(to) : to;\n      return {\n        pathname: path.pathname || \"\",\n        search: path.search || \"\",\n        hash: path.hash || \"\"\n      };\n    },\n    push(to, state) {\n      action = \"PUSH\" /* Push */;\n      let nextLocation = createMemoryLocation(to, state);\n      index += 1;\n      entries.splice(index, entries.length, nextLocation);\n      if (v5Compat && listener) {\n        listener({ action, location: nextLocation, delta: 1 });\n      }\n    },\n    replace(to, state) {\n      action = \"REPLACE\" /* Replace */;\n      let nextLocation = createMemoryLocation(to, state);\n      entries[index] = nextLocation;\n      if (v5Compat && listener) {\n        listener({ action, location: nextLocation, delta: 0 });\n      }\n    },\n    go(delta) {\n      action = \"POP\" /* Pop */;\n      let nextIndex = clampIndex(index + delta);\n      let nextLocation = entries[nextIndex];\n      index = nextIndex;\n      if (listener) {\n        listener({ action, location: nextLocation, delta });\n      }\n    },\n    listen(fn) {\n      listener = fn;\n      return () => {\n        listener = null;\n      };\n    }\n  };\n  return history;\n}\nfunction createBrowserHistory(options = {}) {\n  function createBrowserLocation(window2, globalHistory) {\n    let { pathname, search, hash } = window2.location;\n    return createLocation(\n      \"\",\n      { pathname, search, hash },\n      // state defaults to `null` because `window.history.state` does\n      globalHistory.state && globalHistory.state.usr || null,\n      globalHistory.state && globalHistory.state.key || \"default\"\n    );\n  }\n  function createBrowserHref(window2, to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  return getUrlBasedHistory(\n    createBrowserLocation,\n    createBrowserHref,\n    null,\n    options\n  );\n}\nfunction createHashHistory(options = {}) {\n  function createHashLocation(window2, globalHistory) {\n    let {\n      pathname = \"/\",\n      search = \"\",\n      hash = \"\"\n    } = parsePath(window2.location.hash.substring(1));\n    if (!pathname.startsWith(\"/\") && !pathname.startsWith(\".\")) {\n      pathname = \"/\" + pathname;\n    }\n    return createLocation(\n      \"\",\n      { pathname, search, hash },\n      // state defaults to `null` because `window.history.state` does\n      globalHistory.state && globalHistory.state.usr || null,\n      globalHistory.state && globalHistory.state.key || \"default\"\n    );\n  }\n  function createHashHref(window2, to) {\n    let base = window2.document.querySelector(\"base\");\n    let href = \"\";\n    if (base && base.getAttribute(\"href\")) {\n      let url = window2.location.href;\n      let hashIndex = url.indexOf(\"#\");\n      href = hashIndex === -1 ? url : url.slice(0, hashIndex);\n    }\n    return href + \"#\" + (typeof to === \"string\" ? to : createPath(to));\n  }\n  function validateHashLocation(location, to) {\n    warning(\n      location.pathname.charAt(0) === \"/\",\n      `relative pathnames are not supported in hash history.push(${JSON.stringify(\n        to\n      )})`\n    );\n  }\n  return getUrlBasedHistory(\n    createHashLocation,\n    createHashHref,\n    validateHashLocation,\n    options\n  );\n}\nfunction invariant(value, message) {\n  if (value === false || value === null || typeof value === \"undefined\") {\n    throw new Error(message);\n  }\n}\nfunction warning(cond, message) {\n  if (!cond) {\n    if (typeof console !== \"undefined\") console.warn(message);\n    try {\n      throw new Error(message);\n    } catch (e) {\n    }\n  }\n}\nfunction createKey() {\n  return Math.random().toString(36).substring(2, 10);\n}\nfunction getHistoryState(location, index) {\n  return {\n    usr: location.state,\n    key: location.key,\n    idx: index\n  };\n}\nfunction createLocation(current, to, state = null, key) {\n  let location = {\n    pathname: typeof current === \"string\" ? current : current.pathname,\n    search: \"\",\n    hash: \"\",\n    ...typeof to === \"string\" ? parsePath(to) : to,\n    state,\n    // TODO: This could be cleaned up.  push/replace should probably just take\n    // full Locations now and avoid the need to run through this flow at all\n    // But that's a pretty big refactor to the current test suite so going to\n    // keep as is for the time being and just let any incoming keys take precedence\n    key: to && to.key || key || createKey()\n  };\n  return location;\n}\nfunction createPath({\n  pathname = \"/\",\n  search = \"\",\n  hash = \"\"\n}) {\n  if (search && search !== \"?\")\n    pathname += search.charAt(0) === \"?\" ? search : \"?\" + search;\n  if (hash && hash !== \"#\")\n    pathname += hash.charAt(0) === \"#\" ? hash : \"#\" + hash;\n  return pathname;\n}\nfunction parsePath(path) {\n  let parsedPath = {};\n  if (path) {\n    let hashIndex = path.indexOf(\"#\");\n    if (hashIndex >= 0) {\n      parsedPath.hash = path.substring(hashIndex);\n      path = path.substring(0, hashIndex);\n    }\n    let searchIndex = path.indexOf(\"?\");\n    if (searchIndex >= 0) {\n      parsedPath.search = path.substring(searchIndex);\n      path = path.substring(0, searchIndex);\n    }\n    if (path) {\n      parsedPath.pathname = path;\n    }\n  }\n  return parsedPath;\n}\nfunction getUrlBasedHistory(getLocation, createHref2, validateLocation, options = {}) {\n  let { window: window2 = document.defaultView, v5Compat = false } = options;\n  let globalHistory = window2.history;\n  let action = \"POP\" /* Pop */;\n  let listener = null;\n  let index = getIndex();\n  if (index == null) {\n    index = 0;\n    globalHistory.replaceState({ ...globalHistory.state, idx: index }, \"\");\n  }\n  function getIndex() {\n    let state = globalHistory.state || { idx: null };\n    return state.idx;\n  }\n  function handlePop() {\n    action = \"POP\" /* Pop */;\n    let nextIndex = getIndex();\n    let delta = nextIndex == null ? null : nextIndex - index;\n    index = nextIndex;\n    if (listener) {\n      listener({ action, location: history.location, delta });\n    }\n  }\n  function push(to, state) {\n    action = \"PUSH\" /* Push */;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex() + 1;\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    try {\n      globalHistory.pushState(historyState, \"\", url);\n    } catch (error) {\n      if (error instanceof DOMException && error.name === \"DataCloneError\") {\n        throw error;\n      }\n      window2.location.assign(url);\n    }\n    if (v5Compat && listener) {\n      listener({ action, location: history.location, delta: 1 });\n    }\n  }\n  function replace2(to, state) {\n    action = \"REPLACE\" /* Replace */;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex();\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    globalHistory.replaceState(historyState, \"\", url);\n    if (v5Compat && listener) {\n      listener({ action, location: history.location, delta: 0 });\n    }\n  }\n  function createURL(to) {\n    return createBrowserURLImpl(to);\n  }\n  let history = {\n    get action() {\n      return action;\n    },\n    get location() {\n      return getLocation(window2, globalHistory);\n    },\n    listen(fn) {\n      if (listener) {\n        throw new Error(\"A history only accepts one active listener\");\n      }\n      window2.addEventListener(PopStateEventType, handlePop);\n      listener = fn;\n      return () => {\n        window2.removeEventListener(PopStateEventType, handlePop);\n        listener = null;\n      };\n    },\n    createHref(to) {\n      return createHref2(window2, to);\n    },\n    createURL,\n    encodeLocation(to) {\n      let url = createURL(to);\n      return {\n        pathname: url.pathname,\n        search: url.search,\n        hash: url.hash\n      };\n    },\n    push,\n    replace: replace2,\n    go(n) {\n      return globalHistory.go(n);\n    }\n  };\n  return history;\n}\nfunction createBrowserURLImpl(to, isAbsolute = false) {\n  let base = \"http://localhost\";\n  if (typeof window !== \"undefined\") {\n    base = window.location.origin !== \"null\" ? window.location.origin : window.location.href;\n  }\n  invariant(base, \"No window.location.(origin|href) available to create URL\");\n  let href = typeof to === \"string\" ? to : createPath(to);\n  href = href.replace(/ $/, \"%20\");\n  if (!isAbsolute && href.startsWith(\"//\")) {\n    href = base + href;\n  }\n  return new URL(href, base);\n}\n\n// lib/router/utils.ts\nfunction createContext(defaultValue) {\n  return { defaultValue };\n}\nvar _map;\nvar RouterContextProvider = class {\n  /**\n   * Create a new `RouterContextProvider` instance\n   * @param init An optional initial context map to populate the provider with\n   */\n  constructor(init) {\n    __privateAdd(this, _map, /* @__PURE__ */ new Map());\n    if (init) {\n      for (let [context, value] of init) {\n        this.set(context, value);\n      }\n    }\n  }\n  /**\n   * Access a value from the context. If no value has been set for the context,\n   * it will return the context's `defaultValue` if provided, or throw an error\n   * if no `defaultValue` was set.\n   * @param context The context to get the value for\n   * @returns The value for the context, or the context's `defaultValue` if no\n   * value was set\n   */\n  get(context) {\n    if (__privateGet(this, _map).has(context)) {\n      return __privateGet(this, _map).get(context);\n    }\n    if (context.defaultValue !== void 0) {\n      return context.defaultValue;\n    }\n    throw new Error(\"No value found for context\");\n  }\n  /**\n   * Set a value for the context. If the context already has a value set, this\n   * will overwrite it.\n   *\n   * @param context The context to set the value for\n   * @param value The value to set for the context\n   * @returns {void}\n   */\n  set(context, value) {\n    __privateGet(this, _map).set(context, value);\n  }\n};\n_map = new WeakMap();\nvar unsupportedLazyRouteObjectKeys = /* @__PURE__ */ new Set([\n  \"lazy\",\n  \"caseSensitive\",\n  \"path\",\n  \"id\",\n  \"index\",\n  \"children\"\n]);\nfunction isUnsupportedLazyRouteObjectKey(key) {\n  return unsupportedLazyRouteObjectKeys.has(\n    key\n  );\n}\nvar unsupportedLazyRouteFunctionKeys = /* @__PURE__ */ new Set([\n  \"lazy\",\n  \"caseSensitive\",\n  \"path\",\n  \"id\",\n  \"index\",\n  \"middleware\",\n  \"children\"\n]);\nfunction isUnsupportedLazyRouteFunctionKey(key) {\n  return unsupportedLazyRouteFunctionKeys.has(\n    key\n  );\n}\nfunction isIndexRoute(route) {\n  return route.index === true;\n}\nfunction convertRoutesToDataRoutes(routes, mapRouteProperties2, parentPath = [], manifest = {}, allowInPlaceMutations = false) {\n  return routes.map((route, index) => {\n    let treePath = [...parentPath, String(index)];\n    let id = typeof route.id === \"string\" ? route.id : treePath.join(\"-\");\n    invariant(\n      route.index !== true || !route.children,\n      `Cannot specify children on an index route`\n    );\n    invariant(\n      allowInPlaceMutations || !manifest[id],\n      `Found a route id collision on id \"${id}\".  Route id's must be globally unique within Data Router usages`\n    );\n    if (isIndexRoute(route)) {\n      let indexRoute = {\n        ...route,\n        ...mapRouteProperties2(route),\n        id\n      };\n      manifest[id] = indexRoute;\n      return indexRoute;\n    } else {\n      let pathOrLayoutRoute = {\n        ...route,\n        ...mapRouteProperties2(route),\n        id,\n        children: void 0\n      };\n      manifest[id] = pathOrLayoutRoute;\n      if (route.children) {\n        pathOrLayoutRoute.children = convertRoutesToDataRoutes(\n          route.children,\n          mapRouteProperties2,\n          treePath,\n          manifest,\n          allowInPlaceMutations\n        );\n      }\n      return pathOrLayoutRoute;\n    }\n  });\n}\nfunction matchRoutes(routes, locationArg, basename = \"/\") {\n  return matchRoutesImpl(routes, locationArg, basename, false);\n}\nfunction matchRoutesImpl(routes, locationArg, basename, allowPartial) {\n  let location = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n  let pathname = stripBasename(location.pathname || \"/\", basename);\n  if (pathname == null) {\n    return null;\n  }\n  let branches = flattenRoutes(routes);\n  rankRouteBranches(branches);\n  let matches = null;\n  for (let i = 0; matches == null && i < branches.length; ++i) {\n    let decoded = decodePath(pathname);\n    matches = matchRouteBranch(\n      branches[i],\n      decoded,\n      allowPartial\n    );\n  }\n  return matches;\n}\nfunction convertRouteMatchToUiMatch(match, loaderData) {\n  let { route, pathname, params } = match;\n  return {\n    id: route.id,\n    pathname,\n    params,\n    data: loaderData[route.id],\n    loaderData: loaderData[route.id],\n    handle: route.handle\n  };\n}\nfunction flattenRoutes(routes, branches = [], parentsMeta = [], parentPath = \"\", _hasParentOptionalSegments = false) {\n  let flattenRoute = (route, index, hasParentOptionalSegments = _hasParentOptionalSegments, relativePath) => {\n    let meta = {\n      relativePath: relativePath === void 0 ? route.path || \"\" : relativePath,\n      caseSensitive: route.caseSensitive === true,\n      childrenIndex: index,\n      route\n    };\n    if (meta.relativePath.startsWith(\"/\")) {\n      if (!meta.relativePath.startsWith(parentPath) && hasParentOptionalSegments) {\n        return;\n      }\n      invariant(\n        meta.relativePath.startsWith(parentPath),\n        `Absolute route path \"${meta.relativePath}\" nested under path \"${parentPath}\" is not valid. An absolute child route path must start with the combined path of all its parent routes.`\n      );\n      meta.relativePath = meta.relativePath.slice(parentPath.length);\n    }\n    let path = joinPaths([parentPath, meta.relativePath]);\n    let routesMeta = parentsMeta.concat(meta);\n    if (route.children && route.children.length > 0) {\n      invariant(\n        // Our types know better, but runtime JS may not!\n        // @ts-expect-error\n        route.index !== true,\n        `Index routes must not have child routes. Please remove all child routes from route path \"${path}\".`\n      );\n      flattenRoutes(\n        route.children,\n        branches,\n        routesMeta,\n        path,\n        hasParentOptionalSegments\n      );\n    }\n    if (route.path == null && !route.index) {\n      return;\n    }\n    branches.push({\n      path,\n      score: computeScore(path, route.index),\n      routesMeta\n    });\n  };\n  routes.forEach((route, index) => {\n    if (route.path === \"\" || !route.path?.includes(\"?\")) {\n      flattenRoute(route, index);\n    } else {\n      for (let exploded of explodeOptionalSegments(route.path)) {\n        flattenRoute(route, index, true, exploded);\n      }\n    }\n  });\n  return branches;\n}\nfunction explodeOptionalSegments(path) {\n  let segments = path.split(\"/\");\n  if (segments.length === 0) return [];\n  let [first, ...rest] = segments;\n  let isOptional = first.endsWith(\"?\");\n  let required = first.replace(/\\?$/, \"\");\n  if (rest.length === 0) {\n    return isOptional ? [required, \"\"] : [required];\n  }\n  let restExploded = explodeOptionalSegments(rest.join(\"/\"));\n  let result = [];\n  result.push(\n    ...restExploded.map(\n      (subpath) => subpath === \"\" ? required : [required, subpath].join(\"/\")\n    )\n  );\n  if (isOptional) {\n    result.push(...restExploded);\n  }\n  return result.map(\n    (exploded) => path.startsWith(\"/\") && exploded === \"\" ? \"/\" : exploded\n  );\n}\nfunction rankRouteBranches(branches) {\n  branches.sort(\n    (a, b) => a.score !== b.score ? b.score - a.score : compareIndexes(\n      a.routesMeta.map((meta) => meta.childrenIndex),\n      b.routesMeta.map((meta) => meta.childrenIndex)\n    )\n  );\n}\nvar paramRe = /^:[\\w-]+$/;\nvar dynamicSegmentValue = 3;\nvar indexRouteValue = 2;\nvar emptySegmentValue = 1;\nvar staticSegmentValue = 10;\nvar splatPenalty = -2;\nvar isSplat = (s) => s === \"*\";\nfunction computeScore(path, index) {\n  let segments = path.split(\"/\");\n  let initialScore = segments.length;\n  if (segments.some(isSplat)) {\n    initialScore += splatPenalty;\n  }\n  if (index) {\n    initialScore += indexRouteValue;\n  }\n  return segments.filter((s) => !isSplat(s)).reduce(\n    (score, segment) => score + (paramRe.test(segment) ? dynamicSegmentValue : segment === \"\" ? emptySegmentValue : staticSegmentValue),\n    initialScore\n  );\n}\nfunction compareIndexes(a, b) {\n  let siblings = a.length === b.length && a.slice(0, -1).every((n, i) => n === b[i]);\n  return siblings ? (\n    // If two routes are siblings, we should try to match the earlier sibling\n    // first. This allows people to have fine-grained control over the matching\n    // behavior by simply putting routes with identical paths in the order they\n    // want them tried.\n    a[a.length - 1] - b[b.length - 1]\n  ) : (\n    // Otherwise, it doesn't really make sense to rank non-siblings by index,\n    // so they sort equally.\n    0\n  );\n}\nfunction matchRouteBranch(branch, pathname, allowPartial = false) {\n  let { routesMeta } = branch;\n  let matchedParams = {};\n  let matchedPathname = \"/\";\n  let matches = [];\n  for (let i = 0; i < routesMeta.length; ++i) {\n    let meta = routesMeta[i];\n    let end = i === routesMeta.length - 1;\n    let remainingPathname = matchedPathname === \"/\" ? pathname : pathname.slice(matchedPathname.length) || \"/\";\n    let match = matchPath(\n      { path: meta.relativePath, caseSensitive: meta.caseSensitive, end },\n      remainingPathname\n    );\n    let route = meta.route;\n    if (!match && end && allowPartial && !routesMeta[routesMeta.length - 1].route.index) {\n      match = matchPath(\n        {\n          path: meta.relativePath,\n          caseSensitive: meta.caseSensitive,\n          end: false\n        },\n        remainingPathname\n      );\n    }\n    if (!match) {\n      return null;\n    }\n    Object.assign(matchedParams, match.params);\n    matches.push({\n      // TODO: Can this as be avoided?\n      params: matchedParams,\n      pathname: joinPaths([matchedPathname, match.pathname]),\n      pathnameBase: normalizePathname(\n        joinPaths([matchedPathname, match.pathnameBase])\n      ),\n      route\n    });\n    if (match.pathnameBase !== \"/\") {\n      matchedPathname = joinPaths([matchedPathname, match.pathnameBase]);\n    }\n  }\n  return matches;\n}\nfunction generatePath(originalPath, params = {}) {\n  let path = originalPath;\n  if (path.endsWith(\"*\") && path !== \"*\" && !path.endsWith(\"/*\")) {\n    warning(\n      false,\n      `Route path \"${path}\" will be treated as if it were \"${path.replace(/\\*$/, \"/*\")}\" because the \\`*\\` character must always follow a \\`/\\` in the pattern. To get rid of this warning, please change the route path to \"${path.replace(/\\*$/, \"/*\")}\".`\n    );\n    path = path.replace(/\\*$/, \"/*\");\n  }\n  const prefix = path.startsWith(\"/\") ? \"/\" : \"\";\n  const stringify2 = (p) => p == null ? \"\" : typeof p === \"string\" ? p : String(p);\n  const segments = path.split(/\\/+/).map((segment, index, array) => {\n    const isLastSegment = index === array.length - 1;\n    if (isLastSegment && segment === \"*\") {\n      const star = \"*\";\n      return stringify2(params[star]);\n    }\n    const keyMatch = segment.match(/^:([\\w-]+)(\\??)$/);\n    if (keyMatch) {\n      const [, key, optional] = keyMatch;\n      let param = params[key];\n      invariant(optional === \"?\" || param != null, `Missing \":${key}\" param`);\n      return encodeURIComponent(stringify2(param));\n    }\n    return segment.replace(/\\?$/g, \"\");\n  }).filter((segment) => !!segment);\n  return prefix + segments.join(\"/\");\n}\nfunction matchPath(pattern, pathname) {\n  if (typeof pattern === \"string\") {\n    pattern = { path: pattern, caseSensitive: false, end: true };\n  }\n  let [matcher, compiledParams] = compilePath(\n    pattern.path,\n    pattern.caseSensitive,\n    pattern.end\n  );\n  let match = pathname.match(matcher);\n  if (!match) return null;\n  let matchedPathname = match[0];\n  let pathnameBase = matchedPathname.replace(/(.)\\/+$/, \"$1\");\n  let captureGroups = match.slice(1);\n  let params = compiledParams.reduce(\n    (memo2, { paramName, isOptional }, index) => {\n      if (paramName === \"*\") {\n        let splatValue = captureGroups[index] || \"\";\n        pathnameBase = matchedPathname.slice(0, matchedPathname.length - splatValue.length).replace(/(.)\\/+$/, \"$1\");\n      }\n      const value = captureGroups[index];\n      if (isOptional && !value) {\n        memo2[paramName] = void 0;\n      } else {\n        memo2[paramName] = (value || \"\").replace(/%2F/g, \"/\");\n      }\n      return memo2;\n    },\n    {}\n  );\n  return {\n    params,\n    pathname: matchedPathname,\n    pathnameBase,\n    pattern\n  };\n}\nfunction compilePath(path, caseSensitive = false, end = true) {\n  warning(\n    path === \"*\" || !path.endsWith(\"*\") || path.endsWith(\"/*\"),\n    `Route path \"${path}\" will be treated as if it were \"${path.replace(/\\*$/, \"/*\")}\" because the \\`*\\` character must always follow a \\`/\\` in the pattern. To get rid of this warning, please change the route path to \"${path.replace(/\\*$/, \"/*\")}\".`\n  );\n  let params = [];\n  let regexpSource = \"^\" + path.replace(/\\/*\\*?$/, \"\").replace(/^\\/*/, \"/\").replace(/[\\\\.*+^${}|()[\\]]/g, \"\\\\$&\").replace(\n    /\\/:([\\w-]+)(\\?)?/g,\n    (_, paramName, isOptional) => {\n      params.push({ paramName, isOptional: isOptional != null });\n      return isOptional ? \"/?([^\\\\/]+)?\" : \"/([^\\\\/]+)\";\n    }\n  ).replace(/\\/([\\w-]+)\\?(\\/|$)/g, \"(/$1)?$2\");\n  if (path.endsWith(\"*\")) {\n    params.push({ paramName: \"*\" });\n    regexpSource += path === \"*\" || path === \"/*\" ? \"(.*)$\" : \"(?:\\\\/(.+)|\\\\/*)$\";\n  } else if (end) {\n    regexpSource += \"\\\\/*$\";\n  } else if (path !== \"\" && path !== \"/\") {\n    regexpSource += \"(?:(?=\\\\/|$))\";\n  } else {\n  }\n  let matcher = new RegExp(regexpSource, caseSensitive ? void 0 : \"i\");\n  return [matcher, params];\n}\nfunction decodePath(value) {\n  try {\n    return value.split(\"/\").map((v) => decodeURIComponent(v).replace(/\\//g, \"%2F\")).join(\"/\");\n  } catch (error) {\n    warning(\n      false,\n      `The URL path \"${value}\" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${error}).`\n    );\n    return value;\n  }\n}\nfunction stripBasename(pathname, basename) {\n  if (basename === \"/\") return pathname;\n  if (!pathname.toLowerCase().startsWith(basename.toLowerCase())) {\n    return null;\n  }\n  let startIndex = basename.endsWith(\"/\") ? basename.length - 1 : basename.length;\n  let nextChar = pathname.charAt(startIndex);\n  if (nextChar && nextChar !== \"/\") {\n    return null;\n  }\n  return pathname.slice(startIndex) || \"/\";\n}\nfunction prependBasename({\n  basename,\n  pathname\n}) {\n  return pathname === \"/\" ? basename : joinPaths([basename, pathname]);\n}\nfunction resolvePath(to, fromPathname = \"/\") {\n  let {\n    pathname: toPathname,\n    search = \"\",\n    hash = \"\"\n  } = typeof to === \"string\" ? parsePath(to) : to;\n  let pathname = toPathname ? toPathname.startsWith(\"/\") ? toPathname : resolvePathname(toPathname, fromPathname) : fromPathname;\n  return {\n    pathname,\n    search: normalizeSearch(search),\n    hash: normalizeHash(hash)\n  };\n}\nfunction resolvePathname(relativePath, fromPathname) {\n  let segments = fromPathname.replace(/\\/+$/, \"\").split(\"/\");\n  let relativeSegments = relativePath.split(\"/\");\n  relativeSegments.forEach((segment) => {\n    if (segment === \"..\") {\n      if (segments.length > 1) segments.pop();\n    } else if (segment !== \".\") {\n      segments.push(segment);\n    }\n  });\n  return segments.length > 1 ? segments.join(\"/\") : \"/\";\n}\nfunction getInvalidPathError(char, field, dest, path) {\n  return `Cannot include a '${char}' character in a manually specified \\`to.${field}\\` field [${JSON.stringify(\n    path\n  )}].  Please separate it out to the \\`to.${dest}\\` field. Alternatively you may provide the full path as a string in <Link to=\"...\"> and the router will parse it for you.`;\n}\nfunction getPathContributingMatches(matches) {\n  return matches.filter(\n    (match, index) => index === 0 || match.route.path && match.route.path.length > 0\n  );\n}\nfunction getResolveToMatches(matches) {\n  let pathMatches = getPathContributingMatches(matches);\n  return pathMatches.map(\n    (match, idx) => idx === pathMatches.length - 1 ? match.pathname : match.pathnameBase\n  );\n}\nfunction resolveTo(toArg, routePathnames, locationPathname, isPathRelative = false) {\n  let to;\n  if (typeof toArg === \"string\") {\n    to = parsePath(toArg);\n  } else {\n    to = { ...toArg };\n    invariant(\n      !to.pathname || !to.pathname.includes(\"?\"),\n      getInvalidPathError(\"?\", \"pathname\", \"search\", to)\n    );\n    invariant(\n      !to.pathname || !to.pathname.includes(\"#\"),\n      getInvalidPathError(\"#\", \"pathname\", \"hash\", to)\n    );\n    invariant(\n      !to.search || !to.search.includes(\"#\"),\n      getInvalidPathError(\"#\", \"search\", \"hash\", to)\n    );\n  }\n  let isEmptyPath = toArg === \"\" || to.pathname === \"\";\n  let toPathname = isEmptyPath ? \"/\" : to.pathname;\n  let from;\n  if (toPathname == null) {\n    from = locationPathname;\n  } else {\n    let routePathnameIndex = routePathnames.length - 1;\n    if (!isPathRelative && toPathname.startsWith(\"..\")) {\n      let toSegments = toPathname.split(\"/\");\n      while (toSegments[0] === \"..\") {\n        toSegments.shift();\n        routePathnameIndex -= 1;\n      }\n      to.pathname = toSegments.join(\"/\");\n    }\n    from = routePathnameIndex >= 0 ? routePathnames[routePathnameIndex] : \"/\";\n  }\n  let path = resolvePath(to, from);\n  let hasExplicitTrailingSlash = toPathname && toPathname !== \"/\" && toPathname.endsWith(\"/\");\n  let hasCurrentTrailingSlash = (isEmptyPath || toPathname === \".\") && locationPathname.endsWith(\"/\");\n  if (!path.pathname.endsWith(\"/\") && (hasExplicitTrailingSlash || hasCurrentTrailingSlash)) {\n    path.pathname += \"/\";\n  }\n  return path;\n}\nvar joinPaths = (paths) => paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\nvar normalizePathname = (pathname) => pathname.replace(/\\/+$/, \"\").replace(/^\\/*/, \"/\");\nvar normalizeSearch = (search) => !search || search === \"?\" ? \"\" : search.startsWith(\"?\") ? search : \"?\" + search;\nvar normalizeHash = (hash) => !hash || hash === \"#\" ? \"\" : hash.startsWith(\"#\") ? hash : \"#\" + hash;\nvar DataWithResponseInit = class {\n  constructor(data2, init) {\n    this.type = \"DataWithResponseInit\";\n    this.data = data2;\n    this.init = init || null;\n  }\n};\nfunction data(data2, init) {\n  return new DataWithResponseInit(\n    data2,\n    typeof init === \"number\" ? { status: init } : init\n  );\n}\nvar redirect = (url, init = 302) => {\n  let responseInit = init;\n  if (typeof responseInit === \"number\") {\n    responseInit = { status: responseInit };\n  } else if (typeof responseInit.status === \"undefined\") {\n    responseInit.status = 302;\n  }\n  let headers = new Headers(responseInit.headers);\n  headers.set(\"Location\", url);\n  return new Response(null, { ...responseInit, headers });\n};\nvar redirectDocument = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Reload-Document\", \"true\");\n  return response;\n};\nvar replace = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Replace\", \"true\");\n  return response;\n};\nvar ErrorResponseImpl = class {\n  constructor(status, statusText, data2, internal = false) {\n    this.status = status;\n    this.statusText = statusText || \"\";\n    this.internal = internal;\n    if (data2 instanceof Error) {\n      this.data = data2.toString();\n      this.error = data2;\n    } else {\n      this.data = data2;\n    }\n  }\n};\nfunction isRouteErrorResponse(error) {\n  return error != null && typeof error.status === \"number\" && typeof error.statusText === \"string\" && typeof error.internal === \"boolean\" && \"data\" in error;\n}\n\n// lib/router/router.ts\nvar validMutationMethodsArr = [\n  \"POST\",\n  \"PUT\",\n  \"PATCH\",\n  \"DELETE\"\n];\nvar validMutationMethods = new Set(\n  validMutationMethodsArr\n);\nvar validRequestMethodsArr = [\n  \"GET\",\n  ...validMutationMethodsArr\n];\nvar validRequestMethods = new Set(validRequestMethodsArr);\nvar redirectStatusCodes = /* @__PURE__ */ new Set([301, 302, 303, 307, 308]);\nvar redirectPreserveMethodStatusCodes = /* @__PURE__ */ new Set([307, 308]);\nvar IDLE_NAVIGATION = {\n  state: \"idle\",\n  location: void 0,\n  formMethod: void 0,\n  formAction: void 0,\n  formEncType: void 0,\n  formData: void 0,\n  json: void 0,\n  text: void 0\n};\nvar IDLE_FETCHER = {\n  state: \"idle\",\n  data: void 0,\n  formMethod: void 0,\n  formAction: void 0,\n  formEncType: void 0,\n  formData: void 0,\n  json: void 0,\n  text: void 0\n};\nvar IDLE_BLOCKER = {\n  state: \"unblocked\",\n  proceed: void 0,\n  reset: void 0,\n  location: void 0\n};\nvar ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\nvar isAbsoluteUrl = (url) => ABSOLUTE_URL_REGEX.test(url);\nvar defaultMapRouteProperties = (route) => ({\n  hasErrorBoundary: Boolean(route.hasErrorBoundary)\n});\nvar TRANSITIONS_STORAGE_KEY = \"remix-router-transitions\";\nvar ResetLoaderDataSymbol = Symbol(\"ResetLoaderData\");\nfunction createRouter(init) {\n  const routerWindow = init.window ? init.window : typeof window !== \"undefined\" ? window : void 0;\n  const isBrowser2 = typeof routerWindow !== \"undefined\" && typeof routerWindow.document !== \"undefined\" && typeof routerWindow.document.createElement !== \"undefined\";\n  invariant(\n    init.routes.length > 0,\n    \"You must provide a non-empty routes array to createRouter\"\n  );\n  let hydrationRouteProperties2 = init.hydrationRouteProperties || [];\n  let mapRouteProperties2 = init.mapRouteProperties || defaultMapRouteProperties;\n  let manifest = {};\n  let dataRoutes = convertRoutesToDataRoutes(\n    init.routes,\n    mapRouteProperties2,\n    void 0,\n    manifest\n  );\n  let inFlightDataRoutes;\n  let basename = init.basename || \"/\";\n  if (!basename.startsWith(\"/\")) {\n    basename = `/${basename}`;\n  }\n  let dataStrategyImpl = init.dataStrategy || defaultDataStrategyWithMiddleware;\n  let future = {\n    ...init.future\n  };\n  let unlistenHistory = null;\n  let subscribers = /* @__PURE__ */ new Set();\n  let savedScrollPositions2 = null;\n  let getScrollRestorationKey2 = null;\n  let getScrollPosition = null;\n  let initialScrollRestored = init.hydrationData != null;\n  let initialMatches = matchRoutes(dataRoutes, init.history.location, basename);\n  let initialMatchesIsFOW = false;\n  let initialErrors = null;\n  let initialized;\n  if (initialMatches == null && !init.patchRoutesOnNavigation) {\n    let error = getInternalRouterError(404, {\n      pathname: init.history.location.pathname\n    });\n    let { matches, route } = getShortCircuitMatches(dataRoutes);\n    initialized = true;\n    initialMatches = matches;\n    initialErrors = { [route.id]: error };\n  } else {\n    if (initialMatches && !init.hydrationData) {\n      let fogOfWar = checkFogOfWar(\n        initialMatches,\n        dataRoutes,\n        init.history.location.pathname\n      );\n      if (fogOfWar.active) {\n        initialMatches = null;\n      }\n    }\n    if (!initialMatches) {\n      initialized = false;\n      initialMatches = [];\n      let fogOfWar = checkFogOfWar(\n        null,\n        dataRoutes,\n        init.history.location.pathname\n      );\n      if (fogOfWar.active && fogOfWar.matches) {\n        initialMatchesIsFOW = true;\n        initialMatches = fogOfWar.matches;\n      }\n    } else if (initialMatches.some((m) => m.route.lazy)) {\n      initialized = false;\n    } else if (!initialMatches.some((m) => routeHasLoaderOrMiddleware(m.route))) {\n      initialized = true;\n    } else {\n      let loaderData = init.hydrationData ? init.hydrationData.loaderData : null;\n      let errors = init.hydrationData ? init.hydrationData.errors : null;\n      if (errors) {\n        let idx = initialMatches.findIndex(\n          (m) => errors[m.route.id] !== void 0\n        );\n        initialized = initialMatches.slice(0, idx + 1).every(\n          (m) => !shouldLoadRouteOnHydration(m.route, loaderData, errors)\n        );\n      } else {\n        initialized = initialMatches.every(\n          (m) => !shouldLoadRouteOnHydration(m.route, loaderData, errors)\n        );\n      }\n    }\n  }\n  let router;\n  let state = {\n    historyAction: init.history.action,\n    location: init.history.location,\n    matches: initialMatches,\n    initialized,\n    navigation: IDLE_NAVIGATION,\n    // Don't restore on initial updateState() if we were SSR'd\n    restoreScrollPosition: init.hydrationData != null ? false : null,\n    preventScrollReset: false,\n    revalidation: \"idle\",\n    loaderData: init.hydrationData && init.hydrationData.loaderData || {},\n    actionData: init.hydrationData && init.hydrationData.actionData || null,\n    errors: init.hydrationData && init.hydrationData.errors || initialErrors,\n    fetchers: /* @__PURE__ */ new Map(),\n    blockers: /* @__PURE__ */ new Map()\n  };\n  let pendingAction = \"POP\" /* Pop */;\n  let pendingPreventScrollReset = false;\n  let pendingNavigationController;\n  let pendingViewTransitionEnabled = false;\n  let appliedViewTransitions = /* @__PURE__ */ new Map();\n  let removePageHideEventListener = null;\n  let isUninterruptedRevalidation = false;\n  let isRevalidationRequired = false;\n  let cancelledFetcherLoads = /* @__PURE__ */ new Set();\n  let fetchControllers = /* @__PURE__ */ new Map();\n  let incrementingLoadId = 0;\n  let pendingNavigationLoadId = -1;\n  let fetchReloadIds = /* @__PURE__ */ new Map();\n  let fetchRedirectIds = /* @__PURE__ */ new Set();\n  let fetchLoadMatches = /* @__PURE__ */ new Map();\n  let activeFetchers = /* @__PURE__ */ new Map();\n  let fetchersQueuedForDeletion = /* @__PURE__ */ new Set();\n  let blockerFunctions = /* @__PURE__ */ new Map();\n  let unblockBlockerHistoryUpdate = void 0;\n  let pendingRevalidationDfd = null;\n  function initialize() {\n    unlistenHistory = init.history.listen(\n      ({ action: historyAction, location, delta }) => {\n        if (unblockBlockerHistoryUpdate) {\n          unblockBlockerHistoryUpdate();\n          unblockBlockerHistoryUpdate = void 0;\n          return;\n        }\n        warning(\n          blockerFunctions.size === 0 || delta != null,\n          \"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.\"\n        );\n        let blockerKey = shouldBlockNavigation({\n          currentLocation: state.location,\n          nextLocation: location,\n          historyAction\n        });\n        if (blockerKey && delta != null) {\n          let nextHistoryUpdatePromise = new Promise((resolve) => {\n            unblockBlockerHistoryUpdate = resolve;\n          });\n          init.history.go(delta * -1);\n          updateBlocker(blockerKey, {\n            state: \"blocked\",\n            location,\n            proceed() {\n              updateBlocker(blockerKey, {\n                state: \"proceeding\",\n                proceed: void 0,\n                reset: void 0,\n                location\n              });\n              nextHistoryUpdatePromise.then(() => init.history.go(delta));\n            },\n            reset() {\n              let blockers = new Map(state.blockers);\n              blockers.set(blockerKey, IDLE_BLOCKER);\n              updateState({ blockers });\n            }\n          });\n          return;\n        }\n        return startNavigation(historyAction, location);\n      }\n    );\n    if (isBrowser2) {\n      restoreAppliedTransitions(routerWindow, appliedViewTransitions);\n      let _saveAppliedTransitions = () => persistAppliedTransitions(routerWindow, appliedViewTransitions);\n      routerWindow.addEventListener(\"pagehide\", _saveAppliedTransitions);\n      removePageHideEventListener = () => routerWindow.removeEventListener(\"pagehide\", _saveAppliedTransitions);\n    }\n    if (!state.initialized) {\n      startNavigation(\"POP\" /* Pop */, state.location, {\n        initialHydration: true\n      });\n    }\n    return router;\n  }\n  function dispose() {\n    if (unlistenHistory) {\n      unlistenHistory();\n    }\n    if (removePageHideEventListener) {\n      removePageHideEventListener();\n    }\n    subscribers.clear();\n    pendingNavigationController && pendingNavigationController.abort();\n    state.fetchers.forEach((_, key) => deleteFetcher(key));\n    state.blockers.forEach((_, key) => deleteBlocker(key));\n  }\n  function subscribe(fn) {\n    subscribers.add(fn);\n    return () => subscribers.delete(fn);\n  }\n  function updateState(newState, opts = {}) {\n    if (newState.matches) {\n      newState.matches = newState.matches.map((m) => {\n        let route = manifest[m.route.id];\n        let matchRoute = m.route;\n        if (matchRoute.element !== route.element || matchRoute.errorElement !== route.errorElement || matchRoute.hydrateFallbackElement !== route.hydrateFallbackElement) {\n          return {\n            ...m,\n            route\n          };\n        }\n        return m;\n      });\n    }\n    state = {\n      ...state,\n      ...newState\n    };\n    let unmountedFetchers = [];\n    let mountedFetchers = [];\n    state.fetchers.forEach((fetcher, key) => {\n      if (fetcher.state === \"idle\") {\n        if (fetchersQueuedForDeletion.has(key)) {\n          unmountedFetchers.push(key);\n        } else {\n          mountedFetchers.push(key);\n        }\n      }\n    });\n    fetchersQueuedForDeletion.forEach((key) => {\n      if (!state.fetchers.has(key) && !fetchControllers.has(key)) {\n        unmountedFetchers.push(key);\n      }\n    });\n    [...subscribers].forEach(\n      (subscriber) => subscriber(state, {\n        deletedFetchers: unmountedFetchers,\n        viewTransitionOpts: opts.viewTransitionOpts,\n        flushSync: opts.flushSync === true\n      })\n    );\n    unmountedFetchers.forEach((key) => deleteFetcher(key));\n    mountedFetchers.forEach((key) => state.fetchers.delete(key));\n  }\n  function completeNavigation(location, newState, { flushSync } = {}) {\n    let isActionReload = state.actionData != null && state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && state.navigation.state === \"loading\" && location.state?._isRedirect !== true;\n    let actionData;\n    if (newState.actionData) {\n      if (Object.keys(newState.actionData).length > 0) {\n        actionData = newState.actionData;\n      } else {\n        actionData = null;\n      }\n    } else if (isActionReload) {\n      actionData = state.actionData;\n    } else {\n      actionData = null;\n    }\n    let loaderData = newState.loaderData ? mergeLoaderData(\n      state.loaderData,\n      newState.loaderData,\n      newState.matches || [],\n      newState.errors\n    ) : state.loaderData;\n    let blockers = state.blockers;\n    if (blockers.size > 0) {\n      blockers = new Map(blockers);\n      blockers.forEach((_, k) => blockers.set(k, IDLE_BLOCKER));\n    }\n    let restoreScrollPosition = isUninterruptedRevalidation ? false : getSavedScrollPosition(location, newState.matches || state.matches);\n    let preventScrollReset = pendingPreventScrollReset === true || state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && location.state?._isRedirect !== true;\n    if (inFlightDataRoutes) {\n      dataRoutes = inFlightDataRoutes;\n      inFlightDataRoutes = void 0;\n    }\n    if (isUninterruptedRevalidation) {\n    } else if (pendingAction === \"POP\" /* Pop */) {\n    } else if (pendingAction === \"PUSH\" /* Push */) {\n      init.history.push(location, location.state);\n    } else if (pendingAction === \"REPLACE\" /* Replace */) {\n      init.history.replace(location, location.state);\n    }\n    let viewTransitionOpts;\n    if (pendingAction === \"POP\" /* Pop */) {\n      let priorPaths = appliedViewTransitions.get(state.location.pathname);\n      if (priorPaths && priorPaths.has(location.pathname)) {\n        viewTransitionOpts = {\n          currentLocation: state.location,\n          nextLocation: location\n        };\n      } else if (appliedViewTransitions.has(location.pathname)) {\n        viewTransitionOpts = {\n          currentLocation: location,\n          nextLocation: state.location\n        };\n      }\n    } else if (pendingViewTransitionEnabled) {\n      let toPaths = appliedViewTransitions.get(state.location.pathname);\n      if (toPaths) {\n        toPaths.add(location.pathname);\n      } else {\n        toPaths = /* @__PURE__ */ new Set([location.pathname]);\n        appliedViewTransitions.set(state.location.pathname, toPaths);\n      }\n      viewTransitionOpts = {\n        currentLocation: state.location,\n        nextLocation: location\n      };\n    }\n    updateState(\n      {\n        ...newState,\n        // matches, errors, fetchers go through as-is\n        actionData,\n        loaderData,\n        historyAction: pendingAction,\n        location,\n        initialized: true,\n        navigation: IDLE_NAVIGATION,\n        revalidation: \"idle\",\n        restoreScrollPosition,\n        preventScrollReset,\n        blockers\n      },\n      {\n        viewTransitionOpts,\n        flushSync: flushSync === true\n      }\n    );\n    pendingAction = \"POP\" /* Pop */;\n    pendingPreventScrollReset = false;\n    pendingViewTransitionEnabled = false;\n    isUninterruptedRevalidation = false;\n    isRevalidationRequired = false;\n    pendingRevalidationDfd?.resolve();\n    pendingRevalidationDfd = null;\n  }\n  async function navigate(to, opts) {\n    if (typeof to === \"number\") {\n      init.history.go(to);\n      return;\n    }\n    let normalizedPath = normalizeTo(\n      state.location,\n      state.matches,\n      basename,\n      to,\n      opts?.fromRouteId,\n      opts?.relative\n    );\n    let { path, submission, error } = normalizeNavigateOptions(\n      false,\n      normalizedPath,\n      opts\n    );\n    let currentLocation = state.location;\n    let nextLocation = createLocation(state.location, path, opts && opts.state);\n    nextLocation = {\n      ...nextLocation,\n      ...init.history.encodeLocation(nextLocation)\n    };\n    let userReplace = opts && opts.replace != null ? opts.replace : void 0;\n    let historyAction = \"PUSH\" /* Push */;\n    if (userReplace === true) {\n      historyAction = \"REPLACE\" /* Replace */;\n    } else if (userReplace === false) {\n    } else if (submission != null && isMutationMethod(submission.formMethod) && submission.formAction === state.location.pathname + state.location.search) {\n      historyAction = \"REPLACE\" /* Replace */;\n    }\n    let preventScrollReset = opts && \"preventScrollReset\" in opts ? opts.preventScrollReset === true : void 0;\n    let flushSync = (opts && opts.flushSync) === true;\n    let blockerKey = shouldBlockNavigation({\n      currentLocation,\n      nextLocation,\n      historyAction\n    });\n    if (blockerKey) {\n      updateBlocker(blockerKey, {\n        state: \"blocked\",\n        location: nextLocation,\n        proceed() {\n          updateBlocker(blockerKey, {\n            state: \"proceeding\",\n            proceed: void 0,\n            reset: void 0,\n            location: nextLocation\n          });\n          navigate(to, opts);\n        },\n        reset() {\n          let blockers = new Map(state.blockers);\n          blockers.set(blockerKey, IDLE_BLOCKER);\n          updateState({ blockers });\n        }\n      });\n      return;\n    }\n    await startNavigation(historyAction, nextLocation, {\n      submission,\n      // Send through the formData serialization error if we have one so we can\n      // render at the right error boundary after we match routes\n      pendingError: error,\n      preventScrollReset,\n      replace: opts && opts.replace,\n      enableViewTransition: opts && opts.viewTransition,\n      flushSync\n    });\n  }\n  function revalidate() {\n    if (!pendingRevalidationDfd) {\n      pendingRevalidationDfd = createDeferred();\n    }\n    interruptActiveLoads();\n    updateState({ revalidation: \"loading\" });\n    let promise = pendingRevalidationDfd.promise;\n    if (state.navigation.state === \"submitting\") {\n      return promise;\n    }\n    if (state.navigation.state === \"idle\") {\n      startNavigation(state.historyAction, state.location, {\n        startUninterruptedRevalidation: true\n      });\n      return promise;\n    }\n    startNavigation(\n      pendingAction || state.historyAction,\n      state.navigation.location,\n      {\n        overrideNavigation: state.navigation,\n        // Proxy through any rending view transition\n        enableViewTransition: pendingViewTransitionEnabled === true\n      }\n    );\n    return promise;\n  }\n  async function startNavigation(historyAction, location, opts) {\n    pendingNavigationController && pendingNavigationController.abort();\n    pendingNavigationController = null;\n    pendingAction = historyAction;\n    isUninterruptedRevalidation = (opts && opts.startUninterruptedRevalidation) === true;\n    saveScrollPosition(state.location, state.matches);\n    pendingPreventScrollReset = (opts && opts.preventScrollReset) === true;\n    pendingViewTransitionEnabled = (opts && opts.enableViewTransition) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let loadingNavigation = opts && opts.overrideNavigation;\n    let matches = opts?.initialHydration && state.matches && state.matches.length > 0 && !initialMatchesIsFOW ? (\n      // `matchRoutes()` has already been called if we're in here via `router.initialize()`\n      state.matches\n    ) : matchRoutes(routesToUse, location, basename);\n    let flushSync = (opts && opts.flushSync) === true;\n    if (matches && state.initialized && !isRevalidationRequired && isHashChangeOnly(state.location, location) && !(opts && opts.submission && isMutationMethod(opts.submission.formMethod))) {\n      completeNavigation(location, { matches }, { flushSync });\n      return;\n    }\n    let fogOfWar = checkFogOfWar(matches, routesToUse, location.pathname);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    if (!matches) {\n      let { error, notFoundMatches, route } = handleNavigational404(\n        location.pathname\n      );\n      completeNavigation(\n        location,\n        {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error\n          }\n        },\n        { flushSync }\n      );\n      return;\n    }\n    pendingNavigationController = new AbortController();\n    let request = createClientSideRequest(\n      init.history,\n      location,\n      pendingNavigationController.signal,\n      opts && opts.submission\n    );\n    let scopedContext = init.getContext ? await init.getContext() : new RouterContextProvider();\n    let pendingActionResult;\n    if (opts && opts.pendingError) {\n      pendingActionResult = [\n        findNearestBoundary(matches).route.id,\n        { type: \"error\" /* error */, error: opts.pendingError }\n      ];\n    } else if (opts && opts.submission && isMutationMethod(opts.submission.formMethod)) {\n      let actionResult = await handleAction(\n        request,\n        location,\n        opts.submission,\n        matches,\n        scopedContext,\n        fogOfWar.active,\n        opts && opts.initialHydration === true,\n        { replace: opts.replace, flushSync }\n      );\n      if (actionResult.shortCircuited) {\n        return;\n      }\n      if (actionResult.pendingActionResult) {\n        let [routeId, result] = actionResult.pendingActionResult;\n        if (isErrorResult(result) && isRouteErrorResponse(result.error) && result.error.status === 404) {\n          pendingNavigationController = null;\n          completeNavigation(location, {\n            matches: actionResult.matches,\n            loaderData: {},\n            errors: {\n              [routeId]: result.error\n            }\n          });\n          return;\n        }\n      }\n      matches = actionResult.matches || matches;\n      pendingActionResult = actionResult.pendingActionResult;\n      loadingNavigation = getLoadingNavigation(location, opts.submission);\n      flushSync = false;\n      fogOfWar.active = false;\n      request = createClientSideRequest(\n        init.history,\n        request.url,\n        request.signal\n      );\n    }\n    let {\n      shortCircuited,\n      matches: updatedMatches,\n      loaderData,\n      errors\n    } = await handleLoaders(\n      request,\n      location,\n      matches,\n      scopedContext,\n      fogOfWar.active,\n      loadingNavigation,\n      opts && opts.submission,\n      opts && opts.fetcherSubmission,\n      opts && opts.replace,\n      opts && opts.initialHydration === true,\n      flushSync,\n      pendingActionResult\n    );\n    if (shortCircuited) {\n      return;\n    }\n    pendingNavigationController = null;\n    completeNavigation(location, {\n      matches: updatedMatches || matches,\n      ...getActionDataForCommit(pendingActionResult),\n      loaderData,\n      errors\n    });\n  }\n  async function handleAction(request, location, submission, matches, scopedContext, isFogOfWar, initialHydration, opts = {}) {\n    interruptActiveLoads();\n    let navigation = getSubmittingNavigation(location, submission);\n    updateState({ navigation }, { flushSync: opts.flushSync === true });\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(\n        matches,\n        location.pathname,\n        request.signal\n      );\n      if (discoverResult.type === \"aborted\") {\n        return { shortCircuited: true };\n      } else if (discoverResult.type === \"error\") {\n        if (discoverResult.partialMatches.length === 0) {\n          let { matches: matches2, route } = getShortCircuitMatches(dataRoutes);\n          return {\n            matches: matches2,\n            pendingActionResult: [\n              route.id,\n              {\n                type: \"error\" /* error */,\n                error: discoverResult.error\n              }\n            ]\n          };\n        }\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          pendingActionResult: [\n            boundaryId,\n            {\n              type: \"error\" /* error */,\n              error: discoverResult.error\n            }\n          ]\n        };\n      } else if (!discoverResult.matches) {\n        let { notFoundMatches, error, route } = handleNavigational404(\n          location.pathname\n        );\n        return {\n          matches: notFoundMatches,\n          pendingActionResult: [\n            route.id,\n            {\n              type: \"error\" /* error */,\n              error\n            }\n          ]\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    let result;\n    let actionMatch = getTargetMatch(matches, location);\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      result = {\n        type: \"error\" /* error */,\n        error: getInternalRouterError(405, {\n          method: request.method,\n          pathname: location.pathname,\n          routeId: actionMatch.route.id\n        })\n      };\n    } else {\n      let dsMatches = getTargetedDataStrategyMatches(\n        mapRouteProperties2,\n        manifest,\n        request,\n        matches,\n        actionMatch,\n        initialHydration ? [] : hydrationRouteProperties2,\n        scopedContext\n      );\n      let results = await callDataStrategy(\n        request,\n        dsMatches,\n        scopedContext,\n        null\n      );\n      result = results[actionMatch.route.id];\n      if (!result) {\n        for (let match of matches) {\n          if (results[match.route.id]) {\n            result = results[match.route.id];\n            break;\n          }\n        }\n      }\n      if (request.signal.aborted) {\n        return { shortCircuited: true };\n      }\n    }\n    if (isRedirectResult(result)) {\n      let replace2;\n      if (opts && opts.replace != null) {\n        replace2 = opts.replace;\n      } else {\n        let location2 = normalizeRedirectLocation(\n          result.response.headers.get(\"Location\"),\n          new URL(request.url),\n          basename\n        );\n        replace2 = location2 === state.location.pathname + state.location.search;\n      }\n      await startRedirectNavigation(request, result, true, {\n        submission,\n        replace: replace2\n      });\n      return { shortCircuited: true };\n    }\n    if (isErrorResult(result)) {\n      let boundaryMatch = findNearestBoundary(matches, actionMatch.route.id);\n      if ((opts && opts.replace) !== true) {\n        pendingAction = \"PUSH\" /* Push */;\n      }\n      return {\n        matches,\n        pendingActionResult: [\n          boundaryMatch.route.id,\n          result,\n          actionMatch.route.id\n        ]\n      };\n    }\n    return {\n      matches,\n      pendingActionResult: [actionMatch.route.id, result]\n    };\n  }\n  async function handleLoaders(request, location, matches, scopedContext, isFogOfWar, overrideNavigation, submission, fetcherSubmission, replace2, initialHydration, flushSync, pendingActionResult) {\n    let loadingNavigation = overrideNavigation || getLoadingNavigation(location, submission);\n    let activeSubmission = submission || fetcherSubmission || getSubmissionFromNavigation(loadingNavigation);\n    let shouldUpdateNavigationState = !isUninterruptedRevalidation && !initialHydration;\n    if (isFogOfWar) {\n      if (shouldUpdateNavigationState) {\n        let actionData = getUpdatedActionData(pendingActionResult);\n        updateState(\n          {\n            navigation: loadingNavigation,\n            ...actionData !== void 0 ? { actionData } : {}\n          },\n          {\n            flushSync\n          }\n        );\n      }\n      let discoverResult = await discoverRoutes(\n        matches,\n        location.pathname,\n        request.signal\n      );\n      if (discoverResult.type === \"aborted\") {\n        return { shortCircuited: true };\n      } else if (discoverResult.type === \"error\") {\n        if (discoverResult.partialMatches.length === 0) {\n          let { matches: matches2, route } = getShortCircuitMatches(dataRoutes);\n          return {\n            matches: matches2,\n            loaderData: {},\n            errors: {\n              [route.id]: discoverResult.error\n            }\n          };\n        }\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          loaderData: {},\n          errors: {\n            [boundaryId]: discoverResult.error\n          }\n        };\n      } else if (!discoverResult.matches) {\n        let { error, notFoundMatches, route } = handleNavigational404(\n          location.pathname\n        );\n        return {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error\n          }\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let { dsMatches, revalidatingFetchers } = getMatchesToLoad(\n      request,\n      scopedContext,\n      mapRouteProperties2,\n      manifest,\n      init.history,\n      state,\n      matches,\n      activeSubmission,\n      location,\n      initialHydration ? [] : hydrationRouteProperties2,\n      initialHydration === true,\n      isRevalidationRequired,\n      cancelledFetcherLoads,\n      fetchersQueuedForDeletion,\n      fetchLoadMatches,\n      fetchRedirectIds,\n      routesToUse,\n      basename,\n      init.patchRoutesOnNavigation != null,\n      pendingActionResult\n    );\n    pendingNavigationLoadId = ++incrementingLoadId;\n    if (!init.dataStrategy && !dsMatches.some((m) => m.shouldLoad) && !dsMatches.some(\n      (m) => m.route.middleware && m.route.middleware.length > 0\n    ) && revalidatingFetchers.length === 0) {\n      let updatedFetchers2 = markFetchRedirectsDone();\n      completeNavigation(\n        location,\n        {\n          matches,\n          loaderData: {},\n          // Commit pending error if we're short circuiting\n          errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? { [pendingActionResult[0]]: pendingActionResult[1].error } : null,\n          ...getActionDataForCommit(pendingActionResult),\n          ...updatedFetchers2 ? { fetchers: new Map(state.fetchers) } : {}\n        },\n        { flushSync }\n      );\n      return { shortCircuited: true };\n    }\n    if (shouldUpdateNavigationState) {\n      let updates = {};\n      if (!isFogOfWar) {\n        updates.navigation = loadingNavigation;\n        let actionData = getUpdatedActionData(pendingActionResult);\n        if (actionData !== void 0) {\n          updates.actionData = actionData;\n        }\n      }\n      if (revalidatingFetchers.length > 0) {\n        updates.fetchers = getUpdatedRevalidatingFetchers(revalidatingFetchers);\n      }\n      updateState(updates, { flushSync });\n    }\n    revalidatingFetchers.forEach((rf) => {\n      abortFetcher(rf.key);\n      if (rf.controller) {\n        fetchControllers.set(rf.key, rf.controller);\n      }\n    });\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach((f) => abortFetcher(f.key));\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.addEventListener(\n        \"abort\",\n        abortPendingFetchRevalidations\n      );\n    }\n    let { loaderResults, fetcherResults } = await callLoadersAndMaybeResolveData(\n      dsMatches,\n      revalidatingFetchers,\n      request,\n      scopedContext\n    );\n    if (request.signal.aborted) {\n      return { shortCircuited: true };\n    }\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.removeEventListener(\n        \"abort\",\n        abortPendingFetchRevalidations\n      );\n    }\n    revalidatingFetchers.forEach((rf) => fetchControllers.delete(rf.key));\n    let redirect2 = findRedirect(loaderResults);\n    if (redirect2) {\n      await startRedirectNavigation(request, redirect2.result, true, {\n        replace: replace2\n      });\n      return { shortCircuited: true };\n    }\n    redirect2 = findRedirect(fetcherResults);\n    if (redirect2) {\n      fetchRedirectIds.add(redirect2.key);\n      await startRedirectNavigation(request, redirect2.result, true, {\n        replace: replace2\n      });\n      return { shortCircuited: true };\n    }\n    let { loaderData, errors } = processLoaderData(\n      state,\n      matches,\n      loaderResults,\n      pendingActionResult,\n      revalidatingFetchers,\n      fetcherResults\n    );\n    if (initialHydration && state.errors) {\n      errors = { ...state.errors, ...errors };\n    }\n    let updatedFetchers = markFetchRedirectsDone();\n    let didAbortFetchLoads = abortStaleFetchLoads(pendingNavigationLoadId);\n    let shouldUpdateFetchers = updatedFetchers || didAbortFetchLoads || revalidatingFetchers.length > 0;\n    return {\n      matches,\n      loaderData,\n      errors,\n      ...shouldUpdateFetchers ? { fetchers: new Map(state.fetchers) } : {}\n    };\n  }\n  function getUpdatedActionData(pendingActionResult) {\n    if (pendingActionResult && !isErrorResult(pendingActionResult[1])) {\n      return {\n        [pendingActionResult[0]]: pendingActionResult[1].data\n      };\n    } else if (state.actionData) {\n      if (Object.keys(state.actionData).length === 0) {\n        return null;\n      } else {\n        return state.actionData;\n      }\n    }\n  }\n  function getUpdatedRevalidatingFetchers(revalidatingFetchers) {\n    revalidatingFetchers.forEach((rf) => {\n      let fetcher = state.fetchers.get(rf.key);\n      let revalidatingFetcher = getLoadingFetcher(\n        void 0,\n        fetcher ? fetcher.data : void 0\n      );\n      state.fetchers.set(rf.key, revalidatingFetcher);\n    });\n    return new Map(state.fetchers);\n  }\n  async function fetch2(key, routeId, href, opts) {\n    abortFetcher(key);\n    let flushSync = (opts && opts.flushSync) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let normalizedPath = normalizeTo(\n      state.location,\n      state.matches,\n      basename,\n      href,\n      routeId,\n      opts?.relative\n    );\n    let matches = matchRoutes(routesToUse, normalizedPath, basename);\n    let fogOfWar = checkFogOfWar(matches, routesToUse, normalizedPath);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    if (!matches) {\n      setFetcherError(\n        key,\n        routeId,\n        getInternalRouterError(404, { pathname: normalizedPath }),\n        { flushSync }\n      );\n      return;\n    }\n    let { path, submission, error } = normalizeNavigateOptions(\n      true,\n      normalizedPath,\n      opts\n    );\n    if (error) {\n      setFetcherError(key, routeId, error, { flushSync });\n      return;\n    }\n    let scopedContext = init.getContext ? await init.getContext() : new RouterContextProvider();\n    let preventScrollReset = (opts && opts.preventScrollReset) === true;\n    if (submission && isMutationMethod(submission.formMethod)) {\n      await handleFetcherAction(\n        key,\n        routeId,\n        path,\n        matches,\n        scopedContext,\n        fogOfWar.active,\n        flushSync,\n        preventScrollReset,\n        submission\n      );\n      return;\n    }\n    fetchLoadMatches.set(key, { routeId, path });\n    await handleFetcherLoader(\n      key,\n      routeId,\n      path,\n      matches,\n      scopedContext,\n      fogOfWar.active,\n      flushSync,\n      preventScrollReset,\n      submission\n    );\n  }\n  async function handleFetcherAction(key, routeId, path, requestMatches, scopedContext, isFogOfWar, flushSync, preventScrollReset, submission) {\n    interruptActiveLoads();\n    fetchLoadMatches.delete(key);\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(key, getSubmittingFetcher(submission, existingFetcher), {\n      flushSync\n    });\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(\n      init.history,\n      path,\n      abortController.signal,\n      submission\n    );\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(\n        requestMatches,\n        new URL(fetchRequest.url).pathname,\n        fetchRequest.signal,\n        key\n      );\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, { flushSync });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(\n          key,\n          routeId,\n          getInternalRouterError(404, { pathname: path }),\n          { flushSync }\n        );\n        return;\n      } else {\n        requestMatches = discoverResult.matches;\n      }\n    }\n    let match = getTargetMatch(requestMatches, path);\n    if (!match.route.action && !match.route.lazy) {\n      let error = getInternalRouterError(405, {\n        method: submission.formMethod,\n        pathname: path,\n        routeId\n      });\n      setFetcherError(key, routeId, error, { flushSync });\n      return;\n    }\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let fetchMatches = getTargetedDataStrategyMatches(\n      mapRouteProperties2,\n      manifest,\n      fetchRequest,\n      requestMatches,\n      match,\n      hydrationRouteProperties2,\n      scopedContext\n    );\n    let actionResults = await callDataStrategy(\n      fetchRequest,\n      fetchMatches,\n      scopedContext,\n      key\n    );\n    let actionResult = actionResults[match.route.id];\n    if (fetchRequest.signal.aborted) {\n      if (fetchControllers.get(key) === abortController) {\n        fetchControllers.delete(key);\n      }\n      return;\n    }\n    if (fetchersQueuedForDeletion.has(key)) {\n      if (isRedirectResult(actionResult) || isErrorResult(actionResult)) {\n        updateFetcherState(key, getDoneFetcher(void 0));\n        return;\n      }\n    } else {\n      if (isRedirectResult(actionResult)) {\n        fetchControllers.delete(key);\n        if (pendingNavigationLoadId > originatingLoadId) {\n          updateFetcherState(key, getDoneFetcher(void 0));\n          return;\n        } else {\n          fetchRedirectIds.add(key);\n          updateFetcherState(key, getLoadingFetcher(submission));\n          return startRedirectNavigation(fetchRequest, actionResult, false, {\n            fetcherSubmission: submission,\n            preventScrollReset\n          });\n        }\n      }\n      if (isErrorResult(actionResult)) {\n        setFetcherError(key, routeId, actionResult.error);\n        return;\n      }\n    }\n    let nextLocation = state.navigation.location || state.location;\n    let revalidationRequest = createClientSideRequest(\n      init.history,\n      nextLocation,\n      abortController.signal\n    );\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let matches = state.navigation.state !== \"idle\" ? matchRoutes(routesToUse, state.navigation.location, basename) : state.matches;\n    invariant(matches, \"Didn't find any matches after fetcher action\");\n    let loadId = ++incrementingLoadId;\n    fetchReloadIds.set(key, loadId);\n    let loadFetcher = getLoadingFetcher(submission, actionResult.data);\n    state.fetchers.set(key, loadFetcher);\n    let { dsMatches, revalidatingFetchers } = getMatchesToLoad(\n      revalidationRequest,\n      scopedContext,\n      mapRouteProperties2,\n      manifest,\n      init.history,\n      state,\n      matches,\n      submission,\n      nextLocation,\n      hydrationRouteProperties2,\n      false,\n      isRevalidationRequired,\n      cancelledFetcherLoads,\n      fetchersQueuedForDeletion,\n      fetchLoadMatches,\n      fetchRedirectIds,\n      routesToUse,\n      basename,\n      init.patchRoutesOnNavigation != null,\n      [match.route.id, actionResult]\n    );\n    revalidatingFetchers.filter((rf) => rf.key !== key).forEach((rf) => {\n      let staleKey = rf.key;\n      let existingFetcher2 = state.fetchers.get(staleKey);\n      let revalidatingFetcher = getLoadingFetcher(\n        void 0,\n        existingFetcher2 ? existingFetcher2.data : void 0\n      );\n      state.fetchers.set(staleKey, revalidatingFetcher);\n      abortFetcher(staleKey);\n      if (rf.controller) {\n        fetchControllers.set(staleKey, rf.controller);\n      }\n    });\n    updateState({ fetchers: new Map(state.fetchers) });\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach((rf) => abortFetcher(rf.key));\n    abortController.signal.addEventListener(\n      \"abort\",\n      abortPendingFetchRevalidations\n    );\n    let { loaderResults, fetcherResults } = await callLoadersAndMaybeResolveData(\n      dsMatches,\n      revalidatingFetchers,\n      revalidationRequest,\n      scopedContext\n    );\n    if (abortController.signal.aborted) {\n      return;\n    }\n    abortController.signal.removeEventListener(\n      \"abort\",\n      abortPendingFetchRevalidations\n    );\n    fetchReloadIds.delete(key);\n    fetchControllers.delete(key);\n    revalidatingFetchers.forEach((r) => fetchControllers.delete(r.key));\n    if (state.fetchers.has(key)) {\n      let doneFetcher = getDoneFetcher(actionResult.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n    let redirect2 = findRedirect(loaderResults);\n    if (redirect2) {\n      return startRedirectNavigation(\n        revalidationRequest,\n        redirect2.result,\n        false,\n        { preventScrollReset }\n      );\n    }\n    redirect2 = findRedirect(fetcherResults);\n    if (redirect2) {\n      fetchRedirectIds.add(redirect2.key);\n      return startRedirectNavigation(\n        revalidationRequest,\n        redirect2.result,\n        false,\n        { preventScrollReset }\n      );\n    }\n    let { loaderData, errors } = processLoaderData(\n      state,\n      matches,\n      loaderResults,\n      void 0,\n      revalidatingFetchers,\n      fetcherResults\n    );\n    abortStaleFetchLoads(loadId);\n    if (state.navigation.state === \"loading\" && loadId > pendingNavigationLoadId) {\n      invariant(pendingAction, \"Expected pending action\");\n      pendingNavigationController && pendingNavigationController.abort();\n      completeNavigation(state.navigation.location, {\n        matches,\n        loaderData,\n        errors,\n        fetchers: new Map(state.fetchers)\n      });\n    } else {\n      updateState({\n        errors,\n        loaderData: mergeLoaderData(\n          state.loaderData,\n          loaderData,\n          matches,\n          errors\n        ),\n        fetchers: new Map(state.fetchers)\n      });\n      isRevalidationRequired = false;\n    }\n  }\n  async function handleFetcherLoader(key, routeId, path, matches, scopedContext, isFogOfWar, flushSync, preventScrollReset, submission) {\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(\n      key,\n      getLoadingFetcher(\n        submission,\n        existingFetcher ? existingFetcher.data : void 0\n      ),\n      { flushSync }\n    );\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(\n      init.history,\n      path,\n      abortController.signal\n    );\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(\n        matches,\n        new URL(fetchRequest.url).pathname,\n        fetchRequest.signal,\n        key\n      );\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, { flushSync });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(\n          key,\n          routeId,\n          getInternalRouterError(404, { pathname: path }),\n          { flushSync }\n        );\n        return;\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    let match = getTargetMatch(matches, path);\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let dsMatches = getTargetedDataStrategyMatches(\n      mapRouteProperties2,\n      manifest,\n      fetchRequest,\n      matches,\n      match,\n      hydrationRouteProperties2,\n      scopedContext\n    );\n    let results = await callDataStrategy(\n      fetchRequest,\n      dsMatches,\n      scopedContext,\n      key\n    );\n    let result = results[match.route.id];\n    if (fetchControllers.get(key) === abortController) {\n      fetchControllers.delete(key);\n    }\n    if (fetchRequest.signal.aborted) {\n      return;\n    }\n    if (fetchersQueuedForDeletion.has(key)) {\n      updateFetcherState(key, getDoneFetcher(void 0));\n      return;\n    }\n    if (isRedirectResult(result)) {\n      if (pendingNavigationLoadId > originatingLoadId) {\n        updateFetcherState(key, getDoneFetcher(void 0));\n        return;\n      } else {\n        fetchRedirectIds.add(key);\n        await startRedirectNavigation(fetchRequest, result, false, {\n          preventScrollReset\n        });\n        return;\n      }\n    }\n    if (isErrorResult(result)) {\n      setFetcherError(key, routeId, result.error);\n      return;\n    }\n    updateFetcherState(key, getDoneFetcher(result.data));\n  }\n  async function startRedirectNavigation(request, redirect2, isNavigation, {\n    submission,\n    fetcherSubmission,\n    preventScrollReset,\n    replace: replace2\n  } = {}) {\n    if (redirect2.response.headers.has(\"X-Remix-Revalidate\")) {\n      isRevalidationRequired = true;\n    }\n    let location = redirect2.response.headers.get(\"Location\");\n    invariant(location, \"Expected a Location header on the redirect Response\");\n    location = normalizeRedirectLocation(\n      location,\n      new URL(request.url),\n      basename\n    );\n    let redirectLocation = createLocation(state.location, location, {\n      _isRedirect: true\n    });\n    if (isBrowser2) {\n      let isDocumentReload = false;\n      if (redirect2.response.headers.has(\"X-Remix-Reload-Document\")) {\n        isDocumentReload = true;\n      } else if (isAbsoluteUrl(location)) {\n        const url = createBrowserURLImpl(location, true);\n        isDocumentReload = // Hard reload if it's an absolute URL to a new origin\n        url.origin !== routerWindow.location.origin || // Hard reload if it's an absolute URL that does not match our basename\n        stripBasename(url.pathname, basename) == null;\n      }\n      if (isDocumentReload) {\n        if (replace2) {\n          routerWindow.location.replace(location);\n        } else {\n          routerWindow.location.assign(location);\n        }\n        return;\n      }\n    }\n    pendingNavigationController = null;\n    let redirectNavigationType = replace2 === true || redirect2.response.headers.has(\"X-Remix-Replace\") ? \"REPLACE\" /* Replace */ : \"PUSH\" /* Push */;\n    let { formMethod, formAction, formEncType } = state.navigation;\n    if (!submission && !fetcherSubmission && formMethod && formAction && formEncType) {\n      submission = getSubmissionFromNavigation(state.navigation);\n    }\n    let activeSubmission = submission || fetcherSubmission;\n    if (redirectPreserveMethodStatusCodes.has(redirect2.response.status) && activeSubmission && isMutationMethod(activeSubmission.formMethod)) {\n      await startNavigation(redirectNavigationType, redirectLocation, {\n        submission: {\n          ...activeSubmission,\n          formAction: location\n        },\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : void 0\n      });\n    } else {\n      let overrideNavigation = getLoadingNavigation(\n        redirectLocation,\n        submission\n      );\n      await startNavigation(redirectNavigationType, redirectLocation, {\n        overrideNavigation,\n        // Send fetcher submissions through for shouldRevalidate\n        fetcherSubmission,\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : void 0\n      });\n    }\n  }\n  async function callDataStrategy(request, matches, scopedContext, fetcherKey) {\n    let results;\n    let dataResults = {};\n    try {\n      results = await callDataStrategyImpl(\n        dataStrategyImpl,\n        request,\n        matches,\n        fetcherKey,\n        scopedContext,\n        false\n      );\n    } catch (e) {\n      matches.filter((m) => m.shouldLoad).forEach((m) => {\n        dataResults[m.route.id] = {\n          type: \"error\" /* error */,\n          error: e\n        };\n      });\n      return dataResults;\n    }\n    if (request.signal.aborted) {\n      return dataResults;\n    }\n    for (let [routeId, result] of Object.entries(results)) {\n      if (isRedirectDataStrategyResult(result)) {\n        let response = result.result;\n        dataResults[routeId] = {\n          type: \"redirect\" /* redirect */,\n          response: normalizeRelativeRoutingRedirectResponse(\n            response,\n            request,\n            routeId,\n            matches,\n            basename\n          )\n        };\n      } else {\n        dataResults[routeId] = await convertDataStrategyResultToDataResult(result);\n      }\n    }\n    return dataResults;\n  }\n  async function callLoadersAndMaybeResolveData(matches, fetchersToLoad, request, scopedContext) {\n    let loaderResultsPromise = callDataStrategy(\n      request,\n      matches,\n      scopedContext,\n      null\n    );\n    let fetcherResultsPromise = Promise.all(\n      fetchersToLoad.map(async (f) => {\n        if (f.matches && f.match && f.request && f.controller) {\n          let results = await callDataStrategy(\n            f.request,\n            f.matches,\n            scopedContext,\n            f.key\n          );\n          let result = results[f.match.route.id];\n          return { [f.key]: result };\n        } else {\n          return Promise.resolve({\n            [f.key]: {\n              type: \"error\" /* error */,\n              error: getInternalRouterError(404, {\n                pathname: f.path\n              })\n            }\n          });\n        }\n      })\n    );\n    let loaderResults = await loaderResultsPromise;\n    let fetcherResults = (await fetcherResultsPromise).reduce(\n      (acc, r) => Object.assign(acc, r),\n      {}\n    );\n    return {\n      loaderResults,\n      fetcherResults\n    };\n  }\n  function interruptActiveLoads() {\n    isRevalidationRequired = true;\n    fetchLoadMatches.forEach((_, key) => {\n      if (fetchControllers.has(key)) {\n        cancelledFetcherLoads.add(key);\n      }\n      abortFetcher(key);\n    });\n  }\n  function updateFetcherState(key, fetcher, opts = {}) {\n    state.fetchers.set(key, fetcher);\n    updateState(\n      { fetchers: new Map(state.fetchers) },\n      { flushSync: (opts && opts.flushSync) === true }\n    );\n  }\n  function setFetcherError(key, routeId, error, opts = {}) {\n    let boundaryMatch = findNearestBoundary(state.matches, routeId);\n    deleteFetcher(key);\n    updateState(\n      {\n        errors: {\n          [boundaryMatch.route.id]: error\n        },\n        fetchers: new Map(state.fetchers)\n      },\n      { flushSync: (opts && opts.flushSync) === true }\n    );\n  }\n  function getFetcher(key) {\n    activeFetchers.set(key, (activeFetchers.get(key) || 0) + 1);\n    if (fetchersQueuedForDeletion.has(key)) {\n      fetchersQueuedForDeletion.delete(key);\n    }\n    return state.fetchers.get(key) || IDLE_FETCHER;\n  }\n  function resetFetcher(key, opts) {\n    abortFetcher(key, opts?.reason);\n    updateFetcherState(key, getDoneFetcher(null));\n  }\n  function deleteFetcher(key) {\n    let fetcher = state.fetchers.get(key);\n    if (fetchControllers.has(key) && !(fetcher && fetcher.state === \"loading\" && fetchReloadIds.has(key))) {\n      abortFetcher(key);\n    }\n    fetchLoadMatches.delete(key);\n    fetchReloadIds.delete(key);\n    fetchRedirectIds.delete(key);\n    fetchersQueuedForDeletion.delete(key);\n    cancelledFetcherLoads.delete(key);\n    state.fetchers.delete(key);\n  }\n  function queueFetcherForDeletion(key) {\n    let count = (activeFetchers.get(key) || 0) - 1;\n    if (count <= 0) {\n      activeFetchers.delete(key);\n      fetchersQueuedForDeletion.add(key);\n    } else {\n      activeFetchers.set(key, count);\n    }\n    updateState({ fetchers: new Map(state.fetchers) });\n  }\n  function abortFetcher(key, reason) {\n    let controller = fetchControllers.get(key);\n    if (controller) {\n      controller.abort(reason);\n      fetchControllers.delete(key);\n    }\n  }\n  function markFetchersDone(keys) {\n    for (let key of keys) {\n      let fetcher = getFetcher(key);\n      let doneFetcher = getDoneFetcher(fetcher.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  }\n  function markFetchRedirectsDone() {\n    let doneKeys = [];\n    let updatedFetchers = false;\n    for (let key of fetchRedirectIds) {\n      let fetcher = state.fetchers.get(key);\n      invariant(fetcher, `Expected fetcher: ${key}`);\n      if (fetcher.state === \"loading\") {\n        fetchRedirectIds.delete(key);\n        doneKeys.push(key);\n        updatedFetchers = true;\n      }\n    }\n    markFetchersDone(doneKeys);\n    return updatedFetchers;\n  }\n  function abortStaleFetchLoads(landedId) {\n    let yeetedKeys = [];\n    for (let [key, id] of fetchReloadIds) {\n      if (id < landedId) {\n        let fetcher = state.fetchers.get(key);\n        invariant(fetcher, `Expected fetcher: ${key}`);\n        if (fetcher.state === \"loading\") {\n          abortFetcher(key);\n          fetchReloadIds.delete(key);\n          yeetedKeys.push(key);\n        }\n      }\n    }\n    markFetchersDone(yeetedKeys);\n    return yeetedKeys.length > 0;\n  }\n  function getBlocker(key, fn) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    if (blockerFunctions.get(key) !== fn) {\n      blockerFunctions.set(key, fn);\n    }\n    return blocker;\n  }\n  function deleteBlocker(key) {\n    state.blockers.delete(key);\n    blockerFunctions.delete(key);\n  }\n  function updateBlocker(key, newBlocker) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    invariant(\n      blocker.state === \"unblocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"proceeding\" || blocker.state === \"blocked\" && newBlocker.state === \"unblocked\" || blocker.state === \"proceeding\" && newBlocker.state === \"unblocked\",\n      `Invalid blocker state transition: ${blocker.state} -> ${newBlocker.state}`\n    );\n    let blockers = new Map(state.blockers);\n    blockers.set(key, newBlocker);\n    updateState({ blockers });\n  }\n  function shouldBlockNavigation({\n    currentLocation,\n    nextLocation,\n    historyAction\n  }) {\n    if (blockerFunctions.size === 0) {\n      return;\n    }\n    if (blockerFunctions.size > 1) {\n      warning(false, \"A router only supports one blocker at a time\");\n    }\n    let entries = Array.from(blockerFunctions.entries());\n    let [blockerKey, blockerFunction] = entries[entries.length - 1];\n    let blocker = state.blockers.get(blockerKey);\n    if (blocker && blocker.state === \"proceeding\") {\n      return;\n    }\n    if (blockerFunction({ currentLocation, nextLocation, historyAction })) {\n      return blockerKey;\n    }\n  }\n  function handleNavigational404(pathname) {\n    let error = getInternalRouterError(404, { pathname });\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let { matches, route } = getShortCircuitMatches(routesToUse);\n    return { notFoundMatches: matches, route, error };\n  }\n  function enableScrollRestoration(positions, getPosition, getKey) {\n    savedScrollPositions2 = positions;\n    getScrollPosition = getPosition;\n    getScrollRestorationKey2 = getKey || null;\n    if (!initialScrollRestored && state.navigation === IDLE_NAVIGATION) {\n      initialScrollRestored = true;\n      let y = getSavedScrollPosition(state.location, state.matches);\n      if (y != null) {\n        updateState({ restoreScrollPosition: y });\n      }\n    }\n    return () => {\n      savedScrollPositions2 = null;\n      getScrollPosition = null;\n      getScrollRestorationKey2 = null;\n    };\n  }\n  function getScrollKey(location, matches) {\n    if (getScrollRestorationKey2) {\n      let key = getScrollRestorationKey2(\n        location,\n        matches.map((m) => convertRouteMatchToUiMatch(m, state.loaderData))\n      );\n      return key || location.key;\n    }\n    return location.key;\n  }\n  function saveScrollPosition(location, matches) {\n    if (savedScrollPositions2 && getScrollPosition) {\n      let key = getScrollKey(location, matches);\n      savedScrollPositions2[key] = getScrollPosition();\n    }\n  }\n  function getSavedScrollPosition(location, matches) {\n    if (savedScrollPositions2) {\n      let key = getScrollKey(location, matches);\n      let y = savedScrollPositions2[key];\n      if (typeof y === \"number\") {\n        return y;\n      }\n    }\n    return null;\n  }\n  function checkFogOfWar(matches, routesToUse, pathname) {\n    if (init.patchRoutesOnNavigation) {\n      if (!matches) {\n        let fogMatches = matchRoutesImpl(\n          routesToUse,\n          pathname,\n          basename,\n          true\n        );\n        return { active: true, matches: fogMatches || [] };\n      } else {\n        if (Object.keys(matches[0].params).length > 0) {\n          let partialMatches = matchRoutesImpl(\n            routesToUse,\n            pathname,\n            basename,\n            true\n          );\n          return { active: true, matches: partialMatches };\n        }\n      }\n    }\n    return { active: false, matches: null };\n  }\n  async function discoverRoutes(matches, pathname, signal, fetcherKey) {\n    if (!init.patchRoutesOnNavigation) {\n      return { type: \"success\", matches };\n    }\n    let partialMatches = matches;\n    while (true) {\n      let isNonHMR = inFlightDataRoutes == null;\n      let routesToUse = inFlightDataRoutes || dataRoutes;\n      let localManifest = manifest;\n      try {\n        await init.patchRoutesOnNavigation({\n          signal,\n          path: pathname,\n          matches: partialMatches,\n          fetcherKey,\n          patch: (routeId, children) => {\n            if (signal.aborted) return;\n            patchRoutesImpl(\n              routeId,\n              children,\n              routesToUse,\n              localManifest,\n              mapRouteProperties2,\n              false\n            );\n          }\n        });\n      } catch (e) {\n        return { type: \"error\", error: e, partialMatches };\n      } finally {\n        if (isNonHMR && !signal.aborted) {\n          dataRoutes = [...dataRoutes];\n        }\n      }\n      if (signal.aborted) {\n        return { type: \"aborted\" };\n      }\n      let newMatches = matchRoutes(routesToUse, pathname, basename);\n      if (newMatches) {\n        return { type: \"success\", matches: newMatches };\n      }\n      let newPartialMatches = matchRoutesImpl(\n        routesToUse,\n        pathname,\n        basename,\n        true\n      );\n      if (!newPartialMatches || partialMatches.length === newPartialMatches.length && partialMatches.every(\n        (m, i) => m.route.id === newPartialMatches[i].route.id\n      )) {\n        return { type: \"success\", matches: null };\n      }\n      partialMatches = newPartialMatches;\n    }\n  }\n  function _internalSetRoutes(newRoutes) {\n    manifest = {};\n    inFlightDataRoutes = convertRoutesToDataRoutes(\n      newRoutes,\n      mapRouteProperties2,\n      void 0,\n      manifest\n    );\n  }\n  function patchRoutes(routeId, children, unstable_allowElementMutations = false) {\n    let isNonHMR = inFlightDataRoutes == null;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    patchRoutesImpl(\n      routeId,\n      children,\n      routesToUse,\n      manifest,\n      mapRouteProperties2,\n      unstable_allowElementMutations\n    );\n    if (isNonHMR) {\n      dataRoutes = [...dataRoutes];\n      updateState({});\n    }\n  }\n  router = {\n    get basename() {\n      return basename;\n    },\n    get future() {\n      return future;\n    },\n    get state() {\n      return state;\n    },\n    get routes() {\n      return dataRoutes;\n    },\n    get window() {\n      return routerWindow;\n    },\n    initialize,\n    subscribe,\n    enableScrollRestoration,\n    navigate,\n    fetch: fetch2,\n    revalidate,\n    // Passthrough to history-aware createHref used by useHref so we get proper\n    // hash-aware URLs in DOM paths\n    createHref: (to) => init.history.createHref(to),\n    encodeLocation: (to) => init.history.encodeLocation(to),\n    getFetcher,\n    resetFetcher,\n    deleteFetcher: queueFetcherForDeletion,\n    dispose,\n    getBlocker,\n    deleteBlocker,\n    patchRoutes,\n    _internalFetchControllers: fetchControllers,\n    // TODO: Remove setRoutes, it's temporary to avoid dealing with\n    // updating the tree while validating the update algorithm.\n    _internalSetRoutes,\n    _internalSetStateDoNotUseOrYouWillBreakYourApp(newState) {\n      updateState(newState);\n    }\n  };\n  return router;\n}\nfunction createStaticHandler(routes, opts) {\n  invariant(\n    routes.length > 0,\n    \"You must provide a non-empty routes array to createStaticHandler\"\n  );\n  let manifest = {};\n  let basename = (opts ? opts.basename : null) || \"/\";\n  let mapRouteProperties2 = opts?.mapRouteProperties || defaultMapRouteProperties;\n  let dataRoutes = convertRoutesToDataRoutes(\n    routes,\n    mapRouteProperties2,\n    void 0,\n    manifest\n  );\n  async function query(request, {\n    requestContext,\n    filterMatchesToLoad,\n    skipLoaderErrorBubbling,\n    skipRevalidation,\n    dataStrategy,\n    generateMiddlewareResponse\n  } = {}) {\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    requestContext = requestContext != null ? requestContext : new RouterContextProvider();\n    if (!isValidMethod(method) && method !== \"HEAD\") {\n      let error = getInternalRouterError(405, { method });\n      let { matches: methodNotAllowedMatches, route } = getShortCircuitMatches(dataRoutes);\n      let staticContext = {\n        basename,\n        location,\n        matches: methodNotAllowedMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {}\n      };\n      return generateMiddlewareResponse ? generateMiddlewareResponse(() => Promise.resolve(staticContext)) : staticContext;\n    } else if (!matches) {\n      let error = getInternalRouterError(404, { pathname: location.pathname });\n      let { matches: notFoundMatches, route } = getShortCircuitMatches(dataRoutes);\n      let staticContext = {\n        basename,\n        location,\n        matches: notFoundMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {}\n      };\n      return generateMiddlewareResponse ? generateMiddlewareResponse(() => Promise.resolve(staticContext)) : staticContext;\n    }\n    if (generateMiddlewareResponse) {\n      invariant(\n        requestContext instanceof RouterContextProvider,\n        \"When using middleware in `staticHandler.query()`, any provided `requestContext` must be an instance of `RouterContextProvider`\"\n      );\n      try {\n        await loadLazyMiddlewareForMatches(\n          matches,\n          manifest,\n          mapRouteProperties2\n        );\n        let renderedStaticContext;\n        let response = await runServerMiddlewarePipeline(\n          {\n            request,\n            matches,\n            params: matches[0].params,\n            // If we're calling middleware then it must be enabled so we can cast\n            // this to the proper type knowing it's not an `AppLoadContext`\n            context: requestContext\n          },\n          async () => {\n            let res = await generateMiddlewareResponse(\n              async (revalidationRequest, opts2 = {}) => {\n                let result2 = await queryImpl(\n                  revalidationRequest,\n                  location,\n                  matches,\n                  requestContext,\n                  dataStrategy || null,\n                  skipLoaderErrorBubbling === true,\n                  null,\n                  \"filterMatchesToLoad\" in opts2 ? opts2.filterMatchesToLoad ?? null : filterMatchesToLoad ?? null,\n                  skipRevalidation === true\n                );\n                if (isResponse(result2)) {\n                  return result2;\n                }\n                renderedStaticContext = { location, basename, ...result2 };\n                return renderedStaticContext;\n              }\n            );\n            return res;\n          },\n          async (error, routeId) => {\n            if (isRedirectResponse(error)) {\n              return error;\n            }\n            if (isResponse(error)) {\n              try {\n                error = new ErrorResponseImpl(\n                  error.status,\n                  error.statusText,\n                  await parseResponseBody(error)\n                );\n              } catch (e) {\n                error = e;\n              }\n            }\n            if (isDataWithResponseInit(error)) {\n              error = dataWithResponseInitToErrorResponse(error);\n            }\n            if (renderedStaticContext) {\n              if (routeId in renderedStaticContext.loaderData) {\n                renderedStaticContext.loaderData[routeId] = void 0;\n              }\n              let staticContext = getStaticContextFromError(\n                dataRoutes,\n                renderedStaticContext,\n                error,\n                skipLoaderErrorBubbling ? routeId : findNearestBoundary(matches, routeId).route.id\n              );\n              return generateMiddlewareResponse(\n                () => Promise.resolve(staticContext)\n              );\n            } else {\n              let boundaryRouteId = skipLoaderErrorBubbling ? routeId : findNearestBoundary(\n                matches,\n                matches.find(\n                  (m) => m.route.id === routeId || m.route.loader\n                )?.route.id || routeId\n              ).route.id;\n              let staticContext = {\n                matches,\n                location,\n                basename,\n                loaderData: {},\n                actionData: null,\n                errors: {\n                  [boundaryRouteId]: error\n                },\n                statusCode: isRouteErrorResponse(error) ? error.status : 500,\n                actionHeaders: {},\n                loaderHeaders: {}\n              };\n              return generateMiddlewareResponse(\n                () => Promise.resolve(staticContext)\n              );\n            }\n          }\n        );\n        invariant(isResponse(response), \"Expected a response in query()\");\n        return response;\n      } catch (e) {\n        if (isResponse(e)) {\n          return e;\n        }\n        throw e;\n      }\n    }\n    let result = await queryImpl(\n      request,\n      location,\n      matches,\n      requestContext,\n      dataStrategy || null,\n      skipLoaderErrorBubbling === true,\n      null,\n      filterMatchesToLoad || null,\n      skipRevalidation === true\n    );\n    if (isResponse(result)) {\n      return result;\n    }\n    return { location, basename, ...result };\n  }\n  async function queryRoute(request, {\n    routeId,\n    requestContext,\n    dataStrategy,\n    generateMiddlewareResponse\n  } = {}) {\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    requestContext = requestContext != null ? requestContext : new RouterContextProvider();\n    if (!isValidMethod(method) && method !== \"HEAD\" && method !== \"OPTIONS\") {\n      throw getInternalRouterError(405, { method });\n    } else if (!matches) {\n      throw getInternalRouterError(404, { pathname: location.pathname });\n    }\n    let match = routeId ? matches.find((m) => m.route.id === routeId) : getTargetMatch(matches, location);\n    if (routeId && !match) {\n      throw getInternalRouterError(403, {\n        pathname: location.pathname,\n        routeId\n      });\n    } else if (!match) {\n      throw getInternalRouterError(404, { pathname: location.pathname });\n    }\n    if (generateMiddlewareResponse) {\n      invariant(\n        requestContext instanceof RouterContextProvider,\n        \"When using middleware in `staticHandler.queryRoute()`, any provided `requestContext` must be an instance of `RouterContextProvider`\"\n      );\n      await loadLazyMiddlewareForMatches(matches, manifest, mapRouteProperties2);\n      let response = await runServerMiddlewarePipeline(\n        {\n          request,\n          matches,\n          params: matches[0].params,\n          // If we're calling middleware then it must be enabled so we can cast\n          // this to the proper type knowing it's not an `AppLoadContext`\n          context: requestContext\n        },\n        async () => {\n          let res = await generateMiddlewareResponse(\n            async (innerRequest) => {\n              let result2 = await queryImpl(\n                innerRequest,\n                location,\n                matches,\n                requestContext,\n                dataStrategy || null,\n                false,\n                match,\n                null,\n                false\n              );\n              let processed = handleQueryResult(result2);\n              return isResponse(processed) ? processed : typeof processed === \"string\" ? new Response(processed) : Response.json(processed);\n            }\n          );\n          return res;\n        },\n        (error) => {\n          if (isDataWithResponseInit(error)) {\n            return Promise.resolve(dataWithResponseInitToResponse(error));\n          }\n          if (isResponse(error)) {\n            return Promise.resolve(error);\n          }\n          throw error;\n        }\n      );\n      return response;\n    }\n    let result = await queryImpl(\n      request,\n      location,\n      matches,\n      requestContext,\n      dataStrategy || null,\n      false,\n      match,\n      null,\n      false\n    );\n    return handleQueryResult(result);\n    function handleQueryResult(result2) {\n      if (isResponse(result2)) {\n        return result2;\n      }\n      let error = result2.errors ? Object.values(result2.errors)[0] : void 0;\n      if (error !== void 0) {\n        throw error;\n      }\n      if (result2.actionData) {\n        return Object.values(result2.actionData)[0];\n      }\n      if (result2.loaderData) {\n        return Object.values(result2.loaderData)[0];\n      }\n      return void 0;\n    }\n  }\n  async function queryImpl(request, location, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch, filterMatchesToLoad, skipRevalidation) {\n    invariant(\n      request.signal,\n      \"query()/queryRoute() requests must contain an AbortController signal\"\n    );\n    try {\n      if (isMutationMethod(request.method)) {\n        let result2 = await submit(\n          request,\n          matches,\n          routeMatch || getTargetMatch(matches, location),\n          requestContext,\n          dataStrategy,\n          skipLoaderErrorBubbling,\n          routeMatch != null,\n          filterMatchesToLoad,\n          skipRevalidation\n        );\n        return result2;\n      }\n      let result = await loadRouteData(\n        request,\n        matches,\n        requestContext,\n        dataStrategy,\n        skipLoaderErrorBubbling,\n        routeMatch,\n        filterMatchesToLoad\n      );\n      return isResponse(result) ? result : {\n        ...result,\n        actionData: null,\n        actionHeaders: {}\n      };\n    } catch (e) {\n      if (isDataStrategyResult(e) && isResponse(e.result)) {\n        if (e.type === \"error\" /* error */) {\n          throw e.result;\n        }\n        return e.result;\n      }\n      if (isRedirectResponse(e)) {\n        return e;\n      }\n      throw e;\n    }\n  }\n  async function submit(request, matches, actionMatch, requestContext, dataStrategy, skipLoaderErrorBubbling, isRouteRequest, filterMatchesToLoad, skipRevalidation) {\n    let result;\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      let error = getInternalRouterError(405, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: actionMatch.route.id\n      });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: \"error\" /* error */,\n        error\n      };\n    } else {\n      let dsMatches = getTargetedDataStrategyMatches(\n        mapRouteProperties2,\n        manifest,\n        request,\n        matches,\n        actionMatch,\n        [],\n        requestContext\n      );\n      let results = await callDataStrategy(\n        request,\n        dsMatches,\n        isRouteRequest,\n        requestContext,\n        dataStrategy\n      );\n      result = results[actionMatch.route.id];\n      if (request.signal.aborted) {\n        throwStaticHandlerAbortedError(request, isRouteRequest);\n      }\n    }\n    if (isRedirectResult(result)) {\n      throw new Response(null, {\n        status: result.response.status,\n        headers: {\n          Location: result.response.headers.get(\"Location\")\n        }\n      });\n    }\n    if (isRouteRequest) {\n      if (isErrorResult(result)) {\n        throw result.error;\n      }\n      return {\n        matches: [actionMatch],\n        loaderData: {},\n        actionData: { [actionMatch.route.id]: result.data },\n        errors: null,\n        // Note: statusCode + headers are unused here since queryRoute will\n        // return the raw Response or value\n        statusCode: 200,\n        loaderHeaders: {},\n        actionHeaders: {}\n      };\n    }\n    if (skipRevalidation) {\n      if (isErrorResult(result)) {\n        let boundaryMatch = skipLoaderErrorBubbling ? actionMatch : findNearestBoundary(matches, actionMatch.route.id);\n        return {\n          statusCode: isRouteErrorResponse(result.error) ? result.error.status : result.statusCode != null ? result.statusCode : 500,\n          actionData: null,\n          actionHeaders: {\n            ...result.headers ? { [actionMatch.route.id]: result.headers } : {}\n          },\n          matches,\n          loaderData: {},\n          errors: {\n            [boundaryMatch.route.id]: result.error\n          },\n          loaderHeaders: {}\n        };\n      } else {\n        return {\n          actionData: {\n            [actionMatch.route.id]: result.data\n          },\n          actionHeaders: result.headers ? { [actionMatch.route.id]: result.headers } : {},\n          matches,\n          loaderData: {},\n          errors: null,\n          statusCode: result.statusCode || 200,\n          loaderHeaders: {}\n        };\n      }\n    }\n    let loaderRequest = new Request(request.url, {\n      headers: request.headers,\n      redirect: request.redirect,\n      signal: request.signal\n    });\n    if (isErrorResult(result)) {\n      let boundaryMatch = skipLoaderErrorBubbling ? actionMatch : findNearestBoundary(matches, actionMatch.route.id);\n      let handlerContext2 = await loadRouteData(\n        loaderRequest,\n        matches,\n        requestContext,\n        dataStrategy,\n        skipLoaderErrorBubbling,\n        null,\n        filterMatchesToLoad,\n        [boundaryMatch.route.id, result]\n      );\n      return {\n        ...handlerContext2,\n        statusCode: isRouteErrorResponse(result.error) ? result.error.status : result.statusCode != null ? result.statusCode : 500,\n        actionData: null,\n        actionHeaders: {\n          ...result.headers ? { [actionMatch.route.id]: result.headers } : {}\n        }\n      };\n    }\n    let handlerContext = await loadRouteData(\n      loaderRequest,\n      matches,\n      requestContext,\n      dataStrategy,\n      skipLoaderErrorBubbling,\n      null,\n      filterMatchesToLoad\n    );\n    return {\n      ...handlerContext,\n      actionData: {\n        [actionMatch.route.id]: result.data\n      },\n      // action status codes take precedence over loader status codes\n      ...result.statusCode ? { statusCode: result.statusCode } : {},\n      actionHeaders: result.headers ? { [actionMatch.route.id]: result.headers } : {}\n    };\n  }\n  async function loadRouteData(request, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch, filterMatchesToLoad, pendingActionResult) {\n    let isRouteRequest = routeMatch != null;\n    if (isRouteRequest && !routeMatch?.route.loader && !routeMatch?.route.lazy) {\n      throw getInternalRouterError(400, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: routeMatch?.route.id\n      });\n    }\n    let dsMatches;\n    if (routeMatch) {\n      dsMatches = getTargetedDataStrategyMatches(\n        mapRouteProperties2,\n        manifest,\n        request,\n        matches,\n        routeMatch,\n        [],\n        requestContext\n      );\n    } else {\n      let maxIdx = pendingActionResult && isErrorResult(pendingActionResult[1]) ? (\n        // Up to but not including the boundary\n        matches.findIndex((m) => m.route.id === pendingActionResult[0]) - 1\n      ) : void 0;\n      dsMatches = matches.map((match, index) => {\n        if (maxIdx != null && index > maxIdx) {\n          return getDataStrategyMatch(\n            mapRouteProperties2,\n            manifest,\n            request,\n            match,\n            [],\n            requestContext,\n            false\n          );\n        }\n        return getDataStrategyMatch(\n          mapRouteProperties2,\n          manifest,\n          request,\n          match,\n          [],\n          requestContext,\n          (match.route.loader || match.route.lazy) != null && (!filterMatchesToLoad || filterMatchesToLoad(match))\n        );\n      });\n    }\n    if (!dataStrategy && !dsMatches.some((m) => m.shouldLoad)) {\n      return {\n        matches,\n        loaderData: {},\n        errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? {\n          [pendingActionResult[0]]: pendingActionResult[1].error\n        } : null,\n        statusCode: 200,\n        loaderHeaders: {}\n      };\n    }\n    let results = await callDataStrategy(\n      request,\n      dsMatches,\n      isRouteRequest,\n      requestContext,\n      dataStrategy\n    );\n    if (request.signal.aborted) {\n      throwStaticHandlerAbortedError(request, isRouteRequest);\n    }\n    let handlerContext = processRouteLoaderData(\n      matches,\n      results,\n      pendingActionResult,\n      true,\n      skipLoaderErrorBubbling\n    );\n    return {\n      ...handlerContext,\n      matches\n    };\n  }\n  async function callDataStrategy(request, matches, isRouteRequest, requestContext, dataStrategy) {\n    let results = await callDataStrategyImpl(\n      dataStrategy || defaultDataStrategy,\n      request,\n      matches,\n      null,\n      requestContext,\n      true\n    );\n    let dataResults = {};\n    await Promise.all(\n      matches.map(async (match) => {\n        if (!(match.route.id in results)) {\n          return;\n        }\n        let result = results[match.route.id];\n        if (isRedirectDataStrategyResult(result)) {\n          let response = result.result;\n          throw normalizeRelativeRoutingRedirectResponse(\n            response,\n            request,\n            match.route.id,\n            matches,\n            basename\n          );\n        }\n        if (isRouteRequest) {\n          if (isResponse(result.result)) {\n            throw result;\n          } else if (isDataWithResponseInit(result.result)) {\n            throw dataWithResponseInitToResponse(result.result);\n          }\n        }\n        dataResults[match.route.id] = await convertDataStrategyResultToDataResult(result);\n      })\n    );\n    return dataResults;\n  }\n  return {\n    dataRoutes,\n    query,\n    queryRoute\n  };\n}\nfunction getStaticContextFromError(routes, handlerContext, error, boundaryId) {\n  let errorBoundaryId = boundaryId || handlerContext._deepestRenderedBoundaryId || routes[0].id;\n  return {\n    ...handlerContext,\n    statusCode: isRouteErrorResponse(error) ? error.status : 500,\n    errors: {\n      [errorBoundaryId]: error\n    }\n  };\n}\nfunction throwStaticHandlerAbortedError(request, isRouteRequest) {\n  if (request.signal.reason !== void 0) {\n    throw request.signal.reason;\n  }\n  let method = isRouteRequest ? \"queryRoute\" : \"query\";\n  throw new Error(\n    `${method}() call aborted without an \\`AbortSignal.reason\\`: ${request.method} ${request.url}`\n  );\n}\nfunction isSubmissionNavigation(opts) {\n  return opts != null && (\"formData\" in opts && opts.formData != null || \"body\" in opts && opts.body !== void 0);\n}\nfunction normalizeTo(location, matches, basename, to, fromRouteId, relative) {\n  let contextualMatches;\n  let activeRouteMatch;\n  if (fromRouteId) {\n    contextualMatches = [];\n    for (let match of matches) {\n      contextualMatches.push(match);\n      if (match.route.id === fromRouteId) {\n        activeRouteMatch = match;\n        break;\n      }\n    }\n  } else {\n    contextualMatches = matches;\n    activeRouteMatch = matches[matches.length - 1];\n  }\n  let path = resolveTo(\n    to ? to : \".\",\n    getResolveToMatches(contextualMatches),\n    stripBasename(location.pathname, basename) || location.pathname,\n    relative === \"path\"\n  );\n  if (to == null) {\n    path.search = location.search;\n    path.hash = location.hash;\n  }\n  if ((to == null || to === \"\" || to === \".\") && activeRouteMatch) {\n    let nakedIndex = hasNakedIndexQuery(path.search);\n    if (activeRouteMatch.route.index && !nakedIndex) {\n      path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n    } else if (!activeRouteMatch.route.index && nakedIndex) {\n      let params = new URLSearchParams(path.search);\n      let indexValues = params.getAll(\"index\");\n      params.delete(\"index\");\n      indexValues.filter((v) => v).forEach((v) => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? `?${qs}` : \"\";\n    }\n  }\n  if (basename !== \"/\") {\n    path.pathname = prependBasename({ basename, pathname: path.pathname });\n  }\n  return createPath(path);\n}\nfunction normalizeNavigateOptions(isFetcher, path, opts) {\n  if (!opts || !isSubmissionNavigation(opts)) {\n    return { path };\n  }\n  if (opts.formMethod && !isValidMethod(opts.formMethod)) {\n    return {\n      path,\n      error: getInternalRouterError(405, { method: opts.formMethod })\n    };\n  }\n  let getInvalidBodyError = () => ({\n    path,\n    error: getInternalRouterError(400, { type: \"invalid-body\" })\n  });\n  let rawFormMethod = opts.formMethod || \"get\";\n  let formMethod = rawFormMethod.toUpperCase();\n  let formAction = stripHashFromPath(path);\n  if (opts.body !== void 0) {\n    if (opts.formEncType === \"text/plain\") {\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      let text = typeof opts.body === \"string\" ? opts.body : opts.body instanceof FormData || opts.body instanceof URLSearchParams ? (\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plain-text-form-data\n        Array.from(opts.body.entries()).reduce(\n          (acc, [name, value]) => `${acc}${name}=${value}\n`,\n          \"\"\n        )\n      ) : String(opts.body);\n      return {\n        path,\n        submission: {\n          formMethod,\n          formAction,\n          formEncType: opts.formEncType,\n          formData: void 0,\n          json: void 0,\n          text\n        }\n      };\n    } else if (opts.formEncType === \"application/json\") {\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      try {\n        let json = typeof opts.body === \"string\" ? JSON.parse(opts.body) : opts.body;\n        return {\n          path,\n          submission: {\n            formMethod,\n            formAction,\n            formEncType: opts.formEncType,\n            formData: void 0,\n            json,\n            text: void 0\n          }\n        };\n      } catch (e) {\n        return getInvalidBodyError();\n      }\n    }\n  }\n  invariant(\n    typeof FormData === \"function\",\n    \"FormData is not available in this environment\"\n  );\n  let searchParams;\n  let formData;\n  if (opts.formData) {\n    searchParams = convertFormDataToSearchParams(opts.formData);\n    formData = opts.formData;\n  } else if (opts.body instanceof FormData) {\n    searchParams = convertFormDataToSearchParams(opts.body);\n    formData = opts.body;\n  } else if (opts.body instanceof URLSearchParams) {\n    searchParams = opts.body;\n    formData = convertSearchParamsToFormData(searchParams);\n  } else if (opts.body == null) {\n    searchParams = new URLSearchParams();\n    formData = new FormData();\n  } else {\n    try {\n      searchParams = new URLSearchParams(opts.body);\n      formData = convertSearchParamsToFormData(searchParams);\n    } catch (e) {\n      return getInvalidBodyError();\n    }\n  }\n  let submission = {\n    formMethod,\n    formAction,\n    formEncType: opts && opts.formEncType || \"application/x-www-form-urlencoded\",\n    formData,\n    json: void 0,\n    text: void 0\n  };\n  if (isMutationMethod(submission.formMethod)) {\n    return { path, submission };\n  }\n  let parsedPath = parsePath(path);\n  if (isFetcher && parsedPath.search && hasNakedIndexQuery(parsedPath.search)) {\n    searchParams.append(\"index\", \"\");\n  }\n  parsedPath.search = `?${searchParams}`;\n  return { path: createPath(parsedPath), submission };\n}\nfunction getMatchesToLoad(request, scopedContext, mapRouteProperties2, manifest, history, state, matches, submission, location, lazyRoutePropertiesToSkip, initialHydration, isRevalidationRequired, cancelledFetcherLoads, fetchersQueuedForDeletion, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, hasPatchRoutesOnNavigation, pendingActionResult) {\n  let actionResult = pendingActionResult ? isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : pendingActionResult[1].data : void 0;\n  let currentUrl = history.createURL(state.location);\n  let nextUrl = history.createURL(location);\n  let maxIdx;\n  if (initialHydration && state.errors) {\n    let boundaryId = Object.keys(state.errors)[0];\n    maxIdx = matches.findIndex((m) => m.route.id === boundaryId);\n  } else if (pendingActionResult && isErrorResult(pendingActionResult[1])) {\n    let boundaryId = pendingActionResult[0];\n    maxIdx = matches.findIndex((m) => m.route.id === boundaryId) - 1;\n  }\n  let actionStatus = pendingActionResult ? pendingActionResult[1].statusCode : void 0;\n  let shouldSkipRevalidation = actionStatus && actionStatus >= 400;\n  let baseShouldRevalidateArgs = {\n    currentUrl,\n    currentParams: state.matches[0]?.params || {},\n    nextUrl,\n    nextParams: matches[0].params,\n    ...submission,\n    actionResult,\n    actionStatus\n  };\n  let dsMatches = matches.map((match, index) => {\n    let { route } = match;\n    let forceShouldLoad = null;\n    if (maxIdx != null && index > maxIdx) {\n      forceShouldLoad = false;\n    } else if (route.lazy) {\n      forceShouldLoad = true;\n    } else if (!routeHasLoaderOrMiddleware(route)) {\n      forceShouldLoad = false;\n    } else if (initialHydration) {\n      forceShouldLoad = shouldLoadRouteOnHydration(\n        route,\n        state.loaderData,\n        state.errors\n      );\n    } else if (isNewLoader(state.loaderData, state.matches[index], match)) {\n      forceShouldLoad = true;\n    }\n    if (forceShouldLoad !== null) {\n      return getDataStrategyMatch(\n        mapRouteProperties2,\n        manifest,\n        request,\n        match,\n        lazyRoutePropertiesToSkip,\n        scopedContext,\n        forceShouldLoad\n      );\n    }\n    let defaultShouldRevalidate = shouldSkipRevalidation ? false : (\n      // Forced revalidation due to submission, useRevalidator, or X-Remix-Revalidate\n      isRevalidationRequired || currentUrl.pathname + currentUrl.search === nextUrl.pathname + nextUrl.search || // Search params affect all loaders\n      currentUrl.search !== nextUrl.search || isNewRouteInstance(state.matches[index], match)\n    );\n    let shouldRevalidateArgs = {\n      ...baseShouldRevalidateArgs,\n      defaultShouldRevalidate\n    };\n    let shouldLoad = shouldRevalidateLoader(match, shouldRevalidateArgs);\n    return getDataStrategyMatch(\n      mapRouteProperties2,\n      manifest,\n      request,\n      match,\n      lazyRoutePropertiesToSkip,\n      scopedContext,\n      shouldLoad,\n      shouldRevalidateArgs\n    );\n  });\n  let revalidatingFetchers = [];\n  fetchLoadMatches.forEach((f, key) => {\n    if (initialHydration || !matches.some((m) => m.route.id === f.routeId) || fetchersQueuedForDeletion.has(key)) {\n      return;\n    }\n    let fetcher = state.fetchers.get(key);\n    let isMidInitialLoad = fetcher && fetcher.state !== \"idle\" && fetcher.data === void 0;\n    let fetcherMatches = matchRoutes(routesToUse, f.path, basename);\n    if (!fetcherMatches) {\n      if (hasPatchRoutesOnNavigation && isMidInitialLoad) {\n        return;\n      }\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: null,\n        match: null,\n        request: null,\n        controller: null\n      });\n      return;\n    }\n    if (fetchRedirectIds.has(key)) {\n      return;\n    }\n    let fetcherMatch = getTargetMatch(fetcherMatches, f.path);\n    let fetchController = new AbortController();\n    let fetchRequest = createClientSideRequest(\n      history,\n      f.path,\n      fetchController.signal\n    );\n    let fetcherDsMatches = null;\n    if (cancelledFetcherLoads.has(key)) {\n      cancelledFetcherLoads.delete(key);\n      fetcherDsMatches = getTargetedDataStrategyMatches(\n        mapRouteProperties2,\n        manifest,\n        fetchRequest,\n        fetcherMatches,\n        fetcherMatch,\n        lazyRoutePropertiesToSkip,\n        scopedContext\n      );\n    } else if (isMidInitialLoad) {\n      if (isRevalidationRequired) {\n        fetcherDsMatches = getTargetedDataStrategyMatches(\n          mapRouteProperties2,\n          manifest,\n          fetchRequest,\n          fetcherMatches,\n          fetcherMatch,\n          lazyRoutePropertiesToSkip,\n          scopedContext\n        );\n      }\n    } else {\n      let shouldRevalidateArgs = {\n        ...baseShouldRevalidateArgs,\n        defaultShouldRevalidate: shouldSkipRevalidation ? false : isRevalidationRequired\n      };\n      if (shouldRevalidateLoader(fetcherMatch, shouldRevalidateArgs)) {\n        fetcherDsMatches = getTargetedDataStrategyMatches(\n          mapRouteProperties2,\n          manifest,\n          fetchRequest,\n          fetcherMatches,\n          fetcherMatch,\n          lazyRoutePropertiesToSkip,\n          scopedContext,\n          shouldRevalidateArgs\n        );\n      }\n    }\n    if (fetcherDsMatches) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: fetcherDsMatches,\n        match: fetcherMatch,\n        request: fetchRequest,\n        controller: fetchController\n      });\n    }\n  });\n  return { dsMatches, revalidatingFetchers };\n}\nfunction routeHasLoaderOrMiddleware(route) {\n  return route.loader != null || route.middleware != null && route.middleware.length > 0;\n}\nfunction shouldLoadRouteOnHydration(route, loaderData, errors) {\n  if (route.lazy) {\n    return true;\n  }\n  if (!routeHasLoaderOrMiddleware(route)) {\n    return false;\n  }\n  let hasData = loaderData != null && route.id in loaderData;\n  let hasError = errors != null && errors[route.id] !== void 0;\n  if (!hasData && hasError) {\n    return false;\n  }\n  if (typeof route.loader === \"function\" && route.loader.hydrate === true) {\n    return true;\n  }\n  return !hasData && !hasError;\n}\nfunction isNewLoader(currentLoaderData, currentMatch, match) {\n  let isNew = (\n    // [a] -> [a, b]\n    !currentMatch || // [a, b] -> [a, c]\n    match.route.id !== currentMatch.route.id\n  );\n  let isMissingData = !currentLoaderData.hasOwnProperty(match.route.id);\n  return isNew || isMissingData;\n}\nfunction isNewRouteInstance(currentMatch, match) {\n  let currentPath = currentMatch.route.path;\n  return (\n    // param change for this match, /users/123 -> /users/456\n    currentMatch.pathname !== match.pathname || // splat param changed, which is not present in match.path\n    // e.g. /files/images/avatar.jpg -> files/finances.xls\n    currentPath != null && currentPath.endsWith(\"*\") && currentMatch.params[\"*\"] !== match.params[\"*\"]\n  );\n}\nfunction shouldRevalidateLoader(loaderMatch, arg) {\n  if (loaderMatch.route.shouldRevalidate) {\n    let routeChoice = loaderMatch.route.shouldRevalidate(arg);\n    if (typeof routeChoice === \"boolean\") {\n      return routeChoice;\n    }\n  }\n  return arg.defaultShouldRevalidate;\n}\nfunction patchRoutesImpl(routeId, children, routesToUse, manifest, mapRouteProperties2, allowElementMutations) {\n  let childrenToPatch;\n  if (routeId) {\n    let route = manifest[routeId];\n    invariant(\n      route,\n      `No route found to patch children into: routeId = ${routeId}`\n    );\n    if (!route.children) {\n      route.children = [];\n    }\n    childrenToPatch = route.children;\n  } else {\n    childrenToPatch = routesToUse;\n  }\n  let uniqueChildren = [];\n  let existingChildren = [];\n  children.forEach((newRoute) => {\n    let existingRoute = childrenToPatch.find(\n      (existingRoute2) => isSameRoute(newRoute, existingRoute2)\n    );\n    if (existingRoute) {\n      existingChildren.push({ existingRoute, newRoute });\n    } else {\n      uniqueChildren.push(newRoute);\n    }\n  });\n  if (uniqueChildren.length > 0) {\n    let newRoutes = convertRoutesToDataRoutes(\n      uniqueChildren,\n      mapRouteProperties2,\n      [routeId || \"_\", \"patch\", String(childrenToPatch?.length || \"0\")],\n      manifest\n    );\n    childrenToPatch.push(...newRoutes);\n  }\n  if (allowElementMutations && existingChildren.length > 0) {\n    for (let i = 0; i < existingChildren.length; i++) {\n      let { existingRoute, newRoute } = existingChildren[i];\n      let existingRouteTyped = existingRoute;\n      let [newRouteTyped] = convertRoutesToDataRoutes(\n        [newRoute],\n        mapRouteProperties2,\n        [],\n        // Doesn't matter for mutated routes since they already have an id\n        {},\n        // Don't touch the manifest here since we're updating in place\n        true\n      );\n      Object.assign(existingRouteTyped, {\n        element: newRouteTyped.element ? newRouteTyped.element : existingRouteTyped.element,\n        errorElement: newRouteTyped.errorElement ? newRouteTyped.errorElement : existingRouteTyped.errorElement,\n        hydrateFallbackElement: newRouteTyped.hydrateFallbackElement ? newRouteTyped.hydrateFallbackElement : existingRouteTyped.hydrateFallbackElement\n      });\n    }\n  }\n}\nfunction isSameRoute(newRoute, existingRoute) {\n  if (\"id\" in newRoute && \"id\" in existingRoute && newRoute.id === existingRoute.id) {\n    return true;\n  }\n  if (!(newRoute.index === existingRoute.index && newRoute.path === existingRoute.path && newRoute.caseSensitive === existingRoute.caseSensitive)) {\n    return false;\n  }\n  if ((!newRoute.children || newRoute.children.length === 0) && (!existingRoute.children || existingRoute.children.length === 0)) {\n    return true;\n  }\n  return newRoute.children.every(\n    (aChild, i) => existingRoute.children?.some((bChild) => isSameRoute(aChild, bChild))\n  );\n}\nvar lazyRoutePropertyCache = /* @__PURE__ */ new WeakMap();\nvar loadLazyRouteProperty = ({\n  key,\n  route,\n  manifest,\n  mapRouteProperties: mapRouteProperties2\n}) => {\n  let routeToUpdate = manifest[route.id];\n  invariant(routeToUpdate, \"No route found in manifest\");\n  if (!routeToUpdate.lazy || typeof routeToUpdate.lazy !== \"object\") {\n    return;\n  }\n  let lazyFn = routeToUpdate.lazy[key];\n  if (!lazyFn) {\n    return;\n  }\n  let cache = lazyRoutePropertyCache.get(routeToUpdate);\n  if (!cache) {\n    cache = {};\n    lazyRoutePropertyCache.set(routeToUpdate, cache);\n  }\n  let cachedPromise = cache[key];\n  if (cachedPromise) {\n    return cachedPromise;\n  }\n  let propertyPromise = (async () => {\n    let isUnsupported = isUnsupportedLazyRouteObjectKey(key);\n    let staticRouteValue = routeToUpdate[key];\n    let isStaticallyDefined = staticRouteValue !== void 0 && key !== \"hasErrorBoundary\";\n    if (isUnsupported) {\n      warning(\n        !isUnsupported,\n        \"Route property \" + key + \" is not a supported lazy route property. This property will be ignored.\"\n      );\n      cache[key] = Promise.resolve();\n    } else if (isStaticallyDefined) {\n      warning(\n        false,\n        `Route \"${routeToUpdate.id}\" has a static property \"${key}\" defined. The lazy property will be ignored.`\n      );\n    } else {\n      let value = await lazyFn();\n      if (value != null) {\n        Object.assign(routeToUpdate, { [key]: value });\n        Object.assign(routeToUpdate, mapRouteProperties2(routeToUpdate));\n      }\n    }\n    if (typeof routeToUpdate.lazy === \"object\") {\n      routeToUpdate.lazy[key] = void 0;\n      if (Object.values(routeToUpdate.lazy).every((value) => value === void 0)) {\n        routeToUpdate.lazy = void 0;\n      }\n    }\n  })();\n  cache[key] = propertyPromise;\n  return propertyPromise;\n};\nvar lazyRouteFunctionCache = /* @__PURE__ */ new WeakMap();\nfunction loadLazyRoute(route, type, manifest, mapRouteProperties2, lazyRoutePropertiesToSkip) {\n  let routeToUpdate = manifest[route.id];\n  invariant(routeToUpdate, \"No route found in manifest\");\n  if (!route.lazy) {\n    return {\n      lazyRoutePromise: void 0,\n      lazyHandlerPromise: void 0\n    };\n  }\n  if (typeof route.lazy === \"function\") {\n    let cachedPromise = lazyRouteFunctionCache.get(routeToUpdate);\n    if (cachedPromise) {\n      return {\n        lazyRoutePromise: cachedPromise,\n        lazyHandlerPromise: cachedPromise\n      };\n    }\n    let lazyRoutePromise2 = (async () => {\n      invariant(\n        typeof route.lazy === \"function\",\n        \"No lazy route function found\"\n      );\n      let lazyRoute = await route.lazy();\n      let routeUpdates = {};\n      for (let lazyRouteProperty in lazyRoute) {\n        let lazyValue = lazyRoute[lazyRouteProperty];\n        if (lazyValue === void 0) {\n          continue;\n        }\n        let isUnsupported = isUnsupportedLazyRouteFunctionKey(lazyRouteProperty);\n        let staticRouteValue = routeToUpdate[lazyRouteProperty];\n        let isStaticallyDefined = staticRouteValue !== void 0 && // This property isn't static since it should always be updated based\n        // on the route updates\n        lazyRouteProperty !== \"hasErrorBoundary\";\n        if (isUnsupported) {\n          warning(\n            !isUnsupported,\n            \"Route property \" + lazyRouteProperty + \" is not a supported property to be returned from a lazy route function. This property will be ignored.\"\n          );\n        } else if (isStaticallyDefined) {\n          warning(\n            !isStaticallyDefined,\n            `Route \"${routeToUpdate.id}\" has a static property \"${lazyRouteProperty}\" defined but its lazy function is also returning a value for this property. The lazy route property \"${lazyRouteProperty}\" will be ignored.`\n          );\n        } else {\n          routeUpdates[lazyRouteProperty] = lazyValue;\n        }\n      }\n      Object.assign(routeToUpdate, routeUpdates);\n      Object.assign(routeToUpdate, {\n        // To keep things framework agnostic, we use the provided `mapRouteProperties`\n        // function to set the framework-aware properties (`element`/`hasErrorBoundary`)\n        // since the logic will differ between frameworks.\n        ...mapRouteProperties2(routeToUpdate),\n        lazy: void 0\n      });\n    })();\n    lazyRouteFunctionCache.set(routeToUpdate, lazyRoutePromise2);\n    lazyRoutePromise2.catch(() => {\n    });\n    return {\n      lazyRoutePromise: lazyRoutePromise2,\n      lazyHandlerPromise: lazyRoutePromise2\n    };\n  }\n  let lazyKeys = Object.keys(route.lazy);\n  let lazyPropertyPromises = [];\n  let lazyHandlerPromise = void 0;\n  for (let key of lazyKeys) {\n    if (lazyRoutePropertiesToSkip && lazyRoutePropertiesToSkip.includes(key)) {\n      continue;\n    }\n    let promise = loadLazyRouteProperty({\n      key,\n      route,\n      manifest,\n      mapRouteProperties: mapRouteProperties2\n    });\n    if (promise) {\n      lazyPropertyPromises.push(promise);\n      if (key === type) {\n        lazyHandlerPromise = promise;\n      }\n    }\n  }\n  let lazyRoutePromise = lazyPropertyPromises.length > 0 ? Promise.all(lazyPropertyPromises).then(() => {\n  }) : void 0;\n  lazyRoutePromise?.catch(() => {\n  });\n  lazyHandlerPromise?.catch(() => {\n  });\n  return {\n    lazyRoutePromise,\n    lazyHandlerPromise\n  };\n}\nfunction isNonNullable(value) {\n  return value !== void 0;\n}\nfunction loadLazyMiddlewareForMatches(matches, manifest, mapRouteProperties2) {\n  let promises = matches.map(({ route }) => {\n    if (typeof route.lazy !== \"object\" || !route.lazy.middleware) {\n      return void 0;\n    }\n    return loadLazyRouteProperty({\n      key: \"middleware\",\n      route,\n      manifest,\n      mapRouteProperties: mapRouteProperties2\n    });\n  }).filter(isNonNullable);\n  return promises.length > 0 ? Promise.all(promises) : void 0;\n}\nasync function defaultDataStrategy(args) {\n  let matchesToLoad = args.matches.filter((m) => m.shouldLoad);\n  let keyedResults = {};\n  let results = await Promise.all(matchesToLoad.map((m) => m.resolve()));\n  results.forEach((result, i) => {\n    keyedResults[matchesToLoad[i].route.id] = result;\n  });\n  return keyedResults;\n}\nasync function defaultDataStrategyWithMiddleware(args) {\n  if (!args.matches.some((m) => m.route.middleware)) {\n    return defaultDataStrategy(args);\n  }\n  return runClientMiddlewarePipeline(args, () => defaultDataStrategy(args));\n}\nfunction runServerMiddlewarePipeline(args, handler, errorHandler) {\n  return runMiddlewarePipeline(\n    args,\n    handler,\n    processResult,\n    isResponse,\n    errorHandler\n  );\n  function processResult(result) {\n    return isDataWithResponseInit(result) ? dataWithResponseInitToResponse(result) : result;\n  }\n}\nfunction runClientMiddlewarePipeline(args, handler) {\n  return runMiddlewarePipeline(\n    args,\n    handler,\n    (r) => r,\n    // No post-processing needed on the client\n    isDataStrategyResults,\n    errorHandler\n  );\n  function errorHandler(error, routeId, nextResult) {\n    if (nextResult) {\n      return Promise.resolve(\n        Object.assign(nextResult.value, {\n          [routeId]: { type: \"error\", result: error }\n        })\n      );\n    } else {\n      let { matches } = args;\n      let maxBoundaryIdx = Math.min(\n        // Throwing route\n        Math.max(\n          matches.findIndex((m) => m.route.id === routeId),\n          0\n        ),\n        // or the shallowest route that needs to load data\n        Math.max(\n          matches.findIndex((m) => m.unstable_shouldCallHandler()),\n          0\n        )\n      );\n      let boundaryRouteId = findNearestBoundary(\n        matches,\n        matches[maxBoundaryIdx].route.id\n      ).route.id;\n      return Promise.resolve({\n        [boundaryRouteId]: { type: \"error\", result: error }\n      });\n    }\n  }\n}\nasync function runMiddlewarePipeline(args, handler, processResult, isResult, errorHandler) {\n  let { matches, request, params, context } = args;\n  let tuples = matches.flatMap(\n    (m) => m.route.middleware ? m.route.middleware.map((fn) => [m.route.id, fn]) : []\n  );\n  let result = await callRouteMiddleware(\n    { request, params, context },\n    tuples,\n    handler,\n    processResult,\n    isResult,\n    errorHandler\n  );\n  return result;\n}\nasync function callRouteMiddleware(args, middlewares, handler, processResult, isResult, errorHandler, idx = 0) {\n  let { request } = args;\n  if (request.signal.aborted) {\n    throw request.signal.reason ?? new Error(`Request aborted: ${request.method} ${request.url}`);\n  }\n  let tuple = middlewares[idx];\n  if (!tuple) {\n    let result = await handler();\n    return result;\n  }\n  let [routeId, middleware] = tuple;\n  let nextResult;\n  let next = async () => {\n    if (nextResult) {\n      throw new Error(\"You may only call `next()` once per middleware\");\n    }\n    try {\n      let result = await callRouteMiddleware(\n        args,\n        middlewares,\n        handler,\n        processResult,\n        isResult,\n        errorHandler,\n        idx + 1\n      );\n      nextResult = { value: result };\n      return nextResult.value;\n    } catch (error) {\n      nextResult = { value: await errorHandler(error, routeId, nextResult) };\n      return nextResult.value;\n    }\n  };\n  try {\n    let value = await middleware(args, next);\n    let result = value != null ? processResult(value) : void 0;\n    if (isResult(result)) {\n      return result;\n    } else if (nextResult) {\n      return result ?? nextResult.value;\n    } else {\n      nextResult = { value: await next() };\n      return nextResult.value;\n    }\n  } catch (error) {\n    let response = await errorHandler(error, routeId, nextResult);\n    return response;\n  }\n}\nfunction getDataStrategyMatchLazyPromises(mapRouteProperties2, manifest, request, match, lazyRoutePropertiesToSkip) {\n  let lazyMiddlewarePromise = loadLazyRouteProperty({\n    key: \"middleware\",\n    route: match.route,\n    manifest,\n    mapRouteProperties: mapRouteProperties2\n  });\n  let lazyRoutePromises = loadLazyRoute(\n    match.route,\n    isMutationMethod(request.method) ? \"action\" : \"loader\",\n    manifest,\n    mapRouteProperties2,\n    lazyRoutePropertiesToSkip\n  );\n  return {\n    middleware: lazyMiddlewarePromise,\n    route: lazyRoutePromises.lazyRoutePromise,\n    handler: lazyRoutePromises.lazyHandlerPromise\n  };\n}\nfunction getDataStrategyMatch(mapRouteProperties2, manifest, request, match, lazyRoutePropertiesToSkip, scopedContext, shouldLoad, unstable_shouldRevalidateArgs = null) {\n  let isUsingNewApi = false;\n  let _lazyPromises = getDataStrategyMatchLazyPromises(\n    mapRouteProperties2,\n    manifest,\n    request,\n    match,\n    lazyRoutePropertiesToSkip\n  );\n  return {\n    ...match,\n    _lazyPromises,\n    shouldLoad,\n    unstable_shouldRevalidateArgs,\n    unstable_shouldCallHandler(defaultShouldRevalidate) {\n      isUsingNewApi = true;\n      if (!unstable_shouldRevalidateArgs) {\n        return shouldLoad;\n      }\n      if (typeof defaultShouldRevalidate === \"boolean\") {\n        return shouldRevalidateLoader(match, {\n          ...unstable_shouldRevalidateArgs,\n          defaultShouldRevalidate\n        });\n      }\n      return shouldRevalidateLoader(match, unstable_shouldRevalidateArgs);\n    },\n    resolve(handlerOverride) {\n      let { lazy, loader, middleware } = match.route;\n      let callHandler = isUsingNewApi || shouldLoad || handlerOverride && !isMutationMethod(request.method) && (lazy || loader);\n      let isMiddlewareOnlyRoute = middleware && middleware.length > 0 && !loader && !lazy;\n      if (callHandler && !isMiddlewareOnlyRoute) {\n        return callLoaderOrAction({\n          request,\n          match,\n          lazyHandlerPromise: _lazyPromises?.handler,\n          lazyRoutePromise: _lazyPromises?.route,\n          handlerOverride,\n          scopedContext\n        });\n      }\n      return Promise.resolve({ type: \"data\" /* data */, result: void 0 });\n    }\n  };\n}\nfunction getTargetedDataStrategyMatches(mapRouteProperties2, manifest, request, matches, targetMatch, lazyRoutePropertiesToSkip, scopedContext, shouldRevalidateArgs = null) {\n  return matches.map((match) => {\n    if (match.route.id !== targetMatch.route.id) {\n      return {\n        ...match,\n        shouldLoad: false,\n        unstable_shouldRevalidateArgs: shouldRevalidateArgs,\n        unstable_shouldCallHandler: () => false,\n        _lazyPromises: getDataStrategyMatchLazyPromises(\n          mapRouteProperties2,\n          manifest,\n          request,\n          match,\n          lazyRoutePropertiesToSkip\n        ),\n        resolve: () => Promise.resolve({ type: \"data\", result: void 0 })\n      };\n    }\n    return getDataStrategyMatch(\n      mapRouteProperties2,\n      manifest,\n      request,\n      match,\n      lazyRoutePropertiesToSkip,\n      scopedContext,\n      true,\n      shouldRevalidateArgs\n    );\n  });\n}\nasync function callDataStrategyImpl(dataStrategyImpl, request, matches, fetcherKey, scopedContext, isStaticHandler) {\n  if (matches.some((m) => m._lazyPromises?.middleware)) {\n    await Promise.all(matches.map((m) => m._lazyPromises?.middleware));\n  }\n  let dataStrategyArgs = {\n    request,\n    params: matches[0].params,\n    context: scopedContext,\n    matches\n  };\n  let runClientMiddleware = isStaticHandler ? () => {\n    throw new Error(\n      \"You cannot call `runClientMiddleware()` from a static handler `dataStrategy`. Middleware is run outside of `dataStrategy` during SSR in order to bubble up the Response.  You can enable middleware via the `respond` API in `query`/`queryRoute`\"\n    );\n  } : (cb) => {\n    let typedDataStrategyArgs = dataStrategyArgs;\n    return runClientMiddlewarePipeline(typedDataStrategyArgs, () => {\n      return cb({\n        ...typedDataStrategyArgs,\n        fetcherKey,\n        runClientMiddleware: () => {\n          throw new Error(\n            \"Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler\"\n          );\n        }\n      });\n    });\n  };\n  let results = await dataStrategyImpl({\n    ...dataStrategyArgs,\n    fetcherKey,\n    runClientMiddleware\n  });\n  try {\n    await Promise.all(\n      matches.flatMap((m) => [\n        m._lazyPromises?.handler,\n        m._lazyPromises?.route\n      ])\n    );\n  } catch (e) {\n  }\n  return results;\n}\nasync function callLoaderOrAction({\n  request,\n  match,\n  lazyHandlerPromise,\n  lazyRoutePromise,\n  handlerOverride,\n  scopedContext\n}) {\n  let result;\n  let onReject;\n  let isAction = isMutationMethod(request.method);\n  let type = isAction ? \"action\" : \"loader\";\n  let runHandler = (handler) => {\n    let reject;\n    let abortPromise = new Promise((_, r) => reject = r);\n    onReject = () => reject();\n    request.signal.addEventListener(\"abort\", onReject);\n    let actualHandler = (ctx) => {\n      if (typeof handler !== \"function\") {\n        return Promise.reject(\n          new Error(\n            `You cannot call the handler for a route which defines a boolean \"${type}\" [routeId: ${match.route.id}]`\n          )\n        );\n      }\n      return handler(\n        {\n          request,\n          params: match.params,\n          context: scopedContext\n        },\n        ...ctx !== void 0 ? [ctx] : []\n      );\n    };\n    let handlerPromise = (async () => {\n      try {\n        let val = await (handlerOverride ? handlerOverride((ctx) => actualHandler(ctx)) : actualHandler());\n        return { type: \"data\", result: val };\n      } catch (e) {\n        return { type: \"error\", result: e };\n      }\n    })();\n    return Promise.race([handlerPromise, abortPromise]);\n  };\n  try {\n    let handler = isAction ? match.route.action : match.route.loader;\n    if (lazyHandlerPromise || lazyRoutePromise) {\n      if (handler) {\n        let handlerError;\n        let [value] = await Promise.all([\n          // If the handler throws, don't let it immediately bubble out,\n          // since we need to let the lazy() execution finish so we know if this\n          // route has a boundary that can handle the error\n          runHandler(handler).catch((e) => {\n            handlerError = e;\n          }),\n          // Ensure all lazy route promises are resolved before continuing\n          lazyHandlerPromise,\n          lazyRoutePromise\n        ]);\n        if (handlerError !== void 0) {\n          throw handlerError;\n        }\n        result = value;\n      } else {\n        await lazyHandlerPromise;\n        let handler2 = isAction ? match.route.action : match.route.loader;\n        if (handler2) {\n          [result] = await Promise.all([runHandler(handler2), lazyRoutePromise]);\n        } else if (type === \"action\") {\n          let url = new URL(request.url);\n          let pathname = url.pathname + url.search;\n          throw getInternalRouterError(405, {\n            method: request.method,\n            pathname,\n            routeId: match.route.id\n          });\n        } else {\n          return { type: \"data\" /* data */, result: void 0 };\n        }\n      }\n    } else if (!handler) {\n      let url = new URL(request.url);\n      let pathname = url.pathname + url.search;\n      throw getInternalRouterError(404, {\n        pathname\n      });\n    } else {\n      result = await runHandler(handler);\n    }\n  } catch (e) {\n    return { type: \"error\" /* error */, result: e };\n  } finally {\n    if (onReject) {\n      request.signal.removeEventListener(\"abort\", onReject);\n    }\n  }\n  return result;\n}\nasync function parseResponseBody(response) {\n  let contentType = response.headers.get(\"Content-Type\");\n  if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n    return response.body == null ? null : response.json();\n  }\n  return response.text();\n}\nasync function convertDataStrategyResultToDataResult(dataStrategyResult) {\n  let { result, type } = dataStrategyResult;\n  if (isResponse(result)) {\n    let data2;\n    try {\n      data2 = await parseResponseBody(result);\n    } catch (e) {\n      return { type: \"error\" /* error */, error: e };\n    }\n    if (type === \"error\" /* error */) {\n      return {\n        type: \"error\" /* error */,\n        error: new ErrorResponseImpl(result.status, result.statusText, data2),\n        statusCode: result.status,\n        headers: result.headers\n      };\n    }\n    return {\n      type: \"data\" /* data */,\n      data: data2,\n      statusCode: result.status,\n      headers: result.headers\n    };\n  }\n  if (type === \"error\" /* error */) {\n    if (isDataWithResponseInit(result)) {\n      if (result.data instanceof Error) {\n        return {\n          type: \"error\" /* error */,\n          error: result.data,\n          statusCode: result.init?.status,\n          headers: result.init?.headers ? new Headers(result.init.headers) : void 0\n        };\n      }\n      return {\n        type: \"error\" /* error */,\n        error: new ErrorResponseImpl(\n          result.init?.status || 500,\n          void 0,\n          result.data\n        ),\n        statusCode: isRouteErrorResponse(result) ? result.status : void 0,\n        headers: result.init?.headers ? new Headers(result.init.headers) : void 0\n      };\n    }\n    return {\n      type: \"error\" /* error */,\n      error: result,\n      statusCode: isRouteErrorResponse(result) ? result.status : void 0\n    };\n  }\n  if (isDataWithResponseInit(result)) {\n    return {\n      type: \"data\" /* data */,\n      data: result.data,\n      statusCode: result.init?.status,\n      headers: result.init?.headers ? new Headers(result.init.headers) : void 0\n    };\n  }\n  return { type: \"data\" /* data */, data: result };\n}\nfunction normalizeRelativeRoutingRedirectResponse(response, request, routeId, matches, basename) {\n  let location = response.headers.get(\"Location\");\n  invariant(\n    location,\n    \"Redirects returned/thrown from loaders/actions must have a Location header\"\n  );\n  if (!isAbsoluteUrl(location)) {\n    let trimmedMatches = matches.slice(\n      0,\n      matches.findIndex((m) => m.route.id === routeId) + 1\n    );\n    location = normalizeTo(\n      new URL(request.url),\n      trimmedMatches,\n      basename,\n      location\n    );\n    response.headers.set(\"Location\", location);\n  }\n  return response;\n}\nfunction normalizeRedirectLocation(location, currentUrl, basename) {\n  if (isAbsoluteUrl(location)) {\n    let normalizedLocation = location;\n    let url = normalizedLocation.startsWith(\"//\") ? new URL(currentUrl.protocol + normalizedLocation) : new URL(normalizedLocation);\n    let isSameBasename = stripBasename(url.pathname, basename) != null;\n    if (url.origin === currentUrl.origin && isSameBasename) {\n      return url.pathname + url.search + url.hash;\n    }\n  }\n  return location;\n}\nfunction createClientSideRequest(history, location, signal, submission) {\n  let url = history.createURL(stripHashFromPath(location)).toString();\n  let init = { signal };\n  if (submission && isMutationMethod(submission.formMethod)) {\n    let { formMethod, formEncType } = submission;\n    init.method = formMethod.toUpperCase();\n    if (formEncType === \"application/json\") {\n      init.headers = new Headers({ \"Content-Type\": formEncType });\n      init.body = JSON.stringify(submission.json);\n    } else if (formEncType === \"text/plain\") {\n      init.body = submission.text;\n    } else if (formEncType === \"application/x-www-form-urlencoded\" && submission.formData) {\n      init.body = convertFormDataToSearchParams(submission.formData);\n    } else {\n      init.body = submission.formData;\n    }\n  }\n  return new Request(url, init);\n}\nfunction convertFormDataToSearchParams(formData) {\n  let searchParams = new URLSearchParams();\n  for (let [key, value] of formData.entries()) {\n    searchParams.append(key, typeof value === \"string\" ? value : value.name);\n  }\n  return searchParams;\n}\nfunction convertSearchParamsToFormData(searchParams) {\n  let formData = new FormData();\n  for (let [key, value] of searchParams.entries()) {\n    formData.append(key, value);\n  }\n  return formData;\n}\nfunction processRouteLoaderData(matches, results, pendingActionResult, isStaticHandler = false, skipLoaderErrorBubbling = false) {\n  let loaderData = {};\n  let errors = null;\n  let statusCode;\n  let foundError = false;\n  let loaderHeaders = {};\n  let pendingError = pendingActionResult && isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : void 0;\n  matches.forEach((match) => {\n    if (!(match.route.id in results)) {\n      return;\n    }\n    let id = match.route.id;\n    let result = results[id];\n    invariant(\n      !isRedirectResult(result),\n      \"Cannot handle redirect results in processLoaderData\"\n    );\n    if (isErrorResult(result)) {\n      let error = result.error;\n      if (pendingError !== void 0) {\n        error = pendingError;\n        pendingError = void 0;\n      }\n      errors = errors || {};\n      if (skipLoaderErrorBubbling) {\n        errors[id] = error;\n      } else {\n        let boundaryMatch = findNearestBoundary(matches, id);\n        if (errors[boundaryMatch.route.id] == null) {\n          errors[boundaryMatch.route.id] = error;\n        }\n      }\n      if (!isStaticHandler) {\n        loaderData[id] = ResetLoaderDataSymbol;\n      }\n      if (!foundError) {\n        foundError = true;\n        statusCode = isRouteErrorResponse(result.error) ? result.error.status : 500;\n      }\n      if (result.headers) {\n        loaderHeaders[id] = result.headers;\n      }\n    } else {\n      loaderData[id] = result.data;\n      if (result.statusCode && result.statusCode !== 200 && !foundError) {\n        statusCode = result.statusCode;\n      }\n      if (result.headers) {\n        loaderHeaders[id] = result.headers;\n      }\n    }\n  });\n  if (pendingError !== void 0 && pendingActionResult) {\n    errors = { [pendingActionResult[0]]: pendingError };\n    if (pendingActionResult[2]) {\n      loaderData[pendingActionResult[2]] = void 0;\n    }\n  }\n  return {\n    loaderData,\n    errors,\n    statusCode: statusCode || 200,\n    loaderHeaders\n  };\n}\nfunction processLoaderData(state, matches, results, pendingActionResult, revalidatingFetchers, fetcherResults) {\n  let { loaderData, errors } = processRouteLoaderData(\n    matches,\n    results,\n    pendingActionResult\n  );\n  revalidatingFetchers.filter((f) => !f.matches || f.matches.some((m) => m.shouldLoad)).forEach((rf) => {\n    let { key, match, controller } = rf;\n    if (controller && controller.signal.aborted) {\n      return;\n    }\n    let result = fetcherResults[key];\n    invariant(result, \"Did not find corresponding fetcher result\");\n    if (isErrorResult(result)) {\n      let boundaryMatch = findNearestBoundary(state.matches, match?.route.id);\n      if (!(errors && errors[boundaryMatch.route.id])) {\n        errors = {\n          ...errors,\n          [boundaryMatch.route.id]: result.error\n        };\n      }\n      state.fetchers.delete(key);\n    } else if (isRedirectResult(result)) {\n      invariant(false, \"Unhandled fetcher revalidation redirect\");\n    } else {\n      let doneFetcher = getDoneFetcher(result.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  });\n  return { loaderData, errors };\n}\nfunction mergeLoaderData(loaderData, newLoaderData, matches, errors) {\n  let mergedLoaderData = Object.entries(newLoaderData).filter(([, v]) => v !== ResetLoaderDataSymbol).reduce((merged, [k, v]) => {\n    merged[k] = v;\n    return merged;\n  }, {});\n  for (let match of matches) {\n    let id = match.route.id;\n    if (!newLoaderData.hasOwnProperty(id) && loaderData.hasOwnProperty(id) && match.route.loader) {\n      mergedLoaderData[id] = loaderData[id];\n    }\n    if (errors && errors.hasOwnProperty(id)) {\n      break;\n    }\n  }\n  return mergedLoaderData;\n}\nfunction getActionDataForCommit(pendingActionResult) {\n  if (!pendingActionResult) {\n    return {};\n  }\n  return isErrorResult(pendingActionResult[1]) ? {\n    // Clear out prior actionData on errors\n    actionData: {}\n  } : {\n    actionData: {\n      [pendingActionResult[0]]: pendingActionResult[1].data\n    }\n  };\n}\nfunction findNearestBoundary(matches, routeId) {\n  let eligibleMatches = routeId ? matches.slice(0, matches.findIndex((m) => m.route.id === routeId) + 1) : [...matches];\n  return eligibleMatches.reverse().find((m) => m.route.hasErrorBoundary === true) || matches[0];\n}\nfunction getShortCircuitMatches(routes) {\n  let route = routes.length === 1 ? routes[0] : routes.find((r) => r.index || !r.path || r.path === \"/\") || {\n    id: `__shim-error-route__`\n  };\n  return {\n    matches: [\n      {\n        params: {},\n        pathname: \"\",\n        pathnameBase: \"\",\n        route\n      }\n    ],\n    route\n  };\n}\nfunction getInternalRouterError(status, {\n  pathname,\n  routeId,\n  method,\n  type,\n  message\n} = {}) {\n  let statusText = \"Unknown Server Error\";\n  let errorMessage = \"Unknown @remix-run/router error\";\n  if (status === 400) {\n    statusText = \"Bad Request\";\n    if (method && pathname && routeId) {\n      errorMessage = `You made a ${method} request to \"${pathname}\" but did not provide a \\`loader\\` for route \"${routeId}\", so there is no way to handle the request.`;\n    } else if (type === \"invalid-body\") {\n      errorMessage = \"Unable to encode submission body\";\n    }\n  } else if (status === 403) {\n    statusText = \"Forbidden\";\n    errorMessage = `Route \"${routeId}\" does not match URL \"${pathname}\"`;\n  } else if (status === 404) {\n    statusText = \"Not Found\";\n    errorMessage = `No route matches URL \"${pathname}\"`;\n  } else if (status === 405) {\n    statusText = \"Method Not Allowed\";\n    if (method && pathname && routeId) {\n      errorMessage = `You made a ${method.toUpperCase()} request to \"${pathname}\" but did not provide an \\`action\\` for route \"${routeId}\", so there is no way to handle the request.`;\n    } else if (method) {\n      errorMessage = `Invalid request method \"${method.toUpperCase()}\"`;\n    }\n  }\n  return new ErrorResponseImpl(\n    status || 500,\n    statusText,\n    new Error(errorMessage),\n    true\n  );\n}\nfunction findRedirect(results) {\n  let entries = Object.entries(results);\n  for (let i = entries.length - 1; i >= 0; i--) {\n    let [key, result] = entries[i];\n    if (isRedirectResult(result)) {\n      return { key, result };\n    }\n  }\n}\nfunction stripHashFromPath(path) {\n  let parsedPath = typeof path === \"string\" ? parsePath(path) : path;\n  return createPath({ ...parsedPath, hash: \"\" });\n}\nfunction isHashChangeOnly(a, b) {\n  if (a.pathname !== b.pathname || a.search !== b.search) {\n    return false;\n  }\n  if (a.hash === \"\") {\n    return b.hash !== \"\";\n  } else if (a.hash === b.hash) {\n    return true;\n  } else if (b.hash !== \"\") {\n    return true;\n  }\n  return false;\n}\nfunction dataWithResponseInitToResponse(data2) {\n  return Response.json(data2.data, data2.init ?? void 0);\n}\nfunction dataWithResponseInitToErrorResponse(data2) {\n  return new ErrorResponseImpl(\n    data2.init?.status ?? 500,\n    data2.init?.statusText ?? \"Internal Server Error\",\n    data2.data\n  );\n}\nfunction isDataStrategyResults(result) {\n  return result != null && typeof result === \"object\" && Object.entries(result).every(\n    ([key, value]) => typeof key === \"string\" && isDataStrategyResult(value)\n  );\n}\nfunction isDataStrategyResult(result) {\n  return result != null && typeof result === \"object\" && \"type\" in result && \"result\" in result && (result.type === \"data\" /* data */ || result.type === \"error\" /* error */);\n}\nfunction isRedirectDataStrategyResult(result) {\n  return isResponse(result.result) && redirectStatusCodes.has(result.result.status);\n}\nfunction isErrorResult(result) {\n  return result.type === \"error\" /* error */;\n}\nfunction isRedirectResult(result) {\n  return (result && result.type) === \"redirect\" /* redirect */;\n}\nfunction isDataWithResponseInit(value) {\n  return typeof value === \"object\" && value != null && \"type\" in value && \"data\" in value && \"init\" in value && value.type === \"DataWithResponseInit\";\n}\nfunction isResponse(value) {\n  return value != null && typeof value.status === \"number\" && typeof value.statusText === \"string\" && typeof value.headers === \"object\" && typeof value.body !== \"undefined\";\n}\nfunction isRedirectStatusCode(statusCode) {\n  return redirectStatusCodes.has(statusCode);\n}\nfunction isRedirectResponse(result) {\n  return isResponse(result) && isRedirectStatusCode(result.status) && result.headers.has(\"Location\");\n}\nfunction isValidMethod(method) {\n  return validRequestMethods.has(method.toUpperCase());\n}\nfunction isMutationMethod(method) {\n  return validMutationMethods.has(method.toUpperCase());\n}\nfunction hasNakedIndexQuery(search) {\n  return new URLSearchParams(search).getAll(\"index\").some((v) => v === \"\");\n}\nfunction getTargetMatch(matches, location) {\n  let search = typeof location === \"string\" ? parsePath(location).search : location.search;\n  if (matches[matches.length - 1].route.index && hasNakedIndexQuery(search || \"\")) {\n    return matches[matches.length - 1];\n  }\n  let pathMatches = getPathContributingMatches(matches);\n  return pathMatches[pathMatches.length - 1];\n}\nfunction getSubmissionFromNavigation(navigation) {\n  let { formMethod, formAction, formEncType, text, formData, json } = navigation;\n  if (!formMethod || !formAction || !formEncType) {\n    return;\n  }\n  if (text != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: void 0,\n      json: void 0,\n      text\n    };\n  } else if (formData != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData,\n      json: void 0,\n      text: void 0\n    };\n  } else if (json !== void 0) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: void 0,\n      json,\n      text: void 0\n    };\n  }\n}\nfunction getLoadingNavigation(location, submission) {\n  if (submission) {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text\n    };\n    return navigation;\n  } else {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: void 0,\n      formAction: void 0,\n      formEncType: void 0,\n      formData: void 0,\n      json: void 0,\n      text: void 0\n    };\n    return navigation;\n  }\n}\nfunction getSubmittingNavigation(location, submission) {\n  let navigation = {\n    state: \"submitting\",\n    location,\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text\n  };\n  return navigation;\n}\nfunction getLoadingFetcher(submission, data2) {\n  if (submission) {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text,\n      data: data2\n    };\n    return fetcher;\n  } else {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: void 0,\n      formAction: void 0,\n      formEncType: void 0,\n      formData: void 0,\n      json: void 0,\n      text: void 0,\n      data: data2\n    };\n    return fetcher;\n  }\n}\nfunction getSubmittingFetcher(submission, existingFetcher) {\n  let fetcher = {\n    state: \"submitting\",\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text,\n    data: existingFetcher ? existingFetcher.data : void 0\n  };\n  return fetcher;\n}\nfunction getDoneFetcher(data2) {\n  let fetcher = {\n    state: \"idle\",\n    formMethod: void 0,\n    formAction: void 0,\n    formEncType: void 0,\n    formData: void 0,\n    json: void 0,\n    text: void 0,\n    data: data2\n  };\n  return fetcher;\n}\nfunction restoreAppliedTransitions(_window, transitions) {\n  try {\n    let sessionPositions = _window.sessionStorage.getItem(\n      TRANSITIONS_STORAGE_KEY\n    );\n    if (sessionPositions) {\n      let json = JSON.parse(sessionPositions);\n      for (let [k, v] of Object.entries(json || {})) {\n        if (v && Array.isArray(v)) {\n          transitions.set(k, new Set(v || []));\n        }\n      }\n    }\n  } catch (e) {\n  }\n}\nfunction persistAppliedTransitions(_window, transitions) {\n  if (transitions.size > 0) {\n    let json = {};\n    for (let [k, v] of transitions) {\n      json[k] = [...v];\n    }\n    try {\n      _window.sessionStorage.setItem(\n        TRANSITIONS_STORAGE_KEY,\n        JSON.stringify(json)\n      );\n    } catch (error) {\n      warning(\n        false,\n        `Failed to save applied view transitions in sessionStorage (${error}).`\n      );\n    }\n  }\n}\nfunction createDeferred() {\n  let resolve;\n  let reject;\n  let promise = new Promise((res, rej) => {\n    resolve = async (val) => {\n      res(val);\n      try {\n        await promise;\n      } catch (e) {\n      }\n    };\n    reject = async (error) => {\n      rej(error);\n      try {\n        await promise;\n      } catch (e) {\n      }\n    };\n  });\n  return {\n    promise,\n    //@ts-ignore\n    resolve,\n    //@ts-ignore\n    reject\n  };\n}\n\n// lib/context.ts\nimport * as React from \"react\";\nvar DataRouterContext = React.createContext(null);\nDataRouterContext.displayName = \"DataRouter\";\nvar DataRouterStateContext = React.createContext(null);\nDataRouterStateContext.displayName = \"DataRouterState\";\nvar RSCRouterContext = React.createContext(false);\nfunction useIsRSCRouterContext() {\n  return React.useContext(RSCRouterContext);\n}\nvar ViewTransitionContext = React.createContext({\n  isTransitioning: false\n});\nViewTransitionContext.displayName = \"ViewTransition\";\nvar FetchersContext = React.createContext(\n  /* @__PURE__ */ new Map()\n);\nFetchersContext.displayName = \"Fetchers\";\nvar AwaitContext = React.createContext(null);\nAwaitContext.displayName = \"Await\";\nvar AwaitContextProvider = (props) => React.createElement(AwaitContext.Provider, props);\nvar NavigationContext = React.createContext(\n  null\n);\nNavigationContext.displayName = \"Navigation\";\nvar LocationContext = React.createContext(\n  null\n);\nLocationContext.displayName = \"Location\";\nvar RouteContext = React.createContext({\n  outlet: null,\n  matches: [],\n  isDataRoute: false\n});\nRouteContext.displayName = \"Route\";\nvar RouteErrorContext = React.createContext(null);\nRouteErrorContext.displayName = \"RouteError\";\nvar ENABLE_DEV_WARNINGS = true;\n\n// lib/hooks.tsx\nimport * as React2 from \"react\";\nfunction useHref(to, { relative } = {}) {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useHref() may be used only in the context of a <Router> component.`\n  );\n  let { basename, navigator } = React2.useContext(NavigationContext);\n  let { hash, pathname, search } = useResolvedPath(to, { relative });\n  let joinedPathname = pathname;\n  if (basename !== \"/\") {\n    joinedPathname = pathname === \"/\" ? basename : joinPaths([basename, pathname]);\n  }\n  return navigator.createHref({ pathname: joinedPathname, search, hash });\n}\nfunction useInRouterContext() {\n  return React2.useContext(LocationContext) != null;\n}\nfunction useLocation() {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useLocation() may be used only in the context of a <Router> component.`\n  );\n  return React2.useContext(LocationContext).location;\n}\nfunction useNavigationType() {\n  return React2.useContext(LocationContext).navigationType;\n}\nfunction useMatch(pattern) {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useMatch() may be used only in the context of a <Router> component.`\n  );\n  let { pathname } = useLocation();\n  return React2.useMemo(\n    () => matchPath(pattern, decodePath(pathname)),\n    [pathname, pattern]\n  );\n}\nvar navigateEffectWarning = `You should call navigate() in a React.useEffect(), not when your component is first rendered.`;\nfunction useIsomorphicLayoutEffect(cb) {\n  let isStatic = React2.useContext(NavigationContext).static;\n  if (!isStatic) {\n    React2.useLayoutEffect(cb);\n  }\n}\nfunction useNavigate() {\n  let { isDataRoute } = React2.useContext(RouteContext);\n  return isDataRoute ? useNavigateStable() : useNavigateUnstable();\n}\nfunction useNavigateUnstable() {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useNavigate() may be used only in the context of a <Router> component.`\n  );\n  let dataRouterContext = React2.useContext(DataRouterContext);\n  let { basename, navigator } = React2.useContext(NavigationContext);\n  let { matches } = React2.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n  let routePathnamesJson = JSON.stringify(getResolveToMatches(matches));\n  let activeRef = React2.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React2.useCallback(\n    (to, options = {}) => {\n      warning(activeRef.current, navigateEffectWarning);\n      if (!activeRef.current) return;\n      if (typeof to === \"number\") {\n        navigator.go(to);\n        return;\n      }\n      let path = resolveTo(\n        to,\n        JSON.parse(routePathnamesJson),\n        locationPathname,\n        options.relative === \"path\"\n      );\n      if (dataRouterContext == null && basename !== \"/\") {\n        path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n      }\n      (!!options.replace ? navigator.replace : navigator.push)(\n        path,\n        options.state,\n        options\n      );\n    },\n    [\n      basename,\n      navigator,\n      routePathnamesJson,\n      locationPathname,\n      dataRouterContext\n    ]\n  );\n  return navigate;\n}\nvar OutletContext = React2.createContext(null);\nfunction useOutletContext() {\n  return React2.useContext(OutletContext);\n}\nfunction useOutlet(context) {\n  let outlet = React2.useContext(RouteContext).outlet;\n  return React2.useMemo(\n    () => outlet && /* @__PURE__ */ React2.createElement(OutletContext.Provider, { value: context }, outlet),\n    [outlet, context]\n  );\n}\nfunction useParams() {\n  let { matches } = React2.useContext(RouteContext);\n  let routeMatch = matches[matches.length - 1];\n  return routeMatch ? routeMatch.params : {};\n}\nfunction useResolvedPath(to, { relative } = {}) {\n  let { matches } = React2.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n  let routePathnamesJson = JSON.stringify(getResolveToMatches(matches));\n  return React2.useMemo(\n    () => resolveTo(\n      to,\n      JSON.parse(routePathnamesJson),\n      locationPathname,\n      relative === \"path\"\n    ),\n    [to, routePathnamesJson, locationPathname, relative]\n  );\n}\nfunction useRoutes(routes, locationArg) {\n  return useRoutesImpl(routes, locationArg);\n}\nfunction useRoutesImpl(routes, locationArg, dataRouterState, unstable_onError, future) {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useRoutes() may be used only in the context of a <Router> component.`\n  );\n  let { navigator } = React2.useContext(NavigationContext);\n  let { matches: parentMatches } = React2.useContext(RouteContext);\n  let routeMatch = parentMatches[parentMatches.length - 1];\n  let parentParams = routeMatch ? routeMatch.params : {};\n  let parentPathname = routeMatch ? routeMatch.pathname : \"/\";\n  let parentPathnameBase = routeMatch ? routeMatch.pathnameBase : \"/\";\n  let parentRoute = routeMatch && routeMatch.route;\n  if (ENABLE_DEV_WARNINGS) {\n    let parentPath = parentRoute && parentRoute.path || \"\";\n    warningOnce(\n      parentPathname,\n      !parentRoute || parentPath.endsWith(\"*\") || parentPath.endsWith(\"*?\"),\n      `You rendered descendant <Routes> (or called \\`useRoutes()\\`) at \"${parentPathname}\" (under <Route path=\"${parentPath}\">) but the parent route path has no trailing \"*\". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path=\"${parentPath}\"> to <Route path=\"${parentPath === \"/\" ? \"*\" : `${parentPath}/*`}\">.`\n    );\n  }\n  let locationFromContext = useLocation();\n  let location;\n  if (locationArg) {\n    let parsedLocationArg = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n    invariant(\n      parentPathnameBase === \"/\" || parsedLocationArg.pathname?.startsWith(parentPathnameBase),\n      `When overriding the location using \\`<Routes location>\\` or \\`useRoutes(routes, location)\\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is \"${parentPathnameBase}\" but pathname \"${parsedLocationArg.pathname}\" was given in the \\`location\\` prop.`\n    );\n    location = parsedLocationArg;\n  } else {\n    location = locationFromContext;\n  }\n  let pathname = location.pathname || \"/\";\n  let remainingPathname = pathname;\n  if (parentPathnameBase !== \"/\") {\n    let parentSegments = parentPathnameBase.replace(/^\\//, \"\").split(\"/\");\n    let segments = pathname.replace(/^\\//, \"\").split(\"/\");\n    remainingPathname = \"/\" + segments.slice(parentSegments.length).join(\"/\");\n  }\n  let matches = matchRoutes(routes, { pathname: remainingPathname });\n  if (ENABLE_DEV_WARNINGS) {\n    warning(\n      parentRoute || matches != null,\n      `No routes matched location \"${location.pathname}${location.search}${location.hash}\" `\n    );\n    warning(\n      matches == null || matches[matches.length - 1].route.element !== void 0 || matches[matches.length - 1].route.Component !== void 0 || matches[matches.length - 1].route.lazy !== void 0,\n      `Matched leaf route at location \"${location.pathname}${location.search}${location.hash}\" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an \"empty\" page.`\n    );\n  }\n  let renderedMatches = _renderMatches(\n    matches && matches.map(\n      (match) => Object.assign({}, match, {\n        params: Object.assign({}, parentParams, match.params),\n        pathname: joinPaths([\n          parentPathnameBase,\n          // Re-encode pathnames that were decoded inside matchRoutes.\n          // Pre-encode `?` and `#` ahead of `encodeLocation` because it uses\n          // `new URL()` internally and we need to prevent it from treating\n          // them as separators\n          navigator.encodeLocation ? navigator.encodeLocation(\n            match.pathname.replace(/\\?/g, \"%3F\").replace(/#/g, \"%23\")\n          ).pathname : match.pathname\n        ]),\n        pathnameBase: match.pathnameBase === \"/\" ? parentPathnameBase : joinPaths([\n          parentPathnameBase,\n          // Re-encode pathnames that were decoded inside matchRoutes\n          // Pre-encode `?` and `#` ahead of `encodeLocation` because it uses\n          // `new URL()` internally and we need to prevent it from treating\n          // them as separators\n          navigator.encodeLocation ? navigator.encodeLocation(\n            match.pathnameBase.replace(/\\?/g, \"%3F\").replace(/#/g, \"%23\")\n          ).pathname : match.pathnameBase\n        ])\n      })\n    ),\n    parentMatches,\n    dataRouterState,\n    unstable_onError,\n    future\n  );\n  if (locationArg && renderedMatches) {\n    return /* @__PURE__ */ React2.createElement(\n      LocationContext.Provider,\n      {\n        value: {\n          location: {\n            pathname: \"/\",\n            search: \"\",\n            hash: \"\",\n            state: null,\n            key: \"default\",\n            ...location\n          },\n          navigationType: \"POP\" /* Pop */\n        }\n      },\n      renderedMatches\n    );\n  }\n  return renderedMatches;\n}\nfunction DefaultErrorComponent() {\n  let error = useRouteError();\n  let message = isRouteErrorResponse(error) ? `${error.status} ${error.statusText}` : error instanceof Error ? error.message : JSON.stringify(error);\n  let stack = error instanceof Error ? error.stack : null;\n  let lightgrey = \"rgba(200,200,200, 0.5)\";\n  let preStyles = { padding: \"0.5rem\", backgroundColor: lightgrey };\n  let codeStyles = { padding: \"2px 4px\", backgroundColor: lightgrey };\n  let devInfo = null;\n  if (ENABLE_DEV_WARNINGS) {\n    console.error(\n      \"Error handled by React Router default ErrorBoundary:\",\n      error\n    );\n    devInfo = /* @__PURE__ */ React2.createElement(React2.Fragment, null, /* @__PURE__ */ React2.createElement(\"p\", null, \"\\u{1F4BF} Hey developer \\u{1F44B}\"), /* @__PURE__ */ React2.createElement(\"p\", null, \"You can provide a way better UX than this when your app throws errors by providing your own \", /* @__PURE__ */ React2.createElement(\"code\", { style: codeStyles }, \"ErrorBoundary\"), \" or\", \" \", /* @__PURE__ */ React2.createElement(\"code\", { style: codeStyles }, \"errorElement\"), \" prop on your route.\"));\n  }\n  return /* @__PURE__ */ React2.createElement(React2.Fragment, null, /* @__PURE__ */ React2.createElement(\"h2\", null, \"Unexpected Application Error!\"), /* @__PURE__ */ React2.createElement(\"h3\", { style: { fontStyle: \"italic\" } }, message), stack ? /* @__PURE__ */ React2.createElement(\"pre\", { style: preStyles }, stack) : null, devInfo);\n}\nvar defaultErrorElement = /* @__PURE__ */ React2.createElement(DefaultErrorComponent, null);\nvar RenderErrorBoundary = class extends React2.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      location: props.location,\n      revalidation: props.revalidation,\n      error: props.error\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  static getDerivedStateFromProps(props, state) {\n    if (state.location !== props.location || state.revalidation !== \"idle\" && props.revalidation === \"idle\") {\n      return {\n        error: props.error,\n        location: props.location,\n        revalidation: props.revalidation\n      };\n    }\n    return {\n      error: props.error !== void 0 ? props.error : state.error,\n      location: state.location,\n      revalidation: props.revalidation || state.revalidation\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    if (this.props.unstable_onError) {\n      this.props.unstable_onError(error, errorInfo);\n    } else {\n      console.error(\n        \"React Router caught the following error during render\",\n        error\n      );\n    }\n  }\n  render() {\n    return this.state.error !== void 0 ? /* @__PURE__ */ React2.createElement(RouteContext.Provider, { value: this.props.routeContext }, /* @__PURE__ */ React2.createElement(\n      RouteErrorContext.Provider,\n      {\n        value: this.state.error,\n        children: this.props.component\n      }\n    )) : this.props.children;\n  }\n};\nfunction RenderedRoute({ routeContext, match, children }) {\n  let dataRouterContext = React2.useContext(DataRouterContext);\n  if (dataRouterContext && dataRouterContext.static && dataRouterContext.staticContext && (match.route.errorElement || match.route.ErrorBoundary)) {\n    dataRouterContext.staticContext._deepestRenderedBoundaryId = match.route.id;\n  }\n  return /* @__PURE__ */ React2.createElement(RouteContext.Provider, { value: routeContext }, children);\n}\nfunction _renderMatches(matches, parentMatches = [], dataRouterState = null, unstable_onError = null, future = null) {\n  if (matches == null) {\n    if (!dataRouterState) {\n      return null;\n    }\n    if (dataRouterState.errors) {\n      matches = dataRouterState.matches;\n    } else if (parentMatches.length === 0 && !dataRouterState.initialized && dataRouterState.matches.length > 0) {\n      matches = dataRouterState.matches;\n    } else {\n      return null;\n    }\n  }\n  let renderedMatches = matches;\n  let errors = dataRouterState?.errors;\n  if (errors != null) {\n    let errorIndex = renderedMatches.findIndex(\n      (m) => m.route.id && errors?.[m.route.id] !== void 0\n    );\n    invariant(\n      errorIndex >= 0,\n      `Could not find a matching route for errors on route IDs: ${Object.keys(\n        errors\n      ).join(\",\")}`\n    );\n    renderedMatches = renderedMatches.slice(\n      0,\n      Math.min(renderedMatches.length, errorIndex + 1)\n    );\n  }\n  let renderFallback = false;\n  let fallbackIndex = -1;\n  if (dataRouterState) {\n    for (let i = 0; i < renderedMatches.length; i++) {\n      let match = renderedMatches[i];\n      if (match.route.HydrateFallback || match.route.hydrateFallbackElement) {\n        fallbackIndex = i;\n      }\n      if (match.route.id) {\n        let { loaderData, errors: errors2 } = dataRouterState;\n        let needsToRunLoader = match.route.loader && !loaderData.hasOwnProperty(match.route.id) && (!errors2 || errors2[match.route.id] === void 0);\n        if (match.route.lazy || needsToRunLoader) {\n          renderFallback = true;\n          if (fallbackIndex >= 0) {\n            renderedMatches = renderedMatches.slice(0, fallbackIndex + 1);\n          } else {\n            renderedMatches = [renderedMatches[0]];\n          }\n          break;\n        }\n      }\n    }\n  }\n  return renderedMatches.reduceRight(\n    (outlet, match, index) => {\n      let error;\n      let shouldRenderHydrateFallback = false;\n      let errorElement = null;\n      let hydrateFallbackElement = null;\n      if (dataRouterState) {\n        error = errors && match.route.id ? errors[match.route.id] : void 0;\n        errorElement = match.route.errorElement || defaultErrorElement;\n        if (renderFallback) {\n          if (fallbackIndex < 0 && index === 0) {\n            warningOnce(\n              \"route-fallback\",\n              false,\n              \"No `HydrateFallback` element provided to render during initial hydration\"\n            );\n            shouldRenderHydrateFallback = true;\n            hydrateFallbackElement = null;\n          } else if (fallbackIndex === index) {\n            shouldRenderHydrateFallback = true;\n            hydrateFallbackElement = match.route.hydrateFallbackElement || null;\n          }\n        }\n      }\n      let matches2 = parentMatches.concat(renderedMatches.slice(0, index + 1));\n      let getChildren = () => {\n        let children;\n        if (error) {\n          children = errorElement;\n        } else if (shouldRenderHydrateFallback) {\n          children = hydrateFallbackElement;\n        } else if (match.route.Component) {\n          children = /* @__PURE__ */ React2.createElement(match.route.Component, null);\n        } else if (match.route.element) {\n          children = match.route.element;\n        } else {\n          children = outlet;\n        }\n        return /* @__PURE__ */ React2.createElement(\n          RenderedRoute,\n          {\n            match,\n            routeContext: {\n              outlet,\n              matches: matches2,\n              isDataRoute: dataRouterState != null\n            },\n            children\n          }\n        );\n      };\n      return dataRouterState && (match.route.ErrorBoundary || match.route.errorElement || index === 0) ? /* @__PURE__ */ React2.createElement(\n        RenderErrorBoundary,\n        {\n          location: dataRouterState.location,\n          revalidation: dataRouterState.revalidation,\n          component: errorElement,\n          error,\n          children: getChildren(),\n          routeContext: { outlet: null, matches: matches2, isDataRoute: true },\n          unstable_onError\n        }\n      ) : getChildren();\n    },\n    null\n  );\n}\nfunction getDataRouterConsoleError(hookName) {\n  return `${hookName} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`;\n}\nfunction useDataRouterContext(hookName) {\n  let ctx = React2.useContext(DataRouterContext);\n  invariant(ctx, getDataRouterConsoleError(hookName));\n  return ctx;\n}\nfunction useDataRouterState(hookName) {\n  let state = React2.useContext(DataRouterStateContext);\n  invariant(state, getDataRouterConsoleError(hookName));\n  return state;\n}\nfunction useRouteContext(hookName) {\n  let route = React2.useContext(RouteContext);\n  invariant(route, getDataRouterConsoleError(hookName));\n  return route;\n}\nfunction useCurrentRouteId(hookName) {\n  let route = useRouteContext(hookName);\n  let thisRoute = route.matches[route.matches.length - 1];\n  invariant(\n    thisRoute.route.id,\n    `${hookName} can only be used on routes that contain a unique \"id\"`\n  );\n  return thisRoute.route.id;\n}\nfunction useRouteId() {\n  return useCurrentRouteId(\"useRouteId\" /* UseRouteId */);\n}\nfunction useNavigation() {\n  let state = useDataRouterState(\"useNavigation\" /* UseNavigation */);\n  return state.navigation;\n}\nfunction useRevalidator() {\n  let dataRouterContext = useDataRouterContext(\"useRevalidator\" /* UseRevalidator */);\n  let state = useDataRouterState(\"useRevalidator\" /* UseRevalidator */);\n  let revalidate = React2.useCallback(async () => {\n    await dataRouterContext.router.revalidate();\n  }, [dataRouterContext.router]);\n  return React2.useMemo(\n    () => ({ revalidate, state: state.revalidation }),\n    [revalidate, state.revalidation]\n  );\n}\nfunction useMatches() {\n  let { matches, loaderData } = useDataRouterState(\n    \"useMatches\" /* UseMatches */\n  );\n  return React2.useMemo(\n    () => matches.map((m) => convertRouteMatchToUiMatch(m, loaderData)),\n    [matches, loaderData]\n  );\n}\nfunction useLoaderData() {\n  let state = useDataRouterState(\"useLoaderData\" /* UseLoaderData */);\n  let routeId = useCurrentRouteId(\"useLoaderData\" /* UseLoaderData */);\n  return state.loaderData[routeId];\n}\nfunction useRouteLoaderData(routeId) {\n  let state = useDataRouterState(\"useRouteLoaderData\" /* UseRouteLoaderData */);\n  return state.loaderData[routeId];\n}\nfunction useActionData() {\n  let state = useDataRouterState(\"useActionData\" /* UseActionData */);\n  let routeId = useCurrentRouteId(\"useLoaderData\" /* UseLoaderData */);\n  return state.actionData ? state.actionData[routeId] : void 0;\n}\nfunction useRouteError() {\n  let error = React2.useContext(RouteErrorContext);\n  let state = useDataRouterState(\"useRouteError\" /* UseRouteError */);\n  let routeId = useCurrentRouteId(\"useRouteError\" /* UseRouteError */);\n  if (error !== void 0) {\n    return error;\n  }\n  return state.errors?.[routeId];\n}\nfunction useAsyncValue() {\n  let value = React2.useContext(AwaitContext);\n  return value?._data;\n}\nfunction useAsyncError() {\n  let value = React2.useContext(AwaitContext);\n  return value?._error;\n}\nvar blockerId = 0;\nfunction useBlocker(shouldBlock) {\n  let { router, basename } = useDataRouterContext(\"useBlocker\" /* UseBlocker */);\n  let state = useDataRouterState(\"useBlocker\" /* UseBlocker */);\n  let [blockerKey, setBlockerKey] = React2.useState(\"\");\n  let blockerFunction = React2.useCallback(\n    (arg) => {\n      if (typeof shouldBlock !== \"function\") {\n        return !!shouldBlock;\n      }\n      if (basename === \"/\") {\n        return shouldBlock(arg);\n      }\n      let { currentLocation, nextLocation, historyAction } = arg;\n      return shouldBlock({\n        currentLocation: {\n          ...currentLocation,\n          pathname: stripBasename(currentLocation.pathname, basename) || currentLocation.pathname\n        },\n        nextLocation: {\n          ...nextLocation,\n          pathname: stripBasename(nextLocation.pathname, basename) || nextLocation.pathname\n        },\n        historyAction\n      });\n    },\n    [basename, shouldBlock]\n  );\n  React2.useEffect(() => {\n    let key = String(++blockerId);\n    setBlockerKey(key);\n    return () => router.deleteBlocker(key);\n  }, [router]);\n  React2.useEffect(() => {\n    if (blockerKey !== \"\") {\n      router.getBlocker(blockerKey, blockerFunction);\n    }\n  }, [router, blockerKey, blockerFunction]);\n  return blockerKey && state.blockers.has(blockerKey) ? state.blockers.get(blockerKey) : IDLE_BLOCKER;\n}\nfunction useNavigateStable() {\n  let { router } = useDataRouterContext(\"useNavigate\" /* UseNavigateStable */);\n  let id = useCurrentRouteId(\"useNavigate\" /* UseNavigateStable */);\n  let activeRef = React2.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React2.useCallback(\n    async (to, options = {}) => {\n      warning(activeRef.current, navigateEffectWarning);\n      if (!activeRef.current) return;\n      if (typeof to === \"number\") {\n        router.navigate(to);\n      } else {\n        await router.navigate(to, { fromRouteId: id, ...options });\n      }\n    },\n    [router, id]\n  );\n  return navigate;\n}\nvar alreadyWarned = {};\nfunction warningOnce(key, cond, message) {\n  if (!cond && !alreadyWarned[key]) {\n    alreadyWarned[key] = true;\n    warning(false, message);\n  }\n}\nfunction useRoute(...args) {\n  const currentRouteId = useCurrentRouteId(\n    \"useRoute\" /* UseRoute */\n  );\n  const id = args[0] ?? currentRouteId;\n  const state = useDataRouterState(\"useRouteLoaderData\" /* UseRouteLoaderData */);\n  const route = state.matches.find(({ route: route2 }) => route2.id === id);\n  if (route === void 0) return void 0;\n  return {\n    loaderData: state.loaderData[id],\n    actionData: state.actionData?.[id]\n  };\n}\n\n// lib/components.tsx\nimport * as React3 from \"react\";\n\n// lib/server-runtime/warnings.ts\nvar alreadyWarned2 = {};\nfunction warnOnce(condition, message) {\n  if (!condition && !alreadyWarned2[message]) {\n    alreadyWarned2[message] = true;\n    console.warn(message);\n  }\n}\n\n// lib/components.tsx\nfunction mapRouteProperties(route) {\n  let updates = {\n    // Note: this check also occurs in createRoutesFromChildren so update\n    // there if you change this -- please and thank you!\n    hasErrorBoundary: route.hasErrorBoundary || route.ErrorBoundary != null || route.errorElement != null\n  };\n  if (route.Component) {\n    if (ENABLE_DEV_WARNINGS) {\n      if (route.element) {\n        warning(\n          false,\n          \"You should not include both `Component` and `element` on your route - `Component` will be used.\"\n        );\n      }\n    }\n    Object.assign(updates, {\n      element: React3.createElement(route.Component),\n      Component: void 0\n    });\n  }\n  if (route.HydrateFallback) {\n    if (ENABLE_DEV_WARNINGS) {\n      if (route.hydrateFallbackElement) {\n        warning(\n          false,\n          \"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used.\"\n        );\n      }\n    }\n    Object.assign(updates, {\n      hydrateFallbackElement: React3.createElement(route.HydrateFallback),\n      HydrateFallback: void 0\n    });\n  }\n  if (route.ErrorBoundary) {\n    if (ENABLE_DEV_WARNINGS) {\n      if (route.errorElement) {\n        warning(\n          false,\n          \"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used.\"\n        );\n      }\n    }\n    Object.assign(updates, {\n      errorElement: React3.createElement(route.ErrorBoundary),\n      ErrorBoundary: void 0\n    });\n  }\n  return updates;\n}\nvar hydrationRouteProperties = [\n  \"HydrateFallback\",\n  \"hydrateFallbackElement\"\n];\nfunction createMemoryRouter(routes, opts) {\n  return createRouter({\n    basename: opts?.basename,\n    getContext: opts?.getContext,\n    future: opts?.future,\n    history: createMemoryHistory({\n      initialEntries: opts?.initialEntries,\n      initialIndex: opts?.initialIndex\n    }),\n    hydrationData: opts?.hydrationData,\n    routes,\n    hydrationRouteProperties,\n    mapRouteProperties,\n    dataStrategy: opts?.dataStrategy,\n    patchRoutesOnNavigation: opts?.patchRoutesOnNavigation\n  }).initialize();\n}\nvar Deferred = class {\n  constructor() {\n    this.status = \"pending\";\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = (value) => {\n        if (this.status === \"pending\") {\n          this.status = \"resolved\";\n          resolve(value);\n        }\n      };\n      this.reject = (reason) => {\n        if (this.status === \"pending\") {\n          this.status = \"rejected\";\n          reject(reason);\n        }\n      };\n    });\n  }\n};\nfunction shallowDiff(a, b) {\n  if (a === b) {\n    return false;\n  }\n  let aKeys = Object.keys(a);\n  let bKeys = Object.keys(b);\n  if (aKeys.length !== bKeys.length) {\n    return true;\n  }\n  for (let key of aKeys) {\n    if (a[key] !== b[key]) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction UNSTABLE_TransitionEnabledRouterProvider({\n  router,\n  flushSync: reactDomFlushSyncImpl,\n  unstable_onError\n}) {\n  let fetcherData = React3.useRef(/* @__PURE__ */ new Map());\n  let [revalidating, startRevalidation] = React3.useTransition();\n  let [state, setState] = React3.useState(router.state);\n  router.__setPendingRerender = (promise) => startRevalidation(\n    // @ts-expect-error - need react 19 types for this to be async\n    async () => {\n      const rerender = await promise;\n      startRevalidation(() => {\n        rerender();\n      });\n    }\n  );\n  let navigator = React3.useMemo(() => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: (n) => router.navigate(n),\n      push: (to, state2, opts) => router.navigate(to, {\n        state: state2,\n        preventScrollReset: opts?.preventScrollReset\n      }),\n      replace: (to, state2, opts) => router.navigate(to, {\n        replace: true,\n        state: state2,\n        preventScrollReset: opts?.preventScrollReset\n      })\n    };\n  }, [router]);\n  let basename = router.basename || \"/\";\n  let dataRouterContext = React3.useMemo(\n    () => ({\n      router,\n      navigator,\n      static: false,\n      basename,\n      unstable_onError\n    }),\n    [router, navigator, basename, unstable_onError]\n  );\n  React3.useLayoutEffect(() => {\n    return router.subscribe(\n      (newState, { deletedFetchers, flushSync, viewTransitionOpts }) => {\n        newState.fetchers.forEach((fetcher, key) => {\n          if (fetcher.data !== void 0) {\n            fetcherData.current.set(key, fetcher.data);\n          }\n        });\n        deletedFetchers.forEach((key) => fetcherData.current.delete(key));\n        const diff = shallowDiff(state, newState);\n        if (!diff) return;\n        if (flushSync) {\n          if (reactDomFlushSyncImpl) {\n            reactDomFlushSyncImpl(() => setState(newState));\n          } else {\n            setState(newState);\n          }\n        } else {\n          React3.startTransition(() => {\n            setState(newState);\n          });\n        }\n      }\n    );\n  }, [router, reactDomFlushSyncImpl, state]);\n  return /* @__PURE__ */ React3.createElement(React3.Fragment, null, /* @__PURE__ */ React3.createElement(DataRouterContext.Provider, { value: dataRouterContext }, /* @__PURE__ */ React3.createElement(\n    DataRouterStateContext.Provider,\n    {\n      value: {\n        ...state,\n        revalidation: revalidating ? \"loading\" : state.revalidation\n      }\n    },\n    /* @__PURE__ */ React3.createElement(FetchersContext.Provider, { value: fetcherData.current }, /* @__PURE__ */ React3.createElement(\n      Router,\n      {\n        basename,\n        location: state.location,\n        navigationType: state.historyAction,\n        navigator\n      },\n      /* @__PURE__ */ React3.createElement(\n        MemoizedDataRoutes,\n        {\n          routes: router.routes,\n          future: router.future,\n          state,\n          unstable_onError\n        }\n      )\n    ))\n  )), null);\n}\nfunction RouterProvider({\n  router,\n  flushSync: reactDomFlushSyncImpl,\n  unstable_onError\n}) {\n  let [state, setStateImpl] = React3.useState(router.state);\n  let [pendingState, setPendingState] = React3.useState();\n  let [vtContext, setVtContext] = React3.useState({\n    isTransitioning: false\n  });\n  let [renderDfd, setRenderDfd] = React3.useState();\n  let [transition, setTransition] = React3.useState();\n  let [interruption, setInterruption] = React3.useState();\n  let fetcherData = React3.useRef(/* @__PURE__ */ new Map());\n  let logErrorsAndSetState = React3.useCallback(\n    (newState) => {\n      setStateImpl((prevState) => {\n        if (newState.errors && unstable_onError) {\n          Object.entries(newState.errors).forEach(([routeId, error]) => {\n            if (prevState.errors?.[routeId] !== error) {\n              unstable_onError(error);\n            }\n          });\n        }\n        return newState;\n      });\n    },\n    [unstable_onError]\n  );\n  let setState = React3.useCallback(\n    (newState, { deletedFetchers, flushSync, viewTransitionOpts }) => {\n      newState.fetchers.forEach((fetcher, key) => {\n        if (fetcher.data !== void 0) {\n          fetcherData.current.set(key, fetcher.data);\n        }\n      });\n      deletedFetchers.forEach((key) => fetcherData.current.delete(key));\n      warnOnce(\n        flushSync === false || reactDomFlushSyncImpl != null,\n        'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from \"react-router/dom\"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.'\n      );\n      let isViewTransitionAvailable = router.window != null && router.window.document != null && typeof router.window.document.startViewTransition === \"function\";\n      warnOnce(\n        viewTransitionOpts == null || isViewTransitionAvailable,\n        \"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available.\"\n      );\n      if (!viewTransitionOpts || !isViewTransitionAvailable) {\n        if (reactDomFlushSyncImpl && flushSync) {\n          reactDomFlushSyncImpl(() => logErrorsAndSetState(newState));\n        } else {\n          React3.startTransition(() => logErrorsAndSetState(newState));\n        }\n        return;\n      }\n      if (reactDomFlushSyncImpl && flushSync) {\n        reactDomFlushSyncImpl(() => {\n          if (transition) {\n            renderDfd && renderDfd.resolve();\n            transition.skipTransition();\n          }\n          setVtContext({\n            isTransitioning: true,\n            flushSync: true,\n            currentLocation: viewTransitionOpts.currentLocation,\n            nextLocation: viewTransitionOpts.nextLocation\n          });\n        });\n        let t = router.window.document.startViewTransition(() => {\n          reactDomFlushSyncImpl(() => logErrorsAndSetState(newState));\n        });\n        t.finished.finally(() => {\n          reactDomFlushSyncImpl(() => {\n            setRenderDfd(void 0);\n            setTransition(void 0);\n            setPendingState(void 0);\n            setVtContext({ isTransitioning: false });\n          });\n        });\n        reactDomFlushSyncImpl(() => setTransition(t));\n        return;\n      }\n      if (transition) {\n        renderDfd && renderDfd.resolve();\n        transition.skipTransition();\n        setInterruption({\n          state: newState,\n          currentLocation: viewTransitionOpts.currentLocation,\n          nextLocation: viewTransitionOpts.nextLocation\n        });\n      } else {\n        setPendingState(newState);\n        setVtContext({\n          isTransitioning: true,\n          flushSync: false,\n          currentLocation: viewTransitionOpts.currentLocation,\n          nextLocation: viewTransitionOpts.nextLocation\n        });\n      }\n    },\n    [\n      router.window,\n      reactDomFlushSyncImpl,\n      transition,\n      renderDfd,\n      logErrorsAndSetState\n    ]\n  );\n  React3.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n  React3.useEffect(() => {\n    if (vtContext.isTransitioning && !vtContext.flushSync) {\n      setRenderDfd(new Deferred());\n    }\n  }, [vtContext]);\n  React3.useEffect(() => {\n    if (renderDfd && pendingState && router.window) {\n      let newState = pendingState;\n      let renderPromise = renderDfd.promise;\n      let transition2 = router.window.document.startViewTransition(async () => {\n        React3.startTransition(() => logErrorsAndSetState(newState));\n        await renderPromise;\n      });\n      transition2.finished.finally(() => {\n        setRenderDfd(void 0);\n        setTransition(void 0);\n        setPendingState(void 0);\n        setVtContext({ isTransitioning: false });\n      });\n      setTransition(transition2);\n    }\n  }, [pendingState, renderDfd, router.window, logErrorsAndSetState]);\n  React3.useEffect(() => {\n    if (renderDfd && pendingState && state.location.key === pendingState.location.key) {\n      renderDfd.resolve();\n    }\n  }, [renderDfd, transition, state.location, pendingState]);\n  React3.useEffect(() => {\n    if (!vtContext.isTransitioning && interruption) {\n      setPendingState(interruption.state);\n      setVtContext({\n        isTransitioning: true,\n        flushSync: false,\n        currentLocation: interruption.currentLocation,\n        nextLocation: interruption.nextLocation\n      });\n      setInterruption(void 0);\n    }\n  }, [vtContext.isTransitioning, interruption]);\n  let navigator = React3.useMemo(() => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: (n) => router.navigate(n),\n      push: (to, state2, opts) => router.navigate(to, {\n        state: state2,\n        preventScrollReset: opts?.preventScrollReset\n      }),\n      replace: (to, state2, opts) => router.navigate(to, {\n        replace: true,\n        state: state2,\n        preventScrollReset: opts?.preventScrollReset\n      })\n    };\n  }, [router]);\n  let basename = router.basename || \"/\";\n  let dataRouterContext = React3.useMemo(\n    () => ({\n      router,\n      navigator,\n      static: false,\n      basename,\n      unstable_onError\n    }),\n    [router, navigator, basename, unstable_onError]\n  );\n  return /* @__PURE__ */ React3.createElement(React3.Fragment, null, /* @__PURE__ */ React3.createElement(DataRouterContext.Provider, { value: dataRouterContext }, /* @__PURE__ */ React3.createElement(DataRouterStateContext.Provider, { value: state }, /* @__PURE__ */ React3.createElement(FetchersContext.Provider, { value: fetcherData.current }, /* @__PURE__ */ React3.createElement(ViewTransitionContext.Provider, { value: vtContext }, /* @__PURE__ */ React3.createElement(\n    Router,\n    {\n      basename,\n      location: state.location,\n      navigationType: state.historyAction,\n      navigator\n    },\n    /* @__PURE__ */ React3.createElement(\n      MemoizedDataRoutes,\n      {\n        routes: router.routes,\n        future: router.future,\n        state,\n        unstable_onError\n      }\n    )\n  ))))), null);\n}\nvar MemoizedDataRoutes = React3.memo(DataRoutes);\nfunction DataRoutes({\n  routes,\n  future,\n  state,\n  unstable_onError\n}) {\n  return useRoutesImpl(routes, void 0, state, unstable_onError, future);\n}\nfunction MemoryRouter({\n  basename,\n  children,\n  initialEntries,\n  initialIndex\n}) {\n  let historyRef = React3.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createMemoryHistory({\n      initialEntries,\n      initialIndex,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React3.useState({\n    action: history.action,\n    location: history.location\n  });\n  let setState = React3.useCallback(\n    (newState) => {\n      React3.startTransition(() => setStateImpl(newState));\n    },\n    [setStateImpl]\n  );\n  React3.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  return /* @__PURE__ */ React3.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location: state.location,\n      navigationType: state.action,\n      navigator: history\n    }\n  );\n}\nfunction Navigate({\n  to,\n  replace: replace2,\n  state,\n  relative\n}) {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of\n    // the router loaded. We can help them understand how to avoid that.\n    `<Navigate> may be used only in the context of a <Router> component.`\n  );\n  let { static: isStatic } = React3.useContext(NavigationContext);\n  warning(\n    !isStatic,\n    `<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.`\n  );\n  let { matches } = React3.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n  let navigate = useNavigate();\n  let path = resolveTo(\n    to,\n    getResolveToMatches(matches),\n    locationPathname,\n    relative === \"path\"\n  );\n  let jsonPath = JSON.stringify(path);\n  React3.useEffect(() => {\n    navigate(JSON.parse(jsonPath), { replace: replace2, state, relative });\n  }, [navigate, jsonPath, relative, replace2, state]);\n  return null;\n}\nfunction Outlet(props) {\n  return useOutlet(props.context);\n}\nfunction Route(props) {\n  invariant(\n    false,\n    `A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.`\n  );\n}\nfunction Router({\n  basename: basenameProp = \"/\",\n  children = null,\n  location: locationProp,\n  navigationType = \"POP\" /* Pop */,\n  navigator,\n  static: staticProp = false\n}) {\n  invariant(\n    !useInRouterContext(),\n    `You cannot render a <Router> inside another <Router>. You should never have more than one in your app.`\n  );\n  let basename = basenameProp.replace(/^\\/*/, \"/\");\n  let navigationContext = React3.useMemo(\n    () => ({\n      basename,\n      navigator,\n      static: staticProp,\n      future: {}\n    }),\n    [basename, navigator, staticProp]\n  );\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\",\n    state = null,\n    key = \"default\"\n  } = locationProp;\n  let locationContext = React3.useMemo(() => {\n    let trailingPathname = stripBasename(pathname, basename);\n    if (trailingPathname == null) {\n      return null;\n    }\n    return {\n      location: {\n        pathname: trailingPathname,\n        search,\n        hash,\n        state,\n        key\n      },\n      navigationType\n    };\n  }, [basename, pathname, search, hash, state, key, navigationType]);\n  warning(\n    locationContext != null,\n    `<Router basename=\"${basename}\"> is not able to match the URL \"${pathname}${search}${hash}\" because it does not start with the basename, so the <Router> won't render anything.`\n  );\n  if (locationContext == null) {\n    return null;\n  }\n  return /* @__PURE__ */ React3.createElement(NavigationContext.Provider, { value: navigationContext }, /* @__PURE__ */ React3.createElement(LocationContext.Provider, { children, value: locationContext }));\n}\nfunction Routes({\n  children,\n  location\n}) {\n  return useRoutes(createRoutesFromChildren(children), location);\n}\nfunction Await({\n  children,\n  errorElement,\n  resolve\n}) {\n  let dataRouterContext = React3.useContext(DataRouterContext);\n  return /* @__PURE__ */ React3.createElement(\n    AwaitErrorBoundary,\n    {\n      resolve,\n      errorElement,\n      unstable_onError: dataRouterContext?.unstable_onError\n    },\n    /* @__PURE__ */ React3.createElement(ResolveAwait, null, children)\n  );\n}\nvar AwaitErrorBoundary = class extends React3.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null };\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  componentDidCatch(error, errorInfo) {\n    if (this.props.unstable_onError) {\n      this.props.unstable_onError(error, errorInfo);\n    } else {\n      console.error(\n        \"<Await> caught the following error during render\",\n        error,\n        errorInfo\n      );\n    }\n  }\n  render() {\n    let { children, errorElement, resolve } = this.props;\n    let promise = null;\n    let status = 0 /* pending */;\n    if (!(resolve instanceof Promise)) {\n      status = 1 /* success */;\n      promise = Promise.resolve();\n      Object.defineProperty(promise, \"_tracked\", { get: () => true });\n      Object.defineProperty(promise, \"_data\", { get: () => resolve });\n    } else if (this.state.error) {\n      status = 2 /* error */;\n      let renderError = this.state.error;\n      promise = Promise.reject().catch(() => {\n      });\n      Object.defineProperty(promise, \"_tracked\", { get: () => true });\n      Object.defineProperty(promise, \"_error\", { get: () => renderError });\n    } else if (resolve._tracked) {\n      promise = resolve;\n      status = \"_error\" in promise ? 2 /* error */ : \"_data\" in promise ? 1 /* success */ : 0 /* pending */;\n    } else {\n      status = 0 /* pending */;\n      Object.defineProperty(resolve, \"_tracked\", { get: () => true });\n      promise = resolve.then(\n        (data2) => Object.defineProperty(resolve, \"_data\", { get: () => data2 }),\n        (error) => {\n          this.props.unstable_onError?.(error);\n          Object.defineProperty(resolve, \"_error\", { get: () => error });\n        }\n      );\n    }\n    if (status === 2 /* error */ && !errorElement) {\n      throw promise._error;\n    }\n    if (status === 2 /* error */) {\n      return /* @__PURE__ */ React3.createElement(AwaitContext.Provider, { value: promise, children: errorElement });\n    }\n    if (status === 1 /* success */) {\n      return /* @__PURE__ */ React3.createElement(AwaitContext.Provider, { value: promise, children });\n    }\n    throw promise;\n  }\n};\nfunction ResolveAwait({\n  children\n}) {\n  let data2 = useAsyncValue();\n  let toRender = typeof children === \"function\" ? children(data2) : children;\n  return /* @__PURE__ */ React3.createElement(React3.Fragment, null, toRender);\n}\nfunction createRoutesFromChildren(children, parentPath = []) {\n  let routes = [];\n  React3.Children.forEach(children, (element, index) => {\n    if (!React3.isValidElement(element)) {\n      return;\n    }\n    let treePath = [...parentPath, index];\n    if (element.type === React3.Fragment) {\n      routes.push.apply(\n        routes,\n        createRoutesFromChildren(element.props.children, treePath)\n      );\n      return;\n    }\n    invariant(\n      element.type === Route,\n      `[${typeof element.type === \"string\" ? element.type : element.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`\n    );\n    invariant(\n      !element.props.index || !element.props.children,\n      \"An index route cannot have child routes.\"\n    );\n    let route = {\n      id: element.props.id || treePath.join(\"-\"),\n      caseSensitive: element.props.caseSensitive,\n      element: element.props.element,\n      Component: element.props.Component,\n      index: element.props.index,\n      path: element.props.path,\n      middleware: element.props.middleware,\n      loader: element.props.loader,\n      action: element.props.action,\n      hydrateFallbackElement: element.props.hydrateFallbackElement,\n      HydrateFallback: element.props.HydrateFallback,\n      errorElement: element.props.errorElement,\n      ErrorBoundary: element.props.ErrorBoundary,\n      hasErrorBoundary: element.props.hasErrorBoundary === true || element.props.ErrorBoundary != null || element.props.errorElement != null,\n      shouldRevalidate: element.props.shouldRevalidate,\n      handle: element.props.handle,\n      lazy: element.props.lazy\n    };\n    if (element.props.children) {\n      route.children = createRoutesFromChildren(\n        element.props.children,\n        treePath\n      );\n    }\n    routes.push(route);\n  });\n  return routes;\n}\nvar createRoutesFromElements = createRoutesFromChildren;\nfunction renderMatches(matches) {\n  return _renderMatches(matches);\n}\nfunction useRouteComponentProps() {\n  return {\n    params: useParams(),\n    loaderData: useLoaderData(),\n    actionData: useActionData(),\n    matches: useMatches()\n  };\n}\nfunction WithComponentProps({\n  children\n}) {\n  const props = useRouteComponentProps();\n  return React3.cloneElement(children, props);\n}\nfunction withComponentProps(Component4) {\n  return function WithComponentProps2() {\n    const props = useRouteComponentProps();\n    return React3.createElement(Component4, props);\n  };\n}\nfunction useHydrateFallbackProps() {\n  return {\n    params: useParams(),\n    loaderData: useLoaderData(),\n    actionData: useActionData()\n  };\n}\nfunction WithHydrateFallbackProps({\n  children\n}) {\n  const props = useHydrateFallbackProps();\n  return React3.cloneElement(children, props);\n}\nfunction withHydrateFallbackProps(HydrateFallback) {\n  return function WithHydrateFallbackProps2() {\n    const props = useHydrateFallbackProps();\n    return React3.createElement(HydrateFallback, props);\n  };\n}\nfunction useErrorBoundaryProps() {\n  return {\n    params: useParams(),\n    loaderData: useLoaderData(),\n    actionData: useActionData(),\n    error: useRouteError()\n  };\n}\nfunction WithErrorBoundaryProps({\n  children\n}) {\n  const props = useErrorBoundaryProps();\n  return React3.cloneElement(children, props);\n}\nfunction withErrorBoundaryProps(ErrorBoundary) {\n  return function WithErrorBoundaryProps2() {\n    const props = useErrorBoundaryProps();\n    return React3.createElement(ErrorBoundary, props);\n  };\n}\n\n// lib/dom/dom.ts\nvar defaultMethod = \"get\";\nvar defaultEncType = \"application/x-www-form-urlencoded\";\nfunction isHtmlElement(object) {\n  return object != null && typeof object.tagName === \"string\";\n}\nfunction isButtonElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"button\";\n}\nfunction isFormElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"form\";\n}\nfunction isInputElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"input\";\n}\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\nfunction shouldProcessLinkClick(event, target) {\n  return event.button === 0 && // Ignore everything but left clicks\n  (!target || target === \"_self\") && // Let browser handle \"target=_blank\" etc.\n  !isModifiedEvent(event);\n}\nfunction createSearchParams(init = \"\") {\n  return new URLSearchParams(\n    typeof init === \"string\" || Array.isArray(init) || init instanceof URLSearchParams ? init : Object.keys(init).reduce((memo2, key) => {\n      let value = init[key];\n      return memo2.concat(\n        Array.isArray(value) ? value.map((v) => [key, v]) : [[key, value]]\n      );\n    }, [])\n  );\n}\nfunction getSearchParamsForLocation(locationSearch, defaultSearchParams) {\n  let searchParams = createSearchParams(locationSearch);\n  if (defaultSearchParams) {\n    defaultSearchParams.forEach((_, key) => {\n      if (!searchParams.has(key)) {\n        defaultSearchParams.getAll(key).forEach((value) => {\n          searchParams.append(key, value);\n        });\n      }\n    });\n  }\n  return searchParams;\n}\nvar _formDataSupportsSubmitter = null;\nfunction isFormDataSubmitterSupported() {\n  if (_formDataSupportsSubmitter === null) {\n    try {\n      new FormData(\n        document.createElement(\"form\"),\n        // @ts-expect-error if FormData supports the submitter parameter, this will throw\n        0\n      );\n      _formDataSupportsSubmitter = false;\n    } catch (e) {\n      _formDataSupportsSubmitter = true;\n    }\n  }\n  return _formDataSupportsSubmitter;\n}\nvar supportedFormEncTypes = /* @__PURE__ */ new Set([\n  \"application/x-www-form-urlencoded\",\n  \"multipart/form-data\",\n  \"text/plain\"\n]);\nfunction getFormEncType(encType) {\n  if (encType != null && !supportedFormEncTypes.has(encType)) {\n    warning(\n      false,\n      `\"${encType}\" is not a valid \\`encType\\` for \\`<Form>\\`/\\`<fetcher.Form>\\` and will default to \"${defaultEncType}\"`\n    );\n    return null;\n  }\n  return encType;\n}\nfunction getFormSubmissionInfo(target, basename) {\n  let method;\n  let action;\n  let encType;\n  let formData;\n  let body;\n  if (isFormElement(target)) {\n    let attr = target.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"enctype\")) || defaultEncType;\n    formData = new FormData(target);\n  } else if (isButtonElement(target) || isInputElement(target) && (target.type === \"submit\" || target.type === \"image\")) {\n    let form = target.form;\n    if (form == null) {\n      throw new Error(\n        `Cannot submit a <button> or <input type=\"submit\"> without a <form>`\n      );\n    }\n    let attr = target.getAttribute(\"formaction\") || form.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"formmethod\") || form.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"formenctype\")) || getFormEncType(form.getAttribute(\"enctype\")) || defaultEncType;\n    formData = new FormData(form, target);\n    if (!isFormDataSubmitterSupported()) {\n      let { name, type, value } = target;\n      if (type === \"image\") {\n        let prefix = name ? `${name}.` : \"\";\n        formData.append(`${prefix}x`, \"0\");\n        formData.append(`${prefix}y`, \"0\");\n      } else if (name) {\n        formData.append(name, value);\n      }\n    }\n  } else if (isHtmlElement(target)) {\n    throw new Error(\n      `Cannot submit element that is not <form>, <button>, or <input type=\"submit|image\">`\n    );\n  } else {\n    method = defaultMethod;\n    action = null;\n    encType = defaultEncType;\n    body = target;\n  }\n  if (formData && encType === \"text/plain\") {\n    body = formData;\n    formData = void 0;\n  }\n  return { action, method: method.toLowerCase(), encType, formData, body };\n}\n\n// lib/dom/ssr/single-fetch.tsx\nimport * as React4 from \"react\";\n\n// vendor/turbo-stream-v2/utils.ts\nvar HOLE = -1;\nvar NAN = -2;\nvar NEGATIVE_INFINITY = -3;\nvar NEGATIVE_ZERO = -4;\nvar NULL = -5;\nvar POSITIVE_INFINITY = -6;\nvar UNDEFINED = -7;\nvar TYPE_BIGINT = \"B\";\nvar TYPE_DATE = \"D\";\nvar TYPE_ERROR = \"E\";\nvar TYPE_MAP = \"M\";\nvar TYPE_NULL_OBJECT = \"N\";\nvar TYPE_PROMISE = \"P\";\nvar TYPE_REGEXP = \"R\";\nvar TYPE_SET = \"S\";\nvar TYPE_SYMBOL = \"Y\";\nvar TYPE_URL = \"U\";\nvar TYPE_PREVIOUS_RESOLVED = \"Z\";\nvar Deferred2 = class {\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n  }\n};\nfunction createLineSplittingTransform() {\n  const decoder = new TextDecoder();\n  let leftover = \"\";\n  return new TransformStream({\n    transform(chunk, controller) {\n      const str = decoder.decode(chunk, { stream: true });\n      const parts = (leftover + str).split(\"\\n\");\n      leftover = parts.pop() || \"\";\n      for (const part of parts) {\n        controller.enqueue(part);\n      }\n    },\n    flush(controller) {\n      if (leftover) {\n        controller.enqueue(leftover);\n      }\n    }\n  });\n}\n\n// vendor/turbo-stream-v2/flatten.ts\nfunction flatten(input) {\n  const { indices } = this;\n  const existing = indices.get(input);\n  if (existing) return [existing];\n  if (input === void 0) return UNDEFINED;\n  if (input === null) return NULL;\n  if (Number.isNaN(input)) return NAN;\n  if (input === Number.POSITIVE_INFINITY) return POSITIVE_INFINITY;\n  if (input === Number.NEGATIVE_INFINITY) return NEGATIVE_INFINITY;\n  if (input === 0 && 1 / input < 0) return NEGATIVE_ZERO;\n  const index = this.index++;\n  indices.set(input, index);\n  stringify.call(this, input, index);\n  return index;\n}\nfunction stringify(input, index) {\n  const { deferred, plugins, postPlugins } = this;\n  const str = this.stringified;\n  const stack = [[input, index]];\n  while (stack.length > 0) {\n    const [input2, index2] = stack.pop();\n    const partsForObj = (obj) => Object.keys(obj).map((k) => `\"_${flatten.call(this, k)}\":${flatten.call(this, obj[k])}`).join(\",\");\n    let error = null;\n    switch (typeof input2) {\n      case \"boolean\":\n      case \"number\":\n      case \"string\":\n        str[index2] = JSON.stringify(input2);\n        break;\n      case \"bigint\":\n        str[index2] = `[\"${TYPE_BIGINT}\",\"${input2}\"]`;\n        break;\n      case \"symbol\": {\n        const keyFor = Symbol.keyFor(input2);\n        if (!keyFor) {\n          error = new Error(\n            \"Cannot encode symbol unless created with Symbol.for()\"\n          );\n        } else {\n          str[index2] = `[\"${TYPE_SYMBOL}\",${JSON.stringify(keyFor)}]`;\n        }\n        break;\n      }\n      case \"object\": {\n        if (!input2) {\n          str[index2] = `${NULL}`;\n          break;\n        }\n        const isArray = Array.isArray(input2);\n        let pluginHandled = false;\n        if (!isArray && plugins) {\n          for (const plugin of plugins) {\n            const pluginResult = plugin(input2);\n            if (Array.isArray(pluginResult)) {\n              pluginHandled = true;\n              const [pluginIdentifier, ...rest] = pluginResult;\n              str[index2] = `[${JSON.stringify(pluginIdentifier)}`;\n              if (rest.length > 0) {\n                str[index2] += `,${rest.map((v) => flatten.call(this, v)).join(\",\")}`;\n              }\n              str[index2] += \"]\";\n              break;\n            }\n          }\n        }\n        if (!pluginHandled) {\n          let result = isArray ? \"[\" : \"{\";\n          if (isArray) {\n            for (let i = 0; i < input2.length; i++)\n              result += (i ? \",\" : \"\") + (i in input2 ? flatten.call(this, input2[i]) : HOLE);\n            str[index2] = `${result}]`;\n          } else if (input2 instanceof Date) {\n            const dateTime = input2.getTime();\n            str[index2] = `[\"${TYPE_DATE}\",${Number.isNaN(dateTime) ? JSON.stringify(\"invalid\") : dateTime}]`;\n          } else if (input2 instanceof URL) {\n            str[index2] = `[\"${TYPE_URL}\",${JSON.stringify(input2.href)}]`;\n          } else if (input2 instanceof RegExp) {\n            str[index2] = `[\"${TYPE_REGEXP}\",${JSON.stringify(\n              input2.source\n            )},${JSON.stringify(input2.flags)}]`;\n          } else if (input2 instanceof Set) {\n            if (input2.size > 0) {\n              str[index2] = `[\"${TYPE_SET}\",${[...input2].map((val) => flatten.call(this, val)).join(\",\")}]`;\n            } else {\n              str[index2] = `[\"${TYPE_SET}\"]`;\n            }\n          } else if (input2 instanceof Map) {\n            if (input2.size > 0) {\n              str[index2] = `[\"${TYPE_MAP}\",${[...input2].flatMap(([k, v]) => [\n                flatten.call(this, k),\n                flatten.call(this, v)\n              ]).join(\",\")}]`;\n            } else {\n              str[index2] = `[\"${TYPE_MAP}\"]`;\n            }\n          } else if (input2 instanceof Promise) {\n            str[index2] = `[\"${TYPE_PROMISE}\",${index2}]`;\n            deferred[index2] = input2;\n          } else if (input2 instanceof Error) {\n            str[index2] = `[\"${TYPE_ERROR}\",${JSON.stringify(input2.message)}`;\n            if (input2.name !== \"Error\") {\n              str[index2] += `,${JSON.stringify(input2.name)}`;\n            }\n            str[index2] += \"]\";\n          } else if (Object.getPrototypeOf(input2) === null) {\n            str[index2] = `[\"${TYPE_NULL_OBJECT}\",{${partsForObj(input2)}}]`;\n          } else if (isPlainObject(input2)) {\n            str[index2] = `{${partsForObj(input2)}}`;\n          } else {\n            error = new Error(\"Cannot encode object with prototype\");\n          }\n        }\n        break;\n      }\n      default: {\n        const isArray = Array.isArray(input2);\n        let pluginHandled = false;\n        if (!isArray && plugins) {\n          for (const plugin of plugins) {\n            const pluginResult = plugin(input2);\n            if (Array.isArray(pluginResult)) {\n              pluginHandled = true;\n              const [pluginIdentifier, ...rest] = pluginResult;\n              str[index2] = `[${JSON.stringify(pluginIdentifier)}`;\n              if (rest.length > 0) {\n                str[index2] += `,${rest.map((v) => flatten.call(this, v)).join(\",\")}`;\n              }\n              str[index2] += \"]\";\n              break;\n            }\n          }\n        }\n        if (!pluginHandled) {\n          error = new Error(\"Cannot encode function or unexpected type\");\n        }\n      }\n    }\n    if (error) {\n      let pluginHandled = false;\n      if (postPlugins) {\n        for (const plugin of postPlugins) {\n          const pluginResult = plugin(input2);\n          if (Array.isArray(pluginResult)) {\n            pluginHandled = true;\n            const [pluginIdentifier, ...rest] = pluginResult;\n            str[index2] = `[${JSON.stringify(pluginIdentifier)}`;\n            if (rest.length > 0) {\n              str[index2] += `,${rest.map((v) => flatten.call(this, v)).join(\",\")}`;\n            }\n            str[index2] += \"]\";\n            break;\n          }\n        }\n      }\n      if (!pluginHandled) {\n        throw error;\n      }\n    }\n  }\n}\nvar objectProtoNames = Object.getOwnPropertyNames(Object.prototype).sort().join(\"\\0\");\nfunction isPlainObject(thing) {\n  const proto = Object.getPrototypeOf(thing);\n  return proto === Object.prototype || proto === null || Object.getOwnPropertyNames(proto).sort().join(\"\\0\") === objectProtoNames;\n}\n\n// vendor/turbo-stream-v2/unflatten.ts\nvar globalObj = typeof window !== \"undefined\" ? window : typeof globalThis !== \"undefined\" ? globalThis : void 0;\nfunction unflatten(parsed) {\n  const { hydrated, values } = this;\n  if (typeof parsed === \"number\") return hydrate.call(this, parsed);\n  if (!Array.isArray(parsed) || !parsed.length) throw new SyntaxError();\n  const startIndex = values.length;\n  for (const value of parsed) {\n    values.push(value);\n  }\n  hydrated.length = values.length;\n  return hydrate.call(this, startIndex);\n}\nfunction hydrate(index) {\n  const { hydrated, values, deferred, plugins } = this;\n  let result;\n  const stack = [\n    [\n      index,\n      (v) => {\n        result = v;\n      }\n    ]\n  ];\n  let postRun = [];\n  while (stack.length > 0) {\n    const [index2, set] = stack.pop();\n    switch (index2) {\n      case UNDEFINED:\n        set(void 0);\n        continue;\n      case NULL:\n        set(null);\n        continue;\n      case NAN:\n        set(NaN);\n        continue;\n      case POSITIVE_INFINITY:\n        set(Infinity);\n        continue;\n      case NEGATIVE_INFINITY:\n        set(-Infinity);\n        continue;\n      case NEGATIVE_ZERO:\n        set(-0);\n        continue;\n    }\n    if (hydrated[index2]) {\n      set(hydrated[index2]);\n      continue;\n    }\n    const value = values[index2];\n    if (!value || typeof value !== \"object\") {\n      hydrated[index2] = value;\n      set(value);\n      continue;\n    }\n    if (Array.isArray(value)) {\n      if (typeof value[0] === \"string\") {\n        const [type, b, c] = value;\n        switch (type) {\n          case TYPE_DATE:\n            set(hydrated[index2] = new Date(b));\n            continue;\n          case TYPE_URL:\n            set(hydrated[index2] = new URL(b));\n            continue;\n          case TYPE_BIGINT:\n            set(hydrated[index2] = BigInt(b));\n            continue;\n          case TYPE_REGEXP:\n            set(hydrated[index2] = new RegExp(b, c));\n            continue;\n          case TYPE_SYMBOL:\n            set(hydrated[index2] = Symbol.for(b));\n            continue;\n          case TYPE_SET:\n            const newSet = /* @__PURE__ */ new Set();\n            hydrated[index2] = newSet;\n            for (let i = value.length - 1; i > 0; i--)\n              stack.push([\n                value[i],\n                (v) => {\n                  newSet.add(v);\n                }\n              ]);\n            set(newSet);\n            continue;\n          case TYPE_MAP:\n            const map = /* @__PURE__ */ new Map();\n            hydrated[index2] = map;\n            for (let i = value.length - 2; i > 0; i -= 2) {\n              const r = [];\n              stack.push([\n                value[i + 1],\n                (v) => {\n                  r[1] = v;\n                }\n              ]);\n              stack.push([\n                value[i],\n                (k) => {\n                  r[0] = k;\n                }\n              ]);\n              postRun.push(() => {\n                map.set(r[0], r[1]);\n              });\n            }\n            set(map);\n            continue;\n          case TYPE_NULL_OBJECT:\n            const obj = /* @__PURE__ */ Object.create(null);\n            hydrated[index2] = obj;\n            for (const key of Object.keys(b).reverse()) {\n              const r = [];\n              stack.push([\n                b[key],\n                (v) => {\n                  r[1] = v;\n                }\n              ]);\n              stack.push([\n                Number(key.slice(1)),\n                (k) => {\n                  r[0] = k;\n                }\n              ]);\n              postRun.push(() => {\n                obj[r[0]] = r[1];\n              });\n            }\n            set(obj);\n            continue;\n          case TYPE_PROMISE:\n            if (hydrated[b]) {\n              set(hydrated[index2] = hydrated[b]);\n            } else {\n              const d = new Deferred2();\n              deferred[b] = d;\n              set(hydrated[index2] = d.promise);\n            }\n            continue;\n          case TYPE_ERROR:\n            const [, message, errorType] = value;\n            let error = errorType && globalObj && globalObj[errorType] ? new globalObj[errorType](message) : new Error(message);\n            hydrated[index2] = error;\n            set(error);\n            continue;\n          case TYPE_PREVIOUS_RESOLVED:\n            set(hydrated[index2] = hydrated[b]);\n            continue;\n          default:\n            if (Array.isArray(plugins)) {\n              const r = [];\n              const vals = value.slice(1);\n              for (let i = 0; i < vals.length; i++) {\n                const v = vals[i];\n                stack.push([\n                  v,\n                  (v2) => {\n                    r[i] = v2;\n                  }\n                ]);\n              }\n              postRun.push(() => {\n                for (const plugin of plugins) {\n                  const result2 = plugin(value[0], ...r);\n                  if (result2) {\n                    set(hydrated[index2] = result2.value);\n                    return;\n                  }\n                }\n                throw new SyntaxError();\n              });\n              continue;\n            }\n            throw new SyntaxError();\n        }\n      } else {\n        const array = [];\n        hydrated[index2] = array;\n        for (let i = 0; i < value.length; i++) {\n          const n = value[i];\n          if (n !== HOLE) {\n            stack.push([\n              n,\n              (v) => {\n                array[i] = v;\n              }\n            ]);\n          }\n        }\n        set(array);\n        continue;\n      }\n    } else {\n      const object = {};\n      hydrated[index2] = object;\n      for (const key of Object.keys(value).reverse()) {\n        const r = [];\n        stack.push([\n          value[key],\n          (v) => {\n            r[1] = v;\n          }\n        ]);\n        stack.push([\n          Number(key.slice(1)),\n          (k) => {\n            r[0] = k;\n          }\n        ]);\n        postRun.push(() => {\n          object[r[0]] = r[1];\n        });\n      }\n      set(object);\n      continue;\n    }\n  }\n  while (postRun.length > 0) {\n    postRun.pop()();\n  }\n  return result;\n}\n\n// vendor/turbo-stream-v2/turbo-stream.ts\nasync function decode(readable, options) {\n  const { plugins } = options ?? {};\n  const done = new Deferred2();\n  const reader = readable.pipeThrough(createLineSplittingTransform()).getReader();\n  const decoder = {\n    values: [],\n    hydrated: [],\n    deferred: {},\n    plugins\n  };\n  const decoded = await decodeInitial.call(decoder, reader);\n  let donePromise = done.promise;\n  if (decoded.done) {\n    done.resolve();\n  } else {\n    donePromise = decodeDeferred.call(decoder, reader).then(done.resolve).catch((reason) => {\n      for (const deferred of Object.values(decoder.deferred)) {\n        deferred.reject(reason);\n      }\n      done.reject(reason);\n    });\n  }\n  return {\n    done: donePromise.then(() => reader.closed),\n    value: decoded.value\n  };\n}\nasync function decodeInitial(reader) {\n  const read = await reader.read();\n  if (!read.value) {\n    throw new SyntaxError();\n  }\n  let line;\n  try {\n    line = JSON.parse(read.value);\n  } catch (reason) {\n    throw new SyntaxError();\n  }\n  return {\n    done: read.done,\n    value: unflatten.call(this, line)\n  };\n}\nasync function decodeDeferred(reader) {\n  let read = await reader.read();\n  while (!read.done) {\n    if (!read.value) continue;\n    const line = read.value;\n    switch (line[0]) {\n      case TYPE_PROMISE: {\n        const colonIndex = line.indexOf(\":\");\n        const deferredId = Number(line.slice(1, colonIndex));\n        const deferred = this.deferred[deferredId];\n        if (!deferred) {\n          throw new Error(`Deferred ID ${deferredId} not found in stream`);\n        }\n        const lineData = line.slice(colonIndex + 1);\n        let jsonLine;\n        try {\n          jsonLine = JSON.parse(lineData);\n        } catch (reason) {\n          throw new SyntaxError();\n        }\n        const value = unflatten.call(this, jsonLine);\n        deferred.resolve(value);\n        break;\n      }\n      case TYPE_ERROR: {\n        const colonIndex = line.indexOf(\":\");\n        const deferredId = Number(line.slice(1, colonIndex));\n        const deferred = this.deferred[deferredId];\n        if (!deferred) {\n          throw new Error(`Deferred ID ${deferredId} not found in stream`);\n        }\n        const lineData = line.slice(colonIndex + 1);\n        let jsonLine;\n        try {\n          jsonLine = JSON.parse(lineData);\n        } catch (reason) {\n          throw new SyntaxError();\n        }\n        const value = unflatten.call(this, jsonLine);\n        deferred.reject(value);\n        break;\n      }\n      default:\n        throw new SyntaxError();\n    }\n    read = await reader.read();\n  }\n}\nfunction encode(input, options) {\n  const { plugins, postPlugins, signal } = options ?? {};\n  const encoder = {\n    deferred: {},\n    index: 0,\n    indices: /* @__PURE__ */ new Map(),\n    stringified: [],\n    plugins,\n    postPlugins,\n    signal\n  };\n  const textEncoder = new TextEncoder();\n  let lastSentIndex = 0;\n  const readable = new ReadableStream({\n    async start(controller) {\n      const id = flatten.call(encoder, input);\n      if (Array.isArray(id)) {\n        throw new Error(\"This should never happen\");\n      }\n      if (id < 0) {\n        controller.enqueue(textEncoder.encode(`${id}\n`));\n      } else {\n        controller.enqueue(\n          textEncoder.encode(`[${encoder.stringified.join(\",\")}]\n`)\n        );\n        lastSentIndex = encoder.stringified.length - 1;\n      }\n      const seenPromises = /* @__PURE__ */ new WeakSet();\n      if (Object.keys(encoder.deferred).length) {\n        let raceDone;\n        const racePromise = new Promise((resolve, reject) => {\n          raceDone = resolve;\n          if (signal) {\n            const rejectPromise = () => reject(signal.reason || new Error(\"Signal was aborted.\"));\n            if (signal.aborted) {\n              rejectPromise();\n            } else {\n              signal.addEventListener(\"abort\", (event) => {\n                rejectPromise();\n              });\n            }\n          }\n        });\n        while (Object.keys(encoder.deferred).length > 0) {\n          for (const [deferredId, deferred] of Object.entries(\n            encoder.deferred\n          )) {\n            if (seenPromises.has(deferred)) continue;\n            seenPromises.add(\n              // biome-ignore lint/suspicious/noAssignInExpressions: <explanation>\n              encoder.deferred[Number(deferredId)] = Promise.race([\n                racePromise,\n                deferred\n              ]).then(\n                (resolved) => {\n                  const id2 = flatten.call(encoder, resolved);\n                  if (Array.isArray(id2)) {\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_PROMISE}${deferredId}:[[\"${TYPE_PREVIOUS_RESOLVED}\",${id2[0]}]]\n`\n                      )\n                    );\n                    encoder.index++;\n                    lastSentIndex++;\n                  } else if (id2 < 0) {\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_PROMISE}${deferredId}:${id2}\n`\n                      )\n                    );\n                  } else {\n                    const values = encoder.stringified.slice(lastSentIndex + 1).join(\",\");\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_PROMISE}${deferredId}:[${values}]\n`\n                      )\n                    );\n                    lastSentIndex = encoder.stringified.length - 1;\n                  }\n                },\n                (reason) => {\n                  if (!reason || typeof reason !== \"object\" || !(reason instanceof Error)) {\n                    reason = new Error(\"An unknown error occurred\");\n                  }\n                  const id2 = flatten.call(encoder, reason);\n                  if (Array.isArray(id2)) {\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_ERROR}${deferredId}:[[\"${TYPE_PREVIOUS_RESOLVED}\",${id2[0]}]]\n`\n                      )\n                    );\n                    encoder.index++;\n                    lastSentIndex++;\n                  } else if (id2 < 0) {\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_ERROR}${deferredId}:${id2}\n`\n                      )\n                    );\n                  } else {\n                    const values = encoder.stringified.slice(lastSentIndex + 1).join(\",\");\n                    controller.enqueue(\n                      textEncoder.encode(\n                        `${TYPE_ERROR}${deferredId}:[${values}]\n`\n                      )\n                    );\n                    lastSentIndex = encoder.stringified.length - 1;\n                  }\n                }\n              ).finally(() => {\n                delete encoder.deferred[Number(deferredId)];\n              })\n            );\n          }\n          await Promise.race(Object.values(encoder.deferred));\n        }\n        raceDone();\n      }\n      await Promise.all(Object.values(encoder.deferred));\n      controller.close();\n    }\n  });\n  return readable;\n}\n\n// lib/dom/ssr/data.ts\nasync function createRequestInit(request) {\n  let init = { signal: request.signal };\n  if (request.method !== \"GET\") {\n    init.method = request.method;\n    let contentType = request.headers.get(\"Content-Type\");\n    if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n      init.headers = { \"Content-Type\": contentType };\n      init.body = JSON.stringify(await request.json());\n    } else if (contentType && /\\btext\\/plain\\b/.test(contentType)) {\n      init.headers = { \"Content-Type\": contentType };\n      init.body = await request.text();\n    } else if (contentType && /\\bapplication\\/x-www-form-urlencoded\\b/.test(contentType)) {\n      init.body = new URLSearchParams(await request.text());\n    } else {\n      init.body = await request.formData();\n    }\n  }\n  return init;\n}\n\n// lib/dom/ssr/markup.ts\nvar ESCAPE_LOOKUP = {\n  \"&\": \"\\\\u0026\",\n  \">\": \"\\\\u003e\",\n  \"<\": \"\\\\u003c\",\n  \"\\u2028\": \"\\\\u2028\",\n  \"\\u2029\": \"\\\\u2029\"\n};\nvar ESCAPE_REGEX = /[&><\\u2028\\u2029]/g;\nfunction escapeHtml(html) {\n  return html.replace(ESCAPE_REGEX, (match) => ESCAPE_LOOKUP[match]);\n}\n\n// lib/dom/ssr/invariant.ts\nfunction invariant2(value, message) {\n  if (value === false || value === null || typeof value === \"undefined\") {\n    throw new Error(message);\n  }\n}\n\n// lib/dom/ssr/single-fetch.tsx\nvar SingleFetchRedirectSymbol = Symbol(\"SingleFetchRedirect\");\nvar SingleFetchNoResultError = class extends Error {\n};\nvar SINGLE_FETCH_REDIRECT_STATUS = 202;\nvar NO_BODY_STATUS_CODES = /* @__PURE__ */ new Set([100, 101, 204, 205]);\nfunction StreamTransfer({\n  context,\n  identifier,\n  reader,\n  textDecoder,\n  nonce\n}) {\n  if (!context.renderMeta || !context.renderMeta.didRenderScripts) {\n    return null;\n  }\n  if (!context.renderMeta.streamCache) {\n    context.renderMeta.streamCache = {};\n  }\n  let { streamCache } = context.renderMeta;\n  let promise = streamCache[identifier];\n  if (!promise) {\n    promise = streamCache[identifier] = reader.read().then((result) => {\n      streamCache[identifier].result = {\n        done: result.done,\n        value: textDecoder.decode(result.value, { stream: true })\n      };\n    }).catch((e) => {\n      streamCache[identifier].error = e;\n    });\n  }\n  if (promise.error) {\n    throw promise.error;\n  }\n  if (promise.result === void 0) {\n    throw promise;\n  }\n  let { done, value } = promise.result;\n  let scriptTag = value ? /* @__PURE__ */ React4.createElement(\n    \"script\",\n    {\n      nonce,\n      dangerouslySetInnerHTML: {\n        __html: `window.__reactRouterContext.streamController.enqueue(${escapeHtml(\n          JSON.stringify(value)\n        )});`\n      }\n    }\n  ) : null;\n  if (done) {\n    return /* @__PURE__ */ React4.createElement(React4.Fragment, null, scriptTag, /* @__PURE__ */ React4.createElement(\n      \"script\",\n      {\n        nonce,\n        dangerouslySetInnerHTML: {\n          __html: `window.__reactRouterContext.streamController.close();`\n        }\n      }\n    ));\n  } else {\n    return /* @__PURE__ */ React4.createElement(React4.Fragment, null, scriptTag, /* @__PURE__ */ React4.createElement(React4.Suspense, null, /* @__PURE__ */ React4.createElement(\n      StreamTransfer,\n      {\n        context,\n        identifier: identifier + 1,\n        reader,\n        textDecoder,\n        nonce\n      }\n    )));\n  }\n}\nfunction getTurboStreamSingleFetchDataStrategy(getRouter, manifest, routeModules, ssr, basename) {\n  let dataStrategy = getSingleFetchDataStrategyImpl(\n    getRouter,\n    (match) => {\n      let manifestRoute = manifest.routes[match.route.id];\n      invariant2(manifestRoute, \"Route not found in manifest\");\n      let routeModule = routeModules[match.route.id];\n      return {\n        hasLoader: manifestRoute.hasLoader,\n        hasClientLoader: manifestRoute.hasClientLoader,\n        hasShouldRevalidate: Boolean(routeModule?.shouldRevalidate)\n      };\n    },\n    fetchAndDecodeViaTurboStream,\n    ssr,\n    basename\n  );\n  return async (args) => args.runClientMiddleware(dataStrategy);\n}\nfunction getSingleFetchDataStrategyImpl(getRouter, getRouteInfo, fetchAndDecode, ssr, basename, shouldAllowOptOut = () => true) {\n  return async (args) => {\n    let { request, matches, fetcherKey } = args;\n    let router = getRouter();\n    if (request.method !== \"GET\") {\n      return singleFetchActionStrategy(args, fetchAndDecode, basename);\n    }\n    let foundRevalidatingServerLoader = matches.some((m) => {\n      let { hasLoader, hasClientLoader } = getRouteInfo(m);\n      return m.unstable_shouldCallHandler() && hasLoader && !hasClientLoader;\n    });\n    if (!ssr && !foundRevalidatingServerLoader) {\n      return nonSsrStrategy(args, getRouteInfo, fetchAndDecode, basename);\n    }\n    if (fetcherKey) {\n      return singleFetchLoaderFetcherStrategy(args, fetchAndDecode, basename);\n    }\n    return singleFetchLoaderNavigationStrategy(\n      args,\n      router,\n      getRouteInfo,\n      fetchAndDecode,\n      ssr,\n      basename,\n      shouldAllowOptOut\n    );\n  };\n}\nasync function singleFetchActionStrategy(args, fetchAndDecode, basename) {\n  let actionMatch = args.matches.find((m) => m.unstable_shouldCallHandler());\n  invariant2(actionMatch, \"No action match found\");\n  let actionStatus = void 0;\n  let result = await actionMatch.resolve(async (handler) => {\n    let result2 = await handler(async () => {\n      let { data: data2, status } = await fetchAndDecode(args, basename, [\n        actionMatch.route.id\n      ]);\n      actionStatus = status;\n      return unwrapSingleFetchResult(data2, actionMatch.route.id);\n    });\n    return result2;\n  });\n  if (isResponse(result.result) || isRouteErrorResponse(result.result) || isDataWithResponseInit(result.result)) {\n    return { [actionMatch.route.id]: result };\n  }\n  return {\n    [actionMatch.route.id]: {\n      type: result.type,\n      result: data(result.result, actionStatus)\n    }\n  };\n}\nasync function nonSsrStrategy(args, getRouteInfo, fetchAndDecode, basename) {\n  let matchesToLoad = args.matches.filter(\n    (m) => m.unstable_shouldCallHandler()\n  );\n  let results = {};\n  await Promise.all(\n    matchesToLoad.map(\n      (m) => m.resolve(async (handler) => {\n        try {\n          let { hasClientLoader } = getRouteInfo(m);\n          let routeId = m.route.id;\n          let result = hasClientLoader ? await handler(async () => {\n            let { data: data2 } = await fetchAndDecode(args, basename, [routeId]);\n            return unwrapSingleFetchResult(data2, routeId);\n          }) : await handler();\n          results[m.route.id] = { type: \"data\", result };\n        } catch (e) {\n          results[m.route.id] = { type: \"error\", result: e };\n        }\n      })\n    )\n  );\n  return results;\n}\nasync function singleFetchLoaderNavigationStrategy(args, router, getRouteInfo, fetchAndDecode, ssr, basename, shouldAllowOptOut = () => true) {\n  let routesParams = /* @__PURE__ */ new Set();\n  let foundOptOutRoute = false;\n  let routeDfds = args.matches.map(() => createDeferred2());\n  let singleFetchDfd = createDeferred2();\n  let results = {};\n  let resolvePromise = Promise.all(\n    args.matches.map(\n      async (m, i) => m.resolve(async (handler) => {\n        routeDfds[i].resolve();\n        let routeId = m.route.id;\n        let { hasLoader, hasClientLoader, hasShouldRevalidate } = getRouteInfo(m);\n        let defaultShouldRevalidate = !m.unstable_shouldRevalidateArgs || m.unstable_shouldRevalidateArgs.actionStatus == null || m.unstable_shouldRevalidateArgs.actionStatus < 400;\n        let shouldCall = m.unstable_shouldCallHandler(defaultShouldRevalidate);\n        if (!shouldCall) {\n          foundOptOutRoute || (foundOptOutRoute = m.unstable_shouldRevalidateArgs != null && // This is a revalidation,\n          hasLoader && // for a route with a server loader,\n          hasShouldRevalidate === true);\n          return;\n        }\n        if (shouldAllowOptOut(m) && hasClientLoader) {\n          if (hasLoader) {\n            foundOptOutRoute = true;\n          }\n          try {\n            let result = await handler(async () => {\n              let { data: data2 } = await fetchAndDecode(args, basename, [routeId]);\n              return unwrapSingleFetchResult(data2, routeId);\n            });\n            results[routeId] = { type: \"data\", result };\n          } catch (e) {\n            results[routeId] = { type: \"error\", result: e };\n          }\n          return;\n        }\n        if (hasLoader) {\n          routesParams.add(routeId);\n        }\n        try {\n          let result = await handler(async () => {\n            let data2 = await singleFetchDfd.promise;\n            return unwrapSingleFetchResult(data2, routeId);\n          });\n          results[routeId] = { type: \"data\", result };\n        } catch (e) {\n          results[routeId] = { type: \"error\", result: e };\n        }\n      })\n    )\n  );\n  await Promise.all(routeDfds.map((d) => d.promise));\n  let isInitialLoad = !router.state.initialized && router.state.navigation.state === \"idle\";\n  if ((isInitialLoad || routesParams.size === 0) && !window.__reactRouterHdrActive) {\n    singleFetchDfd.resolve({ routes: {} });\n  } else {\n    let targetRoutes = ssr && foundOptOutRoute && routesParams.size > 0 ? [...routesParams.keys()] : void 0;\n    try {\n      let data2 = await fetchAndDecode(args, basename, targetRoutes);\n      singleFetchDfd.resolve(data2.data);\n    } catch (e) {\n      singleFetchDfd.reject(e);\n    }\n  }\n  await resolvePromise;\n  await bubbleMiddlewareErrors(\n    singleFetchDfd.promise,\n    args.matches,\n    routesParams,\n    results\n  );\n  return results;\n}\nasync function bubbleMiddlewareErrors(singleFetchPromise, matches, routesParams, results) {\n  try {\n    let middlewareError;\n    let fetchedData = await singleFetchPromise;\n    if (\"routes\" in fetchedData) {\n      for (let match of matches) {\n        if (match.route.id in fetchedData.routes) {\n          let routeResult = fetchedData.routes[match.route.id];\n          if (\"error\" in routeResult) {\n            middlewareError = routeResult.error;\n            if (results[match.route.id]?.result == null) {\n              results[match.route.id] = {\n                type: \"error\",\n                result: middlewareError\n              };\n            }\n            break;\n          }\n        }\n      }\n    }\n    if (middlewareError !== void 0) {\n      Array.from(routesParams.values()).forEach((routeId) => {\n        if (results[routeId].result instanceof SingleFetchNoResultError) {\n          results[routeId].result = middlewareError;\n        }\n      });\n    }\n  } catch (e) {\n  }\n}\nasync function singleFetchLoaderFetcherStrategy(args, fetchAndDecode, basename) {\n  let fetcherMatch = args.matches.find((m) => m.unstable_shouldCallHandler());\n  invariant2(fetcherMatch, \"No fetcher match found\");\n  let routeId = fetcherMatch.route.id;\n  let result = await fetcherMatch.resolve(\n    async (handler) => handler(async () => {\n      let { data: data2 } = await fetchAndDecode(args, basename, [routeId]);\n      return unwrapSingleFetchResult(data2, routeId);\n    })\n  );\n  return { [fetcherMatch.route.id]: result };\n}\nfunction stripIndexParam(url) {\n  let indexValues = url.searchParams.getAll(\"index\");\n  url.searchParams.delete(\"index\");\n  let indexValuesToKeep = [];\n  for (let indexValue of indexValues) {\n    if (indexValue) {\n      indexValuesToKeep.push(indexValue);\n    }\n  }\n  for (let toKeep of indexValuesToKeep) {\n    url.searchParams.append(\"index\", toKeep);\n  }\n  return url;\n}\nfunction singleFetchUrl(reqUrl, basename, extension) {\n  let url = typeof reqUrl === \"string\" ? new URL(\n    reqUrl,\n    // This can be called during the SSR flow via PrefetchPageLinksImpl so\n    // don't assume window is available\n    typeof window === \"undefined\" ? \"server://singlefetch/\" : window.location.origin\n  ) : reqUrl;\n  if (url.pathname === \"/\") {\n    url.pathname = `_root.${extension}`;\n  } else if (basename && stripBasename(url.pathname, basename) === \"/\") {\n    url.pathname = `${basename.replace(/\\/$/, \"\")}/_root.${extension}`;\n  } else {\n    url.pathname = `${url.pathname.replace(/\\/$/, \"\")}.${extension}`;\n  }\n  return url;\n}\nasync function fetchAndDecodeViaTurboStream(args, basename, targetRoutes) {\n  let { request } = args;\n  let url = singleFetchUrl(request.url, basename, \"data\");\n  if (request.method === \"GET\") {\n    url = stripIndexParam(url);\n    if (targetRoutes) {\n      url.searchParams.set(\"_routes\", targetRoutes.join(\",\"));\n    }\n  }\n  let res = await fetch(url, await createRequestInit(request));\n  if (res.status >= 400 && !res.headers.has(\"X-Remix-Response\")) {\n    throw new ErrorResponseImpl(res.status, res.statusText, await res.text());\n  }\n  if (res.status === 204 && res.headers.has(\"X-Remix-Redirect\")) {\n    return {\n      status: SINGLE_FETCH_REDIRECT_STATUS,\n      data: {\n        redirect: {\n          redirect: res.headers.get(\"X-Remix-Redirect\"),\n          status: Number(res.headers.get(\"X-Remix-Status\") || \"302\"),\n          revalidate: res.headers.get(\"X-Remix-Revalidate\") === \"true\",\n          reload: res.headers.get(\"X-Remix-Reload-Document\") === \"true\",\n          replace: res.headers.get(\"X-Remix-Replace\") === \"true\"\n        }\n      }\n    };\n  }\n  if (NO_BODY_STATUS_CODES.has(res.status)) {\n    let routes = {};\n    if (targetRoutes && request.method !== \"GET\") {\n      routes[targetRoutes[0]] = { data: void 0 };\n    }\n    return {\n      status: res.status,\n      data: { routes }\n    };\n  }\n  invariant2(res.body, \"No response body to decode\");\n  try {\n    let decoded = await decodeViaTurboStream(res.body, window);\n    let data2;\n    if (request.method === \"GET\") {\n      let typed = decoded.value;\n      if (SingleFetchRedirectSymbol in typed) {\n        data2 = { redirect: typed[SingleFetchRedirectSymbol] };\n      } else {\n        data2 = { routes: typed };\n      }\n    } else {\n      let typed = decoded.value;\n      let routeId = targetRoutes?.[0];\n      invariant2(routeId, \"No routeId found for single fetch call decoding\");\n      if (\"redirect\" in typed) {\n        data2 = { redirect: typed };\n      } else {\n        data2 = { routes: { [routeId]: typed } };\n      }\n    }\n    return { status: res.status, data: data2 };\n  } catch (e) {\n    throw new Error(\"Unable to decode turbo-stream response\");\n  }\n}\nfunction decodeViaTurboStream(body, global) {\n  return decode(body, {\n    plugins: [\n      (type, ...rest) => {\n        if (type === \"SanitizedError\") {\n          let [name, message, stack] = rest;\n          let Constructor = Error;\n          if (name && name in global && typeof global[name] === \"function\") {\n            Constructor = global[name];\n          }\n          let error = new Constructor(message);\n          error.stack = stack;\n          return { value: error };\n        }\n        if (type === \"ErrorResponse\") {\n          let [data2, status, statusText] = rest;\n          return {\n            value: new ErrorResponseImpl(status, statusText, data2)\n          };\n        }\n        if (type === \"SingleFetchRedirect\") {\n          return { value: { [SingleFetchRedirectSymbol]: rest[0] } };\n        }\n        if (type === \"SingleFetchClassInstance\") {\n          return { value: rest[0] };\n        }\n        if (type === \"SingleFetchFallback\") {\n          return { value: void 0 };\n        }\n      }\n    ]\n  });\n}\nfunction unwrapSingleFetchResult(result, routeId) {\n  if (\"redirect\" in result) {\n    let {\n      redirect: location,\n      revalidate,\n      reload,\n      replace: replace2,\n      status\n    } = result.redirect;\n    throw redirect(location, {\n      status,\n      headers: {\n        // Three R's of redirecting (lol Veep)\n        ...revalidate ? { \"X-Remix-Revalidate\": \"yes\" } : null,\n        ...reload ? { \"X-Remix-Reload-Document\": \"yes\" } : null,\n        ...replace2 ? { \"X-Remix-Replace\": \"yes\" } : null\n      }\n    });\n  }\n  let routeResult = result.routes[routeId];\n  if (routeResult == null) {\n    throw new SingleFetchNoResultError(\n      `No result found for routeId \"${routeId}\"`\n    );\n  } else if (\"error\" in routeResult) {\n    throw routeResult.error;\n  } else if (\"data\" in routeResult) {\n    return routeResult.data;\n  } else {\n    throw new Error(`Invalid response found for routeId \"${routeId}\"`);\n  }\n}\nfunction createDeferred2() {\n  let resolve;\n  let reject;\n  let promise = new Promise((res, rej) => {\n    resolve = async (val) => {\n      res(val);\n      try {\n        await promise;\n      } catch (e) {\n      }\n    };\n    reject = async (error) => {\n      rej(error);\n      try {\n        await promise;\n      } catch (e) {\n      }\n    };\n  });\n  return {\n    promise,\n    //@ts-ignore\n    resolve,\n    //@ts-ignore\n    reject\n  };\n}\n\n// lib/dom/ssr/errorBoundaries.tsx\nimport * as React9 from \"react\";\n\n// lib/dom/ssr/components.tsx\nimport * as React8 from \"react\";\n\n// lib/dom/ssr/routeModules.ts\nasync function loadRouteModule(route, routeModulesCache) {\n  if (route.id in routeModulesCache) {\n    return routeModulesCache[route.id];\n  }\n  try {\n    let routeModule = await import(\n      /* @vite-ignore */\n      /* webpackIgnore: true */\n      route.module\n    );\n    routeModulesCache[route.id] = routeModule;\n    return routeModule;\n  } catch (error) {\n    console.error(\n      `Error loading route module \\`${route.module}\\`, reloading page...`\n    );\n    console.error(error);\n    if (window.__reactRouterContext && window.__reactRouterContext.isSpaMode && // @ts-expect-error\n    import.meta.hot) {\n      throw error;\n    }\n    window.location.reload();\n    return new Promise(() => {\n    });\n  }\n}\n\n// lib/dom/ssr/links.ts\nfunction getKeyedLinksForMatches(matches, routeModules, manifest) {\n  let descriptors = matches.map((match) => {\n    let module = routeModules[match.route.id];\n    let route = manifest.routes[match.route.id];\n    return [\n      route && route.css ? route.css.map((href) => ({ rel: \"stylesheet\", href })) : [],\n      module?.links?.() || []\n    ];\n  }).flat(2);\n  let preloads = getModuleLinkHrefs(matches, manifest);\n  return dedupeLinkDescriptors(descriptors, preloads);\n}\nfunction getRouteCssDescriptors(route) {\n  if (!route.css) return [];\n  return route.css.map((href) => ({ rel: \"stylesheet\", href }));\n}\nasync function prefetchRouteCss(route) {\n  if (!route.css) return;\n  let descriptors = getRouteCssDescriptors(route);\n  await Promise.all(descriptors.map(prefetchStyleLink));\n}\nasync function prefetchStyleLinks(route, routeModule) {\n  if (!route.css && !routeModule.links || !isPreloadSupported()) return;\n  let descriptors = [];\n  if (route.css) {\n    descriptors.push(...getRouteCssDescriptors(route));\n  }\n  if (routeModule.links) {\n    descriptors.push(...routeModule.links());\n  }\n  if (descriptors.length === 0) return;\n  let styleLinks = [];\n  for (let descriptor of descriptors) {\n    if (!isPageLinkDescriptor(descriptor) && descriptor.rel === \"stylesheet\") {\n      styleLinks.push({\n        ...descriptor,\n        rel: \"preload\",\n        as: \"style\"\n      });\n    }\n  }\n  await Promise.all(styleLinks.map(prefetchStyleLink));\n}\nasync function prefetchStyleLink(descriptor) {\n  return new Promise((resolve) => {\n    if (descriptor.media && !window.matchMedia(descriptor.media).matches || document.querySelector(\n      `link[rel=\"stylesheet\"][href=\"${descriptor.href}\"]`\n    )) {\n      return resolve();\n    }\n    let link = document.createElement(\"link\");\n    Object.assign(link, descriptor);\n    function removeLink() {\n      if (document.head.contains(link)) {\n        document.head.removeChild(link);\n      }\n    }\n    link.onload = () => {\n      removeLink();\n      resolve();\n    };\n    link.onerror = () => {\n      removeLink();\n      resolve();\n    };\n    document.head.appendChild(link);\n  });\n}\nfunction isPageLinkDescriptor(object) {\n  return object != null && typeof object.page === \"string\";\n}\nfunction isHtmlLinkDescriptor(object) {\n  if (object == null) {\n    return false;\n  }\n  if (object.href == null) {\n    return object.rel === \"preload\" && typeof object.imageSrcSet === \"string\" && typeof object.imageSizes === \"string\";\n  }\n  return typeof object.rel === \"string\" && typeof object.href === \"string\";\n}\nasync function getKeyedPrefetchLinks(matches, manifest, routeModules) {\n  let links = await Promise.all(\n    matches.map(async (match) => {\n      let route = manifest.routes[match.route.id];\n      if (route) {\n        let mod = await loadRouteModule(route, routeModules);\n        return mod.links ? mod.links() : [];\n      }\n      return [];\n    })\n  );\n  return dedupeLinkDescriptors(\n    links.flat(1).filter(isHtmlLinkDescriptor).filter((link) => link.rel === \"stylesheet\" || link.rel === \"preload\").map(\n      (link) => link.rel === \"stylesheet\" ? { ...link, rel: \"prefetch\", as: \"style\" } : { ...link, rel: \"prefetch\" }\n    )\n  );\n}\nfunction getNewMatchesForLinks(page, nextMatches, currentMatches, manifest, location, mode) {\n  let isNew = (match, index) => {\n    if (!currentMatches[index]) return true;\n    return match.route.id !== currentMatches[index].route.id;\n  };\n  let matchPathChanged = (match, index) => {\n    return (\n      // param change, /users/123 -> /users/456\n      currentMatches[index].pathname !== match.pathname || // splat param changed, which is not present in match.path\n      // e.g. /files/images/avatar.jpg -> files/finances.xls\n      currentMatches[index].route.path?.endsWith(\"*\") && currentMatches[index].params[\"*\"] !== match.params[\"*\"]\n    );\n  };\n  if (mode === \"assets\") {\n    return nextMatches.filter(\n      (match, index) => isNew(match, index) || matchPathChanged(match, index)\n    );\n  }\n  if (mode === \"data\") {\n    return nextMatches.filter((match, index) => {\n      let manifestRoute = manifest.routes[match.route.id];\n      if (!manifestRoute || !manifestRoute.hasLoader) {\n        return false;\n      }\n      if (isNew(match, index) || matchPathChanged(match, index)) {\n        return true;\n      }\n      if (match.route.shouldRevalidate) {\n        let routeChoice = match.route.shouldRevalidate({\n          currentUrl: new URL(\n            location.pathname + location.search + location.hash,\n            window.origin\n          ),\n          currentParams: currentMatches[0]?.params || {},\n          nextUrl: new URL(page, window.origin),\n          nextParams: match.params,\n          defaultShouldRevalidate: true\n        });\n        if (typeof routeChoice === \"boolean\") {\n          return routeChoice;\n        }\n      }\n      return true;\n    });\n  }\n  return [];\n}\nfunction getModuleLinkHrefs(matches, manifest, { includeHydrateFallback } = {}) {\n  return dedupeHrefs(\n    matches.map((match) => {\n      let route = manifest.routes[match.route.id];\n      if (!route) return [];\n      let hrefs = [route.module];\n      if (route.clientActionModule) {\n        hrefs = hrefs.concat(route.clientActionModule);\n      }\n      if (route.clientLoaderModule) {\n        hrefs = hrefs.concat(route.clientLoaderModule);\n      }\n      if (includeHydrateFallback && route.hydrateFallbackModule) {\n        hrefs = hrefs.concat(route.hydrateFallbackModule);\n      }\n      if (route.imports) {\n        hrefs = hrefs.concat(route.imports);\n      }\n      return hrefs;\n    }).flat(1)\n  );\n}\nfunction dedupeHrefs(hrefs) {\n  return [...new Set(hrefs)];\n}\nfunction sortKeys(obj) {\n  let sorted = {};\n  let keys = Object.keys(obj).sort();\n  for (let key of keys) {\n    sorted[key] = obj[key];\n  }\n  return sorted;\n}\nfunction dedupeLinkDescriptors(descriptors, preloads) {\n  let set = /* @__PURE__ */ new Set();\n  let preloadsSet = new Set(preloads);\n  return descriptors.reduce((deduped, descriptor) => {\n    let alreadyModulePreload = preloads && !isPageLinkDescriptor(descriptor) && descriptor.as === \"script\" && descriptor.href && preloadsSet.has(descriptor.href);\n    if (alreadyModulePreload) {\n      return deduped;\n    }\n    let key = JSON.stringify(sortKeys(descriptor));\n    if (!set.has(key)) {\n      set.add(key);\n      deduped.push({ key, link: descriptor });\n    }\n    return deduped;\n  }, []);\n}\nvar _isPreloadSupported;\nfunction isPreloadSupported() {\n  if (_isPreloadSupported !== void 0) {\n    return _isPreloadSupported;\n  }\n  let el = document.createElement(\"link\");\n  _isPreloadSupported = el.relList.supports(\"preload\");\n  el = null;\n  return _isPreloadSupported;\n}\n\n// lib/dom/ssr/fog-of-war.ts\nimport * as React7 from \"react\";\n\n// lib/dom/ssr/routes.tsx\nimport * as React6 from \"react\";\n\n// lib/dom/ssr/fallback.tsx\nimport * as React5 from \"react\";\nfunction RemixRootDefaultHydrateFallback() {\n  return /* @__PURE__ */ React5.createElement(BoundaryShell, { title: \"Loading...\", renderScripts: true }, ENABLE_DEV_WARNINGS ? /* @__PURE__ */ React5.createElement(\n    \"script\",\n    {\n      dangerouslySetInnerHTML: {\n        __html: `\n              console.log(\n                \"\\u{1F4BF} Hey developer \\u{1F44B}. You can provide a way better UX than this \" +\n                \"when your app is loading JS modules and/or running \\`clientLoader\\` \" +\n                \"functions. Check out https://reactrouter.com/start/framework/route-module#hydratefallback \" +\n                \"for more information.\"\n              );\n            `\n      }\n    }\n  ) : null);\n}\n\n// lib/dom/ssr/routes.tsx\nfunction groupRoutesByParentId(manifest) {\n  let routes = {};\n  Object.values(manifest).forEach((route) => {\n    if (route) {\n      let parentId = route.parentId || \"\";\n      if (!routes[parentId]) {\n        routes[parentId] = [];\n      }\n      routes[parentId].push(route);\n    }\n  });\n  return routes;\n}\nfunction getRouteComponents(route, routeModule, isSpaMode) {\n  let Component4 = getRouteModuleComponent(routeModule);\n  let HydrateFallback = routeModule.HydrateFallback && (!isSpaMode || route.id === \"root\") ? routeModule.HydrateFallback : route.id === \"root\" ? RemixRootDefaultHydrateFallback : void 0;\n  let ErrorBoundary = routeModule.ErrorBoundary ? routeModule.ErrorBoundary : route.id === \"root\" ? () => /* @__PURE__ */ React6.createElement(RemixRootDefaultErrorBoundary, { error: useRouteError() }) : void 0;\n  if (route.id === \"root\" && routeModule.Layout) {\n    return {\n      ...Component4 ? {\n        element: /* @__PURE__ */ React6.createElement(routeModule.Layout, null, /* @__PURE__ */ React6.createElement(Component4, null))\n      } : { Component: Component4 },\n      ...ErrorBoundary ? {\n        errorElement: /* @__PURE__ */ React6.createElement(routeModule.Layout, null, /* @__PURE__ */ React6.createElement(ErrorBoundary, null))\n      } : { ErrorBoundary },\n      ...HydrateFallback ? {\n        hydrateFallbackElement: /* @__PURE__ */ React6.createElement(routeModule.Layout, null, /* @__PURE__ */ React6.createElement(HydrateFallback, null))\n      } : { HydrateFallback }\n    };\n  }\n  return { Component: Component4, ErrorBoundary, HydrateFallback };\n}\nfunction createServerRoutes(manifest, routeModules, future, isSpaMode, parentId = \"\", routesByParentId = groupRoutesByParentId(manifest), spaModeLazyPromise = Promise.resolve({ Component: () => null })) {\n  return (routesByParentId[parentId] || []).map((route) => {\n    let routeModule = routeModules[route.id];\n    invariant2(\n      routeModule,\n      \"No `routeModule` available to create server routes\"\n    );\n    let dataRoute = {\n      ...getRouteComponents(route, routeModule, isSpaMode),\n      caseSensitive: route.caseSensitive,\n      id: route.id,\n      index: route.index,\n      path: route.path,\n      handle: routeModule.handle,\n      // For SPA Mode, all routes are lazy except root.  However we tell the\n      // router root is also lazy here too since we don't need a full\n      // implementation - we just need a `lazy` prop to tell the RR rendering\n      // where to stop which is always at the root route in SPA mode\n      lazy: isSpaMode ? () => spaModeLazyPromise : void 0,\n      // For partial hydration rendering, we need to indicate when the route\n      // has a loader/clientLoader, but it won't ever be called during the static\n      // render, so just give it a no-op function so we can render down to the\n      // proper fallback\n      loader: route.hasLoader || route.hasClientLoader ? () => null : void 0\n      // We don't need middleware/action/shouldRevalidate on these routes since\n      // they're for a static render\n    };\n    let children = createServerRoutes(\n      manifest,\n      routeModules,\n      future,\n      isSpaMode,\n      route.id,\n      routesByParentId,\n      spaModeLazyPromise\n    );\n    if (children.length > 0) dataRoute.children = children;\n    return dataRoute;\n  });\n}\nfunction createClientRoutesWithHMRRevalidationOptOut(needsRevalidation, manifest, routeModulesCache, initialState, ssr, isSpaMode) {\n  return createClientRoutes(\n    manifest,\n    routeModulesCache,\n    initialState,\n    ssr,\n    isSpaMode,\n    \"\",\n    groupRoutesByParentId(manifest),\n    needsRevalidation\n  );\n}\nfunction preventInvalidServerHandlerCall(type, route) {\n  if (type === \"loader\" && !route.hasLoader || type === \"action\" && !route.hasAction) {\n    let fn = type === \"action\" ? \"serverAction()\" : \"serverLoader()\";\n    let msg = `You are trying to call ${fn} on a route that does not have a server ${type} (routeId: \"${route.id}\")`;\n    console.error(msg);\n    throw new ErrorResponseImpl(400, \"Bad Request\", new Error(msg), true);\n  }\n}\nfunction noActionDefinedError(type, routeId) {\n  let article = type === \"clientAction\" ? \"a\" : \"an\";\n  let msg = `Route \"${routeId}\" does not have ${article} ${type}, but you are trying to submit to it. To fix this, please add ${article} \\`${type}\\` function to the route`;\n  console.error(msg);\n  throw new ErrorResponseImpl(405, \"Method Not Allowed\", new Error(msg), true);\n}\nfunction createClientRoutes(manifest, routeModulesCache, initialState, ssr, isSpaMode, parentId = \"\", routesByParentId = groupRoutesByParentId(manifest), needsRevalidation) {\n  return (routesByParentId[parentId] || []).map((route) => {\n    let routeModule = routeModulesCache[route.id];\n    function fetchServerHandler(singleFetch) {\n      invariant2(\n        typeof singleFetch === \"function\",\n        \"No single fetch function available for route handler\"\n      );\n      return singleFetch();\n    }\n    function fetchServerLoader(singleFetch) {\n      if (!route.hasLoader) return Promise.resolve(null);\n      return fetchServerHandler(singleFetch);\n    }\n    function fetchServerAction(singleFetch) {\n      if (!route.hasAction) {\n        throw noActionDefinedError(\"action\", route.id);\n      }\n      return fetchServerHandler(singleFetch);\n    }\n    function prefetchModule(modulePath) {\n      import(\n        /* @vite-ignore */\n        /* webpackIgnore: true */\n        modulePath\n      );\n    }\n    function prefetchRouteModuleChunks(route2) {\n      if (route2.clientActionModule) {\n        prefetchModule(route2.clientActionModule);\n      }\n      if (route2.clientLoaderModule) {\n        prefetchModule(route2.clientLoaderModule);\n      }\n    }\n    async function prefetchStylesAndCallHandler(handler) {\n      let cachedModule = routeModulesCache[route.id];\n      let linkPrefetchPromise = cachedModule ? prefetchStyleLinks(route, cachedModule) : Promise.resolve();\n      try {\n        return handler();\n      } finally {\n        await linkPrefetchPromise;\n      }\n    }\n    let dataRoute = {\n      id: route.id,\n      index: route.index,\n      path: route.path\n    };\n    if (routeModule) {\n      Object.assign(dataRoute, {\n        ...dataRoute,\n        ...getRouteComponents(route, routeModule, isSpaMode),\n        middleware: routeModule.clientMiddleware,\n        handle: routeModule.handle,\n        shouldRevalidate: getShouldRevalidateFunction(\n          dataRoute.path,\n          routeModule,\n          route,\n          ssr,\n          needsRevalidation\n        )\n      });\n      let hasInitialData = initialState && initialState.loaderData && route.id in initialState.loaderData;\n      let initialData = hasInitialData ? initialState?.loaderData?.[route.id] : void 0;\n      let hasInitialError = initialState && initialState.errors && route.id in initialState.errors;\n      let initialError = hasInitialError ? initialState?.errors?.[route.id] : void 0;\n      let isHydrationRequest = needsRevalidation == null && (routeModule.clientLoader?.hydrate === true || !route.hasLoader);\n      dataRoute.loader = async ({ request, params, context }, singleFetch) => {\n        try {\n          let result = await prefetchStylesAndCallHandler(async () => {\n            invariant2(\n              routeModule,\n              \"No `routeModule` available for critical-route loader\"\n            );\n            if (!routeModule.clientLoader) {\n              return fetchServerLoader(singleFetch);\n            }\n            return routeModule.clientLoader({\n              request,\n              params,\n              context,\n              async serverLoader() {\n                preventInvalidServerHandlerCall(\"loader\", route);\n                if (isHydrationRequest) {\n                  if (hasInitialData) {\n                    return initialData;\n                  }\n                  if (hasInitialError) {\n                    throw initialError;\n                  }\n                }\n                return fetchServerLoader(singleFetch);\n              }\n            });\n          });\n          return result;\n        } finally {\n          isHydrationRequest = false;\n        }\n      };\n      dataRoute.loader.hydrate = shouldHydrateRouteLoader(\n        route.id,\n        routeModule.clientLoader,\n        route.hasLoader,\n        isSpaMode\n      );\n      dataRoute.action = ({ request, params, context }, singleFetch) => {\n        return prefetchStylesAndCallHandler(async () => {\n          invariant2(\n            routeModule,\n            \"No `routeModule` available for critical-route action\"\n          );\n          if (!routeModule.clientAction) {\n            if (isSpaMode) {\n              throw noActionDefinedError(\"clientAction\", route.id);\n            }\n            return fetchServerAction(singleFetch);\n          }\n          return routeModule.clientAction({\n            request,\n            params,\n            context,\n            async serverAction() {\n              preventInvalidServerHandlerCall(\"action\", route);\n              return fetchServerAction(singleFetch);\n            }\n          });\n        });\n      };\n    } else {\n      if (!route.hasClientLoader) {\n        dataRoute.loader = (_, singleFetch) => prefetchStylesAndCallHandler(() => {\n          return fetchServerLoader(singleFetch);\n        });\n      }\n      if (!route.hasClientAction) {\n        dataRoute.action = (_, singleFetch) => prefetchStylesAndCallHandler(() => {\n          if (isSpaMode) {\n            throw noActionDefinedError(\"clientAction\", route.id);\n          }\n          return fetchServerAction(singleFetch);\n        });\n      }\n      let lazyRoutePromise;\n      async function getLazyRoute() {\n        if (lazyRoutePromise) {\n          return await lazyRoutePromise;\n        }\n        lazyRoutePromise = (async () => {\n          if (route.clientLoaderModule || route.clientActionModule) {\n            await new Promise((resolve) => setTimeout(resolve, 0));\n          }\n          let routeModulePromise = loadRouteModuleWithBlockingLinks(\n            route,\n            routeModulesCache\n          );\n          prefetchRouteModuleChunks(route);\n          return await routeModulePromise;\n        })();\n        return await lazyRoutePromise;\n      }\n      dataRoute.lazy = {\n        loader: route.hasClientLoader ? async () => {\n          let { clientLoader } = route.clientLoaderModule ? await import(\n            /* @vite-ignore */\n            /* webpackIgnore: true */\n            route.clientLoaderModule\n          ) : await getLazyRoute();\n          invariant2(clientLoader, \"No `clientLoader` export found\");\n          return (args, singleFetch) => clientLoader({\n            ...args,\n            async serverLoader() {\n              preventInvalidServerHandlerCall(\"loader\", route);\n              return fetchServerLoader(singleFetch);\n            }\n          });\n        } : void 0,\n        action: route.hasClientAction ? async () => {\n          let clientActionPromise = route.clientActionModule ? import(\n            /* @vite-ignore */\n            /* webpackIgnore: true */\n            route.clientActionModule\n          ) : getLazyRoute();\n          prefetchRouteModuleChunks(route);\n          let { clientAction } = await clientActionPromise;\n          invariant2(clientAction, \"No `clientAction` export found\");\n          return (args, singleFetch) => clientAction({\n            ...args,\n            async serverAction() {\n              preventInvalidServerHandlerCall(\"action\", route);\n              return fetchServerAction(singleFetch);\n            }\n          });\n        } : void 0,\n        middleware: route.hasClientMiddleware ? async () => {\n          let { clientMiddleware } = route.clientMiddlewareModule ? await import(\n            /* @vite-ignore */\n            /* webpackIgnore: true */\n            route.clientMiddlewareModule\n          ) : await getLazyRoute();\n          invariant2(clientMiddleware, \"No `clientMiddleware` export found\");\n          return clientMiddleware;\n        } : void 0,\n        shouldRevalidate: async () => {\n          let lazyRoute = await getLazyRoute();\n          return getShouldRevalidateFunction(\n            dataRoute.path,\n            lazyRoute,\n            route,\n            ssr,\n            needsRevalidation\n          );\n        },\n        handle: async () => (await getLazyRoute()).handle,\n        // No need to wrap these in layout since the root route is never\n        // loaded via route.lazy()\n        Component: async () => (await getLazyRoute()).Component,\n        ErrorBoundary: route.hasErrorBoundary ? async () => (await getLazyRoute()).ErrorBoundary : void 0\n      };\n    }\n    let children = createClientRoutes(\n      manifest,\n      routeModulesCache,\n      initialState,\n      ssr,\n      isSpaMode,\n      route.id,\n      routesByParentId,\n      needsRevalidation\n    );\n    if (children.length > 0) dataRoute.children = children;\n    return dataRoute;\n  });\n}\nfunction getShouldRevalidateFunction(path, route, manifestRoute, ssr, needsRevalidation) {\n  if (needsRevalidation) {\n    return wrapShouldRevalidateForHdr(\n      manifestRoute.id,\n      route.shouldRevalidate,\n      needsRevalidation\n    );\n  }\n  if (!ssr && manifestRoute.hasLoader && !manifestRoute.hasClientLoader) {\n    let myParams = path ? compilePath(path)[1].map((p) => p.paramName) : [];\n    const didParamsChange = (opts) => myParams.some((p) => opts.currentParams[p] !== opts.nextParams[p]);\n    if (route.shouldRevalidate) {\n      let fn = route.shouldRevalidate;\n      return (opts) => fn({\n        ...opts,\n        defaultShouldRevalidate: didParamsChange(opts)\n      });\n    } else {\n      return (opts) => didParamsChange(opts);\n    }\n  }\n  if (ssr && route.shouldRevalidate) {\n    let fn = route.shouldRevalidate;\n    return (opts) => fn({ ...opts, defaultShouldRevalidate: true });\n  }\n  return route.shouldRevalidate;\n}\nfunction wrapShouldRevalidateForHdr(routeId, routeShouldRevalidate, needsRevalidation) {\n  let handledRevalidation = false;\n  return (arg) => {\n    if (!handledRevalidation) {\n      handledRevalidation = true;\n      return needsRevalidation.has(routeId);\n    }\n    return routeShouldRevalidate ? routeShouldRevalidate(arg) : arg.defaultShouldRevalidate;\n  };\n}\nasync function loadRouteModuleWithBlockingLinks(route, routeModules) {\n  let routeModulePromise = loadRouteModule(route, routeModules);\n  let prefetchRouteCssPromise = prefetchRouteCss(route);\n  let routeModule = await routeModulePromise;\n  await Promise.all([\n    prefetchRouteCssPromise,\n    prefetchStyleLinks(route, routeModule)\n  ]);\n  return {\n    Component: getRouteModuleComponent(routeModule),\n    ErrorBoundary: routeModule.ErrorBoundary,\n    clientMiddleware: routeModule.clientMiddleware,\n    clientAction: routeModule.clientAction,\n    clientLoader: routeModule.clientLoader,\n    handle: routeModule.handle,\n    links: routeModule.links,\n    meta: routeModule.meta,\n    shouldRevalidate: routeModule.shouldRevalidate\n  };\n}\nfunction getRouteModuleComponent(routeModule) {\n  if (routeModule.default == null) return void 0;\n  let isEmptyObject = typeof routeModule.default === \"object\" && Object.keys(routeModule.default).length === 0;\n  if (!isEmptyObject) {\n    return routeModule.default;\n  }\n}\nfunction shouldHydrateRouteLoader(routeId, clientLoader, hasLoader, isSpaMode) {\n  return isSpaMode && routeId !== \"root\" || clientLoader != null && (clientLoader.hydrate === true || hasLoader !== true);\n}\n\n// lib/dom/ssr/fog-of-war.ts\nvar nextPaths = /* @__PURE__ */ new Set();\nvar discoveredPathsMaxSize = 1e3;\nvar discoveredPaths = /* @__PURE__ */ new Set();\nvar URL_LIMIT = 7680;\nfunction isFogOfWarEnabled(routeDiscovery, ssr) {\n  return routeDiscovery.mode === \"lazy\" && ssr === true;\n}\nfunction getPartialManifest({ sri, ...manifest }, router) {\n  let routeIds = new Set(router.state.matches.map((m) => m.route.id));\n  let segments = router.state.location.pathname.split(\"/\").filter(Boolean);\n  let paths = [\"/\"];\n  segments.pop();\n  while (segments.length > 0) {\n    paths.push(`/${segments.join(\"/\")}`);\n    segments.pop();\n  }\n  paths.forEach((path) => {\n    let matches = matchRoutes(router.routes, path, router.basename);\n    if (matches) {\n      matches.forEach((m) => routeIds.add(m.route.id));\n    }\n  });\n  let initialRoutes = [...routeIds].reduce(\n    (acc, id) => Object.assign(acc, { [id]: manifest.routes[id] }),\n    {}\n  );\n  return {\n    ...manifest,\n    routes: initialRoutes,\n    sri: sri ? true : void 0\n  };\n}\nfunction getPatchRoutesOnNavigationFunction(manifest, routeModules, ssr, routeDiscovery, isSpaMode, basename) {\n  if (!isFogOfWarEnabled(routeDiscovery, ssr)) {\n    return void 0;\n  }\n  return async ({ path, patch, signal, fetcherKey }) => {\n    if (discoveredPaths.has(path)) {\n      return;\n    }\n    await fetchAndApplyManifestPatches(\n      [path],\n      fetcherKey ? window.location.href : path,\n      manifest,\n      routeModules,\n      ssr,\n      isSpaMode,\n      basename,\n      routeDiscovery.manifestPath,\n      patch,\n      signal\n    );\n  };\n}\nfunction useFogOFWarDiscovery(router, manifest, routeModules, ssr, routeDiscovery, isSpaMode) {\n  React7.useEffect(() => {\n    if (!isFogOfWarEnabled(routeDiscovery, ssr) || // @ts-expect-error - TS doesn't know about this yet\n    window.navigator?.connection?.saveData === true) {\n      return;\n    }\n    function registerElement(el) {\n      let path = el.tagName === \"FORM\" ? el.getAttribute(\"action\") : el.getAttribute(\"href\");\n      if (!path) {\n        return;\n      }\n      let pathname = el.tagName === \"A\" ? el.pathname : new URL(path, window.location.origin).pathname;\n      if (!discoveredPaths.has(pathname)) {\n        nextPaths.add(pathname);\n      }\n    }\n    async function fetchPatches() {\n      document.querySelectorAll(\"a[data-discover], form[data-discover]\").forEach(registerElement);\n      let lazyPaths = Array.from(nextPaths.keys()).filter((path) => {\n        if (discoveredPaths.has(path)) {\n          nextPaths.delete(path);\n          return false;\n        }\n        return true;\n      });\n      if (lazyPaths.length === 0) {\n        return;\n      }\n      try {\n        await fetchAndApplyManifestPatches(\n          lazyPaths,\n          null,\n          manifest,\n          routeModules,\n          ssr,\n          isSpaMode,\n          router.basename,\n          routeDiscovery.manifestPath,\n          router.patchRoutes\n        );\n      } catch (e) {\n        console.error(\"Failed to fetch manifest patches\", e);\n      }\n    }\n    let debouncedFetchPatches = debounce(fetchPatches, 100);\n    fetchPatches();\n    let observer = new MutationObserver(() => debouncedFetchPatches());\n    observer.observe(document.documentElement, {\n      subtree: true,\n      childList: true,\n      attributes: true,\n      attributeFilter: [\"data-discover\", \"href\", \"action\"]\n    });\n    return () => observer.disconnect();\n  }, [ssr, isSpaMode, manifest, routeModules, router, routeDiscovery]);\n}\nfunction getManifestPath(_manifestPath, basename) {\n  let manifestPath = _manifestPath || \"/__manifest\";\n  if (basename == null) {\n    return manifestPath;\n  }\n  return `${basename}${manifestPath}`.replace(/\\/+/g, \"/\");\n}\nvar MANIFEST_VERSION_STORAGE_KEY = \"react-router-manifest-version\";\nasync function fetchAndApplyManifestPatches(paths, errorReloadPath, manifest, routeModules, ssr, isSpaMode, basename, manifestPath, patchRoutes, signal) {\n  const searchParams = new URLSearchParams();\n  searchParams.set(\"paths\", paths.sort().join(\",\"));\n  searchParams.set(\"version\", manifest.version);\n  let url = new URL(\n    getManifestPath(manifestPath, basename),\n    window.location.origin\n  );\n  url.search = searchParams.toString();\n  if (url.toString().length > URL_LIMIT) {\n    nextPaths.clear();\n    return;\n  }\n  let serverPatches;\n  try {\n    let res = await fetch(url, { signal });\n    if (!res.ok) {\n      throw new Error(`${res.status} ${res.statusText}`);\n    } else if (res.status === 204 && res.headers.has(\"X-Remix-Reload-Document\")) {\n      if (!errorReloadPath) {\n        console.warn(\n          \"Detected a manifest version mismatch during eager route discovery. The next navigation/fetch to an undiscovered route will result in a new document navigation to sync up with the latest manifest.\"\n        );\n        return;\n      }\n      try {\n        if (sessionStorage.getItem(MANIFEST_VERSION_STORAGE_KEY) === manifest.version) {\n          console.error(\n            \"Unable to discover routes due to manifest version mismatch.\"\n          );\n          return;\n        }\n        sessionStorage.setItem(MANIFEST_VERSION_STORAGE_KEY, manifest.version);\n      } catch {\n      }\n      window.location.href = errorReloadPath;\n      console.warn(\"Detected manifest version mismatch, reloading...\");\n      await new Promise(() => {\n      });\n    } else if (res.status >= 400) {\n      throw new Error(await res.text());\n    }\n    try {\n      sessionStorage.removeItem(MANIFEST_VERSION_STORAGE_KEY);\n    } catch {\n    }\n    serverPatches = await res.json();\n  } catch (e) {\n    if (signal?.aborted) return;\n    throw e;\n  }\n  let knownRoutes = new Set(Object.keys(manifest.routes));\n  let patches = Object.values(serverPatches).reduce((acc, route) => {\n    if (route && !knownRoutes.has(route.id)) {\n      acc[route.id] = route;\n    }\n    return acc;\n  }, {});\n  Object.assign(manifest.routes, patches);\n  paths.forEach((p) => addToFifoQueue(p, discoveredPaths));\n  let parentIds = /* @__PURE__ */ new Set();\n  Object.values(patches).forEach((patch) => {\n    if (patch && (!patch.parentId || !patches[patch.parentId])) {\n      parentIds.add(patch.parentId);\n    }\n  });\n  parentIds.forEach(\n    (parentId) => patchRoutes(\n      parentId || null,\n      createClientRoutes(patches, routeModules, null, ssr, isSpaMode, parentId)\n    )\n  );\n}\nfunction addToFifoQueue(path, queue) {\n  if (queue.size >= discoveredPathsMaxSize) {\n    let first = queue.values().next().value;\n    queue.delete(first);\n  }\n  queue.add(path);\n}\nfunction debounce(callback, wait) {\n  let timeoutId;\n  return (...args) => {\n    window.clearTimeout(timeoutId);\n    timeoutId = window.setTimeout(() => callback(...args), wait);\n  };\n}\n\n// lib/dom/ssr/components.tsx\nfunction useDataRouterContext2() {\n  let context = React8.useContext(DataRouterContext);\n  invariant2(\n    context,\n    \"You must render this element inside a <DataRouterContext.Provider> element\"\n  );\n  return context;\n}\nfunction useDataRouterStateContext() {\n  let context = React8.useContext(DataRouterStateContext);\n  invariant2(\n    context,\n    \"You must render this element inside a <DataRouterStateContext.Provider> element\"\n  );\n  return context;\n}\nvar FrameworkContext = React8.createContext(void 0);\nFrameworkContext.displayName = \"FrameworkContext\";\nfunction useFrameworkContext() {\n  let context = React8.useContext(FrameworkContext);\n  invariant2(\n    context,\n    \"You must render this element inside a <HydratedRouter> element\"\n  );\n  return context;\n}\nfunction usePrefetchBehavior(prefetch, theirElementProps) {\n  let frameworkContext = React8.useContext(FrameworkContext);\n  let [maybePrefetch, setMaybePrefetch] = React8.useState(false);\n  let [shouldPrefetch, setShouldPrefetch] = React8.useState(false);\n  let { onFocus, onBlur, onMouseEnter, onMouseLeave, onTouchStart } = theirElementProps;\n  let ref = React8.useRef(null);\n  React8.useEffect(() => {\n    if (prefetch === \"render\") {\n      setShouldPrefetch(true);\n    }\n    if (prefetch === \"viewport\") {\n      let callback = (entries) => {\n        entries.forEach((entry) => {\n          setShouldPrefetch(entry.isIntersecting);\n        });\n      };\n      let observer = new IntersectionObserver(callback, { threshold: 0.5 });\n      if (ref.current) observer.observe(ref.current);\n      return () => {\n        observer.disconnect();\n      };\n    }\n  }, [prefetch]);\n  React8.useEffect(() => {\n    if (maybePrefetch) {\n      let id = setTimeout(() => {\n        setShouldPrefetch(true);\n      }, 100);\n      return () => {\n        clearTimeout(id);\n      };\n    }\n  }, [maybePrefetch]);\n  let setIntent = () => {\n    setMaybePrefetch(true);\n  };\n  let cancelIntent = () => {\n    setMaybePrefetch(false);\n    setShouldPrefetch(false);\n  };\n  if (!frameworkContext) {\n    return [false, ref, {}];\n  }\n  if (prefetch !== \"intent\") {\n    return [shouldPrefetch, ref, {}];\n  }\n  return [\n    shouldPrefetch,\n    ref,\n    {\n      onFocus: composeEventHandlers(onFocus, setIntent),\n      onBlur: composeEventHandlers(onBlur, cancelIntent),\n      onMouseEnter: composeEventHandlers(onMouseEnter, setIntent),\n      onMouseLeave: composeEventHandlers(onMouseLeave, cancelIntent),\n      onTouchStart: composeEventHandlers(onTouchStart, setIntent)\n    }\n  ];\n}\nfunction composeEventHandlers(theirHandler, ourHandler) {\n  return (event) => {\n    theirHandler && theirHandler(event);\n    if (!event.defaultPrevented) {\n      ourHandler(event);\n    }\n  };\n}\nfunction getActiveMatches(matches, errors, isSpaMode) {\n  if (isSpaMode && !isHydrated) {\n    return [matches[0]];\n  }\n  if (errors) {\n    let errorIdx = matches.findIndex((m) => errors[m.route.id] !== void 0);\n    return matches.slice(0, errorIdx + 1);\n  }\n  return matches;\n}\nvar CRITICAL_CSS_DATA_ATTRIBUTE = \"data-react-router-critical-css\";\nfunction Links({ nonce }) {\n  let { isSpaMode, manifest, routeModules, criticalCss } = useFrameworkContext();\n  let { errors, matches: routerMatches } = useDataRouterStateContext();\n  let matches = getActiveMatches(routerMatches, errors, isSpaMode);\n  let keyedLinks = React8.useMemo(\n    () => getKeyedLinksForMatches(matches, routeModules, manifest),\n    [matches, routeModules, manifest]\n  );\n  return /* @__PURE__ */ React8.createElement(React8.Fragment, null, typeof criticalCss === \"string\" ? /* @__PURE__ */ React8.createElement(\n    \"style\",\n    {\n      ...{ [CRITICAL_CSS_DATA_ATTRIBUTE]: \"\" },\n      dangerouslySetInnerHTML: { __html: criticalCss }\n    }\n  ) : null, typeof criticalCss === \"object\" ? /* @__PURE__ */ React8.createElement(\n    \"link\",\n    {\n      ...{ [CRITICAL_CSS_DATA_ATTRIBUTE]: \"\" },\n      rel: \"stylesheet\",\n      href: criticalCss.href,\n      nonce\n    }\n  ) : null, keyedLinks.map(\n    ({ key, link }) => isPageLinkDescriptor(link) ? /* @__PURE__ */ React8.createElement(PrefetchPageLinks, { key, nonce, ...link }) : /* @__PURE__ */ React8.createElement(\"link\", { key, nonce, ...link })\n  ));\n}\nfunction PrefetchPageLinks({ page, ...linkProps }) {\n  let { router } = useDataRouterContext2();\n  let matches = React8.useMemo(\n    () => matchRoutes(router.routes, page, router.basename),\n    [router.routes, page, router.basename]\n  );\n  if (!matches) {\n    return null;\n  }\n  return /* @__PURE__ */ React8.createElement(PrefetchPageLinksImpl, { page, matches, ...linkProps });\n}\nfunction useKeyedPrefetchLinks(matches) {\n  let { manifest, routeModules } = useFrameworkContext();\n  let [keyedPrefetchLinks, setKeyedPrefetchLinks] = React8.useState([]);\n  React8.useEffect(() => {\n    let interrupted = false;\n    void getKeyedPrefetchLinks(matches, manifest, routeModules).then(\n      (links) => {\n        if (!interrupted) {\n          setKeyedPrefetchLinks(links);\n        }\n      }\n    );\n    return () => {\n      interrupted = true;\n    };\n  }, [matches, manifest, routeModules]);\n  return keyedPrefetchLinks;\n}\nfunction PrefetchPageLinksImpl({\n  page,\n  matches: nextMatches,\n  ...linkProps\n}) {\n  let location = useLocation();\n  let { manifest, routeModules } = useFrameworkContext();\n  let { basename } = useDataRouterContext2();\n  let { loaderData, matches } = useDataRouterStateContext();\n  let newMatchesForData = React8.useMemo(\n    () => getNewMatchesForLinks(\n      page,\n      nextMatches,\n      matches,\n      manifest,\n      location,\n      \"data\"\n    ),\n    [page, nextMatches, matches, manifest, location]\n  );\n  let newMatchesForAssets = React8.useMemo(\n    () => getNewMatchesForLinks(\n      page,\n      nextMatches,\n      matches,\n      manifest,\n      location,\n      \"assets\"\n    ),\n    [page, nextMatches, matches, manifest, location]\n  );\n  let dataHrefs = React8.useMemo(() => {\n    if (page === location.pathname + location.search + location.hash) {\n      return [];\n    }\n    let routesParams = /* @__PURE__ */ new Set();\n    let foundOptOutRoute = false;\n    nextMatches.forEach((m) => {\n      let manifestRoute = manifest.routes[m.route.id];\n      if (!manifestRoute || !manifestRoute.hasLoader) {\n        return;\n      }\n      if (!newMatchesForData.some((m2) => m2.route.id === m.route.id) && m.route.id in loaderData && routeModules[m.route.id]?.shouldRevalidate) {\n        foundOptOutRoute = true;\n      } else if (manifestRoute.hasClientLoader) {\n        foundOptOutRoute = true;\n      } else {\n        routesParams.add(m.route.id);\n      }\n    });\n    if (routesParams.size === 0) {\n      return [];\n    }\n    let url = singleFetchUrl(page, basename, \"data\");\n    if (foundOptOutRoute && routesParams.size > 0) {\n      url.searchParams.set(\n        \"_routes\",\n        nextMatches.filter((m) => routesParams.has(m.route.id)).map((m) => m.route.id).join(\",\")\n      );\n    }\n    return [url.pathname + url.search];\n  }, [\n    basename,\n    loaderData,\n    location,\n    manifest,\n    newMatchesForData,\n    nextMatches,\n    page,\n    routeModules\n  ]);\n  let moduleHrefs = React8.useMemo(\n    () => getModuleLinkHrefs(newMatchesForAssets, manifest),\n    [newMatchesForAssets, manifest]\n  );\n  let keyedPrefetchLinks = useKeyedPrefetchLinks(newMatchesForAssets);\n  return /* @__PURE__ */ React8.createElement(React8.Fragment, null, dataHrefs.map((href) => /* @__PURE__ */ React8.createElement(\"link\", { key: href, rel: \"prefetch\", as: \"fetch\", href, ...linkProps })), moduleHrefs.map((href) => /* @__PURE__ */ React8.createElement(\"link\", { key: href, rel: \"modulepreload\", href, ...linkProps })), keyedPrefetchLinks.map(({ key, link }) => (\n    // these don't spread `linkProps` because they are full link descriptors\n    // already with their own props\n    /* @__PURE__ */ React8.createElement(\"link\", { key, nonce: linkProps.nonce, ...link })\n  )));\n}\nfunction Meta() {\n  let { isSpaMode, routeModules } = useFrameworkContext();\n  let {\n    errors,\n    matches: routerMatches,\n    loaderData\n  } = useDataRouterStateContext();\n  let location = useLocation();\n  let _matches = getActiveMatches(routerMatches, errors, isSpaMode);\n  let error = null;\n  if (errors) {\n    error = errors[_matches[_matches.length - 1].route.id];\n  }\n  let meta = [];\n  let leafMeta = null;\n  let matches = [];\n  for (let i = 0; i < _matches.length; i++) {\n    let _match = _matches[i];\n    let routeId = _match.route.id;\n    let data2 = loaderData[routeId];\n    let params = _match.params;\n    let routeModule = routeModules[routeId];\n    let routeMeta = [];\n    let match = {\n      id: routeId,\n      data: data2,\n      loaderData: data2,\n      meta: [],\n      params: _match.params,\n      pathname: _match.pathname,\n      handle: _match.route.handle,\n      error\n    };\n    matches[i] = match;\n    if (routeModule?.meta) {\n      routeMeta = typeof routeModule.meta === \"function\" ? routeModule.meta({\n        data: data2,\n        loaderData: data2,\n        params,\n        location,\n        matches,\n        error\n      }) : Array.isArray(routeModule.meta) ? [...routeModule.meta] : routeModule.meta;\n    } else if (leafMeta) {\n      routeMeta = [...leafMeta];\n    }\n    routeMeta = routeMeta || [];\n    if (!Array.isArray(routeMeta)) {\n      throw new Error(\n        \"The route at \" + _match.route.path + \" returns an invalid value. All route meta functions must return an array of meta objects.\\n\\nTo reference the meta function API, see https://remix.run/route/meta\"\n      );\n    }\n    match.meta = routeMeta;\n    matches[i] = match;\n    meta = [...routeMeta];\n    leafMeta = meta;\n  }\n  return /* @__PURE__ */ React8.createElement(React8.Fragment, null, meta.flat().map((metaProps) => {\n    if (!metaProps) {\n      return null;\n    }\n    if (\"tagName\" in metaProps) {\n      let { tagName, ...rest } = metaProps;\n      if (!isValidMetaTag(tagName)) {\n        console.warn(\n          `A meta object uses an invalid tagName: ${tagName}. Expected either 'link' or 'meta'`\n        );\n        return null;\n      }\n      let Comp = tagName;\n      return /* @__PURE__ */ React8.createElement(Comp, { key: JSON.stringify(rest), ...rest });\n    }\n    if (\"title\" in metaProps) {\n      return /* @__PURE__ */ React8.createElement(\"title\", { key: \"title\" }, String(metaProps.title));\n    }\n    if (\"charset\" in metaProps) {\n      metaProps.charSet ?? (metaProps.charSet = metaProps.charset);\n      delete metaProps.charset;\n    }\n    if (\"charSet\" in metaProps && metaProps.charSet != null) {\n      return typeof metaProps.charSet === \"string\" ? /* @__PURE__ */ React8.createElement(\"meta\", { key: \"charSet\", charSet: metaProps.charSet }) : null;\n    }\n    if (\"script:ld+json\" in metaProps) {\n      try {\n        let json = JSON.stringify(metaProps[\"script:ld+json\"]);\n        return /* @__PURE__ */ React8.createElement(\n          \"script\",\n          {\n            key: `script:ld+json:${json}`,\n            type: \"application/ld+json\",\n            dangerouslySetInnerHTML: { __html: escapeHtml(json) }\n          }\n        );\n      } catch (err) {\n        return null;\n      }\n    }\n    return /* @__PURE__ */ React8.createElement(\"meta\", { key: JSON.stringify(metaProps), ...metaProps });\n  }));\n}\nfunction isValidMetaTag(tagName) {\n  return typeof tagName === \"string\" && /^(meta|link)$/.test(tagName);\n}\nvar isHydrated = false;\nfunction setIsHydrated() {\n  isHydrated = true;\n}\nfunction Scripts(scriptProps) {\n  let {\n    manifest,\n    serverHandoffString,\n    isSpaMode,\n    renderMeta,\n    routeDiscovery,\n    ssr\n  } = useFrameworkContext();\n  let { router, static: isStatic, staticContext } = useDataRouterContext2();\n  let { matches: routerMatches } = useDataRouterStateContext();\n  let isRSCRouterContext = useIsRSCRouterContext();\n  let enableFogOfWar = isFogOfWarEnabled(routeDiscovery, ssr);\n  if (renderMeta) {\n    renderMeta.didRenderScripts = true;\n  }\n  let matches = getActiveMatches(routerMatches, null, isSpaMode);\n  React8.useEffect(() => {\n    setIsHydrated();\n  }, []);\n  let initialScripts = React8.useMemo(() => {\n    if (isRSCRouterContext) {\n      return null;\n    }\n    let streamScript = \"window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());\";\n    let contextScript = staticContext ? `window.__reactRouterContext = ${serverHandoffString};${streamScript}` : \" \";\n    let routeModulesScript = !isStatic ? \" \" : `${manifest.hmr?.runtime ? `import ${JSON.stringify(manifest.hmr.runtime)};` : \"\"}${!enableFogOfWar ? `import ${JSON.stringify(manifest.url)}` : \"\"};\n${matches.map((match, routeIndex) => {\n      let routeVarName = `route${routeIndex}`;\n      let manifestEntry = manifest.routes[match.route.id];\n      invariant2(manifestEntry, `Route ${match.route.id} not found in manifest`);\n      let {\n        clientActionModule,\n        clientLoaderModule,\n        clientMiddlewareModule,\n        hydrateFallbackModule,\n        module\n      } = manifestEntry;\n      let chunks = [\n        ...clientActionModule ? [\n          {\n            module: clientActionModule,\n            varName: `${routeVarName}_clientAction`\n          }\n        ] : [],\n        ...clientLoaderModule ? [\n          {\n            module: clientLoaderModule,\n            varName: `${routeVarName}_clientLoader`\n          }\n        ] : [],\n        ...clientMiddlewareModule ? [\n          {\n            module: clientMiddlewareModule,\n            varName: `${routeVarName}_clientMiddleware`\n          }\n        ] : [],\n        ...hydrateFallbackModule ? [\n          {\n            module: hydrateFallbackModule,\n            varName: `${routeVarName}_HydrateFallback`\n          }\n        ] : [],\n        { module, varName: `${routeVarName}_main` }\n      ];\n      if (chunks.length === 1) {\n        return `import * as ${routeVarName} from ${JSON.stringify(module)};`;\n      }\n      let chunkImportsSnippet = chunks.map((chunk) => `import * as ${chunk.varName} from \"${chunk.module}\";`).join(\"\\n\");\n      let mergedChunksSnippet = `const ${routeVarName} = {${chunks.map((chunk) => `...${chunk.varName}`).join(\",\")}};`;\n      return [chunkImportsSnippet, mergedChunksSnippet].join(\"\\n\");\n    }).join(\"\\n\")}\n  ${enableFogOfWar ? (\n      // Inline a minimal manifest with the SSR matches\n      `window.__reactRouterManifest = ${JSON.stringify(\n        getPartialManifest(manifest, router),\n        null,\n        2\n      )};`\n    ) : \"\"}\n  window.__reactRouterRouteModules = {${matches.map((match, index) => `${JSON.stringify(match.route.id)}:route${index}`).join(\",\")}};\n\nimport(${JSON.stringify(manifest.entry.module)});`;\n    return /* @__PURE__ */ React8.createElement(React8.Fragment, null, /* @__PURE__ */ React8.createElement(\n      \"script\",\n      {\n        ...scriptProps,\n        suppressHydrationWarning: true,\n        dangerouslySetInnerHTML: { __html: contextScript },\n        type: void 0\n      }\n    ), /* @__PURE__ */ React8.createElement(\n      \"script\",\n      {\n        ...scriptProps,\n        suppressHydrationWarning: true,\n        dangerouslySetInnerHTML: { __html: routeModulesScript },\n        type: \"module\",\n        async: true\n      }\n    ));\n  }, []);\n  let preloads = isHydrated || isRSCRouterContext ? [] : dedupe(\n    manifest.entry.imports.concat(\n      getModuleLinkHrefs(matches, manifest, {\n        includeHydrateFallback: true\n      })\n    )\n  );\n  let sri = typeof manifest.sri === \"object\" ? manifest.sri : {};\n  warnOnce(\n    !isRSCRouterContext,\n    \"The <Scripts /> element is a no-op when using RSC and can be safely removed.\"\n  );\n  return isHydrated || isRSCRouterContext ? null : /* @__PURE__ */ React8.createElement(React8.Fragment, null, typeof manifest.sri === \"object\" ? /* @__PURE__ */ React8.createElement(\n    \"script\",\n    {\n      \"rr-importmap\": \"\",\n      type: \"importmap\",\n      suppressHydrationWarning: true,\n      dangerouslySetInnerHTML: {\n        __html: JSON.stringify({\n          integrity: sri\n        })\n      }\n    }\n  ) : null, !enableFogOfWar ? /* @__PURE__ */ React8.createElement(\n    \"link\",\n    {\n      rel: \"modulepreload\",\n      href: manifest.url,\n      crossOrigin: scriptProps.crossOrigin,\n      integrity: sri[manifest.url],\n      suppressHydrationWarning: true\n    }\n  ) : null, /* @__PURE__ */ React8.createElement(\n    \"link\",\n    {\n      rel: \"modulepreload\",\n      href: manifest.entry.module,\n      crossOrigin: scriptProps.crossOrigin,\n      integrity: sri[manifest.entry.module],\n      suppressHydrationWarning: true\n    }\n  ), preloads.map((path) => /* @__PURE__ */ React8.createElement(\n    \"link\",\n    {\n      key: path,\n      rel: \"modulepreload\",\n      href: path,\n      crossOrigin: scriptProps.crossOrigin,\n      integrity: sri[path],\n      suppressHydrationWarning: true\n    }\n  )), initialScripts);\n}\nfunction dedupe(array) {\n  return [...new Set(array)];\n}\nfunction mergeRefs(...refs) {\n  return (value) => {\n    refs.forEach((ref) => {\n      if (typeof ref === \"function\") {\n        ref(value);\n      } else if (ref != null) {\n        ref.current = value;\n      }\n    });\n  };\n}\n\n// lib/dom/ssr/errorBoundaries.tsx\nvar RemixErrorBoundary = class extends React9.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: props.error || null, location: props.location };\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  static getDerivedStateFromProps(props, state) {\n    if (state.location !== props.location) {\n      return { error: props.error || null, location: props.location };\n    }\n    return { error: props.error || state.error, location: state.location };\n  }\n  render() {\n    if (this.state.error) {\n      return /* @__PURE__ */ React9.createElement(\n        RemixRootDefaultErrorBoundary,\n        {\n          error: this.state.error,\n          isOutsideRemixApp: true\n        }\n      );\n    } else {\n      return this.props.children;\n    }\n  }\n};\nfunction RemixRootDefaultErrorBoundary({\n  error,\n  isOutsideRemixApp\n}) {\n  console.error(error);\n  let heyDeveloper = /* @__PURE__ */ React9.createElement(\n    \"script\",\n    {\n      dangerouslySetInnerHTML: {\n        __html: `\n        console.log(\n          \"\\u{1F4BF} Hey developer \\u{1F44B}. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information.\"\n        );\n      `\n      }\n    }\n  );\n  if (isRouteErrorResponse(error)) {\n    return /* @__PURE__ */ React9.createElement(BoundaryShell, { title: \"Unhandled Thrown Response!\" }, /* @__PURE__ */ React9.createElement(\"h1\", { style: { fontSize: \"24px\" } }, error.status, \" \", error.statusText), ENABLE_DEV_WARNINGS ? heyDeveloper : null);\n  }\n  let errorInstance;\n  if (error instanceof Error) {\n    errorInstance = error;\n  } else {\n    let errorString = error == null ? \"Unknown Error\" : typeof error === \"object\" && \"toString\" in error ? error.toString() : JSON.stringify(error);\n    errorInstance = new Error(errorString);\n  }\n  return /* @__PURE__ */ React9.createElement(\n    BoundaryShell,\n    {\n      title: \"Application Error!\",\n      isOutsideRemixApp\n    },\n    /* @__PURE__ */ React9.createElement(\"h1\", { style: { fontSize: \"24px\" } }, \"Application Error\"),\n    /* @__PURE__ */ React9.createElement(\n      \"pre\",\n      {\n        style: {\n          padding: \"2rem\",\n          background: \"hsla(10, 50%, 50%, 0.1)\",\n          color: \"red\",\n          overflow: \"auto\"\n        }\n      },\n      errorInstance.stack\n    ),\n    heyDeveloper\n  );\n}\nfunction BoundaryShell({\n  title,\n  renderScripts,\n  isOutsideRemixApp,\n  children\n}) {\n  let { routeModules } = useFrameworkContext();\n  if (routeModules.root?.Layout && !isOutsideRemixApp) {\n    return children;\n  }\n  return /* @__PURE__ */ React9.createElement(\"html\", { lang: \"en\" }, /* @__PURE__ */ React9.createElement(\"head\", null, /* @__PURE__ */ React9.createElement(\"meta\", { charSet: \"utf-8\" }), /* @__PURE__ */ React9.createElement(\n    \"meta\",\n    {\n      name: \"viewport\",\n      content: \"width=device-width,initial-scale=1,viewport-fit=cover\"\n    }\n  ), /* @__PURE__ */ React9.createElement(\"title\", null, title)), /* @__PURE__ */ React9.createElement(\"body\", null, /* @__PURE__ */ React9.createElement(\"main\", { style: { fontFamily: \"system-ui, sans-serif\", padding: \"2rem\" } }, children, renderScripts ? /* @__PURE__ */ React9.createElement(Scripts, null) : null)));\n}\n\n// lib/dom/lib.tsx\nimport * as React10 from \"react\";\nvar isBrowser = typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\";\ntry {\n  if (isBrowser) {\n    window.__reactRouterVersion = // @ts-expect-error\n    \"7.9.4\";\n  }\n} catch (e) {\n}\nfunction createBrowserRouter(routes, opts) {\n  return createRouter({\n    basename: opts?.basename,\n    getContext: opts?.getContext,\n    future: opts?.future,\n    history: createBrowserHistory({ window: opts?.window }),\n    hydrationData: opts?.hydrationData || parseHydrationData(),\n    routes,\n    mapRouteProperties,\n    hydrationRouteProperties,\n    dataStrategy: opts?.dataStrategy,\n    patchRoutesOnNavigation: opts?.patchRoutesOnNavigation,\n    window: opts?.window\n  }).initialize();\n}\nfunction createHashRouter(routes, opts) {\n  return createRouter({\n    basename: opts?.basename,\n    getContext: opts?.getContext,\n    future: opts?.future,\n    history: createHashHistory({ window: opts?.window }),\n    hydrationData: opts?.hydrationData || parseHydrationData(),\n    routes,\n    mapRouteProperties,\n    hydrationRouteProperties,\n    dataStrategy: opts?.dataStrategy,\n    patchRoutesOnNavigation: opts?.patchRoutesOnNavigation,\n    window: opts?.window\n  }).initialize();\n}\nfunction parseHydrationData() {\n  let state = window?.__staticRouterHydrationData;\n  if (state && state.errors) {\n    state = {\n      ...state,\n      errors: deserializeErrors(state.errors)\n    };\n  }\n  return state;\n}\nfunction deserializeErrors(errors) {\n  if (!errors) return null;\n  let entries = Object.entries(errors);\n  let serialized = {};\n  for (let [key, val] of entries) {\n    if (val && val.__type === \"RouteErrorResponse\") {\n      serialized[key] = new ErrorResponseImpl(\n        val.status,\n        val.statusText,\n        val.data,\n        val.internal === true\n      );\n    } else if (val && val.__type === \"Error\") {\n      if (val.__subType) {\n        let ErrorConstructor = window[val.__subType];\n        if (typeof ErrorConstructor === \"function\") {\n          try {\n            let error = new ErrorConstructor(val.message);\n            error.stack = \"\";\n            serialized[key] = error;\n          } catch (e) {\n          }\n        }\n      }\n      if (serialized[key] == null) {\n        let error = new Error(val.message);\n        error.stack = \"\";\n        serialized[key] = error;\n      }\n    } else {\n      serialized[key] = val;\n    }\n  }\n  return serialized;\n}\nfunction BrowserRouter({\n  basename,\n  children,\n  window: window2\n}) {\n  let historyRef = React10.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({ window: window2, v5Compat: true });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React10.useState({\n    action: history.action,\n    location: history.location\n  });\n  let setState = React10.useCallback(\n    (newState) => {\n      React10.startTransition(() => setStateImpl(newState));\n    },\n    [setStateImpl]\n  );\n  React10.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  return /* @__PURE__ */ React10.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location: state.location,\n      navigationType: state.action,\n      navigator: history\n    }\n  );\n}\nfunction HashRouter({ basename, children, window: window2 }) {\n  let historyRef = React10.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({ window: window2, v5Compat: true });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React10.useState({\n    action: history.action,\n    location: history.location\n  });\n  let setState = React10.useCallback(\n    (newState) => {\n      React10.startTransition(() => setStateImpl(newState));\n    },\n    [setStateImpl]\n  );\n  React10.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  return /* @__PURE__ */ React10.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location: state.location,\n      navigationType: state.action,\n      navigator: history\n    }\n  );\n}\nfunction HistoryRouter({\n  basename,\n  children,\n  history\n}) {\n  let [state, setStateImpl] = React10.useState({\n    action: history.action,\n    location: history.location\n  });\n  let setState = React10.useCallback(\n    (newState) => {\n      React10.startTransition(() => setStateImpl(newState));\n    },\n    [setStateImpl]\n  );\n  React10.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  return /* @__PURE__ */ React10.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location: state.location,\n      navigationType: state.action,\n      navigator: history\n    }\n  );\n}\nHistoryRouter.displayName = \"unstable_HistoryRouter\";\nvar ABSOLUTE_URL_REGEX2 = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\nvar Link = React10.forwardRef(\n  function LinkWithRef({\n    onClick,\n    discover = \"render\",\n    prefetch = \"none\",\n    relative,\n    reloadDocument,\n    replace: replace2,\n    state,\n    target,\n    to,\n    preventScrollReset,\n    viewTransition,\n    ...rest\n  }, forwardedRef) {\n    let { basename } = React10.useContext(NavigationContext);\n    let isAbsolute = typeof to === \"string\" && ABSOLUTE_URL_REGEX2.test(to);\n    let absoluteHref;\n    let isExternal = false;\n    if (typeof to === \"string\" && isAbsolute) {\n      absoluteHref = to;\n      if (isBrowser) {\n        try {\n          let currentUrl = new URL(window.location.href);\n          let targetUrl = to.startsWith(\"//\") ? new URL(currentUrl.protocol + to) : new URL(to);\n          let path = stripBasename(targetUrl.pathname, basename);\n          if (targetUrl.origin === currentUrl.origin && path != null) {\n            to = path + targetUrl.search + targetUrl.hash;\n          } else {\n            isExternal = true;\n          }\n        } catch (e) {\n          warning(\n            false,\n            `<Link to=\"${to}\"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`\n          );\n        }\n      }\n    }\n    let href = useHref(to, { relative });\n    let [shouldPrefetch, prefetchRef, prefetchHandlers] = usePrefetchBehavior(\n      prefetch,\n      rest\n    );\n    let internalOnClick = useLinkClickHandler(to, {\n      replace: replace2,\n      state,\n      target,\n      preventScrollReset,\n      relative,\n      viewTransition\n    });\n    function handleClick(event) {\n      if (onClick) onClick(event);\n      if (!event.defaultPrevented) {\n        internalOnClick(event);\n      }\n    }\n    let link = (\n      // eslint-disable-next-line jsx-a11y/anchor-has-content\n      /* @__PURE__ */ React10.createElement(\n        \"a\",\n        {\n          ...rest,\n          ...prefetchHandlers,\n          href: absoluteHref || href,\n          onClick: isExternal || reloadDocument ? onClick : handleClick,\n          ref: mergeRefs(forwardedRef, prefetchRef),\n          target,\n          \"data-discover\": !isAbsolute && discover === \"render\" ? \"true\" : void 0\n        }\n      )\n    );\n    return shouldPrefetch && !isAbsolute ? /* @__PURE__ */ React10.createElement(React10.Fragment, null, link, /* @__PURE__ */ React10.createElement(PrefetchPageLinks, { page: href })) : link;\n  }\n);\nLink.displayName = \"Link\";\nvar NavLink = React10.forwardRef(\n  function NavLinkWithRef({\n    \"aria-current\": ariaCurrentProp = \"page\",\n    caseSensitive = false,\n    className: classNameProp = \"\",\n    end = false,\n    style: styleProp,\n    to,\n    viewTransition,\n    children,\n    ...rest\n  }, ref) {\n    let path = useResolvedPath(to, { relative: rest.relative });\n    let location = useLocation();\n    let routerState = React10.useContext(DataRouterStateContext);\n    let { navigator, basename } = React10.useContext(NavigationContext);\n    let isTransitioning = routerState != null && // Conditional usage is OK here because the usage of a data router is static\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useViewTransitionState(path) && viewTransition === true;\n    let toPathname = navigator.encodeLocation ? navigator.encodeLocation(path).pathname : path.pathname;\n    let locationPathname = location.pathname;\n    let nextLocationPathname = routerState && routerState.navigation && routerState.navigation.location ? routerState.navigation.location.pathname : null;\n    if (!caseSensitive) {\n      locationPathname = locationPathname.toLowerCase();\n      nextLocationPathname = nextLocationPathname ? nextLocationPathname.toLowerCase() : null;\n      toPathname = toPathname.toLowerCase();\n    }\n    if (nextLocationPathname && basename) {\n      nextLocationPathname = stripBasename(nextLocationPathname, basename) || nextLocationPathname;\n    }\n    const endSlashPosition = toPathname !== \"/\" && toPathname.endsWith(\"/\") ? toPathname.length - 1 : toPathname.length;\n    let isActive = locationPathname === toPathname || !end && locationPathname.startsWith(toPathname) && locationPathname.charAt(endSlashPosition) === \"/\";\n    let isPending = nextLocationPathname != null && (nextLocationPathname === toPathname || !end && nextLocationPathname.startsWith(toPathname) && nextLocationPathname.charAt(toPathname.length) === \"/\");\n    let renderProps = {\n      isActive,\n      isPending,\n      isTransitioning\n    };\n    let ariaCurrent = isActive ? ariaCurrentProp : void 0;\n    let className;\n    if (typeof classNameProp === \"function\") {\n      className = classNameProp(renderProps);\n    } else {\n      className = [\n        classNameProp,\n        isActive ? \"active\" : null,\n        isPending ? \"pending\" : null,\n        isTransitioning ? \"transitioning\" : null\n      ].filter(Boolean).join(\" \");\n    }\n    let style = typeof styleProp === \"function\" ? styleProp(renderProps) : styleProp;\n    return /* @__PURE__ */ React10.createElement(\n      Link,\n      {\n        ...rest,\n        \"aria-current\": ariaCurrent,\n        className,\n        ref,\n        style,\n        to,\n        viewTransition\n      },\n      typeof children === \"function\" ? children(renderProps) : children\n    );\n  }\n);\nNavLink.displayName = \"NavLink\";\nvar Form = React10.forwardRef(\n  ({\n    discover = \"render\",\n    fetcherKey,\n    navigate,\n    reloadDocument,\n    replace: replace2,\n    state,\n    method = defaultMethod,\n    action,\n    onSubmit,\n    relative,\n    preventScrollReset,\n    viewTransition,\n    ...props\n  }, forwardedRef) => {\n    let submit = useSubmit();\n    let formAction = useFormAction(action, { relative });\n    let formMethod = method.toLowerCase() === \"get\" ? \"get\" : \"post\";\n    let isAbsolute = typeof action === \"string\" && ABSOLUTE_URL_REGEX2.test(action);\n    let submitHandler = (event) => {\n      onSubmit && onSubmit(event);\n      if (event.defaultPrevented) return;\n      event.preventDefault();\n      let submitter = event.nativeEvent.submitter;\n      let submitMethod = submitter?.getAttribute(\"formmethod\") || method;\n      submit(submitter || event.currentTarget, {\n        fetcherKey,\n        method: submitMethod,\n        navigate,\n        replace: replace2,\n        state,\n        relative,\n        preventScrollReset,\n        viewTransition\n      });\n    };\n    return /* @__PURE__ */ React10.createElement(\n      \"form\",\n      {\n        ref: forwardedRef,\n        method: formMethod,\n        action: formAction,\n        onSubmit: reloadDocument ? onSubmit : submitHandler,\n        ...props,\n        \"data-discover\": !isAbsolute && discover === \"render\" ? \"true\" : void 0\n      }\n    );\n  }\n);\nForm.displayName = \"Form\";\nfunction ScrollRestoration({\n  getKey,\n  storageKey,\n  ...props\n}) {\n  let remixContext = React10.useContext(FrameworkContext);\n  let { basename } = React10.useContext(NavigationContext);\n  let location = useLocation();\n  let matches = useMatches();\n  useScrollRestoration({ getKey, storageKey });\n  let ssrKey = React10.useMemo(\n    () => {\n      if (!remixContext || !getKey) return null;\n      let userKey = getScrollRestorationKey(\n        location,\n        matches,\n        basename,\n        getKey\n      );\n      return userKey !== location.key ? userKey : null;\n    },\n    // Nah, we only need this the first time for the SSR render\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n  if (!remixContext || remixContext.isSpaMode) {\n    return null;\n  }\n  let restoreScroll = ((storageKey2, restoreKey) => {\n    if (!window.history.state || !window.history.state.key) {\n      let key = Math.random().toString(32).slice(2);\n      window.history.replaceState({ key }, \"\");\n    }\n    try {\n      let positions = JSON.parse(sessionStorage.getItem(storageKey2) || \"{}\");\n      let storedY = positions[restoreKey || window.history.state.key];\n      if (typeof storedY === \"number\") {\n        window.scrollTo(0, storedY);\n      }\n    } catch (error) {\n      console.error(error);\n      sessionStorage.removeItem(storageKey2);\n    }\n  }).toString();\n  return /* @__PURE__ */ React10.createElement(\n    \"script\",\n    {\n      ...props,\n      suppressHydrationWarning: true,\n      dangerouslySetInnerHTML: {\n        __html: `(${restoreScroll})(${JSON.stringify(\n          storageKey || SCROLL_RESTORATION_STORAGE_KEY\n        )}, ${JSON.stringify(ssrKey)})`\n      }\n    }\n  );\n}\nScrollRestoration.displayName = \"ScrollRestoration\";\nfunction getDataRouterConsoleError2(hookName) {\n  return `${hookName} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`;\n}\nfunction useDataRouterContext3(hookName) {\n  let ctx = React10.useContext(DataRouterContext);\n  invariant(ctx, getDataRouterConsoleError2(hookName));\n  return ctx;\n}\nfunction useDataRouterState2(hookName) {\n  let state = React10.useContext(DataRouterStateContext);\n  invariant(state, getDataRouterConsoleError2(hookName));\n  return state;\n}\nfunction useLinkClickHandler(to, {\n  target,\n  replace: replaceProp,\n  state,\n  preventScrollReset,\n  relative,\n  viewTransition\n} = {}) {\n  let navigate = useNavigate();\n  let location = useLocation();\n  let path = useResolvedPath(to, { relative });\n  return React10.useCallback(\n    (event) => {\n      if (shouldProcessLinkClick(event, target)) {\n        event.preventDefault();\n        let replace2 = replaceProp !== void 0 ? replaceProp : createPath(location) === createPath(path);\n        navigate(to, {\n          replace: replace2,\n          state,\n          preventScrollReset,\n          relative,\n          viewTransition\n        });\n      }\n    },\n    [\n      location,\n      navigate,\n      path,\n      replaceProp,\n      state,\n      target,\n      to,\n      preventScrollReset,\n      relative,\n      viewTransition\n    ]\n  );\n}\nfunction useSearchParams(defaultInit) {\n  warning(\n    typeof URLSearchParams !== \"undefined\",\n    `You cannot use the \\`useSearchParams\\` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.`\n  );\n  let defaultSearchParamsRef = React10.useRef(createSearchParams(defaultInit));\n  let hasSetSearchParamsRef = React10.useRef(false);\n  let location = useLocation();\n  let searchParams = React10.useMemo(\n    () => (\n      // Only merge in the defaults if we haven't yet called setSearchParams.\n      // Once we call that we want those to take precedence, otherwise you can't\n      // remove a param with setSearchParams({}) if it has an initial value\n      getSearchParamsForLocation(\n        location.search,\n        hasSetSearchParamsRef.current ? null : defaultSearchParamsRef.current\n      )\n    ),\n    [location.search]\n  );\n  let navigate = useNavigate();\n  let setSearchParams = React10.useCallback(\n    (nextInit, navigateOptions) => {\n      const newSearchParams = createSearchParams(\n        typeof nextInit === \"function\" ? nextInit(new URLSearchParams(searchParams)) : nextInit\n      );\n      hasSetSearchParamsRef.current = true;\n      navigate(\"?\" + newSearchParams, navigateOptions);\n    },\n    [navigate, searchParams]\n  );\n  return [searchParams, setSearchParams];\n}\nvar fetcherId = 0;\nvar getUniqueFetcherId = () => `__${String(++fetcherId)}__`;\nfunction useSubmit() {\n  let { router } = useDataRouterContext3(\"useSubmit\" /* UseSubmit */);\n  let { basename } = React10.useContext(NavigationContext);\n  let currentRouteId = useRouteId();\n  return React10.useCallback(\n    async (target, options = {}) => {\n      let { action, method, encType, formData, body } = getFormSubmissionInfo(\n        target,\n        basename\n      );\n      if (options.navigate === false) {\n        let key = options.fetcherKey || getUniqueFetcherId();\n        await router.fetch(key, currentRouteId, options.action || action, {\n          preventScrollReset: options.preventScrollReset,\n          formData,\n          body,\n          formMethod: options.method || method,\n          formEncType: options.encType || encType,\n          flushSync: options.flushSync\n        });\n      } else {\n        await router.navigate(options.action || action, {\n          preventScrollReset: options.preventScrollReset,\n          formData,\n          body,\n          formMethod: options.method || method,\n          formEncType: options.encType || encType,\n          replace: options.replace,\n          state: options.state,\n          fromRouteId: currentRouteId,\n          flushSync: options.flushSync,\n          viewTransition: options.viewTransition\n        });\n      }\n    },\n    [router, basename, currentRouteId]\n  );\n}\nfunction useFormAction(action, { relative } = {}) {\n  let { basename } = React10.useContext(NavigationContext);\n  let routeContext = React10.useContext(RouteContext);\n  invariant(routeContext, \"useFormAction must be used inside a RouteContext\");\n  let [match] = routeContext.matches.slice(-1);\n  let path = { ...useResolvedPath(action ? action : \".\", { relative }) };\n  let location = useLocation();\n  if (action == null) {\n    path.search = location.search;\n    let params = new URLSearchParams(path.search);\n    let indexValues = params.getAll(\"index\");\n    let hasNakedIndexParam = indexValues.some((v) => v === \"\");\n    if (hasNakedIndexParam) {\n      params.delete(\"index\");\n      indexValues.filter((v) => v).forEach((v) => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? `?${qs}` : \"\";\n    }\n  }\n  if ((!action || action === \".\") && match.route.index) {\n    path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n  }\n  if (basename !== \"/\") {\n    path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n  return createPath(path);\n}\nfunction useFetcher({\n  key\n} = {}) {\n  let { router } = useDataRouterContext3(\"useFetcher\" /* UseFetcher */);\n  let state = useDataRouterState2(\"useFetcher\" /* UseFetcher */);\n  let fetcherData = React10.useContext(FetchersContext);\n  let route = React10.useContext(RouteContext);\n  let routeId = route.matches[route.matches.length - 1]?.route.id;\n  invariant(fetcherData, `useFetcher must be used inside a FetchersContext`);\n  invariant(route, `useFetcher must be used inside a RouteContext`);\n  invariant(\n    routeId != null,\n    `useFetcher can only be used on routes that contain a unique \"id\"`\n  );\n  let defaultKey = React10.useId();\n  let [fetcherKey, setFetcherKey] = React10.useState(key || defaultKey);\n  if (key && key !== fetcherKey) {\n    setFetcherKey(key);\n  }\n  React10.useEffect(() => {\n    router.getFetcher(fetcherKey);\n    return () => router.deleteFetcher(fetcherKey);\n  }, [router, fetcherKey]);\n  let load = React10.useCallback(\n    async (href, opts) => {\n      invariant(routeId, \"No routeId available for fetcher.load()\");\n      await router.fetch(fetcherKey, routeId, href, opts);\n    },\n    [fetcherKey, routeId, router]\n  );\n  let submitImpl = useSubmit();\n  let submit = React10.useCallback(\n    async (target, opts) => {\n      await submitImpl(target, {\n        ...opts,\n        navigate: false,\n        fetcherKey\n      });\n    },\n    [fetcherKey, submitImpl]\n  );\n  let unstable_reset = React10.useCallback((opts) => router.resetFetcher(fetcherKey, opts), [router, fetcherKey]);\n  let FetcherForm = React10.useMemo(() => {\n    let FetcherForm2 = React10.forwardRef(\n      (props, ref) => {\n        return /* @__PURE__ */ React10.createElement(Form, { ...props, navigate: false, fetcherKey, ref });\n      }\n    );\n    FetcherForm2.displayName = \"fetcher.Form\";\n    return FetcherForm2;\n  }, [fetcherKey]);\n  let fetcher = state.fetchers.get(fetcherKey) || IDLE_FETCHER;\n  let data2 = fetcherData.get(fetcherKey);\n  let fetcherWithComponents = React10.useMemo(\n    () => ({\n      Form: FetcherForm,\n      submit,\n      load,\n      unstable_reset,\n      ...fetcher,\n      data: data2\n    }),\n    [FetcherForm, submit, load, unstable_reset, fetcher, data2]\n  );\n  return fetcherWithComponents;\n}\nfunction useFetchers() {\n  let state = useDataRouterState2(\"useFetchers\" /* UseFetchers */);\n  return Array.from(state.fetchers.entries()).map(([key, fetcher]) => ({\n    ...fetcher,\n    key\n  }));\n}\nvar SCROLL_RESTORATION_STORAGE_KEY = \"react-router-scroll-positions\";\nvar savedScrollPositions = {};\nfunction getScrollRestorationKey(location, matches, basename, getKey) {\n  let key = null;\n  if (getKey) {\n    if (basename !== \"/\") {\n      key = getKey(\n        {\n          ...location,\n          pathname: stripBasename(location.pathname, basename) || location.pathname\n        },\n        matches\n      );\n    } else {\n      key = getKey(location, matches);\n    }\n  }\n  if (key == null) {\n    key = location.key;\n  }\n  return key;\n}\nfunction useScrollRestoration({\n  getKey,\n  storageKey\n} = {}) {\n  let { router } = useDataRouterContext3(\"useScrollRestoration\" /* UseScrollRestoration */);\n  let { restoreScrollPosition, preventScrollReset } = useDataRouterState2(\n    \"useScrollRestoration\" /* UseScrollRestoration */\n  );\n  let { basename } = React10.useContext(NavigationContext);\n  let location = useLocation();\n  let matches = useMatches();\n  let navigation = useNavigation();\n  React10.useEffect(() => {\n    window.history.scrollRestoration = \"manual\";\n    return () => {\n      window.history.scrollRestoration = \"auto\";\n    };\n  }, []);\n  usePageHide(\n    React10.useCallback(() => {\n      if (navigation.state === \"idle\") {\n        let key = getScrollRestorationKey(location, matches, basename, getKey);\n        savedScrollPositions[key] = window.scrollY;\n      }\n      try {\n        sessionStorage.setItem(\n          storageKey || SCROLL_RESTORATION_STORAGE_KEY,\n          JSON.stringify(savedScrollPositions)\n        );\n      } catch (error) {\n        warning(\n          false,\n          `Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${error}).`\n        );\n      }\n      window.history.scrollRestoration = \"auto\";\n    }, [navigation.state, getKey, basename, location, matches, storageKey])\n  );\n  if (typeof document !== \"undefined\") {\n    React10.useLayoutEffect(() => {\n      try {\n        let sessionPositions = sessionStorage.getItem(\n          storageKey || SCROLL_RESTORATION_STORAGE_KEY\n        );\n        if (sessionPositions) {\n          savedScrollPositions = JSON.parse(sessionPositions);\n        }\n      } catch (e) {\n      }\n    }, [storageKey]);\n    React10.useLayoutEffect(() => {\n      let disableScrollRestoration = router?.enableScrollRestoration(\n        savedScrollPositions,\n        () => window.scrollY,\n        getKey ? (location2, matches2) => getScrollRestorationKey(location2, matches2, basename, getKey) : void 0\n      );\n      return () => disableScrollRestoration && disableScrollRestoration();\n    }, [router, basename, getKey]);\n    React10.useLayoutEffect(() => {\n      if (restoreScrollPosition === false) {\n        return;\n      }\n      if (typeof restoreScrollPosition === \"number\") {\n        window.scrollTo(0, restoreScrollPosition);\n        return;\n      }\n      try {\n        if (location.hash) {\n          let el = document.getElementById(\n            decodeURIComponent(location.hash.slice(1))\n          );\n          if (el) {\n            el.scrollIntoView();\n            return;\n          }\n        }\n      } catch {\n        warning(\n          false,\n          `\"${location.hash.slice(\n            1\n          )}\" is not a decodable element ID. The view will not scroll to it.`\n        );\n      }\n      if (preventScrollReset === true) {\n        return;\n      }\n      window.scrollTo(0, 0);\n    }, [location, restoreScrollPosition, preventScrollReset]);\n  }\n}\nfunction useBeforeUnload(callback, options) {\n  let { capture } = options || {};\n  React10.useEffect(() => {\n    let opts = capture != null ? { capture } : void 0;\n    window.addEventListener(\"beforeunload\", callback, opts);\n    return () => {\n      window.removeEventListener(\"beforeunload\", callback, opts);\n    };\n  }, [callback, capture]);\n}\nfunction usePageHide(callback, options) {\n  let { capture } = options || {};\n  React10.useEffect(() => {\n    let opts = capture != null ? { capture } : void 0;\n    window.addEventListener(\"pagehide\", callback, opts);\n    return () => {\n      window.removeEventListener(\"pagehide\", callback, opts);\n    };\n  }, [callback, capture]);\n}\nfunction usePrompt({\n  when,\n  message\n}) {\n  let blocker = useBlocker(when);\n  React10.useEffect(() => {\n    if (blocker.state === \"blocked\") {\n      let proceed = window.confirm(message);\n      if (proceed) {\n        setTimeout(blocker.proceed, 0);\n      } else {\n        blocker.reset();\n      }\n    }\n  }, [blocker, message]);\n  React10.useEffect(() => {\n    if (blocker.state === \"blocked\" && !when) {\n      blocker.reset();\n    }\n  }, [blocker, when]);\n}\nfunction useViewTransitionState(to, { relative } = {}) {\n  let vtContext = React10.useContext(ViewTransitionContext);\n  invariant(\n    vtContext != null,\n    \"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?\"\n  );\n  let { basename } = useDataRouterContext3(\n    \"useViewTransitionState\" /* useViewTransitionState */\n  );\n  let path = useResolvedPath(to, { relative });\n  if (!vtContext.isTransitioning) {\n    return false;\n  }\n  let currentPath = stripBasename(vtContext.currentLocation.pathname, basename) || vtContext.currentLocation.pathname;\n  let nextPath = stripBasename(vtContext.nextLocation.pathname, basename) || vtContext.nextLocation.pathname;\n  return matchPath(path.pathname, nextPath) != null || matchPath(path.pathname, currentPath) != null;\n}\n\n// lib/dom/server.tsx\nimport * as React11 from \"react\";\nfunction StaticRouter({\n  basename,\n  children,\n  location: locationProp = \"/\"\n}) {\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n  let action = \"POP\" /* Pop */;\n  let location = {\n    pathname: locationProp.pathname || \"/\",\n    search: locationProp.search || \"\",\n    hash: locationProp.hash || \"\",\n    state: locationProp.state != null ? locationProp.state : null,\n    key: locationProp.key || \"default\"\n  };\n  let staticNavigator = getStatelessNavigator();\n  return /* @__PURE__ */ React11.createElement(\n    Router,\n    {\n      basename,\n      children,\n      location,\n      navigationType: action,\n      navigator: staticNavigator,\n      static: true\n    }\n  );\n}\nfunction StaticRouterProvider({\n  context,\n  router,\n  hydrate: hydrate2 = true,\n  nonce\n}) {\n  invariant(\n    router && context,\n    \"You must provide `router` and `context` to <StaticRouterProvider>\"\n  );\n  let dataRouterContext = {\n    router,\n    navigator: getStatelessNavigator(),\n    static: true,\n    staticContext: context,\n    basename: context.basename || \"/\"\n  };\n  let fetchersContext = /* @__PURE__ */ new Map();\n  let hydrateScript = \"\";\n  if (hydrate2 !== false) {\n    let data2 = {\n      loaderData: context.loaderData,\n      actionData: context.actionData,\n      errors: serializeErrors(context.errors)\n    };\n    let json = htmlEscape(JSON.stringify(JSON.stringify(data2)));\n    hydrateScript = `window.__staticRouterHydrationData = JSON.parse(${json});`;\n  }\n  let { state } = dataRouterContext.router;\n  return /* @__PURE__ */ React11.createElement(React11.Fragment, null, /* @__PURE__ */ React11.createElement(DataRouterContext.Provider, { value: dataRouterContext }, /* @__PURE__ */ React11.createElement(DataRouterStateContext.Provider, { value: state }, /* @__PURE__ */ React11.createElement(FetchersContext.Provider, { value: fetchersContext }, /* @__PURE__ */ React11.createElement(ViewTransitionContext.Provider, { value: { isTransitioning: false } }, /* @__PURE__ */ React11.createElement(\n    Router,\n    {\n      basename: dataRouterContext.basename,\n      location: state.location,\n      navigationType: state.historyAction,\n      navigator: dataRouterContext.navigator,\n      static: dataRouterContext.static\n    },\n    /* @__PURE__ */ React11.createElement(\n      DataRoutes2,\n      {\n        routes: router.routes,\n        future: router.future,\n        state\n      }\n    )\n  ))))), hydrateScript ? /* @__PURE__ */ React11.createElement(\n    \"script\",\n    {\n      suppressHydrationWarning: true,\n      nonce,\n      dangerouslySetInnerHTML: { __html: hydrateScript }\n    }\n  ) : null);\n}\nfunction DataRoutes2({\n  routes,\n  future,\n  state\n}) {\n  return useRoutesImpl(routes, void 0, state, void 0, future);\n}\nfunction serializeErrors(errors) {\n  if (!errors) return null;\n  let entries = Object.entries(errors);\n  let serialized = {};\n  for (let [key, val] of entries) {\n    if (isRouteErrorResponse(val)) {\n      serialized[key] = { ...val, __type: \"RouteErrorResponse\" };\n    } else if (val instanceof Error) {\n      serialized[key] = {\n        message: val.message,\n        __type: \"Error\",\n        // If this is a subclass (i.e., ReferenceError), send up the type so we\n        // can re-create the same type during hydration.\n        ...val.name !== \"Error\" ? {\n          __subType: val.name\n        } : {}\n      };\n    } else {\n      serialized[key] = val;\n    }\n  }\n  return serialized;\n}\nfunction getStatelessNavigator() {\n  return {\n    createHref,\n    encodeLocation,\n    push(to) {\n      throw new Error(\n        `You cannot use navigator.push() on the server because it is a stateless environment. This error was probably triggered when you did a \\`navigate(${JSON.stringify(to)})\\` somewhere in your app.`\n      );\n    },\n    replace(to) {\n      throw new Error(\n        `You cannot use navigator.replace() on the server because it is a stateless environment. This error was probably triggered when you did a \\`navigate(${JSON.stringify(to)}, { replace: true })\\` somewhere in your app.`\n      );\n    },\n    go(delta) {\n      throw new Error(\n        `You cannot use navigator.go() on the server because it is a stateless environment. This error was probably triggered when you did a \\`navigate(${delta})\\` somewhere in your app.`\n      );\n    },\n    back() {\n      throw new Error(\n        `You cannot use navigator.back() on the server because it is a stateless environment.`\n      );\n    },\n    forward() {\n      throw new Error(\n        `You cannot use navigator.forward() on the server because it is a stateless environment.`\n      );\n    }\n  };\n}\nfunction createStaticHandler2(routes, opts) {\n  return createStaticHandler(routes, {\n    ...opts,\n    mapRouteProperties\n  });\n}\nfunction createStaticRouter(routes, context, opts = {}) {\n  let manifest = {};\n  let dataRoutes = convertRoutesToDataRoutes(\n    routes,\n    mapRouteProperties,\n    void 0,\n    manifest\n  );\n  let matches = context.matches.map((match) => {\n    let route = manifest[match.route.id] || match.route;\n    return {\n      ...match,\n      route\n    };\n  });\n  let msg = (method) => `You cannot use router.${method}() on the server because it is a stateless environment`;\n  return {\n    get basename() {\n      return context.basename;\n    },\n    get future() {\n      return {\n        v8_middleware: false,\n        ...opts?.future\n      };\n    },\n    get state() {\n      return {\n        historyAction: \"POP\" /* Pop */,\n        location: context.location,\n        matches,\n        loaderData: context.loaderData,\n        actionData: context.actionData,\n        errors: context.errors,\n        initialized: true,\n        navigation: IDLE_NAVIGATION,\n        restoreScrollPosition: null,\n        preventScrollReset: false,\n        revalidation: \"idle\",\n        fetchers: /* @__PURE__ */ new Map(),\n        blockers: /* @__PURE__ */ new Map()\n      };\n    },\n    get routes() {\n      return dataRoutes;\n    },\n    get window() {\n      return void 0;\n    },\n    initialize() {\n      throw msg(\"initialize\");\n    },\n    subscribe() {\n      throw msg(\"subscribe\");\n    },\n    enableScrollRestoration() {\n      throw msg(\"enableScrollRestoration\");\n    },\n    navigate() {\n      throw msg(\"navigate\");\n    },\n    fetch() {\n      throw msg(\"fetch\");\n    },\n    revalidate() {\n      throw msg(\"revalidate\");\n    },\n    createHref,\n    encodeLocation,\n    getFetcher() {\n      return IDLE_FETCHER;\n    },\n    deleteFetcher() {\n      throw msg(\"deleteFetcher\");\n    },\n    resetFetcher() {\n      throw msg(\"resetFetcher\");\n    },\n    dispose() {\n      throw msg(\"dispose\");\n    },\n    getBlocker() {\n      return IDLE_BLOCKER;\n    },\n    deleteBlocker() {\n      throw msg(\"deleteBlocker\");\n    },\n    patchRoutes() {\n      throw msg(\"patchRoutes\");\n    },\n    _internalFetchControllers: /* @__PURE__ */ new Map(),\n    _internalSetRoutes() {\n      throw msg(\"_internalSetRoutes\");\n    },\n    _internalSetStateDoNotUseOrYouWillBreakYourApp() {\n      throw msg(\"_internalSetStateDoNotUseOrYouWillBreakYourApp\");\n    }\n  };\n}\nfunction createHref(to) {\n  return typeof to === \"string\" ? to : createPath(to);\n}\nfunction encodeLocation(to) {\n  let href = typeof to === \"string\" ? to : createPath(to);\n  href = href.replace(/ $/, \"%20\");\n  let encoded = ABSOLUTE_URL_REGEX3.test(href) ? new URL(href) : new URL(href, \"http://localhost\");\n  return {\n    pathname: encoded.pathname,\n    search: encoded.search,\n    hash: encoded.hash\n  };\n}\nvar ABSOLUTE_URL_REGEX3 = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\nvar ESCAPE_LOOKUP2 = {\n  \"&\": \"\\\\u0026\",\n  \">\": \"\\\\u003e\",\n  \"<\": \"\\\\u003c\",\n  \"\\u2028\": \"\\\\u2028\",\n  \"\\u2029\": \"\\\\u2029\"\n};\nvar ESCAPE_REGEX2 = /[&><\\u2028\\u2029]/g;\nfunction htmlEscape(str) {\n  return str.replace(ESCAPE_REGEX2, (match) => ESCAPE_LOOKUP2[match]);\n}\n\nexport {\n  Action,\n  createBrowserHistory,\n  invariant,\n  createPath,\n  parsePath,\n  createContext,\n  RouterContextProvider,\n  convertRoutesToDataRoutes,\n  matchRoutes,\n  generatePath,\n  matchPath,\n  stripBasename,\n  resolvePath,\n  data,\n  redirect,\n  redirectDocument,\n  replace,\n  ErrorResponseImpl,\n  isRouteErrorResponse,\n  IDLE_NAVIGATION,\n  IDLE_FETCHER,\n  IDLE_BLOCKER,\n  createRouter,\n  createStaticHandler,\n  getStaticContextFromError,\n  isDataWithResponseInit,\n  isResponse,\n  isRedirectStatusCode,\n  isRedirectResponse,\n  isMutationMethod,\n  DataRouterContext,\n  DataRouterStateContext,\n  RSCRouterContext,\n  ViewTransitionContext,\n  FetchersContext,\n  AwaitContextProvider,\n  NavigationContext,\n  LocationContext,\n  RouteContext,\n  ENABLE_DEV_WARNINGS,\n  useHref,\n  useInRouterContext,\n  useLocation,\n  useNavigationType,\n  useMatch,\n  useNavigate,\n  useOutletContext,\n  useOutlet,\n  useParams,\n  useResolvedPath,\n  useRoutes,\n  useNavigation,\n  useRevalidator,\n  useMatches,\n  useLoaderData,\n  useRouteLoaderData,\n  useActionData,\n  useRouteError,\n  useAsyncValue,\n  useAsyncError,\n  useBlocker,\n  useRoute,\n  warnOnce,\n  mapRouteProperties,\n  hydrationRouteProperties,\n  createMemoryRouter,\n  UNSTABLE_TransitionEnabledRouterProvider,\n  RouterProvider,\n  MemoryRouter,\n  Navigate,\n  Outlet,\n  Route,\n  Router,\n  Routes,\n  Await,\n  createRoutesFromChildren,\n  createRoutesFromElements,\n  renderMatches,\n  WithComponentProps,\n  withComponentProps,\n  WithHydrateFallbackProps,\n  withHydrateFallbackProps,\n  WithErrorBoundaryProps,\n  withErrorBoundaryProps,\n  createSearchParams,\n  escapeHtml,\n  encode,\n  createRequestInit,\n  SingleFetchRedirectSymbol,\n  SINGLE_FETCH_REDIRECT_STATUS,\n  NO_BODY_STATUS_CODES,\n  StreamTransfer,\n  getTurboStreamSingleFetchDataStrategy,\n  getSingleFetchDataStrategyImpl,\n  stripIndexParam,\n  singleFetchUrl,\n  decodeViaTurboStream,\n  RemixErrorBoundary,\n  createServerRoutes,\n  createClientRoutesWithHMRRevalidationOptOut,\n  noActionDefinedError,\n  createClientRoutes,\n  shouldHydrateRouteLoader,\n  getPatchRoutesOnNavigationFunction,\n  useFogOFWarDiscovery,\n  getManifestPath,\n  FrameworkContext,\n  CRITICAL_CSS_DATA_ATTRIBUTE,\n  Links,\n  PrefetchPageLinks,\n  Meta,\n  setIsHydrated,\n  Scripts,\n  createBrowserRouter,\n  createHashRouter,\n  BrowserRouter,\n  HashRouter,\n  HistoryRouter,\n  Link,\n  NavLink,\n  Form,\n  ScrollRestoration,\n  useLinkClickHandler,\n  useSearchParams,\n  useSubmit,\n  useFormAction,\n  useFetcher,\n  useFetchers,\n  useScrollRestoration,\n  useBeforeUnload,\n  usePrompt,\n  useViewTransitionState,\n  StaticRouter,\n  StaticRouterProvider,\n  createStaticHandler2,\n  createStaticRouter\n};\n","function _taggedTemplateLiteral(e, t) {\n  return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {\n    raw: {\n      value: Object.freeze(t)\n    }\n  }));\n}\nexport { _taggedTemplateLiteral as default };","let e={data:\"\"},t=t=>{if(\"object\"==typeof window){let e=(t?t.querySelector(\"#_goober\"):window._goober)||Object.assign(document.createElement(\"style\"),{innerHTML:\" \",id:\"_goober\"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||e},r=e=>{let r=t(e),l=r.data;return r.data=\"\",l},l=/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g,a=/\\/\\*[^]*?\\*\\/|  +/g,n=/\\n+/g,o=(e,t)=>{let r=\"\",l=\"\",a=\"\";for(let n in e){let c=e[n];\"@\"==n[0]?\"i\"==n[1]?r=n+\" \"+c+\";\":l+=\"f\"==n[1]?o(c,n):n+\"{\"+o(c,\"k\"==n[1]?\"\":t)+\"}\":\"object\"==typeof c?l+=o(c,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\\S+\\([^)]*\\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+\" \"+t:t)):n):null!=c&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,\"-$&\").toLowerCase(),a+=o.p?o.p(n,c):n+\":\"+c+\";\")}return r+(t&&a?t+\"{\"+a+\"}\":a)+l},c={},s=e=>{if(\"object\"==typeof e){let t=\"\";for(let r in e)t+=r+s(e[r]);return t}return e},i=(e,t,r,i,p)=>{let u=s(e),d=c[u]||(c[u]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return\"go\"+r})(u));if(!c[d]){let t=u!==e?e:(e=>{let t,r,o=[{}];for(;t=l.exec(e.replace(a,\"\"));)t[4]?o.shift():t[3]?(r=t[3].replace(n,\" \").trim(),o.unshift(o[0][r]=o[0][r]||{})):o[0][t[1]]=t[2].replace(n,\" \").trim();return o[0]})(e);c[d]=o(p?{[\"@keyframes \"+d]:t}:t,r?\"\":\".\"+d)}let f=r&&c.g?c.g:null;return r&&(c.g=c[d]),((e,t,r,l)=>{l?t.data=t.data.replace(l,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(c[d],t,i,f),d},p=(e,t,r)=>e.reduce((e,l,a)=>{let n=t[a];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?\".\"+t:e&&\"object\"==typeof e?e.props?\"\":o(e,\"\"):!1===e?\"\":e}return e+l+(null==n?\"\":n)},\"\");function u(e){let r=this||{},l=e.call?e(r.p):e;return i(l.unshift?l.raw?p(l,[].slice.call(arguments,1),r.p):l.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):l,t(r.target),r.g,r.o,r.k)}let d,f,g,b=u.bind({g:1}),h=u.bind({k:1});function m(e,t,r,l){o.p=t,d=e,f=r,g=l}function w(e,t){let r=this||{};return function(){let l=arguments;function a(n,o){let c=Object.assign({},n),s=c.className||a.className;r.p=Object.assign({theme:f&&f()},c),r.o=/ *go\\d+/.test(s),c.className=u.apply(r,l)+(s?\" \"+s:\"\"),t&&(c.ref=o);let i=e;return e[0]&&(i=c.as||e,delete c.as),g&&i[0]&&g(c),d(i,c)}return t?t(a):a}}export{u as css,r as extractCss,b as glob,h as keyframes,m as setup,w as styled};\n","import { CSSProperties } from 'react';\n\nexport type ToastType = 'success' | 'error' | 'loading' | 'blank' | 'custom';\nexport type ToastPosition =\n  | 'top-left'\n  | 'top-center'\n  | 'top-right'\n  | 'bottom-left'\n  | 'bottom-center'\n  | 'bottom-right';\n\nexport type Renderable = React.ReactElement | string | null;\n\nexport interface IconTheme {\n  primary: string;\n  secondary: string;\n}\n\nexport type ValueFunction<TValue, TArg> = (arg: TArg) => TValue;\nexport type ValueOrFunction<TValue, TArg> =\n  | TValue\n  | ValueFunction<TValue, TArg>;\n\nconst isFunction = <TValue, TArg>(\n  valOrFunction: ValueOrFunction<TValue, TArg>\n): valOrFunction is ValueFunction<TValue, TArg> =>\n  typeof valOrFunction === 'function';\n\nexport const resolveValue = <TValue, TArg>(\n  valOrFunction: ValueOrFunction<TValue, TArg>,\n  arg: TArg\n): TValue => (isFunction(valOrFunction) ? valOrFunction(arg) : valOrFunction);\n\nexport interface Toast {\n  type: ToastType;\n  id: string;\n  toasterId?: string;\n  message: ValueOrFunction<Renderable, Toast>;\n  icon?: Renderable;\n  duration?: number;\n  pauseDuration: number;\n  position?: ToastPosition;\n  removeDelay?: number;\n\n  ariaProps: {\n    role: 'status' | 'alert';\n    'aria-live': 'assertive' | 'off' | 'polite';\n  };\n\n  style?: CSSProperties;\n  className?: string;\n  iconTheme?: IconTheme;\n\n  createdAt: number;\n  visible: boolean;\n  dismissed: boolean;\n  height?: number;\n}\n\nexport type ToastOptions = Partial<\n  Pick<\n    Toast,\n    | 'id'\n    | 'icon'\n    | 'duration'\n    | 'ariaProps'\n    | 'className'\n    | 'style'\n    | 'position'\n    | 'iconTheme'\n    | 'toasterId'\n    | 'removeDelay'\n  >\n>;\n\nexport type DefaultToastOptions = ToastOptions & {\n  [key in ToastType]?: ToastOptions;\n};\n\nexport interface ToasterProps {\n  position?: ToastPosition;\n  toastOptions?: DefaultToastOptions;\n  reverseOrder?: boolean;\n  gutter?: number;\n  containerStyle?: React.CSSProperties;\n  containerClassName?: string;\n  toasterId?: string;\n  children?: (toast: Toast) => React.ReactElement;\n}\n\nexport interface ToastWrapperProps {\n  id: string;\n  className?: string;\n  style?: React.CSSProperties;\n  onHeightUpdate: (id: string, height: number) => void;\n  children?: React.ReactNode;\n}\n","export const genId = (() => {\n  let count = 0;\n  return () => {\n    return (++count).toString();\n  };\n})();\n\nexport const prefersReducedMotion = (() => {\n  // Cache result\n  let shouldReduceMotion: boolean | undefined = undefined;\n\n  return () => {\n    if (shouldReduceMotion === undefined && typeof window !== 'undefined') {\n      const mediaQuery = matchMedia('(prefers-reduced-motion: reduce)');\n      shouldReduceMotion = !mediaQuery || mediaQuery.matches;\n    }\n    return shouldReduceMotion;\n  };\n})();\n","import { useEffect, useState, useRef } from 'react';\nimport { DefaultToastOptions, Toast, ToastType } from './types';\n\nexport const TOAST_EXPIRE_DISMISS_DELAY = 1000;\nexport const TOAST_LIMIT = 20;\nexport const DEFAULT_TOASTER_ID = 'default';\n\ninterface ToasterSettings {\n  toastLimit: number;\n}\n\nexport enum ActionType {\n  ADD_TOAST,\n  UPDATE_TOAST,\n  UPSERT_TOAST,\n  DISMISS_TOAST,\n  REMOVE_TOAST,\n  START_PAUSE,\n  END_PAUSE,\n}\n\nexport type Action =\n  | {\n      type: ActionType.ADD_TOAST;\n      toast: Toast;\n    }\n  | {\n      type: ActionType.UPSERT_TOAST;\n      toast: Toast;\n    }\n  | {\n      type: ActionType.UPDATE_TOAST;\n      toast: Partial<Toast>;\n    }\n  | {\n      type: ActionType.DISMISS_TOAST;\n      toastId?: string;\n    }\n  | {\n      type: ActionType.REMOVE_TOAST;\n      toastId?: string;\n    }\n  | {\n      type: ActionType.START_PAUSE;\n      time: number;\n    }\n  | {\n      type: ActionType.END_PAUSE;\n      time: number;\n    };\n\ninterface ToasterState {\n  toasts: Toast[];\n  settings: ToasterSettings;\n  pausedAt: number | undefined;\n}\n\ninterface State {\n  [toasterId: string]: ToasterState;\n}\n\nexport const reducer = (state: ToasterState, action: Action): ToasterState => {\n  const { toastLimit } = state.settings;\n\n  switch (action.type) {\n    case ActionType.ADD_TOAST:\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, toastLimit),\n      };\n\n    case ActionType.UPDATE_TOAST:\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      };\n\n    case ActionType.UPSERT_TOAST:\n      const { toast } = action;\n      return reducer(state, {\n        type: state.toasts.find((t) => t.id === toast.id)\n          ? ActionType.UPDATE_TOAST\n          : ActionType.ADD_TOAST,\n        toast,\n      });\n\n    case ActionType.DISMISS_TOAST:\n      const { toastId } = action;\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                dismissed: true,\n                visible: false,\n              }\n            : t\n        ),\n      };\n    case ActionType.REMOVE_TOAST:\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      };\n\n    case ActionType.START_PAUSE:\n      return {\n        ...state,\n        pausedAt: action.time,\n      };\n\n    case ActionType.END_PAUSE:\n      const diff = action.time - (state.pausedAt || 0);\n\n      return {\n        ...state,\n        pausedAt: undefined,\n        toasts: state.toasts.map((t) => ({\n          ...t,\n          pauseDuration: t.pauseDuration + diff,\n        })),\n      };\n  }\n};\n\nconst listeners: Array<\n  [toasterId: string, reducer: (state: ToasterState) => void]\n> = [];\n\nconst defaultToasterState: ToasterState = {\n  toasts: [],\n  pausedAt: undefined,\n  settings: {\n    toastLimit: TOAST_LIMIT,\n  },\n};\nlet memoryState: State = {};\n\nexport const dispatch = (action: Action, toasterId = DEFAULT_TOASTER_ID) => {\n  memoryState[toasterId] = reducer(\n    memoryState[toasterId] || defaultToasterState,\n    action\n  );\n  listeners.forEach(([id, listener]) => {\n    if (id === toasterId) {\n      listener(memoryState[toasterId]);\n    }\n  });\n};\n\nexport const dispatchAll = (action: Action) =>\n  Object.keys(memoryState).forEach((toasterId) => dispatch(action, toasterId));\n\nexport const getToasterIdFromToastId = (toastId: string) =>\n  Object.keys(memoryState).find((toasterId) =>\n    memoryState[toasterId].toasts.some((t) => t.id === toastId)\n  );\n\nexport const createDispatch =\n  (toasterId = DEFAULT_TOASTER_ID) =>\n  (action: Action) => {\n    dispatch(action, toasterId);\n  };\n\nexport const defaultTimeouts: {\n  [key in ToastType]: number;\n} = {\n  blank: 4000,\n  error: 4000,\n  success: 2000,\n  loading: Infinity,\n  custom: 4000,\n};\n\nexport const useStore = (\n  toastOptions: DefaultToastOptions = {},\n  toasterId: string = DEFAULT_TOASTER_ID\n): ToasterState => {\n  const [state, setState] = useState<ToasterState>(\n    memoryState[toasterId] || defaultToasterState\n  );\n  const initial = useRef(memoryState[toasterId]);\n\n  // TODO: Switch to useSyncExternalStore when targeting React 18+\n  useEffect(() => {\n    if (initial.current !== memoryState[toasterId]) {\n      setState(memoryState[toasterId]);\n    }\n    listeners.push([toasterId, setState]);\n    return () => {\n      const index = listeners.findIndex(([id]) => id === toasterId);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    };\n  }, [toasterId]);\n\n  const mergedToasts = state.toasts.map((t) => ({\n    ...toastOptions,\n    ...toastOptions[t.type],\n    ...t,\n    removeDelay:\n      t.removeDelay ||\n      toastOptions[t.type]?.removeDelay ||\n      toastOptions?.removeDelay,\n    duration:\n      t.duration ||\n      toastOptions[t.type]?.duration ||\n      toastOptions?.duration ||\n      defaultTimeouts[t.type],\n    style: {\n      ...toastOptions.style,\n      ...toastOptions[t.type]?.style,\n      ...t.style,\n    },\n  }));\n\n  return {\n    ...state,\n    toasts: mergedToasts,\n  };\n};\n","import {\n  Renderable,\n  Toast,\n  ToastOptions,\n  ToastType,\n  DefaultToastOptions,\n  ValueOrFunction,\n  resolveValue,\n} from './types';\nimport { genId } from './utils';\nimport {\n  createDispatch,\n  Action,\n  ActionType,\n  dispatchAll,\n  getToasterIdFromToastId,\n} from './store';\n\ntype Message = ValueOrFunction<Renderable, Toast>;\n\ntype ToastHandler = (message: Message, options?: ToastOptions) => string;\n\nconst createToast = (\n  message: Message,\n  type: ToastType = 'blank',\n  opts?: ToastOptions\n): Toast => ({\n  createdAt: Date.now(),\n  visible: true,\n  dismissed: false,\n  type,\n  ariaProps: {\n    role: 'status',\n    'aria-live': 'polite',\n  },\n  message,\n  pauseDuration: 0,\n  ...opts,\n  id: opts?.id || genId(),\n});\n\nconst createHandler =\n  (type?: ToastType): ToastHandler =>\n  (message, options) => {\n    const toast = createToast(message, type, options);\n\n    const dispatch = createDispatch(\n      toast.toasterId || getToasterIdFromToastId(toast.id)\n    );\n\n    dispatch({ type: ActionType.UPSERT_TOAST, toast });\n    return toast.id;\n  };\n\nconst toast = (message: Message, opts?: ToastOptions) =>\n  createHandler('blank')(message, opts);\n\ntoast.error = createHandler('error');\ntoast.success = createHandler('success');\ntoast.loading = createHandler('loading');\ntoast.custom = createHandler('custom');\n\n/**\n * Dismisses the toast with the given id. If no id is given, dismisses all toasts.\n * The toast will transition out and then be removed from the DOM.\n * Applies to all toasters, except when a `toasterId` is given.\n */\ntoast.dismiss = (toastId?: string, toasterId?: string) => {\n  const action: Action = {\n    type: ActionType.DISMISS_TOAST,\n    toastId,\n  };\n\n  if (toasterId) {\n    createDispatch(toasterId)(action);\n  } else {\n    dispatchAll(action);\n  }\n};\n\n/**\n * Dismisses all toasts.\n */\ntoast.dismissAll = (toasterId?: string) => toast.dismiss(undefined, toasterId);\n\n/**\n * Removes the toast with the given id.\n * The toast will be removed from the DOM without any transition.\n */\ntoast.remove = (toastId?: string, toasterId?: string) => {\n  const action: Action = {\n    type: ActionType.REMOVE_TOAST,\n    toastId,\n  };\n  if (toasterId) {\n    createDispatch(toasterId)(action);\n  } else {\n    dispatchAll(action);\n  }\n};\n\n/**\n * Removes all toasts.\n */\ntoast.removeAll = (toasterId?: string) => toast.remove(undefined, toasterId);\n\n/**\n * Create a loading toast that will automatically updates with the promise.\n */\ntoast.promise = <T>(\n  promise: Promise<T> | (() => Promise<T>),\n  msgs: {\n    loading: Renderable;\n    success?: ValueOrFunction<Renderable, T>;\n    error?: ValueOrFunction<Renderable, any>;\n  },\n  opts?: DefaultToastOptions\n) => {\n  const id = toast.loading(msgs.loading, { ...opts, ...opts?.loading });\n\n  if (typeof promise === 'function') {\n    promise = promise();\n  }\n\n  promise\n    .then((p) => {\n      const successMessage = msgs.success\n        ? resolveValue(msgs.success, p)\n        : undefined;\n\n      if (successMessage) {\n        toast.success(successMessage, {\n          id,\n          ...opts,\n          ...opts?.success,\n        });\n      } else {\n        toast.dismiss(id);\n      }\n      return p;\n    })\n    .catch((e) => {\n      const errorMessage = msgs.error ? resolveValue(msgs.error, e) : undefined;\n\n      if (errorMessage) {\n        toast.error(errorMessage, {\n          id,\n          ...opts,\n          ...opts?.error,\n        });\n      } else {\n        toast.dismiss(id);\n      }\n    });\n\n  return promise;\n};\n\nexport { toast };\n","import { useEffect, useCallback, useRef } from 'react';\nimport { createDispatch, ActionType, useStore, dispatch } from './store';\nimport { toast } from './toast';\nimport { DefaultToastOptions, Toast, ToastPosition } from './types';\n\nexport const REMOVE_DELAY = 1000;\n\nexport const useToaster = (\n  toastOptions?: DefaultToastOptions,\n  toasterId: string = 'default'\n) => {\n  const { toasts, pausedAt } = useStore(toastOptions, toasterId);\n  const toastTimeouts = useRef(\n    new Map<Toast['id'], ReturnType<typeof setTimeout>>()\n  ).current;\n\n  const addToRemoveQueue = useCallback(\n    (toastId: string, removeDelay = REMOVE_DELAY) => {\n      if (toastTimeouts.has(toastId)) {\n        return;\n      }\n\n      const timeout = setTimeout(() => {\n        toastTimeouts.delete(toastId);\n        dispatch({\n          type: ActionType.REMOVE_TOAST,\n          toastId: toastId,\n        });\n      }, removeDelay);\n\n      toastTimeouts.set(toastId, timeout);\n    },\n    []\n  );\n\n  useEffect(() => {\n    if (pausedAt) {\n      return;\n    }\n\n    const now = Date.now();\n    const timeouts = toasts.map((t) => {\n      if (t.duration === Infinity) {\n        return;\n      }\n\n      const durationLeft =\n        (t.duration || 0) + t.pauseDuration - (now - t.createdAt);\n\n      if (durationLeft < 0) {\n        if (t.visible) {\n          toast.dismiss(t.id);\n        }\n        return;\n      }\n      return setTimeout(() => toast.dismiss(t.id, toasterId), durationLeft);\n    });\n\n    return () => {\n      timeouts.forEach((timeout) => timeout && clearTimeout(timeout));\n    };\n  }, [toasts, pausedAt, toasterId]);\n\n  const dispatch = useCallback(createDispatch(toasterId), [toasterId]);\n\n  const startPause = useCallback(() => {\n    dispatch({\n      type: ActionType.START_PAUSE,\n      time: Date.now(),\n    });\n  }, [dispatch]);\n\n  const updateHeight = useCallback(\n    (toastId: string, height: number) => {\n      dispatch({\n        type: ActionType.UPDATE_TOAST,\n        toast: { id: toastId, height },\n      });\n    },\n    [dispatch]\n  );\n\n  const endPause = useCallback(() => {\n    if (pausedAt) {\n      dispatch({ type: ActionType.END_PAUSE, time: Date.now() });\n    }\n  }, [pausedAt, dispatch]);\n\n  const calculateOffset = useCallback(\n    (\n      toast: Toast,\n      opts?: {\n        reverseOrder?: boolean;\n        gutter?: number;\n        defaultPosition?: ToastPosition;\n      }\n    ) => {\n      const { reverseOrder = false, gutter = 8, defaultPosition } = opts || {};\n\n      const relevantToasts = toasts.filter(\n        (t) =>\n          (t.position || defaultPosition) ===\n            (toast.position || defaultPosition) && t.height\n      );\n      const toastIndex = relevantToasts.findIndex((t) => t.id === toast.id);\n      const toastsBefore = relevantToasts.filter(\n        (toast, i) => i < toastIndex && toast.visible\n      ).length;\n\n      const offset = relevantToasts\n        .filter((t) => t.visible)\n        .slice(...(reverseOrder ? [toastsBefore + 1] : [0, toastsBefore]))\n        .reduce((acc, t) => acc + (t.height || 0) + gutter, 0);\n\n      return offset;\n    },\n    [toasts]\n  );\n\n  // Keep track of dismissed toasts and remove them after the delay\n  useEffect(() => {\n    toasts.forEach((toast) => {\n      if (toast.dismissed) {\n        addToRemoveQueue(toast.id, toast.removeDelay);\n      } else {\n        // If toast becomes visible again, remove it from the queue\n        const timeout = toastTimeouts.get(toast.id);\n        if (timeout) {\n          clearTimeout(timeout);\n          toastTimeouts.delete(toast.id);\n        }\n      }\n    });\n  }, [toasts, addToRemoveQueue]);\n\n  return {\n    toasts,\n    handlers: {\n      updateHeight,\n      startPause,\n      endPause,\n      calculateOffset,\n    },\n  };\n};\n","import { styled, keyframes } from 'goober';\n\nconst circleAnimation = keyframes`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}`;\n\nconst firstLineAnimation = keyframes`\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`;\n\nconst secondLineAnimation = keyframes`\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}`;\n\nexport interface ErrorTheme {\n  primary?: string;\n  secondary?: string;\n}\n\nexport const ErrorIcon = styled('div')<ErrorTheme>`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${(p) => p.primary || '#ff4b4b'};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${circleAnimation} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: ${firstLineAnimation} 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ${(p) => p.secondary || '#fff'};\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: ${secondLineAnimation} 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n`;\n","import { styled, keyframes } from 'goober';\n\nconst rotate = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nexport interface LoaderTheme {\n  primary?: string;\n  secondary?: string;\n}\n\nexport const LoaderIcon = styled('div')<LoaderTheme>`\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ${(p) => p.secondary || '#e0e0e0'};\n  border-right-color: ${(p) => p.primary || '#616161'};\n  animation: ${rotate} 1s linear infinite;\n`;\n","import { styled, keyframes } from 'goober';\n\nconst circleAnimation = keyframes`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}`;\n\nconst checkmarkAnimation = keyframes`\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}`;\n\nexport interface CheckmarkTheme {\n  primary?: string;\n  secondary?: string;\n}\n\nexport const CheckmarkIcon = styled('div')<CheckmarkTheme>`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${(p) => p.primary || '#61d345'};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${circleAnimation} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: ${checkmarkAnimation} 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ${(p) => p.secondary || '#fff'};\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n`;\n","import * as React from 'react';\nimport { styled, keyframes } from 'goober';\n\nimport { Toast } from '../core/types';\nimport { ErrorIcon, ErrorTheme } from './error';\nimport { LoaderIcon, LoaderTheme } from './loader';\nimport { CheckmarkIcon, CheckmarkTheme } from './checkmark';\n\nconst StatusWrapper = styled('div')`\n  position: absolute;\n`;\n\nconst IndicatorWrapper = styled('div')`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n`;\n\nconst enter = keyframes`\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`;\n\nexport const AnimatedIconWrapper = styled('div')`\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: ${enter} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n`;\n\nexport type IconThemes = Partial<{\n  success: CheckmarkTheme;\n  error: ErrorTheme;\n  loading: LoaderTheme;\n}>;\n\nexport const ToastIcon: React.FC<{\n  toast: Toast;\n}> = ({ toast }) => {\n  const { icon, type, iconTheme } = toast;\n  if (icon !== undefined) {\n    if (typeof icon === 'string') {\n      return <AnimatedIconWrapper>{icon}</AnimatedIconWrapper>;\n    } else {\n      return icon;\n    }\n  }\n\n  if (type === 'blank') {\n    return null;\n  }\n\n  return (\n    <IndicatorWrapper>\n      <LoaderIcon {...iconTheme} />\n      {type !== 'loading' && (\n        <StatusWrapper>\n          {type === 'error' ? (\n            <ErrorIcon {...iconTheme} />\n          ) : (\n            <CheckmarkIcon {...iconTheme} />\n          )}\n        </StatusWrapper>\n      )}\n    </IndicatorWrapper>\n  );\n};\n","import * as React from 'react';\nimport { styled, keyframes } from 'goober';\n\nimport { Toast, ToastPosition, resolveValue, Renderable } from '../core/types';\nimport { ToastIcon } from './toast-icon';\nimport { prefersReducedMotion } from '../core/utils';\n\nconst enterAnimation = (factor: number) => `\n0% {transform: translate3d(0,${factor * -200}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`;\n\nconst exitAnimation = (factor: number) => `\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${factor * -150}%,-1px) scale(.6); opacity:0;}\n`;\n\nconst fadeInAnimation = `0%{opacity:0;} 100%{opacity:1;}`;\nconst fadeOutAnimation = `0%{opacity:1;} 100%{opacity:0;}`;\n\nconst ToastBarBase = styled('div')`\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n`;\n\nconst Message = styled('div')`\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n`;\n\ninterface ToastBarProps {\n  toast: Toast;\n  position?: ToastPosition;\n  style?: React.CSSProperties;\n  children?: (components: {\n    icon: Renderable;\n    message: Renderable;\n  }) => Renderable;\n}\n\nconst getAnimationStyle = (\n  position: ToastPosition,\n  visible: boolean\n): React.CSSProperties => {\n  const top = position.includes('top');\n  const factor = top ? 1 : -1;\n\n  const [enter, exit] = prefersReducedMotion()\n    ? [fadeInAnimation, fadeOutAnimation]\n    : [enterAnimation(factor), exitAnimation(factor)];\n\n  return {\n    animation: visible\n      ? `${keyframes(enter)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`\n      : `${keyframes(exit)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`,\n  };\n};\n\nexport const ToastBar: React.FC<ToastBarProps> = React.memo(\n  ({ toast, position, style, children }) => {\n    const animationStyle: React.CSSProperties = toast.height\n      ? getAnimationStyle(\n          toast.position || position || 'top-center',\n          toast.visible\n        )\n      : { opacity: 0 };\n\n    const icon = <ToastIcon toast={toast} />;\n    const message = (\n      <Message {...toast.ariaProps}>\n        {resolveValue(toast.message, toast)}\n      </Message>\n    );\n\n    return (\n      <ToastBarBase\n        className={toast.className}\n        style={{\n          ...animationStyle,\n          ...style,\n          ...toast.style,\n        }}\n      >\n        {typeof children === 'function' ? (\n          children({\n            icon,\n            message,\n          })\n        ) : (\n          <>\n            {icon}\n            {message}\n          </>\n        )}\n      </ToastBarBase>\n    );\n  }\n);\n","import { css, setup } from 'goober';\nimport * as React from 'react';\nimport {\n  resolveValue,\n  ToasterProps,\n  ToastPosition,\n  ToastWrapperProps,\n} from '../core/types';\nimport { useToaster } from '../core/use-toaster';\nimport { prefersReducedMotion } from '../core/utils';\nimport { ToastBar } from './toast-bar';\n\nsetup(React.createElement);\n\nconst ToastWrapper = ({\n  id,\n  className,\n  style,\n  onHeightUpdate,\n  children,\n}: ToastWrapperProps) => {\n  const ref = React.useCallback(\n    (el: HTMLElement | null) => {\n      if (el) {\n        const updateHeight = () => {\n          const height = el.getBoundingClientRect().height;\n          onHeightUpdate(id, height);\n        };\n        updateHeight();\n        new MutationObserver(updateHeight).observe(el, {\n          subtree: true,\n          childList: true,\n          characterData: true,\n        });\n      }\n    },\n    [id, onHeightUpdate]\n  );\n\n  return (\n    <div ref={ref} className={className} style={style}>\n      {children}\n    </div>\n  );\n};\n\nconst getPositionStyle = (\n  position: ToastPosition,\n  offset: number\n): React.CSSProperties => {\n  const top = position.includes('top');\n  const verticalStyle: React.CSSProperties = top ? { top: 0 } : { bottom: 0 };\n  const horizontalStyle: React.CSSProperties = position.includes('center')\n    ? {\n        justifyContent: 'center',\n      }\n    : position.includes('right')\n    ? {\n        justifyContent: 'flex-end',\n      }\n    : {};\n  return {\n    left: 0,\n    right: 0,\n    display: 'flex',\n    position: 'absolute',\n    transition: prefersReducedMotion()\n      ? undefined\n      : `all 230ms cubic-bezier(.21,1.02,.73,1)`,\n    transform: `translateY(${offset * (top ? 1 : -1)}px)`,\n    ...verticalStyle,\n    ...horizontalStyle,\n  };\n};\n\nconst activeClass = css`\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n`;\n\nconst DEFAULT_OFFSET = 16;\n\nexport const Toaster: React.FC<ToasterProps> = ({\n  reverseOrder,\n  position = 'top-center',\n  toastOptions,\n  gutter,\n  children,\n  toasterId,\n  containerStyle,\n  containerClassName,\n}) => {\n  const { toasts, handlers } = useToaster(toastOptions, toasterId);\n\n  return (\n    <div\n      data-rht-toaster={toasterId || ''}\n      style={{\n        position: 'fixed',\n        zIndex: 9999,\n        top: DEFAULT_OFFSET,\n        left: DEFAULT_OFFSET,\n        right: DEFAULT_OFFSET,\n        bottom: DEFAULT_OFFSET,\n        pointerEvents: 'none',\n        ...containerStyle,\n      }}\n      className={containerClassName}\n      onMouseEnter={handlers.startPause}\n      onMouseLeave={handlers.endPause}\n    >\n      {toasts.map((t) => {\n        const toastPosition = t.position || position;\n        const offset = handlers.calculateOffset(t, {\n          reverseOrder,\n          gutter,\n          defaultPosition: position,\n        });\n        const positionStyle = getPositionStyle(toastPosition, offset);\n\n        return (\n          <ToastWrapper\n            id={t.id}\n            key={t.id}\n            onHeightUpdate={handlers.updateHeight}\n            className={t.visible ? activeClass : ''}\n            style={positionStyle}\n          >\n            {t.type === 'custom' ? (\n              resolveValue(t.message, t)\n            ) : children ? (\n              children(t)\n            ) : (\n              <ToastBar toast={t} position={toastPosition} />\n            )}\n          </ToastWrapper>\n        );\n      })}\n    </div>\n  );\n};\n","import { toast } from './core/toast';\n\nexport * from './headless';\n\nexport { ToastBar } from './components/toast-bar';\nexport { ToastIcon } from './components/toast-icon';\nexport { Toaster } from './components/toaster';\nexport { CheckmarkIcon } from './components/checkmark';\nexport { ErrorIcon } from './components/error';\nexport { LoaderIcon } from './components/loader';\n\nexport { toast };\nexport default toast;\n","export default {\n  xmlns: 'http://www.w3.org/2000/svg',\n  width: 24,\n  height: 24,\n  viewBox: '0 0 24 24',\n  fill: 'none',\n  stroke: 'currentColor',\n  strokeWidth: 2,\n  strokeLinecap: 'round',\n  strokeLinejoin: 'round',\n};\n","import { forwardRef, createElement, ReactSVG, SVGProps, ForwardRefExoticComponent, RefAttributes } from 'react';\nimport defaultAttributes from './defaultAttributes';\n\nexport type IconNode = [elementName: keyof ReactSVG, attrs: Record<string, string>][]\n\nexport type SVGAttributes = Partial<SVGProps<SVGSVGElement>>\ntype ComponentAttributes = RefAttributes<SVGSVGElement> & SVGAttributes\n\nexport interface LucideProps extends ComponentAttributes {\n  size?: string | number\n  absoluteStrokeWidth?: boolean\n}\n\nexport type LucideIcon = ForwardRefExoticComponent<LucideProps>;\n/**\n * Converts string to KebabCase\n * Copied from scripts/helper. If anyone knows how to properly import it here\n * then please fix it.\n *\n * @param {string} string\n * @returns {string} A kebabized string\n */\nexport const toKebabCase = (string: string) => string.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n\nconst createLucideIcon = (iconName: string, iconNode: IconNode): LucideIcon => {\n  const Component = forwardRef<SVGSVGElement, LucideProps>(\n    ({ color = 'currentColor', size = 24, strokeWidth = 2, absoluteStrokeWidth, children, ...rest }, ref) =>\n      createElement(\n        'svg',\n        {\n          ref,\n          ...defaultAttributes,\n          width: size,\n          height: size,\n          stroke: color,\n          strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n          className: `lucide lucide-${toKebabCase(iconName)}`,\n          ...rest,\n        },\n        [\n          ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n          ...(\n            (Array.isArray(children) ? children : [children]) || []\n          )\n        ],\n      ),\n  );\n\n  Component.displayName = `${iconName}`;\n\n  return Component;\n};\n\nexport default createLucideIcon\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Shield\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjJzOC00IDgtMTBWNWwtOC0zLTggM3Y3YzAgNiA4IDEwIDggMTB6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/shield\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Shield = createLucideIcon('Shield', [\n  ['path', { d: 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z', key: '3xmgem' }],\n]);\n\nexport default Shield;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Scale\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgMTYgMy04IDMgOGMtLjg3LjY1LTEuOTIgMS0zIDFzLTIuMTMtLjM1LTMtMVoiIC8+CiAgPHBhdGggZD0ibTIgMTYgMy04IDMgOGMtLjg3LjY1LTEuOTIgMS0zIDFzLTIuMTMtLjM1LTMtMVoiIC8+CiAgPHBhdGggZD0iTTcgMjFoMTAiIC8+CiAgPHBhdGggZD0iTTEyIDN2MTgiIC8+CiAgPHBhdGggZD0iTTMgN2gyYzIgMCA1LTEgNy0yIDIgMSA1IDIgNyAyaDIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/scale\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Scale = createLucideIcon('Scale', [\n  [\n    'path',\n    { d: 'm16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z', key: '7g6ntu' },\n  ],\n  [\n    'path',\n    { d: 'm2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z', key: 'ijws7r' },\n  ],\n  ['path', { d: 'M7 21h10', key: '1b0cd5' }],\n  ['path', { d: 'M12 3v18', key: '108xh3' }],\n  ['path', { d: 'M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2', key: '3gwbw2' }],\n]);\n\nexport default Scale;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Wallet\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJWN0g1YTIgMiAwIDAgMSAwLTRoMTR2NCIgLz4KICA8cGF0aCBkPSJNMyA1djE0YTIgMiAwIDAgMCAyIDJoMTZ2LTUiIC8+CiAgPHBhdGggZD0iTTE4IDEyYTIgMiAwIDAgMCAwIDRoNHYtNFoiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/wallet\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Wallet = createLucideIcon('Wallet', [\n  ['path', { d: 'M21 12V7H5a2 2 0 0 1 0-4h14v4', key: '195gfw' }],\n  ['path', { d: 'M3 5v14a2 2 0 0 0 2 2h16v-5', key: '195n9w' }],\n  ['path', { d: 'M18 12a2 2 0 0 0 0 4h4v-4Z', key: 'vllfpd' }],\n]);\n\nexport default Wallet;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('User', [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n]);\n\nexport default User;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LogOut\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOSAyMUg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yaDQiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTYgMTcgMjEgMTIgMTYgNyIgLz4KICA8bGluZSB4MT0iMjEiIHgyPSI5IiB5MT0iMTIiIHkyPSIxMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/log-out\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LogOut = createLucideIcon('LogOut', [\n  ['path', { d: 'M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4', key: '1uf3rs' }],\n  ['polyline', { points: '16 17 21 12 16 7', key: '1gabdz' }],\n  ['line', { x1: '21', x2: '9', y1: '12', y2: '12', key: '1uyos4' }],\n]);\n\nexport default LogOut;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Key\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSI3LjUiIGN5PSIxNS41IiByPSI1LjUiIC8+CiAgPHBhdGggZD0ibTIxIDItOS42IDkuNiIgLz4KICA8cGF0aCBkPSJtMTUuNSA3LjUgMyAzTDIyIDdsLTMtMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/key\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Key = createLucideIcon('Key', [\n  ['circle', { cx: '7.5', cy: '15.5', r: '5.5', key: 'yqb3hr' }],\n  ['path', { d: 'm21 2-9.6 9.6', key: '1j0ho8' }],\n  ['path', { d: 'm15.5 7.5 3 3L22 7l-3-3', key: '1rn1fs' }],\n]);\n\nexport default Key;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name AlertCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/alert-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst AlertCircle = createLucideIcon('AlertCircle', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['line', { x1: '12', x2: '12', y1: '8', y2: '12', key: '1pkeuh' }],\n  ['line', { x1: '12', x2: '12.01', y1: '16', y2: '16', key: '4dfq90' }],\n]);\n\nexport default AlertCircle;\n","function _checkPrivateRedeclaration(e, t) {\n  if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n}\nexport { _checkPrivateRedeclaration as default };","import checkPrivateRedeclaration from \"./checkPrivateRedeclaration.js\";\nfunction _classPrivateFieldInitSpec(e, t, a) {\n  checkPrivateRedeclaration(e, t), t.set(e, a);\n}\nexport { _classPrivateFieldInitSpec as default };","function _assertClassBrand(e, t, n) {\n  if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n;\n  throw new TypeError(\"Private element is not present on this object\");\n}\nexport { _assertClassBrand as default };","import assertClassBrand from \"./assertClassBrand.js\";\nfunction _classPrivateFieldGet2(s, a) {\n  return s.get(assertClassBrand(s, a));\n}\nexport { _classPrivateFieldGet2 as default };","import assertClassBrand from \"./assertClassBrand.js\";\nfunction _classPrivateFieldSet2(s, a, r) {\n  return s.set(assertClassBrand(s, a), r), r;\n}\nexport { _classPrivateFieldSet2 as default };","/**\n *  Property helper functions.\n *\n *  @_subsection api/utils:Properties  [about-properties]\n */\n\nfunction checkType(value: any, type: string, name: string): void {\n    const types = type.split(\"|\").map(t => t.trim());\n    for (let i = 0; i < types.length; i++) {\n        switch (type) {\n            case \"any\":\n                return;\n            case \"bigint\":\n            case \"boolean\":\n            case \"number\":\n            case \"string\":\n                if (typeof(value) === type) { return; }\n        }\n    }\n\n    const error: any = new Error(`invalid value for type ${ type }`);\n    error.code = \"INVALID_ARGUMENT\";\n    error.argument = `value.${ name }`;\n    error.value = value;\n\n    throw error;\n}\n\n/**\n *  Resolves to a new object that is a copy of %%value%%, but with all\n *  values resolved.\n */\nexport async function resolveProperties<T>(value: { [ P in keyof T ]: T[P] | Promise<T[P]>}): Promise<T> {\n    const keys = Object.keys(value);\n    const results = await Promise.all(keys.map((k) => Promise.resolve(value[<keyof T>k])));\n    return results.reduce((accum: any, v, index) => {\n        accum[keys[index]] = v;\n        return accum;\n    }, <{ [ P in keyof T]: T[P] }>{ });\n}\n\n/**\n *  Assigns the %%values%% to %%target%% as read-only values.\n *\n *  It %%types%% is specified, the values are checked.\n */\nexport function defineProperties<T>(\n target: T,\n values: { [ K in keyof T ]?: T[K] },\n types?: { [ K in keyof T ]?: string }): void {\n\n    for (let key in values) {\n        let value = values[key];\n\n        const type = (types ? types[key]: null);\n        if (type) { checkType(value, type, key); }\n\n        Object.defineProperty(target, key, { enumerable: true, value, writable: false });\n    }\n}\n","/**\n *  All errors in ethers include properties to ensure they are both\n *  human-readable (i.e. ``.message``) and machine-readable (i.e. ``.code``).\n *\n *  The [[isError]] function can be used to check the error ``code`` and\n *  provide a type guard for the properties present on that error interface.\n *\n *  @_section: api/utils/errors:Errors  [about-errors]\n */\n\nimport { version } from \"../_version.js\";\n\nimport { defineProperties } from \"./properties.js\";\n\nimport type {\n    TransactionRequest, TransactionReceipt, TransactionResponse\n} from \"../providers/index.js\";\n\nimport type { FetchRequest, FetchResponse } from \"./fetch.js\";\n\n/**\n *  An error may contain additional properties, but those must not\n *  conflict with any implicit properties.\n */\nexport type ErrorInfo<T> = Omit<T, \"code\" | \"name\" | \"message\" | \"shortMessage\"> & { shortMessage?: string };\n\n\nfunction stringify(value: any, seen?: Set<any>): any {\n    if (value == null) { return \"null\"; }\n\n    if (seen == null) { seen = new Set(); }\n    if (typeof(value) === \"object\") {\n        if (seen.has(value)) { return \"[Circular]\"; }\n        seen.add(value);\n    }\n\n    if (Array.isArray(value)) {\n        return \"[ \" + (value.map((v) => stringify(v, seen))).join(\", \") + \" ]\";\n    }\n\n    if (value instanceof Uint8Array) {\n        const HEX = \"0123456789abcdef\";\n        let result = \"0x\";\n        for (let i = 0; i < value.length; i++) {\n            result += HEX[value[i] >> 4];\n            result += HEX[value[i] & 0xf];\n        }\n        return result;\n    }\n\n    if (typeof(value) === \"object\" && typeof(value.toJSON) === \"function\") {\n        return stringify(value.toJSON(), seen);\n    }\n\n    switch (typeof(value)) {\n        case \"boolean\": case \"number\": case \"symbol\":\n            return value.toString();\n        case \"bigint\":\n            return BigInt(value).toString();\n        case \"string\":\n            return JSON.stringify(value);\n        case \"object\": {\n            const keys = Object.keys(value);\n            keys.sort();\n            return \"{ \" + keys.map((k) => `${ stringify(k, seen) }: ${ stringify(value[k], seen) }`).join(\", \") + \" }\";\n        }\n    }\n\n    return `[ COULD NOT SERIALIZE ]`;\n}\n\n/**\n *  All errors emitted by ethers have an **ErrorCode** to help\n *  identify and coalesce errors to simplify programmatic analysis.\n *\n *  Each **ErrorCode** is the %%code%% proerty of a coresponding\n *  [[EthersError]].\n *\n *  **Generic Errors**\n *\n *  **``\"UNKNOWN_ERROR\"``** - see [[UnknownError]]\n *\n *  **``\"NOT_IMPLEMENTED\"``** - see [[NotImplementedError]]\n *\n *  **``\"UNSUPPORTED_OPERATION\"``** - see [[UnsupportedOperationError]]\n *\n *  **``\"NETWORK_ERROR\"``** - see [[NetworkError]]\n *\n *  **``\"SERVER_ERROR\"``** - see [[ServerError]]\n *\n *  **``\"TIMEOUT\"``** - see [[TimeoutError]]\n *\n *  **``\"BAD_DATA\"``** - see [[BadDataError]]\n *\n *  **``\"CANCELLED\"``** - see [[CancelledError]]\n *\n *  **Operational Errors**\n *\n *  **``\"BUFFER_OVERRUN\"``** - see [[BufferOverrunError]]\n *\n *  **``\"NUMERIC_FAULT\"``** - see [[NumericFaultError]]\n *\n *  **Argument Errors**\n *\n *  **``\"INVALID_ARGUMENT\"``** - see [[InvalidArgumentError]]\n *\n *  **``\"MISSING_ARGUMENT\"``** - see [[MissingArgumentError]]\n *\n *  **``\"UNEXPECTED_ARGUMENT\"``** - see [[UnexpectedArgumentError]]\n *\n *  **``\"VALUE_MISMATCH\"``** - //unused//\n *\n *  **Blockchain Errors**\n *\n *  **``\"CALL_EXCEPTION\"``** - see [[CallExceptionError]]\n *\n *  **``\"INSUFFICIENT_FUNDS\"``** - see [[InsufficientFundsError]]\n *\n *  **``\"NONCE_EXPIRED\"``** - see [[NonceExpiredError]]\n *\n *  **``\"REPLACEMENT_UNDERPRICED\"``** - see [[ReplacementUnderpricedError]]\n *\n *  **``\"TRANSACTION_REPLACED\"``** - see [[TransactionReplacedError]]\n *\n *  **``\"UNCONFIGURED_NAME\"``** - see [[UnconfiguredNameError]]\n *\n *  **``\"OFFCHAIN_FAULT\"``** - see [[OffchainFaultError]]\n *\n *  **User Interaction Errors**\n *\n *  **``\"ACTION_REJECTED\"``** - see [[ActionRejectedError]]\n */\nexport type ErrorCode =\n\n    // Generic Errors\n    \"UNKNOWN_ERROR\" | \"NOT_IMPLEMENTED\" | \"UNSUPPORTED_OPERATION\" |\n    \"NETWORK_ERROR\" | \"SERVER_ERROR\" | \"TIMEOUT\" | \"BAD_DATA\" |\n    \"CANCELLED\" |\n\n    // Operational Errors\n    \"BUFFER_OVERRUN\" |  \"NUMERIC_FAULT\" |\n\n    // Argument Errors\n    \"INVALID_ARGUMENT\" | \"MISSING_ARGUMENT\" | \"UNEXPECTED_ARGUMENT\" |\n    \"VALUE_MISMATCH\" |\n\n    // Blockchain Errors\n    \"CALL_EXCEPTION\" | \"INSUFFICIENT_FUNDS\" | \"NONCE_EXPIRED\" |\n    \"REPLACEMENT_UNDERPRICED\" | \"TRANSACTION_REPLACED\" |\n    \"UNCONFIGURED_NAME\" | \"OFFCHAIN_FAULT\" |\n\n    // User Interaction\n    \"ACTION_REJECTED\"\n;\n\n/**\n *  All errors in Ethers include properties to assist in\n *  machine-readable errors.\n */\nexport interface EthersError<T extends ErrorCode = ErrorCode> extends Error {\n    /**\n     *  The string error code.\n     */\n    code: ErrorCode;\n\n    /**\n     *  A short message describing the error, with minimal additional\n     *  details.\n     */\n    shortMessage: string;\n\n    /**\n     *  Additional info regarding the error that may be useful.\n     *\n     *  This is generally helpful mostly for human-based debugging.\n     */\n    info?: Record<string, any>;\n\n    /**\n     *  Any related error.\n     */\n    error?: Error;\n}\n\n// Generic Errors\n\n/**\n *  This Error is a catch-all for when there is no way for Ethers to\n *  know what the underlying problem is.\n */\nexport interface UnknownError extends EthersError<\"UNKNOWN_ERROR\"> {\n    [ key: string ]: any;\n}\n\n/**\n *  This Error is mostly used as a stub for functionality that is\n *  intended for the future, but is currently not implemented.\n */\nexport interface NotImplementedError extends EthersError<\"NOT_IMPLEMENTED\"> {\n    /**\n     *  The attempted operation.\n     */\n    operation: string;\n}\n\n/**\n *  This Error indicates that the attempted operation is not supported.\n *\n *  This could range from a specific JSON-RPC end-point not supporting\n *  a feature to a specific configuration of an object prohibiting the\n *  operation.\n *\n *  For example, a [[Wallet]] with no connected [[Provider]] is unable\n *  to send a transaction.\n */\nexport interface UnsupportedOperationError extends EthersError<\"UNSUPPORTED_OPERATION\"> {\n    /**\n     *  The attempted operation.\n     */\n    operation: string;\n}\n\n/**\n *  This Error indicates a problem connecting to a network.\n */\nexport interface NetworkError extends EthersError<\"NETWORK_ERROR\"> {\n    /**\n     *  The network event.\n     */\n    event: string;\n}\n\n/**\n *  This Error indicates there was a problem fetching a resource from\n *  a server.\n */\nexport interface ServerError extends EthersError<\"SERVER_ERROR\"> {\n    /**\n     *  The requested resource.\n     */\n    request: FetchRequest | string;\n\n    /**\n     *  The response received from the server, if available.\n     */\n    response?: FetchResponse;\n}\n\n/**\n *  This Error indicates that the timeout duration has expired and\n *  that the operation has been implicitly cancelled.\n *\n *  The side-effect of the operation may still occur, as this\n *  generally means a request has been sent and there has simply\n *  been no response to indicate whether it was processed or not.\n */\nexport interface TimeoutError extends EthersError<\"TIMEOUT\"> {\n    /**\n     *  The attempted operation.\n     */\n    operation: string;\n\n    /**\n     *  The reason.\n     */\n    reason: string;\n\n    /**\n     *  The resource request, if available.\n     */\n    request?: FetchRequest;\n}\n\n/**\n *  This Error indicates that a provided set of data cannot\n *  be correctly interpreted.\n */\nexport interface BadDataError extends EthersError<\"BAD_DATA\"> {\n    /**\n     *  The data.\n     */\n    value: any;\n}\n\n/**\n *  This Error indicates that the operation was cancelled by a\n *  programmatic call, for example to ``cancel()``.\n */\nexport interface CancelledError extends EthersError<\"CANCELLED\"> {\n}\n\n\n// Operational Errors\n\n/**\n *  This Error indicates an attempt was made to read outside the bounds\n *  of protected data.\n *\n *  Most operations in Ethers are protected by bounds checks, to mitigate\n *  exploits when parsing data.\n */\nexport interface BufferOverrunError extends EthersError<\"BUFFER_OVERRUN\"> {\n    /**\n     *  The buffer that was overrun.\n     */\n    buffer: Uint8Array;\n\n    /**\n     *  The length of the buffer.\n     */\n    length: number;\n\n    /**\n     *  The offset that was requested.\n     */\n    offset: number;\n}\n\n/**\n *  This Error indicates an operation which would result in incorrect\n *  arithmetic output has occurred.\n *\n *  For example, trying to divide by zero or using a ``uint8`` to store\n *  a negative value.\n */\nexport interface NumericFaultError extends EthersError<\"NUMERIC_FAULT\"> {\n    /**\n     *  The attempted operation.\n     */\n    operation: string;\n\n    /**\n     *  The fault reported.\n     */\n    fault: string;\n\n    /**\n     *  The value the operation was attempted against.\n     */\n    value: any;\n}\n\n\n// Argument Errors\n\n/**\n *  This Error indicates an incorrect type or value was passed to\n *  a function or method.\n */\nexport interface InvalidArgumentError extends EthersError<\"INVALID_ARGUMENT\"> {\n    /**\n     *  The name of the argument.\n     */\n    argument: string;\n\n    /**\n     *  The value that was provided.\n     */\n    value: any;\n\n    info?: Record<string, any>\n}\n\n/**\n *  This Error indicates there were too few arguments were provided.\n */\nexport interface MissingArgumentError extends EthersError<\"MISSING_ARGUMENT\"> {\n    /**\n     *  The number of arguments received.\n     */\n    count: number;\n\n    /**\n     *  The number of arguments expected.\n     */\n    expectedCount: number;\n}\n\n/**\n *  This Error indicates too many arguments were provided.\n */\nexport interface UnexpectedArgumentError extends EthersError<\"UNEXPECTED_ARGUMENT\"> {\n    /**\n     *  The number of arguments received.\n     */\n    count: number;\n\n    /**\n     *  The number of arguments expected.\n     */\n    expectedCount: number;\n}\n\n\n// Blockchain Errors\n\n/**\n *  The action that resulted in the call exception.\n */\nexport type CallExceptionAction = \"call\" | \"estimateGas\" | \"getTransactionResult\" | \"sendTransaction\" | \"unknown\";\n\n/**\n *  The related transaction that caused the error.\n */\nexport type CallExceptionTransaction = {\n    to: null | string;\n    from?: string;\n    data: string;\n};\n\n/**\n *  This **Error** indicates a transaction reverted.\n */\nexport interface CallExceptionError extends EthersError<\"CALL_EXCEPTION\"> {\n\n    /**\n     *  The action being performed when the revert was encountered.\n     */\n    action: CallExceptionAction;\n\n    /**\n     *  The revert data returned.\n     */\n    data: null | string;\n\n    /**\n     *  A human-readable representation of data, if possible.\n     */\n    reason: null | string;\n\n    /**\n     *  The transaction that triggered the exception.\n     */\n    transaction: CallExceptionTransaction,\n\n    /**\n     *  The contract invocation details, if available.\n     */\n    invocation: null | {\n        method: string;\n        signature: string;\n        args: Array<any>;\n    }\n\n    /**\n     *  The built-in or custom revert error, if available\n     */\n    revert: null | {\n        signature: string;\n        name: string;\n        args: Array<any>;\n    }\n\n    /**\n     *  If the error occurred in a transaction that was mined\n     *  (with a status of ``0``), this is the receipt.\n     */\n    receipt?: TransactionReceipt;   // @TODO: in v7, make this `null | TransactionReceipt`\n}\n\n\n/**\n *  The sending account has insufficient funds to cover the\n *  entire transaction cost.\n */\nexport interface InsufficientFundsError extends EthersError<\"INSUFFICIENT_FUNDS\"> {\n    /**\n     *  The transaction.\n     */\n    transaction: TransactionRequest;\n}\n\n/**\n *  The sending account has already used this nonce in a\n *  transaction that has been included.\n */\nexport interface NonceExpiredError extends EthersError<\"NONCE_EXPIRED\"> {\n    /**\n     *  The transaction.\n     */\n    transaction: TransactionRequest;\n}\n\n/**\n *  A CCIP-read exception, which cannot be recovered from or\n *  be further processed.\n */\nexport interface OffchainFaultError extends EthersError<\"OFFCHAIN_FAULT\"> {\n    /**\n     *  The transaction.\n     */\n    transaction?: TransactionRequest;\n\n    /**\n     *  The reason the CCIP-read failed.\n     */\n    reason: string;\n}\n\n/**\n *  An attempt was made to replace a transaction, but with an\n *  insufficient additional fee to afford evicting the old\n *  transaction from the memory pool.\n */\nexport interface ReplacementUnderpricedError extends EthersError<\"REPLACEMENT_UNDERPRICED\"> {\n    /**\n     *  The transaction.\n     */\n    transaction: TransactionRequest;\n}\n\n/**\n *  A pending transaction was replaced by another.\n */\nexport interface TransactionReplacedError extends EthersError<\"TRANSACTION_REPLACED\"> {\n    /**\n     *  If the transaction was cancelled, such that the original\n     *  effects of the transaction cannot be assured.\n     */\n    cancelled: boolean;\n\n    /**\n     *  The reason the transaction was replaced.\n     */\n    reason: \"repriced\" | \"cancelled\" | \"replaced\";\n\n    /**\n     *  The hash of the replaced transaction.\n     */\n    hash: string;\n\n    /**\n     *  The transaction that replaced the transaction.\n     */\n    replacement: TransactionResponse;\n\n    /**\n     *  The receipt of the transaction that replace the transaction.\n     */\n    receipt: TransactionReceipt;\n}\n\n/**\n *  This Error indicates an ENS name was used, but the name has not\n *  been configured.\n *\n *  This could indicate an ENS name is unowned or that the current\n *  address being pointed to is the [[ZeroAddress]].\n */\nexport interface UnconfiguredNameError extends EthersError<\"UNCONFIGURED_NAME\"> {\n    /**\n     *  The ENS name that was requested\n     */\n    value: string;\n}\n\n/**\n *  This Error indicates a request was rejected by the user.\n *\n *  In most clients (such as MetaMask), when an operation requires user\n *  authorization (such as ``signer.sendTransaction``), the client\n *  presents a dialog box to the user. If the user denies the request\n *  this error is thrown.\n */\nexport interface ActionRejectedError extends EthersError<\"ACTION_REJECTED\"> {\n    /**\n     *  The requested action.\n     */\n    action: \"requestAccess\" | \"sendTransaction\" | \"signMessage\" | \"signTransaction\" | \"signTypedData\" | \"unknown\",\n\n    /**\n     *  The reason the action was rejected.\n     *\n     *  If there is already a pending request, some clients may indicate\n     *  there is already a ``\"pending\"`` action. This prevents an app\n     *  from spamming the user.\n     */\n    reason: \"expired\" | \"rejected\" | \"pending\"\n}\n\n// Coding; converts an ErrorCode its Typed Error\n\n/**\n *  A conditional type that transforms the [[ErrorCode]] T into\n *  its EthersError type.\n *\n *  @flatworm-skip-docs\n */\nexport type CodedEthersError<T> =\n    T extends \"UNKNOWN_ERROR\" ? UnknownError:\n    T extends \"NOT_IMPLEMENTED\" ? NotImplementedError:\n    T extends \"UNSUPPORTED_OPERATION\" ? UnsupportedOperationError:\n    T extends \"NETWORK_ERROR\" ? NetworkError:\n    T extends \"SERVER_ERROR\" ? ServerError:\n    T extends \"TIMEOUT\" ? TimeoutError:\n    T extends \"BAD_DATA\" ? BadDataError:\n    T extends \"CANCELLED\" ? CancelledError:\n\n    T extends \"BUFFER_OVERRUN\" ? BufferOverrunError:\n    T extends \"NUMERIC_FAULT\" ? NumericFaultError:\n\n    T extends \"INVALID_ARGUMENT\" ? InvalidArgumentError:\n    T extends \"MISSING_ARGUMENT\" ? MissingArgumentError:\n    T extends \"UNEXPECTED_ARGUMENT\" ? UnexpectedArgumentError:\n\n    T extends \"CALL_EXCEPTION\" ? CallExceptionError:\n    T extends \"INSUFFICIENT_FUNDS\" ? InsufficientFundsError:\n    T extends \"NONCE_EXPIRED\" ? NonceExpiredError:\n    T extends \"OFFCHAIN_FAULT\" ? OffchainFaultError:\n    T extends \"REPLACEMENT_UNDERPRICED\" ? ReplacementUnderpricedError:\n    T extends \"TRANSACTION_REPLACED\" ? TransactionReplacedError:\n    T extends \"UNCONFIGURED_NAME\" ? UnconfiguredNameError:\n\n    T extends \"ACTION_REJECTED\" ? ActionRejectedError:\n\n    never;\n\n\n\n/**\n *  Returns true if the %%error%% matches an error thrown by ethers\n *  that matches the error %%code%%.\n *\n *  In TypeScript environments, this can be used to check that %%error%%\n *  matches an EthersError type, which means the expected properties will\n *  be set.\n *\n *  @See [ErrorCodes](api:ErrorCode)\n *  @example\n *    try {\n *      // code....\n *    } catch (e) {\n *      if (isError(e, \"CALL_EXCEPTION\")) {\n *          // The Type Guard has validated this object\n *          console.log(e.data);\n *      }\n *    }\n */\nexport function isError<K extends ErrorCode, T extends CodedEthersError<K>>(error: any, code: K): error is T {\n    return (error && (<EthersError>error).code === code);\n}\n\n/**\n *  Returns true if %%error%% is a [[CallExceptionError].\n */\nexport function isCallException(error: any): error is CallExceptionError {\n    return isError(error, \"CALL_EXCEPTION\");\n}\n\n/**\n *  Returns a new Error configured to the format ethers emits errors, with\n *  the %%message%%, [[api:ErrorCode]] %%code%% and additional properties\n *  for the corresponding EthersError.\n *\n *  Each error in ethers includes the version of ethers, a\n *  machine-readable [[ErrorCode]], and depending on %%code%%, additional\n *  required properties. The error message will also include the %%message%%,\n *  ethers version, %%code%% and all additional properties, serialized.\n */\nexport function makeError<K extends ErrorCode, T extends CodedEthersError<K>>(message: string, code: K, info?: ErrorInfo<T>): T {\n    let shortMessage = message;\n\n    {\n        const details: Array<string> = [];\n        if (info) {\n            if (\"message\" in info || \"code\" in info || \"name\" in info) {\n                throw new Error(`value will overwrite populated values: ${ stringify(info) }`);\n            }\n            for (const key in info) {\n                if (key === \"shortMessage\") { continue; }\n                const value = <any>(info[<keyof ErrorInfo<T>>key]);\n//                try {\n                    details.push(key + \"=\" + stringify(value));\n//                } catch (error: any) {\n//                console.log(\"MMM\", error.message);\n//                    details.push(key + \"=[could not serialize object]\");\n//                }\n            }\n        }\n        details.push(`code=${ code }`);\n        details.push(`version=${ version }`);\n\n        if (details.length) {\n            message += \" (\" + details.join(\", \") + \")\";\n        }\n    }\n\n    let error;\n    switch (code) {\n        case \"INVALID_ARGUMENT\":\n            error = new TypeError(message);\n            break;\n        case \"NUMERIC_FAULT\":\n        case \"BUFFER_OVERRUN\":\n            error = new RangeError(message);\n            break;\n        default:\n            error = new Error(message);\n    }\n\n    defineProperties<EthersError>(<EthersError>error, { code });\n\n    if (info) { Object.assign(error, info); }\n\n    if ((<any>error).shortMessage == null) {\n        defineProperties<EthersError>(<EthersError>error, { shortMessage });\n    }\n\n    return <T>error;\n}\n\n/**\n *  Throws an EthersError with %%message%%, %%code%% and additional error\n *  %%info%% when %%check%% is falsish..\n *\n *  @see [[api:makeError]]\n */\nexport function assert<K extends ErrorCode, T extends CodedEthersError<K>>(check: unknown, message: string, code: K, info?: ErrorInfo<T>): asserts check {\n    if (!check) { throw makeError(message, code, info); }\n}\n\n\n/**\n *  A simple helper to simply ensuring provided arguments match expected\n *  constraints, throwing if not.\n *\n *  In TypeScript environments, the %%check%% has been asserted true, so\n *  any further code does not need additional compile-time checks.\n */\nexport function assertArgument(check: unknown, message: string, name: string, value: unknown): asserts check {\n    assert(check, message, \"INVALID_ARGUMENT\", { argument: name, value: value });\n}\n\nexport function assertArgumentCount(count: number, expectedCount: number, message?: string): void {\n    if (message == null) { message = \"\"; }\n    if (message) { message = \": \" + message; }\n\n    assert(count >= expectedCount, \"missing argument\" + message, \"MISSING_ARGUMENT\", {\n        count: count,\n        expectedCount: expectedCount\n    });\n\n    assert(count <= expectedCount, \"too many arguments\" + message, \"UNEXPECTED_ARGUMENT\", {\n        count: count,\n        expectedCount: expectedCount\n    });\n}\n\nconst _normalizeForms = [\"NFD\", \"NFC\", \"NFKD\", \"NFKC\"].reduce((accum, form) => {\n    try {\n        // General test for normalize\n        /* c8 ignore start */\n        if (\"test\".normalize(form) !== \"test\") { throw new Error(\"bad\"); };\n        /* c8 ignore stop */\n\n        if (form === \"NFD\") {\n            const check = String.fromCharCode(0xe9).normalize(\"NFD\");\n            const expected = String.fromCharCode(0x65, 0x0301)\n            /* c8 ignore start */\n            if (check !== expected) { throw new Error(\"broken\") }\n            /* c8 ignore stop */\n        }\n\n        accum.push(form);\n    } catch(error) { }\n\n    return accum;\n}, <Array<string>>[]);\n\n/**\n *  Throws if the normalization %%form%% is not supported.\n */\nexport function assertNormalize(form: string): void {\n    assert(_normalizeForms.indexOf(form) >= 0, \"platform missing String.prototype.normalize\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"String.prototype.normalize\", info: { form }\n    });\n}\n\n/**\n *  Many classes use file-scoped values to guard the constructor,\n *  making it effectively private. This facilitates that pattern\n *  by ensuring the %%givenGaurd%% matches the file-scoped %%guard%%,\n *  throwing if not, indicating the %%className%% if provided.\n */\nexport function assertPrivate(givenGuard: any, guard: any, className?: string): void {\n    if (className == null) { className = \"\"; }\n    if (givenGuard !== guard) {\n        let method = className, operation = \"new\";\n        if (className) {\n            method += \".\";\n            operation += \" \" + className;\n        }\n        assert(false, `private constructor; use ${ method }from* methods`, \"UNSUPPORTED_OPERATION\", {\n            operation\n        });\n    }\n}\n","/* Do NOT modify this file; see /src.ts/_admin/update-version.ts */\n\n/**\n *  The current version of Ethers.\n */\nexport const version: string = \"6.15.0\";\n","import checkPrivateRedeclaration from \"./checkPrivateRedeclaration.js\";\nfunction _classPrivateMethodInitSpec(e, a) {\n  checkPrivateRedeclaration(e, a), a.add(e);\n}\nexport { _classPrivateMethodInitSpec as default };","/**\n *  Some data helpers.\n *\n *\n *  @_subsection api/utils:Data Helpers  [about-data]\n */\nimport { assert, assertArgument } from \"./errors.js\";\n\n/**\n *  A [[HexString]] whose length is even, which ensures it is a valid\n *  representation of binary data.\n */\nexport type DataHexString = string;\n\n/**\n *  A string which is prefixed with ``0x`` and followed by any number\n *  of case-agnostic hexadecimal characters.\n *\n *  It must match the regular expression ``/0x[0-9A-Fa-f]*\\/``.\n */\nexport type HexString = string;\n\n/**\n *  An object that can be used to represent binary data.\n */\nexport type BytesLike = DataHexString | Uint8Array;\n\nfunction _getBytes(value: BytesLike, name?: string, copy?: boolean): Uint8Array {\n    if (value instanceof Uint8Array) {\n        if (copy) { return new Uint8Array(value); }\n        return value;\n    }\n\n    if (typeof(value) === \"string\" && value.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)) {\n        const result = new Uint8Array((value.length - 2) / 2);\n        let offset = 2;\n        for (let i = 0; i < result.length; i++) {\n            result[i] = parseInt(value.substring(offset, offset + 2), 16);\n            offset += 2;\n        }\n        return result;\n    }\n\n    assertArgument(false, \"invalid BytesLike value\", name || \"value\", value);\n}\n\n/**\n *  Get a typed Uint8Array for %%value%%. If already a Uint8Array\n *  the original %%value%% is returned; if a copy is required use\n *  [[getBytesCopy]].\n *\n *  @see: getBytesCopy\n */\nexport function getBytes(value: BytesLike, name?: string): Uint8Array {\n    return _getBytes(value, name, false);\n}\n\n/**\n *  Get a typed Uint8Array for %%value%%, creating a copy if necessary\n *  to prevent any modifications of the returned value from being\n *  reflected elsewhere.\n *\n *  @see: getBytes\n */\nexport function getBytesCopy(value: BytesLike, name?: string): Uint8Array {\n    return _getBytes(value, name, true);\n}\n\n\n/**\n *  Returns true if %%value%% is a valid [[HexString]].\n *\n *  If %%length%% is ``true`` or a //number//, it also checks that\n *  %%value%% is a valid [[DataHexString]] of %%length%% (if a //number//)\n *  bytes of data (e.g. ``0x1234`` is 2 bytes).\n */\nexport function isHexString(value: any, length?: number | boolean): value is `0x${ string }` {\n    if (typeof(value) !== \"string\" || !value.match(/^0x[0-9A-Fa-f]*$/)) {\n        return false\n    }\n\n    if (typeof(length) === \"number\" && value.length !== 2 + 2 * length) { return false; }\n    if (length === true && (value.length % 2) !== 0) { return false; }\n\n    return true;\n}\n\n/**\n *  Returns true if %%value%% is a valid representation of arbitrary\n *  data (i.e. a valid [[DataHexString]] or a Uint8Array).\n */\nexport function isBytesLike(value: any): value is BytesLike {\n    return (isHexString(value, true) || (value instanceof Uint8Array));\n}\n\nconst HexCharacters: string = \"0123456789abcdef\";\n\n/**\n *  Returns a [[DataHexString]] representation of %%data%%.\n */\nexport function hexlify(data: BytesLike): string {\n    const bytes = getBytes(data);\n\n    let result = \"0x\";\n    for (let i = 0; i < bytes.length; i++) {\n        const v = bytes[i];\n        result += HexCharacters[(v & 0xf0) >> 4] + HexCharacters[v & 0x0f];\n    }\n    return result;\n}\n\n/**\n *  Returns a [[DataHexString]] by concatenating all values\n *  within %%data%%.\n */\nexport function concat(datas: ReadonlyArray<BytesLike>): string {\n    return \"0x\" + datas.map((d) => hexlify(d).substring(2)).join(\"\");\n}\n\n/**\n *  Returns the length of %%data%%, in bytes.\n */\nexport function dataLength(data: BytesLike): number {\n    if (isHexString(data, true)) { return (data.length - 2) / 2; }\n    return getBytes(data).length;\n}\n\n/**\n *  Returns a [[DataHexString]] by slicing %%data%% from the %%start%%\n *  offset to the %%end%% offset.\n *\n *  By default %%start%% is 0 and %%end%% is the length of %%data%%.\n */\nexport function dataSlice(data: BytesLike, start?: number, end?: number): string {\n    const bytes = getBytes(data);\n    if (end != null && end > bytes.length) {\n        assert(false, \"cannot slice beyond data bounds\", \"BUFFER_OVERRUN\", {\n            buffer: bytes, length: bytes.length, offset: end\n        });\n    }\n    return hexlify(bytes.slice((start == null) ? 0: start, (end == null) ? bytes.length: end));\n}\n\n/**\n *  Return the [[DataHexString]] result by stripping all **leading**\n ** zero bytes from %%data%%.\n */\nexport function stripZerosLeft(data: BytesLike): string {\n    let bytes = hexlify(data).substring(2);\n    while (bytes.startsWith(\"00\")) { bytes = bytes.substring(2); }\n    return \"0x\" + bytes;\n}\n\nfunction zeroPad(data: BytesLike, length: number, left: boolean): string {\n    const bytes = getBytes(data);\n    assert(length >= bytes.length, \"padding exceeds data length\", \"BUFFER_OVERRUN\", {\n        buffer: new Uint8Array(bytes),\n        length: length,\n        offset: length + 1\n    });\n\n    const result = new Uint8Array(length);\n    result.fill(0);\n    if (left) {\n        result.set(bytes, length - bytes.length);\n    } else {\n        result.set(bytes, 0);\n    }\n\n    return hexlify(result);\n}\n\n/**\n *  Return the [[DataHexString]] of %%data%% padded on the **left**\n *  to %%length%% bytes.\n *\n *  If %%data%% already exceeds %%length%%, a [[BufferOverrunError]] is\n *  thrown.\n *\n *  This pads data the same as **values** are in Solidity\n *  (e.g. ``uint128``).\n */\nexport function zeroPadValue(data: BytesLike, length: number): string {\n    return zeroPad(data, length, true);\n}\n\n/**\n *  Return the [[DataHexString]] of %%data%% padded on the **right**\n *  to %%length%% bytes.\n *\n *  If %%data%% already exceeds %%length%%, a [[BufferOverrunError]] is\n *  thrown.\n *\n *  This pads data the same as **bytes** are in Solidity\n *  (e.g. ``bytes16``).\n */\nexport function zeroPadBytes(data: BytesLike, length: number): string {\n    return zeroPad(data, length, false);\n}\n","/**\n *  Some mathematic operations.\n *\n *  @_subsection: api/utils:Math Helpers  [about-maths]\n */\nimport { hexlify, isBytesLike } from \"./data.js\";\nimport { assert, assertArgument } from \"./errors.js\";\n\nimport type { BytesLike } from \"./data.js\";\n\n/**\n *  Any type that can be used where a numeric value is needed.\n */\nexport type Numeric = number | bigint;\n\n/**\n *  Any type that can be used where a big number is needed.\n */\nexport type BigNumberish = string | Numeric;\n\n\nconst BN_0 = BigInt(0);\nconst BN_1 = BigInt(1);\n\n//const BN_Max256 = (BN_1 << BigInt(256)) - BN_1;\n\n\n// IEEE 754 support 53-bits of mantissa\nconst maxValue = 0x1fffffffffffff;\n\n/**\n *  Convert %%value%% from a twos-compliment representation of %%width%%\n *  bits to its value.\n *\n *  If the highest bit is ``1``, the result will be negative.\n */\nexport function fromTwos(_value: BigNumberish, _width: Numeric): bigint {\n    const value = getUint(_value, \"value\");\n    const width = BigInt(getNumber(_width, \"width\"));\n\n    assert((value >> width) === BN_0, \"overflow\", \"NUMERIC_FAULT\", {\n        operation: \"fromTwos\", fault: \"overflow\", value: _value\n    });\n\n    // Top bit set; treat as a negative value\n    if (value >> (width - BN_1)) {\n        const mask = (BN_1 << width) - BN_1;\n        return -(((~value) & mask) + BN_1);\n    }\n\n    return value;\n}\n\n/**\n *  Convert %%value%% to a twos-compliment representation of\n *  %%width%% bits.\n *\n *  The result will always be positive.\n */\nexport function toTwos(_value: BigNumberish, _width: Numeric): bigint {\n    let value = getBigInt(_value, \"value\");\n    const width = BigInt(getNumber(_width, \"width\"));\n\n    const limit = (BN_1 << (width - BN_1));\n\n    if (value < BN_0) {\n        value = -value;\n        assert(value <= limit, \"too low\", \"NUMERIC_FAULT\", {\n            operation: \"toTwos\", fault: \"overflow\", value: _value\n        });\n        const mask = (BN_1 << width) - BN_1;\n        return ((~value) & mask) + BN_1;\n    } else {\n        assert(value < limit, \"too high\", \"NUMERIC_FAULT\", {\n            operation: \"toTwos\", fault: \"overflow\", value: _value\n        });\n    }\n\n    return value;\n}\n\n/**\n *  Mask %%value%% with a bitmask of %%bits%% ones.\n */\nexport function mask(_value: BigNumberish, _bits: Numeric): bigint {\n    const value = getUint(_value, \"value\");\n    const bits = BigInt(getNumber(_bits, \"bits\"));\n    return value & ((BN_1 << bits) - BN_1);\n}\n\n/**\n *  Gets a BigInt from %%value%%. If it is an invalid value for\n *  a BigInt, then an ArgumentError will be thrown for %%name%%.\n */\nexport function getBigInt(value: BigNumberish, name?: string): bigint {\n    switch (typeof(value)) {\n        case \"bigint\": return value;\n        case \"number\":\n            assertArgument(Number.isInteger(value), \"underflow\", name || \"value\", value);\n            assertArgument(value >= -maxValue && value <= maxValue, \"overflow\", name || \"value\", value);\n            return BigInt(value);\n        case \"string\":\n            try {\n                if (value === \"\") { throw new Error(\"empty string\"); }\n                if (value[0] === \"-\" && value[1] !== \"-\") {\n                    return -BigInt(value.substring(1));\n                }\n                return BigInt(value);\n            } catch(e: any) {\n                assertArgument(false, `invalid BigNumberish string: ${ e.message }`, name || \"value\", value);\n            }\n    }\n    assertArgument(false, \"invalid BigNumberish value\", name || \"value\", value);\n}\n\n/**\n *  Returns %%value%% as a bigint, validating it is valid as a bigint\n *  value and that it is positive.\n */\nexport function getUint(value: BigNumberish, name?: string): bigint {\n    const result = getBigInt(value, name);\n    assert(result >= BN_0, \"unsigned value cannot be negative\", \"NUMERIC_FAULT\", {\n        fault: \"overflow\", operation: \"getUint\", value\n    });\n    return result;\n}\n\nconst Nibbles = \"0123456789abcdef\";\n\n/*\n * Converts %%value%% to a BigInt. If %%value%% is a Uint8Array, it\n * is treated as Big Endian data.\n */\nexport function toBigInt(value: BigNumberish | Uint8Array): bigint {\n    if (value instanceof Uint8Array) {\n        let result = \"0x0\";\n        for (const v of value) {\n            result += Nibbles[v >> 4];\n            result += Nibbles[v & 0x0f];\n        }\n        return BigInt(result);\n    }\n\n    return getBigInt(value);\n}\n\n/**\n *  Gets a //number// from %%value%%. If it is an invalid value for\n *  a //number//, then an ArgumentError will be thrown for %%name%%.\n */\nexport function getNumber(value: BigNumberish, name?: string): number {\n    switch (typeof(value)) {\n        case \"bigint\":\n            assertArgument(value >= -maxValue && value <= maxValue, \"overflow\", name || \"value\", value);\n            return Number(value);\n        case \"number\":\n            assertArgument(Number.isInteger(value), \"underflow\", name || \"value\", value);\n            assertArgument(value >= -maxValue && value <= maxValue, \"overflow\", name || \"value\", value);\n            return value;\n        case \"string\":\n            try {\n                if (value === \"\") { throw new Error(\"empty string\"); }\n                return getNumber(BigInt(value), name);\n            } catch(e: any) {\n                assertArgument(false, `invalid numeric string: ${ e.message }`, name || \"value\", value);\n            }\n    }\n    assertArgument(false, \"invalid numeric value\", name || \"value\", value);\n}\n\n\n/**\n *  Converts %%value%% to a number. If %%value%% is a Uint8Array, it\n *  is treated as Big Endian data. Throws if the value is not safe.\n */\nexport function toNumber(value: BigNumberish | Uint8Array): number {\n    return getNumber(toBigInt(value));\n}\n\n/**\n *  Converts %%value%% to a Big Endian hexstring, optionally padded to\n *  %%width%% bytes.\n */\nexport function toBeHex(_value: BigNumberish, _width?: Numeric): string {\n    const value = getUint(_value, \"value\");\n\n    let result = value.toString(16);\n\n    if (_width == null) {\n        // Ensure the value is of even length\n        if (result.length % 2) { result = \"0\" + result; }\n    } else {\n        const width = getNumber(_width, \"width\");\n        assert(width * 2 >= result.length, `value exceeds width (${ width } bytes)`, \"NUMERIC_FAULT\", {\n            operation: \"toBeHex\",\n            fault: \"overflow\",\n            value: _value\n        });\n\n        // Pad the value to the required width\n        while (result.length < (width * 2)) { result = \"0\" + result; }\n\n    }\n\n    return \"0x\" + result;\n}\n\n/**\n *  Converts %%value%% to a Big Endian Uint8Array.\n */\nexport function toBeArray(_value: BigNumberish): Uint8Array {\n    const value = getUint(_value, \"value\");\n\n    if (value === BN_0) { return new Uint8Array([ ]); }\n\n    let hex = value.toString(16);\n    if (hex.length % 2) { hex = \"0\" + hex; }\n\n    const result = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < result.length; i++) {\n        const offset = i * 2;\n        result[i] = parseInt(hex.substring(offset, offset + 2), 16);\n    }\n\n    return result;\n}\n\n/**\n *  Returns a [[HexString]] for %%value%% safe to use as a //Quantity//.\n *\n *  A //Quantity// does not have and leading 0 values unless the value is\n *  the literal value `0x0`. This is most commonly used for JSSON-RPC\n *  numeric values.\n */\nexport function toQuantity(value: BytesLike | BigNumberish): string {\n    let result = hexlify(isBytesLike(value) ? value: toBeArray(value)).substring(2);\n    while (result.startsWith(\"0\")) { result = result.substring(1); }\n    if (result === \"\") { result = \"0\"; }\n    return \"0x\" + result;\n}\n","\nimport {\n    defineProperties, concat, getBytesCopy, getNumber, hexlify,\n    toBeArray, toBigInt, toNumber,\n    assert, assertArgument\n    /*, isError*/\n} from \"../../utils/index.js\";\n\nimport type { BigNumberish, BytesLike } from \"../../utils/index.js\";\n\n/**\n * @_ignore:\n */\nexport const WordSize: number = 32;\nconst Padding = new Uint8Array(WordSize);\n\n// Properties used to immediate pass through to the underlying object\n// - `then` is used to detect if an object is a Promise for await\nconst passProperties = [ \"then\" ];\n\nconst _guard = { };\n\nconst resultNames: WeakMap<Result, ReadonlyArray<null | string>> = new WeakMap();\n\nfunction getNames(result: Result): ReadonlyArray<null | string> {\n    return resultNames.get(result)!;\n}\nfunction setNames(result: Result, names: ReadonlyArray<null | string>): void {\n    resultNames.set(result, names);\n}\n\nfunction throwError(name: string, error: Error): never {\n    const wrapped = new Error(`deferred error during ABI decoding triggered accessing ${ name }`);\n    (<any>wrapped).error = error;\n    throw wrapped;\n}\n\nfunction toObject(names: ReadonlyArray<null | string>, items: Result, deep?: boolean): Record<string, any> | Array<any> {\n    if (names.indexOf(null) >= 0) {\n        return items.map((item, index) => {\n            if (item instanceof Result) {\n                return toObject(getNames(item), item, deep);\n            }\n            return item;\n        });\n    }\n\n    return (<Array<string>>names).reduce((accum, name, index) => {\n        let item = items.getValue(name);\n        if (!(name in accum)) {\n            if (deep && item instanceof Result) {\n                item = toObject(getNames(item), item, deep);\n            }\n            accum[name] = item;\n        }\n        return accum;\n    }, <Record<string, any>>{ });\n}\n\n\n/**\n *  A [[Result]] is a sub-class of Array, which allows accessing any\n *  of its values either positionally by its index or, if keys are\n *  provided by its name.\n *\n *  @_docloc: api/abi\n */\nexport class Result extends Array<any> {\n    // No longer used; but cannot be removed as it will remove the\n    // #private field from the .d.ts which may break backwards\n    // compatibility\n    readonly #names: ReadonlyArray<null | string>;\n\n    [ K: string | number ]: any\n\n    /**\n     *  @private\n     */\n    constructor(...args: Array<any>) {\n        // To properly sub-class Array so the other built-in\n        // functions work, the constructor has to behave fairly\n        // well. So, in the event we are created via fromItems()\n        // we build the read-only Result object we want, but on\n        // any other input, we use the default constructor\n\n        // constructor(guard: any, items: Array<any>, keys?: Array<null | string>);\n        const guard = args[0];\n        let items: Array<any> = args[1];\n        let names: Array<null | string> = (args[2] || [ ]).slice();\n\n        let wrap = true;\n        if (guard !== _guard) {\n            items = args;\n            names = [ ];\n            wrap = false;\n        }\n\n        // Can't just pass in ...items since an array of length 1\n        // is a special case in the super.\n        super(items.length);\n        items.forEach((item, index) => { this[index] = item; });\n\n        // Find all unique keys\n        const nameCounts = names.reduce((accum, name) => {\n            if (typeof(name) === \"string\") {\n                accum.set(name, (accum.get(name) || 0) + 1);\n            }\n            return accum;\n        }, <Map<string, number>>(new Map()));\n\n        // Remove any key thats not unique\n        setNames(this, Object.freeze(items.map((item, index) => {\n            const name = names[index];\n            if (name != null && nameCounts.get(name) === 1) {\n                return name;\n            }\n            return null;\n        })));\n\n        // Dummy operations to prevent TypeScript from complaining\n        this.#names = [ ];\n        if (this.#names == null) { void(this.#names); }\n\n        if (!wrap) { return; }\n\n        // A wrapped Result is immutable\n        Object.freeze(this);\n\n        // Proxy indices and names so we can trap deferred errors\n        const proxy = new Proxy(this, {\n            get: (target, prop, receiver) => {\n                if (typeof(prop) === \"string\") {\n\n                    // Index accessor\n                    if (prop.match(/^[0-9]+$/)) {\n                        const index = getNumber(prop, \"%index\");\n                        if (index < 0 || index >= this.length) {\n                            throw new RangeError(\"out of result range\");\n                        }\n\n                        const item = target[index];\n                        if (item instanceof Error) {\n                            throwError(`index ${ index }`, item);\n                        }\n                        return item;\n                    }\n\n                    // Pass important checks (like `then` for Promise) through\n                    if (passProperties.indexOf(prop) >= 0) {\n                        return Reflect.get(target, prop, receiver);\n                    }\n\n                    const value = target[prop];\n                    if (value instanceof Function) {\n                        // Make sure functions work with private variables\n                        // See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy#no_private_property_forwarding\n                        return function(this: any, ...args: Array<any>) {\n                            return value.apply((this === receiver) ? target: this, args);\n                        };\n\n                    } else if (!(prop in target)) {\n                        // Possible name accessor\n                        return target.getValue.apply((this === receiver) ? target: this, [ prop ]);\n                    }\n                }\n\n                return Reflect.get(target, prop, receiver);\n            }\n        });\n        setNames(proxy, getNames(this));\n        return proxy;\n    }\n\n    /**\n     *  Returns the Result as a normal Array. If %%deep%%, any children\n     *  which are Result objects are also converted to a normal Array.\n     *\n     *  This will throw if there are any outstanding deferred\n     *  errors.\n     */\n    toArray(deep?: boolean): Array<any> {\n        const result: Array<any> = [ ];\n        this.forEach((item, index) => {\n            if (item instanceof Error) { throwError(`index ${ index }`, item); }\n            if (deep && item instanceof Result) {\n                item = item.toArray(deep);\n            }\n            result.push(item);\n        });\n        return result;\n    }\n\n    /**\n     *  Returns the Result as an Object with each name-value pair. If\n     *  %%deep%%, any children which are Result objects are also\n     *  converted to an Object.\n     *\n     *  This will throw if any value is unnamed, or if there are\n     *  any outstanding deferred errors.\n     */\n    toObject(deep?: boolean): Record<string, any> {\n        const names = getNames(this);\n        return names.reduce((accum, name, index) => {\n\n            assert(name != null, `value at index ${ index } unnamed`, \"UNSUPPORTED_OPERATION\", {\n                operation: \"toObject()\"\n            });\n\n            return toObject(names, this, deep);\n        }, <Record<string, any>>{});\n    }\n\n    /**\n     *  @_ignore\n     */\n    slice(start?: number | undefined, end?: number | undefined): Result {\n        if (start == null) { start = 0; }\n        if (start < 0) {\n            start += this.length;\n            if (start < 0) { start = 0; }\n        }\n\n        if (end == null) { end = this.length; }\n        if (end < 0) {\n            end += this.length;\n            if (end < 0) { end = 0; }\n        }\n        if (end > this.length) { end = this.length; }\n\n        const _names = getNames(this);\n\n        const result: Array<any> = [ ], names: Array<null | string> = [ ];\n        for (let i = start; i < end; i++) {\n            result.push(this[i]);\n            names.push(_names[i]);\n        }\n\n        return new Result(_guard, result, names);\n    }\n\n    /**\n     *  @_ignore\n     */\n    filter(callback: (el: any, index: number, array: Result) => boolean, thisArg?: any): Result {\n        const _names = getNames(this);\n\n        const result: Array<any> = [ ], names: Array<null | string> = [ ];\n        for (let i = 0; i < this.length; i++) {\n            const item = this[i];\n            if (item instanceof Error) {\n                throwError(`index ${ i }`, item);\n            }\n\n            if (callback.call(thisArg, item, i, this)) {\n                result.push(item);\n                names.push(_names[i]);\n            }\n        }\n\n        return new Result(_guard, result, names);\n    }\n\n    /**\n     *  @_ignore\n     */\n    map<T extends any = any>(callback: (el: any, index: number, array: Result) => T, thisArg?: any): Array<T> {\n        const result: Array<T> = [ ];\n        for (let i = 0; i < this.length; i++) {\n            const item = this[i];\n            if (item instanceof Error) {\n                throwError(`index ${ i }`, item);\n            }\n\n            result.push(callback.call(thisArg, item, i, this));\n        }\n\n        return result;\n    }\n\n\n    /**\n     *  Returns the value for %%name%%.\n     *\n     *  Since it is possible to have a key whose name conflicts with\n     *  a method on a [[Result]] or its superclass Array, or any\n     *  JavaScript keyword, this ensures all named values are still\n     *  accessible by name.\n     */\n    getValue(name: string): any {\n        const index = getNames(this).indexOf(name);\n        if (index === -1) { return undefined; }\n\n        const value = this[index];\n\n        if (value instanceof Error) {\n            throwError(`property ${ JSON.stringify(name) }`, (<any>value).error);\n        }\n\n        return value;\n    }\n\n    /**\n     *  Creates a new [[Result]] for %%items%% with each entry\n     *  also accessible by its corresponding name in %%keys%%.\n     */\n    static fromItems(items: Array<any>, keys?: Array<null | string>): Result {\n        return new Result(_guard, items, keys);\n    }\n}\n\n/**\n *  Returns all errors found in a [[Result]].\n *\n *  Since certain errors encountered when creating a [[Result]] do\n *  not impact the ability to continue parsing data, they are\n *  deferred until they are actually accessed. Hence a faulty string\n *  in an Event that is never used does not impact the program flow.\n *\n *  However, sometimes it may be useful to access, identify or\n *  validate correctness of a [[Result]].\n *\n *  @_docloc api/abi\n */\nexport function checkResultErrors(result: Result): Array<{ path: Array<string | number>, error: Error }> {\n    // Find the first error (if any)\n    const errors: Array<{ path: Array<string | number>, error: Error }> = [ ];\n\n    const checkErrors = function(path: Array<string | number>, object: any): void {\n        if (!Array.isArray(object)) { return; }\n        for (let key in object) {\n            const childPath = path.slice();\n            childPath.push(key);\n\n            try {\n                 checkErrors(childPath, object[key]);\n            } catch (error: any) {\n                errors.push({ path: childPath, error: error });\n            }\n        }\n    }\n    checkErrors([ ], result);\n\n    return errors;\n\n}\n\nfunction getValue(value: BigNumberish): Uint8Array {\n    let bytes = toBeArray(value);\n\n    assert (bytes.length <= WordSize, \"value out-of-bounds\",\n        \"BUFFER_OVERRUN\", { buffer: bytes, length: WordSize, offset: bytes.length });\n\n    if (bytes.length !== WordSize) {\n        bytes = getBytesCopy(concat([ Padding.slice(bytes.length % WordSize), bytes ]));\n    }\n\n    return bytes;\n}\n\n/**\n *  @_ignore\n */\nexport abstract class Coder {\n\n    // The coder name:\n    //   - address, uint256, tuple, array, etc.\n    readonly name!: string;\n\n    // The fully expanded type, including composite types:\n    //   - address, uint256, tuple(address,bytes), uint256[3][4][],  etc.\n    readonly type!: string;\n\n    // The localName bound in the signature, in this example it is \"baz\":\n    //   - tuple(address foo, uint bar) baz\n    readonly localName!: string;\n\n    // Whether this type is dynamic:\n    //  - Dynamic: bytes, string, address[], tuple(boolean[]), etc.\n    //  - Not Dynamic: address, uint256, boolean[3], tuple(address, uint8)\n    readonly dynamic!: boolean;\n\n    constructor(name: string, type: string, localName: string, dynamic: boolean) {\n        defineProperties<Coder>(this, { name, type, localName, dynamic }, {\n            name: \"string\", type: \"string\", localName: \"string\", dynamic: \"boolean\"\n        });\n    }\n\n    _throwError(message: string, value: any): never {\n        assertArgument(false, message, this.localName, value);\n    }\n\n    abstract encode(writer: Writer, value: any): number;\n    abstract decode(reader: Reader): any;\n\n    abstract defaultValue(): any;\n}\n\n/**\n *  @_ignore\n */\nexport class Writer {\n    // An array of WordSize lengthed objects to concatenation\n    #data: Array<Uint8Array>;\n    #dataLength: number;\n\n    constructor() {\n        this.#data = [ ];\n        this.#dataLength = 0;\n    }\n\n    get data(): string {\n        return concat(this.#data);\n    }\n    get length(): number { return this.#dataLength; }\n\n    #writeData(data: Uint8Array): number {\n        this.#data.push(data);\n        this.#dataLength += data.length;\n        return data.length;\n    }\n\n    appendWriter(writer: Writer): number {\n        return this.#writeData(getBytesCopy(writer.data));\n    }\n\n    // Arrayish item; pad on the right to *nearest* WordSize\n    writeBytes(value: BytesLike): number {\n        let bytes = getBytesCopy(value);\n        const paddingOffset = bytes.length % WordSize;\n        if (paddingOffset) {\n            bytes = getBytesCopy(concat([ bytes, Padding.slice(paddingOffset) ]))\n        }\n        return this.#writeData(bytes);\n    }\n\n    // Numeric item; pad on the left *to* WordSize\n    writeValue(value: BigNumberish): number {\n        return this.#writeData(getValue(value));\n    }\n\n    // Inserts a numeric place-holder, returning a callback that can\n    // be used to asjust the value later\n    writeUpdatableValue(): (value: BigNumberish) => void {\n        const offset = this.#data.length;\n        this.#data.push(Padding);\n        this.#dataLength += WordSize;\n        return (value: BigNumberish) => {\n            this.#data[offset] = getValue(value);\n        };\n    }\n}\n\n/**\n *  @_ignore\n */\nexport class Reader {\n    // Allows incomplete unpadded data to be read; otherwise an error\n    // is raised if attempting to overrun the buffer. This is required\n    // to deal with an old Solidity bug, in which event data for\n    // external (not public thoguh) was tightly packed.\n    readonly allowLoose!: boolean;\n\n    readonly #data: Uint8Array;\n    #offset: number;\n\n    #bytesRead: number;\n    #parent: null | Reader;\n    #maxInflation: number;\n\n    constructor(data: BytesLike, allowLoose?: boolean, maxInflation?: number) {\n        defineProperties<Reader>(this, { allowLoose: !!allowLoose });\n\n        this.#data = getBytesCopy(data);\n        this.#bytesRead = 0;\n        this.#parent = null;\n        this.#maxInflation = (maxInflation != null) ? maxInflation: 1024;\n\n        this.#offset = 0;\n    }\n\n    get data(): string { return hexlify(this.#data); }\n    get dataLength(): number { return this.#data.length; }\n    get consumed(): number { return this.#offset; }\n    get bytes(): Uint8Array { return new Uint8Array(this.#data); }\n\n    #incrementBytesRead(count: number): void {\n        if (this.#parent) { return this.#parent.#incrementBytesRead(count); }\n\n        this.#bytesRead += count;\n\n        // Check for excessive inflation (see: #4537)\n        assert(this.#maxInflation < 1 || this.#bytesRead <= this.#maxInflation * this.dataLength, `compressed ABI data exceeds inflation ratio of ${ this.#maxInflation } ( see: https:/\\/github.com/ethers-io/ethers.js/issues/4537 )`,  \"BUFFER_OVERRUN\", {\n            buffer: getBytesCopy(this.#data), offset: this.#offset,\n            length: count, info: {\n                bytesRead: this.#bytesRead,\n                dataLength: this.dataLength\n            }\n        });\n    }\n\n    #peekBytes(offset: number, length: number, loose?: boolean): Uint8Array {\n        let alignedLength = Math.ceil(length / WordSize) * WordSize;\n        if (this.#offset + alignedLength > this.#data.length) {\n            if (this.allowLoose && loose && this.#offset + length <= this.#data.length) {\n                alignedLength = length;\n            } else {\n                assert(false, \"data out-of-bounds\", \"BUFFER_OVERRUN\", {\n                    buffer: getBytesCopy(this.#data),\n                    length: this.#data.length,\n                    offset: this.#offset + alignedLength\n                });\n            }\n        }\n        return this.#data.slice(this.#offset, this.#offset + alignedLength)\n    }\n\n    // Create a sub-reader with the same underlying data, but offset\n    subReader(offset: number): Reader {\n        const reader = new Reader(this.#data.slice(this.#offset + offset), this.allowLoose, this.#maxInflation);\n        reader.#parent = this;\n        return reader;\n    }\n\n    // Read bytes\n    readBytes(length: number, loose?: boolean): Uint8Array {\n        let bytes = this.#peekBytes(0, length, !!loose);\n        this.#incrementBytesRead(length);\n        this.#offset += bytes.length;\n        // @TODO: Make sure the length..end bytes are all 0?\n        return bytes.slice(0, length);\n    }\n\n    // Read a numeric values\n    readValue(): bigint {\n        return toBigInt(this.readBytes(WordSize));\n    }\n\n    readIndex(): number {\n        return toNumber(this.readBytes(WordSize));\n    }\n}\n","function number(n: number) {\n  if (!Number.isSafeInteger(n) || n < 0) throw new Error(`Wrong positive integer: ${n}`);\n}\n\nfunction bool(b: boolean) {\n  if (typeof b !== 'boolean') throw new Error(`Expected boolean, not ${b}`);\n}\n\nfunction bytes(b: Uint8Array | undefined, ...lengths: number[]) {\n  if (!(b instanceof Uint8Array)) throw new Error('Expected Uint8Array');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new Error(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\n\ntype Hash = {\n  (data: Uint8Array): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create: any;\n};\nfunction hash(hash: Hash) {\n  if (typeof hash !== 'function' || typeof hash.create !== 'function')\n    throw new Error('Hash should be wrapped by utils.wrapConstructor');\n  number(hash.outputLen);\n  number(hash.blockLen);\n}\n\nfunction exists(instance: any, checkFinished = true) {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\nfunction output(out: any, instance: any) {\n  bytes(out);\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n  }\n}\n\nexport { number, bool, bytes, hash, exists, output };\n\nconst assert = { number, bool, bytes, hash, exists, output };\nexport default assert;\n","const U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nfunction fromBig(n: bigint, le = false) {\n  if (le) return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n  return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\n\nfunction split(lst: bigint[], le = false) {\n  let Ah = new Uint32Array(lst.length);\n  let Al = new Uint32Array(lst.length);\n  for (let i = 0; i < lst.length; i++) {\n    const { h, l } = fromBig(lst[i], le);\n    [Ah[i], Al[i]] = [h, l];\n  }\n  return [Ah, Al];\n}\n\nconst toBig = (h: number, l: number) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h: number, _l: number, s: number) => h >>> s;\nconst shrSL = (h: number, l: number, s: number) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h: number, l: number, s: number) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h: number, l: number, s: number) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h: number, l: number, s: number) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h: number, l: number, s: number) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h: number, l: number) => l;\nconst rotr32L = (h: number, _l: number) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h: number, l: number, s: number) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h: number, l: number, s: number) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h: number, l: number, s: number) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h: number, l: number, s: number) => (h << (s - 32)) | (l >>> (64 - s));\n\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah: number, Al: number, Bh: number, Bl: number) {\n  const l = (Al >>> 0) + (Bl >>> 0);\n  return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al: number, Bl: number, Cl: number) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low: number, Ah: number, Bh: number, Ch: number) =>\n  (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al: number, Bl: number, Cl: number, Dl: number) =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number) =>\n  (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al: number, Bl: number, Cl: number, Dl: number, El: number) =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number) =>\n  (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n\n// prettier-ignore\nexport {\n  fromBig, split, toBig,\n  shrSH, shrSL,\n  rotrSH, rotrSL, rotrBH, rotrBL,\n  rotr32H, rotr32L,\n  rotlSH, rotlSL, rotlBH, rotlBL,\n  add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\n// prettier-ignore\nconst u64 = {\n  fromBig, split, toBig,\n  shrSH, shrSL,\n  rotrSH, rotrSL, rotrBH, rotrBL,\n  rotr32H, rotr32L,\n  rotlSH, rotlSL, rotlBH, rotlBL,\n  add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n","// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// See utils.ts for details.\ndeclare const globalThis: Record<string, any> | undefined;\nexport const crypto =\n  typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n","/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\nconst u8a = (a: any): a is Uint8Array => a instanceof Uint8Array;\n// Cast array to different type\nexport const u8 = (arr: TypedArray) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr: TypedArray) =>\n  new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n\n// Cast array to view\nexport const createView = (arr: TypedArray) =>\n  new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word: number, shift: number) => (word << (32 - shift)) | (word >>> shift);\n\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!isLE) throw new Error('Non little-endian hardware is not supported');\n\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  if (!u8a(bytes)) throw new Error('Uint8Array expected');\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  const len = hex.length;\n  if (len % 2) throw new Error('padded hex string expected, got unpadded hex of length ' + len);\n  const array = new Uint8Array(len / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = hex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => {};\n\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters: number, tick: number, cb: (i: number) => void) {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols in both browsers and Node.js since v11\n// See https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\n\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\nexport type Input = Uint8Array | string;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data: Input): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  if (!u8a(data)) throw new Error(`expected Uint8Array, got ${typeof data}`);\n  return data;\n}\n\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  const r = new Uint8Array(arrays.reduce((sum, a) => sum + a.length, 0));\n  let pad = 0; // walk through each item, ensure they have proper type\n  arrays.forEach((a) => {\n    if (!u8a(a)) throw new Error('Uint8Array expected');\n    r.set(a, pad);\n    pad += a.length;\n  });\n  return r;\n}\n\n// For runtime check if class implements interface\nexport abstract class Hash<T extends Hash<T>> {\n  abstract blockLen: number; // Bytes per block\n  abstract outputLen: number; // Bytes in output\n  abstract update(buf: Input): this;\n  // Writes digest into buf\n  abstract digestInto(buf: Uint8Array): void;\n  abstract digest(): Uint8Array;\n  /**\n   * Resets internal state. Makes Hash instance unusable.\n   * Reset is impossible for keyed hashes if key is consumed into state. If digest is not consumed\n   * by user, they will need to manually call `destroy()` when zeroing is necessary.\n   */\n  abstract destroy(): void;\n  /**\n   * Clones hash instance. Unsafe: doesn't check whether `to` is valid. Can be used as `clone()`\n   * when no options are passed.\n   * Reasons to use `_cloneInto` instead of clone: 1) performance 2) reuse instance => all internal\n   * buffers are overwritten => causes buffer overwrite which is used for digest in some cases.\n   * There are no guarantees for clean-up because it's impossible in JS.\n   */\n  abstract _cloneInto(to?: T): T;\n  // Safe version that clones internal state\n  clone(): T {\n    return this._cloneInto();\n  }\n}\n\n/**\n * XOF: streaming API to read digest in chunks.\n * Same as 'squeeze' in keccak/k12 and 'seek' in blake3, but more generic name.\n * When hash used in XOF mode it is up to user to call '.destroy' afterwards, since we cannot\n * destroy state, next call can require more bytes.\n */\nexport type HashXOF<T extends Hash<T>> = Hash<T> & {\n  xof(bytes: number): Uint8Array; // Read 'bytes' bytes from digest stream\n  xofInto(buf: Uint8Array): Uint8Array; // read buf.length bytes from digest stream into buf\n};\n\nconst toStr = {}.toString;\ntype EmptyObj = {};\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && toStr.call(opts) !== '[object Object]')\n    throw new Error('Options should be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\nexport type CHash = ReturnType<typeof wrapConstructor>;\n\nexport function wrapConstructor<T extends Hash<T>>(hashCons: () => Hash<T>) {\n  const hashC = (msg: Input): Uint8Array => hashCons().update(toBytes(msg)).digest();\n  const tmp = hashCons();\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = () => hashCons();\n  return hashC;\n}\n\nexport function wrapConstructorWithOpts<H extends Hash<H>, T extends Object>(\n  hashCons: (opts?: T) => Hash<H>\n) {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts: T) => hashCons(opts);\n  return hashC;\n}\n\nexport function wrapXOFConstructorWithOpts<H extends HashXOF<H>, T extends Object>(\n  hashCons: (opts?: T) => HashXOF<H>\n) {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts: T) => hashCons(opts);\n  return hashC;\n}\n\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  if (crypto && typeof crypto.getRandomValues === 'function') {\n    return crypto.getRandomValues(new Uint8Array(bytesLength));\n  }\n  throw new Error('crypto.getRandomValues must be defined');\n}\n","import { bytes, exists, number, output } from './_assert.js';\nimport { rotlBH, rotlBL, rotlSH, rotlSL, split } from './_u64.js';\nimport {\n  Hash,\n  u32,\n  Input,\n  toBytes,\n  wrapConstructor,\n  wrapXOFConstructorWithOpts,\n  HashXOF,\n} from './utils.js';\n\n// SHA3 (keccak) is based on a new design: basically, the internal state is bigger than output size.\n// It's called a sponge function.\n\n// Various per round constants calculations\nconst [SHA3_PI, SHA3_ROTL, _SHA3_IOTA]: [number[], number[], bigint[]] = [[], [], []];\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nconst _2n = /* @__PURE__ */ BigInt(2);\nconst _7n = /* @__PURE__ */ BigInt(7);\nconst _256n = /* @__PURE__ */ BigInt(256);\nconst _0x71n = /* @__PURE__ */ BigInt(0x71);\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n  // Pi\n  [x, y] = [y, (2 * x + 3 * y) % 5];\n  SHA3_PI.push(2 * (5 * y + x));\n  // Rotational\n  SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n  // Iota\n  let t = _0n;\n  for (let j = 0; j < 7; j++) {\n    R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n    if (R & _2n) t ^= _1n << ((_1n << /* @__PURE__ */ BigInt(j)) - _1n);\n  }\n  _SHA3_IOTA.push(t);\n}\nconst [SHA3_IOTA_H, SHA3_IOTA_L] = /* @__PURE__ */ split(_SHA3_IOTA, true);\n\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h: number, l: number, s: number) => (s > 32 ? rotlBH(h, l, s) : rotlSH(h, l, s));\nconst rotlL = (h: number, l: number, s: number) => (s > 32 ? rotlBL(h, l, s) : rotlSL(h, l, s));\n\n// Same as keccakf1600, but allows to skip some rounds\nexport function keccakP(s: Uint32Array, rounds: number = 24) {\n  const B = new Uint32Array(5 * 2);\n  // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n  for (let round = 24 - rounds; round < 24; round++) {\n    // Theta θ\n    for (let x = 0; x < 10; x++) B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n    for (let x = 0; x < 10; x += 2) {\n      const idx1 = (x + 8) % 10;\n      const idx0 = (x + 2) % 10;\n      const B0 = B[idx0];\n      const B1 = B[idx0 + 1];\n      const Th = rotlH(B0, B1, 1) ^ B[idx1];\n      const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n      for (let y = 0; y < 50; y += 10) {\n        s[x + y] ^= Th;\n        s[x + y + 1] ^= Tl;\n      }\n    }\n    // Rho (ρ) and Pi (π)\n    let curH = s[2];\n    let curL = s[3];\n    for (let t = 0; t < 24; t++) {\n      const shift = SHA3_ROTL[t];\n      const Th = rotlH(curH, curL, shift);\n      const Tl = rotlL(curH, curL, shift);\n      const PI = SHA3_PI[t];\n      curH = s[PI];\n      curL = s[PI + 1];\n      s[PI] = Th;\n      s[PI + 1] = Tl;\n    }\n    // Chi (χ)\n    for (let y = 0; y < 50; y += 10) {\n      for (let x = 0; x < 10; x++) B[x] = s[y + x];\n      for (let x = 0; x < 10; x++) s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n    }\n    // Iota (ι)\n    s[0] ^= SHA3_IOTA_H[round];\n    s[1] ^= SHA3_IOTA_L[round];\n  }\n  B.fill(0);\n}\n\nexport class Keccak extends Hash<Keccak> implements HashXOF<Keccak> {\n  protected state: Uint8Array;\n  protected pos = 0;\n  protected posOut = 0;\n  protected finished = false;\n  protected state32: Uint32Array;\n  protected destroyed = false;\n  // NOTE: we accept arguments in bytes instead of bits here.\n  constructor(\n    public blockLen: number,\n    public suffix: number,\n    public outputLen: number,\n    protected enableXOF = false,\n    protected rounds: number = 24\n  ) {\n    super();\n    // Can be passed from user as dkLen\n    number(outputLen);\n    // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n    if (0 >= this.blockLen || this.blockLen >= 200)\n      throw new Error('Sha3 supports only keccak-f1600 function');\n    this.state = new Uint8Array(200);\n    this.state32 = u32(this.state);\n  }\n  protected keccak() {\n    keccakP(this.state32, this.rounds);\n    this.posOut = 0;\n    this.pos = 0;\n  }\n  update(data: Input) {\n    exists(this);\n    const { blockLen, state } = this;\n    data = toBytes(data);\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      for (let i = 0; i < take; i++) state[this.pos++] ^= data[pos++];\n      if (this.pos === blockLen) this.keccak();\n    }\n    return this;\n  }\n  protected finish() {\n    if (this.finished) return;\n    this.finished = true;\n    const { state, suffix, pos, blockLen } = this;\n    // Do the padding\n    state[pos] ^= suffix;\n    if ((suffix & 0x80) !== 0 && pos === blockLen - 1) this.keccak();\n    state[blockLen - 1] ^= 0x80;\n    this.keccak();\n  }\n  protected writeInto(out: Uint8Array): Uint8Array {\n    exists(this, false);\n    bytes(out);\n    this.finish();\n    const bufferOut = this.state;\n    const { blockLen } = this;\n    for (let pos = 0, len = out.length; pos < len; ) {\n      if (this.posOut >= blockLen) this.keccak();\n      const take = Math.min(blockLen - this.posOut, len - pos);\n      out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n      this.posOut += take;\n      pos += take;\n    }\n    return out;\n  }\n  xofInto(out: Uint8Array): Uint8Array {\n    // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n    if (!this.enableXOF) throw new Error('XOF is not possible for this instance');\n    return this.writeInto(out);\n  }\n  xof(bytes: number): Uint8Array {\n    number(bytes);\n    return this.xofInto(new Uint8Array(bytes));\n  }\n  digestInto(out: Uint8Array) {\n    output(out, this);\n    if (this.finished) throw new Error('digest() was already called');\n    this.writeInto(out);\n    this.destroy();\n    return out;\n  }\n  digest() {\n    return this.digestInto(new Uint8Array(this.outputLen));\n  }\n  destroy() {\n    this.destroyed = true;\n    this.state.fill(0);\n  }\n  _cloneInto(to?: Keccak): Keccak {\n    const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n    to ||= new Keccak(blockLen, suffix, outputLen, enableXOF, rounds);\n    to.state32.set(this.state32);\n    to.pos = this.pos;\n    to.posOut = this.posOut;\n    to.finished = this.finished;\n    to.rounds = rounds;\n    // Suffix can change in cSHAKE\n    to.suffix = suffix;\n    to.outputLen = outputLen;\n    to.enableXOF = enableXOF;\n    to.destroyed = this.destroyed;\n    return to;\n  }\n}\n\nconst gen = (suffix: number, blockLen: number, outputLen: number) =>\n  wrapConstructor(() => new Keccak(blockLen, suffix, outputLen));\n\nexport const sha3_224 = /* @__PURE__ */ gen(0x06, 144, 224 / 8);\n/**\n * SHA3-256 hash function\n * @param message - that would be hashed\n */\nexport const sha3_256 = /* @__PURE__ */ gen(0x06, 136, 256 / 8);\nexport const sha3_384 = /* @__PURE__ */ gen(0x06, 104, 384 / 8);\nexport const sha3_512 = /* @__PURE__ */ gen(0x06, 72, 512 / 8);\nexport const keccak_224 = /* @__PURE__ */ gen(0x01, 144, 224 / 8);\n/**\n * keccak-256 hash function. Different from SHA3-256.\n * @param message - that would be hashed\n */\nexport const keccak_256 = /* @__PURE__ */ gen(0x01, 136, 256 / 8);\nexport const keccak_384 = /* @__PURE__ */ gen(0x01, 104, 384 / 8);\nexport const keccak_512 = /* @__PURE__ */ gen(0x01, 72, 512 / 8);\n\nexport type ShakeOpts = { dkLen?: number };\n\nconst genShake = (suffix: number, blockLen: number, outputLen: number) =>\n  wrapXOFConstructorWithOpts<HashXOF<Keccak>, ShakeOpts>(\n    (opts: ShakeOpts = {}) =>\n      new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true)\n  );\n\nexport const shake128 = /* @__PURE__ */ genShake(0x1f, 168, 128 / 8);\nexport const shake256 = /* @__PURE__ */ genShake(0x1f, 136, 256 / 8);\n","/**\n *  Cryptographic hashing functions\n *\n *  @_subsection: api/crypto:Hash Functions [about-crypto-hashing]\n */\n\nimport { keccak_256 } from \"@noble/hashes/sha3\";\n\nimport { getBytes, hexlify } from \"../utils/index.js\";\n\nimport type { BytesLike } from \"../utils/index.js\";\n\n\nlet locked = false;\n\nconst _keccak256 = function(data: Uint8Array): Uint8Array {\n    return keccak_256(data);\n}\n\nlet __keccak256: (data: Uint8Array) => BytesLike = _keccak256;\n\n/**\n *  Compute the cryptographic KECCAK256 hash of %%data%%.\n *\n *  The %%data%% **must** be a data representation, to compute the\n *  hash of UTF-8 data use the [[id]] function.\n *\n *  @returns DataHexstring\n *  @example:\n *    keccak256(\"0x\")\n *    //_result:\n *\n *    keccak256(\"0x1337\")\n *    //_result:\n *\n *    keccak256(new Uint8Array([ 0x13, 0x37 ]))\n *    //_result:\n *\n *    // Strings are assumed to be DataHexString, otherwise it will\n *    // throw. To hash UTF-8 data, see the note above.\n *    keccak256(\"Hello World\")\n *    //_error:\n */\nexport function keccak256(_data: BytesLike): string {\n    const data = getBytes(_data, \"data\");\n    return hexlify(__keccak256(data));\n}\nkeccak256._ = _keccak256;\nkeccak256.lock = function(): void { locked = true; }\nkeccak256.register = function(func: (data: Uint8Array) => BytesLike) {\n    if (locked) { throw new TypeError(\"keccak256 is locked\"); }\n    __keccak256 = func;\n}\nObject.freeze(keccak256);\n","import { keccak256 } from \"../crypto/index.js\";\nimport { getBytes, assertArgument } from \"../utils/index.js\";\n\n\nconst BN_0 = BigInt(0);\nconst BN_36 = BigInt(36);\n\nfunction getChecksumAddress(address: string): string {\n//    if (!isHexString(address, 20)) {\n//        logger.throwArgumentError(\"invalid address\", \"address\", address);\n//    }\n\n    address = address.toLowerCase();\n\n    const chars = address.substring(2).split(\"\");\n\n    const expanded = new Uint8Array(40);\n    for (let i = 0; i < 40; i++) {\n        expanded[i] = chars[i].charCodeAt(0);\n    }\n\n    const hashed = getBytes(keccak256(expanded));\n\n    for (let i = 0; i < 40; i += 2) {\n        if ((hashed[i >> 1] >> 4) >= 8) {\n            chars[i] = chars[i].toUpperCase();\n        }\n        if ((hashed[i >> 1] & 0x0f) >= 8) {\n            chars[i + 1] = chars[i + 1].toUpperCase();\n        }\n    }\n\n    return \"0x\" + chars.join(\"\");\n}\n\n// See: https://en.wikipedia.org/wiki/International_Bank_Account_Number\n\n// Create lookup table\nconst ibanLookup: { [character: string]: string } = { };\nfor (let i = 0; i < 10; i++) { ibanLookup[String(i)] = String(i); }\nfor (let i = 0; i < 26; i++) { ibanLookup[String.fromCharCode(65 + i)] = String(10 + i); }\n\n// How many decimal digits can we process? (for 64-bit float, this is 15)\n// i.e. Math.floor(Math.log10(Number.MAX_SAFE_INTEGER));\nconst safeDigits = 15;\n\nfunction ibanChecksum(address: string): string {\n    address = address.toUpperCase();\n    address = address.substring(4) + address.substring(0, 2) + \"00\";\n\n    let expanded = address.split(\"\").map((c) => { return ibanLookup[c]; }).join(\"\");\n\n    // Javascript can handle integers safely up to 15 (decimal) digits\n    while (expanded.length >= safeDigits){\n        let block = expanded.substring(0, safeDigits);\n        expanded = parseInt(block, 10) % 97 + expanded.substring(block.length);\n    }\n\n    let checksum = String(98 - (parseInt(expanded, 10) % 97));\n    while (checksum.length < 2) { checksum = \"0\" + checksum; }\n\n    return checksum;\n};\n\nconst Base36 = (function() {;\n    const result: Record<string, bigint> = { };\n    for (let i = 0; i < 36; i++) {\n        const key = \"0123456789abcdefghijklmnopqrstuvwxyz\"[i];\n        result[key] = BigInt(i);\n    }\n    return result;\n})();\n\nfunction fromBase36(value: string): bigint {\n    value = value.toLowerCase();\n\n    let result = BN_0;\n    for (let i = 0; i < value.length; i++) {\n        result = result * BN_36 + Base36[value[i]];\n    }\n    return result;\n}\n\n/**\n *  Returns a normalized and checksumed address for %%address%%.\n *  This accepts non-checksum addresses, checksum addresses and\n *  [[getIcapAddress]] formats.\n *\n *  The checksum in Ethereum uses the capitalization (upper-case\n *  vs lower-case) of the characters within an address to encode\n *  its checksum, which offers, on average, a checksum of 15-bits.\n *\n *  If %%address%% contains both upper-case and lower-case, it is\n *  assumed to already be a checksum address and its checksum is\n *  validated, and if the address fails its expected checksum an\n *  error is thrown.\n *\n *  If you wish the checksum of %%address%% to be ignore, it should\n *  be converted to lower-case (i.e. ``.toLowercase()``) before\n *  being passed in. This should be a very rare situation though,\n *  that you wish to bypass the safegaurds in place to protect\n *  against an address that has been incorrectly copied from another\n *  source.\n *\n *  @example:\n *    // Adds the checksum (via upper-casing specific letters)\n *    getAddress(\"0x8ba1f109551bd432803012645ac136ddd64dba72\")\n *    //_result:\n *\n *    // Converts ICAP address and adds checksum\n *    getAddress(\"XE65GB6LDNXYOFTX0NSV3FUWKOWIXAMJK36\");\n *    //_result:\n *\n *    // Throws an error if an address contains mixed case,\n *    // but the checksum fails\n *    getAddress(\"0x8Ba1f109551bD432803012645Ac136ddd64DBA72\")\n *    //_error:\n */\nexport function getAddress(address: string): string {\n\n    assertArgument(typeof(address) === \"string\", \"invalid address\", \"address\", address);\n\n    if (address.match(/^(0x)?[0-9a-fA-F]{40}$/)) {\n\n        // Missing the 0x prefix\n        if (!address.startsWith(\"0x\")) { address = \"0x\" + address; }\n\n        const result = getChecksumAddress(address);\n\n        // It is a checksummed address with a bad checksum\n        assertArgument(!address.match(/([A-F].*[a-f])|([a-f].*[A-F])/) || result === address,\n            \"bad address checksum\", \"address\", address);\n\n        return result;\n    }\n\n    // Maybe ICAP? (we only support direct mode)\n    if (address.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)) {\n        // It is an ICAP address with a bad checksum\n        assertArgument(address.substring(2, 4) === ibanChecksum(address), \"bad icap checksum\", \"address\", address);\n\n        let result = fromBase36(address.substring(4)).toString(16);\n        while (result.length < 40) { result = \"0\" + result; }\n        return  getChecksumAddress(\"0x\" + result);\n    }\n\n    assertArgument(false, \"invalid address\", \"address\", address);\n}\n\n/**\n *  The [ICAP Address format](link-icap) format is an early checksum\n *  format which attempts to be compatible with the banking\n *  industry [IBAN format](link-wiki-iban) for bank accounts.\n *\n *  It is no longer common or a recommended format.\n *\n *  @example:\n *    getIcapAddress(\"0x8ba1f109551bd432803012645ac136ddd64dba72\");\n *    //_result:\n *\n *    getIcapAddress(\"XE65GB6LDNXYOFTX0NSV3FUWKOWIXAMJK36\");\n *    //_result:\n *\n *    // Throws an error if the ICAP checksum is wrong\n *    getIcapAddress(\"XE65GB6LDNXYOFTX0NSV3FUWKOWIXAMJK37\");\n *    //_error:\n */\nexport function getIcapAddress(address: string): string {\n    //let base36 = _base16To36(getAddress(address).substring(2)).toUpperCase();\n    let base36 = BigInt(getAddress(address)).toString(36).toUpperCase();\n    while (base36.length < 30) { base36 = \"0\" + base36; }\n    return \"XE\" + ibanChecksum(\"XE00\" + base36) + base36;\n}\n","/**\n *  A Typed object allows a value to have its type explicitly\n *  specified.\n *\n *  For example, in Solidity, the value ``45`` could represent a\n *  ``uint8`` or a ``uint256``. The value ``0x1234`` could represent\n *  a ``bytes2`` or ``bytes``.\n *\n *  Since JavaScript has no meaningful way to explicitly inform any\n *  APIs which what the type is, this allows transparent interoperation\n *  with Soldity.\n *\n *  @_subsection: api/abi:Typed Values\n */\n\nimport { assertPrivate, defineProperties } from \"../utils/index.js\";\n\nimport type { Addressable } from \"../address/index.js\";\nimport type { BigNumberish, BytesLike } from \"../utils/index.js\";\n\nimport type { Result } from \"./coders/abstract-coder.js\";\n\nconst _gaurd = { };\n\nfunction n(value: BigNumberish, width: number): Typed {\n    let signed = false;\n    if (width < 0) {\n        signed = true;\n        width *= -1;\n    }\n\n    // @TODO: Check range is valid for value\n    return new Typed(_gaurd, `${ signed ? \"\": \"u\" }int${ width }`, value, { signed, width });\n}\n\nfunction b(value: BytesLike, size?: number): Typed {\n    // @TODO: Check range is valid for value\n    return new Typed(_gaurd, `bytes${ (size) ? size: \"\" }`, value, { size });\n}\n\n// @TODO: Remove this in v7, it was replaced by TypedBigInt\n/**\n *  @_ignore:\n */\nexport interface TypedNumber extends Typed {\n    value: number;\n    defaultValue(): number;\n    minValue(): number;\n    maxValue(): number;\n}\n\n/**\n *  A **Typed** that represents a numeric value.\n */\nexport interface TypedBigInt extends Typed {\n    /**\n     *  The value.\n     */\n    value: bigint;\n\n    /**\n     *  The default value for all numeric types is ``0``.\n     */\n    defaultValue(): bigint;\n\n    /**\n     *  The minimum value for this type, accounting for bit-width and signed-ness.\n     */\n    minValue(): bigint;\n\n    /**\n     *  The minimum value for this type, accounting for bit-width.\n     */\n    maxValue(): bigint;\n}\n\n/**\n *  A **Typed** that represents a binary sequence of data as bytes.\n */\nexport interface TypedData extends Typed {\n    /**\n     *  The value.\n     */\n    value: string;\n\n    /**\n     *  The default value for this type.\n     */\n    defaultValue(): string;\n}\n\n/**\n *  A **Typed** that represents a UTF-8 sequence of bytes.\n */\nexport interface TypedString extends Typed {\n    /**\n     *  The value.\n     */\n    value: string;\n\n    /**\n     *  The default value for the string type is the empty string (i.e. ``\"\"``).\n     */\n    defaultValue(): string;\n}\n\nconst _typedSymbol = Symbol.for(\"_ethers_typed\");\n\n/**\n *  The **Typed** class to wrap values providing explicit type information.\n */\nexport class Typed {\n\n    /**\n     *  The type, as a Solidity-compatible type.\n     */\n    readonly type!: string;\n\n    /**\n     *  The actual value.\n     */\n    readonly value!: any;\n\n    readonly #options: any;\n\n    /**\n     *  @_ignore:\n     */\n    readonly _typedSymbol!: Symbol;\n\n    /**\n     *  @_ignore:\n     */\n    constructor(gaurd: any, type: string, value: any, options?: any) {\n        if (options == null) { options = null; }\n        assertPrivate(_gaurd, gaurd, \"Typed\");\n        defineProperties<Typed>(this, { _typedSymbol, type, value });\n        this.#options = options;\n\n        // Check the value is valid\n        this.format();\n    }\n\n    /**\n     *  Format the type as a Human-Readable type.\n     */\n    format(): string {\n        if (this.type === \"array\") {\n            throw new Error(\"\");\n        } else if (this.type === \"dynamicArray\") {\n            throw new Error(\"\");\n        } else if (this.type === \"tuple\") {\n            return `tuple(${ this.value.map((v: Typed) => v.format()).join(\",\") })`\n        }\n\n        return this.type;\n    }\n\n    /**\n     *  The default value returned by this type.\n     */\n    defaultValue(): string | number | bigint | Result {\n        return 0;\n    }\n\n    /**\n     *  The minimum value for numeric types.\n     */\n    minValue(): string | number | bigint {\n        return 0;\n    }\n\n    /**\n     *  The maximum value for numeric types.\n     */\n    maxValue(): string | number | bigint {\n        return 0;\n    }\n\n    /**\n     *  Returns ``true`` and provides a type guard is this is a [[TypedBigInt]].\n     */\n    isBigInt(): this is TypedBigInt {\n        return !!(this.type.match(/^u?int[0-9]+$/));\n    }\n\n    /**\n     *  Returns ``true`` and provides a type guard is this is a [[TypedData]].\n     */\n    isData(): this is TypedData {\n        return this.type.startsWith(\"bytes\");\n    }\n\n    /**\n     *  Returns ``true`` and provides a type guard is this is a [[TypedString]].\n     */\n    isString(): this is TypedString {\n        return (this.type === \"string\");\n    }\n\n    /**\n     *  Returns the tuple name, if this is a tuple. Throws otherwise.\n     */\n    get tupleName(): null | string {\n        if (this.type !== \"tuple\") { throw TypeError(\"not a tuple\"); }\n        return this.#options;\n    }\n\n    // Returns the length of this type as an array\n    // - `null` indicates the length is unforced, it could be dynamic\n    // - `-1` indicates the length is dynamic\n    // - any other value indicates it is a static array and is its length\n\n    /**\n     *  Returns the length of the array type or ``-1`` if it is dynamic.\n     *\n     *  Throws if the type is not an array.\n     */\n    get arrayLength(): null | number {\n        if (this.type !== \"array\") { throw TypeError(\"not an array\"); }\n        if (this.#options === true) { return -1; }\n        if (this.#options === false) { return (<Array<any>>(this.value)).length; }\n        return null;\n    }\n\n    /**\n     *  Returns a new **Typed** of %%type%% with the %%value%%.\n     */\n    static from(type: string, value: any): Typed {\n        return new Typed(_gaurd, type, value);\n    }\n\n    /**\n     *  Return a new ``uint8`` type for %%v%%.\n     */\n    static uint8(v: BigNumberish): Typed { return n(v, 8); }\n\n    /**\n     *  Return a new ``uint16`` type for %%v%%.\n     */\n    static uint16(v: BigNumberish): Typed { return n(v, 16); }\n\n    /**\n     *  Return a new ``uint24`` type for %%v%%.\n     */\n    static uint24(v: BigNumberish): Typed { return n(v, 24); }\n\n    /**\n     *  Return a new ``uint32`` type for %%v%%.\n     */\n    static uint32(v: BigNumberish): Typed { return n(v, 32); }\n\n    /**\n     *  Return a new ``uint40`` type for %%v%%.\n     */\n    static uint40(v: BigNumberish): Typed { return n(v, 40); }\n\n    /**\n     *  Return a new ``uint48`` type for %%v%%.\n     */\n    static uint48(v: BigNumberish): Typed { return n(v, 48); }\n\n    /**\n     *  Return a new ``uint56`` type for %%v%%.\n     */\n    static uint56(v: BigNumberish): Typed { return n(v, 56); }\n\n    /**\n     *  Return a new ``uint64`` type for %%v%%.\n     */\n    static uint64(v: BigNumberish): Typed { return n(v, 64); }\n\n    /**\n     *  Return a new ``uint72`` type for %%v%%.\n     */\n    static uint72(v: BigNumberish): Typed { return n(v, 72); }\n\n    /**\n     *  Return a new ``uint80`` type for %%v%%.\n     */\n    static uint80(v: BigNumberish): Typed { return n(v, 80); }\n\n    /**\n     *  Return a new ``uint88`` type for %%v%%.\n     */\n    static uint88(v: BigNumberish): Typed { return n(v, 88); }\n\n    /**\n     *  Return a new ``uint96`` type for %%v%%.\n     */\n    static uint96(v: BigNumberish): Typed { return n(v, 96); }\n\n    /**\n     *  Return a new ``uint104`` type for %%v%%.\n     */\n    static uint104(v: BigNumberish): Typed { return n(v, 104); }\n\n    /**\n     *  Return a new ``uint112`` type for %%v%%.\n     */\n    static uint112(v: BigNumberish): Typed { return n(v, 112); }\n\n    /**\n     *  Return a new ``uint120`` type for %%v%%.\n     */\n    static uint120(v: BigNumberish): Typed { return n(v, 120); }\n\n    /**\n     *  Return a new ``uint128`` type for %%v%%.\n     */\n    static uint128(v: BigNumberish): Typed { return n(v, 128); }\n\n    /**\n     *  Return a new ``uint136`` type for %%v%%.\n     */\n    static uint136(v: BigNumberish): Typed { return n(v, 136); }\n\n    /**\n     *  Return a new ``uint144`` type for %%v%%.\n     */\n    static uint144(v: BigNumberish): Typed { return n(v, 144); }\n\n    /**\n     *  Return a new ``uint152`` type for %%v%%.\n     */\n    static uint152(v: BigNumberish): Typed { return n(v, 152); }\n\n    /**\n     *  Return a new ``uint160`` type for %%v%%.\n     */\n    static uint160(v: BigNumberish): Typed { return n(v, 160); }\n\n    /**\n     *  Return a new ``uint168`` type for %%v%%.\n     */\n    static uint168(v: BigNumberish): Typed { return n(v, 168); }\n\n    /**\n     *  Return a new ``uint176`` type for %%v%%.\n     */\n    static uint176(v: BigNumberish): Typed { return n(v, 176); }\n\n    /**\n     *  Return a new ``uint184`` type for %%v%%.\n     */\n    static uint184(v: BigNumberish): Typed { return n(v, 184); }\n\n    /**\n     *  Return a new ``uint192`` type for %%v%%.\n     */\n    static uint192(v: BigNumberish): Typed { return n(v, 192); }\n\n    /**\n     *  Return a new ``uint200`` type for %%v%%.\n     */\n    static uint200(v: BigNumberish): Typed { return n(v, 200); }\n\n    /**\n     *  Return a new ``uint208`` type for %%v%%.\n     */\n    static uint208(v: BigNumberish): Typed { return n(v, 208); }\n\n    /**\n     *  Return a new ``uint216`` type for %%v%%.\n     */\n    static uint216(v: BigNumberish): Typed { return n(v, 216); }\n\n    /**\n     *  Return a new ``uint224`` type for %%v%%.\n     */\n    static uint224(v: BigNumberish): Typed { return n(v, 224); }\n\n    /**\n     *  Return a new ``uint232`` type for %%v%%.\n     */\n    static uint232(v: BigNumberish): Typed { return n(v, 232); }\n\n    /**\n     *  Return a new ``uint240`` type for %%v%%.\n     */\n    static uint240(v: BigNumberish): Typed { return n(v, 240); }\n\n    /**\n     *  Return a new ``uint248`` type for %%v%%.\n     */\n    static uint248(v: BigNumberish): Typed { return n(v, 248); }\n\n    /**\n     *  Return a new ``uint256`` type for %%v%%.\n     */\n    static uint256(v: BigNumberish): Typed { return n(v, 256); }\n\n    /**\n     *  Return a new ``uint256`` type for %%v%%.\n     */\n    static uint(v: BigNumberish): Typed { return n(v, 256); }\n\n    /**\n     *  Return a new ``int8`` type for %%v%%.\n     */\n    static int8(v: BigNumberish): Typed { return n(v, -8); }\n\n    /**\n     *  Return a new ``int16`` type for %%v%%.\n     */\n    static int16(v: BigNumberish): Typed { return n(v, -16); }\n\n    /**\n     *  Return a new ``int24`` type for %%v%%.\n     */\n    static int24(v: BigNumberish): Typed { return n(v, -24); }\n\n    /**\n     *  Return a new ``int32`` type for %%v%%.\n     */\n    static int32(v: BigNumberish): Typed { return n(v, -32); }\n\n    /**\n     *  Return a new ``int40`` type for %%v%%.\n     */\n    static int40(v: BigNumberish): Typed { return n(v, -40); }\n\n    /**\n     *  Return a new ``int48`` type for %%v%%.\n     */\n    static int48(v: BigNumberish): Typed { return n(v, -48); }\n\n    /**\n     *  Return a new ``int56`` type for %%v%%.\n     */\n    static int56(v: BigNumberish): Typed { return n(v, -56); }\n\n    /**\n     *  Return a new ``int64`` type for %%v%%.\n     */\n    static int64(v: BigNumberish): Typed { return n(v, -64); }\n\n    /**\n     *  Return a new ``int72`` type for %%v%%.\n     */\n    static int72(v: BigNumberish): Typed { return n(v, -72); }\n\n    /**\n     *  Return a new ``int80`` type for %%v%%.\n     */\n    static int80(v: BigNumberish): Typed { return n(v, -80); }\n\n    /**\n     *  Return a new ``int88`` type for %%v%%.\n     */\n    static int88(v: BigNumberish): Typed { return n(v, -88); }\n\n    /**\n     *  Return a new ``int96`` type for %%v%%.\n     */\n    static int96(v: BigNumberish): Typed { return n(v, -96); }\n\n    /**\n     *  Return a new ``int104`` type for %%v%%.\n     */\n    static int104(v: BigNumberish): Typed { return n(v, -104); }\n\n    /**\n     *  Return a new ``int112`` type for %%v%%.\n     */\n    static int112(v: BigNumberish): Typed { return n(v, -112); }\n\n    /**\n     *  Return a new ``int120`` type for %%v%%.\n     */\n    static int120(v: BigNumberish): Typed { return n(v, -120); }\n\n    /**\n     *  Return a new ``int128`` type for %%v%%.\n     */\n    static int128(v: BigNumberish): Typed { return n(v, -128); }\n\n    /**\n     *  Return a new ``int136`` type for %%v%%.\n     */\n    static int136(v: BigNumberish): Typed { return n(v, -136); }\n\n    /**\n     *  Return a new ``int144`` type for %%v%%.\n     */\n    static int144(v: BigNumberish): Typed { return n(v, -144); }\n\n    /**\n     *  Return a new ``int52`` type for %%v%%.\n     */\n    static int152(v: BigNumberish): Typed { return n(v, -152); }\n\n    /**\n     *  Return a new ``int160`` type for %%v%%.\n     */\n    static int160(v: BigNumberish): Typed { return n(v, -160); }\n\n    /**\n     *  Return a new ``int168`` type for %%v%%.\n     */\n    static int168(v: BigNumberish): Typed { return n(v, -168); }\n\n    /**\n     *  Return a new ``int176`` type for %%v%%.\n     */\n    static int176(v: BigNumberish): Typed { return n(v, -176); }\n\n    /**\n     *  Return a new ``int184`` type for %%v%%.\n     */\n    static int184(v: BigNumberish): Typed { return n(v, -184); }\n\n    /**\n     *  Return a new ``int92`` type for %%v%%.\n     */\n    static int192(v: BigNumberish): Typed { return n(v, -192); }\n\n    /**\n     *  Return a new ``int200`` type for %%v%%.\n     */\n    static int200(v: BigNumberish): Typed { return n(v, -200); }\n\n    /**\n     *  Return a new ``int208`` type for %%v%%.\n     */\n    static int208(v: BigNumberish): Typed { return n(v, -208); }\n\n    /**\n     *  Return a new ``int216`` type for %%v%%.\n     */\n    static int216(v: BigNumberish): Typed { return n(v, -216); }\n\n    /**\n     *  Return a new ``int224`` type for %%v%%.\n     */\n    static int224(v: BigNumberish): Typed { return n(v, -224); }\n\n    /**\n     *  Return a new ``int232`` type for %%v%%.\n     */\n    static int232(v: BigNumberish): Typed { return n(v, -232); }\n\n    /**\n     *  Return a new ``int240`` type for %%v%%.\n     */\n    static int240(v: BigNumberish): Typed { return n(v, -240); }\n\n    /**\n     *  Return a new ``int248`` type for %%v%%.\n     */\n    static int248(v: BigNumberish): Typed { return n(v, -248); }\n\n    /**\n     *  Return a new ``int256`` type for %%v%%.\n     */\n    static int256(v: BigNumberish): Typed { return n(v, -256); }\n\n    /**\n     *  Return a new ``int256`` type for %%v%%.\n     */\n    static int(v: BigNumberish): Typed { return n(v, -256); }\n\n    /**\n     *  Return a new ``bytes1`` type for %%v%%.\n     */\n    static bytes1(v: BytesLike): Typed { return b(v, 1); }\n\n    /**\n     *  Return a new ``bytes2`` type for %%v%%.\n     */\n    static bytes2(v: BytesLike): Typed { return b(v, 2); }\n\n    /**\n     *  Return a new ``bytes3`` type for %%v%%.\n     */\n    static bytes3(v: BytesLike): Typed { return b(v, 3); }\n\n    /**\n     *  Return a new ``bytes4`` type for %%v%%.\n     */\n    static bytes4(v: BytesLike): Typed { return b(v, 4); }\n\n    /**\n     *  Return a new ``bytes5`` type for %%v%%.\n     */\n    static bytes5(v: BytesLike): Typed { return b(v, 5); }\n\n    /**\n     *  Return a new ``bytes6`` type for %%v%%.\n     */\n    static bytes6(v: BytesLike): Typed { return b(v, 6); }\n\n    /**\n     *  Return a new ``bytes7`` type for %%v%%.\n     */\n    static bytes7(v: BytesLike): Typed { return b(v, 7); }\n\n    /**\n     *  Return a new ``bytes8`` type for %%v%%.\n     */\n    static bytes8(v: BytesLike): Typed { return b(v, 8); }\n\n    /**\n     *  Return a new ``bytes9`` type for %%v%%.\n     */\n    static bytes9(v: BytesLike): Typed { return b(v, 9); }\n\n    /**\n     *  Return a new ``bytes10`` type for %%v%%.\n     */\n    static bytes10(v: BytesLike): Typed { return b(v, 10); }\n\n    /**\n     *  Return a new ``bytes11`` type for %%v%%.\n     */\n    static bytes11(v: BytesLike): Typed { return b(v, 11); }\n\n    /**\n     *  Return a new ``bytes12`` type for %%v%%.\n     */\n    static bytes12(v: BytesLike): Typed { return b(v, 12); }\n\n    /**\n     *  Return a new ``bytes13`` type for %%v%%.\n     */\n    static bytes13(v: BytesLike): Typed { return b(v, 13); }\n\n    /**\n     *  Return a new ``bytes14`` type for %%v%%.\n     */\n    static bytes14(v: BytesLike): Typed { return b(v, 14); }\n\n    /**\n     *  Return a new ``bytes15`` type for %%v%%.\n     */\n    static bytes15(v: BytesLike): Typed { return b(v, 15); }\n\n    /**\n     *  Return a new ``bytes16`` type for %%v%%.\n     */\n    static bytes16(v: BytesLike): Typed { return b(v, 16); }\n\n    /**\n     *  Return a new ``bytes17`` type for %%v%%.\n     */\n    static bytes17(v: BytesLike): Typed { return b(v, 17); }\n\n    /**\n     *  Return a new ``bytes18`` type for %%v%%.\n     */\n    static bytes18(v: BytesLike): Typed { return b(v, 18); }\n\n    /**\n     *  Return a new ``bytes19`` type for %%v%%.\n     */\n    static bytes19(v: BytesLike): Typed { return b(v, 19); }\n\n    /**\n     *  Return a new ``bytes20`` type for %%v%%.\n     */\n    static bytes20(v: BytesLike): Typed { return b(v, 20); }\n\n    /**\n     *  Return a new ``bytes21`` type for %%v%%.\n     */\n    static bytes21(v: BytesLike): Typed { return b(v, 21); }\n\n    /**\n     *  Return a new ``bytes22`` type for %%v%%.\n     */\n    static bytes22(v: BytesLike): Typed { return b(v, 22); }\n\n    /**\n     *  Return a new ``bytes23`` type for %%v%%.\n     */\n    static bytes23(v: BytesLike): Typed { return b(v, 23); }\n\n    /**\n     *  Return a new ``bytes24`` type for %%v%%.\n     */\n    static bytes24(v: BytesLike): Typed { return b(v, 24); }\n\n    /**\n     *  Return a new ``bytes25`` type for %%v%%.\n     */\n    static bytes25(v: BytesLike): Typed { return b(v, 25); }\n\n    /**\n     *  Return a new ``bytes26`` type for %%v%%.\n     */\n    static bytes26(v: BytesLike): Typed { return b(v, 26); }\n\n    /**\n     *  Return a new ``bytes27`` type for %%v%%.\n     */\n    static bytes27(v: BytesLike): Typed { return b(v, 27); }\n\n    /**\n     *  Return a new ``bytes28`` type for %%v%%.\n     */\n    static bytes28(v: BytesLike): Typed { return b(v, 28); }\n\n    /**\n     *  Return a new ``bytes29`` type for %%v%%.\n     */\n    static bytes29(v: BytesLike): Typed { return b(v, 29); }\n\n    /**\n     *  Return a new ``bytes30`` type for %%v%%.\n     */\n    static bytes30(v: BytesLike): Typed { return b(v, 30); }\n\n    /**\n     *  Return a new ``bytes31`` type for %%v%%.\n     */\n    static bytes31(v: BytesLike): Typed { return b(v, 31); }\n\n    /**\n     *  Return a new ``bytes32`` type for %%v%%.\n     */\n    static bytes32(v: BytesLike): Typed { return b(v, 32); }\n\n\n    /**\n     *  Return a new ``address`` type for %%v%%.\n     */\n    static address(v: string | Addressable): Typed { return new Typed(_gaurd, \"address\", v); }\n\n    /**\n     *  Return a new ``bool`` type for %%v%%.\n     */\n    static bool(v: any): Typed { return new Typed(_gaurd, \"bool\", !!v); }\n\n    /**\n     *  Return a new ``bytes`` type for %%v%%.\n     */\n    static bytes(v: BytesLike): Typed { return new Typed(_gaurd, \"bytes\", v); }\n\n    /**\n     *  Return a new ``string`` type for %%v%%.\n     */\n    static string(v: string): Typed { return new Typed(_gaurd, \"string\", v); }\n\n\n    /**\n     *  Return a new ``array`` type for %%v%%, allowing %%dynamic%% length.\n     */\n    static array(v: Array<any | Typed>, dynamic?: null | boolean): Typed {\n        throw new Error(\"not implemented yet\");\n        return new Typed(_gaurd, \"array\", v, dynamic);\n    }\n\n\n    /**\n     *  Return a new ``tuple`` type for %%v%%, with the optional %%name%%.\n     */\n    static tuple(v: Array<any | Typed> | Record<string, any | Typed>, name?: string): Typed {\n        throw new Error(\"not implemented yet\");\n        return new Typed(_gaurd, \"tuple\", v, name);\n    }\n\n\n    /**\n     *  Return a new ``uint8`` type for %%v%%.\n     */\n    static overrides(v: Record<string, any>): Typed {\n        return new Typed(_gaurd, \"overrides\", Object.assign({ }, v));\n    }\n\n    /**\n     *  Returns true only if %%value%% is a [[Typed]] instance.\n     */\n    static isTyped(value: any): value is Typed {\n        return (value\n            && typeof(value) === \"object\"\n            && \"_typedSymbol\" in value\n            && value._typedSymbol === _typedSymbol);\n    }\n\n    /**\n     *  If the value is a [[Typed]] instance, validates the underlying value\n     *  and returns it, otherwise returns value directly.\n     *\n     *  This is useful for functions that with to accept either a [[Typed]]\n     *  object or values.\n     */\n    static dereference<T>(value: Typed | T, type: string): T {\n        if (Typed.isTyped(value)) {\n            if (value.type !== type) {\n                throw new Error(`invalid type: expecetd ${ type }, got ${ value.type }`);\n            }\n            return value.value;\n        }\n        return value;\n    }\n}\n","import { getAddress } from \"../../address/index.js\";\nimport { toBeHex } from \"../../utils/maths.js\";\n\nimport { Typed } from \"../typed.js\";\nimport { Coder } from \"./abstract-coder.js\";\n\nimport type { Reader, Writer } from \"./abstract-coder.js\";\n\n\n/**\n *  @_ignore\n */\nexport class AddressCoder extends Coder {\n\n    constructor(localName: string) {\n        super(\"address\", \"address\", localName, false);\n    }\n\n    defaultValue(): string {\n        return \"0x0000000000000000000000000000000000000000\";\n    }\n\n    encode(writer: Writer, _value: string | Typed): number {\n        let value = Typed.dereference(_value, \"string\");\n        try {\n            value = getAddress(value);\n        } catch (error: any) {\n            return this._throwError(error.message, _value);\n        }\n        return writer.writeValue(value);\n    }\n\n    decode(reader: Reader): any {\n        return getAddress(toBeHex(reader.readValue(), 20));\n    }\n}\n","import { Coder } from \"./abstract-coder.js\";\n\nimport type { Reader, Writer } from \"./abstract-coder.js\";\n\n/**\n *  Clones the functionality of an existing Coder, but without a localName\n *\n *  @_ignore\n */\nexport class AnonymousCoder extends Coder {\n    private coder: Coder;\n\n    constructor(coder: Coder) {\n        super(coder.name, coder.type, \"_\", coder.dynamic);\n        this.coder = coder;\n    }\n\n    defaultValue(): any {\n        return this.coder.defaultValue();\n    }\n\n    encode(writer: Writer, value: any): number {\n        return this.coder.encode(writer, value);\n    }\n\n    decode(reader: Reader): any {\n        return this.coder.decode(reader);\n    }\n}\n","import {\n    defineProperties, isError, assert, assertArgument, assertArgumentCount\n} from \"../../utils/index.js\";\n\nimport { Typed } from \"../typed.js\";\n\nimport { Coder, Result, WordSize, Writer } from \"./abstract-coder.js\";\nimport { AnonymousCoder } from \"./anonymous.js\";\n\nimport type { Reader } from \"./abstract-coder.js\";\n\n/**\n *  @_ignore\n */\nexport function pack(writer: Writer, coders: ReadonlyArray<Coder>, values: Array<any> | { [ name: string ]: any }): number {\n    let arrayValues: Array<any> = [ ];\n\n    if (Array.isArray(values)) {\n       arrayValues = values;\n\n    } else if (values && typeof(values) === \"object\") {\n        let unique: { [ name: string ]: boolean } = { };\n\n        arrayValues = coders.map((coder) => {\n            const name = coder.localName;\n            assert(name, \"cannot encode object for signature with missing names\",\n                \"INVALID_ARGUMENT\", { argument: \"values\", info: { coder }, value: values });\n\n            assert(!unique[name], \"cannot encode object for signature with duplicate names\",\n                \"INVALID_ARGUMENT\", { argument: \"values\", info: { coder }, value: values });\n\n            unique[name] = true;\n\n            return values[name];\n        });\n\n    } else {\n        assertArgument(false, \"invalid tuple value\", \"tuple\", values);\n    }\n\n    assertArgument(coders.length === arrayValues.length, \"types/value length mismatch\", \"tuple\", values);\n\n    let staticWriter = new Writer();\n    let dynamicWriter = new Writer();\n\n    let updateFuncs: Array<(baseOffset: number) => void> = [];\n    coders.forEach((coder, index) => {\n        let value = arrayValues[index];\n\n        if (coder.dynamic) {\n            // Get current dynamic offset (for the future pointer)\n            let dynamicOffset = dynamicWriter.length;\n\n            // Encode the dynamic value into the dynamicWriter\n            coder.encode(dynamicWriter, value);\n\n            // Prepare to populate the correct offset once we are done\n            let updateFunc = staticWriter.writeUpdatableValue();\n            updateFuncs.push((baseOffset: number) => {\n                updateFunc(baseOffset + dynamicOffset);\n            });\n\n        } else {\n            coder.encode(staticWriter, value);\n        }\n    });\n\n    // Backfill all the dynamic offsets, now that we know the static length\n    updateFuncs.forEach((func) => { func(staticWriter.length); });\n\n    let length = writer.appendWriter(staticWriter);\n    length += writer.appendWriter(dynamicWriter);\n    return length;\n}\n\n/**\n *  @_ignore\n */\nexport function unpack(reader: Reader, coders: ReadonlyArray<Coder>): Result {\n    let values: Array<any> = [];\n    let keys: Array<null | string> = [ ];\n\n    // A reader anchored to this base\n    let baseReader = reader.subReader(0);\n\n    coders.forEach((coder) => {\n        let value: any = null;\n\n        if (coder.dynamic) {\n            let offset = reader.readIndex();\n            let offsetReader = baseReader.subReader(offset);\n            try {\n                value = coder.decode(offsetReader);\n            } catch (error: any) {\n                // Cannot recover from this\n                if (isError(error, \"BUFFER_OVERRUN\")) {\n                    throw error;\n                }\n\n                value = error;\n                value.baseType = coder.name;\n                value.name = coder.localName;\n                value.type = coder.type;\n            }\n\n        } else {\n            try {\n                value = coder.decode(reader);\n            } catch (error: any) {\n                // Cannot recover from this\n                if (isError(error, \"BUFFER_OVERRUN\")) {\n                    throw error;\n                }\n\n                value = error;\n                value.baseType = coder.name;\n                value.name = coder.localName;\n                value.type = coder.type;\n            }\n        }\n\n        if (value == undefined) {\n            throw new Error(\"investigate\");\n        }\n\n        values.push(value);\n        keys.push(coder.localName || null);\n    });\n\n    return Result.fromItems(values, keys);\n}\n\n/**\n *  @_ignore\n */\nexport class ArrayCoder extends Coder {\n    readonly coder!: Coder;\n    readonly length!: number;\n\n    constructor(coder: Coder, length: number, localName: string) {\n        const type = (coder.type + \"[\" + (length >= 0 ? length: \"\") + \"]\");\n        const dynamic = (length === -1 || coder.dynamic);\n        super(\"array\", type, localName, dynamic);\n        defineProperties<ArrayCoder>(this, { coder, length });\n    }\n\n    defaultValue(): Array<any> {\n        // Verifies the child coder is valid (even if the array is dynamic or 0-length)\n        const defaultChild = this.coder.defaultValue();\n\n        const result: Array<any> = [];\n        for (let i = 0; i < this.length; i++) {\n            result.push(defaultChild);\n        }\n        return result;\n    }\n\n    encode(writer: Writer, _value: Array<any> | Typed): number {\n        const value = Typed.dereference(_value, \"array\");\n\n        if(!Array.isArray(value)) {\n            this._throwError(\"expected array value\", value);\n        }\n\n        let count = this.length;\n\n        if (count === -1) {\n            count = value.length;\n            writer.writeValue(value.length);\n        }\n\n        assertArgumentCount(value.length, count, \"coder array\" + (this.localName? (\" \"+ this.localName): \"\"));\n\n        let coders: Array<Coder> = [ ];\n        for (let i = 0; i < value.length; i++) { coders.push(this.coder); }\n\n        return pack(writer, coders, value);\n    }\n\n    decode(reader: Reader): any {\n        let count = this.length;\n        if (count === -1) {\n            count = reader.readIndex();\n\n            // Check that there is *roughly* enough data to ensure\n            // stray random data is not being read as a length. Each\n            // slot requires at least 32 bytes for their value (or 32\n            // bytes as a link to the data). This could use a much\n            // tighter bound, but we are erroring on the side of safety.\n            assert(count * WordSize <= reader.dataLength, \"insufficient data length\",\n                \"BUFFER_OVERRUN\", { buffer: reader.bytes, offset: count * WordSize, length: reader.dataLength });\n        }\n        let coders: Array<Coder> = [];\n        for (let i = 0; i < count; i++) { coders.push(new AnonymousCoder(this.coder)); }\n\n        return unpack(reader, coders);\n    }\n}\n\n","import { Typed } from \"../typed.js\";\nimport { Coder } from \"./abstract-coder.js\";\n\nimport type { Reader, Writer } from \"./abstract-coder.js\";\n\n/**\n *  @_ignore\n */\nexport class BooleanCoder extends Coder {\n\n    constructor(localName: string) {\n        super(\"bool\", \"bool\", localName, false);\n    }\n\n    defaultValue(): boolean {\n        return false;\n    }\n\n    encode(writer: Writer, _value: boolean | Typed): number {\n        const value = Typed.dereference(_value, \"bool\");\n        return writer.writeValue(value ? 1: 0);\n    }\n\n    decode(reader: Reader): any {\n        return !!reader.readValue();\n    }\n}\n","import { getBytesCopy, hexlify } from \"../../utils/index.js\";\n\nimport { Coder } from \"./abstract-coder.js\";\n\nimport type { Reader, Writer } from \"./abstract-coder.js\";\n\n\n/**\n *  @_ignore\n */\nexport class DynamicBytesCoder extends Coder {\n    constructor(type: string, localName: string) {\n       super(type, type, localName, true);\n    }\n\n    defaultValue(): string {\n        return \"0x\";\n    }\n\n    encode(writer: Writer, value: any): number {\n        value = getBytesCopy(value);\n        let length = writer.writeValue(value.length);\n        length += writer.writeBytes(value);\n        return length;\n    }\n\n    decode(reader: Reader): any {\n        return reader.readBytes(reader.readIndex(), true);\n    }\n}\n\n/**\n *  @_ignore\n */\nexport class BytesCoder extends DynamicBytesCoder {\n    constructor(localName: string) {\n        super(\"bytes\", localName);\n    }\n\n    decode(reader: Reader): any {\n        return hexlify(super.decode(reader));\n    }\n}\n","\nimport { defineProperties, getBytesCopy, hexlify } from \"../../utils/index.js\";\n\nimport { Typed } from \"../typed.js\";\nimport { Coder } from \"./abstract-coder.js\";\n\nimport type { BytesLike } from \"../../utils/index.js\";\n\nimport type { Reader, Writer } from \"./abstract-coder.js\";\n\n\n/**\n *  @_ignore\n */\nexport class FixedBytesCoder extends Coder {\n    readonly size!: number;\n\n    constructor(size: number, localName: string) {\n        let name = \"bytes\" + String(size);\n        super(name, name, localName, false);\n        defineProperties<FixedBytesCoder>(this, { size }, { size: \"number\" });\n    }\n\n    defaultValue(): string {\n        return (\"0x0000000000000000000000000000000000000000000000000000000000000000\").substring(0, 2 + this.size * 2);\n    }\n\n    encode(writer: Writer, _value: BytesLike | Typed): number {\n        let data = getBytesCopy(Typed.dereference(_value, this.type));\n        if (data.length !== this.size) { this._throwError(\"incorrect data length\", _value); }\n        return writer.writeBytes(data);\n    }\n\n    decode(reader: Reader): any {\n        return hexlify(reader.readBytes(this.size));\n    }\n}\n","import { Coder } from \"./abstract-coder.js\";\nimport type { Reader, Writer } from \"./abstract-coder.js\";\n\nconst Empty = new Uint8Array([ ]);\n\n/**\n *  @_ignore\n */\nexport class NullCoder extends Coder {\n\n    constructor(localName: string) {\n        super(\"null\", \"\", localName, false);\n    }\n\n    defaultValue(): null {\n        return null;\n    }\n\n    encode(writer: Writer, value: any): number {\n        if (value != null) { this._throwError(\"not null\", value); }\n        return writer.writeBytes(Empty);\n    }\n\n    decode(reader: Reader): any {\n        reader.readBytes(0);\n        return null;\n    }\n}\n","import {\n    defineProperties, fromTwos, getBigInt, mask, toTwos\n} from \"../../utils/index.js\";\n\nimport { Typed } from \"../typed.js\";\nimport { Coder, WordSize } from \"./abstract-coder.js\";\n\nimport type { BigNumberish } from \"../../utils/index.js\";\n\nimport type { Reader, Writer } from \"./abstract-coder.js\";\n\n\nconst BN_0 = BigInt(0);\nconst BN_1 = BigInt(1);\nconst BN_MAX_UINT256 = BigInt(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n\n/**\n *  @_ignore\n */\nexport class NumberCoder extends Coder {\n    readonly size!: number;\n    readonly signed!: boolean;\n\n    constructor(size: number, signed: boolean, localName: string) {\n        const name = ((signed ? \"int\": \"uint\") + (size * 8));\n        super(name, name, localName, false);\n\n        defineProperties<NumberCoder>(this, { size, signed }, { size: \"number\", signed: \"boolean\" });\n    }\n\n    defaultValue(): number {\n        return 0;\n    }\n\n    encode(writer: Writer, _value: BigNumberish | Typed): number {\n        let value = getBigInt(Typed.dereference(_value, this.type));\n\n        // Check bounds are safe for encoding\n        let maxUintValue = mask(BN_MAX_UINT256, WordSize * 8);\n        if (this.signed) {\n            let bounds = mask(maxUintValue, (this.size * 8) - 1);\n            if (value > bounds || value < -(bounds + BN_1)) {\n                this._throwError(\"value out-of-bounds\", _value);\n            }\n            value = toTwos(value, 8 * WordSize);\n        } else if (value < BN_0 || value > mask(maxUintValue, this.size * 8)) {\n            this._throwError(\"value out-of-bounds\", _value);\n        }\n\n        return writer.writeValue(value);\n    }\n\n    decode(reader: Reader): any {\n        let value = mask(reader.readValue(), this.size * 8);\n\n        if (this.signed) {\n            value = fromTwos(value, this.size * 8);\n        }\n\n        return value;\n    }\n}\n\n","/**\n *  Using strings in Ethereum (or any security-basd system) requires\n *  additional care. These utilities attempt to mitigate some of the\n *  safety issues as well as provide the ability to recover and analyse\n *  strings.\n *\n *  @_subsection api/utils:Strings and UTF-8  [about-strings]\n */\nimport { getBytes } from \"./data.js\";\nimport { assertArgument, assertNormalize } from \"./errors.js\";\n\nimport type { BytesLike } from \"./index.js\";\n\n\n///////////////////////////////\n\n/**\n *  The stanard normalization forms.\n */\nexport type UnicodeNormalizationForm = \"NFC\" | \"NFD\" | \"NFKC\" | \"NFKD\";\n\n/**\n *  When using the UTF-8 error API the following errors can be intercepted\n *  and processed as the %%reason%% passed to the [[Utf8ErrorFunc]].\n *\n *  **``\"UNEXPECTED_CONTINUE\"``** - a continuation byte was present where there\n *  was nothing to continue.\n *\n *  **``\"BAD_PREFIX\"``** - an invalid (non-continuation) byte to start a\n *  UTF-8 codepoint was found.\n *\n *  **``\"OVERRUN\"``** - the string is too short to process the expected\n *  codepoint length.\n *\n *  **``\"MISSING_CONTINUE\"``** - a missing continuation byte was expected but\n *  not found. The %%offset%% indicates the index the continuation byte\n *  was expected at.\n *\n *  **``\"OUT_OF_RANGE\"``** - the computed code point is outside the range\n *  for UTF-8. The %%badCodepoint%% indicates the computed codepoint, which was\n *  outside the valid UTF-8 range.\n *\n *  **``\"UTF16_SURROGATE\"``** - the UTF-8 strings contained a UTF-16 surrogate\n *  pair. The %%badCodepoint%% is the computed codepoint, which was inside the\n *  UTF-16 surrogate range.\n *\n *  **``\"OVERLONG\"``** - the string is an overlong representation. The\n *  %%badCodepoint%% indicates the computed codepoint, which has already\n *  been bounds checked.\n *\n *\n *  @returns string\n */\nexport type Utf8ErrorReason = \"UNEXPECTED_CONTINUE\" | \"BAD_PREFIX\" | \"OVERRUN\" |\n    \"MISSING_CONTINUE\" | \"OUT_OF_RANGE\" | \"UTF16_SURROGATE\" | \"OVERLONG\";\n\n\n/**\n *  A callback that can be used with [[toUtf8String]] to analysis or\n *  recovery from invalid UTF-8 data.\n *\n *  Parsing UTF-8 data is done through a simple Finite-State Machine (FSM)\n *  which calls the ``Utf8ErrorFunc`` if a fault is detected.\n *\n *  The %%reason%% indicates where in the FSM execution the fault\n *  occurred and the %%offset%% indicates where the input failed.\n *\n *  The %%bytes%% represents the raw UTF-8 data that was provided and\n *  %%output%% is the current array of UTF-8 code-points, which may\n *  be updated by the ``Utf8ErrorFunc``.\n *\n *  The value of the %%badCodepoint%% depends on the %%reason%%. See\n *  [[Utf8ErrorReason]] for details.\n *\n *  The function should return the number of bytes that should be skipped\n *  when control resumes to the FSM.\n */\nexport type Utf8ErrorFunc = (reason: Utf8ErrorReason, offset: number, bytes: Uint8Array, output: Array<number>, badCodepoint?: number) => number;\n\n\nfunction errorFunc(reason: Utf8ErrorReason, offset: number, bytes: Uint8Array, output: Array<number>, badCodepoint?: number): number {\n    assertArgument(false, `invalid codepoint at offset ${ offset }; ${ reason }`, \"bytes\", bytes);\n}\n\nfunction ignoreFunc(reason: Utf8ErrorReason, offset: number, bytes: Uint8Array, output: Array<number>, badCodepoint?: number): number {\n\n    // If there is an invalid prefix (including stray continuation), skip any additional continuation bytes\n    if (reason === \"BAD_PREFIX\" || reason === \"UNEXPECTED_CONTINUE\") {\n        let i = 0;\n        for (let o = offset + 1; o < bytes.length; o++) {\n            if (bytes[o] >> 6 !== 0x02) { break; }\n            i++;\n        }\n        return i;\n    }\n\n    // This byte runs us past the end of the string, so just jump to the end\n    // (but the first byte was read already read and therefore skipped)\n    if (reason === \"OVERRUN\") {\n        return bytes.length - offset - 1;\n    }\n\n    // Nothing to skip\n    return 0;\n}\n\nfunction replaceFunc(reason: Utf8ErrorReason, offset: number, bytes: Uint8Array, output: Array<number>, badCodepoint?: number): number {\n\n    // Overlong representations are otherwise \"valid\" code points; just non-deistingtished\n    if (reason === \"OVERLONG\") {\n        assertArgument(typeof(badCodepoint) === \"number\", \"invalid bad code point for replacement\", \"badCodepoint\", badCodepoint);\n        output.push(badCodepoint);\n        return 0;\n    }\n\n    // Put the replacement character into the output\n    output.push(0xfffd);\n\n    // Otherwise, process as if ignoring errors\n    return ignoreFunc(reason, offset, bytes, output, badCodepoint);\n}\n\n/**\n *  A handful of popular, built-in UTF-8 error handling strategies.\n *\n *  **``\"error\"``** - throws on ANY illegal UTF-8 sequence or\n *  non-canonical (overlong) codepoints (this is the default)\n *\n *  **``\"ignore\"``** - silently drops any illegal UTF-8 sequence\n *  and accepts non-canonical (overlong) codepoints\n *\n *  **``\"replace\"``** - replace any illegal UTF-8 sequence with the\n *  UTF-8 replacement character (i.e. ``\"\\\\ufffd\"``) and accepts\n *  non-canonical (overlong) codepoints\n *\n *  @returns: Record<\"error\" | \"ignore\" | \"replace\", Utf8ErrorFunc>\n */\nexport const Utf8ErrorFuncs: Readonly<Record<\"error\" | \"ignore\" | \"replace\", Utf8ErrorFunc>> = Object.freeze({\n    error: errorFunc,\n    ignore: ignoreFunc,\n    replace: replaceFunc\n});\n\n// http://stackoverflow.com/questions/13356493/decode-utf-8-with-javascript#13691499\nfunction getUtf8CodePoints(_bytes: BytesLike, onError?: Utf8ErrorFunc): Array<number> {\n    if (onError == null) { onError = Utf8ErrorFuncs.error; }\n\n    const bytes = getBytes(_bytes, \"bytes\");\n\n    const result: Array<number> = [];\n    let i = 0;\n\n    // Invalid bytes are ignored\n    while(i < bytes.length) {\n\n        const c = bytes[i++];\n\n        // 0xxx xxxx\n        if (c >> 7 === 0) {\n            result.push(c);\n            continue;\n        }\n\n        // Multibyte; how many bytes left for this character?\n        let extraLength: null | number = null;\n        let overlongMask: null | number = null;\n\n        // 110x xxxx 10xx xxxx\n        if ((c & 0xe0) === 0xc0) {\n            extraLength = 1;\n            overlongMask = 0x7f;\n\n        // 1110 xxxx 10xx xxxx 10xx xxxx\n        } else if ((c & 0xf0) === 0xe0) {\n            extraLength = 2;\n            overlongMask = 0x7ff;\n\n        // 1111 0xxx 10xx xxxx 10xx xxxx 10xx xxxx\n        } else if ((c & 0xf8) === 0xf0) {\n            extraLength = 3;\n            overlongMask = 0xffff;\n\n        } else {\n            if ((c & 0xc0) === 0x80) {\n                i += onError(\"UNEXPECTED_CONTINUE\", i - 1, bytes, result);\n            } else {\n                i += onError(\"BAD_PREFIX\", i - 1, bytes, result);\n            }\n            continue;\n        }\n\n        // Do we have enough bytes in our data?\n        if (i - 1 + extraLength >= bytes.length) {\n            i += onError(\"OVERRUN\", i - 1, bytes, result);\n            continue;\n        }\n\n        // Remove the length prefix from the char\n        let res: null | number = c & ((1 << (8 - extraLength - 1)) - 1);\n\n        for (let j = 0; j < extraLength; j++) {\n            let nextChar = bytes[i];\n\n            // Invalid continuation byte\n            if ((nextChar & 0xc0) != 0x80) {\n                i += onError(\"MISSING_CONTINUE\", i, bytes, result);\n                res = null;\n                break;\n            };\n\n            res = (res << 6) | (nextChar & 0x3f);\n            i++;\n        }\n\n        // See above loop for invalid continuation byte\n        if (res === null) { continue; }\n\n        // Maximum code point\n        if (res > 0x10ffff) {\n            i += onError(\"OUT_OF_RANGE\", i - 1 - extraLength, bytes, result, res);\n            continue;\n        }\n\n        // Reserved for UTF-16 surrogate halves\n        if (res >= 0xd800 && res <= 0xdfff) {\n            i += onError(\"UTF16_SURROGATE\", i - 1 - extraLength, bytes, result, res);\n            continue;\n        }\n\n        // Check for overlong sequences (more bytes than needed)\n        if (res <= overlongMask) {\n            i += onError(\"OVERLONG\", i - 1 - extraLength, bytes, result, res);\n            continue;\n        }\n\n        result.push(res);\n    }\n\n    return result;\n}\n\n// http://stackoverflow.com/questions/18729405/how-to-convert-utf8-string-to-byte-array\n\n/**\n *  Returns the UTF-8 byte representation of %%str%%.\n *\n *  If %%form%% is specified, the string is normalized.\n */\nexport function toUtf8Bytes(str: string, form?: UnicodeNormalizationForm): Uint8Array {\n    assertArgument(typeof(str) === \"string\", \"invalid string value\", \"str\", str);\n\n    if (form != null) {\n        assertNormalize(form);\n        str = str.normalize(form);\n    }\n\n    let result: Array<number> = [];\n    for (let i = 0; i < str.length; i++) {\n        const c = str.charCodeAt(i);\n\n        if (c < 0x80) {\n            result.push(c);\n\n        } else if (c < 0x800) {\n            result.push((c >> 6) | 0xc0);\n            result.push((c & 0x3f) | 0x80);\n\n        } else if ((c & 0xfc00) == 0xd800) {\n            i++;\n            const c2 = str.charCodeAt(i);\n\n            assertArgument(i < str.length && ((c2 & 0xfc00) === 0xdc00),\n                \"invalid surrogate pair\", \"str\", str);\n\n            // Surrogate Pair\n            const pair = 0x10000 + ((c & 0x03ff) << 10) + (c2 & 0x03ff);\n            result.push((pair >> 18) | 0xf0);\n            result.push(((pair >> 12) & 0x3f) | 0x80);\n            result.push(((pair >> 6) & 0x3f) | 0x80);\n            result.push((pair & 0x3f) | 0x80);\n\n        } else {\n            result.push((c >> 12) | 0xe0);\n            result.push(((c >> 6) & 0x3f) | 0x80);\n            result.push((c & 0x3f) | 0x80);\n        }\n    }\n\n    return new Uint8Array(result);\n};\n\n//export \nfunction _toUtf8String(codePoints: Array<number>): string {\n    return codePoints.map((codePoint) => {\n        if (codePoint <= 0xffff) {\n            return String.fromCharCode(codePoint);\n        }\n        codePoint -= 0x10000;\n        return String.fromCharCode(\n            (((codePoint >> 10) & 0x3ff) + 0xd800),\n            ((codePoint & 0x3ff) + 0xdc00)\n        );\n    }).join(\"\");\n}\n\n/**\n *  Returns the string represented by the UTF-8 data %%bytes%%.\n *\n *  When %%onError%% function is specified, it is called on UTF-8\n *  errors allowing recovery using the [[Utf8ErrorFunc]] API.\n *  (default: [error](Utf8ErrorFuncs))\n */\nexport function toUtf8String(bytes: BytesLike, onError?: Utf8ErrorFunc): string {\n    return _toUtf8String(getUtf8CodePoints(bytes, onError));\n}\n\n/**\n *  Returns the UTF-8 code-points for %%str%%.\n *\n *  If %%form%% is specified, the string is normalized.\n */\nexport function toUtf8CodePoints(str: string, form?: UnicodeNormalizationForm): Array<number> {\n    return getUtf8CodePoints(toUtf8Bytes(str, form));\n}\n\n","import { toUtf8Bytes, toUtf8String } from \"../../utils/utf8.js\";\n\nimport { Typed } from \"../typed.js\";\nimport { DynamicBytesCoder } from \"./bytes.js\";\n\nimport type { Reader, Writer } from \"./abstract-coder.js\";\n\n\n/**\n *  @_ignore\n */\nexport class StringCoder extends DynamicBytesCoder {\n\n    constructor(localName: string) {\n        super(\"string\", localName);\n    }\n\n    defaultValue(): string {\n        return \"\";\n    }\n\n    encode(writer: Writer, _value: string | Typed): number {\n        return super.encode(writer, toUtf8Bytes(Typed.dereference(_value, \"string\")));\n    }\n\n    decode(reader: Reader): any {\n        return toUtf8String(super.decode(reader));\n    }\n}\n","import { defineProperties } from \"../../utils/properties.js\";\n\nimport { Typed } from \"../typed.js\";\nimport { Coder } from \"./abstract-coder.js\";\n\nimport { pack, unpack } from \"./array.js\";\n\nimport type { Reader, Writer } from \"./abstract-coder.js\";\n\n/**\n *  @_ignore\n */\nexport class TupleCoder extends Coder {\n    readonly coders!: ReadonlyArray<Coder>;\n\n    constructor(coders: Array<Coder>, localName: string) {\n        let dynamic = false;\n        const types: Array<string> = [];\n        coders.forEach((coder) => {\n            if (coder.dynamic) { dynamic = true; }\n            types.push(coder.type);\n        });\n        const type = (\"tuple(\" + types.join(\",\") + \")\");\n\n        super(\"tuple\", type, localName, dynamic);\n        defineProperties<TupleCoder>(this, { coders: Object.freeze(coders.slice()) });\n    }\n\n    defaultValue(): any {\n        const values: any = [ ];\n        this.coders.forEach((coder) => {\n            values.push(coder.defaultValue());\n        });\n\n        // We only output named properties for uniquely named coders\n        const uniqueNames = this.coders.reduce((accum, coder) => {\n            const name = coder.localName;\n            if (name) {\n                if (!accum[name]) { accum[name] = 0; }\n                accum[name]++;\n            }\n            return accum;\n        }, <{ [ name: string ]: number }>{ });\n\n        // Add named values\n        this.coders.forEach((coder: Coder, index: number) => {\n            let name = coder.localName;\n            if (!name || uniqueNames[name] !== 1) { return; }\n\n            if (name === \"length\") { name = \"_length\"; }\n\n            if (values[name] != null) { return; }\n\n            values[name] = values[index];\n        });\n\n        return Object.freeze(values);\n    }\n\n    encode(writer: Writer, _value: Array<any> | { [ name: string ]: any } | Typed): number {\n        const value = Typed.dereference(_value, \"tuple\");\n        return pack(writer, this.coders, value);\n    }\n\n    decode(reader: Reader): any {\n        return unpack(reader, this.coders);\n    }\n}\n\n","import { keccak256 } from \"../crypto/index.js\";\nimport { toUtf8Bytes } from \"../utils/index.js\";\n\n/**\n *  A simple hashing function which operates on UTF-8 strings to\n *  compute an 32-byte identifier.\n *\n *  This simply computes the [UTF-8 bytes](toUtf8Bytes) and computes\n *  the [[keccak256]].\n *\n *  @example:\n *    id(\"hello world\")\n *    //_result:\n */\nexport function id(value: string): string {\n    return keccak256(toUtf8Bytes(value));\n}\n","/**\n *  A fragment is a single item from an ABI, which may represent any of:\n *\n *  - [Functions](FunctionFragment)\n *  - [Events](EventFragment)\n *  - [Constructors](ConstructorFragment)\n *  - Custom [Errors](ErrorFragment)\n *  - [Fallback or Receive](FallbackFragment) functions\n *\n *  @_subsection api/abi/abi-coder:Fragments  [about-fragments]\n */\n\nimport {\n    defineProperties, getBigInt, getNumber,\n    assert, assertPrivate, assertArgument\n} from \"../utils/index.js\";\nimport { id } from \"../hash/index.js\";\n\n/**\n *  A Type description in a [JSON ABI format](link-solc-jsonabi).\n */\nexport interface JsonFragmentType {\n    /**\n     *  The parameter name.\n     */\n    readonly name?: string;\n\n    /**\n     *  If the parameter is indexed.\n     */\n    readonly indexed?: boolean;\n\n    /**\n     *  The type of the parameter.\n     */\n    readonly type?: string;\n\n    /**\n     *  The internal Solidity type.\n     */\n    readonly internalType?: string;\n\n    /**\n     *  The components for a tuple.\n     */\n    readonly components?: ReadonlyArray<JsonFragmentType>;\n}\n\n/**\n *  A fragment for a method, event or error in a [JSON ABI format](link-solc-jsonabi).\n */\nexport interface JsonFragment {\n    /**\n     *  The name of the error, event, function, etc.\n     */\n    readonly name?: string;\n\n    /**\n     *  The type of the fragment (e.g. ``event``, ``\"function\"``, etc.)\n     */\n    readonly type?: string;\n\n    /**\n     *  If the event is anonymous.\n     */\n    readonly anonymous?: boolean;\n\n    /**\n     *  If the function is payable.\n     */\n    readonly payable?: boolean;\n\n    /**\n     *  If the function is constant.\n     */\n    readonly constant?: boolean;\n\n    /**\n     *  The mutability state of the function.\n     */\n    readonly stateMutability?: string;\n\n    /**\n     *  The input parameters.\n     */\n    readonly inputs?: ReadonlyArray<JsonFragmentType>;\n\n    /**\n     *  The output parameters.\n     */\n    readonly outputs?: ReadonlyArray<JsonFragmentType>;\n\n    /**\n     *  The gas limit to use when sending a transaction for this function.\n     */\n    readonly gas?: string;\n};\n\n/**\n *  The format to serialize the output as.\n *\n *  **``\"sighash\"``** - the bare formatting, used to compute the selector\n *  or topic hash; this format cannot be reversed (as it discards ``indexed``)\n *  so cannot by used to export an [[Interface]].\n *\n *  **``\"minimal\"``** - Human-Readable ABI with minimal spacing and without\n *  names, so it is compact, but will result in Result objects that cannot\n *  be accessed by name.\n *\n *  **``\"full\"``** - Full Human-Readable ABI, with readable spacing and names\n *  intact; this is generally the recommended format.\n *\n *  **``\"json\"``** - The [JSON ABI format](link-solc-jsonabi).\n */\nexport type FormatType = \"sighash\" | \"minimal\" | \"full\" | \"json\";\n\n// [ \"a\", \"b\" ] => { \"a\": 1, \"b\": 1 }\nfunction setify(items: Array<string>): ReadonlySet<string> {\n    const result: Set<string> = new Set();\n    items.forEach((k) => result.add(k));\n    return Object.freeze(result);\n}\n\nconst _kwVisibDeploy = \"external public payable override\";\nconst KwVisibDeploy = setify(_kwVisibDeploy.split(\" \"));\n\n// Visibility Keywords\nconst _kwVisib = \"constant external internal payable private public pure view override\";\nconst KwVisib = setify(_kwVisib.split(\" \"));\n\nconst _kwTypes = \"constructor error event fallback function receive struct\";\nconst KwTypes = setify(_kwTypes.split(\" \"));\n\nconst _kwModifiers = \"calldata memory storage payable indexed\";\nconst KwModifiers = setify(_kwModifiers.split(\" \"));\n\nconst _kwOther = \"tuple returns\";\n\n// All Keywords\nconst _keywords = [ _kwTypes, _kwModifiers, _kwOther, _kwVisib ].join(\" \");\nconst Keywords = setify(_keywords.split(\" \"));\n\n// Single character tokens\nconst SimpleTokens: Record<string, string> = {\n  \"(\": \"OPEN_PAREN\", \")\": \"CLOSE_PAREN\",\n  \"[\": \"OPEN_BRACKET\", \"]\": \"CLOSE_BRACKET\",\n  \",\": \"COMMA\", \"@\": \"AT\"\n};\n\n// Parser regexes to consume the next token\nconst regexWhitespacePrefix = new RegExp(\"^(\\\\s*)\");\nconst regexNumberPrefix = new RegExp(\"^([0-9]+)\");\nconst regexIdPrefix = new RegExp(\"^([a-zA-Z$_][a-zA-Z0-9$_]*)\");\n\n// Parser regexs to check validity\nconst regexId = new RegExp(\"^([a-zA-Z$_][a-zA-Z0-9$_]*)$\");\nconst regexType = new RegExp(\"^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$\");\n\n/**\n *  @ignore:\n */\ntype Token = Readonly<{\n    // Type of token (e.g. TYPE, KEYWORD, NUMBER, etc)\n    type: string;\n\n    // Offset into the original source code\n    offset: number;\n\n    // Actual text content of the token\n    text: string;\n\n    // The parenthesis depth\n    depth: number;\n\n    // If a parenthesis, the offset (in tokens) that balances it\n    match: number;\n\n    // For parenthesis and commas, the offset (in tokens) to the\n    // previous/next parenthesis or comma in the list\n    linkBack: number;\n    linkNext: number;\n\n    // If a BRACKET, the value inside\n    value: number;\n}>;\n\nclass TokenString {\n    #offset: number;\n    #tokens: ReadonlyArray<Token>;\n\n    get offset(): number { return this.#offset; }\n    get length(): number { return this.#tokens.length - this.#offset; }\n\n    constructor(tokens: ReadonlyArray<Token>) {\n        this.#offset = 0;\n        this.#tokens = tokens.slice();\n    }\n\n    clone(): TokenString { return new TokenString(this.#tokens); }\n    reset(): void { this.#offset = 0; }\n\n    #subTokenString(from: number = 0, to: number = 0): TokenString {\n        return new TokenString(this.#tokens.slice(from, to).map((t) => {\n            return Object.freeze(Object.assign({ }, t, {\n                match: (t.match - from),\n                linkBack: (t.linkBack - from),\n                linkNext: (t.linkNext - from),\n            }));\n        }));\n    }\n\n    // Pops and returns the value of the next token, if it is a keyword in allowed; throws if out of tokens\n    popKeyword(allowed: ReadonlySet<string>): string {\n        const top = this.peek();\n        if (top.type !== \"KEYWORD\" || !allowed.has(top.text)) { throw new Error(`expected keyword ${ top.text }`); }\n        return this.pop().text;\n    }\n\n    // Pops and returns the value of the next token if it is `type`; throws if out of tokens\n    popType(type: string): string {\n        if (this.peek().type !== type) {\n            const top = this.peek();\n            throw new Error(`expected ${ type }; got ${ top.type } ${ JSON.stringify(top.text) }`);\n        }\n        return this.pop().text;\n    }\n\n    // Pops and returns a \"(\" TOKENS \")\"\n    popParen(): TokenString {\n        const top = this.peek();\n        if (top.type !== \"OPEN_PAREN\") { throw new Error(\"bad start\"); }\n        const result = this.#subTokenString(this.#offset + 1, top.match + 1);\n        this.#offset = top.match + 1;\n        return result;\n    }\n\n    // Pops and returns the items within \"(\" ITEM1 \",\" ITEM2 \",\" ... \")\"\n    popParams(): Array<TokenString> {\n        const top = this.peek();\n\n        if (top.type !== \"OPEN_PAREN\") { throw new Error(\"bad start\"); }\n\n        const result: Array<TokenString> = [ ];\n\n        while(this.#offset < top.match - 1) {\n            const link = this.peek().linkNext;\n            result.push(this.#subTokenString(this.#offset + 1, link));\n            this.#offset = link;\n        }\n\n        this.#offset = top.match + 1;\n\n        return result;\n    }\n\n    // Returns the top Token, throwing if out of tokens\n    peek(): Token {\n        if (this.#offset >= this.#tokens.length) {\n            throw new Error(\"out-of-bounds\");\n        }\n        return this.#tokens[this.#offset];\n    }\n\n    // Returns the next value, if it is a keyword in `allowed`\n    peekKeyword(allowed: ReadonlySet<string>): null | string {\n        const top = this.peekType(\"KEYWORD\");\n        return (top != null && allowed.has(top)) ? top: null;\n    }\n\n    // Returns the value of the next token if it is `type`\n    peekType(type: string): null | string {\n        if (this.length === 0) { return null; }\n        const top = this.peek();\n        return (top.type === type) ? top.text: null;\n    }\n\n    // Returns the next token; throws if out of tokens\n    pop(): Token {\n        const result = this.peek();\n        this.#offset++;\n        return result;\n    }\n\n    toString(): string {\n        const tokens: Array<string> = [ ];\n        for (let i = this.#offset; i < this.#tokens.length; i++) {\n            const token = this.#tokens[i];\n            tokens.push(`${ token.type }:${ token.text }`);\n        }\n        return `<TokenString ${ tokens.join(\" \") }>`\n    }\n}\n\ntype Writeable<T> = { -readonly [P in keyof T]: T[P] };\n\nfunction lex(text: string): TokenString {\n    const tokens: Array<Token> = [ ];\n\n    const throwError = (message: string) => {\n        const token = (offset < text.length) ? JSON.stringify(text[offset]): \"$EOI\";\n        throw new Error(`invalid token ${ token } at ${ offset }: ${ message }`);\n    };\n\n    let brackets: Array<number> = [ ];\n    let commas: Array<number> = [ ];\n\n    let offset = 0;\n    while (offset < text.length) {\n\n        // Strip off any leading whitespace\n        let cur = text.substring(offset);\n        let match = cur.match(regexWhitespacePrefix);\n        if (match) {\n            offset += match[1].length;\n            cur = text.substring(offset);\n        }\n\n        const token = { depth: brackets.length, linkBack: -1, linkNext: -1, match: -1, type: \"\", text: \"\", offset, value: -1 };\n        tokens.push(token);\n\n        let type = (SimpleTokens[cur[0]] || \"\");\n        if (type) {\n            token.type = type;\n            token.text = cur[0];\n            offset++;\n\n            if (type === \"OPEN_PAREN\") {\n                brackets.push(tokens.length - 1);\n                commas.push(tokens.length - 1);\n\n            } else if (type == \"CLOSE_PAREN\") {\n                if (brackets.length === 0) { throwError(\"no matching open bracket\"); }\n\n                token.match = brackets.pop() as number;\n                (<Writeable<Token>>(tokens[token.match])).match = tokens.length - 1;\n                token.depth--;\n\n                token.linkBack = commas.pop() as number;\n                (<Writeable<Token>>(tokens[token.linkBack])).linkNext = tokens.length - 1;\n\n            } else if (type === \"COMMA\") {\n                token.linkBack = commas.pop() as number;\n                (<Writeable<Token>>(tokens[token.linkBack])).linkNext = tokens.length - 1;\n                commas.push(tokens.length - 1);\n\n            } else if (type === \"OPEN_BRACKET\") {\n                token.type = \"BRACKET\";\n\n            } else if (type === \"CLOSE_BRACKET\") {\n                // Remove the CLOSE_BRACKET\n                let suffix = (tokens.pop() as Token).text;\n                if (tokens.length > 0 && tokens[tokens.length - 1].type === \"NUMBER\") {\n                    const value = (tokens.pop() as Token).text;\n                    suffix = value + suffix;\n                    (<Writeable<Token>>(tokens[tokens.length - 1])).value = getNumber(value);\n                }\n                if (tokens.length === 0 || tokens[tokens.length - 1].type !== \"BRACKET\") {\n                    throw new Error(\"missing opening bracket\");\n                }\n                (<Writeable<Token>>(tokens[tokens.length - 1])).text += suffix;\n            }\n\n            continue;\n        }\n\n        match = cur.match(regexIdPrefix);\n        if (match) {\n            token.text = match[1];\n            offset += token.text.length;\n\n            if (Keywords.has(token.text)) {\n                token.type = \"KEYWORD\";\n                continue;\n            }\n\n            if (token.text.match(regexType)) {\n                token.type = \"TYPE\";\n                continue;\n            }\n\n            token.type = \"ID\";\n            continue;\n        }\n\n        match = cur.match(regexNumberPrefix);\n        if (match) {\n            token.text = match[1];\n            token.type = \"NUMBER\";\n            offset += token.text.length;\n            continue;\n        }\n\n        throw new Error(`unexpected token ${ JSON.stringify(cur[0]) } at position ${ offset }`);\n    }\n\n    return new TokenString(tokens.map((t) => Object.freeze(t)));\n}\n\n// Check only one of `allowed` is in `set`\nfunction allowSingle(set: ReadonlySet<string>, allowed: ReadonlySet<string>): void {\n    let included: Array<string> = [ ];\n    for (const key in allowed.keys()) {\n        if (set.has(key)) { included.push(key); }\n    }\n    if (included.length > 1) { throw new Error(`conflicting types: ${ included.join(\", \") }`); }\n}\n\n// Functions to process a Solidity Signature TokenString from left-to-right for...\n\n// ...the name with an optional type, returning the name\nfunction consumeName(type: string, tokens: TokenString): string {\n    if (tokens.peekKeyword(KwTypes)) {\n        const keyword = tokens.pop().text;\n        if (keyword !== type) {\n            throw new Error(`expected ${ type }, got ${ keyword }`);\n        }\n    }\n\n    return tokens.popType(\"ID\");\n}\n\n// ...all keywords matching allowed, returning the keywords\nfunction consumeKeywords(tokens: TokenString, allowed?: ReadonlySet<string>): ReadonlySet<string> {\n    const keywords: Set<string> = new Set();\n    while (true) {\n        const keyword = tokens.peekType(\"KEYWORD\");\n\n        if (keyword == null || (allowed && !allowed.has(keyword))) { break; }\n        tokens.pop();\n\n        if (keywords.has(keyword)) { throw new Error(`duplicate keywords: ${ JSON.stringify(keyword) }`); }\n        keywords.add(keyword);\n    }\n\n    return Object.freeze(keywords);\n}\n\n// ...all visibility keywords, returning the coalesced mutability\nfunction consumeMutability(tokens: TokenString): \"payable\" | \"nonpayable\" | \"view\" | \"pure\" {\n    let modifiers = consumeKeywords(tokens, KwVisib);\n\n    // Detect conflicting modifiers\n    allowSingle(modifiers, setify(\"constant payable nonpayable\".split(\" \")));\n    allowSingle(modifiers, setify(\"pure view payable nonpayable\".split(\" \")));\n\n    // Process mutability states\n    if (modifiers.has(\"view\")) { return \"view\"; }\n    if (modifiers.has(\"pure\")) { return \"pure\"; }\n    if (modifiers.has(\"payable\")) { return \"payable\"; }\n    if (modifiers.has(\"nonpayable\")) { return \"nonpayable\"; }\n\n    // Process legacy `constant` last\n    if (modifiers.has(\"constant\")) { return \"view\"; }\n\n    return \"nonpayable\";\n}\n\n// ...a parameter list, returning the ParamType list\nfunction consumeParams(tokens: TokenString, allowIndexed?: boolean): Array<ParamType> {\n    return tokens.popParams().map((t) => ParamType.from(t, allowIndexed));\n}\n\n// ...a gas limit, returning a BigNumber or null if none\nfunction consumeGas(tokens: TokenString): null | bigint {\n    if (tokens.peekType(\"AT\")) {\n        tokens.pop();\n        if (tokens.peekType(\"NUMBER\")) {\n            return getBigInt(tokens.pop().text);\n        }\n        throw new Error(\"invalid gas\");\n    }\n    return null;\n}\n\nfunction consumeEoi(tokens: TokenString): void {\n    if (tokens.length) {\n        throw new Error(`unexpected tokens at offset ${ tokens.offset }: ${ tokens.toString() }`);\n    }\n}\n\nconst regexArrayType = new RegExp(/^(.*)\\[([0-9]*)\\]$/);\n\nfunction verifyBasicType(type: string): string {\n    const match = type.match(regexType);\n    assertArgument(match, \"invalid type\", \"type\", type);\n    if (type === \"uint\") { return \"uint256\"; }\n    if (type === \"int\") { return \"int256\"; }\n\n    if (match[2]) {\n        // bytesXX\n        const length = parseInt(match[2]);\n        assertArgument(length !== 0 && length <= 32, \"invalid bytes length\", \"type\", type);\n\n    } else if (match[3]) {\n        // intXX or uintXX\n        const size = parseInt(match[3] as string);\n        assertArgument(size !== 0 && size <= 256 && (size % 8) === 0, \"invalid numeric width\", \"type\", type);\n    }\n\n    return type;\n}\n\n// Make the Fragment constructors effectively private\nconst _guard = { };\n\n\n/**\n *  When [walking](ParamType-walk) a [[ParamType]], this is called\n *  on each component.\n */\nexport type ParamTypeWalkFunc = (type: string, value: any) => any;\n\n/**\n *  When [walking asynchronously](ParamType-walkAsync) a [[ParamType]],\n *  this is called on each component.\n */\nexport type ParamTypeWalkAsyncFunc = (type: string, value: any) => any | Promise<any>;\n\nconst internal = Symbol.for(\"_ethers_internal\");\n\nconst ParamTypeInternal = \"_ParamTypeInternal\";\nconst ErrorFragmentInternal = \"_ErrorInternal\";\nconst EventFragmentInternal = \"_EventInternal\";\nconst ConstructorFragmentInternal = \"_ConstructorInternal\";\nconst FallbackFragmentInternal = \"_FallbackInternal\";\nconst FunctionFragmentInternal = \"_FunctionInternal\";\nconst StructFragmentInternal = \"_StructInternal\";\n\n/**\n *  Each input and output of a [[Fragment]] is an Array of **ParamType**.\n */\nexport class ParamType {\n\n    /**\n     *  The local name of the parameter (or ``\"\"`` if unbound)\n     */\n    readonly name!: string;\n\n    /**\n     *  The fully qualified type (e.g. ``\"address\"``, ``\"tuple(address)\"``,\n     *  ``\"uint256[3][]\"``)\n     */\n    readonly type!: string;\n\n    /**\n     *  The base type (e.g. ``\"address\"``, ``\"tuple\"``, ``\"array\"``)\n     */\n    readonly baseType!: string;\n\n    /**\n     *  True if the parameters is indexed.\n     *\n     *  For non-indexable types this is ``null``.\n     */\n    readonly indexed!: null | boolean;\n\n    /**\n     *  The components for the tuple.\n     *\n     *  For non-tuple types this is ``null``.\n     */\n    readonly components!: null | ReadonlyArray<ParamType>;\n\n    /**\n     *  The array length, or ``-1`` for dynamic-lengthed arrays.\n     *\n     *  For non-array types this is ``null``.\n     */\n    readonly arrayLength!: null | number;\n\n    /**\n     *  The type of each child in the array.\n     *\n     *  For non-array types this is ``null``.\n     */\n    readonly arrayChildren!: null | ParamType;\n\n\n    /**\n     *  @private\n     */\n    constructor(guard: any, name: string, type: string, baseType: string, indexed: null | boolean, components: null | ReadonlyArray<ParamType>, arrayLength: null | number, arrayChildren: null | ParamType) {\n        assertPrivate(guard, _guard, \"ParamType\");\n        Object.defineProperty(this, internal, { value: ParamTypeInternal });\n\n        if (components) { components = Object.freeze(components.slice()); }\n\n        if (baseType === \"array\") {\n            if (arrayLength == null || arrayChildren == null) {\n                throw new Error(\"\");\n            }\n        } else if (arrayLength != null || arrayChildren != null) {\n            throw new Error(\"\");\n        }\n\n        if (baseType === \"tuple\") {\n            if (components == null) { throw new Error(\"\"); }\n        } else if (components != null) {\n            throw new Error(\"\");\n        }\n\n        defineProperties<ParamType>(this, {\n            name, type, baseType, indexed, components, arrayLength, arrayChildren\n        });\n    }\n\n    /**\n     *  Return a string representation of this type.\n     *\n     *  For example,\n     *\n     *  ``sighash\" => \"(uint256,address)\"``\n     *\n     *  ``\"minimal\" => \"tuple(uint256,address) indexed\"``\n     *\n     *  ``\"full\" => \"tuple(uint256 foo, address bar) indexed baz\"``\n     */\n    format(format?: FormatType): string {\n        if (format == null) { format = \"sighash\"; }\n        if (format === \"json\") {\n            const name = this.name || \"\";\n\n            if (this.isArray()) {\n                const result = JSON.parse(this.arrayChildren.format(\"json\"));\n                result.name = name;\n                result.type += `[${ (this.arrayLength < 0 ? \"\": String(this.arrayLength)) }]`;\n                return JSON.stringify(result);\n            }\n\n            const result: any = {\n                type: ((this.baseType === \"tuple\") ? \"tuple\": this.type),\n                name\n            };\n\n\n            if (typeof(this.indexed) === \"boolean\") { result.indexed = this.indexed; }\n            if (this.isTuple()) {\n                result.components = this.components.map((c) => JSON.parse(c.format(format)));\n            }\n            return JSON.stringify(result);\n        }\n\n        let result = \"\";\n\n        // Array\n        if (this.isArray()) {\n            result += this.arrayChildren.format(format);\n            result += `[${ (this.arrayLength < 0 ? \"\": String(this.arrayLength)) }]`;\n        } else {\n            if (this.isTuple()) {\n                result += \"(\" + this.components.map(\n                    (comp) => comp.format(format)\n                ).join((format === \"full\") ? \", \": \",\") + \")\";\n            } else {\n                result += this.type;\n            }\n        }\n\n        if (format !== \"sighash\") {\n            if (this.indexed === true) { result += \" indexed\"; }\n            if (format === \"full\" && this.name) {\n                result += \" \" + this.name;\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     *  Returns true if %%this%% is an Array type.\n     *\n     *  This provides a type gaurd ensuring that [[arrayChildren]]\n     *  and [[arrayLength]] are non-null.\n     */\n    isArray(): this is (ParamType & { arrayChildren: ParamType, arrayLength: number }) {\n        return (this.baseType === \"array\")\n    }\n\n    /**\n     *  Returns true if %%this%% is a Tuple type.\n     *\n     *  This provides a type gaurd ensuring that [[components]]\n     *  is non-null.\n     */\n    isTuple(): this is (ParamType & { components: ReadonlyArray<ParamType> }) {\n        return (this.baseType === \"tuple\");\n    }\n\n    /**\n     *  Returns true if %%this%% is an Indexable type.\n     *\n     *  This provides a type gaurd ensuring that [[indexed]]\n     *  is non-null.\n     */\n    isIndexable(): this is (ParamType & { indexed: boolean }) {\n        return (this.indexed != null);\n    }\n\n    /**\n     *  Walks the **ParamType** with %%value%%, calling %%process%%\n     *  on each type, destructing the %%value%% recursively.\n     */\n    walk(value: any, process: ParamTypeWalkFunc): any {\n        if (this.isArray()) {\n            if (!Array.isArray(value)) { throw new Error(\"invalid array value\"); }\n            if (this.arrayLength !== -1 && value.length !== this.arrayLength) {\n                throw new Error(\"array is wrong length\");\n            }\n            const _this = this;\n            return value.map((v) => (_this.arrayChildren.walk(v, process)));\n        }\n\n        if (this.isTuple()) {\n            if (!Array.isArray(value)) { throw new Error(\"invalid tuple value\"); }\n            if (value.length !== this.components.length) {\n                throw new Error(\"array is wrong length\");\n            }\n            const _this = this;\n            return value.map((v, i) => (_this.components[i].walk(v, process)));\n        }\n\n        return process(this.type, value);\n    }\n\n    #walkAsync(promises: Array<Promise<void>>, value: any, process: ParamTypeWalkAsyncFunc, setValue: (value: any) => void): void {\n\n        if (this.isArray()) {\n            if (!Array.isArray(value)) { throw new Error(\"invalid array value\"); }\n            if (this.arrayLength !== -1 && value.length !== this.arrayLength) {\n                throw new Error(\"array is wrong length\");\n            }\n            const childType = this.arrayChildren;\n\n            const result = value.slice();\n            result.forEach((value, index) => {\n                childType.#walkAsync(promises, value, process, (value: any) => {\n                    result[index] = value;\n                });\n            });\n            setValue(result);\n            return;\n        }\n\n        if (this.isTuple()) {\n            const components = this.components;\n\n            // Convert the object into an array\n            let result: Array<any>;\n            if (Array.isArray(value)) {\n                result = value.slice();\n\n            } else {\n                if (value == null || typeof(value) !== \"object\") {\n                    throw new Error(\"invalid tuple value\");\n                }\n\n                result = components.map((param) => {\n                    if (!param.name) { throw new Error(\"cannot use object value with unnamed components\"); }\n                    if (!(param.name in value)) {\n                        throw new Error(`missing value for component ${ param.name }`);\n                    }\n                    return value[param.name];\n                });\n            }\n\n            if (result.length !== this.components.length) {\n                throw new Error(\"array is wrong length\");\n            }\n\n            result.forEach((value, index) => {\n                components[index].#walkAsync(promises, value, process, (value: any) => {\n                    result[index] = value;\n                });\n            });\n            setValue(result);\n            return;\n        }\n\n        const result = process(this.type, value);\n        if (result.then) {\n            promises.push((async function() { setValue(await result); })());\n        } else {\n            setValue(result);\n        }\n    }\n\n    /**\n     *  Walks the **ParamType** with %%value%%, asynchronously calling\n     *  %%process%% on each type, destructing the %%value%% recursively.\n     *\n     *  This can be used to resolve ENS names by walking and resolving each\n     *  ``\"address\"`` type.\n     */\n    async walkAsync(value: any, process: ParamTypeWalkAsyncFunc): Promise<any> {\n        const promises: Array<Promise<void>> = [ ];\n        const result: [ any ] = [ value ];\n        this.#walkAsync(promises, value, process, (value: any) => {\n            result[0] = value;\n        });\n        if (promises.length) { await Promise.all(promises); }\n        return result[0];\n    }\n\n    /**\n     *  Creates a new **ParamType** for %%obj%%.\n     *\n     *  If %%allowIndexed%% then the ``indexed`` keyword is permitted,\n     *  otherwise the ``indexed`` keyword will throw an error.\n     */\n    static from(obj: any, allowIndexed?: boolean): ParamType {\n        if (ParamType.isParamType(obj)) { return obj; }\n\n        if (typeof(obj) === \"string\") {\n            try {\n                return ParamType.from(lex(obj), allowIndexed);\n            } catch (error) {\n                assertArgument(false, \"invalid param type\", \"obj\", obj);\n            }\n\n        } else if (obj instanceof TokenString) {\n            let type = \"\", baseType = \"\";\n            let comps: null | Array<ParamType> = null;\n\n            if (consumeKeywords(obj, setify([ \"tuple\" ])).has(\"tuple\") || obj.peekType(\"OPEN_PAREN\")) {\n                // Tuple\n                baseType = \"tuple\";\n                comps = obj.popParams().map((t) => ParamType.from(t));\n                type = `tuple(${ comps.map((c) => c.format()).join(\",\") })`;\n            } else {\n                // Normal\n                type = verifyBasicType(obj.popType(\"TYPE\"));\n                baseType = type;\n            }\n\n            // Check for Array\n            let arrayChildren: null | ParamType  = null;\n            let arrayLength: null | number = null;\n\n            while (obj.length && obj.peekType(\"BRACKET\")) {\n                const bracket = obj.pop(); //arrays[i];\n                arrayChildren = new ParamType(_guard, \"\", type, baseType, null, comps, arrayLength, arrayChildren);\n                arrayLength = bracket.value;\n                type += bracket.text;\n                baseType = \"array\";\n                comps = null;\n            }\n\n            let indexed: null | boolean = null;\n            const keywords = consumeKeywords(obj, KwModifiers);\n            if (keywords.has(\"indexed\")) {\n                if (!allowIndexed) { throw new Error(\"\"); }\n                indexed = true;\n            }\n\n            const name = (obj.peekType(\"ID\") ? obj.pop().text: \"\");\n\n            if (obj.length) { throw new Error(\"leftover tokens\"); }\n\n            return new ParamType(_guard, name, type, baseType, indexed, comps, arrayLength, arrayChildren);\n        }\n\n        const name = obj.name;\n        assertArgument(!name || (typeof(name) === \"string\" && name.match(regexId)),\n            \"invalid name\", \"obj.name\", name);\n\n        let indexed = obj.indexed;\n        if (indexed != null) {\n            assertArgument(allowIndexed, \"parameter cannot be indexed\", \"obj.indexed\", obj.indexed);\n            indexed = !!indexed;\n        }\n\n        let type = obj.type;\n\n        let arrayMatch = type.match(regexArrayType);\n        if (arrayMatch) {\n            const arrayLength = parseInt(arrayMatch[2] || \"-1\");\n            const arrayChildren = ParamType.from({\n                type: arrayMatch[1],\n                components: obj.components\n            });\n\n            return new ParamType(_guard, name || \"\", type, \"array\", indexed, null, arrayLength, arrayChildren);\n        }\n\n        if (type === \"tuple\" || type.startsWith(\"tuple(\"/* fix: ) */) || type.startsWith(\"(\" /* fix: ) */)) {\n            const comps = (obj.components != null) ? obj.components.map((c: any) => ParamType.from(c)): null;\n            const tuple = new ParamType(_guard, name || \"\", type, \"tuple\", indexed, comps, null, null);\n            // @TODO: use lexer to validate and normalize type\n            return tuple;\n        }\n\n        type = verifyBasicType(obj.type);\n\n        return new ParamType(_guard, name || \"\", type, type, indexed, null, null, null);\n    }\n\n    /**\n     *  Returns true if %%value%% is a **ParamType**.\n     */\n    static isParamType(value: any): value is ParamType {\n        return (value && value[internal] === ParamTypeInternal);\n    }\n}\n\n/**\n *  The type of a [[Fragment]].\n */\nexport type FragmentType = \"constructor\" | \"error\" | \"event\" | \"fallback\" | \"function\" | \"struct\";\n\n/**\n *  An abstract class to represent An individual fragment from a parse ABI.\n */\nexport abstract class Fragment {\n    /**\n     *  The type of the fragment.\n     */\n    readonly type!: FragmentType;\n\n    /**\n     *  The inputs for the fragment.\n     */\n    readonly inputs!: ReadonlyArray<ParamType>;\n\n    /**\n     *  @private\n     */\n    constructor(guard: any, type: FragmentType, inputs: ReadonlyArray<ParamType>) {\n        assertPrivate(guard, _guard, \"Fragment\");\n        inputs = Object.freeze(inputs.slice());\n        defineProperties<Fragment>(this, { type, inputs });\n    }\n\n    /**\n     *  Returns a string representation of this fragment as %%format%%.\n     */\n    abstract format(format?: FormatType): string;\n\n    /**\n     *  Creates a new **Fragment** for %%obj%%, wich can be any supported\n     *  ABI frgament type.\n     */\n    static from(obj: any): Fragment {\n        if (typeof(obj) === \"string\") {\n\n            // Try parsing JSON...\n            try {\n                Fragment.from(JSON.parse(obj));\n            } catch (e) { }\n\n            // ...otherwise, use the human-readable lexer\n            return Fragment.from(lex(obj));\n        }\n\n        if (obj instanceof TokenString) {\n            // Human-readable ABI (already lexed)\n\n            const type = obj.peekKeyword(KwTypes);\n\n            switch (type) {\n                case \"constructor\": return ConstructorFragment.from(obj);\n                case \"error\": return ErrorFragment.from(obj);\n                case \"event\": return EventFragment.from(obj);\n                case \"fallback\": case \"receive\":\n                    return FallbackFragment.from(obj);\n                case \"function\": return FunctionFragment.from(obj);\n                case \"struct\": return StructFragment.from(obj);\n            }\n\n        } else if (typeof(obj) === \"object\") {\n            // JSON ABI\n\n            switch (obj.type) {\n                case \"constructor\": return ConstructorFragment.from(obj);\n                case \"error\": return ErrorFragment.from(obj);\n                case \"event\": return EventFragment.from(obj);\n                case \"fallback\": case \"receive\":\n                    return FallbackFragment.from(obj);\n                case \"function\": return FunctionFragment.from(obj);\n                case \"struct\": return StructFragment.from(obj);\n            }\n\n            assert(false, `unsupported type: ${ obj.type }`, \"UNSUPPORTED_OPERATION\", {\n                operation: \"Fragment.from\"\n            });\n        }\n\n        assertArgument(false, \"unsupported frgament object\", \"obj\", obj);\n    }\n\n    /**\n     *  Returns true if %%value%% is a [[ConstructorFragment]].\n     */\n    static isConstructor(value: any): value is ConstructorFragment {\n        return ConstructorFragment.isFragment(value);\n    }\n\n    /**\n     *  Returns true if %%value%% is an [[ErrorFragment]].\n     */\n    static isError(value: any): value is ErrorFragment {\n        return ErrorFragment.isFragment(value);\n    }\n\n    /**\n     *  Returns true if %%value%% is an [[EventFragment]].\n     */\n    static isEvent(value: any): value is EventFragment {\n        return EventFragment.isFragment(value);\n    }\n\n    /**\n     *  Returns true if %%value%% is a [[FunctionFragment]].\n     */\n    static isFunction(value: any): value is FunctionFragment {\n        return FunctionFragment.isFragment(value);\n    }\n\n    /**\n     *  Returns true if %%value%% is a [[StructFragment]].\n     */\n    static isStruct(value: any): value is StructFragment {\n        return StructFragment.isFragment(value);\n    }\n}\n\n/**\n *  An abstract class to represent An individual fragment\n *  which has a name from a parse ABI.\n */\nexport abstract class NamedFragment extends Fragment {\n    /**\n     *  The name of the fragment.\n     */\n    readonly name!: string;\n\n    /**\n     *  @private\n     */\n    constructor(guard: any, type: FragmentType, name: string, inputs: ReadonlyArray<ParamType>) {\n        super(guard, type, inputs);\n        assertArgument(typeof(name) === \"string\" && name.match(regexId),\n            \"invalid identifier\", \"name\", name);\n        inputs = Object.freeze(inputs.slice());\n        defineProperties<NamedFragment>(this, { name });\n    }\n}\n\nfunction joinParams(format: FormatType, params: ReadonlyArray<ParamType>): string { \n    return \"(\" + params.map((p) => p.format(format)).join((format === \"full\") ? \", \": \",\") + \")\";\n}\n\n/**\n *  A Fragment which represents a //Custom Error//.\n */\nexport class ErrorFragment extends NamedFragment {\n    /**\n     *  @private\n     */\n    constructor(guard: any, name: string, inputs: ReadonlyArray<ParamType>) {\n        super(guard, \"error\", name, inputs);\n        Object.defineProperty(this, internal, { value: ErrorFragmentInternal });\n    }\n\n    /**\n     *  The Custom Error selector.\n     */\n    get selector(): string {\n        return id(this.format(\"sighash\")).substring(0, 10);\n    }\n\n    /**\n     *  Returns a string representation of this fragment as %%format%%.\n     */\n    format(format?: FormatType): string {\n        if (format == null) { format = \"sighash\"; }\n        if (format === \"json\") {\n            return JSON.stringify({\n                type: \"error\",\n                name: this.name,\n                inputs: this.inputs.map((input) => JSON.parse(input.format(format))),\n            });\n        }\n\n        const result: Array<string> = [ ];\n        if (format !== \"sighash\") { result.push(\"error\"); }\n        result.push(this.name + joinParams(format, this.inputs));\n        return result.join(\" \");\n    }\n\n    /**\n     *  Returns a new **ErrorFragment** for %%obj%%.\n     */\n    static from(obj: any): ErrorFragment {\n        if (ErrorFragment.isFragment(obj)) { return obj; }\n\n        if (typeof(obj) === \"string\") {\n            return ErrorFragment.from(lex(obj));\n\n        } else if (obj instanceof TokenString) {\n            const name = consumeName(\"error\", obj);\n            const inputs = consumeParams(obj);\n            consumeEoi(obj);\n\n            return new ErrorFragment(_guard, name, inputs);\n        }\n\n        return new ErrorFragment(_guard, obj.name,\n            obj.inputs ? obj.inputs.map(ParamType.from): [ ]);\n    }\n\n    /**\n     *  Returns ``true`` and provides a type guard if %%value%% is an\n     *  **ErrorFragment**.\n     */\n    static isFragment(value: any): value is ErrorFragment {\n        return (value && value[internal] === ErrorFragmentInternal);\n    }\n}\n\n/**\n *  A Fragment which represents an Event.\n */\nexport class EventFragment extends NamedFragment {\n    /**\n     *  Whether this event is anonymous.\n     */\n    readonly anonymous!: boolean;\n\n    /**\n     *  @private\n     */\n    constructor(guard: any, name: string, inputs: ReadonlyArray<ParamType>, anonymous: boolean) {\n        super(guard, \"event\", name, inputs);\n        Object.defineProperty(this, internal, { value: EventFragmentInternal });\n        defineProperties<EventFragment>(this, { anonymous });\n    }\n\n    /**\n     *  The Event topic hash.\n     */\n    get topicHash(): string {\n        return id(this.format(\"sighash\"));\n    }\n\n    /**\n     *  Returns a string representation of this event as %%format%%.\n     */\n    format(format?: FormatType): string {\n        if (format == null) { format = \"sighash\"; }\n        if (format === \"json\") {\n            return JSON.stringify({\n                type: \"event\",\n                anonymous: this.anonymous,\n                name: this.name,\n                inputs: this.inputs.map((i) => JSON.parse(i.format(format)))\n            });\n        }\n\n        const result: Array<string> = [ ];\n        if (format !== \"sighash\") { result.push(\"event\"); }\n        result.push(this.name + joinParams(format, this.inputs));\n        if (format !== \"sighash\" && this.anonymous) { result.push(\"anonymous\"); }\n        return result.join(\" \");\n    }\n\n    /**\n     *  Return the topic hash for an event with %%name%% and %%params%%.\n     */\n    static getTopicHash(name: string, params?: Array<any>): string {\n        params = (params || []).map((p) => ParamType.from(p));\n        const fragment = new EventFragment(_guard, name, params, false);\n        return fragment.topicHash;\n    }\n\n    /**\n     *  Returns a new **EventFragment** for %%obj%%.\n     */\n    static from(obj: any): EventFragment {\n        if (EventFragment.isFragment(obj)) { return obj; }\n\n        if (typeof(obj) === \"string\") {\n            try {\n                return EventFragment.from(lex(obj));\n            } catch (error) {\n                assertArgument(false, \"invalid event fragment\", \"obj\", obj);\n            }\n\n        } else if (obj instanceof TokenString) {\n            const name = consumeName(\"event\", obj);\n            const inputs = consumeParams(obj, true);\n            const anonymous = !!consumeKeywords(obj, setify([ \"anonymous\" ])).has(\"anonymous\");\n            consumeEoi(obj);\n\n            return new EventFragment(_guard, name, inputs, anonymous);\n        }\n\n        return new EventFragment(_guard, obj.name,\n            obj.inputs ? obj.inputs.map((p: any) => ParamType.from(p, true)): [ ], !!obj.anonymous);\n    }\n\n    /**\n     *  Returns ``true`` and provides a type guard if %%value%% is an\n     *  **EventFragment**.\n     */\n    static isFragment(value: any): value is EventFragment {\n        return (value && value[internal] === EventFragmentInternal);\n    }\n}\n\n/**\n *  A Fragment which represents a constructor.\n */\nexport class ConstructorFragment extends Fragment {\n\n    /**\n     *  Whether the constructor can receive an endowment.\n     */\n    readonly payable!: boolean;\n\n    /**\n     *  The recommended gas limit for deployment or ``null``.\n     */\n    readonly gas!: null | bigint;\n\n    /**\n     *  @private\n     */\n    constructor(guard: any, type: FragmentType, inputs: ReadonlyArray<ParamType>, payable: boolean, gas: null | bigint) {\n        super(guard, type, inputs);\n        Object.defineProperty(this, internal, { value: ConstructorFragmentInternal });\n        defineProperties<ConstructorFragment>(this, { payable, gas });\n    }\n\n    /**\n     *  Returns a string representation of this constructor as %%format%%.\n     */\n    format(format?: FormatType): string {\n        assert(format != null && format !== \"sighash\", \"cannot format a constructor for sighash\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"format(sighash)\" });\n\n        if (format === \"json\") {\n            return JSON.stringify({\n                type: \"constructor\",\n                stateMutability: (this.payable ? \"payable\": \"undefined\"),\n                payable: this.payable,\n                gas: ((this.gas != null) ? this.gas: undefined),\n                inputs: this.inputs.map((i) => JSON.parse(i.format(format)))\n            });\n        }\n\n        const result = [ `constructor${ joinParams(format, this.inputs) }` ];\n        if (this.payable) { result.push(\"payable\"); }\n        if (this.gas != null) { result.push(`@${ this.gas.toString() }`); }\n        return result.join(\" \");\n    }\n\n    /**\n     *  Returns a new **ConstructorFragment** for %%obj%%.\n     */\n    static from(obj: any): ConstructorFragment {\n        if (ConstructorFragment.isFragment(obj)) { return obj; }\n\n        if (typeof(obj) === \"string\") {\n            try {\n                return ConstructorFragment.from(lex(obj));\n            } catch (error) {\n                assertArgument(false, \"invalid constuctor fragment\", \"obj\", obj);\n            }\n\n        } else if (obj instanceof TokenString) {\n            consumeKeywords(obj, setify([ \"constructor\" ]));\n            const inputs = consumeParams(obj);\n            const payable = !!consumeKeywords(obj, KwVisibDeploy).has(\"payable\");\n            const gas = consumeGas(obj);\n            consumeEoi(obj);\n\n            return new ConstructorFragment(_guard, \"constructor\", inputs, payable, gas);\n        }\n\n        return new ConstructorFragment(_guard, \"constructor\",\n            obj.inputs ? obj.inputs.map(ParamType.from): [ ],\n            !!obj.payable, (obj.gas != null) ? obj.gas: null);\n    }\n\n    /**\n     *  Returns ``true`` and provides a type guard if %%value%% is a\n     *  **ConstructorFragment**.\n     */\n    static isFragment(value: any): value is ConstructorFragment {\n        return (value && value[internal] === ConstructorFragmentInternal);\n    }\n}\n\n/**\n *  A Fragment which represents a method.\n */\nexport class FallbackFragment extends Fragment {\n\n    /**\n     *  If the function can be sent value during invocation.\n     */\n    readonly payable!: boolean;\n\n    constructor(guard: any, inputs: ReadonlyArray<ParamType>, payable: boolean) {\n        super(guard, \"fallback\", inputs);\n        Object.defineProperty(this, internal, { value: FallbackFragmentInternal });\n        defineProperties<FallbackFragment>(this, { payable });\n    }\n\n    /**\n     *  Returns a string representation of this fallback as %%format%%.\n     */\n    format(format?: FormatType): string {\n        const type = ((this.inputs.length === 0) ? \"receive\": \"fallback\");\n\n        if (format === \"json\") {\n            const stateMutability = (this.payable ? \"payable\": \"nonpayable\");\n            return JSON.stringify({ type, stateMutability });\n        }\n\n        return `${ type }()${ this.payable ? \" payable\": \"\" }`;\n    }\n\n    /**\n     *  Returns a new **FallbackFragment** for %%obj%%.\n     */\n    static from(obj: any): FallbackFragment {\n        if (FallbackFragment.isFragment(obj)) { return obj; }\n\n        if (typeof(obj) === \"string\") {\n            try {\n                return FallbackFragment.from(lex(obj));\n            } catch (error) {\n                assertArgument(false, \"invalid fallback fragment\", \"obj\", obj);\n            }\n\n        } else if (obj instanceof TokenString) {\n            const errorObj = obj.toString();\n\n            const topIsValid = obj.peekKeyword(setify([ \"fallback\", \"receive\" ]));\n            assertArgument(topIsValid, \"type must be fallback or receive\", \"obj\", errorObj);\n\n            const type = obj.popKeyword(setify([ \"fallback\", \"receive\" ]));\n\n            // receive()\n            if (type === \"receive\") {\n                const inputs = consumeParams(obj);\n                assertArgument(inputs.length === 0, `receive cannot have arguments`, \"obj.inputs\", inputs);\n                consumeKeywords(obj, setify([ \"payable\" ]));\n                consumeEoi(obj);\n                return new FallbackFragment(_guard, [ ], true);\n            }\n\n            // fallback() [payable]\n            // fallback(bytes) [payable] returns (bytes)\n            let inputs = consumeParams(obj);\n            if (inputs.length) {\n                assertArgument(inputs.length === 1 && inputs[0].type === \"bytes\",\n                    \"invalid fallback inputs\", \"obj.inputs\",\n                    inputs.map((i) => i.format(\"minimal\")).join(\", \"));\n            } else {\n                inputs = [ ParamType.from(\"bytes\") ];\n            }\n\n            const mutability = consumeMutability(obj);\n            assertArgument(mutability === \"nonpayable\" || mutability === \"payable\", \"fallback cannot be constants\", \"obj.stateMutability\", mutability);\n\n            if (consumeKeywords(obj, setify([ \"returns\" ])).has(\"returns\")) {\n                const outputs = consumeParams(obj);\n                assertArgument(outputs.length === 1 && outputs[0].type === \"bytes\",\n                    \"invalid fallback outputs\", \"obj.outputs\",\n                    outputs.map((i) => i.format(\"minimal\")).join(\", \"));\n            }\n\n            consumeEoi(obj);\n\n            return new FallbackFragment(_guard, inputs, mutability === \"payable\");\n        }\n\n        if (obj.type === \"receive\") {\n            return new FallbackFragment(_guard, [ ], true);\n        }\n\n        if (obj.type === \"fallback\") {\n            const inputs = [ ParamType.from(\"bytes\") ];\n            const payable = (obj.stateMutability === \"payable\");\n            return new FallbackFragment(_guard, inputs, payable);\n        }\n\n        assertArgument(false, \"invalid fallback description\", \"obj\", obj);\n    }\n\n    /**\n     *  Returns ``true`` and provides a type guard if %%value%% is a\n     *  **FallbackFragment**.\n     */\n    static isFragment(value: any): value is FallbackFragment {\n        return (value && value[internal] === FallbackFragmentInternal);\n    }\n}\n\n\n/**\n *  A Fragment which represents a method.\n */\nexport class FunctionFragment extends NamedFragment {\n    /**\n     *  If the function is constant (e.g. ``pure`` or ``view`` functions).\n     */\n    readonly constant!: boolean;\n\n    /**\n     *  The returned types for the result of calling this function.\n     */\n    readonly outputs!: ReadonlyArray<ParamType>;\n\n    /**\n     *  The state mutability (e.g. ``payable``, ``nonpayable``, ``view``\n     *  or ``pure``)\n     */\n    readonly stateMutability!: \"payable\" | \"nonpayable\" | \"view\" | \"pure\";\n\n    /**\n     *  If the function can be sent value during invocation.\n     */\n    readonly payable!: boolean;\n\n    /**\n     *  The recommended gas limit to send when calling this function.\n     */\n    readonly gas!: null | bigint;\n\n    /**\n     *  @private\n     */\n    constructor(guard: any, name: string, stateMutability: \"payable\" | \"nonpayable\" | \"view\" | \"pure\", inputs: ReadonlyArray<ParamType>, outputs: ReadonlyArray<ParamType>, gas: null | bigint) {\n        super(guard, \"function\", name, inputs);\n        Object.defineProperty(this, internal, { value: FunctionFragmentInternal });\n        outputs = Object.freeze(outputs.slice());\n        const constant = (stateMutability === \"view\" || stateMutability === \"pure\");\n        const payable = (stateMutability === \"payable\");\n        defineProperties<FunctionFragment>(this, { constant, gas, outputs, payable, stateMutability });\n    }\n\n    /**\n     *  The Function selector.\n     */\n    get selector(): string {\n        return id(this.format(\"sighash\")).substring(0, 10);\n    }\n\n    /**\n     *  Returns a string representation of this function as %%format%%.\n     */\n    format(format?: FormatType): string {\n        if (format == null) { format = \"sighash\"; }\n        if (format === \"json\") {\n            return JSON.stringify({\n                type: \"function\",\n                name: this.name,\n                constant: this.constant,\n                stateMutability: ((this.stateMutability !== \"nonpayable\") ? this.stateMutability: undefined),\n                payable: this.payable,\n                gas: ((this.gas != null) ? this.gas: undefined),\n                inputs: this.inputs.map((i) => JSON.parse(i.format(format))),\n                outputs: this.outputs.map((o) => JSON.parse(o.format(format))),\n            });\n        }\n\n        const result: Array<string> = [];\n\n        if (format !== \"sighash\") { result.push(\"function\"); }\n\n        result.push(this.name + joinParams(format, this.inputs));\n\n        if (format !== \"sighash\") {\n            if (this.stateMutability !== \"nonpayable\") {\n                result.push(this.stateMutability);\n            }\n\n            if (this.outputs && this.outputs.length) {\n                result.push(\"returns\");\n                result.push(joinParams(format, this.outputs));\n            }\n\n            if (this.gas != null) { result.push(`@${ this.gas.toString() }`); }\n        }\n        return result.join(\" \");\n    }\n\n    /**\n     *  Return the selector for a function with %%name%% and %%params%%.\n     */\n    static getSelector(name: string, params?: Array<any>): string {\n        params = (params || []).map((p) => ParamType.from(p));\n        const fragment = new FunctionFragment(_guard, name, \"view\", params, [ ], null);\n        return fragment.selector;\n    }\n\n    /**\n     *  Returns a new **FunctionFragment** for %%obj%%.\n     */\n    static from(obj: any): FunctionFragment {\n        if (FunctionFragment.isFragment(obj)) { return obj; }\n\n        if (typeof(obj) === \"string\") {\n            try {\n                return FunctionFragment.from(lex(obj));\n            } catch (error) {\n                assertArgument(false, \"invalid function fragment\", \"obj\", obj);\n            }\n\n        } else if (obj instanceof TokenString) {\n            const name = consumeName(\"function\", obj);\n            const inputs = consumeParams(obj);\n            const mutability = consumeMutability(obj);\n\n            let outputs: Array<ParamType> = [ ];\n            if (consumeKeywords(obj, setify([ \"returns\" ])).has(\"returns\")) {\n                outputs = consumeParams(obj);\n            }\n\n            const gas = consumeGas(obj);\n\n            consumeEoi(obj);\n\n            return new FunctionFragment(_guard, name, mutability, inputs, outputs, gas);\n        }\n\n        let stateMutability = obj.stateMutability;\n\n        // Use legacy Solidity ABI logic if stateMutability is missing\n        if (stateMutability == null) {\n            stateMutability = \"payable\";\n\n            if (typeof(obj.constant) === \"boolean\") {\n                stateMutability = \"view\";\n                if (!obj.constant) {\n                    stateMutability = \"payable\"\n                    if (typeof(obj.payable) === \"boolean\" && !obj.payable) {\n                        stateMutability = \"nonpayable\";\n                    }\n                }\n            } else if (typeof(obj.payable) === \"boolean\" && !obj.payable) {\n                stateMutability = \"nonpayable\";\n            }\n        }\n\n        // @TODO: verifyState for stateMutability (e.g. throw if\n        //        payable: false but stateMutability is \"nonpayable\")\n\n        return new FunctionFragment(_guard, obj.name, stateMutability,\n             obj.inputs ? obj.inputs.map(ParamType.from): [ ],\n             obj.outputs ? obj.outputs.map(ParamType.from): [ ],\n             (obj.gas != null) ? obj.gas: null);\n    }\n\n    /**\n     *  Returns ``true`` and provides a type guard if %%value%% is a\n     *  **FunctionFragment**.\n     */\n    static isFragment(value: any): value is FunctionFragment {\n        return (value && value[internal] === FunctionFragmentInternal);\n    }\n}\n\n/**\n *  A Fragment which represents a structure.\n */\nexport class StructFragment extends NamedFragment {\n\n    /**\n     *  @private\n     */\n    constructor(guard: any, name: string, inputs: ReadonlyArray<ParamType>) {\n        super(guard, \"struct\", name, inputs);\n        Object.defineProperty(this, internal, { value: StructFragmentInternal });\n    }\n\n    /**\n     *  Returns a string representation of this struct as %%format%%.\n     */\n    format(): string {\n        throw new Error(\"@TODO\");\n    }\n\n    /**\n     *  Returns a new **StructFragment** for %%obj%%.\n     */\n    static from(obj: any): StructFragment {\n        if (typeof(obj) === \"string\") {\n            try {\n                return StructFragment.from(lex(obj));\n            } catch (error) {\n                assertArgument(false, \"invalid struct fragment\", \"obj\", obj);\n            }\n\n        } else if (obj instanceof TokenString) {\n            const name = consumeName(\"struct\", obj);\n            const inputs = consumeParams(obj);\n            consumeEoi(obj);\n            return new StructFragment(_guard, name, inputs);\n        }\n\n        return new StructFragment(_guard, obj.name, obj.inputs ? obj.inputs.map(ParamType.from): [ ]);\n    }\n\n// @TODO: fix this return type\n    /**\n     *  Returns ``true`` and provides a type guard if %%value%% is a\n     *  **StructFragment**.\n     */\n    static isFragment(value: any): value is FunctionFragment {\n        return (value && value[internal] === StructFragmentInternal);\n    }\n}\n\n","/**\n *  When sending values to or receiving values from a [[Contract]], the\n *  data is generally encoded using the [ABI standard](link-solc-abi).\n *\n *  The AbiCoder provides a utility to encode values to ABI data and\n *  decode values from ABI data.\n *\n *  Most of the time, developers should favour the [[Contract]] class,\n *  which further abstracts a lot of the finer details of ABI data.\n *\n *  @_section api/abi/abi-coder:ABI Encoding\n */\n\n// See: https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI\n\nimport { assertArgumentCount, assertArgument } from \"../utils/index.js\";\n\nimport { Coder, Reader, Result, Writer } from \"./coders/abstract-coder.js\";\nimport { AddressCoder } from \"./coders/address.js\";\nimport { ArrayCoder } from \"./coders/array.js\";\nimport { BooleanCoder } from \"./coders/boolean.js\";\nimport { BytesCoder } from \"./coders/bytes.js\";\nimport { FixedBytesCoder } from \"./coders/fixed-bytes.js\";\nimport { NullCoder } from \"./coders/null.js\";\nimport { NumberCoder } from \"./coders/number.js\";\nimport { StringCoder } from \"./coders/string.js\";\nimport { TupleCoder } from \"./coders/tuple.js\";\nimport { ParamType } from \"./fragments.js\";\n\nimport { getAddress } from \"../address/index.js\";\nimport { getBytes, hexlify, makeError } from \"../utils/index.js\";\n\nimport type {\n    BytesLike,\n    CallExceptionAction, CallExceptionError, CallExceptionTransaction\n} from \"../utils/index.js\";\n\n// https://docs.soliditylang.org/en/v0.8.17/control-structures.html\nconst PanicReasons: Map<number, string> = new Map();\nPanicReasons.set(0x00, \"GENERIC_PANIC\");\nPanicReasons.set(0x01, \"ASSERT_FALSE\");\nPanicReasons.set(0x11, \"OVERFLOW\");\nPanicReasons.set(0x12, \"DIVIDE_BY_ZERO\");\nPanicReasons.set(0x21, \"ENUM_RANGE_ERROR\");\nPanicReasons.set(0x22, \"BAD_STORAGE_DATA\");\nPanicReasons.set(0x31, \"STACK_UNDERFLOW\");\nPanicReasons.set(0x32, \"ARRAY_RANGE_ERROR\");\nPanicReasons.set(0x41, \"OUT_OF_MEMORY\");\nPanicReasons.set(0x51, \"UNINITIALIZED_FUNCTION_CALL\");\n\nconst paramTypeBytes = new RegExp(/^bytes([0-9]*)$/);\nconst paramTypeNumber = new RegExp(/^(u?int)([0-9]*)$/);\n\n\nlet defaultCoder: null | AbiCoder = null;\nlet defaultMaxInflation = 1024;\n\nfunction getBuiltinCallException(action: CallExceptionAction, tx: { to?: null | string, from?: null | string, data?: string }, data: null | BytesLike, abiCoder: AbiCoder): CallExceptionError {\n    let message = \"missing revert data\";\n\n    let reason: null | string = null;\n    const invocation = null;\n    let revert: null | { signature: string, name: string, args: Array<any> } = null;\n\n    if (data) {\n        message = \"execution reverted\";\n\n        const bytes = getBytes(data);\n        data = hexlify(data);\n\n        if (bytes.length === 0) {\n            message += \" (no data present; likely require(false) occurred\";\n            reason = \"require(false)\";\n\n        } else if (bytes.length % 32 !== 4) {\n            message += \" (could not decode reason; invalid data length)\";\n\n        } else if (hexlify(bytes.slice(0, 4)) === \"0x08c379a0\") {\n            // Error(string)\n            try {\n                reason = abiCoder.decode([ \"string\" ], bytes.slice(4))[0]\n                revert = {\n                    signature: \"Error(string)\",\n                    name: \"Error\",\n                    args: [ reason ]\n                };\n                message += `: ${ JSON.stringify(reason) }`;\n\n            } catch (error) {\n                message += \" (could not decode reason; invalid string data)\";\n            }\n\n        } else if (hexlify(bytes.slice(0, 4)) === \"0x4e487b71\") {\n            // Panic(uint256)\n            try {\n                const code = Number(abiCoder.decode([ \"uint256\" ], bytes.slice(4))[0]);\n                revert = {\n                    signature: \"Panic(uint256)\",\n                    name: \"Panic\",\n                    args: [ code ]\n                };\n                reason = `Panic due to ${ PanicReasons.get(code) || \"UNKNOWN\" }(${ code })`;\n                message += `: ${ reason }`;\n            } catch (error) {\n                message += \" (could not decode panic code)\";\n            }\n        } else {\n            message += \" (unknown custom error)\";\n        }\n    }\n\n    const transaction: CallExceptionTransaction = {\n        to: (tx.to ? getAddress(tx.to): null),\n        data: (tx.data || \"0x\")\n    };\n    if (tx.from) { transaction.from = getAddress(tx.from); }\n\n    return makeError(message, \"CALL_EXCEPTION\", {\n        action, data, reason, transaction, invocation, revert\n    });\n}\n\n/**\n *  The **AbiCoder** is a low-level class responsible for encoding JavaScript\n *  values into binary data and decoding binary data into JavaScript values.\n */\nexport class AbiCoder {\n\n    #getCoder(param: ParamType): Coder {\n        if (param.isArray()) {\n            return new ArrayCoder(this.#getCoder(param.arrayChildren), param.arrayLength, param.name);\n        }\n\n        if (param.isTuple()) {\n            return new TupleCoder(param.components.map((c) => this.#getCoder(c)), param.name);\n        }\n\n        switch (param.baseType) {\n            case \"address\":\n                return new AddressCoder(param.name);\n            case \"bool\":\n                return new BooleanCoder(param.name);\n            case \"string\":\n                return new StringCoder(param.name);\n            case \"bytes\":\n                return new BytesCoder(param.name);\n            case \"\":\n                return new NullCoder(param.name);\n        }\n\n        // u?int[0-9]*\n        let match = param.type.match(paramTypeNumber);\n        if (match) {\n            let size = parseInt(match[2] || \"256\");\n            assertArgument(size !== 0 && size <= 256 && (size % 8) === 0,\n                \"invalid \" + match[1] + \" bit length\", \"param\", param);\n            return new NumberCoder(size / 8, (match[1] === \"int\"), param.name);\n        }\n\n        // bytes[0-9]+\n        match = param.type.match(paramTypeBytes);\n        if (match) {\n            let size = parseInt(match[1]);\n            assertArgument(size !== 0 && size <= 32, \"invalid bytes length\", \"param\", param);\n            return new FixedBytesCoder(size, param.name);\n        }\n\n        assertArgument(false, \"invalid type\", \"type\", param.type);\n    }\n\n    /**\n     *  Get the default values for the given %%types%%.\n     *\n     *  For example, a ``uint`` is by default ``0`` and ``bool``\n     *  is by default ``false``.\n     */\n    getDefaultValue(types: ReadonlyArray<string | ParamType>): Result {\n        const coders: Array<Coder> = types.map((type) => this.#getCoder(ParamType.from(type)));\n        const coder = new TupleCoder(coders, \"_\");\n        return coder.defaultValue();\n    }\n\n    /**\n     *  Encode the %%values%% as the %%types%% into ABI data.\n     *\n     *  @returns DataHexstring\n     */\n    encode(types: ReadonlyArray<string | ParamType>, values: ReadonlyArray<any>): string {\n        assertArgumentCount(values.length, types.length, \"types/values length mismatch\");\n\n        const coders = types.map((type) => this.#getCoder(ParamType.from(type)));\n        const coder = (new TupleCoder(coders, \"_\"));\n\n        const writer = new Writer();\n        coder.encode(writer, values);\n        return writer.data;\n    }\n\n    /**\n     *  Decode the ABI %%data%% as the %%types%% into values.\n     *\n     *  If %%loose%% decoding is enabled, then strict padding is\n     *  not enforced. Some older versions of Solidity incorrectly\n     *  padded event data emitted from ``external`` functions.\n     */\n    decode(types: ReadonlyArray<string | ParamType>, data: BytesLike, loose?: boolean): Result {\n        const coders: Array<Coder> = types.map((type) => this.#getCoder(ParamType.from(type)));\n        const coder = new TupleCoder(coders, \"_\");\n        return coder.decode(new Reader(data, loose, defaultMaxInflation));\n    }\n\n    static _setDefaultMaxInflation(value: number): void {\n        assertArgument(typeof(value) === \"number\" && Number.isInteger(value), \"invalid defaultMaxInflation factor\", \"value\", value);\n        defaultMaxInflation = value;\n    }\n\n    /**\n     *  Returns the shared singleton instance of a default [[AbiCoder]].\n     *\n     *  On the first call, the instance is created internally.\n     */\n    static defaultAbiCoder(): AbiCoder {\n        if (defaultCoder == null) {\n            defaultCoder = new AbiCoder();\n        }\n        return defaultCoder;\n    }\n\n    /**\n     *  Returns an ethers-compatible [[CallExceptionError]] Error for the given\n     *  result %%data%% for the [[CallExceptionAction]] %%action%% against\n     *  the Transaction %%tx%%.\n     */\n    static getBuiltinCallException(action: CallExceptionAction, tx: { to?: null | string, from?: null | string, data?: string }, data: null | BytesLike): CallExceptionError {\n        return getBuiltinCallException(action, tx, data, AbiCoder.defaultAbiCoder());\n    }\n}\n","import { assert, assertArgument } from \"../utils/index.js\";\n\nimport { getAddress } from \"./address.js\";\n\nimport type { Addressable, AddressLike, NameResolver } from \"./index.js\";\n\n\n/**\n *  Returns true if %%value%% is an object which implements the\n *  [[Addressable]] interface.\n *\n *  @example:\n *    // Wallets and AbstractSigner sub-classes\n *    isAddressable(Wallet.createRandom())\n *    //_result:\n *\n *    // Contracts\n *    contract = new Contract(\"dai.tokens.ethers.eth\", [ ], provider)\n *    isAddressable(contract)\n *    //_result:\n */\nexport function isAddressable(value: any): value is Addressable {\n    return (value && typeof(value.getAddress) === \"function\");\n}\n\n/**\n *  Returns true if %%value%% is a valid address.\n *\n *  @example:\n *    // Valid address\n *    isAddress(\"0x8ba1f109551bD432803012645Ac136ddd64DBA72\")\n *    //_result:\n *\n *    // Valid ICAP address\n *    isAddress(\"XE65GB6LDNXYOFTX0NSV3FUWKOWIXAMJK36\")\n *    //_result:\n *\n *    // Invalid checksum\n *    isAddress(\"0x8Ba1f109551bD432803012645Ac136ddd64DBa72\")\n *    //_result:\n *\n *    // Invalid ICAP checksum\n *    isAddress(\"0x8Ba1f109551bD432803012645Ac136ddd64DBA72\")\n *    //_result:\n *\n *    // Not an address (an ENS name requires a provided and an\n *    // asynchronous API to access)\n *    isAddress(\"ricmoo.eth\")\n *    //_result:\n */\nexport function isAddress(value: any): value is string {\n    try {\n        getAddress(value);\n        return true;\n    } catch (error) { }\n    return false;\n}\n\nasync function checkAddress(target: any, promise: Promise<null | string>): Promise<string> {\n    const result = await promise;\n    if (result == null || result === \"0x0000000000000000000000000000000000000000\") {\n        assert(typeof(target) !== \"string\", \"unconfigured name\", \"UNCONFIGURED_NAME\", { value: target });\n        assertArgument(false, \"invalid AddressLike value; did not resolve to a value address\", \"target\", target);\n    }\n    return getAddress(result);\n}\n\n/**\n *  Resolves to an address for the %%target%%, which may be any\n *  supported address type, an [[Addressable]] or a Promise which\n *  resolves to an address.\n *\n *  If an ENS name is provided, but that name has not been correctly\n *  configured a [[UnconfiguredNameError]] is thrown.\n *\n *  @example:\n *    addr = \"0x6B175474E89094C44Da98b954EedeAC495271d0F\"\n *\n *    // Addresses are return synchronously\n *    resolveAddress(addr, provider)\n *    //_result:\n *\n *    // Address promises are resolved asynchronously\n *    resolveAddress(Promise.resolve(addr))\n *    //_result:\n *\n *    // ENS names are resolved asynchronously\n *    resolveAddress(\"dai.tokens.ethers.eth\", provider)\n *    //_result:\n *\n *    // Addressable objects are resolved asynchronously\n *    contract = new Contract(addr, [ ])\n *    resolveAddress(contract, provider)\n *    //_result:\n *\n *    // Unconfigured ENS names reject\n *    resolveAddress(\"nothing-here.ricmoo.eth\", provider)\n *    //_error:\n *\n *    // ENS names require a NameResolver object passed in\n *    // (notice the provider was omitted)\n *    resolveAddress(\"nothing-here.ricmoo.eth\")\n *    //_error:\n */\nexport function resolveAddress(target: AddressLike, resolver?: null | NameResolver): string | Promise<string> {\n\n    if (typeof(target) === \"string\") {\n        if (target.match(/^0x[0-9a-f]{40}$/i)) { return getAddress(target); }\n\n        assert(resolver != null, \"ENS resolution requires a provider\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"resolveName\" });\n\n        return checkAddress(target, resolver.resolveName(target));\n\n    } else if (isAddressable(target)) {\n        return checkAddress(target, target.getAddress());\n\n    } else if (target && typeof(target.then) === \"function\") {\n        return checkAddress(target, target);\n    }\n\n    assertArgument(false, \"unsupported addressable value\", \"target\", target);\n}\n","//import { TypedDataDomain, TypedDataField } from \"@ethersproject/providerabstract-signer\";\nimport { getAddress } from \"../address/index.js\";\nimport { keccak256 } from \"../crypto/index.js\";\nimport { recoverAddress } from \"../transaction/index.js\";\nimport {\n    concat, defineProperties, getBigInt, getBytes, hexlify, isHexString, mask, toBeHex, toQuantity, toTwos, zeroPadValue,\n    assertArgument\n} from \"../utils/index.js\";\n\nimport { id } from \"./id.js\";\n\nimport type { SignatureLike } from \"../crypto/index.js\";\nimport type { BigNumberish, BytesLike } from \"../utils/index.js\";\n\n\nconst padding = new Uint8Array(32);\npadding.fill(0);\n\nconst BN__1 = BigInt(-1);\nconst BN_0 = BigInt(0);\nconst BN_1 = BigInt(1);\nconst BN_MAX_UINT256 = BigInt(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n\n// @TODO: in v7, verifyingContract should be an AddressLike and use resolveAddress\n\n/**\n *  The domain for an [[link-eip-712]] payload.\n */\nexport interface TypedDataDomain {\n    /**\n     *  The human-readable name of the signing domain.\n     */\n    name?: null | string;\n\n    /**\n     *  The major version of the signing domain.\n     */\n    version?: null | string;\n\n    /**\n     *  The chain ID of the signing domain.\n     */\n    chainId?: null | BigNumberish;\n\n    /**\n     *  The the address of the contract that will verify the signature.\n     */\n    verifyingContract?: null | string;\n\n    /**\n     *  A salt used for purposes decided by the specific domain.\n     */\n    salt?: null | BytesLike;\n};\n\n/**\n *  A specific field of a structured [[link-eip-712]] type.\n */\nexport interface TypedDataField {\n    /**\n     *  The field name.\n     */\n    name: string;\n\n    /**\n     *  The type of the field.\n     */\n    type: string;\n};\n\nfunction hexPadRight(value: BytesLike): string {\n    const bytes = getBytes(value);\n    const padOffset = bytes.length % 32\n    if (padOffset) {\n        return concat([ bytes, padding.slice(padOffset) ]);\n    }\n    return hexlify(bytes);\n}\n\nconst hexTrue = toBeHex(BN_1, 32);\nconst hexFalse = toBeHex(BN_0, 32);\n\nconst domainFieldTypes: Record<string, string> = {\n    name: \"string\",\n    version: \"string\",\n    chainId: \"uint256\",\n    verifyingContract: \"address\",\n    salt: \"bytes32\"\n};\n\nconst domainFieldNames: Array<string> = [\n    \"name\", \"version\", \"chainId\", \"verifyingContract\", \"salt\"\n];\n\nfunction checkString(key: string): (value: any) => string {\n    return function (value: any){\n        assertArgument(typeof(value) === \"string\", `invalid domain value for ${ JSON.stringify(key) }`, `domain.${ key }`, value);\n        return value;\n    }\n}\n\nconst domainChecks: Record<string, (value: any) => any> = {\n    name: checkString(\"name\"),\n    version: checkString(\"version\"),\n    chainId: function(_value: any) {\n        const value = getBigInt(_value, \"domain.chainId\");\n        assertArgument(value >= 0, \"invalid chain ID\", \"domain.chainId\", _value);\n        if (Number.isSafeInteger(value)) { return Number(value); }\n        return toQuantity(value);\n    },\n    verifyingContract: function(value: any) {\n        try {\n            return getAddress(value).toLowerCase();\n        } catch (error) { }\n        assertArgument(false, `invalid domain value \"verifyingContract\"`, \"domain.verifyingContract\", value);\n    },\n    salt: function(value: any) {\n        const bytes = getBytes(value, \"domain.salt\");\n        assertArgument(bytes.length === 32, `invalid domain value \"salt\"`, \"domain.salt\", value);\n        return hexlify(bytes);\n    }\n}\n\nfunction getBaseEncoder(type: string): null | ((value: any) => string) {\n    // intXX and uintXX\n    {\n        const match = type.match(/^(u?)int(\\d+)$/);\n        if (match) {\n            const signed = (match[1] === \"\");\n\n            const width = parseInt(match[2]);\n            assertArgument(width % 8 === 0 && width !== 0 && width <= 256 && match[2] === String(width), \"invalid numeric width\", \"type\", type);\n\n            const boundsUpper = mask(BN_MAX_UINT256, signed ? (width - 1): width);\n            const boundsLower = signed ? ((boundsUpper + BN_1) * BN__1): BN_0;\n\n            return function(_value: BigNumberish) {\n                const value = getBigInt(_value, \"value\");\n\n                assertArgument(value >= boundsLower && value <= boundsUpper, `value out-of-bounds for ${ type }`, \"value\", value);\n\n                return toBeHex(signed ? toTwos(value, 256): value, 32);\n            };\n        }\n    }\n\n    // bytesXX\n    {\n        const match = type.match(/^bytes(\\d+)$/);\n        if (match) {\n            const width = parseInt(match[1]);\n            assertArgument(width !== 0 && width <= 32 && match[1] === String(width), \"invalid bytes width\", \"type\", type);\n\n            return function(value: BytesLike) {\n                const bytes = getBytes(value);\n                assertArgument(bytes.length === width, `invalid length for ${ type }`, \"value\", value);\n                return hexPadRight(value);\n            };\n        }\n    }\n\n    switch (type) {\n        case \"address\": return function(value: string) {\n            return zeroPadValue(getAddress(value), 32);\n        };\n        case \"bool\": return function(value: boolean) {\n            return ((!value) ? hexFalse: hexTrue);\n        };\n        case \"bytes\": return function(value: BytesLike) {\n            return keccak256(value);\n        };\n        case \"string\": return function(value: string) {\n            return id(value);\n        };\n    }\n\n    return null;\n}\n\nfunction encodeType(name: string, fields: Array<TypedDataField>): string {\n    return `${ name }(${ fields.map(({ name, type }) => (type + \" \" + name)).join(\",\") })`;\n}\n\ntype ArrayResult = {\n    base: string;         // The base type\n    index?: string;       // the full Index (if any)\n    array?: {             // The Array... (if index)\n        base: string;     // ...base type (same as above)\n        prefix: string;   // ...sans the final Index\n        count: number;    // ...the final Index (-1 for dynamic)\n    }\n};\n\n// foo[][3] => { base: \"foo\", index: \"[][3]\", array: {\n//     base: \"foo\", prefix: \"foo[]\", count: 3 } }\nfunction splitArray(type: string): ArrayResult {\n    const match = type.match(/^([^\\x5b]*)((\\x5b\\d*\\x5d)*)(\\x5b(\\d*)\\x5d)$/);\n    if (match) {\n        return {\n            base: match[1],\n            index: (match[2] + match[4]),\n            array: {\n                base: match[1],\n                prefix: (match[1] + match[2]),\n                count: (match[5] ? parseInt(match[5]): -1),\n            }\n        };\n    }\n\n    return { base: type };\n}\n\n/**\n *  A **TypedDataEncode** prepares and encodes [[link-eip-712]] payloads\n *  for signed typed data.\n *\n *  This is useful for those that wish to compute various components of a\n *  typed data hash, primary types, or sub-components, but generally the\n *  higher level [[Signer-signTypedData]] is more useful.\n */\nexport class TypedDataEncoder {\n    /**\n     *  The primary type for the structured [[types]].\n     *\n     *  This is derived automatically from the [[types]], since no\n     *  recursion is possible, once the DAG for the types is consturcted\n     *  internally, the primary type must be the only remaining type with\n     *  no parent nodes.\n     */\n    readonly primaryType!: string;\n\n    readonly #types: string;\n\n    /**\n     *  The types.\n     */\n    get types(): Record<string, Array<TypedDataField>> {\n        return JSON.parse(this.#types);\n    }\n\n    readonly #fullTypes: Map<string, string>\n\n    readonly #encoderCache: Map<string, (value: any) => string>;\n\n    /**\n     *  Create a new **TypedDataEncoder** for %%types%%.\n     *\n     *  This performs all necessary checking that types are valid and\n     *  do not violate the [[link-eip-712]] structural constraints as\n     *  well as computes the [[primaryType]].\n     */\n    constructor(_types: Record<string, Array<TypedDataField>>) {\n        this.#fullTypes = new Map();\n        this.#encoderCache = new Map();\n\n        // Link struct types to their direct child structs\n        const links: Map<string, Set<string>> = new Map();\n\n        // Link structs to structs which contain them as a child\n        const parents: Map<string, Array<string>> = new Map();\n\n        // Link all subtypes within a given struct\n        const subtypes: Map<string, Set<string>> = new Map();\n\n        const types: Record<string, Array<TypedDataField>> = { };\n        Object.keys(_types).forEach((type) => {\n            types[type] = _types[type].map(({ name, type }) => {\n\n                // Normalize the base type (unless name conflict)\n                let { base, index } = splitArray(type);\n                if (base === \"int\" && !_types[\"int\"]) { base = \"int256\"; }\n                if (base === \"uint\" && !_types[\"uint\"]) { base = \"uint256\"; }\n\n                return { name, type: (base + (index || \"\")) };\n            });\n\n            links.set(type, new Set());\n            parents.set(type, [ ]);\n            subtypes.set(type, new Set());\n        });\n        this.#types = JSON.stringify(types);\n\n        for (const name in types) {\n            const uniqueNames: Set<string> = new Set();\n\n            for (const field of types[name]) {\n\n                // Check each field has a unique name\n                assertArgument(!uniqueNames.has(field.name), `duplicate variable name ${ JSON.stringify(field.name) } in ${ JSON.stringify(name) }`, \"types\", _types);\n                uniqueNames.add(field.name);\n\n                // Get the base type (drop any array specifiers)\n                const baseType = splitArray(field.type).base;\n                assertArgument(baseType !== name, `circular type reference to ${ JSON.stringify(baseType) }`, \"types\", _types);\n\n                // Is this a base encoding type?\n                const encoder = getBaseEncoder(baseType);\n                if (encoder) { continue; }\n\n                assertArgument(parents.has(baseType), `unknown type ${ JSON.stringify(baseType) }`, \"types\", _types);\n\n                // Add linkage\n                (parents.get(baseType) as Array<string>).push(name);\n                (links.get(name) as Set<string>).add(baseType);\n            }\n        }\n\n        // Deduce the primary type\n        const primaryTypes = Array.from(parents.keys()).filter((n) => ((parents.get(n) as Array<string>).length === 0));\n        assertArgument(primaryTypes.length !== 0, \"missing primary type\", \"types\", _types);\n        assertArgument(primaryTypes.length === 1, `ambiguous primary types or unused types: ${ primaryTypes.map((t) => (JSON.stringify(t))).join(\", \") }`, \"types\", _types);\n\n        defineProperties<TypedDataEncoder>(this, { primaryType: primaryTypes[0] });\n\n        // Check for circular type references\n        function checkCircular(type: string, found: Set<string>) {\n            assertArgument(!found.has(type), `circular type reference to ${ JSON.stringify(type) }`, \"types\", _types);\n\n            found.add(type);\n\n            for (const child of (links.get(type) as Set<string>)) {\n                if (!parents.has(child)) { continue; }\n\n                // Recursively check children\n                checkCircular(child, found);\n\n                // Mark all ancestors as having this decendant\n                for (const subtype of found) {\n                    (subtypes.get(subtype) as Set<string>).add(child);\n                }\n            }\n\n            found.delete(type);\n        }\n        checkCircular(this.primaryType, new Set());\n\n        // Compute each fully describe type\n        for (const [ name, set ] of subtypes) {\n            const st = Array.from(set);\n            st.sort();\n            this.#fullTypes.set(name, encodeType(name, types[name]) + st.map((t) => encodeType(t, types[t])).join(\"\"));\n        }\n    }\n\n    /**\n     *  Returnthe encoder for the specific %%type%%.\n     */\n    getEncoder(type: string): (value: any) => string {\n        let encoder = this.#encoderCache.get(type);\n        if (!encoder) {\n            encoder = this.#getEncoder(type);\n            this.#encoderCache.set(type, encoder);\n        }\n        return encoder;\n    }\n\n    #getEncoder(type: string): (value: any) => string {\n\n        // Basic encoder type (address, bool, uint256, etc)\n        {\n            const encoder = getBaseEncoder(type);\n            if (encoder) { return encoder; }\n        }\n\n        // Array\n        const array = splitArray(type).array;\n        if (array) {\n            const subtype = array.prefix;\n            const subEncoder = this.getEncoder(subtype);\n            return (value: Array<any>) => {\n                assertArgument(array.count === -1 || array.count === value.length, `array length mismatch; expected length ${ array.count }`, \"value\", value);\n\n                let result = value.map(subEncoder);\n                if (this.#fullTypes.has(subtype)) {\n                    result = result.map(keccak256);\n                }\n\n                return keccak256(concat(result));\n            };\n        }\n\n        // Struct\n        const fields = this.types[type];\n        if (fields) {\n            const encodedType = id(this.#fullTypes.get(type) as string);\n            return (value: Record<string, any>) => {\n                const values = fields.map(({ name, type }) => {\n                    const result = this.getEncoder(type)(value[name]);\n                    if (this.#fullTypes.has(type)) { return keccak256(result); }\n                    return result;\n                });\n                values.unshift(encodedType);\n                return concat(values);\n            }\n        }\n\n        assertArgument(false, `unknown type: ${ type }`, \"type\", type);\n    }\n\n    /**\n     *  Return the full type for %%name%%.\n     */\n    encodeType(name: string): string {\n        const result = this.#fullTypes.get(name);\n        assertArgument(result, `unknown type: ${ JSON.stringify(name) }`, \"name\", name);\n        return result;\n    }\n\n    /**\n     *  Return the encoded %%value%% for the %%type%%.\n     */\n    encodeData(type: string, value: any): string {\n        return this.getEncoder(type)(value);\n    }\n\n    /**\n     *  Returns the hash of %%value%% for the type of %%name%%.\n     */\n    hashStruct(name: string, value: Record<string, any>): string {\n        return keccak256(this.encodeData(name, value));\n    }\n\n    /**\n     *  Return the fulled encoded %%value%% for the [[types]].\n     */\n    encode(value: Record<string, any>): string {\n        return this.encodeData(this.primaryType, value);\n    }\n\n    /**\n     *  Return the hash of the fully encoded %%value%% for the [[types]].\n     */\n    hash(value: Record<string, any>): string {\n        return this.hashStruct(this.primaryType, value);\n    }\n\n    /**\n     *  @_ignore:\n     */\n    _visit(type: string, value: any, callback: (type: string, data: any) => any): any {\n        // Basic encoder type (address, bool, uint256, etc)\n        {\n            const encoder = getBaseEncoder(type);\n            if (encoder) { return callback(type, value); }\n        }\n\n        // Array\n        const array = splitArray(type).array;\n        if (array) {\n            assertArgument(array.count === -1 || array.count === value.length, `array length mismatch; expected length ${ array.count }`, \"value\", value);\n            return value.map((v: any) => this._visit(array.prefix, v, callback));\n        }\n\n        // Struct\n        const fields = this.types[type];\n        if (fields) {\n            return fields.reduce((accum, { name, type }) => {\n                accum[name] = this._visit(type, value[name], callback);\n                return accum;\n            }, <Record<string, any>>{});\n        }\n\n        assertArgument(false, `unknown type: ${ type }`, \"type\", type);\n    }\n\n    /**\n     *  Call %%calback%% for each value in %%value%%, passing the type and\n     *  component within %%value%%.\n     *\n     *  This is useful for replacing addresses or other transformation that\n     *  may be desired on each component, based on its type.\n     */\n    visit(value: Record<string, any>, callback: (type: string, data: any) => any): any {\n        return this._visit(this.primaryType, value, callback);\n    }\n\n    /**\n     *  Create a new **TypedDataEncoder** for %%types%%.\n     */\n    static from(types: Record<string, Array<TypedDataField>>): TypedDataEncoder {\n        return new TypedDataEncoder(types);\n    }\n\n    /**\n     *  Return the primary type for %%types%%.\n     */\n    static getPrimaryType(types: Record<string, Array<TypedDataField>>): string {\n        return TypedDataEncoder.from(types).primaryType;\n    }\n\n    /**\n     *  Return the hashed struct for %%value%% using %%types%% and %%name%%.\n     */\n    static hashStruct(name: string, types: Record<string, Array<TypedDataField>>, value: Record<string, any>): string {\n        return TypedDataEncoder.from(types).hashStruct(name, value);\n    }\n\n    /**\n     *  Return the domain hash for %%domain%%.\n     */\n    static hashDomain(domain: TypedDataDomain): string {\n        const domainFields: Array<TypedDataField> = [ ];\n        for (const name in domain) {\n            if ((<Record<string, any>>domain)[name] == null) { continue; }\n            const type = domainFieldTypes[name];\n            assertArgument(type, `invalid typed-data domain key: ${ JSON.stringify(name) }`, \"domain\", domain);\n            domainFields.push({ name, type });\n        }\n\n        domainFields.sort((a, b) => {\n            return domainFieldNames.indexOf(a.name) - domainFieldNames.indexOf(b.name);\n        });\n\n        return TypedDataEncoder.hashStruct(\"EIP712Domain\", { EIP712Domain: domainFields }, domain);\n    }\n\n    /**\n     *  Return the fully encoded [[link-eip-712]] %%value%% for %%types%% with %%domain%%.\n     */\n    static encode(domain: TypedDataDomain, types: Record<string, Array<TypedDataField>>, value: Record<string, any>): string {\n        return concat([\n            \"0x1901\",\n            TypedDataEncoder.hashDomain(domain),\n            TypedDataEncoder.from(types).hash(value)\n        ]);\n    }\n\n    /**\n     *  Return the hash of the fully encoded [[link-eip-712]] %%value%% for %%types%% with %%domain%%.\n     */\n    static hash(domain: TypedDataDomain, types: Record<string, Array<TypedDataField>>, value: Record<string, any>): string {\n        return keccak256(TypedDataEncoder.encode(domain, types, value));\n    }\n\n    // Replaces all address types with ENS names with their looked up address\n    /**\n     * Resolves to the value from resolving all addresses in %%value%% for\n     * %%types%% and the %%domain%%.\n     */\n    static async resolveNames(domain: TypedDataDomain, types: Record<string, Array<TypedDataField>>, value: Record<string, any>, resolveName: (name: string) => Promise<string>): Promise<{ domain: TypedDataDomain, value: any }> {\n        // Make a copy to isolate it from the object passed in\n        domain = Object.assign({ }, domain);\n\n        // Allow passing null to ignore value\n        for (const key in domain) {\n            if ((<Record<string, any>>domain)[key] == null) {\n                delete (<Record<string, any>>domain)[key];\n            }\n        }\n\n        // Look up all ENS names\n        const ensCache: Record<string, string> = { };\n\n        // Do we need to look up the domain's verifyingContract?\n        if (domain.verifyingContract && !isHexString(domain.verifyingContract, 20)) {\n            ensCache[domain.verifyingContract] = \"0x\";\n        }\n\n        // We are going to use the encoder to visit all the base values\n        const encoder = TypedDataEncoder.from(types);\n\n        // Get a list of all the addresses\n        encoder.visit(value, (type: string, value: any) => {\n            if (type === \"address\" && !isHexString(value, 20)) {\n                ensCache[value] = \"0x\";\n            }\n            return value;\n        });\n\n        // Lookup each name\n        for (const name in ensCache) {\n            ensCache[name] = await resolveName(name);\n        }\n\n        // Replace the domain verifyingContract if needed\n        if (domain.verifyingContract && ensCache[domain.verifyingContract]) {\n            domain.verifyingContract = ensCache[domain.verifyingContract];\n        }\n\n        // Replace all ENS names with their address\n        value = encoder.visit(value, (type: string, value: any) => {\n            if (type === \"address\" && ensCache[value]) { return ensCache[value]; }\n            return value;\n        });\n\n        return { domain, value };\n    }\n\n    /**\n     *  Returns the JSON-encoded payload expected by nodes which implement\n     *  the JSON-RPC [[link-eip-712]] method.\n     */\n    static getPayload(domain: TypedDataDomain, types: Record<string, Array<TypedDataField>>, value: Record<string, any>): any {\n        // Validate the domain fields\n        TypedDataEncoder.hashDomain(domain);\n\n        // Derive the EIP712Domain Struct reference type\n        const domainValues: Record<string, any> = { };\n        const domainTypes: Array<{ name: string, type:string }> = [ ];\n\n        domainFieldNames.forEach((name) => {\n            const value = (<any>domain)[name];\n            if (value == null) { return; }\n            domainValues[name] = domainChecks[name](value);\n            domainTypes.push({ name, type: domainFieldTypes[name] });\n        });\n\n        const encoder = TypedDataEncoder.from(types);\n\n        // Get the normalized types\n        types = encoder.types;\n\n        const typesWithDomain = Object.assign({ }, types);\n        assertArgument(typesWithDomain.EIP712Domain == null, \"types must not contain EIP712Domain type\", \"types.EIP712Domain\", types);\n\n        typesWithDomain.EIP712Domain = domainTypes;\n\n        // Validate the data structures and types\n        encoder.encode(value);\n\n        return {\n            types: typesWithDomain,\n            domain: domainValues,\n            primaryType: encoder.primaryType,\n            message: encoder.visit(value, (type: string, value: any) => {\n\n                // bytes\n                if (type.match(/^bytes(\\d*)/)) {\n                    return hexlify(getBytes(value));\n                }\n\n                // uint or int\n                if (type.match(/^u?int/)) {\n                    return getBigInt(value).toString();\n                }\n\n                switch (type) {\n                    case \"address\":\n                        return value.toLowerCase();\n                    case \"bool\":\n                        return !!value;\n                    case \"string\":\n                        assertArgument(typeof(value) === \"string\", \"invalid string\", \"value\", value);\n                        return value;\n                }\n\n                assertArgument(false, \"unsupported type\", \"type\", type);\n            })\n        };\n    }\n}\n\n/**\n *  Compute the address used to sign the typed data for the %%signature%%.\n */\nexport function verifyTypedData(domain: TypedDataDomain, types: Record<string, Array<TypedDataField>>, value: Record<string, any>, signature: SignatureLike): string {\n    return recoverAddress(TypedDataEncoder.hash(domain, types, value), signature);\n}\n","import { getAddress } from \"../address/index.js\";\nimport { assertArgument, isHexString } from \"../utils/index.js\";\n\nimport type { AccessList, AccessListish } from \"./index.js\";\n\n\nfunction accessSetify(addr: string, storageKeys: Array<string>): { address: string,storageKeys: Array<string> } {\n    return {\n        address: getAddress(addr),\n        storageKeys: storageKeys.map((storageKey, index) => {\n            assertArgument(isHexString(storageKey, 32), \"invalid slot\", `storageKeys[${ index }]`, storageKey);\n            return storageKey.toLowerCase();\n        })\n    };\n}\n\n/**\n *  Returns a [[AccessList]] from any ethers-supported access-list structure.\n */\nexport function accessListify(value: AccessListish): AccessList {\n    if (Array.isArray(value)) {\n        return (<Array<[ string, Array<string>] | { address: string, storageKeys: Array<string>}>>value).map((set, index) => {\n            if (Array.isArray(set)) {\n                assertArgument(set.length === 2, \"invalid slot set\", `value[${ index }]`, set);\n                return accessSetify(set[0], set[1])\n            }\n            assertArgument(set != null && typeof(set) === \"object\", \"invalid address-slot set\", \"value\", value);\n            return accessSetify(set.address, set.storageKeys);\n        });\n    }\n\n    assertArgument(value != null && typeof(value) === \"object\", \"invalid access list\", \"value\", value);\n\n    const result: Array<{ address: string, storageKeys: Array<string> }> = Object.keys(value).map((addr) => {\n        const storageKeys: Record<string, true> = value[addr].reduce((accum, storageKey) => {\n            accum[storageKey] = true;\n            return accum;\n        }, <Record<string, true>>{ });\n        return accessSetify(addr, Object.keys(storageKeys).sort())\n    });\n    result.sort((a, b) => (a.address.localeCompare(b.address)));\n    return result;\n}\n","/**\n *  A constant for the zero hash.\n *\n *  (**i.e.** ``\"0x0000000000000000000000000000000000000000000000000000000000000000\"``)\n */\nexport const ZeroHash: string = \"0x0000000000000000000000000000000000000000000000000000000000000000\";\n\n","\nimport { ZeroHash } from \"../constants/index.js\";\nimport {\n    concat, dataLength, getBigInt, getBytes, getNumber, hexlify,\n    toBeArray, isHexString, zeroPadValue,\n    assertArgument, assertPrivate\n} from \"../utils/index.js\";\n\nimport type {\n    BigNumberish, BytesLike, Numeric\n} from \"../utils/index.js\";\n\n\n// Constants\nconst BN_0 = BigInt(0);\nconst BN_1 = BigInt(1);\nconst BN_2 = BigInt(2);\nconst BN_27 = BigInt(27);\nconst BN_28 = BigInt(28);\nconst BN_35 = BigInt(35);\n\n\nconst _guard = { };\n\n// @TODO: Allow Uint8Array\n\n/**\n *  A SignatureLike\n *\n *  @_docloc: api/crypto:Signing\n */\nexport type SignatureLike = Signature | string | {\n    r: string;\n    s: string;\n    v: BigNumberish;\n    yParity?: 0 | 1;\n    yParityAndS?: string;\n} | {\n    r: string;\n    yParityAndS: string;\n    yParity?: 0 | 1;\n    s?: string;\n    v?: number;\n} | {\n    r: string;\n    s: string;\n    yParity: 0 | 1;\n    v?: BigNumberish;\n    yParityAndS?: string;\n};\n\nfunction toUint256(value: BigNumberish): string {\n    return zeroPadValue(toBeArray(value), 32);\n}\n\n/**\n *  A Signature  @TODO\n *\n *\n *  @_docloc: api/crypto:Signing\n */\nexport class Signature {\n    #r: string;\n    #s: string;\n    #v: 27 | 28;\n    #networkV: null | bigint;\n\n    /**\n     *  The ``r`` value for a signature.\n     *\n     *  This represents the ``x`` coordinate of a \"reference\" or\n     *  challenge point, from which the ``y`` can be computed.\n     */\n    get r(): string { return this.#r; }\n    set r(value: BytesLike) {\n        assertArgument(dataLength(value) === 32, \"invalid r\", \"value\", value);\n        this.#r = hexlify(value);\n    }\n\n    /**\n     *  The ``s`` value for a signature.\n     */\n    get s(): string {\n        assertArgument(parseInt(this.#s.substring(0, 3)) < 8, \"non-canonical s; use ._s\", \"s\", this.#s);\n        return this.#s;\n    }\n    set s(_value: BytesLike) {\n        assertArgument(dataLength(_value) === 32, \"invalid s\", \"value\", _value);\n        this.#s = hexlify(_value);\n    }\n\n    /**\n     *  Return the s value, unchecked for EIP-2 compliance.\n     *\n     *  This should generally not be used and is for situations where\n     *  a non-canonical S value might be relevant, such as Frontier blocks\n     *  that were mined prior to EIP-2 or invalid Authorization List\n     *  signatures.\n     */\n    get _s(): string { return this.#s; }\n\n    /**\n     *  Returns true if the Signature is valid for [[link-eip-2]] signatures.\n     */\n    isValid(): boolean {\n        return (parseInt(this.#s.substring(0, 3)) < 8);\n    }\n\n    /**\n     *  The ``v`` value for a signature.\n     *\n     *  Since a given ``x`` value for ``r`` has two possible values for\n     *  its correspondin ``y``, the ``v`` indicates which of the two ``y``\n     *  values to use.\n     *\n     *  It is normalized to the values ``27`` or ``28`` for legacy\n     *  purposes.\n     */\n    get v(): 27 | 28 { return this.#v; }\n    set v(value: BigNumberish) {\n        const v = getNumber(value, \"value\");\n        assertArgument(v === 27 || v === 28, \"invalid v\", \"v\", value);\n        this.#v = v;\n    }\n\n    /**\n     *  The EIP-155 ``v`` for legacy transactions. For non-legacy\n     *  transactions, this value is ``null``.\n     */\n    get networkV(): null | bigint { return this.#networkV; }\n\n    /**\n     *  The chain ID for EIP-155 legacy transactions. For non-legacy\n     *  transactions, this value is ``null``.\n     */\n    get legacyChainId(): null | bigint {\n        const v = this.networkV;\n        if (v == null) { return null; }\n        return Signature.getChainId(v);\n    }\n\n    /**\n     *  The ``yParity`` for the signature.\n     *\n     *  See ``v`` for more details on how this value is used.\n     */\n    get yParity(): 0 | 1 {\n        return (this.v === 27) ? 0: 1;\n    }\n\n    /**\n     *  The [[link-eip-2098]] compact representation of the ``yParity``\n     *  and ``s`` compacted into a single ``bytes32``.\n     */\n    get yParityAndS(): string {\n        // The EIP-2098 compact representation\n        const yParityAndS = getBytes(this.s);\n        if (this.yParity) { yParityAndS[0] |= 0x80; }\n        return hexlify(yParityAndS);\n    }\n\n    /**\n     *  The [[link-eip-2098]] compact representation.\n     */\n    get compactSerialized(): string {\n        return concat([ this.r, this.yParityAndS ]);\n    }\n\n    /**\n     *  The serialized representation.\n     */\n    get serialized(): string {\n        return concat([ this.r, this.s, (this.yParity ? \"0x1c\": \"0x1b\") ]);\n    }\n\n    /**\n     *  @private\n     */\n    constructor(guard: any, r: string, s: string, v: 27 | 28) {\n        assertPrivate(guard, _guard, \"Signature\");\n        this.#r = r;\n        this.#s = s;\n        this.#v = v;\n        this.#networkV = null;\n    }\n\n    [Symbol.for('nodejs.util.inspect.custom')](): string {\n        return `Signature { r: \"${ this.r }\", s: \"${ this._s }\"${ this.isValid() ? \"\": ', valid: \"false\"'}, yParity: ${ this.yParity }, networkV: ${ this.networkV } }`;\n    }\n\n    /**\n     *  Returns a new identical [[Signature]].\n     */\n    clone(): Signature {\n        const clone = new Signature(_guard, this.r, this._s, this.v);\n        if (this.networkV) { clone.#networkV = this.networkV; }\n        return clone;\n    }\n\n    /**\n     *  Returns a representation that is compatible with ``JSON.stringify``.\n     */\n    toJSON(): any {\n        const networkV = this.networkV;\n        return {\n            _type: \"signature\",\n            networkV: ((networkV != null) ? networkV.toString(): null),\n            r: this.r, s: this._s, v: this.v,\n        };\n    }\n\n    /**\n     *  Compute the chain ID from the ``v`` in a legacy EIP-155 transactions.\n     *\n     *  @example:\n     *    Signature.getChainId(45)\n     *    //_result:\n     *\n     *    Signature.getChainId(46)\n     *    //_result:\n     */\n    static getChainId(v: BigNumberish): bigint {\n        const bv = getBigInt(v, \"v\");\n\n        // The v is not an EIP-155 v, so it is the unspecified chain ID\n        if ((bv == BN_27) || (bv == BN_28)) { return BN_0; }\n\n        // Bad value for an EIP-155 v\n        assertArgument(bv >= BN_35, \"invalid EIP-155 v\", \"v\", v);\n\n        return (bv - BN_35) / BN_2;\n    }\n\n    /**\n     *  Compute the ``v`` for a chain ID for a legacy EIP-155 transactions.\n     *\n     *  Legacy transactions which use [[link-eip-155]] hijack the ``v``\n     *  property to include the chain ID.\n     *\n     *  @example:\n     *    Signature.getChainIdV(5, 27)\n     *    //_result:\n     *\n     *    Signature.getChainIdV(5, 28)\n     *    //_result:\n     *\n     */\n    static getChainIdV(chainId: BigNumberish, v: 27 | 28): bigint {\n        return (getBigInt(chainId) * BN_2) + BigInt(35 + v - 27);\n    }\n\n    /**\n     *  Compute the normalized legacy transaction ``v`` from a ``yParirty``,\n     *  a legacy transaction ``v`` or a legacy [[link-eip-155]] transaction.\n     *\n     *  @example:\n     *    // The values 0 and 1 imply v is actually yParity\n     *    Signature.getNormalizedV(0)\n     *    //_result:\n     *\n     *    // Legacy non-EIP-1559 transaction (i.e. 27 or 28)\n     *    Signature.getNormalizedV(27)\n     *    //_result:\n     *\n     *    // Legacy EIP-155 transaction (i.e. >= 35)\n     *    Signature.getNormalizedV(46)\n     *    //_result:\n     *\n     *    // Invalid values throw\n     *    Signature.getNormalizedV(5)\n     *    //_error:\n     */\n    static getNormalizedV(v: BigNumberish): 27 | 28 {\n        const bv = getBigInt(v);\n\n        if (bv === BN_0 || bv === BN_27) { return 27; }\n        if (bv === BN_1 || bv === BN_28) { return 28; }\n\n        assertArgument(bv >= BN_35, \"invalid v\", \"v\", v);\n\n        // Otherwise, EIP-155 v means odd is 27 and even is 28\n        return (bv & BN_1) ? 27: 28;\n    }\n\n    /**\n     *  Creates a new [[Signature]].\n     *\n     *  If no %%sig%% is provided, a new [[Signature]] is created\n     *  with default values.\n     *\n     *  If %%sig%% is a string, it is parsed.\n     */\n    static from(sig?: SignatureLike): Signature {\n        function assertError(check: unknown, message: string): asserts check {\n            assertArgument(check, message, \"signature\", sig);\n        };\n\n        if (sig == null) {\n            return new Signature(_guard, ZeroHash, ZeroHash, 27);\n        }\n\n        if (typeof(sig) === \"string\") {\n            const bytes = getBytes(sig, \"signature\");\n            if (bytes.length === 64) {\n                const r = hexlify(bytes.slice(0, 32));\n                const s = bytes.slice(32, 64);\n                const v = (s[0] & 0x80) ? 28: 27;\n                s[0] &= 0x7f;\n                return new Signature(_guard, r, hexlify(s), v);\n            }\n\n            if (bytes.length === 65) {\n                const r = hexlify(bytes.slice(0, 32));\n                const s = hexlify(bytes.slice(32, 64));\n                const v = Signature.getNormalizedV(bytes[64]);\n                return new Signature(_guard, r, s, v);\n            }\n\n            assertError(false, \"invalid raw signature length\");\n        }\n\n        if (sig instanceof Signature) { return sig.clone(); }\n\n        // Get r\n        const _r = sig.r;\n        assertError(_r != null, \"missing r\");\n        const r = toUint256(_r);\n\n        // Get s; by any means necessary (we check consistency below)\n        const s = (function(s?: string, yParityAndS?: string) {\n            if (s != null) { return toUint256(s); }\n\n            if (yParityAndS != null) {\n                assertError(isHexString(yParityAndS, 32), \"invalid yParityAndS\");\n                const bytes = getBytes(yParityAndS);\n                bytes[0] &= 0x7f;\n                return hexlify(bytes);\n            }\n\n            assertError(false, \"missing s\");\n        })(sig.s, sig.yParityAndS);\n\n        // Get v; by any means necessary (we check consistency below)\n        const { networkV, v } = (function(_v?: BigNumberish, yParityAndS?: string, yParity?: Numeric): { networkV?: bigint, v: 27 | 28 } {\n            if (_v != null) {\n                const v = getBigInt(_v);\n                return {\n                    networkV: ((v >= BN_35) ? v: undefined),\n                    v: Signature.getNormalizedV(v)\n                };\n            }\n\n            if (yParityAndS != null) {\n                assertError(isHexString(yParityAndS, 32), \"invalid yParityAndS\");\n                return { v: ((getBytes(yParityAndS)[0] & 0x80) ? 28: 27) };\n            }\n\n            if (yParity != null) {\n                switch (getNumber(yParity, \"sig.yParity\")) {\n                    case 0: return { v: 27 };\n                    case 1: return { v: 28 };\n                }\n                assertError(false, \"invalid yParity\");\n            }\n\n            assertError(false, \"missing v\");\n        })(sig.v, sig.yParityAndS, sig.yParity);\n\n        const result = new Signature(_guard, r, s, v);\n        if (networkV) { result.#networkV =  networkV; }\n\n        // If multiple of v, yParity, yParityAndS we given, check they match\n        assertError(sig.yParity == null || getNumber(sig.yParity, \"sig.yParity\") === result.yParity, \"yParity mismatch\");\n        assertError(sig.yParityAndS == null || sig.yParityAndS === result.yParityAndS, \"yParityAndS mismatch\");\n\n        return result;\n    }\n}\n","import { getAddress } from \"../address/index.js\";\nimport { Signature } from \"../crypto/index.js\";\nimport { getBigInt } from \"../utils/index.js\";\n\nimport type { Authorization, AuthorizationLike } from \"./index.js\";\n\nexport function authorizationify(auth: AuthorizationLike): Authorization {\n    return {\n        address: getAddress(auth.address),\n        nonce: getBigInt((auth.nonce != null) ? auth.nonce: 0),\n        chainId: getBigInt((auth.chainId != null)? auth.chainId: 0),\n        signature: Signature.from(auth.signature)\n    };\n}\n","import { assert, makeError } from \"./errors.js\";\n\nimport type {\n    FetchGetUrlFunc, FetchRequest, FetchCancelSignal, GetUrlResponse\n} from \"./fetch.js\";\n\nexport function createGetUrl(options?: Record<string, any>): FetchGetUrlFunc {\n\n    async function getUrl(req: FetchRequest, _signal?: FetchCancelSignal): Promise<GetUrlResponse> {\n        assert(_signal == null || !_signal.cancelled, \"request cancelled before sending\", \"CANCELLED\");\n\n        const protocol = req.url.split(\":\")[0].toLowerCase();\n\n        assert(protocol === \"http\" || protocol === \"https\", `unsupported protocol ${ protocol }`, \"UNSUPPORTED_OPERATION\", {\n            info: { protocol },\n            operation: \"request\"\n        });\n\n        assert(protocol === \"https\" || !req.credentials || req.allowInsecureAuthentication, \"insecure authorized connections unsupported\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"request\"\n        });\n\n        let error: null | Error = null;\n\n        const controller = new AbortController();\n\n        const timer = setTimeout(() => {\n            error = makeError(\"request timeout\", \"TIMEOUT\");\n            controller.abort();\n        }, req.timeout);\n\n        if (_signal) {\n            _signal.addListener(() => {\n                error = makeError(\"request cancelled\", \"CANCELLED\");\n                controller.abort();\n            });\n        }\n\n        const init = Object.assign({ }, options, {\n            method: req.method,\n            headers: new Headers(Array.from(req)),\n            body: req.body || undefined,\n            signal: controller.signal\n        });\n\n        let resp: Awaited<ReturnType<typeof fetch>>;\n        try {\n            resp = await fetch(req.url, init);\n        } catch (_error) {\n            clearTimeout(timer);\n            if (error) { throw error; }\n            throw _error;\n        }\n\n        clearTimeout(timer);\n\n        const headers: Record<string, string> = { };\n        resp.headers.forEach((value, key) => {\n            headers[key.toLowerCase()] = value;\n        });\n\n        const respBody = await resp.arrayBuffer();\n        const body = (respBody == null) ? null: new Uint8Array(respBody);\n\n        return {\n            statusCode: resp.status,\n            statusMessage: resp.statusText,\n            headers, body\n        };\n    }\n\n    return getUrl;\n}\n\n// @TODO: remove in v7; provided for backwards compat\nconst defaultGetUrl: FetchGetUrlFunc = createGetUrl({ });\n\nexport async function getUrl(req: FetchRequest, _signal?: FetchCancelSignal): Promise<GetUrlResponse> {\n    return defaultGetUrl(req, _signal);\n}\n\n","/**\n *  Fetching content from the web is environment-specific, so Ethers\n *  provides an abstraction that each environment can implement to provide\n *  this service.\n *\n *  On [Node.js](link-node), the ``http`` and ``https`` libs are used to\n *  create a request object, register event listeners and process data\n *  and populate the [[FetchResponse]].\n *\n *  In a browser, the [DOM fetch](link-js-fetch) is used, and the resulting\n *  ``Promise`` is waited on to retrieve the payload.\n *\n *  The [[FetchRequest]] is responsible for handling many common situations,\n *  such as redirects, server throttling, authentication, etc.\n *\n *  It also handles common gateways, such as IPFS and data URIs.\n *\n *  @_section api/utils/fetching:Fetching Web Content  [about-fetch]\n */\nimport { decodeBase64, encodeBase64 } from \"./base64.js\";\nimport { hexlify } from \"./data.js\";\nimport { assert, assertArgument } from \"./errors.js\";\nimport { defineProperties } from \"./properties.js\";\nimport { toUtf8Bytes, toUtf8String } from \"./utf8.js\";\n\nimport { createGetUrl } from \"./geturl.js\";\n\n/**\n *  An environment's implementation of ``getUrl`` must return this type.\n */\nexport type GetUrlResponse = {\n    statusCode: number,\n    statusMessage: string,\n    headers: Record<string, string>,\n    body: null | Uint8Array\n};\n\n/**\n *  This can be used to control how throttling is handled in\n *  [[FetchRequest-setThrottleParams]].\n */\nexport type FetchThrottleParams = {\n    maxAttempts?: number;\n    slotInterval?: number;\n};\n\n/**\n *  Called before any network request, allowing updated headers (e.g. Bearer tokens), etc.\n */\nexport type FetchPreflightFunc = (req: FetchRequest) => Promise<FetchRequest>;\n\n/**\n *  Called on the response, allowing client-based throttling logic or post-processing.\n */\nexport type FetchProcessFunc = (req: FetchRequest, resp: FetchResponse) => Promise<FetchResponse>;\n\n/**\n *  Called prior to each retry; return true to retry, false to abort.\n */\nexport type FetchRetryFunc = (req: FetchRequest, resp: FetchResponse, attempt: number) => Promise<boolean>;\n\n/**\n *  Called on Gateway URLs.\n */\nexport type FetchGatewayFunc = (url: string, signal?: FetchCancelSignal) => Promise<FetchRequest | FetchResponse>;\n\n/**\n *  Used to perform a fetch; use this to override the underlying network\n *  fetch layer. In NodeJS, the default uses the \"http\" and \"https\" libraries\n *  and in the browser ``fetch`` is used. If you wish to use Axios, this is\n *  how you would register it.\n */\nexport type FetchGetUrlFunc = (req: FetchRequest, signal?: FetchCancelSignal) => Promise<GetUrlResponse>;\n\n\nconst MAX_ATTEMPTS = 12;\nconst SLOT_INTERVAL = 250;\n\n// The global FetchGetUrlFunc implementation.\nlet defaultGetUrlFunc: FetchGetUrlFunc = createGetUrl();\n\nconst reData = new RegExp(\"^data:([^;:]*)?(;base64)?,(.*)$\", \"i\");\nconst reIpfs = new RegExp(\"^ipfs:/\\/(ipfs/)?(.*)$\", \"i\");\n\n// If locked, new Gateways cannot be added\nlet locked = false;\n\n// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs\nasync function dataGatewayFunc(url: string, signal?: FetchCancelSignal): Promise<FetchResponse> {\n    try {\n        const match = url.match(reData);\n        if (!match) { throw new Error(\"invalid data\"); }\n        return new FetchResponse(200, \"OK\", {\n            \"content-type\": (match[1] || \"text/plain\"),\n        }, (match[2] ? decodeBase64(match[3]): unpercent(match[3])));\n    } catch (error) {\n        return new FetchResponse(599, \"BAD REQUEST (invalid data: URI)\", { }, null, new FetchRequest(url));\n    }\n}\n\n/**\n *  Returns a [[FetchGatewayFunc]] for fetching content from a standard\n *  IPFS gateway hosted at %%baseUrl%%.\n */\nfunction getIpfsGatewayFunc(baseUrl: string): FetchGatewayFunc {\n    async function gatewayIpfs(url: string, signal?: FetchCancelSignal): Promise<FetchRequest | FetchResponse> {\n        try {\n            const match = url.match(reIpfs);\n            if (!match) { throw new Error(\"invalid link\"); }\n            return new FetchRequest(`${ baseUrl }${ match[2] }`);\n        } catch (error) {\n            return new FetchResponse(599, \"BAD REQUEST (invalid IPFS URI)\", { }, null, new FetchRequest(url));\n        }\n    }\n\n    return gatewayIpfs;\n}\n\nconst Gateways: Record<string, FetchGatewayFunc> = {\n    \"data\": dataGatewayFunc,\n    \"ipfs\": getIpfsGatewayFunc(\"https:/\\/gateway.ipfs.io/ipfs/\")\n};\n\nconst fetchSignals: WeakMap<FetchRequest, () => void> = new WeakMap();\n\n/**\n *  @_ignore\n */\nexport class FetchCancelSignal {\n    #listeners: Array<() => void>;\n    #cancelled: boolean;\n\n    constructor(request: FetchRequest) {\n        this.#listeners = [ ];\n        this.#cancelled = false;\n\n        fetchSignals.set(request, () => {\n            if (this.#cancelled) { return; }\n            this.#cancelled = true;\n\n            for (const listener of this.#listeners) {\n                setTimeout(() => { listener(); }, 0);\n            }\n            this.#listeners = [ ];\n        });\n    }\n\n    addListener(listener: () => void): void {\n        assert(!this.#cancelled, \"singal already cancelled\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"fetchCancelSignal.addCancelListener\"\n        });\n        this.#listeners.push(listener);\n    }\n\n    get cancelled(): boolean { return this.#cancelled; }\n\n    checkSignal(): void {\n        assert(!this.cancelled, \"cancelled\", \"CANCELLED\", { });\n    }\n}\n\n// Check the signal, throwing if it is cancelled\nfunction checkSignal(signal?: FetchCancelSignal): FetchCancelSignal {\n    if (signal == null) { throw new Error(\"missing signal; should not happen\"); }\n    signal.checkSignal();\n    return signal;\n}\n\n/**\n *  Represents a request for a resource using a URI.\n *\n *  By default, the supported schemes are ``HTTP``, ``HTTPS``, ``data:``,\n *  and ``IPFS:``.\n *\n *  Additional schemes can be added globally using [[registerGateway]].\n *\n *  @example:\n *    req = new FetchRequest(\"https://www.ricmoo.com\")\n *    resp = await req.send()\n *    resp.body.length\n *    //_result:\n */\nexport class FetchRequest implements Iterable<[ key: string, value: string ]> {\n    #allowInsecure: boolean;\n    #gzip: boolean;\n    #headers: Record<string, string>;\n    #method: string;\n    #timeout: number;\n    #url: string;\n\n    #body?: Uint8Array;\n    #bodyType?: string;\n    #creds?: string;\n\n    // Hooks\n    #preflight?: null | FetchPreflightFunc;\n    #process?: null | FetchProcessFunc;\n    #retry?: null | FetchRetryFunc;\n\n    #signal?: FetchCancelSignal;\n\n    #throttle: Required<FetchThrottleParams>;\n\n    #getUrlFunc: null | FetchGetUrlFunc;\n\n    /**\n     *  The fetch URL to request.\n     */\n    get url(): string { return this.#url; }\n    set url(url: string) {\n        this.#url = String(url);\n    }\n\n    /**\n     *  The fetch body, if any, to send as the request body. //(default: null)//\n     *\n     *  When setting a body, the intrinsic ``Content-Type`` is automatically\n     *  set and will be used if **not overridden** by setting a custom\n     *  header.\n     *\n     *  If %%body%% is null, the body is cleared (along with the\n     *  intrinsic ``Content-Type``).\n     *\n     *  If %%body%% is a string, the intrinsic ``Content-Type`` is set to\n     *  ``text/plain``.\n     *\n     *  If %%body%% is a Uint8Array, the intrinsic ``Content-Type`` is set to\n     *  ``application/octet-stream``.\n     *\n     *  If %%body%% is any other object, the intrinsic ``Content-Type`` is\n     *  set to ``application/json``.\n     */\n    get body(): null | Uint8Array {\n        if (this.#body == null) { return null; }\n        return new Uint8Array(this.#body);\n    }\n    set body(body: null | string | Readonly<object> | Readonly<Uint8Array>) {\n        if (body == null) {\n            this.#body = undefined;\n            this.#bodyType = undefined;\n        } else if (typeof(body) === \"string\") {\n            this.#body = toUtf8Bytes(body);\n            this.#bodyType = \"text/plain\";\n        } else if (body instanceof Uint8Array) {\n            this.#body = body;\n            this.#bodyType = \"application/octet-stream\";\n        } else if (typeof(body) === \"object\") {\n            this.#body = toUtf8Bytes(JSON.stringify(body));\n            this.#bodyType = \"application/json\";\n        } else {\n            throw new Error(\"invalid body\");\n        }\n    }\n\n    /**\n     *  Returns true if the request has a body.\n     */\n    hasBody(): this is (FetchRequest & { body: Uint8Array }) {\n        return (this.#body != null);\n    }\n\n    /**\n     *  The HTTP method to use when requesting the URI. If no method\n     *  has been explicitly set, then ``GET`` is used if the body is\n     *  null and ``POST`` otherwise.\n     */\n    get method(): string {\n        if (this.#method) { return this.#method; }\n        if (this.hasBody()) { return \"POST\"; }\n        return \"GET\";\n    }\n    set method(method: null | string) {\n        if (method == null) { method = \"\"; }\n        this.#method = String(method).toUpperCase();\n    }\n\n    /**\n     *  The headers that will be used when requesting the URI. All\n     *  keys are lower-case.\n     *\n     *  This object is a copy, so any changes will **NOT** be reflected\n     *  in the ``FetchRequest``.\n     *\n     *  To set a header entry, use the ``setHeader`` method.\n     */\n    get headers(): Record<string, string> {\n        const headers = Object.assign({ }, this.#headers);\n\n        if (this.#creds) {\n            headers[\"authorization\"] = `Basic ${ encodeBase64(toUtf8Bytes(this.#creds)) }`;\n        };\n\n        if (this.allowGzip) {\n            headers[\"accept-encoding\"] = \"gzip\";\n        }\n\n        if (headers[\"content-type\"] == null && this.#bodyType) {\n            headers[\"content-type\"] = this.#bodyType;\n        }\n        if (this.body) { headers[\"content-length\"] = String(this.body.length); }\n\n        return headers;\n    }\n\n    /**\n     *  Get the header for %%key%%, ignoring case.\n     */\n    getHeader(key: string): string {\n        return this.headers[key.toLowerCase()];\n    }\n\n    /**\n     *  Set the header for %%key%% to %%value%%. All values are coerced\n     *  to a string.\n     */\n    setHeader(key: string, value: string | number): void {\n        this.#headers[String(key).toLowerCase()] = String(value);\n    }\n\n    /**\n     *  Clear all headers, resetting all intrinsic headers.\n     */\n    clearHeaders(): void {\n        this.#headers = { };\n    }\n\n    [Symbol.iterator](): Iterator<[ key: string, value: string ]> {\n        const headers = this.headers;\n        const keys = Object.keys(headers);\n        let index = 0;\n        return {\n            next: () => {\n                if (index < keys.length) {\n                    const key = keys[index++];\n                    return {\n                        value: [ key, headers[key] ], done: false\n                    }\n                }\n                return { value: undefined, done: true };\n            }\n        };\n    }\n\n    /**\n     *  The value that will be sent for the ``Authorization`` header.\n     *\n     *  To set the credentials, use the ``setCredentials`` method.\n     */\n    get credentials(): null | string {\n        return this.#creds || null;\n    }\n\n    /**\n     *  Sets an ``Authorization`` for %%username%% with %%password%%.\n     */\n    setCredentials(username: string, password: string): void {\n        assertArgument(!username.match(/:/), \"invalid basic authentication username\", \"username\", \"[REDACTED]\");\n        this.#creds = `${ username }:${ password }`;\n    }\n\n    /**\n     *  Enable and request gzip-encoded responses. The response will\n     *  automatically be decompressed. //(default: true)//\n     */\n    get allowGzip(): boolean {\n        return this.#gzip;\n    }\n    set allowGzip(value: boolean) {\n        this.#gzip = !!value;\n    }\n\n    /**\n     *  Allow ``Authentication`` credentials to be sent over insecure\n     *  channels. //(default: false)//\n     */\n    get allowInsecureAuthentication(): boolean {\n        return !!this.#allowInsecure;\n    }\n    set allowInsecureAuthentication(value: boolean) {\n        this.#allowInsecure = !!value;\n    }\n\n    /**\n     *  The timeout (in milliseconds) to wait for a complete response.\n     *  //(default: 5 minutes)//\n     */\n    get timeout(): number { return this.#timeout; }\n    set timeout(timeout: number) {\n        assertArgument(timeout >= 0, \"timeout must be non-zero\", \"timeout\", timeout);\n        this.#timeout = timeout;\n    }\n\n    /**\n     *  This function is called prior to each request, for example\n     *  during a redirection or retry in case of server throttling.\n     *\n     *  This offers an opportunity to populate headers or update\n     *  content before sending a request.\n     */\n    get preflightFunc(): null | FetchPreflightFunc {\n        return this.#preflight || null;\n    }\n    set preflightFunc(preflight: null | FetchPreflightFunc) {\n        this.#preflight = preflight;\n    }\n\n    /**\n     *  This function is called after each response, offering an\n     *  opportunity to provide client-level throttling or updating\n     *  response data.\n     *\n     *  Any error thrown in this causes the ``send()`` to throw.\n     *\n     *  To schedule a retry attempt (assuming the maximum retry limit\n     *  has not been reached), use [[response.throwThrottleError]].\n     */\n    get processFunc(): null | FetchProcessFunc {\n        return this.#process || null;\n    }\n    set processFunc(process: null | FetchProcessFunc) {\n        this.#process = process;\n    }\n\n    /**\n     *  This function is called on each retry attempt.\n     */\n    get retryFunc(): null | FetchRetryFunc {\n        return this.#retry || null;\n    }\n    set retryFunc(retry: null | FetchRetryFunc) {\n        this.#retry = retry;\n    }\n\n    /**\n     *  This function is called to fetch content from HTTP and\n     *  HTTPS URLs and is platform specific (e.g. nodejs vs\n     *  browsers).\n     *\n     *  This is by default the currently registered global getUrl\n     *  function, which can be changed using [[registerGetUrl]].\n     *  If this has been set, setting is to ``null`` will cause\n     *  this FetchRequest (and any future clones) to revert back to\n     *  using the currently registered global getUrl function.\n     *\n     *  Setting this is generally not necessary, but may be useful\n     *  for developers that wish to intercept requests or to\n     *  configurege a proxy or other agent.\n     */\n    get getUrlFunc(): FetchGetUrlFunc {\n        return this.#getUrlFunc || defaultGetUrlFunc;\n    }\n    set getUrlFunc(value: null | FetchGetUrlFunc) {\n        this.#getUrlFunc = value;\n    }\n\n    /**\n     *  Create a new FetchRequest instance with default values.\n     *\n     *  Once created, each property may be set before issuing a\n     *  ``.send()`` to make the request.\n     */\n    constructor(url: string) {\n        this.#url = String(url);\n\n        this.#allowInsecure = false;\n        this.#gzip = true;\n        this.#headers = { };\n        this.#method = \"\";\n        this.#timeout = 300000;\n\n        this.#throttle = {\n            slotInterval: SLOT_INTERVAL,\n            maxAttempts: MAX_ATTEMPTS\n        };\n\n        this.#getUrlFunc = null;\n    }\n\n    toString(): string {\n        return `<FetchRequest method=${ JSON.stringify(this.method) } url=${ JSON.stringify(this.url) } headers=${ JSON.stringify(this.headers) } body=${ this.#body ? hexlify(this.#body): \"null\" }>`;\n    }\n\n    /**\n     *  Update the throttle parameters used to determine maximum\n     *  attempts and exponential-backoff properties.\n     */\n    setThrottleParams(params: FetchThrottleParams): void {\n        if (params.slotInterval != null) {\n            this.#throttle.slotInterval = params.slotInterval;\n        }\n        if (params.maxAttempts != null) {\n            this.#throttle.maxAttempts = params.maxAttempts;\n        }\n    }\n\n    async #send(attempt: number, expires: number, delay: number, _request: FetchRequest, _response: FetchResponse): Promise<FetchResponse> {\n        if (attempt >= this.#throttle.maxAttempts) {\n            return _response.makeServerError(\"exceeded maximum retry limit\");\n        }\n\n        assert(getTime() <= expires, \"timeout\", \"TIMEOUT\", {\n            operation: \"request.send\", reason: \"timeout\", request: _request\n        });\n\n        if (delay > 0) { await wait(delay); }\n\n        let req = this.clone();\n        const scheme = (req.url.split(\":\")[0] || \"\").toLowerCase();\n\n        // Process any Gateways\n        if (scheme in Gateways) {\n            const result = await Gateways[scheme](req.url, checkSignal(_request.#signal));\n            if (result instanceof FetchResponse) {\n                let response = result;\n\n                if (this.processFunc) {\n                    checkSignal(_request.#signal);\n                    try {\n                        response = await this.processFunc(req, response);\n                    } catch (error: any) {\n\n                        // Something went wrong during processing; throw a 5xx server error\n                        if (error.throttle == null || typeof(error.stall) !== \"number\") {\n                            response.makeServerError(\"error in post-processing function\", error).assertOk();\n                        }\n\n                        // Ignore throttling\n                    }\n                }\n\n                return response;\n            }\n            req = result;\n        }\n\n        // We have a preflight function; update the request\n        if (this.preflightFunc) { req = await this.preflightFunc(req); }\n\n        const resp = await this.getUrlFunc(req, checkSignal(_request.#signal));\n        let response = new FetchResponse(resp.statusCode, resp.statusMessage, resp.headers, resp.body, _request);\n\n        if (response.statusCode === 301 || response.statusCode === 302) {\n\n            // Redirect\n            try {\n                const location = response.headers.location || \"\";\n                return req.redirect(location).#send(attempt + 1, expires, 0, _request, response);\n            } catch (error) { }\n\n            // Things won't get any better on another attempt; abort\n            return response;\n\n        } else if (response.statusCode === 429) {\n\n            // Throttle\n            if (this.retryFunc == null || (await this.retryFunc(req, response, attempt))) {\n                const retryAfter = response.headers[\"retry-after\"];\n                let delay = this.#throttle.slotInterval * Math.trunc(Math.random() * Math.pow(2, attempt));\n                if (typeof(retryAfter) === \"string\" && retryAfter.match(/^[1-9][0-9]*$/)) {\n                    delay = parseInt(retryAfter);\n                }\n                return req.clone().#send(attempt + 1, expires, delay, _request, response);\n            }\n        }\n\n        if (this.processFunc) {\n            checkSignal(_request.#signal);\n            try {\n                response = await this.processFunc(req, response);\n            } catch (error: any) {\n\n                // Something went wrong during processing; throw a 5xx server error\n                if (error.throttle == null || typeof(error.stall) !== \"number\") {\n                    response.makeServerError(\"error in post-processing function\", error).assertOk();\n                }\n\n                // Throttle\n                let delay = this.#throttle.slotInterval * Math.trunc(Math.random() * Math.pow(2, attempt));;\n                if (error.stall >= 0) { delay = error.stall; }\n\n                return req.clone().#send(attempt + 1, expires, delay, _request, response);\n            }\n        }\n\n        return response;\n    }\n\n    /**\n     *  Resolves to the response by sending the request.\n     */\n    send(): Promise<FetchResponse> {\n        assert(this.#signal == null, \"request already sent\", \"UNSUPPORTED_OPERATION\", { operation: \"fetchRequest.send\" });\n        this.#signal = new FetchCancelSignal(this);\n        return this.#send(0, getTime() + this.timeout, 0, this, new FetchResponse(0, \"\", { }, null, this));\n    }\n\n    /**\n     *  Cancels the inflight response, causing a ``CANCELLED``\n     *  error to be rejected from the [[send]].\n     */\n    cancel(): void {\n        assert(this.#signal != null, \"request has not been sent\", \"UNSUPPORTED_OPERATION\", { operation: \"fetchRequest.cancel\" });\n        const signal = fetchSignals.get(this);\n        if (!signal) { throw new Error(\"missing signal; should not happen\"); }\n        signal();\n    }\n\n    /**\n     *  Returns a new [[FetchRequest]] that represents the redirection\n     *  to %%location%%.\n     */\n    redirect(location: string): FetchRequest {\n        // Redirection; for now we only support absolute locations\n        const current = this.url.split(\":\")[0].toLowerCase();\n        const target = location.split(\":\")[0].toLowerCase();\n\n        // Don't allow redirecting:\n        // - non-GET requests\n        // - downgrading the security (e.g. https => http)\n        // - to non-HTTP (or non-HTTPS) protocols [this could be relaxed?]\n        assert(this.method === \"GET\" && (current !== \"https\" || target !== \"http\") && location.match(/^https?:/), `unsupported redirect`, \"UNSUPPORTED_OPERATION\", {\n            operation: `redirect(${ this.method } ${ JSON.stringify(this.url) } => ${ JSON.stringify(location) })`\n        });\n\n        // Create a copy of this request, with a new URL\n        const req = new FetchRequest(location);\n        req.method = \"GET\";\n        req.allowGzip = this.allowGzip;\n        req.timeout = this.timeout;\n        req.#headers = Object.assign({ }, this.#headers);\n        if (this.#body) { req.#body = new Uint8Array(this.#body); }\n        req.#bodyType = this.#bodyType;\n\n        // Do not forward credentials unless on the same domain; only absolute\n        //req.allowInsecure = false;\n        // paths are currently supported; may want a way to specify to forward?\n        //setStore(req.#props, \"creds\", getStore(this.#pros, \"creds\"));\n\n        return req;\n    }\n\n    /**\n     *  Create a new copy of this request.\n     */\n    clone(): FetchRequest {\n        const clone = new FetchRequest(this.url);\n\n        // Preserve \"default method\" (i.e. null)\n        clone.#method = this.#method;\n\n        // Preserve \"default body\" with type, copying the Uint8Array is present\n        if (this.#body) { clone.#body = this.#body; }\n        clone.#bodyType = this.#bodyType;\n\n        // Preserve \"default headers\"\n        clone.#headers = Object.assign({ }, this.#headers);\n\n        // Credentials is readonly, so we copy internally\n        clone.#creds = this.#creds;\n\n        if (this.allowGzip) { clone.allowGzip = true; }\n\n        clone.timeout = this.timeout;\n        if (this.allowInsecureAuthentication) { clone.allowInsecureAuthentication = true; }\n\n        clone.#preflight = this.#preflight;\n        clone.#process = this.#process;\n        clone.#retry = this.#retry;\n\n        clone.#throttle = Object.assign({ }, this.#throttle);\n\n        clone.#getUrlFunc = this.#getUrlFunc;\n\n        return clone;\n    }\n\n    /**\n     *  Locks all static configuration for gateways and FetchGetUrlFunc\n     *  registration.\n     */\n    static lockConfig(): void {\n        locked = true;\n    }\n\n    /**\n     *  Get the current Gateway function for %%scheme%%.\n     */\n    static getGateway(scheme: string): null | FetchGatewayFunc {\n        return Gateways[scheme.toLowerCase()] || null;\n    }\n\n    /**\n     *  Use the %%func%% when fetching URIs using %%scheme%%.\n     *\n     *  This method affects all requests globally.\n     *\n     *  If [[lockConfig]] has been called, no change is made and this\n     *  throws.\n     */\n    static registerGateway(scheme: string, func: FetchGatewayFunc): void {\n        scheme = scheme.toLowerCase();\n        if (scheme === \"http\" || scheme === \"https\") {\n            throw new Error(`cannot intercept ${ scheme }; use registerGetUrl`);\n        }\n        if (locked) { throw new Error(\"gateways locked\"); }\n        Gateways[scheme] = func;\n    }\n\n    /**\n     *  Use %%getUrl%% when fetching URIs over HTTP and HTTPS requests.\n     *\n     *  This method affects all requests globally.\n     *\n     *  If [[lockConfig]] has been called, no change is made and this\n     *  throws.\n     */\n    static registerGetUrl(getUrl: FetchGetUrlFunc): void {\n        if (locked) { throw new Error(\"gateways locked\"); }\n        defaultGetUrlFunc = getUrl;\n    }\n\n    /**\n     *  Creates a getUrl function that fetches content from HTTP and\n     *  HTTPS URLs.\n     *\n     *  The available %%options%% are dependent on the platform\n     *  implementation of the default getUrl function.\n     *\n     *  This is not generally something that is needed, but is useful\n     *  when trying to customize simple behaviour when fetching HTTP\n     *  content.\n     */\n    static createGetUrlFunc(options?: Record<string, any>): FetchGetUrlFunc {\n        return createGetUrl(options);\n    }\n\n    /**\n     *  Creates a function that can \"fetch\" data URIs.\n     *\n     *  Note that this is automatically done internally to support\n     *  data URIs, so it is not necessary to register it.\n     *\n     *  This is not generally something that is needed, but may\n     *  be useful in a wrapper to perfom custom data URI functionality.\n     */\n    static createDataGateway(): FetchGatewayFunc {\n        return dataGatewayFunc;\n    }\n\n    /**\n     *  Creates a function that will fetch IPFS (unvalidated) from\n     *  a custom gateway baseUrl.\n     *\n     *  The default IPFS gateway used internally is\n     *  ``\"https:/\\/gateway.ipfs.io/ipfs/\"``.\n     */\n    static createIpfsGatewayFunc(baseUrl: string): FetchGatewayFunc {\n        return getIpfsGatewayFunc(baseUrl);\n    }\n}\n\n\ninterface ThrottleError extends Error {\n    stall: number;\n    throttle: true;\n};\n\n/**\n *  The response for a FetchRequest.\n */\nexport class FetchResponse implements Iterable<[ key: string, value: string ]> {\n    #statusCode: number;\n    #statusMessage: string;\n    #headers: Record<string, string>;\n    #body: null | Readonly<Uint8Array>;\n    #request: null | FetchRequest;\n\n    #error: { error?: Error, message: string };\n\n    toString(): string {\n        return `<FetchResponse status=${ this.statusCode } body=${ this.#body ? hexlify(this.#body): \"null\" }>`;\n    }\n\n    /**\n     *  The response status code.\n     */\n    get statusCode(): number { return this.#statusCode; }\n\n    /**\n     *  The response status message.\n     */\n    get statusMessage(): string { return this.#statusMessage; }\n\n    /**\n     *  The response headers. All keys are lower-case.\n     */\n    get headers(): Record<string, string> { return Object.assign({ }, this.#headers); }\n\n    /**\n     *  The response body, or ``null`` if there was no body.\n     */\n    get body(): null | Readonly<Uint8Array> {\n        return (this.#body == null) ? null: new Uint8Array(this.#body);\n    }\n\n    /**\n     *  The response body as a UTF-8 encoded string, or the empty\n     *  string (i.e. ``\"\"``) if there was no body.\n     *\n     *  An error is thrown if the body is invalid UTF-8 data.\n     */\n    get bodyText(): string {\n        try {\n            return (this.#body == null) ? \"\": toUtf8String(this.#body);\n        } catch (error) {\n            assert(false, \"response body is not valid UTF-8 data\", \"UNSUPPORTED_OPERATION\", {\n                operation: \"bodyText\", info: { response: this }\n            });\n        }\n    }\n\n    /**\n     *  The response body, decoded as JSON.\n     *\n     *  An error is thrown if the body is invalid JSON-encoded data\n     *  or if there was no body.\n     */\n    get bodyJson(): any {\n        try {\n            return JSON.parse(this.bodyText);\n        } catch (error) {\n            assert(false, \"response body is not valid JSON\", \"UNSUPPORTED_OPERATION\", {\n                operation: \"bodyJson\", info: { response: this }\n            });\n        }\n    }\n\n    [Symbol.iterator](): Iterator<[ key: string, value: string ]> {\n        const headers = this.headers;\n        const keys = Object.keys(headers);\n        let index = 0;\n        return {\n            next: () => {\n                if (index < keys.length) {\n                    const key = keys[index++];\n                    return {\n                        value: [ key, headers[key] ], done: false\n                    }\n                }\n                return { value: undefined, done: true };\n            }\n        };\n    }\n\n    constructor(statusCode: number, statusMessage: string, headers: Readonly<Record<string, string>>, body: null | Uint8Array, request?: FetchRequest) {\n        this.#statusCode = statusCode;\n        this.#statusMessage = statusMessage;\n        this.#headers = Object.keys(headers).reduce((accum, k) => {\n            accum[k.toLowerCase()] = String(headers[k]);\n            return accum;\n        }, <Record<string, string>>{ });\n        this.#body = ((body == null) ? null: new Uint8Array(body));\n        this.#request = (request || null);\n\n        this.#error = { message: \"\" };\n    }\n\n    /**\n     *  Return a Response with matching headers and body, but with\n     *  an error status code (i.e. 599) and %%message%% with an\n     *  optional %%error%%.\n     */\n    makeServerError(message?: string, error?: Error): FetchResponse {\n        let statusMessage: string;\n        if (!message) {\n            message = `${ this.statusCode } ${ this.statusMessage }`;\n            statusMessage = `CLIENT ESCALATED SERVER ERROR (${ message })`;\n        } else {\n            statusMessage = `CLIENT ESCALATED SERVER ERROR (${ this.statusCode } ${ this.statusMessage }; ${ message })`;\n        }\n        const response = new FetchResponse(599, statusMessage, this.headers,\n            this.body, this.#request || undefined);\n        response.#error = { message, error };\n        return response;\n    }\n\n    /**\n     *  If called within a [request.processFunc](FetchRequest-processFunc)\n     *  call, causes the request to retry as if throttled for %%stall%%\n     *  milliseconds.\n     */\n    throwThrottleError(message?: string, stall?: number): never {\n        if (stall == null) {\n            stall = -1;\n        } else {\n            assertArgument(Number.isInteger(stall) && stall >= 0, \"invalid stall timeout\", \"stall\", stall);\n        }\n\n        const error = new Error(message || \"throttling requests\");\n\n        defineProperties(<ThrottleError>error, { stall, throttle: true });\n\n        throw error;\n    }\n\n    /**\n     *  Get the header value for %%key%%, ignoring case.\n     */\n    getHeader(key: string): string {\n        return this.headers[key.toLowerCase()];\n    }\n\n    /**\n     *  Returns true if the response has a body.\n     */\n    hasBody(): this is (FetchResponse & { body: Uint8Array }) {\n        return (this.#body != null);\n    }\n\n    /**\n     *  The request made for this response.\n     */\n    get request(): null | FetchRequest { return this.#request; }\n\n    /**\n     *  Returns true if this response was a success statusCode.\n     */\n    ok(): boolean {\n        return (this.#error.message === \"\" && this.statusCode >= 200 && this.statusCode < 300);\n    }\n\n    /**\n     *  Throws a ``SERVER_ERROR`` if this response is not ok.\n     */\n    assertOk(): void {\n        if (this.ok()) { return; }\n        let { message, error } = this.#error;\n        if (message === \"\") {\n            message = `server response ${ this.statusCode } ${ this.statusMessage }`;\n        }\n\n        let requestUrl: null | string = null;\n        if (this.request) { requestUrl = this.request.url; }\n\n        let responseBody: null | string = null;\n        try {\n            if (this.#body) { responseBody = toUtf8String(this.#body); }\n        } catch (e) { }\n\n        assert(false, message, \"SERVER_ERROR\", {\n            request: (this.request || \"unknown request\"), response: this, error,\n            info: {\n                requestUrl, responseBody,\n                responseStatus: `${ this.statusCode } ${ this.statusMessage }` }\n        });\n    }\n}\n\n\nfunction getTime(): number { return (new Date()).getTime(); }\n\nfunction unpercent(value: string): Uint8Array {\n    return toUtf8Bytes(value.replace(/%([0-9a-f][0-9a-f])/gi, (all, code) => {\n        return String.fromCharCode(parseInt(code, 16));\n    }));\n}\n\nfunction wait(delay: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, delay));\n}\n","\n// utils/base64-browser\n\nimport { getBytes } from \"./data.js\";\n\nimport type { BytesLike } from \"./data.js\";\n\n\nexport function decodeBase64(textData: string): Uint8Array {\n    textData = atob(textData);\n    const data = new Uint8Array(textData.length);\n    for (let i = 0; i < textData.length; i++) {\n        data[i] = textData.charCodeAt(i);\n    }\n    return getBytes(data);\n}\n\nexport function encodeBase64(_data: BytesLike): string {\n    const data = getBytes(_data);\n    let textData = \"\";\n    for (let i = 0; i < data.length; i++) {\n        textData += String.fromCharCode(data[i]);\n    }\n    return btoa(textData);\n}\n","\n/**\n *  A constant for the zero address.\n *\n *  (**i.e.** ``\"0x0000000000000000000000000000000000000000\"``)\n */\nexport const ZeroAddress: string = \"0x0000000000000000000000000000000000000000\";\n\n","/**\n *  The Interface class is a low-level class that accepts an\n *  ABI and provides all the necessary functionality to encode\n *  and decode paramaters to and results from methods, events\n *  and errors.\n *\n *  It also provides several convenience methods to automatically\n *  search and find matching transactions and events to parse them.\n *\n *  @_subsection api/abi:Interfaces  [interfaces]\n */\n\nimport { keccak256 } from \"../crypto/index.js\"\nimport { id } from \"../hash/index.js\"\nimport {\n    concat, dataSlice, getBigInt, getBytes, getBytesCopy,\n    hexlify, zeroPadBytes, zeroPadValue, isHexString, defineProperties,\n    assertArgument, toBeHex, assert\n} from \"../utils/index.js\";\n\nimport { AbiCoder } from \"./abi-coder.js\";\nimport { checkResultErrors, Result } from \"./coders/abstract-coder.js\";\nimport {\n    ConstructorFragment, ErrorFragment, EventFragment, FallbackFragment,\n    Fragment, FunctionFragment, ParamType\n} from \"./fragments.js\";\nimport { Typed } from \"./typed.js\";\n\nimport type { BigNumberish, BytesLike, CallExceptionError, CallExceptionTransaction } from \"../utils/index.js\";\n\nimport type { JsonFragment } from \"./fragments.js\";\n\n\nexport { checkResultErrors, Result };\n\n/**\n *  When using the [[Interface-parseLog]] to automatically match a Log to its event\n *  for parsing, a **LogDescription** is returned.\n */\nexport class LogDescription {\n    /**\n     *  The matching fragment for the ``topic0``.\n     */\n    readonly fragment!: EventFragment;\n\n    /**\n     *  The name of the Event.\n     */\n    readonly name!: string;\n\n    /**\n     *  The full Event signature.\n     */\n    readonly signature!: string;\n\n    /**\n     *  The topic hash for the Event.\n     */\n    readonly topic!: string;\n\n    /**\n     *  The arguments passed into the Event with ``emit``.\n     */\n    readonly args!: Result\n\n    /**\n     *  @_ignore:\n     */\n    constructor(fragment: EventFragment, topic: string, args: Result) {\n        const name = fragment.name, signature = fragment.format();\n        defineProperties<LogDescription>(this, {\n            fragment, name, signature, topic, args\n        });\n    }\n}\n\n/**\n *  When using the [[Interface-parseTransaction]] to automatically match\n *  a transaction data to its function for parsing,\n *  a **TransactionDescription** is returned.\n */\nexport class TransactionDescription {\n    /**\n     *  The matching fragment from the transaction ``data``.\n     */\n    readonly fragment!: FunctionFragment;\n\n    /**\n     *  The name of the Function from the transaction ``data``.\n     */\n    readonly name!: string;\n\n    /**\n     *  The arguments passed to the Function from the transaction ``data``.\n     */\n    readonly args!: Result;\n\n    /**\n     *  The full Function signature from the transaction ``data``.\n     */\n    readonly signature!: string;\n\n    /**\n     *  The selector for the Function from the transaction ``data``.\n     */\n    readonly selector!: string;\n\n    /**\n     *  The ``value`` (in wei) from the transaction.\n     */\n    readonly value!: bigint;\n\n    /**\n     *  @_ignore:\n     */\n    constructor(fragment: FunctionFragment, selector: string, args: Result, value: bigint) {\n        const name = fragment.name, signature = fragment.format();\n        defineProperties<TransactionDescription>(this, {\n            fragment, name, args, signature, selector, value\n        });\n    }\n}\n\n/**\n *  When using the [[Interface-parseError]] to automatically match an\n *  error for a call result for parsing, an **ErrorDescription** is returned.\n */\nexport class ErrorDescription {\n    /**\n     *  The matching fragment.\n     */\n    readonly fragment!: ErrorFragment;\n\n    /**\n     *  The name of the Error.\n     */\n    readonly name!: string;\n\n    /**\n     *  The arguments passed to the Error with ``revert``.\n     */\n    readonly args!: Result;\n\n    /**\n     *  The full Error signature.\n     */\n    readonly signature!: string;\n\n    /**\n     *  The selector for the Error.\n     */\n    readonly selector!: string;\n\n    /**\n     *  @_ignore:\n     */\n    constructor(fragment: ErrorFragment, selector: string, args: Result) {\n        const name = fragment.name, signature = fragment.format();\n        defineProperties<ErrorDescription>(this, {\n            fragment, name, args, signature, selector\n        });\n    }\n}\n\n/**\n *  An **Indexed** is used as a value when a value that does not\n *  fit within a topic (i.e. not a fixed-length, 32-byte type). It\n *  is the ``keccak256`` of the value, and used for types such as\n *  arrays, tuples, bytes and strings.\n */\nexport class Indexed {\n    /**\n     *  The ``keccak256`` of the value logged.\n     */\n    readonly hash!: null | string;\n\n    /**\n     *  @_ignore:\n     */\n    readonly _isIndexed!: boolean;\n\n    /**\n     *  Returns ``true`` if %%value%% is an **Indexed**.\n     *\n     *  This provides a Type Guard for property access.\n     */\n    static isIndexed(value: any): value is Indexed {\n        return !!(value && value._isIndexed);\n    }\n\n    /**\n     *  @_ignore:\n     */\n    constructor(hash: null | string) {\n        defineProperties<Indexed>(this, { hash, _isIndexed: true })\n    }\n}\n\ntype ErrorInfo = {\n    signature: string,\n    inputs: Array<string>,\n    name: string,\n    reason: (...args: Array<any>) => string;\n};\n\n// https://docs.soliditylang.org/en/v0.8.13/control-structures.html?highlight=panic#panic-via-assert-and-error-via-require\nconst PanicReasons: Record<string, string> = {\n    \"0\": \"generic panic\",\n    \"1\": \"assert(false)\",\n    \"17\": \"arithmetic overflow\",\n    \"18\": \"division or modulo by zero\",\n    \"33\": \"enum overflow\",\n    \"34\": \"invalid encoded storage byte array accessed\",\n    \"49\": \"out-of-bounds array access; popping on an empty array\",\n    \"50\": \"out-of-bounds access of an array or bytesN\",\n    \"65\": \"out of memory\",\n    \"81\": \"uninitialized function\",\n}\n\nconst BuiltinErrors: Record<string, ErrorInfo> = {\n    \"0x08c379a0\": {\n        signature: \"Error(string)\",\n        name: \"Error\",\n        inputs: [ \"string\" ],\n        reason: (message: string) => {\n            return `reverted with reason string ${ JSON.stringify(message) }`;\n        }\n    },\n    \"0x4e487b71\": {\n        signature: \"Panic(uint256)\",\n        name: \"Panic\",\n        inputs: [ \"uint256\" ],\n        reason: (code: bigint) => {\n            let reason = \"unknown panic code\";\n            if (code >= 0 && code <= 0xff && PanicReasons[code.toString()]) {\n                reason = PanicReasons[code.toString()];\n            }\n            return `reverted with panic code 0x${ code.toString(16) } (${ reason })`;\n        }\n    }\n}\n\n/*\nfunction wrapAccessError(property: string, error: Error): Error {\n    const wrap = new Error(`deferred error during ABI decoding triggered accessing ${ property }`);\n    (<any>wrap).error = error;\n    return wrap;\n}\n*/\n/*\nfunction checkNames(fragment: Fragment, type: \"input\" | \"output\", params: Array<ParamType>): void {\n    params.reduce((accum, param) => {\n        if (param.name) {\n            if (accum[param.name]) {\n                logger.throwArgumentError(`duplicate ${ type } parameter ${ JSON.stringify(param.name) } in ${ fragment.format(\"full\") }`, \"fragment\", fragment);\n            }\n            accum[param.name] = true;\n        }\n        return accum;\n    }, <{ [ name: string ]: boolean }>{ });\n}\n*/\n\n/**\n *  An **InterfaceAbi** may be any supported ABI format.\n *\n *  A string is expected to be a JSON string, which will be parsed\n *  using ``JSON.parse``. This means that the value **must** be a valid\n *  JSON string, with no stray commas, etc.\n *\n *  An array may contain any combination of:\n *  - Human-Readable fragments\n *  - Parsed JSON fragment\n *  - [[Fragment]] instances\n *\n *  A **Human-Readable Fragment** is a string which resembles a Solidity\n *  signature and is introduced in [this blog entry](link-ricmoo-humanreadableabi).\n *  For example, ``function balanceOf(address) view returns (uint)``.\n *\n *  A **Parsed JSON Fragment** is a JavaScript Object desribed in the\n *  [Solidity documentation](link-solc-jsonabi).\n */\nexport type InterfaceAbi = string | ReadonlyArray<Fragment | JsonFragment | string>;\n\n/**\n *  An Interface abstracts many of the low-level details for\n *  encoding and decoding the data on the blockchain.\n *\n *  An ABI provides information on how to encode data to send to\n *  a Contract, how to decode the results and events and how to\n *  interpret revert errors.\n *\n *  The ABI can be specified by [any supported format](InterfaceAbi).\n */\nexport class Interface {\n\n    /**\n     *  All the Contract ABI members (i.e. methods, events, errors, etc).\n     */\n    readonly fragments!: ReadonlyArray<Fragment>;\n\n    /**\n     *  The Contract constructor.\n     */\n    readonly deploy!: ConstructorFragment;\n\n    /**\n     *  The Fallback method, if any.\n     */\n    readonly fallback!: null | FallbackFragment;\n\n    /**\n     *  If receiving ether is supported.\n     */\n    readonly receive!: boolean;\n\n    #errors: Map<string, ErrorFragment>;\n    #events: Map<string, EventFragment>;\n    #functions: Map<string, FunctionFragment>;\n//    #structs: Map<string, StructFragment>;\n\n    #abiCoder: AbiCoder;\n\n    /**\n     *  Create a new Interface for the %%fragments%%.\n     */\n    constructor(fragments: InterfaceAbi) {\n        let abi: ReadonlyArray<Fragment | JsonFragment | string> = [ ];\n        if (typeof(fragments) === \"string\") {\n            abi = JSON.parse(fragments);\n        } else {\n            abi = fragments;\n        }\n\n        this.#functions = new Map();\n        this.#errors = new Map();\n        this.#events = new Map();\n//        this.#structs = new Map();\n\n\n        const frags: Array<Fragment> = [ ];\n        for (const a of abi) {\n            try {\n                frags.push(Fragment.from(a));\n            } catch (error: any) {\n                console.log(`[Warning] Invalid Fragment ${ JSON.stringify(a) }:`, error.message);\n            }\n        }\n\n        defineProperties<Interface>(this, {\n            fragments: Object.freeze(frags)\n        });\n\n        let fallback: null | FallbackFragment = null;\n        let receive = false;\n\n        this.#abiCoder = this.getAbiCoder();\n\n        // Add all fragments by their signature\n        this.fragments.forEach((fragment, index) => {\n            let bucket: Map<string, Fragment>;\n            switch (fragment.type) {\n                case \"constructor\":\n                    if (this.deploy) {\n                        console.log(\"duplicate definition - constructor\");\n                        return;\n                    }\n                    //checkNames(fragment, \"input\", fragment.inputs);\n                    defineProperties<Interface>(this, { deploy: <ConstructorFragment>fragment });\n                    return;\n\n                case \"fallback\":\n                    if (fragment.inputs.length === 0) {\n                        receive = true;\n                    } else {\n                        assertArgument(!fallback || (<FallbackFragment>fragment).payable !== fallback.payable,\n                            \"conflicting fallback fragments\", `fragments[${ index }]`, fragment);\n                        fallback = <FallbackFragment>fragment;\n                        receive = fallback.payable;\n                    }\n                    return;\n\n                case \"function\":\n                    //checkNames(fragment, \"input\", fragment.inputs);\n                    //checkNames(fragment, \"output\", (<FunctionFragment>fragment).outputs);\n                    bucket = this.#functions;\n                    break;\n\n                case \"event\":\n                    //checkNames(fragment, \"input\", fragment.inputs);\n                    bucket = this.#events;\n                    break;\n\n                case \"error\":\n                    bucket = this.#errors;\n                    break;\n\n                default:\n                    return;\n            }\n\n            // Two identical entries; ignore it\n            const signature = fragment.format();\n            if (bucket.has(signature)) { return; }\n\n            bucket.set(signature, fragment);\n        });\n\n        // If we do not have a constructor add a default\n        if (!this.deploy) {\n            defineProperties<Interface>(this, {\n                deploy: ConstructorFragment.from(\"constructor()\")\n            });\n        }\n\n        defineProperties<Interface>(this, { fallback, receive });\n    }\n\n    /**\n     *  Returns the entire Human-Readable ABI, as an array of\n     *  signatures, optionally as %%minimal%% strings, which\n     *  removes parameter names and unneceesary spaces.\n     */\n    format(minimal?: boolean): Array<string> {\n        const format = (minimal ? \"minimal\": \"full\");\n        const abi = this.fragments.map((f) => f.format(format));\n        return abi;\n    }\n\n    /**\n     *  Return the JSON-encoded ABI. This is the format Solidiy\n     *  returns.\n     */\n    formatJson(): string {\n        const abi = this.fragments.map((f) => f.format(\"json\"));\n\n        // We need to re-bundle the JSON fragments a bit\n        return JSON.stringify(abi.map((j) => JSON.parse(j)));\n    }\n\n    /**\n     *  The ABI coder that will be used to encode and decode binary\n     *  data.\n     */\n    getAbiCoder(): AbiCoder {\n        return AbiCoder.defaultAbiCoder();\n    }\n\n    // Find a function definition by any means necessary (unless it is ambiguous)\n    #getFunction(key: string, values: null | Array<any | Typed>, forceUnique: boolean): null | FunctionFragment {\n\n        // Selector\n        if (isHexString(key)) {\n            const selector = key.toLowerCase();\n            for (const fragment of this.#functions.values()) {\n                if (selector === fragment.selector) { return fragment; }\n            }\n            return null;\n        }\n\n        // It is a bare name, look up the function (will return null if ambiguous)\n        if (key.indexOf(\"(\") === -1) {\n            const matching: Array<FunctionFragment> = [ ];\n            for (const [ name, fragment ] of this.#functions) {\n                if (name.split(\"(\"/* fix:) */)[0] === key) { matching.push(fragment); }\n            }\n\n            if (values) {\n                const lastValue = (values.length > 0) ? values[values.length - 1]: null;\n\n                let valueLength = values.length;\n                let allowOptions = true;\n                if (Typed.isTyped(lastValue) && lastValue.type === \"overrides\") {\n                    allowOptions = false;\n                    valueLength--;\n                }\n\n                // Remove all matches that don't have a compatible length. The args\n                // may contain an overrides, so the match may have n or n - 1 parameters\n                for (let i = matching.length - 1; i >= 0; i--) {\n                    const inputs = matching[i].inputs.length;\n                    if (inputs !== valueLength && (!allowOptions || inputs !== valueLength - 1)) {\n                        matching.splice(i, 1);\n                    }\n                }\n\n                // Remove all matches that don't match the Typed signature\n                for (let i = matching.length - 1; i >= 0; i--) {\n                    const inputs = matching[i].inputs;\n                    for (let j = 0; j < values.length; j++) {\n                        // Not a typed value\n                        if (!Typed.isTyped(values[j])) { continue; }\n\n                        // We are past the inputs\n                        if (j >= inputs.length) {\n                            if (values[j].type === \"overrides\") { continue; }\n                            matching.splice(i, 1);\n                            break;\n                        }\n\n                        // Make sure the value type matches the input type\n                        if (values[j].type !== inputs[j].baseType) {\n                            matching.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n            }\n\n            // We found a single matching signature with an overrides, but the\n            // last value is something that cannot possibly be an options\n            if (matching.length === 1 && values && values.length !== matching[0].inputs.length) {\n                const lastArg = values[values.length - 1];\n                if (lastArg == null || Array.isArray(lastArg) || typeof(lastArg) !== \"object\") {\n                    matching.splice(0, 1);\n                }\n            }\n\n            if (matching.length === 0) { return null; }\n\n            if (matching.length > 1 && forceUnique) {\n                const matchStr = matching.map((m) => JSON.stringify(m.format())).join(\", \");\n                assertArgument(false, `ambiguous function description (i.e. matches ${ matchStr })`, \"key\", key);\n            }\n\n            return matching[0];\n        }\n\n        // Normalize the signature and lookup the function\n        const result = this.#functions.get(FunctionFragment.from(key).format());\n        if (result) { return result; }\n\n        return null;\n    }\n\n    /**\n     *  Get the function name for %%key%%, which may be a function selector,\n     *  function name or function signature that belongs to the ABI.\n     */\n    getFunctionName(key: string): string {\n        const fragment = this.#getFunction(key, null, false);\n        assertArgument(fragment, \"no matching function\", \"key\", key);\n        return fragment.name;\n    }\n\n    /**\n     *  Returns true if %%key%% (a function selector, function name or\n     *  function signature) is present in the ABI.\n     *\n     *  In the case of a function name, the name may be ambiguous, so\n     *  accessing the [[FunctionFragment]] may require refinement.\n     */\n    hasFunction(key: string): boolean {\n        return !!this.#getFunction(key, null, false);\n    }\n\n    /**\n     *  Get the [[FunctionFragment]] for %%key%%, which may be a function\n     *  selector, function name or function signature that belongs to the ABI.\n     *\n     *  If %%values%% is provided, it will use the Typed API to handle\n     *  ambiguous cases where multiple functions match by name.\n     *\n     *  If the %%key%% and %%values%% do not refine to a single function in\n     *  the ABI, this will throw.\n     */\n    getFunction(key: string, values?: Array<any | Typed>): null | FunctionFragment {\n        return this.#getFunction(key, values || null, true);\n    }\n\n    /**\n     *  Iterate over all functions, calling %%callback%%, sorted by their name.\n     */\n    forEachFunction(callback: (func: FunctionFragment, index: number) => void): void {\n        const names = Array.from(this.#functions.keys());\n        names.sort((a, b) => a.localeCompare(b));\n        for (let i = 0; i < names.length; i++) {\n            const name = names[i];\n            callback(<FunctionFragment>(this.#functions.get(name)), i);\n        }\n    }\n\n\n    // Find an event definition by any means necessary (unless it is ambiguous)\n    #getEvent(key: string, values: null | Array<null | any | Typed>, forceUnique: boolean): null | EventFragment {\n\n        // EventTopic\n        if (isHexString(key)) {\n            const eventTopic = key.toLowerCase();\n            for (const fragment of this.#events.values()) {\n                if (eventTopic === fragment.topicHash) { return fragment; }\n            }\n            return null;\n        }\n\n        // It is a bare name, look up the function (will return null if ambiguous)\n        if (key.indexOf(\"(\") === -1) {\n            const matching: Array<EventFragment> = [ ];\n            for (const [ name, fragment ] of this.#events) {\n                if (name.split(\"(\"/* fix:) */)[0] === key) { matching.push(fragment); }\n            }\n\n            if (values) {\n                // Remove all matches that don't have a compatible length.\n                for (let i = matching.length - 1; i >= 0; i--) {\n                    if (matching[i].inputs.length < values.length) {\n                        matching.splice(i, 1);\n                    }\n                }\n\n                // Remove all matches that don't match the Typed signature\n                for (let i = matching.length - 1; i >= 0; i--) {\n                    const inputs = matching[i].inputs;\n                    for (let j = 0; j < values.length; j++) {\n                        // Not a typed value\n                        if (!Typed.isTyped(values[j])) { continue; }\n\n                        // Make sure the value type matches the input type\n                        if (values[j].type !== inputs[j].baseType) {\n                            matching.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n            }\n\n            if (matching.length === 0) { return null; }\n\n            if (matching.length > 1 && forceUnique) {\n                const matchStr = matching.map((m) => JSON.stringify(m.format())).join(\", \");\n                assertArgument(false, `ambiguous event description (i.e. matches ${ matchStr })`, \"key\", key);\n            }\n\n            return matching[0];\n        }\n\n        // Normalize the signature and lookup the function\n        const result = this.#events.get(EventFragment.from(key).format());\n        if (result) { return result; }\n\n        return null;\n    }\n\n    /**\n     *  Get the event name for %%key%%, which may be a topic hash,\n     *  event name or event signature that belongs to the ABI.\n     */\n    getEventName(key: string): string {\n        const fragment = this.#getEvent(key, null, false);\n        assertArgument(fragment, \"no matching event\", \"key\", key);\n\n        return fragment.name;\n    }\n\n    /**\n     *  Returns true if %%key%% (an event topic hash, event name or\n     *  event signature) is present in the ABI.\n     *\n     *  In the case of an event name, the name may be ambiguous, so\n     *  accessing the [[EventFragment]] may require refinement.\n     */\n    hasEvent(key: string): boolean {\n        return !!this.#getEvent(key, null, false);\n    }\n\n    /**\n     *  Get the [[EventFragment]] for %%key%%, which may be a topic hash,\n     *  event name or event signature that belongs to the ABI.\n     *\n     *  If %%values%% is provided, it will use the Typed API to handle\n     *  ambiguous cases where multiple events match by name.\n     *\n     *  If the %%key%% and %%values%% do not refine to a single event in\n     *  the ABI, this will throw.\n     */\n    getEvent(key: string, values?: Array<any | Typed>): null | EventFragment {\n        return this.#getEvent(key, values || null, true)\n    }\n\n    /**\n     *  Iterate over all events, calling %%callback%%, sorted by their name.\n     */\n    forEachEvent(callback: (func: EventFragment, index: number) => void): void {\n        const names = Array.from(this.#events.keys());\n        names.sort((a, b) => a.localeCompare(b));\n        for (let i = 0; i < names.length; i++) {\n            const name = names[i];\n            callback(<EventFragment>(this.#events.get(name)), i);\n        }\n    }\n\n    /**\n     *  Get the [[ErrorFragment]] for %%key%%, which may be an error\n     *  selector, error name or error signature that belongs to the ABI.\n     *\n     *  If %%values%% is provided, it will use the Typed API to handle\n     *  ambiguous cases where multiple errors match by name.\n     *\n     *  If the %%key%% and %%values%% do not refine to a single error in\n     *  the ABI, this will throw.\n     */\n    getError(key: string, values?: Array<any | Typed>): null | ErrorFragment {\n        if (isHexString(key)) {\n            const selector = key.toLowerCase();\n\n            if (BuiltinErrors[selector]) {\n                return ErrorFragment.from(BuiltinErrors[selector].signature);\n            }\n\n            for (const fragment of this.#errors.values()) {\n                if (selector === fragment.selector) { return fragment; }\n            }\n\n            return null;\n        }\n\n        // It is a bare name, look up the function (will return null if ambiguous)\n        if (key.indexOf(\"(\") === -1) {\n            const matching: Array<ErrorFragment> = [ ];\n            for (const [ name, fragment ] of this.#errors) {\n                if (name.split(\"(\"/* fix:) */)[0] === key) { matching.push(fragment); }\n            }\n\n            if (matching.length === 0) {\n                if (key === \"Error\") { return ErrorFragment.from(\"error Error(string)\"); }\n                if (key === \"Panic\") { return ErrorFragment.from(\"error Panic(uint256)\"); }\n                return null;\n            } else if (matching.length > 1) {\n                const matchStr = matching.map((m) => JSON.stringify(m.format())).join(\", \");\n                assertArgument(false, `ambiguous error description (i.e. ${ matchStr })`, \"name\", key);\n            }\n\n            return matching[0];\n        }\n\n        // Normalize the signature and lookup the function\n        key = ErrorFragment.from(key).format()\n        if (key === \"Error(string)\") { return ErrorFragment.from(\"error Error(string)\"); }\n        if (key === \"Panic(uint256)\") { return ErrorFragment.from(\"error Panic(uint256)\"); }\n\n        const result = this.#errors.get(key);\n        if (result) { return result; }\n\n        return null;\n    }\n\n    /**\n     *  Iterate over all errors, calling %%callback%%, sorted by their name.\n     */\n    forEachError(callback: (func: ErrorFragment, index: number) => void): void {\n        const names = Array.from(this.#errors.keys());\n        names.sort((a, b) => a.localeCompare(b));\n        for (let i = 0; i < names.length; i++) {\n            const name = names[i];\n            callback(<ErrorFragment>(this.#errors.get(name)), i);\n        }\n    }\n\n    // Get the 4-byte selector used by Solidity to identify a function\n        /*\n    getSelector(fragment: ErrorFragment | FunctionFragment): string {\n        if (typeof(fragment) === \"string\") {\n            const matches: Array<Fragment> = [ ];\n\n            try { matches.push(this.getFunction(fragment)); } catch (error) { }\n            try { matches.push(this.getError(<string>fragment)); } catch (_) { }\n\n            if (matches.length === 0) {\n                logger.throwArgumentError(\"unknown fragment\", \"key\", fragment);\n            } else if (matches.length > 1) {\n                logger.throwArgumentError(\"ambiguous fragment matches function and error\", \"key\", fragment);\n            }\n\n            fragment = matches[0];\n        }\n\n        return dataSlice(id(fragment.format()), 0, 4);\n    }\n        */\n\n    // Get the 32-byte topic hash used by Solidity to identify an event\n    /*\n    getEventTopic(fragment: EventFragment): string {\n        //if (typeof(fragment) === \"string\") { fragment = this.getEvent(eventFragment); }\n        return id(fragment.format());\n    }\n    */\n\n\n    _decodeParams(params: ReadonlyArray<ParamType>, data: BytesLike): Result {\n        return this.#abiCoder.decode(params, data)\n    }\n\n    _encodeParams(params: ReadonlyArray<ParamType>, values: ReadonlyArray<any>): string {\n        return this.#abiCoder.encode(params, values)\n    }\n\n    /**\n     *  Encodes a ``tx.data`` object for deploying the Contract with\n     *  the %%values%% as the constructor arguments.\n     */\n    encodeDeploy(values?: ReadonlyArray<any>): string {\n        return this._encodeParams(this.deploy.inputs, values || [ ]);\n    }\n\n    /**\n     *  Decodes the result %%data%% (e.g. from an ``eth_call``) for the\n     *  specified error (see [[getError]] for valid values for\n     *  %%key%%).\n     *\n     *  Most developers should prefer the [[parseCallResult]] method instead,\n     *  which will automatically detect a ``CALL_EXCEPTION`` and throw the\n     *  corresponding error.\n     */\n    decodeErrorResult(fragment: ErrorFragment | string, data: BytesLike): Result {\n        if (typeof(fragment) === \"string\") {\n            const f = this.getError(fragment);\n            assertArgument(f, \"unknown error\", \"fragment\", fragment);\n            fragment = f;\n        }\n\n        assertArgument(dataSlice(data, 0, 4) === fragment.selector,\n            `data signature does not match error ${ fragment.name }.`, \"data\", data);\n\n        return this._decodeParams(fragment.inputs, dataSlice(data, 4));\n    }\n\n    /**\n     *  Encodes the transaction revert data for a call result that\n     *  reverted from the the Contract with the sepcified %%error%%\n     *  (see [[getError]] for valid values for %%fragment%%) with the %%values%%.\n     *\n     *  This is generally not used by most developers, unless trying to mock\n     *  a result from a Contract.\n     */\n    encodeErrorResult(fragment: ErrorFragment | string, values?: ReadonlyArray<any>): string {\n        if (typeof(fragment) === \"string\") {\n            const f = this.getError(fragment);\n            assertArgument(f, \"unknown error\", \"fragment\", fragment);\n            fragment = f;\n        }\n\n        return concat([\n            fragment.selector,\n            this._encodeParams(fragment.inputs, values || [ ])\n        ]);\n    }\n\n    /**\n     *  Decodes the %%data%% from a transaction ``tx.data`` for\n     *  the function specified (see [[getFunction]] for valid values\n     *  for %%fragment%%).\n     *\n     *  Most developers should prefer the [[parseTransaction]] method\n     *  instead, which will automatically detect the fragment.\n     */\n    decodeFunctionData(fragment: FunctionFragment | string, data: BytesLike): Result {\n        if (typeof(fragment) === \"string\") {\n            const f = this.getFunction(fragment);\n            assertArgument(f, \"unknown function\", \"fragment\", fragment);\n            fragment = f;\n        }\n\n        assertArgument(dataSlice(data, 0, 4) === fragment.selector,\n            `data signature does not match function ${ fragment.name }.`, \"data\", data);\n\n        return this._decodeParams(fragment.inputs, dataSlice(data, 4));\n    }\n\n    /**\n     *  Encodes the ``tx.data`` for a transaction that calls the function\n     *  specified (see [[getFunction]] for valid values for %%fragment%%) with\n     *  the %%values%%.\n     */\n    encodeFunctionData(fragment: FunctionFragment | string, values?: ReadonlyArray<any>): string {\n        if (typeof(fragment) === \"string\") {\n            const f = this.getFunction(fragment);\n            assertArgument(f, \"unknown function\", \"fragment\", fragment);\n            fragment = f;\n        }\n\n        return concat([\n            fragment.selector,\n            this._encodeParams(fragment.inputs, values || [ ])\n        ]);\n    }\n\n    /**\n     *  Decodes the result %%data%% (e.g. from an ``eth_call``) for the\n     *  specified function (see [[getFunction]] for valid values for\n     *  %%key%%).\n     *\n     *  Most developers should prefer the [[parseCallResult]] method instead,\n     *  which will automatically detect a ``CALL_EXCEPTION`` and throw the\n     *  corresponding error.\n     */\n    decodeFunctionResult(fragment: FunctionFragment | string, data: BytesLike): Result {\n        if (typeof(fragment) === \"string\") {\n            const f = this.getFunction(fragment);\n            assertArgument(f, \"unknown function\", \"fragment\", fragment);\n            fragment = f;\n        }\n\n        let message = \"invalid length for result data\";\n\n        const bytes = getBytesCopy(data);\n        if ((bytes.length % 32) === 0) {\n            try {\n                return this.#abiCoder.decode(fragment.outputs, bytes);\n            } catch (error) {\n                message = \"could not decode result data\";\n            }\n        }\n\n        // Call returned data with no error, but the data is junk\n        assert(false, message, \"BAD_DATA\", {\n            value: hexlify(bytes),\n            info: { method: fragment.name, signature: fragment.format() }\n        });\n    }\n\n    makeError(_data: BytesLike, tx: CallExceptionTransaction): CallExceptionError {\n        const data = getBytes(_data, \"data\");\n\n        const error = AbiCoder.getBuiltinCallException(\"call\", tx, data);\n\n        // Not a built-in error; try finding a custom error\n        const customPrefix = \"execution reverted (unknown custom error)\";\n        if (error.message.startsWith(customPrefix)) {\n            const selector = hexlify(data.slice(0, 4));\n\n            const ef = this.getError(selector);\n            if (ef) {\n                try {\n                    const args = this.#abiCoder.decode(ef.inputs, data.slice(4));\n                    error.revert = {\n                        name: ef.name, signature: ef.format(), args\n                    };\n                    error.reason = error.revert.signature;\n                    error.message = `execution reverted: ${ error.reason }`\n                 } catch (e) {\n                    error.message = `execution reverted (coult not decode custom error)`\n                }\n            }\n        }\n\n        // Add the invocation, if available\n        const parsed = this.parseTransaction(tx);\n        if (parsed) {\n            error.invocation = {\n                method: parsed.name,\n                signature: parsed.signature,\n                args: parsed.args\n            };\n        }\n\n        return error;\n    }\n\n    /**\n     *  Encodes the result data (e.g. from an ``eth_call``) for the\n     *  specified function (see [[getFunction]] for valid values\n     *  for %%fragment%%) with %%values%%.\n     *\n     *  This is generally not used by most developers, unless trying to mock\n     *  a result from a Contract.\n     */\n    encodeFunctionResult(fragment: FunctionFragment | string, values?: ReadonlyArray<any>): string {\n        if (typeof(fragment) === \"string\") {\n            const f = this.getFunction(fragment);\n            assertArgument(f, \"unknown function\", \"fragment\", fragment);\n            fragment = f;\n        }\n        return hexlify(this.#abiCoder.encode(fragment.outputs, values || [ ]));\n    }\n/*\n    spelunk(inputs: Array<ParamType>, values: ReadonlyArray<any>, processfunc: (type: string, value: any) => Promise<any>): Promise<Array<any>> {\n        const promises: Array<Promise<>> = [ ];\n        const process = function(type: ParamType, value: any): any {\n            if (type.baseType === \"array\") {\n                return descend(type.child\n            }\n            if (type. === \"address\") {\n            }\n        };\n\n        const descend = function (inputs: Array<ParamType>, values: ReadonlyArray<any>) {\n            if (inputs.length !== values.length) { throw new Error(\"length mismatch\"); }\n            \n        };\n\n        const result: Array<any> = [ ];\n        values.forEach((value, index) => {\n            if (value == null) {\n                topics.push(null);\n            } else if (param.baseType === \"array\" || param.baseType === \"tuple\") {\n                logger.throwArgumentError(\"filtering with tuples or arrays not supported\", (\"contract.\" + param.name), value);\n            } else if (Array.isArray(value)) {\n                topics.push(value.map((value) => encodeTopic(param, value)));\n            } else {\n                topics.push(encodeTopic(param, value));\n            }\n        });\n    }\n*/\n    // Create the filter for the event with search criteria (e.g. for eth_filterLog)\n    encodeFilterTopics(fragment: EventFragment | string, values: ReadonlyArray<any>): Array<null | string | Array<string>> {\n        if (typeof(fragment) === \"string\") {\n            const f = this.getEvent(fragment);\n            assertArgument(f, \"unknown event\", \"eventFragment\", fragment);\n            fragment = f;\n        }\n\n        assert(values.length <= fragment.inputs.length, `too many arguments for ${ fragment.format() }`,\n            \"UNEXPECTED_ARGUMENT\", { count: values.length, expectedCount: fragment.inputs.length })\n\n        const topics: Array<null | string | Array<string>> = [];\n        if (!fragment.anonymous) { topics.push(fragment.topicHash); }\n\n        // @TODO: Use the coders for this; to properly support tuples, etc.\n        const encodeTopic = (param: ParamType, value: any): string => {\n            if (param.type === \"string\") {\n                 return id(value);\n            } else if (param.type === \"bytes\") {\n                 return keccak256(hexlify(value));\n            }\n\n            if (param.type === \"bool\" && typeof(value) === \"boolean\") {\n                value = (value ? \"0x01\": \"0x00\");\n            } else if (param.type.match(/^u?int/)) {\n                value = toBeHex(value);  // @TODO: Should this toTwos??\n            } else if (param.type.match(/^bytes/)) {\n                value = zeroPadBytes(value, 32);\n            } else if (param.type === \"address\") {\n                // Check addresses are valid\n                this.#abiCoder.encode( [ \"address\" ], [ value ]);\n            }\n\n            return zeroPadValue(hexlify(value), 32);\n        };\n\n        values.forEach((value, index) => {\n\n            const param = (<EventFragment>fragment).inputs[index];\n\n            if (!param.indexed) {\n                assertArgument(value == null,\n                    \"cannot filter non-indexed parameters; must be null\", (\"contract.\" + param.name), value);\n                return;\n            }\n\n            if (value == null) {\n                topics.push(null);\n            } else if (param.baseType === \"array\" || param.baseType === \"tuple\") {\n                assertArgument(false, \"filtering with tuples or arrays not supported\", (\"contract.\" + param.name), value);\n            } else if (Array.isArray(value)) {\n                topics.push(value.map((value) => encodeTopic(param, value)));\n            } else {\n                topics.push(encodeTopic(param, value));\n            }\n        });\n\n        // Trim off trailing nulls\n        while (topics.length && topics[topics.length - 1] === null) {\n            topics.pop();\n        }\n\n        return topics;\n    }\n\n    encodeEventLog(fragment: EventFragment | string, values: ReadonlyArray<any>): { data: string, topics: Array<string> } {\n        if (typeof(fragment) === \"string\") {\n            const f = this.getEvent(fragment);\n            assertArgument(f, \"unknown event\", \"eventFragment\", fragment);\n            fragment = f;\n        }\n\n        const topics: Array<string> = [ ];\n\n        const dataTypes: Array<ParamType> = [ ];\n        const dataValues: Array<string> = [ ];\n\n        if (!fragment.anonymous) {\n            topics.push(fragment.topicHash);\n        }\n\n        assertArgument(values.length === fragment.inputs.length,\n            \"event arguments/values mismatch\", \"values\", values);\n\n        fragment.inputs.forEach((param, index) => {\n            const value = values[index];\n            if (param.indexed) {\n                if (param.type === \"string\") {\n                    topics.push(id(value))\n                } else if (param.type === \"bytes\") {\n                    topics.push(keccak256(value))\n                } else if (param.baseType === \"tuple\" || param.baseType === \"array\") {\n                    // @TODO\n                    throw new Error(\"not implemented\");\n                } else {\n                    topics.push(this.#abiCoder.encode([ param.type] , [ value ]));\n                }\n            } else {\n                dataTypes.push(param);\n                dataValues.push(value);\n            }\n        });\n\n        return {\n            data: this.#abiCoder.encode(dataTypes , dataValues),\n            topics: topics\n        };\n    }\n\n    // Decode a filter for the event and the search criteria\n    decodeEventLog(fragment: EventFragment | string, data: BytesLike, topics?: ReadonlyArray<string>): Result {\n        if (typeof(fragment) === \"string\") {\n            const f = this.getEvent(fragment);\n            assertArgument(f, \"unknown event\", \"eventFragment\", fragment);\n            fragment = f;\n        }\n\n        if (topics != null && !fragment.anonymous) {\n            const eventTopic = fragment.topicHash;\n            assertArgument(isHexString(topics[0], 32) && topics[0].toLowerCase() === eventTopic,\n                \"fragment/topic mismatch\", \"topics[0]\", topics[0]);\n            topics = topics.slice(1);\n        }\n\n        const indexed: Array<ParamType> = [];\n        const nonIndexed: Array<ParamType> = [];\n        const dynamic: Array<boolean> = [];\n\n        fragment.inputs.forEach((param, index) => {\n            if (param.indexed) {\n                if (param.type === \"string\" || param.type === \"bytes\" || param.baseType === \"tuple\" || param.baseType === \"array\") {\n                    indexed.push(ParamType.from({ type: \"bytes32\", name: param.name }));\n                    dynamic.push(true);\n                } else {\n                    indexed.push(param);\n                    dynamic.push(false);\n                }\n            } else {\n                nonIndexed.push(param);\n                dynamic.push(false);\n            }\n        });\n\n        const resultIndexed = (topics != null) ? this.#abiCoder.decode(indexed, concat(topics)): null;\n        const resultNonIndexed = this.#abiCoder.decode(nonIndexed, data, true);\n\n        //const result: (Array<any> & { [ key: string ]: any }) = [ ];\n        const values: Array<any> = [ ];\n        const keys: Array<null | string> = [ ];\n        let nonIndexedIndex = 0, indexedIndex = 0;\n        fragment.inputs.forEach((param, index) => {\n            let value: null | Indexed | Error = null;\n            if (param.indexed) {\n                if (resultIndexed == null) {\n                    value = new Indexed(null);\n\n                } else if (dynamic[index]) {\n                    value = new Indexed(resultIndexed[indexedIndex++]);\n\n                } else {\n                    try {\n                        value = resultIndexed[indexedIndex++];\n                    } catch (error: any) {\n                        value = error;\n                    }\n                }\n            } else {\n                try {\n                    value = resultNonIndexed[nonIndexedIndex++];\n                } catch (error: any) {\n                    value = error;\n                }\n            }\n\n            values.push(value);\n            keys.push(param.name || null);\n        });\n\n        return Result.fromItems(values, keys);\n    }\n\n    /**\n     *  Parses a transaction, finding the matching function and extracts\n     *  the parameter values along with other useful function details.\n     *\n     *  If the matching function cannot be found, return null.\n     */\n    parseTransaction(tx: { data: string, value?: BigNumberish }): null | TransactionDescription {\n        const data = getBytes(tx.data, \"tx.data\");\n        const value = getBigInt((tx.value != null) ? tx.value: 0, \"tx.value\");\n\n        const fragment = this.getFunction(hexlify(data.slice(0, 4)));\n\n        if (!fragment) { return null; }\n\n        const args = this.#abiCoder.decode(fragment.inputs, data.slice(4));\n        return new TransactionDescription(fragment, fragment.selector, args, value);\n    }\n\n    parseCallResult(data: BytesLike): Result {\n        throw new Error(\"@TODO\");\n    }\n\n    /**\n     *  Parses a receipt log, finding the matching event and extracts\n     *  the parameter values along with other useful event details.\n     *\n     *  If the matching event cannot be found, returns null.\n     */\n    parseLog(log: { topics: ReadonlyArray<string>, data: string}): null | LogDescription {\n        const fragment = this.getEvent(log.topics[0]);\n\n        if (!fragment || fragment.anonymous) { return null; }\n\n        // @TODO: If anonymous, and the only method, and the input count matches, should we parse?\n        //        Probably not, because just because it is the only event in the ABI does\n        //        not mean we have the full ABI; maybe just a fragment?\n\n\n       return new LogDescription(fragment, fragment.topicHash, this.decodeEventLog(fragment, log.data, log.topics));\n    }\n\n    /**\n     *  Parses a revert data, finding the matching error and extracts\n     *  the parameter values along with other useful error details.\n     *\n     *  If the matching error cannot be found, returns null.\n     */\n    parseError(data: BytesLike): null | ErrorDescription {\n        const hexData = hexlify(data);\n\n        const fragment = this.getError(dataSlice(hexData, 0, 4));\n\n        if (!fragment) { return null; }\n\n        const args = this.#abiCoder.decode(fragment.inputs, dataSlice(hexData, 4));\n        return new ErrorDescription(fragment, fragment.selector, args);\n    }\n\n    /**\n     *  Creates a new [[Interface]] from the ABI %%value%%.\n     *\n     *  The %%value%% may be provided as an existing [[Interface]] object,\n     *  a JSON-encoded ABI or any Human-Readable ABI format.\n     */\n    static from(value: InterfaceAbi | Interface): Interface {\n        // Already an Interface, which is immutable\n        if (value instanceof Interface) { return value; }\n\n        // JSON\n        if (typeof(value) === \"string\") { return new Interface(JSON.parse(value)); }\n\n        // An Interface; possibly from another v6 instance\n        if (typeof((<any>value).formatJson) === \"function\") {\n            return new Interface((<any>value).formatJson());\n        }\n\n        // A legacy Interface; from an older version\n        if (typeof((<any>value).format) === \"function\") {\n            return new Interface((<any>value).format(\"json\"));\n        }\n\n        // Array of fragments\n        return new Interface(value);\n    }\n}\n","//import { resolveAddress } from \"@ethersproject/address\";\nimport {\n    defineProperties, getBigInt, getNumber, hexlify, isBytesLike,\n    resolveProperties,\n    assert, assertArgument, isError, makeError\n} from \"../utils/index.js\";\nimport { accessListify } from \"../transaction/index.js\";\n\nimport type { AddressLike, NameResolver } from \"../address/index.js\";\nimport type { BigNumberish, EventEmitterable } from \"../utils/index.js\";\nimport type { Signature } from \"../crypto/index.js\";\nimport type {\n    AccessList, AccessListish, Authorization, AuthorizationLike, BlobLike,\n    KzgLibraryLike, TransactionLike\n} from \"../transaction/index.js\";\n\nimport type { ContractRunner } from \"./contracts.js\";\nimport type { Network } from \"./network.js\";\n\n\nconst BN_0 = BigInt(0);\n\n/**\n *  A **BlockTag** specifies a specific block.\n *\n *  **numeric value** - specifies the block height, where\n *  the genesis block is block 0; many operations accept a negative\n *  value which indicates the block number should be deducted from\n *  the most recent block. A numeric value may be a ``number``, ``bigint``,\n *  or a decimal of hex string.\n *\n *  **blockhash** - specifies a specific block by its blockhash; this allows\n *  potentially orphaned blocks to be specifed, without ambiguity, but many\n *  backends do not support this for some operations.\n */\nexport type BlockTag = BigNumberish | string;\n\nimport {\n    BlockParams, LogParams, TransactionReceiptParams,\n    TransactionResponseParams\n} from \"./formatting.js\";\n\n// -----------------------\n\nfunction getValue<T>(value: undefined | null | T): null | T {\n    if (value == null) { return null; }\n    return value;\n}\n\nfunction toJson(value: null | bigint): null | string {\n    if (value == null) { return null; }\n    return value.toString();\n}\n\n// @TODO? <T extends FeeData = { }> implements Required<T>\n\n/**\n *  A **FeeData** wraps all the fee-related values associated with\n *  the network.\n */\nexport class FeeData {\n    /**\n     *  The gas price for legacy networks.\n     */\n    readonly gasPrice!: null | bigint;\n\n    /**\n     *  The maximum fee to pay per gas.\n     *\n     *  The base fee per gas is defined by the network and based on\n     *  congestion, increasing the cost during times of heavy load\n     *  and lowering when less busy.\n     *\n     *  The actual fee per gas will be the base fee for the block\n     *  and the priority fee, up to the max fee per gas.\n     *\n     *  This will be ``null`` on legacy networks (i.e. [pre-EIP-1559](link-eip-1559))\n     */\n    readonly maxFeePerGas!: null | bigint;\n\n    /**\n     *  The additional amout to pay per gas to encourage a validator\n     *  to include the transaction.\n     *\n     *  The purpose of this is to compensate the validator for the\n     *  adjusted risk for including a given transaction.\n     *\n     *  This will be ``null`` on legacy networks (i.e. [pre-EIP-1559](link-eip-1559))\n     */\n    readonly maxPriorityFeePerGas!: null | bigint;\n\n    /**\n     *  Creates a new FeeData for %%gasPrice%%, %%maxFeePerGas%% and\n     *  %%maxPriorityFeePerGas%%.\n     */\n    constructor(gasPrice?: null | bigint, maxFeePerGas?: null | bigint, maxPriorityFeePerGas?: null | bigint) {\n        defineProperties<FeeData>(this, {\n            gasPrice: getValue(gasPrice),\n            maxFeePerGas: getValue(maxFeePerGas),\n            maxPriorityFeePerGas: getValue(maxPriorityFeePerGas)\n        });\n    }\n\n    /**\n     *  Returns a JSON-friendly value.\n     */\n    toJSON(): any {\n        const {\n            gasPrice, maxFeePerGas, maxPriorityFeePerGas\n        } = this;\n        return {\n            _type: \"FeeData\",\n            gasPrice: toJson(gasPrice),\n            maxFeePerGas: toJson(maxFeePerGas),\n            maxPriorityFeePerGas: toJson(maxPriorityFeePerGas),\n        };\n    }\n}\n\n\n/**\n *  A **TransactionRequest** is a transactions with potentially various\n *  properties not defined, or with less strict types for its values.\n *\n *  This is used to pass to various operations, which will internally\n *  coerce any types and populate any necessary values.\n */\nexport interface TransactionRequest {\n    /**\n     *  The transaction type.\n     */\n    type?: null | number;\n\n    /**\n     *  The target of the transaction.\n     */\n    to?: null | AddressLike;\n\n    /**\n     *  The sender of the transaction.\n     */\n    from?: null | AddressLike;\n\n    /**\n     *  The nonce of the transaction, used to prevent replay attacks.\n     */\n    nonce?: null | number;\n\n    /**\n     *  The maximum amount of gas to allow this transaction to consume.\n     */\n    gasLimit?: null | BigNumberish;\n\n    /**\n     *  The gas price to use for legacy transactions or transactions on\n     *  legacy networks.\n     *\n     *  Most of the time the ``max*FeePerGas`` is preferred.\n     */\n    gasPrice?: null | BigNumberish;\n\n    /**\n     *  The [[link-eip-1559]] maximum priority fee to pay per gas.\n     */\n    maxPriorityFeePerGas?: null | BigNumberish;\n\n    /**\n     *  The [[link-eip-1559]] maximum total fee to pay per gas. The actual\n     *  value used is protocol enforced to be the block's base fee.\n     */\n    maxFeePerGas?: null | BigNumberish;\n\n    /**\n     *  The transaction data.\n     */\n    data?: null | string;\n\n    /**\n     *  The transaction value (in wei).\n     */\n    value?: null | BigNumberish;\n\n    /**\n     *  The chain ID for the network this transaction is valid on.\n     */\n    chainId?: null | BigNumberish;\n\n    /**\n     *  The [[link-eip-2930]] access list. Storage slots included in the access\n     *  list are //warmed// by pre-loading them, so their initial cost to\n     *  fetch is guaranteed, but then each additional access is cheaper.\n     */\n    accessList?: null | AccessListish;\n\n    /**\n     *  A custom object, which can be passed along for network-specific\n     *  values.\n     */\n    customData?: any;\n\n    // Only meaningful when used for call\n\n    /**\n     *  When using ``call`` or ``estimateGas``, this allows a specific\n     *  block to be queried. Many backends do not support this and when\n     *  unsupported errors are silently squelched and ``\"latest\"`` is used. \n     */\n    blockTag?: BlockTag;\n\n    /**\n     *  When using ``call``, this enables CCIP-read, which permits the\n     *  provider to be redirected to web-based content during execution,\n     *  which is then further validated by the contract.\n     *\n     *  There are potential security implications allowing CCIP-read, as\n     *  it could be used to expose the IP address or user activity during\n     *  the fetch to unexpected parties.\n     */\n    enableCcipRead?: boolean;\n\n    /**\n     *  The blob versioned hashes (see [[link-eip-4844]]).\n     */\n    blobVersionedHashes?: null | Array<string>\n\n    /**\n     *  The maximum fee per blob gas (see [[link-eip-4844]]).\n     */\n    maxFeePerBlobGas?: null | BigNumberish;\n\n    /**\n     *  Any blobs to include in the transaction (see [[link-eip-4844]]).\n     */\n    blobs?: null | Array<BlobLike>;\n\n    /**\n     *  An external library for computing the KZG commitments and\n     *  proofs necessary for EIP-4844 transactions (see [[link-eip-4844]]).\n     *\n     *  This is generally ``null``, unless you are creating BLOb\n     *  transactions.\n     */\n    kzg?: null | KzgLibraryLike;\n\n    /**\n     *  The [[link-eip-7702]] authorizations (if any).\n     */\n    authorizationList?: null | Array<AuthorizationLike>;\n\n    // Todo?\n    //gasMultiplier?: number;\n};\n\n/**\n *  A **PreparedTransactionRequest** is identical to a [[TransactionRequest]]\n *  except all the property types are strictly enforced.\n */\nexport interface PreparedTransactionRequest {\n    /**\n     *  The transaction type.\n     */\n    type?: number;\n\n\n    /**\n     *  The target of the transaction.\n     */\n    to?: AddressLike;\n\n    /**\n     *  The sender of the transaction.\n     */\n    from?: AddressLike;\n\n    /**\n     *  The nonce of the transaction, used to prevent replay attacks.\n     */\n\n    nonce?: number;\n\n    /**\n     *  The maximum amount of gas to allow this transaction to consume.\n     */\n    gasLimit?: bigint;\n\n    /**\n     *  The gas price to use for legacy transactions or transactions on\n     *  legacy networks.\n     *\n     *  Most of the time the ``max*FeePerGas`` is preferred.\n     */\n    gasPrice?: bigint;\n\n    /**\n     *  The [[link-eip-1559]] maximum priority fee to pay per gas.\n     */\n    maxPriorityFeePerGas?: bigint;\n\n    /**\n     *  The [[link-eip-1559]] maximum total fee to pay per gas. The actual\n     *  value used is protocol enforced to be the block's base fee.\n     */\n    maxFeePerGas?: bigint;\n\n    /**\n     *  The transaction data.\n     */\n    data?: string;\n\n\n    /**\n     *  The transaction value (in wei).\n     */\n    value?: bigint;\n\n    /**\n     *  The chain ID for the network this transaction is valid on.\n     */\n    chainId?: bigint;\n\n    /**\n     *  The [[link-eip-2930]] access list. Storage slots included in the access\n     *  list are //warmed// by pre-loading them, so their initial cost to\n     *  fetch is guaranteed, but then each additional access is cheaper.\n     */\n    accessList?: AccessList;\n\n    /**\n     *  The [[link-eip-7702]] authorizations (if any).\n     */\n    authorizationList?: Array<Authorization>;\n\n    /**\n     *  A custom object, which can be passed along for network-specific\n     *  values.\n     */\n    customData?: any;\n\n\n\n    /**\n     *  When using ``call`` or ``estimateGas``, this allows a specific\n     *  block to be queried. Many backends do not support this and when\n     *  unsupported errors are silently squelched and ``\"latest\"`` is used. \n     */\n    blockTag?: BlockTag;\n\n    /**\n     *  When using ``call``, this enables CCIP-read, which permits the\n     *  provider to be redirected to web-based content during execution,\n     *  which is then further validated by the contract.\n     *\n     *  There are potential security implications allowing CCIP-read, as\n     *  it could be used to expose the IP address or user activity during\n     *  the fetch to unexpected parties.\n     */\n    enableCcipRead?: boolean;\n}\n\n/**\n *  Returns a copy of %%req%% with all properties coerced to their strict\n *  types.\n */\nexport function copyRequest(req: TransactionRequest): PreparedTransactionRequest {\n    const result: any = { };\n\n    // These could be addresses, ENS names or Addressables\n    if (req.to) { result.to = req.to; }\n    if (req.from) { result.from = req.from; }\n\n    if (req.data) { result.data = hexlify(req.data); }\n\n    const bigIntKeys = \"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value\".split(/,/);\n    for (const key of bigIntKeys) {\n        if (!(key in req) || (<any>req)[key] == null) { continue; }\n        result[key] = getBigInt((<any>req)[key], `request.${ key }`);\n    }\n\n    const numberKeys = \"type,nonce\".split(/,/);\n    for (const key of numberKeys) {\n        if (!(key in req) || (<any>req)[key] == null) { continue; }\n        result[key] = getNumber((<any>req)[key], `request.${ key }`);\n    }\n\n    if (req.accessList) {\n        result.accessList = accessListify(req.accessList);\n    }\n\n    if (req.authorizationList) {\n        result.authorizationList = req.authorizationList.slice();\n    }\n\n    if (\"blockTag\" in req) { result.blockTag = req.blockTag; }\n\n    if (\"enableCcipRead\" in req) {\n        result.enableCcipRead = !!req.enableCcipRead\n    }\n\n    if (\"customData\" in req) {\n        result.customData = req.customData;\n    }\n\n    if (\"blobVersionedHashes\" in req && req.blobVersionedHashes) {\n        result.blobVersionedHashes = req.blobVersionedHashes.slice();\n    }\n\n    if (\"kzg\" in req) { result.kzg = req.kzg; }\n\n    if (\"blobs\" in req && req.blobs) {\n        result.blobs = req.blobs.map((b) => {\n            if (isBytesLike(b)) { return hexlify(b); }\n            return Object.assign({ }, b);\n        });\n    }\n\n    return result;\n}\n\n//////////////////////\n// Block\n\n/**\n *  An Interface to indicate a [[Block]] has been included in the\n *  blockchain. This asserts a Type Guard that necessary properties\n *  are non-null.\n *\n *  Before a block is included, it is a //pending// block.\n */\nexport interface MinedBlock extends Block {\n    /**\n     *  The block number also known as the block height.\n     */\n    readonly number: number;\n\n    /**\n     *  The block hash.\n     */\n    readonly hash: string;\n\n    /**\n     *  The block timestamp, in seconds from epoch.\n     */\n    readonly timestamp: number;\n\n    /**\n     *  The block date, created from the [[timestamp]].\n     */\n    readonly date: Date;\n\n    /**\n     *  The miner of the block, also known as the ``author`` or\n     *  block ``producer``.\n     */\n    readonly miner: string;\n}\n\n/**\n *  A **Block** represents the data associated with a full block on\n *  Ethereum.\n */\nexport class Block implements BlockParams, Iterable<string> {\n\n    /**\n     *  The provider connected to the block used to fetch additional details\n     *  if necessary.\n     */\n    readonly provider!: Provider;\n\n    /**\n     *  The block number, sometimes called the block height. This is a\n     *  sequential number that is one higher than the parent block.\n     */\n    readonly number!: number;\n\n    /**\n     *  The block hash.\n     *\n     *  This hash includes all properties, so can be safely used to identify\n     *  an exact set of block properties.\n     */\n    readonly hash!: null | string;\n\n    /**\n     *  The timestamp for this block, which is the number of seconds since\n     *  epoch that this block was included.\n     */\n    readonly timestamp!: number;\n\n    /**\n     *  The block hash of the parent block.\n     */\n    readonly parentHash!: string;\n\n    /**\n     *  The hash tree root of the parent beacon block for the given\n     *  execution block. See [[link-eip-4788]].\n     */\n    parentBeaconBlockRoot!: null | string;\n\n    /**\n     *  The nonce.\n     *\n     *  On legacy networks, this is the random number inserted which\n     *  permitted the difficulty target to be reached.\n     */\n    readonly nonce!: string;\n\n    /**\n     *  The difficulty target.\n     *\n     *  On legacy networks, this is the proof-of-work target required\n     *  for a block to meet the protocol rules to be included.\n     *\n     *  On modern networks, this is a random number arrived at using\n     *  randao.  @TODO: Find links?\n     */\n    readonly difficulty!: bigint;\n\n\n    /**\n     *  The total gas limit for this block.\n     */\n    readonly gasLimit!: bigint;\n\n    /**\n     *  The total gas used in this block.\n     */\n    readonly gasUsed!: bigint;\n\n\n    /**\n     *  The root hash for the global state after applying changes\n     *  in this block.\n     */\n    readonly stateRoot!: null | string;\n\n    /**\n     *  The hash of the transaction receipts trie.\n     */\n    readonly receiptsRoot!: null | string;\n\n    /**\n     *  The total amount of blob gas consumed by the transactions\n     *  within the block. See [[link-eip-4844]].\n     */\n    readonly blobGasUsed!: null | bigint;\n\n    /**\n     *  The running total of blob gas consumed in excess of the\n     *  target, prior to the block. See [[link-eip-4844]].\n     */\n    readonly excessBlobGas!: null | bigint;\n\n    /**\n     *  The miner coinbase address, wihch receives any subsidies for\n     *  including this block.\n     */\n    readonly miner!: string;\n\n    /**\n     *  The latest RANDAO mix of the post beacon state of\n     *  the previous block.\n     */\n    readonly prevRandao!: null | string;\n\n    /**\n     *  Any extra data the validator wished to include.\n     */\n    readonly extraData!: string;\n\n    /**\n     *  The base fee per gas that all transactions in this block were\n     *  charged.\n     *\n     *  This adjusts after each block, depending on how congested the network\n     *  is.\n     */\n    readonly baseFeePerGas!: null | bigint;\n\n    readonly #transactions: Array<string | TransactionResponse>;\n\n    /**\n     *  Create a new **Block** object.\n     *\n     *  This should generally not be necessary as the unless implementing a\n     *  low-level library.\n     */\n    constructor(block: BlockParams, provider: Provider) {\n\n        this.#transactions = block.transactions.map((tx) => {\n            if (typeof(tx) !== \"string\") {\n                return new TransactionResponse(tx, provider);\n            }\n            return tx;\n        });\n\n        defineProperties<Block>(this, {\n            provider,\n\n            hash: getValue(block.hash),\n\n            number: block.number,\n            timestamp: block.timestamp,\n\n            parentHash: block.parentHash,\n            parentBeaconBlockRoot: block.parentBeaconBlockRoot,\n\n            nonce: block.nonce,\n            difficulty: block.difficulty,\n\n            gasLimit: block.gasLimit,\n            gasUsed: block.gasUsed,\n            blobGasUsed: block.blobGasUsed,\n            excessBlobGas: block.excessBlobGas,\n            miner: block.miner,\n            prevRandao: getValue(block.prevRandao),\n            extraData: block.extraData,\n\n            baseFeePerGas: getValue(block.baseFeePerGas),\n\n            stateRoot: block.stateRoot,\n            receiptsRoot: block.receiptsRoot,\n        });\n    }\n\n    /**\n     *  Returns the list of transaction hashes, in the order\n     *  they were executed within the block.\n     */\n    get transactions(): ReadonlyArray<string> {\n        return this.#transactions.map((tx) => {\n            if (typeof(tx) === \"string\") { return tx; }\n            return tx.hash;\n        });\n    }\n\n    /**\n     *  Returns the complete transactions, in the order they\n     *  were executed within the block.\n     *\n     *  This is only available for blocks which prefetched\n     *  transactions, by passing ``true`` to %%prefetchTxs%%\n     *  into [[Provider-getBlock]].\n     */\n    get prefetchedTransactions(): Array<TransactionResponse> {\n        const txs = this.#transactions.slice();\n\n        // Doesn't matter...\n        if (txs.length === 0) { return [ ]; }\n\n        // Make sure we prefetched the transactions\n        assert(typeof(txs[0]) === \"object\", \"transactions were not prefetched with block request\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"transactionResponses()\"\n        });\n\n        return <Array<TransactionResponse>>txs;\n    }\n\n    /**\n     *  Returns a JSON-friendly value.\n     */\n    toJSON(): any {\n        const {\n            baseFeePerGas, difficulty, extraData, gasLimit, gasUsed, hash,\n            miner, prevRandao, nonce, number, parentHash, parentBeaconBlockRoot,\n            stateRoot, receiptsRoot, timestamp, transactions\n        } = this;\n\n        return {\n            _type: \"Block\",\n            baseFeePerGas: toJson(baseFeePerGas),\n            difficulty: toJson(difficulty),\n            extraData,\n            gasLimit: toJson(gasLimit),\n            gasUsed: toJson(gasUsed),\n            blobGasUsed: toJson(this.blobGasUsed),\n            excessBlobGas: toJson(this.excessBlobGas),\n            hash, miner, prevRandao, nonce, number, parentHash, timestamp,\n            parentBeaconBlockRoot, stateRoot, receiptsRoot,\n            transactions,\n        };\n    }\n\n    [Symbol.iterator](): Iterator<string> {\n        let index = 0;\n        const txs = this.transactions;\n        return {\n            next: () => {\n                if (index < this.length) {\n                    return {\n                        value: txs[index++], done: false\n                    }\n                }\n                return { value: undefined, done: true };\n            }\n        };\n    }\n\n    /**\n     *  The number of transactions in this block.\n     */\n    get length(): number { return this.#transactions.length; }\n\n    /**\n     *  The [[link-js-date]] this block was included at.\n     */\n    get date(): null | Date {\n        if (this.timestamp == null) { return null; }\n        return new Date(this.timestamp * 1000);\n    }\n\n    /**\n     *  Get the transaction at %%indexe%% within this block.\n     */\n    async getTransaction(indexOrHash: number | string): Promise<TransactionResponse> {\n        // Find the internal value by its index or hash\n        let tx: string | TransactionResponse | undefined = undefined;\n        if (typeof(indexOrHash) === \"number\") {\n            tx = this.#transactions[indexOrHash];\n\n        } else {\n            const hash = indexOrHash.toLowerCase();\n            for (const v of this.#transactions) {\n                if (typeof(v) === \"string\") {\n                    if (v !== hash) { continue; }\n                    tx = v;\n                    break;\n                } else {\n                    if (v.hash !== hash) { continue; }\n                    tx = v;\n                    break;\n                }\n            }\n        }\n        if (tx == null) { throw new Error(\"no such tx\"); }\n\n        if (typeof(tx) === \"string\") {\n            return <TransactionResponse>(await this.provider.getTransaction(tx));\n        } else {\n            return tx;\n        }\n    }\n\n    /**\n     *  If a **Block** was fetched with a request to include the transactions\n     *  this will allow synchronous access to those transactions.\n     *\n     *  If the transactions were not prefetched, this will throw.\n     */\n    getPrefetchedTransaction(indexOrHash: number | string): TransactionResponse {\n        const txs = this.prefetchedTransactions;\n        if (typeof(indexOrHash) === \"number\") {\n            return txs[indexOrHash];\n        }\n\n        indexOrHash = indexOrHash.toLowerCase();\n        for (const tx of txs) {\n            if (tx.hash === indexOrHash) { return tx; }\n        }\n\n        assertArgument(false, \"no matching transaction\", \"indexOrHash\", indexOrHash);\n    }\n\n    /**\n     *  Returns true if this block been mined. This provides a type guard\n     *  for all properties on a [[MinedBlock]].\n     */\n    isMined(): this is MinedBlock { return !!this.hash; }\n\n    /**\n     *  Returns true if this block is an [[link-eip-2930]] block.\n     */\n    isLondon(): this is (Block & { baseFeePerGas: bigint }) {\n        return !!this.baseFeePerGas;\n    }\n\n    /**\n     *  @_ignore:\n     */\n    orphanedEvent(): OrphanFilter {\n        if (!this.isMined()) { throw new Error(\"\"); }\n        return createOrphanedBlockFilter(this);\n    }\n}\n\n//////////////////////\n// Log\n\n/**\n *  A **Log** in Ethereum represents an event that has been included in a\n *  transaction using the ``LOG*`` opcodes, which are most commonly used by\n *  Solidity's emit for announcing events.\n */\nexport class Log implements LogParams {\n\n    /**\n     *  The provider connected to the log used to fetch additional details\n     *  if necessary.\n     */\n    readonly provider: Provider;\n\n    /**\n     *  The transaction hash of the transaction this log occurred in. Use the\n     *  [[Log-getTransaction]] to get the [[TransactionResponse]].\n     */\n    readonly transactionHash!: string;\n\n    /**\n     *  The block hash of the block this log occurred in. Use the\n     *  [[Log-getBlock]] to get the [[Block]].\n     */\n    readonly blockHash!: string;\n\n    /**\n     *  The block number of the block this log occurred in. It is preferred\n     *  to use the [[Block-hash]] when fetching the related [[Block]],\n     *  since in the case of an orphaned block, the block at that height may\n     *  have changed.\n     */\n    readonly blockNumber!: number;\n\n    /**\n     *  If the **Log** represents a block that was removed due to an orphaned\n     *  block, this will be true.\n     *\n     *  This can only happen within an orphan event listener.\n     */\n    readonly removed!: boolean;\n\n    /**\n     *  The address of the contract that emitted this log.\n     */\n    readonly address!: string;\n\n    /**\n     *  The data included in this log when it was emitted.\n     */\n    readonly data!: string;\n\n    /**\n     *  The indexed topics included in this log when it was emitted.\n     *\n     *  All topics are included in the bloom filters, so they can be\n     *  efficiently filtered using the [[Provider-getLogs]] method.\n     */\n    readonly topics!: ReadonlyArray<string>;\n\n    /**\n     *  The index within the block this log occurred at. This is generally\n     *  not useful to developers, but can be used with the various roots\n     *  to proof inclusion within a block.\n     */\n    readonly index!: number;\n\n    /**\n     *  The index within the transaction of this log.\n     */\n    readonly transactionIndex!: number;\n\n    /**\n     *  @_ignore:\n     */\n    constructor(log: LogParams, provider: Provider) {\n        this.provider = provider;\n\n        const topics = Object.freeze(log.topics.slice());\n        defineProperties<Log>(this, {\n            transactionHash: log.transactionHash,\n            blockHash: log.blockHash,\n            blockNumber: log.blockNumber,\n\n            removed: log.removed,\n\n            address: log.address,\n            data: log.data,\n\n            topics,\n\n            index: log.index,\n            transactionIndex: log.transactionIndex,\n        });\n    }\n\n    /**\n     *  Returns a JSON-compatible object.\n     */\n    toJSON(): any {\n        const {\n            address, blockHash, blockNumber, data, index,\n            removed, topics, transactionHash, transactionIndex\n        } = this;\n\n        return {\n            _type: \"log\",\n            address, blockHash, blockNumber, data, index,\n            removed, topics, transactionHash, transactionIndex\n        };\n    }\n\n    /**\n     *  Returns the block that this log occurred in.\n     */\n    async getBlock(): Promise<Block> {\n        const block = await this.provider.getBlock(this.blockHash);\n        assert(!!block, \"failed to find transaction\", \"UNKNOWN_ERROR\", { });\n        return block;\n    }\n\n    /**\n     *  Returns the transaction that this log occurred in.\n     */\n    async getTransaction(): Promise<TransactionResponse> {\n        const tx = await this.provider.getTransaction(this.transactionHash);\n        assert(!!tx, \"failed to find transaction\", \"UNKNOWN_ERROR\", { });\n        return tx;\n    }\n\n    /**\n     *  Returns the transaction receipt fot the transaction that this\n     *  log occurred in.\n     */\n    async getTransactionReceipt(): Promise<TransactionReceipt> {\n        const receipt = await this.provider.getTransactionReceipt(this.transactionHash);\n        assert(!!receipt, \"failed to find transaction receipt\", \"UNKNOWN_ERROR\", { });\n        return receipt;\n    }\n\n    /**\n     *  @_ignore:\n     */\n    removedEvent(): OrphanFilter {\n        return createRemovedLogFilter(this);\n    }\n}\n\n//////////////////////\n// Transaction Receipt\n\n/*\nexport interface LegacyTransactionReceipt {\n    byzantium: false;\n    status: null;\n    root: string;\n}\n\nexport interface ByzantiumTransactionReceipt {\n    byzantium: true;\n    status: number;\n    root: null;\n}\n*/\n\n/**\n *  A **TransactionReceipt** includes additional information about a\n *  transaction that is only available after it has been mined.\n */\nexport class TransactionReceipt implements TransactionReceiptParams, Iterable<Log> {\n    /**\n     *  The provider connected to the log used to fetch additional details\n     *  if necessary.\n     */\n    readonly provider!: Provider;\n\n    /**\n     *  The address the transaction was sent to.\n     */\n    readonly to!: null | string;\n\n    /**\n     *  The sender of the transaction.\n     */\n    readonly from!: string;\n\n    /**\n     *  The address of the contract if the transaction was directly\n     *  responsible for deploying one.\n     *\n     *  This is non-null **only** if the ``to`` is empty and the ``data``\n     *  was successfully executed as initcode.\n     */\n    readonly contractAddress!: null | string;\n\n    /**\n     *  The transaction hash.\n     */\n    readonly hash!: string;\n\n    /**\n     *  The index of this transaction within the block transactions.\n     */\n    readonly index!: number;\n\n    /**\n     *  The block hash of the [[Block]] this transaction was included in.\n     */\n    readonly blockHash!: string;\n\n    /**\n     *  The block number of the [[Block]] this transaction was included in.\n     */\n    readonly blockNumber!: number;\n\n    /**\n     *  The bloom filter bytes that represent all logs that occurred within\n     *  this transaction. This is generally not useful for most developers,\n     *  but can be used to validate the included logs.\n     */\n    readonly logsBloom!: string;\n\n    /**\n     *  The actual amount of gas used by this transaction.\n     *\n     *  When creating a transaction, the amount of gas that will be used can\n     *  only be approximated, but the sender must pay the gas fee for the\n     *  entire gas limit. After the transaction, the difference is refunded.\n     */\n    readonly gasUsed!: bigint;\n\n    /**\n     *  The gas used for BLObs. See [[link-eip-4844]].\n     */\n    readonly blobGasUsed!: null | bigint;\n\n    /**\n     *  The amount of gas used by all transactions within the block for this\n     *  and all transactions with a lower ``index``.\n     *\n     *  This is generally not useful for developers but can be used to\n     *  validate certain aspects of execution.\n     */\n    readonly cumulativeGasUsed!: bigint;\n\n    /**\n     *  The actual gas price used during execution.\n     *\n     *  Due to the complexity of [[link-eip-1559]] this value can only\n     *  be caluclated after the transaction has been mined, snce the base\n     *  fee is protocol-enforced.\n     */\n    readonly gasPrice!: bigint;\n\n    /**\n     *  The price paid per BLOB in gas. See [[link-eip-4844]].\n     */\n    readonly blobGasPrice!: null | bigint;\n\n    /**\n     *  The [[link-eip-2718]] transaction type.\n     */\n    readonly type!: number;\n    //readonly byzantium!: boolean;\n\n    /**\n     *  The status of this transaction, indicating success (i.e. ``1``) or\n     *  a revert (i.e. ``0``).\n     *\n     *  This is available in post-byzantium blocks, but some backends may\n     *  backfill this value.\n     */\n    readonly status!: null | number;\n\n    /**\n     *  The root hash of this transaction.\n     *\n     *  This is no present and was only included in pre-byzantium blocks, but\n     *  could be used to validate certain parts of the receipt.\n     */\n    readonly root!: null | string;\n\n    readonly #logs: ReadonlyArray<Log>;\n\n    /**\n     *  @_ignore:\n     */\n    constructor(tx: TransactionReceiptParams, provider: Provider) {\n        this.#logs = Object.freeze(tx.logs.map((log) => {\n            return new Log(log, provider);\n        }));\n\n        let gasPrice = BN_0;\n        if (tx.effectiveGasPrice != null) {\n            gasPrice = tx.effectiveGasPrice;\n        } else if (tx.gasPrice != null) {\n            gasPrice = tx.gasPrice;\n        }\n\n        defineProperties<TransactionReceipt>(this, {\n            provider,\n\n            to: tx.to,\n            from: tx.from,\n            contractAddress: tx.contractAddress,\n\n            hash: tx.hash,\n            index: tx.index,\n\n            blockHash: tx.blockHash,\n            blockNumber: tx.blockNumber,\n\n            logsBloom: tx.logsBloom,\n\n            gasUsed: tx.gasUsed,\n            cumulativeGasUsed: tx.cumulativeGasUsed,\n            blobGasUsed: tx.blobGasUsed,\n            gasPrice,\n            blobGasPrice: tx.blobGasPrice,\n\n            type: tx.type,\n            //byzantium: tx.byzantium,\n            status: tx.status,\n            root: tx.root\n        });\n    }\n\n    /**\n     *  The logs for this transaction.\n     */\n    get logs(): ReadonlyArray<Log> { return this.#logs; }\n\n    /**\n     *  Returns a JSON-compatible representation.\n     */\n    toJSON(): any {\n        const {\n            to, from, contractAddress, hash, index,\n            blockHash, blockNumber, logsBloom,\n            logs, //byzantium, \n            status, root\n        } = this;\n\n        return {\n            _type: \"TransactionReceipt\",\n            blockHash, blockNumber,\n            //byzantium, \n            contractAddress,\n            cumulativeGasUsed: toJson(this.cumulativeGasUsed),\n            from,\n            gasPrice: toJson(this.gasPrice),\n            blobGasUsed: toJson(this.blobGasUsed),\n            blobGasPrice: toJson(this.blobGasPrice),\n            gasUsed: toJson(this.gasUsed),\n            hash, index, logs, logsBloom, root, status, to\n        };\n    }\n\n    /**\n     *  @_ignore:\n     */\n    get length(): number { return this.logs.length; }\n\n    [Symbol.iterator](): Iterator<Log> {\n        let index = 0;\n        return {\n            next: () => {\n                if (index < this.length) {\n                    return { value: this.logs[index++], done: false }\n                }\n                return { value: undefined, done: true };\n            }\n        };\n    }\n\n    /**\n     *  The total fee for this transaction, in wei.\n     */\n    get fee(): bigint {\n        return this.gasUsed * this.gasPrice;\n    }\n\n    /**\n     *  Resolves to the block this transaction occurred in.\n     */\n    async getBlock(): Promise<Block> {\n        const block = await this.provider.getBlock(this.blockHash);\n        if (block == null) { throw new Error(\"TODO\"); }\n        return block;\n    }\n\n    /**\n     *  Resolves to the transaction this transaction occurred in.\n     */\n    async getTransaction(): Promise<TransactionResponse> {\n        const tx = await this.provider.getTransaction(this.hash);\n        if (tx == null) { throw new Error(\"TODO\"); }\n        return tx;\n    }\n\n    /**\n     *  Resolves to the return value of the execution of this transaction.\n     *\n     *  Support for this feature is limited, as it requires an archive node\n     *  with the ``debug_`` or ``trace_`` API enabled.\n     */\n    async getResult(): Promise<string> {\n        return <string>(await this.provider.getTransactionResult(this.hash));\n    }\n\n    /**\n     *  Resolves to the number of confirmations this transaction has.\n     */\n    async confirmations(): Promise<number> {\n        return (await this.provider.getBlockNumber()) - this.blockNumber + 1;\n    }\n\n    /**\n     *  @_ignore:\n     */\n    removedEvent(): OrphanFilter {\n        return createRemovedTransactionFilter(this);\n    }\n\n    /**\n     *  @_ignore:\n     */\n    reorderedEvent(other?: TransactionResponse): OrphanFilter {\n        assert(!other || other.isMined(), \"unmined 'other' transction cannot be orphaned\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"reorderedEvent(other)\" });\n        return createReorderedTransactionFilter(this, other);\n    }\n}\n\n\n//////////////////////\n// Transaction Response\n\n/**\n *  A **MinedTransactionResponse** is an interface representing a\n *  transaction which has been mined and allows for a type guard for its\n *  property values being defined.\n */\nexport interface MinedTransactionResponse extends TransactionResponse {\n    /**\n     *  The block number this transaction occurred in.\n     */\n    blockNumber: number;\n\n    /**\n     *  The block hash this transaction occurred in.\n     */\n    blockHash: string;\n\n    /**\n     *  The date this transaction occurred on.\n     */\n    date: Date;\n}\n\n\n/**\n *  A **TransactionResponse** includes all properties about a transaction\n *  that was sent to the network, which may or may not be included in a\n *  block.\n *\n *  The [[TransactionResponse-isMined]] can be used to check if the\n *  transaction has been mined as well as type guard that the otherwise\n *  possibly ``null`` properties are defined.\n */\nexport class TransactionResponse implements TransactionLike<string>, TransactionResponseParams {\n    /**\n     *  The provider this is connected to, which will influence how its\n     *  methods will resolve its async inspection methods.\n     */\n    readonly provider: Provider;\n\n    /**\n     *  The block number of the block that this transaction was included in.\n     *\n     *  This is ``null`` for pending transactions.\n     */\n    readonly blockNumber: null | number;\n\n    /**\n     *  The blockHash of the block that this transaction was included in.\n     *\n     *  This is ``null`` for pending transactions.\n     */\n    readonly blockHash: null | string;\n\n    /**\n     *  The index within the block that this transaction resides at.\n     */\n    readonly index!: number;\n\n    /**\n     *  The transaction hash.\n     */\n    readonly hash!: string;\n\n    /**\n     *  The [[link-eip-2718]] transaction envelope type. This is\n     *  ``0`` for legacy transactions types.\n     */\n    readonly type!: number;\n\n    /**\n     *  The receiver of this transaction.\n     *\n     *  If ``null``, then the transaction is an initcode transaction.\n     *  This means the result of executing the [[data]] will be deployed\n     *  as a new contract on chain (assuming it does not revert) and the\n     *  address may be computed using [[getCreateAddress]].\n     */\n    readonly to!: null | string;\n\n    /**\n     *  The sender of this transaction. It is implicitly computed\n     *  from the transaction pre-image hash (as the digest) and the\n     *  [[signature]] using ecrecover.\n     */\n    readonly from!: string;\n\n    /**\n     *  The nonce, which is used to prevent replay attacks and offer\n     *  a method to ensure transactions from a given sender are explicitly\n     *  ordered.\n     *\n     *  When sending a transaction, this must be equal to the number of\n     *  transactions ever sent by [[from]].\n     */\n    readonly nonce!: number;\n\n    /**\n     *  The maximum units of gas this transaction can consume. If execution\n     *  exceeds this, the entries transaction is reverted and the sender\n     *  is charged for the full amount, despite not state changes being made.\n     */\n    readonly gasLimit!: bigint;\n\n    /**\n     *  The gas price can have various values, depending on the network.\n     *\n     *  In modern networks, for transactions that are included this is\n     *  the //effective gas price// (the fee per gas that was actually\n     *  charged), while for transactions that have not been included yet\n     *  is the [[maxFeePerGas]].\n     *\n     *  For legacy transactions, or transactions on legacy networks, this\n     *  is the fee that will be charged per unit of gas the transaction\n     *  consumes.\n     */\n    readonly gasPrice!: bigint;\n\n    /**\n     *  The maximum priority fee (per unit of gas) to allow a\n     *  validator to charge the sender. This is inclusive of the\n     *  [[maxFeeFeePerGas]].\n     */\n    readonly maxPriorityFeePerGas!: null | bigint;\n\n    /**\n     *  The maximum fee (per unit of gas) to allow this transaction\n     *  to charge the sender.\n     */\n    readonly maxFeePerGas!: null | bigint;\n\n    /**\n     *  The [[link-eip-4844]] max fee per BLOb gas.\n     */\n    readonly maxFeePerBlobGas!: null | bigint;\n\n    /**\n     *  The data.\n     */\n    readonly data!: string;\n\n    /**\n     *  The value, in wei. Use [[formatEther]] to format this value\n     *  as ether.\n     */\n    readonly value!: bigint;\n\n    /**\n     *  The chain ID.\n     */\n    readonly chainId!: bigint;\n\n    /**\n     *  The signature.\n     */\n    readonly signature!: Signature;\n\n    /**\n     *  The [[link-eip-2930]] access list for transaction types that\n     *  support it, otherwise ``null``.\n     */\n    readonly accessList!: null | AccessList;\n\n    /**\n     *  The [[link-eip-4844]] BLOb versioned hashes.\n     */\n    readonly blobVersionedHashes!: null | Array<string>;\n\n    /**\n     *  The [[link-eip-7702]] authorizations (if any).\n     */\n    readonly authorizationList!: null | Array<Authorization>;\n\n    #startBlock: number;\n\n    /**\n     *  @_ignore:\n     */\n    constructor(tx: TransactionResponseParams, provider: Provider) {\n        this.provider = provider;\n\n        this.blockNumber = (tx.blockNumber != null) ? tx.blockNumber: null;\n        this.blockHash = (tx.blockHash != null) ? tx.blockHash: null;\n\n        this.hash = tx.hash;\n        this.index = tx.index;\n\n        this.type = tx.type;\n\n        this.from = tx.from;\n        this.to = tx.to || null;\n\n        this.gasLimit = tx.gasLimit;\n        this.nonce = tx.nonce;\n        this.data = tx.data;\n        this.value = tx.value;\n\n        this.gasPrice = tx.gasPrice;\n        this.maxPriorityFeePerGas = (tx.maxPriorityFeePerGas != null) ? tx.maxPriorityFeePerGas: null;\n        this.maxFeePerGas = (tx.maxFeePerGas != null) ? tx.maxFeePerGas: null;\n        this.maxFeePerBlobGas = (tx.maxFeePerBlobGas != null) ? tx.maxFeePerBlobGas: null;\n\n        this.chainId = tx.chainId;\n        this.signature = tx.signature;\n\n        this.accessList = (tx.accessList != null) ? tx.accessList: null;\n        this.blobVersionedHashes = (tx.blobVersionedHashes != null) ? tx.blobVersionedHashes: null;\n\n        this.authorizationList = (tx.authorizationList != null) ? tx.authorizationList: null;\n\n        this.#startBlock = -1;\n    }\n\n    /**\n     *  Returns a JSON-compatible representation of this transaction.\n     */\n    toJSON(): any {\n        const {\n            blockNumber, blockHash, index, hash, type, to, from, nonce,\n            data, signature, accessList, blobVersionedHashes\n        } = this;\n\n        return {\n            _type: \"TransactionResponse\",\n            accessList, blockNumber, blockHash,\n            blobVersionedHashes,\n            chainId: toJson(this.chainId),\n            data, from,\n            gasLimit: toJson(this.gasLimit),\n            gasPrice: toJson(this.gasPrice),\n            hash,\n            maxFeePerGas: toJson(this.maxFeePerGas),\n            maxPriorityFeePerGas: toJson(this.maxPriorityFeePerGas),\n            maxFeePerBlobGas: toJson(this.maxFeePerBlobGas),\n            nonce, signature, to, index, type,\n            value: toJson(this.value),\n        };\n    }\n\n    /**\n     *  Resolves to the Block that this transaction was included in.\n     *\n     *  This will return null if the transaction has not been included yet.\n     */\n    async getBlock(): Promise<null | Block> {\n        let blockNumber = this.blockNumber;\n        if (blockNumber == null) {\n            const tx = await this.getTransaction();\n            if (tx) { blockNumber = tx.blockNumber; }\n        }\n        if (blockNumber == null) { return null; }\n        const block = this.provider.getBlock(blockNumber);\n        if (block == null) { throw new Error(\"TODO\"); }\n        return block;\n    }\n\n    /**\n     *  Resolves to this transaction being re-requested from the\n     *  provider. This can be used if you have an unmined transaction\n     *  and wish to get an up-to-date populated instance.\n     */\n    async getTransaction(): Promise<null | TransactionResponse> {\n        return this.provider.getTransaction(this.hash);\n    }\n\n    /**\n     *  Resolve to the number of confirmations this transaction has.\n     */\n    async confirmations(): Promise<number> {\n        if (this.blockNumber == null) {\n            const { tx, blockNumber } = await resolveProperties({\n                tx: this.getTransaction(),\n                blockNumber: this.provider.getBlockNumber()\n            });\n\n            // Not mined yet...\n            if (tx == null || tx.blockNumber == null) { return 0; }\n\n            return blockNumber - tx.blockNumber + 1;\n        }\n\n        const blockNumber = await this.provider.getBlockNumber();\n        return blockNumber - this.blockNumber + 1;\n    }\n\n    /**\n     *  Resolves once this transaction has been mined and has\n     *  %%confirms%% blocks including it (default: ``1``) with an\n     *  optional %%timeout%%.\n     *\n     *  This can resolve to ``null`` only if %%confirms%% is ``0``\n     *  and the transaction has not been mined, otherwise this will\n     *  wait until enough confirmations have completed.\n     */\n    async wait(_confirms?: number, _timeout?: number): Promise<null | TransactionReceipt> {\n        const confirms = (_confirms == null) ? 1: _confirms;\n        const timeout = (_timeout == null) ? 0: _timeout;\n\n        let startBlock = this.#startBlock\n        let nextScan = -1;\n        let stopScanning = (startBlock === -1) ? true: false;\n        const checkReplacement = async () => {\n            // Get the current transaction count for this sender\n            if (stopScanning) { return null; }\n            const { blockNumber, nonce } = await resolveProperties({\n                blockNumber: this.provider.getBlockNumber(),\n                nonce: this.provider.getTransactionCount(this.from)\n            });\n\n            // No transaction or our nonce has not been mined yet; but we\n            // can start scanning later when we do start\n            if (nonce < this.nonce) {\n                startBlock = blockNumber;\n                return;\n            }\n\n            // We were mined; no replacement\n            if (stopScanning) { return null; }\n            const mined = await this.getTransaction();\n            if (mined && mined.blockNumber != null) { return; }\n\n            // We were replaced; start scanning for that transaction\n\n            // Starting to scan; look back a few extra blocks for safety\n            if (nextScan === -1) {\n                nextScan = startBlock - 3;\n                if (nextScan < this.#startBlock) { nextScan = this.#startBlock; }\n            }\n\n            while (nextScan <= blockNumber) {\n                // Get the next block to scan\n                if (stopScanning) { return null; }\n                const block = await this.provider.getBlock(nextScan, true);\n\n                // This should not happen; but we'll try again shortly\n                if (block == null) { return; }\n\n                // We were mined; no replacement\n                for (const hash of block) {\n                    if (hash === this.hash) { return; }\n                }\n\n                // Search for the transaction that replaced us\n                for (let i = 0; i < block.length; i++) {\n                    const tx: TransactionResponse = await block.getTransaction(i);\n\n                    if (tx.from === this.from && tx.nonce === this.nonce) {\n                        // Get the receipt\n                        if (stopScanning) { return null; }\n                        const receipt = await this.provider.getTransactionReceipt(tx.hash);\n\n                        // This should not happen; but we'll try again shortly\n                        if (receipt == null) { return; }\n\n                        // We will retry this on the next block (this case could be optimized)\n                        if ((blockNumber - receipt.blockNumber + 1) < confirms) { return; }\n\n                        // The reason we were replaced\n                        let reason: \"replaced\" | \"repriced\" | \"cancelled\" = \"replaced\";\n                        if (tx.data === this.data && tx.to === this.to && tx.value === this.value) {\n                            reason = \"repriced\";\n                        } else  if (tx.data === \"0x\" && tx.from === tx.to && tx.value === BN_0) {\n                            reason = \"cancelled\"\n                        }\n\n                        assert(false, \"transaction was replaced\", \"TRANSACTION_REPLACED\", {\n                            cancelled: (reason === \"replaced\" || reason === \"cancelled\"),\n                            reason,\n                            replacement: tx.replaceableTransaction(startBlock),\n                            hash: tx.hash,\n                            receipt\n                        });\n                    }\n                }\n\n                nextScan++;\n            }\n            return;\n        };\n\n        const checkReceipt = (receipt: null | TransactionReceipt) => {\n            if (receipt == null || receipt.status !== 0) { return receipt; }\n            assert(false, \"transaction execution reverted\", \"CALL_EXCEPTION\", {\n                action: \"sendTransaction\",\n                data: null, reason: null, invocation: null, revert: null,\n                transaction: {\n                    to: receipt.to,\n                    from: receipt.from,\n                    data: \"\" // @TODO: in v7, split out sendTransaction properties\n                }, receipt\n            });\n        };\n\n        const receipt = await this.provider.getTransactionReceipt(this.hash);\n\n        if (confirms === 0) { return checkReceipt(receipt); }\n\n        if (receipt) {\n            if (confirms === 1 || (await receipt.confirmations()) >= confirms) {\n                return checkReceipt(receipt);\n            }\n\n        } else {\n            // Check for a replacement; throws if a replacement was found\n            await checkReplacement();\n\n            // Allow null only when the confirms is 0\n            if (confirms === 0) { return null; }\n        }\n\n        const waiter = new Promise((resolve, reject) => {\n            // List of things to cancel when we have a result (one way or the other)\n            const cancellers: Array<() => void> = [ ];\n            const cancel = () => { cancellers.forEach((c) => c()); };\n\n            // On cancel, stop scanning for replacements\n            cancellers.push(() => { stopScanning = true; });\n\n            // Set up any timeout requested\n            if (timeout > 0) {\n                const timer = setTimeout(() => {\n                    cancel();\n                    reject(makeError(\"wait for transaction timeout\", \"TIMEOUT\"));\n                }, timeout);\n                cancellers.push(() => { clearTimeout(timer); });\n            }\n\n            const txListener = async (receipt: TransactionReceipt) => {\n                // Done; return it!\n                if ((await receipt.confirmations()) >= confirms) {\n                    cancel();\n                    try {\n                        resolve(checkReceipt(receipt));\n                    } catch (error) { reject(error); }\n                }\n            };\n            cancellers.push(() => { this.provider.off(this.hash, txListener); });\n            this.provider.on(this.hash, txListener);\n            // We support replacement detection; start checking\n            if (startBlock >= 0) {\n                const replaceListener = async () => {\n                    try {\n                        // Check for a replacement; this throws only if one is found\n                        await checkReplacement();\n\n                    } catch (error) {\n                        // We were replaced (with enough confirms); re-throw the error\n                        if (isError(error, \"TRANSACTION_REPLACED\")) {\n                            cancel();\n                            reject(error);\n                            return;\n                        }\n                    }\n\n                    // Rescheudle a check on the next block\n                    if (!stopScanning) {\n                        this.provider.once(\"block\", replaceListener);\n                    }\n                };\n                cancellers.push(() => { this.provider.off(\"block\", replaceListener); });\n                this.provider.once(\"block\", replaceListener);\n            }\n        });\n\n        return await <Promise<TransactionReceipt>>waiter;\n    }\n\n    /**\n     *  Returns ``true`` if this transaction has been included.\n     *\n     *  This is effective only as of the time the TransactionResponse\n     *  was instantiated. To get up-to-date information, use\n     *  [[getTransaction]].\n     *\n     *  This provides a Type Guard that this transaction will have\n     *  non-null property values for properties that are null for\n     *  unmined transactions.\n     */\n    isMined(): this is MinedTransactionResponse {\n        return (this.blockHash != null);\n    }\n\n    /**\n     *  Returns true if the transaction is a legacy (i.e. ``type == 0``)\n     *  transaction.\n     *\n     *  This provides a Type Guard that this transaction will have\n     *  the ``null``-ness for hardfork-specific properties set correctly.\n     */\n    isLegacy(): this is (TransactionResponse & { accessList: null, maxFeePerGas: null, maxPriorityFeePerGas: null }) {\n        return (this.type === 0)\n    }\n\n    /**\n     *  Returns true if the transaction is a Berlin (i.e. ``type == 1``)\n     *  transaction. See [[link-eip-2070]].\n     *\n     *  This provides a Type Guard that this transaction will have\n     *  the ``null``-ness for hardfork-specific properties set correctly.\n     */\n    isBerlin(): this is (TransactionResponse & { accessList: AccessList, maxFeePerGas: null, maxPriorityFeePerGas: null }) {\n        return (this.type === 1);\n    }\n\n    /**\n     *  Returns true if the transaction is a London (i.e. ``type == 2``)\n     *  transaction. See [[link-eip-1559]].\n     *\n     *  This provides a Type Guard that this transaction will have\n     *  the ``null``-ness for hardfork-specific properties set correctly.\n     */\n    isLondon(): this is (TransactionResponse & { accessList: AccessList, maxFeePerGas: bigint, maxPriorityFeePerGas: bigint }){\n        return (this.type === 2);\n    }\n\n    /**\n     *  Returns true if hte transaction is a Cancun (i.e. ``type == 3``)\n     *  transaction. See [[link-eip-4844]].\n     */\n    isCancun(): this is (TransactionResponse & { accessList: AccessList, maxFeePerGas: bigint, maxPriorityFeePerGas: bigint, maxFeePerBlobGas: bigint, blobVersionedHashes: Array<string> }){\n        return (this.type === 3);\n    }\n\n    /**\n     *  Returns a filter which can be used to listen for orphan events\n     *  that evict this transaction.\n     */\n    removedEvent(): OrphanFilter {\n        assert(this.isMined(), \"unmined transaction canot be orphaned\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"removeEvent()\" });\n        return createRemovedTransactionFilter(this);\n    }\n\n    /**\n     *  Returns a filter which can be used to listen for orphan events\n     *  that re-order this event against %%other%%.\n     */\n    reorderedEvent(other?: TransactionResponse): OrphanFilter {\n        assert(this.isMined(), \"unmined transaction canot be orphaned\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"removeEvent()\" });\n\n        assert(!other || other.isMined(), \"unmined 'other' transaction canot be orphaned\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"removeEvent()\" });\n\n        return createReorderedTransactionFilter(this, other);\n    }\n\n    /**\n     *  Returns a new TransactionResponse instance which has the ability to\n     *  detect (and throw an error) if the transaction is replaced, which\n     *  will begin scanning at %%startBlock%%.\n     *\n     *  This should generally not be used by developers and is intended\n     *  primarily for internal use. Setting an incorrect %%startBlock%% can\n     *  have devastating performance consequences if used incorrectly.\n     */\n    replaceableTransaction(startBlock: number): TransactionResponse {\n        assertArgument(Number.isInteger(startBlock) && startBlock >= 0, \"invalid startBlock\", \"startBlock\", startBlock);\n        const tx = new TransactionResponse(this, this.provider);\n        tx.#startBlock = startBlock;\n        return tx;\n    }\n}\n\n\n//////////////////////\n// OrphanFilter\n\n/**\n *  An Orphan Filter allows detecting when an orphan block has\n *  resulted in dropping a block or transaction or has resulted\n *  in transactions changing order.\n *\n *  Not currently fully supported.\n */\nexport type OrphanFilter = {\n    orphan: \"drop-block\",\n    hash: string,\n    number: number\n} | {\n    orphan: \"drop-transaction\",\n    tx: { hash: string, blockHash: string, blockNumber: number },\n    other?: { hash: string, blockHash: string, blockNumber: number }\n} | {\n    orphan: \"reorder-transaction\",\n    tx: { hash: string, blockHash: string, blockNumber: number },\n    other?: { hash: string, blockHash: string, blockNumber: number }\n} | {\n    orphan: \"drop-log\",\n    log: {\n        transactionHash: string,\n        blockHash: string,\n        blockNumber: number,\n        address: string,\n        data: string,\n        topics: ReadonlyArray<string>,\n        index: number\n    }\n};\n\nfunction createOrphanedBlockFilter(block: { hash: string, number: number }): OrphanFilter {\n    return { orphan: \"drop-block\", hash: block.hash, number: block.number };\n}\n\nfunction createReorderedTransactionFilter(tx: { hash: string, blockHash: string, blockNumber: number }, other?: { hash: string, blockHash: string, blockNumber: number }): OrphanFilter {\n    return { orphan: \"reorder-transaction\", tx, other };\n}\n\nfunction createRemovedTransactionFilter(tx: { hash: string, blockHash: string, blockNumber: number }): OrphanFilter {\n    return { orphan: \"drop-transaction\", tx };\n}\n\nfunction createRemovedLogFilter(log: { blockHash: string, transactionHash: string, blockNumber: number, address: string, data: string, topics: ReadonlyArray<string>, index: number }): OrphanFilter {\n    return { orphan: \"drop-log\", log: {\n        transactionHash: log.transactionHash,\n        blockHash: log.blockHash,\n        blockNumber: log.blockNumber,\n        address: log.address,\n        data: log.data,\n        topics: Object.freeze(log.topics.slice()),\n        index: log.index\n    } };\n}\n\n//////////////////////\n// EventFilter\n\n/**\n *  A **TopicFilter** provides a struture to define bloom-filter\n *  queries.\n *\n *  Each field that is ``null`` matches **any** value, a field that is\n *  a ``string`` must match exactly that value and ``array`` is\n *  effectively an ``OR``-ed set, where any one of those values must\n *  match.\n */\nexport type TopicFilter = Array<null | string | Array<string>>;\n\n// @TODO:\n//export type DeferableTopicFilter = Array<null | string | Promise<string> | Array<string | Promise<string>>>;\n\n/**\n *  An **EventFilter** allows efficiently filtering logs (also known as\n *  events) using bloom filters included within blocks.\n */\nexport interface EventFilter {\n    address?: AddressLike | Array<AddressLike>;\n    topics?: TopicFilter;\n}\n\n/**\n *  A **Filter** allows searching a specific range of blocks for mathcing\n *  logs.\n */\nexport interface Filter extends EventFilter {\n\n    /**\n     *  The start block for the filter (inclusive).\n     */\n    fromBlock?: BlockTag;\n\n    /**\n     *  The end block for the filter (inclusive).\n     */\n    toBlock?: BlockTag;\n}\n\n/**\n *  A **FilterByBlockHash** allows searching a specific block for mathcing\n *  logs.\n */\nexport interface FilterByBlockHash extends EventFilter {\n    /**\n     *  The blockhash of the specific block for the filter.\n     */\n    blockHash?: string;\n}\n\n\n//////////////////////\n// ProviderEvent\n\n/**\n *  A **ProviderEvent** provides the types of events that can be subscribed\n *  to on a [[Provider]].\n *\n *  Each provider may include additional possible events it supports, but\n *  the most commonly supported are:\n *\n *  **``\"block\"``** - calls the listener with the current block number on each\n *  new block.\n *\n *  **``\"error\"``** - calls the listener on each async error that occurs during\n *  the event loop, with the error.\n *\n *  **``\"debug\"``** - calls the listener on debug events, which can be used to\n *  troubleshoot network errors, provider problems, etc.\n *\n *  **``transaction hash``** - calls the listener on each block after the\n *  transaction has been mined; generally ``.once`` is more appropriate for\n *  this event.\n *\n *  **``Array``** - calls the listener on each log that matches the filter.\n *\n *  [[EventFilter]] - calls the listener with each matching log\n */\nexport type ProviderEvent = string | Array<string | Array<string>> | EventFilter | OrphanFilter;\n\n\n//////////////////////\n// Provider\n\n/**\n *  A **Provider** is the primary method to interact with the read-only\n *  content on Ethereum.\n *\n *  It allows access to details about accounts, blocks and transactions\n *  and the ability to query event logs and simulate contract execution.\n *\n *  Account data includes the [balance](getBalance),\n *  [transaction count](getTransactionCount), [code](getCode) and\n *  [state trie storage](getStorage).\n *\n *  Simulating execution can be used to [call](call),\n *  [estimate gas](estimateGas) and\n *  [get transaction results](getTransactionResult).\n *\n *  The [[broadcastTransaction]] is the only method which allows updating\n *  the blockchain, but it is usually accessed by a [[Signer]], since a\n *  private key must be used to sign the transaction before it can be\n *  broadcast.\n */\nexport interface Provider extends ContractRunner, EventEmitterable<ProviderEvent>, NameResolver {\n\n    /**\n     *  The provider iteself.\n     *\n     *  This is part of the necessary API for executing a contract, as\n     *  it provides a common property on any [[ContractRunner]] that\n     *  can be used to access the read-only portion of the runner.\n     */\n    provider: this;\n\n    /**\n     *  Shutdown any resources this provider is using. No additional\n     *  calls should be made to this provider after calling this.\n     */\n    destroy(): void;\n\n    ////////////////////\n    // State\n\n    /**\n     *  Get the current block number.\n     */\n    getBlockNumber(): Promise<number>;\n\n    /**\n     *  Get the connected [[Network]].\n     */\n    getNetwork(): Promise<Network>;\n\n    /**\n     *  Get the best guess at the recommended [[FeeData]].\n     */\n    getFeeData(): Promise<FeeData>;\n\n\n    ////////////////////\n    // Account\n\n    /**\n     *  Get the account balance (in wei) of %%address%%. If %%blockTag%%\n     *  is specified and the node supports archive access for that\n     *  %%blockTag%%, the balance is as of that [[BlockTag]].\n     *\n     *  @note On nodes without archive access enabled, the %%blockTag%% may be\n     *        **silently ignored** by the node, which may cause issues if relied on.\n     */\n    getBalance(address: AddressLike, blockTag?: BlockTag): Promise<bigint>;\n\n    /**\n     *  Get the number of transactions ever sent for %%address%%, which\n     *  is used as the ``nonce`` when sending a transaction. If\n     *  %%blockTag%% is specified and the node supports archive access\n     *  for that %%blockTag%%, the transaction count is as of that\n     *  [[BlockTag]].\n     *\n     *  @note On nodes without archive access enabled, the %%blockTag%% may be\n     *        **silently ignored** by the node, which may cause issues if relied on.\n     */\n    getTransactionCount(address: AddressLike, blockTag?: BlockTag): Promise<number>;\n\n    /**\n     *  Get the bytecode for %%address%%.\n     *\n     *  @note On nodes without archive access enabled, the %%blockTag%% may be\n     *        **silently ignored** by the node, which may cause issues if relied on.\n     */\n    getCode(address: AddressLike, blockTag?: BlockTag): Promise<string>\n\n    /**\n     *  Get the storage slot value for %%address%% at slot %%position%%.\n     *\n     *  @note On nodes without archive access enabled, the %%blockTag%% may be\n     *        **silently ignored** by the node, which may cause issues if relied on.\n     */\n    getStorage(address: AddressLike, position: BigNumberish, blockTag?: BlockTag): Promise<string>\n\n\n    ////////////////////\n    // Execution\n\n    /**\n     *  Estimates the amount of gas required to execute %%tx%%.\n     */\n    estimateGas(tx: TransactionRequest): Promise<bigint>;\n\n    /**\n     *  Simulate the execution of %%tx%%. If the call reverts, it will\n     *  throw a [[CallExceptionError]] which includes the revert data.\n     */\n    call(tx: TransactionRequest): Promise<string>\n\n    /**\n     *  Broadcasts the %%signedTx%% to the network, adding it to the\n     *  memory pool of any node for which the transaction meets the\n     *  rebroadcast requirements.\n     */\n    broadcastTransaction(signedTx: string): Promise<TransactionResponse>;\n\n\n    ////////////////////\n    // Queries\n\n    /**\n     *  Resolves to the block for %%blockHashOrBlockTag%%.\n     *\n     *  If %%prefetchTxs%%, and the backend supports including transactions\n     *  with block requests, all transactions will be included and the\n     *  [[Block]] object will not need to make remote calls for getting\n     *  transactions.\n     */\n    getBlock(blockHashOrBlockTag: BlockTag | string, prefetchTxs?: boolean): Promise<null | Block>;\n\n    /**\n     *  Resolves to the transaction for %%hash%%.\n     *\n     *  If the transaction is unknown or on pruning nodes which\n     *  discard old transactions this resolves to ``null``.\n     */\n    getTransaction(hash: string): Promise<null | TransactionResponse>;\n\n    /**\n     *  Resolves to the transaction receipt for %%hash%%, if mined.\n     *\n     *  If the transaction has not been mined, is unknown or on\n     *  pruning nodes which discard old transactions this resolves to\n     *  ``null``.\n     */\n    getTransactionReceipt(hash: string): Promise<null | TransactionReceipt>;\n\n    /**\n     *  Resolves to the result returned by the executions of %%hash%%.\n     *\n     *  This is only supported on nodes with archive access and with\n     *  the necessary debug APIs enabled.\n     */\n    getTransactionResult(hash: string): Promise<null | string>;\n\n\n    ////////////////////\n    // Bloom-filter Queries\n\n    /**\n     *  Resolves to the list of Logs that match %%filter%%\n     */\n    getLogs(filter: Filter | FilterByBlockHash): Promise<Array<Log>>;\n\n\n    ////////////////////\n    // ENS\n\n    /**\n     *  Resolves to the address configured for the %%ensName%% or\n     *  ``null`` if unconfigured.\n     */\n    resolveName(ensName: string): Promise<null | string>;\n\n    /**\n     *  Resolves to the ENS name associated for the %%address%% or\n     *  ``null`` if the //primary name// is not configured.\n     *\n     *  Users must perform additional steps to configure a //primary name//,\n     *  which is not currently common.\n     */\n    lookupAddress(address: string): Promise<null | string>;\n\n    /**\n     *  Waits until the transaction %%hash%% is mined and has %%confirms%%\n     *  confirmations.\n     */\n    waitForTransaction(hash: string, confirms?: number, timeout?: number): Promise<null | TransactionReceipt>;\n\n    /**\n     *  Resolves to the block at %%blockTag%% once it has been mined.\n     *\n     *  This can be useful for waiting some number of blocks by using\n     *  the ``currentBlockNumber + N``.\n     */\n    waitForBlock(blockTag?: BlockTag): Promise<Block>;\n}\n","/**\n *  Events allow for applications to use the observer pattern, which\n *  allows subscribing and publishing events, outside the normal\n *  execution paths.\n *\n *  @_section api/utils/events:Events  [about-events]\n */\nimport { defineProperties } from \"./properties.js\";\n\n/**\n *  A callback function called when a an event is triggered.\n */\nexport type Listener = (...args: Array<any>) => void;\n\n/**\n *  An **EventEmitterable** behaves similar to an EventEmitter\n *  except provides async access to its methods.\n *\n *  An EventEmitter implements the observer pattern.\n */\nexport interface EventEmitterable<T> {\n    /**\n     *  Registers a %%listener%% that is called whenever the\n     *  %%event%% occurs until unregistered.\n     */\n    on(event: T, listener: Listener): Promise<this>;\n\n    /**\n     *  Registers a %%listener%% that is called the next time\n     *  %%event%% occurs.\n     */\n    once(event: T, listener: Listener): Promise<this>;\n\n    /**\n     *  Triggers each listener for %%event%% with the %%args%%.\n     */\n    emit(event: T, ...args: Array<any>): Promise<boolean>;\n\n    /**\n     *  Resolves to the number of listeners for %%event%%.\n     */\n    listenerCount(event?: T): Promise<number>;\n\n    /**\n     *  Resolves to the listeners for %%event%%.\n     */\n    listeners(event?: T): Promise<Array<Listener>>;\n\n    /**\n     *  Unregister the %%listener%% for %%event%%. If %%listener%%\n     *  is unspecified, all listeners are unregistered.\n     */\n    off(event: T, listener?: Listener): Promise<this>;\n\n    /**\n     *  Unregister all listeners for %%event%%.\n     */\n    removeAllListeners(event?: T): Promise<this>;\n\n    /**\n     *  Alias for [[on]].\n     */\n    addListener(event: T, listener: Listener): Promise<this>;\n\n    /**\n     *  Alias for [[off]].\n     */\n    removeListener(event: T, listener: Listener): Promise<this>;\n}\n\n/**\n *  When an [[EventEmitterable]] triggers a [[Listener]], the\n *  callback always ahas one additional argument passed, which is\n *  an **EventPayload**.\n */\nexport class EventPayload<T> {\n    /**\n     *  The event filter.\n     */\n    readonly filter!: T;\n\n    /**\n     *  The **EventEmitterable**.\n     */\n    readonly emitter!: EventEmitterable<T>;\n\n    readonly #listener: null | Listener;\n\n    /**\n     *  Create a new **EventPayload** for %%emitter%% with\n     *  the %%listener%% and for %%filter%%.\n     */\n    constructor(emitter: EventEmitterable<T>, listener: null | Listener, filter: T) {\n        this.#listener = listener;\n        defineProperties<EventPayload<any>>(this, { emitter, filter });\n    }\n\n    /**\n     *  Unregister the triggered listener for future events.\n     */\n    async removeListener(): Promise<void> {\n        if (this.#listener == null) { return; }\n        await this.emitter.off(this.filter, this.#listener);\n    }\n}\n","// import from provider.ts instead of index.ts to prevent circular dep\n// from EtherscanProvider\nimport {\n    Block, Log, TransactionReceipt, TransactionResponse\n} from \"../providers/provider.js\";\nimport { defineProperties, EventPayload } from \"../utils/index.js\";\n\nimport type { EventFragment, Interface, Result } from \"../abi/index.js\";\nimport type { Listener } from \"../utils/index.js\";\nimport type {\n    Provider\n} from \"../providers/index.js\";\n\nimport type { BaseContract } from \"./contract.js\";\nimport type { ContractEventName } from \"./types.js\";\n\n/**\n *  An **EventLog** contains additional properties parsed from the [[Log]].\n */\nexport class EventLog extends Log {\n    /**\n     *  The Contract Interface.\n     */\n    readonly interface!: Interface;\n\n    /**\n     *  The matching event.\n     */\n    readonly fragment!: EventFragment;\n\n    /**\n     *  The parsed arguments passed to the event by ``emit``.\n     */\n    readonly args!: Result;\n\n    /**\n     * @_ignore:\n     */\n    constructor(log: Log, iface: Interface, fragment: EventFragment) {\n        super(log, log.provider);\n        const args = iface.decodeEventLog(fragment, log.data, log.topics);\n        defineProperties<EventLog>(this, { args, fragment, interface: iface });\n    }\n\n    /**\n     *  The name of the event.\n     */\n    get eventName(): string { return this.fragment.name; }\n\n    /**\n     *  The signature of the event.\n     */\n    get eventSignature(): string { return this.fragment.format(); }\n}\n\n/**\n *  An **EventLog** contains additional properties parsed from the [[Log]].\n */\nexport class UndecodedEventLog extends Log {\n\n    /**\n     *  The error encounted when trying to decode the log.\n     */\n    readonly error!: Error;\n\n    /**\n     * @_ignore:\n     */\n    constructor(log: Log, error: Error) {\n        super(log, log.provider);\n        defineProperties<UndecodedEventLog>(this, { error });\n    }\n}\n\n/**\n *  A **ContractTransactionReceipt** includes the parsed logs from a\n *  [[TransactionReceipt]].\n */\nexport class ContractTransactionReceipt extends TransactionReceipt {\n    readonly #iface: Interface;\n\n    /**\n     *  @_ignore:\n     */\n    constructor(iface: Interface, provider: Provider, tx: TransactionReceipt) {\n        super(tx, provider);\n        this.#iface = iface;\n    }\n\n    /**\n     *  The parsed logs for any [[Log]] which has a matching event in the\n     *  Contract ABI.\n     */\n    get logs(): Array<EventLog | Log> {\n        return super.logs.map((log) => {\n            const fragment = log.topics.length ? this.#iface.getEvent(log.topics[0]): null;\n            if (fragment) {\n                try {\n                    return new EventLog(log, this.#iface, fragment)\n                } catch (error: any) {\n                    return new UndecodedEventLog(log, error);\n                }\n            }\n\n            return log;\n        });\n    }\n\n}\n\n/**\n *  A **ContractTransactionResponse** will return a\n *  [[ContractTransactionReceipt]] when waited on.\n */\nexport class ContractTransactionResponse extends TransactionResponse {\n    readonly #iface: Interface;\n\n    /**\n     *  @_ignore:\n     */\n    constructor(iface: Interface, provider: Provider, tx: TransactionResponse) {\n        super(tx, provider);\n        this.#iface = iface;\n    }\n\n    /**\n     *  Resolves once this transaction has been mined and has\n     *  %%confirms%% blocks including it (default: ``1``) with an\n     *  optional %%timeout%%.\n     *\n     *  This can resolve to ``null`` only if %%confirms%% is ``0``\n     *  and the transaction has not been mined, otherwise this will\n     *  wait until enough confirmations have completed.\n     */\n    async wait(confirms?: number, timeout?: number): Promise<null | ContractTransactionReceipt> {\n        const receipt = await super.wait(confirms, timeout);\n        if (receipt == null) { return null; }\n        return new ContractTransactionReceipt(this.#iface, this.provider, receipt);\n    }\n}\n\n/**\n *  A **ContractUnknownEventPayload** is included as the last parameter to\n *  Contract Events when the event does not match any events in the ABI.\n */\nexport  class ContractUnknownEventPayload extends EventPayload<ContractEventName> {\n    /**\n     *  The log with no matching events.\n     */\n    readonly log!: Log;\n\n    /**\n     *  @_event:\n     */\n    constructor(contract: BaseContract, listener: null | Listener, filter: ContractEventName, log: Log) {\n        super(contract, listener, filter);\n        defineProperties<ContractUnknownEventPayload>(this, { log });\n    }\n\n    /**\n     *  Resolves to the block the event occured in.\n     */\n    async getBlock(): Promise<Block> {\n        return await this.log.getBlock();\n    }\n\n    /**\n     *  Resolves to the transaction the event occured in.\n     */\n    async getTransaction(): Promise<TransactionResponse> {\n        return await this.log.getTransaction();\n    }\n\n    /**\n     *  Resolves to the transaction receipt the event occured in.\n     */\n    async getTransactionReceipt(): Promise<TransactionReceipt> {\n        return await this.log.getTransactionReceipt();\n    }\n}\n\n/**\n *  A **ContractEventPayload** is included as the last parameter to\n *  Contract Events when the event is known.\n */\nexport class ContractEventPayload extends ContractUnknownEventPayload {\n\n    /**\n     *  The matching event.\n     */\n    declare readonly fragment: EventFragment;\n\n    /**\n     *  The log, with parsed properties.\n     */\n    declare readonly log: EventLog;\n\n    /**\n     *  The parsed arguments passed to the event by ``emit``.\n     */\n    declare readonly args: Result;\n\n    /**\n     *  @_ignore:\n     */\n    constructor(contract: BaseContract, listener: null | Listener, filter: ContractEventName, fragment: EventFragment, _log: Log) {\n        super(contract, listener, filter, new EventLog(_log, contract.interface, fragment));\n        const args = contract.interface.decodeEventLog(fragment, this.log.data, this.log.topics);\n        defineProperties<ContractEventPayload>(this, { args, fragment });\n    }\n\n    /**\n     *  The event name.\n     */\n    get eventName(): string {\n        return this.fragment.name;\n    }\n\n    /**\n     *  The event signature.\n     */\n    get eventSignature(): string {\n        return this.fragment.format();\n    }\n}\n","import { Interface, Typed } from \"../abi/index.js\";\nimport { isAddressable, resolveAddress } from \"../address/index.js\";\n// import from provider.ts instead of index.ts to prevent circular dep\n// from EtherscanProvider\nimport { copyRequest, Log, TransactionResponse } from \"../providers/provider.js\";\nimport {\n    defineProperties, getBigInt, isCallException, isHexString, resolveProperties,\n    isError, makeError, assert, assertArgument\n} from \"../utils/index.js\";\n\nimport {\n    ContractEventPayload, ContractUnknownEventPayload,\n    ContractTransactionResponse,\n    EventLog, UndecodedEventLog\n} from \"./wrappers.js\";\n\nimport type { EventFragment, FunctionFragment, InterfaceAbi, ParamType, Result } from \"../abi/index.js\";\nimport type { Addressable, NameResolver } from \"../address/index.js\";\nimport type { EventEmitterable, Listener } from \"../utils/index.js\";\nimport type {\n    BlockTag, ContractRunner, Provider, TransactionRequest, TopicFilter\n} from \"../providers/index.js\";\n\nimport type {\n    BaseContractMethod,\n    ContractEventName,\n    ContractInterface,\n    ContractMethodArgs,\n    ContractMethod,\n    ContractEventArgs,\n    ContractEvent,\n    ContractTransaction,\n    DeferredTopicFilter,\n    WrappedFallback\n} from \"./types.js\";\n\nconst BN_0 = BigInt(0);\n\ninterface ContractRunnerCaller extends ContractRunner {\n    call: (tx: TransactionRequest) => Promise<string>;\n}\n\ninterface ContractRunnerEstimater extends ContractRunner {\n    estimateGas: (tx: TransactionRequest) => Promise<bigint>;\n}\n\ninterface ContractRunnerSender extends ContractRunner {\n    sendTransaction: (tx: TransactionRequest) => Promise<TransactionResponse>;\n}\n\ninterface ContractRunnerResolver extends ContractRunner {\n    resolveName: (name: string | Addressable) => Promise<null | string>;\n}\n\nfunction canCall(value: any): value is ContractRunnerCaller {\n    return (value && typeof(value.call) === \"function\");\n}\n\nfunction canEstimate(value: any): value is ContractRunnerEstimater {\n    return (value && typeof(value.estimateGas) === \"function\");\n}\n\nfunction canResolve(value: any): value is ContractRunnerResolver {\n    return (value && typeof(value.resolveName) === \"function\");\n}\n\nfunction canSend(value: any): value is ContractRunnerSender {\n    return (value && typeof(value.sendTransaction) === \"function\");\n}\n\nfunction getResolver(value: any): undefined | NameResolver {\n    if (value != null) {\n        if (canResolve(value)) { return value; }\n        if (value.provider) { return value.provider; }\n    }\n    return undefined;\n}\n\nclass PreparedTopicFilter implements DeferredTopicFilter {\n    #filter: Promise<TopicFilter>;\n    readonly fragment!: EventFragment;\n\n    constructor(contract: BaseContract, fragment: EventFragment, args: Array<any>) {\n        defineProperties<PreparedTopicFilter>(this, { fragment });\n        if (fragment.inputs.length < args.length) {\n            throw new Error(\"too many arguments\");\n        }\n\n        // Recursively descend into args and resolve any addresses\n        const runner = getRunner(contract.runner, \"resolveName\");\n        const resolver = canResolve(runner) ? runner: null;\n        this.#filter = (async function() {\n            const resolvedArgs = await Promise.all(fragment.inputs.map((param, index) => {\n                const arg = args[index];\n                if (arg == null) { return null; }\n\n                return param.walkAsync(args[index], (type, value) => {\n                    if (type === \"address\") {\n                        if (Array.isArray(value)) {\n                            return Promise.all(value.map((v) => resolveAddress(v, resolver)));\n                        }\n                        return resolveAddress(value, resolver);\n                    }\n                    return value;\n                });\n            }));\n\n            return contract.interface.encodeFilterTopics(fragment, resolvedArgs);\n        })();\n    }\n\n    getTopicFilter(): Promise<TopicFilter> {\n        return this.#filter;\n    }\n}\n\n\n// A = Arguments passed in as a tuple\n// R = The result type of the call (i.e. if only one return type,\n//     the qualified type, otherwise Result)\n// D = The type the default call will return (i.e. R for view/pure,\n//     TransactionResponse otherwise)\n//export interface ContractMethod<A extends Array<any> = Array<any>, R = any, D extends R | ContractTransactionResponse = ContractTransactionResponse> {\n\nfunction getRunner<T extends ContractRunner>(value: any, feature: keyof ContractRunner): null | T {\n    if (value == null) { return null; }\n    if (typeof(value[feature]) === \"function\") { return value; }\n    if (value.provider && typeof(value.provider[feature]) === \"function\") {\n        return value.provider;\n    }\n    return null;\n}\n\nfunction getProvider(value: null | ContractRunner): null | Provider {\n    if (value == null) { return null; }\n    return value.provider || null;\n}\n\n/**\n *  @_ignore:\n */\nexport async function copyOverrides<O extends string = \"data\" | \"to\">(arg: any, allowed?: Array<string>): Promise<Omit<ContractTransaction, O>> {\n\n    // Make sure the overrides passed in are a valid overrides object\n    const _overrides = Typed.dereference(arg, \"overrides\");\n    assertArgument(typeof(_overrides) === \"object\", \"invalid overrides parameter\", \"overrides\", arg);\n\n    // Create a shallow copy (we'll deep-ify anything needed during normalizing)\n    const overrides = copyRequest(_overrides);\n\n    assertArgument(overrides.to == null || (allowed || [ ]).indexOf(\"to\") >= 0,\n      \"cannot override to\", \"overrides.to\", overrides.to);\n    assertArgument(overrides.data == null || (allowed || [ ]).indexOf(\"data\") >= 0,\n      \"cannot override data\", \"overrides.data\", overrides.data);\n\n    // Resolve any from\n    if (overrides.from) { overrides.from = overrides.from; }\n\n    return <Omit<ContractTransaction, O>>overrides;\n}\n\n/**\n *  @_ignore:\n */\nexport async function resolveArgs(_runner: null | ContractRunner, inputs: ReadonlyArray<ParamType>, args: Array<any>): Promise<Array<any>> {\n    // Recursively descend into args and resolve any addresses\n    const runner = getRunner(_runner, \"resolveName\");\n    const resolver = canResolve(runner) ? runner: null;\n    return await Promise.all(inputs.map((param, index) => {\n        return param.walkAsync(args[index], (type, value) => {\n            value = Typed.dereference(value, type);\n            if (type === \"address\") { return resolveAddress(value, resolver); }\n            return value;\n        });\n    }));\n}\n\nfunction buildWrappedFallback(contract: BaseContract): WrappedFallback {\n\n    const populateTransaction = async function(overrides?: Omit<TransactionRequest, \"to\">): Promise<ContractTransaction> {\n        // If an overrides was passed in, copy it and normalize the values\n\n        const tx: ContractTransaction = <any>(await copyOverrides<\"data\">(overrides, [ \"data\" ]));\n        tx.to = await contract.getAddress();\n\n        if (tx.from) {\n            tx.from = await resolveAddress(tx.from, getResolver(contract.runner));\n        }\n\n        const iface = contract.interface;\n\n        const noValue = (getBigInt((tx.value || BN_0), \"overrides.value\") === BN_0);\n        const noData = ((tx.data || \"0x\") === \"0x\");\n\n        if (iface.fallback && !iface.fallback.payable && iface.receive && !noData && !noValue) {\n            assertArgument(false, \"cannot send data to receive or send value to non-payable fallback\", \"overrides\", overrides);\n        }\n\n        assertArgument(iface.fallback || noData,\n          \"cannot send data to receive-only contract\", \"overrides.data\", tx.data);\n\n        // Only allow payable contracts to set non-zero value\n        const payable = iface.receive || (iface.fallback && iface.fallback.payable);\n        assertArgument(payable || noValue,\n          \"cannot send value to non-payable fallback\", \"overrides.value\", tx.value);\n\n        // Only allow fallback contracts to set non-empty data\n        assertArgument(iface.fallback || noData,\n          \"cannot send data to receive-only contract\", \"overrides.data\", tx.data);\n\n        return tx;\n    }\n\n    const staticCall = async function(overrides?: Omit<TransactionRequest, \"to\">): Promise<string> {\n        const runner = getRunner(contract.runner, \"call\");\n        assert(canCall(runner), \"contract runner does not support calling\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"call\" });\n\n        const tx = await populateTransaction(overrides);\n\n        try {\n            return await runner.call(tx);\n        } catch (error: any) {\n            if (isCallException(error) && error.data) {\n                throw contract.interface.makeError(error.data, tx);\n            }\n            throw error;\n        }\n    }\n\n    const send = async function(overrides?: Omit<TransactionRequest, \"to\">): Promise<ContractTransactionResponse> {\n        const runner = contract.runner;\n        assert(canSend(runner), \"contract runner does not support sending transactions\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"sendTransaction\" });\n\n        const tx = await runner.sendTransaction(await populateTransaction(overrides));\n        const provider = getProvider(contract.runner);\n        // @TODO: the provider can be null; make a custom dummy provider that will throw a\n        // meaningful error\n        return new ContractTransactionResponse(contract.interface, <Provider>provider, tx);\n    }\n\n    const estimateGas = async function(overrides?: Omit<TransactionRequest, \"to\">): Promise<bigint> {\n        const runner = getRunner(contract.runner, \"estimateGas\");\n        assert(canEstimate(runner), \"contract runner does not support gas estimation\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"estimateGas\" });\n\n        return await runner.estimateGas(await populateTransaction(overrides));\n    }\n\n    const method = async (overrides?: Omit<TransactionRequest, \"to\">) => {\n        return await send(overrides);\n    };\n\n    defineProperties<any>(method, {\n        _contract: contract,\n\n        estimateGas,\n        populateTransaction,\n        send, staticCall\n    });\n\n    return <WrappedFallback>method;\n}\n\nfunction buildWrappedMethod<A extends Array<any> = Array<any>, R = any, D extends R | ContractTransactionResponse = ContractTransactionResponse>(contract: BaseContract, key: string): BaseContractMethod<A, R, D> {\n\n    const getFragment = function(...args: ContractMethodArgs<A>): FunctionFragment {\n        const fragment = contract.interface.getFunction(key, args);\n        assert(fragment, \"no matching fragment\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"fragment\",\n            info: { key, args }\n        });\n        return fragment;\n    }\n\n    const populateTransaction = async function(...args: ContractMethodArgs<A>): Promise<ContractTransaction> {\n        const fragment = getFragment(...args);\n\n        // If an overrides was passed in, copy it and normalize the values\n        let overrides: Omit<ContractTransaction, \"data\" | \"to\"> = { };\n        if (fragment.inputs.length + 1 === args.length) {\n            overrides = await copyOverrides(args.pop());\n\n            if (overrides.from) {\n                overrides.from = await resolveAddress(overrides.from, getResolver(contract.runner));\n            }\n        }\n\n        if (fragment.inputs.length !== args.length) {\n            throw new Error(\"internal error: fragment inputs doesn't match arguments; should not happen\");\n        }\n\n        const resolvedArgs = await resolveArgs(contract.runner, fragment.inputs, args);\n\n        return Object.assign({ }, overrides, await resolveProperties({\n            to: contract.getAddress(),\n            data: contract.interface.encodeFunctionData(fragment, resolvedArgs)\n        }));\n    }\n\n    const staticCall = async function(...args: ContractMethodArgs<A>): Promise<R> {\n        const result = await staticCallResult(...args);\n        if (result.length === 1) { return result[0]; }\n        return <R><unknown>result;\n    }\n\n    const send = async function(...args: ContractMethodArgs<A>): Promise<ContractTransactionResponse> {\n        const runner = contract.runner;\n        assert(canSend(runner), \"contract runner does not support sending transactions\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"sendTransaction\" });\n\n        const tx = await runner.sendTransaction(await populateTransaction(...args));\n        const provider = getProvider(contract.runner);\n        // @TODO: the provider can be null; make a custom dummy provider that will throw a\n        // meaningful error\n        return new ContractTransactionResponse(contract.interface, <Provider>provider, tx);\n    }\n\n    const estimateGas = async function(...args: ContractMethodArgs<A>): Promise<bigint> {\n        const runner = getRunner(contract.runner, \"estimateGas\");\n        assert(canEstimate(runner), \"contract runner does not support gas estimation\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"estimateGas\" });\n\n        return await runner.estimateGas(await populateTransaction(...args));\n    }\n\n    const staticCallResult = async function(...args: ContractMethodArgs<A>): Promise<Result> {\n        const runner = getRunner(contract.runner, \"call\");\n        assert(canCall(runner), \"contract runner does not support calling\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"call\" });\n\n        const tx = await populateTransaction(...args);\n\n        let result = \"0x\";\n        try {\n            result = await runner.call(tx);\n        } catch (error: any) {\n            if (isCallException(error) && error.data) {\n                throw contract.interface.makeError(error.data, tx);\n            }\n            throw error;\n        }\n\n        const fragment = getFragment(...args);\n        return contract.interface.decodeFunctionResult(fragment, result);\n    };\n\n    const method = async (...args: ContractMethodArgs<A>) => {\n        const fragment = getFragment(...args);\n        if (fragment.constant) { return await staticCall(...args); }\n        return await send(...args);\n    };\n\n    defineProperties<any>(method, {\n        name: contract.interface.getFunctionName(key),\n        _contract: contract, _key: key,\n\n        getFragment,\n\n        estimateGas,\n        populateTransaction,\n        send, staticCall, staticCallResult,\n    });\n\n    // Only works on non-ambiguous keys (refined fragment is always non-ambiguous)\n    Object.defineProperty(method, \"fragment\", {\n        configurable: false,\n        enumerable: true,\n        get: () => {\n            const fragment = contract.interface.getFunction(key);\n            assert(fragment, \"no matching fragment\", \"UNSUPPORTED_OPERATION\", {\n                operation: \"fragment\",\n                info: { key }\n            });\n            return fragment;\n        }\n    });\n\n    return <BaseContractMethod<A, R, D>>method;\n}\n\nfunction buildWrappedEvent<A extends Array<any> = Array<any>>(contract: BaseContract, key: string): ContractEvent<A> {\n\n    const getFragment = function(...args: ContractEventArgs<A>): EventFragment {\n        const fragment = contract.interface.getEvent(key, args);\n\n        assert(fragment, \"no matching fragment\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"fragment\",\n            info: { key, args }\n        });\n\n        return fragment;\n    }\n\n    const method = function(...args: ContractMethodArgs<A>): PreparedTopicFilter {\n        return new PreparedTopicFilter(contract, getFragment(...args), args);\n    };\n\n    defineProperties<any>(method, {\n        name: contract.interface.getEventName(key),\n        _contract: contract, _key: key,\n\n        getFragment\n    });\n\n    // Only works on non-ambiguous keys (refined fragment is always non-ambiguous)\n    Object.defineProperty(method, \"fragment\", {\n        configurable: false,\n        enumerable: true,\n        get: () => {\n            const fragment = contract.interface.getEvent(key);\n\n            assert(fragment, \"no matching fragment\", \"UNSUPPORTED_OPERATION\", {\n                operation: \"fragment\",\n                info: { key }\n            });\n\n            return fragment;\n        }\n    });\n\n    return <ContractEvent<A>><unknown>method;\n}\n\ntype Sub = {\n    tag: string;\n    listeners: Array<{ listener: Listener, once: boolean }>,\n    start: () => void;\n    stop: () => void;\n};\n\n\n// The combination of TypeScrype, Private Fields and Proxies makes\n// the world go boom; so we hide variables with some trickery keeping\n// a symbol attached to each BaseContract which its sub-class (even\n// via a Proxy) can reach and use to look up its internal values.\n\nconst internal = Symbol.for(\"_ethersInternal_contract\");\ntype Internal = {\n    addrPromise: Promise<string>;\n    addr: null | string;\n\n    deployTx: null | ContractTransactionResponse;\n\n    subs: Map<string, Sub>;\n};\n\nconst internalValues: WeakMap<BaseContract, Internal> = new WeakMap();\n\nfunction setInternal(contract: BaseContract, values: Internal): void {\n    internalValues.set(contract[internal], values);\n}\n\nfunction getInternal(contract: BaseContract): Internal {\n    return internalValues.get(contract[internal]) as Internal;\n}\n\nfunction isDeferred(value: any): value is DeferredTopicFilter {\n    return (value && typeof(value) === \"object\" && (\"getTopicFilter\" in value) &&\n      (typeof(value.getTopicFilter) === \"function\") && value.fragment);\n}\n\nasync function getSubInfo(contract: BaseContract, event: ContractEventName): Promise<{ fragment: null | EventFragment, tag: string, topics: TopicFilter }> {\n    let topics: Array<null | string | Array<string>>;\n    let fragment: null | EventFragment = null;\n\n    // Convert named events to topicHash and get the fragment for\n    // events which need deconstructing.\n\n    if (Array.isArray(event)) {\n        const topicHashify = function(name: string): string {\n            if (isHexString(name, 32)) { return name; }\n            const fragment = contract.interface.getEvent(name);\n            assertArgument(fragment, \"unknown fragment\", \"name\", name);\n            return fragment.topicHash;\n        }\n\n        // Array of Topics and Names; e.g. `[ \"0x1234...89ab\", \"Transfer(address)\" ]`\n        topics = event.map((e) => {\n            if (e == null) { return null; }\n            if (Array.isArray(e)) { return e.map(topicHashify); }\n            return topicHashify(e);\n        });\n\n    } else if (event === \"*\") {\n        topics = [ null ];\n\n    } else if (typeof(event) === \"string\") {\n        if (isHexString(event, 32)) {\n            // Topic Hash\n            topics = [ event ];\n        } else {\n           // Name or Signature; e.g. `\"Transfer\", `\"Transfer(address)\"`\n            fragment = contract.interface.getEvent(event);\n            assertArgument(fragment, \"unknown fragment\", \"event\", event);\n            topics = [ fragment.topicHash ];\n        }\n\n    } else if (isDeferred(event)) {\n        // Deferred Topic Filter; e.g. `contract.filter.Transfer(from)`\n        topics = await event.getTopicFilter();\n\n    } else if (\"fragment\" in event) {\n        // ContractEvent; e.g. `contract.filter.Transfer`\n        fragment = event.fragment;\n        topics = [ fragment.topicHash ];\n\n    } else {\n        assertArgument(false, \"unknown event name\", \"event\", event);\n    }\n\n    // Normalize topics and sort TopicSets\n    topics = topics.map((t) => {\n        if (t == null) { return null; }\n        if (Array.isArray(t)) {\n            const items = Array.from(new Set(t.map((t) => t.toLowerCase())).values());\n            if (items.length === 1) { return items[0]; }\n            items.sort();\n            return items;\n        }\n        return t.toLowerCase();\n    });\n\n    const tag = topics.map((t) => {\n        if (t == null) { return \"null\"; }\n        if (Array.isArray(t)) { return t.join(\"|\"); }\n        return t;\n    }).join(\"&\");\n\n    return { fragment, tag, topics }\n}\n\nasync function hasSub(contract: BaseContract, event: ContractEventName): Promise<null | Sub> {\n    const { subs } = getInternal(contract);\n    return subs.get((await getSubInfo(contract, event)).tag) || null;\n}\n\nasync function getSub(contract: BaseContract, operation: string, event: ContractEventName): Promise<Sub> {\n    // Make sure our runner can actually subscribe to events\n    const provider = getProvider(contract.runner);\n    assert(provider, \"contract runner does not support subscribing\",\n        \"UNSUPPORTED_OPERATION\", { operation });\n\n    const { fragment, tag, topics } = await getSubInfo(contract, event);\n\n    const { addr, subs } = getInternal(contract);\n\n    let sub = subs.get(tag);\n    if (!sub) {\n        const address: string | Addressable = (addr ? addr: contract);\n        const filter = { address, topics };\n        const listener = (log: Log) => {\n            let foundFragment = fragment;\n            if (foundFragment == null) {\n                try {\n                    foundFragment = contract.interface.getEvent(log.topics[0]);\n                } catch (error) { }\n            }\n\n            // If fragment is null, we do not deconstruct the args to emit\n\n            if (foundFragment) {\n                const _foundFragment = foundFragment;\n                const args = fragment ? contract.interface.decodeEventLog(fragment, log.data, log.topics): [ ];\n                emit(contract, event, args, (listener: null | Listener) => {\n                    return new ContractEventPayload(contract, listener, event, _foundFragment, log);\n                });\n            } else {\n                emit(contract, event, [ ], (listener: null | Listener) => {\n                    return new ContractUnknownEventPayload(contract, listener, event, log);\n                });\n            }\n        };\n\n        let starting: Array<Promise<any>> = [ ];\n        const start = () => {\n            if (starting.length) { return; }\n            starting.push(provider.on(filter, listener));\n        };\n\n        const stop = async () => {\n            if (starting.length == 0) { return; }\n\n            let started = starting;\n            starting = [ ];\n            await Promise.all(started);\n            provider.off(filter, listener);\n        };\n\n        sub = { tag, listeners: [ ], start, stop };\n        subs.set(tag, sub);\n    }\n    return sub;\n}\n\n// We use this to ensure one emit resolves before firing the next to\n// ensure correct ordering (note this cannot throw and just adds the\n// notice to the event queu using setTimeout).\nlet lastEmit: Promise<any> = Promise.resolve();\n\ntype PayloadFunc = (listener: null | Listener) => ContractUnknownEventPayload;\n\nasync function _emit(contract: BaseContract, event: ContractEventName, args: Array<any>, payloadFunc: null | PayloadFunc): Promise<boolean> {\n    await lastEmit;\n\n    const sub = await hasSub(contract, event);\n    if (!sub) { return false; }\n\n    const count = sub.listeners.length;\n    sub.listeners = sub.listeners.filter(({ listener, once }) => {\n        const passArgs = Array.from(args);\n        if (payloadFunc) {\n            passArgs.push(payloadFunc(once ? null: listener));\n        }\n        try {\n            listener.call(contract, ...passArgs);\n        } catch (error) { }\n        return !once;\n    });\n\n    if (sub.listeners.length === 0) {\n        sub.stop();\n        getInternal(contract).subs.delete(sub.tag);\n    }\n\n    return (count > 0);\n}\n\nasync function emit(contract: BaseContract, event: ContractEventName, args: Array<any>, payloadFunc: null | PayloadFunc): Promise<boolean> {\n    try {\n        await lastEmit;\n    } catch (error) { }\n\n    const resultPromise = _emit(contract, event, args, payloadFunc);\n    lastEmit = resultPromise;\n    return await resultPromise;\n}\n\nconst passProperties = [ \"then\" ];\nexport class BaseContract implements Addressable, EventEmitterable<ContractEventName> {\n    /**\n     *  The target to connect to.\n     *\n     *  This can be an address, ENS name or any [[Addressable]], such as\n     *  another contract. To get the resovled address, use the ``getAddress``\n     *  method.\n     */\n    readonly target!: string | Addressable;\n\n    /**\n     *  The contract Interface.\n     */\n    readonly interface!: Interface;\n\n    /**\n     *  The connected runner. This is generally a [[Provider]] or a\n     *  [[Signer]], which dictates what operations are supported.\n     *\n     *  For example, a **Contract** connected to a [[Provider]] may\n     *  only execute read-only operations.\n     */\n    readonly runner!: null | ContractRunner;\n\n    /**\n     *  All the Events available on this contract.\n     */\n    readonly filters!: Record<string, ContractEvent>;\n\n    /**\n     *  @_ignore:\n     */\n    readonly [internal]: any;\n\n    /**\n     *  The fallback or receive function if any.\n     */\n    readonly fallback!: null | WrappedFallback;\n\n    /**\n     *  Creates a new contract connected to %%target%% with the %%abi%% and\n     *  optionally connected to a %%runner%% to perform operations on behalf\n     *  of.\n     */\n    constructor(target: string | Addressable, abi: Interface | InterfaceAbi, runner?: null | ContractRunner, _deployTx?: null | TransactionResponse) {\n        assertArgument(typeof(target) === \"string\" || isAddressable(target),\n            \"invalid value for Contract target\", \"target\", target);\n\n        if (runner == null) { runner = null; }\n        const iface = Interface.from(abi);\n        defineProperties<BaseContract>(this, { target, runner, interface: iface });\n\n        Object.defineProperty(this, internal, { value: { } });\n\n        let addrPromise;\n        let addr: null | string = null;\n\n        let deployTx: null | ContractTransactionResponse = null;\n        if (_deployTx) {\n            const provider = getProvider(runner);\n            // @TODO: the provider can be null; make a custom dummy provider that will throw a\n            // meaningful error\n            deployTx = new ContractTransactionResponse(this.interface, <Provider>provider, _deployTx);\n        }\n\n        let subs = new Map();\n\n        // Resolve the target as the address\n        if (typeof(target) === \"string\") {\n            if (isHexString(target)) {\n                addr = target;\n                addrPromise = Promise.resolve(target);\n\n            } else {\n                const resolver = getRunner(runner, \"resolveName\");\n                if (!canResolve(resolver)) {\n                    throw makeError(\"contract runner does not support name resolution\", \"UNSUPPORTED_OPERATION\", {\n                        operation: \"resolveName\"\n                    });\n                }\n\n                addrPromise = resolver.resolveName(target).then((addr) => {\n                    if (addr == null) {\n                        throw makeError(\"an ENS name used for a contract target must be correctly configured\", \"UNCONFIGURED_NAME\", {\n                            value: target\n                        });\n                    }\n                    getInternal(this).addr = addr;\n                    return addr;\n                });\n            }\n        } else {\n            addrPromise = target.getAddress().then((addr) => {\n                if (addr == null) { throw new Error(\"TODO\"); }\n                getInternal(this).addr = addr;\n                return addr;\n            });\n        }\n\n        // Set our private values\n        setInternal(this, { addrPromise, addr, deployTx, subs });\n\n        // Add the event filters\n        const filters = new Proxy({ }, {\n            get: (target, prop, receiver) => {\n                // Pass important checks (like `then` for Promise) through\n                if (typeof(prop) === \"symbol\" || passProperties.indexOf(prop) >= 0) {\n                    return Reflect.get(target, prop, receiver);\n                }\n\n                try {\n                    return this.getEvent(prop);\n                } catch (error) {\n                    if (!isError(error, \"INVALID_ARGUMENT\") || error.argument !== \"key\") {\n                        throw error;\n                    }\n                }\n\n                return undefined;\n            },\n            has: (target, prop) => {\n                // Pass important checks (like `then` for Promise) through\n                if (passProperties.indexOf(<string>prop) >= 0) {\n                    return Reflect.has(target, prop);\n                }\n\n                return Reflect.has(target, prop) || this.interface.hasEvent(String(prop));\n            }\n        });\n        defineProperties<BaseContract>(this, { filters });\n\n        defineProperties<BaseContract>(this, {\n            fallback: ((iface.receive || iface.fallback) ? (buildWrappedFallback(this)): null)\n        });\n\n        // Return a Proxy that will respond to functions\n        return new Proxy(this, {\n            get: (target, prop, receiver) => {\n                if (typeof(prop) === \"symbol\" || prop in target || passProperties.indexOf(prop) >= 0) {\n                    return Reflect.get(target, prop, receiver);\n                }\n\n                // Undefined properties should return undefined\n                try {\n                    return target.getFunction(prop);\n                } catch (error) {\n                    if (!isError(error, \"INVALID_ARGUMENT\") || error.argument !== \"key\") {\n                        throw error;\n                    }\n                }\n\n                return undefined;\n            },\n            has: (target, prop) => {\n                if (typeof(prop) === \"symbol\" || prop in target || passProperties.indexOf(prop) >= 0) {\n                    return Reflect.has(target, prop);\n                }\n\n                return target.interface.hasFunction(prop);\n            }\n        });\n\n    }\n\n    /**\n     *  Return a new Contract instance with the same target and ABI, but\n     *  a different %%runner%%.\n     */\n    connect(runner: null | ContractRunner): BaseContract {\n        return new BaseContract(this.target, this.interface, runner);\n    }\n\n    /**\n     *  Return a new Contract instance with the same ABI and runner, but\n     *  a different %%target%%.\n     */\n    attach(target: string | Addressable): BaseContract {\n        return new BaseContract(target, this.interface, this.runner);\n    }\n\n    /**\n     *  Return the resolved address of this Contract.\n     */\n    async getAddress(): Promise<string> { return await getInternal(this).addrPromise; }\n\n    /**\n     *  Return the deployed bytecode or null if no bytecode is found.\n     */\n    async getDeployedCode(): Promise<null | string> {\n        const provider = getProvider(this.runner);\n        assert(provider, \"runner does not support .provider\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"getDeployedCode\" });\n\n        const code = await provider.getCode(await this.getAddress());\n        if (code === \"0x\") { return null; }\n        return code;\n    }\n\n    /**\n     *  Resolve to this Contract once the bytecode has been deployed, or\n     *  resolve immediately if already deployed.\n     */\n    async waitForDeployment(): Promise<this> {\n        // We have the deployement transaction; just use that (throws if deployement fails)\n        const deployTx = this.deploymentTransaction();\n        if (deployTx) {\n            await deployTx.wait();\n            return this;\n        }\n\n        // Check for code\n        const code = await this.getDeployedCode();\n        if (code != null) { return this; }\n\n        // Make sure we can subscribe to a provider event\n        const provider = getProvider(this.runner);\n        assert(provider != null, \"contract runner does not support .provider\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"waitForDeployment\" });\n\n        return new Promise((resolve, reject) => {\n            const checkCode = async () => {\n                try {\n                    const code = await this.getDeployedCode();\n                    if (code != null) { return resolve(this); }\n                    provider.once(\"block\", checkCode);\n                } catch (error) {\n                    reject(error);\n                }\n            };\n            checkCode();\n        });\n    }\n\n    /**\n     *  Return the transaction used to deploy this contract.\n     *\n     *  This is only available if this instance was returned from a\n     *  [[ContractFactory]].\n     */\n    deploymentTransaction(): null | ContractTransactionResponse {\n        return getInternal(this).deployTx;\n    }\n\n    /**\n     *  Return the function for a given name. This is useful when a contract\n     *  method name conflicts with a JavaScript name such as ``prototype`` or\n     *  when using a Contract programatically.\n     */\n    getFunction<T extends ContractMethod = ContractMethod>(key: string | FunctionFragment): T {\n        if (typeof(key) !== \"string\") { key = key.format(); }\n        const func = buildWrappedMethod(this, key);\n        return <T>func;\n    }\n\n    /**\n     *  Return the event for a given name. This is useful when a contract\n     *  event name conflicts with a JavaScript name such as ``prototype`` or\n     *  when using a Contract programatically.\n     */\n    getEvent(key: string | EventFragment): ContractEvent {\n        if (typeof(key) !== \"string\") { key = key.format(); }\n        return buildWrappedEvent(this, key);\n    }\n\n    /**\n     *  @_ignore:\n     */\n    async queryTransaction(hash: string): Promise<Array<EventLog>> {\n        throw new Error(\"@TODO\");\n    }\n\n    /*\n    // @TODO: this is a non-backwards compatible change, but will be added\n    //        in v7 and in a potential SmartContract class in an upcoming\n    //        v6 release\n    async getTransactionReceipt(hash: string): Promise<null | ContractTransactionReceipt> {\n        const provider = getProvider(this.runner);\n        assert(provider, \"contract runner does not have a provider\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"queryTransaction\" });\n\n        const receipt = await provider.getTransactionReceipt(hash);\n        if (receipt == null) { return null; }\n\n        return new ContractTransactionReceipt(this.interface, provider, receipt);\n    }\n    */\n\n    /**\n     *  Provide historic access to event data for %%event%% in the range\n     *  %%fromBlock%% (default: ``0``) to %%toBlock%% (default: ``\"latest\"``)\n     *  inclusive.\n     */\n    async queryFilter(event: ContractEventName, fromBlock?: BlockTag, toBlock?: BlockTag): Promise<Array<EventLog | Log>> {\n        if (fromBlock == null) { fromBlock = 0; }\n        if (toBlock == null) { toBlock = \"latest\"; }\n        const { addr, addrPromise } = getInternal(this);\n        const address = (addr ? addr: (await addrPromise));\n        const { fragment, topics } = await getSubInfo(this, event);\n        const filter = { address, topics, fromBlock, toBlock };\n\n        const provider = getProvider(this.runner);\n        assert(provider, \"contract runner does not have a provider\",\n            \"UNSUPPORTED_OPERATION\", { operation: \"queryFilter\" });\n\n        return (await provider.getLogs(filter)).map((log) => {\n            let foundFragment = fragment;\n            if (foundFragment == null) {\n                try {\n                    foundFragment = this.interface.getEvent(log.topics[0]);\n                } catch (error) { }\n            }\n\n            if (foundFragment) {\n                try {\n                    return new EventLog(log, this.interface, foundFragment);\n                } catch (error: any) {\n                    return new UndecodedEventLog(log, error);\n                }\n            }\n\n            return new Log(log, provider);\n        });\n    }\n\n    /**\n     *  Add an event %%listener%% for the %%event%%.\n     */\n    async on(event: ContractEventName, listener: Listener): Promise<this> {\n        const sub = await getSub(this, \"on\", event);\n        sub.listeners.push({ listener, once: false });\n        sub.start();\n        return this;\n    }\n\n    /**\n     *  Add an event %%listener%% for the %%event%%, but remove the listener\n     *  after it is fired once.\n     */\n    async once(event: ContractEventName, listener: Listener): Promise<this> {\n        const sub = await getSub(this, \"once\", event);\n        sub.listeners.push({ listener, once: true });\n        sub.start();\n        return this;\n    }\n\n    /**\n     *  Emit an %%event%% calling all listeners with %%args%%.\n     *\n     *  Resolves to ``true`` if any listeners were called.\n     */\n    async emit(event: ContractEventName, ...args: Array<any>): Promise<boolean> {\n        return await emit(this, event, args, null);\n    }\n\n    /**\n     *  Resolves to the number of listeners of %%event%% or the total number\n     *  of listeners if unspecified.\n     */\n    async listenerCount(event?: ContractEventName): Promise<number> {\n        if (event) {\n            const sub = await hasSub(this, event);\n            if (!sub) { return 0; }\n            return sub.listeners.length;\n        }\n\n        const { subs } = getInternal(this);\n\n        let total = 0;\n        for (const { listeners } of subs.values()) {\n            total += listeners.length;\n        }\n        return total;\n    }\n\n    /**\n     *  Resolves to the listeners subscribed to %%event%% or all listeners\n     *  if unspecified.\n     */\n    async listeners(event?: ContractEventName): Promise<Array<Listener>> {\n        if (event) {\n            const sub = await hasSub(this, event);\n            if (!sub) { return [ ]; }\n            return sub.listeners.map(({ listener }) => listener);\n        }\n\n        const { subs } = getInternal(this);\n\n        let result: Array<Listener> = [ ];\n        for (const { listeners } of subs.values()) {\n            result = result.concat(listeners.map(({ listener }) => listener));\n        }\n        return result;\n    }\n\n    /**\n     *  Remove the %%listener%% from the listeners for %%event%% or remove\n     *  all listeners if unspecified.\n     */\n    async off(event: ContractEventName, listener?: Listener): Promise<this> {\n        const sub = await hasSub(this, event);\n        if (!sub) { return this; }\n\n        if (listener) {\n            const index = sub.listeners.map(({ listener }) => listener).indexOf(listener);\n            if (index >= 0) { sub.listeners.splice(index, 1); }\n        }\n\n        if (listener == null || sub.listeners.length === 0) {\n            sub.stop();\n            getInternal(this).subs.delete(sub.tag);\n        }\n\n        return this;\n    }\n\n    /**\n     *  Remove all the listeners for %%event%% or remove all listeners if\n     *  unspecified.\n     */\n    async removeAllListeners(event?: ContractEventName): Promise<this> {\n        if (event) {\n            const sub = await hasSub(this, event);\n            if (!sub) { return this; }\n            sub.stop();\n            getInternal(this).subs.delete(sub.tag);\n        } else {\n            const { subs } = getInternal(this);\n            for (const { tag, stop } of subs.values()) {\n                stop();\n                subs.delete(tag);\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     *  Alias for [on].\n     */\n    async addListener(event: ContractEventName, listener: Listener): Promise<this> {\n        return await this.on(event, listener);\n    }\n\n    /**\n     *  Alias for [off].\n     */\n    async removeListener(event: ContractEventName, listener: Listener): Promise<this> {\n        return await this.off(event, listener);\n    }\n\n    /**\n     *  Create a new Class for the %%abi%%.\n     */\n    static buildClass<T = ContractInterface>(abi: Interface | InterfaceAbi): new (target: string, runner?: null | ContractRunner) => BaseContract & Omit<T, keyof BaseContract> {\n        class CustomContract extends BaseContract {\n            constructor(address: string, runner: null | ContractRunner = null) {\n                super(address, abi, runner);\n            }\n        }\n        return CustomContract as any;\n    };\n\n    /**\n     *  Create a new BaseContract with a specified Interface.\n     */\n    static from<T = ContractInterface>(target: string, abi: Interface | InterfaceAbi, runner?: null | ContractRunner): BaseContract & Omit<T, keyof BaseContract> {\n        if (runner == null) { runner = null; }\n        const contract = new this(target, abi, runner );\n        return contract as any;\n    }\n}\n\nfunction _ContractBase(): new (target: string | Addressable, abi: Interface | InterfaceAbi, runner?: null | ContractRunner) => BaseContract & Omit<ContractInterface, keyof BaseContract> {\n    return BaseContract as any;\n}\n\n/**\n *  A [[BaseContract]] with no type guards on its methods or events.\n */\nexport class Contract extends _ContractBase() { }\n","// created 2023-09-25T01:01:55.148Z\n// compressed base64-encoded blob for include-ens data\n// source: https://github.com/adraffy/ens-normalize.js/blob/main/src/make.js\n// see: https://github.com/adraffy/ens-normalize.js#security\n// SHA-256: 0565ed049b9cf1614bb9e11ba7d8ac6a6fb96c893253d890f7e2b2884b9ded32\nvar COMPRESSED$1 = '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';\nconst FENCED = new Map([[8217,\"apostrophe\"],[8260,\"fraction slash\"],[12539,\"middle dot\"]]);\nconst NSM_MAX = 4;\n\nfunction decode_arithmetic(bytes) {\r\n\tlet pos = 0;\r\n\tfunction u16() { return (bytes[pos++] << 8) | bytes[pos++]; }\r\n\t\r\n\t// decode the frequency table\r\n\tlet symbol_count = u16();\r\n\tlet total = 1;\r\n\tlet acc = [0, 1]; // first symbol has frequency 1\r\n\tfor (let i = 1; i < symbol_count; i++) {\r\n\t\tacc.push(total += u16());\r\n\t}\r\n\r\n\t// skip the sized-payload that the last 3 symbols index into\r\n\tlet skip = u16();\r\n\tlet pos_payload = pos;\r\n\tpos += skip;\r\n\r\n\tlet read_width = 0;\r\n\tlet read_buffer = 0; \r\n\tfunction read_bit() {\r\n\t\tif (read_width == 0) {\r\n\t\t\t// this will read beyond end of buffer\r\n\t\t\t// but (undefined|0) => zero pad\r\n\t\t\tread_buffer = (read_buffer << 8) | bytes[pos++];\r\n\t\t\tread_width = 8;\r\n\t\t}\r\n\t\treturn (read_buffer >> --read_width) & 1;\r\n\t}\r\n\r\n\tconst N = 31;\r\n\tconst FULL = 2**N;\r\n\tconst HALF = FULL >>> 1;\r\n\tconst QRTR = HALF >> 1;\r\n\tconst MASK = FULL - 1;\r\n\r\n\t// fill register\r\n\tlet register = 0;\r\n\tfor (let i = 0; i < N; i++) register = (register << 1) | read_bit();\r\n\r\n\tlet symbols = [];\r\n\tlet low = 0;\r\n\tlet range = FULL; // treat like a float\r\n\twhile (true) {\r\n\t\tlet value = Math.floor((((register - low + 1) * total) - 1) / range);\r\n\t\tlet start = 0;\r\n\t\tlet end = symbol_count;\r\n\t\twhile (end - start > 1) { // binary search\r\n\t\t\tlet mid = (start + end) >>> 1;\r\n\t\t\tif (value < acc[mid]) {\r\n\t\t\t\tend = mid;\r\n\t\t\t} else {\r\n\t\t\t\tstart = mid;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (start == 0) break; // first symbol is end mark\r\n\t\tsymbols.push(start);\r\n\t\tlet a = low + Math.floor(range * acc[start]   / total);\r\n\t\tlet b = low + Math.floor(range * acc[start+1] / total) - 1;\r\n\t\twhile (((a ^ b) & HALF) == 0) {\r\n\t\t\tregister = (register << 1) & MASK | read_bit();\r\n\t\t\ta = (a << 1) & MASK;\r\n\t\t\tb = (b << 1) & MASK | 1;\r\n\t\t}\r\n\t\twhile (a & ~b & QRTR) {\r\n\t\t\tregister = (register & HALF) | ((register << 1) & (MASK >>> 1)) | read_bit();\r\n\t\t\ta = (a << 1) ^ HALF;\r\n\t\t\tb = ((b ^ HALF) << 1) | HALF | 1;\r\n\t\t}\r\n\t\tlow = a;\r\n\t\trange = 1 + b - a;\r\n\t}\r\n\tlet offset = symbol_count - 4;\r\n\treturn symbols.map(x => { // index into payload\r\n\t\tswitch (x - offset) {\r\n\t\t\tcase 3: return offset + 0x10100 + ((bytes[pos_payload++] << 16) | (bytes[pos_payload++] << 8) | bytes[pos_payload++]);\r\n\t\t\tcase 2: return offset + 0x100 + ((bytes[pos_payload++] << 8) | bytes[pos_payload++]);\r\n\t\t\tcase 1: return offset + bytes[pos_payload++];\r\n\t\t\tdefault: return x - 1;\r\n\t\t}\r\n\t});\r\n}\t\r\n\r\n// returns an iterator which returns the next symbol\r\nfunction read_payload(v) {\r\n\tlet pos = 0;\r\n\treturn () => v[pos++];\r\n}\r\nfunction read_compressed_payload(s) {\r\n\treturn read_payload(decode_arithmetic(unsafe_atob(s)));\r\n}\r\n\r\n// unsafe in the sense:\r\n// expected well-formed Base64 w/o padding \r\n// 20220922: added for https://github.com/adraffy/ens-normalize.js/issues/4\r\nfunction unsafe_atob(s) {\r\n\tlet lookup = [];\r\n\t[...'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'].forEach((c, i) => lookup[c.charCodeAt(0)] = i);\r\n\tlet n = s.length;\r\n\tlet ret = new Uint8Array((6 * n) >> 3);\r\n\tfor (let i = 0, pos = 0, width = 0, carry = 0; i < n; i++) {\r\n\t\tcarry = (carry << 6) | lookup[s.charCodeAt(i)];\r\n\t\twidth += 6;\r\n\t\tif (width >= 8) {\r\n\t\t\tret[pos++] = (carry >> (width -= 8));\r\n\t\t}\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\n// eg. [0,1,2,3...] => [0,-1,1,-2,...]\r\nfunction signed(i) { \r\n\treturn (i & 1) ? (~i >> 1) : (i >> 1);\r\n}\r\n\r\nfunction read_deltas(n, next) {\r\n\tlet v = Array(n);\r\n\tfor (let i = 0, x = 0; i < n; i++) v[i] = x += signed(next());\r\n\treturn v;\r\n}\r\n\r\n// [123][5] => [0 3] [1 1] [0 0]\r\nfunction read_sorted(next, prev = 0) {\r\n\tlet ret = [];\r\n\twhile (true) {\r\n\t\tlet x = next();\r\n\t\tlet n = next();\r\n\t\tif (!n) break;\r\n\t\tprev += x;\r\n\t\tfor (let i = 0; i < n; i++) {\r\n\t\t\tret.push(prev + i);\r\n\t\t}\r\n\t\tprev += n + 1;\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\nfunction read_sorted_arrays(next) {\r\n\treturn read_array_while(() => { \r\n\t\tlet v = read_sorted(next);\r\n\t\tif (v.length) return v;\r\n\t});\r\n}\r\n\r\n// returns map of x => ys\r\nfunction read_mapped(next) {\r\n\tlet ret = [];\r\n\twhile (true) {\r\n\t\tlet w = next();\r\n\t\tif (w == 0) break;\r\n\t\tret.push(read_linear_table(w, next));\r\n\t}\r\n\twhile (true) {\r\n\t\tlet w = next() - 1;\r\n\t\tif (w < 0) break;\r\n\t\tret.push(read_replacement_table(w, next));\r\n\t}\r\n\treturn ret.flat();\r\n}\r\n\r\n// read until next is falsy\r\n// return array of read values\r\nfunction read_array_while(next) {\r\n\tlet v = [];\r\n\twhile (true) {\r\n\t\tlet x = next(v.length);\r\n\t\tif (!x) break;\r\n\t\tv.push(x);\r\n\t}\r\n\treturn v;\r\n}\r\n\r\n// read w columns of length n\r\n// return as n rows of length w\r\nfunction read_transposed(n, w, next) {\r\n\tlet m = Array(n).fill().map(() => []);\r\n\tfor (let i = 0; i < w; i++) {\r\n\t\tread_deltas(n, next).forEach((x, j) => m[j].push(x));\r\n\t}\r\n\treturn m;\r\n}\r\n \r\n// returns [[x, ys], [x+dx, ys+dy], [x+2*dx, ys+2*dy], ...]\r\n// where dx/dy = steps, n = run size, w = length of y\r\nfunction read_linear_table(w, next) {\r\n\tlet dx = 1 + next();\r\n\tlet dy = next();\r\n\tlet vN = read_array_while(next);\r\n\tlet m = read_transposed(vN.length, 1+w, next);\r\n\treturn m.flatMap((v, i) => {\r\n\t\tlet [x, ...ys] = v;\r\n\t\treturn Array(vN[i]).fill().map((_, j) => {\r\n\t\t\tlet j_dy = j * dy;\r\n\t\t\treturn [x + j * dx, ys.map(y => y + j_dy)];\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// return [[x, ys...], ...]\r\n// where w = length of y\r\nfunction read_replacement_table(w, next) { \r\n\tlet n = 1 + next();\r\n\tlet m = read_transposed(n, 1+w, next);\r\n\treturn m.map(v => [v[0], v.slice(1)]);\r\n}\r\n\r\n\r\nfunction read_trie(next) {\r\n\tlet ret = [];\r\n\tlet sorted = read_sorted(next); \r\n\texpand(decode([]), []);\r\n\treturn ret; // not sorted\r\n\tfunction decode(Q) { // characters that lead into this node\r\n\t\tlet S = next(); // state: valid, save, check\r\n\t\tlet B = read_array_while(() => { // buckets leading to new nodes\r\n\t\t\tlet cps = read_sorted(next).map(i => sorted[i]);\r\n\t\t\tif (cps.length) return decode(cps);\r\n\t\t});\r\n\t\treturn {S, B, Q};\r\n\t}\r\n\tfunction expand({S, B}, cps, saved) {\r\n\t\tif (S & 4 && saved === cps[cps.length-1]) return;\r\n\t\tif (S & 2) saved = cps[cps.length-1];\r\n\t\tif (S & 1) ret.push(cps); \r\n\t\tfor (let br of B) {\r\n\t\t\tfor (let cp of br.Q) {\r\n\t\t\t\texpand(br, [...cps, cp], saved);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\n\nfunction hex_cp(cp) {\r\n\treturn cp.toString(16).toUpperCase().padStart(2, '0');\r\n}\r\n\r\nfunction quote_cp(cp) {\r\n\treturn `{${hex_cp(cp)}}`; // raffy convention: like \"\\u{X}\" w/o the \"\\u\"\r\n}\r\n\r\n/*\r\nexport function explode_cp(s) {\r\n\treturn [...s].map(c => c.codePointAt(0));\r\n}\r\n*/\r\nfunction explode_cp(s) { // this is about 2x faster\r\n\tlet cps = [];\r\n\tfor (let pos = 0, len = s.length; pos < len; ) {\r\n\t\tlet cp = s.codePointAt(pos);\r\n\t\tpos += cp < 0x10000 ? 1 : 2;\r\n\t\tcps.push(cp);\r\n\t}\r\n\treturn cps;\r\n}\r\n\r\nfunction str_from_cps(cps) {\r\n\tconst chunk = 4096;\r\n\tlet len = cps.length;\r\n\tif (len < chunk) return String.fromCodePoint(...cps);\r\n\tlet buf = [];\r\n\tfor (let i = 0; i < len; ) {\r\n\t\tbuf.push(String.fromCodePoint(...cps.slice(i, i += chunk)));\r\n\t}\r\n\treturn buf.join('');\r\n}\r\n\r\nfunction compare_arrays(a, b) {\r\n\tlet n = a.length;\r\n\tlet c = n - b.length;\r\n\tfor (let i = 0; c == 0 && i < n; i++) c = a[i] - b[i];\r\n\treturn c;\r\n}\n\n// created 2023-09-25T01:01:55.148Z\n// compressed base64-encoded blob for include-nf data\n// source: https://github.com/adraffy/ens-normalize.js/blob/main/src/make.js\n// see: https://github.com/adraffy/ens-normalize.js#security\n// SHA-256: a974b6f8541fc29d919bc85118af0a44015851fab5343f8679cb31be2bdb209e\nvar COMPRESSED = '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';\n\n// https://unicode.org/reports/tr15/\r\n// for reference implementation\r\n// see: /derive/nf.js\r\n\r\n\r\n// algorithmic hangul\r\n// https://www.unicode.org/versions/Unicode15.0.0/ch03.pdf (page 144)\r\nconst S0 = 0xAC00;\r\nconst L0 = 0x1100;\r\nconst V0 = 0x1161;\r\nconst T0 = 0x11A7;\r\nconst L_COUNT = 19;\r\nconst V_COUNT = 21;\r\nconst T_COUNT = 28;\r\nconst N_COUNT = V_COUNT * T_COUNT;\r\nconst S_COUNT = L_COUNT * N_COUNT;\r\nconst S1 = S0 + S_COUNT;\r\nconst L1 = L0 + L_COUNT;\r\nconst V1 = V0 + V_COUNT;\r\nconst T1 = T0 + T_COUNT;\r\n\r\nfunction unpack_cc(packed) {\r\n\treturn (packed >> 24) & 0xFF;\r\n}\r\nfunction unpack_cp(packed) {\r\n\treturn packed & 0xFFFFFF;\r\n}\r\n\r\nlet SHIFTED_RANK, EXCLUSIONS, DECOMP, RECOMP;\r\n\r\nfunction init$1() {\r\n\t//console.time('nf');\r\n\tlet r = read_compressed_payload(COMPRESSED);\r\n\tSHIFTED_RANK = new Map(read_sorted_arrays(r).flatMap((v, i) => v.map(x => [x, (i+1) << 24]))); // pre-shifted\r\n\tEXCLUSIONS = new Set(read_sorted(r));\r\n\tDECOMP = new Map();\r\n\tRECOMP = new Map();\r\n\tfor (let [cp, cps] of read_mapped(r)) {\r\n\t\tif (!EXCLUSIONS.has(cp) && cps.length == 2) {\r\n\t\t\tlet [a, b] = cps;\r\n\t\t\tlet bucket = RECOMP.get(a);\r\n\t\t\tif (!bucket) {\r\n\t\t\t\tbucket = new Map();\r\n\t\t\t\tRECOMP.set(a, bucket);\r\n\t\t\t}\r\n\t\t\tbucket.set(b, cp);\r\n\t\t}\r\n\t\tDECOMP.set(cp, cps.reverse()); // stored reversed\r\n\t}\r\n\t//console.timeEnd('nf');\r\n\t// 20230905: 11ms\r\n}\r\n\r\nfunction is_hangul(cp) {\r\n\treturn cp >= S0 && cp < S1;\r\n}\r\n\r\nfunction compose_pair(a, b) {\r\n\tif (a >= L0 && a < L1 && b >= V0 && b < V1) {\r\n\t\treturn S0 + (a - L0) * N_COUNT + (b - V0) * T_COUNT;\r\n\t} else if (is_hangul(a) && b > T0 && b < T1 && (a - S0) % T_COUNT == 0) {\r\n\t\treturn a + (b - T0);\r\n\t} else {\r\n\t\tlet recomp = RECOMP.get(a);\r\n\t\tif (recomp) {\r\n\t\t\trecomp = recomp.get(b);\r\n\t\t\tif (recomp) {\r\n\t\t\t\treturn recomp;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n}\r\n\r\nfunction decomposed(cps) {\r\n\tif (!SHIFTED_RANK) init$1();\r\n\tlet ret = [];\r\n\tlet buf = [];\r\n\tlet check_order = false;\r\n\tfunction add(cp) {\r\n\t\tlet cc = SHIFTED_RANK.get(cp);\r\n\t\tif (cc) {\r\n\t\t\tcheck_order = true;\r\n\t\t\tcp |= cc;\r\n\t\t}\r\n\t\tret.push(cp);\r\n\t}\r\n\tfor (let cp of cps) {\r\n\t\twhile (true) {\r\n\t\t\tif (cp < 0x80) {\r\n\t\t\t\tret.push(cp);\r\n\t\t\t} else if (is_hangul(cp)) {\r\n\t\t\t\tlet s_index = cp - S0;\r\n\t\t\t\tlet l_index = s_index / N_COUNT | 0;\r\n\t\t\t\tlet v_index = (s_index % N_COUNT) / T_COUNT | 0;\r\n\t\t\t\tlet t_index = s_index % T_COUNT;\r\n\t\t\t\tadd(L0 + l_index);\r\n\t\t\t\tadd(V0 + v_index);\r\n\t\t\t\tif (t_index > 0) add(T0 + t_index);\r\n\t\t\t} else {\r\n\t\t\t\tlet mapped = DECOMP.get(cp);\r\n\t\t\t\tif (mapped) {\r\n\t\t\t\t\tbuf.push(...mapped);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tadd(cp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!buf.length) break;\r\n\t\t\tcp = buf.pop();\r\n\t\t}\r\n\t}\r\n\tif (check_order && ret.length > 1) {\r\n\t\tlet prev_cc = unpack_cc(ret[0]);\r\n\t\tfor (let i = 1; i < ret.length; i++) {\r\n\t\t\tlet cc = unpack_cc(ret[i]);\r\n\t\t\tif (cc == 0 || prev_cc <= cc) {\r\n\t\t\t\tprev_cc = cc;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlet j = i-1;\r\n\t\t\twhile (true) {\r\n\t\t\t\tlet tmp = ret[j+1];\r\n\t\t\t\tret[j+1] = ret[j];\r\n\t\t\t\tret[j] = tmp;\r\n\t\t\t\tif (!j) break;\r\n\t\t\t\tprev_cc = unpack_cc(ret[--j]);\r\n\t\t\t\tif (prev_cc <= cc) break;\r\n\t\t\t}\r\n\t\t\tprev_cc = unpack_cc(ret[i]);\r\n\t\t}\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\nfunction composed_from_decomposed(v) {\r\n\tlet ret = [];\r\n\tlet stack = [];\r\n\tlet prev_cp = -1;\r\n\tlet prev_cc = 0;\r\n\tfor (let packed of v) {\r\n\t\tlet cc = unpack_cc(packed);\r\n\t\tlet cp = unpack_cp(packed);\r\n\t\tif (prev_cp == -1) {\r\n\t\t\tif (cc == 0) {\r\n\t\t\t\tprev_cp = cp;\r\n\t\t\t} else {\r\n\t\t\t\tret.push(cp);\r\n\t\t\t}\r\n\t\t} else if (prev_cc > 0 && prev_cc >= cc) {\r\n\t\t\tif (cc == 0) {\r\n\t\t\t\tret.push(prev_cp, ...stack);\r\n\t\t\t\tstack.length = 0;\r\n\t\t\t\tprev_cp = cp;\r\n\t\t\t} else {\r\n\t\t\t\tstack.push(cp);\r\n\t\t\t}\r\n\t\t\tprev_cc = cc;\r\n\t\t} else {\r\n\t\t\tlet composed = compose_pair(prev_cp, cp);\r\n\t\t\tif (composed >= 0) {\r\n\t\t\t\tprev_cp = composed;\r\n\t\t\t} else if (prev_cc == 0 && cc == 0) {\r\n\t\t\t\tret.push(prev_cp);\r\n\t\t\t\tprev_cp = cp;\r\n\t\t\t} else {\r\n\t\t\t\tstack.push(cp);\r\n\t\t\t\tprev_cc = cc;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (prev_cp >= 0) {\r\n\t\tret.push(prev_cp, ...stack);\t\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\n// note: cps can be iterable\r\nfunction nfd(cps) {\r\n\treturn decomposed(cps).map(unpack_cp);\r\n}\r\nfunction nfc(cps) {\r\n\treturn composed_from_decomposed(decomposed(cps));\r\n}\n\nconst HYPHEN = 0x2D;\r\nconst STOP = 0x2E;\r\nconst STOP_CH = '.';\r\nconst FE0F = 0xFE0F;\r\nconst UNIQUE_PH = 1;\r\n\r\n// 20230913: replace [...v] with Array_from(v) to avoid large spreads\r\nconst Array_from = x => Array.from(x); // Array.from.bind(Array);\r\n\r\nfunction group_has_cp(g, cp) {\r\n\t// 20230913: keep primary and secondary distinct instead of creating valid union\r\n\treturn g.P.has(cp) || g.Q.has(cp);\r\n}\r\n\r\nclass Emoji extends Array {\r\n\tget is_emoji() { return true; } // free tagging system\r\n}\r\n\r\nlet MAPPED, IGNORED, CM, NSM, ESCAPE, NFC_CHECK, GROUPS, WHOLE_VALID, WHOLE_MAP, VALID, EMOJI_LIST, EMOJI_ROOT;\r\n\r\nfunction init() {\r\n\tif (MAPPED) return;\r\n\t\r\n\tlet r = read_compressed_payload(COMPRESSED$1);\r\n\tconst read_sorted_array = () => read_sorted(r);\r\n\tconst read_sorted_set = () => new Set(read_sorted_array());\r\n\tconst set_add_many = (set, v) => v.forEach(x => set.add(x));\r\n\r\n\tMAPPED = new Map(read_mapped(r)); \r\n\tIGNORED = read_sorted_set(); // ignored characters are not valid, so just read raw codepoints\r\n\r\n\t/*\r\n\t// direct include from payload is smaller than the decompression code\r\n\tconst FENCED = new Map(read_array_while(() => {\r\n\t\tlet cp = r();\r\n\t\tif (cp) return [cp, read_str(r())];\r\n\t}));\r\n\t*/\r\n\t// 20230217: we still need all CM for proper error formatting\r\n\t// but norm only needs NSM subset that are potentially-valid\r\n\tCM = read_sorted_array();\r\n\tNSM = new Set(read_sorted_array().map(i => CM[i]));\r\n\tCM = new Set(CM);\r\n\t\r\n\tESCAPE = read_sorted_set(); // characters that should not be printed\r\n\tNFC_CHECK = read_sorted_set(); // only needed to illustrate ens_tokenize() transformations\r\n\r\n\tlet chunks = read_sorted_arrays(r);\r\n\tlet unrestricted = r();\r\n\t//const read_chunked = () => new Set(read_sorted_array().flatMap(i => chunks[i]).concat(read_sorted_array()));\r\n\tconst read_chunked = () => {\r\n\t\t// 20230921: build set in parts, 2x faster\r\n\t\tlet set = new Set();\r\n\t\tread_sorted_array().forEach(i => set_add_many(set, chunks[i]));\r\n\t\tset_add_many(set, read_sorted_array());\r\n\t\treturn set; \r\n\t};\r\n\tGROUPS = read_array_while(i => {\r\n\t\t// minifier property mangling seems unsafe\r\n\t\t// so these are manually renamed to single chars\r\n\t\tlet N = read_array_while(r).map(x => x+0x60);\r\n\t\tif (N.length) {\r\n\t\t\tlet R = i >= unrestricted; // unrestricted then restricted\r\n\t\t\tN[0] -= 32; // capitalize\r\n\t\t\tN = str_from_cps(N);\r\n\t\t\tif (R) N=`Restricted[${N}]`;\r\n\t\t\tlet P = read_chunked(); // primary\r\n\t\t\tlet Q = read_chunked(); // secondary\r\n\t\t\tlet M = !r(); // not-whitelisted, check for NSM\r\n\t\t\t// *** this code currently isn't needed ***\r\n\t\t\t/*\r\n\t\t\tlet V = [...P, ...Q].sort((a, b) => a-b); // derive: sorted valid\r\n\t\t\tlet M = r()-1; // number of combining mark\r\n\t\t\tif (M < 0) { // whitelisted\r\n\t\t\t\tM = new Map(read_array_while(() => {\r\n\t\t\t\t\tlet i = r();\r\n\t\t\t\t\tif (i) return [V[i-1], read_array_while(() => {\r\n\t\t\t\t\t\tlet v = read_array_while(r);\r\n\t\t\t\t\t\tif (v.length) return v.map(x => x-1);\r\n\t\t\t\t\t})];\r\n\t\t\t\t}));\r\n\t\t\t}*/\r\n\t\t\treturn {N, P, Q, M, R};\r\n\t\t}\r\n\t});\r\n\r\n\t// decode compressed wholes\r\n\tWHOLE_VALID = read_sorted_set();\r\n\tWHOLE_MAP = new Map();\r\n\tlet wholes = read_sorted_array().concat(Array_from(WHOLE_VALID)).sort((a, b) => a-b); // must be sorted\r\n\twholes.forEach((cp, i) => {\r\n\t\tlet d = r(); \r\n\t\tlet w = wholes[i] = d ? wholes[i-d] : {V: [], M: new Map()};\r\n\t\tw.V.push(cp); // add to member set\r\n\t\tif (!WHOLE_VALID.has(cp)) {\r\n\t\t\tWHOLE_MAP.set(cp, w);  // register with whole map\r\n\t\t}\r\n\t});\r\n\r\n\t// compute confusable-extent complements\r\n\t// usage: WHOLE_MAP.get(cp).M.get(cp) = complement set\r\n\tfor (let {V, M} of new Set(WHOLE_MAP.values())) {\r\n\t\t// connect all groups that have each whole character\r\n\t\tlet recs = [];\r\n\t\tfor (let cp of V) {\r\n\t\t\tlet gs = GROUPS.filter(g => group_has_cp(g, cp));\r\n\t\t\tlet rec = recs.find(({G}) => gs.some(g => G.has(g)));\r\n\t\t\tif (!rec) {\r\n\t\t\t\trec = {G: new Set(), V: []};\r\n\t\t\t\trecs.push(rec);\r\n\t\t\t}\r\n\t\t\trec.V.push(cp);\r\n\t\t\tset_add_many(rec.G, gs);\r\n\t\t}\r\n\t\t// per character cache groups which are not a member of the extent\r\n\t\tlet union = recs.flatMap(x => Array_from(x.G)); // all of the groups used by this whole\r\n\t\tfor (let {G, V} of recs) {\r\n\t\t\tlet complement = new Set(union.filter(g => !G.has(g))); // groups not covered by the extent\r\n\t\t\tfor (let cp of V) {\r\n\t\t\t\tM.set(cp, complement); // this is the same reference\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// compute valid set\r\n\t// 20230924: VALID was union but can be re-used\r\n\tVALID = new Set(); // exists in 1+ groups\r\n\tlet multi = new Set(); // exists in 2+ groups\r\n\tconst add_to_union = cp => VALID.has(cp) ? multi.add(cp) : VALID.add(cp);\r\n\tfor (let g of GROUPS) {\r\n\t\tfor (let cp of g.P) add_to_union(cp);\r\n\t\tfor (let cp of g.Q) add_to_union(cp);\r\n\t}\r\n\t// dual purpose WHOLE_MAP: return placeholder if unique non-confusable\r\n\tfor (let cp of VALID) {\r\n\t\tif (!WHOLE_MAP.has(cp) && !multi.has(cp)) {\r\n\t\t\tWHOLE_MAP.set(cp, UNIQUE_PH);\r\n\t\t}\r\n\t}\r\n\t// add all decomposed parts\r\n\t// see derive: \"Valid is Closed (via Brute-force)\"\r\n\tset_add_many(VALID, nfd(VALID));\r\n\t\r\n\t// decode emoji\r\n\t// 20230719: emoji are now fully-expanded to avoid quirk logic \r\n\tEMOJI_LIST = read_trie(r).map(v => Emoji.from(v)).sort(compare_arrays);\r\n\tEMOJI_ROOT = new Map(); // this has approx 7K nodes (2+ per emoji)\r\n\tfor (let cps of EMOJI_LIST) {\r\n\t\t// 20230719: change to *slightly* stricter algorithm which disallows \r\n\t\t// insertion of misplaced FE0F in emoji sequences (matching ENSIP-15)\r\n\t\t// example: beautified [A B] (eg. flag emoji) \r\n\t\t//  before: allow: [A FE0F B], error: [A FE0F FE0F B] \r\n\t\t//   after: error: both\r\n\t\t// note: this code now matches ENSNormalize.{cs,java} logic\r\n\t\tlet prev = [EMOJI_ROOT];\r\n\t\tfor (let cp of cps) {\r\n\t\t\tlet next = prev.map(node => {\r\n\t\t\t\tlet child = node.get(cp);\r\n\t\t\t\tif (!child) {\r\n\t\t\t\t\t// should this be object? \r\n\t\t\t\t\t// (most have 1-2 items, few have many)\r\n\t\t\t\t\t// 20230719: no, v8 default map is 4?\r\n\t\t\t\t\tchild = new Map();\r\n\t\t\t\t\tnode.set(cp, child);\r\n\t\t\t\t}\r\n\t\t\t\treturn child;\r\n\t\t\t});\r\n\t\t\tif (cp === FE0F) {\r\n\t\t\t\tprev.push(...next); // less than 20 elements\r\n\t\t\t} else {\r\n\t\t\t\tprev = next;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let x of prev) {\r\n\t\t\tx.V = cps;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// if escaped: {HEX}\r\n//       else: \"x\" {HEX}\r\nfunction quoted_cp(cp) {\r\n\treturn (should_escape(cp) ? '' : `${bidi_qq(safe_str_from_cps([cp]))} `) + quote_cp(cp);\r\n}\r\n\r\n// 20230211: some messages can be mixed-directional and result in spillover\r\n// use 200E after a quoted string to force the remainder of a string from \r\n// acquring the direction of the quote\r\n// https://www.w3.org/International/questions/qa-bidi-unicode-controls#exceptions\r\nfunction bidi_qq(s) {\r\n\treturn `\"${s}\"\\u200E`; // strong LTR\r\n}\r\n\r\nfunction check_label_extension(cps) {\r\n\tif (cps.length >= 4 && cps[2] == HYPHEN && cps[3] == HYPHEN) {\r\n\t\tthrow new Error(`invalid label extension: \"${str_from_cps(cps.slice(0, 4))}\"`); // this can only be ascii so cant be bidi\r\n\t}\r\n}\r\nfunction check_leading_underscore(cps) {\r\n\tconst UNDERSCORE = 0x5F;\r\n\tfor (let i = cps.lastIndexOf(UNDERSCORE); i > 0; ) {\r\n\t\tif (cps[--i] !== UNDERSCORE) {\r\n\t\t\tthrow new Error('underscore allowed only at start');\r\n\t\t}\r\n\t}\r\n}\r\n// check that a fenced cp is not leading, trailing, or touching another fenced cp\r\nfunction check_fenced(cps) {\r\n\tlet cp = cps[0];\r\n\tlet prev = FENCED.get(cp);\r\n\tif (prev) throw error_placement(`leading ${prev}`);\r\n\tlet n = cps.length;\r\n\tlet last = -1; // prevents trailing from throwing\r\n\tfor (let i = 1; i < n; i++) {\r\n\t\tcp = cps[i];\r\n\t\tlet match = FENCED.get(cp);\r\n\t\tif (match) {\r\n\t\t\t// since cps[0] isn't fenced, cps[1] cannot throw\r\n\t\t\tif (last == i) throw error_placement(`${prev} + ${match}`);\r\n\t\t\tlast = i + 1;\r\n\t\t\tprev = match;\r\n\t\t}\r\n\t}\r\n\tif (last == n) throw error_placement(`trailing ${prev}`);\r\n}\r\n\r\n// create a safe to print string \r\n// invisibles are escaped\r\n// leading cm uses placeholder\r\n// if cps exceed max, middle truncate with ellipsis\r\n// quoter(cp) => string, eg. 3000 => \"{3000}\"\r\n// note: in html, you'd call this function then replace [<>&] with entities\r\nfunction safe_str_from_cps(cps, max = Infinity, quoter = quote_cp) {\r\n\t//if (Number.isInteger(cps)) cps = [cps];\r\n\t//if (!Array.isArray(cps)) throw new TypeError(`expected codepoints`);\r\n\tlet buf = [];\r\n\tif (is_combining_mark(cps[0])) buf.push('◌');\r\n\tif (cps.length > max) {\r\n\t\tmax >>= 1;\r\n\t\tcps = [...cps.slice(0, max), 0x2026, ...cps.slice(-max)];\r\n\t}\r\n\tlet prev = 0;\r\n\tlet n = cps.length;\r\n\tfor (let i = 0; i < n; i++) {\r\n\t\tlet cp = cps[i];\r\n\t\tif (should_escape(cp)) {\r\n\t\t\tbuf.push(str_from_cps(cps.slice(prev, i)));\r\n\t\t\tbuf.push(quoter(cp));\r\n\t\t\tprev = i + 1;\r\n\t\t}\r\n\t}\r\n\tbuf.push(str_from_cps(cps.slice(prev, n)));\r\n\treturn buf.join('');\r\n}\r\n\r\n// note: set(s) cannot be exposed because they can be modified\r\n// note: Object.freeze() doesn't work\r\nfunction is_combining_mark(cp) {\r\n\tinit();\r\n\treturn CM.has(cp);\r\n}\r\nfunction should_escape(cp) {\r\n\tinit();\r\n\treturn ESCAPE.has(cp);\r\n}\r\n\r\n// return all supported emoji as fully-qualified emoji \r\n// ordered by length then lexicographic \r\nfunction ens_emoji() {\r\n\tinit();\r\n\treturn EMOJI_LIST.map(x => x.slice()); // emoji are exposed so copy\r\n}\r\n\r\nfunction ens_normalize_fragment(frag, decompose) {\r\n\tinit();\r\n\tlet nf = decompose ? nfd : nfc;\r\n\treturn frag.split(STOP_CH).map(label => str_from_cps(tokens_from_str(explode_cp(label), nf, filter_fe0f).flat())).join(STOP_CH);\r\n}\r\n\r\nfunction ens_normalize(name) {\r\n\treturn flatten(split(name, nfc, filter_fe0f));\r\n}\r\n\r\nfunction ens_beautify(name) {\r\n\tlet labels = split(name, nfc, x => x); // emoji not exposed\r\n\tfor (let {type, output, error} of labels) {\r\n\t\tif (error) break; // flatten will throw\r\n\r\n\t\t// replace leading/trailing hyphen\r\n\t\t// 20230121: consider beautifing all or leading/trailing hyphen to unicode variant\r\n\t\t// not exactly the same in every font, but very similar: \"-\" vs \"‐\"\r\n\t\t/*\r\n\t\tconst UNICODE_HYPHEN = 0x2010;\r\n\t\t// maybe this should replace all for visual consistancy?\r\n\t\t// `node tools/reg-count.js regex ^-\\{2,\\}` => 592\r\n\t\t//for (let i = 0; i < output.length; i++) if (output[i] == 0x2D) output[i] = 0x2010;\r\n\t\tif (output[0] == HYPHEN) output[0] = UNICODE_HYPHEN;\r\n\t\tlet end = output.length-1;\r\n\t\tif (output[end] == HYPHEN) output[end] = UNICODE_HYPHEN;\r\n\t\t*/\r\n\t\t// 20230123: WHATWG URL uses \"CheckHyphens\" false\r\n\t\t// https://url.spec.whatwg.org/#idna\r\n\r\n\t\t// update ethereum symbol\r\n\t\t// ξ => Ξ if not greek\r\n\t\tif (type !== 'Greek') array_replace(output, 0x3BE, 0x39E);\r\n\r\n\t\t// 20221213: fixes bidi subdomain issue, but breaks invariant (200E is disallowed)\r\n\t\t// could be fixed with special case for: 2D (.) + 200E (LTR)\r\n\t\t// https://discuss.ens.domains/t/bidi-label-ordering-spoof/15824\r\n\t\t//output.splice(0, 0, 0x200E);\r\n\t}\r\n\treturn flatten(labels);\r\n}\r\n\r\nfunction array_replace(v, a, b) {\r\n\tlet prev = 0;\r\n\twhile (true) {\r\n\t\tlet next = v.indexOf(a, prev);\r\n\t\tif (next < 0) break;\r\n\t\tv[next] = b; \r\n\t\tprev = next + 1;\r\n\t}\r\n}\r\n\r\nfunction ens_split(name, preserve_emoji) {\r\n\treturn split(name, nfc, preserve_emoji ? x => x.slice() : filter_fe0f); // emoji are exposed so copy\r\n}\r\n\r\nfunction split(name, nf, ef) {\r\n\tif (!name) return []; // 20230719: empty name allowance\r\n\tinit();\r\n\tlet offset = 0;\r\n\t// https://unicode.org/reports/tr46/#Validity_Criteria\r\n\t// 4.) \"The label must not contain a U+002E ( . ) FULL STOP.\"\r\n\treturn name.split(STOP_CH).map(label => {\r\n\t\tlet input = explode_cp(label);\r\n\t\tlet info = {\r\n\t\t\tinput,\r\n\t\t\toffset, // codepoint, not substring!\r\n\t\t};\r\n\t\toffset += input.length + 1; // + stop\r\n\t\ttry {\r\n\t\t\t// 1.) \"The label must be in Unicode Normalization Form NFC\"\r\n\t\t\tlet tokens = info.tokens = tokens_from_str(input, nf, ef);\r\n\t\t\tlet token_count = tokens.length;\r\n\t\t\tlet type;\r\n\t\t\tif (!token_count) { // the label was effectively empty (could of had ignored characters)\r\n\t\t\t\t//norm = [];\r\n\t\t\t\t//type = 'None'; // use this instead of next match, \"ASCII\"\r\n\t\t\t\t// 20230120: change to strict\r\n\t\t\t\t// https://discuss.ens.domains/t/ens-name-normalization-2nd/14564/59\r\n\t\t\t\tthrow new Error(`empty label`);\r\n\t\t\t} \r\n\t\t\tlet norm = info.output = tokens.flat();\r\n\t\t\tcheck_leading_underscore(norm);\r\n\t\t\tlet emoji = info.emoji = token_count > 1 || tokens[0].is_emoji; // same as: tokens.some(x => x.is_emoji);\r\n\t\t\tif (!emoji && norm.every(cp => cp < 0x80)) { // special case for ascii\r\n\t\t\t\t// 20230123: matches matches WHATWG, see note 3.3\r\n\t\t\t\tcheck_label_extension(norm); // only needed for ascii\r\n\t\t\t\t// cant have fenced\r\n\t\t\t\t// cant have cm\r\n\t\t\t\t// cant have wholes\r\n\t\t\t\t// see derive: \"Fastpath ASCII\"\r\n\t\t\t\ttype = 'ASCII';\r\n\t\t\t} else {\r\n\t\t\t\tlet chars = tokens.flatMap(x => x.is_emoji ? [] : x); // all of the nfc tokens concat together\r\n\t\t\t\tif (!chars.length) { // theres no text, just emoji\r\n\t\t\t\t\ttype = 'Emoji';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 5.) \"The label must not begin with a combining mark, that is: General_Category=Mark.\"\r\n\t\t\t\t\tif (CM.has(norm[0])) throw error_placement('leading combining mark');\r\n\t\t\t\t\tfor (let i = 1; i < token_count; i++) { // we've already checked the first token\r\n\t\t\t\t\t\tlet cps = tokens[i];\r\n\t\t\t\t\t\tif (!cps.is_emoji && CM.has(cps[0])) { // every text token has emoji neighbors, eg. EtEEEtEt...\r\n\t\t\t\t\t\t\t// bidi_qq() not needed since emoji is LTR and cps is a CM\r\n\t\t\t\t\t\t\tthrow error_placement(`emoji + combining mark: \"${str_from_cps(tokens[i-1])} + ${safe_str_from_cps([cps[0]])}\"`); \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcheck_fenced(norm);\r\n\t\t\t\t\tlet unique = Array_from(new Set(chars));\r\n\t\t\t\t\tlet [g] = determine_group(unique); // take the first match\r\n\t\t\t\t\t// see derive: \"Matching Groups have Same CM Style\"\r\n\t\t\t\t\t// alternative: could form a hybrid type: Latin/Japanese/...\t\r\n\t\t\t\t\tcheck_group(g, chars); // need text in order\r\n\t\t\t\t\tcheck_whole(g, unique); // only need unique text (order would be required for multiple-char confusables)\r\n\t\t\t\t\ttype = g.N;\r\n\t\t\t\t\t// 20230121: consider exposing restricted flag\r\n\t\t\t\t\t// it's simpler to just check for 'Restricted'\r\n\t\t\t\t\t// or even better: type.endsWith(']')\r\n\t\t\t\t\t//if (g.R) info.restricted = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tinfo.type = type;\r\n\t\t} catch (err) {\r\n\t\t\tinfo.error = err; // use full error object\r\n\t\t}\r\n\t\treturn info;\r\n\t});\r\n}\r\n\r\nfunction check_whole(group, unique) {\r\n\tlet maker;\r\n\tlet shared = [];\r\n\tfor (let cp of unique) {\r\n\t\tlet whole = WHOLE_MAP.get(cp);\r\n\t\tif (whole === UNIQUE_PH) return; // unique, non-confusable\r\n\t\tif (whole) {\r\n\t\t\tlet set = whole.M.get(cp); // groups which have a character that look-like this character\r\n\t\t\tmaker = maker ? maker.filter(g => set.has(g)) : Array_from(set);\r\n\t\t\tif (!maker.length) return; // confusable intersection is empty\r\n\t\t} else {\r\n\t\t\tshared.push(cp); \r\n\t\t}\r\n\t}\r\n\tif (maker) {\r\n\t\t// we have 1+ confusable\r\n\t\t// check if any of the remaining groups\r\n\t\t// contain the shared characters too\r\n\t\tfor (let g of maker) {\r\n\t\t\tif (shared.every(cp => group_has_cp(g, cp))) {\r\n\t\t\t\tthrow new Error(`whole-script confusable: ${group.N}/${g.N}`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// assumption: unique.size > 0\r\n// returns list of matching groups\r\nfunction determine_group(unique) {\r\n\tlet groups = GROUPS;\r\n\tfor (let cp of unique) {\r\n\t\t// note: we need to dodge CM that are whitelisted\r\n\t\t// but that code isn't currently necessary\r\n\t\tlet gs = groups.filter(g => group_has_cp(g, cp));\r\n\t\tif (!gs.length) {\r\n\t\t\tif (!GROUPS.some(g => group_has_cp(g, cp))) { \r\n\t\t\t\t// the character was composed of valid parts\r\n\t\t\t\t// but it's NFC form is invalid\r\n\t\t\t\t// 20230716: change to more exact statement, see: ENSNormalize.{cs,java}\r\n\t\t\t\t// note: this doesn't have to be a composition\r\n\t\t\t\t// 20230720: change to full check\r\n\t\t\t\tthrow error_disallowed(cp); // this should be rare\r\n\t\t\t} else {\r\n\t\t\t\t// there is no group that contains all these characters\r\n\t\t\t\t// throw using the highest priority group that matched\r\n\t\t\t\t// https://www.unicode.org/reports/tr39/#mixed_script_confusables\r\n\t\t\t\tthrow error_group_member(groups[0], cp);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgroups = gs;\r\n\t\tif (gs.length == 1) break; // there is only one group left\r\n\t}\r\n\t// there are at least 1 group(s) with all of these characters\r\n\treturn groups;\r\n}\r\n\r\n// throw on first error\r\nfunction flatten(split) {\r\n\treturn split.map(({input, error, output}) => {\r\n\t\tif (error) {\r\n\t\t\t// don't print label again if just a single label\r\n\t\t\tlet msg = error.message;\r\n\t\t\t// bidi_qq() only necessary if msg is digits\r\n\t\t\tthrow new Error(split.length == 1 ? msg : `Invalid label ${bidi_qq(safe_str_from_cps(input, 63))}: ${msg}`); \r\n\t\t}\r\n\t\treturn str_from_cps(output);\r\n\t}).join(STOP_CH);\r\n}\r\n\r\nfunction error_disallowed(cp) {\r\n\t// TODO: add cp to error?\r\n\treturn new Error(`disallowed character: ${quoted_cp(cp)}`); \r\n}\r\nfunction error_group_member(g, cp) {\r\n\tlet quoted = quoted_cp(cp);\r\n\tlet gg = GROUPS.find(g => g.P.has(cp)); // only check primary\r\n\tif (gg) {\r\n\t\tquoted = `${gg.N} ${quoted}`;\r\n\t}\r\n\treturn new Error(`illegal mixture: ${g.N} + ${quoted}`);\r\n}\r\nfunction error_placement(where) {\r\n\treturn new Error(`illegal placement: ${where}`);\r\n}\r\n\r\n// assumption: cps.length > 0\r\n// assumption: cps[0] isn't a CM\r\n// assumption: the previous character isn't an emoji\r\nfunction check_group(g, cps) {\r\n\tfor (let cp of cps) {\r\n\t\tif (!group_has_cp(g, cp)) {\r\n\t\t\t// for whitelisted scripts, this will throw illegal mixture on invalid cm, eg. \"e{300}{300}\"\r\n\t\t\t// at the moment, it's unnecessary to introduce an extra error type\r\n\t\t\t// until there exists a whitelisted multi-character\r\n\t\t\t//   eg. if (M < 0 && is_combining_mark(cp)) { ... }\r\n\t\t\t// there are 3 cases:\r\n\t\t\t//   1. illegal cm for wrong group => mixture error\r\n\t\t\t//   2. illegal cm for same group => cm error\r\n\t\t\t//       requires set of whitelist cm per group: \r\n\t\t\t//        eg. new Set([...g.P, ...g.Q].flatMap(nfc).filter(cp => CM.has(cp)))\r\n\t\t\t//   3. wrong group => mixture error\r\n\t\t\tthrow error_group_member(g, cp);\r\n\t\t}\r\n\t}\r\n\t//if (M >= 0) { // we have a known fixed cm count\r\n\tif (g.M) { // we need to check for NSM\r\n\t\tlet decomposed = nfd(cps);\r\n\t\tfor (let i = 1, e = decomposed.length; i < e; i++) { // see: assumption\r\n\t\t\t// 20230210: bugfix: using cps instead of decomposed h/t Carbon225\r\n\t\t\t/*\r\n\t\t\tif (CM.has(decomposed[i])) {\r\n\t\t\t\tlet j = i + 1;\r\n\t\t\t\twhile (j < e && CM.has(decomposed[j])) j++;\r\n\t\t\t\tif (j - i > M) {\r\n\t\t\t\t\tthrow new Error(`too many combining marks: ${g.N} ${bidi_qq(str_from_cps(decomposed.slice(i-1, j)))} (${j-i}/${M})`);\r\n\t\t\t\t}\r\n\t\t\t\ti = j;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t// 20230217: switch to NSM counting\r\n\t\t\t// https://www.unicode.org/reports/tr39/#Optional_Detection\r\n\t\t\tif (NSM.has(decomposed[i])) {\r\n\t\t\t\tlet j = i + 1;\r\n\t\t\t\tfor (let cp; j < e && NSM.has(cp = decomposed[j]); j++) {\r\n\t\t\t\t\t// a. Forbid sequences of the same nonspacing mark.\r\n\t\t\t\t\tfor (let k = i; k < j; k++) { // O(n^2) but n < 100\r\n\t\t\t\t\t\tif (decomposed[k] == cp) {\r\n\t\t\t\t\t\t\tthrow new Error(`duplicate non-spacing marks: ${quoted_cp(cp)}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// parse to end so we have full nsm count\r\n\t\t\t\t// b. Forbid sequences of more than 4 nonspacing marks (gc=Mn or gc=Me).\r\n\t\t\t\tif (j - i > NSM_MAX) {\r\n\t\t\t\t\t// note: this slice starts with a base char or spacing-mark cm\r\n\t\t\t\t\tthrow new Error(`excessive non-spacing marks: ${bidi_qq(safe_str_from_cps(decomposed.slice(i-1, j)))} (${j-i}/${NSM_MAX})`);\r\n\t\t\t\t}\r\n\t\t\t\ti = j;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// *** this code currently isn't needed ***\r\n\t/*\r\n\tlet cm_whitelist = M instanceof Map;\r\n\tfor (let i = 0, e = cps.length; i < e; ) {\r\n\t\tlet cp = cps[i++];\r\n\t\tlet seqs = cm_whitelist && M.get(cp);\r\n\t\tif (seqs) { \r\n\t\t\t// list of codepoints that can follow\r\n\t\t\t// if this exists, this will always be 1+\r\n\t\t\tlet j = i;\r\n\t\t\twhile (j < e && CM.has(cps[j])) j++;\r\n\t\t\tlet cms = cps.slice(i, j);\r\n\t\t\tlet match = seqs.find(seq => !compare_arrays(seq, cms));\r\n\t\t\tif (!match) throw new Error(`disallowed combining mark sequence: \"${safe_str_from_cps([cp, ...cms])}\"`);\r\n\t\t\ti = j;\r\n\t\t} else if (!V.has(cp)) {\r\n\t\t\t// https://www.unicode.org/reports/tr39/#mixed_script_confusables\r\n\t\t\tlet quoted = quoted_cp(cp);\r\n\t\t\tfor (let cp of cps) {\r\n\t\t\t\tlet u = UNIQUE.get(cp);\r\n\t\t\t\tif (u && u !== g) {\r\n\t\t\t\t\t// if both scripts are restricted this error is confusing\r\n\t\t\t\t\t// because we don't differentiate RestrictedA from RestrictedB \r\n\t\t\t\t\tif (!u.R) quoted = `${quoted} is ${u.N}`;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthrow new Error(`disallowed ${g.N} character: ${quoted}`);\r\n\t\t\t//throw new Error(`disallowed character: ${quoted} (expected ${g.N})`);\r\n\t\t\t//throw new Error(`${g.N} does not allow: ${quoted}`);\r\n\t\t}\r\n\t}\r\n\tif (!cm_whitelist) {\r\n\t\tlet decomposed = nfd(cps);\r\n\t\tfor (let i = 1, e = decomposed.length; i < e; i++) { // we know it can't be cm leading\r\n\t\t\tif (CM.has(decomposed[i])) {\r\n\t\t\t\tlet j = i + 1;\r\n\t\t\t\twhile (j < e && CM.has(decomposed[j])) j++;\r\n\t\t\t\tif (j - i > M) {\r\n\t\t\t\t\tthrow new Error(`too many combining marks: \"${str_from_cps(decomposed.slice(i-1, j))}\" (${j-i}/${M})`);\r\n\t\t\t\t}\r\n\t\t\t\ti = j;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t*/\r\n}\r\n\r\n// given a list of codepoints\r\n// returns a list of lists, where emoji are a fully-qualified (as Array subclass)\r\n// eg. explode_cp(\"abc💩d\") => [[61, 62, 63], Emoji[1F4A9, FE0F], [64]]\r\n// 20230818: rename for 'process' name collision h/t Javarome\r\n// https://github.com/adraffy/ens-normalize.js/issues/23\r\nfunction tokens_from_str(input, nf, ef) {\r\n\tlet ret = [];\r\n\tlet chars = [];\r\n\tinput = input.slice().reverse(); // flip so we can pop\r\n\twhile (input.length) {\r\n\t\tlet emoji = consume_emoji_reversed(input);\r\n\t\tif (emoji) {\r\n\t\t\tif (chars.length) {\r\n\t\t\t\tret.push(nf(chars));\r\n\t\t\t\tchars = [];\r\n\t\t\t}\r\n\t\t\tret.push(ef(emoji));\r\n\t\t} else {\r\n\t\t\tlet cp = input.pop();\r\n\t\t\tif (VALID.has(cp)) {\r\n\t\t\t\tchars.push(cp);\r\n\t\t\t} else {\r\n\t\t\t\tlet cps = MAPPED.get(cp);\r\n\t\t\t\tif (cps) {\r\n\t\t\t\t\tchars.push(...cps); // less than 10 elements\r\n\t\t\t\t} else if (!IGNORED.has(cp)) {\r\n\t\t\t\t\t// 20230912: unicode 15.1 changed the order of processing such that\r\n\t\t\t\t\t// disallowed parts are only rejected after NFC\r\n\t\t\t\t\t// https://unicode.org/reports/tr46/#Validity_Criteria\r\n\t\t\t\t\t// this doesn't impact normalization as of today\r\n\t\t\t\t\t// technically, this error can be removed as the group logic will apply similar logic\r\n\t\t\t\t\t// however the error type might be less clear\r\n\t\t\t\t\tthrow error_disallowed(cp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (chars.length) {\r\n\t\tret.push(nf(chars));\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\nfunction filter_fe0f(cps) {\r\n\treturn cps.filter(cp => cp != FE0F);\r\n}\r\n\r\n// given array of codepoints\r\n// returns the longest valid emoji sequence (or undefined if no match)\r\n// *MUTATES* the supplied array\r\n// disallows interleaved ignored characters\r\n// fills (optional) eaten array with matched codepoints\r\nfunction consume_emoji_reversed(cps, eaten) {\r\n\tlet node = EMOJI_ROOT;\r\n\tlet emoji;\r\n\tlet pos = cps.length;\r\n\twhile (pos) {\r\n\t\tnode = node.get(cps[--pos]);\r\n\t\tif (!node) break;\r\n\t\tlet {V} = node;\r\n\t\tif (V) { // this is a valid emoji (so far)\r\n\t\t\temoji = V;\r\n\t\t\tif (eaten) eaten.push(...cps.slice(pos).reverse()); // (optional) copy input, used for ens_tokenize()\r\n\t\t\tcps.length = pos; // truncate\r\n\t\t}\r\n\t}\r\n\treturn emoji;\r\n}\r\n\r\n// ************************************************************\r\n// tokenizer \r\n\r\nconst TY_VALID = 'valid';\r\nconst TY_MAPPED = 'mapped';\r\nconst TY_IGNORED = 'ignored';\r\nconst TY_DISALLOWED = 'disallowed';\r\nconst TY_EMOJI = 'emoji';\r\nconst TY_NFC = 'nfc';\r\nconst TY_STOP = 'stop';\r\n\r\nfunction ens_tokenize(name, {\r\n\tnf = true, // collapse unnormalized runs into a single token\r\n} = {}) {\r\n\tinit();\r\n\tlet input = explode_cp(name).reverse();\r\n\tlet eaten = [];\r\n\tlet tokens = [];\r\n\twhile (input.length) {\r\n\t\tlet emoji = consume_emoji_reversed(input, eaten);\r\n\t\tif (emoji) {\r\n\t\t\ttokens.push({\r\n\t\t\t\ttype: TY_EMOJI,\r\n\t\t\t\temoji: emoji.slice(), // copy emoji\r\n\t\t\t\tinput: eaten,\r\n\t\t\t\tcps: filter_fe0f(emoji)\r\n\t\t\t});\r\n\t\t\teaten = []; // reset buffer\r\n\t\t} else {\r\n\t\t\tlet cp = input.pop();\r\n\t\t\tif (cp == STOP) {\r\n\t\t\t\ttokens.push({type: TY_STOP, cp});\r\n\t\t\t} else if (VALID.has(cp)) {\r\n\t\t\t\ttokens.push({type: TY_VALID, cps: [cp]});\r\n\t\t\t} else if (IGNORED.has(cp)) {\r\n\t\t\t\ttokens.push({type: TY_IGNORED, cp});\r\n\t\t\t} else {\r\n\t\t\t\tlet cps = MAPPED.get(cp);\r\n\t\t\t\tif (cps) {\r\n\t\t\t\t\ttokens.push({type: TY_MAPPED, cp, cps: cps.slice()});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttokens.push({type: TY_DISALLOWED, cp});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (nf) {\r\n\t\tfor (let i = 0, start = -1; i < tokens.length; i++) {\r\n\t\t\tlet token = tokens[i];\r\n\t\t\tif (is_valid_or_mapped(token.type)) {\r\n\t\t\t\tif (requires_check(token.cps)) { // normalization might be needed\r\n\t\t\t\t\tlet end = i + 1;\r\n\t\t\t\t\tfor (let pos = end; pos < tokens.length; pos++) { // find adjacent text\r\n\t\t\t\t\t\tlet {type, cps} = tokens[pos];\r\n\t\t\t\t\t\tif (is_valid_or_mapped(type)) {\r\n\t\t\t\t\t\t\tif (!requires_check(cps)) break;\r\n\t\t\t\t\t\t\tend = pos + 1;\r\n\t\t\t\t\t\t} else if (type !== TY_IGNORED) { // || type !== TY_DISALLOWED) { \r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (start < 0) start = i;\r\n\t\t\t\t\tlet slice = tokens.slice(start, end);\r\n\t\t\t\t\tlet cps0 = slice.flatMap(x => is_valid_or_mapped(x.type) ? x.cps : []); // strip junk tokens\r\n\t\t\t\t\tlet cps = nfc(cps0);\r\n\t\t\t\t\tif (compare_arrays(cps, cps0)) { // bundle into an nfc token\r\n\t\t\t\t\t\ttokens.splice(start, end - start, {\r\n\t\t\t\t\t\t\ttype: TY_NFC, \r\n\t\t\t\t\t\t\tinput: cps0, // there are 3 states: tokens0 ==(process)=> input ==(nfc)=> tokens/cps\r\n\t\t\t\t\t\t\tcps, \r\n\t\t\t\t\t\t\ttokens0: collapse_valid_tokens(slice),\r\n\t\t\t\t\t\t\ttokens: ens_tokenize(str_from_cps(cps), {nf: false})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ti = start;\r\n\t\t\t\t\t} else { \r\n\t\t\t\t\t\ti = end - 1; // skip to end of slice\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstart = -1; // reset\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstart = i; // remember last\r\n\t\t\t\t}\r\n\t\t\t} else if (token.type !== TY_IGNORED) { // 20221024: is this correct?\r\n\t\t\t\tstart = -1; // reset\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn collapse_valid_tokens(tokens);\r\n}\r\n\r\nfunction is_valid_or_mapped(type) {\r\n\treturn type == TY_VALID || type == TY_MAPPED;\r\n}\r\n\r\nfunction requires_check(cps) {\r\n\treturn cps.some(cp => NFC_CHECK.has(cp));\r\n}\r\n\r\nfunction collapse_valid_tokens(tokens) {\r\n\tfor (let i = 0; i < tokens.length; i++) {\r\n\t\tif (tokens[i].type == TY_VALID) {\r\n\t\t\tlet j = i + 1;\r\n\t\t\twhile (j < tokens.length && tokens[j].type == TY_VALID) j++;\r\n\t\t\ttokens.splice(i, j - i, {type: TY_VALID, cps: tokens.slice(i, j).flatMap(x => x.cps)});\r\n\t\t}\r\n\t}\r\n\treturn tokens;\r\n}\n\nexport { ens_beautify, ens_emoji, ens_normalize, ens_normalize_fragment, ens_split, ens_tokenize, is_combining_mark, nfc, nfd, safe_str_from_cps, should_escape };\n","\nimport { keccak256 } from \"../crypto/index.js\";\nimport {\n    concat, hexlify, assertArgument, toUtf8Bytes\n} from \"../utils/index.js\";\n\n\nimport { ens_normalize } from \"@adraffy/ens-normalize\";\n\nconst Zeros = new Uint8Array(32);\nZeros.fill(0);\n\nfunction checkComponent(comp: Uint8Array): Uint8Array {\n    assertArgument(comp.length !== 0, \"invalid ENS name; empty component\", \"comp\", comp)\n    return comp;\n}\n\nfunction ensNameSplit(name: string): Array<Uint8Array> {\n    const bytes = toUtf8Bytes(ensNormalize(name));\n    const comps: Array<Uint8Array> = [ ];\n\n    if (name.length === 0) { return comps; }\n\n    let last = 0;\n    for (let i = 0; i < bytes.length; i++) {\n        const d = bytes[i];\n\n        // A separator (i.e. \".\"); copy this component\n        if (d === 0x2e) {\n            comps.push(checkComponent(bytes.slice(last, i)));\n            last = i + 1;\n        }\n    }\n\n    // There was a stray separator at the end of the name\n    assertArgument(last < bytes.length, \"invalid ENS name; empty component\", \"name\", name);\n\n    comps.push(checkComponent(bytes.slice(last)));\n    return comps;\n}\n\n/**\n *  Returns the ENS %%name%% normalized.\n */\nexport function ensNormalize(name: string): string {\n    try {\n        if (name.length === 0) { throw new Error(\"empty label\"); }\n        return ens_normalize(name);\n    } catch (error: any) {\n        assertArgument(false, `invalid ENS name (${ error.message })`, \"name\", name);\n    }\n}\n\n/**\n *  Returns ``true`` if %%name%% is a valid ENS name.\n */\nexport function isValidName(name: string): name is string {\n    try {\n        return (ensNameSplit(name).length !== 0);\n    } catch (error) { }\n    return false;\n}\n\n/**\n *  Returns the [[link-namehash]] for %%name%%.\n */\nexport function namehash(name: string): string {\n    assertArgument(typeof(name) === \"string\", \"invalid ENS name; not a string\", \"name\", name);\n\n    assertArgument(name.length, `invalid ENS name (empty label)`, \"name\", name);\n\n    let result: string | Uint8Array = Zeros;\n\n    const comps = ensNameSplit(name);\n    while (comps.length) {\n        result = keccak256(concat([ result, keccak256(<Uint8Array>(comps.pop()))] ));\n    }\n\n    return hexlify(result);\n}\n\n/**\n *  Returns the DNS encoded %%name%%.\n *\n *  This is used for various parts of ENS name resolution, such\n *  as the wildcard resolution.\n */\nexport function dnsEncode(name: string, _maxLength?: number): string {\n    const length = (_maxLength != null) ? _maxLength: 63;\n\n    assertArgument(length <= 255, \"DNS encoded label cannot exceed 255\", \"length\", length);\n\n    return hexlify(concat(ensNameSplit(name).map((comp) => {\n        assertArgument(comp.length <= length, `label ${ JSON.stringify(name) } exceeds ${ length } bytes`, \"name\", name);\n\n        const bytes = new Uint8Array(comp.length + 1);\n        bytes.set(comp, 1);\n        bytes[0] = bytes.length - 1;\n        return bytes;\n    }))) + \"00\";\n}\n","import { exists, output } from './_assert.js';\nimport { Hash, createView, Input, toBytes } from './utils.js';\n\n// Polyfill for Safari 14\nfunction setBigUint64(view: DataView, byteOffset: number, value: bigint, isLE: boolean): void {\n  if (typeof view.setBigUint64 === 'function') return view.setBigUint64(byteOffset, value, isLE);\n  const _32n = BigInt(32);\n  const _u32_max = BigInt(0xffffffff);\n  const wh = Number((value >> _32n) & _u32_max);\n  const wl = Number(value & _u32_max);\n  const h = isLE ? 4 : 0;\n  const l = isLE ? 0 : 4;\n  view.setUint32(byteOffset + h, wh, isLE);\n  view.setUint32(byteOffset + l, wl, isLE);\n}\n\n// Base SHA2 class (RFC 6234)\nexport abstract class SHA2<T extends SHA2<T>> extends Hash<T> {\n  protected abstract process(buf: DataView, offset: number): void;\n  protected abstract get(): number[];\n  protected abstract set(...args: number[]): void;\n  abstract destroy(): void;\n  protected abstract roundClean(): void;\n  // For partial updates less than block size\n  protected buffer: Uint8Array;\n  protected view: DataView;\n  protected finished = false;\n  protected length = 0;\n  protected pos = 0;\n  protected destroyed = false;\n\n  constructor(\n    readonly blockLen: number,\n    public outputLen: number,\n    readonly padOffset: number,\n    readonly isLE: boolean\n  ) {\n    super();\n    this.buffer = new Uint8Array(blockLen);\n    this.view = createView(this.buffer);\n  }\n  update(data: Input): this {\n    exists(this);\n    const { view, buffer, blockLen } = this;\n    data = toBytes(data);\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input, cast it to view and process\n      if (take === blockLen) {\n        const dataView = createView(data);\n        for (; blockLen <= len - pos; pos += blockLen) this.process(dataView, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(view, 0);\n        this.pos = 0;\n      }\n    }\n    this.length += data.length;\n    this.roundClean();\n    return this;\n  }\n  digestInto(out: Uint8Array) {\n    exists(this);\n    output(out, this);\n    this.finished = true;\n    // Padding\n    // We can avoid allocation of buffer for padding completely if it\n    // was previously not allocated here. But it won't change performance.\n    const { buffer, view, blockLen, isLE } = this;\n    let { pos } = this;\n    // append the bit '1' to the message\n    buffer[pos++] = 0b10000000;\n    this.buffer.subarray(pos).fill(0);\n    // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n    if (this.padOffset > blockLen - pos) {\n      this.process(view, 0);\n      pos = 0;\n    }\n    // Pad until full block byte with zeros\n    for (let i = pos; i < blockLen; i++) buffer[i] = 0;\n    // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n    // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n    // So we just write lowest 64 bits of that value.\n    setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n    this.process(view, 0);\n    const oview = createView(out);\n    const len = this.outputLen;\n    // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n    if (len % 4) throw new Error('_sha2: outputLen should be aligned to 32bit');\n    const outLen = len / 4;\n    const state = this.get();\n    if (outLen > state.length) throw new Error('_sha2: outputLen bigger than state');\n    for (let i = 0; i < outLen; i++) oview.setUint32(4 * i, state[i], isLE);\n  }\n  digest() {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n  _cloneInto(to?: T): T {\n    to ||= new (this.constructor as any)() as T;\n    to.set(...this.get());\n    const { blockLen, buffer, length, finished, destroyed, pos } = this;\n    to.length = length;\n    to.pos = pos;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    if (length % blockLen) to.buffer.set(buffer);\n    return to;\n  }\n}\n","import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n\n// SHA2-256 need to try 2^128 hashes to execute birthday attack.\n// BTC network is doing 2^67 hashes/sec as per early 2023.\n\n// Choice: a ? b : c\nconst Chi = (a: number, b: number, c: number) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a: number, b: number, c: number) => (a & b) ^ (a & c) ^ (b & c);\n\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */new Uint32Array([\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = /* @__PURE__ */new Uint32Array([\n  0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nclass SHA256 extends SHA2<SHA256> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  A = IV[0] | 0;\n  B = IV[1] | 0;\n  C = IV[2] | 0;\n  D = IV[3] | 0;\n  E = IV[4] | 0;\n  F = IV[5] | 0;\n  G = IV[6] | 0;\n  H = IV[7] | 0;\n\n  constructor() {\n    super(64, 32, 8, false);\n  }\n  protected get(): [number, number, number, number, number, number, number, number] {\n    const { A, B, C, D, E, F, G, H } = this;\n    return [A, B, C, D, E, F, G, H];\n  }\n  // prettier-ignore\n  protected set(\n    A: number, B: number, C: number, D: number, E: number, F: number, G: number, H: number\n  ) {\n    this.A = A | 0;\n    this.B = B | 0;\n    this.C = C | 0;\n    this.D = D | 0;\n    this.E = E | 0;\n    this.F = F | 0;\n    this.G = G | 0;\n    this.H = H | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) SHA256_W[i] = view.getUint32(offset, false);\n    for (let i = 16; i < 64; i++) {\n      const W15 = SHA256_W[i - 15];\n      const W2 = SHA256_W[i - 2];\n      const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n      const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n      SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n    }\n    // Compression function main loop, 64 rounds\n    let { A, B, C, D, E, F, G, H } = this;\n    for (let i = 0; i < 64; i++) {\n      const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n      const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n      const T2 = (sigma0 + Maj(A, B, C)) | 0;\n      H = G;\n      G = F;\n      F = E;\n      E = (D + T1) | 0;\n      D = C;\n      C = B;\n      B = A;\n      A = (T1 + T2) | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    A = (A + this.A) | 0;\n    B = (B + this.B) | 0;\n    C = (C + this.C) | 0;\n    D = (D + this.D) | 0;\n    E = (E + this.E) | 0;\n    F = (F + this.F) | 0;\n    G = (G + this.G) | 0;\n    H = (H + this.H) | 0;\n    this.set(A, B, C, D, E, F, G, H);\n  }\n  protected roundClean() {\n    SHA256_W.fill(0);\n  }\n  destroy() {\n    this.set(0, 0, 0, 0, 0, 0, 0, 0);\n    this.buffer.fill(0);\n  }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n  A = 0xc1059ed8 | 0;\n  B = 0x367cd507 | 0;\n  C = 0x3070dd17 | 0;\n  D = 0xf70e5939 | 0;\n  E = 0xffc00b31 | 0;\n  F = 0x68581511 | 0;\n  G = 0x64f98fa7 | 0;\n  H = 0xbefa4fa4 | 0;\n  constructor() {\n    super();\n    this.outputLen = 28;\n  }\n}\n\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = /* @__PURE__ */ wrapConstructor(() => new SHA256());\nexport const sha224 = /* @__PURE__ */ wrapConstructor(() => new SHA224());\n","import { SHA2 } from './_sha2.js';\nimport u64 from './_u64.js';\nimport { wrapConstructor } from './utils.js';\n\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = /* @__PURE__ */ (() => u64.split([\n  '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n  '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n  '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n  '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n  '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n  '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n  '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n  '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n  '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n  '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n  '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n  '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n  '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n  '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n  '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n  '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n  '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n  '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n  '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n  '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\n\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\nexport class SHA512 extends SHA2<SHA512> {\n  // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n  // Also looks cleaner and easier to verify with spec.\n  // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0x6a09e667 | 0;\n  Al = 0xf3bcc908 | 0;\n  Bh = 0xbb67ae85 | 0;\n  Bl = 0x84caa73b | 0;\n  Ch = 0x3c6ef372 | 0;\n  Cl = 0xfe94f82b | 0;\n  Dh = 0xa54ff53a | 0;\n  Dl = 0x5f1d36f1 | 0;\n  Eh = 0x510e527f | 0;\n  El = 0xade682d1 | 0;\n  Fh = 0x9b05688c | 0;\n  Fl = 0x2b3e6c1f | 0;\n  Gh = 0x1f83d9ab | 0;\n  Gl = 0xfb41bd6b | 0;\n  Hh = 0x5be0cd19 | 0;\n  Hl = 0x137e2179 | 0;\n\n  constructor() {\n    super(128, 64, 16, false);\n  }\n  // prettier-ignore\n  protected get(): [\n    number, number, number, number, number, number, number, number,\n    number, number, number, number, number, number, number, number\n  ] {\n    const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n  }\n  // prettier-ignore\n  protected set(\n    Ah: number, Al: number, Bh: number, Bl: number, Ch: number, Cl: number, Dh: number, Dl: number,\n    Eh: number, El: number, Fh: number, Fl: number, Gh: number, Gl: number, Hh: number, Hl: number\n  ) {\n    this.Ah = Ah | 0;\n    this.Al = Al | 0;\n    this.Bh = Bh | 0;\n    this.Bl = Bl | 0;\n    this.Ch = Ch | 0;\n    this.Cl = Cl | 0;\n    this.Dh = Dh | 0;\n    this.Dl = Dl | 0;\n    this.Eh = Eh | 0;\n    this.El = El | 0;\n    this.Fh = Fh | 0;\n    this.Fl = Fl | 0;\n    this.Gh = Gh | 0;\n    this.Gl = Gl | 0;\n    this.Hh = Hh | 0;\n    this.Hl = Hl | 0;\n  }\n  protected process(view: DataView, offset: number) {\n    // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) {\n      SHA512_W_H[i] = view.getUint32(offset);\n      SHA512_W_L[i] = view.getUint32((offset += 4));\n    }\n    for (let i = 16; i < 80; i++) {\n      // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n      const W15h = SHA512_W_H[i - 15] | 0;\n      const W15l = SHA512_W_L[i - 15] | 0;\n      const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n      const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n      // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n      const W2h = SHA512_W_H[i - 2] | 0;\n      const W2l = SHA512_W_L[i - 2] | 0;\n      const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n      const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n      // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n      const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n      const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n      SHA512_W_H[i] = SUMh | 0;\n      SHA512_W_L[i] = SUMl | 0;\n    }\n    let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    // Compression function main loop, 80 rounds\n    for (let i = 0; i < 80; i++) {\n      // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n      const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n      const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n      //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n      const CHIl = (El & Fl) ^ (~El & Gl);\n      // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n      // prettier-ignore\n      const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n      const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n      const T1l = T1ll | 0;\n      // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n      const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n      const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n      const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n      const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n      Hh = Gh | 0;\n      Hl = Gl | 0;\n      Gh = Fh | 0;\n      Gl = Fl | 0;\n      Fh = Eh | 0;\n      Fl = El | 0;\n      ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n      Dh = Ch | 0;\n      Dl = Cl | 0;\n      Ch = Bh | 0;\n      Cl = Bl | 0;\n      Bh = Ah | 0;\n      Bl = Al | 0;\n      const All = u64.add3L(T1l, sigma0l, MAJl);\n      Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n      Al = All | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n    ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n    ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n    ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n    ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n    ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n    ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n    ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n    this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n  }\n  protected roundClean() {\n    SHA512_W_H.fill(0);\n    SHA512_W_L.fill(0);\n  }\n  destroy() {\n    this.buffer.fill(0);\n    this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n  }\n}\n\nclass SHA512_224 extends SHA512 {\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0x8c3d37c8 | 0;\n  Al = 0x19544da2 | 0;\n  Bh = 0x73e19966 | 0;\n  Bl = 0x89dcd4d6 | 0;\n  Ch = 0x1dfab7ae | 0;\n  Cl = 0x32ff9c82 | 0;\n  Dh = 0x679dd514 | 0;\n  Dl = 0x582f9fcf | 0;\n  Eh = 0x0f6d2b69 | 0;\n  El = 0x7bd44da8 | 0;\n  Fh = 0x77e36f73 | 0;\n  Fl = 0x04c48942 | 0;\n  Gh = 0x3f9d85a8 | 0;\n  Gl = 0x6a1d36c8 | 0;\n  Hh = 0x1112e6ad | 0;\n  Hl = 0x91d692a1 | 0;\n\n  constructor() {\n    super();\n    this.outputLen = 28;\n  }\n}\n\nclass SHA512_256 extends SHA512 {\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0x22312194 | 0;\n  Al = 0xfc2bf72c | 0;\n  Bh = 0x9f555fa3 | 0;\n  Bl = 0xc84c64c2 | 0;\n  Ch = 0x2393b86b | 0;\n  Cl = 0x6f53b151 | 0;\n  Dh = 0x96387719 | 0;\n  Dl = 0x5940eabd | 0;\n  Eh = 0x96283ee2 | 0;\n  El = 0xa88effe3 | 0;\n  Fh = 0xbe5e1e25 | 0;\n  Fl = 0x53863992 | 0;\n  Gh = 0x2b0199fc | 0;\n  Gl = 0x2c85b8aa | 0;\n  Hh = 0x0eb72ddc | 0;\n  Hl = 0x81c52ca2 | 0;\n\n  constructor() {\n    super();\n    this.outputLen = 32;\n  }\n}\n\nclass SHA384 extends SHA512 {\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0xcbbb9d5d | 0;\n  Al = 0xc1059ed8 | 0;\n  Bh = 0x629a292a | 0;\n  Bl = 0x367cd507 | 0;\n  Ch = 0x9159015a | 0;\n  Cl = 0x3070dd17 | 0;\n  Dh = 0x152fecd8 | 0;\n  Dl = 0xf70e5939 | 0;\n  Eh = 0x67332667 | 0;\n  El = 0xffc00b31 | 0;\n  Fh = 0x8eb44a87 | 0;\n  Fl = 0x68581511 | 0;\n  Gh = 0xdb0c2e0d | 0;\n  Gl = 0x64f98fa7 | 0;\n  Hh = 0x47b5481d | 0;\n  Hl = 0xbefa4fa4 | 0;\n\n  constructor() {\n    super();\n    this.outputLen = 48;\n  }\n}\n\nexport const sha512 = /* @__PURE__ */ wrapConstructor(() => new SHA512());\nexport const sha512_224 = /* @__PURE__ */ wrapConstructor(() => new SHA512_224());\nexport const sha512_256 = /* @__PURE__ */ wrapConstructor(() => new SHA512_256());\nexport const sha384 = /* @__PURE__ */ wrapConstructor(() => new SHA384());\n","/* Browser Crypto Shims */\n\nimport { hmac } from \"@noble/hashes/hmac\";\nimport { pbkdf2 } from \"@noble/hashes/pbkdf2\";\nimport { sha256 } from \"@noble/hashes/sha256\";\nimport { sha512 } from \"@noble/hashes/sha512\";\n\nimport { assert, assertArgument } from \"../utils/index.js\";\n\n\ndeclare global {\n    interface Window { }\n\n    const window: Window;\n    const self: Window;\n}\n\n\nfunction getGlobal(): any {\n  if (typeof self !== 'undefined') { return self; }\n  if (typeof window !== 'undefined') { return window; }\n  if (typeof global !== 'undefined') { return global; }\n  throw new Error('unable to locate global object');\n};\n\nconst anyGlobal = getGlobal();\nconst crypto: any = anyGlobal.crypto || anyGlobal.msCrypto;\n\n\nexport interface CryptoHasher {\n    update(data: Uint8Array): CryptoHasher;\n    digest(): Uint8Array;\n}\n\nexport function createHash(algo: string): CryptoHasher {\n    switch (algo) {\n        case \"sha256\": return sha256.create();\n        case \"sha512\": return sha512.create();\n    }\n    assertArgument(false, \"invalid hashing algorithm name\", \"algorithm\", algo);\n}\n\nexport function createHmac(_algo: string, key: Uint8Array): CryptoHasher {\n    const algo = ({ sha256, sha512 }[_algo]);\n    assertArgument(algo != null, \"invalid hmac algorithm\", \"algorithm\", _algo);\n    return hmac.create(algo, key);\n}\n\nexport function pbkdf2Sync(password: Uint8Array, salt: Uint8Array, iterations: number, keylen: number, _algo: \"sha256\" | \"sha512\"): Uint8Array {\n    const algo = ({ sha256, sha512 }[_algo]);\n    assertArgument(algo != null, \"invalid pbkdf2 algorithm\", \"algorithm\", _algo);\n    return pbkdf2(algo, password, salt, { c: iterations, dkLen: keylen });\n}\n\nexport function randomBytes(length: number): Uint8Array {\n    assert(crypto != null, \"platform does not support secure random numbers\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"randomBytes\" });\n\n    assertArgument(Number.isInteger(length) && length > 0 && length <= 1024, \"invalid length\", \"length\", length);\n\n    const result = new Uint8Array(length);\n    crypto.getRandomValues(result);\n    return result;\n}\n","import { createHash } from \"./crypto.js\";\n\nimport { getBytes, hexlify } from \"../utils/index.js\";\n\nimport type { BytesLike } from \"../utils/index.js\";\n\n\nconst _sha256 = function(data: Uint8Array): Uint8Array {\n    return createHash(\"sha256\").update(data).digest();\n}\n\nconst _sha512 = function(data: Uint8Array): Uint8Array {\n    return createHash(\"sha512\").update(data).digest();\n}\n\nlet __sha256: (data: Uint8Array) => BytesLike = _sha256;\nlet __sha512: (data: Uint8Array) => BytesLike = _sha512;\n\nlet locked256 = false, locked512 = false;\n\n\n/**\n *  Compute the cryptographic SHA2-256 hash of %%data%%.\n *\n *  @_docloc: api/crypto:Hash Functions\n *  @returns DataHexstring\n *\n *  @example:\n *    sha256(\"0x\")\n *    //_result:\n *\n *    sha256(\"0x1337\")\n *    //_result:\n *\n *    sha256(new Uint8Array([ 0x13, 0x37 ]))\n *    //_result:\n *\n */\nexport function sha256(_data: BytesLike): string {\n    const data = getBytes(_data, \"data\");\n    return hexlify(__sha256(data));\n}\nsha256._ = _sha256;\nsha256.lock = function(): void { locked256 = true; }\nsha256.register = function(func: (data: Uint8Array) => BytesLike): void {\n    if (locked256) { throw new Error(\"sha256 is locked\"); }\n    __sha256 = func;\n}\nObject.freeze(sha256);\n\n\n/**\n *  Compute the cryptographic SHA2-512 hash of %%data%%.\n *\n *  @_docloc: api/crypto:Hash Functions\n *  @returns DataHexstring\n *\n *  @example:\n *    sha512(\"0x\")\n *    //_result:\n *\n *    sha512(\"0x1337\")\n *    //_result:\n *\n *    sha512(new Uint8Array([ 0x13, 0x37 ]))\n *    //_result:\n */\nexport function sha512(_data: BytesLike): string {\n    const data = getBytes(_data, \"data\");\n    return hexlify(__sha512(data));\n}\nsha512._ = _sha512;\nsha512.lock = function(): void { locked512 = true; }\nsha512.register = function(func: (data: Uint8Array) => BytesLike): void {\n    if (locked512) { throw new Error(\"sha512 is locked\"); }\n    __sha512 = func;\n}\nObject.freeze(sha256);\n","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// 100 lines of code in the file are duplicated from noble-hashes (utils).\n// This is OK: `abstract` directory does not use noble-hashes.\n// User may opt-in into using different hashing library. This way, noble-hashes\n// won't be included into their bundle.\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst u8a = (a: any): a is Uint8Array => a instanceof Uint8Array;\nexport type Hex = Uint8Array | string; // hex strings are accepted for simplicity\nexport type PrivKey = Hex | bigint; // bigints are accepted to ease learning curve\nexport type CHash = {\n  (message: Uint8Array | string): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create(opts?: { dkLen?: number }): any; // For shake\n};\nexport type FHash = (message: Uint8Array | string) => Uint8Array;\n\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  if (!u8a(bytes)) throw new Error('Uint8Array expected');\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\nexport function numberToHexUnpadded(num: number | bigint): string {\n  const hex = num.toString(16);\n  return hex.length & 1 ? `0${hex}` : hex;\n}\n\nexport function hexToNumber(hex: string): bigint {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  // Big Endian\n  return BigInt(hex === '' ? '0' : `0x${hex}`);\n}\n\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  const len = hex.length;\n  if (len % 2) throw new Error('padded hex string expected, got unpadded hex of length ' + len);\n  const array = new Uint8Array(len / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = hex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\n// BE: Big Endian, LE: Little Endian\nexport function bytesToNumberBE(bytes: Uint8Array): bigint {\n  return hexToNumber(bytesToHex(bytes));\n}\nexport function bytesToNumberLE(bytes: Uint8Array): bigint {\n  if (!u8a(bytes)) throw new Error('Uint8Array expected');\n  return hexToNumber(bytesToHex(Uint8Array.from(bytes).reverse()));\n}\n\nexport function numberToBytesBE(n: number | bigint, len: number): Uint8Array {\n  return hexToBytes(n.toString(16).padStart(len * 2, '0'));\n}\nexport function numberToBytesLE(n: number | bigint, len: number): Uint8Array {\n  return numberToBytesBE(n, len).reverse();\n}\n// Unpadded, rarely used\nexport function numberToVarBytesBE(n: number | bigint): Uint8Array {\n  return hexToBytes(numberToHexUnpadded(n));\n}\n\n/**\n * Takes hex string or Uint8Array, converts to Uint8Array.\n * Validates output length.\n * Will throw error for other types.\n * @param title descriptive title for an error e.g. 'private key'\n * @param hex hex string or Uint8Array\n * @param expectedLength optional, will compare to result array's length\n * @returns\n */\nexport function ensureBytes(title: string, hex: Hex, expectedLength?: number): Uint8Array {\n  let res: Uint8Array;\n  if (typeof hex === 'string') {\n    try {\n      res = hexToBytes(hex);\n    } catch (e) {\n      throw new Error(`${title} must be valid hex string, got \"${hex}\". Cause: ${e}`);\n    }\n  } else if (u8a(hex)) {\n    // Uint8Array.from() instead of hash.slice() because node.js Buffer\n    // is instance of Uint8Array, and its slice() creates **mutable** copy\n    res = Uint8Array.from(hex);\n  } else {\n    throw new Error(`${title} must be hex string or Uint8Array`);\n  }\n  const len = res.length;\n  if (typeof expectedLength === 'number' && len !== expectedLength)\n    throw new Error(`${title} expected ${expectedLength} bytes, got ${len}`);\n  return res;\n}\n\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  const r = new Uint8Array(arrays.reduce((sum, a) => sum + a.length, 0));\n  let pad = 0; // walk through each item, ensure they have proper type\n  arrays.forEach((a) => {\n    if (!u8a(a)) throw new Error('Uint8Array expected');\n    r.set(a, pad);\n    pad += a.length;\n  });\n  return r;\n}\n\nexport function equalBytes(b1: Uint8Array, b2: Uint8Array) {\n  // We don't care about timing attacks here\n  if (b1.length !== b2.length) return false;\n  for (let i = 0; i < b1.length; i++) if (b1[i] !== b2[i]) return false;\n  return true;\n}\n\n// Global symbols in both browsers and Node.js since v11\n// See https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\n\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\n// Bit operations\n\n/**\n * Calculates amount of bits in a bigint.\n * Same as `n.toString(2).length`\n */\nexport function bitLen(n: bigint) {\n  let len;\n  for (len = 0; n > _0n; n >>= _1n, len += 1);\n  return len;\n}\n\n/**\n * Gets single bit at position.\n * NOTE: first bit position is 0 (same as arrays)\n * Same as `!!+Array.from(n.toString(2)).reverse()[pos]`\n */\nexport function bitGet(n: bigint, pos: number) {\n  return (n >> BigInt(pos)) & _1n;\n}\n\n/**\n * Sets single bit at position.\n */\nexport const bitSet = (n: bigint, pos: number, value: boolean) => {\n  return n | ((value ? _1n : _0n) << BigInt(pos));\n};\n\n/**\n * Calculate mask for N bits. Not using ** operator with bigints because of old engines.\n * Same as BigInt(`0b${Array(i).fill('1').join('')}`)\n */\nexport const bitMask = (n: number) => (_2n << BigInt(n - 1)) - _1n;\n\n// DRBG\n\nconst u8n = (data?: any) => new Uint8Array(data); // creates Uint8Array\nconst u8fr = (arr: any) => Uint8Array.from(arr); // another shortcut\ntype Pred<T> = (v: Uint8Array) => T | undefined;\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nexport function createHmacDrbg<T>(\n  hashLen: number,\n  qByteLen: number,\n  hmacFn: (key: Uint8Array, ...messages: Uint8Array[]) => Uint8Array\n): (seed: Uint8Array, predicate: Pred<T>) => T {\n  if (typeof hashLen !== 'number' || hashLen < 2) throw new Error('hashLen must be a number');\n  if (typeof qByteLen !== 'number' || qByteLen < 2) throw new Error('qByteLen must be a number');\n  if (typeof hmacFn !== 'function') throw new Error('hmacFn must be a function');\n  // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n  let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n  let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n  let i = 0; // Iterations counter, will throw when over 1000\n  const reset = () => {\n    v.fill(1);\n    k.fill(0);\n    i = 0;\n  };\n  const h = (...b: Uint8Array[]) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n  const reseed = (seed = u8n()) => {\n    // HMAC-DRBG reseed() function. Steps D-G\n    k = h(u8fr([0x00]), seed); // k = hmac(k || v || 0x00 || seed)\n    v = h(); // v = hmac(k || v)\n    if (seed.length === 0) return;\n    k = h(u8fr([0x01]), seed); // k = hmac(k || v || 0x01 || seed)\n    v = h(); // v = hmac(k || v)\n  };\n  const gen = () => {\n    // HMAC-DRBG generate() function\n    if (i++ >= 1000) throw new Error('drbg: tried 1000 values');\n    let len = 0;\n    const out: Uint8Array[] = [];\n    while (len < qByteLen) {\n      v = h();\n      const sl = v.slice();\n      out.push(sl);\n      len += v.length;\n    }\n    return concatBytes(...out);\n  };\n  const genUntil = (seed: Uint8Array, pred: Pred<T>): T => {\n    reset();\n    reseed(seed); // Steps D-G\n    let res: T | undefined = undefined; // Step H: grind until k is in [1..n-1]\n    while (!(res = pred(gen()))) reseed();\n    reset();\n    return res;\n  };\n  return genUntil;\n}\n\n// Validating curves and fields\n\nconst validatorFns = {\n  bigint: (val: any) => typeof val === 'bigint',\n  function: (val: any) => typeof val === 'function',\n  boolean: (val: any) => typeof val === 'boolean',\n  string: (val: any) => typeof val === 'string',\n  stringOrUint8Array: (val: any) => typeof val === 'string' || val instanceof Uint8Array,\n  isSafeInteger: (val: any) => Number.isSafeInteger(val),\n  array: (val: any) => Array.isArray(val),\n  field: (val: any, object: any) => (object as any).Fp.isValid(val),\n  hash: (val: any) => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n} as const;\ntype Validator = keyof typeof validatorFns;\ntype ValMap<T extends Record<string, any>> = { [K in keyof T]?: Validator };\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\n\nexport function validateObject<T extends Record<string, any>>(\n  object: T,\n  validators: ValMap<T>,\n  optValidators: ValMap<T> = {}\n) {\n  const checkField = (fieldName: keyof T, type: Validator, isOptional: boolean) => {\n    const checkVal = validatorFns[type];\n    if (typeof checkVal !== 'function')\n      throw new Error(`Invalid validator \"${type}\", expected function`);\n\n    const val = object[fieldName as keyof typeof object];\n    if (isOptional && val === undefined) return;\n    if (!checkVal(val, object)) {\n      throw new Error(\n        `Invalid param ${String(fieldName)}=${val} (${typeof val}), expected ${type}`\n      );\n    }\n  };\n  for (const [fieldName, type] of Object.entries(validators)) checkField(fieldName, type!, false);\n  for (const [fieldName, type] of Object.entries(optValidators)) checkField(fieldName, type!, true);\n  return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\n","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Utilities for modular arithmetics and finite fields\nimport {\n  bitMask,\n  numberToBytesBE,\n  numberToBytesLE,\n  bytesToNumberBE,\n  bytesToNumberLE,\n  ensureBytes,\n  validateObject,\n} from './utils.js';\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n// prettier-ignore\nconst _4n = BigInt(4), _5n = BigInt(5), _8n = BigInt(8);\n// prettier-ignore\nconst _9n = BigInt(9), _16n = BigInt(16);\n\n// Calculates a modulo b\nexport function mod(a: bigint, b: bigint): bigint {\n  const result = a % b;\n  return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently raise num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @example\n * pow(2n, 6n, 11n) // 64n % 11n == 9n\n */\n// TODO: use field version && remove\nexport function pow(num: bigint, power: bigint, modulo: bigint): bigint {\n  if (modulo <= _0n || power < _0n) throw new Error('Expected power/modulo > 0');\n  if (modulo === _1n) return _0n;\n  let res = _1n;\n  while (power > _0n) {\n    if (power & _1n) res = (res * num) % modulo;\n    num = (num * num) % modulo;\n    power >>= _1n;\n  }\n  return res;\n}\n\n// Does x ^ (2 ^ power) mod p. pow2(30, 4) == 30 ^ (2 ^ 4)\nexport function pow2(x: bigint, power: bigint, modulo: bigint): bigint {\n  let res = x;\n  while (power-- > _0n) {\n    res *= res;\n    res %= modulo;\n  }\n  return res;\n}\n\n// Inverses number over modulo\nexport function invert(number: bigint, modulo: bigint): bigint {\n  if (number === _0n || modulo <= _0n) {\n    throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n  }\n  // Euclidean GCD https://brilliant.org/wiki/extended-euclidean-algorithm/\n  // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n  let a = mod(number, modulo);\n  let b = modulo;\n  // prettier-ignore\n  let x = _0n, y = _1n, u = _1n, v = _0n;\n  while (a !== _0n) {\n    // JIT applies optimization if those two lines follow each other\n    const q = b / a;\n    const r = b % a;\n    const m = x - u * q;\n    const n = y - v * q;\n    // prettier-ignore\n    b = a, a = r, x = u, y = v, u = m, v = n;\n  }\n  const gcd = b;\n  if (gcd !== _1n) throw new Error('invert: does not exist');\n  return mod(x, modulo);\n}\n\n/**\n * Tonelli-Shanks square root search algorithm.\n * 1. https://eprint.iacr.org/2012/685.pdf (page 12)\n * 2. Square Roots from 1; 24, 51, 10 to Dan Shanks\n * Will start an infinite loop if field order P is not prime.\n * @param P field order\n * @returns function that takes field Fp (created from P) and number n\n */\nexport function tonelliShanks(P: bigint) {\n  // Legendre constant: used to calculate Legendre symbol (a | p),\n  // which denotes the value of a^((p-1)/2) (mod p).\n  // (a | p) ≡ 1    if a is a square (mod p)\n  // (a | p) ≡ -1   if a is not a square (mod p)\n  // (a | p) ≡ 0    if a ≡ 0 (mod p)\n  const legendreC = (P - _1n) / _2n;\n\n  let Q: bigint, S: number, Z: bigint;\n  // Step 1: By factoring out powers of 2 from p - 1,\n  // find q and s such that p - 1 = q*(2^s) with q odd\n  for (Q = P - _1n, S = 0; Q % _2n === _0n; Q /= _2n, S++);\n\n  // Step 2: Select a non-square z such that (z | p) ≡ -1 and set c ≡ zq\n  for (Z = _2n; Z < P && pow(Z, legendreC, P) !== P - _1n; Z++);\n\n  // Fast-path\n  if (S === 1) {\n    const p1div4 = (P + _1n) / _4n;\n    return function tonelliFast<T>(Fp: IField<T>, n: T) {\n      const root = Fp.pow(n, p1div4);\n      if (!Fp.eql(Fp.sqr(root), n)) throw new Error('Cannot find square root');\n      return root;\n    };\n  }\n\n  // Slow-path\n  const Q1div2 = (Q + _1n) / _2n;\n  return function tonelliSlow<T>(Fp: IField<T>, n: T): T {\n    // Step 0: Check that n is indeed a square: (n | p) should not be ≡ -1\n    if (Fp.pow(n, legendreC) === Fp.neg(Fp.ONE)) throw new Error('Cannot find square root');\n    let r = S;\n    // TODO: will fail at Fp2/etc\n    let g = Fp.pow(Fp.mul(Fp.ONE, Z), Q); // will update both x and b\n    let x = Fp.pow(n, Q1div2); // first guess at the square root\n    let b = Fp.pow(n, Q); // first guess at the fudge factor\n\n    while (!Fp.eql(b, Fp.ONE)) {\n      if (Fp.eql(b, Fp.ZERO)) return Fp.ZERO; // https://en.wikipedia.org/wiki/Tonelli%E2%80%93Shanks_algorithm (4. If t = 0, return r = 0)\n      // Find m such b^(2^m)==1\n      let m = 1;\n      for (let t2 = Fp.sqr(b); m < r; m++) {\n        if (Fp.eql(t2, Fp.ONE)) break;\n        t2 = Fp.sqr(t2); // t2 *= t2\n      }\n      // NOTE: r-m-1 can be bigger than 32, need to convert to bigint before shift, otherwise there will be overflow\n      const ge = Fp.pow(g, _1n << BigInt(r - m - 1)); // ge = 2^(r-m-1)\n      g = Fp.sqr(ge); // g = ge * ge\n      x = Fp.mul(x, ge); // x *= ge\n      b = Fp.mul(b, g); // b *= g\n      r = m;\n    }\n    return x;\n  };\n}\n\nexport function FpSqrt(P: bigint) {\n  // NOTE: different algorithms can give different roots, it is up to user to decide which one they want.\n  // For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n\n  // P ≡ 3 (mod 4)\n  // √n = n^((P+1)/4)\n  if (P % _4n === _3n) {\n    // Not all roots possible!\n    // const ORDER =\n    //   0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn;\n    // const NUM = 72057594037927816n;\n    const p1div4 = (P + _1n) / _4n;\n    return function sqrt3mod4<T>(Fp: IField<T>, n: T) {\n      const root = Fp.pow(n, p1div4);\n      // Throw if root**2 != n\n      if (!Fp.eql(Fp.sqr(root), n)) throw new Error('Cannot find square root');\n      return root;\n    };\n  }\n\n  // Atkin algorithm for q ≡ 5 (mod 8), https://eprint.iacr.org/2012/685.pdf (page 10)\n  if (P % _8n === _5n) {\n    const c1 = (P - _5n) / _8n;\n    return function sqrt5mod8<T>(Fp: IField<T>, n: T) {\n      const n2 = Fp.mul(n, _2n);\n      const v = Fp.pow(n2, c1);\n      const nv = Fp.mul(n, v);\n      const i = Fp.mul(Fp.mul(nv, _2n), v);\n      const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n      if (!Fp.eql(Fp.sqr(root), n)) throw new Error('Cannot find square root');\n      return root;\n    };\n  }\n\n  // P ≡ 9 (mod 16)\n  if (P % _16n === _9n) {\n    // NOTE: tonelli is too slow for bls-Fp2 calculations even on start\n    // Means we cannot use sqrt for constants at all!\n    //\n    // const c1 = Fp.sqrt(Fp.negate(Fp.ONE)); //  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n    // const c2 = Fp.sqrt(c1);                //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n    // const c3 = Fp.sqrt(Fp.negate(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n    // const c4 = (P + _7n) / _16n;           //  4. c4 = (q + 7) / 16        # Integer arithmetic\n    // sqrt = (x) => {\n    //   let tv1 = Fp.pow(x, c4);             //  1. tv1 = x^c4\n    //   let tv2 = Fp.mul(c1, tv1);           //  2. tv2 = c1 * tv1\n    //   const tv3 = Fp.mul(c2, tv1);         //  3. tv3 = c2 * tv1\n    //   let tv4 = Fp.mul(c3, tv1);           //  4. tv4 = c3 * tv1\n    //   const e1 = Fp.equals(Fp.square(tv2), x); //  5.  e1 = (tv2^2) == x\n    //   const e2 = Fp.equals(Fp.square(tv3), x); //  6.  e2 = (tv3^2) == x\n    //   tv1 = Fp.cmov(tv1, tv2, e1); //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n    //   tv2 = Fp.cmov(tv4, tv3, e2); //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n    //   const e3 = Fp.equals(Fp.square(tv2), x); //  9.  e3 = (tv2^2) == x\n    //   return Fp.cmov(tv1, tv2, e3); //  10.  z = CMOV(tv1, tv2, e3)  # Select the sqrt from tv1 and tv2\n    // }\n  }\n\n  // Other cases: Tonelli-Shanks algorithm\n  return tonelliShanks(P);\n}\n\n// Little-endian check for first LE bit (last BE bit);\nexport const isNegativeLE = (num: bigint, modulo: bigint) => (mod(num, modulo) & _1n) === _1n;\n\n// Field is not always over prime: for example, Fp2 has ORDER(q)=p^m\nexport interface IField<T> {\n  ORDER: bigint;\n  BYTES: number;\n  BITS: number;\n  MASK: bigint;\n  ZERO: T;\n  ONE: T;\n  // 1-arg\n  create: (num: T) => T;\n  isValid: (num: T) => boolean;\n  is0: (num: T) => boolean;\n  neg(num: T): T;\n  inv(num: T): T;\n  sqrt(num: T): T;\n  sqr(num: T): T;\n  // 2-args\n  eql(lhs: T, rhs: T): boolean;\n  add(lhs: T, rhs: T): T;\n  sub(lhs: T, rhs: T): T;\n  mul(lhs: T, rhs: T | bigint): T;\n  pow(lhs: T, power: bigint): T;\n  div(lhs: T, rhs: T | bigint): T;\n  // N for NonNormalized (for now)\n  addN(lhs: T, rhs: T): T;\n  subN(lhs: T, rhs: T): T;\n  mulN(lhs: T, rhs: T | bigint): T;\n  sqrN(num: T): T;\n\n  // Optional\n  // Should be same as sgn0 function in\n  // [RFC9380](https://www.rfc-editor.org/rfc/rfc9380#section-4.1).\n  // NOTE: sgn0 is 'negative in LE', which is same as odd. And negative in LE is kinda strange definition anyway.\n  isOdd?(num: T): boolean; // Odd instead of even since we have it for Fp2\n  // legendre?(num: T): T;\n  pow(lhs: T, power: bigint): T;\n  invertBatch: (lst: T[]) => T[];\n  toBytes(num: T): Uint8Array;\n  fromBytes(bytes: Uint8Array): T;\n  // If c is False, CMOV returns a, otherwise it returns b.\n  cmov(a: T, b: T, c: boolean): T;\n}\n// prettier-ignore\nconst FIELD_FIELDS = [\n  'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n  'eql', 'add', 'sub', 'mul', 'pow', 'div',\n  'addN', 'subN', 'mulN', 'sqrN'\n] as const;\nexport function validateField<T>(field: IField<T>) {\n  const initial = {\n    ORDER: 'bigint',\n    MASK: 'bigint',\n    BYTES: 'isSafeInteger',\n    BITS: 'isSafeInteger',\n  } as Record<string, string>;\n  const opts = FIELD_FIELDS.reduce((map, val: string) => {\n    map[val] = 'function';\n    return map;\n  }, initial);\n  return validateObject(field, opts);\n}\n\n// Generic field functions\n\n/**\n * Same as `pow` but for Fp: non-constant-time.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n */\nexport function FpPow<T>(f: IField<T>, num: T, power: bigint): T {\n  // Should have same speed as pow for bigints\n  // TODO: benchmark!\n  if (power < _0n) throw new Error('Expected power > 0');\n  if (power === _0n) return f.ONE;\n  if (power === _1n) return num;\n  let p = f.ONE;\n  let d = num;\n  while (power > _0n) {\n    if (power & _1n) p = f.mul(p, d);\n    d = f.sqr(d);\n    power >>= _1n;\n  }\n  return p;\n}\n\n/**\n * Efficiently invert an array of Field elements.\n * `inv(0)` will return `undefined` here: make sure to throw an error.\n */\nexport function FpInvertBatch<T>(f: IField<T>, nums: T[]): T[] {\n  const tmp = new Array(nums.length);\n  // Walk from first to last, multiply them by each other MOD p\n  const lastMultiplied = nums.reduce((acc, num, i) => {\n    if (f.is0(num)) return acc;\n    tmp[i] = acc;\n    return f.mul(acc, num);\n  }, f.ONE);\n  // Invert last element\n  const inverted = f.inv(lastMultiplied);\n  // Walk from last to first, multiply them by inverted each other MOD p\n  nums.reduceRight((acc, num, i) => {\n    if (f.is0(num)) return acc;\n    tmp[i] = f.mul(acc, tmp[i]);\n    return f.mul(acc, num);\n  }, inverted);\n  return tmp;\n}\n\nexport function FpDiv<T>(f: IField<T>, lhs: T, rhs: T | bigint): T {\n  return f.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, f.ORDER) : f.inv(rhs));\n}\n\n// This function returns True whenever the value x is a square in the field F.\nexport function FpIsSquare<T>(f: IField<T>) {\n  const legendreConst = (f.ORDER - _1n) / _2n; // Integer arithmetic\n  return (x: T): boolean => {\n    const p = f.pow(x, legendreConst);\n    return f.eql(p, f.ZERO) || f.eql(p, f.ONE);\n  };\n}\n\n// CURVE.n lengths\nexport function nLength(n: bigint, nBitLength?: number) {\n  // Bit size, byte size of CURVE.n\n  const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n  const nByteLength = Math.ceil(_nBitLength / 8);\n  return { nBitLength: _nBitLength, nByteLength };\n}\n\ntype FpField = IField<bigint> & Required<Pick<IField<bigint>, 'isOdd'>>;\n/**\n * Initializes a finite field over prime. **Non-primes are not supported.**\n * Do not init in loop: slow. Very fragile: always run a benchmark on a change.\n * Major performance optimizations:\n * * a) denormalized operations like mulN instead of mul\n * * b) same object shape: never add or remove keys\n * * c) Object.freeze\n * @param ORDER prime positive bigint\n * @param bitLen how many bits the field consumes\n * @param isLE (def: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nexport function Field(\n  ORDER: bigint,\n  bitLen?: number,\n  isLE = false,\n  redef: Partial<IField<bigint>> = {}\n): Readonly<FpField> {\n  if (ORDER <= _0n) throw new Error(`Expected Field ORDER > 0, got ${ORDER}`);\n  const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, bitLen);\n  if (BYTES > 2048) throw new Error('Field lengths over 2048 bytes are not supported');\n  const sqrtP = FpSqrt(ORDER);\n  const f: Readonly<FpField> = Object.freeze({\n    ORDER,\n    BITS,\n    BYTES,\n    MASK: bitMask(BITS),\n    ZERO: _0n,\n    ONE: _1n,\n    create: (num) => mod(num, ORDER),\n    isValid: (num) => {\n      if (typeof num !== 'bigint')\n        throw new Error(`Invalid field element: expected bigint, got ${typeof num}`);\n      return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n    },\n    is0: (num) => num === _0n,\n    isOdd: (num) => (num & _1n) === _1n,\n    neg: (num) => mod(-num, ORDER),\n    eql: (lhs, rhs) => lhs === rhs,\n\n    sqr: (num) => mod(num * num, ORDER),\n    add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n    sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n    mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n    pow: (num, power) => FpPow(f, num, power),\n    div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n\n    // Same as above, but doesn't normalize\n    sqrN: (num) => num * num,\n    addN: (lhs, rhs) => lhs + rhs,\n    subN: (lhs, rhs) => lhs - rhs,\n    mulN: (lhs, rhs) => lhs * rhs,\n\n    inv: (num) => invert(num, ORDER),\n    sqrt: redef.sqrt || ((n) => sqrtP(f, n)),\n    invertBatch: (lst) => FpInvertBatch(f, lst),\n    // TODO: do we really need constant cmov?\n    // We don't have const-time bigints anyway, so probably will be not very useful\n    cmov: (a, b, c) => (c ? b : a),\n    toBytes: (num) => (isLE ? numberToBytesLE(num, BYTES) : numberToBytesBE(num, BYTES)),\n    fromBytes: (bytes) => {\n      if (bytes.length !== BYTES)\n        throw new Error(`Fp.fromBytes: expected ${BYTES}, got ${bytes.length}`);\n      return isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n    },\n  } as FpField);\n  return Object.freeze(f);\n}\n\nexport function FpSqrtOdd<T>(Fp: IField<T>, elm: T) {\n  if (!Fp.isOdd) throw new Error(`Field doesn't have isOdd`);\n  const root = Fp.sqrt(elm);\n  return Fp.isOdd(root) ? root : Fp.neg(root);\n}\n\nexport function FpSqrtEven<T>(Fp: IField<T>, elm: T) {\n  if (!Fp.isOdd) throw new Error(`Field doesn't have isOdd`);\n  const root = Fp.sqrt(elm);\n  return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n\n/**\n * \"Constant-time\" private key generation utility.\n * Same as mapKeyToField, but accepts less bytes (40 instead of 48 for 32-byte field).\n * Which makes it slightly more biased, less secure.\n * @deprecated use mapKeyToField instead\n */\nexport function hashToPrivateScalar(\n  hash: string | Uint8Array,\n  groupOrder: bigint,\n  isLE = false\n): bigint {\n  hash = ensureBytes('privateHash', hash);\n  const hashLen = hash.length;\n  const minLen = nLength(groupOrder).nByteLength + 8;\n  if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n    throw new Error(`hashToPrivateScalar: expected ${minLen}-1024 bytes of input, got ${hashLen}`);\n  const num = isLE ? bytesToNumberLE(hash) : bytesToNumberBE(hash);\n  return mod(num, groupOrder - _1n) + _1n;\n}\n\n/**\n * Returns total number of bytes consumed by the field element.\n * For example, 32 bytes for usual 256-bit weierstrass curve.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of field\n */\nexport function getFieldBytesLength(fieldOrder: bigint): number {\n  if (typeof fieldOrder !== 'bigint') throw new Error('field order must be bigint');\n  const bitLength = fieldOrder.toString(2).length;\n  return Math.ceil(bitLength / 8);\n}\n\n/**\n * Returns minimal amount of bytes that can be safely reduced\n * by field order.\n * Should be 2^-128 for 128-bit curve such as P256.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of target hash\n */\nexport function getMinHashLength(fieldOrder: bigint): number {\n  const length = getFieldBytesLength(fieldOrder);\n  return length + Math.ceil(length / 2);\n}\n\n/**\n * \"Constant-time\" private key generation utility.\n * Can take (n + n/2) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being negligible.\n * Needs at least 48 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * FIPS 186-5, A.2 https://csrc.nist.gov/publications/detail/fips/186/5/final\n * RFC 9380, https://www.rfc-editor.org/rfc/rfc9380#section-5\n * @param hash hash output from SHA3 or a similar function\n * @param groupOrder size of subgroup - (e.g. secp256k1.CURVE.n)\n * @param isLE interpret hash bytes as LE num\n * @returns valid private scalar\n */\nexport function mapHashToField(key: Uint8Array, fieldOrder: bigint, isLE = false): Uint8Array {\n  const len = key.length;\n  const fieldLen = getFieldBytesLength(fieldOrder);\n  const minLen = getMinHashLength(fieldOrder);\n  // No small numbers: need to understand bias story. No huge numbers: easier to detect JS timings.\n  if (len < 16 || len < minLen || len > 1024)\n    throw new Error(`expected ${minLen}-1024 bytes of input, got ${len}`);\n  const num = isLE ? bytesToNumberBE(key) : bytesToNumberLE(key);\n  // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\n  const reduced = mod(num, fieldOrder - _1n) + _1n;\n  return isLE ? numberToBytesLE(reduced, fieldLen) : numberToBytesBE(reduced, fieldLen);\n}\n","import { hash as assertHash, bytes as assertBytes, exists as assertExists } from './_assert.js';\nimport { Hash, CHash, Input, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nexport class HMAC<T extends Hash<T>> extends Hash<HMAC<T>> {\n  oHash: T;\n  iHash: T;\n  blockLen: number;\n  outputLen: number;\n  private finished = false;\n  private destroyed = false;\n\n  constructor(hash: CHash, _key: Input) {\n    super();\n    assertHash(hash);\n    const key = toBytes(_key);\n    this.iHash = hash.create() as T;\n    if (typeof this.iHash.update !== 'function')\n      throw new Error('Expected instance of class which extends utils.Hash');\n    this.blockLen = this.iHash.blockLen;\n    this.outputLen = this.iHash.outputLen;\n    const blockLen = this.blockLen;\n    const pad = new Uint8Array(blockLen);\n    // blockLen can be bigger than outputLen\n    pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36;\n    this.iHash.update(pad);\n    // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n    this.oHash = hash.create() as T;\n    // Undo internal XOR && apply outer XOR\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36 ^ 0x5c;\n    this.oHash.update(pad);\n    pad.fill(0);\n  }\n  update(buf: Input) {\n    assertExists(this);\n    this.iHash.update(buf);\n    return this;\n  }\n  digestInto(out: Uint8Array) {\n    assertExists(this);\n    assertBytes(out, this.outputLen);\n    this.finished = true;\n    this.iHash.digestInto(out);\n    this.oHash.update(out);\n    this.oHash.digestInto(out);\n    this.destroy();\n  }\n  digest() {\n    const out = new Uint8Array(this.oHash.outputLen);\n    this.digestInto(out);\n    return out;\n  }\n  _cloneInto(to?: HMAC<T>): HMAC<T> {\n    // Create new instance without calling constructor since key already in state and we don't know it.\n    to ||= Object.create(Object.getPrototypeOf(this), {});\n    const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n    to = to as this;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    to.blockLen = blockLen;\n    to.outputLen = outputLen;\n    to.oHash = oHash._cloneInto(to.oHash);\n    to.iHash = iHash._cloneInto(to.iHash);\n    return to;\n  }\n  destroy() {\n    this.destroyed = true;\n    this.oHash.destroy();\n    this.iHash.destroy();\n  }\n}\n\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash: CHash, key: Input, message: Input): Uint8Array =>\n  new HMAC<any>(hash, key).update(message).digest();\nhmac.create = (hash: CHash, key: Input) => new HMAC<any>(hash, key);\n","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Abelian group utilities\nimport { IField, validateField, nLength } from './modular.js';\nimport { validateObject } from './utils.js';\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\n\nexport type AffinePoint<T> = {\n  x: T;\n  y: T;\n} & { z?: never; t?: never };\n\nexport interface Group<T extends Group<T>> {\n  double(): T;\n  negate(): T;\n  add(other: T): T;\n  subtract(other: T): T;\n  equals(other: T): boolean;\n  multiply(scalar: bigint): T;\n}\n\nexport type GroupConstructor<T> = {\n  BASE: T;\n  ZERO: T;\n};\nexport type Mapper<T> = (i: T[]) => T[];\n\n// Elliptic curve multiplication of Point by scalar. Fragile.\n// Scalars should always be less than curve order: this should be checked inside of a curve itself.\n// Creates precomputation tables for fast multiplication:\n// - private scalar is split by fixed size windows of W bits\n// - every window point is collected from window's table & added to accumulator\n// - since windows are different, same point inside tables won't be accessed more than once per calc\n// - each multiplication is 'Math.ceil(CURVE_ORDER / 𝑊) + 1' point additions (fixed for any scalar)\n// - +1 window is neccessary for wNAF\n// - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n// TODO: Research returning 2d JS array of windows, instead of a single window. This would allow\n// windows to be in different memory locations\nexport function wNAF<T extends Group<T>>(c: GroupConstructor<T>, bits: number) {\n  const constTimeNegate = (condition: boolean, item: T): T => {\n    const neg = item.negate();\n    return condition ? neg : item;\n  };\n  const opts = (W: number) => {\n    const windows = Math.ceil(bits / W) + 1; // +1, because\n    const windowSize = 2 ** (W - 1); // -1 because we skip zero\n    return { windows, windowSize };\n  };\n  return {\n    constTimeNegate,\n    // non-const time multiplication ladder\n    unsafeLadder(elm: T, n: bigint) {\n      let p = c.ZERO;\n      let d: T = elm;\n      while (n > _0n) {\n        if (n & _1n) p = p.add(d);\n        d = d.double();\n        n >>= _1n;\n      }\n      return p;\n    },\n\n    /**\n     * Creates a wNAF precomputation window. Used for caching.\n     * Default window size is set by `utils.precompute()` and is equal to 8.\n     * Number of precomputed points depends on the curve size:\n     * 2^(𝑊−1) * (Math.ceil(𝑛 / 𝑊) + 1), where:\n     * - 𝑊 is the window size\n     * - 𝑛 is the bitlength of the curve order.\n     * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n     * @returns precomputed point tables flattened to a single array\n     */\n    precomputeWindow(elm: T, W: number): Group<T>[] {\n      const { windows, windowSize } = opts(W);\n      const points: T[] = [];\n      let p: T = elm;\n      let base = p;\n      for (let window = 0; window < windows; window++) {\n        base = p;\n        points.push(base);\n        // =1, because we skip zero\n        for (let i = 1; i < windowSize; i++) {\n          base = base.add(p);\n          points.push(base);\n        }\n        p = base.double();\n      }\n      return points;\n    },\n\n    /**\n     * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n     * @param W window size\n     * @param precomputes precomputed tables\n     * @param n scalar (we don't check here, but should be less than curve order)\n     * @returns real and fake (for const-time) points\n     */\n    wNAF(W: number, precomputes: T[], n: bigint): { p: T; f: T } {\n      // TODO: maybe check that scalar is less than group order? wNAF behavious is undefined otherwise\n      // But need to carefully remove other checks before wNAF. ORDER == bits here\n      const { windows, windowSize } = opts(W);\n\n      let p = c.ZERO;\n      let f = c.BASE;\n\n      const mask = BigInt(2 ** W - 1); // Create mask with W ones: 0b1111 for W=4 etc.\n      const maxNumber = 2 ** W;\n      const shiftBy = BigInt(W);\n\n      for (let window = 0; window < windows; window++) {\n        const offset = window * windowSize;\n        // Extract W bits.\n        let wbits = Number(n & mask);\n\n        // Shift number by W bits.\n        n >>= shiftBy;\n\n        // If the bits are bigger than max size, we'll split those.\n        // +224 => 256 - 32\n        if (wbits > windowSize) {\n          wbits -= maxNumber;\n          n += _1n;\n        }\n\n        // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n        // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n        // there is negate now: it is possible that negated element from low value\n        // would be the same as high element, which will create carry into next window.\n        // It's not obvious how this can fail, but still worth investigating later.\n\n        // Check if we're onto Zero point.\n        // Add random point inside current window to f.\n        const offset1 = offset;\n        const offset2 = offset + Math.abs(wbits) - 1; // -1 because we skip zero\n        const cond1 = window % 2 !== 0;\n        const cond2 = wbits < 0;\n        if (wbits === 0) {\n          // The most important part for const-time getPublicKey\n          f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n        } else {\n          p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n        }\n      }\n      // JIT-compiler should not eliminate f here, since it will later be used in normalizeZ()\n      // Even if the variable is still unused, there are some checks which will\n      // throw an exception, so compiler needs to prove they won't happen, which is hard.\n      // At this point there is a way to F be infinity-point even if p is not,\n      // which makes it less const-time: around 1 bigint multiply.\n      return { p, f };\n    },\n\n    wNAFCached(P: T, precomputesMap: Map<T, T[]>, n: bigint, transform: Mapper<T>): { p: T; f: T } {\n      // @ts-ignore\n      const W: number = P._WINDOW_SIZE || 1;\n      // Calculate precomputes on a first run, reuse them after\n      let comp = precomputesMap.get(P);\n      if (!comp) {\n        comp = this.precomputeWindow(P, W) as T[];\n        if (W !== 1) {\n          precomputesMap.set(P, transform(comp));\n        }\n      }\n      return this.wNAF(W, comp, n);\n    },\n  };\n}\n\n// Generic BasicCurve interface: works even for polynomial fields (BLS): P, n, h would be ok.\n// Though generator can be different (Fp2 / Fp6 for BLS).\nexport type BasicCurve<T> = {\n  Fp: IField<T>; // Field over which we'll do calculations (Fp)\n  n: bigint; // Curve order, total count of valid points in the field\n  nBitLength?: number; // bit length of curve order\n  nByteLength?: number; // byte length of curve order\n  h: bigint; // cofactor. we can assign default=1, but users will just ignore it w/o validation\n  hEff?: bigint; // Number to multiply to clear cofactor\n  Gx: T; // base point X coordinate\n  Gy: T; // base point Y coordinate\n  allowInfinityPoint?: boolean; // bls12-381 requires it. ZERO point is valid, but invalid pubkey\n};\n\nexport function validateBasic<FP, T>(curve: BasicCurve<FP> & T) {\n  validateField(curve.Fp);\n  validateObject(\n    curve,\n    {\n      n: 'bigint',\n      h: 'bigint',\n      Gx: 'field',\n      Gy: 'field',\n    },\n    {\n      nBitLength: 'isSafeInteger',\n      nByteLength: 'isSafeInteger',\n    }\n  );\n  // Set defaults\n  return Object.freeze({\n    ...nLength(curve.n, curve.nBitLength),\n    ...curve,\n    ...{ p: curve.Fp.ORDER },\n  } as const);\n}\n","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Short Weierstrass curve. The formula is: y² = x³ + ax + b\nimport * as mod from './modular.js';\nimport * as ut from './utils.js';\nimport { CHash, Hex, PrivKey, ensureBytes } from './utils.js';\nimport { Group, GroupConstructor, wNAF, BasicCurve, validateBasic, AffinePoint } from './curve.js';\n\nexport type { AffinePoint };\ntype HmacFnSync = (key: Uint8Array, ...messages: Uint8Array[]) => Uint8Array;\ntype EndomorphismOpts = {\n  beta: bigint;\n  splitScalar: (k: bigint) => { k1neg: boolean; k1: bigint; k2neg: boolean; k2: bigint };\n};\nexport type BasicWCurve<T> = BasicCurve<T> & {\n  // Params: a, b\n  a: T;\n  b: T;\n\n  // Optional params\n  allowedPrivateKeyLengths?: readonly number[]; // for P521\n  wrapPrivateKey?: boolean; // bls12-381 requires mod(n) instead of rejecting keys >= n\n  endo?: EndomorphismOpts; // Endomorphism options for Koblitz curves\n  // When a cofactor != 1, there can be an effective methods to:\n  // 1. Determine whether a point is torsion-free\n  isTorsionFree?: (c: ProjConstructor<T>, point: ProjPointType<T>) => boolean;\n  // 2. Clear torsion component\n  clearCofactor?: (c: ProjConstructor<T>, point: ProjPointType<T>) => ProjPointType<T>;\n};\n\ntype Entropy = Hex | true;\nexport type SignOpts = { lowS?: boolean; extraEntropy?: Entropy; prehash?: boolean };\nexport type VerOpts = { lowS?: boolean; prehash?: boolean };\n\n/**\n * ### Design rationale for types\n *\n * * Interaction between classes from different curves should fail:\n *   `k256.Point.BASE.add(p256.Point.BASE)`\n * * For this purpose we want to use `instanceof` operator, which is fast and works during runtime\n * * Different calls of `curve()` would return different classes -\n *   `curve(params) !== curve(params)`: if somebody decided to monkey-patch their curve,\n *   it won't affect others\n *\n * TypeScript can't infer types for classes created inside a function. Classes is one instance of nominative types in TypeScript and interfaces only check for shape, so it's hard to create unique type for every function call.\n *\n * We can use generic types via some param, like curve opts, but that would:\n *     1. Enable interaction between `curve(params)` and `curve(params)` (curves of same params)\n *     which is hard to debug.\n *     2. Params can be generic and we can't enforce them to be constant value:\n *     if somebody creates curve from non-constant params,\n *     it would be allowed to interact with other curves with non-constant params\n *\n * TODO: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-7.html#unique-symbol\n */\n\n// Instance for 3d XYZ points\nexport interface ProjPointType<T> extends Group<ProjPointType<T>> {\n  readonly px: T;\n  readonly py: T;\n  readonly pz: T;\n  get x(): T;\n  get y(): T;\n  multiply(scalar: bigint): ProjPointType<T>;\n  toAffine(iz?: T): AffinePoint<T>;\n  isTorsionFree(): boolean;\n  clearCofactor(): ProjPointType<T>;\n  assertValidity(): void;\n  hasEvenY(): boolean;\n  toRawBytes(isCompressed?: boolean): Uint8Array;\n  toHex(isCompressed?: boolean): string;\n\n  multiplyUnsafe(scalar: bigint): ProjPointType<T>;\n  multiplyAndAddUnsafe(Q: ProjPointType<T>, a: bigint, b: bigint): ProjPointType<T> | undefined;\n  _setWindowSize(windowSize: number): void;\n}\n// Static methods for 3d XYZ points\nexport interface ProjConstructor<T> extends GroupConstructor<ProjPointType<T>> {\n  new (x: T, y: T, z: T): ProjPointType<T>;\n  fromAffine(p: AffinePoint<T>): ProjPointType<T>;\n  fromHex(hex: Hex): ProjPointType<T>;\n  fromPrivateKey(privateKey: PrivKey): ProjPointType<T>;\n  normalizeZ(points: ProjPointType<T>[]): ProjPointType<T>[];\n}\n\nexport type CurvePointsType<T> = BasicWCurve<T> & {\n  // Bytes\n  fromBytes?: (bytes: Uint8Array) => AffinePoint<T>;\n  toBytes?: (c: ProjConstructor<T>, point: ProjPointType<T>, isCompressed: boolean) => Uint8Array;\n};\n\nfunction validatePointOpts<T>(curve: CurvePointsType<T>) {\n  const opts = validateBasic(curve);\n  ut.validateObject(\n    opts,\n    {\n      a: 'field',\n      b: 'field',\n    },\n    {\n      allowedPrivateKeyLengths: 'array',\n      wrapPrivateKey: 'boolean',\n      isTorsionFree: 'function',\n      clearCofactor: 'function',\n      allowInfinityPoint: 'boolean',\n      fromBytes: 'function',\n      toBytes: 'function',\n    }\n  );\n  const { endo, Fp, a } = opts;\n  if (endo) {\n    if (!Fp.eql(a, Fp.ZERO)) {\n      throw new Error('Endomorphism can only be defined for Koblitz curves that have a=0');\n    }\n    if (\n      typeof endo !== 'object' ||\n      typeof endo.beta !== 'bigint' ||\n      typeof endo.splitScalar !== 'function'\n    ) {\n      throw new Error('Expected endomorphism with beta: bigint and splitScalar: function');\n    }\n  }\n  return Object.freeze({ ...opts } as const);\n}\n\nexport type CurvePointsRes<T> = {\n  ProjectivePoint: ProjConstructor<T>;\n  normPrivateKeyToScalar: (key: PrivKey) => bigint;\n  weierstrassEquation: (x: T) => T;\n  isWithinCurveOrder: (num: bigint) => boolean;\n};\n\n// ASN.1 DER encoding utilities\nconst { bytesToNumberBE: b2n, hexToBytes: h2b } = ut;\nexport const DER = {\n  // asn.1 DER encoding utils\n  Err: class DERErr extends Error {\n    constructor(m = '') {\n      super(m);\n    }\n  },\n  _parseInt(data: Uint8Array): { d: bigint; l: Uint8Array } {\n    const { Err: E } = DER;\n    if (data.length < 2 || data[0] !== 0x02) throw new E('Invalid signature integer tag');\n    const len = data[1];\n    const res = data.subarray(2, len + 2);\n    if (!len || res.length !== len) throw new E('Invalid signature integer: wrong length');\n    // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n    // since we always use positive integers here. It must always be empty:\n    // - add zero byte if exists\n    // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n    if (res[0] & 0b10000000) throw new E('Invalid signature integer: negative');\n    if (res[0] === 0x00 && !(res[1] & 0b10000000))\n      throw new E('Invalid signature integer: unnecessary leading zero');\n    return { d: b2n(res), l: data.subarray(len + 2) }; // d is data, l is left\n  },\n  toSig(hex: string | Uint8Array): { r: bigint; s: bigint } {\n    // parse DER signature\n    const { Err: E } = DER;\n    const data = typeof hex === 'string' ? h2b(hex) : hex;\n    if (!(data instanceof Uint8Array)) throw new Error('ui8a expected');\n    let l = data.length;\n    if (l < 2 || data[0] != 0x30) throw new E('Invalid signature tag');\n    if (data[1] !== l - 2) throw new E('Invalid signature: incorrect length');\n    const { d: r, l: sBytes } = DER._parseInt(data.subarray(2));\n    const { d: s, l: rBytesLeft } = DER._parseInt(sBytes);\n    if (rBytesLeft.length) throw new E('Invalid signature: left bytes after parsing');\n    return { r, s };\n  },\n  hexFromSig(sig: { r: bigint; s: bigint }): string {\n    // Add leading zero if first byte has negative bit enabled. More details in '_parseInt'\n    const slice = (s: string): string => (Number.parseInt(s[0], 16) & 0b1000 ? '00' + s : s);\n    const h = (num: number | bigint) => {\n      const hex = num.toString(16);\n      return hex.length & 1 ? `0${hex}` : hex;\n    };\n    const s = slice(h(sig.s));\n    const r = slice(h(sig.r));\n    const shl = s.length / 2;\n    const rhl = r.length / 2;\n    const sl = h(shl);\n    const rl = h(rhl);\n    return `30${h(rhl + shl + 4)}02${rl}${r}02${sl}${s}`;\n  },\n};\n\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\n\nexport function weierstrassPoints<T>(opts: CurvePointsType<T>) {\n  const CURVE = validatePointOpts(opts);\n  const { Fp } = CURVE; // All curves has same field / group length as for now, but they can differ\n\n  const toBytes =\n    CURVE.toBytes ||\n    ((_c: ProjConstructor<T>, point: ProjPointType<T>, _isCompressed: boolean) => {\n      const a = point.toAffine();\n      return ut.concatBytes(Uint8Array.from([0x04]), Fp.toBytes(a.x), Fp.toBytes(a.y));\n    });\n  const fromBytes =\n    CURVE.fromBytes ||\n    ((bytes: Uint8Array) => {\n      // const head = bytes[0];\n      const tail = bytes.subarray(1);\n      // if (head !== 0x04) throw new Error('Only non-compressed encoding is supported');\n      const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n      const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n      return { x, y };\n    });\n\n  /**\n   * y² = x³ + ax + b: Short weierstrass curve formula\n   * @returns y²\n   */\n  function weierstrassEquation(x: T): T {\n    const { a, b } = CURVE;\n    const x2 = Fp.sqr(x); // x * x\n    const x3 = Fp.mul(x2, x); // x2 * x\n    return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x3 + a * x + b\n  }\n  // Validate whether the passed curve params are valid.\n  // We check if curve equation works for generator point.\n  // `assertValidity()` won't work: `isTorsionFree()` is not available at this point in bls12-381.\n  // ProjectivePoint class has not been initialized yet.\n  if (!Fp.eql(Fp.sqr(CURVE.Gy), weierstrassEquation(CURVE.Gx)))\n    throw new Error('bad generator point: equation left != right');\n\n  // Valid group elements reside in range 1..n-1\n  function isWithinCurveOrder(num: bigint): boolean {\n    return typeof num === 'bigint' && _0n < num && num < CURVE.n;\n  }\n  function assertGE(num: bigint) {\n    if (!isWithinCurveOrder(num)) throw new Error('Expected valid bigint: 0 < bigint < curve.n');\n  }\n  // Validates if priv key is valid and converts it to bigint.\n  // Supports options allowedPrivateKeyLengths and wrapPrivateKey.\n  function normPrivateKeyToScalar(key: PrivKey): bigint {\n    const { allowedPrivateKeyLengths: lengths, nByteLength, wrapPrivateKey, n } = CURVE;\n    if (lengths && typeof key !== 'bigint') {\n      if (key instanceof Uint8Array) key = ut.bytesToHex(key);\n      // Normalize to hex string, pad. E.g. P521 would norm 130-132 char hex to 132-char bytes\n      if (typeof key !== 'string' || !lengths.includes(key.length)) throw new Error('Invalid key');\n      key = key.padStart(nByteLength * 2, '0');\n    }\n    let num: bigint;\n    try {\n      num =\n        typeof key === 'bigint'\n          ? key\n          : ut.bytesToNumberBE(ensureBytes('private key', key, nByteLength));\n    } catch (error) {\n      throw new Error(`private key must be ${nByteLength} bytes, hex or bigint, not ${typeof key}`);\n    }\n    if (wrapPrivateKey) num = mod.mod(num, n); // disabled by default, enabled for BLS\n    assertGE(num); // num in range [1..N-1]\n    return num;\n  }\n\n  const pointPrecomputes = new Map<Point, Point[]>();\n  function assertPrjPoint(other: unknown) {\n    if (!(other instanceof Point)) throw new Error('ProjectivePoint expected');\n  }\n  /**\n   * Projective Point works in 3d / projective (homogeneous) coordinates: (x, y, z) ∋ (x=x/z, y=y/z)\n   * Default Point works in 2d / affine coordinates: (x, y)\n   * We're doing calculations in projective, because its operations don't require costly inversion.\n   */\n  class Point implements ProjPointType<T> {\n    static readonly BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    static readonly ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO);\n\n    constructor(readonly px: T, readonly py: T, readonly pz: T) {\n      if (px == null || !Fp.isValid(px)) throw new Error('x required');\n      if (py == null || !Fp.isValid(py)) throw new Error('y required');\n      if (pz == null || !Fp.isValid(pz)) throw new Error('z required');\n    }\n\n    // Does not validate if the point is on-curve.\n    // Use fromHex instead, or call assertValidity() later.\n    static fromAffine(p: AffinePoint<T>): Point {\n      const { x, y } = p || {};\n      if (!p || !Fp.isValid(x) || !Fp.isValid(y)) throw new Error('invalid affine point');\n      if (p instanceof Point) throw new Error('projective point not allowed');\n      const is0 = (i: T) => Fp.eql(i, Fp.ZERO);\n      // fromAffine(x:0, y:0) would produce (x:0, y:0, z:1), but we need (x:0, y:1, z:0)\n      if (is0(x) && is0(y)) return Point.ZERO;\n      return new Point(x, y, Fp.ONE);\n    }\n\n    get x(): T {\n      return this.toAffine().x;\n    }\n    get y(): T {\n      return this.toAffine().y;\n    }\n\n    /**\n     * Takes a bunch of Projective Points but executes only one\n     * inversion on all of them. Inversion is very slow operation,\n     * so this improves performance massively.\n     * Optimization: converts a list of projective points to a list of identical points with Z=1.\n     */\n    static normalizeZ(points: Point[]): Point[] {\n      const toInv = Fp.invertBatch(points.map((p) => p.pz));\n      return points.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n    }\n\n    /**\n     * Converts hash string or Uint8Array to Point.\n     * @param hex short/long ECDSA hex\n     */\n    static fromHex(hex: Hex): Point {\n      const P = Point.fromAffine(fromBytes(ensureBytes('pointHex', hex)));\n      P.assertValidity();\n      return P;\n    }\n\n    // Multiplies generator point by privateKey.\n    static fromPrivateKey(privateKey: PrivKey) {\n      return Point.BASE.multiply(normPrivateKeyToScalar(privateKey));\n    }\n\n    // We calculate precomputes for elliptic curve point multiplication\n    // using windowed method. This specifies window size and\n    // stores precomputed values. Usually only base point would be precomputed.\n    _WINDOW_SIZE?: number;\n\n    // \"Private method\", don't use it directly\n    _setWindowSize(windowSize: number) {\n      this._WINDOW_SIZE = windowSize;\n      pointPrecomputes.delete(this);\n    }\n\n    // A point on curve is valid if it conforms to equation.\n    assertValidity(): void {\n      if (this.is0()) {\n        // (0, 1, 0) aka ZERO is invalid in most contexts.\n        // In BLS, ZERO can be serialized, so we allow it.\n        // (0, 0, 0) is wrong representation of ZERO and is always invalid.\n        if (CURVE.allowInfinityPoint && !Fp.is0(this.py)) return;\n        throw new Error('bad point: ZERO');\n      }\n      // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n      const { x, y } = this.toAffine();\n      // Check if x, y are valid field elements\n      if (!Fp.isValid(x) || !Fp.isValid(y)) throw new Error('bad point: x or y not FE');\n      const left = Fp.sqr(y); // y²\n      const right = weierstrassEquation(x); // x³ + ax + b\n      if (!Fp.eql(left, right)) throw new Error('bad point: equation left != right');\n      if (!this.isTorsionFree()) throw new Error('bad point: not in prime-order subgroup');\n    }\n    hasEvenY(): boolean {\n      const { y } = this.toAffine();\n      if (Fp.isOdd) return !Fp.isOdd(y);\n      throw new Error(\"Field doesn't support isOdd\");\n    }\n\n    /**\n     * Compare one point to another.\n     */\n    equals(other: Point): boolean {\n      assertPrjPoint(other);\n      const { px: X1, py: Y1, pz: Z1 } = this;\n      const { px: X2, py: Y2, pz: Z2 } = other;\n      const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n      const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n      return U1 && U2;\n    }\n\n    /**\n     * Flips point to one corresponding to (x, -y) in Affine coordinates.\n     */\n    negate(): Point {\n      return new Point(this.px, Fp.neg(this.py), this.pz);\n    }\n\n    // Renes-Costello-Batina exception-free doubling formula.\n    // There is 30% faster Jacobian formula, but it is not complete.\n    // https://eprint.iacr.org/2015/1060, algorithm 3\n    // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n    double() {\n      const { a, b } = CURVE;\n      const b3 = Fp.mul(b, _3n);\n      const { px: X1, py: Y1, pz: Z1 } = this;\n      let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n      let t0 = Fp.mul(X1, X1); // step 1\n      let t1 = Fp.mul(Y1, Y1);\n      let t2 = Fp.mul(Z1, Z1);\n      let t3 = Fp.mul(X1, Y1);\n      t3 = Fp.add(t3, t3); // step 5\n      Z3 = Fp.mul(X1, Z1);\n      Z3 = Fp.add(Z3, Z3);\n      X3 = Fp.mul(a, Z3);\n      Y3 = Fp.mul(b3, t2);\n      Y3 = Fp.add(X3, Y3); // step 10\n      X3 = Fp.sub(t1, Y3);\n      Y3 = Fp.add(t1, Y3);\n      Y3 = Fp.mul(X3, Y3);\n      X3 = Fp.mul(t3, X3);\n      Z3 = Fp.mul(b3, Z3); // step 15\n      t2 = Fp.mul(a, t2);\n      t3 = Fp.sub(t0, t2);\n      t3 = Fp.mul(a, t3);\n      t3 = Fp.add(t3, Z3);\n      Z3 = Fp.add(t0, t0); // step 20\n      t0 = Fp.add(Z3, t0);\n      t0 = Fp.add(t0, t2);\n      t0 = Fp.mul(t0, t3);\n      Y3 = Fp.add(Y3, t0);\n      t2 = Fp.mul(Y1, Z1); // step 25\n      t2 = Fp.add(t2, t2);\n      t0 = Fp.mul(t2, t3);\n      X3 = Fp.sub(X3, t0);\n      Z3 = Fp.mul(t2, t1);\n      Z3 = Fp.add(Z3, Z3); // step 30\n      Z3 = Fp.add(Z3, Z3);\n      return new Point(X3, Y3, Z3);\n    }\n\n    // Renes-Costello-Batina exception-free addition formula.\n    // There is 30% faster Jacobian formula, but it is not complete.\n    // https://eprint.iacr.org/2015/1060, algorithm 1\n    // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n    add(other: Point): Point {\n      assertPrjPoint(other);\n      const { px: X1, py: Y1, pz: Z1 } = this;\n      const { px: X2, py: Y2, pz: Z2 } = other;\n      let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n      const a = CURVE.a;\n      const b3 = Fp.mul(CURVE.b, _3n);\n      let t0 = Fp.mul(X1, X2); // step 1\n      let t1 = Fp.mul(Y1, Y2);\n      let t2 = Fp.mul(Z1, Z2);\n      let t3 = Fp.add(X1, Y1);\n      let t4 = Fp.add(X2, Y2); // step 5\n      t3 = Fp.mul(t3, t4);\n      t4 = Fp.add(t0, t1);\n      t3 = Fp.sub(t3, t4);\n      t4 = Fp.add(X1, Z1);\n      let t5 = Fp.add(X2, Z2); // step 10\n      t4 = Fp.mul(t4, t5);\n      t5 = Fp.add(t0, t2);\n      t4 = Fp.sub(t4, t5);\n      t5 = Fp.add(Y1, Z1);\n      X3 = Fp.add(Y2, Z2); // step 15\n      t5 = Fp.mul(t5, X3);\n      X3 = Fp.add(t1, t2);\n      t5 = Fp.sub(t5, X3);\n      Z3 = Fp.mul(a, t4);\n      X3 = Fp.mul(b3, t2); // step 20\n      Z3 = Fp.add(X3, Z3);\n      X3 = Fp.sub(t1, Z3);\n      Z3 = Fp.add(t1, Z3);\n      Y3 = Fp.mul(X3, Z3);\n      t1 = Fp.add(t0, t0); // step 25\n      t1 = Fp.add(t1, t0);\n      t2 = Fp.mul(a, t2);\n      t4 = Fp.mul(b3, t4);\n      t1 = Fp.add(t1, t2);\n      t2 = Fp.sub(t0, t2); // step 30\n      t2 = Fp.mul(a, t2);\n      t4 = Fp.add(t4, t2);\n      t0 = Fp.mul(t1, t4);\n      Y3 = Fp.add(Y3, t0);\n      t0 = Fp.mul(t5, t4); // step 35\n      X3 = Fp.mul(t3, X3);\n      X3 = Fp.sub(X3, t0);\n      t0 = Fp.mul(t3, t1);\n      Z3 = Fp.mul(t5, Z3);\n      Z3 = Fp.add(Z3, t0); // step 40\n      return new Point(X3, Y3, Z3);\n    }\n\n    subtract(other: Point) {\n      return this.add(other.negate());\n    }\n\n    private is0() {\n      return this.equals(Point.ZERO);\n    }\n    private wNAF(n: bigint): { p: Point; f: Point } {\n      return wnaf.wNAFCached(this, pointPrecomputes, n, (comp: Point[]) => {\n        const toInv = Fp.invertBatch(comp.map((p) => p.pz));\n        return comp.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n      });\n    }\n\n    /**\n     * Non-constant-time multiplication. Uses double-and-add algorithm.\n     * It's faster, but should only be used when you don't care about\n     * an exposed private key e.g. sig verification, which works over *public* keys.\n     */\n    multiplyUnsafe(n: bigint): Point {\n      const I = Point.ZERO;\n      if (n === _0n) return I;\n      assertGE(n); // Will throw on 0\n      if (n === _1n) return this;\n      const { endo } = CURVE;\n      if (!endo) return wnaf.unsafeLadder(this, n);\n\n      // Apply endomorphism\n      let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n      let k1p = I;\n      let k2p = I;\n      let d: Point = this;\n      while (k1 > _0n || k2 > _0n) {\n        if (k1 & _1n) k1p = k1p.add(d);\n        if (k2 & _1n) k2p = k2p.add(d);\n        d = d.double();\n        k1 >>= _1n;\n        k2 >>= _1n;\n      }\n      if (k1neg) k1p = k1p.negate();\n      if (k2neg) k2p = k2p.negate();\n      k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n      return k1p.add(k2p);\n    }\n\n    /**\n     * Constant time multiplication.\n     * Uses wNAF method. Windowed method may be 10% faster,\n     * but takes 2x longer to generate and consumes 2x memory.\n     * Uses precomputes when available.\n     * Uses endomorphism for Koblitz curves.\n     * @param scalar by which the point would be multiplied\n     * @returns New point\n     */\n    multiply(scalar: bigint): Point {\n      assertGE(scalar);\n      let n = scalar;\n      let point: Point, fake: Point; // Fake point is used to const-time mult\n      const { endo } = CURVE;\n      if (endo) {\n        const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n        let { p: k1p, f: f1p } = this.wNAF(k1);\n        let { p: k2p, f: f2p } = this.wNAF(k2);\n        k1p = wnaf.constTimeNegate(k1neg, k1p);\n        k2p = wnaf.constTimeNegate(k2neg, k2p);\n        k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n        point = k1p.add(k2p);\n        fake = f1p.add(f2p);\n      } else {\n        const { p, f } = this.wNAF(n);\n        point = p;\n        fake = f;\n      }\n      // Normalize `z` for both points, but return only real one\n      return Point.normalizeZ([point, fake])[0];\n    }\n\n    /**\n     * Efficiently calculate `aP + bQ`. Unsafe, can expose private key, if used incorrectly.\n     * Not using Strauss-Shamir trick: precomputation tables are faster.\n     * The trick could be useful if both P and Q are not G (not in our case).\n     * @returns non-zero affine point\n     */\n    multiplyAndAddUnsafe(Q: Point, a: bigint, b: bigint): Point | undefined {\n      const G = Point.BASE; // No Strauss-Shamir trick: we have 10% faster G precomputes\n      const mul = (\n        P: Point,\n        a: bigint // Select faster multiply() method\n      ) => (a === _0n || a === _1n || !P.equals(G) ? P.multiplyUnsafe(a) : P.multiply(a));\n      const sum = mul(this, a).add(mul(Q, b));\n      return sum.is0() ? undefined : sum;\n    }\n\n    // Converts Projective point to affine (x, y) coordinates.\n    // Can accept precomputed Z^-1 - for example, from invertBatch.\n    // (x, y, z) ∋ (x=x/z, y=y/z)\n    toAffine(iz?: T): AffinePoint<T> {\n      const { px: x, py: y, pz: z } = this;\n      const is0 = this.is0();\n      // If invZ was 0, we return zero point. However we still want to execute\n      // all operations, so we replace invZ with a random number, 1.\n      if (iz == null) iz = is0 ? Fp.ONE : Fp.inv(z);\n      const ax = Fp.mul(x, iz);\n      const ay = Fp.mul(y, iz);\n      const zz = Fp.mul(z, iz);\n      if (is0) return { x: Fp.ZERO, y: Fp.ZERO };\n      if (!Fp.eql(zz, Fp.ONE)) throw new Error('invZ was invalid');\n      return { x: ax, y: ay };\n    }\n    isTorsionFree(): boolean {\n      const { h: cofactor, isTorsionFree } = CURVE;\n      if (cofactor === _1n) return true; // No subgroups, always torsion-free\n      if (isTorsionFree) return isTorsionFree(Point, this);\n      throw new Error('isTorsionFree() has not been declared for the elliptic curve');\n    }\n    clearCofactor(): Point {\n      const { h: cofactor, clearCofactor } = CURVE;\n      if (cofactor === _1n) return this; // Fast-path\n      if (clearCofactor) return clearCofactor(Point, this) as Point;\n      return this.multiplyUnsafe(CURVE.h);\n    }\n\n    toRawBytes(isCompressed = true): Uint8Array {\n      this.assertValidity();\n      return toBytes(Point, this, isCompressed);\n    }\n\n    toHex(isCompressed = true): string {\n      return ut.bytesToHex(this.toRawBytes(isCompressed));\n    }\n  }\n  const _bits = CURVE.nBitLength;\n  const wnaf = wNAF(Point, CURVE.endo ? Math.ceil(_bits / 2) : _bits);\n  // Validate if generator point is on curve\n  return {\n    CURVE,\n    ProjectivePoint: Point as ProjConstructor<T>,\n    normPrivateKeyToScalar,\n    weierstrassEquation,\n    isWithinCurveOrder,\n  };\n}\n\n// Instance\nexport interface SignatureType {\n  readonly r: bigint;\n  readonly s: bigint;\n  readonly recovery?: number;\n  assertValidity(): void;\n  addRecoveryBit(recovery: number): RecoveredSignatureType;\n  hasHighS(): boolean;\n  normalizeS(): SignatureType;\n  recoverPublicKey(msgHash: Hex): ProjPointType<bigint>;\n  toCompactRawBytes(): Uint8Array;\n  toCompactHex(): string;\n  // DER-encoded\n  toDERRawBytes(isCompressed?: boolean): Uint8Array;\n  toDERHex(isCompressed?: boolean): string;\n}\nexport type RecoveredSignatureType = SignatureType & {\n  readonly recovery: number;\n};\n// Static methods\nexport type SignatureConstructor = {\n  new (r: bigint, s: bigint): SignatureType;\n  fromCompact(hex: Hex): SignatureType;\n  fromDER(hex: Hex): SignatureType;\n};\ntype SignatureLike = { r: bigint; s: bigint };\n\nexport type PubKey = Hex | ProjPointType<bigint>;\n\nexport type CurveType = BasicWCurve<bigint> & {\n  hash: CHash; // CHash not FHash because we need outputLen for DRBG\n  hmac: HmacFnSync;\n  randomBytes: (bytesLength?: number) => Uint8Array;\n  lowS?: boolean;\n  bits2int?: (bytes: Uint8Array) => bigint;\n  bits2int_modN?: (bytes: Uint8Array) => bigint;\n};\n\nfunction validateOpts(curve: CurveType) {\n  const opts = validateBasic(curve);\n  ut.validateObject(\n    opts,\n    {\n      hash: 'hash',\n      hmac: 'function',\n      randomBytes: 'function',\n    },\n    {\n      bits2int: 'function',\n      bits2int_modN: 'function',\n      lowS: 'boolean',\n    }\n  );\n  return Object.freeze({ lowS: true, ...opts } as const);\n}\n\nexport type CurveFn = {\n  CURVE: ReturnType<typeof validateOpts>;\n  getPublicKey: (privateKey: PrivKey, isCompressed?: boolean) => Uint8Array;\n  getSharedSecret: (privateA: PrivKey, publicB: Hex, isCompressed?: boolean) => Uint8Array;\n  sign: (msgHash: Hex, privKey: PrivKey, opts?: SignOpts) => RecoveredSignatureType;\n  verify: (signature: Hex | SignatureLike, msgHash: Hex, publicKey: Hex, opts?: VerOpts) => boolean;\n  ProjectivePoint: ProjConstructor<bigint>;\n  Signature: SignatureConstructor;\n  utils: {\n    normPrivateKeyToScalar: (key: PrivKey) => bigint;\n    isValidPrivateKey(privateKey: PrivKey): boolean;\n    randomPrivateKey: () => Uint8Array;\n    precompute: (windowSize?: number, point?: ProjPointType<bigint>) => ProjPointType<bigint>;\n  };\n};\n\nexport function weierstrass(curveDef: CurveType): CurveFn {\n  const CURVE = validateOpts(curveDef) as ReturnType<typeof validateOpts>;\n  const { Fp, n: CURVE_ORDER } = CURVE;\n  const compressedLen = Fp.BYTES + 1; // e.g. 33 for 32\n  const uncompressedLen = 2 * Fp.BYTES + 1; // e.g. 65 for 32\n\n  function isValidFieldElement(num: bigint): boolean {\n    return _0n < num && num < Fp.ORDER; // 0 is banned since it's not invertible FE\n  }\n  function modN(a: bigint) {\n    return mod.mod(a, CURVE_ORDER);\n  }\n  function invN(a: bigint) {\n    return mod.invert(a, CURVE_ORDER);\n  }\n\n  const {\n    ProjectivePoint: Point,\n    normPrivateKeyToScalar,\n    weierstrassEquation,\n    isWithinCurveOrder,\n  } = weierstrassPoints({\n    ...CURVE,\n    toBytes(_c, point, isCompressed: boolean): Uint8Array {\n      const a = point.toAffine();\n      const x = Fp.toBytes(a.x);\n      const cat = ut.concatBytes;\n      if (isCompressed) {\n        return cat(Uint8Array.from([point.hasEvenY() ? 0x02 : 0x03]), x);\n      } else {\n        return cat(Uint8Array.from([0x04]), x, Fp.toBytes(a.y));\n      }\n    },\n    fromBytes(bytes: Uint8Array) {\n      const len = bytes.length;\n      const head = bytes[0];\n      const tail = bytes.subarray(1);\n      // this.assertValidity() is done inside of fromHex\n      if (len === compressedLen && (head === 0x02 || head === 0x03)) {\n        const x = ut.bytesToNumberBE(tail);\n        if (!isValidFieldElement(x)) throw new Error('Point is not on curve');\n        const y2 = weierstrassEquation(x); // y² = x³ + ax + b\n        let y = Fp.sqrt(y2); // y = y² ^ (p+1)/4\n        const isYOdd = (y & _1n) === _1n;\n        // ECDSA\n        const isHeadOdd = (head & 1) === 1;\n        if (isHeadOdd !== isYOdd) y = Fp.neg(y);\n        return { x, y };\n      } else if (len === uncompressedLen && head === 0x04) {\n        const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n        const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n        return { x, y };\n      } else {\n        throw new Error(\n          `Point of length ${len} was invalid. Expected ${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes`\n        );\n      }\n    },\n  });\n  const numToNByteStr = (num: bigint): string =>\n    ut.bytesToHex(ut.numberToBytesBE(num, CURVE.nByteLength));\n\n  function isBiggerThanHalfOrder(number: bigint) {\n    const HALF = CURVE_ORDER >> _1n;\n    return number > HALF;\n  }\n\n  function normalizeS(s: bigint) {\n    return isBiggerThanHalfOrder(s) ? modN(-s) : s;\n  }\n  // slice bytes num\n  const slcNum = (b: Uint8Array, from: number, to: number) => ut.bytesToNumberBE(b.slice(from, to));\n\n  /**\n   * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\n   */\n  class Signature implements SignatureType {\n    constructor(readonly r: bigint, readonly s: bigint, readonly recovery?: number) {\n      this.assertValidity();\n    }\n\n    // pair (bytes of r, bytes of s)\n    static fromCompact(hex: Hex) {\n      const l = CURVE.nByteLength;\n      hex = ensureBytes('compactSignature', hex, l * 2);\n      return new Signature(slcNum(hex, 0, l), slcNum(hex, l, 2 * l));\n    }\n\n    // DER encoded ECDSA signature\n    // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n    static fromDER(hex: Hex) {\n      const { r, s } = DER.toSig(ensureBytes('DER', hex));\n      return new Signature(r, s);\n    }\n\n    assertValidity(): void {\n      // can use assertGE here\n      if (!isWithinCurveOrder(this.r)) throw new Error('r must be 0 < r < CURVE.n');\n      if (!isWithinCurveOrder(this.s)) throw new Error('s must be 0 < s < CURVE.n');\n    }\n\n    addRecoveryBit(recovery: number): RecoveredSignature {\n      return new Signature(this.r, this.s, recovery) as RecoveredSignature;\n    }\n\n    recoverPublicKey(msgHash: Hex): typeof Point.BASE {\n      const { r, s, recovery: rec } = this;\n      const h = bits2int_modN(ensureBytes('msgHash', msgHash)); // Truncate hash\n      if (rec == null || ![0, 1, 2, 3].includes(rec)) throw new Error('recovery id invalid');\n      const radj = rec === 2 || rec === 3 ? r + CURVE.n : r;\n      if (radj >= Fp.ORDER) throw new Error('recovery id 2 or 3 invalid');\n      const prefix = (rec & 1) === 0 ? '02' : '03';\n      const R = Point.fromHex(prefix + numToNByteStr(radj));\n      const ir = invN(radj); // r^-1\n      const u1 = modN(-h * ir); // -hr^-1\n      const u2 = modN(s * ir); // sr^-1\n      const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2); // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1)\n      if (!Q) throw new Error('point at infinify'); // unsafe is fine: no priv data leaked\n      Q.assertValidity();\n      return Q;\n    }\n\n    // Signatures should be low-s, to prevent malleability.\n    hasHighS(): boolean {\n      return isBiggerThanHalfOrder(this.s);\n    }\n\n    normalizeS() {\n      return this.hasHighS() ? new Signature(this.r, modN(-this.s), this.recovery) : this;\n    }\n\n    // DER-encoded\n    toDERRawBytes() {\n      return ut.hexToBytes(this.toDERHex());\n    }\n    toDERHex() {\n      return DER.hexFromSig({ r: this.r, s: this.s });\n    }\n\n    // padded bytes of r, then padded bytes of s\n    toCompactRawBytes() {\n      return ut.hexToBytes(this.toCompactHex());\n    }\n    toCompactHex() {\n      return numToNByteStr(this.r) + numToNByteStr(this.s);\n    }\n  }\n  type RecoveredSignature = Signature & { recovery: number };\n\n  const utils = {\n    isValidPrivateKey(privateKey: PrivKey) {\n      try {\n        normPrivateKeyToScalar(privateKey);\n        return true;\n      } catch (error) {\n        return false;\n      }\n    },\n    normPrivateKeyToScalar: normPrivateKeyToScalar,\n\n    /**\n     * Produces cryptographically secure private key from random of size\n     * (groupLen + ceil(groupLen / 2)) with modulo bias being negligible.\n     */\n    randomPrivateKey: (): Uint8Array => {\n      const length = mod.getMinHashLength(CURVE.n);\n      return mod.mapHashToField(CURVE.randomBytes(length), CURVE.n);\n    },\n\n    /**\n     * Creates precompute table for an arbitrary EC point. Makes point \"cached\".\n     * Allows to massively speed-up `point.multiply(scalar)`.\n     * @returns cached point\n     * @example\n     * const fast = utils.precompute(8, ProjectivePoint.fromHex(someonesPubKey));\n     * fast.multiply(privKey); // much faster ECDH now\n     */\n    precompute(windowSize = 8, point = Point.BASE): typeof Point.BASE {\n      point._setWindowSize(windowSize);\n      point.multiply(BigInt(3)); // 3 is arbitrary, just need any number here\n      return point;\n    },\n  };\n\n  /**\n   * Computes public key for a private key. Checks for validity of the private key.\n   * @param privateKey private key\n   * @param isCompressed whether to return compact (default), or full key\n   * @returns Public key, full when isCompressed=false; short when isCompressed=true\n   */\n  function getPublicKey(privateKey: PrivKey, isCompressed = true): Uint8Array {\n    return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n  }\n\n  /**\n   * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n   */\n  function isProbPub(item: PrivKey | PubKey): boolean {\n    const arr = item instanceof Uint8Array;\n    const str = typeof item === 'string';\n    const len = (arr || str) && (item as Hex).length;\n    if (arr) return len === compressedLen || len === uncompressedLen;\n    if (str) return len === 2 * compressedLen || len === 2 * uncompressedLen;\n    if (item instanceof Point) return true;\n    return false;\n  }\n\n  /**\n   * ECDH (Elliptic Curve Diffie Hellman).\n   * Computes shared public key from private key and public key.\n   * Checks: 1) private key validity 2) shared key is on-curve.\n   * Does NOT hash the result.\n   * @param privateA private key\n   * @param publicB different public key\n   * @param isCompressed whether to return compact (default), or full key\n   * @returns shared public key\n   */\n  function getSharedSecret(privateA: PrivKey, publicB: Hex, isCompressed = true): Uint8Array {\n    if (isProbPub(privateA)) throw new Error('first arg must be private key');\n    if (!isProbPub(publicB)) throw new Error('second arg must be public key');\n    const b = Point.fromHex(publicB); // check for being on-curve\n    return b.multiply(normPrivateKeyToScalar(privateA)).toRawBytes(isCompressed);\n  }\n\n  // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n  // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n  // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n  // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n  const bits2int =\n    CURVE.bits2int ||\n    function (bytes: Uint8Array): bigint {\n      // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n      // for some cases, since bytes.length * 8 is not actual bitLength.\n      const num = ut.bytesToNumberBE(bytes); // check for == u8 done here\n      const delta = bytes.length * 8 - CURVE.nBitLength; // truncate to nBitLength leftmost bits\n      return delta > 0 ? num >> BigInt(delta) : num;\n    };\n  const bits2int_modN =\n    CURVE.bits2int_modN ||\n    function (bytes: Uint8Array): bigint {\n      return modN(bits2int(bytes)); // can't use bytesToNumberBE here\n    };\n  // NOTE: pads output with zero as per spec\n  const ORDER_MASK = ut.bitMask(CURVE.nBitLength);\n  /**\n   * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\n   */\n  function int2octets(num: bigint): Uint8Array {\n    if (typeof num !== 'bigint') throw new Error('bigint expected');\n    if (!(_0n <= num && num < ORDER_MASK))\n      throw new Error(`bigint expected < 2^${CURVE.nBitLength}`);\n    // works with order, can have different size than numToField!\n    return ut.numberToBytesBE(num, CURVE.nByteLength);\n  }\n\n  // Steps A, D of RFC6979 3.2\n  // Creates RFC6979 seed; converts msg/privKey to numbers.\n  // Used only in sign, not in verify.\n  // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order, this will be wrong at least for P521.\n  // Also it can be bigger for P224 + SHA256\n  function prepSig(msgHash: Hex, privateKey: PrivKey, opts = defaultSigOpts) {\n    if (['recovered', 'canonical'].some((k) => k in opts))\n      throw new Error('sign() legacy options not supported');\n    const { hash, randomBytes } = CURVE;\n    let { lowS, prehash, extraEntropy: ent } = opts; // generates low-s sigs by default\n    if (lowS == null) lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\n    msgHash = ensureBytes('msgHash', msgHash);\n    if (prehash) msgHash = ensureBytes('prehashed msgHash', hash(msgHash));\n\n    // We can't later call bits2octets, since nested bits2int is broken for curves\n    // with nBitLength % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n    // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n    const h1int = bits2int_modN(msgHash);\n    const d = normPrivateKeyToScalar(privateKey); // validate private key, convert to bigint\n    const seedArgs = [int2octets(d), int2octets(h1int)];\n    // extraEntropy. RFC6979 3.6: additional k' (optional).\n    if (ent != null) {\n      // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n      const e = ent === true ? randomBytes(Fp.BYTES) : ent; // generate random bytes OR pass as-is\n      seedArgs.push(ensureBytes('extraEntropy', e)); // check for being bytes\n    }\n    const seed = ut.concatBytes(...seedArgs); // Step D of RFC6979 3.2\n    const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n    // Converts signature params into point w r/s, checks result for validity.\n    function k2sig(kBytes: Uint8Array): RecoveredSignature | undefined {\n      // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n      const k = bits2int(kBytes); // Cannot use fields methods, since it is group element\n      if (!isWithinCurveOrder(k)) return; // Important: all mod() calls here must be done over N\n      const ik = invN(k); // k^-1 mod n\n      const q = Point.BASE.multiply(k).toAffine(); // q = Gk\n      const r = modN(q.x); // r = q.x mod n\n      if (r === _0n) return;\n      // Can use scalar blinding b^-1(bm + bdr) where b ∈ [1,q−1] according to\n      // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n      // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n      const s = modN(ik * modN(m + r * d)); // Not using blinding here\n      if (s === _0n) return;\n      let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n      let normS = s;\n      if (lowS && isBiggerThanHalfOrder(s)) {\n        normS = normalizeS(s); // if lowS was passed, ensure s is always\n        recovery ^= 1; // // in the bottom half of N\n      }\n      return new Signature(r, normS, recovery) as RecoveredSignature; // use normS, not s\n    }\n    return { seed, k2sig };\n  }\n  const defaultSigOpts: SignOpts = { lowS: CURVE.lowS, prehash: false };\n  const defaultVerOpts: VerOpts = { lowS: CURVE.lowS, prehash: false };\n\n  /**\n   * Signs message hash with a private key.\n   * ```\n   * sign(m, d, k) where\n   *   (x, y) = G × k\n   *   r = x mod n\n   *   s = (m + dr)/k mod n\n   * ```\n   * @param msgHash NOT message. msg needs to be hashed to `msgHash`, or use `prehash`.\n   * @param privKey private key\n   * @param opts lowS for non-malleable sigs. extraEntropy for mixing randomness into k. prehash will hash first arg.\n   * @returns signature with recovery param\n   */\n  function sign(msgHash: Hex, privKey: PrivKey, opts = defaultSigOpts): RecoveredSignature {\n    const { seed, k2sig } = prepSig(msgHash, privKey, opts); // Steps A, D of RFC6979 3.2.\n    const C = CURVE;\n    const drbg = ut.createHmacDrbg<RecoveredSignature>(C.hash.outputLen, C.nByteLength, C.hmac);\n    return drbg(seed, k2sig); // Steps B, C, D, E, F, G\n  }\n\n  // Enable precomputes. Slows down first publicKey computation by 20ms.\n  Point.BASE._setWindowSize(8);\n  // utils.precompute(8, ProjectivePoint.BASE)\n\n  /**\n   * Verifies a signature against message hash and public key.\n   * Rejects lowS signatures by default: to override,\n   * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n   *\n   * ```\n   * verify(r, s, h, P) where\n   *   U1 = hs^-1 mod n\n   *   U2 = rs^-1 mod n\n   *   R = U1⋅G - U2⋅P\n   *   mod(R.x, n) == r\n   * ```\n   */\n  function verify(\n    signature: Hex | SignatureLike,\n    msgHash: Hex,\n    publicKey: Hex,\n    opts = defaultVerOpts\n  ): boolean {\n    const sg = signature;\n    msgHash = ensureBytes('msgHash', msgHash);\n    publicKey = ensureBytes('publicKey', publicKey);\n    if ('strict' in opts) throw new Error('options.strict was renamed to lowS');\n    const { lowS, prehash } = opts;\n\n    let _sig: Signature | undefined = undefined;\n    let P: ProjPointType<bigint>;\n    try {\n      if (typeof sg === 'string' || sg instanceof Uint8Array) {\n        // Signature can be represented in 2 ways: compact (2*nByteLength) & DER (variable-length).\n        // Since DER can also be 2*nByteLength bytes, we check for it first.\n        try {\n          _sig = Signature.fromDER(sg);\n        } catch (derError) {\n          if (!(derError instanceof DER.Err)) throw derError;\n          _sig = Signature.fromCompact(sg);\n        }\n      } else if (typeof sg === 'object' && typeof sg.r === 'bigint' && typeof sg.s === 'bigint') {\n        const { r, s } = sg;\n        _sig = new Signature(r, s);\n      } else {\n        throw new Error('PARSE');\n      }\n      P = Point.fromHex(publicKey);\n    } catch (error) {\n      if ((error as Error).message === 'PARSE')\n        throw new Error(`signature must be Signature instance, Uint8Array or hex string`);\n      return false;\n    }\n    if (lowS && _sig.hasHighS()) return false;\n    if (prehash) msgHash = CURVE.hash(msgHash);\n    const { r, s } = _sig;\n    const h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\n    const is = invN(s); // s^-1\n    const u1 = modN(h * is); // u1 = hs^-1 mod n\n    const u2 = modN(r * is); // u2 = rs^-1 mod n\n    const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2)?.toAffine(); // R = u1⋅G + u2⋅P\n    if (!R) return false;\n    const v = modN(R.x);\n    return v === r;\n  }\n  return {\n    CURVE,\n    getPublicKey,\n    getSharedSecret,\n    sign,\n    verify,\n    ProjectivePoint: Point,\n    Signature,\n    utils,\n  };\n}\n\n/**\n * Implementation of the Shallue and van de Woestijne method for any weierstrass curve.\n * TODO: check if there is a way to merge this with uvRatio in Edwards; move to modular.\n * b = True and y = sqrt(u / v) if (u / v) is square in F, and\n * b = False and y = sqrt(Z * (u / v)) otherwise.\n * @param Fp\n * @param Z\n * @returns\n */\nexport function SWUFpSqrtRatio<T>(Fp: mod.IField<T>, Z: T) {\n  // Generic implementation\n  const q = Fp.ORDER;\n  let l = _0n;\n  for (let o = q - _1n; o % _2n === _0n; o /= _2n) l += _1n;\n  const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n  // We need 2n ** c1 and 2n ** (c1-1). We can't use **; but we can use <<.\n  // 2n ** c1 == 2n << (c1-1)\n  const _2n_pow_c1_1 = _2n << (c1 - _1n - _1n);\n  const _2n_pow_c1 = _2n_pow_c1_1 * _2n;\n  const c2 = (q - _1n) / _2n_pow_c1; // 2. c2 = (q - 1) / (2^c1)  # Integer arithmetic\n  const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n  const c4 = _2n_pow_c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n  const c5 = _2n_pow_c1_1; // 5. c5 = 2^(c1 - 1)                  # Integer arithmetic\n  const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n  const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n  let sqrtRatio = (u: T, v: T): { isValid: boolean; value: T } => {\n    let tv1 = c6; // 1. tv1 = c6\n    let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n    let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n    tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n    let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n    tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n    tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n    tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n    tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n    let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n    tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n    let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n    tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n    tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n    tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n    tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n    // 17. for i in (c1, c1 - 1, ..., 2):\n    for (let i = c1; i > _1n; i--) {\n      let tv5 = i - _2n; // 18.    tv5 = i - 2\n      tv5 = _2n << (tv5 - _1n); // 19.    tv5 = 2^tv5\n      let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n      const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n      tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n      tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n      tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n      tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n      tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n    }\n    return { isValid: isQR, value: tv3 };\n  };\n  if (Fp.ORDER % _4n === _3n) {\n    // sqrt_ratio_3mod4(u, v)\n    const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n    const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n    sqrtRatio = (u: T, v: T) => {\n      let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n      const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n      tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n      let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n      y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n      const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n      const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n      const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n      let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n      return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n    };\n  }\n  // No curves uses that\n  // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n  return sqrtRatio;\n}\n/**\n * Simplified Shallue-van de Woestijne-Ulas Method\n * https://www.rfc-editor.org/rfc/rfc9380#section-6.6.2\n */\nexport function mapToCurveSimpleSWU<T>(\n  Fp: mod.IField<T>,\n  opts: {\n    A: T;\n    B: T;\n    Z: T;\n  }\n) {\n  mod.validateField(Fp);\n  if (!Fp.isValid(opts.A) || !Fp.isValid(opts.B) || !Fp.isValid(opts.Z))\n    throw new Error('mapToCurveSimpleSWU: invalid opts');\n  const sqrtRatio = SWUFpSqrtRatio(Fp, opts.Z);\n  if (!Fp.isOdd) throw new Error('Fp.isOdd is not implemented!');\n  // Input: u, an element of F.\n  // Output: (x, y), a point on E.\n  return (u: T): { x: T; y: T } => {\n    // prettier-ignore\n    let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n    tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n    tv1 = Fp.mul(tv1, opts.Z); // 2.  tv1 = Z * tv1\n    tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n    tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n    tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n    tv3 = Fp.mul(tv3, opts.B); // 6.  tv3 = B * tv3\n    tv4 = Fp.cmov(opts.Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n    tv4 = Fp.mul(tv4, opts.A); // 8.  tv4 = A * tv4\n    tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n    tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n    tv5 = Fp.mul(tv6, opts.A); // 11. tv5 = A * tv6\n    tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n    tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n    tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n    tv5 = Fp.mul(tv6, opts.B); // 15. tv5 = B * tv6\n    tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n    x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n    const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n    y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n    y = Fp.mul(y, value); // 20.   y = y * y1\n    x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n    y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n    const e1 = Fp.isOdd!(u) === Fp.isOdd!(y); // 23.  e1 = sgn0(u) == sgn0(y)\n    y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n    x = Fp.div(x, tv4); // 25.   x = x / tv4\n    return { x, y };\n  };\n}\n","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { hmac } from '@noble/hashes/hmac';\nimport { concatBytes, randomBytes } from '@noble/hashes/utils';\nimport { weierstrass, CurveType } from './abstract/weierstrass.js';\nimport { CHash } from './abstract/utils.js';\n\n// connects noble-curves to noble-hashes\nexport function getHash(hash: CHash) {\n  return {\n    hash,\n    hmac: (key: Uint8Array, ...msgs: Uint8Array[]) => hmac(hash, key, concatBytes(...msgs)),\n    randomBytes,\n  };\n}\n// Same API as @noble/hashes, with ability to create curve with custom hash\ntype CurveDef = Readonly<Omit<CurveType, 'hash' | 'hmac' | 'randomBytes'>>;\nexport function createCurve(curveDef: CurveDef, defHash: CHash) {\n  const create = (hash: CHash) => weierstrass({ ...curveDef, ...getHash(hash) });\n  return Object.freeze({ ...create(defHash), create });\n}\n","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha256 } from '@noble/hashes/sha256';\nimport { randomBytes } from '@noble/hashes/utils';\nimport { Field, mod, pow2 } from './abstract/modular.js';\nimport { ProjPointType as PointType, mapToCurveSimpleSWU } from './abstract/weierstrass.js';\nimport type { Hex, PrivKey } from './abstract/utils.js';\nimport { bytesToNumberBE, concatBytes, ensureBytes, numberToBytesBE } from './abstract/utils.js';\nimport { createHasher, isogenyMap } from './abstract/hash-to-curve.js';\nimport { createCurve } from './_shortw_utils.js';\n\nconst secp256k1P = BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f');\nconst secp256k1N = BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141');\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst divNearest = (a: bigint, b: bigint) => (a + b / _2n) / b;\n\n/**\n * √n = n^((p+1)/4) for fields p = 3 mod 4. We unwrap the loop and multiply bit-by-bit.\n * (P+1n/4n).toString(2) would produce bits [223x 1, 0, 22x 1, 4x 0, 11, 00]\n */\nfunction sqrtMod(y: bigint): bigint {\n  const P = secp256k1P;\n  // prettier-ignore\n  const _3n = BigInt(3), _6n = BigInt(6), _11n = BigInt(11), _22n = BigInt(22);\n  // prettier-ignore\n  const _23n = BigInt(23), _44n = BigInt(44), _88n = BigInt(88);\n  const b2 = (y * y * y) % P; // x^3, 11\n  const b3 = (b2 * b2 * y) % P; // x^7\n  const b6 = (pow2(b3, _3n, P) * b3) % P;\n  const b9 = (pow2(b6, _3n, P) * b3) % P;\n  const b11 = (pow2(b9, _2n, P) * b2) % P;\n  const b22 = (pow2(b11, _11n, P) * b11) % P;\n  const b44 = (pow2(b22, _22n, P) * b22) % P;\n  const b88 = (pow2(b44, _44n, P) * b44) % P;\n  const b176 = (pow2(b88, _88n, P) * b88) % P;\n  const b220 = (pow2(b176, _44n, P) * b44) % P;\n  const b223 = (pow2(b220, _3n, P) * b3) % P;\n  const t1 = (pow2(b223, _23n, P) * b22) % P;\n  const t2 = (pow2(t1, _6n, P) * b2) % P;\n  const root = pow2(t2, _2n, P);\n  if (!Fp.eql(Fp.sqr(root), y)) throw new Error('Cannot find square root');\n  return root;\n}\n\nconst Fp = Field(secp256k1P, undefined, undefined, { sqrt: sqrtMod });\n\nexport const secp256k1 = createCurve(\n  {\n    a: BigInt(0), // equation params: a, b\n    b: BigInt(7), // Seem to be rigid: bitcointalk.org/index.php?topic=289795.msg3183975#msg3183975\n    Fp, // Field's prime: 2n**256n - 2n**32n - 2n**9n - 2n**8n - 2n**7n - 2n**6n - 2n**4n - 1n\n    n: secp256k1N, // Curve order, total count of valid points in the field\n    // Base point (x, y) aka generator point\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    h: BigInt(1), // Cofactor\n    lowS: true, // Allow only low-S signatures by default in sign() and verify()\n    /**\n     * secp256k1 belongs to Koblitz curves: it has efficiently computable endomorphism.\n     * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n     * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n     * Explanation: https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066\n     */\n    endo: {\n      beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n      splitScalar: (k: bigint) => {\n        const n = secp256k1N;\n        const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n        const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n        const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n        const b2 = a1;\n        const POW_2_128 = BigInt('0x100000000000000000000000000000000'); // (2n**128n).toString(16)\n\n        const c1 = divNearest(b2 * k, n);\n        const c2 = divNearest(-b1 * k, n);\n        let k1 = mod(k - c1 * a1 - c2 * a2, n);\n        let k2 = mod(-c1 * b1 - c2 * b2, n);\n        const k1neg = k1 > POW_2_128;\n        const k2neg = k2 > POW_2_128;\n        if (k1neg) k1 = n - k1;\n        if (k2neg) k2 = n - k2;\n        if (k1 > POW_2_128 || k2 > POW_2_128) {\n          throw new Error('splitScalar: Endomorphism failed, k=' + k);\n        }\n        return { k1neg, k1, k2neg, k2 };\n      },\n    },\n  },\n  sha256\n);\n\n// Schnorr signatures are superior to ECDSA from above. Below is Schnorr-specific BIP0340 code.\n// https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\nconst _0n = BigInt(0);\nconst fe = (x: bigint) => typeof x === 'bigint' && _0n < x && x < secp256k1P;\nconst ge = (x: bigint) => typeof x === 'bigint' && _0n < x && x < secp256k1N;\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\nconst TAGGED_HASH_PREFIXES: { [tag: string]: Uint8Array } = {};\nfunction taggedHash(tag: string, ...messages: Uint8Array[]): Uint8Array {\n  let tagP = TAGGED_HASH_PREFIXES[tag];\n  if (tagP === undefined) {\n    const tagH = sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n    tagP = concatBytes(tagH, tagH);\n    TAGGED_HASH_PREFIXES[tag] = tagP;\n  }\n  return sha256(concatBytes(tagP, ...messages));\n}\n\n// ECDSA compact points are 33-byte. Schnorr is 32: we strip first byte 0x02 or 0x03\nconst pointToBytes = (point: PointType<bigint>) => point.toRawBytes(true).slice(1);\nconst numTo32b = (n: bigint) => numberToBytesBE(n, 32);\nconst modP = (x: bigint) => mod(x, secp256k1P);\nconst modN = (x: bigint) => mod(x, secp256k1N);\nconst Point = secp256k1.ProjectivePoint;\nconst GmulAdd = (Q: PointType<bigint>, a: bigint, b: bigint) =>\n  Point.BASE.multiplyAndAddUnsafe(Q, a, b);\n\n// Calculate point, scalar and bytes\nfunction schnorrGetExtPubKey(priv: PrivKey) {\n  let d_ = secp256k1.utils.normPrivateKeyToScalar(priv); // same method executed in fromPrivateKey\n  let p = Point.fromPrivateKey(d_); // P = d'⋅G; 0 < d' < n check is done inside\n  const scalar = p.hasEvenY() ? d_ : modN(-d_);\n  return { scalar: scalar, bytes: pointToBytes(p) };\n}\n/**\n * lift_x from BIP340. Convert 32-byte x coordinate to elliptic curve point.\n * @returns valid point checked for being on-curve\n */\nfunction lift_x(x: bigint): PointType<bigint> {\n  if (!fe(x)) throw new Error('bad x: need 0 < x < p'); // Fail if x ≥ p.\n  const xx = modP(x * x);\n  const c = modP(xx * x + BigInt(7)); // Let c = x³ + 7 mod p.\n  let y = sqrtMod(c); // Let y = c^(p+1)/4 mod p.\n  if (y % _2n !== _0n) y = modP(-y); // Return the unique point P such that x(P) = x and\n  const p = new Point(x, y, _1n); // y(P) = y if y mod 2 = 0 or y(P) = p-y otherwise.\n  p.assertValidity();\n  return p;\n}\n/**\n * Create tagged hash, convert it to bigint, reduce modulo-n.\n */\nfunction challenge(...args: Uint8Array[]): bigint {\n  return modN(bytesToNumberBE(taggedHash('BIP0340/challenge', ...args)));\n}\n\n/**\n * Schnorr public key is just `x` coordinate of Point as per BIP340.\n */\nfunction schnorrGetPublicKey(privateKey: Hex): Uint8Array {\n  return schnorrGetExtPubKey(privateKey).bytes; // d'=int(sk). Fail if d'=0 or d'≥n. Ret bytes(d'⋅G)\n}\n\n/**\n * Creates Schnorr signature as per BIP340. Verifies itself before returning anything.\n * auxRand is optional and is not the sole source of k generation: bad CSPRNG won't be dangerous.\n */\nfunction schnorrSign(\n  message: Hex,\n  privateKey: PrivKey,\n  auxRand: Hex = randomBytes(32)\n): Uint8Array {\n  const m = ensureBytes('message', message);\n  const { bytes: px, scalar: d } = schnorrGetExtPubKey(privateKey); // checks for isWithinCurveOrder\n  const a = ensureBytes('auxRand', auxRand, 32); // Auxiliary random data a: a 32-byte array\n  const t = numTo32b(d ^ bytesToNumberBE(taggedHash('BIP0340/aux', a))); // Let t be the byte-wise xor of bytes(d) and hash/aux(a)\n  const rand = taggedHash('BIP0340/nonce', t, px, m); // Let rand = hash/nonce(t || bytes(P) || m)\n  const k_ = modN(bytesToNumberBE(rand)); // Let k' = int(rand) mod n\n  if (k_ === _0n) throw new Error('sign failed: k is zero'); // Fail if k' = 0.\n  const { bytes: rx, scalar: k } = schnorrGetExtPubKey(k_); // Let R = k'⋅G.\n  const e = challenge(rx, px, m); // Let e = int(hash/challenge(bytes(R) || bytes(P) || m)) mod n.\n  const sig = new Uint8Array(64); // Let sig = bytes(R) || bytes((k + ed) mod n).\n  sig.set(rx, 0);\n  sig.set(numTo32b(modN(k + e * d)), 32);\n  // If Verify(bytes(P), m, sig) (see below) returns failure, abort\n  if (!schnorrVerify(sig, m, px)) throw new Error('sign: Invalid signature produced');\n  return sig;\n}\n\n/**\n * Verifies Schnorr signature.\n * Will swallow errors & return false except for initial type validation of arguments.\n */\nfunction schnorrVerify(signature: Hex, message: Hex, publicKey: Hex): boolean {\n  const sig = ensureBytes('signature', signature, 64);\n  const m = ensureBytes('message', message);\n  const pub = ensureBytes('publicKey', publicKey, 32);\n  try {\n    const P = lift_x(bytesToNumberBE(pub)); // P = lift_x(int(pk)); fail if that fails\n    const r = bytesToNumberBE(sig.subarray(0, 32)); // Let r = int(sig[0:32]); fail if r ≥ p.\n    if (!fe(r)) return false;\n    const s = bytesToNumberBE(sig.subarray(32, 64)); // Let s = int(sig[32:64]); fail if s ≥ n.\n    if (!ge(s)) return false;\n    const e = challenge(numTo32b(r), pointToBytes(P), m); // int(challenge(bytes(r)||bytes(P)||m))%n\n    const R = GmulAdd(P, s, modN(-e)); // R = s⋅G - e⋅P\n    if (!R || !R.hasEvenY() || R.toAffine().x !== r) return false; // -eP == (n-e)P\n    return true; // Fail if is_infinite(R) / not has_even_y(R) / x(R) ≠ r.\n  } catch (error) {\n    return false;\n  }\n}\n\nexport const schnorr = /* @__PURE__ */ (() => ({\n  getPublicKey: schnorrGetPublicKey,\n  sign: schnorrSign,\n  verify: schnorrVerify,\n  utils: {\n    randomPrivateKey: secp256k1.utils.randomPrivateKey,\n    lift_x,\n    pointToBytes,\n    numberToBytesBE,\n    bytesToNumberBE,\n    taggedHash,\n    mod,\n  },\n}))();\n\nconst isoMap = /* @__PURE__ */ (() =>\n  isogenyMap(\n    Fp,\n    [\n      // xNum\n      [\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7',\n        '0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581',\n        '0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262',\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c',\n      ],\n      // xDen\n      [\n        '0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b',\n        '0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n      ],\n      // yNum\n      [\n        '0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c',\n        '0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3',\n        '0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931',\n        '0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84',\n      ],\n      // yDen\n      [\n        '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b',\n        '0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573',\n        '0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n      ],\n    ].map((i) => i.map((j) => BigInt(j))) as [bigint[], bigint[], bigint[], bigint[]]\n  ))();\nconst mapSWU = /* @__PURE__ */ (() =>\n  mapToCurveSimpleSWU(Fp, {\n    A: BigInt('0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533'),\n    B: BigInt('1771'),\n    Z: Fp.create(BigInt('-11')),\n  }))();\nconst htf = /* @__PURE__ */ (() =>\n  createHasher(\n    secp256k1.ProjectivePoint,\n    (scalars: bigint[]) => {\n      const { x, y } = mapSWU(Fp.create(scalars[0]));\n      return isoMap(x, y);\n    },\n    {\n      DST: 'secp256k1_XMD:SHA-256_SSWU_RO_',\n      encodeDST: 'secp256k1_XMD:SHA-256_SSWU_NU_',\n      p: Fp.ORDER,\n      m: 1,\n      k: 128,\n      expand: 'xmd',\n      hash: sha256,\n    }\n  ))();\nexport const hashToCurve = /* @__PURE__ */ (() => htf.hashToCurve)();\nexport const encodeToCurve = /* @__PURE__ */ (() => htf.encodeToCurve)();\n","/**\n *  Add details about signing here.\n *\n *  @_subsection: api/crypto:Signing  [about-signing]\n */\n\nimport { secp256k1 } from \"@noble/curves/secp256k1\";\n\nimport {\n    concat, dataLength, getBytes, getBytesCopy, hexlify, toBeHex,\n    assertArgument\n} from \"../utils/index.js\";\n\nimport { Signature } from \"./signature.js\";\n\nimport type { BytesLike } from \"../utils/index.js\";\n\nimport type { SignatureLike } from \"./index.js\";\n\n\n/**\n *  A **SigningKey** provides high-level access to the elliptic curve\n *  cryptography (ECC) operations and key management.\n */\nexport class SigningKey {\n    #privateKey: string;\n\n    /**\n     *  Creates a new **SigningKey** for %%privateKey%%.\n     */\n    constructor(privateKey: BytesLike) {\n        assertArgument(dataLength(privateKey) === 32, \"invalid private key\", \"privateKey\", \"[REDACTED]\");\n        this.#privateKey = hexlify(privateKey);\n    }\n\n    /**\n     *  The private key.\n     */\n    get privateKey(): string { return this.#privateKey; }\n\n    /**\n     *  The uncompressed public key.\n     *\n     * This will always begin with the prefix ``0x04`` and be 132\n     * characters long (the ``0x`` prefix and 130 hexadecimal nibbles).\n     */\n    get publicKey(): string { return SigningKey.computePublicKey(this.#privateKey); }\n\n    /**\n     *  The compressed public key.\n     *\n     *  This will always begin with either the prefix ``0x02`` or ``0x03``\n     *  and be 68 characters long (the ``0x`` prefix and 33 hexadecimal\n     *  nibbles)\n     */\n    get compressedPublicKey(): string { return SigningKey.computePublicKey(this.#privateKey, true); }\n\n    /**\n     *  Return the signature of the signed %%digest%%.\n     */\n    sign(digest: BytesLike): Signature {\n        assertArgument(dataLength(digest) === 32, \"invalid digest length\", \"digest\", digest);\n\n        const sig = secp256k1.sign(getBytesCopy(digest), getBytesCopy(this.#privateKey), {\n            lowS: true\n        });\n\n        return Signature.from({\n            r: toBeHex(sig.r, 32),\n            s: toBeHex(sig.s, 32),\n            v: (sig.recovery ? 0x1c: 0x1b)\n        });\n    }\n\n    /**\n     *  Returns the [[link-wiki-ecdh]] shared secret between this\n     *  private key and the %%other%% key.\n     *\n     *  The %%other%% key may be any type of key, a raw public key,\n     *  a compressed/uncompressed pubic key or aprivate key.\n     *\n     *  Best practice is usually to use a cryptographic hash on the\n     *  returned value before using it as a symetric secret.\n     *\n     *  @example:\n     *    sign1 = new SigningKey(id(\"some-secret-1\"))\n     *    sign2 = new SigningKey(id(\"some-secret-2\"))\n     *\n     *    // Notice that privA.computeSharedSecret(pubB)...\n     *    sign1.computeSharedSecret(sign2.publicKey)\n     *    //_result:\n     *\n     *    // ...is equal to privB.computeSharedSecret(pubA).\n     *    sign2.computeSharedSecret(sign1.publicKey)\n     *    //_result:\n     */\n    computeSharedSecret(other: BytesLike): string {\n        const pubKey = SigningKey.computePublicKey(other);\n        return hexlify(secp256k1.getSharedSecret(getBytesCopy(this.#privateKey), getBytes(pubKey), false));\n    }\n\n    /**\n     *  Compute the public key for %%key%%, optionally %%compressed%%.\n     *\n     *  The %%key%% may be any type of key, a raw public key, a\n     *  compressed/uncompressed public key or private key.\n     *\n     *  @example:\n     *    sign = new SigningKey(id(\"some-secret\"));\n     *\n     *    // Compute the uncompressed public key for a private key\n     *    SigningKey.computePublicKey(sign.privateKey)\n     *    //_result:\n     *\n     *    // Compute the compressed public key for a private key\n     *    SigningKey.computePublicKey(sign.privateKey, true)\n     *    //_result:\n     *\n     *    // Compute the uncompressed public key\n     *    SigningKey.computePublicKey(sign.publicKey, false);\n     *    //_result:\n     *\n     *    // Compute the Compressed a public key\n     *    SigningKey.computePublicKey(sign.publicKey, true);\n     *    //_result:\n     */\n    static computePublicKey(key: BytesLike, compressed?: boolean): string {\n        let bytes = getBytes(key, \"key\");\n\n        // private key\n        if (bytes.length === 32) {\n            const pubKey = secp256k1.getPublicKey(bytes, !!compressed);\n            return hexlify(pubKey);\n        }\n\n        // raw public key; use uncompressed key with 0x04 prefix\n        if (bytes.length === 64) {\n            const pub = new Uint8Array(65);\n            pub[0] = 0x04;\n            pub.set(bytes, 1);\n            bytes = pub;\n        }\n\n        const point = secp256k1.ProjectivePoint.fromHex(bytes);\n        return hexlify(point.toRawBytes(compressed));\n    }\n\n    /**\n     *  Returns the public key for the private key which produced the\n     *  %%signature%% for the given %%digest%%.\n     *\n     *  @example:\n     *    key = new SigningKey(id(\"some-secret\"))\n     *    digest = id(\"hello world\")\n     *    sig = key.sign(digest)\n     *\n     *    // Notice the signer public key...\n     *    key.publicKey\n     *    //_result:\n     *\n     *    // ...is equal to the recovered public key\n     *    SigningKey.recoverPublicKey(digest, sig)\n     *    //_result:\n     *\n     */\n    static recoverPublicKey(digest: BytesLike, signature: SignatureLike): string {\n        assertArgument(dataLength(digest) === 32, \"invalid digest length\", \"digest\", digest);\n\n        const sig = Signature.from(signature);\n\n        let secpSig = secp256k1.Signature.fromCompact(getBytesCopy(concat([ sig.r, sig.s ])));\n        secpSig = secpSig.addRecoveryBit(sig.yParity);\n\n        const pubKey = secpSig.recoverPublicKey(getBytesCopy(digest));\n        assertArgument(pubKey != null, \"invalid signature for digest\", \"signature\", signature);\n\n        return \"0x\" + pubKey.toHex(false);\n    }\n\n    /**\n     *  Returns the point resulting from adding the ellipic curve points\n     *  %%p0%% and %%p1%%.\n     *\n     *  This is not a common function most developers should require, but\n     *  can be useful for certain privacy-specific techniques.\n     *\n     *  For example, it is used by [[HDNodeWallet]] to compute child\n     *  addresses from parent public keys and chain codes.\n     */\n    static addPoints(p0: BytesLike, p1: BytesLike, compressed?: boolean): string {\n        const pub0 = secp256k1.ProjectivePoint.fromHex(SigningKey.computePublicKey(p0).substring(2));\n        const pub1 = secp256k1.ProjectivePoint.fromHex(SigningKey.computePublicKey(p1).substring(2));\n        return \"0x\" + pub0.add(pub1).toHex(!!compressed)\n    }\n}\n\n","//See: https://github.com/ethereum/wiki/wiki/RLP\n\nimport { hexlify } from \"./data.js\";\nimport { assert, assertArgument } from \"./errors.js\";\nimport { getBytes } from \"./data.js\";\n\nimport type { BytesLike, RlpStructuredData } from \"./index.js\";\n\n\nfunction hexlifyByte(value: number): string {\n    let result = value.toString(16);\n    while (result.length < 2) { result = \"0\" + result; }\n    return \"0x\" + result;\n}\n\nfunction unarrayifyInteger(data: Uint8Array, offset: number, length: number): number {\n    let result = 0;\n    for (let i = 0; i < length; i++) {\n        result = (result * 256) + data[offset + i];\n    }\n    return result;\n}\n\ntype Decoded = {\n    result: any;\n    consumed: number;\n};\n\nfunction _decodeChildren(data: Uint8Array, offset: number, childOffset: number, length: number): Decoded {\n    const result: Array<any> = [];\n\n    while (childOffset < offset + 1 + length) {\n        const decoded = _decode(data, childOffset);\n\n        result.push(decoded.result);\n\n        childOffset += decoded.consumed;\n        assert(childOffset <= offset + 1 + length, \"child data too short\", \"BUFFER_OVERRUN\", {\n            buffer: data, length, offset\n        });\n    }\n\n    return {consumed: (1 + length), result: result};\n}\n\n// returns { consumed: number, result: Object }\nfunction _decode(data: Uint8Array, offset: number): { consumed: number, result: any } {\n    assert(data.length !== 0, \"data too short\", \"BUFFER_OVERRUN\", {\n        buffer: data, length: 0, offset: 1\n    });\n\n    const checkOffset = (offset: number) => {\n        assert(offset <= data.length, \"data short segment too short\", \"BUFFER_OVERRUN\", {\n            buffer: data, length: data.length, offset\n        });\n    };\n\n    // Array with extra length prefix\n    if (data[offset] >= 0xf8) {\n        const lengthLength = data[offset] - 0xf7;\n        checkOffset(offset + 1 + lengthLength);\n\n        const length = unarrayifyInteger(data, offset + 1, lengthLength);\n        checkOffset(offset + 1 + lengthLength + length);\n\n        return _decodeChildren(data, offset, offset + 1 + lengthLength, lengthLength + length);\n\n    } else if (data[offset] >= 0xc0) {\n        const length = data[offset] - 0xc0;\n        checkOffset(offset + 1 + length);\n\n        return _decodeChildren(data, offset, offset + 1, length);\n\n    } else if (data[offset] >= 0xb8) {\n        const lengthLength = data[offset] - 0xb7;\n        checkOffset(offset + 1 + lengthLength);\n\n        const length = unarrayifyInteger(data, offset + 1, lengthLength);\n        checkOffset(offset + 1 + lengthLength + length);\n\n        const result = hexlify(data.slice(offset + 1 + lengthLength, offset + 1 + lengthLength + length));\n        return { consumed: (1 + lengthLength + length), result: result }\n\n    } else if (data[offset] >= 0x80) {\n        const length = data[offset] - 0x80;\n        checkOffset(offset + 1 + length);\n\n        const result = hexlify(data.slice(offset + 1, offset + 1 + length));\n        return { consumed: (1 + length), result: result }\n    }\n\n    return { consumed: 1, result: hexlifyByte(data[offset]) };\n}\n\n/**\n *  Decodes %%data%% into the structured data it represents.\n */\nexport function decodeRlp(_data: BytesLike): RlpStructuredData {\n    const data = getBytes(_data, \"data\");\n    const decoded = _decode(data, 0);\n    assertArgument(decoded.consumed === data.length, \"unexpected junk after rlp payload\", \"data\", _data);\n    return decoded.result;\n}\n\n","//See: https://github.com/ethereum/wiki/wiki/RLP\n\nimport { getBytes } from \"./data.js\";\n\nimport type { RlpStructuredDataish } from \"./rlp.js\";\n\n\nfunction arrayifyInteger(value: number): Array<number> {\n    const result: Array<number> = [];\n    while (value) {\n        result.unshift(value & 0xff);\n        value >>= 8;\n    }\n    return result;\n}\n\nfunction _encode(object: Array<any> | string | Uint8Array): Array<number> {\n    if (Array.isArray(object)) {\n        let payload: Array<number> = [];\n        object.forEach(function(child) {\n            payload = payload.concat(_encode(child));\n        });\n\n        if (payload.length <= 55) {\n            payload.unshift(0xc0 + payload.length)\n            return payload;\n        }\n\n        const length = arrayifyInteger(payload.length);\n        length.unshift(0xf7 + length.length);\n\n        return length.concat(payload);\n\n    }\n\n    const data: Array<number> = Array.prototype.slice.call(getBytes(object, \"object\"));\n\n    if (data.length === 1 && data[0] <= 0x7f) {\n        return data;\n\n    } else if (data.length <= 55) {\n        data.unshift(0x80 + data.length);\n        return data;\n    }\n\n    const length = arrayifyInteger(data.length);\n    length.unshift(0xb7 + length.length);\n\n    return length.concat(data);\n}\n\nconst nibbles = \"0123456789abcdef\";\n\n/**\n *  Encodes %%object%% as an RLP-encoded [[DataHexString]].\n */\nexport function encodeRlp(object: RlpStructuredDataish): string {\n    let result = \"0x\";\n    for (const v of _encode(object)) {\n        result += nibbles[v >> 4];\n        result += nibbles[v & 0xf];\n    }\n    return result;\n}\n","import { getAddress } from \"../address/index.js\";\nimport { keccak256, SigningKey } from \"../crypto/index.js\";\n\nimport type { SignatureLike } from \"../crypto/index.js\";\nimport type { BytesLike } from \"../utils/index.js\";\n\n/**\n *  Returns the address for the %%key%%.\n *\n *  The key may be any standard form of public key or a private key.\n */\nexport function computeAddress(key: string | SigningKey): string {\n    let pubkey: string;\n    if (typeof(key) === \"string\") {\n        pubkey = SigningKey.computePublicKey(key, false);\n    } else {\n        pubkey = key.publicKey;\n    }\n    return getAddress(keccak256(\"0x\" + pubkey.substring(4)).substring(26));\n}\n\n/**\n *  Returns the recovered address for the private key that was\n *  used to sign %%digest%% that resulted in %%signature%%.\n */\nexport function recoverAddress(digest: BytesLike, signature: SignatureLike): string {\n    return computeAddress(SigningKey.recoverPublicKey(digest, signature));\n}\n","\nimport { getAddress } from \"../address/index.js\";\nimport { ZeroAddress } from \"../constants/addresses.js\";\nimport {\n    keccak256, sha256, Signature, SigningKey\n} from \"../crypto/index.js\";\nimport {\n    concat, decodeRlp, encodeRlp, getBytes, getBigInt, getNumber, hexlify,\n    assert, assertArgument, isBytesLike, isHexString, toBeArray, zeroPadValue\n} from \"../utils/index.js\";\n\nimport { accessListify } from \"./accesslist.js\";\nimport { authorizationify } from \"./authorization.js\";\nimport { recoverAddress } from \"./address.js\";\n\nimport type { BigNumberish, BytesLike } from \"../utils/index.js\";\nimport type { SignatureLike } from \"../crypto/index.js\";\n\nimport type {\n    AccessList, AccessListish, Authorization, AuthorizationLike\n} from \"./index.js\";\n\n\nconst BN_0 = BigInt(0);\nconst BN_2 = BigInt(2);\nconst BN_27 = BigInt(27)\nconst BN_28 = BigInt(28)\nconst BN_35 = BigInt(35);\nconst BN_MAX_UINT = BigInt(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n\nconst BLOB_SIZE = 4096 * 32;\n\n// The BLS Modulo; each field within a BLOb must be less than this\n//const BLOB_BLS_MODULO = BigInt(\"0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001\");\n\n/**\n *  A **TransactionLike** is an object which is appropriate as a loose\n *  input for many operations which will populate missing properties of\n *  a transaction.\n */\nexport interface TransactionLike<A = string> {\n    /**\n     *  The type.\n     */\n    type?: null | number;\n\n    /**\n     *  The recipient address or ``null`` for an ``init`` transaction.\n     */\n    to?: null | A;\n\n    /**\n     *  The sender.\n     */\n    from?: null | A;\n\n    /**\n     *  The nonce.\n     */\n    nonce?: null | number;\n\n    /**\n     *  The maximum amount of gas that can be used.\n     */\n    gasLimit?: null | BigNumberish;\n\n    /**\n     *  The gas price for legacy and berlin transactions.\n     */\n    gasPrice?: null | BigNumberish;\n\n    /**\n     *  The maximum priority fee per gas for london transactions.\n     */\n    maxPriorityFeePerGas?: null | BigNumberish;\n\n    /**\n     *  The maximum total fee per gas for london transactions.\n     */\n    maxFeePerGas?: null | BigNumberish;\n\n    /**\n     *  The data.\n     */\n    data?: null | string;\n\n    /**\n     *  The value (in wei) to send.\n     */\n    value?: null | BigNumberish;\n\n    /**\n     *  The chain ID the transaction is valid on.\n     */\n    chainId?: null | BigNumberish;\n\n    /**\n     *  The transaction hash.\n     */\n    hash?: null | string;\n\n    /**\n     *  The signature provided by the sender.\n     */\n    signature?: null | SignatureLike;\n\n    /**\n     *  The access list for berlin and london transactions.\n     */\n    accessList?: null | AccessListish;\n\n    /**\n     *  The maximum fee per blob gas (see [[link-eip-4844]]).\n     */\n    maxFeePerBlobGas?: null | BigNumberish;\n\n    /**\n     *  The versioned hashes (see [[link-eip-4844]]).\n     */\n    blobVersionedHashes?: null | Array<string>;\n\n    /**\n     *  The blobs (if any) attached to this transaction (see [[link-eip-4844]]).\n     */\n    blobs?: null | Array<BlobLike>\n\n    /**\n     *  An external library for computing the KZG commitments and\n     *  proofs necessary for EIP-4844 transactions (see [[link-eip-4844]]).\n     *\n     *  This is generally ``null``, unless you are creating BLOb\n     *  transactions.\n     */\n    kzg?: null | KzgLibraryLike;\n\n    /**\n     *  The [[link-eip-7702]] authorizations (if any).\n     */\n    authorizationList?: null | Array<Authorization>;\n}\n\n/**\n *  A full-valid BLOb object for [[link-eip-4844]] transactions.\n *\n *  The commitment and proof should have been computed using a\n *  KZG library.\n */\nexport interface Blob {\n    data: string;\n    proof: string;\n    commitment: string;\n}\n\n/**\n *  A BLOb object that can be passed for [[link-eip-4844]]\n *  transactions.\n *\n *  It may have had its commitment and proof already provided\n *  or rely on an attached [[KzgLibrary]] to compute them.\n */\nexport type BlobLike = BytesLike | {\n    data: BytesLike;\n    proof: BytesLike;\n    commitment: BytesLike;\n};\n\n/**\n *  A KZG Library with the necessary functions to compute\n *  BLOb commitments and proofs.\n */\nexport interface KzgLibrary {\n    blobToKzgCommitment: (blob: Uint8Array) => Uint8Array;\n    computeBlobKzgProof: (blob: Uint8Array, commitment: Uint8Array) => Uint8Array;\n}\n\n/**\n *  A KZG Library with any of the various API configurations.\n *  As the library is still experimental and the API is not\n *  stable, depending on the version used the method names and\n *  signatures are still in flux.\n *\n *  This allows any of the versions to be passed into Transaction\n *  while providing a stable external API.\n */\nexport type KzgLibraryLike  = KzgLibrary | {\n    // kzg-wasm >= 0.5.0\n    blobToKZGCommitment: (blob: string) => string;\n    computeBlobKZGProof: (blob: string, commitment: string) => string;\n} | {\n    // micro-ecc-signer\n    blobToKzgCommitment: (blob: string) => string | Uint8Array;\n    computeBlobProof: (blob: string, commitment: string) => string | Uint8Array;\n};\n\nfunction getKzgLibrary(kzg: KzgLibraryLike): KzgLibrary {\n\n    const blobToKzgCommitment = (blob: Uint8Array) => {\n\n        if (\"computeBlobProof\" in kzg) {\n            // micro-ecc-signer; check for computeBlobProof since this API\n            // expects a string while the kzg-wasm below expects a Unit8Array\n\n            if (\"blobToKzgCommitment\" in kzg && typeof(kzg.blobToKzgCommitment) === \"function\") {\n                return getBytes(kzg.blobToKzgCommitment(hexlify(blob)))\n            }\n\n        } else if (\"blobToKzgCommitment\" in kzg && typeof(kzg.blobToKzgCommitment) === \"function\") {\n            // kzg-wasm <0.5.0; blobToKzgCommitment(Uint8Array) => Uint8Array\n\n            return getBytes(kzg.blobToKzgCommitment(blob));\n        }\n\n        // kzg-wasm >= 0.5.0; blobToKZGCommitment(string) => string\n        if (\"blobToKZGCommitment\" in kzg && typeof(kzg.blobToKZGCommitment) === \"function\") {\n            return getBytes(kzg.blobToKZGCommitment(hexlify(blob)));\n        }\n\n        assertArgument(false, \"unsupported KZG library\", \"kzg\", kzg);\n    };\n\n    const computeBlobKzgProof = (blob: Uint8Array, commitment: Uint8Array) => {\n\n        // micro-ecc-signer\n        if (\"computeBlobProof\" in kzg && typeof(kzg.computeBlobProof) === \"function\") {\n            return getBytes(kzg.computeBlobProof(hexlify(blob), hexlify(commitment)))\n        }\n\n        // kzg-wasm <0.5.0; computeBlobKzgProof(Uint8Array, Uint8Array) => Uint8Array\n        if (\"computeBlobKzgProof\" in kzg && typeof(kzg.computeBlobKzgProof) === \"function\") {\n            return kzg.computeBlobKzgProof(blob, commitment);\n        }\n\n        // kzg-wasm >= 0.5.0; computeBlobKZGProof(string, string) => string\n        if (\"computeBlobKZGProof\" in kzg && typeof(kzg.computeBlobKZGProof) === \"function\") {\n            return getBytes(kzg.computeBlobKZGProof(hexlify(blob), hexlify(commitment)));\n        }\n\n        assertArgument(false, \"unsupported KZG library\", \"kzg\", kzg);\n    };\n\n    return { blobToKzgCommitment, computeBlobKzgProof };\n}\n\nfunction getVersionedHash(version: number, hash: BytesLike): string {\n    let versioned = version.toString(16);\n    while (versioned.length < 2) { versioned = \"0\" + versioned; }\n    versioned += sha256(hash).substring(4);\n    return \"0x\" + versioned;\n}\n\nfunction handleAddress(value: string): null | string {\n    if (value === \"0x\") { return null; }\n    return getAddress(value);\n}\n\nfunction handleAccessList(value: any, param: string): AccessList {\n    try {\n        return accessListify(value);\n    } catch (error: any) {\n        assertArgument(false, error.message, param, value);\n    }\n}\n\nfunction handleAuthorizationList(value: any, param: string): Array<Authorization> {\n    try {\n        if (!Array.isArray(value)) { throw new Error(\"authorizationList: invalid array\"); }\n        const result: Array<Authorization> = [ ];\n        for (let i = 0; i < value.length; i++) {\n            const auth: Array<string> = value[i];\n            if (!Array.isArray(auth)) { throw new Error(`authorization[${ i }]: invalid array`); }\n            if (auth.length !== 6) { throw new Error(`authorization[${ i }]: wrong length`); }\n            if (!auth[1]) { throw new Error(`authorization[${ i }]: null address`); }\n            result.push({\n                address: <string>handleAddress(auth[1]),\n                nonce: handleUint(auth[2], \"nonce\"),\n                chainId: handleUint(auth[0], \"chainId\"),\n                signature: Signature.from({\n                    yParity: <0 | 1>handleNumber(auth[3], \"yParity\"),\n                    r: zeroPadValue(auth[4], 32),\n                    s: zeroPadValue(auth[5], 32)\n                })\n            });\n        }\n        return result;\n    } catch (error: any) {\n        assertArgument(false, error.message, param, value);\n    }\n}\n\nfunction handleNumber(_value: string, param: string): number {\n    if (_value === \"0x\") { return 0; }\n    return getNumber(_value, param);\n}\n\nfunction handleUint(_value: string, param: string): bigint {\n    if (_value === \"0x\") { return BN_0; }\n    const value = getBigInt(_value, param);\n    assertArgument(value <= BN_MAX_UINT, \"value exceeds uint size\", param, value);\n    return value;\n}\n\nfunction formatNumber(_value: BigNumberish, name: string): Uint8Array {\n    const value = getBigInt(_value, \"value\");\n    const result = toBeArray(value);\n    assertArgument(result.length <= 32, `value too large`, `tx.${ name }`, value);\n    return result;\n}\n\nfunction formatAccessList(value: AccessListish): Array<[ string, Array<string> ]> {\n    return accessListify(value).map((set) => [ set.address, set.storageKeys ]);\n}\n\nfunction formatAuthorizationList(value: Array<Authorization>): Array<Array<string | Uint8Array>> {\n    return value.map((a) => {\n        return [\n            formatNumber(a.chainId, \"chainId\"),\n            a.address,\n            formatNumber(a.nonce, \"nonce\"),\n            formatNumber(a.signature.yParity, \"yParity\"),\n            toBeArray(a.signature.r),\n            toBeArray(a.signature.s)\n        ];\n    });\n}\n\nfunction formatHashes(value: Array<string>, param: string): Array<string> {\n    assertArgument(Array.isArray(value), `invalid ${ param }`, \"value\", value);\n    for (let i = 0; i < value.length; i++) {\n        assertArgument(isHexString(value[i], 32), \"invalid ${ param } hash\", `value[${ i }]`, value[i]);\n    }\n    return value;\n}\n\nfunction _parseLegacy(data: Uint8Array): TransactionLike {\n    const fields: any = decodeRlp(data);\n\n    assertArgument(Array.isArray(fields) && (fields.length === 9 || fields.length === 6),\n        \"invalid field count for legacy transaction\", \"data\", data);\n\n    const tx: TransactionLike = {\n        type:     0,\n        nonce:    handleNumber(fields[0], \"nonce\"),\n        gasPrice: handleUint(fields[1], \"gasPrice\"),\n        gasLimit: handleUint(fields[2], \"gasLimit\"),\n        to:       handleAddress(fields[3]),\n        value:    handleUint(fields[4], \"value\"),\n        data:     hexlify(fields[5]),\n        chainId:  BN_0\n    };\n\n    // Legacy unsigned transaction\n    if (fields.length === 6) { return tx; }\n\n    const v = handleUint(fields[6], \"v\");\n    const r = handleUint(fields[7], \"r\");\n    const s = handleUint(fields[8], \"s\");\n\n    if (r === BN_0 && s === BN_0) {\n        // EIP-155 unsigned transaction\n        tx.chainId = v;\n\n    } else {\n\n        // Compute the EIP-155 chain ID (or 0 for legacy)\n        let chainId = (v - BN_35) / BN_2;\n        if (chainId < BN_0) { chainId = BN_0; }\n        tx.chainId = chainId\n\n        // Signed Legacy Transaction\n        assertArgument(chainId !== BN_0 || (v === BN_27 || v === BN_28), \"non-canonical legacy v\", \"v\", fields[6]);\n\n        tx.signature = Signature.from({\n            r: zeroPadValue(fields[7], 32),\n            s: zeroPadValue(fields[8], 32),\n            v\n        });\n\n        //tx.hash = keccak256(data);\n    }\n\n    return tx;\n}\n\nfunction _serializeLegacy(tx: Transaction, sig: null | Signature): string {\n    const fields: Array<any> = [\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.gasPrice || 0, \"gasPrice\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || \"0x\"),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n    ];\n\n    let chainId = BN_0;\n    if (tx.chainId != BN_0) {\n        // A chainId was provided; if non-zero we'll use EIP-155\n        chainId = getBigInt(tx.chainId, \"tx.chainId\");\n\n        // We have a chainId in the tx and an EIP-155 v in the signature,\n        // make sure they agree with each other\n        assertArgument(!sig || sig.networkV == null || sig.legacyChainId === chainId,\n             \"tx.chainId/sig.v mismatch\", \"sig\", sig);\n\n    } else if (tx.signature) {\n        // No explicit chainId, but EIP-155 have a derived implicit chainId\n        const legacy = tx.signature.legacyChainId;\n        if (legacy != null) { chainId = legacy; }\n    }\n\n    // Requesting an unsigned transaction\n    if (!sig) {\n        // We have an EIP-155 transaction (chainId was specified and non-zero)\n        if (chainId !== BN_0) {\n            fields.push(toBeArray(chainId));\n            fields.push(\"0x\");\n            fields.push(\"0x\");\n        }\n\n        return encodeRlp(fields);\n    }\n\n    // @TODO: We should probably check that tx.signature, chainId, and sig\n    //        match but that logic could break existing code, so schedule\n    //        this for the next major bump.\n\n    // Compute the EIP-155 v\n    let v = BigInt(27 + sig.yParity);\n    if (chainId !== BN_0) {\n        v = Signature.getChainIdV(chainId, sig.v);\n    } else if (BigInt(sig.v) !== v) {\n        assertArgument(false, \"tx.chainId/sig.v mismatch\", \"sig\", sig);\n    }\n\n    // Add the signature\n    fields.push(toBeArray(v));\n    fields.push(toBeArray(sig.r));\n    fields.push(toBeArray(sig.s));\n\n    return encodeRlp(fields);\n}\n\nfunction _parseEipSignature(tx: TransactionLike, fields: Array<string>): void {\n    let yParity: number;\n    try {\n        yParity = handleNumber(fields[0], \"yParity\");\n        if (yParity !== 0 && yParity !== 1) { throw new Error(\"bad yParity\"); }\n    } catch (error) {\n        assertArgument(false, \"invalid yParity\", \"yParity\", fields[0]);\n    }\n\n    const r = zeroPadValue(fields[1], 32);\n    const s = zeroPadValue(fields[2], 32);\n\n    const signature = Signature.from({ r, s, yParity });\n    tx.signature = signature;\n}\n\nfunction _parseEip1559(data: Uint8Array): TransactionLike {\n    const fields: any = decodeRlp(getBytes(data).slice(1));\n\n    assertArgument(Array.isArray(fields) && (fields.length === 9 || fields.length === 12),\n        \"invalid field count for transaction type: 2\", \"data\", hexlify(data));\n\n    const tx: TransactionLike = {\n        type:                  2,\n        chainId:               handleUint(fields[0], \"chainId\"),\n        nonce:                 handleNumber(fields[1], \"nonce\"),\n        maxPriorityFeePerGas:  handleUint(fields[2], \"maxPriorityFeePerGas\"),\n        maxFeePerGas:          handleUint(fields[3], \"maxFeePerGas\"),\n        gasPrice:              null,\n        gasLimit:              handleUint(fields[4], \"gasLimit\"),\n        to:                    handleAddress(fields[5]),\n        value:                 handleUint(fields[6], \"value\"),\n        data:                  hexlify(fields[7]),\n        accessList:            handleAccessList(fields[8], \"accessList\"),\n    };\n\n    // Unsigned EIP-1559 Transaction\n    if (fields.length === 9) { return tx; }\n\n    //tx.hash = keccak256(data);\n\n    _parseEipSignature(tx, fields.slice(9));\n\n    return tx;\n}\n\nfunction _serializeEip1559(tx: Transaction, sig: null | Signature): string {\n    const fields: Array<any> = [\n        formatNumber(tx.chainId, \"chainId\"),\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n        formatNumber(tx.maxFeePerGas || 0, \"maxFeePerGas\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || \"0x\"),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n        formatAccessList(tx.accessList || [ ])\n    ];\n\n    if (sig) {\n        fields.push(formatNumber(sig.yParity, \"yParity\"));\n        fields.push(toBeArray(sig.r));\n        fields.push(toBeArray(sig.s));\n    }\n\n    return concat([ \"0x02\", encodeRlp(fields)]);\n}\n\nfunction _parseEip2930(data: Uint8Array): TransactionLike {\n    const fields: any = decodeRlp(getBytes(data).slice(1));\n\n    assertArgument(Array.isArray(fields) && (fields.length === 8 || fields.length === 11),\n        \"invalid field count for transaction type: 1\", \"data\", hexlify(data));\n\n    const tx: TransactionLike = {\n        type:       1,\n        chainId:    handleUint(fields[0], \"chainId\"),\n        nonce:      handleNumber(fields[1], \"nonce\"),\n        gasPrice:   handleUint(fields[2], \"gasPrice\"),\n        gasLimit:   handleUint(fields[3], \"gasLimit\"),\n        to:         handleAddress(fields[4]),\n        value:      handleUint(fields[5], \"value\"),\n        data:       hexlify(fields[6]),\n        accessList: handleAccessList(fields[7], \"accessList\")\n    };\n\n    // Unsigned EIP-2930 Transaction\n    if (fields.length === 8) { return tx; }\n\n    //tx.hash = keccak256(data);\n\n    _parseEipSignature(tx, fields.slice(8));\n\n    return tx;\n}\n\nfunction _serializeEip2930(tx: Transaction, sig: null | Signature): string {\n    const fields: any = [\n        formatNumber(tx.chainId, \"chainId\"),\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.gasPrice || 0, \"gasPrice\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || \"0x\"),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n        formatAccessList(tx.accessList || [ ])\n    ];\n\n    if (sig) {\n        fields.push(formatNumber(sig.yParity, \"recoveryParam\"));\n        fields.push(toBeArray(sig.r));\n        fields.push(toBeArray(sig.s));\n    }\n\n    return concat([ \"0x01\", encodeRlp(fields)]);\n}\n\nfunction _parseEip4844(data: Uint8Array): TransactionLike {\n    let fields: any = decodeRlp(getBytes(data).slice(1));\n\n    let typeName = \"3\";\n\n    let blobs: null | Array<Blob> = null;\n\n    // Parse the network format\n    if (fields.length === 4 && Array.isArray(fields[0])) {\n        typeName = \"3 (network format)\";\n        const fBlobs = fields[1], fCommits = fields[2], fProofs = fields[3];\n        assertArgument(Array.isArray(fBlobs), \"invalid network format: blobs not an array\", \"fields[1]\", fBlobs);\n        assertArgument(Array.isArray(fCommits), \"invalid network format: commitments not an array\", \"fields[2]\", fCommits);\n        assertArgument(Array.isArray(fProofs), \"invalid network format: proofs not an array\", \"fields[3]\", fProofs);\n        assertArgument(fBlobs.length === fCommits.length, \"invalid network format: blobs/commitments length mismatch\", \"fields\", fields);\n        assertArgument(fBlobs.length === fProofs.length, \"invalid network format: blobs/proofs length mismatch\", \"fields\", fields);\n\n        blobs = [ ];\n        for (let i = 0; i < fields[1].length; i++) {\n            blobs.push({\n                data: fBlobs[i],\n                commitment: fCommits[i],\n                proof: fProofs[i],\n            });\n        }\n\n        fields = fields[0];\n    }\n\n    assertArgument(Array.isArray(fields) && (fields.length === 11 || fields.length === 14),\n        `invalid field count for transaction type: ${ typeName }`, \"data\", hexlify(data));\n\n    const tx: TransactionLike = {\n        type:                  3,\n        chainId:               handleUint(fields[0], \"chainId\"),\n        nonce:                 handleNumber(fields[1], \"nonce\"),\n        maxPriorityFeePerGas:  handleUint(fields[2], \"maxPriorityFeePerGas\"),\n        maxFeePerGas:          handleUint(fields[3], \"maxFeePerGas\"),\n        gasPrice:              null,\n        gasLimit:              handleUint(fields[4], \"gasLimit\"),\n        to:                    handleAddress(fields[5]),\n        value:                 handleUint(fields[6], \"value\"),\n        data:                  hexlify(fields[7]),\n        accessList:            handleAccessList(fields[8], \"accessList\"),\n        maxFeePerBlobGas:      handleUint(fields[9], \"maxFeePerBlobGas\"),\n        blobVersionedHashes:   fields[10]\n    };\n\n    if (blobs) { tx.blobs = blobs; }\n\n    assertArgument(tx.to != null, `invalid address for transaction type: ${ typeName }`, \"data\", data);\n\n    assertArgument(Array.isArray(tx.blobVersionedHashes), \"invalid blobVersionedHashes: must be an array\", \"data\", data);\n    for (let i = 0; i < tx.blobVersionedHashes.length; i++) {\n        assertArgument(isHexString(tx.blobVersionedHashes[i], 32), `invalid blobVersionedHash at index ${ i }: must be length 32`, \"data\", data);\n    }\n\n    // Unsigned EIP-4844 Transaction\n    if (fields.length === 11) { return tx; }\n\n    // @TODO: Do we need to do this? This is only called internally\n    // and used to verify hashes; it might save time to not do this\n    //tx.hash = keccak256(concat([ \"0x03\", encodeRlp(fields) ]));\n\n    _parseEipSignature(tx, fields.slice(11));\n\n    return tx;\n}\n\nfunction _serializeEip4844(tx: Transaction, sig: null | Signature, blobs: null | Array<Blob>): string {\n    const fields: Array<any> = [\n        formatNumber(tx.chainId, \"chainId\"),\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n        formatNumber(tx.maxFeePerGas || 0, \"maxFeePerGas\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || ZeroAddress),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n        formatAccessList(tx.accessList || [ ]),\n        formatNumber(tx.maxFeePerBlobGas || 0, \"maxFeePerBlobGas\"),\n        formatHashes(tx.blobVersionedHashes || [ ], \"blobVersionedHashes\")\n    ];\n\n    if (sig) {\n        fields.push(formatNumber(sig.yParity, \"yParity\"));\n        fields.push(toBeArray(sig.r));\n        fields.push(toBeArray(sig.s));\n\n        // We have blobs; return the network wrapped format\n        if (blobs) {\n            return concat([\n                \"0x03\",\n                encodeRlp([\n                    fields,\n                    blobs.map((b) => b.data),\n                    blobs.map((b) => b.commitment),\n                    blobs.map((b) => b.proof),\n                ])\n            ]);\n        }\n\n    }\n\n    return concat([ \"0x03\", encodeRlp(fields)]);\n}\n\nfunction _parseEip7702(data: Uint8Array): TransactionLike {\n    const fields: any = decodeRlp(getBytes(data).slice(1));\n\n    assertArgument(Array.isArray(fields) && (fields.length === 10 || fields.length === 13),\n        \"invalid field count for transaction type: 4\", \"data\", hexlify(data));\n\n    const tx: TransactionLike = {\n        type:                  4,\n        chainId:               handleUint(fields[0], \"chainId\"),\n        nonce:                 handleNumber(fields[1], \"nonce\"),\n        maxPriorityFeePerGas:  handleUint(fields[2], \"maxPriorityFeePerGas\"),\n        maxFeePerGas:          handleUint(fields[3], \"maxFeePerGas\"),\n        gasPrice:              null,\n        gasLimit:              handleUint(fields[4], \"gasLimit\"),\n        to:                    handleAddress(fields[5]),\n        value:                 handleUint(fields[6], \"value\"),\n        data:                  hexlify(fields[7]),\n        accessList:            handleAccessList(fields[8], \"accessList\"),\n        authorizationList:     handleAuthorizationList(fields[9], \"authorizationList\"),\n    };\n\n    // Unsigned EIP-7702 Transaction\n    if (fields.length === 10) { return tx; }\n\n    _parseEipSignature(tx, fields.slice(10));\n\n    return tx;\n}\n\nfunction _serializeEip7702(tx: Transaction, sig: null | Signature): string {\n    const fields: Array<any> = [\n        formatNumber(tx.chainId, \"chainId\"),\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n        formatNumber(tx.maxFeePerGas || 0, \"maxFeePerGas\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || \"0x\"),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n        formatAccessList(tx.accessList || [ ]),\n        formatAuthorizationList(tx.authorizationList || [ ])\n    ];\n\n    if (sig) {\n        fields.push(formatNumber(sig.yParity, \"yParity\"));\n        fields.push(toBeArray(sig.r));\n        fields.push(toBeArray(sig.s));\n    }\n\n    return concat([ \"0x04\", encodeRlp(fields)]);\n}\n\n/**\n *  A **Transaction** describes an operation to be executed on\n *  Ethereum by an Externally Owned Account (EOA). It includes\n *  who (the [[to]] address), what (the [[data]]) and how much (the\n *  [[value]] in ether) the operation should entail.\n *\n *  @example:\n *    tx = new Transaction()\n *    //_result:\n *\n *    tx.data = \"0x1234\";\n *    //_result:\n */\nexport class Transaction implements TransactionLike<string> {\n    #type: null | number;\n    #to: null | string;\n    #data: string;\n    #nonce: number;\n    #gasLimit: bigint;\n    #gasPrice: null | bigint;\n    #maxPriorityFeePerGas: null | bigint;\n    #maxFeePerGas: null | bigint;\n    #value: bigint;\n    #chainId: bigint;\n    #sig: null | Signature;\n    #accessList: null | AccessList;\n    #maxFeePerBlobGas: null | bigint;\n    #blobVersionedHashes: null | Array<string>;\n    #kzg: null | KzgLibrary;\n    #blobs: null | Array<Blob>;\n    #auths: null | Array<Authorization>;\n\n    /**\n     *  The transaction type.\n     *\n     *  If null, the type will be automatically inferred based on\n     *  explicit properties.\n     */\n    get type(): null | number { return this.#type; }\n    set type(value: null | number | string) {\n        switch (value) {\n            case null:\n                this.#type = null;\n                break;\n            case 0: case \"legacy\":\n                this.#type = 0;\n                break;\n            case 1: case \"berlin\": case \"eip-2930\":\n                this.#type = 1;\n                break;\n            case 2: case \"london\": case \"eip-1559\":\n                this.#type = 2;\n                break;\n            case 3: case \"cancun\": case \"eip-4844\":\n                this.#type = 3;\n                break;\n            case 4: case \"pectra\": case \"eip-7702\":\n                this.#type = 4;\n                break;\n            default:\n                assertArgument(false, \"unsupported transaction type\", \"type\", value);\n        }\n    }\n\n    /**\n     *  The name of the transaction type.\n     */\n    get typeName(): null | string {\n        switch (this.type) {\n            case 0: return \"legacy\";\n            case 1: return \"eip-2930\";\n            case 2: return \"eip-1559\";\n            case 3: return \"eip-4844\";\n            case 4: return \"eip-7702\";\n        }\n\n        return null;\n    }\n\n    /**\n     *  The ``to`` address for the transaction or ``null`` if the\n     *  transaction is an ``init`` transaction.\n     */\n    get to(): null | string {\n        const value = this.#to;\n        if (value == null && this.type === 3) { return ZeroAddress; }\n        return value;\n    }\n    set to(value: null | string) {\n        this.#to = (value == null) ? null: getAddress(value);\n    }\n\n    /**\n     *  The transaction nonce.\n     */\n    get nonce(): number { return this.#nonce; }\n    set nonce(value: BigNumberish) { this.#nonce = getNumber(value, \"value\"); }\n\n    /**\n     *  The gas limit.\n     */\n    get gasLimit(): bigint { return this.#gasLimit; }\n    set gasLimit(value: BigNumberish) { this.#gasLimit = getBigInt(value); }\n\n    /**\n     *  The gas price.\n     *\n     *  On legacy networks this defines the fee that will be paid. On\n     *  EIP-1559 networks, this should be ``null``.\n     */\n    get gasPrice(): null | bigint {\n        const value = this.#gasPrice;\n        if (value == null && (this.type === 0 || this.type === 1)) { return BN_0; }\n        return value;\n    }\n    set gasPrice(value: null | BigNumberish) {\n        this.#gasPrice = (value == null) ? null: getBigInt(value, \"gasPrice\");\n    }\n\n    /**\n     *  The maximum priority fee per unit of gas to pay. On legacy\n     *  networks this should be ``null``.\n     */\n    get maxPriorityFeePerGas(): null | bigint {\n        const value = this.#maxPriorityFeePerGas;\n        if (value == null) {\n            if (this.type === 2 || this.type === 3) { return BN_0; }\n            return null;\n        }\n        return value;\n    }\n    set maxPriorityFeePerGas(value: null | BigNumberish) {\n        this.#maxPriorityFeePerGas = (value == null) ? null: getBigInt(value, \"maxPriorityFeePerGas\");\n    }\n\n    /**\n     *  The maximum total fee per unit of gas to pay. On legacy\n     *  networks this should be ``null``.\n     */\n    get maxFeePerGas(): null | bigint {\n        const value = this.#maxFeePerGas;\n        if (value == null) {\n            if (this.type === 2 || this.type === 3) { return BN_0; }\n            return null;\n        }\n        return value;\n    }\n    set maxFeePerGas(value: null | BigNumberish) {\n        this.#maxFeePerGas = (value == null) ? null: getBigInt(value, \"maxFeePerGas\");\n    }\n\n    /**\n     *  The transaction data. For ``init`` transactions this is the\n     *  deployment code.\n     */\n    get data(): string { return this.#data; }\n    set data(value: BytesLike) { this.#data = hexlify(value); }\n\n    /**\n     *  The amount of ether (in wei) to send in this transactions.\n     */\n    get value(): bigint { return this.#value; }\n    set value(value: BigNumberish) {\n        this.#value = getBigInt(value, \"value\");\n    }\n\n    /**\n     *  The chain ID this transaction is valid on.\n     */\n    get chainId(): bigint { return this.#chainId; }\n    set chainId(value: BigNumberish) { this.#chainId = getBigInt(value); }\n\n    /**\n     *  If signed, the signature for this transaction.\n     */\n    get signature(): null | Signature { return this.#sig || null; }\n    set signature(value: null | SignatureLike) {\n        this.#sig = (value == null) ? null: Signature.from(value);\n    }\n\n    /**\n     *  The access list.\n     *\n     *  An access list permits discounted (but pre-paid) access to\n     *  bytecode and state variable access within contract execution.\n     */\n    get accessList(): null | AccessList {\n        const value = this.#accessList || null;\n        if (value == null) {\n            if (this.type === 1 || this.type === 2 || this.type === 3) {\n                // @TODO: in v7, this should assign the value or become\n                // a live object itself, otherwise mutation is inconsistent\n                return [ ];\n            }\n            return null;\n        }\n        return value;\n    }\n    set accessList(value: null | AccessListish) {\n        this.#accessList = (value == null) ? null: accessListify(value);\n    }\n\n    get authorizationList(): null | Array<Authorization> {\n        const value = this.#auths || null;\n        if (value == null) {\n            if (this.type === 4) {\n                // @TODO: in v7, this should become a live object itself,\n                // otherwise mutation is inconsistent\n                return [ ];\n            }\n        }\n        return value;\n    }\n    set authorizationList(auths: null | Array<AuthorizationLike>) {\n        this.#auths = (auths == null) ? null: auths.map((a) =>\n          authorizationify(a));\n    }\n\n    /**\n     *  The max fee per blob gas for Cancun transactions.\n     */\n    get maxFeePerBlobGas(): null | bigint {\n        const value = this.#maxFeePerBlobGas;\n        if (value == null && this.type === 3) { return BN_0; }\n        return value;\n    }\n    set maxFeePerBlobGas(value: null | BigNumberish) {\n        this.#maxFeePerBlobGas = (value == null) ? null: getBigInt(value, \"maxFeePerBlobGas\");\n    }\n\n    /**\n     *  The BLOb versioned hashes for Cancun transactions.\n     */\n    get blobVersionedHashes(): null | Array<string> {\n        // @TODO: Mutation is inconsistent; if unset, the returned value\n        // cannot mutate the object, if set it can\n        let value = this.#blobVersionedHashes;\n        if (value == null && this.type === 3) { return [ ]; }\n        return value;\n    }\n    set blobVersionedHashes(value: null | Array<string>) {\n        if (value != null) {\n            assertArgument(Array.isArray(value), \"blobVersionedHashes must be an Array\", \"value\", value);\n            value = value.slice();\n            for (let i = 0; i < value.length; i++) {\n                assertArgument(isHexString(value[i], 32), \"invalid blobVersionedHash\", `value[${ i }]`, value[i]);\n            }\n        }\n        this.#blobVersionedHashes = value;\n    }\n\n    /**\n     *  The BLObs for the Transaction, if any.\n     *\n     *  If ``blobs`` is non-``null``, then the [[seriailized]]\n     *  will return the network formatted sidecar, otherwise it\n     *  will return the standard [[link-eip-2718]] payload. The\n     *  [[unsignedSerialized]] is unaffected regardless.\n     *\n     *  When setting ``blobs``, either fully valid [[Blob]] objects\n     *  may be specified (i.e. correctly padded, with correct\n     *  committments and proofs) or a raw [[BytesLike]] may\n     *  be provided.\n     *\n     *  If raw [[BytesLike]] are provided, the [[kzg]] property **must**\n     *  be already set. The blob will be correctly padded and the\n     *  [[KzgLibrary]] will be used to compute the committment and\n     *  proof for the blob.\n     *\n     *  A BLOb is a sequence of field elements, each of which must\n     *  be within the BLS field modulo, so some additional processing\n     *  may be required to encode arbitrary data to ensure each 32 byte\n     *  field is within the valid range.\n     *\n     *  Setting this automatically populates [[blobVersionedHashes]],\n     *  overwriting any existing values. Setting this to ``null``\n     *  does **not** remove the [[blobVersionedHashes]], leaving them\n     *  present.\n     */\n    get blobs(): null | Array<Blob> {\n        if (this.#blobs == null) { return null; }\n        return this.#blobs.map((b) => Object.assign({ }, b));\n    }\n    set blobs(_blobs: null | Array<BlobLike>) {\n        if (_blobs == null) {\n            this.#blobs = null;\n            return;\n        }\n\n        const blobs: Array<Blob> = [ ];\n        const versionedHashes: Array<string> = [ ];\n        for (let i = 0; i < _blobs.length; i++) {\n            const blob = _blobs[i];\n\n            if (isBytesLike(blob)) {\n                assert(this.#kzg, \"adding a raw blob requires a KZG library\", \"UNSUPPORTED_OPERATION\", {\n                    operation: \"set blobs()\"\n                });\n\n                let data = getBytes(blob);\n                assertArgument(data.length <= BLOB_SIZE, \"blob is too large\", `blobs[${ i }]`, blob);\n\n                // Pad blob if necessary\n                if (data.length !== BLOB_SIZE) {\n                    const padded = new Uint8Array(BLOB_SIZE);\n                    padded.set(data);\n                    data = padded;\n                }\n\n                const commit = this.#kzg.blobToKzgCommitment(data);\n                const proof = hexlify(this.#kzg.computeBlobKzgProof(data, commit));\n\n                blobs.push({\n                    data: hexlify(data),\n                    commitment: hexlify(commit),\n                    proof\n                });\n                versionedHashes.push(getVersionedHash(1, commit));\n\n            } else {\n                const commit = hexlify(blob.commitment);\n                blobs.push({\n                    data: hexlify(blob.data),\n                    commitment: commit,\n                    proof: hexlify(blob.proof)\n                });\n                versionedHashes.push(getVersionedHash(1, commit));\n            }\n        }\n\n        this.#blobs = blobs;\n        this.#blobVersionedHashes = versionedHashes;\n    }\n\n    get kzg(): null | KzgLibrary { return this.#kzg; }\n    set kzg(kzg: null | KzgLibraryLike) {\n        if (kzg == null) {\n            this.#kzg = null;\n        } else {\n            this.#kzg = getKzgLibrary(kzg);\n        }\n    }\n\n    /**\n     *  Creates a new Transaction with default values.\n     */\n    constructor() {\n        this.#type = null;\n        this.#to = null;\n        this.#nonce = 0;\n        this.#gasLimit = BN_0;\n        this.#gasPrice = null;\n        this.#maxPriorityFeePerGas = null;\n        this.#maxFeePerGas = null;\n        this.#data = \"0x\";\n        this.#value = BN_0;\n        this.#chainId = BN_0;\n        this.#sig = null;\n        this.#accessList = null;\n        this.#maxFeePerBlobGas = null;\n        this.#blobVersionedHashes = null;\n        this.#kzg = null;\n        this.#blobs = null;\n        this.#auths = null;\n    }\n\n    /**\n     *  The transaction hash, if signed. Otherwise, ``null``.\n     */\n    get hash(): null | string {\n        if (this.signature == null) { return null; }\n        return keccak256(this.#getSerialized(true, false));\n    }\n\n    /**\n     *  The pre-image hash of this transaction.\n     *\n     *  This is the digest that a [[Signer]] must sign to authorize\n     *  this transaction.\n     */\n    get unsignedHash(): string {\n        return keccak256(this.unsignedSerialized);\n    }\n\n    /**\n     *  The sending address, if signed. Otherwise, ``null``.\n     */\n    get from(): null | string {\n        if (this.signature == null) { return null; }\n        return recoverAddress(this.unsignedHash, this.signature);\n    }\n\n    /**\n     *  The public key of the sender, if signed. Otherwise, ``null``.\n     */\n    get fromPublicKey(): null | string {\n        if (this.signature == null) { return null; }\n        return SigningKey.recoverPublicKey(this.unsignedHash, this.signature);\n    }\n\n    /**\n     *  Returns true if signed.\n     *\n     *  This provides a Type Guard that properties requiring a signed\n     *  transaction are non-null.\n     */\n    isSigned(): this is (Transaction & { type: number, typeName: string, from: string, signature: Signature }) {\n        return this.signature != null;\n    }\n\n    #getSerialized(signed: boolean, sidecar: boolean): string {\n        assert(!signed || this.signature != null, \"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized\", \"UNSUPPORTED_OPERATION\", { operation: \".serialized\"});\n\n        const sig = signed ? this.signature: null;\n        switch (this.inferType()) {\n            case 0:\n                return _serializeLegacy(this, sig);\n            case 1:\n                return _serializeEip2930(this, sig);\n            case 2:\n                return _serializeEip1559(this, sig);\n            case 3:\n                return _serializeEip4844(this, sig, sidecar ? this.blobs: null);\n            case 4:\n                return _serializeEip7702(this, sig);\n        }\n\n        assert(false, \"unsupported transaction type\", \"UNSUPPORTED_OPERATION\", { operation: \".serialized\" });\n    }\n\n    /**\n     *  The serialized transaction.\n     *\n     *  This throws if the transaction is unsigned. For the pre-image,\n     *  use [[unsignedSerialized]].\n     */\n    get serialized(): string {\n        return this.#getSerialized(true, true);\n    }\n\n    /**\n     *  The transaction pre-image.\n     *\n     *  The hash of this is the digest which needs to be signed to\n     *  authorize this transaction.\n     */\n    get unsignedSerialized(): string {\n        return this.#getSerialized(false, false);\n    }\n\n    /**\n     *  Return the most \"likely\" type; currently the highest\n     *  supported transaction type.\n     */\n    inferType(): number {\n        const types = this.inferTypes();\n\n        // Prefer London (EIP-1559) over Cancun (BLOb)\n        if (types.indexOf(2) >= 0) { return 2; }\n\n        // Return the highest inferred type\n        return <number>(types.pop());\n    }\n\n    /**\n     *  Validates the explicit properties and returns a list of compatible\n     *  transaction types.\n     */\n    inferTypes(): Array<number> {\n\n        // Checks that there are no conflicting properties set\n        const hasGasPrice = this.gasPrice != null;\n        const hasFee = (this.maxFeePerGas != null || this.maxPriorityFeePerGas != null);\n        const hasAccessList = (this.accessList != null);\n        const hasBlob = (this.#maxFeePerBlobGas != null || this.#blobVersionedHashes);\n\n        //if (hasGasPrice && hasFee) {\n        //    throw new Error(\"transaction cannot have gasPrice and maxFeePerGas\");\n        //}\n\n        if (this.maxFeePerGas != null && this.maxPriorityFeePerGas != null) {\n            assert(this.maxFeePerGas >= this.maxPriorityFeePerGas, \"priorityFee cannot be more than maxFee\", \"BAD_DATA\", { value: this });\n        }\n\n        //if (this.type === 2 && hasGasPrice) {\n        //    throw new Error(\"eip-1559 transaction cannot have gasPrice\");\n        //}\n\n        assert(!hasFee || (this.type !== 0 && this.type !== 1), \"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas\", \"BAD_DATA\", { value: this });\n        assert(this.type !== 0 || !hasAccessList, \"legacy transaction cannot have accessList\", \"BAD_DATA\", { value: this })\n\n        const types: Array<number> = [ ];\n\n        // Explicit type\n        if (this.type != null) {\n            types.push(this.type);\n\n        } else {\n            if (this.authorizationList && this.authorizationList.length) {\n                types.push(4);\n            } else if (hasFee) {\n                types.push(2);\n            } else if (hasGasPrice) {\n                types.push(1);\n                if (!hasAccessList) { types.push(0); }\n            } else if (hasAccessList) {\n                types.push(1);\n                types.push(2);\n            } else if (hasBlob && this.to) {\n                types.push(3);\n            } else {\n                types.push(0);\n                types.push(1);\n                types.push(2);\n                types.push(3);\n            }\n        }\n\n        types.sort();\n\n        return types;\n    }\n\n    /**\n     *  Returns true if this transaction is a legacy transaction (i.e.\n     *  ``type === 0``).\n     *\n     *  This provides a Type Guard that the related properties are\n     *  non-null.\n     */\n    isLegacy(): this is (Transaction & { type: 0, gasPrice: bigint }) {\n        return (this.type === 0);\n    }\n\n    /**\n     *  Returns true if this transaction is berlin hardform transaction (i.e.\n     *  ``type === 1``).\n     *\n     *  This provides a Type Guard that the related properties are\n     *  non-null.\n     */\n    isBerlin(): this is (Transaction & { type: 1, gasPrice: bigint, accessList: AccessList }) {\n        return (this.type === 1);\n    }\n\n    /**\n     *  Returns true if this transaction is london hardform transaction (i.e.\n     *  ``type === 2``).\n     *\n     *  This provides a Type Guard that the related properties are\n     *  non-null.\n     */\n    isLondon(): this is (Transaction & { type: 2, accessList: AccessList, maxFeePerGas: bigint, maxPriorityFeePerGas: bigint }) {\n        return (this.type === 2);\n    }\n\n    /**\n     *  Returns true if this transaction is an [[link-eip-4844]] BLOB\n     *  transaction.\n     *\n     *  This provides a Type Guard that the related properties are\n     *  non-null.\n     */\n    isCancun(): this is (Transaction & { type: 3, to: string, accessList: AccessList, maxFeePerGas: bigint, maxPriorityFeePerGas: bigint, maxFeePerBlobGas: bigint, blobVersionedHashes: Array<string> }) {\n        return (this.type === 3);\n    }\n\n    /**\n     *  Create a copy of this transaciton.\n     */\n    clone(): Transaction {\n        return Transaction.from(this);\n    }\n\n    /**\n     *  Return a JSON-friendly object.\n     */\n    toJSON(): any {\n        const s = (v: null | bigint) => {\n            if (v == null) { return null; }\n            return v.toString();\n        };\n\n        return {\n            type: this.type,\n            to: this.to,\n//            from: this.from,\n            data: this.data,\n            nonce: this.nonce,\n            gasLimit: s(this.gasLimit),\n            gasPrice: s(this.gasPrice),\n            maxPriorityFeePerGas: s(this.maxPriorityFeePerGas),\n            maxFeePerGas: s(this.maxFeePerGas),\n            value: s(this.value),\n            chainId: s(this.chainId),\n            sig: this.signature ? this.signature.toJSON(): null,\n            accessList: this.accessList\n        };\n    }\n\n    /**\n     *  Create a **Transaction** from a serialized transaction or a\n     *  Transaction-like object.\n     */\n    static from(tx?: string | TransactionLike<string>): Transaction {\n        if (tx == null) { return new Transaction(); }\n\n        if (typeof(tx) === \"string\") {\n            const payload = getBytes(tx);\n\n            if (payload[0] >= 0x7f) { // @TODO: > vs >= ??\n                return Transaction.from(_parseLegacy(payload));\n            }\n\n            switch(payload[0]) {\n                case 1: return Transaction.from(_parseEip2930(payload));\n                case 2: return Transaction.from(_parseEip1559(payload));\n                case 3: return Transaction.from(_parseEip4844(payload));\n                case 4: return Transaction.from(_parseEip7702(payload));\n            }\n            assert(false, \"unsupported transaction type\", \"UNSUPPORTED_OPERATION\", { operation: \"from\" });\n        }\n\n        const result = new Transaction();\n        if (tx.type != null) { result.type = tx.type; }\n        if (tx.to != null) { result.to = tx.to; }\n        if (tx.nonce != null) { result.nonce = tx.nonce; }\n        if (tx.gasLimit != null) { result.gasLimit = tx.gasLimit; }\n        if (tx.gasPrice != null) { result.gasPrice = tx.gasPrice; }\n        if (tx.maxPriorityFeePerGas != null) { result.maxPriorityFeePerGas = tx.maxPriorityFeePerGas; }\n        if (tx.maxFeePerGas != null) { result.maxFeePerGas = tx.maxFeePerGas; }\n        if (tx.maxFeePerBlobGas != null) { result.maxFeePerBlobGas = tx.maxFeePerBlobGas; }\n        if (tx.data != null) { result.data = tx.data; }\n        if (tx.value != null) { result.value = tx.value; }\n        if (tx.chainId != null) { result.chainId = tx.chainId; }\n        if (tx.signature != null) { result.signature = Signature.from(tx.signature); }\n        if (tx.accessList != null) { result.accessList = tx.accessList; }\n        if (tx.authorizationList != null) {\n            result.authorizationList = tx.authorizationList;\n        }\n\n        // This will get overwritten by blobs, if present\n        if (tx.blobVersionedHashes != null) { result.blobVersionedHashes = tx.blobVersionedHashes; }\n\n        // Make sure we assign the kzg before assigning blobs, which\n        // require the library in the event raw blob data is provided.\n        if (tx.kzg != null) { result.kzg = tx.kzg; }\n        if (tx.blobs != null) { result.blobs = tx.blobs; }\n\n        if (tx.hash != null) {\n            assertArgument(result.isSigned(), \"unsigned transaction cannot define '.hash'\", \"tx\", tx);\n            assertArgument(result.hash === tx.hash, \"hash mismatch\", \"tx\", tx);\n        }\n\n        if (tx.from != null) {\n            assertArgument(result.isSigned(), \"unsigned transaction cannot define '.from'\", \"tx\", tx);\n            assertArgument(result.from.toLowerCase() === (tx.from || \"\").toLowerCase(), \"from mismatch\", \"tx\", tx);\n        }\n\n        return result;\n    }\n}\n","/**\n *  The [Base58 Encoding](link-base58) scheme allows a **numeric** value\n *  to be encoded as a compact string using a radix of 58 using only\n *  alpha-numeric characters. Confusingly similar characters are omitted\n *  (i.e. ``\"l0O\"``).\n *\n *  Note that Base58 encodes a **numeric** value, not arbitrary bytes,\n *  since any zero-bytes on the left would get removed. To mitigate this\n *  issue most schemes that use Base58 choose specific high-order values\n *  to ensure non-zero prefixes.\n *\n *  @_subsection: api/utils:Base58 Encoding [about-base58]\n */\n\nimport { getBytes } from \"./data.js\";\nimport { assertArgument } from \"./errors.js\";\nimport { toBigInt } from \"./maths.js\";\n\nimport type { BytesLike } from \"./index.js\";\n\n\nconst Alphabet = \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\";\nlet Lookup: null | Record<string, bigint> = null;\n\nfunction getAlpha(letter: string): bigint {\n    if (Lookup == null) {\n        Lookup = { };\n        for (let i = 0; i < Alphabet.length; i++) {\n            Lookup[Alphabet[i]] = BigInt(i);\n        }\n    }\n    const result = Lookup[letter];\n    assertArgument(result != null, `invalid base58 value`, \"letter\", letter);\n    return result;\n}\n\n\nconst BN_0 = BigInt(0);\nconst BN_58 = BigInt(58);\n\n/**\n *  Encode %%value%% as a Base58-encoded string.\n */\nexport function encodeBase58(_value: BytesLike): string {\n    const bytes = getBytes(_value);\n\n    let value = toBigInt(bytes);\n    let result = \"\";\n    while (value) {\n        result = Alphabet[Number(value % BN_58)] + result;\n        value /= BN_58;\n    }\n\n    // Account for leading padding zeros\n    for (let i = 0; i < bytes.length; i++) {\n        if (bytes[i]) { break; }\n        result = Alphabet[0] + result;\n    }\n\n    return result;\n}\n\n/**\n *  Decode the Base58-encoded %%value%%.\n */\nexport function decodeBase58(value: string): bigint {\n    let result = BN_0;\n    for (let i = 0; i < value.length; i++) {\n        result *= BN_58;\n        result += getAlpha(value[i]);\n    }\n    return result;\n}\n","/**\n *  ENS is a service which allows easy-to-remember names to map to\n *  network addresses.\n *\n *  @_section: api/providers/ens-resolver:ENS Resolver  [about-ens-rsolver]\n */\n\nimport { getAddress } from \"../address/index.js\";\nimport { ZeroAddress } from \"../constants/index.js\";\nimport { Contract } from \"../contract/index.js\";\nimport { dnsEncode, namehash } from \"../hash/index.js\";\nimport {\n    hexlify, isHexString, toBeHex,\n    defineProperties, encodeBase58,\n    assert, assertArgument, isError,\n    FetchRequest\n} from \"../utils/index.js\";\n\nimport type { FunctionFragment } from \"../abi/index.js\";\n\nimport type { BytesLike } from \"../utils/index.js\";\n\nimport type { AbstractProvider, AbstractProviderPlugin } from \"./abstract-provider.js\";\nimport type { EnsPlugin } from \"./plugins-network.js\";\nimport type { Provider } from \"./provider.js\";\n\n// @TODO: This should use the fetch-data:ipfs gateway\n// Trim off the ipfs:// prefix and return the default gateway URL\nfunction getIpfsLink(link: string): string {\n    if (link.match(/^ipfs:\\/\\/ipfs\\//i)) {\n        link = link.substring(12);\n    } else if (link.match(/^ipfs:\\/\\//i)) {\n        link = link.substring(7);\n    } else {\n        assertArgument(false, \"unsupported IPFS format\", \"link\", link);\n    }\n\n    return `https:/\\/gateway.ipfs.io/ipfs/${ link }`;\n}\n\n/**\n *  The type of data found during a steip during avatar resolution.\n */\nexport type AvatarLinkageType = \"name\" | \"avatar\" | \"!avatar\" | \"url\" | \"data\" | \"ipfs\" |\n    \"erc721\" | \"erc1155\" | \"!erc721-caip\" | \"!erc1155-caip\" |\n    \"!owner\" | \"owner\" | \"!balance\" | \"balance\" |\n    \"metadata-url-base\" | \"metadata-url-expanded\" | \"metadata-url\" | \"!metadata-url\" |\n    \"!metadata\" | \"metadata\" |\n    \"!imageUrl\" | \"imageUrl-ipfs\" | \"imageUrl\" | \"!imageUrl-ipfs\";\n\n/**\n *  An individual record for each step during avatar resolution.\n */\nexport interface AvatarLinkage {\n    /**\n     *  The type of linkage.\n     */\n    type: AvatarLinkageType;\n\n    /**\n     *  The linkage value.\n     */\n    value: string;\n};\n\n/**\n *  When resolving an avatar for an ENS name, there are many\n *  steps involved, fetching metadata, validating results, et cetera.\n *\n *  Some applications may wish to analyse this data, or use this data\n *  to diagnose promblems, so an **AvatarResult** provides details of\n *  each completed step during avatar resolution.\n */\nexport interface AvatarResult {\n    /**\n     *  How the [[url]] was arrived at, resolving the many steps required\n     *  for an avatar URL.\n     */\n    linkage: Array<AvatarLinkage>;\n\n    /**\n     *  The avatar URL or null if the avatar was not set, or there was\n     *  an issue during validation (such as the address not owning the\n     *  avatar or a metadata error).\n     */\n    url: null | string;\n};\n\n/**\n *  A provider plugin super-class for processing multicoin address types.\n */\nexport abstract class MulticoinProviderPlugin implements AbstractProviderPlugin {\n    /**\n     *  The name.\n     */\n    readonly name!: string;\n\n    /**\n     *  Creates a new **MulticoinProviderPluing** for %%name%%.\n     */\n    constructor(name: string) {\n        defineProperties<MulticoinProviderPlugin>(this, { name });\n    }\n\n    connect(proivder: Provider): MulticoinProviderPlugin {\n        return this;\n    }\n\n    /**\n     *  Returns ``true`` if %%coinType%% is supported by this plugin.\n     */\n    supportsCoinType(coinType: number): boolean {\n        return false;\n    }\n\n    /**\n     *  Resolves to the encoded %%address%% for %%coinType%%.\n     */\n    async encodeAddress(coinType: number, address: string): Promise<string> {\n        throw new Error(\"unsupported coin\");\n    }\n\n    /**\n     *  Resolves to the decoded %%data%% for %%coinType%%.\n     */\n    async decodeAddress(coinType: number, data: BytesLike): Promise<string> {\n        throw new Error(\"unsupported coin\");\n    }\n}\n\nconst BasicMulticoinPluginId = \"org.ethers.plugins.provider.BasicMulticoin\";\n\n/**\n *  A **BasicMulticoinProviderPlugin** provides service for common\n *  coin types, which do not require additional libraries to encode or\n *  decode.\n */\nexport class BasicMulticoinProviderPlugin extends MulticoinProviderPlugin {\n    /**\n     *  Creates a new **BasicMulticoinProviderPlugin**.\n     */\n    constructor() {\n        super(BasicMulticoinPluginId);\n    }\n}\n\nconst matcherIpfs = new RegExp(\"^(ipfs):/\\/(.*)$\", \"i\");\nconst matchers = [\n    new RegExp(\"^(https):/\\/(.*)$\", \"i\"),\n    new RegExp(\"^(data):(.*)$\", \"i\"),\n    matcherIpfs,\n    new RegExp(\"^eip155:[0-9]+/(erc[0-9]+):(.*)$\", \"i\"),\n];\n\n/**\n *  A connected object to a resolved ENS name resolver, which can be\n *  used to query additional details.\n */\nexport class EnsResolver {\n    /**\n     *  The connected provider.\n     */\n    provider!: AbstractProvider;\n\n    /**\n     *  The address of the resolver.\n     */\n    address!: string;\n\n    /**\n     *  The name this resolver was resolved against.\n     */\n    name!: string;\n\n    // For EIP-2544 names, the ancestor that provided the resolver\n    #supports2544: null | Promise<boolean>;\n\n    #resolver: Contract;\n\n    constructor(provider: AbstractProvider, address: string, name: string) {\n        defineProperties<EnsResolver>(this, { provider, address, name });\n        this.#supports2544 = null;\n\n        this.#resolver = new Contract(address, [\n            \"function supportsInterface(bytes4) view returns (bool)\",\n            \"function resolve(bytes, bytes) view returns (bytes)\",\n            \"function addr(bytes32) view returns (address)\",\n            \"function addr(bytes32, uint) view returns (bytes)\",\n            \"function text(bytes32, string) view returns (string)\",\n            \"function contenthash(bytes32) view returns (bytes)\",\n        ], provider);\n\n    }\n\n    /**\n     *  Resolves to true if the resolver supports wildcard resolution.\n     */\n    async supportsWildcard(): Promise<boolean> {\n        if (this.#supports2544 == null) {\n            this.#supports2544 = (async () => {\n                try {\n                    return await this.#resolver.supportsInterface(\"0x9061b923\");\n                } catch (error) {\n                    // Wildcard resolvers must understand supportsInterface\n                    // and return true.\n                    if (isError(error, \"CALL_EXCEPTION\")) { return false; }\n\n                    // Let future attempts try again...\n                    this.#supports2544 = null;\n\n                    throw error;\n                }\n            })();\n        }\n\n        return await this.#supports2544;\n    }\n\n    async #fetch(funcName: string, params?: Array<any>): Promise<null | any> {\n        params = (params || []).slice();\n        const iface = this.#resolver.interface;\n\n        // The first parameters is always the nodehash\n        params.unshift(namehash(this.name))\n\n        let fragment: null | FunctionFragment = null;\n        if (await this.supportsWildcard()) {\n            fragment = iface.getFunction(funcName);\n            assert(fragment, \"missing fragment\", \"UNKNOWN_ERROR\", {\n                info: { funcName }\n            });\n\n            params = [\n                dnsEncode(this.name, 255),\n                iface.encodeFunctionData(fragment, params)\n            ];\n\n            funcName = \"resolve(bytes,bytes)\";\n        }\n\n        params.push({\n            enableCcipRead: true\n        });\n\n        try {\n            const result = await this.#resolver[funcName](...params);\n\n            if (fragment) {\n                return iface.decodeFunctionResult(fragment, result)[0];\n            }\n\n            return result;\n        } catch (error: any) {\n            if (!isError(error, \"CALL_EXCEPTION\")) { throw error; }\n        }\n\n        return null;\n    }\n\n    /**\n     *  Resolves to the address for %%coinType%% or null if the\n     *  provided %%coinType%% has not been configured.\n     */\n    async getAddress(coinType?: number): Promise<null | string> {\n        if (coinType == null) { coinType = 60; }\n        if (coinType === 60) {\n            try {\n                const result = await this.#fetch(\"addr(bytes32)\");\n\n                // No address\n                if (result == null || result === ZeroAddress) { return null; }\n\n                return result;\n            } catch (error: any) {\n                if (isError(error, \"CALL_EXCEPTION\")) { return null; }\n                throw error;\n            }\n        }\n\n        // Try decoding its EVM canonical chain as an EVM chain address first\n        if (coinType >= 0 && coinType < 0x80000000) {\n            let ethCoinType = coinType + 0x80000000;\n\n            const data = await this.#fetch(\"addr(bytes32,uint)\", [ ethCoinType ]);\n            if (isHexString(data, 20)) { return getAddress(data); }\n        }\n\n        let coinPlugin: null | MulticoinProviderPlugin = null;\n        for (const plugin of this.provider.plugins) {\n            if (!(plugin instanceof MulticoinProviderPlugin)) { continue; }\n            if (plugin.supportsCoinType(coinType)) {\n                coinPlugin = plugin;\n                break;\n            }\n        }\n\n        if (coinPlugin == null) { return null; }\n\n        // keccak256(\"addr(bytes32,uint256\")\n        const data = await this.#fetch(\"addr(bytes32,uint)\", [ coinType ]);\n\n        // No address\n        if (data == null || data === \"0x\") { return null; }\n\n        // Compute the address\n        const address = await coinPlugin.decodeAddress(coinType, data);\n\n        if (address != null) { return address; }\n\n        assert(false, `invalid coin data`, \"UNSUPPORTED_OPERATION\", {\n            operation: `getAddress(${ coinType })`,\n            info: { coinType, data }\n        });\n    }\n\n    /**\n     *  Resolves to the EIP-634 text record for %%key%%, or ``null``\n     *  if unconfigured.\n     */\n    async getText(key: string): Promise<null | string> {\n        const data = await this.#fetch(\"text(bytes32,string)\", [ key ]);\n        if (data == null || data === \"0x\") { return null; }\n        return data;\n    }\n\n    /**\n     *  Rsolves to the content-hash or ``null`` if unconfigured.\n     */\n    async getContentHash(): Promise<null | string> {\n        // keccak256(\"contenthash()\")\n        const data = await this.#fetch(\"contenthash(bytes32)\");\n\n        // No contenthash\n        if (data == null || data === \"0x\") { return null; }\n\n        // IPFS (CID: 1, Type: 70=DAG-PB, 72=libp2p-key)\n        const ipfs = data.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);\n        if (ipfs) {\n            const scheme = (ipfs[1] === \"e3010170\") ? \"ipfs\": \"ipns\";\n            const length = parseInt(ipfs[4], 16);\n            if (ipfs[5].length === length * 2) {\n                return `${ scheme }:/\\/${ encodeBase58(\"0x\" + ipfs[2])}`;\n            }\n        }\n\n        // Swarm (CID: 1, Type: swarm-manifest; hash/length hard-coded to keccak256/32)\n        const swarm = data.match(/^0xe40101fa011b20([0-9a-f]*)$/)\n        if (swarm && swarm[1].length === 64) {\n            return `bzz:/\\/${ swarm[1] }`;\n        }\n\n        assert(false, `invalid or unsupported content hash data`, \"UNSUPPORTED_OPERATION\", {\n            operation: \"getContentHash()\",\n            info: { data }\n        });\n    }\n\n    /**\n     *  Resolves to the avatar url or ``null`` if the avatar is either\n     *  unconfigured or incorrectly configured (e.g. references an NFT\n     *  not owned by the address).\n     *\n     *  If diagnosing issues with configurations, the [[_getAvatar]]\n     *  method may be useful.\n     */\n    async getAvatar(): Promise<null | string> {\n        const avatar = await this._getAvatar();\n        return avatar.url;\n    }\n\n    /**\n     *  When resolving an avatar, there are many steps involved, such\n     *  fetching metadata and possibly validating ownership of an\n     *  NFT.\n     *\n     *  This method can be used to examine each step and the value it\n     *  was working from.\n     */\n    async _getAvatar(): Promise<AvatarResult> {\n        const linkage: Array<AvatarLinkage> = [ { type: \"name\", value: this.name } ];\n        try {\n            // test data for ricmoo.eth\n            //const avatar = \"eip155:1/erc721:0x265385c7f4132228A0d54EB1A9e7460b91c0cC68/29233\";\n            const avatar = await this.getText(\"avatar\");\n            if (avatar == null) {\n                linkage.push({ type: \"!avatar\", value: \"\" });\n                return { url: null, linkage };\n            }\n            linkage.push({ type: \"avatar\", value: avatar });\n\n            for (let i = 0; i < matchers.length; i++) {\n                const match = avatar.match(matchers[i]);\n                if (match == null) { continue; }\n\n                const scheme = match[1].toLowerCase();\n\n                switch (scheme) {\n                    case \"https\":\n                    case \"data\":\n                        linkage.push({ type: \"url\", value: avatar });\n                        return { linkage, url: avatar };\n                    case \"ipfs\": {\n                        const url = getIpfsLink(avatar);\n                        linkage.push({ type: \"ipfs\", value: avatar });\n                        linkage.push({ type: \"url\", value: url });\n                        return { linkage, url };\n                    }\n\n                    case \"erc721\":\n                    case \"erc1155\": {\n                        // Depending on the ERC type, use tokenURI(uint256) or url(uint256)\n                        const selector = (scheme === \"erc721\") ? \"tokenURI(uint256)\": \"uri(uint256)\";\n                        linkage.push({ type: scheme, value: avatar });\n\n                        // The owner of this name\n                        const owner = await this.getAddress();\n                        if (owner == null) {\n                            linkage.push({ type: \"!owner\", value: \"\" });\n                            return { url: null, linkage };\n                        }\n\n                        const comps = (match[2] || \"\").split(\"/\");\n                        if (comps.length !== 2) {\n                            linkage.push({ type: <any>`!${ scheme }caip`, value: (match[2] || \"\") });\n                            return { url: null, linkage };\n                        }\n\n                        const tokenId = comps[1];\n\n                        const contract = new Contract(comps[0], [\n                            // ERC-721\n                            \"function tokenURI(uint) view returns (string)\",\n                            \"function ownerOf(uint) view returns (address)\",\n\n                            // ERC-1155\n                            \"function uri(uint) view returns (string)\",\n                            \"function balanceOf(address, uint256) view returns (uint)\"\n                        ], this.provider);\n\n                        // Check that this account owns the token\n                        if (scheme === \"erc721\") {\n                            const tokenOwner = await contract.ownerOf(tokenId);\n\n                            if (owner !== tokenOwner) {\n                                linkage.push({ type: \"!owner\", value: tokenOwner });\n                                return { url: null, linkage };\n                            }\n                            linkage.push({ type: \"owner\", value: tokenOwner });\n\n                        } else if (scheme === \"erc1155\") {\n                            const balance = await contract.balanceOf(owner, tokenId);\n                            if (!balance) {\n                                linkage.push({ type: \"!balance\", value: \"0\" });\n                                return { url: null, linkage };\n                            }\n                            linkage.push({ type: \"balance\", value: balance.toString() });\n                        }\n\n                        // Call the token contract for the metadata URL\n                        let metadataUrl = await contract[selector](tokenId);\n                        if (metadataUrl == null || metadataUrl === \"0x\") {\n                            linkage.push({ type: \"!metadata-url\", value: \"\" });\n                            return { url: null, linkage };\n                        }\n\n                        linkage.push({ type: \"metadata-url-base\", value: metadataUrl });\n\n                        // ERC-1155 allows a generic {id} in the URL\n                        if (scheme === \"erc1155\") {\n                            metadataUrl = metadataUrl.replace(\"{id}\", toBeHex(tokenId, 32).substring(2));\n                            linkage.push({ type: \"metadata-url-expanded\", value: metadataUrl });\n                        }\n\n                        // Transform IPFS metadata links\n                        if (metadataUrl.match(/^ipfs:/i)) {\n                            metadataUrl = getIpfsLink(metadataUrl);\n                        }\n                        linkage.push({ type: \"metadata-url\", value: metadataUrl });\n\n                        // Get the token metadata\n                        let metadata: any = { };\n                        const response = await (new FetchRequest(metadataUrl)).send();\n                        response.assertOk();\n\n                        try {\n                            metadata = response.bodyJson;\n                        } catch (error) {\n                            try {\n                                linkage.push({ type: \"!metadata\", value: response.bodyText });\n                            } catch (error) {\n                                const bytes = response.body;\n                                if (bytes) {\n                                    linkage.push({ type: \"!metadata\", value: hexlify(bytes) });\n                                }\n                                return { url: null, linkage };\n                            }\n                            return { url: null, linkage };\n                        }\n\n                        if (!metadata) {\n                            linkage.push({ type: \"!metadata\", value: \"\" });\n                            return { url: null, linkage };\n                        }\n\n                        linkage.push({ type: \"metadata\", value: JSON.stringify(metadata) });\n\n                        // Pull the image URL out\n                        let imageUrl = metadata.image;\n                        if (typeof(imageUrl) !== \"string\") {\n                            linkage.push({ type: \"!imageUrl\", value: \"\" });\n                            return { url: null, linkage };\n                        }\n\n                        if (imageUrl.match(/^(https:\\/\\/|data:)/i)) {\n                            // Allow\n                        } else {\n                            // Transform IPFS link to gateway\n                            const ipfs = imageUrl.match(matcherIpfs);\n                            if (ipfs == null) {\n                                linkage.push({ type: \"!imageUrl-ipfs\", value: imageUrl });\n                                return { url: null, linkage };\n                            }\n\n                            linkage.push({ type: \"imageUrl-ipfs\", value: imageUrl });\n                            imageUrl = getIpfsLink(imageUrl);\n                        }\n\n                        linkage.push({ type: \"url\", value: imageUrl });\n\n                        return { linkage, url: imageUrl };\n                    }\n                }\n            }\n        } catch (error) { }\n\n        return { linkage, url: null };\n    }\n\n    static async getEnsAddress(provider: Provider): Promise<string> {\n        const network = await provider.getNetwork();\n\n        const ensPlugin = network.getPlugin<EnsPlugin>(\"org.ethers.plugins.network.Ens\");\n\n        // No ENS...\n        assert(ensPlugin, \"network does not support ENS\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"getEnsAddress\", info: { network } });\n\n        return ensPlugin.address;\n    }\n\n    static async #getResolver(provider: Provider, name: string): Promise<null | string> {\n        const ensAddr = await EnsResolver.getEnsAddress(provider);\n\n        try {\n            const contract = new Contract(ensAddr, [\n                \"function resolver(bytes32) view returns (address)\"\n            ], provider);\n\n            const addr = await contract.resolver(namehash(name), {\n                enableCcipRead: true\n            });\n\n            if (addr === ZeroAddress) { return null; }\n            return addr;\n\n        } catch (error) {\n            // ENS registry cannot throw errors on resolver(bytes32),\n            // so probably a link error\n            throw error;\n        }\n\n        return null;\n    }\n\n    /**\n     *  Resolve to the ENS resolver for %%name%% using %%provider%% or\n     *  ``null`` if unconfigured.\n     */\n    static async fromName(provider: AbstractProvider, name: string): Promise<null | EnsResolver> {\n\n        let currentName = name;\n        while (true) {\n            if (currentName === \"\" || currentName === \".\") { return null; }\n\n            // Optimization since the eth node cannot change and does\n            // not have a wildcard resolver\n            if (name !== \"eth\" && currentName === \"eth\") { return null; }\n\n            // Check the current node for a resolver\n            const addr = await EnsResolver.#getResolver(provider, currentName);\n\n            // Found a resolver!\n            if (addr != null) {\n                const resolver = new EnsResolver(provider, addr, name);\n\n                // Legacy resolver found, using EIP-2544 so it isn't safe to use\n                if (currentName !== name && !(await resolver.supportsWildcard())) { return null; }\n\n                return resolver;\n            }\n\n            // Get the parent node\n            currentName = currentName.split(\".\").slice(1).join(\".\");\n        }\n    }\n}\n","/**\n *  @_ignore\n */\nimport { getAddress, getCreateAddress } from \"../address/index.js\";\nimport { Signature } from \"../crypto/index.js\"\nimport { accessListify } from \"../transaction/index.js\";\nimport {\n    getBigInt, getNumber, hexlify, isHexString, zeroPadValue,\n    assert, assertArgument\n} from \"../utils/index.js\";\n\nimport type { SignatureLike } from \"../crypto/index.js\"\nimport type {\n    BlockParams, LogParams,\n    TransactionReceiptParams, TransactionResponseParams,\n} from \"./formatting.js\";\n\n\nconst BN_0 = BigInt(0);\n\nexport type FormatFunc = (value: any) => any;\n\nexport function allowNull(format: FormatFunc, nullValue?: any): FormatFunc {\n    return (function(value: any) {\n        if (value == null) { return nullValue; }\n        return format(value);\n    });\n}\n\nexport function arrayOf(format: FormatFunc, allowNull?: boolean): FormatFunc {\n    return ((array: any) => {\n        if (allowNull && array == null) { return null; }\n        if (!Array.isArray(array)) { throw new Error(\"not an array\"); }\n        return array.map((i) => format(i));\n    });\n}\n\n// Requires an object which matches a fleet of other formatters\n// Any FormatFunc may return `undefined` to have the value omitted\n// from the result object. Calls preserve `this`.\nexport function object(format: Record<string, FormatFunc>, altNames?: Record<string, Array<string>>): FormatFunc {\n    return ((value: any) => {\n        const result: any = { };\n        for (const key in format) {\n            let srcKey = key;\n            if (altNames && key in altNames && !(srcKey in value)) {\n                for (const altKey of altNames[key]) {\n                    if (altKey in value) {\n                        srcKey = altKey;\n                        break;\n                    }\n                }\n            }\n\n            try {\n                const nv = format[key](value[srcKey]);\n                if (nv !== undefined) { result[key] = nv; }\n            } catch (error) {\n                const message = (error instanceof Error) ? error.message: \"not-an-error\";\n                assert(false, `invalid value for value.${ key } (${ message })`, \"BAD_DATA\", { value })\n            }\n        }\n        return result;\n    });\n}\n\nexport function formatBoolean(value: any): boolean {\n    switch (value) {\n        case true: case \"true\":\n            return true;\n        case false: case \"false\":\n            return false;\n    }\n    assertArgument(false, `invalid boolean; ${ JSON.stringify(value) }`, \"value\", value);\n}\n\nexport function formatData(value: string): string {\n    assertArgument(isHexString(value, true), \"invalid data\", \"value\", value);\n    return value;\n}\n\nexport function formatHash(value: any): string {\n    assertArgument(isHexString(value, 32), \"invalid hash\", \"value\", value);\n    return value;\n}\n\nexport function formatUint256(value: any): string {\n    if (!isHexString(value)) {\n        throw new Error(\"invalid uint256\");\n    }\n    return zeroPadValue(value, 32);\n}\n\nconst _formatLog = object({\n    address: getAddress,\n    blockHash: formatHash,\n    blockNumber: getNumber,\n    data: formatData,\n    index: getNumber,\n    removed: allowNull(formatBoolean, false),\n    topics: arrayOf(formatHash),\n    transactionHash: formatHash,\n    transactionIndex: getNumber,\n}, {\n    index: [ \"logIndex\" ]\n});\n\nexport function formatLog(value: any): LogParams {\n    return _formatLog(value);\n}\n\nconst _formatBlock = object({\n    hash: allowNull(formatHash),\n    parentHash: formatHash,\n    parentBeaconBlockRoot: allowNull(formatHash, null),\n\n    number: getNumber,\n\n    timestamp: getNumber,\n    nonce: allowNull(formatData),\n    difficulty: getBigInt,\n\n    gasLimit: getBigInt,\n    gasUsed: getBigInt,\n\n    stateRoot: allowNull(formatHash, null),\n    receiptsRoot: allowNull(formatHash, null),\n\n    blobGasUsed: allowNull(getBigInt, null),\n    excessBlobGas: allowNull(getBigInt, null),\n\n    miner: allowNull(getAddress),\n    prevRandao: allowNull(formatHash, null),\n    extraData: formatData,\n\n    baseFeePerGas: allowNull(getBigInt)\n}, {\n    prevRandao: [ \"mixHash\" ]\n});\n\nexport function formatBlock(value: any): BlockParams {\n    const result = _formatBlock(value);\n    result.transactions = value.transactions.map((tx: string | TransactionResponseParams) => {\n        if (typeof(tx) === \"string\") { return tx; }\n        return formatTransactionResponse(tx);\n    });\n    return result;\n}\n\nconst _formatReceiptLog = object({\n    transactionIndex: getNumber,\n    blockNumber: getNumber,\n    transactionHash: formatHash,\n    address: getAddress,\n    topics: arrayOf(formatHash),\n    data: formatData,\n    index: getNumber,\n    blockHash: formatHash,\n}, {\n    index: [ \"logIndex\" ]\n});\n\nexport function formatReceiptLog(value: any): LogParams {\n    return _formatReceiptLog(value);\n}\n\nconst _formatTransactionReceipt = object({\n    to: allowNull(getAddress, null),\n    from: allowNull(getAddress, null),\n    contractAddress: allowNull(getAddress, null),\n    // should be allowNull(hash), but broken-EIP-658 support is handled in receipt\n    index: getNumber,\n    root: allowNull(hexlify),\n    gasUsed: getBigInt,\n    blobGasUsed: allowNull(getBigInt, null),\n    logsBloom: allowNull(formatData),\n    blockHash: formatHash,\n    hash: formatHash,\n    logs: arrayOf(formatReceiptLog),\n    blockNumber: getNumber,\n    //confirmations: allowNull(getNumber, null),\n    cumulativeGasUsed: getBigInt,\n    effectiveGasPrice: allowNull(getBigInt),\n    blobGasPrice: allowNull(getBigInt, null),\n    status: allowNull(getNumber),\n    type: allowNull(getNumber, 0)\n}, {\n    effectiveGasPrice: [ \"gasPrice\" ],\n    hash: [ \"transactionHash\" ],\n    index: [ \"transactionIndex\" ],\n});\n\nexport function formatTransactionReceipt(value: any): TransactionReceiptParams {\n    return _formatTransactionReceipt(value);\n}\n\nexport function formatTransactionResponse(value: any): TransactionResponseParams {\n\n    // Some clients (TestRPC) do strange things like return 0x0 for the\n    // 0 address; correct this to be a real address\n    if (value.to && getBigInt(value.to) === BN_0) {\n        value.to = \"0x0000000000000000000000000000000000000000\";\n    }\n\n    const result = object({\n        hash: formatHash,\n\n        // Some nodes do not return this, usually test nodes (like Ganache)\n        index: allowNull(getNumber, undefined),\n\n        type: (value: any) => {\n            if (value === \"0x\" || value == null) { return 0; }\n            return getNumber(value);\n        },\n        accessList: allowNull(accessListify, null),\n        blobVersionedHashes: allowNull(arrayOf(formatHash, true), null),\n\n        authorizationList: allowNull(arrayOf((v: any) => {\n            let sig: SignatureLike;\n            if (v.signature) {\n                sig = v.signature;\n\n            } else {\n                let yParity = v.yParity;\n                if (yParity === \"0x1b\") {\n                    yParity = 0;\n                } else if (yParity === \"0x1c\") {\n                    yParity = 1;\n                }\n                sig = Object.assign({ }, v, { yParity });\n            }\n\n            return {\n                address: getAddress(v.address),\n                chainId: getBigInt(v.chainId),\n                nonce: getBigInt(v.nonce),\n                signature: Signature.from(sig)\n            };\n        }, false), null),\n\n        blockHash: allowNull(formatHash, null),\n        blockNumber: allowNull(getNumber, null),\n        transactionIndex: allowNull(getNumber, null),\n\n        from: getAddress,\n\n        // either (gasPrice) or (maxPriorityFeePerGas + maxFeePerGas) must be set\n        gasPrice: allowNull(getBigInt),\n        maxPriorityFeePerGas: allowNull(getBigInt),\n        maxFeePerGas: allowNull(getBigInt),\n        maxFeePerBlobGas: allowNull(getBigInt, null),\n\n        gasLimit: getBigInt,\n        to: allowNull(getAddress, null),\n        value: getBigInt,\n        nonce: getNumber,\n        data: formatData,\n\n        creates: allowNull(getAddress, null),\n\n        chainId: allowNull(getBigInt, null)\n    }, {\n        data: [ \"input\" ],\n        gasLimit: [ \"gas\" ],\n        index: [ \"transactionIndex\" ]\n    })(value);\n\n    // If to and creates are empty, populate the creates from the value\n    if (result.to == null && result.creates == null) {\n        result.creates = getCreateAddress(result);\n    }\n\n    // @TODO: Check fee data\n\n    // Add an access list to supported transaction types\n    if ((value.type === 1 || value.type === 2) && value.accessList == null) {\n        result.accessList = [ ];\n    }\n\n    // Compute the signature\n    if (value.signature) {\n        result.signature = Signature.from(value.signature);\n    } else {\n        result.signature = Signature.from(value);\n    }\n\n    // Some backends omit ChainId on legacy transactions, but we can compute it\n    if (result.chainId == null) {\n        const chainId = result.signature.legacyChainId;\n        if (chainId != null) { result.chainId = chainId; }\n    }\n\n\n    // @TODO: check chainID\n    /*\n    if (value.chainId != null) {\n        let chainId = value.chainId;\n\n        if (isHexString(chainId)) {\n            chainId = BigNumber.from(chainId).toNumber();\n        }\n\n        result.chainId = chainId;\n\n    } else {\n        let chainId = value.networkId;\n\n        // geth-etc returns chainId\n        if (chainId == null && result.v == null) {\n            chainId = value.chainId;\n        }\n\n        if (isHexString(chainId)) {\n            chainId = BigNumber.from(chainId).toNumber();\n        }\n\n        if (typeof(chainId) !== \"number\" && result.v != null) {\n            chainId = (result.v - 35) / 2;\n            if (chainId < 0) { chainId = 0; }\n            chainId = parseInt(chainId);\n        }\n\n        if (typeof(chainId) !== \"number\") { chainId = 0; }\n\n        result.chainId = chainId;\n    }\n    */\n\n    // 0x0000... should actually be null\n    if (result.blockHash && getBigInt(result.blockHash) === BN_0) {\n        result.blockHash = null;\n    }\n\n    return result;\n}\n","import { keccak256 } from \"../crypto/index.js\";\nimport {\n    concat, dataSlice, getBigInt, getBytes, encodeRlp, assertArgument\n} from \"../utils/index.js\";\n\nimport { getAddress } from \"./address.js\";\n\nimport type { BigNumberish, BytesLike } from \"../utils/index.js\";\n\n\n// http://ethereum.stackexchange.com/questions/760/how-is-the-address-of-an-ethereum-contract-computed\n\n/**\n *  Returns the address that would result from a ``CREATE`` for %%tx%%.\n *\n *  This can be used to compute the address a contract will be\n *  deployed to by an EOA when sending a deployment transaction (i.e.\n *  when the ``to`` address is ``null``).\n *\n *  This can also be used to compute the address a contract will be\n *  deployed to by a contract, by using the contract's address as the\n *  ``to`` and the contract's nonce.\n *\n *  @example\n *    from = \"0x8ba1f109551bD432803012645Ac136ddd64DBA72\";\n *    nonce = 5;\n *\n *    getCreateAddress({ from, nonce });\n *    //_result:\n */\nexport function getCreateAddress(tx: { from: string, nonce: BigNumberish }): string {\n    const from = getAddress(tx.from);\n    const nonce = getBigInt(tx.nonce, \"tx.nonce\");\n\n    let nonceHex = nonce.toString(16);\n    if (nonceHex === \"0\") {\n        nonceHex = \"0x\";\n    } else if (nonceHex.length % 2) {\n        nonceHex = \"0x0\" + nonceHex;\n    } else {\n        nonceHex = \"0x\" + nonceHex;\n    }\n\n    return getAddress(dataSlice(keccak256(encodeRlp([ from, nonceHex ])), 12));\n}\n\n/**\n *  Returns the address that would result from a ``CREATE2`` operation\n *  with the given %%from%%, %%salt%% and %%initCodeHash%%.\n *\n *  To compute the %%initCodeHash%% from a contract's init code, use\n *  the [[keccak256]] function.\n *\n *  For a quick overview and example of ``CREATE2``, see [[link-ricmoo-wisps]].\n *\n *  @example\n *    // The address of the contract\n *    from = \"0x8ba1f109551bD432803012645Ac136ddd64DBA72\"\n *\n *    // The salt\n *    salt = id(\"HelloWorld\")\n *\n *    // The hash of the initCode\n *    initCode = \"0x6394198df16000526103ff60206004601c335afa6040516060f3\";\n *    initCodeHash = keccak256(initCode)\n *\n *    getCreate2Address(from, salt, initCodeHash)\n *    //_result:\n */\nexport function getCreate2Address(_from: string, _salt: BytesLike, _initCodeHash: BytesLike): string {\n    const from = getAddress(_from);\n    const salt = getBytes(_salt, \"salt\");\n    const initCodeHash = getBytes(_initCodeHash, \"initCodeHash\");\n\n    assertArgument(salt.length === 32, \"salt must be 32 bytes\", \"salt\", _salt);\n\n    assertArgument(initCodeHash.length === 32, \"initCodeHash must be 32 bytes\", \"initCodeHash\", _initCodeHash);\n\n    return getAddress(dataSlice(keccak256(concat([ \"0xff\", from, salt, initCodeHash ])), 12))\n}\n","import { defineProperties } from \"../utils/properties.js\";\n\nimport { assertArgument } from \"../utils/index.js\";\n\nimport type { FeeData, Provider } from \"./provider.js\";\nimport type { FetchRequest } from \"../utils/fetch.js\";\n\n\nconst EnsAddress = \"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e\";\n\n/**\n *  A **NetworkPlugin** provides additional functionality on a [[Network]].\n */\nexport class NetworkPlugin {\n    /**\n     *  The name of the plugin.\n     *\n     *  It is recommended to use reverse-domain-notation, which permits\n     *  unique names with a known authority as well as hierarchal entries.\n     */\n    readonly name!: string;\n\n    /**\n     *  Creates a new **NetworkPlugin**.\n     */\n    constructor(name: string) {\n        defineProperties<NetworkPlugin>(this, { name });\n    }\n\n    /**\n     *  Creates a copy of this plugin.\n     */\n    clone(): NetworkPlugin {\n        return new NetworkPlugin(this.name);\n    }\n\n//    validate(network: Network): NetworkPlugin {\n//        return this;\n//    }\n}\n\n\n/**\n *  The gas cost parameters for a [[GasCostPlugin]].\n */\nexport type GasCostParameters = {\n    /**\n     *  The transactions base fee.\n     */\n    txBase?: number;\n\n    /**\n     *  The fee for creating a new account.\n     */\n    txCreate?: number;\n\n    /**\n     *  The fee per zero-byte in the data.\n     */\n    txDataZero?: number;\n\n    /**\n     *  The fee per non-zero-byte in the data.\n     */\n    txDataNonzero?: number;\n\n    /**\n     *  The fee per storage key in the [[link-eip-2930]] access list.\n     */\n    txAccessListStorageKey?: number;\n\n    /**\n     *  The fee per address in the [[link-eip-2930]] access list.\n     */\n    txAccessListAddress?: number;\n};\n\n/**\n *  A **GasCostPlugin** allows a network to provide alternative values when\n *  computing the intrinsic gas required for a transaction.\n */\nexport class GasCostPlugin extends NetworkPlugin implements GasCostParameters {\n    /**\n     *  The block number to treat these values as valid from.\n     *\n     *  This allows a hardfork to have updated values included as well as\n     *  mulutiple hardforks to be supported.\n     */\n    readonly effectiveBlock!: number;\n\n    /**\n     *  The transactions base fee.\n     */\n    readonly txBase!: number;\n\n    /**\n     *  The fee for creating a new account.\n     */\n    readonly txCreate!: number;\n\n    /**\n     *  The fee per zero-byte in the data.\n     */\n    readonly txDataZero!: number;\n\n    /**\n     *  The fee per non-zero-byte in the data.\n     */\n    readonly txDataNonzero!: number;\n\n    /**\n     *  The fee per storage key in the [[link-eip-2930]] access list.\n     */\n    readonly txAccessListStorageKey!: number;\n\n    /**\n     *  The fee per address in the [[link-eip-2930]] access list.\n     */\n    readonly txAccessListAddress!: number;\n\n\n    /**\n     *  Creates a new GasCostPlugin from %%effectiveBlock%% until the\n     *  latest block or another GasCostPlugin supercedes that block number,\n     *  with the associated %%costs%%.\n     */\n    constructor(effectiveBlock?: number, costs?: GasCostParameters) {\n        if (effectiveBlock == null) { effectiveBlock = 0; }\n        super(`org.ethers.network.plugins.GasCost#${ (effectiveBlock || 0) }`);\n\n        const props: Record<string, number> = { effectiveBlock };\n        function set(name: keyof GasCostParameters, nullish: number): void {\n            let value = (costs || { })[name];\n            if (value == null) { value = nullish; }\n            assertArgument(typeof(value) === \"number\", `invalud value for ${ name }`, \"costs\", costs);\n            props[name] = value;\n        }\n\n        set(\"txBase\", 21000);\n        set(\"txCreate\", 32000);\n        set(\"txDataZero\", 4);\n        set(\"txDataNonzero\", 16);\n        set(\"txAccessListStorageKey\", 1900);\n        set(\"txAccessListAddress\", 2400);\n\n        defineProperties<GasCostPlugin>(this, props);\n    }\n\n    clone(): GasCostPlugin {\n        return new GasCostPlugin(this.effectiveBlock, this);\n    }\n}\n\n/**\n *  An **EnsPlugin** allows a [[Network]] to specify the ENS Registry\n *  Contract address and the target network to use when using that\n *  contract.\n *\n *  Various testnets have their own instance of the contract to use, but\n *  in general, the mainnet instance supports multi-chain addresses and\n *  should be used.\n */\nexport class EnsPlugin extends NetworkPlugin {\n\n    /**\n     *  The ENS Registrty Contract address.\n     */\n    readonly address!: string;\n\n    /**\n     *  The chain ID that the ENS contract lives on.\n     */\n    readonly targetNetwork!: number;\n\n    /**\n     *  Creates a new **EnsPlugin** connected to %%address%% on the\n     *  %%targetNetwork%%. The default ENS address and mainnet is used\n     *  if unspecified.\n     */\n    constructor(address?: null | string, targetNetwork?: null | number) {\n        super(\"org.ethers.plugins.network.Ens\");\n        defineProperties<EnsPlugin>(this, {\n            address: (address || EnsAddress),\n            targetNetwork: ((targetNetwork == null) ? 1: targetNetwork)\n        });\n    }\n\n    clone(): EnsPlugin {\n        return new EnsPlugin(this.address, this.targetNetwork);\n    }\n}\n\n/**\n *  A **FeeDataNetworkPlugin** allows a network to provide and alternate\n *  means to specify its fee data.\n *\n *  For example, a network which does not support [[link-eip-1559]] may\n *  choose to use a Gas Station site to approximate the gas price.\n */\nexport class FeeDataNetworkPlugin extends NetworkPlugin {\n    readonly #feeDataFunc: (provider: Provider) => Promise<FeeData>;\n\n    /**\n     *  The fee data function provided to the constructor.\n     */\n    get feeDataFunc(): (provider: Provider) => Promise<FeeData> {\n        return this.#feeDataFunc;\n    }\n\n    /**\n     *  Creates a new **FeeDataNetworkPlugin**.\n     */\n    constructor(feeDataFunc: (provider: Provider) => Promise<FeeData>) {\n        super(\"org.ethers.plugins.network.FeeData\");\n        this.#feeDataFunc = feeDataFunc;\n    }\n\n    /**\n     *  Resolves to the fee data.\n     */\n    async getFeeData(provider: Provider): Promise<FeeData> {\n        return await this.#feeDataFunc(provider);\n    }\n\n    clone(): FeeDataNetworkPlugin {\n        return new FeeDataNetworkPlugin(this.#feeDataFunc);\n    }\n}\n\nexport class FetchUrlFeeDataNetworkPlugin extends NetworkPlugin {\n    readonly #url: string;\n    readonly #processFunc: (f: () => Promise<FeeData>, p: Provider, r: FetchRequest) => Promise<{ gasPrice?: null | bigint, maxFeePerGas?: null | bigint, maxPriorityFeePerGas?: null | bigint }>;\n\n    /**\n     *  The URL to initialize the FetchRequest with in %%processFunc%%.\n     */\n    get url(): string { return this.#url; }\n\n    /**\n     *  The callback to use when computing the FeeData.\n     */\n    get processFunc(): (f: () => Promise<FeeData>, p: Provider, r: FetchRequest) => Promise<{ gasPrice?: null | bigint, maxFeePerGas?: null | bigint, maxPriorityFeePerGas?: null | bigint }> { return this.#processFunc; }\n\n    /**\n     *  Creates a new **FetchUrlFeeDataNetworkPlugin** which will\n     *  be used when computing the fee data for the network.\n     */\n    constructor(url: string, processFunc: (f: () => Promise<FeeData>, p: Provider, r: FetchRequest) => Promise<{ gasPrice?: null | bigint, maxFeePerGas?: null | bigint, maxPriorityFeePerGas?: null | bigint }>) {\n        super(\"org.ethers.plugins.network.FetchUrlFeeDataPlugin\");\n        this.#url = url;\n        this.#processFunc = processFunc;\n    }\n\n    // We are immutable, so we can serve as our own clone\n    clone(): FetchUrlFeeDataNetworkPlugin { return this; }\n}\n\n/*\nexport class CustomBlockNetworkPlugin extends NetworkPlugin {\n    readonly #blockFunc: (provider: Provider, block: BlockParams<string>) => Block<string>;\n    readonly #blockWithTxsFunc: (provider: Provider, block: BlockParams<TransactionResponseParams>) => Block<TransactionResponse>;\n\n    constructor(blockFunc: (provider: Provider, block: BlockParams<string>) => Block<string>, blockWithTxsFunc: (provider: Provider, block: BlockParams<TransactionResponseParams>) => Block<TransactionResponse>) {\n        super(\"org.ethers.network-plugins.custom-block\");\n        this.#blockFunc = blockFunc;\n        this.#blockWithTxsFunc = blockWithTxsFunc;\n    }\n\n    async getBlock(provider: Provider, block: BlockParams<string>): Promise<Block<string>> {\n        return await this.#blockFunc(provider, block);\n    }\n\n    async getBlockions(provider: Provider, block: BlockParams<TransactionResponseParams>): Promise<Block<TransactionResponse>> {\n        return await this.#blockWithTxsFunc(provider, block);\n    }\n\n    clone(): CustomBlockNetworkPlugin {\n        return new CustomBlockNetworkPlugin(this.#blockFunc, this.#blockWithTxsFunc);\n    }\n}\n*/\n","/**\n *  A **Network** encapsulates the various properties required to\n *  interact with a specific chain.\n *\n *  @_subsection: api/providers:Networks  [networks]\n */\n\nimport { accessListify } from \"../transaction/index.js\";\nimport { getBigInt, assert, assertArgument } from \"../utils/index.js\";\n\nimport {\n    EnsPlugin, FetchUrlFeeDataNetworkPlugin, GasCostPlugin\n} from \"./plugins-network.js\";\n\nimport type { BigNumberish } from \"../utils/index.js\";\nimport type { TransactionLike } from \"../transaction/index.js\";\n\nimport type { NetworkPlugin } from \"./plugins-network.js\";\n\n\n/**\n *  A Networkish can be used to allude to a Network, by specifing:\n *  - a [[Network]] object\n *  - a well-known (or registered) network name\n *  - a well-known (or registered) chain ID\n *  - an object with sufficient details to describe a network\n */\nexport type Networkish = Network | number | bigint | string | {\n    name?: string,\n    chainId?: number,\n    //layerOneConnection?: Provider,\n    ensAddress?: string,\n    ensNetwork?: number\n};\n\n\n\n\n/* * * *\n// Networks which operation against an L2 can use this plugin to\n// specify how to access L1, for the purpose of resolving ENS,\n// for example.\nexport class LayerOneConnectionPlugin extends NetworkPlugin {\n    readonly provider!: Provider;\n// @TODO: Rename to ChainAccess and allow for connecting to any chain\n    constructor(provider: Provider) {\n        super(\"org.ethers.plugins.layer-one-connection\");\n        defineProperties<LayerOneConnectionPlugin>(this, { provider });\n    }\n\n    clone(): LayerOneConnectionPlugin {\n        return new LayerOneConnectionPlugin(this.provider);\n    }\n}\n*/\n\n\nconst Networks: Map<string | bigint, () => Network> = new Map();\n\n\n/**\n *  A **Network** provides access to a chain's properties and allows\n *  for plug-ins to extend functionality.\n */\nexport class Network {\n    #name: string;\n    #chainId: bigint;\n\n    #plugins: Map<string, NetworkPlugin>;\n\n    /**\n     *  Creates a new **Network** for %%name%% and %%chainId%%.\n     */\n    constructor(name: string, chainId: BigNumberish) {\n        this.#name = name;\n        this.#chainId = getBigInt(chainId);\n        this.#plugins = new Map();\n    }\n\n    /**\n     *  Returns a JSON-compatible representation of a Network.\n     */\n    toJSON(): any {\n        return { name: this.name, chainId: String(this.chainId) };\n    }\n\n    /**\n     *  The network common name.\n     *\n     *  This is the canonical name, as networks migh have multiple\n     *  names.\n     */\n    get name(): string { return this.#name; }\n    set name(value: string) { this.#name =  value; }\n\n    /**\n     *  The network chain ID.\n     */\n    get chainId(): bigint { return this.#chainId; }\n    set chainId(value: BigNumberish) { this.#chainId = getBigInt(value, \"chainId\"); }\n\n    /**\n     *  Returns true if %%other%% matches this network. Any chain ID\n     *  must match, and if no chain ID is present, the name must match.\n     *\n     *  This method does not currently check for additional properties,\n     *  such as ENS address or plug-in compatibility.\n     */\n    matches(other: Networkish): boolean {\n        if (other == null) { return false; }\n\n        if (typeof(other) === \"string\") {\n            try {\n                return (this.chainId === getBigInt(other));\n            } catch (error) { }\n            return (this.name === other);\n        }\n\n        if (typeof(other) === \"number\" || typeof(other) === \"bigint\") {\n            try {\n                return (this.chainId === getBigInt(other));\n            } catch (error) { }\n            return false;\n        }\n\n        if (typeof(other) === \"object\") {\n            if (other.chainId != null) {\n                try {\n                    return (this.chainId === getBigInt(other.chainId));\n                } catch (error) { }\n                return false;\n            }\n            if (other.name != null) {\n                return (this.name === other.name);\n            }\n            return false;\n        }\n\n        return false;\n    }\n\n    /**\n     *  Returns the list of plugins currently attached to this Network.\n     */\n    get plugins(): Array<NetworkPlugin> {\n        return Array.from(this.#plugins.values());\n    }\n\n    /**\n     *  Attach a new %%plugin%% to this Network. The network name\n     *  must be unique, excluding any fragment.\n     */\n    attachPlugin(plugin: NetworkPlugin): this {\n        if (this.#plugins.get(plugin.name)) {\n            throw new Error(`cannot replace existing plugin: ${ plugin.name } `);\n        }\n        this.#plugins.set(plugin.name, plugin.clone());\n        return this;\n    }\n\n    /**\n     *  Return the plugin, if any, matching %%name%% exactly. Plugins\n     *  with fragments will not be returned unless %%name%% includes\n     *  a fragment.\n     */\n    getPlugin<T extends NetworkPlugin = NetworkPlugin>(name: string): null | T {\n        return <T>(this.#plugins.get(name)) || null;\n    }\n\n    /**\n     *  Gets a list of all plugins that match %%name%%, with otr without\n     *  a fragment.\n     */\n    getPlugins<T extends NetworkPlugin = NetworkPlugin>(basename: string): Array<T> {\n        return <Array<T>>(this.plugins.filter((p) => (p.name.split(\"#\")[0] === basename)));\n    }\n\n    /**\n     *  Create a copy of this Network.\n     */\n    clone(): Network {\n        const clone = new Network(this.name, this.chainId);\n        this.plugins.forEach((plugin) => {\n            clone.attachPlugin(plugin.clone());\n        });\n        return clone;\n    }\n\n    /**\n     *  Compute the intrinsic gas required for a transaction.\n     *\n     *  A GasCostPlugin can be attached to override the default\n     *  values.\n     */\n    computeIntrinsicGas(tx: TransactionLike): number {\n        const costs = this.getPlugin<GasCostPlugin>(\"org.ethers.plugins.network.GasCost\") || (new GasCostPlugin());\n\n        let gas = costs.txBase;\n        if (tx.to == null) { gas += costs.txCreate; }\n        if (tx.data) {\n            for (let i = 2; i < tx.data.length; i += 2) {\n                if (tx.data.substring(i, i + 2) === \"00\") {\n                    gas += costs.txDataZero;\n                } else {\n                    gas += costs.txDataNonzero;\n                }\n            }\n        }\n\n        if (tx.accessList) {\n            const accessList = accessListify(tx.accessList);\n            for (const addr in accessList) {\n                gas += costs.txAccessListAddress + costs.txAccessListStorageKey * accessList[addr].storageKeys.length;\n            }\n        }\n\n        return gas;\n    }\n\n    /**\n     *  Returns a new Network for the %%network%% name or chainId.\n     */\n    static from(network?: Networkish): Network {\n        injectCommonNetworks();\n\n        // Default network\n        if (network == null) { return Network.from(\"mainnet\"); }\n\n        // Canonical name or chain ID\n        if (typeof(network) === \"number\") { network = BigInt(network); }\n        if (typeof(network) === \"string\" || typeof(network) === \"bigint\") {\n            const networkFunc = Networks.get(network);\n            if (networkFunc) { return networkFunc(); }\n            if (typeof(network) === \"bigint\") {\n                return new Network(\"unknown\", network);\n            }\n\n            assertArgument(false, \"unknown network\", \"network\", network);\n        }\n\n        // Clonable with network-like abilities\n        if (typeof((<Network>network).clone) === \"function\") {\n            const clone = (<Network>network).clone();\n            //if (typeof(network.name) !== \"string\" || typeof(network.chainId) !== \"number\") {\n            //}\n            return clone;\n        }\n\n        // Networkish\n        if (typeof(network) === \"object\") {\n            assertArgument(typeof(network.name) === \"string\" && typeof(network.chainId) === \"number\",\n                \"invalid network object name or chainId\", \"network\", network);\n\n            const custom = new Network(<string>(network.name), <number>(network.chainId));\n\n            if ((<any>network).ensAddress || (<any>network).ensNetwork != null) {\n                custom.attachPlugin(new EnsPlugin((<any>network).ensAddress, (<any>network).ensNetwork));\n            }\n\n            //if ((<any>network).layerOneConnection) {\n            //    custom.attachPlugin(new LayerOneConnectionPlugin((<any>network).layerOneConnection));\n            //}\n\n            return custom;\n        }\n\n        assertArgument(false, \"invalid network\", \"network\", network);\n    }\n\n    /**\n     *  Register %%nameOrChainId%% with a function which returns\n     *  an instance of a Network representing that chain.\n     */\n    static register(nameOrChainId: string | number | bigint, networkFunc: () => Network): void {\n        if (typeof(nameOrChainId) === \"number\") { nameOrChainId = BigInt(nameOrChainId); }\n        const existing = Networks.get(nameOrChainId);\n        if (existing) {\n            assertArgument(false, `conflicting network for ${ JSON.stringify(existing.name) }`, \"nameOrChainId\", nameOrChainId);\n        }\n        Networks.set(nameOrChainId, networkFunc);\n    }\n}\n\n\ntype Options = {\n    ensNetwork?: number;\n    altNames?: Array<string>;\n    plugins?: Array<NetworkPlugin>;\n};\n\n// We don't want to bring in formatUnits because it is backed by\n// FixedNumber and we want to keep Networks tiny. The values\n// included by the Gas Stations are also IEEE 754 with lots of\n// rounding issues and exceed the strict checks formatUnits has.\nfunction parseUnits(_value: number | string, decimals: number): bigint {\n    const value = String(_value);\n    if (!value.match(/^[0-9.]+$/)) {\n        throw new Error(`invalid gwei value: ${ _value }`);\n    }\n\n    // Break into [ whole, fraction ]\n    const comps = value.split(\".\");\n    if (comps.length === 1) { comps.push(\"\"); }\n\n    // More than 1 decimal point or too many fractional positions\n    if (comps.length !== 2) {\n        throw new Error(`invalid gwei value: ${ _value }`);\n    }\n\n    // Pad the fraction to 9 decimalplaces\n    while (comps[1].length < decimals) { comps[1] += \"0\"; }\n\n    // Too many decimals and some non-zero ending, take the ceiling\n    if (comps[1].length > 9) {\n        let frac = BigInt(comps[1].substring(0, 9));\n        if (!comps[1].substring(9).match(/^0+$/)) { frac++; }\n        comps[1] = frac.toString();\n    }\n\n    return BigInt(comps[0] + comps[1]);\n}\n\n// Used by Polygon to use a gas station for fee data\nfunction getGasStationPlugin(url: string) {\n    return new FetchUrlFeeDataNetworkPlugin(url, async (fetchFeeData, provider, request) => {\n\n        // Prevent Cloudflare from blocking our request in node.js\n        request.setHeader(\"User-Agent\", \"ethers\");\n\n        let response;\n        try {\n            const [ _response, _feeData ] = await Promise.all([\n                request.send(), fetchFeeData()\n            ]);\n            response = _response;\n            const payload = response.bodyJson.standard;\n            const feeData = {\n                gasPrice: _feeData.gasPrice,\n                maxFeePerGas: parseUnits(payload.maxFee, 9),\n                maxPriorityFeePerGas: parseUnits(payload.maxPriorityFee, 9),\n            };\n            return feeData;\n        } catch (error: any) {\n            assert(false, `error encountered with polygon gas station (${ JSON.stringify(request.url) })`, \"SERVER_ERROR\", { request, response, error });\n        }\n    });\n}\n\n// See: https://chainlist.org\nlet injected = false;\nfunction injectCommonNetworks(): void {\n    if (injected) { return; }\n    injected = true;\n\n    /// Register popular Ethereum networks\n    function registerEth(name: string, chainId: number, options: Options): void {\n        const func = function() {\n            const network = new Network(name, chainId);\n\n            // We use 0 to disable ENS\n            if (options.ensNetwork != null) {\n                network.attachPlugin(new EnsPlugin(null, options.ensNetwork));\n            }\n\n            network.attachPlugin(new GasCostPlugin());\n\n            (options.plugins || []).forEach((plugin) => {\n                network.attachPlugin(plugin);\n            });\n\n            return network;\n        };\n\n        // Register the network by name and chain ID\n        Network.register(name, func);\n        Network.register(chainId, func);\n\n        if (options.altNames) {\n            options.altNames.forEach((name) => {\n                Network.register(name, func);\n            });\n        }\n    }\n\n    registerEth(\"mainnet\", 1, { ensNetwork: 1, altNames: [ \"homestead\" ] });\n    registerEth(\"ropsten\", 3, { ensNetwork: 3 });\n    registerEth(\"rinkeby\", 4, { ensNetwork: 4 });\n    registerEth(\"goerli\", 5, { ensNetwork: 5 });\n    registerEth(\"kovan\", 42, { ensNetwork: 42 });\n    registerEth(\"sepolia\", 11155111, { ensNetwork: 11155111 });\n    registerEth(\"holesky\", 17000, { ensNetwork: 17000 });\n\n    registerEth(\"classic\", 61, { });\n    registerEth(\"classicKotti\", 6, { });\n\n    registerEth(\"arbitrum\", 42161, {\n        ensNetwork: 1,\n    });\n    registerEth(\"arbitrum-goerli\", 421613, { });\n    registerEth(\"arbitrum-sepolia\", 421614, { });\n\n    registerEth(\"base\", 8453, { ensNetwork: 1 });\n    registerEth(\"base-goerli\", 84531, { });\n    registerEth(\"base-sepolia\", 84532, { });\n\n    registerEth(\"bnb\", 56, { ensNetwork: 1 });\n    registerEth(\"bnbt\", 97, { });\n\n    registerEth(\"linea\", 59144, { ensNetwork: 1 });\n    registerEth(\"linea-goerli\", 59140, { });\n    registerEth(\"linea-sepolia\", 59141, { });\n\n    registerEth(\"matic\", 137, {\n        ensNetwork: 1,\n        plugins: [\n            getGasStationPlugin(\"https:/\\/gasstation.polygon.technology/v2\")\n        ]\n    });\n    registerEth(\"matic-amoy\", 80002, { });\n    registerEth(\"matic-mumbai\", 80001, {\n        altNames: [ \"maticMumbai\", \"maticmum\" ],  // @TODO: Future remove these alts\n        plugins: [\n            getGasStationPlugin(\"https:/\\/gasstation-testnet.polygon.technology/v2\")\n        ]\n    });\n\n    registerEth(\"optimism\", 10, {\n        ensNetwork: 1,\n        plugins: [ ]\n    });\n    registerEth(\"optimism-goerli\", 420, { });\n    registerEth(\"optimism-sepolia\", 11155420, { });\n\n    registerEth(\"xdai\", 100, { ensNetwork: 1 });\n}\n","import { assert, isHexString } from \"../utils/index.js\";\n\nimport type { AbstractProvider, Subscriber } from \"./abstract-provider.js\";\nimport type { EventFilter, OrphanFilter, ProviderEvent } from \"./provider.js\";\n\nfunction copy(obj: any): any {\n    return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n *  Return the polling subscriber for common events.\n *\n *  @_docloc: api/providers/abstract-provider\n */\nexport function getPollingSubscriber(provider: AbstractProvider, event: ProviderEvent): Subscriber {\n    if (event === \"block\") { return new PollingBlockSubscriber(provider); }\n    if (isHexString(event, 32)) { return new PollingTransactionSubscriber(provider, event); }\n\n    assert(false, \"unsupported polling event\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"getPollingSubscriber\", info: { event }\n    });\n}\n\n// @TODO: refactor this\n\n/**\n *  A **PollingBlockSubscriber** polls at a regular interval for a change\n *  in the block number.\n *\n *  @_docloc: api/providers/abstract-provider\n */\nexport class PollingBlockSubscriber implements Subscriber {\n    #provider: AbstractProvider;\n    #poller: null | number;\n\n    #interval: number;\n\n    // The most recent block we have scanned for events. The value -2\n    // indicates we still need to fetch an initial block number\n    #blockNumber: number;\n\n    /**\n     *  Create a new **PollingBlockSubscriber** attached to %%provider%%.\n     */\n    constructor(provider: AbstractProvider) {\n        this.#provider = provider;\n        this.#poller = null;\n        this.#interval = 4000;\n\n        this.#blockNumber = -2;\n    }\n\n    /**\n     *  The polling interval.\n     */\n    get pollingInterval(): number { return this.#interval; }\n    set pollingInterval(value: number) { this.#interval = value; }\n\n    async #poll(): Promise<void> {\n        try {\n            const blockNumber = await this.#provider.getBlockNumber();\n\n            // Bootstrap poll to setup our initial block number\n            if (this.#blockNumber === -2) {\n                this.#blockNumber = blockNumber;\n                return;\n            }\n\n            // @TODO: Put a cap on the maximum number of events per loop?\n\n            if (blockNumber !== this.#blockNumber) {\n                for (let b = this.#blockNumber + 1; b <= blockNumber; b++) {\n                    // We have been stopped\n                    if (this.#poller == null) { return; }\n\n                    await this.#provider.emit(\"block\", b);\n                }\n\n                this.#blockNumber = blockNumber;\n            }\n\n        } catch (error) {\n            // @TODO: Minor bump, add an \"error\" event to let subscribers\n            //        know things went awry.\n            //console.log(error);\n        }\n\n        // We have been stopped\n        if (this.#poller == null) { return; }\n\n        this.#poller = this.#provider._setTimeout(this.#poll.bind(this), this.#interval);\n    }\n\n    start(): void {\n        if (this.#poller) { return; }\n        this.#poller = this.#provider._setTimeout(this.#poll.bind(this), this.#interval);\n        this.#poll();\n    }\n\n    stop(): void {\n        if (!this.#poller) { return; }\n        this.#provider._clearTimeout(this.#poller);\n        this.#poller = null;\n    }\n\n    pause(dropWhilePaused?: boolean): void {\n        this.stop();\n        if (dropWhilePaused) { this.#blockNumber = -2; }\n    }\n\n    resume(): void {\n        this.start();\n    }\n}\n\n\n/**\n *  An **OnBlockSubscriber** can be sub-classed, with a [[_poll]]\n *  implmentation which will be called on every new block.\n *\n *  @_docloc: api/providers/abstract-provider\n */\nexport class OnBlockSubscriber implements Subscriber {\n    #provider: AbstractProvider;\n    #poll: (b: number) => void;\n    #running: boolean;\n\n    /**\n     *  Create a new **OnBlockSubscriber** attached to %%provider%%.\n     */\n    constructor(provider: AbstractProvider) {\n        this.#provider = provider;\n        this.#running = false;\n        this.#poll = (blockNumber: number) => {\n            this._poll(blockNumber, this.#provider);\n        }\n    }\n\n    /**\n     *  Called on every new block.\n     */\n    async _poll(blockNumber: number, provider: AbstractProvider): Promise<void> {\n        throw new Error(\"sub-classes must override this\");\n    }\n\n    start(): void {\n        if (this.#running) { return; }\n        this.#running = true;\n\n        this.#poll(-2);\n        this.#provider.on(\"block\", this.#poll);\n    }\n\n    stop(): void {\n        if (!this.#running) { return; }\n        this.#running = false;\n\n        this.#provider.off(\"block\", this.#poll);\n    }\n\n    pause(dropWhilePaused?: boolean): void { this.stop(); }\n    resume(): void { this.start(); }\n}\n\nexport class PollingBlockTagSubscriber extends OnBlockSubscriber {\n    readonly #tag: string;\n    #lastBlock: number;\n\n    constructor(provider: AbstractProvider, tag: string) {\n        super(provider);\n        this.#tag = tag;\n        this.#lastBlock = -2;\n    }\n\n    pause(dropWhilePaused?: boolean): void {\n        if (dropWhilePaused) { this.#lastBlock = -2; }\n        super.pause(dropWhilePaused);\n    }\n\n    async _poll(blockNumber: number, provider: AbstractProvider): Promise<void> {\n        const block = await provider.getBlock(this.#tag);\n        if (block == null) { return; }\n\n        if (this.#lastBlock === -2) {\n            this.#lastBlock = block.number;\n        } else if (block.number > this.#lastBlock) {\n            provider.emit(this.#tag, block.number);\n            this.#lastBlock = block.number;\n        }\n    }\n}\n\n\n/**\n *  @_ignore:\n *\n *  @_docloc: api/providers/abstract-provider\n */\nexport class PollingOrphanSubscriber extends OnBlockSubscriber {\n    #filter: OrphanFilter;\n\n    constructor(provider: AbstractProvider, filter: OrphanFilter) {\n        super(provider);\n        this.#filter = copy(filter);\n    }\n\n    async _poll(blockNumber: number, provider: AbstractProvider): Promise<void> {\n        throw new Error(\"@TODO\");\n        console.log(this.#filter);\n    }\n}\n\n/**\n *  A **PollingTransactionSubscriber** will poll for a given transaction\n *  hash for its receipt.\n *\n *  @_docloc: api/providers/abstract-provider\n */\nexport class PollingTransactionSubscriber extends OnBlockSubscriber {\n    #hash: string;\n\n    /**\n     *  Create a new **PollingTransactionSubscriber** attached to\n     *  %%provider%%, listening for %%hash%%.\n     */\n    constructor(provider: AbstractProvider, hash: string) {\n        super(provider);\n        this.#hash = hash;\n    }\n\n    async _poll(blockNumber: number, provider: AbstractProvider): Promise<void> {\n        const tx = await provider.getTransactionReceipt(this.#hash);\n        if (tx) { provider.emit(this.#hash, tx); }\n    }\n}\n\n/**\n *  A **PollingEventSubscriber** will poll for a given filter for its logs.\n *\n *  @_docloc: api/providers/abstract-provider\n */\nexport class PollingEventSubscriber implements Subscriber {\n    #provider: AbstractProvider;\n    #filter: EventFilter;\n    #poller: (b: number) => void;\n\n    #running: boolean;\n\n    // The most recent block we have scanned for events. The value -2\n    // indicates we still need to fetch an initial block number\n    #blockNumber: number;\n\n    /**\n     *  Create a new **PollingTransactionSubscriber** attached to\n     *  %%provider%%, listening for %%filter%%.\n     */\n    constructor(provider: AbstractProvider, filter: EventFilter) {\n        this.#provider = provider;\n        this.#filter = copy(filter);\n        this.#poller = this.#poll.bind(this);\n        this.#running = false;\n        this.#blockNumber = -2;\n    }\n\n    async #poll(blockNumber: number): Promise<void> {\n        // The initial block hasn't been determined yet\n        if (this.#blockNumber === -2) { return; }\n\n        const filter = copy(this.#filter);\n        filter.fromBlock = this.#blockNumber + 1;\n        filter.toBlock = blockNumber;\n\n        const logs = await this.#provider.getLogs(filter);\n\n        // No logs could just mean the node has not indexed them yet,\n        // so we keep a sliding window of 60 blocks to keep scanning\n        if (logs.length === 0) {\n            if (this.#blockNumber < blockNumber - 60) {\n                this.#blockNumber = blockNumber - 60;\n            }\n            return;\n        }\n\n        for (const log of logs) {\n            this.#provider.emit(this.#filter, log);\n\n            // Only advance the block number when logs were found to\n            // account for networks (like BNB and Polygon) which may\n            // sacrifice event consistency for block event speed\n            this.#blockNumber = log.blockNumber;\n        }\n    }\n\n    start(): void {\n        if (this.#running) { return; }\n        this.#running = true;\n\n        if (this.#blockNumber === -2) {\n            this.#provider.getBlockNumber().then((blockNumber) => {\n                this.#blockNumber = blockNumber;\n            });\n        }\n        this.#provider.on(\"block\", this.#poller);\n    }\n\n    stop(): void {\n        if (!this.#running) { return; }\n        this.#running = false;\n\n        this.#provider.off(\"block\", this.#poller);\n    }\n\n    pause(dropWhilePaused?: boolean): void {\n        this.stop();\n        if (dropWhilePaused) { this.#blockNumber = -2; }\n    }\n\n    resume(): void {\n        this.start();\n    }\n}\n","/**\n *  The available providers should suffice for most developers purposes,\n *  but the [[AbstractProvider]] class has many features which enable\n *  sub-classing it for specific purposes.\n *\n *  @_section: api/providers/abstract-provider: Subclassing Provider  [abstract-provider]\n */\n\n// @TODO\n// Event coalescence\n//   When we register an event with an async value (e.g. address is a Signer\n//   or ENS name), we need to add it immeidately for the Event API, but also\n//   need time to resolve the address. Upon resolving the address, we need to\n//   migrate the listener to the static event. We also need to maintain a map\n//   of Signer/ENS name to address so we can sync respond to listenerCount.\n\nimport { getAddress, resolveAddress } from \"../address/index.js\";\nimport { ZeroAddress } from \"../constants/index.js\";\nimport { Contract } from \"../contract/index.js\";\nimport { namehash } from \"../hash/index.js\";\nimport { Transaction } from \"../transaction/index.js\";\nimport {\n    concat, dataLength, dataSlice, hexlify, isHexString,\n    getBigInt, getBytes, getNumber,\n    isCallException, isError, makeError, assert, assertArgument,\n    FetchRequest,\n    toBeArray, toQuantity,\n    defineProperties, EventPayload, resolveProperties,\n    toUtf8String\n} from \"../utils/index.js\";\n\nimport { EnsResolver } from \"./ens-resolver.js\";\nimport {\n    formatBlock, formatLog, formatTransactionReceipt, formatTransactionResponse\n} from \"./format.js\";\nimport { Network } from \"./network.js\";\nimport { copyRequest, Block, FeeData, Log, TransactionReceipt, TransactionResponse } from \"./provider.js\";\nimport {\n    PollingBlockSubscriber, PollingBlockTagSubscriber, PollingEventSubscriber,\n    PollingOrphanSubscriber, PollingTransactionSubscriber\n} from \"./subscriber-polling.js\";\n\nimport type { Addressable, AddressLike } from \"../address/index.js\";\nimport type { BigNumberish, BytesLike } from \"../utils/index.js\";\nimport type { FetchResponse, Listener } from \"../utils/index.js\";\n\nimport type { Networkish } from \"./network.js\";\nimport type { FetchUrlFeeDataNetworkPlugin } from \"./plugins-network.js\";\n//import type { MaxPriorityFeePlugin } from \"./plugins-network.js\";\nimport type {\n    BlockParams, LogParams, TransactionReceiptParams,\n    TransactionResponseParams\n} from \"./formatting.js\";\n\nimport type {\n    BlockTag, EventFilter, Filter, FilterByBlockHash, OrphanFilter,\n    PreparedTransactionRequest, Provider, ProviderEvent,\n    TransactionRequest\n} from \"./provider.js\";\n\ntype Timer = ReturnType<typeof setTimeout>;\n\n\n// Constants\nconst BN_2 = BigInt(2);\n\nconst MAX_CCIP_REDIRECTS = 10;\n\nfunction isPromise<T = any>(value: any): value is Promise<T> {\n    return (value && typeof(value.then) === \"function\");\n}\n\nfunction getTag(prefix: string, value: any): string {\n    return prefix + \":\" + JSON.stringify(value, (k, v) => {\n        if (v == null) { return \"null\"; }\n        if (typeof(v) === \"bigint\") { return `bigint:${ v.toString() }`}\n        if (typeof(v) === \"string\") { return v.toLowerCase(); }\n\n        // Sort object keys\n        if (typeof(v) === \"object\" && !Array.isArray(v)) {\n            const keys = Object.keys(v);\n            keys.sort();\n            return keys.reduce((accum, key) => {\n                accum[key] = v[key];\n                return accum;\n            }, <any>{ });\n        }\n\n        return v;\n    });\n}\n\n/**\n *  The types of additional event values that can be emitted for the\n *  ``\"debug\"`` event.\n */\nexport type DebugEventAbstractProvider = {\n    action: \"sendCcipReadFetchRequest\",\n    request: FetchRequest\n    index: number\n    urls: Array<string>\n} | {\n    action: \"receiveCcipReadFetchResult\",\n    request: FetchRequest,\n    result: any\n} | {\n    action: \"receiveCcipReadFetchError\",\n    request: FetchRequest,\n    result: any\n} | {\n    action: \"sendCcipReadCall\",\n    transaction: { to: string, data: string }\n} | {\n    action: \"receiveCcipReadCallResult\",\n    transaction: { to: string, data: string }\n    result: string\n} | {\n    action: \"receiveCcipReadCallError\",\n    transaction: { to: string, data: string }\n    error: Error\n};\n\n\n/**\n *  The value passed to the [[AbstractProvider-_getSubscriber]] method.\n *\n *  Only developers sub-classing [[AbstractProvider[[ will care about this,\n *  if they are modifying a low-level feature of how subscriptions operate.\n */\nexport type Subscription = {\n    type: \"block\" | \"close\" | \"debug\" | \"error\" | \"finalized\" | \"network\" | \"pending\" | \"safe\",\n    tag: string\n} | {\n    type: \"transaction\",\n    tag: string,\n    hash: string\n} | {\n    type: \"event\",\n    tag: string,\n    filter: EventFilter\n} | {\n    type: \"orphan\",\n    tag: string,\n    filter: OrphanFilter\n};\n\n/**\n *  A **Subscriber** manages a subscription.\n *\n *  Only developers sub-classing [[AbstractProvider[[ will care about this,\n *  if they are modifying a low-level feature of how subscriptions operate.\n */\nexport interface Subscriber {\n    /**\n     *  Called initially when a subscriber is added the first time.\n     */\n    start(): void;\n\n    /**\n     *  Called when there are no more subscribers to the event.\n     */\n    stop(): void;\n\n    /**\n     *  Called when the subscription should pause.\n     *\n     *  If %%dropWhilePaused%%, events that occur while paused should not\n     *  be emitted [[resume]].\n     */\n    pause(dropWhilePaused?: boolean): void;\n\n    /**\n     *  Resume a paused subscriber.\n     */\n    resume(): void;\n\n    /**\n     *  The frequency (in ms) to poll for events, if polling is used by\n     *  the subscriber.\n     *\n     *  For non-polling subscribers, this must return ``undefined``.\n     */\n    pollingInterval?: number;\n}\n\n/**\n *  An **UnmanagedSubscriber** is useful for events which do not require\n *  any additional management, such as ``\"debug\"`` which only requires\n *  emit in synchronous event loop triggered calls.\n */\nexport class UnmanagedSubscriber implements Subscriber {\n    /**\n     *  The name fof the event.\n     */\n    name!: string;\n\n    /**\n     *  Create a new UnmanagedSubscriber with %%name%%.\n     */\n    constructor(name: string) { defineProperties<UnmanagedSubscriber>(this, { name }); }\n\n    start(): void { }\n    stop(): void { }\n\n    pause(dropWhilePaused?: boolean): void { }\n    resume(): void { }\n}\n\ntype Sub = {\n    tag: string;\n    nameMap: Map<string, string>\n    addressableMap: WeakMap<Addressable, string>;\n    listeners: Array<{ listener: Listener, once: boolean }>;\n    // @TODO: get rid of this, as it is (and has to be)\n    // tracked in subscriber\n    started: boolean;\n    subscriber: Subscriber;\n};\n\nfunction copy<T = any>(value: T): T {\n    return JSON.parse(JSON.stringify(value));\n}\n\nfunction concisify(items: Array<string>): Array<string> {\n    items = Array.from((new Set(items)).values())\n    items.sort();\n    return items;\n}\n\n\nasync function getSubscription(_event: ProviderEvent, provider: AbstractProvider): Promise<Subscription> {\n    if (_event == null) { throw new Error(\"invalid event\"); }\n\n    // Normalize topic array info an EventFilter\n    if (Array.isArray(_event)) { _event = { topics: _event }; }\n\n    if (typeof(_event) === \"string\") {\n        switch (_event) {\n            case \"block\":\n            case \"debug\":\n            case \"error\":\n            case \"finalized\":\n            case \"network\":\n            case \"pending\":\n            case \"safe\": {\n                return { type: _event, tag: _event };\n            }\n        }\n    }\n\n    if (isHexString(_event, 32)) {\n        const hash = _event.toLowerCase();\n        return { type: \"transaction\", tag: getTag(\"tx\", { hash }), hash };\n    }\n\n    if ((<any>_event).orphan) {\n        const event = <OrphanFilter>_event;\n        // @TODO: Should lowercase and whatnot things here instead of copy...\n        return { type: \"orphan\", tag: getTag(\"orphan\", event), filter: copy(event) };\n    }\n\n    if (((<any>_event).address || (<any>_event).topics)) {\n        const event = <EventFilter>_event;\n\n        const filter: any = {\n            topics: ((event.topics || []).map((t) => {\n                if (t == null) { return null; }\n                if (Array.isArray(t)) {\n                    return concisify(t.map((t) => t.toLowerCase()));\n                }\n                return t.toLowerCase();\n            }))\n        };\n\n        if (event.address) {\n            const addresses: Array<string> = [ ];\n            const promises: Array<Promise<void>> = [ ];\n\n            const addAddress = (addr: AddressLike) => {\n                if (isHexString(addr)) {\n                    addresses.push(addr);\n                } else {\n                    promises.push((async () => {\n                        addresses.push(await resolveAddress(addr, provider));\n                    })());\n                }\n            }\n\n            if (Array.isArray(event.address)) {\n                event.address.forEach(addAddress);\n            } else {\n                addAddress(event.address);\n            }\n            if (promises.length) { await Promise.all(promises); }\n            filter.address = concisify(addresses.map((a) => a.toLowerCase()));\n        }\n\n        return { filter, tag: getTag(\"event\", filter), type: \"event\" };\n    }\n\n    assertArgument(false, \"unknown ProviderEvent\", \"event\", _event);\n}\n\nfunction getTime(): number { return (new Date()).getTime(); }\n\n/**\n *  An **AbstractPlugin** is used to provide additional internal services\n *  to an [[AbstractProvider]] without adding backwards-incompatible changes\n *  to method signatures or other internal and complex logic.\n */\nexport interface AbstractProviderPlugin {\n    /**\n     *  The reverse domain notation of the plugin.\n     */\n    readonly name: string;\n\n    /**\n     *  Creates a new instance of the plugin, connected to %%provider%%.\n     */\n    connect(provider: AbstractProvider): AbstractProviderPlugin;\n}\n\n/**\n *  A normalized filter used for [[PerformActionRequest]] objects.\n */\nexport type PerformActionFilter = {\n    address?: string | Array<string>;\n    topics?: Array<null | string | Array<string>>;\n    fromBlock?: BlockTag;\n    toBlock?: BlockTag;\n} | {\n    address?: string | Array<string>;\n    topics?: Array<null | string | Array<string>>;\n    blockHash?: string;\n};\n\n/**\n *  A normalized transactions used for [[PerformActionRequest]] objects.\n */\nexport interface PerformActionTransaction extends PreparedTransactionRequest {\n    /**\n     *  The ``to`` address of the transaction.\n     */\n    to?: string;\n\n    /**\n     *  The sender of the transaction.\n     */\n    from?: string;\n}\n\n/**\n *  The [[AbstractProvider]] methods will normalize all values and pass this\n *  type to [[AbstractProvider-_perform]].\n */\nexport type PerformActionRequest = {\n    method: \"broadcastTransaction\",\n    signedTransaction: string\n} | {\n    method: \"call\",\n    transaction: PerformActionTransaction, blockTag: BlockTag\n} | {\n    method: \"chainId\"\n} | {\n    method: \"estimateGas\",\n    transaction: PerformActionTransaction\n} | {\n    method: \"getBalance\",\n    address: string, blockTag: BlockTag\n} | {\n    method: \"getBlock\",\n    blockTag: BlockTag, includeTransactions: boolean\n} | {\n    method: \"getBlock\",\n    blockHash: string, includeTransactions: boolean\n} | {\n    method: \"getBlockNumber\"\n} | {\n    method: \"getCode\",\n    address: string, blockTag: BlockTag\n} | {\n    method: \"getGasPrice\"\n} | {\n    method: \"getLogs\",\n    filter: PerformActionFilter\n} | {\n    method: \"getPriorityFee\"\n} | {\n    method: \"getStorage\",\n    address: string, position: bigint, blockTag: BlockTag\n} | {\n    method: \"getTransaction\",\n    hash: string\n} | {\n    method: \"getTransactionCount\",\n    address: string, blockTag: BlockTag\n} | {\n    method: \"getTransactionReceipt\",\n    hash: string\n} | {\n    method: \"getTransactionResult\",\n    hash: string\n};\n\ntype _PerformAccountRequest = {\n    method: \"getBalance\" | \"getTransactionCount\" | \"getCode\"\n} | {\n    method: \"getStorage\", position: bigint\n}\n\n/**\n *  Options for configuring some internal aspects of an [[AbstractProvider]].\n *\n *  **``cacheTimeout``** - how long to cache a low-level ``_perform``\n *  for, based on input parameters. This reduces the number of calls\n *  to getChainId and getBlockNumber, but may break test chains which\n *  can perform operations (internally) synchronously. Use ``-1`` to\n *  disable, ``0`` will only buffer within the same event loop and\n *  any other value is in ms. (default: ``250``)\n */\nexport type AbstractProviderOptions = {\n    cacheTimeout?: number;\n    pollingInterval?: number;\n};\n\nconst defaultOptions = {\n    cacheTimeout: 250,\n    pollingInterval: 4000\n};\n\ntype CcipArgs = {\n    sender: string;\n    urls: Array<string>;\n    calldata: string;\n    selector: string;\n    extraData: string;\n    errorArgs: Array<any>\n};\n\n/**\n *  An **AbstractProvider** provides a base class for other sub-classes to\n *  implement the [[Provider]] API by normalizing input arguments and\n *  formatting output results as well as tracking events for consistent\n *  behaviour on an eventually-consistent network.\n */\nexport class AbstractProvider implements Provider {\n\n    #subs: Map<string, Sub>;\n    #plugins: Map<string, AbstractProviderPlugin>;\n\n    // null=unpaused, true=paused+dropWhilePaused, false=paused\n    #pausedState: null | boolean;\n\n    #destroyed: boolean;\n\n    #networkPromise: null | Promise<Network>;\n    readonly #anyNetwork: boolean;\n\n    #performCache: Map<string, Promise<any>>;\n\n    // The most recent block number if running an event or -1 if no \"block\" event\n    #lastBlockNumber: number;\n\n    #nextTimer: number;\n    #timers: Map<number, { timer: null | Timer, func: () => void, time: number }>;\n\n    #disableCcipRead: boolean;\n\n    #options: Required<AbstractProviderOptions>;\n\n    /**\n     *  Create a new **AbstractProvider** connected to %%network%%, or\n     *  use the various network detection capabilities to discover the\n     *  [[Network]] if necessary.\n     */\n    constructor(_network?: \"any\" | Networkish, options?: AbstractProviderOptions) {\n        this.#options = Object.assign({ }, defaultOptions, options || { });\n\n        if (_network === \"any\") {\n            this.#anyNetwork = true;\n            this.#networkPromise = null;\n        } else if (_network) {\n            const network = Network.from(_network);\n            this.#anyNetwork = false;\n            this.#networkPromise = Promise.resolve(network);\n            setTimeout(() => { this.emit(\"network\", network, null); }, 0);\n        } else {\n            this.#anyNetwork = false;\n            this.#networkPromise = null;\n        }\n\n        this.#lastBlockNumber = -1;\n\n        this.#performCache = new Map();\n\n        this.#subs = new Map();\n        this.#plugins = new Map();\n        this.#pausedState = null;\n\n        this.#destroyed = false;\n\n        this.#nextTimer = 1;\n        this.#timers = new Map();\n\n        this.#disableCcipRead = false;\n    }\n\n    get pollingInterval(): number { return this.#options.pollingInterval; }\n\n    /**\n     *  Returns ``this``, to allow an **AbstractProvider** to implement\n     *  the [[ContractRunner]] interface.\n     */\n    get provider(): this { return this; }\n\n    /**\n     *  Returns all the registered plug-ins.\n     */\n    get plugins(): Array<AbstractProviderPlugin> {\n        return Array.from(this.#plugins.values());\n    }\n\n    /**\n     *  Attach a new plug-in.\n     */\n    attachPlugin(plugin: AbstractProviderPlugin): this {\n        if (this.#plugins.get(plugin.name)) {\n            throw new Error(`cannot replace existing plugin: ${ plugin.name } `);\n        }\n        this.#plugins.set(plugin.name,  plugin.connect(this));\n        return this;\n    }\n\n    /**\n     *  Get a plugin by name.\n     */\n    getPlugin<T extends AbstractProviderPlugin = AbstractProviderPlugin>(name: string): null | T {\n        return <T>(this.#plugins.get(name)) || null;\n    }\n\n    /**\n     *  Prevent any CCIP-read operation, regardless of whether requested\n     *  in a [[call]] using ``enableCcipRead``.\n     */\n    get disableCcipRead(): boolean { return this.#disableCcipRead; }\n    set disableCcipRead(value: boolean) { this.#disableCcipRead = !!value; }\n\n    // Shares multiple identical requests made during the same 250ms\n    async #perform<T = any>(req: PerformActionRequest): Promise<T> {\n        const timeout = this.#options.cacheTimeout;\n\n        // Caching disabled\n        if (timeout < 0) { return await this._perform(req); }\n\n        // Create a tag\n        const tag = getTag(req.method, req);\n\n        let perform = this.#performCache.get(tag);\n        if (!perform) {\n            perform = this._perform(req);\n\n            this.#performCache.set(tag, perform);\n\n            setTimeout(() => {\n                if (this.#performCache.get(tag) === perform) {\n                    this.#performCache.delete(tag);\n                }\n            }, timeout);\n        }\n\n        return await perform;\n    }\n\n    /**\n     *  Resolves to the data for executing the CCIP-read operations.\n     */\n    async ccipReadFetch(tx: PerformActionTransaction, calldata: string, urls: Array<string>): Promise<null | string> {\n        if (this.disableCcipRead || urls.length === 0 || tx.to == null) { return null; }\n\n        const sender = tx.to.toLowerCase();\n        const data = calldata.toLowerCase();\n\n        const errorMessages: Array<string> = [ ];\n\n        for (let i = 0; i < urls.length; i++) {\n            const url = urls[i];\n\n            // URL expansion\n            const href = url.replace(\"{sender}\", sender).replace(\"{data}\", data);\n\n            // If no {data} is present, use POST; otherwise GET\n            //const json: string | null = (url.indexOf(\"{data}\") >= 0) ? null: JSON.stringify({ data, sender });\n\n            //const result = await fetchJson({ url: href, errorPassThrough: true }, json, (value, response) => {\n            //    value.status = response.statusCode;\n            //    return value;\n            //});\n            const request = new FetchRequest(href);\n            if (url.indexOf(\"{data}\") === -1) {\n                request.body = { data, sender };\n            }\n\n            this.emit(\"debug\", { action: \"sendCcipReadFetchRequest\", request, index: i, urls });\n\n            let errorMessage = \"unknown error\";\n\n            // Fetch the resource...\n            let resp: FetchResponse;\n            try {\n                resp = await request.send();\n            } catch (error: any) {\n                // ...low-level fetch error (missing host, bad SSL, etc.),\n                // so try next URL\n                errorMessages.push(error.message);\n                this.emit(\"debug\", { action: \"receiveCcipReadFetchError\", request, result: { error } });\n                continue;\n            }\n\n            try {\n                const result = resp.bodyJson;\n                if (result.data) {\n                    this.emit(\"debug\", { action: \"receiveCcipReadFetchResult\", request, result });\n                    return result.data;\n                }\n                if (result.message) { errorMessage = result.message; }\n                this.emit(\"debug\", { action: \"receiveCcipReadFetchError\", request, result });\n            } catch (error) { }\n\n            // 4xx indicates the result is not present; stop\n            assert(resp.statusCode < 400 || resp.statusCode >= 500, `response not found during CCIP fetch: ${ errorMessage }`,\n                \"OFFCHAIN_FAULT\", { reason: \"404_MISSING_RESOURCE\", transaction: tx, info: { url, errorMessage } });\n\n            // 5xx indicates server issue; try the next url\n            errorMessages.push(errorMessage);\n        }\n\n        assert(false, `error encountered during CCIP fetch: ${ errorMessages.map((m) => JSON.stringify(m)).join(\", \") }`, \"OFFCHAIN_FAULT\", {\n            reason: \"500_SERVER_ERROR\",\n            transaction: tx, info: { urls, errorMessages }\n        });\n    }\n\n    /**\n     *  Provides the opportunity for a sub-class to wrap a block before\n     *  returning it, to add additional properties or an alternate\n     *  sub-class of [[Block]].\n     */\n    _wrapBlock(value: BlockParams, network: Network): Block {\n        return new Block(formatBlock(value), this);\n    }\n\n    /**\n     *  Provides the opportunity for a sub-class to wrap a log before\n     *  returning it, to add additional properties or an alternate\n     *  sub-class of [[Log]].\n     */\n    _wrapLog(value: LogParams, network: Network): Log {\n        return new Log(formatLog(value), this);\n    }\n\n    /**\n     *  Provides the opportunity for a sub-class to wrap a transaction\n     *  receipt before returning it, to add additional properties or an\n     *  alternate sub-class of [[TransactionReceipt]].\n     */\n    _wrapTransactionReceipt(value: TransactionReceiptParams, network: Network): TransactionReceipt {\n        return new TransactionReceipt(formatTransactionReceipt(value), this);\n    }\n\n    /**\n     *  Provides the opportunity for a sub-class to wrap a transaction\n     *  response before returning it, to add additional properties or an\n     *  alternate sub-class of [[TransactionResponse]].\n     */\n    _wrapTransactionResponse(tx: TransactionResponseParams, network: Network): TransactionResponse {\n        return new TransactionResponse(formatTransactionResponse(tx), this);\n    }\n\n    /**\n     *  Resolves to the Network, forcing a network detection using whatever\n     *  technique the sub-class requires.\n     *\n     *  Sub-classes **must** override this.\n     */\n    _detectNetwork(): Promise<Network> {\n        assert(false, \"sub-classes must implement this\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"_detectNetwork\"\n        });\n    }\n\n    /**\n     *  Sub-classes should use this to perform all built-in operations. All\n     *  methods sanitizes and normalizes the values passed into this.\n     *\n     *  Sub-classes **must** override this.\n     */\n    async _perform<T = any>(req: PerformActionRequest): Promise<T> {\n        assert(false, `unsupported method: ${ req.method }`, \"UNSUPPORTED_OPERATION\", {\n            operation: req.method,\n            info: req\n        });\n    }\n\n    // State\n\n    async getBlockNumber(): Promise<number> {\n        const blockNumber = getNumber(await this.#perform({ method: \"getBlockNumber\" }), \"%response\");\n        if (this.#lastBlockNumber >= 0) { this.#lastBlockNumber = blockNumber; }\n        return blockNumber;\n    }\n\n    /**\n     *  Returns or resolves to the address for %%address%%, resolving ENS\n     *  names and [[Addressable]] objects and returning if already an\n     *  address.\n     */\n    _getAddress(address: AddressLike): string | Promise<string> {\n        return resolveAddress(address, this);\n    }\n\n    /**\n     *  Returns or resolves to a valid block tag for %%blockTag%%, resolving\n     *  negative values and returning if already a valid block tag.\n     */\n    _getBlockTag(blockTag?: BlockTag): string | Promise<string> {\n        if (blockTag == null) { return \"latest\"; }\n\n        switch (blockTag) {\n            case \"earliest\":\n                return \"0x0\";\n            case \"finalized\":\n            case \"latest\":\n            case \"pending\":\n            case \"safe\":\n                return blockTag;\n        }\n\n\n        if (isHexString(blockTag)) {\n            if (isHexString(blockTag, 32)) { return blockTag; }\n            return toQuantity(blockTag);\n        }\n\n        if (typeof(blockTag) === \"bigint\") {\n            blockTag = getNumber(blockTag, \"blockTag\");\n        }\n\n        if (typeof(blockTag) === \"number\") {\n            if (blockTag >= 0) { return toQuantity(blockTag); }\n            if (this.#lastBlockNumber >= 0) { return toQuantity(this.#lastBlockNumber + blockTag); }\n            return this.getBlockNumber().then((b) => toQuantity(b + <number>blockTag));\n        }\n\n        assertArgument(false, \"invalid blockTag\", \"blockTag\", blockTag);\n    }\n\n    /**\n     *  Returns or resolves to a filter for %%filter%%, resolving any ENS\n     *  names or [[Addressable]] object and returning if already a valid\n     *  filter.\n     */\n    _getFilter(filter: Filter | FilterByBlockHash): PerformActionFilter | Promise<PerformActionFilter> {\n\n        // Create a canonical representation of the topics\n        const topics = (filter.topics || [ ]).map((t) => {\n            if (t == null) { return null; }\n            if (Array.isArray(t)) {\n                return concisify(t.map((t) => t.toLowerCase()));\n            }\n            return t.toLowerCase();\n        });\n\n        const blockHash = (\"blockHash\" in filter) ? filter.blockHash: undefined;\n\n        const resolve = (_address: Array<string>, fromBlock?: string, toBlock?: string) => {\n            let address: undefined | string | Array<string> = undefined;\n            switch (_address.length) {\n                case 0: break;\n                case 1:\n                    address = _address[0];\n                    break;\n                default:\n                    _address.sort();\n                    address = _address;\n            }\n\n            if (blockHash) {\n                if (fromBlock != null || toBlock != null) {\n                    throw new Error(\"invalid filter\");\n                }\n            }\n\n            const filter = <any>{ };\n            if (address) { filter.address = address; }\n            if (topics.length) { filter.topics = topics; }\n            if (fromBlock) { filter.fromBlock = fromBlock; }\n            if (toBlock) { filter.toBlock = toBlock; }\n            if (blockHash) { filter.blockHash = blockHash; }\n\n            return filter;\n        };\n\n        // Addresses could be async (ENS names or Addressables)\n        let address: Array<string | Promise<string>> = [ ];\n        if (filter.address) {\n            if (Array.isArray(filter.address)) {\n                for (const addr of filter.address) { address.push(this._getAddress(addr)); }\n            } else {\n                address.push(this._getAddress(filter.address));\n            }\n        }\n\n        let fromBlock: undefined | string | Promise<string> = undefined;\n        if (\"fromBlock\" in filter) { fromBlock = this._getBlockTag(filter.fromBlock); }\n\n        let toBlock: undefined | string | Promise<string> = undefined;\n        if (\"toBlock\" in filter) { toBlock = this._getBlockTag(filter.toBlock); }\n\n        if (address.filter((a) => (typeof(a) !== \"string\")).length ||\n            (fromBlock != null && typeof(fromBlock) !== \"string\") ||\n            (toBlock != null && typeof(toBlock) !== \"string\")) {\n\n            return Promise.all([ Promise.all(address), fromBlock, toBlock ]).then((result) => {\n                return resolve(result[0], result[1], result[2]);\n            });\n        }\n\n        return resolve(<Array<string>>address, fromBlock, toBlock);\n    }\n\n    /**\n     *  Returns or resolves to a transaction for %%request%%, resolving\n     *  any ENS names or [[Addressable]] and returning if already a valid\n     *  transaction.\n     */\n    _getTransactionRequest(_request: TransactionRequest): PerformActionTransaction | Promise<PerformActionTransaction> {\n        const request = <PerformActionTransaction>copyRequest(_request);\n\n        const promises: Array<Promise<void>> = [ ];\n        [ \"to\", \"from\" ].forEach((key) => {\n            if ((<any>request)[key] == null) { return; }\n\n            const addr = resolveAddress((<any>request)[key], this);\n            if (isPromise(addr)) {\n                promises.push((async function() { (<any>request)[key] = await addr; })());\n            } else {\n                (<any>request)[key] = addr;\n            }\n        });\n\n        if (request.blockTag != null) {\n            const blockTag = this._getBlockTag(request.blockTag);\n            if (isPromise(blockTag)) {\n                promises.push((async function() { request.blockTag = await blockTag; })());\n            } else {\n                request.blockTag = blockTag;\n            }\n        }\n\n        if (promises.length) {\n            return (async function() {\n                await Promise.all(promises);\n                return request;\n            })();\n        }\n\n        return request;\n    }\n\n    async getNetwork(): Promise<Network> {\n\n        // No explicit network was set and this is our first time\n        if (this.#networkPromise == null) {\n\n            // Detect the current network (shared with all calls)\n            const detectNetwork = (async () => {\n                try {\n                    const network = await this._detectNetwork();\n                    this.emit(\"network\", network, null);\n                    return network;\n                } catch (error) {\n                    if (this.#networkPromise === detectNetwork!) {\n                        this.#networkPromise = null;\n                    }\n                    throw error;\n                }\n            })();\n\n            this.#networkPromise = detectNetwork;\n            return (await detectNetwork).clone();\n        }\n\n        const networkPromise = this.#networkPromise;\n\n        const [ expected, actual ] = await Promise.all([\n            networkPromise,          // Possibly an explicit Network\n            this._detectNetwork()    // The actual connected network\n        ]);\n\n        if (expected.chainId !== actual.chainId) {\n            if (this.#anyNetwork) {\n                // The \"any\" network can change, so notify listeners\n                this.emit(\"network\", actual, expected);\n\n                // Update the network if something else hasn't already changed it\n                if (this.#networkPromise === networkPromise) {\n                    this.#networkPromise = Promise.resolve(actual);\n                }\n            } else {\n                // Otherwise, we do not allow changes to the underlying network\n                assert(false, `network changed: ${ expected.chainId } => ${ actual.chainId } `, \"NETWORK_ERROR\", {\n                    event: \"changed\"\n                });\n            }\n        }\n\n        return expected.clone();\n    }\n\n    async getFeeData(): Promise<FeeData> {\n        const network = await this.getNetwork();\n\n        const getFeeDataFunc = async () => {\n            const { _block, gasPrice, priorityFee } = await resolveProperties({\n                _block: this.#getBlock(\"latest\", false),\n                gasPrice: ((async () => {\n                    try {\n                        const value = await this.#perform({ method: \"getGasPrice\" });\n                        return getBigInt(value, \"%response\");\n                    } catch (error) { }\n                    return null\n                })()),\n                priorityFee: ((async () => {\n                    try {\n                        const value = await this.#perform({ method: \"getPriorityFee\" });\n                        return getBigInt(value, \"%response\");\n                    } catch (error) { }\n                    return null;\n                })())\n            });\n\n            let maxFeePerGas: null | bigint = null;\n            let maxPriorityFeePerGas: null | bigint = null;\n\n            // These are the recommended EIP-1559 heuristics for fee data\n            const block = this._wrapBlock(_block, network);\n            if (block && block.baseFeePerGas) {\n                maxPriorityFeePerGas = (priorityFee != null) ? priorityFee: BigInt(\"1000000000\");\n                maxFeePerGas = (block.baseFeePerGas * BN_2) + maxPriorityFeePerGas;\n            }\n\n            return new FeeData(gasPrice, maxFeePerGas, maxPriorityFeePerGas);\n        };\n\n        // Check for a FeeDataNetWorkPlugin\n        const plugin = <FetchUrlFeeDataNetworkPlugin>network.getPlugin(\"org.ethers.plugins.network.FetchUrlFeeDataPlugin\");\n        if (plugin) {\n            const req = new FetchRequest(plugin.url);\n            const feeData = await plugin.processFunc(getFeeDataFunc, this, req);\n            return new FeeData(feeData.gasPrice, feeData.maxFeePerGas, feeData.maxPriorityFeePerGas);\n        }\n\n        return await getFeeDataFunc();\n    }\n\n\n    async estimateGas(_tx: TransactionRequest): Promise<bigint> {\n        let tx = this._getTransactionRequest(_tx);\n        if (isPromise(tx)) { tx = await tx; }\n        return getBigInt(await this.#perform({\n            method: \"estimateGas\", transaction: tx\n        }), \"%response\");\n    }\n\n    async #call(tx: PerformActionTransaction, blockTag: string, attempt: number): Promise<string> {\n        assert (attempt < MAX_CCIP_REDIRECTS, \"CCIP read exceeded maximum redirections\", \"OFFCHAIN_FAULT\", {\n             reason: \"TOO_MANY_REDIRECTS\",\n             transaction: Object.assign({ }, tx, { blockTag, enableCcipRead: true })\n         });\n\n         // This came in as a PerformActionTransaction, so to/from are safe; we can cast\n         const transaction = <PerformActionTransaction>copyRequest(tx);\n\n         try {\n             return hexlify(await this._perform({ method: \"call\", transaction, blockTag }));\n\n         } catch (error: any) {\n             // CCIP Read OffchainLookup\n             if (!this.disableCcipRead && isCallException(error) && error.data && attempt >= 0 && blockTag === \"latest\" && transaction.to != null && dataSlice(error.data, 0, 4) === \"0x556f1830\") {\n                 const data = error.data;\n\n                 const txSender = await resolveAddress(transaction.to, this);\n\n                 // Parse the CCIP Read Arguments\n                 let ccipArgs: CcipArgs;\n                 try {\n                     ccipArgs = parseOffchainLookup(dataSlice(error.data, 4));\n                 } catch (error: any) {\n                     assert(false, error.message, \"OFFCHAIN_FAULT\", {\n                         reason: \"BAD_DATA\", transaction, info: { data } });\n                 }\n\n                 // Check the sender of the OffchainLookup matches the transaction\n                 assert(ccipArgs.sender.toLowerCase() === txSender.toLowerCase(),\n                     \"CCIP Read sender mismatch\", \"CALL_EXCEPTION\", {\n                         action: \"call\",\n                         data,\n                         reason: \"OffchainLookup\",\n                         transaction: <any>transaction, // @TODO: populate data?\n                         invocation: null,\n                         revert: {\n                             signature: \"OffchainLookup(address,string[],bytes,bytes4,bytes)\",\n                             name: \"OffchainLookup\",\n                             args: ccipArgs.errorArgs\n                         }\n                     });\n\n                 const ccipResult = await this.ccipReadFetch(transaction, ccipArgs.calldata, ccipArgs.urls);\n                 assert(ccipResult != null, \"CCIP Read failed to fetch data\", \"OFFCHAIN_FAULT\", {\n                     reason: \"FETCH_FAILED\", transaction, info: { data: error.data, errorArgs: ccipArgs.errorArgs } });\n\n                 const tx = {\n                     to: txSender,\n                     data: concat([ ccipArgs.selector, encodeBytes([ ccipResult, ccipArgs.extraData ]) ])\n                 };\n\n                 this.emit(\"debug\", { action: \"sendCcipReadCall\", transaction: tx });\n                 try {\n                     const result = await this.#call(tx, blockTag, attempt + 1);\n                     this.emit(\"debug\", { action: \"receiveCcipReadCallResult\", transaction: Object.assign({ }, tx), result });\n                     return result;\n                 } catch (error) {\n                     this.emit(\"debug\", { action: \"receiveCcipReadCallError\", transaction: Object.assign({ }, tx), error });\n                     throw error;\n                 }\n             }\n\n             throw error;\n         }\n    }\n\n    async #checkNetwork<T>(promise: Promise<T>): Promise<T> {\n        const { value } = await resolveProperties({\n            network: this.getNetwork(),\n            value: promise\n        });\n        return value;\n    }\n\n    async call(_tx: TransactionRequest): Promise<string> {\n        const { tx, blockTag } = await resolveProperties({\n            tx: this._getTransactionRequest(_tx),\n            blockTag: this._getBlockTag(_tx.blockTag)\n        });\n\n        return await this.#checkNetwork(this.#call(tx, blockTag, _tx.enableCcipRead ? 0: -1));\n    }\n\n    // Account\n    async #getAccountValue(request: _PerformAccountRequest, _address: AddressLike, _blockTag?: BlockTag): Promise<any> {\n        let address: string | Promise<string> = this._getAddress(_address);\n        let blockTag: string | Promise<string> = this._getBlockTag(_blockTag);\n\n        if (typeof(address) !== \"string\" || typeof(blockTag) !== \"string\") {\n            [ address, blockTag ] = await Promise.all([ address, blockTag ]);\n        }\n\n        return await this.#checkNetwork(this.#perform(Object.assign(request, { address, blockTag })));\n    }\n\n    async getBalance(address: AddressLike, blockTag?: BlockTag): Promise<bigint> {\n        return getBigInt(await this.#getAccountValue({ method: \"getBalance\" }, address, blockTag), \"%response\");\n    }\n\n    async getTransactionCount(address: AddressLike, blockTag?: BlockTag): Promise<number> {\n        return getNumber(await this.#getAccountValue({ method: \"getTransactionCount\" }, address, blockTag), \"%response\");\n    }\n\n    async getCode(address: AddressLike, blockTag?: BlockTag): Promise<string> {\n        return hexlify(await this.#getAccountValue({ method: \"getCode\" }, address, blockTag));\n    }\n\n    async getStorage(address: AddressLike, _position: BigNumberish, blockTag?: BlockTag): Promise<string> {\n        const position = getBigInt(_position, \"position\");\n        return hexlify(await this.#getAccountValue({ method: \"getStorage\", position }, address, blockTag));\n    }\n\n    // Write\n    async broadcastTransaction(signedTx: string): Promise<TransactionResponse> {\n        const { blockNumber, hash, network } = await resolveProperties({\n             blockNumber: this.getBlockNumber(),\n             hash: this._perform({\n                 method: \"broadcastTransaction\",\n                 signedTransaction: signedTx\n             }),\n             network: this.getNetwork()\n        });\n\n        const tx = Transaction.from(signedTx);\n        if (tx.hash !== hash) {\n            throw new Error(\"@TODO: the returned hash did not match\");\n        }\n\n        return this._wrapTransactionResponse(<any>tx, network).replaceableTransaction(blockNumber);\n    }\n\n    async #getBlock(block: BlockTag | string, includeTransactions: boolean): Promise<any> {\n        // @TODO: Add CustomBlockPlugin check\n\n        if (isHexString(block, 32)) {\n            return await this.#perform({\n                method: \"getBlock\", blockHash: block, includeTransactions\n            });\n        }\n\n        let blockTag = this._getBlockTag(block);\n        if (typeof(blockTag) !== \"string\") { blockTag = await blockTag; }\n\n        return await this.#perform({\n            method: \"getBlock\", blockTag, includeTransactions\n        });\n    }\n\n    // Queries\n    async getBlock(block: BlockTag | string, prefetchTxs?: boolean): Promise<null | Block> {\n        const { network, params } = await resolveProperties({\n            network: this.getNetwork(),\n            params: this.#getBlock(block, !!prefetchTxs)\n        });\n        if (params == null) { return null; }\n\n        return this._wrapBlock(params, network);\n    }\n\n    async getTransaction(hash: string): Promise<null | TransactionResponse> {\n        const { network, params } = await resolveProperties({\n            network: this.getNetwork(),\n            params: this.#perform({ method: \"getTransaction\", hash })\n        });\n        if (params == null) { return null; }\n\n        return this._wrapTransactionResponse(params, network);\n    }\n\n    async getTransactionReceipt(hash: string): Promise<null | TransactionReceipt> {\n        const { network, params } = await resolveProperties({\n            network: this.getNetwork(),\n            params: this.#perform({ method: \"getTransactionReceipt\", hash })\n        });\n        if (params == null) { return null; }\n\n        // Some backends did not backfill the effectiveGasPrice into old transactions\n        // in the receipt, so we look it up manually and inject it.\n        if (params.gasPrice == null && params.effectiveGasPrice == null) {\n            const tx = await this.#perform({ method: \"getTransaction\", hash });\n            if (tx == null) { throw new Error(\"report this; could not find tx or effectiveGasPrice\"); }\n            params.effectiveGasPrice = tx.gasPrice;\n        }\n\n        return this._wrapTransactionReceipt(params, network);\n    }\n\n    async getTransactionResult(hash: string): Promise<null | string> {\n        const { result } = await resolveProperties({\n            network: this.getNetwork(),\n            result: this.#perform({ method: \"getTransactionResult\", hash })\n        });\n        if (result == null) { return null; }\n        return hexlify(result);\n    }\n\n    // Bloom-filter Queries\n    async getLogs(_filter: Filter | FilterByBlockHash): Promise<Array<Log>> {\n        let filter = this._getFilter(_filter);\n        if (isPromise(filter)) { filter = await filter; }\n\n        const { network, params } = await resolveProperties({\n            network: this.getNetwork(),\n            params: this.#perform<Array<LogParams>>({ method: \"getLogs\", filter })\n        });\n\n        return params.map((p) => this._wrapLog(p, network));\n    }\n\n    // ENS\n    _getProvider(chainId: number): AbstractProvider {\n        assert(false, \"provider cannot connect to target network\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"_getProvider()\"\n        });\n    }\n\n    async getResolver(name: string): Promise<null | EnsResolver> {\n        return await EnsResolver.fromName(this, name);\n    }\n\n    async getAvatar(name: string): Promise<null | string> {\n        const resolver = await this.getResolver(name);\n        if (resolver) { return await resolver.getAvatar(); }\n        return null;\n    }\n\n    async resolveName(name: string): Promise<null | string>{\n        const resolver = await this.getResolver(name);\n        if (resolver) { return await resolver.getAddress(); }\n        return null;\n    }\n\n    async lookupAddress(address: string): Promise<null | string> {\n        address = getAddress(address);\n        const node = namehash(address.substring(2).toLowerCase() + \".addr.reverse\");\n\n        try {\n\n            const ensAddr = await EnsResolver.getEnsAddress(this);\n            const ensContract = new Contract(ensAddr, [\n                \"function resolver(bytes32) view returns (address)\"\n            ], this);\n\n            const resolver = await ensContract.resolver(node);\n            if (resolver == null || resolver === ZeroAddress) { return null; }\n\n            const resolverContract = new Contract(resolver, [\n                \"function name(bytes32) view returns (string)\"\n            ], this);\n            const name = await resolverContract.name(node);\n\n            // Failed forward resolution\n            const check = await this.resolveName(name);\n            if (check !== address) { return null; }\n\n            return name;\n\n        } catch (error) {\n            // No data was returned from the resolver\n            if (isError(error, \"BAD_DATA\") && error.value === \"0x\") {\n                return null;\n            }\n\n            // Something reerted\n            if (isError(error, \"CALL_EXCEPTION\")) { return null; }\n\n            throw error;\n        }\n\n        return null;\n    }\n\n    async waitForTransaction(hash: string, _confirms?: null | number, timeout?: null | number): Promise<null | TransactionReceipt> {\n        const confirms = (_confirms != null) ? _confirms: 1;\n        if (confirms === 0) { return this.getTransactionReceipt(hash); }\n\n        return new Promise(async (resolve, reject) => {\n            let timer: null | Timer = null;\n\n            const listener = (async (blockNumber: number) => {\n                try {\n                    const receipt = await this.getTransactionReceipt(hash);\n                    if (receipt != null) {\n                        if (blockNumber - receipt.blockNumber + 1 >= confirms) {\n                            resolve(receipt);\n                            //this.off(\"block\", listener);\n                            if (timer) {\n                                clearTimeout(timer);\n                                timer = null;\n                            }\n                            return;\n                        }\n                    }\n                } catch (error) {\n                    console.log(\"EEE\", error);\n                }\n                this.once(\"block\", listener);\n            });\n\n            if (timeout != null) {\n                timer = setTimeout(() => {\n                    if (timer == null) { return; }\n                    timer = null;\n                    this.off(\"block\", listener);\n                    reject(makeError(\"timeout\", \"TIMEOUT\", { reason: \"timeout\" }));\n                }, timeout);\n            }\n\n            listener(await this.getBlockNumber());\n        });\n    }\n\n    async waitForBlock(blockTag?: BlockTag): Promise<Block> {\n        assert(false, \"not implemented yet\", \"NOT_IMPLEMENTED\", {\n            operation: \"waitForBlock\"\n        });\n    }\n\n    /**\n     *  Clear a timer created using the [[_setTimeout]] method.\n     */\n    _clearTimeout(timerId: number): void {\n        const timer = this.#timers.get(timerId);\n        if (!timer) { return; }\n        if (timer.timer) { clearTimeout(timer.timer); }\n        this.#timers.delete(timerId);\n    }\n\n    /**\n     *  Create a timer that will execute %%func%% after at least %%timeout%%\n     *  (in ms). If %%timeout%% is unspecified, then %%func%% will execute\n     *  in the next event loop.\n     *\n     *  [Pausing](AbstractProvider-paused) the provider will pause any\n     *  associated timers.\n     */\n    _setTimeout(_func: () => void, timeout?: number): number {\n        if (timeout == null) { timeout = 0; }\n        const timerId = this.#nextTimer++;\n        const func = () => {\n            this.#timers.delete(timerId);\n            _func();\n        };\n\n        if (this.paused) {\n            this.#timers.set(timerId, { timer: null, func, time: timeout });\n        } else {\n            const timer = setTimeout(func, timeout);\n            this.#timers.set(timerId, { timer, func, time: getTime() });\n        }\n\n        return timerId;\n    }\n\n    /**\n     *  Perform %%func%% on each subscriber.\n     */\n    _forEachSubscriber(func: (s: Subscriber) => void): void {\n        for (const sub of this.#subs.values()) {\n            func(sub.subscriber);\n        }\n    }\n\n    /**\n     *  Sub-classes may override this to customize subscription\n     *  implementations.\n     */\n    _getSubscriber(sub: Subscription): Subscriber {\n        switch (sub.type) {\n            case \"debug\":\n            case \"error\":\n            case \"network\":\n                return new UnmanagedSubscriber(sub.type);\n            case \"block\": {\n                const subscriber = new PollingBlockSubscriber(this);\n                subscriber.pollingInterval = this.pollingInterval;\n                return subscriber;\n            }\n            case \"safe\": case \"finalized\":\n                return new PollingBlockTagSubscriber(this, sub.type);\n            case \"event\":\n                return new PollingEventSubscriber(this, sub.filter);\n            case \"transaction\":\n                return new PollingTransactionSubscriber(this, sub.hash);\n            case \"orphan\":\n                return new PollingOrphanSubscriber(this, sub.filter);\n        }\n\n        throw new Error(`unsupported event: ${ sub.type }`);\n    }\n\n    /**\n     *  If a [[Subscriber]] fails and needs to replace itself, this\n     *  method may be used.\n     *\n     *  For example, this is used for providers when using the\n     *  ``eth_getFilterChanges`` method, which can return null if state\n     *  filters are not supported by the backend, allowing the Subscriber\n     *  to swap in a [[PollingEventSubscriber]].\n     */\n    _recoverSubscriber(oldSub: Subscriber, newSub: Subscriber): void {\n        for (const sub of this.#subs.values()) {\n            if (sub.subscriber === oldSub) {\n                if (sub.started) { sub.subscriber.stop(); }\n                sub.subscriber = newSub;\n                if (sub.started) { newSub.start(); }\n                if (this.#pausedState != null) { newSub.pause(this.#pausedState); }\n                break;\n            }\n        }\n    }\n\n    async #hasSub(event: ProviderEvent, emitArgs?: Array<any>): Promise<null | Sub> {\n        let sub = await getSubscription(event, this);\n        // This is a log that is removing an existing log; we actually want\n        // to emit an orphan event for the removed log\n        if (sub.type === \"event\" && emitArgs && emitArgs.length > 0 && emitArgs[0].removed === true) {\n            sub = await getSubscription({ orphan: \"drop-log\", log: emitArgs[0] }, this);\n        }\n        return this.#subs.get(sub.tag) || null;\n    }\n\n    async #getSub(event: ProviderEvent): Promise<Sub> {\n        const subscription = await getSubscription(event, this);\n\n        // Prevent tampering with our tag in any subclass' _getSubscriber\n        const tag = subscription.tag;\n\n        let sub = this.#subs.get(tag);\n        if (!sub) {\n            const subscriber = this._getSubscriber(subscription);\n\n            const addressableMap = new WeakMap();\n            const nameMap = new Map();\n            sub = { subscriber, tag, addressableMap, nameMap, started: false, listeners: [ ] };\n            this.#subs.set(tag, sub);\n        }\n\n        return sub;\n    }\n\n    async on(event: ProviderEvent, listener: Listener): Promise<this> {\n        const sub = await this.#getSub(event);\n        sub.listeners.push({ listener, once: false });\n        if (!sub.started) {\n            sub.subscriber.start();\n            sub.started = true;\n            if (this.#pausedState != null) { sub.subscriber.pause(this.#pausedState); }\n        }\n        return this;\n    }\n\n    async once(event: ProviderEvent, listener: Listener): Promise<this> {\n        const sub = await this.#getSub(event);\n        sub.listeners.push({ listener, once: true });\n        if (!sub.started) {\n            sub.subscriber.start();\n            sub.started = true;\n            if (this.#pausedState != null) { sub.subscriber.pause(this.#pausedState); }\n        }\n        return this;\n    }\n\n    async emit(event: ProviderEvent, ...args: Array<any>): Promise<boolean> {\n        const sub = await this.#hasSub(event, args);\n        // If there is not subscription or if a recent emit removed\n        // the last of them (which also deleted the sub) do nothing\n        if (!sub || sub.listeners.length === 0) { return false; };\n\n        const count = sub.listeners.length;\n        sub.listeners = sub.listeners.filter(({ listener, once }) => {\n            const payload = new EventPayload(this, (once ? null: listener), event);\n            try {\n                listener.call(this, ...args, payload);\n            } catch(error) { }\n            return !once;\n        });\n\n        if (sub.listeners.length === 0) {\n            if (sub.started) { sub.subscriber.stop(); }\n            this.#subs.delete(sub.tag);\n        }\n\n        return (count > 0);\n    }\n\n    async listenerCount(event?: ProviderEvent): Promise<number> {\n        if (event) {\n            const sub = await this.#hasSub(event);\n            if (!sub) { return 0; }\n            return sub.listeners.length;\n        }\n\n        let total = 0;\n        for (const { listeners } of this.#subs.values()) {\n            total += listeners.length;\n        }\n        return total;\n    }\n\n    async listeners(event?: ProviderEvent): Promise<Array<Listener>> {\n        if (event) {\n            const sub = await this.#hasSub(event);\n            if (!sub) { return  [ ]; }\n            return sub.listeners.map(({ listener }) => listener);\n        }\n        let result: Array<Listener> = [ ];\n        for (const { listeners } of this.#subs.values()) {\n            result = result.concat(listeners.map(({ listener }) => listener));\n        }\n        return result;\n    }\n\n    async off(event: ProviderEvent, listener?: Listener): Promise<this> {\n        const sub = await this.#hasSub(event);\n        if (!sub) { return this; }\n\n        if (listener) {\n            const index = sub.listeners.map(({ listener }) => listener).indexOf(listener);\n            if (index >= 0) { sub.listeners.splice(index, 1); }\n        }\n\n        if (!listener || sub.listeners.length === 0) {\n            if (sub.started) { sub.subscriber.stop(); }\n            this.#subs.delete(sub.tag);\n        }\n\n        return this;\n    }\n\n    async removeAllListeners(event?: ProviderEvent): Promise<this> {\n        if (event) {\n            const { tag, started, subscriber } = await this.#getSub(event);\n            if (started) { subscriber.stop(); }\n            this.#subs.delete(tag);\n        } else {\n            for (const [ tag, { started, subscriber } ] of this.#subs) {\n                if (started) { subscriber.stop(); }\n                this.#subs.delete(tag);\n            }\n        }\n        return this;\n    }\n\n    // Alias for \"on\"\n    async addListener(event: ProviderEvent, listener: Listener): Promise<this> {\n       return await this.on(event, listener);\n    }\n\n    // Alias for \"off\"\n    async removeListener(event: ProviderEvent, listener: Listener): Promise<this> {\n       return this.off(event, listener);\n    }\n\n    /**\n     *  If this provider has been destroyed using the [[destroy]] method.\n     *\n     *  Once destroyed, all resources are reclaimed, internal event loops\n     *  and timers are cleaned up and no further requests may be sent to\n     *  the provider.\n     */\n    get destroyed(): boolean {\n        return this.#destroyed;\n    }\n\n    /**\n     *  Sub-classes may use this to shutdown any sockets or release their\n     *  resources and reject any pending requests.\n     *\n     *  Sub-classes **must** call ``super.destroy()``.\n     */\n    destroy(): void {\n        // Stop all listeners\n        this.removeAllListeners();\n\n        // Shut down all tiemrs\n        for (const timerId of this.#timers.keys()) {\n            this._clearTimeout(timerId);\n        }\n\n        this.#destroyed = true;\n    }\n\n    /**\n     *  Whether the provider is currently paused.\n     *\n     *  A paused provider will not emit any events, and generally should\n     *  not make any requests to the network, but that is up to sub-classes\n     *  to manage.\n     *\n     *  Setting ``paused = true`` is identical to calling ``.pause(false)``,\n     *  which will buffer any events that occur while paused until the\n     *  provider is unpaused.\n     */\n    get paused(): boolean { return (this.#pausedState != null); }\n    set paused(pause: boolean) {\n        if (!!pause === this.paused) { return; }\n\n        if (this.paused) {\n            this.resume();\n        } else {\n            this.pause(false);\n        }\n    }\n\n    /**\n     *  Pause the provider. If %%dropWhilePaused%%, any events that occur\n     *  while paused are dropped, otherwise all events will be emitted once\n     *  the provider is unpaused.\n     */\n    pause(dropWhilePaused?: boolean): void {\n        this.#lastBlockNumber = -1;\n\n        if (this.#pausedState != null) {\n            if (this.#pausedState == !!dropWhilePaused) { return; }\n            assert(false, \"cannot change pause type; resume first\", \"UNSUPPORTED_OPERATION\", {\n                operation: \"pause\"\n            });\n        }\n\n        this._forEachSubscriber((s) => s.pause(dropWhilePaused));\n        this.#pausedState = !!dropWhilePaused;\n\n        for (const timer of this.#timers.values()) {\n            // Clear the timer\n            if (timer.timer) { clearTimeout(timer.timer); }\n\n            // Remaining time needed for when we become unpaused\n            timer.time = getTime() - timer.time;\n        }\n    }\n\n    /**\n     *  Resume the provider.\n     */\n    resume(): void {\n        if (this.#pausedState == null) { return; }\n\n        this._forEachSubscriber((s) => s.resume());\n        this.#pausedState = null;\n        for (const timer of this.#timers.values()) {\n            // Remaining time when we were paused\n            let timeout = timer.time;\n            if (timeout < 0) { timeout = 0; }\n\n            // Start time (in cause paused, so we con compute remaininf time)\n            timer.time = getTime();\n\n            // Start the timer\n            setTimeout(timer.func, timeout);\n        }\n    }\n}\n\n\nfunction _parseString(result: string, start: number): null | string {\n    try {\n        const bytes = _parseBytes(result, start);\n        if (bytes) { return toUtf8String(bytes); }\n    } catch(error) { }\n    return null;\n}\n\nfunction _parseBytes(result: string, start: number): null | string {\n    if (result === \"0x\") { return null; }\n    try {\n        const offset = getNumber(dataSlice(result, start, start + 32));\n        const length = getNumber(dataSlice(result, offset, offset + 32));\n\n        return dataSlice(result, offset + 32, offset + 32 + length);\n    } catch (error) { }\n    return null;\n}\n\nfunction numPad(value: number): Uint8Array {\n    const result = toBeArray(value);\n    if (result.length > 32) { throw new Error(\"internal; should not happen\"); }\n\n    const padded = new Uint8Array(32);\n    padded.set(result, 32 - result.length);\n    return padded;\n}\n\nfunction bytesPad(value: Uint8Array): Uint8Array {\n    if ((value.length % 32) === 0) { return value; }\n\n    const result = new Uint8Array(Math.ceil(value.length / 32) * 32);\n    result.set(value);\n    return result;\n}\n\nconst empty: Uint8Array = new Uint8Array([ ]);\n\n// ABI Encodes a series of (bytes, bytes, ...)\nfunction encodeBytes(datas: Array<BytesLike>): string {\n    const result: Array<Uint8Array> = [ ];\n\n    let byteCount = 0;\n\n    // Add place-holders for pointers as we add items\n    for (let i = 0; i < datas.length; i++) {\n        result.push(empty);\n        byteCount += 32;\n    }\n\n    for (let i = 0; i < datas.length; i++) {\n        const data = getBytes(datas[i]);\n\n        // Update the bytes offset\n        result[i] = numPad(byteCount);\n\n        // The length and padded value of data\n        result.push(numPad(data.length));\n        result.push(bytesPad(data));\n        byteCount += 32 + Math.ceil(data.length / 32) * 32;\n    }\n\n    return concat(result);\n}\n\nconst zeros = \"0x0000000000000000000000000000000000000000000000000000000000000000\"\nfunction parseOffchainLookup(data: string): CcipArgs {\n    const result: CcipArgs = {\n        sender: \"\", urls: [ ], calldata: \"\", selector: \"\", extraData: \"\", errorArgs: [ ]\n    };\n\n    assert(dataLength(data) >= 5 * 32, \"insufficient OffchainLookup data\", \"OFFCHAIN_FAULT\", {\n        reason: \"insufficient OffchainLookup data\"\n    });\n\n    const sender = dataSlice(data, 0, 32);\n    assert(dataSlice(sender, 0, 12) === dataSlice(zeros, 0, 12), \"corrupt OffchainLookup sender\", \"OFFCHAIN_FAULT\", {\n        reason: \"corrupt OffchainLookup sender\"\n    });\n    result.sender = dataSlice(sender, 12);\n\n    // Read the URLs from the response\n    try {\n        const urls: Array<string> = [];\n        const urlsOffset = getNumber(dataSlice(data, 32, 64));\n        const urlsLength = getNumber(dataSlice(data, urlsOffset, urlsOffset + 32));\n        const urlsData = dataSlice(data, urlsOffset + 32);\n        for (let u = 0; u < urlsLength; u++) {\n            const url = _parseString(urlsData, u * 32);\n            if (url == null) { throw new Error(\"abort\"); }\n            urls.push(url);\n        }\n        result.urls = urls;\n    } catch (error) {\n        assert(false, \"corrupt OffchainLookup urls\", \"OFFCHAIN_FAULT\", {\n            reason: \"corrupt OffchainLookup urls\"\n        });\n    }\n\n    // Get the CCIP calldata to forward\n    try {\n        const calldata = _parseBytes(data, 64);\n        if (calldata == null) { throw new Error(\"abort\"); }\n        result.calldata = calldata;\n    } catch (error) {\n        assert(false, \"corrupt OffchainLookup calldata\", \"OFFCHAIN_FAULT\", {\n            reason: \"corrupt OffchainLookup calldata\"\n        });\n    }\n\n    // Get the callbackSelector (bytes4)\n    assert(dataSlice(data, 100, 128) === dataSlice(zeros, 0, 28), \"corrupt OffchainLookup callbaackSelector\", \"OFFCHAIN_FAULT\", {\n        reason: \"corrupt OffchainLookup callbaackSelector\"\n    });\n    result.selector = dataSlice(data, 96, 100);\n\n    // Get the extra data to send back to the contract as context\n    try {\n        const extraData = _parseBytes(data, 128);\n        if (extraData == null) { throw new Error(\"abort\"); }\n        result.extraData = extraData;\n    } catch (error) {\n        assert(false, \"corrupt OffchainLookup extraData\", \"OFFCHAIN_FAULT\", {\n            reason: \"corrupt OffchainLookup extraData\"\n        });\n    }\n\n    result.errorArgs = \"sender,urls,calldata,selector,extraData\".split(/,/).map((k) => (<any>result)[k])\n\n    return result;\n}\n","/**\n *  Generally the [[Wallet]] and [[JsonRpcSigner]] and their sub-classes\n *  are sufficent for most developers, but this is provided to\n *  fascilitate more complex Signers.\n *\n *  @_section: api/providers/abstract-signer: Subclassing Signer [abstract-signer]\n */\nimport { resolveAddress } from \"../address/index.js\";\nimport { Transaction } from \"../transaction/index.js\";\nimport {\n    defineProperties, getBigInt, resolveProperties,\n    assert, assertArgument\n} from \"../utils/index.js\";\n\nimport { copyRequest } from \"./provider.js\";\n\nimport type {\n    AuthorizationRequest, TypedDataDomain, TypedDataField\n} from \"../hash/index.js\";\nimport type { Authorization, TransactionLike } from \"../transaction/index.js\";\n\nimport type {\n    BlockTag, Provider, TransactionRequest, TransactionResponse\n} from \"./provider.js\";\nimport type { Signer } from \"./signer.js\";\n\nfunction checkProvider(signer: AbstractSigner, operation: string): Provider {\n    if (signer.provider) { return signer.provider; }\n    assert(false, \"missing provider\", \"UNSUPPORTED_OPERATION\", { operation });\n}\n\nasync function populate(signer: AbstractSigner, tx: TransactionRequest): Promise<TransactionLike<string>> {\n    let pop: any = copyRequest(tx);\n\n    if (pop.to != null) { pop.to = resolveAddress(pop.to, signer); }\n\n    if (pop.from != null) {\n        const from = pop.from;\n        pop.from = Promise.all([\n            signer.getAddress(),\n            resolveAddress(from, signer)\n        ]).then(([ address, from ]) => {\n            assertArgument(address.toLowerCase() === from.toLowerCase(),\n                \"transaction from mismatch\", \"tx.from\", from);\n            return address;\n        });\n    } else {\n        pop.from = signer.getAddress();\n    }\n\n    return await resolveProperties(pop);\n}\n\n\n/**\n *  An **AbstractSigner** includes most of teh functionality required\n *  to get a [[Signer]] working as expected, but requires a few\n *  Signer-specific methods be overridden.\n *\n */\nexport abstract class AbstractSigner<P extends null | Provider = null | Provider> implements Signer {\n    /**\n     *  The provider this signer is connected to.\n     */\n    readonly provider!: P;\n\n    /**\n     *  Creates a new Signer connected to %%provider%%.\n     */\n    constructor(provider?: P) {\n        defineProperties<AbstractSigner>(this, { provider: (provider || null) });\n    }\n\n    /**\n     *  Resolves to the Signer address.\n     */\n    abstract getAddress(): Promise<string>;\n\n    /**\n     *  Returns the signer connected to %%provider%%.\n     *\n     *  This may throw, for example, a Signer connected over a Socket or\n     *  to a specific instance of a node may not be transferrable.\n     */\n    abstract connect(provider: null | Provider): Signer;\n\n    async getNonce(blockTag?: BlockTag): Promise<number> {\n        return checkProvider(this, \"getTransactionCount\").getTransactionCount(await this.getAddress(), blockTag);\n    }\n\n    async populateCall(tx: TransactionRequest): Promise<TransactionLike<string>> {\n        const pop = await populate(this, tx);\n        return pop;\n    }\n\n    async populateTransaction(tx: TransactionRequest): Promise<TransactionLike<string>> {\n        const provider = checkProvider(this, \"populateTransaction\");\n\n        const pop = await populate(this, tx);\n\n        if (pop.nonce == null) {\n            pop.nonce = await this.getNonce(\"pending\");\n        }\n\n        if (pop.gasLimit == null) {\n            pop.gasLimit = await this.estimateGas(pop);\n        }\n\n        // Populate the chain ID\n        const network = await (<Provider>(this.provider)).getNetwork();\n        if (pop.chainId != null) {\n            const chainId = getBigInt(pop.chainId);\n            assertArgument(chainId === network.chainId, \"transaction chainId mismatch\", \"tx.chainId\", tx.chainId);\n        } else {\n            pop.chainId = network.chainId;\n        }\n\n        // Do not allow mixing pre-eip-1559 and eip-1559 properties\n        const hasEip1559 = (pop.maxFeePerGas != null || pop.maxPriorityFeePerGas != null);\n        if (pop.gasPrice != null && (pop.type === 2 || hasEip1559)) {\n            assertArgument(false, \"eip-1559 transaction do not support gasPrice\", \"tx\", tx);\n        } else if ((pop.type === 0 || pop.type === 1) && hasEip1559) {\n            assertArgument(false, \"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas\", \"tx\", tx);\n        }\n\n        if ((pop.type === 2 || pop.type == null) && (pop.maxFeePerGas != null && pop.maxPriorityFeePerGas != null)) {\n            // Fully-formed EIP-1559 transaction (skip getFeeData)\n            pop.type = 2;\n\n        } else if (pop.type === 0 || pop.type === 1) {\n            // Explicit Legacy or EIP-2930 transaction\n\n            // We need to get fee data to determine things\n            const feeData = await provider.getFeeData();\n\n            assert(feeData.gasPrice != null, \"network does not support gasPrice\", \"UNSUPPORTED_OPERATION\", {\n                operation: \"getGasPrice\" });\n\n            // Populate missing gasPrice\n            if (pop.gasPrice == null) { pop.gasPrice = feeData.gasPrice; }\n\n        } else {\n\n            // We need to get fee data to determine things\n            const feeData = await provider.getFeeData();\n\n            if (pop.type == null) {\n                // We need to auto-detect the intended type of this transaction...\n\n                if (feeData.maxFeePerGas != null && feeData.maxPriorityFeePerGas != null) {\n                    // The network supports EIP-1559!\n\n                    // Upgrade transaction from null to eip-1559\n                    if (pop.authorizationList && pop.authorizationList.length) {\n                        pop.type = 4;\n                    } else {\n                        pop.type = 2;\n                    }\n\n                    if (pop.gasPrice != null) {\n                        // Using legacy gasPrice property on an eip-1559 network,\n                        // so use gasPrice as both fee properties\n                        const gasPrice = pop.gasPrice;\n                        delete pop.gasPrice;\n                        pop.maxFeePerGas = gasPrice;\n                        pop.maxPriorityFeePerGas = gasPrice;\n\n                    } else {\n                        // Populate missing fee data\n\n                        if (pop.maxFeePerGas == null) {\n                            pop.maxFeePerGas = feeData.maxFeePerGas;\n                        }\n\n                        if (pop.maxPriorityFeePerGas == null) {\n                            pop.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas;\n                        }\n                    }\n\n                } else if (feeData.gasPrice != null) {\n                    // Network doesn't support EIP-1559...\n\n                    // ...but they are trying to use EIP-1559 properties\n                    assert(!hasEip1559, \"network does not support EIP-1559\", \"UNSUPPORTED_OPERATION\", {\n                            operation: \"populateTransaction\" });\n\n                    // Populate missing fee data\n                    if (pop.gasPrice == null) {\n                        pop.gasPrice = feeData.gasPrice;\n                    }\n\n                    // Explicitly set untyped transaction to legacy\n                    // @TODO: Maybe this shold allow type 1?\n                    pop.type = 0;\n\n               } else {\n                    // getFeeData has failed us.\n                    assert(false, \"failed to get consistent fee data\", \"UNSUPPORTED_OPERATION\", {\n                        operation: \"signer.getFeeData\" });\n                }\n\n            } else if (pop.type === 2 || pop.type === 3 || pop.type === 4) {\n                // Explicitly using EIP-1559 or EIP-4844\n\n                // Populate missing fee data\n                if (pop.maxFeePerGas == null) {\n                    pop.maxFeePerGas = feeData.maxFeePerGas;\n                }\n\n                if (pop.maxPriorityFeePerGas == null) {\n                    pop.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas;\n                }\n            }\n        }\n\n//@TOOD: Don't await all over the place; save them up for\n// the end for better batching\n        return await resolveProperties(pop);\n    }\n\n    async populateAuthorization(_auth: AuthorizationRequest): Promise<AuthorizationRequest> {\n        const auth = Object.assign({ }, _auth);\n\n        // Add a chain ID if not explicitly set to 0\n        if (auth.chainId == null) {\n            auth.chainId = (await checkProvider(this, \"getNetwork\").getNetwork()).chainId;\n        }\n\n        // @TODO: Take chain ID into account when populating noce?\n\n        if (auth.nonce == null) { auth.nonce = await this.getNonce(); }\n\n        return auth;\n    }\n\n    async estimateGas(tx: TransactionRequest): Promise<bigint> {\n        return checkProvider(this, \"estimateGas\").estimateGas(await this.populateCall(tx));\n    }\n\n    async call(tx: TransactionRequest): Promise<string> {\n        return checkProvider(this, \"call\").call(await this.populateCall(tx));\n    }\n\n    async resolveName(name: string): Promise<null | string> {\n        const provider = checkProvider(this, \"resolveName\");\n        return await provider.resolveName(name);\n    }\n\n    async sendTransaction(tx: TransactionRequest): Promise<TransactionResponse> {\n        const provider = checkProvider(this, \"sendTransaction\");\n\n        const pop = await this.populateTransaction(tx);\n        delete pop.from;\n        const txObj = Transaction.from(pop);\n        return await provider.broadcastTransaction(await this.signTransaction(txObj));\n    }\n\n    // @TODO: in v7 move this to be abstract\n    authorize(authorization: AuthorizationRequest): Promise<Authorization> {\n        assert(false, \"authorization not implemented for this signer\",\n          \"UNSUPPORTED_OPERATION\", { operation: \"authorize\" });\n    }\n\n    abstract signTransaction(tx: TransactionRequest): Promise<string>;\n    abstract signMessage(message: string | Uint8Array): Promise<string>;\n    abstract signTypedData(domain: TypedDataDomain, types: Record<string, Array<TypedDataField>>, value: Record<string, any>): Promise<string>;\n}\n\n/**\n *  A **VoidSigner** is a class deisgned to allow an address to be used\n *  in any API which accepts a Signer, but for which there are no\n *  credentials available to perform any actual signing.\n *\n *  This for example allow impersonating an account for the purpose of\n *  static calls or estimating gas, but does not allow sending transactions.\n */\nexport class VoidSigner extends AbstractSigner {\n    /**\n     *  The signer address.\n     */\n    readonly address!: string;\n\n    /**\n     *  Creates a new **VoidSigner** with %%address%% attached to\n     *  %%provider%%.\n     */\n    constructor(address: string, provider?: null | Provider) {\n        super(provider);\n        defineProperties<VoidSigner>(this, { address });\n    }\n\n    async getAddress(): Promise<string> { return this.address; }\n\n    connect(provider: null | Provider): VoidSigner {\n        return new VoidSigner(this.address, provider);\n    }\n\n    #throwUnsupported(suffix: string, operation: string): never {\n        assert(false, `VoidSigner cannot sign ${ suffix }`, \"UNSUPPORTED_OPERATION\", { operation });\n    }\n\n    async signTransaction(tx: TransactionRequest): Promise<string> {\n        this.#throwUnsupported(\"transactions\", \"signTransaction\");\n    }\n\n    async signMessage(message: string | Uint8Array): Promise<string> {\n        this.#throwUnsupported(\"messages\", \"signMessage\");\n    }\n\n    async signTypedData(domain: TypedDataDomain, types: Record<string, Array<TypedDataField>>, value: Record<string, any>): Promise<string> {\n        this.#throwUnsupported(\"typed-data\", \"signTypedData\");\n    }\n}\n\n","import { isError } from \"../utils/index.js\";\n\nimport { PollingEventSubscriber } from \"./subscriber-polling.js\";\n\nimport type { AbstractProvider, Subscriber } from \"./abstract-provider.js\";\nimport type { Network } from \"./network.js\";\nimport type { EventFilter } from \"./provider.js\";\nimport type { JsonRpcApiProvider } from \"./provider-jsonrpc.js\";\n\nfunction copy(obj: any): any {\n    return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n *  Some backends support subscribing to events using a Filter ID.\n *\n *  When subscribing with this technique, the node issues a unique\n *  //Filter ID//. At this point the node dedicates resources to\n *  the filter, so that periodic calls to follow up on the //Filter ID//\n *  will receive any events since the last call.\n *\n *  @_docloc: api/providers/abstract-provider\n */\nexport class FilterIdSubscriber implements Subscriber {\n    #provider: JsonRpcApiProvider;\n\n    #filterIdPromise: null | Promise<string>;\n    #poller: (b: number) => Promise<void>;\n\n    #running: boolean;\n\n    #network: null | Network;\n\n    #hault: boolean;\n\n    /**\n     *  Creates a new **FilterIdSubscriber** which will used [[_subscribe]]\n     *  and [[_emitResults]] to setup the subscription and provide the event\n     *  to the %%provider%%.\n     */\n    constructor(provider: JsonRpcApiProvider) {\n        this.#provider = provider;\n\n        this.#filterIdPromise = null;\n        this.#poller = this.#poll.bind(this);\n\n        this.#running = false;\n\n        this.#network = null;\n\n        this.#hault = false;\n    }\n\n    /**\n     *  Sub-classes **must** override this to begin the subscription.\n     */\n    _subscribe(provider: JsonRpcApiProvider): Promise<string> {\n        throw new Error(\"subclasses must override this\");\n    }\n\n    /**\n     *  Sub-classes **must** override this handle the events.\n     */\n    _emitResults(provider: AbstractProvider, result: Array<any>): Promise<void> {\n        throw new Error(\"subclasses must override this\");\n    }\n\n    /**\n     *  Sub-classes **must** override this handle recovery on errors.\n     */\n    _recover(provider: AbstractProvider): Subscriber {\n        throw new Error(\"subclasses must override this\");\n    }\n\n    async #poll(blockNumber: number): Promise<void> {\n        try {\n            // Subscribe if necessary\n            if (this.#filterIdPromise == null) {\n                this.#filterIdPromise = this._subscribe(this.#provider);\n            }\n\n            // Get the Filter ID\n            let filterId: null | string = null;\n            try {\n                filterId = await this.#filterIdPromise;\n            } catch (error) {\n                if (!isError(error, \"UNSUPPORTED_OPERATION\") || error.operation !== \"eth_newFilter\") {\n                    throw error;\n                }\n            }\n\n            // The backend does not support Filter ID; downgrade to\n            // polling\n            if (filterId == null) {\n                this.#filterIdPromise = null;\n                this.#provider._recoverSubscriber(this, this._recover(this.#provider));\n                return;\n            }\n\n            const network = await this.#provider.getNetwork();\n            if (!this.#network) { this.#network = network; }\n\n            if ((this.#network as Network).chainId !== network.chainId) {\n                throw new Error(\"chaid changed\");\n            }\n\n            if (this.#hault) { return; }\n\n            const result = await this.#provider.send(\"eth_getFilterChanges\", [ filterId ]);\n            await this._emitResults(this.#provider, result);\n        } catch (error) { console.log(\"@TODO\", error); }\n\n        this.#provider.once(\"block\", this.#poller);\n    }\n\n    #teardown(): void {\n        const filterIdPromise = this.#filterIdPromise;\n        if (filterIdPromise) {\n            this.#filterIdPromise = null;\n            filterIdPromise.then((filterId) => {\n                if (this.#provider.destroyed) { return; }\n                this.#provider.send(\"eth_uninstallFilter\", [ filterId ]);\n            });\n        }\n    }\n\n    start(): void {\n        if (this.#running) { return; }\n        this.#running = true;\n\n        this.#poll(-2);\n    }\n\n    stop(): void {\n        if (!this.#running) { return; }\n        this.#running = false;\n\n        this.#hault = true;\n        this.#teardown();\n        this.#provider.off(\"block\", this.#poller);\n    }\n\n    pause(dropWhilePaused?: boolean): void {\n        if (dropWhilePaused){ this.#teardown(); }\n        this.#provider.off(\"block\", this.#poller);\n    }\n\n    resume(): void { this.start(); }\n}\n\n/**\n *  A **FilterIdSubscriber** for receiving contract events.\n *\n *  @_docloc: api/providers/abstract-provider\n */\nexport class FilterIdEventSubscriber extends FilterIdSubscriber {\n    #event: EventFilter;\n\n    /**\n     *  Creates a new **FilterIdEventSubscriber** attached to %%provider%%\n     *  listening for %%filter%%.\n     */\n    constructor(provider: JsonRpcApiProvider, filter: EventFilter) {\n        super(provider);\n        this.#event = copy(filter);\n    }\n\n    _recover(provider: AbstractProvider): Subscriber {\n        return new PollingEventSubscriber(provider, this.#event);\n    }\n\n    async _subscribe(provider: JsonRpcApiProvider): Promise<string> {\n        const filterId = await provider.send(\"eth_newFilter\", [ this.#event ]);\n        return filterId;\n    }\n\n    async _emitResults(provider: JsonRpcApiProvider, results: Array<any>): Promise<void> {\n        for (const result of results) {\n            provider.emit(this.#event, provider._wrapLog(result, provider._network));\n        }\n    }\n}\n\n/**\n *  A **FilterIdSubscriber** for receiving pending transactions events.\n *\n *  @_docloc: api/providers/abstract-provider\n */\nexport class FilterIdPendingSubscriber extends FilterIdSubscriber {\n    async _subscribe(provider: JsonRpcApiProvider): Promise<string> {\n        return await provider.send(\"eth_newPendingTransactionFilter\", [ ]);\n    }\n\n    async _emitResults(provider: JsonRpcApiProvider, results: Array<any>): Promise<void> {\n        for (const result of results) {\n            provider.emit(\"pending\", result);\n        }\n    }\n}\n","/**\n *  One of the most common ways to interact with the blockchain is\n *  by a node running a JSON-RPC interface which can be connected to,\n *  based on the transport, using:\n *\n *  - HTTP or HTTPS - [[JsonRpcProvider]]\n *  - WebSocket - [[WebSocketProvider]]\n *  - IPC - [[IpcSocketProvider]]\n *\n * @_section: api/providers/jsonrpc:JSON-RPC Provider  [about-jsonrpcProvider]\n */\n\n// @TODO:\n// - Add the batching API\n\n// https://playground.open-rpc.org/?schemaUrl=https://raw.githubusercontent.com/ethereum/eth1.0-apis/assembled-spec/openrpc.json&uiSchema%5BappBar%5D%5Bui:splitView%5D=true&uiSchema%5BappBar%5D%5Bui:input%5D=false&uiSchema%5BappBar%5D%5Bui:examplesDropdown%5D=false\n\nimport { AbiCoder } from \"../abi/index.js\";\nimport { getAddress, resolveAddress } from \"../address/index.js\";\nimport { TypedDataEncoder } from \"../hash/index.js\";\nimport { accessListify, authorizationify } from \"../transaction/index.js\";\nimport {\n    defineProperties, getBigInt, hexlify, isHexString, toQuantity, toUtf8Bytes,\n    isError, makeError, assert, assertArgument,\n    FetchRequest, resolveProperties\n} from \"../utils/index.js\";\n\nimport { AbstractProvider, UnmanagedSubscriber } from \"./abstract-provider.js\";\nimport { AbstractSigner } from \"./abstract-signer.js\";\nimport { Network } from \"./network.js\";\nimport { FilterIdEventSubscriber, FilterIdPendingSubscriber } from \"./subscriber-filterid.js\";\nimport { PollingEventSubscriber } from \"./subscriber-polling.js\";\n\nimport type { TypedDataDomain, TypedDataField } from \"../hash/index.js\";\nimport type { TransactionLike } from \"../transaction/index.js\";\n\nimport type { PerformActionRequest, Subscriber, Subscription } from \"./abstract-provider.js\";\nimport type { Networkish } from \"./network.js\";\nimport type { Provider, TransactionRequest, TransactionResponse } from \"./provider.js\";\nimport type { Signer } from \"./signer.js\";\n\ntype Timer = ReturnType<typeof setTimeout>;\n\nconst Primitive = \"bigint,boolean,function,number,string,symbol\".split(/,/g);\n//const Methods = \"getAddress,then\".split(/,/g);\nfunction deepCopy<T = any>(value: T): T {\n    if (value == null || Primitive.indexOf(typeof(value)) >= 0) {\n        return value;\n    }\n\n    // Keep any Addressable\n    if (typeof((<any>value).getAddress) === \"function\") {\n        return value;\n    }\n\n    if (Array.isArray(value)) { return <any>(value.map(deepCopy)); }\n\n    if (typeof(value) === \"object\") {\n        return Object.keys(value).reduce((accum, key) => {\n            accum[key] = (<any>value)[key];\n            return accum;\n        }, <any>{ });\n    }\n\n    throw new Error(`should not happen: ${ value } (${ typeof(value) })`);\n}\n\nfunction stall(duration: number): Promise<void> {\n    return new Promise((resolve) => { setTimeout(resolve, duration); });\n}\n\nfunction getLowerCase(value: string): string {\n    if (value) { return value.toLowerCase(); }\n    return value;\n}\n\ninterface Pollable {\n    pollingInterval: number;\n}\n\nfunction isPollable(value: any): value is Pollable {\n    return (value && typeof(value.pollingInterval) === \"number\");\n}\n\n/**\n *  A JSON-RPC payload, which are sent to a JSON-RPC server.\n */\nexport type JsonRpcPayload = {\n    /**\n     *  The JSON-RPC request ID.\n     */\n    id: number;\n\n    /**\n     *  The JSON-RPC request method.\n     */\n    method: string;\n\n    /**\n     *  The JSON-RPC request parameters.\n     */\n    params: Array<any> | Record<string, any>;\n\n    /**\n     *  A required constant in the JSON-RPC specification.\n     */\n    jsonrpc: \"2.0\";\n};\n\n/**\n *  A JSON-RPC result, which are returned on success from a JSON-RPC server.\n */\nexport type JsonRpcResult = {\n    /**\n     *  The response ID to match it to the relevant request.\n     */\n    id: number;\n\n    /**\n     *  The response result.\n     */\n    result: any;\n};\n\n/**\n *  A JSON-RPC error, which are returned on failure from a JSON-RPC server.\n */\nexport type JsonRpcError = {\n    /**\n     *  The response ID to match it to the relevant request.\n     */\n    id: number;\n\n    /**\n     *  The response error.\n     */\n    error: {\n        code: number;\n        message?: string;\n        data?: any;\n    }\n};\n\n/**\n *  When subscribing to the ``\"debug\"`` event, the [[Listener]] will\n *  receive this object as the first parameter.\n */\nexport type DebugEventJsonRpcApiProvider = {\n    action: \"sendRpcPayload\",\n    payload: JsonRpcPayload | Array<JsonRpcPayload>\n} | {\n    action: \"receiveRpcResult\",\n    result: Array<JsonRpcResult | JsonRpcError>\n} | {\n    action: \"receiveRpcError\",\n    error: Error\n};\n\n/**\n *  Options for configuring a [[JsonRpcApiProvider]]. Much of this\n *  is targetted towards sub-classes, which often will not expose\n *  any of these options to their consumers.\n *\n *  **``polling``** - use the polling strategy is used immediately\n *  for events; otherwise, attempt to use filters and fall back onto\n *  polling (default: ``false``)\n *\n *  **``staticNetwork``** - do not request chain ID on requests to\n *  validate the underlying chain has not changed (default: ``null``)\n *\n *  This should **ONLY** be used if it is **certain** that the network\n *  cannot change, such as when using INFURA (since the URL dictates the\n *  network). If the network is assumed static and it does change, this\n *  can have tragic consequences. For example, this **CANNOT** be used\n *  with MetaMask, since the user can select a new network from the\n *  drop-down at any time.\n *\n *  **``batchStallTime``** - how long (ms) to aggregate requests into a\n *  single batch. ``0`` indicates batching will only encompass the current\n *  event loop. If ``batchMaxCount = 1``, this is ignored. (default: ``10``)\n *\n *  **``batchMaxSize``** - target maximum size (bytes) to allow per batch\n *  request (default: 1Mb)\n *\n *  **``batchMaxCount``** - maximum number of requests to allow in a batch.\n *  If ``batchMaxCount = 1``, then batching is disabled. (default: ``100``)\n *\n *  **``cacheTimeout``** - passed as [[AbstractProviderOptions]].\n */\nexport type JsonRpcApiProviderOptions = {\n    polling?: boolean;\n    staticNetwork?: null | boolean | Network;\n    batchStallTime?: number;\n    batchMaxSize?: number;\n    batchMaxCount?: number;\n\n    cacheTimeout?: number;\n    pollingInterval?: number;\n};\n\nconst defaultOptions = {\n    polling: false,\n    staticNetwork: null,\n\n    batchStallTime: 10,      // 10ms\n    batchMaxSize: (1 << 20), // 1Mb\n    batchMaxCount: 100,      // 100 requests\n\n    cacheTimeout: 250,\n    pollingInterval: 4000\n}\n\n/**\n *  A **JsonRpcTransactionRequest** is formatted as needed by the JSON-RPC\n *  Ethereum API specification.\n */\nexport interface JsonRpcTransactionRequest {\n     /**\n      *  The sender address to use when signing.\n      */\n     from?: string;\n\n     /**\n      *  The target address.\n      */\n     to?: string;\n\n     /**\n      *  The transaction data.\n      */\n     data?: string;\n\n     /**\n      *  The chain ID the transaction is valid on.\n      */\n     chainId?: string;\n\n     /**\n      *  The [[link-eip-2718]] transaction type.\n      */\n     type?: string;\n\n     /**\n      *  The maximum amount of gas to allow a transaction to consume.\n      *\n      *  In most other places in ethers, this is called ``gasLimit`` which\n      *  differs from the JSON-RPC Ethereum API specification.\n      */\n     gas?: string;\n\n     /**\n      *  The gas price per wei for transactions prior to [[link-eip-1559]].\n      */\n     gasPrice?: string;\n\n     /**\n      *  The maximum fee per gas for [[link-eip-1559]] transactions.\n      */\n     maxFeePerGas?: string;\n\n     /**\n      *  The maximum priority fee per gas for [[link-eip-1559]] transactions.\n      */\n     maxPriorityFeePerGas?: string;\n\n     /**\n      *  The nonce for the transaction.\n      */\n     nonce?: string;\n\n     /**\n      *  The transaction value (in wei).\n      */\n     value?: string;\n\n     /**\n      *  The transaction access list.\n      */\n     accessList?: Array<{ address: string, storageKeys: Array<string> }>;\n\n     /**\n      *  The transaction authorization list.\n      */\n     authorizationList?: Array<{\n         address: string, nonce: string, chainId: string,\n         yParity: string, r: string, s: string\n     }>;\n}\n\n// @TODO: Unchecked Signers\n\nexport class JsonRpcSigner extends AbstractSigner<JsonRpcApiProvider> {\n    address!: string;\n\n    constructor(provider: JsonRpcApiProvider, address: string) {\n        super(provider);\n        address = getAddress(address);\n        defineProperties<JsonRpcSigner>(this, { address });\n    }\n\n    connect(provider: null | Provider): Signer {\n        assert(false, \"cannot reconnect JsonRpcSigner\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"signer.connect\"\n        });\n    }\n\n    async getAddress(): Promise<string> {\n        return this.address;\n    }\n\n    // JSON-RPC will automatially fill in nonce, etc. so we just check from\n    async populateTransaction(tx: TransactionRequest): Promise<TransactionLike<string>> {\n        return await this.populateCall(tx);\n    }\n\n    // Returns just the hash of the transaction after sent, which is what\n    // the bare JSON-RPC API does;\n    async sendUncheckedTransaction(_tx: TransactionRequest): Promise<string> {\n        const tx = deepCopy(_tx);\n\n        const promises: Array<Promise<void>> = [];\n\n        // Make sure the from matches the sender\n        if (tx.from) {\n            const _from = tx.from;\n            promises.push((async () => {\n                const from = await resolveAddress(_from, this.provider);\n                assertArgument(from != null && from.toLowerCase() === this.address.toLowerCase(),\n                    \"from address mismatch\", \"transaction\", _tx);\n                tx.from = from;\n            })());\n        } else {\n            tx.from = this.address;\n        }\n\n        // The JSON-RPC for eth_sendTransaction uses 90000 gas; if the user\n        // wishes to use this, it is easy to specify explicitly, otherwise\n        // we look it up for them.\n        if (tx.gasLimit == null) {\n            promises.push((async () => {\n                tx.gasLimit = await this.provider.estimateGas({ ...tx, from: this.address});\n            })());\n        }\n\n        // The address may be an ENS name or Addressable\n        if (tx.to != null) {\n            const _to = tx.to;\n            promises.push((async () => {\n                tx.to = await resolveAddress(_to, this.provider);\n            })());\n        }\n\n        // Wait until all of our properties are filled in\n        if (promises.length) { await Promise.all(promises); }\n\n        const hexTx = this.provider.getRpcTransaction(tx);\n\n        return this.provider.send(\"eth_sendTransaction\", [ hexTx ]);\n    }\n\n    async sendTransaction(tx: TransactionRequest): Promise<TransactionResponse> {\n        // This cannot be mined any earlier than any recent block\n        const blockNumber = await this.provider.getBlockNumber();\n\n        // Send the transaction\n        const hash = await this.sendUncheckedTransaction(tx);\n\n        // Unfortunately, JSON-RPC only provides and opaque transaction hash\n        // for a response, and we need the actual transaction, so we poll\n        // for it; it should show up very quickly\n        return await (new Promise((resolve, reject) => {\n            const timeouts = [ 1000, 100 ];\n            let invalids = 0;\n\n            const checkTx = async () => {\n\n                try {\n                    // Try getting the transaction\n                    const tx = await this.provider.getTransaction(hash);\n\n                    if (tx != null) {\n                        resolve(tx.replaceableTransaction(blockNumber));\n                        return;\n                    }\n\n                } catch (error) {\n\n                    // If we were cancelled: stop polling.\n                    // If the data is bad: the node returns bad transactions\n                    // If the network changed: calling again will also fail\n                    // If unsupported: likely destroyed\n                    if (isError(error, \"CANCELLED\") || isError(error, \"BAD_DATA\") ||\n                        isError(error, \"NETWORK_ERROR\") || isError(error, \"UNSUPPORTED_OPERATION\")) {\n\n                        if (error.info == null) { error.info = { }; }\n                        error.info.sendTransactionHash = hash;\n\n                        reject(error);\n                        return;\n                    }\n\n                    // Stop-gap for misbehaving backends; see #4513\n                    if (isError(error, \"INVALID_ARGUMENT\")) {\n                        invalids++;\n                        if (error.info == null) { error.info = { }; }\n                        error.info.sendTransactionHash = hash;\n                        if (invalids > 10) {\n                            reject(error);\n                            return;\n                        }\n                    }\n\n                    // Notify anyone that cares; but we will try again, since\n                    // it is likely an intermittent service error\n                    this.provider.emit(\"error\", makeError(\"failed to fetch transation after sending (will try again)\", \"UNKNOWN_ERROR\", { error }));\n                }\n\n                // Wait another 4 seconds\n                this.provider._setTimeout(() => { checkTx(); }, timeouts.pop() || 4000);\n            };\n            checkTx();\n        }));\n    }\n\n    async signTransaction(_tx: TransactionRequest): Promise<string> {\n        const tx = deepCopy(_tx);\n\n        // Make sure the from matches the sender\n        if (tx.from) {\n            const from = await resolveAddress(tx.from, this.provider);\n            assertArgument(from != null && from.toLowerCase() === this.address.toLowerCase(),\n                \"from address mismatch\", \"transaction\", _tx);\n            tx.from = from;\n        } else {\n            tx.from = this.address;\n        }\n\n        const hexTx = this.provider.getRpcTransaction(tx);\n        return await this.provider.send(\"eth_signTransaction\", [ hexTx ]);\n    }\n\n\n    async signMessage(_message: string | Uint8Array): Promise<string> {\n        const message = ((typeof(_message) === \"string\") ? toUtf8Bytes(_message): _message);\n        return await this.provider.send(\"personal_sign\", [\n            hexlify(message), this.address.toLowerCase() ]);\n    }\n\n    async signTypedData(domain: TypedDataDomain, types: Record<string, Array<TypedDataField>>, _value: Record<string, any>): Promise<string> {\n        const value = deepCopy(_value);\n\n        // Populate any ENS names (in-place)\n        const populated = await TypedDataEncoder.resolveNames(domain, types, value, async (value: string) => {\n            const address = await resolveAddress(value);\n            assertArgument(address != null, \"TypedData does not support null address\", \"value\", value);\n            return address;\n        });\n\n        return await this.provider.send(\"eth_signTypedData_v4\", [\n            this.address.toLowerCase(),\n            JSON.stringify(TypedDataEncoder.getPayload(populated.domain, types, populated.value))\n        ]);\n    }\n\n    async unlock(password: string): Promise<boolean> {\n        return this.provider.send(\"personal_unlockAccount\", [\n            this.address.toLowerCase(), password, null ]);\n    }\n\n    // https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sign\n    async _legacySignMessage(_message: string | Uint8Array): Promise<string> {\n        const message = ((typeof(_message) === \"string\") ? toUtf8Bytes(_message): _message);\n        return await this.provider.send(\"eth_sign\", [\n            this.address.toLowerCase(), hexlify(message) ]);\n    }\n}\n\ntype ResolveFunc = (result: JsonRpcResult) => void;\ntype RejectFunc = (error: Error) => void;\n\ntype Payload = { payload: JsonRpcPayload, resolve: ResolveFunc, reject: RejectFunc };\n\n/**\n *  The JsonRpcApiProvider is an abstract class and **MUST** be\n *  sub-classed.\n *\n *  It provides the base for all JSON-RPC-based Provider interaction.\n *\n *  Sub-classing Notes:\n *  - a sub-class MUST override _send\n *  - a sub-class MUST call the `_start()` method once connected\n */\nexport abstract class JsonRpcApiProvider extends AbstractProvider {\n\n    #options: Required<JsonRpcApiProviderOptions>;\n\n    // The next ID to use for the JSON-RPC ID field\n    #nextId: number;\n\n    // Payloads are queued and triggered in batches using the drainTimer\n    #payloads: Array<Payload>;\n    #drainTimer: null | Timer;\n\n    #notReady: null | {\n        promise: Promise<void>,\n        resolve: null | ((v: void) => void)\n    };\n\n    #network: null | Network;\n    #pendingDetectNetwork: null | Promise<Network>;\n\n    #scheduleDrain(): void {\n        if (this.#drainTimer) { return; }\n\n        // If we aren't using batching, no harm in sending it immediately\n        const stallTime = (this._getOption(\"batchMaxCount\") === 1) ? 0: this._getOption(\"batchStallTime\");\n\n        this.#drainTimer = setTimeout(() => {\n            this.#drainTimer = null;\n\n            const payloads = this.#payloads;\n            this.#payloads = [ ];\n\n            while (payloads.length) {\n\n                // Create payload batches that satisfy our batch constraints\n                const batch = [ <Payload>(payloads.shift()) ];\n                while (payloads.length) {\n                    if (batch.length === this.#options.batchMaxCount) { break; }\n                    batch.push(<Payload>(payloads.shift()));\n                    const bytes = JSON.stringify(batch.map((p) => p.payload));\n                    if (bytes.length > this.#options.batchMaxSize) {\n                        payloads.unshift(<Payload>(batch.pop()));\n                        break;\n                    }\n                }\n\n                // Process the result to each payload\n                (async () => {\n                    const payload = ((batch.length === 1) ? batch[0].payload: batch.map((p) => p.payload));\n\n                    this.emit(\"debug\", { action: \"sendRpcPayload\", payload });\n\n                    try {\n                        const result = await this._send(payload);\n                        this.emit(\"debug\", { action: \"receiveRpcResult\", result });\n\n                        // Process results in batch order\n                        for (const { resolve, reject, payload } of batch) {\n\n                            if (this.destroyed) {\n                                reject(makeError(\"provider destroyed; cancelled request\", \"UNSUPPORTED_OPERATION\", { operation: payload.method }));\n                                continue;\n                            }\n\n                            // Find the matching result\n                            const resp = result.filter((r) => (r.id === payload.id))[0];\n\n                            // No result; the node failed us in unexpected ways\n                            if (resp == null) {\n                                const error = makeError(\"missing response for request\", \"BAD_DATA\", {\n                                    value: result, info: { payload }\n                                });\n                                this.emit(\"error\", error);\n                                reject(error);\n                                continue;\n                            }\n\n                            // The response is an error\n                            if (\"error\" in resp) {\n                                reject(this.getRpcError(payload, resp));\n                                continue;\n                            }\n\n                            // All good; send the result\n                            resolve(resp.result);\n                        }\n\n                    } catch (error: any) {\n                        this.emit(\"debug\", { action: \"receiveRpcError\", error });\n\n                        for (const { reject } of batch) {\n                            // @TODO: augment the error with the payload\n                            reject(error);\n                        }\n                    }\n                })();\n            }\n        }, stallTime);\n    }\n\n    constructor(network?: Networkish, options?: JsonRpcApiProviderOptions) {\n        super(network, options);\n\n        this.#nextId = 1;\n        this.#options = Object.assign({ }, defaultOptions, options || { });\n\n        this.#payloads = [ ];\n        this.#drainTimer = null;\n\n        this.#network = null;\n        this.#pendingDetectNetwork = null;\n\n        {\n            let resolve: null | ((value: void) => void) = null;\n            const promise = new Promise((_resolve: (value: void) => void) => {\n                resolve = _resolve;\n            });\n            this.#notReady = { promise, resolve };\n        }\n\n        const staticNetwork = this._getOption(\"staticNetwork\");\n        if (typeof(staticNetwork) === \"boolean\") {\n            assertArgument(!staticNetwork || network !== \"any\", \"staticNetwork cannot be used on special network 'any'\", \"options\", options);\n            if (staticNetwork && network != null) {\n                this.#network = Network.from(network);\n            }\n\n        } else if (staticNetwork) {\n            // Make sure any static network is compatbile with the provided netwrok\n            assertArgument(network == null || staticNetwork.matches(network),\n                \"staticNetwork MUST match network object\", \"options\", options);\n            this.#network = staticNetwork;\n        }\n    }\n\n    /**\n     *  Returns the value associated with the option %%key%%.\n     *\n     *  Sub-classes can use this to inquire about configuration options.\n     */\n    _getOption<K extends keyof JsonRpcApiProviderOptions>(key: K): JsonRpcApiProviderOptions[K] {\n        return this.#options[key];\n    }\n\n    /**\n     *  Gets the [[Network]] this provider has committed to. On each call, the network\n     *  is detected, and if it has changed, the call will reject.\n     */\n    get _network(): Network {\n        assert (this.#network, \"network is not available yet\", \"NETWORK_ERROR\");\n        return this.#network;\n    }\n\n    /**\n     *  Sends a JSON-RPC %%payload%% (or a batch) to the underlying channel.\n     *\n     *  Sub-classes **MUST** override this.\n     */\n    abstract _send(payload: JsonRpcPayload | Array<JsonRpcPayload>): Promise<Array<JsonRpcResult | JsonRpcError>>;\n\n\n    /**\n     *  Resolves to the non-normalized value by performing %%req%%.\n     *\n     *  Sub-classes may override this to modify behavior of actions,\n     *  and should generally call ``super._perform`` as a fallback.\n     */\n    async _perform(req: PerformActionRequest): Promise<any> {\n\n        // Legacy networks do not like the type field being passed along (which\n        // is fair), so we delete type if it is 0 and a non-EIP-1559 network\n        if (req.method === \"call\" || req.method === \"estimateGas\") {\n            let tx = req.transaction;\n            if (tx && tx.type != null && getBigInt(tx.type)) {\n                // If there are no EIP-1559 or newer properties, it might be pre-EIP-1559\n                if (tx.maxFeePerGas == null && tx.maxPriorityFeePerGas == null) {\n                    const feeData = await this.getFeeData();\n                    if (feeData.maxFeePerGas == null && feeData.maxPriorityFeePerGas == null) {\n                        // Network doesn't know about EIP-1559 (and hence type)\n                        req = Object.assign({ }, req, {\n                            transaction: Object.assign({ }, tx, { type: undefined })\n                        });\n                    }\n                }\n            }\n        }\n\n        const request = this.getRpcRequest(req);\n\n        if (request != null) {\n            return await this.send(request.method, request.args);\n        }\n\n        return super._perform(req);\n    }\n\n    /**\n     *  Sub-classes may override this; it detects the *actual* network that\n     *  we are **currently** connected to.\n     *\n     *  Keep in mind that [[send]] may only be used once [[ready]], otherwise the\n     *  _send primitive must be used instead.\n     */\n    async _detectNetwork(): Promise<Network> {\n        const network = this._getOption(\"staticNetwork\");\n        if (network) {\n            if (network === true) {\n                if (this.#network) { return this.#network; }\n            } else {\n                return network;\n            }\n        }\n\n        if (this.#pendingDetectNetwork) {\n            return await this.#pendingDetectNetwork;\n        }\n\n        // If we are ready, use ``send``, which enabled requests to be batched\n        if (this.ready) {\n            this.#pendingDetectNetwork = (async () => {\n                try {\n                    const result = Network.from(getBigInt(await this.send(\"eth_chainId\", [ ])));\n                    this.#pendingDetectNetwork = null;\n                    return result;\n                } catch (error) {\n                    this.#pendingDetectNetwork = null;\n                    throw error;\n                }\n            })();\n            return await this.#pendingDetectNetwork;\n        }\n\n        // We are not ready yet; use the primitive _send\n        this.#pendingDetectNetwork = (async () => {\n            const payload: JsonRpcPayload = {\n                id: this.#nextId++, method: \"eth_chainId\", params: [ ], jsonrpc: \"2.0\"\n            };\n\n            this.emit(\"debug\", { action: \"sendRpcPayload\", payload });\n\n            let result: JsonRpcResult | JsonRpcError;\n            try {\n                result = (await this._send(payload))[0];\n                this.#pendingDetectNetwork = null;\n            } catch (error) {\n                this.#pendingDetectNetwork = null;\n                this.emit(\"debug\", { action: \"receiveRpcError\", error });\n                throw error;\n            }\n\n            this.emit(\"debug\", { action: \"receiveRpcResult\", result });\n\n            if (\"result\" in result) {\n                return Network.from(getBigInt(result.result));\n            }\n\n            throw this.getRpcError(payload, result);\n        })();\n\n        return await this.#pendingDetectNetwork;\n    }\n\n    /**\n     *  Sub-classes **MUST** call this. Until [[_start]] has been called, no calls\n     *  will be passed to [[_send]] from [[send]]. If it is overridden, then\n     *  ``super._start()`` **MUST** be called.\n     *\n     *  Calling it multiple times is safe and has no effect.\n     */\n    _start(): void {\n        if (this.#notReady == null || this.#notReady.resolve == null) { return; }\n\n        this.#notReady.resolve();\n        this.#notReady = null;\n\n        (async () => {\n\n            // Bootstrap the network\n            while (this.#network == null && !this.destroyed) {\n                try {\n                    this.#network = await this._detectNetwork();\n                } catch (error) {\n                    if (this.destroyed) { break; }\n                    console.log(\"JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)\");\n                    this.emit(\"error\", makeError(\"failed to bootstrap network detection\", \"NETWORK_ERROR\", { event: \"initial-network-discovery\", info: { error } }));\n                    await stall(1000);\n                }\n            }\n\n            // Start dispatching requests\n            this.#scheduleDrain();\n        })();\n    }\n\n    /**\n     *  Resolves once the [[_start]] has been called. This can be used in\n     *  sub-classes to defer sending data until the connection has been\n     *  established.\n     */\n    async _waitUntilReady(): Promise<void> {\n        if (this.#notReady == null) { return; }\n        return await this.#notReady.promise;\n    }\n\n\n    /**\n     *  Return a Subscriber that will manage the %%sub%%.\n     *\n     *  Sub-classes may override this to modify the behavior of\n     *  subscription management.\n     */\n    _getSubscriber(sub: Subscription): Subscriber {\n\n        // Pending Filters aren't availble via polling\n        if (sub.type === \"pending\") { return new FilterIdPendingSubscriber(this); }\n\n        if (sub.type === \"event\") {\n            if (this._getOption(\"polling\")) {\n                return new PollingEventSubscriber(this, sub.filter);\n            }\n            return new FilterIdEventSubscriber(this, sub.filter);\n        }\n\n        // Orphaned Logs are handled automatically, by the filter, since\n        // logs with removed are emitted by it\n        if (sub.type === \"orphan\" && sub.filter.orphan === \"drop-log\") {\n            return new UnmanagedSubscriber(\"orphan\");\n        }\n\n        return super._getSubscriber(sub);\n    }\n\n    /**\n     *  Returns true only if the [[_start]] has been called.\n     */\n    get ready(): boolean { return this.#notReady == null; }\n\n    /**\n     *  Returns %%tx%% as a normalized JSON-RPC transaction request,\n     *  which has all values hexlified and any numeric values converted\n     *  to Quantity values.\n     */\n    getRpcTransaction(tx: TransactionRequest): JsonRpcTransactionRequest {\n        const result: JsonRpcTransactionRequest = {};\n\n        // JSON-RPC now requires numeric values to be \"quantity\" values\n        [\"chainId\", \"gasLimit\", \"gasPrice\", \"type\", \"maxFeePerGas\", \"maxPriorityFeePerGas\", \"nonce\", \"value\"].forEach((key) => {\n            if ((<any>tx)[key] == null) { return; }\n            let dstKey = key;\n            if (key === \"gasLimit\") { dstKey = \"gas\"; }\n            (<any>result)[dstKey] = toQuantity(getBigInt((<any>tx)[key], `tx.${ key }`));\n        });\n\n        // Make sure addresses and data are lowercase\n        [\"from\", \"to\", \"data\"].forEach((key) => {\n            if ((<any>tx)[key] == null) { return; }\n            (<any>result)[key] = hexlify((<any>tx)[key]);\n        });\n\n        // Normalize the access list object\n        if (tx.accessList) {\n            result[\"accessList\"] = accessListify(tx.accessList);\n        }\n\n        if (tx.blobVersionedHashes) {\n            // @TODO: Remove this <any> case once EIP-4844 added to prepared tx\n            (<any>result)[\"blobVersionedHashes\"] = tx.blobVersionedHashes.map(h => h.toLowerCase());\n        }\n\n        if (tx.authorizationList) {\n            result[\"authorizationList\"] = tx.authorizationList.map((_a) => {\n                const a = authorizationify(_a);\n                return {\n                    address: a.address,\n                    nonce: toQuantity(a.nonce),\n                    chainId: toQuantity(a.chainId),\n                    yParity: toQuantity(a.signature.yParity),\n                    r: toQuantity(a.signature.r),\n                    s: toQuantity(a.signature.s),\n                }\n            });\n        }\n\n        // @TODO: blobs should probably also be copied over, optionally\n        // accounting for the kzg property to backfill blobVersionedHashes\n        // using the commitment. Or should that be left as an exercise to\n        // the caller?\n\n        return result;\n    }\n\n    /**\n     *  Returns the request method and arguments required to perform\n     *  %%req%%.\n     */\n    getRpcRequest(req: PerformActionRequest): null | { method: string, args: Array<any> } {\n        switch (req.method) {\n            case \"chainId\":\n                return { method: \"eth_chainId\", args: [ ] };\n\n            case \"getBlockNumber\":\n                return { method: \"eth_blockNumber\", args: [ ] };\n\n            case \"getGasPrice\":\n                return { method: \"eth_gasPrice\", args: [] };\n\n            case \"getPriorityFee\":\n                return { method: \"eth_maxPriorityFeePerGas\", args: [ ] };\n\n            case \"getBalance\":\n                return {\n                    method: \"eth_getBalance\",\n                    args: [ getLowerCase(req.address), req.blockTag ]\n                };\n\n            case \"getTransactionCount\":\n                return {\n                    method: \"eth_getTransactionCount\",\n                    args: [ getLowerCase(req.address), req.blockTag ]\n                };\n\n            case \"getCode\":\n                return {\n                    method: \"eth_getCode\",\n                    args: [ getLowerCase(req.address), req.blockTag ]\n                };\n\n            case \"getStorage\":\n                return {\n                    method: \"eth_getStorageAt\",\n                    args: [\n                        getLowerCase(req.address),\n                        (\"0x\" + req.position.toString(16)),\n                        req.blockTag\n                    ]\n                };\n\n            case \"broadcastTransaction\":\n                return {\n                    method: \"eth_sendRawTransaction\",\n                    args: [ req.signedTransaction ]\n                };\n\n            case \"getBlock\":\n                if (\"blockTag\" in req) {\n                    return {\n                        method: \"eth_getBlockByNumber\",\n                        args: [ req.blockTag, !!req.includeTransactions ]\n                    };\n                } else if (\"blockHash\" in req) {\n                    return {\n                        method: \"eth_getBlockByHash\",\n                        args: [ req.blockHash, !!req.includeTransactions ]\n                    };\n                }\n                break;\n\n            case \"getTransaction\":\n                return {\n                    method: \"eth_getTransactionByHash\",\n                    args: [ req.hash ]\n                };\n\n            case \"getTransactionReceipt\":\n                return {\n                    method: \"eth_getTransactionReceipt\",\n                    args: [ req.hash ]\n                };\n\n            case \"call\":\n                return {\n                    method: \"eth_call\",\n                    args: [ this.getRpcTransaction(req.transaction), req.blockTag ]\n                };\n\n            case \"estimateGas\": {\n                return {\n                    method: \"eth_estimateGas\",\n                    args: [ this.getRpcTransaction(req.transaction) ]\n                };\n            }\n\n            case \"getLogs\":\n                if (req.filter && req.filter.address != null) {\n                    if (Array.isArray(req.filter.address)) {\n                        req.filter.address = req.filter.address.map(getLowerCase);\n                    } else {\n                        req.filter.address = getLowerCase(req.filter.address);\n                    }\n                }\n                return { method: \"eth_getLogs\", args: [ req.filter ] };\n        }\n\n        return null;\n    }\n\n    /**\n     *  Returns an ethers-style Error for the given JSON-RPC error\n     *  %%payload%%, coalescing the various strings and error shapes\n     *  that different nodes return, coercing them into a machine-readable\n     *  standardized error.\n     */\n    getRpcError(payload: JsonRpcPayload, _error: JsonRpcError): Error {\n        const { method } = payload;\n        const { error } = _error;\n\n        if (method === \"eth_estimateGas\" && error.message) {\n            const msg = error.message;\n            if (!msg.match(/revert/i) && msg.match(/insufficient funds/i)) {\n                return makeError(\"insufficient funds\", \"INSUFFICIENT_FUNDS\", {\n                    transaction: ((<any>payload).params[0]),\n                    info: { payload, error }\n                });\n            } else if (msg.match(/nonce/i) && msg.match(/too low/i)) {\n                return makeError(\"nonce has already been used\", \"NONCE_EXPIRED\", {\n                    transaction: ((<any>payload).params[0]),\n                    info: { payload, error }\n                });\n            }\n        }\n\n        if (method === \"eth_call\" || method === \"eth_estimateGas\") {\n            const result = spelunkData(error);\n\n            const e = AbiCoder.getBuiltinCallException(\n                (method === \"eth_call\") ? \"call\": \"estimateGas\",\n                ((<any>payload).params[0]),\n                (result ? result.data: null)\n            );\n            e.info = { error, payload };\n            return e;\n        }\n\n        // Only estimateGas and call can return arbitrary contract-defined text, so now we\n        // we can process text safely.\n\n        const message = JSON.stringify(spelunkMessage(error));\n\n        if (typeof(error.message) === \"string\" && error.message.match(/user denied|ethers-user-denied/i)) {\n            const actionMap: Record<string, \"requestAccess\" | \"sendTransaction\" | \"signMessage\" | \"signTransaction\" | \"signTypedData\"> = {\n                eth_sign: \"signMessage\",\n                personal_sign: \"signMessage\",\n                eth_signTypedData_v4: \"signTypedData\",\n                eth_signTransaction: \"signTransaction\",\n                eth_sendTransaction: \"sendTransaction\",\n                eth_requestAccounts: \"requestAccess\",\n                wallet_requestAccounts: \"requestAccess\",\n            };\n\n            return makeError(`user rejected action`, \"ACTION_REJECTED\", {\n                action: (actionMap[method] || \"unknown\") ,\n                reason: \"rejected\",\n                info: { payload, error }\n            });\n        }\n\n        if (method === \"eth_sendRawTransaction\" || method === \"eth_sendTransaction\") {\n            const transaction = <TransactionLike<string>>((<any>payload).params[0]);\n\n            if (message.match(/insufficient funds|base fee exceeds gas limit/i)) {\n                return makeError(\"insufficient funds for intrinsic transaction cost\", \"INSUFFICIENT_FUNDS\", {\n                    transaction, info: { error }\n                });\n            }\n\n            if (message.match(/nonce/i) && message.match(/too low/i)) {\n                return makeError(\"nonce has already been used\", \"NONCE_EXPIRED\", { transaction, info: { error } });\n            }\n\n            // \"replacement transaction underpriced\"\n            if (message.match(/replacement transaction/i) && message.match(/underpriced/i)) {\n                return makeError(\"replacement fee too low\", \"REPLACEMENT_UNDERPRICED\", { transaction, info: { error } });\n            }\n\n            if (message.match(/only replay-protected/i)) {\n                return makeError(\"legacy pre-eip-155 transactions not supported\", \"UNSUPPORTED_OPERATION\", {\n                    operation: method, info: { transaction, info: { error } }\n                });\n            }\n        }\n\n        let unsupported = !!message.match(/the method .* does not exist/i);\n        if (!unsupported) {\n            if (error && (<any>error).details && (<any>error).details.startsWith(\"Unauthorized method:\")) {\n                unsupported = true;\n            }\n        }\n\n        if (unsupported) {\n            return makeError(\"unsupported operation\", \"UNSUPPORTED_OPERATION\", {\n                operation: payload.method, info: { error, payload }\n            });\n        }\n\n        return makeError(\"could not coalesce error\", \"UNKNOWN_ERROR\", { error, payload });\n    }\n\n\n    /**\n     *  Requests the %%method%% with %%params%% via the JSON-RPC protocol\n     *  over the underlying channel. This can be used to call methods\n     *  on the backend that do not have a high-level API within the Provider\n     *  API.\n     *\n     *  This method queues requests according to the batch constraints\n     *  in the options, assigns the request a unique ID.\n     *\n     *  **Do NOT override** this method in sub-classes; instead\n     *  override [[_send]] or force the options values in the\n     *  call to the constructor to modify this method's behavior.\n     */\n    send(method: string, params: Array<any> | Record<string, any>): Promise<any> {\n        // @TODO: cache chainId?? purge on switch_networks\n\n        // We have been destroyed; no operations are supported anymore\n        if (this.destroyed) {\n            return Promise.reject(makeError(\"provider destroyed; cancelled request\", \"UNSUPPORTED_OPERATION\", { operation: method }));\n        }\n\n        const id = this.#nextId++;\n        const promise = new Promise((resolve, reject) => {\n            this.#payloads.push({\n                resolve, reject,\n                payload: { method, params, id, jsonrpc: \"2.0\" }\n            });\n        });\n\n        // If there is not a pending drainTimer, set one\n        this.#scheduleDrain();\n\n        return <Promise<JsonRpcResult>>promise;\n    }\n\n    /**\n     *  Resolves to the [[Signer]] account for  %%address%% managed by\n     *  the client.\n     *\n     *  If the %%address%% is a number, it is used as an index in the\n     *  the accounts from [[listAccounts]].\n     *\n     *  This can only be used on clients which manage accounts (such as\n     *  Geth with imported account or MetaMask).\n     *\n     *  Throws if the account doesn't exist.\n     */\n    async getSigner(address?: number | string): Promise<JsonRpcSigner> {\n        if (address == null) { address = 0; }\n\n        const accountsPromise = this.send(\"eth_accounts\", [ ]);\n\n        // Account index\n        if (typeof(address) === \"number\") {\n            const accounts = <Array<string>>(await accountsPromise);\n            if (address >= accounts.length) { throw new Error(\"no such account\"); }\n            return new JsonRpcSigner(this, accounts[address]);\n        }\n\n        const { accounts } = await resolveProperties({\n            network: this.getNetwork(),\n            accounts: accountsPromise\n        });\n\n        // Account address\n        address = getAddress(address);\n        for (const account of accounts) {\n            if (getAddress(account) === address) {\n                return new JsonRpcSigner(this, address);\n            }\n        }\n\n        throw new Error(\"invalid account\");\n    }\n\n    async listAccounts(): Promise<Array<JsonRpcSigner>> {\n        const accounts: Array<string> = await this.send(\"eth_accounts\", [ ]);\n        return accounts.map((a) => new JsonRpcSigner(this, a));\n    }\n\n    destroy(): void {\n\n        // Stop processing requests\n        if (this.#drainTimer) {\n            clearTimeout(this.#drainTimer);\n            this.#drainTimer = null;\n        }\n\n        // Cancel all pending requests\n        for (const { payload, reject } of this.#payloads) {\n            reject(makeError(\"provider destroyed; cancelled request\", \"UNSUPPORTED_OPERATION\", { operation: payload.method }));\n        }\n\n        this.#payloads = [ ];\n\n        // Parent clean-up\n        super.destroy();\n\n    }\n}\n\n// @TODO: remove this in v7, it is not exported because this functionality\n// is exposed in the JsonRpcApiProvider by setting polling to true. It should\n// be safe to remove regardless, because it isn't reachable, but just in case.\n/**\n *  @_ignore:\n */\nexport abstract class JsonRpcApiPollingProvider extends JsonRpcApiProvider {\n    #pollingInterval: number;\n    constructor(network?: Networkish, options?: JsonRpcApiProviderOptions) {\n        super(network, options);\n\n        let pollingInterval = this._getOption(\"pollingInterval\");\n        if (pollingInterval == null) { pollingInterval = defaultOptions.pollingInterval; }\n\n        this.#pollingInterval = pollingInterval;\n    }\n\n    _getSubscriber(sub: Subscription): Subscriber {\n        const subscriber = super._getSubscriber(sub);\n        if (isPollable(subscriber)) {\n            subscriber.pollingInterval = this.#pollingInterval;\n        }\n        return subscriber;\n    }\n\n    /**\n     *  The polling interval (default: 4000 ms)\n     */\n    get pollingInterval(): number { return this.#pollingInterval; }\n    set pollingInterval(value: number) {\n        if (!Number.isInteger(value) || value < 0) { throw new Error(\"invalid interval\"); }\n        this.#pollingInterval = value;\n        this._forEachSubscriber((sub) => {\n            if (isPollable(sub)) {\n                sub.pollingInterval = this.#pollingInterval;\n            }\n        });\n    }\n}\n\n/**\n *  The JsonRpcProvider is one of the most common Providers,\n *  which performs all operations over HTTP (or HTTPS) requests.\n *\n *  Events are processed by polling the backend for the current block\n *  number; when it advances, all block-base events are then checked\n *  for updates.\n */\nexport class JsonRpcProvider extends JsonRpcApiPollingProvider {\n    #connect: FetchRequest;\n\n    constructor(url?: string | FetchRequest, network?: Networkish, options?: JsonRpcApiProviderOptions) {\n        if (url == null) { url = \"http:/\\/localhost:8545\"; }\n        super(network, options);\n\n        if (typeof(url) === \"string\") {\n            this.#connect = new FetchRequest(url);\n        } else {\n            this.#connect = url.clone();\n        }\n    }\n\n    _getConnection(): FetchRequest {\n        return this.#connect.clone();\n    }\n\n    async send(method: string, params: Array<any> | Record<string, any>): Promise<any> {\n        // All requests are over HTTP, so we can just start handling requests\n        // We do this here rather than the constructor so that we don't send any\n        // requests to the network (i.e. eth_chainId) until we absolutely have to.\n        await this._start();\n\n        return await super.send(method, params);\n    }\n\n    async _send(payload: JsonRpcPayload | Array<JsonRpcPayload>): Promise<Array<JsonRpcResult>> {\n        // Configure a POST connection for the requested method\n        const request = this._getConnection();\n        request.body = JSON.stringify(payload);\n        request.setHeader(\"content-type\", \"application/json\");\n        const response = await request.send();\n        response.assertOk();\n\n        let resp = response.bodyJson;\n        if (!Array.isArray(resp)) { resp = [ resp ]; }\n\n        return resp;\n    }\n}\n\nfunction spelunkData(value: any): null | { message: string, data: string } {\n    if (value == null) { return null; }\n\n    // These *are* the droids we're looking for.\n    if (typeof(value.message) === \"string\" && value.message.match(/revert/i) && isHexString(value.data)) {\n        return { message: value.message, data: value.data };\n    }\n\n    // Spelunk further...\n    if (typeof(value) === \"object\") {\n        for (const key in value) {\n            const result = spelunkData(value[key]);\n            if (result) { return result; }\n        }\n        return null;\n    }\n\n    // Might be a JSON string we can further descend...\n    if (typeof(value) === \"string\") {\n        try {\n            return spelunkData(JSON.parse(value));\n        } catch (error) { }\n    }\n\n    return null;\n}\n\nfunction _spelunkMessage(value: any, result: Array<string>): void {\n    if (value == null) { return; }\n\n    // These *are* the droids we're looking for.\n    if (typeof(value.message) === \"string\") {\n        result.push(value.message);\n    }\n\n    // Spelunk further...\n    if (typeof(value) === \"object\") {\n        for (const key in value) {\n            _spelunkMessage(value[key], result);\n        }\n    }\n\n    // Might be a JSON string we can further descend...\n    if (typeof(value) === \"string\") {\n        try {\n            return _spelunkMessage(JSON.parse(value), result);\n        } catch (error) { }\n    }\n}\n\nfunction spelunkMessage(value: any): Array<string> {\n    const result: Array<string> = [ ];\n    _spelunkMessage(value, result);\n    return result;\n}\n","\nimport { assertArgument, makeError } from \"../utils/index.js\";\n\nimport { JsonRpcApiPollingProvider } from \"./provider-jsonrpc.js\";\n\nimport type {\n    JsonRpcApiProviderOptions,\n    JsonRpcError, JsonRpcPayload, JsonRpcResult,\n    JsonRpcSigner\n} from \"./provider-jsonrpc.js\";\nimport type { Network, Networkish } from \"./network.js\";\n\n/**\n *  The interface to an [[link-eip-1193]] provider, which is a standard\n *  used by most injected providers, which the [[BrowserProvider]] accepts\n *  and exposes the API of.\n */\nexport interface Eip1193Provider {\n    /**\n     *  See [[link-eip-1193]] for details on this method.\n     */\n    request(request: { method: string, params?: Array<any> | Record<string, any> }): Promise<any>;\n};\n\n/**\n *  The possible additional events dispatched when using the ``\"debug\"``\n *  event on a [[BrowserProvider]].\n */\nexport type DebugEventBrowserProvider = {\n    action: \"sendEip1193Payload\",\n    payload: { method: string, params: Array<any> }\n} | {\n    action: \"receiveEip1193Result\",\n    result: any\n} | {\n    action: \"receiveEip1193Error\",\n    error: Error\n};\n\n/**\n *  Provider info provided by the [[link-eip-6963]] discovery mechanism.\n */\nexport interface Eip6963ProviderInfo {\n    uuid: string;\n    name: string;\n    icon: string;\n    rdns: string;\n}\n\ninterface Eip6963ProviderDetail {\n    info: Eip6963ProviderInfo;\n    provider: Eip1193Provider;\n}\n\ninterface Eip6963Announcement {\n    type: \"eip6963:announceProvider\";\n    detail: Eip6963ProviderDetail\n}\n\nexport type BrowserProviderOptions = {\n    polling?: boolean;\n    staticNetwork?: null | boolean | Network;\n\n    cacheTimeout?: number;\n    pollingInterval?: number;\n\n    providerInfo?: Eip6963ProviderInfo;\n};\n\n/**\n *  Specifies how [[link-eip-6963]] discovery should proceed.\n *\n *  See: [[BrowserProvider-discover]]\n */\nexport interface BrowserDiscoverOptions {\n    /**\n     *  Override provider detection with this provider.\n     */\n    provider?: Eip1193Provider;\n\n    /**\n     *  Duration to wait to detect providers. (default: 300ms)\n     */\n    timeout?: number;\n\n    /**\n     *  Return the first detected provider. Otherwise wait for %%timeout%%\n     *  and allowing filtering before selecting the desired provider.\n     */\n    anyProvider?: boolean;\n\n    /**\n     *  Use the provided window context. Useful in non-standard\n     *  environments or to hijack where a provider comes from.\n     */\n    window?: any;\n\n    /**\n     *  Explicitly choose which provider to used once scanning is complete.\n     */\n    filter?: (found: Array<Eip6963ProviderInfo>) => null | BrowserProvider |\n      Eip6963ProviderInfo;\n}\n\n\n/**\n *  A **BrowserProvider** is intended to wrap an injected provider which\n *  adheres to the [[link-eip-1193]] standard, which most (if not all)\n *  currently do.\n */\nexport class BrowserProvider extends JsonRpcApiPollingProvider {\n    #request: (method: string, params: Array<any> | Record<string, any>) => Promise<any>;\n\n    #providerInfo: null | Eip6963ProviderInfo;\n\n    /**\n     *  Connect to the %%ethereum%% provider, optionally forcing the\n     *  %%network%%.\n     */\n    constructor(ethereum: Eip1193Provider, network?: Networkish, _options?: BrowserProviderOptions) {\n\n        // Copy the options\n        const options: JsonRpcApiProviderOptions = Object.assign({ },\n          ((_options != null) ? _options: { }),\n          { batchMaxCount: 1 });\n\n        assertArgument(ethereum && ethereum.request, \"invalid EIP-1193 provider\", \"ethereum\", ethereum);\n\n        super(network, options);\n\n        this.#providerInfo = null;\n        if (_options && _options.providerInfo) {\n            this.#providerInfo = _options.providerInfo;\n        }\n\n        this.#request = async (method: string, params: Array<any> | Record<string, any>) => {\n            const payload = { method, params };\n            this.emit(\"debug\", { action: \"sendEip1193Request\", payload });\n            try {\n                const result = await ethereum.request(payload);\n                this.emit(\"debug\", { action: \"receiveEip1193Result\", result });\n                return result;\n            } catch (e: any) {\n                const error = new Error(e.message);\n                (<any>error).code = e.code;\n                (<any>error).data = e.data;\n                (<any>error).payload = payload;\n                this.emit(\"debug\", { action: \"receiveEip1193Error\", error });\n                throw error;\n            }\n        };\n    }\n\n    get providerInfo(): null | Eip6963ProviderInfo {\n        return this.#providerInfo;\n    }\n\n    async send(method: string, params: Array<any> | Record<string, any>): Promise<any> {\n        await this._start();\n\n        return await super.send(method, params);\n    }\n\n    async _send(payload: JsonRpcPayload | Array<JsonRpcPayload>): Promise<Array<JsonRpcResult | JsonRpcError>> {\n        assertArgument(!Array.isArray(payload), \"EIP-1193 does not support batch request\", \"payload\", payload);\n\n        try {\n            const result = await this.#request(payload.method, payload.params || [ ]);\n            return [ { id: payload.id, result } ];\n        } catch (e: any) {\n            return [ {\n                id: payload.id,\n                error: { code: e.code, data: e.data, message: e.message }\n            } ];\n        }\n    }\n\n    getRpcError(payload: JsonRpcPayload, error: JsonRpcError): Error {\n\n        error = JSON.parse(JSON.stringify(error));\n\n        // EIP-1193 gives us some machine-readable error codes, so rewrite\n        // them into Ethers standard errors.\n        switch (error.error.code || -1) {\n            case 4001:\n                error.error.message = `ethers-user-denied: ${ error.error.message }`;\n                break;\n            case 4200:\n                error.error.message = `ethers-unsupported: ${ error.error.message }`;\n                break;\n        }\n\n        return super.getRpcError(payload, error);\n    }\n\n    /**\n     *  Resolves to ``true`` if the provider manages the %%address%%.\n     */\n    async hasSigner(address: number | string): Promise<boolean> {\n        if (address == null) { address = 0; }\n\n        const accounts = await this.send(\"eth_accounts\", [ ]);\n        if (typeof(address) === \"number\") {\n            return (accounts.length > address);\n        }\n\n        address = address.toLowerCase();\n        return accounts.filter((a: string) => (a.toLowerCase() === address)).length !== 0;\n    }\n\n    async getSigner(address?: number | string): Promise<JsonRpcSigner> {\n        if (address == null) { address = 0; }\n\n        if (!(await this.hasSigner(address))) {\n            try {\n                await this.#request(\"eth_requestAccounts\", [ ]);\n\n            } catch (error: any) {\n                const payload = error.payload;\n                throw this.getRpcError(payload, { id: payload.id, error });\n            }\n        }\n\n        return await super.getSigner(address);\n    }\n\n    /**\n     *  Discover and connect to a Provider in the Browser using the\n     *  [[link-eip-6963]] discovery mechanism. If no providers are\n     *  present, ``null`` is resolved.\n     */\n    static async discover(options?: BrowserDiscoverOptions): Promise<null | BrowserProvider> {\n        if (options == null) { options = { }; }\n\n        if (options.provider) {\n            return new BrowserProvider(options.provider);\n        }\n\n        const context = options.window ? options.window:\n            (typeof(window) !== \"undefined\") ? window: null;\n\n        if (context == null) { return null; }\n\n        const anyProvider = options.anyProvider;\n        if (anyProvider && context.ethereum) {\n            return new BrowserProvider(context.ethereum);\n        }\n\n        if (!(\"addEventListener\" in context && \"dispatchEvent\" in context\n          && \"removeEventListener\" in context)) {\n            return null;\n        }\n\n        const timeout = options.timeout ? options.timeout: 300;\n        if (timeout === 0) { return null; }\n\n        return await (new Promise((resolve, reject) => {\n            let found: Array<Eip6963ProviderDetail> = [ ];\n\n            const addProvider = (event: Eip6963Announcement) => {\n                found.push(event.detail);\n                if (anyProvider) { finalize(); }\n            };\n\n            const finalize = () => {\n                clearTimeout(timer);\n\n                if (found.length) {\n\n                    // If filtering is provided:\n                    if (options && options.filter) {\n\n                        // Call filter, with a copies of found provider infos\n                        const filtered = options.filter(found.map(i =>\n                          Object.assign({ }, (i.info))));\n\n                        if (filtered == null) {\n                            // No provider selected\n                            resolve(null);\n\n                        } else if (filtered instanceof BrowserProvider) {\n                            // Custom provider created\n                            resolve(filtered);\n\n                        } else {\n                            // Find the matching provider\n                            let match: null | Eip6963ProviderDetail = null;\n                            if (filtered.uuid) {\n                                const matches = found.filter(f =>\n                                  (filtered.uuid === f.info.uuid));\n                                // @TODO: What should happen if multiple values\n                                //        for the same UUID?\n                                match = matches[0];\n                            }\n\n                            if (match) {\n                                const { provider, info } = match;\n                                resolve(new BrowserProvider(provider, undefined, {\n                                    providerInfo: info\n                                }));\n                            } else {\n                                reject(makeError(\"filter returned unknown info\", \"UNSUPPORTED_OPERATION\", {\n                                    value: filtered\n                                }));\n                            }\n                        }\n\n                    } else {\n\n                        // Pick the first found provider\n                        const { provider, info } = found[0];\n                        resolve(new BrowserProvider(provider, undefined, {\n                            providerInfo: info\n                        }));\n                    }\n\n                } else {\n                    // Nothing found\n                    resolve(null);\n                }\n\n                context.removeEventListener(<any>\"eip6963:announceProvider\",\n                  addProvider);\n            };\n\n            const timer = setTimeout(() => { finalize(); }, timeout);\n\n            context.addEventListener(<any>\"eip6963:announceProvider\",\n              addProvider);\n\n            context.dispatchEvent(new Event(\"eip6963:requestProvider\"));\n        }));\n    }\n}\n","import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { ethers } from 'ethers';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface User {\r\n  address: string;\r\n  jwt?: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  connectWallet: () => Promise<void>;\r\n  login: () => Promise<void>;\r\n  logout: () => void;\r\n  isConnected: boolean;\r\n  isAuthenticated: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface AuthProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const isConnected = !!user?.address;\r\n  const isAuthenticated = !!(user?.address && user?.jwt);\r\n\r\n  // Check for existing session on mount and validate token\r\n  useEffect(() => {\r\n    const savedUser = localStorage.getItem('blockvault_user');\r\n    if (savedUser) {\r\n      try {\r\n        const parsedUser = JSON.parse(savedUser);\r\n        setUser(parsedUser);\r\n        \r\n        // Validate token by making a test request\r\n        if (parsedUser.jwt) {\r\n          validateToken(parsedUser.jwt);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to parse saved user:', error);\r\n        localStorage.removeItem('blockvault_user');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Validate JWT token by making a test request\r\n  const validateToken = async (token: string) => {\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/users/profile`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        // Token is invalid, clear it\r\n        console.log('Token validation failed, clearing user data');\r\n        setUser(null);\r\n        localStorage.removeItem('blockvault_user');\r\n        toast.error('Session expired. Please login again.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Token validation error:', error);\r\n      setUser(null);\r\n      localStorage.removeItem('blockvault_user');\r\n    }\r\n  };\r\n\r\n  const connectWallet = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      if (!window.ethereum) {\r\n        throw new Error('MetaMask is not installed');\r\n      }\r\n\r\n      const provider = new ethers.BrowserProvider(window.ethereum!);\r\n      const accounts = await provider.send('eth_requestAccounts', []);\r\n      \r\n      if (accounts.length === 0) {\r\n        throw new Error('No accounts found');\r\n      }\r\n\r\n      const address = accounts[0];\r\n      setUser({ address });\r\n      \r\n      // Save to localStorage\r\n      localStorage.setItem('blockvault_user', JSON.stringify({ address }));\r\n      \r\n      toast.success('Wallet connected successfully');\r\n    } catch (err: any) {\r\n      const errorMessage = err.message || 'Failed to connect wallet';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const login = async () => {\r\n    if (!user?.address) {\r\n      toast.error('Please connect your wallet first');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // Get nonce from backend\r\n      const nonceResponse = await fetch(`${getApiBase()}/auth/get_nonce`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ address: user.address }),\r\n      });\r\n\r\n      if (!nonceResponse.ok) {\r\n        throw new Error('Failed to get nonce');\r\n      }\r\n\r\n      const { nonce } = await nonceResponse.json();\r\n\r\n      // Sign message with wallet\r\n      const provider = new ethers.BrowserProvider(window.ethereum!);\r\n      const signer = await provider.getSigner();\r\n      const message = `BlockVault login nonce: ${nonce}`;\r\n      const signature = await signer.signMessage(message);\r\n\r\n      // Send signature to backend for verification\r\n      const loginResponse = await fetch(`${getApiBase()}/auth/login`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          address: user.address,\r\n          signature,\r\n        }),\r\n      });\r\n\r\n      if (!loginResponse.ok) {\r\n        throw new Error('Login failed');\r\n      }\r\n\r\n      const { token } = await loginResponse.json();\r\n\r\n      // Update user with JWT\r\n      const updatedUser = { ...user, jwt: token };\r\n      setUser(updatedUser);\r\n      \r\n      // Save to localStorage\r\n      localStorage.setItem('blockvault_user', JSON.stringify(updatedUser));\r\n      \r\n      toast.success('Login successful');\r\n    } catch (err: any) {\r\n      const errorMessage = err.message || 'Login failed';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    localStorage.removeItem('blockvault_user');\r\n    toast.success('Logged out successfully');\r\n  };\r\n\r\n  const value: AuthContextType = {\r\n    user,\r\n    loading,\r\n    error,\r\n    connectWallet,\r\n    login,\r\n    logout,\r\n    isConnected,\r\n    isAuthenticated,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\n// Helper function to get API base URL\r\nfunction getApiBase(): string {\r\n  if (process.env.NODE_ENV === 'development') {\r\n    return 'http://localhost:5000';\r\n  }\r\n  return '';\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CheckCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTEuMDhWMTJhMTAgMTAgMCAxIDEtNS45My05LjE0IiAvPgogIDxwb2x5bGluZSBwb2ludHM9IjIyIDQgMTIgMTQuMDEgOSAxMS4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/check-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCircle = createLucideIcon('CheckCircle', [\n  ['path', { d: 'M22 11.08V12a10 10 0 1 1-5.93-9.14', key: 'g774vq' }],\n  ['polyline', { points: '22 4 12 14.01 9 11.01', key: '6xbx8j' }],\n]);\n\nexport default CheckCircle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Download\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSI3IDEwIDEyIDE1IDE3IDEwIiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMTUiIHkyPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/download\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Download = createLucideIcon('Download', [\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['polyline', { points: '7 10 12 15 17 10', key: '2ggqvy' }],\n  ['line', { x1: '12', x2: '12', y1: '15', y2: '3', key: '1vk2je' }],\n]);\n\nexport default Download;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyA2aDE4IiAvPgogIDxwYXRoIGQ9Ik0xOSA2djE0YzAgMS0xIDItMiAySDdjLTEgMC0yLTEtMi0yVjYiIC8+CiAgPHBhdGggZD0iTTggNlY0YzAtMSAxLTIgMi0yaDRjMSAwIDIgMSAyIDJ2MiIgLz4KICA8bGluZSB4MT0iMTAiIHgyPSIxMCIgeTE9IjExIiB5Mj0iMTciIC8+CiAgPGxpbmUgeDE9IjE0IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjE3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('Trash2', [\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6', key: '4alrt4' }],\n  ['path', { d: 'M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2', key: 'v07s0e' }],\n  ['line', { x1: '10', x2: '10', y1: '11', y2: '17', key: '1uufr5' }],\n  ['line', { x1: '14', x2: '14', y1: '11', y2: '17', key: 'xtxkd' }],\n]);\n\nexport default Trash2;\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f);else for(t in e)e[t]&&(n&&(n+=\" \"),n+=t);return n}export function clsx(){for(var e,t,f=0,n=\"\";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import React from 'react';\r\nimport { clsx } from 'clsx';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'outline' | 'danger' | 'ghost';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  leftIcon?: React.ReactNode;\r\n  rightIcon?: React.ReactNode;\r\n  loading?: boolean;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Button: React.FC<ButtonProps> = ({\r\n  variant = 'primary',\r\n  size = 'md',\r\n  leftIcon,\r\n  rightIcon,\r\n  loading,\r\n  children,\r\n  className,\r\n  disabled,\r\n  ...props\r\n}) => {\r\n  const baseClasses = 'inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden';\r\n\r\n  const variants = {\r\n    primary: 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl hover:from-blue-600 hover:to-purple-700 active:scale-[.98] border border-transparent',\r\n    secondary: 'bg-slate-800/60 text-slate-200 border border-slate-700/50 hover:border-blue-500/50 hover:text-blue-300 hover:bg-slate-700/60 active:scale-[.98] backdrop-blur-sm',\r\n    outline: 'bg-transparent border border-blue-500/50 text-blue-400 hover:bg-blue-500/10 hover:border-blue-400 active:scale-[.98]',\r\n    danger: 'bg-red-500/80 text-white border border-red-500/60 hover:bg-red-500 hover:shadow-lg active:scale-[.98]',\r\n    ghost: 'bg-transparent text-slate-400 hover:text-blue-400 hover:bg-blue-500/10 active:scale-[.98]'\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'text-xs px-3 py-2',\r\n    md: 'text-sm px-4 py-2.5',\r\n    lg: 'text-base px-6 py-3'\r\n  };\r\n\r\n  return (\r\n    <button\r\n      className={clsx(\r\n        baseClasses,\r\n        variants[variant],\r\n        sizes[size],\r\n        'before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/10 before:to-transparent before:translate-x-[-100%] hover:before:translate-x-[100%] before:transition-transform before:duration-700',\r\n        className\r\n      )}\r\n      disabled={disabled || loading}\r\n      {...props}\r\n    >\r\n      {loading && (\r\n        <div className=\"flex items-center space-x-2\">\r\n          <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n          <span>Loading...</span>\r\n        </div>\r\n      )}\r\n      {!loading && (\r\n        <>\r\n          {leftIcon}\r\n          <span className=\"whitespace-nowrap\">{children}</span>\r\n          {rightIcon}\r\n        </>\r\n      )}\r\n    </button>\r\n  );\r\n};","import React from 'react';\r\nimport { clsx } from 'clsx';\r\n\r\ninterface CardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode;\r\n  hover?: boolean;\r\n}\r\n\r\nexport const Card: React.FC<CardProps> = ({\r\n  children,\r\n  hover = true,\r\n  className,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        'glass rounded-xl p-6 transition-all duration-300',\r\n        hover && 'card-hover',\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { Key, Shield, AlertCircle, CheckCircle, Download, Trash2 } from 'lucide-react';\r\nimport { rsaKeyManager } from '../utils/rsa';\r\nimport { Button } from './ui/Button';\r\nimport { Card } from './ui/Card';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface RSAManagerProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport const RSAManager: React.FC<RSAManagerProps> = ({ onClose }) => {\r\n  const [hasKeys, setHasKeys] = useState(false);\r\n  const [publicKey, setPublicKey] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isRegistered, setIsRegistered] = useState(false);\r\n\r\n  const checkRegistrationStatus = useCallback(async () => {\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n      if (!user.jwt) return;\r\n\r\n      const response = await fetch(`${getApiBase()}/users/profile`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${user.jwt}`,\r\n        },\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setIsRegistered(data.has_public_key);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to check registration status:', error);\r\n    }\r\n  }, []);\r\n\r\n  const checkKeyStatus = useCallback(async () => {\r\n    const hasLocalKeys = rsaKeyManager.hasKeyPair();\r\n    setHasKeys(hasLocalKeys);\r\n    \r\n    if (hasLocalKeys) {\r\n      const keyPair = rsaKeyManager.getKeyPair();\r\n      setPublicKey(keyPair?.publicKey || null);\r\n      \r\n      // Check if public key is registered on server\r\n      await checkRegistrationStatus();\r\n    }\r\n  }, [checkRegistrationStatus]);\r\n\r\n  useEffect(() => {\r\n    checkKeyStatus();\r\n  }, [checkKeyStatus]);\r\n\r\n  const generateKeys = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const keyPair = rsaKeyManager.generateKeyPair();\r\n      setHasKeys(true);\r\n      setPublicKey(keyPair.publicKey);\r\n      setIsRegistered(false);\r\n      toast.success('RSA key pair generated successfully');\r\n    } catch (error) {\r\n      toast.error('Failed to generate RSA keys');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const registerPublicKey = async () => {\r\n    if (!publicKey) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n      if (!user.jwt) {\r\n        toast.error('Please login first');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch(`${getApiBase()}/users/public_key`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${user.jwt}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          public_key_pem: publicKey,\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        setIsRegistered(true);\r\n        toast.success('Public key registered successfully');\r\n      } else {\r\n        const error = await response.text();\r\n        toast.error(`Failed to register public key: ${error}`);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Failed to register public key');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteKeys = () => {\r\n    if (window.confirm('Are you sure you want to delete your RSA keys? This will prevent you from sharing files.')) {\r\n      rsaKeyManager.clearKeyPair();\r\n      setHasKeys(false);\r\n      setPublicKey(null);\r\n      setIsRegistered(false);\r\n      toast.success('RSA keys deleted');\r\n    }\r\n  };\r\n\r\n  const downloadKeys = () => {\r\n    const keyPair = rsaKeyManager.getKeyPair();\r\n    if (!keyPair) return;\r\n\r\n    const data = {\r\n      privateKey: keyPair.privateKey,\r\n      publicKey: keyPair.publicKey,\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n\r\n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'blockvault-rsa-keys.json';\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n    document.body.removeChild(a);\r\n    \r\n    toast.success('RSA keys downloaded');\r\n  };\r\n\r\n  const getApiBase = () => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      return 'http://localhost:5000';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  return createPortal(\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4\" style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0 }}>\r\n      <Card className=\"w-full max-w-2xl mx-auto relative z-[100000]\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-white\">RSA Key Management</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-slate-400 hover:text-white transition-colors\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-6\">\r\n          {/* Status */}\r\n          <div className=\"flex items-center space-x-3 p-4 bg-slate-800/50 rounded-lg\">\r\n            {hasKeys ? (\r\n              <CheckCircle className=\"w-5 h-5 text-green-400\" />\r\n            ) : (\r\n              <AlertCircle className=\"w-5 h-5 text-yellow-400\" />\r\n            )}\r\n            <div>\r\n              <p className=\"text-sm font-medium text-white\">\r\n                {hasKeys ? 'RSA Keys Generated' : 'No RSA Keys Found'}\r\n              </p>\r\n              <p className=\"text-xs text-slate-400\">\r\n                {hasKeys \r\n                  ? (isRegistered ? 'Public key registered on server' : 'Public key not registered')\r\n                  : 'Generate RSA keys to enable file sharing'\r\n                }\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Key Generation */}\r\n          {!hasKeys && (\r\n            <div className=\"text-center py-8\">\r\n              <Shield className=\"w-16 h-16 text-slate-400 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-semibold text-white mb-2\">Generate RSA Keys</h3>\r\n              <p className=\"text-slate-400 mb-6\">\r\n                RSA keys are required for secure file sharing. Your private key stays on your device, \r\n                while your public key is registered on the server.\r\n              </p>\r\n              <Button\r\n                onClick={generateKeys}\r\n                loading={loading}\r\n                leftIcon={<Key className=\"w-4 h-4\" />}\r\n                className=\"bg-gradient-to-r from-blue-500 to-purple-600\"\r\n              >\r\n                Generate RSA Keys\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Key Management */}\r\n          {hasKeys && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"p-4 bg-slate-800/50 rounded-lg\">\r\n                <h4 className=\"font-medium text-white mb-2\">Public Key</h4>\r\n                <div className=\"bg-slate-900/50 p-3 rounded border font-mono text-xs text-slate-300 break-all\">\r\n                  {publicKey?.substring(0, 100)}...\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex flex-wrap gap-3\">\r\n                {!isRegistered && (\r\n                  <Button\r\n                    onClick={registerPublicKey}\r\n                    loading={loading}\r\n                    leftIcon={<Shield className=\"w-4 h-4\" />}\r\n                    className=\"bg-green-500 hover:bg-green-600\"\r\n                  >\r\n                    Register Public Key\r\n                  </Button>\r\n                )}\r\n\r\n                <Button\r\n                  onClick={downloadKeys}\r\n                  variant=\"outline\"\r\n                  leftIcon={<Download className=\"w-4 h-4\" />}\r\n                >\r\n                  Download Keys\r\n                </Button>\r\n\r\n                <Button\r\n                  onClick={deleteKeys}\r\n                  variant=\"danger\"\r\n                  leftIcon={<Trash2 className=\"w-4 h-4\" />}\r\n                >\r\n                  Delete Keys\r\n                </Button>\r\n              </div>\r\n\r\n              {isRegistered && (\r\n                <div className=\"p-4 bg-green-500/10 border border-green-500/20 rounded-lg\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <CheckCircle className=\"w-5 h-5 text-green-400\" />\r\n                    <span className=\"text-sm text-green-300\">\r\n                      Public key is registered and ready for file sharing\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Security Notice */}\r\n          <div className=\"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg\">\r\n            <div className=\"flex items-start space-x-3\">\r\n              <AlertCircle className=\"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0\" />\r\n              <div className=\"text-sm text-blue-300\">\r\n                <p className=\"font-medium mb-1\">Security Notice</p>\r\n                <p>\r\n                  Your private key is stored locally and never sent to the server. \r\n                  Keep your private key secure and never share it with anyone.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>,\r\n    document.body\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Shield, Wallet, LogOut, User, AlertCircle, Key, Scale } from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { RSAManager } from './RSAManager';\r\nimport { rsaKeyManager } from '../utils/rsa';\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\nexport const Header: React.FC = () => {\r\n  const { user, loading, error, connectWallet, login, logout, isConnected, isAuthenticated } = useAuth();\r\n  const [showRSAManager, setShowRSAManager] = useState(false);\r\n  const [hasRSAKeys, setHasRSAKeys] = useState(false);\r\n  const location = useLocation();\r\n\r\n  React.useEffect(() => {\r\n    setHasRSAKeys(rsaKeyManager.hasKeyPair());\r\n  }, []);\r\n\r\n  return (\r\n    <header className=\"w-full bg-slate-900/50 backdrop-blur-lg border-b border-slate-700/50 sticky top-0 z-50\">\r\n      <div className=\"container mx-auto px-4 py-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          {/* Logo & Navigation */}\r\n          <div className=\"flex items-center space-x-8\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center\">\r\n                <Shield className=\"w-6 h-6 text-white\" />\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-xl font-bold text-white\">BlockVault</h1>\r\n                <p className=\"text-xs text-slate-400\">Secure File Storage</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Navigation Links */}\r\n            {isAuthenticated && (\r\n              <nav className=\"flex items-center space-x-1\">\r\n                <Link\r\n                  to=\"/\"\r\n                  className={`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                    location.pathname === '/'\r\n                      ? 'bg-blue-500/20 text-blue-400'\r\n                      : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\r\n                  }`}\r\n                >\r\n                  <Shield className=\"w-4 h-4\" />\r\n                  <span>Files</span>\r\n                </Link>\r\n                <Link\r\n                  to=\"/legal\"\r\n                  className={`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                    location.pathname === '/legal'\r\n                      ? 'bg-blue-500/20 text-blue-400'\r\n                      : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\r\n                  }`}\r\n                >\r\n                  <Scale className=\"w-4 h-4\" />\r\n                  <span>Legal</span>\r\n                </Link>\r\n              </nav>\r\n            )}\r\n          </div>\r\n\r\n          {/* Wallet Status & Actions */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            {!isConnected && (\r\n              <button\r\n                onClick={connectWallet}\r\n                disabled={loading}\r\n                className=\"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                <Wallet className=\"w-4 h-4\" />\r\n                <span>Connect Wallet</span>\r\n              </button>\r\n            )}\r\n\r\n            {isConnected && !isAuthenticated && (\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"flex items-center space-x-2 px-3 py-2 bg-slate-800/50 rounded-lg border border-slate-700/50\">\r\n                  <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\r\n                  <span className=\"text-sm text-slate-300 font-mono\">\r\n                    {user?.address?.slice(0, 6)}...{user?.address?.slice(-4)}\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  onClick={login}\r\n                  disabled={loading}\r\n                  className=\"flex items-center space-x-2 px-4 py-2 bg-slate-800 text-slate-200 border border-slate-700 rounded-lg hover:bg-slate-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  {loading ? (\r\n                    <div className=\"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin\"></div>\r\n                  ) : (\r\n                    <User className=\"w-4 h-4\" />\r\n                  )}\r\n                  <span>{loading ? 'Signing...' : 'Login'}</span>\r\n                </button>\r\n                <button\r\n                  onClick={logout}\r\n                  className=\"p-2 text-slate-400 hover:text-red-400 transition-colors duration-200\"\r\n                >\r\n                  <LogOut className=\"w-4 h-4\" />\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {isAuthenticated && (\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"flex items-center space-x-2 px-3 py-2 bg-green-500/10 rounded-lg border border-green-500/20\">\r\n                  <div className=\"w-2 h-2 bg-green-400 rounded-full\"></div>\r\n                  <span className=\"text-sm text-green-300 font-mono\">\r\n                    {user?.address?.slice(0, 6)}...{user?.address?.slice(-4)}\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  onClick={() => setShowRSAManager(true)}\r\n                  className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200 ${\r\n                    hasRSAKeys \r\n                      ? 'bg-green-500/10 text-green-400 border border-green-500/30 hover:bg-green-500/20'\r\n                      : 'bg-yellow-500/10 text-yellow-400 border border-yellow-500/30 hover:bg-yellow-500/20'\r\n                  }`}\r\n                >\r\n                  <Key className=\"w-4 h-4\" />\r\n                  <span>{hasRSAKeys ? 'RSA Keys' : 'Setup RSA'}</span>\r\n                </button>\r\n                <button\r\n                  onClick={logout}\r\n                  className=\"flex items-center space-x-2 px-4 py-2 bg-red-500/10 text-red-400 border border-red-500/30 rounded-lg hover:bg-red-500/20 transition-all duration-200\"\r\n                >\r\n                  <LogOut className=\"w-4 h-4\" />\r\n                  <span>Logout</span>\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {error && (\r\n              <div className=\"flex items-center space-x-2 px-3 py-2 bg-red-500/10 rounded-lg border border-red-500/20\">\r\n                <AlertCircle className=\"w-4 h-4 text-red-400\" />\r\n                <span className=\"text-sm text-red-400\">{error}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* RSA Manager Modal */}\r\n      {showRSAManager && (\r\n        <RSAManager onClose={() => setShowRSAManager(false)} />\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNyA4IDEyIDMgNyA4IiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMyIgeTI9IjE1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('Upload', [\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['polyline', { points: '17 8 12 3 7 8', key: 't8dd8p' }],\n  ['line', { x1: '12', x2: '12', y1: '3', y2: '15', key: 'widbto' }],\n]);\n\nexport default Upload;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('Search', [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['path', { d: 'm21 21-4.3-4.3', key: '1qie3q' }],\n]);\n\nexport default Search;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name FolderOpen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiAxNCAxLjQ1LTIuOUEyIDIgMCAwIDEgOS4yNCAxMEgyMGEyIDIgMCAwIDEgMS45NCAyLjVsLTEuNTUgNmEyIDIgMCAwIDEtMS45NCAxLjVINGEyIDIgMCAwIDEtMi0yVjVjMC0xLjEuOS0yIDItMmgzLjkzYTIgMiAwIDAgMSAxLjY2LjlsLjgyIDEuMmEyIDIgMCAwIDAgMS42Ni45SDE4YTIgMiAwIDAgMSAyIDJ2MiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/folder-open\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FolderOpen = createLucideIcon('FolderOpen', [\n  [\n    'path',\n    {\n      d: 'm6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2',\n      key: '1nmvlm',\n    },\n  ],\n]);\n\nexport default FolderOpen;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Share2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjUiIHI9IjMiIC8+CiAgPGNpcmNsZSBjeD0iNiIgY3k9IjEyIiByPSIzIiAvPgogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTkiIHI9IjMiIC8+CiAgPGxpbmUgeDE9IjguNTkiIHgyPSIxNS40MiIgeTE9IjEzLjUxIiB5Mj0iMTcuNDkiIC8+CiAgPGxpbmUgeDE9IjE1LjQxIiB4Mj0iOC41OSIgeTE9IjYuNTEiIHkyPSIxMC40OSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/share-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Share2 = createLucideIcon('Share2', [\n  ['circle', { cx: '18', cy: '5', r: '3', key: 'gq8acd' }],\n  ['circle', { cx: '6', cy: '12', r: '3', key: 'w7nqdw' }],\n  ['circle', { cx: '18', cy: '19', r: '3', key: '1xt0gg' }],\n  [\n    'line',\n    { x1: '8.59', x2: '15.42', y1: '13.51', y2: '17.49', key: '47mynk' },\n  ],\n  ['line', { x1: '15.41', x2: '8.59', y1: '6.51', y2: '10.49', key: '1n3mei' }],\n]);\n\nexport default Share2;\n","import React, { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface File {\r\n  id: string;\r\n  file_id?: string;\r\n  name?: string;\r\n  file_name?: string;\r\n  size?: number;\r\n  file_size?: number;\r\n  mime_type?: string;\r\n  created_at: string;\r\n  updated_at?: string;\r\n  folder?: string;\r\n  is_shared?: boolean;\r\n}\r\n\r\ninterface Share {\r\n  id: string;\r\n  file_id: string;\r\n  file_name: string;\r\n  shared_with: string;\r\n  created_at: string;\r\n  expires_at?: string;\r\n}\r\n\r\ninterface FileContextType {\r\n  files: File[];\r\n  sharedFiles: File[];\r\n  outgoingShares: Share[];\r\n  loading: boolean;\r\n  error: string | null;\r\n  uploadFile: (file: any, passphrase: string, aad?: string, folder?: string) => Promise<void>;\r\n  downloadFile: (fileId: string, passphrase: string, isSharedFile?: boolean, encryptedKey?: string) => Promise<void>;\r\n  deleteFile: (fileId: string) => Promise<void>;\r\n  shareFile: (fileId: string, recipientAddress: string, passphrase: string) => Promise<void>;\r\n  revokeShare: (shareId: string) => Promise<void>;\r\n  refreshFiles: () => Promise<void>;\r\n  refreshSharedFiles: () => Promise<void>;\r\n  refreshOutgoingShares: () => Promise<void>;\r\n}\r\n\r\nconst FileContext = createContext<FileContextType | undefined>(undefined);\r\n\r\nexport const useFiles = () => {\r\n  const context = useContext(FileContext);\r\n  if (context === undefined) {\r\n    throw new Error('useFiles must be used within a FileProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface FileProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const FileProvider: React.FC<FileProviderProps> = ({ children }) => {\r\n  const [files, setFiles] = useState<File[]>([]);\r\n  const [sharedFiles, setSharedFiles] = useState<File[]>([]);\r\n  const [outgoingShares, setOutgoingShares] = useState<Share[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const getApiBase = () => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      return 'http://localhost:5000';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const getAuthHeaders = () => {\r\n    const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n    if (!user.jwt) {\r\n      throw new Error('No authentication token found. Please login again.');\r\n    }\r\n    return {\r\n      'Authorization': `Bearer ${user.jwt}`,\r\n    };\r\n  };\r\n\r\n  // Helper function to handle API errors\r\n  const handleApiError = (response: Response, operation: string) => {\r\n    if (response.status === 401) {\r\n      // Token expired, clear user data\r\n      localStorage.removeItem('blockvault_user');\r\n      setError('Session expired. Please login again.');\r\n      toast.error('Session expired. Please login again.');\r\n      throw new Error('Session expired');\r\n    }\r\n    throw new Error(`${operation} failed: ${response.status} ${response.statusText}`);\r\n  };\r\n\r\n  const getAuthHeadersWithContentType = () => {\r\n    const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n    return {\r\n      'Authorization': `Bearer ${user.jwt}`,\r\n      'Content-Type': 'application/json',\r\n    };\r\n  };\r\n\r\n  const uploadFile = async (file: any, passphrase: string, aad?: string, folder?: string) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('key', passphrase);\r\n      if (aad) formData.append('aad', aad);\r\n      if (folder) formData.append('folder', folder);\r\n\r\n      const response = await fetch(`${getApiBase()}/files/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': getAuthHeaders().Authorization,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Upload');\r\n      }\r\n\r\n      toast.success('File uploaded successfully');\r\n      await refreshFiles();\r\n    } catch (err: any) {\r\n      const errorMessage = err.message || 'Upload failed';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const downloadFile = async (fileId: string, passphrase: string, isSharedFile: boolean = false, encryptedKey?: string) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      let actualPassphrase = passphrase;\r\n      \r\n      // For shared files, decrypt the encrypted key to get the original passphrase\r\n      if (isSharedFile && encryptedKey) {\r\n        try {\r\n          console.log('Decrypting shared file key...', { isSharedFile, hasEncryptedKey: !!encryptedKey });\r\n          const { rsaKeyManager } = await import('../utils/rsa');\r\n          const privateKey = rsaKeyManager.getPrivateKey();\r\n          if (!privateKey) {\r\n            throw new Error('RSA private key not found. Please generate RSA keys first.');\r\n          }\r\n          \r\n          // Decrypt the encrypted key using RSA private key\r\n          const forge = (await import('node-forge')).default;\r\n          const privateKeyObj = forge.pki.privateKeyFromPem(privateKey);\r\n          const encryptedBytes = forge.util.decode64(encryptedKey);\r\n          \r\n          actualPassphrase = privateKeyObj.decrypt(encryptedBytes, 'RSA-OAEP', {\r\n            md: forge.md.sha256.create(),\r\n            mgf1: forge.mgf.mgf1.create(forge.md.sha256.create())\r\n          });\r\n          console.log('Decrypted passphrase length:', actualPassphrase.length);\r\n        } catch (decryptError) {\r\n          console.error('RSA decryption failed:', decryptError);\r\n          throw new Error('Failed to decrypt shared file key. Please ensure you have the correct RSA keys.');\r\n        }\r\n      }\r\n\r\n      const response = await fetch(`${getApiBase()}/files/${fileId}?key=${encodeURIComponent(actualPassphrase)}`, {\r\n        method: 'GET',\r\n        headers: getAuthHeadersWithContentType(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Download failed');\r\n      }\r\n\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `file_${fileId}`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n      document.body.removeChild(a);\r\n\r\n      toast.success('File downloaded successfully');\r\n    } catch (err: any) {\r\n      const errorMessage = err.message || 'Download failed';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteFile = async (fileId: string) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const response = await fetch(`${getApiBase()}/files/${fileId}`, {\r\n        method: 'DELETE',\r\n        headers: getAuthHeadersWithContentType(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Delete failed');\r\n      }\r\n\r\n      toast.success('File deleted successfully');\r\n      await refreshFiles();\r\n    } catch (err: any) {\r\n      const errorMessage = err.message || 'Delete failed';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const shareFile = async (fileId: string, recipientAddress: string, passphrase: string) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const response = await fetch(`${getApiBase()}/files/${fileId}/share`, {\r\n        method: 'POST',\r\n        headers: getAuthHeadersWithContentType(),\r\n        body: JSON.stringify({\r\n          recipient: recipientAddress,\r\n          passphrase,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Share failed');\r\n      }\r\n\r\n      toast.success('File shared successfully');\r\n      await refreshOutgoingShares();\r\n    } catch (err: any) {\r\n      const errorMessage = err.message || 'Share failed';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const revokeShare = async (shareId: string) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const response = await fetch(`${getApiBase()}/files/shares/${shareId}`, {\r\n        method: 'DELETE',\r\n        headers: getAuthHeadersWithContentType(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Revoke failed');\r\n      }\r\n\r\n      toast.success('Share revoked successfully');\r\n      await refreshOutgoingShares();\r\n    } catch (err: any) {\r\n      const errorMessage = err.message || 'Revoke failed';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const refreshFiles = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/files/`, {\r\n        headers: getAuthHeadersWithContentType(),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setFiles(data.items || []);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to refresh files:', err);\r\n    }\r\n  }, []);\r\n\r\n  const refreshSharedFiles = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/files/shared`, {\r\n        headers: getAuthHeadersWithContentType(),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSharedFiles(data.shares || []);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to refresh shared files:', err);\r\n    }\r\n  }, []);\r\n\r\n  const refreshOutgoingShares = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/files/shares/outgoing`, {\r\n        headers: getAuthHeadersWithContentType(),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setOutgoingShares(data.shares || []);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to refresh outgoing shares:', err);\r\n    }\r\n  }, []);\r\n\r\n  // Auto-refresh files when component mounts\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n    if (user.jwt) {\r\n      refreshFiles();\r\n      refreshSharedFiles();\r\n      refreshOutgoingShares();\r\n    }\r\n  }, [refreshFiles, refreshSharedFiles, refreshOutgoingShares]);\r\n\r\n  const value: FileContextType = {\r\n    files,\r\n    sharedFiles,\r\n    outgoingShares,\r\n    loading,\r\n    error,\r\n    uploadFile,\r\n    downloadFile,\r\n    deleteFile,\r\n    shareFile,\r\n    revokeShare,\r\n    refreshFiles,\r\n    refreshSharedFiles,\r\n    refreshOutgoingShares,\r\n  };\r\n\r\n  return (\r\n    <FileContext.Provider value={value}>\r\n      {children}\r\n    </FileContext.Provider>\r\n  );\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst X = createLucideIcon('X', [\n  ['path', { d: 'M18 6 6 18', key: '1bl5f8' }],\n  ['path', { d: 'm6 6 12 12', key: 'd8bk6v' }],\n]);\n\nexport default X;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name File\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNSAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWNy41TDE0LjUgMnoiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTQgMiAxNCA4IDIwIDgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/file\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst File = createLucideIcon('File', [\n  [\n    'path',\n    {\n      d: 'M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z',\n      key: '1nnpy2',\n    },\n  ],\n  ['polyline', { points: '14 2 14 8 20 8', key: '1ew0cm' }],\n]);\n\nexport default File;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Lock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTEiIHg9IjMiIHk9IjExIiByeD0iMiIgcnk9IjIiIC8+CiAgPHBhdGggZD0iTTcgMTFWN2E1IDUgMCAwIDEgMTAgMHY0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/lock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Lock = createLucideIcon('Lock', [\n  [\n    'rect',\n    {\n      width: '18',\n      height: '11',\n      x: '3',\n      y: '11',\n      rx: '2',\n      ry: '2',\n      key: '1w4ew1',\n    },\n  ],\n  ['path', { d: 'M7 11V7a5 5 0 0 1 10 0v4', key: 'fwvmzm' }],\n]);\n\nexport default Lock;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Folder\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAyMGgxNmEyIDIgMCAwIDAgMi0yVjhhMiAyIDAgMCAwLTItMmgtNy45M2EyIDIgMCAwIDEtMS42Ni0uOWwtLjgyLTEuMkEyIDIgMCAwIDAgNy45MyAzSDRhMiAyIDAgMCAwLTIgMnYxM2MwIDEuMS45IDIgMiAyWiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/folder\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Folder = createLucideIcon('Folder', [\n  [\n    'path',\n    {\n      d: 'M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z',\n      key: '1fr9dc',\n    },\n  ],\n]);\n\nexport default Folder;\n","import React from 'react';\r\nimport { clsx } from 'clsx';\r\n\r\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  leftIcon?: React.ReactNode;\r\n  rightIcon?: React.ReactNode;\r\n  error?: string;\r\n  label?: string;\r\n}\r\n\r\nexport const Input: React.FC<InputProps> = ({\r\n  leftIcon,\r\n  rightIcon,\r\n  error,\r\n  label,\r\n  className,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      {label && (\r\n        <label className=\"block text-sm font-medium text-slate-300\">\r\n          {label}\r\n        </label>\r\n      )}\r\n      <div className=\"relative\">\r\n        {leftIcon && (\r\n          <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400\">\r\n            {leftIcon}\r\n          </div>\r\n        )}\r\n        <input\r\n          className={clsx(\r\n            'w-full px-4 py-2.5 bg-slate-800/50 border border-slate-700/50 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all duration-200 backdrop-blur-sm',\r\n            leftIcon && 'pl-10',\r\n            rightIcon && 'pr-10',\r\n            error && 'border-red-500/50 focus:ring-red-500/50',\r\n            className\r\n          )}\r\n          {...props}\r\n        />\r\n        {rightIcon && (\r\n          <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400\">\r\n            {rightIcon}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {error && (\r\n        <p className=\"text-sm text-red-400\">{error}</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useRef } from 'react';\r\nimport { Upload, X, File, Lock, Folder } from 'lucide-react';\r\nimport { useFiles } from '../contexts/FileContext';\r\nimport { Button } from './ui/Button';\r\nimport { Input } from './ui/Input';\r\nimport { Card } from './ui/Card';\r\n\r\ninterface FileUploadProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport const FileUpload: React.FC<FileUploadProps> = ({ onClose }) => {\r\n  const { uploadFile, loading } = useFiles();\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [passphrase, setPassphrase] = useState('');\r\n  const [aad, setAad] = useState('');\r\n  const [folder, setFolder] = useState('');\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleDrag = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.type === 'dragenter' || e.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (e.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragActive(false);\r\n    \r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      setFile(e.dataTransfer.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      setFile(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!file || !passphrase) {\r\n      return;\r\n    }\r\n\r\n    await uploadFile(file as any, passphrase, aad || undefined, folder || undefined);\r\n    onClose();\r\n  };\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <Card className=\"w-full max-w-md mx-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-white\">Upload File</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-slate-400 hover:text-white transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* File Drop Zone */}\r\n        <div\r\n          className={`border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 ${\r\n            dragActive\r\n              ? 'border-blue-500 bg-blue-500/10'\r\n              : 'border-slate-600 hover:border-slate-500'\r\n          }`}\r\n          onDragEnter={handleDrag}\r\n          onDragLeave={handleDrag}\r\n          onDragOver={handleDrag}\r\n          onDrop={handleDrop}\r\n        >\r\n          {file ? (\r\n            <div className=\"space-y-2\">\r\n              <File className=\"w-8 h-8 text-blue-400 mx-auto\" />\r\n              <p className=\"text-sm text-slate-300\">{file.name}</p>\r\n              <p className=\"text-xs text-slate-400\">{formatFileSize(file.size)}</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-2\">\r\n              <Upload className=\"w-8 h-8 text-slate-400 mx-auto\" />\r\n              <p className=\"text-sm text-slate-300\">Drop file here or click to select</p>\r\n              <p className=\"text-xs text-slate-400\">Maximum file size: 100MB</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          onChange={handleFileSelect}\r\n          className=\"hidden\"\r\n        />\r\n\r\n        {!file && (\r\n          <Button\r\n            onClick={() => fileInputRef.current?.click()}\r\n            variant=\"outline\"\r\n            className=\"w-full mt-4\"\r\n          >\r\n            Select File\r\n          </Button>\r\n        )}\r\n\r\n        {file && (\r\n          <Button\r\n            onClick={() => setFile(null)}\r\n            variant=\"ghost\"\r\n            className=\"w-full mt-2\"\r\n          >\r\n            Remove File\r\n          </Button>\r\n        )}\r\n\r\n        {/* Upload Form */}\r\n        {file && (\r\n          <div className=\"space-y-4 mt-6\">\r\n            <Input\r\n              label=\"Encryption Passphrase\"\r\n              type=\"password\"\r\n              placeholder=\"Enter passphrase for encryption\"\r\n              value={passphrase}\r\n              onChange={(e) => setPassphrase(e.target.value)}\r\n              leftIcon={<Lock className=\"w-4 h-4\" />}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"Additional Authenticated Data (Optional)\"\r\n              type=\"text\"\r\n              placeholder=\"Optional AAD for additional security\"\r\n              value={aad}\r\n              onChange={(e) => setAad(e.target.value)}\r\n            />\r\n\r\n            <Input\r\n              label=\"Folder (Optional)\"\r\n              type=\"text\"\r\n              placeholder=\"Organize in folder\"\r\n              value={folder}\r\n              onChange={(e) => setFolder(e.target.value)}\r\n              leftIcon={<Folder className=\"w-4 h-4\" />}\r\n            />\r\n\r\n            <div className=\"flex space-x-3\">\r\n              <Button\r\n                onClick={onClose}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                onClick={handleUpload}\r\n                disabled={!passphrase || loading}\r\n                loading={loading}\r\n                className=\"flex-1\"\r\n              >\r\n                Upload\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('Clock', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polyline', { points: '12 6 12 12 16 14', key: '68esgv' }],\n]);\n\nexport default Clock;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name HardDrive\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMjIiIHgyPSIyIiB5MT0iMTIiIHkyPSIxMiIgLz4KICA8cGF0aCBkPSJNNS40NSA1LjExIDIgMTJ2NmEyIDIgMCAwIDAgMiAyaDE2YTIgMiAwIDAgMCAyLTJ2LTZsLTMuNDUtNi44OUEyIDIgMCAwIDAgMTYuNzYgNEg3LjI0YTIgMiAwIDAgMC0xLjc5IDEuMTF6IiAvPgogIDxsaW5lIHgxPSI2IiB4Mj0iNi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+CiAgPGxpbmUgeDE9IjEwIiB4Mj0iMTAuMDEiIHkxPSIxNiIgeTI9IjE2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/hard-drive\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst HardDrive = createLucideIcon('HardDrive', [\n  ['line', { x1: '22', x2: '2', y1: '12', y2: '12', key: '1y58io' }],\n  [\n    'path',\n    {\n      d: 'M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z',\n      key: 'oot6mr',\n    },\n  ],\n  ['line', { x1: '6', x2: '6.01', y1: '16', y2: '16', key: 'sgf278' }],\n  ['line', { x1: '10', x2: '10.01', y1: '16', y2: '16', key: '1l4acy' }],\n]);\n\nexport default HardDrive;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Calendar\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjQiIHJ4PSIyIiByeT0iMiIgLz4KICA8bGluZSB4MT0iMTYiIHgyPSIxNiIgeTE9IjIiIHkyPSI2IiAvPgogIDxsaW5lIHgxPSI4IiB4Mj0iOCIgeTE9IjIiIHkyPSI2IiAvPgogIDxsaW5lIHgxPSIzIiB4Mj0iMjEiIHkxPSIxMCIgeTI9IjEwIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/calendar\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Calendar = createLucideIcon('Calendar', [\n  [\n    'rect',\n    {\n      width: '18',\n      height: '18',\n      x: '3',\n      y: '4',\n      rx: '2',\n      ry: '2',\n      key: 'eu3xkr',\n    },\n  ],\n  ['line', { x1: '16', x2: '16', y1: '2', y2: '6', key: 'm3sa8f' }],\n  ['line', { x1: '8', x2: '8', y1: '2', y2: '6', key: '18kwsl' }],\n  ['line', { x1: '3', x2: '21', y1: '10', y2: '10', key: 'xt86sb' }],\n]);\n\nexport default Calendar;\n","import React, { useState } from 'react';\r\nimport { \r\n  File, \r\n  Download, \r\n  Share2, \r\n  Trash2, \r\n  Calendar, \r\n  HardDrive,\r\n  User,\r\n  Clock\r\n} from 'lucide-react';\r\nimport { useFiles } from '../contexts/FileContext';\r\nimport { Button } from './ui/Button';\r\nimport { Card } from './ui/Card';\r\n\r\ninterface FileListProps {\r\n  files?: any[];\r\n  shares?: any[];\r\n  onShare?: (fileId: string) => void;\r\n  type: 'my-files' | 'shared' | 'shares';\r\n}\r\n\r\nexport const FileList: React.FC<FileListProps> = ({ \r\n  files = [], \r\n  shares = [], \r\n  onShare, \r\n  type \r\n}) => {\r\n  const { downloadFile, deleteFile, revokeShare, loading } = useFiles();\r\n  const [selectedFile, setSelectedFile] = useState<string | null>(null);\r\n  const [selectedFileData, setSelectedFileData] = useState<any>(null);\r\n  const [passphrase, setPassphrase] = useState('');\r\n  const [showPassphraseModal, setShowPassphraseModal] = useState(false);\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (!bytes || bytes === 0) return '0 Bytes';\r\n    try {\r\n      const k = 1024;\r\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n    } catch (error) {\r\n      console.warn('Error formatting file size:', bytes, error);\r\n      return 'Unknown Size';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    if (!dateString) return 'Unknown Date';\r\n    try {\r\n      return new Date(dateString).toLocaleDateString('en-US', {\r\n        year: 'numeric',\r\n        month: 'short',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    } catch (error) {\r\n      console.warn('Error formatting date:', dateString, error);\r\n      return 'Invalid Date';\r\n    }\r\n  };\r\n\r\n  const handleDownload = (fileId: string, file?: any) => {\r\n    setSelectedFile(fileId);\r\n    setSelectedFileData(file); // Store the file data for later use\r\n    setShowPassphraseModal(true);\r\n  };\r\n\r\n  const confirmDownload = async () => {\r\n    if (selectedFile && passphrase) {\r\n      // Check if this is a shared file with encrypted_key\r\n      const isSharedFile = selectedFileData && selectedFileData.encrypted_key;\r\n      const encryptedKey = selectedFileData?.encrypted_key;\r\n      \r\n      // For shared files, use the file_id from the share object, not the share_id\r\n      const actualFileId = isSharedFile ? selectedFileData?.file_id : selectedFile;\r\n      \r\n      await downloadFile(actualFileId, passphrase, isSharedFile, encryptedKey);\r\n      setShowPassphraseModal(false);\r\n      setSelectedFile(null);\r\n      setSelectedFileData(null);\r\n      setPassphrase('');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (fileId: string) => {\r\n    if (window.confirm('Are you sure you want to delete this file?')) {\r\n      await deleteFile(fileId);\r\n    }\r\n  };\r\n\r\n  const handleRevokeShare = async (shareId: string) => {\r\n    if (window.confirm('Are you sure you want to revoke this share?')) {\r\n      await revokeShare(shareId);\r\n    }\r\n  };\r\n\r\n  const getFileIcon = (fileName?: string) => {\r\n    if (!fileName || typeof fileName !== 'string' || fileName.trim() === '') return '📁';\r\n    try {\r\n      const normalizedName = fileName.trim().toLowerCase();\r\n      if (normalizedName === '') return '📁';\r\n      \r\n      const parts = normalizedName.split('.');\r\n      if (!parts || parts.length === 0) return '📁';\r\n      \r\n      const ext = parts[parts.length - 1];\r\n      if (!ext || ext === '') return '📁';\r\n      \r\n      if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg'].includes(ext)) return '🖼️';\r\n      if (['mp4', 'avi', 'mov', 'wmv', 'flv', 'webm', 'mkv'].includes(ext)) return '🎥';\r\n      if (['mp3', 'wav', 'flac', 'aac', 'ogg', 'm4a'].includes(ext)) return '🎵';\r\n      if (['pdf'].includes(ext)) return '📄';\r\n      if (['txt', 'md', 'doc', 'docx', 'rtf'].includes(ext)) return '📝';\r\n      if (['zip', 'rar', '7z', 'tar', 'gz'].includes(ext)) return '📦';\r\n      return '📁';\r\n    } catch (error) {\r\n      console.warn('Error getting file icon for:', fileName, error);\r\n      return '📁';\r\n    }\r\n  };\r\n\r\n  if (type === 'shares') {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {(shares || []).length === 0 ? (\r\n          <Card className=\"text-center py-12\">\r\n            <Share2 className=\"w-12 h-12 text-slate-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-semibold text-white mb-2\">No Shares Yet</h3>\r\n            <p className=\"text-slate-400\">Files you share with others will appear here.</p>\r\n          </Card>\r\n        ) : (\r\n          (shares || []).filter(share => share && typeof share === 'object').map((share) => {\r\n            const shareId = share?.share_id || 'unknown';\r\n            const fileName = share?.file_name || 'Unknown File';\r\n            const sharedWith = share?.shared_with || share?.recipient || 'Unknown';\r\n            const createdAt = share?.created_at || new Date().toISOString();\r\n            \r\n            return (\r\n              <Card key={shareId} className=\"hover:bg-slate-800/50 transition-colors\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <div className=\"w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center\">\r\n                      <File className=\"w-5 h-5 text-slate-300\" />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"font-medium text-white\">{fileName}</h3>\r\n                      <div className=\"flex items-center space-x-4 text-sm text-slate-400\">\r\n                        <span className=\"flex items-center space-x-1\">\r\n                          <User className=\"w-3 h-3\" />\r\n                          <span>{sharedWith && typeof sharedWith === 'string' ? `${sharedWith.slice(0, 6)}...${sharedWith.slice(-4)}` : 'Unknown'}</span>\r\n                        </span>\r\n                        <span className=\"flex items-center space-x-1\">\r\n                          <Clock className=\"w-3 h-3\" />\r\n                          <span>{formatDate(createdAt)}</span>\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                <Button\r\n                  onClick={() => handleRevokeShare(shareId)}\r\n                  variant=\"danger\"\r\n                  size=\"sm\"\r\n                  disabled={loading}\r\n                >\r\n                  Revoke\r\n                </Button>\r\n              </div>\r\n            </Card>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n        {(files || []).length === 0 ? (\r\n        <Card className=\"text-center py-12\">\r\n          <File className=\"w-12 h-12 text-slate-400 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-white mb-2\">\r\n            {type === 'my-files' ? 'No Files Yet' : 'No Shared Files'}\r\n          </h3>\r\n          <p className=\"text-slate-400\">\r\n            {type === 'my-files' \r\n              ? 'Upload your first file to get started.' \r\n              : 'Files shared with you will appear here.'\r\n            }\r\n          </p>\r\n        </Card>\r\n      ) : (\r\n        (files || []).filter(file => file && typeof file === 'object').map((file) => {\r\n          // Handle both regular files and shared files with null checks\r\n          const fileName = file?.name || file?.file_name || 'Unknown File';\r\n          const fileSize = file?.size || file?.file_size || 0;\r\n          const fileId = file?.file_id || file?.id || 'unknown';\r\n          const createdAt = file?.created_at || new Date().toISOString();\r\n          const folder = file?.folder;\r\n          \r\n          return (\r\n            <Card key={fileId} className=\"hover:bg-slate-800/50 transition-colors\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center\">\r\n                    <span className=\"text-lg\">{getFileIcon(fileName)}</span>\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"font-medium text-white\">{fileName}</h3>\r\n                    <div className=\"flex items-center space-x-4 text-sm text-slate-400\">\r\n                      <span className=\"flex items-center space-x-1\">\r\n                        <HardDrive className=\"w-3 h-3\" />\r\n                        <span>{formatFileSize(fileSize)}</span>\r\n                      </span>\r\n                      <span className=\"flex items-center space-x-1\">\r\n                        <Calendar className=\"w-3 h-3\" />\r\n                        <span>{formatDate(createdAt)}</span>\r\n                      </span>\r\n                      {folder && (\r\n                        <span className=\"text-blue-400\">📁 {folder}</span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                {type === 'my-files' && (\r\n                  <>\r\n                    <Button\r\n                      onClick={() => handleDownload(fileId, file)}\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      leftIcon={<Download className=\"w-4 h-4\" />}\r\n                    >\r\n                      Download\r\n                    </Button>\r\n                    {onShare && (\r\n                      <Button\r\n                        onClick={() => onShare(fileId)}\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        leftIcon={<Share2 className=\"w-4 h-4\" />}\r\n                      >\r\n                        Share\r\n                      </Button>\r\n                    )}\r\n                    <Button\r\n                      onClick={() => handleDelete(fileId)}\r\n                      variant=\"danger\"\r\n                      size=\"sm\"\r\n                      leftIcon={<Trash2 className=\"w-4 h-4\" />}\r\n                      disabled={loading}\r\n                    >\r\n                      Delete\r\n                    </Button>\r\n                  </>\r\n                )}\r\n                {type === 'shared' && (\r\n                  <Button\r\n                    onClick={() => handleDownload(fileId, file)}\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    leftIcon={<Download className=\"w-4 h-4\" />}\r\n                  >\r\n                    Download\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </Card>\r\n          );\r\n        })\r\n      )}\r\n\r\n      {/* Passphrase Modal */}\r\n      {showPassphraseModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n          <Card className=\"w-full max-w-md\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-white\">Enter Passphrase</h3>\r\n              <button\r\n                onClick={() => setShowPassphraseModal(false)}\r\n                className=\"text-slate-400 hover:text-white\"\r\n              >\r\n                ✕\r\n              </button>\r\n            </div>\r\n            <p className=\"text-slate-400 mb-4\">\r\n              Enter the passphrase used to encrypt this file.\r\n            </p>\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Enter passphrase\"\r\n              value={passphrase}\r\n              onChange={(e) => setPassphrase(e.target.value)}\r\n              className=\"w-full px-4 py-2 bg-slate-800/50 border border-slate-700/50 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 mb-4\"\r\n            />\r\n            <div className=\"flex space-x-3\">\r\n              <Button\r\n                onClick={() => setShowPassphraseModal(false)}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                onClick={confirmDownload}\r\n                disabled={!passphrase}\r\n                className=\"flex-1\"\r\n              >\r\n                Download\r\n              </Button>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Check\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSIyMCA2IDkgMTcgNCAxMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Check = createLucideIcon('Check', [\n  ['polyline', { points: '20 6 9 17 4 12', key: '10jjfj' }],\n]);\n\nexport default Check;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Copy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHg9IjgiIHk9IjgiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNNCAxNmMtMS4xIDAtMi0uOS0yLTJWNGMwLTEuMS45LTIgMi0yaDEwYzEuMSAwIDIgLjkgMiAyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/copy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Copy = createLucideIcon('Copy', [\n  [\n    'rect',\n    {\n      width: '14',\n      height: '14',\n      x: '8',\n      y: '8',\n      rx: '2',\n      ry: '2',\n      key: '17jyea',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2',\n      key: 'zix9uf',\n    },\n  ],\n]);\n\nexport default Copy;\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { X, User, Lock, AlertCircle, Copy, Check, Key } from 'lucide-react';\r\nimport { useFiles } from '../contexts/FileContext';\r\nimport { Button } from './ui/Button';\r\nimport { Input } from './ui/Input';\r\nimport { Card } from './ui/Card';\r\nimport { rsaKeyManager } from '../utils/rsa';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface ShareModalProps {\r\n  fileId: string;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const ShareModal: React.FC<ShareModalProps> = ({ fileId, onClose }) => {\r\n  const { shareFile, loading } = useFiles();\r\n  const [recipientAddress, setRecipientAddress] = useState('');\r\n  const [passphrase, setPassphrase] = useState('');\r\n  const [copied, setCopied] = useState(false);\r\n  const [hasRSAKeys, setHasRSAKeys] = useState(false);\r\n  const [isPublicKeyRegistered, setIsPublicKeyRegistered] = useState(false);\r\n\r\n  const checkRSAStatus = useCallback(async () => {\r\n    const hasKeys = rsaKeyManager.hasKeyPair();\r\n    setHasRSAKeys(hasKeys);\r\n\r\n    if (hasKeys) {\r\n      // Check if public key is registered\r\n      try {\r\n        const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n        if (user.jwt) {\r\n          const response = await fetch(`${getApiBase()}/users/profile`, {\r\n            headers: {\r\n              'Authorization': `Bearer ${user.jwt}`,\r\n            },\r\n          });\r\n\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            setIsPublicKeyRegistered(data.has_public_key);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to check RSA registration status:', error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    checkRSAStatus();\r\n  }, [checkRSAStatus]);\r\n\r\n  const handleShare = async () => {\r\n    if (!recipientAddress || !passphrase) {\r\n      toast.error('Please fill in all fields');\r\n      return;\r\n    }\r\n\r\n    // Basic Ethereum address validation\r\n    if (!recipientAddress.startsWith('0x') || recipientAddress.length !== 42) {\r\n      toast.error('Please enter a valid Ethereum address');\r\n      return;\r\n    }\r\n\r\n    await shareFile(fileId, recipientAddress, passphrase);\r\n    onClose();\r\n  };\r\n\r\n  const getApiBase = () => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      return 'http://localhost:5000';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2000);\r\n    toast.success('Copied to clipboard');\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-white\">Share File</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-slate-400 hover:text-white transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          {/* RSA Key Requirement */}\r\n          {!hasRSAKeys && (\r\n            <div className=\"p-4 bg-red-500/10 border border-red-500/20 rounded-lg\">\r\n              <div className=\"flex items-start space-x-3\">\r\n                <Key className=\"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0\" />\r\n                <div className=\"text-sm text-red-300\">\r\n                  <p className=\"font-medium mb-1\">RSA Keys Required</p>\r\n                  <p>\r\n                    You need to generate and register RSA keys before you can share files. \r\n                    Click the \"Setup RSA\" button in the header to get started.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {hasRSAKeys && !isPublicKeyRegistered && (\r\n            <div className=\"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg\">\r\n              <div className=\"flex items-start space-x-3\">\r\n                <AlertCircle className=\"w-5 h-5 text-yellow-400 mt-0.5 flex-shrink-0\" />\r\n                <div className=\"text-sm text-yellow-300\">\r\n                  <p className=\"font-medium mb-1\">Public Key Not Registered</p>\r\n                  <p>\r\n                    Your RSA keys are generated but your public key is not registered on the server. \r\n                    Please register your public key to enable file sharing.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg\">\r\n            <div className=\"flex items-start space-x-3\">\r\n              <AlertCircle className=\"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0\" />\r\n              <div className=\"text-sm text-blue-300\">\r\n                <p className=\"font-medium mb-1\">Important Security Note</p>\r\n                <p>\r\n                  The recipient will need the same passphrase to decrypt the file. \r\n                  Share the passphrase securely through a separate channel.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <Input\r\n            label=\"Recipient Address\"\r\n            type=\"text\"\r\n            placeholder=\"0x...\"\r\n            value={recipientAddress}\r\n            onChange={(e) => setRecipientAddress(e.target.value)}\r\n            leftIcon={<User className=\"w-4 h-4\" />}\r\n            required\r\n          />\r\n\r\n          <Input\r\n            label=\"Encryption Passphrase\"\r\n            type=\"password\"\r\n            placeholder=\"Enter the passphrase for this file\"\r\n            value={passphrase}\r\n            onChange={(e) => setPassphrase(e.target.value)}\r\n            leftIcon={<Lock className=\"w-4 h-4\" />}\r\n            required\r\n          />\r\n\r\n          <div className=\"p-3 bg-slate-800/50 rounded-lg\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-sm text-slate-400\">File ID:</span>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <code className=\"text-xs font-mono text-slate-300 bg-slate-900/50 px-2 py-1 rounded\">\r\n                  {fileId}\r\n                </code>\r\n                <button\r\n                  onClick={() => copyToClipboard(fileId)}\r\n                  className=\"p-1 text-slate-400 hover:text-white transition-colors\"\r\n                >\r\n                  {copied ? (\r\n                    <Check className=\"w-3 h-3 text-green-400\" />\r\n                  ) : (\r\n                    <Copy className=\"w-3 h-3\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex space-x-3\">\r\n            <Button\r\n              onClick={onClose}\r\n              variant=\"outline\"\r\n              className=\"flex-1\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              onClick={handleShare}\r\n              disabled={!recipientAddress || !passphrase || loading || !hasRSAKeys || !isPublicKeyRegistered}\r\n              loading={loading}\r\n              className=\"flex-1\"\r\n            >\r\n              Share File\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Upload, FolderOpen, Share2, Download, Plus, Search } from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useFiles } from '../contexts/FileContext';\r\nimport { FileUpload } from '../components/FileUpload';\r\nimport { FileList } from '../components/FileList';\r\nimport { ShareModal } from '../components/ShareModal';\r\nimport { Button } from '../components/ui/Button';\r\nimport { Input } from '../components/ui/Input';\r\nimport { Card } from '../components/ui/Card';\r\n\r\nexport const Dashboard: React.FC = () => {\r\n  const { isAuthenticated } = useAuth();\r\n  const { files, sharedFiles, outgoingShares } = useFiles();\r\n  const [activeTab, setActiveTab] = useState<'my-files' | 'shared' | 'shares'>('my-files');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [showUpload, setShowUpload] = useState(false);\r\n  const [showShareModal, setShowShareModal] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState<string | null>(null);\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n        <Card className=\"text-center p-8 max-w-md mx-auto\">\r\n          <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <Upload className=\"w-8 h-8 text-white\" />\r\n          </div>\r\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Welcome to BlockVault</h2>\r\n          <p className=\"text-slate-400 mb-6\">\r\n            Connect your wallet and login to start storing your files securely with end-to-end encryption.\r\n          </p>\r\n          <div className=\"text-sm text-slate-500\">\r\n            <p>• End-to-end encryption</p>\r\n            <p>• Web3 authentication</p>\r\n            <p>• Secure file sharing</p>\r\n            <p>• IPFS integration</p>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const filteredFiles = (files || []).filter(file =>\r\n    file.name && file.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const filteredSharedFiles = (sharedFiles || []).filter(file => {\r\n    const fileName = file.name || file.file_name;\r\n    return fileName && fileName.toLowerCase().includes(searchQuery.toLowerCase());\r\n  });\r\n\r\n  const filteredOutgoingShares = (outgoingShares || []).filter(share =>\r\n    share.file_name && share.file_name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Hero Section */}\r\n      <div className=\"text-center\">\r\n        <h1 className=\"text-4xl font-bold text-white mb-2\">Your Secure Vault</h1>\r\n        <p className=\"text-slate-400\">Store and share files with end-to-end encryption</p>\r\n      </div>\r\n\r\n      {/* Search and Upload */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4\">\r\n        <div className=\"flex-1\">\r\n          <Input\r\n            type=\"text\"\r\n            placeholder=\"Search files...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            leftIcon={<Search className=\"w-4 h-4\" />}\r\n          />\r\n        </div>\r\n        <Button\r\n          onClick={() => setShowUpload(true)}\r\n          leftIcon={<Plus className=\"w-4 h-4\" />}\r\n          className=\"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700\"\r\n        >\r\n          Upload File\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex space-x-1 bg-slate-800/50 p-1 rounded-lg\">\r\n        <button\r\n          onClick={() => setActiveTab('my-files')}\r\n          className={`flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-all duration-200 ${\r\n            activeTab === 'my-files'\r\n              ? 'bg-slate-700 text-white'\r\n              : 'text-slate-400 hover:text-white'\r\n          }`}\r\n        >\r\n          <FolderOpen className=\"w-4 h-4\" />\r\n          <span>My Files ({(files || []).length})</span>\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('shared')}\r\n          className={`flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-all duration-200 ${\r\n            activeTab === 'shared'\r\n              ? 'bg-slate-700 text-white'\r\n              : 'text-slate-400 hover:text-white'\r\n          }`}\r\n        >\r\n          <Download className=\"w-4 h-4\" />\r\n          <span>Shared with Me ({(sharedFiles || []).length})</span>\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('shares')}\r\n          className={`flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-all duration-200 ${\r\n            activeTab === 'shares'\r\n              ? 'bg-slate-700 text-white'\r\n              : 'text-slate-400 hover:text-white'\r\n          }`}\r\n        >\r\n          <Share2 className=\"w-4 h-4\" />\r\n          <span>My Shares ({(outgoingShares || []).length})</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"animate-fade-in\">\r\n        {activeTab === 'my-files' && (\r\n          <FileList\r\n            files={filteredFiles}\r\n            onShare={(fileId) => {\r\n              setSelectedFile(fileId);\r\n              setShowShareModal(true);\r\n            }}\r\n            type=\"my-files\"\r\n          />\r\n        )}\r\n        {activeTab === 'shared' && (\r\n          <FileList\r\n            files={filteredSharedFiles}\r\n            type=\"shared\"\r\n          />\r\n        )}\r\n        {activeTab === 'shares' && (\r\n          <FileList\r\n            shares={filteredOutgoingShares}\r\n            type=\"shares\"\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Upload Modal */}\r\n      {showUpload && (\r\n        <FileUpload\r\n          onClose={() => setShowUpload(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Share Modal */}\r\n      {showShareModal && selectedFile && (\r\n        <ShareModal\r\n          fileId={selectedFile}\r\n          onClose={() => {\r\n            setShowShareModal(false);\r\n            setSelectedFile(null);\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Users\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8cGF0aCBkPSJNMjIgMjF2LTJhNCA0IDAgMCAwLTMtMy44NyIgLz4KICA8cGF0aCBkPSJNMTYgMy4xM2E0IDQgMCAwIDEgMCA3Ljc1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/users\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Users = createLucideIcon('Users', [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['path', { d: 'M22 21v-2a4 4 0 0 0-3-3.87', key: 'kshegd' }],\n  ['path', { d: 'M16 3.13a4 4 0 0 1 0 7.75', key: '1da9ce' }],\n]);\n\nexport default Users;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name FileText\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNSAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWNy41TDE0LjUgMnoiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTQgMiAxNCA4IDIwIDgiIC8+CiAgPGxpbmUgeDE9IjE2IiB4Mj0iOCIgeTE9IjEzIiB5Mj0iMTMiIC8+CiAgPGxpbmUgeDE9IjE2IiB4Mj0iOCIgeTE9IjE3IiB5Mj0iMTciIC8+CiAgPGxpbmUgeDE9IjEwIiB4Mj0iOCIgeTE9IjkiIHkyPSI5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file-text\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileText = createLucideIcon('FileText', [\n  [\n    'path',\n    {\n      d: 'M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z',\n      key: '1nnpy2',\n    },\n  ],\n  ['polyline', { points: '14 2 14 8 20 8', key: '1ew0cm' }],\n  ['line', { x1: '16', x2: '8', y1: '13', y2: '13', key: '14keom' }],\n  ['line', { x1: '16', x2: '8', y1: '17', y2: '17', key: '17nazh' }],\n  ['line', { x1: '10', x2: '8', y1: '9', y2: '9', key: '1a5vjj' }],\n]);\n\nexport default FileText;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name PenTool\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTkgNy03IDMgMy03IDctMy0zeiIgLz4KICA8cGF0aCBkPSJtMTggMTMtMS41LTcuNUwyIDJsMy41IDE0LjVMMTMgMThsNS01eiIgLz4KICA8cGF0aCBkPSJtMiAyIDcuNTg2IDcuNTg2IiAvPgogIDxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/pen-tool\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PenTool = createLucideIcon('PenTool', [\n  ['path', { d: 'm12 19 7-7 3 3-7 7-3-3z', key: 'rklqx2' }],\n  ['path', { d: 'm18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z', key: '1et58u' }],\n  ['path', { d: 'm2 2 7.586 7.586', key: 'etlp93' }],\n  ['circle', { cx: '11', cy: '11', r: '2', key: 'xmgehs' }],\n]);\n\nexport default PenTool;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Brain\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOS41IDJBMi41IDIuNSAwIDAgMSAxMiA0LjV2MTVhMi41IDIuNSAwIDAgMS00Ljk2LjQ0IDIuNSAyLjUgMCAwIDEtMi45Ni0zLjA4IDMgMyAwIDAgMS0uMzQtNS41OCAyLjUgMi41IDAgMCAxIDEuMzItNC4yNCAyLjUgMi41IDAgMCAxIDEuOTgtM0EyLjUgMi41IDAgMCAxIDkuNSAyWiIgLz4KICA8cGF0aCBkPSJNMTQuNSAyQTIuNSAyLjUgMCAwIDAgMTIgNC41djE1YTIuNSAyLjUgMCAwIDAgNC45Ni40NCAyLjUgMi41IDAgMCAwIDIuOTYtMy4wOCAzIDMgMCAwIDAgLjM0LTUuNTggMi41IDIuNSAwIDAgMC0xLjMyLTQuMjQgMi41IDIuNSAwIDAgMC0xLjk4LTNBMi41IDIuNSAwIDAgMCAxNC41IDJaIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/brain\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Brain = createLucideIcon('Brain', [\n  [\n    'path',\n    {\n      d: 'M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z',\n      key: '1mhkh5',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z',\n      key: '1d6s00',\n    },\n  ],\n]);\n\nexport default Brain;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name PenSquare\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEgNEg0YTIgMiAwIDAgMC0yIDJ2MTRhMiAyIDAgMCAwIDIgMmgxNGEyIDIgMCAwIDAgMi0ydi03IiAvPgogIDxwYXRoIGQ9Ik0xOC41IDIuNWEyLjEyIDIuMTIgMCAwIDEgMyAzTDEyIDE1bC00IDEgMS00WiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen-square\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PenSquare = createLucideIcon('PenSquare', [\n  [\n    'path',\n    {\n      d: 'M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7',\n      key: '1qinfi',\n    },\n  ],\n  [\n    'path',\n    { d: 'M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z', key: 'w2jsv5' },\n  ],\n]);\n\nexport default PenSquare;\n","/**\r\n * ZK Circuit Utilities for BlockVault Legal\r\n * Handles ZK proof generation and verification for legal features\r\n */\r\n\r\n// Mock implementation for development\r\n// In production, this would import from 'snarkjs'\r\nconst groth16 = {\r\n  fullProve: async (inputs: any, wasmPath: string, zkeyPath: string) => {\r\n    // Mock implementation\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    return {\r\n      proof: {\r\n        pi_a: ['1', '2', '3'] as [string, string, string],\r\n        pi_b: [['1', '2'], ['3', '4'], ['5', '6']] as [[string, string], [string, string], [string, string]],\r\n        pi_c: ['1', '2', '3'] as [string, string, string],\r\n        protocol: 'groth16',\r\n        curve: 'bn128'\r\n      },\r\n      publicSignals: ['1', '2', '3']\r\n    };\r\n  },\r\n  exportSolidityCallData: async (proof: any, publicSignals: any) => {\r\n    // Mock implementation\r\n    return JSON.stringify([proof, publicSignals]);\r\n  }\r\n};\r\n\r\nexport interface ZKProof {\r\n  pi_a: [string, string, string];\r\n  pi_b: [[string, string], [string, string], [string, string]];\r\n  pi_c: [string, string, string];\r\n  protocol: string;\r\n  curve: string;\r\n}\r\n\r\nexport interface CircuitInputs {\r\n  [key: string]: string | string[];\r\n}\r\n\r\n/**\r\n * ZK Circuit Manager for Legal Features\r\n */\r\nexport class ZKCircuitManager {\r\n  private static instance: ZKCircuitManager;\r\n  \r\n  public static getInstance(): ZKCircuitManager {\r\n    if (!ZKCircuitManager.instance) {\r\n      ZKCircuitManager.instance = new ZKCircuitManager();\r\n    }\r\n    return ZKCircuitManager.instance;\r\n  }\r\n\r\n  /**\r\n   * Generate Proof of Integrity for document notarization\r\n   * @param fileData The file data to prove\r\n   * @param fileHash The public hash of the file\r\n   * @returns ZK proof and public signals\r\n   */\r\n  async generateIntegrityProof(fileData: Uint8Array, fileHash: string): Promise<{proof: ZKProof, publicSignals: string[]}> {\r\n    try {\r\n      // Prepare circuit inputs\r\n      const circuitInputs = {\r\n        file_chunks: this.chunkDataForCircuit(fileData, 2),\r\n        file_hash: fileHash\r\n      };\r\n\r\n      // Generate proof using snarkjs\r\n      const { proof, publicSignals } = await groth16.fullProve(\r\n        circuitInputs,\r\n        '/circuits/integrity.wasm',\r\n        '/circuits/integrity_final.zkey'\r\n      );\r\n\r\n      return { proof, publicSignals };\r\n    } catch (error) {\r\n      console.error('Error generating integrity proof:', error);\r\n      throw new Error('Failed to generate integrity proof');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate ZKPT proof for document transformation\r\n   * @param originalData The original document data\r\n   * @param transformedData The transformed document data\r\n   * @param originalHash The hash of the original document\r\n   * @param transformedHash The hash of the transformed document\r\n   * @returns ZK proof and public signals\r\n   */\r\n  async generateZKPTProof(\r\n    originalData: Uint8Array,\r\n    transformedData: Uint8Array,\r\n    originalHash: string,\r\n    transformedHash: string\r\n  ): Promise<{proof: ZKProof, publicSignals: string[]}> {\r\n    try {\r\n      const circuitInputs = {\r\n        original: this.chunkDataForCircuit(originalData, 3),\r\n        transformed: this.chunkDataForCircuit(transformedData, 2),\r\n        original_hash: originalHash,\r\n        transformed_hash: transformedHash\r\n      };\r\n\r\n      const { proof, publicSignals } = await groth16.fullProve(\r\n        circuitInputs,\r\n        '/circuits/transform.wasm',\r\n        '/circuits/transform_final.zkey'\r\n      );\r\n\r\n      return { proof, publicSignals };\r\n    } catch (error) {\r\n      console.error('Error generating ZKPT proof:', error);\r\n      throw new Error('Failed to generate ZKPT proof');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate ZKML proof for AI inference\r\n   * @param inputData The input data for the model\r\n   * @param modelParams The model parameters\r\n   * @param expectedOutput The expected output\r\n   * @returns ZK proof and public signals\r\n   */\r\n  async generateZKMLProof(\r\n    inputData: number,\r\n    modelParams: { m: number; b: number },\r\n    expectedOutput: number\r\n  ): Promise<{proof: ZKProof, publicSignals: string[]}> {\r\n    try {\r\n      const circuitInputs = {\r\n        x: inputData.toString(),\r\n        m: modelParams.m.toString(),\r\n        b: modelParams.b.toString(),\r\n        y: expectedOutput.toString()\r\n      };\r\n\r\n      const { proof, publicSignals } = await groth16.fullProve(\r\n        circuitInputs,\r\n        '/circuits/ml_inference.wasm',\r\n        '/circuits/ml_inference_final.zkey'\r\n      );\r\n\r\n      return { proof, publicSignals };\r\n    } catch (error) {\r\n      console.error('Error generating ZKML proof:', error);\r\n      throw new Error('Failed to generate ZKML proof');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format proof for smart contract call\r\n   * @param proof The ZK proof\r\n   * @param publicSignals The public signals\r\n   * @returns Formatted calldata for smart contract\r\n   */\r\n  async formatProofForContract(proof: ZKProof, publicSignals: string[]): Promise<{\r\n    a: [string, string];\r\n    b: [[string, string], [string, string]];\r\n    c: [string, string];\r\n    publicInputs: string[];\r\n  }> {\r\n    try {\r\n      const calldata = await groth16.exportSolidityCallData(proof, publicSignals);\r\n      const argv = JSON.parse(`[${calldata}]`);\r\n      \r\n      return {\r\n        a: argv[0],\r\n        b: argv[1],\r\n        c: argv[2],\r\n        publicInputs: argv[3]\r\n      };\r\n    } catch (error) {\r\n      console.error('Error formatting proof for contract:', error);\r\n      throw new Error('Failed to format proof for contract');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Chunk data for ZK circuit processing\r\n   * @param data The data to chunk\r\n   * @param chunkSize The size of each chunk\r\n   * @returns Array of chunked data\r\n   */\r\n  private chunkDataForCircuit(data: Uint8Array, chunkSize: number): string[] {\r\n    const chunks: string[] = [];\r\n    for (let i = 0; i < data.length; i += chunkSize) {\r\n      const chunk = data.slice(i, i + chunkSize);\r\n      chunks.push(this.uint8ArrayToHex(chunk));\r\n    }\r\n    return chunks;\r\n  }\r\n\r\n  /**\r\n   * Convert Uint8Array to hex string\r\n   * @param data The data to convert\r\n   * @returns Hex string\r\n   */\r\n  private uint8ArrayToHex(data: Uint8Array): string {\r\n    return Array.from(data)\r\n      .map(byte => byte.toString(16).padStart(2, '0'))\r\n      .join('');\r\n  }\r\n\r\n  /**\r\n   * Generate Poseidon hash for ZK-friendly hashing\r\n   * @param data The data to hash\r\n   * @returns Poseidon hash as string\r\n   */\r\n  async poseidonHash(data: Uint8Array): Promise<string> {\r\n    // This is a placeholder - in a real implementation, you would use a Poseidon hash library\r\n    // For now, we'll use a simple hash for demonstration\r\n    const hash = await crypto.subtle.digest('SHA-256', data);\r\n    const hashArray = Array.from(new Uint8Array(hash));\r\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\r\n  }\r\n}\r\n\r\n/**\r\n * Document Transformation Utilities\r\n */\r\nexport class DocumentTransformer {\r\n  /**\r\n   * Perform a toy redaction on document data\r\n   * @param originalData The original document data\r\n   * @param redactionRules The rules for redaction\r\n   * @returns The redacted document data\r\n   */\r\n  static performToyRedaction(originalData: Uint8Array, redactionRules?: {\r\n    removeChunks?: number[];\r\n    replaceWith?: number;\r\n  }): Uint8Array {\r\n    const redactedData = new Uint8Array(originalData);\r\n    \r\n    // Simple redaction: remove or replace specific chunks\r\n    if (redactionRules?.removeChunks) {\r\n      for (const chunkIndex of redactionRules.removeChunks) {\r\n        const startIndex = chunkIndex * 32; // Assuming 32-byte chunks\r\n        const endIndex = Math.min(startIndex + 32, redactedData.length);\r\n        \r\n        if (redactionRules.replaceWith !== undefined) {\r\n          // Replace with specific value\r\n          for (let i = startIndex; i < endIndex; i++) {\r\n            redactedData[i] = redactionRules.replaceWith;\r\n          }\r\n        } else {\r\n          // Remove by setting to zero\r\n          for (let i = startIndex; i < endIndex; i++) {\r\n            redactedData[i] = 0;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return redactedData;\r\n  }\r\n\r\n  /**\r\n   * Create a verifiable transformation record\r\n   * @param originalHash The hash of the original document\r\n   * @param transformedHash The hash of the transformed document\r\n   * @param transformationType The type of transformation\r\n   * @returns Transformation record\r\n   */\r\n  static createTransformationRecord(\r\n    originalHash: string,\r\n    transformedHash: string,\r\n    transformationType: 'redaction' | 'annotation' | 'summary'\r\n  ) {\r\n    return {\r\n      originalHash,\r\n      transformedHash,\r\n      transformationType,\r\n      timestamp: Date.now(),\r\n      verifiable: true\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * AI Model Utilities for ZKML\r\n */\r\nexport class AIModelManager {\r\n  /**\r\n   * Run a toy linear regression model\r\n   * @param input The input value\r\n   * @param modelParams The model parameters\r\n   * @returns The model output\r\n   */\r\n  static runToyLinearModel(input: number, modelParams: { m: number; b: number }): number {\r\n    return modelParams.m * input + modelParams.b;\r\n  }\r\n\r\n  /**\r\n   * Verify model execution with ZK proof\r\n   * @param input The input value\r\n   * @param modelParams The model parameters\r\n   * @param expectedOutput The expected output\r\n   * @returns Verification result\r\n   */\r\n  static verifyModelExecution(\r\n    input: number,\r\n    modelParams: { m: number; b: number },\r\n    expectedOutput: number\r\n  ): boolean {\r\n    const actualOutput = this.runToyLinearModel(input, modelParams);\r\n    return Math.abs(actualOutput - expectedOutput) < 0.001; // Allow for small floating point errors\r\n  }\r\n}\r\n\r\nexport default ZKCircuitManager;\r\n","import React, { useState } from 'react';\r\nimport { FileText, Shield, AlertCircle, CheckCircle, Upload, X } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card } from '../ui/Card';\r\nimport { ZKCircuitManager } from '../../utils/zkCircuits';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface NotarizeDocumentModalProps {\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport const NotarizeDocumentModal: React.FC<NotarizeDocumentModalProps> = ({ onClose, onSuccess }) => {\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [step, setStep] = useState<'upload' | 'processing' | 'verifying' | 'complete'>('upload');\r\n  const [documentHash, setDocumentHash] = useState<string>('');\r\n\r\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      setSelectedFile(file);\r\n      setStep('upload');\r\n    }\r\n  };\r\n\r\n  const handleNotarize = async () => {\r\n    if (!selectedFile) return;\r\n\r\n    setLoading(true);\r\n    setStep('processing');\r\n\r\n    try {\r\n      // 1. Read file and calculate hash\r\n      const fileData = new Uint8Array(await selectedFile.arrayBuffer());\r\n      const zkManager = ZKCircuitManager.getInstance();\r\n      const fileHash = await zkManager.poseidonHash(fileData);\r\n      setDocumentHash(fileHash);\r\n\r\n      // 2. Upload to IPFS\r\n      const cid = await uploadToIpfs(selectedFile);\r\n      setStep('verifying');\r\n\r\n      // 3. Generate ZK proof of integrity\r\n      const { proof, publicSignals } = await zkManager.generateIntegrityProof(fileData, fileHash);\r\n      \r\n      // 4. Format proof for smart contract\r\n      const formattedProof = await zkManager.formatProofForContract(proof, publicSignals);\r\n\r\n      // 5. Call smart contract to notarize\r\n      await registerDocumentOnChain(cid, formattedProof);\r\n\r\n      setStep('complete');\r\n      toast.success('Document successfully notarized on the blockchain!');\r\n      \r\n      // Add to legal documents list\r\n      const legalDocument = {\r\n        id: Date.now().toString(),\r\n        file_id: Date.now().toString(),\r\n        name: selectedFile.name,\r\n        docHash: fileHash,\r\n        cid: cid,\r\n        status: 'registered' as const,\r\n        timestamp: Date.now(),\r\n        owner: 'current-user', // This would be the current user's address\r\n        blockchainHash: fileHash,\r\n        ipfsCid: cid,\r\n        zkProof: formattedProof\r\n      };\r\n      \r\n      // Store in localStorage for now (in real app, this would be managed by state)\r\n      const existingDocs = JSON.parse(localStorage.getItem('legal_documents') || '[]');\r\n      existingDocs.push(legalDocument);\r\n      localStorage.setItem('legal_documents', JSON.stringify(existingDocs));\r\n      \r\n      onSuccess();\r\n\r\n    } catch (error) {\r\n      console.error('Error during notarization:', error);\r\n      toast.error('An error occurred during notarization.');\r\n      setStep('upload');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  // Upload file to IPFS\r\n  const uploadToIpfs = async (file: File): Promise<string> => {\r\n    // Simulate IPFS upload\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    console.log(`Uploading file to IPFS: ${file.name} (${file.size} bytes)`);\r\n    return `Qm${Math.random().toString(36).substring(2, 15)}`;\r\n  };\r\n\r\n  // Register document on blockchain\r\n  const registerDocumentOnChain = async (cid: string, proof: any) => {\r\n    // Simulate smart contract call\r\n    await new Promise(resolve => setTimeout(resolve, 2000));\r\n    console.log('Document registered on chain:', { \r\n      cid, \r\n      proof,\r\n      note: 'Document notarized with ZK proof of integrity'\r\n    });\r\n  };\r\n\r\n  const getStepIcon = (stepName: string) => {\r\n    if (step === stepName) {\r\n      return <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\r\n        <div className=\"w-3 h-3 bg-white rounded-full animate-pulse\" />\r\n      </div>;\r\n    }\r\n    if (step === 'complete' && stepName === 'verifying') {\r\n      return <CheckCircle className=\"w-6 h-6 text-green-500\" />;\r\n    }\r\n    return <div className=\"w-6 h-6 bg-gray-300 rounded-full\" />;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <Card className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center\">\r\n              <Shield className=\"w-5 h-5 text-blue-500\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-white\">Notarize Document</h2>\r\n              <p className=\"text-sm text-slate-400\">Create an immutable record on the blockchain</p>\r\n            </div>\r\n          </div>\r\n          <Button\r\n            onClick={onClose}\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"text-slate-400 hover:text-white\"\r\n          >\r\n            <X className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Progress Steps */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStepIcon('upload')}\r\n              <span className=\"text-sm text-slate-400\">Upload</span>\r\n            </div>\r\n            <div className=\"flex-1 h-px bg-slate-700 mx-4\" />\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStepIcon('processing')}\r\n              <span className=\"text-sm text-slate-400\">Process</span>\r\n            </div>\r\n            <div className=\"flex-1 h-px bg-slate-700 mx-4\" />\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStepIcon('verifying')}\r\n              <span className=\"text-sm text-slate-400\">Verify</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        {step === 'upload' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"border-2 border-dashed border-slate-600 rounded-lg p-8 text-center\">\r\n              <FileText className=\"w-12 h-12 text-slate-400 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-white mb-2\">Select Document to Notarize</h3>\r\n              <p className=\"text-slate-400 mb-4\">\r\n                Choose a legal document to create an immutable record on the blockchain\r\n              </p>\r\n              <input\r\n                type=\"file\"\r\n                onChange={handleFileSelect}\r\n                className=\"hidden\"\r\n                id=\"file-input\"\r\n                accept=\".pdf,.doc,.docx,.txt\"\r\n              />\r\n              <label\r\n                htmlFor=\"file-input\"\r\n                className=\"inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 cursor-pointer\"\r\n              >\r\n                <Upload className=\"w-4 h-4 mr-2\" />\r\n                Choose File\r\n              </label>\r\n            </div>\r\n\r\n            {selectedFile && (\r\n              <div className=\"bg-slate-800/50 rounded-lg p-4\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <FileText className=\"w-8 h-8 text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-white\">{selectedFile.name}</p>\r\n                    <p className=\"text-sm text-slate-400\">\r\n                      {(selectedFile.size / 1024).toFixed(2)} KB\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4\">\r\n              <div className=\"flex items-start space-x-3\">\r\n                <AlertCircle className=\"w-5 h-5 text-amber-500 mt-0.5\" />\r\n                <div>\r\n                  <h4 className=\"font-medium text-amber-500 mb-1\">Legal Notice</h4>\r\n                  <p className=\"text-sm text-amber-200 mb-2\">\r\n                    Notarizing a document creates an immutable record on the blockchain. \r\n                    This action cannot be undone and will be publicly verifiable.\r\n                  </p>\r\n                  <p className=\"text-sm text-amber-200\">\r\n                    <strong>Security:</strong> The document hash is calculated from the original file to ensure cryptographic integrity \r\n                    and provide an immutable record on the blockchain.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {step === 'processing' && (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <div className=\"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-medium text-white mb-2\">Processing Document</h3>\r\n            <p className=\"text-slate-400 mb-4\">\r\n              Calculating cryptographic hash and preparing for blockchain registration...\r\n            </p>\r\n            <div className=\"bg-slate-800/50 rounded-lg p-4 max-w-md mx-auto\">\r\n              <div className=\"flex items-center justify-between text-sm mb-2\">\r\n                <span className=\"text-slate-400\">File Size:</span>\r\n                <span className=\"text-white font-mono\">\r\n                  {selectedFile ? (selectedFile.size / 1024 / 1024).toFixed(2) + ' MB' : 'Calculating...'}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <span className=\"text-slate-400\">Status:</span>\r\n                <span className=\"text-blue-400 font-mono\">Processing...</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {step === 'verifying' && (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <div className=\"w-8 h-8 border-2 border-green-500 border-t-transparent rounded-full animate-spin\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-medium text-white mb-2\">Generating ZK Proof</h3>\r\n            <p className=\"text-slate-400\">\r\n              Creating cryptographic proof of document integrity...\r\n            </p>\r\n            {documentHash && (\r\n              <div className=\"mt-4 p-3 bg-slate-800/50 rounded-lg\">\r\n                <p className=\"text-xs text-slate-400 mb-1\">Document Hash:</p>\r\n                <p className=\"text-xs font-mono text-white break-all\">{documentHash}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {step === 'complete' && (\r\n          <div className=\"text-center py-8\">\r\n            <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-white mb-2\">Document Notarized!</h3>\r\n            <p className=\"text-slate-400 mb-4\">\r\n              Your document has been successfully registered on the blockchain with cryptographic proof.\r\n            </p>\r\n\r\n            {documentHash && (\r\n              <div className=\"p-3 bg-slate-800/50 rounded-lg mb-4\">\r\n                <p className=\"text-xs text-slate-400 mb-1\">Document Hash:</p>\r\n                <p className=\"text-xs font-mono text-white break-all\">{documentHash}</p>\r\n                <p className=\"text-xs text-slate-500 mt-1\">\r\n                  This hash represents the document's cryptographic fingerprint\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex justify-end space-x-3 mt-6\">\r\n          <Button onClick={onClose} variant=\"outline\">\r\n            {step === 'complete' ? 'Close' : 'Cancel'}\r\n          </Button>\r\n          {step === 'upload' && selectedFile && (\r\n            <Button onClick={handleNotarize} loading={loading}>\r\n              Notarize Document\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name AlertTriangle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEuNzMgMTgtOC0xNGEyIDIgMCAwIDAtMy40OCAwbC04IDE0QTIgMiAwIDAgMCA0IDIxaDE2YTIgMiAwIDAgMCAxLjczLTNaIiAvPgogIDxwYXRoIGQ9Ik0xMiA5djQiIC8+CiAgPHBhdGggZD0iTTEyIDE3aC4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/alert-triangle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst AlertTriangle = createLucideIcon('AlertTriangle', [\n  [\n    'path',\n    {\n      d: 'm21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z',\n      key: 'c3ski4',\n    },\n  ],\n  ['path', { d: 'M12 9v4', key: 'juzpu7' }],\n  ['path', { d: 'M12 17h.01', key: 'p32p05' }],\n]);\n\nexport default AlertTriangle;\n","import React, { useState } from 'react';\r\nimport { Shield, AlertTriangle, CheckCircle, X } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card } from '../ui/Card';\r\nimport { Input } from '../ui/Input';\r\nimport { ZKCircuitManager, DocumentTransformer } from '../../utils/zkCircuits';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface RedactionModalProps {\r\n  document: {\r\n    file_id: string;\r\n    name: string;\r\n    cid: string;\r\n    docHash: string;\r\n  };\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport const RedactionModal: React.FC<RedactionModalProps> = ({ document, onClose, onSuccess }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [step, setStep] = useState<'configure' | 'processing' | 'verifying' | 'complete'>('configure');\r\n  const [redactionRules, setRedactionRules] = useState({\r\n    removeChunks: [] as number[],\r\n    replaceWith: 0,\r\n    customRules: ''\r\n  });\r\n  const [transformedHash, setTransformedHash] = useState<string>('');\r\n\r\n  const handleRedactionRuleChange = (rule: string, value: any) => {\r\n    setRedactionRules(prev => ({\r\n      ...prev,\r\n      [rule]: value\r\n    }));\r\n  };\r\n\r\n  const handleCreateRedaction = async () => {\r\n    setLoading(true);\r\n    setStep('processing');\r\n\r\n    try {\r\n      // 1. Get original document data (placeholder - in real implementation)\r\n      const originalData = await getDocumentData(document.cid);\r\n      setStep('verifying');\r\n\r\n      // 2. Perform redaction\r\n      const redactedData = DocumentTransformer.performToyRedaction(originalData, {\r\n        removeChunks: redactionRules.removeChunks,\r\n        replaceWith: redactionRules.replaceWith\r\n      });\r\n\r\n      // 3. Calculate hashes\r\n      const zkManager = ZKCircuitManager.getInstance();\r\n      const originalHash = await zkManager.poseidonHash(originalData);\r\n      const transformedHash = await zkManager.poseidonHash(redactedData);\r\n      setTransformedHash(transformedHash);\r\n\r\n      // 4. Generate ZKPT proof\r\n      const { proof, publicSignals } = await zkManager.generateZKPTProof(\r\n        originalData,\r\n        redactedData,\r\n        originalHash,\r\n        transformedHash\r\n      );\r\n\r\n      // 5. Format proof for smart contract\r\n      const formattedProof = await zkManager.formatProofForContract(proof, publicSignals);\r\n\r\n      // 6. Upload redacted document to IPFS\r\n      const redactedCid = await uploadRedactedDocument(redactedData);\r\n\r\n      // 7. Register transformation on blockchain\r\n      await registerTransformationOnChain(redactedCid, formattedProof);\r\n\r\n      // 8. Add redacted document to legal documents list\r\n      await addRedactedDocumentToLegalList(redactedCid, transformedHash, formattedProof);\r\n\r\n      setStep('complete');\r\n      toast.success('Verifiable redaction created and linked on-chain!');\r\n      onSuccess();\r\n\r\n    } catch (error) {\r\n      console.error('Error creating redaction:', error);\r\n      toast.error('An error occurred during redaction creation.');\r\n      setStep('configure');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Placeholder functions\r\n  const getDocumentData = async (cid: string): Promise<Uint8Array> => {\r\n    // Simulate getting document data from IPFS\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    return new Uint8Array(1024).fill(1); // Mock data\r\n  };\r\n\r\n  const uploadRedactedDocument = async (data: Uint8Array): Promise<string> => {\r\n    // Simulate IPFS upload\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    return `Qm${Math.random().toString(36).substring(2, 15)}`;\r\n  };\r\n\r\n  const registerTransformationOnChain = async (cid: string, proof: any) => {\r\n    // Simulate smart contract call\r\n    await new Promise(resolve => setTimeout(resolve, 2000));\r\n    console.log('Transformation registered on chain:', { cid, proof });\r\n  };\r\n\r\n  const addRedactedDocumentToLegalList = async (cid: string, hash: string, proof: any) => {\r\n    // Create redacted document entry\r\n    const redactedDocument = {\r\n      id: Date.now().toString(),\r\n      file_id: Date.now().toString(),\r\n      name: `Redacted_${document.name}`,\r\n      docHash: hash,\r\n      cid: cid,\r\n      status: 'registered' as const,\r\n      timestamp: Date.now(),\r\n      owner: 'current-user', // This should be the actual user address\r\n      blockchainHash: hash,\r\n      ipfsCid: cid,\r\n      zkProof: proof,\r\n      parentHash: document.docHash, // Link to original document\r\n      transformationType: 'redaction',\r\n      redactionRules: redactionRules,\r\n      originalDocumentId: document.file_id\r\n    };\r\n\r\n    // Add to localStorage\r\n    const existingDocs = JSON.parse(localStorage.getItem('legal_documents') || '[]');\r\n    existingDocs.push(redactedDocument);\r\n    localStorage.setItem('legal_documents', JSON.stringify(existingDocs));\r\n\r\n    // Add chain of custody entry for the redaction\r\n    const chainEntry = {\r\n      id: `redact_${redactedDocument.id}`,\r\n      documentId: redactedDocument.file_id,\r\n      documentName: redactedDocument.name,\r\n      action: 'Document Redacted',\r\n      timestamp: redactedDocument.timestamp,\r\n      user: redactedDocument.owner,\r\n      details: `Document redacted using ZKPT protocol. Rules: ${JSON.stringify(redactedDocument.redactionRules)}`,\r\n      type: 'transformation',\r\n      transformationType: 'redaction',\r\n      parentHash: redactedDocument.parentHash,\r\n      originalDocumentId: redactedDocument.originalDocumentId,\r\n      hash: redactedDocument.docHash,\r\n      cid: redactedDocument.cid\r\n    };\r\n\r\n    // Add to chain of custody in localStorage\r\n    const existingChain = JSON.parse(localStorage.getItem('chain_of_custody') || '[]');\r\n    existingChain.push(chainEntry);\r\n    localStorage.setItem('chain_of_custody', JSON.stringify(existingChain));\r\n\r\n    // Dispatch custom event to notify other components\r\n    window.dispatchEvent(new CustomEvent('legalDocumentsUpdated'));\r\n    window.dispatchEvent(new CustomEvent('chainOfCustodyUpdated'));\r\n\r\n    console.log('Redacted document added to legal documents list:', redactedDocument);\r\n    console.log('Chain of custody entry added:', chainEntry);\r\n  };\r\n\r\n  const getStepIcon = (stepName: string) => {\r\n    if (step === stepName) {\r\n      return <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\r\n        <div className=\"w-3 h-3 bg-white rounded-full animate-pulse\" />\r\n      </div>;\r\n    }\r\n    if (step === 'complete' && stepName === 'verifying') {\r\n      return <CheckCircle className=\"w-6 h-6 text-green-500\" />;\r\n    }\r\n    return <div className=\"w-6 h-6 bg-gray-300 rounded-full\" />;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <Card className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center\">\r\n              <Shield className=\"w-5 h-5 text-purple-500\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-white\">Create Verifiable Redaction</h2>\r\n              <p className=\"text-sm text-slate-400\">ZKPT: Zero-Knowledge Proof of Transformation</p>\r\n            </div>\r\n          </div>\r\n          <Button\r\n            onClick={onClose}\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"text-slate-400 hover:text-white\"\r\n          >\r\n            <X className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Progress Steps */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStepIcon('configure')}\r\n              <span className=\"text-sm text-slate-400\">Configure</span>\r\n            </div>\r\n            <div className=\"flex-1 h-px bg-slate-700 mx-4\" />\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStepIcon('processing')}\r\n              <span className=\"text-sm text-slate-400\">Process</span>\r\n            </div>\r\n            <div className=\"flex-1 h-px bg-slate-700 mx-4\" />\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStepIcon('verifying')}\r\n              <span className=\"text-sm text-slate-400\">Verify</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        {step === 'configure' && (\r\n          <div className=\"space-y-6\">\r\n            {/* Document Info */}\r\n            <div className=\"bg-slate-800/50 rounded-lg p-4\">\r\n              <h3 className=\"font-medium text-white mb-2\">Original Document</h3>\r\n              <p className=\"text-sm text-slate-400\">{document.name}</p>\r\n              <p className=\"text-xs text-slate-500 font-mono\">{document.docHash}</p>\r\n            </div>\r\n\r\n            {/* Redaction Rules */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-medium text-white\">Redaction Configuration</h3>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                  Chunks to Remove (comma-separated indices)\r\n                </label>\r\n                <Input\r\n                  type=\"text\"\r\n                  placeholder=\"e.g., 1,3,5\"\r\n                  value={redactionRules.removeChunks.join(',')}\r\n                  onChange={(e) => {\r\n                    const chunks = e.target.value.split(',').map(s => parseInt(s.trim())).filter(n => !isNaN(n));\r\n                    handleRedactionRuleChange('removeChunks', chunks);\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                  Replacement Value (0-255)\r\n                </label>\r\n                <Input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  max=\"255\"\r\n                  value={redactionRules.replaceWith}\r\n                  onChange={(e) => handleRedactionRuleChange('replaceWith', parseInt(e.target.value))}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                  Custom Redaction Rules (JSON)\r\n                </label>\r\n                <textarea\r\n                  className=\"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm font-mono\"\r\n                  rows={3}\r\n                  placeholder='{\"sensitiveData\": [\"SSN\", \"Credit Card\"], \"replaceWith\": \"[REDACTED]\"}'\r\n                  value={redactionRules.customRules}\r\n                  onChange={(e) => handleRedactionRuleChange('customRules', e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Warning */}\r\n            <div className=\"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4\">\r\n              <div className=\"flex items-start space-x-3\">\r\n                <AlertTriangle className=\"w-5 h-5 text-amber-500 mt-0.5\" />\r\n                <div>\r\n                  <h4 className=\"font-medium text-amber-500 mb-1\">ZKPT Notice</h4>\r\n                  <p className=\"text-sm text-amber-200\">\r\n                    This will create a verifiable transformation that proves the redacted document \r\n                    was derived from the original without revealing the redacted content.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {step === 'processing' && (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"w-16 h-16 bg-purple-500/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <div className=\"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-medium text-white mb-2\">Processing Redaction</h3>\r\n            <p className=\"text-slate-400\">\r\n              Applying redaction rules and preparing for ZK proof generation...\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {step === 'verifying' && (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <div className=\"w-8 h-8 border-2 border-green-500 border-t-transparent rounded-full animate-spin\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-medium text-white mb-2\">Generating ZKPT Proof</h3>\r\n            <p className=\"text-slate-400\">\r\n              Creating cryptographic proof of transformation...\r\n            </p>\r\n            {transformedHash && (\r\n              <div className=\"mt-4 p-3 bg-slate-800/50 rounded-lg\">\r\n                <p className=\"text-xs text-slate-400 mb-1\">Transformed Document Hash:</p>\r\n                <p className=\"text-xs font-mono text-white break-all\">{transformedHash}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {step === 'complete' && (\r\n          <div className=\"text-center py-8\">\r\n            <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-white mb-2\">Redaction Created!</h3>\r\n            <p className=\"text-slate-400 mb-4\">\r\n              Your verifiable redaction has been successfully created and linked to the original document.\r\n            </p>\r\n            {transformedHash && (\r\n              <div className=\"p-3 bg-slate-800/50 rounded-lg mb-4\">\r\n                <p className=\"text-xs text-slate-400 mb-1\">Transformed Document Hash:</p>\r\n                <p className=\"text-xs font-mono text-white break-all\">{transformedHash}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex justify-end space-x-3 mt-6\">\r\n          <Button onClick={onClose} variant=\"outline\">\r\n            {step === 'complete' ? 'Close' : 'Cancel'}\r\n          </Button>\r\n          {step === 'configure' && (\r\n            <Button onClick={handleCreateRedaction} loading={loading}>\r\n              Create Verifiable Redaction\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { PenTool, Users, CheckCircle, X, AlertCircle } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card } from '../ui/Card';\r\nimport { Input } from '../ui/Input';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface ESignatureModalProps {\r\n  document: {\r\n    file_id: string;\r\n    name: string;\r\n    docHash: string;\r\n    status: string;\r\n  };\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport const ESignatureModal: React.FC<ESignatureModalProps> = ({ document, onClose, onSuccess }) => {\r\n  const { user } = useAuth();\r\n  const [loading, setLoading] = useState(false);\r\n  const [step, setStep] = useState<'request' | 'signing' | 'complete'>('request');\r\n  const [signatureRequest, setSignatureRequest] = useState({\r\n    signers: [] as string[],\r\n    escrowAmount: '',\r\n    deadline: '',\r\n    customMessage: ''\r\n  });\r\n  const [signatureStatus, setSignatureStatus] = useState<{\r\n    required: number;\r\n    completed: number;\r\n    signers: { address: string; signed: boolean; signature?: string }[];\r\n  }>({\r\n    required: 0,\r\n    completed: 0,\r\n    signers: []\r\n  });\r\n\r\n  const handleRequestSignatures = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Validate inputs\r\n      if (signatureRequest.signers.length === 0) {\r\n        toast.error('Please specify at least one signer');\r\n        return;\r\n      }\r\n\r\n      if (signatureRequest.deadline && new Date(signatureRequest.deadline) <= new Date()) {\r\n        toast.error('Deadline must be in the future');\r\n        return;\r\n      }\r\n\r\n      // API Base URL\r\n      const getApiBase = () => {\r\n        return process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n      };\r\n\r\n      // Auth Headers\r\n      const getAuthHeaders = () => {\r\n        const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n        if (!user.jwt) {\r\n          throw new Error('No authentication token found. Please login again.');\r\n        }\r\n        return {\r\n          'Authorization': `Bearer ${user.jwt}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      };\r\n\r\n      // Send signature request to backend\r\n      const response = await fetch(`${getApiBase()}/documents/${document.file_id}/request-signature`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify({\r\n          signers: signatureRequest.signers.map(addr => ({\r\n            address: addr,\r\n            name: '',\r\n            email: ''\r\n          })),\r\n          requestedBy: user?.address || '',\r\n          documentName: document.name,\r\n          message: signatureRequest.customMessage || 'Please sign this document',\r\n          expiresAt: signatureRequest.deadline || new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to request signatures: ${response.status}`);\r\n      }\r\n\r\n      await response.json();\r\n      \r\n      setSignatureStatus({\r\n        required: signatureRequest.signers.length,\r\n        completed: 0,\r\n        signers: signatureRequest.signers.map(addr => ({ address: addr, signed: false }))\r\n      });\r\n\r\n      setStep('signing');\r\n      toast.success('Signature request sent successfully!');\r\n\r\n    } catch (error) {\r\n      console.error('Error requesting signatures:', error);\r\n      toast.error('An error occurred while requesting signatures.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSignDocument = async () => {\r\n    if (!user?.address) {\r\n      toast.error('Please connect your wallet to sign');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      // API Base URL\r\n      const getApiBase = () => {\r\n        return process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n      };\r\n\r\n      // Auth Headers\r\n      const getAuthHeaders = () => {\r\n        const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n        if (!user.jwt) {\r\n          throw new Error('No authentication token found. Please login again.');\r\n        }\r\n        return {\r\n          'Authorization': `Bearer ${user.jwt}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      };\r\n\r\n      // Simulate signing process\r\n      const signature = await signDocumentHash(document.docHash);\r\n      \r\n      // Send signature to backend\r\n      const response = await fetch(`${getApiBase()}/documents/${document.file_id}/sign`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify({\r\n          signerAddress: user.address,\r\n          signature: signature,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to sign document: ${response.status}`);\r\n      }\r\n\r\n      await response.json();\r\n      \r\n      // Update signature status\r\n      setSignatureStatus(prev => {\r\n        const updatedSigners = prev.signers.map(signer => \r\n          signer.address.toLowerCase() === user.address?.toLowerCase() \r\n            ? { ...signer, signed: true, signature }\r\n            : signer\r\n        );\r\n        \r\n        const completed = updatedSigners.filter(s => s.signed).length;\r\n        \r\n        return {\r\n          ...prev,\r\n          completed,\r\n          signers: updatedSigners\r\n        };\r\n      });\r\n\r\n      if (signatureStatus.completed + 1 >= signatureStatus.required) {\r\n        setStep('complete');\r\n        toast.success('All signatures collected! Contract executed.');\r\n      } else {\r\n        toast.success('Your signature has been recorded!');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error signing document:', error);\r\n      toast.error('An error occurred while signing.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Placeholder functions\r\n  // const requestSignaturesOnChain = async () => {\r\n  //   // Simulate smart contract call\r\n  //   await new Promise(resolve => setTimeout(resolve, 2000));\r\n  //   console.log('Signature request sent:', signatureRequest);\r\n  // };\r\n\r\n  const signDocumentHash = async (docHash: string): Promise<string> => {\r\n    // Simulate MetaMask signing\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    return `0x${Math.random().toString(36).substring(2, 15)}${Math.random().toString(36).substring(2, 15)}`;\r\n  };\r\n\r\n  const isSignerRequired = () => {\r\n    if (!user?.address) return false;\r\n    return signatureRequest.signers.some(addr => \r\n      addr.toLowerCase() === user.address?.toLowerCase()\r\n    );\r\n  };\r\n\r\n  const canSign = () => {\r\n    if (!user?.address) return false;\r\n    const signer = signatureStatus.signers.find(s => \r\n      s.address.toLowerCase() === user.address?.toLowerCase()\r\n    );\r\n    return signer && !signer.signed;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <Card className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center\">\r\n              <PenTool className=\"w-5 h-5 text-green-500\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-white\">E-Signature & Escrow</h2>\r\n              <p className=\"text-sm text-slate-400\">Secure document signing with smart contract execution</p>\r\n            </div>\r\n          </div>\r\n          <Button\r\n            onClick={onClose}\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"text-slate-400 hover:text-white\"\r\n          >\r\n            <X className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Document Info */}\r\n        <div className=\"bg-slate-800/50 rounded-lg p-4 mb-6\">\r\n          <h3 className=\"font-medium text-white mb-2\">Document</h3>\r\n          <p className=\"text-sm text-slate-400\">{document.name}</p>\r\n          <p className=\"text-xs text-slate-500 font-mono\">{document.docHash}</p>\r\n        </div>\r\n\r\n        {/* Request Signatures */}\r\n        {step === 'request' && (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                Required Signers (comma-separated addresses)\r\n              </label>\r\n              <Input\r\n                type=\"text\"\r\n                placeholder=\"0x1234..., 0x5678..., 0x9abc...\"\r\n                value={signatureRequest.signers.join(', ')}\r\n                onChange={(e) => {\r\n                  const addresses = e.target.value.split(',').map(addr => addr.trim()).filter(addr => addr);\r\n                  setSignatureRequest(prev => ({ ...prev, signers: addresses }));\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                Escrow Amount (ETH) - Optional\r\n              </label>\r\n              <Input\r\n                type=\"number\"\r\n                step=\"0.001\"\r\n                placeholder=\"0.1\"\r\n                value={signatureRequest.escrowAmount}\r\n                onChange={(e) => setSignatureRequest(prev => ({ ...prev, escrowAmount: e.target.value }))}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                Signature Deadline\r\n              </label>\r\n              <Input\r\n                type=\"datetime-local\"\r\n                value={signatureRequest.deadline}\r\n                onChange={(e) => setSignatureRequest(prev => ({ ...prev, deadline: e.target.value }))}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                Custom Message (Optional)\r\n              </label>\r\n              <textarea\r\n                className=\"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm\"\r\n                rows={3}\r\n                placeholder=\"Add a custom message for signers...\"\r\n                value={signatureRequest.customMessage}\r\n                onChange={(e) => setSignatureRequest(prev => ({ ...prev, customMessage: e.target.value }))}\r\n              />\r\n            </div>\r\n\r\n            {/* Info */}\r\n            <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4\">\r\n              <div className=\"flex items-start space-x-3\">\r\n                <AlertCircle className=\"w-5 h-5 text-blue-500 mt-0.5\" />\r\n                <div>\r\n                  <h4 className=\"font-medium text-blue-500 mb-1\">Smart Contract Escrow</h4>\r\n                  <p className=\"text-sm text-blue-200\">\r\n                    Funds will be locked in escrow until all signatures are collected. \r\n                    Once complete, funds will be automatically released to the document owner.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Signing Status */}\r\n        {step === 'signing' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"text-center\">\r\n              <h3 className=\"text-lg font-medium text-white mb-2\">Signature Progress</h3>\r\n              <div className=\"w-full bg-slate-700 rounded-full h-2 mb-4\">\r\n                <div \r\n                  className=\"bg-green-500 h-2 rounded-full transition-all duration-300\"\r\n                  style={{ width: `${(signatureStatus.completed / signatureStatus.required) * 100}%` }}\r\n                />\r\n              </div>\r\n              <p className=\"text-sm text-slate-400\">\r\n                {signatureStatus.completed} of {signatureStatus.required} signatures collected\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n              {signatureStatus.signers.map((signer, index) => (\r\n                <div key={index} className=\"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n                      signer.signed ? 'bg-green-500/20 text-green-500' : 'bg-slate-600 text-slate-400'\r\n                    }`}>\r\n                      {signer.signed ? <CheckCircle className=\"w-4 h-4\" /> : <Users className=\"w-4 h-4\" />}\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm font-medium text-white\">\r\n                        {signer.address.slice(0, 6)}...{signer.address.slice(-4)}\r\n                      </p>\r\n                      <p className=\"text-xs text-slate-400\">\r\n                        {signer.signed ? 'Signed' : 'Pending'}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  {signer.signed && (\r\n                    <div className=\"text-xs text-green-500 font-mono\">\r\n                      {signer.signature?.slice(0, 10)}...\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {canSign() && (\r\n              <div className=\"bg-green-500/10 border border-green-500/30 rounded-lg p-4\">\r\n                <div className=\"flex items-center space-x-3 mb-3\">\r\n                  <PenTool className=\"w-5 h-5 text-green-500\" />\r\n                  <h4 className=\"font-medium text-green-500\">Your Signature Required</h4>\r\n                </div>\r\n                <p className=\"text-sm text-green-200 mb-3\">\r\n                  You are required to sign this document. Click below to sign with your wallet.\r\n                </p>\r\n                <Button onClick={handleSignDocument} loading={loading}>\r\n                  Sign Document\r\n                </Button>\r\n              </div>\r\n            )}\r\n\r\n            {!isSignerRequired() && (\r\n              <div className=\"bg-slate-500/10 border border-slate-500/30 rounded-lg p-4\">\r\n                <p className=\"text-sm text-slate-400\">\r\n                  You are not required to sign this document. Waiting for other signers...\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Complete */}\r\n        {step === 'complete' && (\r\n          <div className=\"text-center py-8\">\r\n            <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-white mb-2\">Contract Executed!</h3>\r\n            <p className=\"text-slate-400 mb-4\">\r\n              All signatures have been collected and the smart contract has been executed.\r\n            </p>\r\n            {signatureRequest.escrowAmount && (\r\n              <div className=\"p-3 bg-slate-800/50 rounded-lg\">\r\n                <p className=\"text-sm text-slate-400\">Escrow Amount Released:</p>\r\n                <p className=\"text-lg font-semibold text-white\">{signatureRequest.escrowAmount} ETH</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex justify-end space-x-3 mt-6\">\r\n          <Button onClick={onClose} variant=\"outline\">\r\n            {step === 'complete' ? 'Close' : 'Cancel'}\r\n          </Button>\r\n          {step === 'request' && (\r\n            <Button onClick={handleRequestSignatures} loading={loading}>\r\n              Request Signatures\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name BarChart3\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAzdjE4aDE4IiAvPgogIDxwYXRoIGQ9Ik0xOCAxN1Y5IiAvPgogIDxwYXRoIGQ9Ik0xMyAxN1Y1IiAvPgogIDxwYXRoIGQ9Ik04IDE3di0zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/bar-chart-3\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BarChart3 = createLucideIcon('BarChart3', [\n  ['path', { d: 'M3 3v18h18', key: '1s2lah' }],\n  ['path', { d: 'M18 17V9', key: '2bz60n' }],\n  ['path', { d: 'M13 17V5', key: '1frdt8' }],\n  ['path', { d: 'M8 17v-3', key: '17ska0' }],\n]);\n\nexport default BarChart3;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Zap\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjEzIDIgMyAxNCAxMiAxNCAxMSAyMiAyMSAxMCAxMiAxMCAxMyAyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/zap\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Zap = createLucideIcon('Zap', [\n  [\n    'polygon',\n    { points: '13 2 3 14 12 14 11 22 21 10 12 10 13 2', key: '45s27k' },\n  ],\n]);\n\nexport default Zap;\n","import React, { useState } from 'react';\r\nimport { Brain, BarChart3, Shield, CheckCircle, X, Zap } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card } from '../ui/Card';\r\nimport { Input } from '../ui/Input';\r\nimport { ZKCircuitManager, AIModelManager } from '../../utils/zkCircuits';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface ZKMLAnalysisModalProps {\r\n  document: {\r\n    file_id: string;\r\n    name: string;\r\n    docHash: string;\r\n  };\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport const ZKMLAnalysisModal: React.FC<ZKMLAnalysisModalProps> = ({ document, onClose, onSuccess }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [step, setStep] = useState<'configure' | 'processing' | 'verifying' | 'complete'>('configure');\r\n  const [analysisConfig, setAnalysisConfig] = useState({\r\n    modelType: 'linear_regression',\r\n    inputData: '5',\r\n    modelParams: { m: 2, b: 3 },\r\n    expectedOutput: '13'\r\n  });\r\n  const [analysisResult, setAnalysisResult] = useState<{\r\n    input: number;\r\n    output: number;\r\n    modelParams: { m: number; b: number };\r\n    proofHash: string;\r\n  } | null>(null);\r\n\r\n  const handleAnalysisConfigChange = (field: string, value: any) => {\r\n    setAnalysisConfig(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleRunAnalysis = async () => {\r\n    setLoading(true);\r\n    setStep('processing');\r\n\r\n    try {\r\n      // 1. Parse input data\r\n      const inputData = parseFloat(analysisConfig.inputData);\r\n      const expectedOutput = parseFloat(analysisConfig.expectedOutput);\r\n\r\n      // 2. Run the AI model\r\n      const actualOutput = AIModelManager.runToyLinearModel(inputData, analysisConfig.modelParams);\r\n      \r\n      // Verify the model execution\r\n      const isValid = AIModelManager.verifyModelExecution(inputData, analysisConfig.modelParams, expectedOutput);\r\n      \r\n      if (!isValid) {\r\n        throw new Error('Model execution verification failed');\r\n      }\r\n\r\n      setStep('verifying');\r\n\r\n      // 3. Generate ZKML proof\r\n      const zkManager = ZKCircuitManager.getInstance();\r\n      const { proof, publicSignals } = await zkManager.generateZKMLProof(\r\n        inputData,\r\n        analysisConfig.modelParams,\r\n        expectedOutput\r\n      );\r\n\r\n      // 4. Format proof for smart contract\r\n      const formattedProof = await zkManager.formatProofForContract(proof, publicSignals);\r\n\r\n      // 5. Verify on blockchain\r\n      await verifyMLInferenceOnChain(document.docHash, formattedProof);\r\n\r\n      setAnalysisResult({\r\n        input: inputData,\r\n        output: actualOutput,\r\n        modelParams: analysisConfig.modelParams,\r\n        proofHash: `0x${Math.random().toString(36).substring(2, 15)}`\r\n      });\r\n\r\n      setStep('complete');\r\n      toast.success('AI analysis verified on-chain!');\r\n      onSuccess();\r\n\r\n    } catch (error) {\r\n      console.error('Error running ZKML analysis:', error);\r\n      toast.error('An error occurred during AI analysis.');\r\n      setStep('configure');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Placeholder functions\r\n  const verifyMLInferenceOnChain = async (docHash: string, proof: any) => {\r\n    // Simulate smart contract call\r\n    await new Promise(resolve => setTimeout(resolve, 2000));\r\n    console.log('ML inference verified on chain:', { docHash, proof });\r\n  };\r\n\r\n  const getStepIcon = (stepName: string) => {\r\n    if (step === stepName) {\r\n      return <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\r\n        <div className=\"w-3 h-3 bg-white rounded-full animate-pulse\" />\r\n      </div>;\r\n    }\r\n    if (step === 'complete' && stepName === 'verifying') {\r\n      return <CheckCircle className=\"w-6 h-6 text-green-500\" />;\r\n    }\r\n    return <div className=\"w-6 h-6 bg-gray-300 rounded-full\" />;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <Card className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-orange-500/10 rounded-lg flex items-center justify-center\">\r\n              <Brain className=\"w-5 h-5 text-orange-500\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-white\">ZKML Analysis</h2>\r\n              <p className=\"text-sm text-slate-400\">Verifiable AI inference with zero-knowledge proofs</p>\r\n            </div>\r\n          </div>\r\n          <Button\r\n            onClick={onClose}\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"text-slate-400 hover:text-white\"\r\n          >\r\n            <X className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Progress Steps */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStepIcon('configure')}\r\n              <span className=\"text-sm text-slate-400\">Configure</span>\r\n            </div>\r\n            <div className=\"flex-1 h-px bg-slate-700 mx-4\" />\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStepIcon('processing')}\r\n              <span className=\"text-sm text-slate-400\">Process</span>\r\n            </div>\r\n            <div className=\"flex-1 h-px bg-slate-700 mx-4\" />\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStepIcon('verifying')}\r\n              <span className=\"text-sm text-slate-400\">Verify</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        {step === 'configure' && (\r\n          <div className=\"space-y-6\">\r\n            {/* Document Info */}\r\n            <div className=\"bg-slate-800/50 rounded-lg p-4\">\r\n              <h3 className=\"font-medium text-white mb-2\">Document</h3>\r\n              <p className=\"text-sm text-slate-400\">{document.name}</p>\r\n              <p className=\"text-xs text-slate-500 font-mono\">{document.docHash}</p>\r\n            </div>\r\n\r\n            {/* Model Configuration */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-medium text-white\">AI Model Configuration</h3>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                  Model Type\r\n                </label>\r\n                <select\r\n                  className=\"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white\"\r\n                  value={analysisConfig.modelType}\r\n                  onChange={(e) => handleAnalysisConfigChange('modelType', e.target.value)}\r\n                >\r\n                  <option value=\"linear_regression\">Linear Regression (y = mx + b)</option>\r\n                  <option value=\"classification\">Document Classification</option>\r\n                  <option value=\"sentiment\">Sentiment Analysis</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                    Input Value (x)\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    step=\"0.1\"\r\n                    value={analysisConfig.inputData}\r\n                    onChange={(e) => handleAnalysisConfigChange('inputData', e.target.value)}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                    Expected Output (y)\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    step=\"0.1\"\r\n                    value={analysisConfig.expectedOutput}\r\n                    onChange={(e) => handleAnalysisConfigChange('expectedOutput', e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                    Model Parameter (m)\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    step=\"0.1\"\r\n                    value={analysisConfig.modelParams.m}\r\n                    onChange={(e) => handleAnalysisConfigChange('modelParams', {\r\n                      ...analysisConfig.modelParams,\r\n                      m: parseFloat(e.target.value)\r\n                    })}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                    Model Parameter (b)\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    step=\"0.1\"\r\n                    value={analysisConfig.modelParams.b}\r\n                    onChange={(e) => handleAnalysisConfigChange('modelParams', {\r\n                      ...analysisConfig.modelParams,\r\n                      b: parseFloat(e.target.value)\r\n                    })}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Model Preview */}\r\n            <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4\">\r\n              <div className=\"flex items-center space-x-3 mb-3\">\r\n                <BarChart3 className=\"w-5 h-5 text-blue-500\" />\r\n                <h4 className=\"font-medium text-blue-500\">Model Preview</h4>\r\n              </div>\r\n              <div className=\"text-sm text-blue-200\">\r\n                <p>Model: y = {analysisConfig.modelParams.m}x + {analysisConfig.modelParams.b}</p>\r\n                <p>Input: x = {analysisConfig.inputData}</p>\r\n                <p>Expected Output: y = {analysisConfig.expectedOutput}</p>\r\n                <p>Calculated Output: y = {AIModelManager.runToyLinearModel(\r\n                  parseFloat(analysisConfig.inputData) || 0, \r\n                  analysisConfig.modelParams\r\n                )}</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ZKML Info */}\r\n            <div className=\"bg-orange-500/10 border border-orange-500/30 rounded-lg p-4\">\r\n              <div className=\"flex items-start space-x-3\">\r\n                <Shield className=\"w-5 h-5 text-orange-500 mt-0.5\" />\r\n                <div>\r\n                  <h4 className=\"font-medium text-orange-500 mb-1\">ZKML Protocol</h4>\r\n                  <p className=\"text-sm text-orange-200\">\r\n                    This will generate a zero-knowledge proof that the AI model was executed correctly \r\n                    without revealing the model parameters or input data.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {step === 'processing' && (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"w-16 h-16 bg-orange-500/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <div className=\"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-medium text-white mb-2\">Running AI Analysis</h3>\r\n            <p className=\"text-slate-400\">\r\n              Executing AI model and preparing for ZK proof generation...\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {step === 'verifying' && (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <div className=\"w-8 h-8 border-2 border-green-500 border-t-transparent rounded-full animate-spin\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-medium text-white mb-2\">Generating ZKML Proof</h3>\r\n            <p className=\"text-slate-400\">\r\n              Creating cryptographic proof of AI inference...\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {step === 'complete' && analysisResult && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"text-center\">\r\n              <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-white mb-2\">AI Analysis Verified!</h3>\r\n              <p className=\"text-slate-400\">\r\n                The AI inference has been cryptographically verified on the blockchain.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"bg-slate-800/50 rounded-lg p-4\">\r\n              <h4 className=\"font-medium text-white mb-3\">Analysis Results</h4>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-slate-400\">Input:</span>\r\n                  <span className=\"text-white\">{analysisResult.input}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-slate-400\">Output:</span>\r\n                  <span className=\"text-white\">{analysisResult.output}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-slate-400\">Model:</span>\r\n                  <span className=\"text-white\">y = {analysisResult.modelParams.m}x + {analysisResult.modelParams.b}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-slate-400\">Proof Hash:</span>\r\n                  <span className=\"text-white font-mono text-xs\">{analysisResult.proofHash}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-green-500/10 border border-green-500/30 rounded-lg p-4\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <Zap className=\"w-5 h-5 text-green-500\" />\r\n                <div>\r\n                  <h4 className=\"font-medium text-green-500 mb-1\">Verification Complete</h4>\r\n                  <p className=\"text-sm text-green-200\">\r\n                    The AI analysis has been cryptographically verified and recorded on the blockchain. \r\n                    The proof can be independently verified by anyone.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex justify-end space-x-3 mt-6\">\r\n          <Button onClick={onClose} variant=\"outline\">\r\n            {step === 'complete' ? 'Close' : 'Cancel'}\r\n          </Button>\r\n          {step === 'configure' && (\r\n            <Button onClick={handleRunAnalysis} loading={loading}>\r\n              Run ZKML Analysis\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name MessageSquare\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTVhMiAyIDAgMCAxLTIgMkg3bC00IDRWNWEyIDIgMCAwIDEgMi0yaDE0YTIgMiAwIDAgMSAyIDJ6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/message-square\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageSquare = createLucideIcon('MessageSquare', [\n  [\n    'path',\n    {\n      d: 'M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z',\n      key: '1lielz',\n    },\n  ],\n]);\n\nexport default MessageSquare;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggMTN2NmEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMlY4YTIgMiAwIDAgMSAyLTJoNiIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNSAzIDIxIDMgMjEgOSIgLz4KICA8bGluZSB4MT0iMTAiIHgyPSIyMSIgeTE9IjE0IiB5Mj0iMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('ExternalLink', [\n  [\n    'path',\n    {\n      d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6',\n      key: 'a6xqqp',\n    },\n  ],\n  ['polyline', { points: '15 3 21 3 21 9', key: 'mznyad' }],\n  ['line', { x1: '10', x2: '21', y1: '14', y2: '3', key: '18c3s4' }],\n]);\n\nexport default ExternalLink;\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n  FileText, \r\n  Clock, \r\n  CheckCircle, \r\n  AlertTriangle, \r\n  Calendar,\r\n  MessageSquare,\r\n  ExternalLink\r\n} from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card } from '../ui/Card';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface SignatureRequest {\r\n  id: string;\r\n  documentId: string;\r\n  documentName: string;\r\n  requestedBy: string;\r\n  status: 'pending' | 'signed' | 'expired' | 'declined';\r\n  createdAt: string;\r\n  expiresAt: number;\r\n  message: string;\r\n}\r\n\r\nexport const SignatureRequests: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [signatureRequests, setSignatureRequests] = useState<SignatureRequest[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // API Base URL\r\n  const getApiBase = () => {\r\n    return process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n  };\r\n\r\n  // Auth Headers\r\n  const getAuthHeaders = () => {\r\n    const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n    if (!user.jwt) {\r\n      throw new Error('No authentication token found. Please login again.');\r\n    }\r\n    return {\r\n      'Authorization': `Bearer ${user.jwt}`,\r\n      'Content-Type': 'application/json',\r\n    };\r\n  };\r\n\r\n  // Load signature requests\r\n  const loadSignatureRequests = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/signature-requests?user_address=${user?.address || ''}`, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to load signature requests: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setSignatureRequests(data.signatureRequests);\r\n    } catch (error) {\r\n      console.error('Error loading signature requests:', error);\r\n      setError('Failed to load signature requests');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [user?.address]);\r\n\r\n  // Sign a document\r\n  const signDocument = async (documentId: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/documents/${documentId}/sign`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify({\r\n          signerAddress: user?.address || '',\r\n          signature: `signature_${Date.now()}`, // Mock signature\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to sign document: ${response.status}`);\r\n      }\r\n\r\n      await response.json();\r\n      toast.success('Document signed successfully!');\r\n      \r\n      // Update local state immediately\r\n      setSignatureRequests(prev => \r\n        prev.map(req => \r\n          req.documentId === documentId \r\n            ? { ...req, status: 'signed' }\r\n            : req\r\n        )\r\n      );\r\n      \r\n      // Reload signature requests to get latest data\r\n      await loadSignatureRequests();\r\n    } catch (error) {\r\n      console.error('Error signing document:', error);\r\n      toast.error('Failed to sign document');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Decline a signature request\r\n  const declineSignature = async (requestId: string) => {\r\n    setLoading(true);\r\n    try {\r\n      // In a real implementation, this would call a decline endpoint\r\n      toast.success('Signature request declined');\r\n      \r\n      // Remove from local state\r\n      setSignatureRequests(prev => prev.filter(req => req.id !== requestId));\r\n    } catch (error) {\r\n      console.error('Error declining signature:', error);\r\n      toast.error('Failed to decline signature request');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load signature requests on mount\r\n  useEffect(() => {\r\n    loadSignatureRequests();\r\n  }, [loadSignatureRequests]);\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'pending':\r\n        return 'bg-yellow-500/10 text-yellow-400';\r\n      case 'signed':\r\n        return 'bg-green-500/10 text-green-400';\r\n      case 'expired':\r\n        return 'bg-red-500/10 text-red-400';\r\n      case 'declined':\r\n        return 'bg-gray-500/10 text-gray-400';\r\n      default:\r\n        return 'bg-gray-500/10 text-gray-400';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'pending':\r\n        return <Clock className=\"w-4 h-4 text-yellow-500\" />;\r\n      case 'signed':\r\n        return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\r\n      case 'expired':\r\n        return <AlertTriangle className=\"w-4 h-4 text-red-500\" />;\r\n      case 'declined':\r\n        return <AlertTriangle className=\"w-4 h-4 text-gray-500\" />;\r\n      default:\r\n        return <Clock className=\"w-4 h-4 text-gray-500\" />;\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const isExpired = (expiresAt: number) => {\r\n    return Date.now() > expiresAt;\r\n  };\r\n\r\n  if (loading && signatureRequests.length === 0) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <AlertTriangle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n        <h3 className=\"text-lg font-medium text-white mb-2\">Error Loading Signature Requests</h3>\r\n        <p className=\"text-slate-400 mb-4\">{error}</p>\r\n        <Button onClick={loadSignatureRequests}>\r\n          Try Again\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-white\">Signature Requests</h2>\r\n          <p className=\"text-slate-400\">Documents waiting for your signature</p>\r\n        </div>\r\n        <Button onClick={loadSignatureRequests} variant=\"outline\">\r\n          Refresh\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Signature Requests List */}\r\n      {signatureRequests.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <FileText className=\"w-16 h-16 text-slate-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-white mb-2\">No Signature Requests</h3>\r\n          <p className=\"text-slate-400\">\r\n            You don't have any pending signature requests at the moment.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {signatureRequests.map((request) => (\r\n            <Card key={request.id} className=\"hover:bg-slate-800/50 transition-colors\">\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center\">\r\n                      <FileText className=\"w-5 h-5 text-slate-300\" />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"font-medium text-white\">{request.documentName}</h3>\r\n                      <p className=\"text-sm text-slate-400\">\r\n                        Requested by {request.requestedBy.slice(0, 6)}...{request.requestedBy.slice(-4)}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    {getStatusIcon(request.status)}\r\n                    <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(request.status)}`}>\r\n                      {request.status}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3 mb-4\">\r\n                  <div className=\"flex items-center space-x-2 text-sm\">\r\n                    <MessageSquare className=\"w-4 h-4 text-slate-400\" />\r\n                    <span className=\"text-slate-300\">{request.message}</span>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-4 text-sm text-slate-400\">\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Calendar className=\"w-4 h-4\" />\r\n                      <span>Requested {formatDate(request.createdAt)}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Clock className=\"w-4 h-4\" />\r\n                      <span>\r\n                        Expires {formatDate(request.expiresAt.toString())}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {isExpired(request.expiresAt) && request.status === 'pending' && (\r\n                    <div className=\"flex items-center space-x-2 text-sm text-red-400\">\r\n                      <AlertTriangle className=\"w-4 h-4\" />\r\n                      <span>This signature request has expired</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {request.status === 'pending' && !isExpired(request.expiresAt) && (\r\n                  <div className=\"flex space-x-3\">\r\n                    <Button\r\n                      onClick={() => signDocument(request.documentId)}\r\n                      disabled={loading}\r\n                      className=\"bg-green-600 hover:bg-green-700\"\r\n                    >\r\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\r\n                      Sign Document\r\n                    </Button>\r\n                    <Button\r\n                      onClick={() => declineSignature(request.id)}\r\n                      variant=\"outline\"\r\n                      disabled={loading}\r\n                    >\r\n                      Decline\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        // Open document in new tab or download\r\n                        window.open(`/api/documents/${request.documentId}/download`, '_blank');\r\n                      }}\r\n                    >\r\n                      <ExternalLink className=\"w-4 h-4 mr-2\" />\r\n                      View Document\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n\r\n                {request.status === 'signed' && (\r\n                  <div className=\"flex items-center space-x-2 text-green-400\">\r\n                    <CheckCircle className=\"w-4 h-4\" />\r\n                    <span className=\"text-sm\">You have signed this document</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n  FileText, \r\n  Clock, \r\n  CheckCircle, \r\n  AlertTriangle, \r\n  Calendar,\r\n  MessageSquare,\r\n  ExternalLink\r\n} from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card } from '../ui/Card';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\ninterface SentSignatureRequest {\r\n  id: string;\r\n  documentId: string;\r\n  documentName: string;\r\n  status: 'pending' | 'signed' | 'expired' | 'declined';\r\n  createdAt: string;\r\n  expiresAt: string;\r\n  message: string;\r\n  signers: Array<{\r\n    address: string;\r\n    name: string;\r\n    email: string;\r\n  }>;\r\n  signedBy?: string;\r\n  signedAt?: string;\r\n}\r\n\r\nexport const SentSignatureRequests: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [signatureRequests, setSignatureRequests] = useState<SentSignatureRequest[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // API Base URL\r\n  const getApiBase = () => {\r\n    return process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n  };\r\n\r\n  // Auth Headers\r\n  const getAuthHeaders = () => {\r\n    const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n    if (!user.jwt) {\r\n      throw new Error('No authentication token found. Please login again.');\r\n    }\r\n    return {\r\n      'Authorization': `Bearer ${user.jwt}`,\r\n      'Content-Type': 'application/json',\r\n    };\r\n  };\r\n\r\n  // Load sent signature requests\r\n  const loadSentSignatureRequests = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/signature-requests-sent?user_address=${user?.address || ''}`, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to load sent signature requests: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setSignatureRequests(data.signatureRequests);\r\n    } catch (error) {\r\n      console.error('Error loading sent signature requests:', error);\r\n      setError('Failed to load sent signature requests');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [user?.address]);\r\n\r\n  // Load sent signature requests on mount\r\n  useEffect(() => {\r\n    loadSentSignatureRequests();\r\n  }, [loadSentSignatureRequests]);\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'pending':\r\n        return 'bg-yellow-500/10 text-yellow-400';\r\n      case 'signed':\r\n        return 'bg-green-500/10 text-green-400';\r\n      case 'expired':\r\n        return 'bg-red-500/10 text-red-400';\r\n      case 'declined':\r\n        return 'bg-gray-500/10 text-gray-400';\r\n      default:\r\n        return 'bg-gray-500/10 text-gray-400';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'pending':\r\n        return <Clock className=\"w-4 h-4 text-yellow-500\" />;\r\n      case 'signed':\r\n        return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\r\n      case 'expired':\r\n        return <AlertTriangle className=\"w-4 h-4 text-red-500\" />;\r\n      case 'declined':\r\n        return <AlertTriangle className=\"w-4 h-4 text-gray-500\" />;\r\n      default:\r\n        return <Clock className=\"w-4 h-4 text-gray-500\" />;\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const isExpired = (expiresAt: string) => {\r\n    return Date.now() > new Date(expiresAt).getTime();\r\n  };\r\n\r\n  if (loading && signatureRequests.length === 0) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <AlertTriangle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n        <h3 className=\"text-lg font-medium text-white mb-2\">Error Loading Sent Requests</h3>\r\n        <p className=\"text-slate-400 mb-4\">{error}</p>\r\n        <Button onClick={loadSentSignatureRequests}>\r\n          Try Again\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-white\">Sent Signature Requests</h2>\r\n          <p className=\"text-slate-400\">Signature requests you've sent to others</p>\r\n        </div>\r\n        <Button onClick={loadSentSignatureRequests} variant=\"outline\">\r\n          Refresh\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Signature Requests List */}\r\n      {signatureRequests.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <FileText className=\"w-16 h-16 text-slate-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-white mb-2\">No Sent Requests</h3>\r\n          <p className=\"text-slate-400\">\r\n            You haven't sent any signature requests yet.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {signatureRequests.map((request) => (\r\n            <Card key={request.id} className=\"hover:bg-slate-800/50 transition-colors\">\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center\">\r\n                      <FileText className=\"w-5 h-5 text-slate-300\" />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"font-medium text-white\">{request.documentName}</h3>\r\n                      <p className=\"text-sm text-slate-400\">\r\n                        Sent to {request.signers.length} signer{request.signers.length !== 1 ? 's' : ''}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    {getStatusIcon(request.status)}\r\n                    <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(request.status)}`}>\r\n                      {request.status}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3 mb-4\">\r\n                  <div className=\"flex items-center space-x-2 text-sm\">\r\n                    <MessageSquare className=\"w-4 h-4 text-slate-400\" />\r\n                    <span className=\"text-slate-300\">{request.message}</span>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-4 text-sm text-slate-400\">\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Calendar className=\"w-4 h-4\" />\r\n                      <span>Sent {formatDate(request.createdAt)}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Clock className=\"w-4 h-4\" />\r\n                      <span>\r\n                        Expires {formatDate(request.expiresAt)}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {isExpired(request.expiresAt) && request.status === 'pending' && (\r\n                    <div className=\"flex items-center space-x-2 text-sm text-red-400\">\r\n                      <AlertTriangle className=\"w-4 h-4\" />\r\n                      <span>This signature request has expired</span>\r\n                    </div>\r\n                  )}\r\n\r\n                  {request.status === 'signed' && (\r\n                    <div className=\"flex items-center space-x-2 text-sm text-green-400\">\r\n                      <CheckCircle className=\"w-4 h-4\" />\r\n                      <span>\r\n                        Signed by {request.signedBy?.slice(0, 6)}...{request.signedBy?.slice(-4)} on {formatDate(request.signedAt || '')}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Signers List */}\r\n                <div className=\"mb-4\">\r\n                  <h4 className=\"text-sm font-medium text-white mb-2\">Signers:</h4>\r\n                  <div className=\"space-y-2\">\r\n                    {request.signers.map((signer, index) => (\r\n                      <div key={index} className=\"flex items-center justify-between p-2 bg-slate-800/50 rounded\">\r\n                        <div>\r\n                          <p className=\"text-sm text-white\">{signer.name || 'Unknown'}</p>\r\n                          <p className=\"text-xs text-slate-400\">{signer.address}</p>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {request.signedBy === signer.address ? (\r\n                            <CheckCircle className=\"w-4 h-4 text-green-500\" />\r\n                          ) : (\r\n                            <Clock className=\"w-4 h-4 text-yellow-500\" />\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex space-x-3\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => {\r\n                      // Open document in new tab or download\r\n                      window.open(`/api/documents/${request.documentId}/download`, '_blank');\r\n                    }}\r\n                  >\r\n                    <ExternalLink className=\"w-4 h-4 mr-2\" />\r\n                    View Document\r\n                  </Button>\r\n                  {request.status === 'signed' && (\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      className=\"text-green-400 border-green-400 hover:bg-green-400/10\"\r\n                    >\r\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\r\n                      Download Signed Document\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';\r\nimport { \r\n  CaseFile, \r\n  CaseDashboard, \r\n  CaseTask, \r\n  CaseDocument, \r\n  CaseDeadline,\r\n  CaseTeamMember,\r\n  DocumentAnnotation,\r\n  DiscoveryBundle,\r\n  AuditTrail,\r\n  CaseListResponse,\r\n  TaskListResponse,\r\n  DocumentListResponse,\r\n  CaseFilter,\r\n  DocumentFilter,\r\n  TaskFilter,\r\n  Permission\r\n} from '../types/caseManagement';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface CaseContextType {\r\n  // State\r\n  cases: CaseFile[];\r\n  currentCase: CaseFile | null;\r\n  dashboard: CaseDashboard | null;\r\n  tasks: CaseTask[];\r\n  documents: CaseDocument[];\r\n  deadlines: CaseDeadline[];\r\n  teamMembers: CaseTeamMember[];\r\n  annotations: DocumentAnnotation[];\r\n  bundles: DiscoveryBundle[];\r\n  auditTrail: AuditTrail[];\r\n  loading: boolean;\r\n  error: string | null;\r\n\r\n  // Case Management\r\n  createCase: (caseData: Partial<CaseFile>) => Promise<CaseFile>;\r\n  updateCase: (caseId: string, updates: Partial<CaseFile>) => Promise<CaseFile>;\r\n  deleteCase: (caseId: string) => Promise<void>;\r\n  getCase: (caseId: string) => Promise<CaseFile>;\r\n  getCases: (filters?: CaseFilter) => Promise<CaseListResponse>;\r\n  loadCurrentCase: (caseId: string) => Promise<void>;\r\n\r\n  // Document Management\r\n  addDocumentToCase: (caseId: string, document: Partial<CaseDocument>) => Promise<CaseDocument>;\r\n  updateDocument: (documentId: string, updates: Partial<CaseDocument>) => Promise<CaseDocument>;\r\n  getDocuments: (caseId: string, filters?: DocumentFilter) => Promise<DocumentListResponse>;\r\n  deleteDocument: (documentId: string) => Promise<void>;\r\n\r\n  // Task Management\r\n  createTask: (caseId: string, task: Partial<CaseTask>) => Promise<CaseTask>;\r\n  updateTask: (taskId: string, updates: Partial<CaseTask>) => Promise<CaseTask>;\r\n  completeTask: (taskId: string) => Promise<CaseTask>;\r\n  getTasks: (caseId: string, filters?: TaskFilter) => Promise<TaskListResponse>;\r\n  deleteTask: (taskId: string) => Promise<void>;\r\n\r\n  // Team Management\r\n  addTeamMember: (caseId: string, member: Partial<CaseTeamMember>) => Promise<CaseTeamMember>;\r\n  updateTeamMember: (memberId: string, updates: Partial<CaseTeamMember>) => Promise<CaseTeamMember>;\r\n  removeTeamMember: (memberId: string) => Promise<void>;\r\n  updatePermissions: (memberId: string, permissions: Permission[]) => Promise<void>;\r\n\r\n  // Annotations\r\n  addAnnotation: (documentId: string, annotation: Partial<DocumentAnnotation>) => Promise<DocumentAnnotation>;\r\n  updateAnnotation: (annotationId: string, updates: Partial<DocumentAnnotation>) => Promise<DocumentAnnotation>;\r\n  deleteAnnotation: (annotationId: string) => Promise<void>;\r\n  getAnnotations: (documentId: string) => Promise<DocumentAnnotation[]>;\r\n\r\n  // Discovery Bundles\r\n  createBundle: (caseId: string, bundle: Partial<DiscoveryBundle>) => Promise<DiscoveryBundle>;\r\n  shareBundle: (bundleId: string, recipients: string[]) => Promise<void>;\r\n  verifyBundle: (bundleId: string) => Promise<boolean>;\r\n\r\n  // Audit & Reports\r\n  getAuditTrail: (caseId: string, documentId?: string) => Promise<AuditTrail[]>;\r\n  generateAuditReport: (caseId: string, documentId?: string) => Promise<string>; // Returns PDF URL\r\n  getDashboard: (caseId: string) => Promise<CaseDashboard>;\r\n\r\n  // Utility\r\n  refreshData: () => Promise<void>;\r\n  clearError: () => void;\r\n}\r\n\r\nconst CaseContext = createContext<CaseContextType | undefined>(undefined);\r\n\r\nexport const useCase = () => {\r\n  const context = useContext(CaseContext);\r\n  if (!context) {\r\n    throw new Error('useCase must be used within a CaseProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface CaseProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const CaseProvider: React.FC<CaseProviderProps> = ({ children }) => {\r\n  const [cases, setCases] = useState<CaseFile[]>([]);\r\n  const [currentCase, setCurrentCase] = useState<CaseFile | null>(null);\r\n  const [dashboard, setDashboard] = useState<CaseDashboard | null>(null);\r\n  const [tasks, setTasks] = useState<CaseTask[]>([]);\r\n  const [documents, setDocuments] = useState<CaseDocument[]>([]);\r\n  const [deadlines] = useState<CaseDeadline[]>([]);\r\n  const [teamMembers, setTeamMembers] = useState<CaseTeamMember[]>([]);\r\n  const [annotations, setAnnotations] = useState<DocumentAnnotation[]>([]);\r\n  const [bundles, setBundles] = useState<DiscoveryBundle[]>([]);\r\n  const [auditTrail, setAuditTrail] = useState<AuditTrail[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // API Base URL\r\n  const getApiBase = () => {\r\n    return process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n  };\r\n\r\n  // Auth Headers\r\n  const getAuthHeaders = () => {\r\n    const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n    if (!user.jwt) {\r\n      throw new Error('No authentication token found. Please login again.');\r\n    }\r\n    return {\r\n      'Authorization': `Bearer ${user.jwt}`,\r\n      'Content-Type': 'application/json',\r\n    };\r\n  };\r\n\r\n  // Error Handler\r\n  const handleApiError = (response: Response, operation: string) => {\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('blockvault_user');\r\n      setError('Session expired. Please login again.');\r\n      toast.error('Session expired. Please login again.');\r\n      throw new Error('Session expired');\r\n    }\r\n    throw new Error(`${operation} failed: ${response.status} ${response.statusText}`);\r\n  };\r\n\r\n  // Case Management\r\n  const createCase = async (caseData: Partial<CaseFile>): Promise<CaseFile> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/cases`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(caseData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Create case');\r\n      }\r\n\r\n      const newCase = await response.json();\r\n      setCases(prev => [...prev, newCase]);\r\n      toast.success('Case created successfully');\r\n      return newCase;\r\n    } catch (error) {\r\n      console.error('Error creating case:', error);\r\n      setError('Failed to create case');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateCase = async (caseId: string, updates: Partial<CaseFile>): Promise<CaseFile> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}`, {\r\n        method: 'PUT',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(updates),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Update case');\r\n      }\r\n\r\n      const updatedCase = await response.json();\r\n      setCases(prev => prev.map(c => c.id === caseId ? updatedCase : c));\r\n      if (currentCase?.id === caseId) {\r\n        setCurrentCase(updatedCase);\r\n      }\r\n      toast.success('Case updated successfully');\r\n      return updatedCase;\r\n    } catch (error) {\r\n      console.error('Error updating case:', error);\r\n      setError('Failed to update case');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteCase = async (caseId: string): Promise<void> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}`, {\r\n        method: 'DELETE',\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Delete case');\r\n      }\r\n\r\n      setCases(prev => prev.filter(c => c.id !== caseId));\r\n      if (currentCase?.id === caseId) {\r\n        setCurrentCase(null);\r\n      }\r\n      toast.success('Case deleted successfully');\r\n    } catch (error) {\r\n      console.error('Error deleting case:', error);\r\n      setError('Failed to delete case');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getCase = async (caseId: string): Promise<CaseFile> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}`, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Get case');\r\n      }\r\n\r\n      const caseData = await response.json();\r\n      return caseData;\r\n    } catch (error) {\r\n      console.error('Error getting case:', error);\r\n      setError('Failed to get case');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getCases = useCallback(async (filters?: CaseFilter): Promise<CaseListResponse> => {\r\n    setLoading(true);\r\n    try {\r\n      const queryParams = new URLSearchParams();\r\n      if (filters) {\r\n        Object.entries(filters).forEach(([key, value]) => {\r\n          if (value !== undefined) {\r\n            queryParams.append(key, Array.isArray(value) ? value.join(',') : value.toString());\r\n          }\r\n        });\r\n      }\r\n\r\n      const response = await fetch(`${getApiBase()}/cases?${queryParams}`, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Get cases');\r\n      }\r\n\r\n      const data = await response.json();\r\n      setCases(data.cases);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error getting cases:', error);\r\n      setError('Failed to get cases');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const loadCurrentCase = async (caseId: string): Promise<void> => {\r\n    try {\r\n      const caseData = await getCase(caseId);\r\n      setCurrentCase(caseData);\r\n      \r\n      // Load related data\r\n      await Promise.all([\r\n        getDashboard(caseId),\r\n        getTasks(caseId),\r\n        getDocuments(caseId),\r\n        getAuditTrail(caseId)\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error setting current case:', error);\r\n      setError('Failed to load case');\r\n    }\r\n  };\r\n\r\n  // Document Management\r\n  const addDocumentToCase = async (caseId: string, document: Partial<CaseDocument>): Promise<CaseDocument> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}/documents`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(document),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Add document');\r\n      }\r\n\r\n      const newDocument = await response.json();\r\n      setDocuments(prev => [...prev, newDocument]);\r\n      toast.success('Document added to case');\r\n      return newDocument;\r\n    } catch (error) {\r\n      console.error('Error adding document:', error);\r\n      setError('Failed to add document');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateDocument = async (documentId: string, updates: Partial<CaseDocument>): Promise<CaseDocument> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/documents/${documentId}`, {\r\n        method: 'PUT',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(updates),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Update document');\r\n      }\r\n\r\n      const updatedDocument = await response.json();\r\n      setDocuments(prev => prev.map(d => d.id === documentId ? updatedDocument : d));\r\n      toast.success('Document updated successfully');\r\n      return updatedDocument;\r\n    } catch (error) {\r\n      console.error('Error updating document:', error);\r\n      setError('Failed to update document');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getDocuments = async (caseId: string, filters?: DocumentFilter): Promise<DocumentListResponse> => {\r\n    setLoading(true);\r\n    try {\r\n      const queryParams = new URLSearchParams();\r\n      if (filters) {\r\n        Object.entries(filters).forEach(([key, value]) => {\r\n          if (value !== undefined) {\r\n            queryParams.append(key, Array.isArray(value) ? value.join(',') : value.toString());\r\n          }\r\n        });\r\n      }\r\n\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}/documents?${queryParams}`, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Get documents');\r\n      }\r\n\r\n      const data = await response.json();\r\n      setDocuments(data.documents);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error getting documents:', error);\r\n      setError('Failed to get documents');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteDocument = async (documentId: string): Promise<void> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/documents/${documentId}`, {\r\n        method: 'DELETE',\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Delete document');\r\n      }\r\n\r\n      setDocuments(prev => prev.filter(d => d.id !== documentId));\r\n      toast.success('Document deleted successfully');\r\n    } catch (error) {\r\n      console.error('Error deleting document:', error);\r\n      setError('Failed to delete document');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Task Management\r\n  const createTask = async (caseId: string, task: Partial<CaseTask>): Promise<CaseTask> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}/tasks`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(task),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Create task');\r\n      }\r\n\r\n      const newTask = await response.json();\r\n      setTasks(prev => [...prev, newTask]);\r\n      toast.success('Task created successfully');\r\n      return newTask;\r\n    } catch (error) {\r\n      console.error('Error creating task:', error);\r\n      setError('Failed to create task');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateTask = async (taskId: string, updates: Partial<CaseTask>): Promise<CaseTask> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/tasks/${taskId}`, {\r\n        method: 'PUT',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(updates),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Update task');\r\n      }\r\n\r\n      const updatedTask = await response.json();\r\n      setTasks(prev => prev.map(t => t.id === taskId ? updatedTask : t));\r\n      toast.success('Task updated successfully');\r\n      return updatedTask;\r\n    } catch (error) {\r\n      console.error('Error updating task:', error);\r\n      setError('Failed to update task');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const completeTask = async (taskId: string): Promise<CaseTask> => {\r\n    return updateTask(taskId, { \r\n      status: 'completed', \r\n      completedAt: new Date() \r\n    });\r\n  };\r\n\r\n  const getTasks = async (caseId: string, filters?: TaskFilter): Promise<TaskListResponse> => {\r\n    setLoading(true);\r\n    try {\r\n      const queryParams = new URLSearchParams();\r\n      if (filters) {\r\n        Object.entries(filters).forEach(([key, value]) => {\r\n          if (value !== undefined) {\r\n            queryParams.append(key, Array.isArray(value) ? value.join(',') : value.toString());\r\n          }\r\n        });\r\n      }\r\n\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}/tasks?${queryParams}`, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Get tasks');\r\n      }\r\n\r\n      const data = await response.json();\r\n      setTasks(data.tasks);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error getting tasks:', error);\r\n      setError('Failed to get tasks');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteTask = async (taskId: string): Promise<void> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/tasks/${taskId}`, {\r\n        method: 'DELETE',\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Delete task');\r\n      }\r\n\r\n      setTasks(prev => prev.filter(t => t.id !== taskId));\r\n      toast.success('Task deleted successfully');\r\n    } catch (error) {\r\n      console.error('Error deleting task:', error);\r\n      setError('Failed to delete task');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Team Management\r\n  const addTeamMember = async (caseId: string, member: Partial<CaseTeamMember>): Promise<CaseTeamMember> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}/team`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(member),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Add team member');\r\n      }\r\n\r\n      const newMember = await response.json();\r\n      setTeamMembers(prev => [...prev, newMember]);\r\n      toast.success('Team member added successfully');\r\n      return newMember;\r\n    } catch (error) {\r\n      console.error('Error adding team member:', error);\r\n      setError('Failed to add team member');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateTeamMember = async (memberId: string, updates: Partial<CaseTeamMember>): Promise<CaseTeamMember> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/team/${memberId}`, {\r\n        method: 'PUT',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(updates),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Update team member');\r\n      }\r\n\r\n      const updatedMember = await response.json();\r\n      setTeamMembers(prev => prev.map(m => m.walletAddress === memberId ? updatedMember : m));\r\n      toast.success('Team member updated successfully');\r\n      return updatedMember;\r\n    } catch (error) {\r\n      console.error('Error updating team member:', error);\r\n      setError('Failed to update team member');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeTeamMember = async (memberId: string): Promise<void> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/team/${memberId}`, {\r\n        method: 'DELETE',\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Remove team member');\r\n      }\r\n\r\n      setTeamMembers(prev => prev.filter(m => m.walletAddress !== memberId));\r\n      toast.success('Team member removed successfully');\r\n    } catch (error) {\r\n      console.error('Error removing team member:', error);\r\n      setError('Failed to remove team member');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updatePermissions = async (memberId: string, permissions: Permission[]): Promise<void> => {\r\n    await updateTeamMember(memberId, { permissions });\r\n  };\r\n\r\n  // Annotations\r\n  const addAnnotation = async (documentId: string, annotation: Partial<DocumentAnnotation>): Promise<DocumentAnnotation> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/documents/${documentId}/annotations`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(annotation),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Add annotation');\r\n      }\r\n\r\n      const newAnnotation = await response.json();\r\n      setAnnotations(prev => [...prev, newAnnotation]);\r\n      toast.success('Annotation added successfully');\r\n      return newAnnotation;\r\n    } catch (error) {\r\n      console.error('Error adding annotation:', error);\r\n      setError('Failed to add annotation');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateAnnotation = async (annotationId: string, updates: Partial<DocumentAnnotation>): Promise<DocumentAnnotation> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/annotations/${annotationId}`, {\r\n        method: 'PUT',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(updates),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Update annotation');\r\n      }\r\n\r\n      const updatedAnnotation = await response.json();\r\n      setAnnotations(prev => prev.map(a => a.id === annotationId ? updatedAnnotation : a));\r\n      toast.success('Annotation updated successfully');\r\n      return updatedAnnotation;\r\n    } catch (error) {\r\n      console.error('Error updating annotation:', error);\r\n      setError('Failed to update annotation');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteAnnotation = async (annotationId: string): Promise<void> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/annotations/${annotationId}`, {\r\n        method: 'DELETE',\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Delete annotation');\r\n      }\r\n\r\n      setAnnotations(prev => prev.filter(a => a.id !== annotationId));\r\n      toast.success('Annotation deleted successfully');\r\n    } catch (error) {\r\n      console.error('Error deleting annotation:', error);\r\n      setError('Failed to delete annotation');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getAnnotations = async (documentId: string): Promise<DocumentAnnotation[]> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/documents/${documentId}/annotations`, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Get annotations');\r\n      }\r\n\r\n      const annotations = await response.json();\r\n      setAnnotations(annotations);\r\n      return annotations;\r\n    } catch (error) {\r\n      console.error('Error getting annotations:', error);\r\n      setError('Failed to get annotations');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Discovery Bundles\r\n  const createBundle = async (caseId: string, bundle: Partial<DiscoveryBundle>): Promise<DiscoveryBundle> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}/bundles`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(bundle),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Create bundle');\r\n      }\r\n\r\n      const newBundle = await response.json();\r\n      setBundles(prev => [...prev, newBundle]);\r\n      toast.success('Discovery bundle created successfully');\r\n      return newBundle;\r\n    } catch (error) {\r\n      console.error('Error creating bundle:', error);\r\n      setError('Failed to create bundle');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const shareBundle = async (bundleId: string, recipients: string[]): Promise<void> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/bundles/${bundleId}/share`, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify({ recipients }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Share bundle');\r\n      }\r\n\r\n      toast.success('Bundle shared successfully');\r\n    } catch (error) {\r\n      console.error('Error sharing bundle:', error);\r\n      setError('Failed to share bundle');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const verifyBundle = async (bundleId: string): Promise<boolean> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/bundles/${bundleId}/verify`, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Verify bundle');\r\n      }\r\n\r\n      const result = await response.json();\r\n      return result.verified;\r\n    } catch (error) {\r\n      console.error('Error verifying bundle:', error);\r\n      setError('Failed to verify bundle');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Audit & Reports\r\n  const getAuditTrail = async (caseId: string, documentId?: string): Promise<AuditTrail[]> => {\r\n    setLoading(true);\r\n    try {\r\n      const url = documentId \r\n        ? `${getApiBase()}/cases/${caseId}/documents/${documentId}/audit`\r\n        : `${getApiBase()}/cases/${caseId}/audit`;\r\n      \r\n      const response = await fetch(url, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Get audit trail');\r\n      }\r\n\r\n      const auditTrail = await response.json();\r\n      setAuditTrail(auditTrail);\r\n      return auditTrail;\r\n    } catch (error) {\r\n      console.error('Error getting audit trail:', error);\r\n      setError('Failed to get audit trail');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateAuditReport = async (caseId: string, documentId?: string): Promise<string> => {\r\n    setLoading(true);\r\n    try {\r\n      const url = documentId \r\n        ? `${getApiBase()}/cases/${caseId}/documents/${documentId}/audit/report`\r\n        : `${getApiBase()}/cases/${caseId}/audit/report`;\r\n      \r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Generate audit report');\r\n      }\r\n\r\n      const result = await response.json();\r\n      toast.success('Audit report generated successfully');\r\n      return result.reportUrl;\r\n    } catch (error) {\r\n      console.error('Error generating audit report:', error);\r\n      setError('Failed to generate audit report');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getDashboard = async (caseId: string): Promise<CaseDashboard> => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${getApiBase()}/cases/${caseId}/dashboard`, {\r\n        headers: getAuthHeaders(),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        handleApiError(response, 'Get dashboard');\r\n      }\r\n\r\n      const dashboard = await response.json();\r\n      setDashboard(dashboard);\r\n      return dashboard;\r\n    } catch (error) {\r\n      console.error('Error getting dashboard:', error);\r\n      setError('Failed to get dashboard');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Utility\r\n  const refreshData = async (): Promise<void> => {\r\n    if (currentCase) {\r\n      await loadCurrentCase(currentCase.id);\r\n    }\r\n  };\r\n\r\n  const clearError = (): void => {\r\n    setError(null);\r\n  };\r\n\r\n  // Load initial data\r\n  useEffect(() => {\r\n    getCases().catch(console.error);\r\n  }, [getCases]);\r\n\r\n  const value: CaseContextType = {\r\n    // State\r\n    cases,\r\n    currentCase,\r\n    dashboard,\r\n    tasks,\r\n    documents,\r\n    deadlines,\r\n    teamMembers,\r\n    annotations,\r\n    bundles,\r\n    auditTrail,\r\n    loading,\r\n    error,\r\n\r\n    // Case Management\r\n    createCase,\r\n    updateCase,\r\n    deleteCase,\r\n    getCase,\r\n    getCases,\r\n    loadCurrentCase,\r\n\r\n    // Document Management\r\n    addDocumentToCase,\r\n    updateDocument,\r\n    getDocuments,\r\n    deleteDocument,\r\n\r\n    // Task Management\r\n    createTask,\r\n    updateTask,\r\n    completeTask,\r\n    getTasks,\r\n    deleteTask,\r\n\r\n    // Team Management\r\n    addTeamMember,\r\n    updateTeamMember,\r\n    removeTeamMember,\r\n    updatePermissions,\r\n\r\n    // Annotations\r\n    addAnnotation,\r\n    updateAnnotation,\r\n    deleteAnnotation,\r\n    getAnnotations,\r\n\r\n    // Discovery Bundles\r\n    createBundle,\r\n    shareBundle,\r\n    verifyBundle,\r\n\r\n    // Audit & Reports\r\n    getAuditTrail,\r\n    generateAuditReport,\r\n    getDashboard,\r\n\r\n    // Utility\r\n    refreshData,\r\n    clearError,\r\n  };\r\n\r\n  return (\r\n    <CaseContext.Provider value={value}>\r\n      {children}\r\n    </CaseContext.Provider>\r\n  );\r\n};\r\n","/**\r\n * Role-Based Access Control (RBAC) Types\r\n * ======================================\r\n * \r\n * Defines the role-based access control system for BlockVault Legal\r\n * with different permission levels for different user roles.\r\n */\r\n\r\nexport type UserRole = 'lead-attorney' | 'associate' | 'paralegal' | 'client' | 'external-counsel';\r\n\r\nexport interface CaseMember {\r\n  walletAddress: string;\r\n  role: UserRole;\r\n  name: string;\r\n  email?: string;\r\n  addedAt: Date;\r\n  addedBy: string; // Wallet address of who added this member\r\n}\r\n\r\nexport interface CasePermissions {\r\n  // Case Management\r\n  canViewCase: boolean;\r\n  canCreateCase: boolean;\r\n  canEditCaseDetails: boolean;\r\n  canAddRemoveMembers: boolean;\r\n  \r\n  // Document Management\r\n  canNotarizeDocuments: boolean;\r\n  canViewAllDocuments: boolean;\r\n  canCreateRedactions: boolean;\r\n  \r\n  // Secure Sharing\r\n  canGrantRevokeAccess: boolean;\r\n  canViewSharedByMe: boolean;\r\n  canViewReceivedDocs: boolean;\r\n  \r\n  // Contract Execution\r\n  canRequestSignatures: boolean;\r\n  canFundEscrow: boolean;\r\n  canSignDocuments: boolean;\r\n  \r\n  // AI Analysis\r\n  canRunZKMLAnalysis: boolean;\r\n}\r\n\r\nexport interface RolePermissionMatrix {\r\n  [key: string]: CasePermissions;\r\n}\r\n\r\nexport interface UserContext {\r\n  walletAddress: string;\r\n  currentRole?: UserRole;\r\n  currentCaseId?: string;\r\n  permissions?: CasePermissions;\r\n}\r\n\r\n// Permission matrix for each role\r\nexport const ROLE_PERMISSIONS: RolePermissionMatrix = {\r\n  'lead-attorney': {\r\n    // Case Management\r\n    canViewCase: true,\r\n    canCreateCase: true,\r\n    canEditCaseDetails: true,\r\n    canAddRemoveMembers: true,\r\n    \r\n    // Document Management\r\n    canNotarizeDocuments: true,\r\n    canViewAllDocuments: true,\r\n    canCreateRedactions: true,\r\n    \r\n    // Secure Sharing\r\n    canGrantRevokeAccess: true,\r\n    canViewSharedByMe: true,\r\n    canViewReceivedDocs: true,\r\n    \r\n    // Contract Execution\r\n    canRequestSignatures: true,\r\n    canFundEscrow: true,\r\n    canSignDocuments: true,\r\n    \r\n    // AI Analysis\r\n    canRunZKMLAnalysis: true,\r\n  },\r\n  \r\n  associate: {\r\n    // Case Management\r\n    canViewCase: true,\r\n    canCreateCase: true,\r\n    canEditCaseDetails: false,\r\n    canAddRemoveMembers: false,\r\n    \r\n    // Document Management\r\n    canNotarizeDocuments: true,\r\n    canViewAllDocuments: true,\r\n    canCreateRedactions: true,\r\n    \r\n    // Secure Sharing\r\n    canGrantRevokeAccess: true,\r\n    canViewSharedByMe: true,\r\n    canViewReceivedDocs: true,\r\n    \r\n    // Contract Execution\r\n    canRequestSignatures: true,\r\n    canFundEscrow: false,\r\n    canSignDocuments: true,\r\n    \r\n    // AI Analysis\r\n    canRunZKMLAnalysis: true,\r\n  },\r\n  \r\n  paralegal: {\r\n    // Case Management\r\n    canViewCase: true,\r\n    canCreateCase: false,\r\n    canEditCaseDetails: false,\r\n    canAddRemoveMembers: false,\r\n    \r\n    // Document Management\r\n    canNotarizeDocuments: true,\r\n    canViewAllDocuments: true,\r\n    canCreateRedactions: false,\r\n    \r\n    // Secure Sharing\r\n    canGrantRevokeAccess: false,\r\n    canViewSharedByMe: false,\r\n    canViewReceivedDocs: true,\r\n    \r\n    // Contract Execution\r\n    canRequestSignatures: false,\r\n    canFundEscrow: false,\r\n    canSignDocuments: true,\r\n    \r\n    // AI Analysis\r\n    canRunZKMLAnalysis: false,\r\n  },\r\n  \r\n  client: {\r\n    // Case Management\r\n    canViewCase: false,\r\n    canCreateCase: false,\r\n    canEditCaseDetails: false,\r\n    canAddRemoveMembers: false,\r\n    \r\n    // Document Management\r\n    canNotarizeDocuments: false,\r\n    canViewAllDocuments: false,\r\n    canCreateRedactions: false,\r\n    \r\n    // Secure Sharing\r\n    canGrantRevokeAccess: false,\r\n    canViewSharedByMe: false,\r\n    canViewReceivedDocs: true, // Only documents shared with them\r\n    \r\n    // Contract Execution\r\n    canRequestSignatures: false,\r\n    canFundEscrow: false,\r\n    canSignDocuments: true, // Can sign documents they're required to sign\r\n    \r\n    // AI Analysis\r\n    canRunZKMLAnalysis: false,\r\n  },\r\n  \r\n  'external-counsel': {\r\n    // Case Management\r\n    canViewCase: false,\r\n    canCreateCase: false,\r\n    canEditCaseDetails: false,\r\n    canAddRemoveMembers: false,\r\n    \r\n    // Document Management\r\n    canNotarizeDocuments: false,\r\n    canViewAllDocuments: false,\r\n    canCreateRedactions: false,\r\n    \r\n    // Secure Sharing\r\n    canGrantRevokeAccess: false,\r\n    canViewSharedByMe: false,\r\n    canViewReceivedDocs: true, // Only documents shared with them\r\n    \r\n    // Contract Execution\r\n    canRequestSignatures: false,\r\n    canFundEscrow: false,\r\n    canSignDocuments: true, // Can sign documents they're required to sign\r\n    \r\n    // AI Analysis\r\n    canRunZKMLAnalysis: false,\r\n  },\r\n};\r\n\r\n// Helper function to get permissions for a role\r\nexport function getPermissionsForRole(role: UserRole): CasePermissions {\r\n  return ROLE_PERMISSIONS[role] || ROLE_PERMISSIONS.client;\r\n}\r\n\r\n// Helper function to check if user has specific permission\r\nexport function hasPermission(userRole: UserRole, permission: keyof CasePermissions): boolean {\r\n  const permissions = getPermissionsForRole(userRole);\r\n  return permissions[permission];\r\n}\r\n\r\n// Helper function to get role display name\r\nexport function getRoleDisplayName(role: UserRole): string {\r\n  const displayNames: Record<UserRole, string> = {\r\n    'lead-attorney': 'Lead Attorney',\r\n    associate: 'Associate Attorney',\r\n    paralegal: 'Paralegal',\r\n    client: 'Client',\r\n    'external-counsel': 'External Counsel',\r\n  };\r\n  return displayNames[role];\r\n}\r\n\r\n// Helper function to get role description\r\nexport function getRoleDescription(role: UserRole): string {\r\n  const descriptions: Record<UserRole, string> = {\r\n    'lead-attorney': 'Full access to case management, document operations, and team coordination',\r\n    associate: 'Broad access to document operations and sharing, limited administrative access',\r\n    paralegal: 'Document management and organization, limited operational access',\r\n    client: 'View-only access to documents shared with them, can sign required documents',\r\n    'external-counsel': 'View-only access to documents shared with them, can sign required documents',\r\n  };\r\n  return descriptions[role];\r\n}\r\n","/**\r\n * User Profile Types\r\n * ==================\r\n * \r\n * Defines the user profile structure for BlockVault Legal\r\n * including role, firm information, and onboarding status.\r\n */\r\n\r\nimport { UserRole } from './rbac';\r\n\r\nexport interface UserProfile {\r\n  walletAddress: string;\r\n  role: UserRole;\r\n  firmName?: string;\r\n  firmId?: string;\r\n  onboardedAt: string;\r\n  isOnboarded: boolean;\r\n  lastLoginAt?: string;\r\n  preferences?: {\r\n    theme?: 'light' | 'dark';\r\n    notifications?: boolean;\r\n    autoSave?: boolean;\r\n  };\r\n}\r\n\r\nexport interface FirmInfo {\r\n  id: string;\r\n  name: string;\r\n  address: string;\r\n  members: FirmMember[];\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface FirmMember {\r\n  walletAddress: string;\r\n  role: UserRole;\r\n  name: string;\r\n  email?: string;\r\n  addedAt: string;\r\n  addedBy: string;\r\n  isActive: boolean;\r\n}\r\n\r\n// Helper functions for user profile management\r\nexport const createUserProfile = (\r\n  walletAddress: string,\r\n  role: UserRole,\r\n  firmName?: string\r\n): UserProfile => {\r\n  return {\r\n    walletAddress,\r\n    role,\r\n    firmName,\r\n    onboardedAt: new Date().toISOString(),\r\n    isOnboarded: true,\r\n    lastLoginAt: new Date().toISOString(),\r\n    preferences: {\r\n      theme: 'dark',\r\n      notifications: true,\r\n      autoSave: true,\r\n    },\r\n  };\r\n};\r\n\r\nexport const saveUserProfile = (profile: UserProfile): void => {\r\n  localStorage.setItem('user_profile', JSON.stringify(profile));\r\n};\r\n\r\nexport const loadUserProfile = (): UserProfile | null => {\r\n  try {\r\n    const profileData = localStorage.getItem('user_profile');\r\n    if (!profileData) return null;\r\n    \r\n    const profile = JSON.parse(profileData) as UserProfile;\r\n    \r\n    // Update last login time\r\n    profile.lastLoginAt = new Date().toISOString();\r\n    saveUserProfile(profile);\r\n    \r\n    return profile;\r\n  } catch (error) {\r\n    console.error('Error loading user profile:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const clearUserProfile = (): void => {\r\n  localStorage.removeItem('user_profile');\r\n};\r\n\r\nexport const isUserOnboarded = (): boolean => {\r\n  const profile = loadUserProfile();\r\n  return profile?.isOnboarded || false;\r\n};\r\n\r\nexport const getUserRole = (): UserRole | null => {\r\n  const profile = loadUserProfile();\r\n  return profile?.role || null;\r\n};\r\n\r\nexport const isLegalProfessional = (role?: UserRole): boolean => {\r\n  const userRole = role || getUserRole();\r\n  return userRole === 'lead-attorney' || userRole === 'associate' || userRole === 'paralegal';\r\n};\r\n\r\nexport const canCreateCases = (role?: UserRole): boolean => {\r\n  const userRole = role || getUserRole();\r\n  return userRole === 'lead-attorney' || userRole === 'associate';\r\n};\r\n\r\nexport const canManageTeam = (role?: UserRole): boolean => {\r\n  const userRole = role || getUserRole();\r\n  return userRole === 'lead-attorney';\r\n};\r\n","import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { UserRole, CaseMember, CasePermissions, getPermissionsForRole, UserContext } from '../types/rbac';\r\nimport { UserProfile, loadUserProfile, saveUserProfile, createUserProfile } from '../types/userProfile';\r\n\r\ninterface RBACContextType {\r\n  currentUser: UserContext | null;\r\n  currentCaseMembers: CaseMember[];\r\n  currentCaseId: string | null;\r\n  userPermissions: CasePermissions | null;\r\n  userProfile: UserProfile | null;\r\n  isOnboarded: boolean;\r\n  \r\n  // Actions\r\n  setCurrentUser: (user: UserContext) => void;\r\n  setCurrentCase: (caseId: string, members: CaseMember[]) => void;\r\n  updateUserRole: (walletAddress: string, newRole: UserRole) => void;\r\n  addCaseMember: (member: CaseMember) => void;\r\n  removeCaseMember: (walletAddress: string) => void;\r\n  \r\n  // User profile management\r\n  loadUserProfile: () => void;\r\n  updateUserProfile: (profile: Partial<UserProfile>) => void;\r\n  completeOnboarding: (role: UserRole, firmName?: string) => void;\r\n  \r\n  // Permission checks\r\n  hasPermission: (permission: keyof CasePermissions) => boolean;\r\n  canPerformAction: (action: string) => boolean;\r\n  \r\n  // Role management\r\n  getUserRole: (walletAddress: string) => UserRole | null;\r\n  isCaseOwner: () => boolean;\r\n  isTeamMember: () => boolean;\r\n}\r\n\r\nconst RBACContext = createContext<RBACContextType | undefined>(undefined);\r\n\r\ninterface RBACProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const RBACProvider: React.FC<RBACProviderProps> = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState<UserContext | null>(null);\r\n  const [currentCaseMembers, setCurrentCaseMembers] = useState<CaseMember[]>([]);\r\n  const [currentCaseId, setCurrentCaseId] = useState<string | null>(null);\r\n  const [userPermissions, setUserPermissions] = useState<CasePermissions | null>(null);\r\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null);\r\n  const [isOnboarded, setIsOnboarded] = useState<boolean>(false);\r\n\r\n  // Update permissions when user role or case changes\r\n  useEffect(() => {\r\n    if (currentUser?.currentRole) {\r\n      const permissions = getPermissionsForRole(currentUser.currentRole);\r\n      setUserPermissions(permissions);\r\n    } else {\r\n      setUserPermissions(null);\r\n    }\r\n  }, [currentUser?.currentRole]);\r\n\r\n  // Load user context and profile from localStorage on mount\r\n  useEffect(() => {\r\n    const savedUser = localStorage.getItem('rbac_user_context');\r\n    if (savedUser) {\r\n      try {\r\n        const userContext = JSON.parse(savedUser);\r\n        setCurrentUser(userContext);\r\n      } catch (error) {\r\n        console.error('Error loading user context:', error);\r\n      }\r\n    }\r\n\r\n    // Load user profile\r\n    loadUserProfileFromStorage();\r\n  }, []);\r\n\r\n  // Save user context to localStorage when it changes\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      localStorage.setItem('rbac_user_context', JSON.stringify(currentUser));\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const setCurrentUserContext = (user: UserContext) => {\r\n    setCurrentUser(user);\r\n  };\r\n\r\n  const setCurrentCase = (caseId: string, members: CaseMember[]) => {\r\n    setCurrentCaseId(caseId);\r\n    setCurrentCaseMembers(members);\r\n    \r\n    // Update current user's role for this case\r\n    if (currentUser) {\r\n      const userMember = members.find(member => member.walletAddress === currentUser.walletAddress);\r\n      if (userMember) {\r\n        setCurrentUser({\r\n          ...currentUser,\r\n          currentRole: userMember.role,\r\n          currentCaseId: caseId,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const updateUserRole = (walletAddress: string, newRole: UserRole) => {\r\n    setCurrentCaseMembers(prev => \r\n      prev.map(member => \r\n        member.walletAddress === walletAddress \r\n          ? { ...member, role: newRole }\r\n          : member\r\n      )\r\n    );\r\n    \r\n    // Update current user's role if it's their address\r\n    if (currentUser?.walletAddress === walletAddress) {\r\n      setCurrentUser({\r\n        ...currentUser,\r\n        currentRole: newRole,\r\n      });\r\n    }\r\n  };\r\n\r\n  const addCaseMember = (member: CaseMember) => {\r\n    setCurrentCaseMembers(prev => [...prev, member]);\r\n  };\r\n\r\n  const removeCaseMember = (walletAddress: string) => {\r\n    setCurrentCaseMembers(prev => \r\n      prev.filter(member => member.walletAddress !== walletAddress)\r\n    );\r\n  };\r\n\r\n  const hasPermission = (permission: keyof CasePermissions): boolean => {\r\n    if (!userPermissions) return false;\r\n    return userPermissions[permission];\r\n  };\r\n\r\n  const canPerformAction = (action: string): boolean => {\r\n    if (!userPermissions) return false;\r\n    \r\n    // Map actions to permissions\r\n    const actionPermissionMap: Record<string, keyof CasePermissions> = {\r\n      'view_case': 'canViewCase',\r\n      'canCreateCase': 'canCreateCase',\r\n      'edit_case': 'canEditCaseDetails',\r\n      'manage_members': 'canAddRemoveMembers',\r\n      'canNotarizeDocuments': 'canNotarizeDocuments',\r\n      'view_documents': 'canViewAllDocuments',\r\n      'canCreateRedactions': 'canCreateRedactions',\r\n      'grant_access': 'canGrantRevokeAccess',\r\n      'view_shared': 'canViewSharedByMe',\r\n      'view_received': 'canViewReceivedDocs',\r\n      'canRequestSignatures': 'canRequestSignatures',\r\n      'fund_escrow': 'canFundEscrow',\r\n      'canSignDocuments': 'canSignDocuments',\r\n      'canRunZKMLAnalysis': 'canRunZKMLAnalysis',\r\n    };\r\n    \r\n    const permission = actionPermissionMap[action];\r\n    return permission ? hasPermission(permission) : false;\r\n  };\r\n\r\n  const getUserRole = (walletAddress: string): UserRole | null => {\r\n    const member = currentCaseMembers.find(member => member.walletAddress === walletAddress);\r\n    return member ? member.role : null;\r\n  };\r\n\r\n  const isCaseOwner = (): boolean => {\r\n    return currentUser?.currentRole === 'lead-attorney';\r\n  };\r\n\r\n  const isTeamMember = (): boolean => {\r\n    return currentCaseMembers.some(member => member.walletAddress === currentUser?.walletAddress);\r\n  };\r\n\r\n  // User profile management functions\r\n  const loadUserProfileFromStorage = () => {\r\n    const profile = loadUserProfile();\r\n    setUserProfile(profile);\r\n    setIsOnboarded(profile?.isOnboarded || false);\r\n    \r\n    // Update current user context if profile exists\r\n    if (profile && profile.role) {\r\n      setCurrentUser(prev => prev ? {\r\n        ...prev,\r\n        currentRole: profile.role,\r\n        walletAddress: profile.walletAddress\r\n      } : {\r\n        walletAddress: profile.walletAddress,\r\n        currentRole: profile.role,\r\n        currentCaseId: undefined\r\n      });\r\n    }\r\n  };\r\n\r\n  const updateUserProfile = (profileUpdate: Partial<UserProfile>) => {\r\n    if (!userProfile) return;\r\n    \r\n    const updatedProfile = { ...userProfile, ...profileUpdate };\r\n    setUserProfile(updatedProfile);\r\n    saveUserProfile(updatedProfile);\r\n  };\r\n\r\n  const completeOnboarding = (role: UserRole, firmName?: string) => {\r\n    if (!currentUser?.walletAddress) return;\r\n    \r\n    const newProfile = createUserProfile(currentUser.walletAddress, role, firmName);\r\n    setUserProfile(newProfile);\r\n    setIsOnboarded(true);\r\n    saveUserProfile(newProfile);\r\n    \r\n    // Update current user context\r\n    setCurrentUser(prev => prev ? {\r\n      ...prev,\r\n      currentRole: role\r\n    } : {\r\n      walletAddress: currentUser.walletAddress,\r\n      currentRole: role,\r\n      currentCaseId: undefined\r\n    });\r\n  };\r\n\r\n  const value: RBACContextType = {\r\n    currentUser,\r\n    currentCaseMembers,\r\n    currentCaseId,\r\n    userPermissions,\r\n    userProfile,\r\n    isOnboarded,\r\n    setCurrentUser: setCurrentUserContext,\r\n    setCurrentCase,\r\n    updateUserRole,\r\n    addCaseMember,\r\n    removeCaseMember,\r\n    loadUserProfile: loadUserProfileFromStorage,\r\n    updateUserProfile,\r\n    completeOnboarding,\r\n    hasPermission,\r\n    canPerformAction,\r\n    getUserRole,\r\n    isCaseOwner,\r\n    isTeamMember,\r\n  };\r\n\r\n  return (\r\n    <RBACContext.Provider value={value}>\r\n      {children}\r\n    </RBACContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useRBAC = (): RBACContextType => {\r\n  const context = useContext(RBACContext);\r\n  if (context === undefined) {\r\n    throw new Error('useRBAC must be used within a RBACProvider');\r\n  }\r\n  return context;\r\n};\r\n","import React, { useState } from 'react';\r\nimport { X, Users, AlertCircle, Plus, Trash2 } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card } from '../ui/Card';\r\nimport { Input } from '../ui/Input';\r\nimport { useCase } from '../../contexts/CaseContext';\r\nimport { useRBAC } from '../../contexts/RBACContext';\r\nimport { CaseFile, PracticeArea, CasePriority, Permission } from '../../types/caseManagement';\r\nimport { UserRole, CaseMember, getRoleDisplayName, getRoleDescription } from '../../types/rbac';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface CreateCaseModalProps {\r\n  onClose: () => void;\r\n  onSuccess: (caseId: string) => void;\r\n}\r\n\r\nexport const CreateCaseModal: React.FC<CreateCaseModalProps> = ({ onClose, onSuccess }) => {\r\n  const { createCase } = useCase();\r\n  const { currentUser } = useRBAC();\r\n  const [loading, setLoading] = useState(false);\r\n  const [step, setStep] = useState<'basic' | 'team' | 'review'>('basic');\r\n  \r\n  const [formData, setFormData] = useState<Partial<CaseFile>>({\r\n    title: '',\r\n    description: '',\r\n    clientName: '',\r\n    matterNumber: '',\r\n    practiceArea: 'corporate',\r\n    priority: 'medium',\r\n    status: 'active',\r\n    team: [],\r\n    documents: [],\r\n    tasks: [],\r\n    deadlines: [],\r\n    annotations: [],\r\n    accessControl: {\r\n      caseId: '',\r\n      permissions: {},\r\n      roleAssignments: {},\r\n      createdAt: new Date(),\r\n      updatedAt: new Date()\r\n    }\r\n  });\r\n\r\n  const [teamMembers, setTeamMembers] = useState<CaseMember[]>([]);\r\n  const [newMember, setNewMember] = useState({\r\n    walletAddress: '',\r\n    name: '',\r\n    email: '',\r\n    role: 'associate' as UserRole\r\n  });\r\n\r\n  const practiceAreas: PracticeArea[] = [\r\n    'corporate', 'litigation', 'real-estate', 'family', 'criminal',\r\n    'immigration', 'intellectual-property', 'employment', 'tax', 'other'\r\n  ];\r\n\r\n  const priorities: CasePriority[] = ['low', 'medium', 'high', 'urgent'];\r\n\r\n  const addTeamMember = () => {\r\n    if (!newMember.walletAddress || !newMember.name) {\r\n      toast.error('Please fill in wallet address and name');\r\n      return;\r\n    }\r\n\r\n    // Check if wallet address already exists\r\n    if (teamMembers.some(member => member.walletAddress === newMember.walletAddress)) {\r\n      toast.error('This wallet address is already added to the team');\r\n      return;\r\n    }\r\n\r\n    const member: CaseMember = {\r\n      walletAddress: newMember.walletAddress,\r\n      role: newMember.role,\r\n      name: newMember.name,\r\n      email: newMember.email,\r\n      addedAt: new Date(),\r\n      addedBy: currentUser?.walletAddress || 'unknown'\r\n    };\r\n\r\n    setTeamMembers(prev => [...prev, member]);\r\n    setNewMember({\r\n      walletAddress: '',\r\n      name: '',\r\n      email: '',\r\n      role: 'associate'\r\n    });\r\n    toast.success('Team member added successfully');\r\n  };\r\n\r\n  const removeTeamMember = (walletAddress: string) => {\r\n    setTeamMembers(prev => prev.filter(member => member.walletAddress !== walletAddress));\r\n    toast.success('Team member removed');\r\n  };\r\n\r\n  const updateMemberRole = (walletAddress: string, newRole: UserRole) => {\r\n    setTeamMembers(prev => \r\n      prev.map(member => \r\n        member.walletAddress === walletAddress \r\n          ? { ...member, role: newRole }\r\n          : member\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleInputChange = (field: keyof CaseFile, value: any) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n\r\n  const handleSubmit = async () => {\r\n    if (!formData.title || !formData.clientName || !formData.matterNumber) {\r\n      toast.error('Please fill in all required fields');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Add current user as lead attorney if not already in team\r\n      const currentUserMember: CaseMember = {\r\n        walletAddress: currentUser?.walletAddress || 'unknown',\r\n        role: 'lead-attorney',\r\n        name: currentUser?.walletAddress || 'Current User',\r\n        email: '',\r\n        addedAt: new Date(),\r\n        addedBy: currentUser?.walletAddress || 'unknown'\r\n      };\r\n\r\n      const allTeamMembers = [currentUserMember, ...teamMembers];\r\n\r\n      const caseData = {\r\n        ...formData,\r\n        team: allTeamMembers.map(member => ({\r\n          walletAddress: member.walletAddress,\r\n          name: member.name,\r\n          role: member.role,\r\n          email: member.email || '',\r\n          addedAt: member.addedAt,\r\n          addedBy: member.addedBy,\r\n          permissions: getPermissionsForRole(member.role)\r\n        })),\r\n        createdAt: new Date(),\r\n        updatedAt: new Date()\r\n      };\r\n\r\n      const newCase = await createCase(caseData);\r\n      toast.success('Case created successfully');\r\n      onSuccess(newCase.id);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error creating case:', error);\r\n      toast.error('Failed to create case');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getPermissionsForRole = (role: string): Permission[] => {\r\n    switch (role) {\r\n      case 'lead-attorney':\r\n        return ['view', 'comment', 'edit', 'delete', 'share', 'manage-team'];\r\n      case 'associate':\r\n        return ['view', 'comment', 'edit', 'share'];\r\n      case 'paralegal':\r\n        return ['view', 'comment'];\r\n      case 'client':\r\n        return ['view'];\r\n      case 'external-counsel':\r\n        return ['view', 'comment'];\r\n      default:\r\n        return ['view'];\r\n    }\r\n  };\r\n\r\n  const getStepIcon = (stepName: string) => {\r\n    if (step === stepName) {\r\n      return <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\r\n        <div className=\"w-3 h-3 bg-white rounded-full animate-pulse\" />\r\n      </div>;\r\n    }\r\n    return <div className=\"w-6 h-6 bg-slate-700 rounded-full\" />;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <Card className=\"w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"p-6\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h2 className=\"text-2xl font-bold text-white\">Create New Case</h2>\r\n            <Button variant=\"ghost\" onClick={onClose}>\r\n              <X className=\"w-5 h-5\" />\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Progress Steps */}\r\n          <div className=\"flex items-center justify-center mb-8\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                {getStepIcon('basic')}\r\n                <span className={`text-sm ${step === 'basic' ? 'text-blue-400' : 'text-slate-400'}`}>\r\n                  Basic Info\r\n                </span>\r\n              </div>\r\n              <div className=\"w-8 h-px bg-slate-700\" />\r\n              <div className=\"flex items-center space-x-2\">\r\n                {getStepIcon('team')}\r\n                <span className={`text-sm ${step === 'team' ? 'text-blue-400' : 'text-slate-400'}`}>\r\n                  Team\r\n                </span>\r\n              </div>\r\n              <div className=\"w-8 h-px bg-slate-700\" />\r\n              <div className=\"flex items-center space-x-2\">\r\n                {getStepIcon('review')}\r\n                <span className={`text-sm ${step === 'review' ? 'text-blue-400' : 'text-slate-400'}`}>\r\n                  Review\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Step 1: Basic Information */}\r\n          {step === 'basic' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-white mb-2\">\r\n                    Case Title *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.title || ''}\r\n                    onChange={(e) => handleInputChange('title', e.target.value)}\r\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"e.g., Acme Corp Merger\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-white mb-2\">\r\n                    Client Name *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.clientName || ''}\r\n                    onChange={(e) => handleInputChange('clientName', e.target.value)}\r\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"e.g., Acme Corporation\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-white mb-2\">\r\n                    Matter Number *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.matterNumber || ''}\r\n                    onChange={(e) => handleInputChange('matterNumber', e.target.value)}\r\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"e.g., 2024-001\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-white mb-2\">\r\n                    Practice Area\r\n                  </label>\r\n                  <select\r\n                    value={formData.practiceArea || 'corporate'}\r\n                    onChange={(e) => handleInputChange('practiceArea', e.target.value)}\r\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    {practiceAreas.map(area => (\r\n                      <option key={area} value={area}>\r\n                        {area.replace('-', ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-white mb-2\">\r\n                    Priority\r\n                  </label>\r\n                  <select\r\n                    value={formData.priority || 'medium'}\r\n                    onChange={(e) => handleInputChange('priority', e.target.value)}\r\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    {priorities.map(priority => (\r\n                      <option key={priority} value={priority}>\r\n                        {priority.charAt(0).toUpperCase() + priority.slice(1)}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-white mb-2\">\r\n                    Status\r\n                  </label>\r\n                  <select\r\n                    value={formData.status || 'active'}\r\n                    onChange={(e) => handleInputChange('status', e.target.value)}\r\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"active\">Active</option>\r\n                    <option value=\"on-hold\">On Hold</option>\r\n                    <option value=\"closed\">Closed</option>\r\n                    <option value=\"archived\">Archived</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-white mb-2\">\r\n                  Description\r\n                </label>\r\n                <textarea\r\n                  value={formData.description || ''}\r\n                  onChange={(e) => handleInputChange('description', e.target.value)}\r\n                  rows={4}\r\n                  className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"Brief description of the case...\"\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 2: Team Members */}\r\n          {step === 'team' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                  <h3 className=\"text-lg font-semibold text-white\">Team Members</h3>\r\n                  <p className=\"text-sm text-slate-400\">\r\n                    Add team members with specific roles and permissions\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Add New Member Form */}\r\n              <Card className=\"p-6\">\r\n                <h4 className=\"font-medium text-white mb-4\">Add Team Member</h4>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-white mb-2\">\r\n                      Wallet Address *\r\n                    </label>\r\n                    <Input\r\n                      value={newMember.walletAddress}\r\n                      onChange={(e) => setNewMember(prev => ({ ...prev, walletAddress: e.target.value }))}\r\n                      placeholder=\"0x...\"\r\n                      className=\"font-mono text-sm\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-white mb-2\">\r\n                      Name *\r\n                    </label>\r\n                    <Input\r\n                      value={newMember.name}\r\n                      onChange={(e) => setNewMember(prev => ({ ...prev, name: e.target.value }))}\r\n                      placeholder=\"John Doe\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-white mb-2\">\r\n                      Email\r\n                    </label>\r\n                    <Input\r\n                      type=\"email\"\r\n                      value={newMember.email}\r\n                      onChange={(e) => setNewMember(prev => ({ ...prev, email: e.target.value }))}\r\n                      placeholder=\"john@example.com\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-white mb-2\">\r\n                      Role *\r\n                    </label>\r\n                    <select\r\n                      value={newMember.role}\r\n                      onChange={(e) => setNewMember(prev => ({ ...prev, role: e.target.value as UserRole }))}\r\n                      className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    >\r\n                      <option value=\"associate\">Associate Attorney</option>\r\n                      <option value=\"paralegal\">Paralegal</option>\r\n                      <option value=\"client\">Client</option>\r\n                      <option value=\"external-counsel\">External Counsel</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <Button onClick={addTeamMember} size=\"sm\">\r\n                  <Plus className=\"w-4 h-4 mr-2\" />\r\n                  Add Member\r\n                </Button>\r\n              </Card>\r\n\r\n              {/* Team Members List */}\r\n              <div className=\"space-y-4\">\r\n                <h4 className=\"font-medium text-white\">Current Team Members</h4>\r\n                {teamMembers.map((member, index) => (\r\n                  <Card key={index} className=\"p-4\">\r\n                    <div className=\"flex justify-between items-start mb-3\">\r\n                      <div>\r\n                        <h5 className=\"font-medium text-white\">{member.name}</h5>\r\n                        <p className=\"text-sm text-slate-400 font-mono\">{member.walletAddress}</p>\r\n                        {member.email && (\r\n                          <p className=\"text-sm text-slate-400\">{member.email}</p>\r\n                        )}\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => removeTeamMember(member.walletAddress)}\r\n                        className=\"text-red-400 hover:text-red-300\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </Button>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <span className=\"text-sm text-slate-400\">Role: </span>\r\n                        <span className=\"text-sm font-medium text-blue-400\">\r\n                          {getRoleDisplayName(member.role)}\r\n                        </span>\r\n                      </div>\r\n                      <select\r\n                        value={member.role}\r\n                        onChange={(e) => updateMemberRole(member.walletAddress, e.target.value as UserRole)}\r\n                        className=\"px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                      >\r\n                        <option value=\"associate\">Associate Attorney</option>\r\n                        <option value=\"paralegal\">Paralegal</option>\r\n                        <option value=\"client\">Client</option>\r\n                        <option value=\"external-counsel\">External Counsel</option>\r\n                      </select>\r\n                    </div>\r\n                    \r\n                    <div className=\"mt-2\">\r\n                      <p className=\"text-xs text-slate-500\">\r\n                        {getRoleDescription(member.role)}\r\n                      </p>\r\n                    </div>\r\n                  </Card>\r\n                ))}\r\n                \r\n                {teamMembers.length === 0 && (\r\n                  <div className=\"text-center py-8\">\r\n                    <Users className=\"w-12 h-12 text-slate-400 mx-auto mb-3\" />\r\n                    <p className=\"text-slate-400\">No team members added yet</p>\r\n                    <p className=\"text-sm text-slate-500\">Add team members to collaborate on this case</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 3: Review */}\r\n          {step === 'review' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"bg-slate-800/50 rounded-lg p-6\">\r\n                <h3 className=\"text-lg font-semibold text-white mb-4\">Case Summary</h3>\r\n                \r\n                <div className=\"space-y-4\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-slate-400\">Title</label>\r\n                      <p className=\"text-white\">{formData.title}</p>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-slate-400\">Client</label>\r\n                      <p className=\"text-white\">{formData.clientName}</p>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-slate-400\">Matter Number</label>\r\n                      <p className=\"text-white\">{formData.matterNumber}</p>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-slate-400\">Practice Area</label>\r\n                      <p className=\"text-white\">{formData.practiceArea}</p>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-slate-400\">Priority</label>\r\n                      <p className=\"text-white\">{formData.priority}</p>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-slate-400\">Status</label>\r\n                      <p className=\"text-white\">{formData.status}</p>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {formData.description && (\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-slate-400\">Description</label>\r\n                      <p className=\"text-white\">{formData.description}</p>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-slate-400\">Team Members</label>\r\n                    <p className=\"text-white\">{teamMembers.length} members</p>\r\n                    {teamMembers.map((member, index) => (\r\n                      <div key={index} className=\"text-sm text-slate-300 ml-4\">\r\n                        {member.name} ({member.role}) - {member.walletAddress.slice(0, 10)}...\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-amber-500/10 border border-amber-500/20 rounded-lg p-4\">\r\n                <div className=\"flex items-start space-x-3\">\r\n                  <AlertCircle className=\"w-5 h-5 text-amber-400 mt-0.5\" />\r\n                  <div>\r\n                    <h4 className=\"font-medium text-amber-400 mb-1\">Legal Notice</h4>\r\n                    <p className=\"text-sm text-amber-200\">\r\n                      Creating a case will establish role-based access control on the blockchain. \r\n                      All team members will be granted appropriate permissions based on their assigned roles.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Navigation */}\r\n          <div className=\"flex justify-between mt-8\">\r\n            <div>\r\n              {step !== 'basic' && (\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => {\r\n                    if (step === 'team') setStep('basic');\r\n                    if (step === 'review') setStep('team');\r\n                  }}\r\n                >\r\n                  Previous\r\n                </Button>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"flex space-x-3\">\r\n              <Button variant=\"outline\" onClick={onClose}>\r\n                Cancel\r\n              </Button>\r\n              \r\n              {step !== 'review' ? (\r\n                <Button\r\n                  onClick={() => {\r\n                    if (step === 'basic') setStep('team');\r\n                    if (step === 'team') setStep('review');\r\n                  }}\r\n                >\r\n                  Next\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  onClick={handleSubmit}\r\n                  disabled={loading}\r\n                  className=\"bg-green-600 hover:bg-green-700\"\r\n                >\r\n                  {loading ? 'Creating...' : 'Create Case'}\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * API Test Utilities\r\n * Test backend connectivity and authentication\r\n */\r\n\r\nexport class ApiTester {\r\n  private static getApiBase(): string {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      return 'http://localhost:5000';\r\n    }\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * Test backend health\r\n   */\r\n  static async testBackendHealth(): Promise<boolean> {\r\n    try {\r\n      const response = await fetch(`${this.getApiBase()}/health`);\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('Backend health check failed:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test authentication flow\r\n   */\r\n  static async testAuthFlow(address: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      // Step 1: Get nonce\r\n      const nonceResponse = await fetch(`${this.getApiBase()}/auth/get_nonce`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ address }),\r\n      });\r\n\r\n      if (!nonceResponse.ok) {\r\n        return { success: false, error: 'Failed to get nonce' };\r\n      }\r\n\r\n      const { nonce } = await nonceResponse.json();\r\n      console.log('✅ Nonce received:', nonce);\r\n\r\n      // Step 2: Test login (this would require actual wallet signing in real scenario)\r\n      return { success: true };\r\n    } catch (error) {\r\n      console.error('Auth flow test failed:', error);\r\n      return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test file upload with mock data\r\n   */\r\n  static async testFileUpload(token: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      // Create a small test file\r\n      const testContent = 'This is a test file for BlockVault';\r\n      const testFile = new File([testContent], 'test.txt', { type: 'text/plain' });\r\n\r\n      const formData = new FormData();\r\n      formData.append('file', testFile);\r\n      formData.append('key', 'testpassphrase');\r\n\r\n      const response = await fetch(`${this.getApiBase()}/files/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        return { \r\n          success: false, \r\n          error: `Upload failed: ${response.status} ${response.statusText}` \r\n        };\r\n      }\r\n\r\n      console.log('✅ Test file upload successful');\r\n      return { success: true };\r\n    } catch (error) {\r\n      console.error('File upload test failed:', error);\r\n      return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Run comprehensive API tests\r\n   */\r\n  static async runAllTests(): Promise<{\r\n    backendHealth: boolean;\r\n    authFlow: { success: boolean; error?: string };\r\n    fileUpload?: { success: boolean; error?: string };\r\n  }> {\r\n    console.log('🧪 Starting API Tests...');\r\n\r\n    // Test 1: Backend Health\r\n    const backendHealth = await this.testBackendHealth();\r\n    console.log('Backend Health:', backendHealth ? '✅ OK' : '❌ FAILED');\r\n\r\n    // Test 2: Auth Flow\r\n    const authFlow = await this.testAuthFlow('0x1234567890123456789012345678901234567890');\r\n    console.log('Auth Flow:', authFlow.success ? '✅ OK' : `❌ FAILED: ${authFlow.error}`);\r\n\r\n    // Test 3: File Upload (only if we have a token)\r\n    let fileUpload;\r\n    const user = JSON.parse(localStorage.getItem('blockvault_user') || '{}');\r\n    if (user.jwt) {\r\n      fileUpload = await this.testFileUpload(user.jwt);\r\n      console.log('File Upload:', fileUpload.success ? '✅ OK' : `❌ FAILED: ${fileUpload.error}`);\r\n    } else {\r\n      console.log('File Upload: ⏭️ SKIPPED (no token)');\r\n    }\r\n\r\n    return {\r\n      backendHealth,\r\n      authFlow,\r\n      fileUpload,\r\n    };\r\n  }\r\n}\r\n\r\nexport default ApiTester;\r\n","/**\r\n * BlockVault Legal Features Demo Automation\r\n * =========================================\r\n * \r\n * This utility provides automated demo functionality for showcasing\r\n * BlockVault's advanced legal features. It simulates user interactions\r\n * and demonstrates the complete workflow.\r\n */\r\n\r\nexport interface DemoStep {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  action: () => Promise<void>;\r\n  duration: number; // in milliseconds\r\n}\r\n\r\nexport interface DemoScenario {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  steps: DemoStep[];\r\n  totalDuration: number;\r\n}\r\n\r\nexport class BlockVaultDemoAutomation {\r\n  private currentStep: number = 0;\r\n  private isRunning: boolean = false;\r\n  private demoData: any = {};\r\n\r\n  constructor() {\r\n    this.setupDemoData();\r\n  }\r\n\r\n  private setupDemoData() {\r\n    this.demoData = {\r\n      cases: [\r\n        {\r\n          id: \"case_001\",\r\n          title: \"Smith vs. Jones Discovery\",\r\n          description: \"Major corporate lawsuit involving intellectual property disputes\",\r\n          status: \"active\",\r\n          team_members: [\r\n            { name: \"Alice Chen\", role: \"Lead Attorney\", wallet: \"0x1234...\" },\r\n            { name: \"Bob Smith\", role: \"Associate\", wallet: \"0x5678...\" },\r\n            { name: \"Carol Davis\", role: \"Paralegal\", wallet: \"0x9abc...\" }\r\n          ],\r\n          documents_count: 15,\r\n          tasks_count: 8,\r\n          completion_percentage: 65\r\n        },\r\n        {\r\n          id: \"case_002\",\r\n          title: \"Merger & Acquisition Review\",\r\n          description: \"Due diligence for $50M acquisition of TechCorp\",\r\n          status: \"active\",\r\n          team_members: [\r\n            { name: \"David Wilson\", role: \"Lead Attorney\", wallet: \"0xdef0...\" },\r\n            { name: \"Eva Brown\", role: \"Associate\", wallet: \"0x1234...\" },\r\n            { name: \"Frank Miller\", role: \"Client\", wallet: \"0x5678...\" }\r\n          ],\r\n          documents_count: 25,\r\n          tasks_count: 12,\r\n          completion_percentage: 45\r\n        }\r\n      ],\r\n      documents: [\r\n        {\r\n          id: \"doc_001\",\r\n          name: \"Employment Agreement - Smith.pdf\",\r\n          type: \"Contract\",\r\n          status: \"registered\",\r\n          hash: \"a1b2c3d4e5f6...\",\r\n          ipfs_cid: \"QmXyZ123...\",\r\n          blockchain_hash: \"0x1234567890abcdef...\",\r\n          zk_proof: \"zk_proof_001\",\r\n          case_id: \"case_001\",\r\n          upload_date: \"2024-01-20\",\r\n          size: \"2.3 MB\",\r\n          owner: \"Alice Chen\",\r\n          verification_status: \"verified\"\r\n        },\r\n        {\r\n          id: \"doc_002\",\r\n          name: \"Redacted Employment Agreement - Smith.pdf\",\r\n          type: \"Redacted Document\",\r\n          status: \"registered\",\r\n          hash: \"d4e5f6a1b2c3...\",\r\n          ipfs_cid: \"QmGhI012...\",\r\n          blockchain_hash: \"0x4567890123def...\",\r\n          zk_proof: \"zk_proof_004\",\r\n          zkpt_proof: \"zkpt_proof_001\",\r\n          original_doc_id: \"doc_001\",\r\n          redaction_rules: \"Removed chunks 1, 3, 5 (privileged information)\",\r\n          case_id: \"case_001\",\r\n          upload_date: \"2024-01-25\",\r\n          size: \"1.9 MB\",\r\n          owner: \"Alice Chen\",\r\n          verification_status: \"verified\"\r\n        }\r\n      ],\r\n      signature_requests: [\r\n        {\r\n          id: \"sig_req_001\",\r\n          document_id: \"doc_001\",\r\n          document_name: \"Employment Agreement - Smith.pdf\",\r\n          sender: \"Alice Chen\",\r\n          sender_wallet: \"0x1234...\",\r\n          recipient: \"John Smith\",\r\n          recipient_wallet: \"0x5678...\",\r\n          status: \"pending\",\r\n          created_date: \"2024-01-20\",\r\n          deadline: \"2024-02-15\",\r\n          message: \"Please review and sign the employment agreement\"\r\n        }\r\n      ],\r\n      ai_analyses: [\r\n        {\r\n          id: \"ai_001\",\r\n          document_id: \"doc_001\",\r\n          document_name: \"Employment Agreement - Smith.pdf\",\r\n          analysis_type: \"Contract Risk Assessment\",\r\n          model_type: \"Linear Regression\",\r\n          model_parameters: { m: 2, b: 3 },\r\n          private_input: \"x=5\",\r\n          expected_output: \"y=13\",\r\n          actual_output: \"y=13\",\r\n          zkml_proof: \"zkml_proof_001\",\r\n          confidence_score: 0.95,\r\n          risk_level: \"Medium\",\r\n          analysis_date: \"2024-01-21\",\r\n          analyst: \"AI System\",\r\n          verification_status: \"verified\"\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get all available demo scenarios\r\n   */\r\n  getDemoScenarios(): DemoScenario[] {\r\n    return [\r\n      this.getCaseManagementDemo(),\r\n      this.getDocumentNotarizationDemo(),\r\n      this.getVerifiableRedactionDemo(),\r\n      this.getVerifiableAIAnalysisDemo(),\r\n      this.getESignatureDemo(),\r\n      this.getCompleteWorkflowDemo()\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Case Management Demo Scenario\r\n   */\r\n  private getCaseManagementDemo(): DemoScenario {\r\n    return {\r\n      id: \"case_management\",\r\n      title: \"Case Management with RBAC\",\r\n      description: \"Demonstrate case creation, team management, and role-based access control\",\r\n      totalDuration: 30000,\r\n      steps: [\r\n        {\r\n          id: \"create_case\",\r\n          title: \"Create New Case\",\r\n          description: \"Create a new legal case with team members and permissions\",\r\n          action: async () => {\r\n            console.log(\"📁 Creating new case: 'Corporate Merger Review'\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Case created with ID: case_003\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"add_team_members\",\r\n          title: \"Add Team Members\",\r\n          description: \"Add team members with different roles and permissions\",\r\n          action: async () => {\r\n            console.log(\"👥 Adding team members:\");\r\n            console.log(\"   - Lead Attorney: Alice Chen\");\r\n            console.log(\"   - Associate: Bob Smith\");\r\n            console.log(\"   - Paralegal: Carol Davis\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Team members added with role-based permissions\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"set_permissions\",\r\n          title: \"Configure Access Control\",\r\n          description: \"Set up role-based access control for case documents\",\r\n          action: async () => {\r\n            console.log(\"🔐 Configuring access control:\");\r\n            console.log(\"   - Lead Attorney: Full access\");\r\n            console.log(\"   - Associate: Read/Write access\");\r\n            console.log(\"   - Paralegal: Read-only access\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Access control configured\");\r\n          },\r\n          duration: 2000\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Document Notarization Demo Scenario\r\n   */\r\n  private getDocumentNotarizationDemo(): DemoScenario {\r\n    return {\r\n      id: \"document_notarization\",\r\n      title: \"Document Notarization with ZK Proofs\",\r\n      description: \"Demonstrate secure document upload, hashing, and blockchain registration\",\r\n      totalDuration: 25000,\r\n      steps: [\r\n        {\r\n          id: \"upload_document\",\r\n          title: \"Upload Document\",\r\n          description: \"Upload a legal document for notarization\",\r\n          action: async () => {\r\n            console.log(\"📄 Uploading document: 'Employment Agreement.pdf'\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Document uploaded successfully\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"calculate_hash\",\r\n          title: \"Calculate Cryptographic Hash\",\r\n          description: \"Generate cryptographic hash of the document\",\r\n          action: async () => {\r\n            console.log(\"🔐 Calculating cryptographic hash...\");\r\n            await this.simulateDelay(1500);\r\n            console.log(\"✅ Hash calculated: a1b2c3d4e5f6...\");\r\n          },\r\n          duration: 1500\r\n        },\r\n        {\r\n          id: \"upload_ipfs\",\r\n          title: \"Upload to IPFS\",\r\n          description: \"Upload document to decentralized storage\",\r\n          action: async () => {\r\n            console.log(\"🌐 Uploading to IPFS...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ IPFS CID: QmXyZ123...\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"generate_zk_proof\",\r\n          title: \"Generate ZK Proof\",\r\n          description: \"Generate zero-knowledge proof of document integrity\",\r\n          action: async () => {\r\n            console.log(\"🔒 Generating ZK proof...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ ZK proof generated: zk_proof_001\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"blockchain_registration\",\r\n          title: \"Blockchain Registration\",\r\n          description: \"Register document on blockchain with proof\",\r\n          action: async () => {\r\n            console.log(\"⛓️ Registering on blockchain...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Document registered on blockchain\");\r\n            console.log(\"✅ Transaction hash: 0x1234567890abcdef...\");\r\n          },\r\n          duration: 2000\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Verifiable Redaction Demo Scenario\r\n   */\r\n  private getVerifiableRedactionDemo(): DemoScenario {\r\n    return {\r\n      id: \"verifiable_redaction\",\r\n      title: \"Verifiable Redaction (ZKPT)\",\r\n      description: \"Demonstrate zero-knowledge proof of transformation for document redaction\",\r\n      totalDuration: 30000,\r\n      steps: [\r\n        {\r\n          id: \"select_document\",\r\n          title: \"Select Document for Redaction\",\r\n          description: \"Choose a document that needs privileged information redacted\",\r\n          action: async () => {\r\n            console.log(\"📄 Selected document: 'Employment Agreement - Smith.pdf'\");\r\n            console.log(\"🔍 Document contains privileged information\");\r\n            await this.simulateDelay(1500);\r\n            console.log(\"✅ Document selected for redaction\");\r\n          },\r\n          duration: 1500\r\n        },\r\n        {\r\n          id: \"configure_redaction\",\r\n          title: \"Configure Redaction Rules\",\r\n          description: \"Set up rules for what information to redact\",\r\n          action: async () => {\r\n            console.log(\"⚙️ Configuring redaction rules:\");\r\n            console.log(\"   - Remove chunks 1, 3, 5 (privileged information)\");\r\n            console.log(\"   - Preserve document structure\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Redaction rules configured\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"apply_redaction\",\r\n          title: \"Apply Redaction\",\r\n          description: \"Apply redaction rules to create new document version\",\r\n          action: async () => {\r\n            console.log(\"🔒 Applying redaction...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Redacted document created\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"generate_zkpt_proof\",\r\n          title: \"Generate ZKPT Proof\",\r\n          description: \"Generate zero-knowledge proof of transformation\",\r\n          action: async () => {\r\n            console.log(\"🔐 Generating ZKPT proof...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ ZKPT proof generated: zkpt_proof_001\");\r\n            console.log(\"✅ Proof guarantees valid transformation\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"verify_transformation\",\r\n          title: \"Verify Transformation\",\r\n          description: \"Verify the redaction was applied correctly\",\r\n          action: async () => {\r\n            console.log(\"🔍 Verifying transformation...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Transformation verified\");\r\n            console.log(\"✅ Chain of custody maintained\");\r\n          },\r\n          duration: 2000\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Verifiable AI Analysis Demo Scenario\r\n   */\r\n  private getVerifiableAIAnalysisDemo(): DemoScenario {\r\n    return {\r\n      id: \"verifiable_ai_analysis\",\r\n      title: \"Verifiable AI Analysis (ZKML)\",\r\n      description: \"Demonstrate zero-knowledge machine learning for contract analysis\",\r\n      totalDuration: 25000,\r\n      steps: [\r\n        {\r\n          id: \"select_ai_model\",\r\n          title: \"Select AI Model\",\r\n          description: \"Choose the AI model for contract analysis\",\r\n          action: async () => {\r\n            console.log(\"🤖 Selecting AI model: 'Linear Regression'\");\r\n            console.log(\"📊 Model parameters: m=2, b=3\");\r\n            await this.simulateDelay(1500);\r\n            console.log(\"✅ AI model selected\");\r\n          },\r\n          duration: 1500\r\n        },\r\n        {\r\n          id: \"configure_analysis\",\r\n          title: \"Configure Analysis\",\r\n          description: \"Set up analysis parameters and inputs\",\r\n          action: async () => {\r\n            console.log(\"⚙️ Configuring analysis:\");\r\n            console.log(\"   - Private input: x=5\");\r\n            console.log(\"   - Expected output: y=13\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Analysis configured\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"run_analysis\",\r\n          title: \"Run AI Analysis\",\r\n          description: \"Execute the AI analysis on the document\",\r\n          action: async () => {\r\n            console.log(\"🔍 Running AI analysis...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Analysis completed\");\r\n            console.log(\"✅ Result: y=13 (matches expected)\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"generate_zkml_proof\",\r\n          title: \"Generate ZKML Proof\",\r\n          description: \"Generate zero-knowledge proof of ML computation\",\r\n          action: async () => {\r\n            console.log(\"🔐 Generating ZKML proof...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ ZKML proof generated: zkml_proof_001\");\r\n            console.log(\"✅ Proof guarantees correct computation\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"verify_analysis\",\r\n          title: \"Verify Analysis\",\r\n          description: \"Verify the AI analysis was performed correctly\",\r\n          action: async () => {\r\n            console.log(\"🔍 Verifying AI analysis...\");\r\n            console.log(\"✅ Analysis verified\");\r\n            console.log(\"✅ Confidence score: 0.95\");\r\n            console.log(\"✅ Risk level: Medium\");\r\n          },\r\n          duration: 2000\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  /**\r\n   * E-Signature Demo Scenario\r\n   */\r\n  private getESignatureDemo(): DemoScenario {\r\n    return {\r\n      id: \"e_signature\",\r\n      title: \"E-Signature Workflow\",\r\n      description: \"Demonstrate secure electronic signature process\",\r\n      totalDuration: 20000,\r\n      steps: [\r\n        {\r\n          id: \"create_signature_request\",\r\n          title: \"Create Signature Request\",\r\n          description: \"Create a request for document signature\",\r\n          action: async () => {\r\n            console.log(\"✍️ Creating signature request:\");\r\n            console.log(\"   - Document: Employment Agreement - Smith.pdf\");\r\n            console.log(\"   - Recipient: John Smith\");\r\n            console.log(\"   - Deadline: 2024-02-15\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Signature request created\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"send_request\",\r\n          title: \"Send Request\",\r\n          description: \"Send the signature request to the recipient\",\r\n          action: async () => {\r\n            console.log(\"📤 Sending signature request...\");\r\n            await this.simulateDelay(1500);\r\n            console.log(\"✅ Request sent to recipient\");\r\n          },\r\n          duration: 1500\r\n        },\r\n        {\r\n          id: \"recipient_review\",\r\n          title: \"Recipient Review\",\r\n          description: \"Recipient reviews and signs the document\",\r\n          action: async () => {\r\n            console.log(\"👤 Recipient reviewing document...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Document reviewed and signed\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"verify_signature\",\r\n          title: \"Verify Signature\",\r\n          description: \"Verify the electronic signature\",\r\n          action: async () => {\r\n            console.log(\"🔍 Verifying signature...\");\r\n            await this.simulateDelay(1500);\r\n            console.log(\"✅ Signature verified\");\r\n            console.log(\"✅ Document status: Signed\");\r\n          },\r\n          duration: 1500\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Complete Workflow Demo Scenario\r\n   */\r\n  private getCompleteWorkflowDemo(): DemoScenario {\r\n    return {\r\n      id: \"complete_workflow\",\r\n      title: \"Complete Legal Workflow\",\r\n      description: \"Demonstrate the complete legal document workflow from upload to signature\",\r\n      totalDuration: 60000,\r\n      steps: [\r\n        {\r\n          id: \"case_setup\",\r\n          title: \"Case Setup\",\r\n          description: \"Set up a new legal case with team members\",\r\n          action: async () => {\r\n            console.log(\"📁 Setting up case: 'Corporate Merger Review'\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Case setup complete\");\r\n          },\r\n          duration: 2000\r\n        },\r\n        {\r\n          id: \"document_upload\",\r\n          title: \"Document Upload\",\r\n          description: \"Upload and notarize legal documents\",\r\n          action: async () => {\r\n            console.log(\"📄 Uploading documents...\");\r\n            await this.simulateDelay(3000);\r\n            console.log(\"✅ Documents uploaded and notarized\");\r\n          },\r\n          duration: 3000\r\n        },\r\n        {\r\n          id: \"document_redaction\",\r\n          title: \"Document Redaction\",\r\n          description: \"Redact privileged information from documents\",\r\n          action: async () => {\r\n            console.log(\"🔒 Redacting privileged information...\");\r\n            await this.simulateDelay(3000);\r\n            console.log(\"✅ Documents redacted with ZKPT proof\");\r\n          },\r\n          duration: 3000\r\n        },\r\n        {\r\n          id: \"ai_analysis\",\r\n          title: \"AI Analysis\",\r\n          description: \"Perform AI analysis on documents\",\r\n          action: async () => {\r\n            console.log(\"🤖 Running AI analysis...\");\r\n            await this.simulateDelay(3000);\r\n            console.log(\"✅ AI analysis completed with ZKML proof\");\r\n          },\r\n          duration: 3000\r\n        },\r\n        {\r\n          id: \"signature_workflow\",\r\n          title: \"Signature Workflow\",\r\n          description: \"Request and collect signatures\",\r\n          action: async () => {\r\n            console.log(\"✍️ Managing signature workflow...\");\r\n            await this.simulateDelay(3000);\r\n            console.log(\"✅ Signatures collected and verified\");\r\n          },\r\n          duration: 3000\r\n        },\r\n        {\r\n          id: \"audit_trail\",\r\n          title: \"Audit Trail\",\r\n          description: \"Generate comprehensive audit trail\",\r\n          action: async () => {\r\n            console.log(\"📋 Generating audit trail...\");\r\n            await this.simulateDelay(2000);\r\n            console.log(\"✅ Audit trail generated\");\r\n            console.log(\"✅ Complete workflow documented\");\r\n          },\r\n          duration: 2000\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Run a specific demo scenario\r\n   */\r\n  async runDemo(scenarioId: string): Promise<void> {\r\n    const scenarios = this.getDemoScenarios();\r\n    const scenario = scenarios.find(s => s.id === scenarioId);\r\n    \r\n    if (!scenario) {\r\n      throw new Error(`Demo scenario '${scenarioId}' not found`);\r\n    }\r\n\r\n    console.log(`🎬 Starting demo: ${scenario.title}`);\r\n    console.log(`📝 Description: ${scenario.description}`);\r\n    console.log(`⏱️ Estimated duration: ${scenario.totalDuration / 1000} seconds`);\r\n    console.log(\"=\".repeat(60));\r\n\r\n    this.isRunning = true;\r\n    this.currentStep = 0;\r\n\r\n    try {\r\n      for (const step of scenario.steps) {\r\n        this.currentStep++;\r\n        console.log(`\\n📋 Step ${this.currentStep}/${scenario.steps.length}: ${step.title}`);\r\n        console.log(`📝 ${step.description}`);\r\n        console.log(\"-\".repeat(40));\r\n        \r\n        await step.action();\r\n        \r\n        if (this.currentStep < scenario.steps.length) {\r\n          console.log(`⏳ Waiting ${step.duration / 1000} seconds...`);\r\n          await this.simulateDelay(step.duration);\r\n        }\r\n      }\r\n\r\n      console.log(\"\\n✅ Demo completed successfully!\");\r\n      console.log(\"🎉 All features demonstrated!\");\r\n      \r\n    } catch (error) {\r\n      console.error(\"❌ Demo failed:\", error);\r\n      throw error;\r\n    } finally {\r\n      this.isRunning = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Run all demo scenarios\r\n   */\r\n  async runAllDemos(): Promise<void> {\r\n    const scenarios = this.getDemoScenarios();\r\n    \r\n    console.log(\"🚀 Running all BlockVault Legal demos...\");\r\n    console.log(`📊 Total scenarios: ${scenarios.length}`);\r\n    console.log(\"=\".repeat(60));\r\n\r\n    for (const scenario of scenarios) {\r\n      await this.runDemo(scenario.id);\r\n      console.log(\"\\n\" + \"=\".repeat(60));\r\n    }\r\n\r\n    console.log(\"\\n🎉 All demos completed!\");\r\n    console.log(\"🚀 BlockVault Legal: The Future of Legal Technology!\");\r\n  }\r\n\r\n  /**\r\n   * Get demo data for a specific feature\r\n   */\r\n  getDemoData(feature: string): any {\r\n    return this.demoData[feature] || null;\r\n  }\r\n\r\n  /**\r\n   * Check if demo is currently running\r\n   */\r\n  isDemoRunning(): boolean {\r\n    return this.isRunning;\r\n  }\r\n\r\n  /**\r\n   * Get current demo step\r\n   */\r\n  getCurrentStep(): number {\r\n    return this.currentStep;\r\n  }\r\n\r\n  /**\r\n   * Simulate a delay for demo purposes\r\n   */\r\n  private async simulateDelay(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const demoAutomation = new BlockVaultDemoAutomation();\r\n\r\n// Export demo scenarios for easy access\r\nexport const demoScenarios = {\r\n  CASE_MANAGEMENT: \"case_management\",\r\n  DOCUMENT_NOTARIZATION: \"document_notarization\",\r\n  VERIFIABLE_REDACTION: \"verifiable_redaction\",\r\n  VERIFIABLE_AI_ANALYSIS: \"verifiable_ai_analysis\",\r\n  E_SIGNATURE: \"e_signature\",\r\n  COMPLETE_WORKFLOW: \"complete_workflow\"\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { demoAutomation, DemoScenario } from '../../utils/demoAutomation';\r\n\r\ninterface SimpleDemoInterfaceProps {\r\n  onClose?: () => void;\r\n}\r\n\r\nconst SimpleDemoInterface: React.FC<SimpleDemoInterfaceProps> = ({ onClose }) => {\r\n  const [scenarios, setScenarios] = useState<DemoScenario[]>([]);\r\n  const [selectedScenario, setSelectedScenario] = useState<string>('');\r\n  const [isRunning, setIsRunning] = useState(false);\r\n  // const [currentStep, setCurrentStep] = useState(0);\r\n  const [demoLog, setDemoLog] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    const demoScenarios = demoAutomation.getDemoScenarios();\r\n    setScenarios(demoScenarios);\r\n  }, []);\r\n\r\n  const runDemo = async (scenarioId: string) => {\r\n    if (isRunning) return;\r\n\r\n    setIsRunning(true);\r\n    // setCurrentStep(0);\r\n    setDemoLog([]);\r\n\r\n    try {\r\n      // Override console.log to capture demo output\r\n      const originalLog = console.log;\r\n      console.log = (...args) => {\r\n        const message = args.join(' ');\r\n        setDemoLog(prev => [...prev, message]);\r\n        originalLog(...args);\r\n      };\r\n\r\n      await demoAutomation.runDemo(scenarioId);\r\n\r\n      // Restore console.log\r\n      console.log = originalLog;\r\n    } catch (error) {\r\n      console.error('Demo failed:', error);\r\n      setDemoLog(prev => [...prev, `❌ Demo failed: ${error}`]);\r\n    } finally {\r\n      setIsRunning(false);\r\n    }\r\n  };\r\n\r\n  const runAllDemos = async () => {\r\n    if (isRunning) return;\r\n\r\n    setIsRunning(true);\r\n    // setCurrentStep(0);\r\n    setDemoLog([]);\r\n\r\n    try {\r\n      // Override console.log to capture demo output\r\n      const originalLog = console.log;\r\n      console.log = (...args) => {\r\n        const message = args.join(' ');\r\n        setDemoLog(prev => [...prev, message]);\r\n        originalLog(...args);\r\n      };\r\n\r\n      await demoAutomation.runAllDemos();\r\n\r\n      // Restore console.log\r\n      console.log = originalLog;\r\n    } catch (error) {\r\n      console.error('Demo failed:', error);\r\n      setDemoLog(prev => [...prev, `❌ Demo failed: ${error}`]);\r\n    } finally {\r\n      setIsRunning(false);\r\n    }\r\n  };\r\n\r\n  const clearLog = () => {\r\n    setDemoLog([]);\r\n  };\r\n\r\n  const selectedScenarioData = scenarios.find(s => s.id === selectedScenario);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2\">\r\n      <div className=\"bg-slate-900 rounded-xl p-4 w-full max-w-4xl max-h-[98vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-xl font-bold text-white\">BlockVault Legal Demo</h2>\r\n          {onClose && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-gray-400 hover:text-white transition-colors text-xl\"\r\n            >\r\n              ✕\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Quick Actions */}\r\n        <div className=\"mb-4 space-y-2\">\r\n          <div className=\"flex flex-col sm:flex-row gap-2\">\r\n            <button\r\n              onClick={runAllDemos}\r\n              disabled={isRunning}\r\n              className=\"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 text-sm font-medium\"\r\n            >\r\n              {isRunning ? '🔄 Running All Demos...' : '🚀 Run All Demos'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Scenario Selection */}\r\n        <div className=\"mb-4\">\r\n          <h3 className=\"text-lg font-semibold text-white mb-2\">Or Select Specific Demo:</h3>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n            {scenarios.map((scenario) => (\r\n              <button\r\n                key={scenario.id}\r\n                onClick={() => setSelectedScenario(scenario.id)}\r\n                className={`text-left p-3 rounded-lg transition-colors text-sm ${\r\n                  selectedScenario === scenario.id\r\n                    ? 'bg-blue-600 text-white'\r\n                    : 'bg-slate-800 text-gray-300 hover:bg-slate-700'\r\n                }`}\r\n              >\r\n                <div className=\"font-medium\">{scenario.title}</div>\r\n                <div className=\"text-xs opacity-75 mt-1\">\r\n                  {scenario.totalDuration / 1000}s\r\n                </div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Run Selected Demo */}\r\n        {selectedScenario && (\r\n          <div className=\"mb-4\">\r\n            <button\r\n              onClick={() => runDemo(selectedScenario)}\r\n              disabled={isRunning}\r\n              className=\"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium\"\r\n            >\r\n              {isRunning ? '🔄 Running...' : `▶️ Run ${selectedScenarioData?.title}`}\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Demo Output */}\r\n        <div className=\"mb-4\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <h3 className=\"text-lg font-semibold text-white\">Demo Output</h3>\r\n            <button\r\n              onClick={clearLog}\r\n              className=\"text-gray-400 hover:text-white transition-colors text-sm\"\r\n            >\r\n              Clear Log\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"bg-black rounded-lg p-3 h-64 overflow-y-auto\">\r\n            <div className=\"font-mono text-sm text-green-400 space-y-1\">\r\n              {demoLog.length === 0 ? (\r\n                <div className=\"text-gray-500\">No demo output yet. Click \"Run All Demos\" or select a specific demo above.</div>\r\n              ) : (\r\n                demoLog.map((line, index) => (\r\n                  <div key={index} className=\"whitespace-pre-wrap\">\r\n                    {line}\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status */}\r\n        {isRunning && (\r\n          <div className=\"bg-blue-900 bg-opacity-50 p-3 rounded-lg mb-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400\"></div>\r\n              <span className=\"text-blue-400\">Demo is running...</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Features Overview */}\r\n        <div className=\"bg-slate-800 p-3 rounded-lg\">\r\n          <h3 className=\"text-base font-semibold text-white mb-2\">Demo Features</h3>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 text-xs\">\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span className=\"text-green-400\">✅</span>\r\n              <span className=\"text-gray-300\">Case Management</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span className=\"text-green-400\">✅</span>\r\n              <span className=\"text-gray-300\">Document Notarization</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span className=\"text-green-400\">✅</span>\r\n              <span className=\"text-gray-300\">Verifiable Redaction</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span className=\"text-green-400\">✅</span>\r\n              <span className=\"text-gray-300\">AI Analysis</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span className=\"text-green-400\">✅</span>\r\n              <span className=\"text-gray-300\">E-Signatures</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span className=\"text-green-400\">✅</span>\r\n              <span className=\"text-gray-300\">Audit Trails</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SimpleDemoInterface;\r\n","import React, { useState } from 'react';\r\nimport SimpleDemoInterface from './SimpleDemoInterface';\r\n\r\nconst DemoLauncher: React.FC = () => {\r\n  const [showDemo, setShowDemo] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={() => setShowDemo(true)}\r\n        className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl\"\r\n      >\r\n        🎬 Launch Demo\r\n      </button>\r\n\r\n      {showDemo && (\r\n        <SimpleDemoInterface onClose={() => setShowDemo(false)} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DemoLauncher;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Building2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiAyMlY0YTIgMiAwIDAgMSAyLTJoOGEyIDIgMCAwIDEgMiAydjE4WiIgLz4KICA8cGF0aCBkPSJNNiAxMkg0YTIgMiAwIDAgMC0yIDJ2NmEyIDIgMCAwIDAgMiAyaDIiIC8+CiAgPHBhdGggZD0iTTE4IDloMmEyIDIgMCAwIDEgMiAydjlhMiAyIDAgMCAxLTIgMmgtMiIgLz4KICA8cGF0aCBkPSJNMTAgNmg0IiAvPgogIDxwYXRoIGQ9Ik0xMCAxMGg0IiAvPgogIDxwYXRoIGQ9Ik0xMCAxNGg0IiAvPgogIDxwYXRoIGQ9Ik0xMCAxOGg0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/building-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Building2 = createLucideIcon('Building2', [\n  ['path', { d: 'M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z', key: '1b4qmf' }],\n  ['path', { d: 'M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2', key: 'i71pzd' }],\n  ['path', { d: 'M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2', key: '10jefs' }],\n  ['path', { d: 'M10 6h4', key: '1itunk' }],\n  ['path', { d: 'M10 10h4', key: 'tcdvrf' }],\n  ['path', { d: 'M10 14h4', key: 'kelpxr' }],\n  ['path', { d: 'M10 18h4', key: '1ulq68' }],\n]);\n\nexport default Building2;\n","import React, { useState } from 'react';\r\nimport { Users, Building2, User, Shield } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card } from '../ui/Card';\r\nimport { Input } from '../ui/Input';\r\nimport { UserRole } from '../../types/rbac';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface UserOnboardingProps {\r\n  onComplete: (role: UserRole, firmName?: string) => void;\r\n  userAddress: string;\r\n}\r\n\r\nexport const UserOnboarding: React.FC<UserOnboardingProps> = ({ onComplete, userAddress }) => {\r\n  const [step, setStep] = useState<'role' | 'firm' | 'complete'>('role');\r\n  const [selectedRole, setSelectedRole] = useState<UserRole | null>(null);\r\n  const [firmName, setFirmName] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleRoleSelection = (role: UserRole) => {\r\n    setSelectedRole(role);\r\n    \r\n    // If it's a legal professional role, go to firm registration\r\n    if (role === 'lead-attorney' || role === 'associate' || role === 'paralegal') {\r\n      setStep('firm');\r\n    } else {\r\n      // For clients and external counsel, complete immediately\r\n      handleComplete(role);\r\n    }\r\n  };\r\n\r\n  const handleComplete = async (role?: UserRole) => {\r\n    const finalRole = role || selectedRole;\r\n    if (!finalRole) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Save user role to localStorage\r\n      const userProfile = {\r\n        walletAddress: userAddress,\r\n        role: finalRole,\r\n        firmName: firmName || null,\r\n        onboardedAt: new Date().toISOString(),\r\n        isOnboarded: true\r\n      };\r\n\r\n      localStorage.setItem('user_profile', JSON.stringify(userProfile));\r\n      \r\n      // Dispatch event to notify other components\r\n      window.dispatchEvent(new CustomEvent('userOnboarded', { \r\n        detail: { role: finalRole, firmName } \r\n      }));\r\n\r\n      toast.success(`Welcome! You've been registered as a ${getRoleDisplayName(finalRole)}`);\r\n      onComplete(finalRole, firmName);\r\n    } catch (error) {\r\n      console.error('Error completing onboarding:', error);\r\n      toast.error('Failed to complete onboarding');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getRoleDisplayName = (role: UserRole): string => {\r\n    const displayNames: Record<UserRole, string> = {\r\n      'lead-attorney': 'Lead Attorney',\r\n      associate: 'Associate Attorney',\r\n      paralegal: 'Paralegal',\r\n      client: 'Client',\r\n      'external-counsel': 'External Counsel',\r\n    };\r\n    return displayNames[role];\r\n  };\r\n\r\n  const getRoleDescription = (role: UserRole): string => {\r\n    const descriptions: Record<UserRole, string> = {\r\n      'lead-attorney': 'Full access to case management, document operations, and team coordination',\r\n      associate: 'Broad access to document operations and sharing, limited administrative access',\r\n      paralegal: 'Document management and organization, limited operational access',\r\n      client: 'View-only access to documents shared with you, can sign required documents',\r\n      'external-counsel': 'View-only access to documents shared with you, can sign required documents',\r\n    };\r\n    return descriptions[role];\r\n  };\r\n\r\n  const getRoleIcon = (role: UserRole) => {\r\n    switch (role) {\r\n      case 'lead-attorney':\r\n        return <Shield className=\"w-8 h-8 text-blue-500\" />;\r\n      case 'associate':\r\n        return <Users className=\"w-8 h-8 text-green-500\" />;\r\n      case 'paralegal':\r\n        return <User className=\"w-8 h-8 text-purple-500\" />;\r\n      case 'client':\r\n        return <User className=\"w-8 h-8 text-orange-500\" />;\r\n      case 'external-counsel':\r\n        return <Building2 className=\"w-8 h-8 text-indigo-500\" />;\r\n      default:\r\n        return <User className=\"w-8 h-8 text-gray-500\" />;\r\n    }\r\n  };\r\n\r\n  if (step === 'role') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4\">\r\n        <Card className=\"w-full max-w-4xl\">\r\n          <div className=\"p-8\">\r\n            <div className=\"text-center mb-8\">\r\n              <h1 className=\"text-3xl font-bold text-white mb-4\">Welcome to BlockVault Legal</h1>\r\n              <p className=\"text-slate-400 text-lg\">\r\n                Please select your role to get started with secure legal document management\r\n              </p>\r\n              <div className=\"mt-4 p-3 bg-slate-800/50 rounded-lg\">\r\n                <p className=\"text-sm text-slate-300\">\r\n                  <strong>Wallet Address:</strong> <span className=\"font-mono text-blue-400\">{userAddress}</span>\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {/* Lead Attorney */}\r\n              <Card \r\n                className=\"p-6 cursor-pointer hover:bg-slate-800/50 transition-colors border-2 border-transparent hover:border-blue-500/50\"\r\n                onClick={() => handleRoleSelection('lead-attorney')}\r\n              >\r\n                <div className=\"text-center\">\r\n                  <div className=\"flex justify-center mb-4\">\r\n                    {getRoleIcon('lead-attorney')}\r\n                  </div>\r\n                  <h3 className=\"text-lg font-semibold text-white mb-2\">Lead Attorney</h3>\r\n                  <p className=\"text-sm text-slate-400 mb-4\">\r\n                    {getRoleDescription('lead-attorney')}\r\n                  </p>\r\n                  <div className=\"text-xs text-blue-400\">\r\n                    Full administrative access\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* Associate Attorney */}\r\n              <Card \r\n                className=\"p-6 cursor-pointer hover:bg-slate-800/50 transition-colors border-2 border-transparent hover:border-green-500/50\"\r\n                onClick={() => handleRoleSelection('associate')}\r\n              >\r\n                <div className=\"text-center\">\r\n                  <div className=\"flex justify-center mb-4\">\r\n                    {getRoleIcon('associate')}\r\n                  </div>\r\n                  <h3 className=\"text-lg font-semibold text-white mb-2\">Associate Attorney</h3>\r\n                  <p className=\"text-sm text-slate-400 mb-4\">\r\n                    {getRoleDescription('associate')}\r\n                  </p>\r\n                  <div className=\"text-xs text-green-400\">\r\n                    Document operations access\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* Paralegal */}\r\n              <Card \r\n                className=\"p-6 cursor-pointer hover:bg-slate-800/50 transition-colors border-2 border-transparent hover:border-purple-500/50\"\r\n                onClick={() => handleRoleSelection('paralegal')}\r\n              >\r\n                <div className=\"text-center\">\r\n                  <div className=\"flex justify-center mb-4\">\r\n                    {getRoleIcon('paralegal')}\r\n                  </div>\r\n                  <h3 className=\"text-lg font-semibold text-white mb-2\">Paralegal</h3>\r\n                  <p className=\"text-sm text-slate-400 mb-4\">\r\n                    {getRoleDescription('paralegal')}\r\n                  </p>\r\n                  <div className=\"text-xs text-purple-400\">\r\n                    Document management access\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* Client */}\r\n              <Card \r\n                className=\"p-6 cursor-pointer hover:bg-slate-800/50 transition-colors border-2 border-transparent hover:border-orange-500/50\"\r\n                onClick={() => handleRoleSelection('client')}\r\n              >\r\n                <div className=\"text-center\">\r\n                  <div className=\"flex justify-center mb-4\">\r\n                    {getRoleIcon('client')}\r\n                  </div>\r\n                  <h3 className=\"text-lg font-semibold text-white mb-2\">Client</h3>\r\n                  <p className=\"text-sm text-slate-400 mb-4\">\r\n                    {getRoleDescription('client')}\r\n                  </p>\r\n                  <div className=\"text-xs text-orange-400\">\r\n                    View and sign documents\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* External Counsel */}\r\n              <Card \r\n                className=\"p-6 cursor-pointer hover:bg-slate-800/50 transition-colors border-2 border-transparent hover:border-indigo-500/50\"\r\n                onClick={() => handleRoleSelection('external-counsel')}\r\n              >\r\n                <div className=\"text-center\">\r\n                  <div className=\"flex justify-center mb-4\">\r\n                    {getRoleIcon('external-counsel')}\r\n                  </div>\r\n                  <h3 className=\"text-lg font-semibold text-white mb-2\">External Counsel</h3>\r\n                  <p className=\"text-sm text-slate-400 mb-4\">\r\n                    {getRoleDescription('external-counsel')}\r\n                  </p>\r\n                  <div className=\"text-xs text-indigo-400\">\r\n                    View and sign documents\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (step === 'firm') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4\">\r\n        <Card className=\"w-full max-w-2xl\">\r\n          <div className=\"p-8\">\r\n            <div className=\"text-center mb-8\">\r\n              <div className=\"flex justify-center mb-4\">\r\n                {selectedRole && getRoleIcon(selectedRole)}\r\n              </div>\r\n              <h1 className=\"text-2xl font-bold text-white mb-2\">\r\n                Register Your Law Firm\r\n              </h1>\r\n              <p className=\"text-slate-400\">\r\n                As a {getRoleDisplayName(selectedRole!)}, you need to register your law firm to access case management features.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-white mb-2\">\r\n                  Law Firm Name *\r\n                </label>\r\n                <Input\r\n                  value={firmName}\r\n                  onChange={(e) => setFirmName(e.target.value)}\r\n                  placeholder=\"Enter your law firm name\"\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"bg-slate-800/50 rounded-lg p-4\">\r\n                <h3 className=\"text-sm font-medium text-white mb-2\">What happens next?</h3>\r\n                <ul className=\"text-sm text-slate-400 space-y-1\">\r\n                  <li>• Your firm will be registered in the system</li>\r\n                  <li>• You'll be able to create and manage case files</li>\r\n                  <li>• You can invite other team members to join your firm</li>\r\n                  <li>• All your documents will be securely encrypted and stored</li>\r\n                </ul>\r\n              </div>\r\n\r\n              <div className=\"flex space-x-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setStep('role')}\r\n                  className=\"flex-1\"\r\n                >\r\n                  Back\r\n                </Button>\r\n                <Button\r\n                  onClick={() => handleComplete()}\r\n                  disabled={!firmName.trim() || loading}\r\n                  className=\"flex-1\"\r\n                >\r\n                  {loading ? 'Registering...' : 'Register Firm & Continue'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJtMTIgNSA3IDctNyA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowRight = createLucideIcon('ArrowRight', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'm12 5 7 7-7 7', key: 'xquz4c' }],\n]);\n\nexport default ArrowRight;\n","import React, { useState } from 'react';\r\nimport { Wallet, ArrowRight } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card } from '../ui/Card';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface WalletConnectionProps {\r\n  onConnect: (address: string) => void;\r\n}\r\n\r\nexport const WalletConnection: React.FC<WalletConnectionProps> = ({ onConnect }) => {\r\n  const [connecting, setConnecting] = useState(false);\r\n\r\n  const connectWallet = async () => {\r\n    setConnecting(true);\r\n    try {\r\n      // Check if MetaMask is installed\r\n      if (typeof window.ethereum === 'undefined') {\r\n        toast.error('MetaMask is not installed. Please install MetaMask to continue.');\r\n        return;\r\n      }\r\n\r\n      // Request account access\r\n      const accounts = await window.ethereum.request({\r\n        method: 'eth_requestAccounts',\r\n      });\r\n\r\n      if (accounts.length > 0) {\r\n        const address = accounts[0];\r\n        onConnect(address);\r\n        toast.success('Wallet connected successfully!');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error connecting wallet:', error);\r\n      if (error.code === 4001) {\r\n        toast.error('Please connect your wallet to continue.');\r\n      } else {\r\n        toast.error('Failed to connect wallet. Please try again.');\r\n      }\r\n    } finally {\r\n      setConnecting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <div className=\"p-8 text-center\">\r\n          <div className=\"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n            <Wallet className=\"w-8 h-8 text-white\" />\r\n          </div>\r\n          \r\n          <h1 className=\"text-2xl font-bold text-white mb-4\">\r\n            Welcome to BlockVault Legal\r\n          </h1>\r\n          \r\n          <p className=\"text-slate-400 mb-8\">\r\n            Connect your wallet to access secure legal document management with zero-knowledge proofs and blockchain verification.\r\n          </p>\r\n\r\n          <Button\r\n            onClick={connectWallet}\r\n            disabled={connecting}\r\n            className=\"w-full\"\r\n            size=\"lg\"\r\n          >\r\n            {connecting ? (\r\n              <>\r\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                Connecting...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Wallet className=\"w-4 h-4 mr-2\" />\r\n                Connect Wallet\r\n                <ArrowRight className=\"w-4 h-4 ml-2\" />\r\n              </>\r\n            )}\r\n          </Button>\r\n\r\n          <div className=\"mt-6 p-4 bg-slate-800/50 rounded-lg\">\r\n            <h3 className=\"text-sm font-medium text-white mb-2\">Features:</h3>\r\n            <ul className=\"text-xs text-slate-400 space-y-1\">\r\n              <li>• Verifiable document redaction (ZKPT)</li>\r\n              <li>• AI analysis with cryptographic proofs (ZKML)</li>\r\n              <li>• Role-based access control</li>\r\n              <li>• Blockchain-anchored chain of custody</li>\r\n              <li>• Secure document sharing</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * Test the permission mapping in RBAC context\r\n */\r\n\r\nimport { UserRole, getPermissionsForRole } from '../types/rbac';\r\n\r\n// Simulate the actionPermissionMap from RBACContext\r\nconst actionPermissionMap: Record<string, keyof ReturnType<typeof getPermissionsForRole>> = {\r\n  'view_case': 'canViewCase',\r\n  'canCreateCase': 'canCreateCase',\r\n  'edit_case': 'canEditCaseDetails',\r\n  'manage_members': 'canAddRemoveMembers',\r\n  'canNotarizeDocuments': 'canNotarizeDocuments',\r\n  'view_documents': 'canViewAllDocuments',\r\n  'canCreateRedactions': 'canCreateRedactions',\r\n  'grant_access': 'canGrantRevokeAccess',\r\n  'view_shared': 'canViewSharedByMe',\r\n  'view_received': 'canViewReceivedDocs',\r\n  'canRequestSignatures': 'canRequestSignatures',\r\n  'fund_escrow': 'canFundEscrow',\r\n  'canSignDocuments': 'canSignDocuments',\r\n  'canRunZKMLAnalysis': 'canRunZKMLAnalysis',\r\n};\r\n\r\nexport const testPermissionMapping = () => {\r\n  console.log('🧪 Testing Permission Mapping...\\n');\r\n  \r\n  const testRole: UserRole = 'lead-attorney';\r\n  const permissions = getPermissionsForRole(testRole);\r\n  \r\n  console.log(`Testing role: ${testRole}`);\r\n  console.log('='.repeat(50));\r\n  \r\n  // Test the specific action that was failing\r\n  const action = 'canCreateCase';\r\n  const permission = actionPermissionMap[action];\r\n  \r\n  console.log(`Action: ${action}`);\r\n  console.log(`Mapped Permission: ${permission}`);\r\n  console.log(`Permission Value: ${permissions[permission!]}`);\r\n  console.log(`Result: ${permissions[permission!] ? '✅ ALLOWED' : '❌ DENIED'}`);\r\n  \r\n  // Test all actions\r\n  console.log('\\n📋 Testing all actions:');\r\n  Object.entries(actionPermissionMap).forEach(([action, permission]) => {\r\n    const hasPermission = permissions[permission];\r\n    console.log(`${action}: ${hasPermission ? '✅' : '❌'}`);\r\n  });\r\n  \r\n  return permissions[permission!];\r\n};\r\n\r\nexport const testSpecificAction = (role: UserRole, action: string) => {\r\n  const permissions = getPermissionsForRole(role);\r\n  const permission = actionPermissionMap[action];\r\n  \r\n  if (!permission) {\r\n    console.log(`❌ Action '${action}' not found in mapping`);\r\n    return false;\r\n  }\r\n  \r\n  const hasPermission = permissions[permission];\r\n  console.log(`🔍 Testing '${action}' for ${role}: ${hasPermission ? '✅ ALLOWED' : '❌ DENIED'}`);\r\n  \r\n  return hasPermission;\r\n};\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n  FileText, \r\n  Shield, \r\n  PenTool, \r\n  Brain, \r\n  Users, \r\n  Search, \r\n  Plus, \r\n  Edit, \r\n  Lock, \r\n  CheckCircle, \r\n  Clock, \r\n  AlertCircle,\r\n  Download\r\n} from 'lucide-react';\r\nimport { Button } from '../components/ui/Button';\r\nimport { Card } from '../components/ui/Card';\r\nimport { Input } from '../components/ui/Input';\r\nimport { NotarizeDocumentModal } from '../components/legal/NotarizeDocumentModal';\r\nimport { RedactionModal } from '../components/legal/RedactionModal';\r\nimport { ESignatureModal } from '../components/legal/ESignatureModal';\r\nimport { ZKMLAnalysisModal } from '../components/legal/ZKMLAnalysisModal';\r\nimport { SignatureRequests } from '../components/legal/SignatureRequests';\r\nimport { SentSignatureRequests } from '../components/legal/SentSignatureRequests';\r\nimport { CreateCaseModal } from '../components/case/CreateCaseModal';\r\nimport { CaseProvider } from '../contexts/CaseContext';\r\nimport { ApiTester } from '../utils/apiTest';\r\nimport DemoLauncher from '../components/demo/DemoLauncher';\r\nimport { useRBAC } from '../contexts/RBACContext';\r\nimport { getRoleDisplayName } from '../types/rbac';\r\nimport { UserOnboarding } from '../components/onboarding/UserOnboarding';\r\nimport { WalletConnection } from '../components/auth/WalletConnection';\r\nimport { debugUserPermissions } from '../utils/debugPermissions';\r\nimport { testAllPermissions } from '../utils/testPermissions';\r\nimport { testPermissionMapping } from '../utils/testPermissionMapping';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface LegalDocument {\r\n  id: string;\r\n  file_id: string;\r\n  name: string;\r\n  docHash: string;\r\n  cid: string;\r\n  status: 'registered' | 'awaiting_signatures' | 'executed' | 'revoked';\r\n  timestamp: number;\r\n  owner: string;\r\n  parentHash?: string;\r\n  signatures?: {\r\n    required: number;\r\n    completed: number;\r\n    signers: { address: string; signed: boolean }[];\r\n  };\r\n  transformations?: string[];\r\n  transformationType?: string;\r\n  redactionRules?: any;\r\n  originalDocumentId?: string;\r\n  aiAnalysis?: {\r\n    model: string;\r\n    result: number;\r\n    verified: boolean;\r\n  };\r\n}\r\n\r\nexport const LegalDashboard: React.FC = () => {\r\n  const { currentUser, canPerformAction, isOnboarded, completeOnboarding, userProfile, setCurrentUser } = useRBAC();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedTab, setSelectedTab] = useState<'cases' | 'documents' | 'signatures' | 'sent-signatures' | 'analysis' | 'chain'>('cases');\r\n  const [chainOfCustody, setChainOfCustody] = useState<any[]>([]);\r\n  const [showNotarizeModal, setShowNotarizeModal] = useState(false);\r\n  const [showRedactionModal, setShowRedactionModal] = useState(false);\r\n  const [showESignatureModal, setShowESignatureModal] = useState(false);\r\n  const [showZKMLModal, setShowZKMLModal] = useState(false);\r\n  const [showCreateCaseModal, setShowCreateCaseModal] = useState(false);\r\n  const [showRequestSignatureModal, setShowRequestSignatureModal] = useState(false);\r\n  const [selectedDocument, setSelectedDocument] = useState<LegalDocument | null>(null);\r\n  const [showDebugPanel, setShowDebugPanel] = useState(false);\r\n  const [debugResults, setDebugResults] = useState<any>(null);\r\n\r\n  // Load legal documents from localStorage only (no mock data)\r\n  const [legalDocuments, setLegalDocuments] = useState<LegalDocument[]>(() => {\r\n    const storedDocs = JSON.parse(localStorage.getItem('legal_documents') || '[]');\r\n    return storedDocs;\r\n  });\r\n\r\n  const filteredDocuments = legalDocuments.filter(doc =>\r\n    doc.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const refreshDocuments = useCallback(() => {\r\n    const storedDocs = JSON.parse(localStorage.getItem('legal_documents') || '[]');\r\n    setLegalDocuments(storedDocs);\r\n    buildChainOfCustody(storedDocs);\r\n  }, []);\r\n\r\n  const buildChainOfCustody = (documents: LegalDocument[]) => {\r\n    const chain: any[] = [];\r\n    \r\n    // Load existing chain of custody entries from localStorage\r\n    const existingChain = JSON.parse(localStorage.getItem('chain_of_custody') || '[]');\r\n    chain.push(...existingChain);\r\n    \r\n    // Build chain of custody entries from documents\r\n    documents.forEach(doc => {\r\n      // Add document creation/notarization entry\r\n      chain.push({\r\n        id: `create_${doc.id}`,\r\n        documentId: doc.file_id,\r\n        documentName: doc.name,\r\n        action: 'Document Notarized',\r\n        timestamp: doc.timestamp,\r\n        user: doc.owner,\r\n        details: 'Document uploaded, hashed, and registered on blockchain',\r\n        type: 'creation',\r\n        hash: doc.docHash,\r\n        cid: doc.cid,\r\n        status: doc.status\r\n      });\r\n\r\n      // Add transformation entries (redactions, etc.)\r\n      if (doc.transformationType === 'redaction') {\r\n        chain.push({\r\n          id: `redact_${doc.id}`,\r\n          documentId: doc.file_id,\r\n          documentName: doc.name,\r\n          action: 'Document Redacted',\r\n          timestamp: doc.timestamp,\r\n          user: doc.owner,\r\n          details: `Document redacted using ZKPT protocol. Rules: ${JSON.stringify(doc.redactionRules)}`,\r\n          type: 'transformation',\r\n          transformationType: 'redaction',\r\n          parentHash: doc.parentHash,\r\n          originalDocumentId: doc.originalDocumentId,\r\n          hash: doc.docHash,\r\n          cid: doc.cid\r\n        });\r\n      }\r\n\r\n      // Add signature entries\r\n      if (doc.signatures) {\r\n        doc.signatures.signers.forEach((signer, index) => {\r\n          if (signer.signed) {\r\n            chain.push({\r\n              id: `sign_${doc.id}_${index}`,\r\n              documentId: doc.file_id,\r\n              documentName: doc.name,\r\n              action: 'Document Signed',\r\n              timestamp: doc.timestamp + (index * 1000), // Stagger timestamps\r\n              user: signer.address,\r\n              details: `Document electronically signed by ${signer.address}`,\r\n              type: 'signature',\r\n              hash: doc.docHash\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      // Add AI analysis entries\r\n      if (doc.aiAnalysis) {\r\n        chain.push({\r\n          id: `ai_${doc.id}`,\r\n          documentId: doc.file_id,\r\n          documentName: doc.name,\r\n          action: 'AI Analysis Performed',\r\n          timestamp: doc.timestamp + 5000, // After document creation\r\n          user: 'AI System',\r\n          details: `AI analysis performed using ZKML protocol. Model: ${doc.aiAnalysis.model}, Result: ${doc.aiAnalysis.result}`,\r\n          type: 'analysis',\r\n          verified: doc.aiAnalysis.verified,\r\n          hash: doc.docHash\r\n        });\r\n      }\r\n    });\r\n\r\n    // Sort by timestamp (most recent first)\r\n    chain.sort((a, b) => b.timestamp - a.timestamp);\r\n    \r\n    setChainOfCustody(chain);\r\n  };\r\n\r\n  // Refresh documents when component mounts or when localStorage changes\r\n  useEffect(() => {\r\n    refreshDocuments();\r\n    \r\n    // Listen for storage changes (when documents are added from other components)\r\n    const handleStorageChange = (e: StorageEvent) => {\r\n      if (e.key === 'legal_documents') {\r\n        refreshDocuments();\r\n      }\r\n    };\r\n    \r\n    // Listen for custom events (when documents are added from case management)\r\n    const handleDocumentsUpdated = () => {\r\n      refreshDocuments();\r\n    };\r\n\r\n    // Listen for chain of custody updates\r\n    const handleChainOfCustodyUpdated = () => {\r\n      refreshDocuments();\r\n    };\r\n    \r\n    window.addEventListener('storage', handleStorageChange);\r\n    window.addEventListener('legalDocumentsUpdated', handleDocumentsUpdated);\r\n    window.addEventListener('chainOfCustodyUpdated', handleChainOfCustodyUpdated);\r\n    \r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange);\r\n      window.removeEventListener('legalDocumentsUpdated', handleDocumentsUpdated);\r\n      window.removeEventListener('chainOfCustodyUpdated', handleChainOfCustodyUpdated);\r\n    };\r\n  }, [refreshDocuments]);\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'registered':\r\n        return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\r\n      case 'awaiting_signatures':\r\n        return <Clock className=\"w-4 h-4 text-yellow-500\" />;\r\n      case 'executed':\r\n        return <CheckCircle className=\"w-4 h-4 text-blue-500\" />;\r\n      case 'revoked':\r\n        return <AlertCircle className=\"w-4 h-4 text-red-500\" />;\r\n      default:\r\n        return <Clock className=\"w-4 h-4 text-gray-500\" />;\r\n    }\r\n  };\r\n\r\n  const handleDocumentAction = (action: string, document: LegalDocument) => {\r\n    setSelectedDocument(document);\r\n    \r\n    switch (action) {\r\n      case 'redact':\r\n        setShowRedactionModal(true);\r\n        break;\r\n      case 'sign':\r\n        setShowESignatureModal(true);\r\n        break;\r\n      case 'request-signature':\r\n        setShowRequestSignatureModal(true);\r\n        break;\r\n      case 'analyze':\r\n        setShowZKMLModal(true);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const runDebugTests = async () => {\r\n    try {\r\n      const results = await ApiTester.runAllTests();\r\n      setDebugResults(results);\r\n      toast.success('Debug tests completed');\r\n    } catch (error) {\r\n      console.error('Debug tests failed:', error);\r\n      toast.error('Debug tests failed');\r\n    }\r\n  };\r\n\r\n  const runPermissionTests = () => {\r\n    console.log('Running permission tests...');\r\n    testAllPermissions();\r\n    toast.success('Permission tests completed - check console');\r\n  };\r\n\r\n  const runPermissionMappingTests = () => {\r\n    console.log('Running permission mapping tests...');\r\n    testPermissionMapping();\r\n    toast.success('Permission mapping tests completed - check console');\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'cases', label: 'Case Management', icon: Users },\r\n    { id: 'documents', label: 'Legal Documents', icon: FileText },\r\n    { id: 'signatures', label: 'Signature Requests', icon: PenTool },\r\n    { id: 'sent-signatures', label: 'Sent Requests', icon: Users },\r\n    { id: 'analysis', label: 'AI Analysis', icon: Brain },\r\n    { id: 'chain', label: 'Chain of Custody', icon: Shield }\r\n  ];\r\n\r\n  // Check if wallet is connected\r\n  if (!currentUser?.walletAddress) {\r\n    return (\r\n      <WalletConnection\r\n        onConnect={(address) => {\r\n          setCurrentUser({\r\n            walletAddress: address,\r\n            currentRole: undefined,\r\n            currentCaseId: undefined\r\n          });\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Check if user needs onboarding\r\n  if (!isOnboarded && currentUser?.walletAddress) {\r\n    return (\r\n      <UserOnboarding\r\n        onComplete={(role, firmName) => {\r\n          completeOnboarding(role, firmName);\r\n          toast.success('Welcome to BlockVault Legal!');\r\n        }}\r\n        userAddress={currentUser.walletAddress}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Debug permissions for current user\r\n  if (currentUser?.currentRole) {\r\n    console.log('Current user role:', currentUser.currentRole);\r\n    debugUserPermissions(currentUser.currentRole);\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-900\">\r\n      {/* Header */}\r\n      <div className=\"bg-slate-800 border-b border-slate-700\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex items-center justify-between h-16\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center\">\r\n                <Shield className=\"w-6 h-6 text-white\" />\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-xl font-semibold text-white\">BlockVault Legal</h1>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <p className=\"text-sm text-slate-400\">ZK-powered legal document management</p>\r\n          {currentUser?.currentRole && (\r\n            <>\r\n              <span className=\"text-slate-500\">•</span>\r\n              <span className=\"text-sm text-blue-400 font-medium\">\r\n                {getRoleDisplayName(currentUser.currentRole)}\r\n              </span>\r\n            </>\r\n          )}\r\n          {userProfile?.firmName && (\r\n            <>\r\n              <span className=\"text-slate-500\">•</span>\r\n              <span className=\"text-sm text-green-400 font-medium\">\r\n                {userProfile.firmName}\r\n              </span>\r\n            </>\r\n          )}\r\n        </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex space-x-3\">\r\n              <DemoLauncher />\r\n              <Button \r\n                variant=\"outline\" \r\n                size=\"sm\"\r\n                onClick={() => setShowDebugPanel(!showDebugPanel)}\r\n              >\r\n                Debug\r\n              </Button>\r\n              {currentUser?.currentRole && (\r\n                <div className=\"text-sm text-slate-400\">\r\n                  Can Create Case: {canPerformAction('canCreateCase') ? '✅' : '❌'}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Debug Panel */}\r\n      {showDebugPanel && (\r\n        <div className=\"bg-slate-800 border-b border-slate-700 p-4\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-white\">Debug Panel</h3>\r\n              <div className=\"flex space-x-2\">\r\n                <Button \r\n                  variant=\"outline\" \r\n                  size=\"sm\"\r\n                  onClick={runDebugTests}\r\n                >\r\n                  API Tests\r\n                </Button>\r\n                <Button \r\n                  variant=\"outline\" \r\n                  size=\"sm\"\r\n                  onClick={runPermissionTests}\r\n                >\r\n                  Permission Tests\r\n                </Button>\r\n                <Button \r\n                  variant=\"outline\" \r\n                  size=\"sm\"\r\n                  onClick={runPermissionMappingTests}\r\n                >\r\n                  Mapping Tests\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            {debugResults && (\r\n              <div className=\"bg-slate-900 rounded-lg p-4\">\r\n                <pre className=\"text-sm text-green-400 overflow-auto\">\r\n                  {JSON.stringify(debugResults, null, 2)}\r\n                </pre>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Content */}\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Search and Actions */}\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <div className=\"flex-1 max-w-md\">\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4\" />\r\n              <Input\r\n                placeholder=\"Search documents...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex space-x-3\">\r\n            {canPerformAction('canNotarizeDocuments') && (\r\n              <Button\r\n                onClick={() => setShowNotarizeModal(true)}\r\n                className=\"flex items-center space-x-2\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                <span>Notarize Document</span>\r\n              </Button>\r\n            )}\r\n            {canPerformAction('canCreateCase') && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => setShowCreateCaseModal(true)}\r\n                className=\"flex items-center space-x-2\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                <span>New Case</span>\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex space-x-1 bg-slate-800 rounded-lg p-1\">\r\n          {tabs.map((tab) => {\r\n            const Icon = tab.icon;\r\n            return (\r\n              <button\r\n                key={tab.id}\r\n                onClick={() => setSelectedTab(tab.id as any)}\r\n                className={`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                  selectedTab === tab.id\r\n                    ? 'bg-blue-500 text-white'\r\n                    : 'text-slate-400 hover:text-white hover:bg-slate-700'\r\n                }`}\r\n              >\r\n                <Icon className=\"w-4 h-4\" />\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Tab Content */}\r\n        <div className=\"mt-8\">\r\n          {selectedTab === 'cases' && (\r\n            <CaseProvider>\r\n              <div className=\"space-y-6\">\r\n                <div className=\"text-center py-12\">\r\n                  <Users className=\"w-16 h-16 text-slate-400 mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-medium text-white mb-2\">Case Management</h3>\r\n                  <p className=\"text-slate-400\">\r\n                    Create and manage legal case files with role-based access control\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CaseProvider>\r\n          )}\r\n\r\n          {selectedTab === 'documents' && (\r\n            <div className=\"space-y-6\">\r\n              {filteredDocuments.length === 0 ? (\r\n                <div className=\"text-center py-12\">\r\n                  <FileText className=\"w-16 h-16 text-slate-400 mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-medium text-white mb-2\">No Legal Documents</h3>\r\n                  <p className=\"text-slate-400\">\r\n                    Upload and notarize documents to get started with legal document management\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {filteredDocuments.map((document) => (\r\n                    <Card key={document.id} className=\"hover:bg-slate-800/50 transition-colors\">\r\n                      <div className=\"p-6\">\r\n                        <div className=\"flex items-start justify-between mb-4\">\r\n                          <div className=\"flex items-center space-x-3\">\r\n                            <div className=\"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center\">\r\n                              <FileText className=\"w-5 h-5 text-blue-500\" />\r\n                            </div>\r\n                            <div>\r\n                              <h3 className=\"font-medium text-white\">{document.name}</h3>\r\n                              <p className=\"text-sm text-slate-400\">\r\n                                {new Date(document.timestamp).toLocaleDateString()}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            {getStatusIcon(document.status)}\r\n                            <span className=\"text-xs text-slate-400 capitalize\">\r\n                              {document.status.replace('_', ' ')}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2 mb-4\">\r\n                          <div className=\"flex items-center justify-between text-sm\">\r\n                            <span className=\"text-slate-400\">Hash:</span>\r\n                            <span className=\"text-white font-mono text-xs\">\r\n                              {document.docHash.slice(0, 8)}...\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"flex items-center justify-between text-sm\">\r\n                            <span className=\"text-slate-400\">IPFS CID:</span>\r\n                            <span className=\"text-white font-mono text-xs\">\r\n                              {document.cid.slice(0, 8)}...\r\n                            </span>\r\n                          </div>\r\n                          {document.parentHash && (\r\n                            <div className=\"flex items-center justify-between text-sm\">\r\n                              <span className=\"text-slate-400\">Parent Document:</span>\r\n                              <span className=\"text-blue-400 font-mono text-xs\">\r\n                                {document.parentHash.slice(0, 8)}...\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                          {document.transformationType && (\r\n                            <div className=\"flex items-center justify-between text-sm\">\r\n                              <span className=\"text-slate-400\">Transformation:</span>\r\n                              <span className=\"text-purple-400 capitalize\">\r\n                                {document.transformationType}\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                          {canPerformAction('canCreateRedactions') ? (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleDocumentAction('redact', document)}\r\n                            >\r\n                              <Edit className=\"w-3 h-3 mr-1\" />\r\n                              Redact\r\n                            </Button>\r\n                          ) : (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              disabled\r\n                              className=\"opacity-50 cursor-not-allowed\"\r\n                              title={`${getRoleDisplayName(currentUser?.currentRole || 'client')} role cannot create redactions`}\r\n                            >\r\n                              <Lock className=\"w-3 h-3 mr-1\" />\r\n                              Redact\r\n                            </Button>\r\n                          )}\r\n\r\n                          {canPerformAction('canSignDocuments') ? (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleDocumentAction('sign', document)}\r\n                            >\r\n                              <PenTool className=\"w-3 h-3 mr-1\" />\r\n                              Sign\r\n                            </Button>\r\n                          ) : (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              disabled\r\n                              className=\"opacity-50 cursor-not-allowed\"\r\n                              title={`${getRoleDisplayName(currentUser?.currentRole || 'client')} role cannot sign documents`}\r\n                            >\r\n                              <Lock className=\"w-3 h-3 mr-1\" />\r\n                              Sign\r\n                            </Button>\r\n                          )}\r\n\r\n                          {canPerformAction('canRequestSignatures') ? (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleDocumentAction('request-signature', document)}\r\n                            >\r\n                              <Users className=\"w-3 h-3 mr-1\" />\r\n                              Request\r\n                            </Button>\r\n                          ) : (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              disabled\r\n                              className=\"opacity-50 cursor-not-allowed\"\r\n                              title={`${getRoleDisplayName(currentUser?.currentRole || 'client')} role cannot request signatures`}\r\n                            >\r\n                              <Lock className=\"w-3 h-3 mr-1\" />\r\n                              Request\r\n                            </Button>\r\n                          )}\r\n\r\n                          {canPerformAction('canRunZKMLAnalysis') ? (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleDocumentAction('analyze', document)}\r\n                            >\r\n                              <Brain className=\"w-3 h-3 mr-1\" />\r\n                              Analyze\r\n                            </Button>\r\n                          ) : (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              disabled\r\n                              className=\"opacity-50 cursor-not-allowed\"\r\n                              title={`${getRoleDisplayName(currentUser?.currentRole || 'client')} role cannot run AI analysis`}\r\n                            >\r\n                              <Lock className=\"w-3 h-3 mr-1\" />\r\n                              Analyze\r\n                            </Button>\r\n                          )}\r\n\r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"outline\"\r\n                            onClick={() => window.open(`/documents/${document.file_id}/download`, '_blank')}\r\n                          >\r\n                            <Download className=\"w-3 h-3 mr-1\" />\r\n                            Download\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </Card>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {selectedTab === 'signatures' && <SignatureRequests />}\r\n          {selectedTab === 'sent-signatures' && <SentSignatureRequests />}\r\n          {selectedTab === 'analysis' && (\r\n            <div className=\"text-center py-12\">\r\n              <Brain className=\"w-16 h-16 text-slate-400 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-white mb-2\">AI Analysis</h3>\r\n              <p className=\"text-slate-400\">\r\n                Run verifiable AI analysis on your legal documents using ZKML protocols\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {selectedTab === 'chain' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"text-lg font-semibold text-white\">Chain of Custody</h3>\r\n                  <p className=\"text-sm text-slate-400\">\r\n                    Complete audit trail of all document actions and transformations\r\n                  </p>\r\n                </div>\r\n                <div className=\"text-sm text-slate-400\">\r\n                  {chainOfCustody.length} entries\r\n                </div>\r\n              </div>\r\n\r\n              {chainOfCustody.length === 0 ? (\r\n                <div className=\"text-center py-12\">\r\n                  <Shield className=\"w-16 h-16 text-slate-400 mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-medium text-white mb-2\">No Chain of Custody Data</h3>\r\n                  <p className=\"text-slate-400\">\r\n                    Upload and process documents to see the complete audit trail\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-4\">\r\n                  {chainOfCustody.map((entry, index) => (\r\n                    <Card key={entry.id} className=\"hover:bg-slate-800/50 transition-colors\">\r\n                      <div className=\"p-6\">\r\n                        <div className=\"flex items-start justify-between mb-4\">\r\n                          <div className=\"flex items-center space-x-3\">\r\n                            <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${\r\n                              entry.type === 'creation' ? 'bg-green-500/10' :\r\n                              entry.type === 'transformation' ? 'bg-purple-500/10' :\r\n                              entry.type === 'signature' ? 'bg-blue-500/10' :\r\n                              entry.type === 'analysis' ? 'bg-orange-500/10' :\r\n                              'bg-slate-500/10'\r\n                            }`}>\r\n                              {entry.type === 'creation' && <FileText className=\"w-5 h-5 text-green-500\" />}\r\n                              {entry.type === 'transformation' && <Edit className=\"w-5 h-5 text-purple-500\" />}\r\n                              {entry.type === 'signature' && <PenTool className=\"w-5 h-5 text-blue-500\" />}\r\n                              {entry.type === 'analysis' && <Brain className=\"w-5 h-5 text-orange-500\" />}\r\n                            </div>\r\n                            <div>\r\n                              <h4 className=\"font-medium text-white\">{entry.action}</h4>\r\n                              <p className=\"text-sm text-slate-400\">{entry.documentName}</p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-right\">\r\n                            <div className=\"text-sm text-slate-400\">\r\n                              {new Date(entry.timestamp).toLocaleString()}\r\n                            </div>\r\n                            <div className=\"text-xs text-slate-500\">\r\n                              {entry.user}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2 mb-4\">\r\n                          <p className=\"text-sm text-slate-300\">{entry.details}</p>\r\n                          \r\n                          {entry.hash && (\r\n                            <div className=\"flex items-center justify-between text-sm\">\r\n                              <span className=\"text-slate-400\">Document Hash:</span>\r\n                              <span className=\"text-white font-mono text-xs\">\r\n                                {entry.hash.slice(0, 16)}...\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n\r\n                          {entry.cid && (\r\n                            <div className=\"flex items-center justify-between text-sm\">\r\n                              <span className=\"text-slate-400\">IPFS CID:</span>\r\n                              <span className=\"text-white font-mono text-xs\">\r\n                                {entry.cid.slice(0, 16)}...\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n\r\n                          {entry.parentHash && (\r\n                            <div className=\"flex items-center justify-between text-sm\">\r\n                              <span className=\"text-slate-400\">Parent Document:</span>\r\n                              <span className=\"text-blue-400 font-mono text-xs\">\r\n                                {entry.parentHash.slice(0, 16)}...\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n\r\n                          {entry.transformationType && (\r\n                            <div className=\"flex items-center justify-between text-sm\">\r\n                              <span className=\"text-slate-400\">Transformation:</span>\r\n                              <span className=\"text-purple-400 capitalize\">\r\n                                {entry.transformationType}\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n\r\n                          {entry.verified !== undefined && (\r\n                            <div className=\"flex items-center justify-between text-sm\">\r\n                              <span className=\"text-slate-400\">Verified:</span>\r\n                              <span className={`${entry.verified ? 'text-green-400' : 'text-red-400'}`}>\r\n                                {entry.verified ? 'Yes' : 'No'}\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Chain connection line */}\r\n                        {index < chainOfCustody.length - 1 && (\r\n                          <div className=\"flex justify-center\">\r\n                            <div className=\"w-px h-4 bg-slate-600\"></div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </Card>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      {showNotarizeModal && (\r\n        <NotarizeDocumentModal\r\n          onClose={() => setShowNotarizeModal(false)}\r\n          onSuccess={() => {\r\n            setShowNotarizeModal(false);\r\n            refreshDocuments();\r\n            toast.success('Document notarized successfully!');\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {showRedactionModal && selectedDocument && (\r\n        <RedactionModal\r\n          document={selectedDocument}\r\n          onClose={() => {\r\n            setShowRedactionModal(false);\r\n            setSelectedDocument(null);\r\n          }}\r\n          onSuccess={() => {\r\n            setShowRedactionModal(false);\r\n            setSelectedDocument(null);\r\n            refreshDocuments(); // Refresh the documents list to show the new redacted document\r\n            toast.success('Verifiable redaction created!');\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {showESignatureModal && selectedDocument && (\r\n        <ESignatureModal\r\n          document={selectedDocument}\r\n          onClose={() => {\r\n            setShowESignatureModal(false);\r\n            setSelectedDocument(null);\r\n          }}\r\n          onSuccess={() => {\r\n            setShowESignatureModal(false);\r\n            setSelectedDocument(null);\r\n            refreshDocuments();\r\n            toast.success('Document signed successfully!');\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {showZKMLModal && selectedDocument && (\r\n        <ZKMLAnalysisModal\r\n          document={selectedDocument}\r\n          onClose={() => {\r\n            setShowZKMLModal(false);\r\n            setSelectedDocument(null);\r\n          }}\r\n          onSuccess={() => {\r\n            setShowZKMLModal(false);\r\n            setSelectedDocument(null);\r\n            refreshDocuments();\r\n            toast.success('AI analysis completed!');\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {showCreateCaseModal && (\r\n        <CaseProvider>\r\n          <CreateCaseModal\r\n            onClose={() => setShowCreateCaseModal(false)}\r\n            onSuccess={(caseId) => {\r\n              setShowCreateCaseModal(false);\r\n              toast.success('Case created successfully!');\r\n            }}\r\n          />\r\n        </CaseProvider>\r\n      )}\r\n\r\n      {showRequestSignatureModal && selectedDocument && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4\">\r\n            <h3 className=\"text-lg font-semibold text-white mb-4\">Request Signature</h3>\r\n            <p className=\"text-slate-400 mb-4\">\r\n              Request signature functionality will be implemented here.\r\n            </p>\r\n            <div className=\"flex space-x-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => {\r\n                  setShowRequestSignatureModal(false);\r\n                  setSelectedDocument(null);\r\n                }}\r\n                className=\"flex-1\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  setShowRequestSignatureModal(false);\r\n                  setSelectedDocument(null);\r\n                  toast.success('Signature request sent!');\r\n                }}\r\n                className=\"flex-1\"\r\n              >\r\n                Send Request\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};","/**\r\n * Debug utility for checking user permissions\r\n */\r\n\r\nimport { UserRole, getPermissionsForRole } from '../types/rbac';\r\n\r\nexport const debugUserPermissions = (role: UserRole) => {\r\n  console.log('=== USER PERMISSIONS DEBUG ===');\r\n  console.log('User Role:', role);\r\n  \r\n  const permissions = getPermissionsForRole(role);\r\n  console.log('Permissions:', permissions);\r\n  \r\n  console.log('Can Create Case:', permissions.canCreateCase);\r\n  console.log('Can Notarize Documents:', permissions.canNotarizeDocuments);\r\n  console.log('Can Create Redactions:', permissions.canCreateRedactions);\r\n  console.log('Can Sign Documents:', permissions.canSignDocuments);\r\n  console.log('Can Request Signatures:', permissions.canRequestSignatures);\r\n  console.log('Can Run ZKML Analysis:', permissions.canRunZKMLAnalysis);\r\n  \r\n  console.log('=== END DEBUG ===');\r\n  \r\n  return permissions;\r\n};\r\n\r\nexport const testPermissionCheck = (role: UserRole, permission: keyof typeof permissions) => {\r\n  const permissions = getPermissionsForRole(role);\r\n  const hasPermission = permissions[permission];\r\n  \r\n  console.log(`Testing permission: ${permission} for role: ${role}`);\r\n  console.log(`Result: ${hasPermission ? 'ALLOWED' : 'DENIED'}`);\r\n  \r\n  return hasPermission;\r\n};\r\n","/**\r\n * Test script to verify RBAC permissions are working correctly\r\n */\r\n\r\nimport { UserRole, getPermissionsForRole } from '../types/rbac';\r\n\r\nexport const testAllPermissions = () => {\r\n  console.log('🧪 Testing RBAC Permissions...\\n');\r\n  \r\n  const roles: UserRole[] = ['lead-attorney', 'associate', 'paralegal', 'client', 'external-counsel'];\r\n  \r\n  roles.forEach(role => {\r\n    console.log(`\\n📋 Testing role: ${role}`);\r\n    console.log('='.repeat(50));\r\n    \r\n    const permissions = getPermissionsForRole(role);\r\n    \r\n    // Test case creation permission\r\n    console.log(`✅ Can Create Case: ${permissions.canCreateCase ? 'YES' : 'NO'}`);\r\n    \r\n    // Test document permissions\r\n    console.log(`📄 Can Notarize Documents: ${permissions.canNotarizeDocuments ? 'YES' : 'NO'}`);\r\n    console.log(`🔒 Can Create Redactions: ${permissions.canCreateRedactions ? 'YES' : 'NO'}`);\r\n    console.log(`✍️ Can Sign Documents: ${permissions.canSignDocuments ? 'YES' : 'NO'}`);\r\n    console.log(`📝 Can Request Signatures: ${permissions.canRequestSignatures ? 'YES' : 'NO'}`);\r\n    \r\n    // Test AI analysis permission\r\n    console.log(`🤖 Can Run ZKML Analysis: ${permissions.canRunZKMLAnalysis ? 'YES' : 'NO'}`);\r\n    \r\n    // Test case management permissions\r\n    console.log(`👁️ Can View Case: ${permissions.canViewCase ? 'YES' : 'NO'}`);\r\n    console.log(`✏️ Can Edit Case Details: ${permissions.canEditCaseDetails ? 'YES' : 'NO'}`);\r\n    console.log(`👥 Can Add/Remove Members: ${permissions.canAddRemoveMembers ? 'YES' : 'NO'}`);\r\n  });\r\n  \r\n  console.log('\\n🎯 Expected Results:');\r\n  console.log('- Lead Attorney: Should be able to create cases ✅');\r\n  console.log('- Associate: Should be able to create cases ✅');\r\n  console.log('- Paralegal: Should NOT be able to create cases ❌');\r\n  console.log('- Client: Should NOT be able to create cases ❌');\r\n  console.log('- External Counsel: Should NOT be able to create cases ❌');\r\n  \r\n  return true;\r\n};\r\n\r\n// Test specific permission for a role\r\nexport const testPermission = (role: UserRole, permission: keyof ReturnType<typeof getPermissionsForRole>) => {\r\n  const permissions = getPermissionsForRole(role);\r\n  const result = permissions[permission];\r\n  \r\n  console.log(`🔍 Testing ${permission} for ${role}: ${result ? '✅ ALLOWED' : '❌ DENIED'}`);\r\n  \r\n  return result;\r\n};\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport { Toaster } from 'react-hot-toast';\r\nimport { Header } from './components/Header';\r\nimport { Dashboard } from './pages/Dashboard';\r\nimport { LegalDashboard } from './pages/LegalDashboard';\r\nimport { AuthProvider } from './contexts/AuthContext';\r\nimport { FileProvider } from './contexts/FileContext';\r\nimport { RBACProvider } from './contexts/RBACContext';\r\n\r\nfunction App() {\r\n  return (\r\n    <AuthProvider>\r\n      <FileProvider>\r\n        <RBACProvider>\r\n          <Router>\r\n          <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900\">\r\n            <Header />\r\n            <main className=\"container mx-auto px-4 py-8\">\r\n              <Routes>\r\n                <Route path=\"/\" element={<Dashboard />} />\r\n                <Route path=\"/legal\" element={<LegalDashboard />} />\r\n              </Routes>\r\n            </main>\r\n            <Toaster\r\n              position=\"top-right\"\r\n              toastOptions={{\r\n                duration: 4000,\r\n                style: {\r\n                  background: 'rgba(30, 41, 59, 0.9)',\r\n                  color: '#f1f5f9',\r\n                  border: '1px solid rgba(59, 130, 246, 0.3)',\r\n                  backdropFilter: 'blur(10px)',\r\n                },\r\n                success: {\r\n                  iconTheme: {\r\n                    primary: '#10b981',\r\n                    secondary: '#f1f5f9',\r\n                  },\r\n                },\r\n                error: {\r\n                  iconTheme: {\r\n                    primary: '#ef4444',\r\n                    secondary: '#f1f5f9',\r\n                  },\r\n                },\r\n              }}\r\n            />\r\n          </div>\r\n          </Router>\r\n        </RBACProvider>\r\n      </FileProvider>\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nconst root = ReactDOM.createRoot(\r\n  document.getElementById('root') as HTMLElement\r\n);\r\n\r\nroot.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n"],"names":["module","exports","options","usePureJavaScript","require","forge","asn1","pki","pemToDer","pem","msg","decode","procType","type","Error","util","createBuffer","body","privateKeyFromPem","error","headerType","obj","fromDer","privateKeyFromAsn1","privateKeyToPem","key","maxline","toDer","privateKeyToAsn1","getBytes","encode","privateKeyInfoToPem","tls","initConnectionState","state","c","sp","client","entity","ConnectionEnd","read","cipherState","init","cipher","createDecipher","keys","server_write_key","client_write_key","iv","server_write_IV","client_write_IV","write","createCipher","cipherFunction","decrypt_aes_cbc_sha1","encrypt_aes_cbc_sha1","macLength","mac_length","macFunction","hmac_sha1","record","s","rval","mac","macKey","sequenceNumber","fragment","putBytes","updateSequenceNumber","version","minor","Versions","TLS_1_0","random","getBytesSync","start","TLS_1_1","output","update","finish","encrypt_aes_cbc_sha1_padding","length","blockSize","input","decrypt","padding","fillWithByte","decrypt_aes_cbc_sha1_padding","len","paddingLength","last","i","at","truncate","macLen","mac2","mac1","hmac","create","digest","compareMacs","CipherSuites","id","name","initSecurityParameters","bulk_cipher_algorithm","BulkCipherAlgorithm","aes","cipher_type","CipherType","block","enc_key_length","block_length","fixed_iv_length","record_iv_length","mac_algorithm","MACAlgorithm","mac_key_length","f","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","ref","__self","__source","q","a","g","b","d","e","h","call","defaultProps","$$typeof","props","_owner","current","Fragment","jsx","jsxs","_crypto","isNodejs","process","versions","prng","plugin","ctx","seed","time","reseeds","generated","keyBytes","md","pools","Array","_reseedSync","messageLength","_seed","needed","collect","seedFileSync","_2powK","seedBytes","formatKey","formatSeed","defaultSeedFile","getRandomValues","globalScope","crypto","msCrypto","arr","count","Math","max","min","entropy","Uint32Array","floor","putInt32","QuotaExceededError","hi","lo","next","putByte","pool","generate","callback","generateSync","increment","err","nextTick","seedFile","bytes","_reseed","setImmediate","randomBytes","toString","substr","collectInt","x","String","fromCharCode","registerWorker","worker","self","addEventListener","listener","data","removeEventListener","postMessage","piTable","rol","word","bits","ror","rc2","expandKey","effKeyBits","L","T","T1","T8","ceil","TM","setAt","encrypt","mixRound","mashRound","j","_finish","_input","_output","_iv","K","push","getInt16Le","R","runPlan","plan","val","putInt16Le","ptr","ctr","putBuffer","pad","startEncrypting","createEncryptionCipher","startDecrypting","createDecryptionCipher","modes","transformIV","isArray","tmp","ints","blocks","getInt32","inc32","from64To32","num","ecb","this","_ints","_inBlock","_outBlock","unpad","overflow","cbc","_prev","slice","cfb","_partialBlock","_partialOutput","_partialBytes","inputLength","partialBytes","clear","ofb","gcm","_R","additionalData","_cipherLength","_tagLength","tagLength","_tag","tag","_hashBlock","_hashSubkey","componentBits","_m","generateHashTable","ivLength","_j0","ghash","concat","_aDataLength","_s","afterFinish","lengths","multiply","y","z_i","v_i","pow","out","lsb","tableMultiply","z","x_i","ah","multiplier","perInt","size","shft","generateSubHashTable","mid","half","m_i","m_j","mgf","mgf1","maskLen","t","ByteBuffer","digestLength","log","levels","sLevelInfo","sLoggers","sConsoleLogger","LEVEL_LOCKED","NO_LEVEL_CHECK","INTERPOLATE","level","index","toUpperCase","logMessage","message","messageLevelIndex","logger","flags","prepareStandard","standard","category","prepareFull","args","full","format","apply","prepareStandardFull","standardFull","arguments","timestamp","Date","makeLogger","logFunction","setLevel","lock","addLogger","console","warn","info","debug","levelHandlers","warning","verbose","handler","window","location","query","URL","href","searchParams","has","get","consoleLogger","ssh","_addBigIntegerToBuffer","buffer","hexVal","hexToBytes","_addStringToBuffer","putString","_sha1","sha","sha1","privateKeyToPutty","privateKey","passphrase","comment","algorithm","encryptionAlgorithm","ppk","pubbuffer","pub","encode64","priv","privbuffer","qInv","encLen","aeskey","copy","encrypted","mackey","macbuffer","toHex","publicKeyToOpenSSH","privateKeyToOpenSSH","encryptRsaPrivateKey","legacy","getPublicKeyFingerprint","md5","encoding","hex","delimiter","match","join","aa","ca","encodeURIComponent","da","Set","ea","fa","ha","add","ia","document","createElement","ja","ka","la","ma","v","acceptsBooleans","attributeName","attributeNamespace","mustUseProperty","propertyName","sanitizeURL","removeEmptyString","split","forEach","toLowerCase","ra","sa","ta","pa","isNaN","qa","test","oa","removeAttribute","setAttribute","setAttributeNS","replace","xlinkHref","ua","va","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","iterator","Ka","La","A","assign","Ma","stack","trim","Na","Oa","prepareStackTrace","defineProperty","set","Reflect","construct","displayName","includes","Pa","render","Qa","_context","_payload","_init","Ra","Sa","Ta","nodeName","Va","_valueTracker","getOwnPropertyDescriptor","constructor","configurable","enumerable","getValue","setValue","stopTracking","Ua","Wa","checked","value","Xa","activeElement","Ya","defaultChecked","defaultValue","_wrapperState","initialChecked","Za","initialValue","controlled","ab","bb","cb","db","ownerDocument","eb","fb","selected","defaultSelected","disabled","gb","dangerouslySetInnerHTML","children","hb","ib","jb","textContent","kb","lb","mb","nb","namespaceURI","innerHTML","valueOf","firstChild","removeChild","appendChild","MSApp","execUnsafeLocalFunction","ob","lastChild","nodeType","nodeValue","pb","animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","qb","rb","sb","style","indexOf","setProperty","charAt","substring","tb","menuitem","area","base","br","col","embed","hr","img","keygen","link","meta","param","source","track","wbr","ub","vb","is","wb","xb","target","srcElement","correspondingUseElement","parentNode","yb","zb","Ab","Bb","Cb","stateNode","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","onError","Ob","Pb","Qb","Rb","Sb","Tb","Vb","alternate","return","Wb","memoizedState","dehydrated","Xb","Zb","child","sibling","Yb","$b","ac","unstable_scheduleCallback","bc","unstable_cancelCallback","cc","unstable_shouldYield","dc","unstable_requestPaint","B","unstable_now","ec","unstable_getCurrentPriorityLevel","fc","unstable_ImmediatePriority","gc","unstable_UserBlockingPriority","hc","unstable_NormalPriority","ic","unstable_LowPriority","jc","unstable_IdlePriority","kc","lc","oc","clz32","pc","qc","LN2","rc","sc","tc","uc","pendingLanes","suspendedLanes","pingedLanes","entangledLanes","entanglements","vc","xc","yc","zc","Ac","eventTimes","Cc","C","Dc","Ec","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Map","Pc","Qc","Rc","Sc","delete","pointerId","Tc","nativeEvent","blockedOn","domEventName","eventSystemFlags","targetContainers","Vc","Wc","priority","isDehydrated","containerInfo","Xc","Yc","dispatchEvent","shift","Zc","$c","ad","bd","cd","ReactCurrentBatchConfig","dd","ed","transition","fd","gd","hd","Uc","stopPropagation","jd","kd","ld","nd","od","keyCode","charCode","pd","qd","rd","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","preventDefault","cancelBubble","persist","isPersistent","wd","xd","yd","sd","eventPhase","bubbles","cancelable","timeStamp","now","isTrusted","td","ud","view","detail","vd","Ad","screenX","screenY","clientX","clientY","pageX","pageY","ctrlKey","shiftKey","altKey","metaKey","getModifierState","zd","button","buttons","relatedTarget","fromElement","toElement","movementX","movementY","Bd","Dd","dataTransfer","Fd","Hd","animationName","elapsedTime","pseudoElement","Id","clipboardData","Jd","Ld","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Nd","Od","Alt","Control","Meta","Shift","Pd","Qd","code","repeat","locale","which","Rd","Td","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Vd","touches","targetTouches","changedTouches","Xd","Yd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","Zd","$d","ae","be","documentMode","ce","de","ee","fe","ge","he","ie","le","color","date","datetime","email","month","number","password","range","search","tel","text","url","week","me","ne","oe","event","listeners","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","oninput","Ae","detachEvent","Be","Ce","attachEvent","De","Ee","Fe","He","Ie","Je","Ke","node","offset","nextSibling","Le","contains","compareDocumentPosition","Me","HTMLIFrameElement","contentWindow","Ne","contentEditable","Oe","focusedElem","selectionRange","documentElement","end","selectionStart","selectionEnd","defaultView","getSelection","extend","rangeCount","anchorNode","anchorOffset","focusNode","focusOffset","createRange","setStart","removeAllRanges","addRange","setEnd","element","left","scrollLeft","top","scrollTop","focus","Pe","Qe","Re","Se","Te","Ue","Ve","We","animationend","animationiteration","animationstart","transitionend","Xe","Ye","Ze","animation","$e","af","bf","cf","df","ef","ff","gf","hf","lf","mf","nf","Ub","instance","D","of","pf","qf","rf","sf","bind","capture","passive","J","u","w","F","tf","uf","parentWindow","vf","wf","na","xa","$a","ba","je","char","ke","unshift","xf","yf","zf","Af","Bf","Cf","Df","Ef","__html","Ff","setTimeout","Gf","clearTimeout","Hf","Promise","Jf","queueMicrotask","resolve","then","catch","If","Kf","Lf","Mf","previousSibling","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","E","G","Vf","H","Wf","Xf","Yf","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Zf","childContextTypes","$f","ag","bg","getChildContext","cg","__reactInternalMemoizedMergedChildContext","dg","eg","fg","gg","hg","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","I","zg","Ag","Bg","elementType","deletions","Cg","pendingProps","treeContext","retryLane","Dg","mode","Eg","Fg","Gg","memoizedProps","Hg","Ig","Jg","Kg","Lg","_stringRef","refs","Mg","Ng","Og","Pg","Qg","Rg","implementation","Sg","Tg","r","done","Ug","Vg","Wg","Xg","Yg","Zg","$g","_currentValue","bh","childLanes","ch","dependencies","firstContext","lanes","dh","eh","context","memoizedValue","fh","gh","hh","interleaved","ih","jh","kh","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","effects","lh","mh","eventTime","lane","payload","nh","oh","ph","qh","rh","sh","th","uh","vh","wh","xh","yh","tagName","zh","Ah","Bh","Ch","revealOrder","Dh","Eh","_workInProgressVersionPrimary","Fh","ReactCurrentDispatcher","Gh","Hh","M","N","O","Ih","Jh","Kh","Lh","P","Mh","Nh","Oh","Ph","Qh","Rh","Sh","Th","baseQueue","queue","Uh","Vh","Wh","lastRenderedReducer","action","hasEagerState","eagerState","lastRenderedState","dispatch","Xh","Yh","Zh","$h","ai","getSnapshot","bi","ci","Q","di","lastEffect","stores","ei","fi","gi","ii","destroy","deps","ji","ki","li","mi","ni","oi","pi","qi","ri","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","identifierPrefix","Ci","Di","Ei","isMounted","_reactInternals","enqueueSetState","enqueueReplaceState","enqueueForceUpdate","Fi","shouldComponentUpdate","isPureReactComponent","Gi","contextType","updater","Hi","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","Ii","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","Ji","Ki","Li","Mi","WeakMap","Ni","Oi","Pi","Qi","getDerivedStateFromError","componentDidCatch","Ri","componentStack","Si","pingCache","Ti","Ui","Vi","Wi","Xi","Yi","Zi","$i","aj","compare","bj","cj","dj","baseLanes","cachePool","transitions","ej","fj","gj","hj","ij","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","jj","kj","pendingContext","lj","zj","Aj","Bj","Cj","mj","nj","oj","fallback","pj","qj","sj","dataset","dgst","tj","uj","_reactRetry","rj","subtreeFlags","vj","wj","isBackwards","rendering","renderingStartTime","tail","tailMode","xj","Dj","S","Ej","Fj","wasMultiple","multiple","suppressHydrationWarning","onClick","onclick","createElementNS","autoFocus","createTextNode","Gj","Hj","Ij","Jj","U","Kj","WeakSet","V","Lj","W","Mj","Nj","Pj","Qj","Rj","Sj","Tj","Uj","Vj","insertBefore","_reactRootContainer","Wj","X","Xj","Yj","Zj","onCommitFiberUnmount","componentWillUnmount","ak","bk","ck","dk","ek","isHidden","fk","gk","display","hk","ik","jk","kk","__reactInternalSnapshotBeforeUpdate","src","Vk","lk","mk","nk","ok","Y","Z","pk","qk","rk","sk","tk","Infinity","uk","vk","wk","xk","yk","zk","Ak","Bk","Ck","Dk","callbackNode","expirationTimes","expiredLanes","wc","callbackPriority","ig","Ek","Fk","Gk","Hk","Ik","Jk","Kk","Lk","Mk","Nk","Ok","finishedWork","finishedLanes","Pk","timeoutHandle","Qk","Rk","Sk","Tk","Uk","mutableReadLanes","Bc","Oj","onCommitFiberRoot","mc","onRecoverableError","Wk","onPostCommitFiberRoot","Xk","Yk","$k","isReactComponent","pendingChildren","al","mutableSourceEagerHydrationData","bl","cache","pendingSuspenseBoundaries","dl","el","fl","gl","hl","il","yj","Zk","kl","reportError","ll","_internalRoot","ml","nl","ol","pl","rl","ql","unmount","unstable_scheduleHydration","splice","querySelectorAll","JSON","stringify","form","sl","usingClientEntryPoint","Events","tl","findFiberByHostInstance","bundleType","rendererPackageName","ul","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setErrorHandler","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","reconcilerVersion","__REACT_DEVTOOLS_GLOBAL_HOOK__","vl","isDisabled","supportsFiber","inject","createPortal","cl","createRoot","unstable_strictMode","findDOMNode","flushSync","hydrate","hydrateRoot","hydratedSources","_getVersion","_source","unmountComponentAtNode","unstable_batchedUpdates","unstable_renderSubtreeIntoContainer","jQuery","prng_aes","_prng_aes_output","_prng_aes_buffer","spawnPrng","_expandKey","_updateBlock","sha256","_ctx","navigator","_navBytes","mousemove","keypress","createInstance","registerAlgorithm","des","Algorithm","_createCipher","inBlock","outBlock","_keys","initialize","pc2bytes0","pc2bytes1","pc2bytes2","pc2bytes3","pc2bytes4","pc2bytes5","pc2bytes6","pc2bytes7","pc2bytes8","pc2bytes9","pc2bytes10","pc2bytes11","pc2bytes12","pc2bytes13","iterations","shifts","right","lefttmp","righttmp","_createKeys","spfunction1","spfunction2","spfunction3","spfunction4","spfunction5","spfunction6","spfunction7","spfunction8","looping","endloop","loopinc","right1","right2","oids","_IN","_I_","kem","BigInteger","jsbn","_createKDF","kdf","counterStart","hash","rsa","publicKey","keyLength","byteLength","bitLength","bytesToHex","mod","compareTo","ONE","zeros","fillString","encapsulation","kdf1","kdf2","pbe","encryptedPrivateKeyValidator","tagClass","Class","UNIVERSAL","Type","SEQUENCE","constructed","OID","captureAsn1","OCTETSTRING","PBES2AlgorithmsValidator","INTEGER","optional","pkcs12PbeParamsValidator","prfOidToMessageDigest","prfOid","prfAlgorithm","derToOid","oid","supported","prfAlgorithmToMessageDigest","factory","sha512","encryptPrivateKeyInfo","saltSize","dkLen","encryptedData","salt","countBytes","integerToDer","ivLen","encOid","cipherFn","pkcs5","pbkdf2","params","oidToDer","NULL","createPbkdf2Params","saltBytes","generatePkcs12Key","decryptPrivateKeyInfo","errors","validate","encryptionOid","getCipher","encryptionParams","encryptedPrivateKeyToPem","epki","encryptedPrivateKeyFromPem","rsaKey","wrapRsaPrivateKey","opensslDeriveBytes","dekInfo","parameters","decryptRsaPrivateKey","iter","blockLength","result","passBuf","undefined","putInt16","charCodeAt","Slen","Plen","buf","round","Inew","chunk","getCipherForPBES2","getCipherForPKCS12PBE","supportedOids","kdfOid","kdfSalt","kdfIterationCount","getInt","encIv","dIvLen","digests","p12","pkcs12","contentInfoValidator","CONTEXT_SPECIFIC","pfxValidator","safeBagValidator","SET","attributeValidator","certBagValidator","_getBagsByAttribute","safeContents","attrName","attrValue","bagType","safeBags","bag","attributes","_decodePkcs7Data","composed","_decryptSafeContents","pkcs7","encryptedDataValidator","contentType","encAlgorithm","encParameter","encryptedContentAsn1","_decodeSafeContents","strict","res","safeBag","validator","decoder","bagId","_decodeBagAttributes","bagAttributes","bagAsn1","bagValue","pkcs8ShroudedKeyBag","keyBag","certBag","certId","x509Certificate","certAsn1","cert","certificateFromAsn1","decodedAttrs","values","pkcs12FromAsn1","pfx","getBags","filter","localKeyId","localKeyIdHex","friendlyName","getBagsByFriendlyName","getBagsByLocalKeyId","content","macKeyBytes","macAlgorithm","sha384","macSalt","macIterations","parseInt","generateKey","getMac","macDigest","authSafe","contentInfo","_decodeAuthenticatedSafe","toPkcs12Asn1","useMac","generateLocalKeyId","bagAttrs","pairedCert","certificateFromPem","certificateToAsn1","attrs","BMPSTRING","contents","chain","certSafeBags","certBagAttrs","certSafeBag","certSafeContents","certCI","pkAsn1","keySafeContents","keyCI","macData","safe","macValue","algorithms","_initialized","_padding","_state","_w","fullMessageLength","messageLengthSize","messageLength64","int32s","h0","h1","h2","h3","h4","encodeUtf8","_update","compact","finalBlock","s2","_k","h5","h6","h7","t1","t2","s0","maj","baseN","_checkBitsParam","ByteStringBuffer","isArrayBuffer","isArrayBufferView","Buffer","Uint8Array","_constructedStringLength","browser","callbacks","MutationObserver","attr","div","observe","oldSetImmediate","global","ArrayBuffer","_optimizeConstructedString","isEmpty","str","putInt24","putInt24Le","putInt32Le","putInt","putSignedInt","getByte","getInt16","getInt24","getInt24Le","getInt32Le","getSignedInt","decodeUtf8","DataBuffer","readOffset","growSize","DataView","byteOffset","writeOffset","accommodate","amount","dst","setUint8","binary","base64","raw","Uint16Array","utf16","setInt16","setInt8","setInt32","getInt8","getUint8","utf8","xorBytes","s1","s3","int32ToBytes","_base64","_base64Idx","_base58","chr1","chr2","chr3","line","decode64","enc1","enc2","enc3","enc4","unescape","decodeURIComponent","escape","base58","subarray","deflate","api","inflate","_setStorageObject","removeItem","setItem","_getStorageObject","getItem","parse","_setItem","_getItem","_removeItem","empty","prop","_clearItems","_callStorageFunction","func","exception","idx","localStorage","ex","clearItems","part","argi","parts","exec","lastIndex","formatNumber","decimals","dec_point","thousands_sep","abs","toFixed","formatSize","bytesFromIP","ip","bytesFromIPv4","bytesFromIPv6","blanks","bytesToIP","bytesToIPv4","bytesToIPv6","zeroGroups","zeroMaxGroup","group","estimateCores","cores","hardwareConcurrency","Worker","Blob","blobUrl","createObjectURL","st","et","sample","samples","numWorkers","avg","reduce","revokeObjectURL","workers","results","terminate","map","overlaps","r1","overlap","r2","pss","saltLength","sLen","hLen","salt_","pssobj","modBits","emBits","emLen","mHash","m_","ps","dbMask","maskedDB","mask","em","checkLen","setState","forceUpdate","_status","_result","default","Children","toArray","only","Component","Profiler","PureComponent","StrictMode","Suspense","act","cloneElement","createContext","_currentValue2","_threadCount","Provider","Consumer","_defaultValue","_globalName","createFactory","createRef","forwardRef","isValidElement","lazy","memo","startTransition","unstable_act","_shortNames","publicKeyValidator","x509CertificateValidator","UTCTIME","GENERALIZEDTIME","BITSTRING","captureBitStringValue","rsassaPssParameterValidator","certificationRequestInfoValidator","certificationRequestValidator","_getAttribute","shortName","RDNAttributesAsArray","rdn","valueTagClass","CRIAttributesAsArray","seq","extensionRequest","extensions","certificateExtensionFromAsn1","_readSignatureParameters","fillDefaults","algorithmOid","hashOid","maskGenOid","maskGenHashOid","_createSignatureDigest","signatureOid","_verifySignature","scheme","certificate","sha1WithRSAEncryption","sha1WithRSASignature","signatureParameters","verify","signature","_dnToAsn1","PRINTABLESTRING","UTF8","_fillMissingFields","attribute","valueConstructed","certificateExtensionToAsn1","_fillMissingExtensionFields","extension","unused","b2","b3","digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly","cA","BOOLEAN","pathLenConstraint","server","objsign","reserved","sslCA","emailCA","objCA","altNames","altName","IA5STRING","ski","generateSubjectKeyIdentifier","subjectKeyIdentifier","keyIdentifier","authorityCertIssuer","issuer","serialNumber","subSeq","fullNameGeneralNames","_signatureParametersToAsn1","_CRIAttributesToAsn1","csr","computeHash","certificateToPem","publicKeyFromPem","publicKeyFromAsn1","publicKeyToPem","publicKeyToAsn1","publicKeyToRSAPublicKeyPem","publicKeyToRSAPublicKey","certificationRequestFromPem","certificationRequestFromAsn1","certificationRequestToPem","certificationRequestToAsn1","createCertificate","siginfo","validity","notBefore","notAfter","getField","sn","addField","subject","setSubject","uniqueId","setIssuer","setExtensions","exts","getExtension","ext","sign","tbsCertificate","getTBSCertificate","issued","expectedIssuer","actualIssuer","isIssuer","parent","iattr","sattr","verifySubjectKeyIdentifier","publicKeyOid","rsaEncryption","certVersion","serial","certSerialNumber","certSignatureOid","certSignatureParams","certinfoSignatureOid","certinfoSignatureParams","certSignature","certValidity1UTCTime","utcTimeToDate","certValidity2GeneralizedTime","generalizedTimeToDate","certValidity3UTCTime","certValidity4GeneralizedTime","imd","ibytes","certIssuer","certIssuerUniqueId","smd","sbytes","certSubject","certSubjectUniqueId","certExtensions","certificateExtensionsFromAsn1","subjectPublicKeyInfo","extseq","critical","ev","derToInteger","gn","createCertificationRequest","csrVersion","csrSignatureOid","csrSignatureParams","csrSignature","certificationRequestInfo","certificationRequestInfoSubject","getAttribute","addAttribute","certificationRequestInfoAttributes","setAttributes","getCertificationRequestInfo","cri","jan_1_1950","jan_1_2050","_dateToAsn1","dateToUtcTime","dateToGeneralizedTime","tbs","certificateExtensionsToAsn1","distinguishedNameToAsn1","dn","createCaStore","certs","caStore","getBySubject","ensureSubjectHasHash","getIssuer","addCertificate","hasCertificate","der1","listAllCertificates","certList","removeCertificate","certificateError","bad_certificate","unsupported_certificate","certificate_revoked","certificate_expired","certificate_unknown","unknown_ca","verifyCertificateChain","validityCheckDate","first","depth","selfSigned","parents","verified","keyUsage","basicConstraints","bcExt","keyUsageExt","vfd","ret","p7","_recipientFromAsn1","recipientInfoValidator","encryptedContent","parameter","encKey","_recipientToAsn1","_recipientsToAsn1","recipients","_signerToAsn1","digestAlgorithm","authenticatedAttributesAsn1","signatureAlgorithm","unauthenticatedAttributes","attrsAsn1","_attributeToAsn1","messageDigest","signingTime","_fromAsn1","rawCapture","_decryptContent","ciph","messageFromPem","messageFromAsn1","messageToPem","pemObj","toAsn1","envelopedData","createEnvelopedData","createEncryptedData","signedData","createSignedData","fromAsn1","certificates","crls","signers","digestAlgorithmIdentifiers","signerInfos","signedDataValidator","addSigner","signer","authenticatedAttributes","detached","detachedContent","mds","getBerValueLength","_signersToAsn1","addSignerInfos","addDigestAlgorithmIds","addCertificateRevokationList","crl","envelopedDataValidator","infos","_recipientsFromAsn1","recipientInfos","findRecipient","sAttr","rAttr","recipient","privKey","desCBC","addRecipient","keyLen","ciphFn","foldHeader","header","insertSpace","$1","candidate","insert","ltrim","contentDomain","headers","rMessage","rHeader","rCRLF","lines","_checkBufferLength","remaining","available","requested","APPLICATION","PRIVATE","NONE","ODESC","EXTERNAL","REAL","ENUMERATED","EMBEDDED","ROID","bitStringContents","original","excludeBitStringContents","equals","obj1","obj2","equal","includeBitStringContents","_fromDer","b1","longFormBytes","_getValueLength","decodeBitStrings","savedRead","savedRemaining","used","asn1Options","parseAllBytes","byteCount","useBitStringContents","lenBytes","valueBytes","utc","year","MM","DD","mm","ss","setUTCFullYear","setUTCHours","setTime","gentime","YYYY","fff","isUTC","parseFloat","setFullYear","setHours","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","integer","captureBitStringContents","_nonLatinRegex","prettyPrint","indentation","indent","IA5String","subvalues","sub","prf_TLS1","secret","label","slen","md5itr","sha1itr","md5bytes","sha1bytes","readVector","writeVector","major","TLS_1_2","SupportedVersions","Version","MaxFragment","PRFAlgorithm","tls_prf_sha256","none","rc4","des3","stream","aead","hmac_md5","hmac_sha256","hmac_sha384","hmac_sha512","CompressionMethod","ContentType","change_cipher_spec","alert","handshake","application_data","heartbeat","HandshakeType","hello_request","client_hello","server_hello","server_key_exchange","certificate_request","server_hello_done","certificate_verify","client_key_exchange","finished","Alert","Level","fatal","Description","close_notify","unexpected_message","bad_record_mac","decryption_failed","record_overflow","decompression_failure","handshake_failure","illegal_parameter","access_denied","decode_error","decrypt_error","export_restriction","protocol_version","insufficient_security","internal_error","user_canceled","no_renegotiation","HeartbeatMessageType","heartbeat_request","heartbeat_response","getCipherSuite","twoBytes","cs","handleUnexpected","open","send","description","handleHelloRequest","handshaking","handshakes","createAlert","flush","parseHelloMessage","session_id","cipher_suite","compression_method","cipher_suites","compression_methods","snl","session","server_name","serverNameList","cipherSuite","compressionMethod","createSecurityParameters","msgRandom","cRandom","client_random","sRandom","createRandom","prf_algorithm","compression_algorithm","pre_master_secret","master_secret","server_random","handleServerHello","fail","sessionId","expect","SCC","resuming","SCE","handleClientHello","sessionCache","getSession","clientHelloVersion","CCC","verifyClient","CCE","CKE","createRecord","createServerHello","createChangeCipherSpec","createConnectionState","createFinished","createServerKeyExchange","createCertificateRequest","createServerHelloDone","handleCertificate","certificate_list","cause","SKE","serverCertificate","clientCertificate","handleServerKeyExchange","SCR","handleClientKeyExchange","enc_pre_master_secret","getPrivateKey","CCV","handleCertificateRequest","certificate_types","certificate_authorities","certificateRequest","SHD","handleCertificateVerify","msgBytes","handleServerHelloDone","createClientKeyExchange","SER","createCertificateVerify","getClientSignature","handleChangeCipherSpec","SFI","CFI","handleFinished","SAD","CAD","peerCertificate","isConnected","connected","handleAlert","close","origin","handleHandshake","fragmented","hsTable","handleApplicationData","dataReady","handleHeartbeat","createHeartbeat","expectedHeartbeatPayload","heartbeatReceived","__","R0","R1","R2","R3","R4","ctTable","H0","H1","H2","H3","H4","H5","H6","H7","H8","H9","generateKeys","prf","tls10","km","client_write_MAC_key","server_write_MAC_key","createMode","compressionState","compressFunction","getTimezoneOffset","createClientHello","cipherSuites","cSuites","compressionMethods","cMethods","virtualHost","serverName","snList","extLength","hint","getCertificate","der","certBuffer","getSignature","certTypes","cAs","byteBuffer","payloadLength","plaintextLength","records","rec","tlsData","tlsDataReady","_certErrorToAlertDesc","verifyOptions","desc","_alertDescToCertError","createSessionCache","capacity","setSession","createConnection","cn","dpth","cts","closed","clearFail","reset","ready","compatibleVersion","_readRecordHeader","_readRecord","aligned","handlers","prepare","prepareHeartbeatRequest","prf_tls1","seqNum","RSAKeyManager","keyPair","getInstance","generateKeyPair","keypair","privateKeyPem","publicKeyPem","getKeyPair","stored","hasKeyPair","clearKeyPair","getPublicKey","rsaKeyManager","_reverseAlphabets","alphabet","TypeError","digits","carry","_encodeWithByteBuffer","regex","RegExp","table","from","reverse","_g","_r","sin","pop","sortIndex","performance","startTime","expirationTime","priorityLevel","scheduling","isInputPending","MessageChannel","port2","port1","onmessage","unstable_Profiling","unstable_continueExecution","unstable_forceFrameRate","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","unstable_runWithPriority","delay","unstable_wrapCallback","pkcs1","rsa_mgf1","maskLength","encode_rsa_oaep","mgf1Md","maxLength","lHash","PS","PS_length","DB","seedLength","seedMask","decode_rsa_oaep","expectedLength","maskedSeed","lHashPrime","in_ps","checkDCE","pbkdf2Sync","xor","u_c","u_c1","outer","inner","sha224","_states","_h","messageLength128","hlen","t1_hi","t1_lo","t2_hi","t2_lo","s0_hi","s0_lo","s1_hi","ch_hi","maj_hi","maj_lo","a_hi","a_lo","b_hi","b_lo","c_hi","c_lo","d_hi","d_lo","e_hi","e_lo","f_hi","f_lo","g_hi","g_lo","h_hi","h_lo","w2","w7","w15","w16","_key","_md","_ipadding","_opadding","keylen","prime","GCD_30_DELTA","THIRTY","fromInt","op_or","generateProbablePrime","rng","nextBytes","primeincFindPrimeWithoutWorkers","generateRandom","workLoad","workerScript","workerMessage","found","dAddOffset","primeincFindPrimeWithWorkers","primeincFindPrime","mrTests","getMillerRabinTests","millerRabinTests","maxBlockTime","_primeinc","deltaIdx","isProbablePrime","bits1","testBit","bitwiseTo","shiftLeft","byteValue","p7v","pkcs7asn1","encryptedContentInfoValidator","signerValidator","getAlgorithm","BlockCipher","_op","_decrypt","opts","privateKeyValidator","encryptOp","sbox","isbox","rcon","mix","imix","xtime","e2","e4","e8","sx","sx2","ime","temp","iNk","m0","m1","m2","m3","wnew","a2","c2","Nr","rsaPrivateKeyValidator","rsaPublicKeyValidator","digestInfoValidator","emsaPkcs1v15encode","oidBytes","digestInfo","_modPow","modPow","dP","subtract","dQ","modInverse","gcd","xp","xq","_encodePkcs1_v1_5","bt","padByte","padNum","numZeros","padBytes","_decodePkcs1_v1_5","_bnToBytes","_getMillerRabinTests","_detectNodeCrypto","fn","_detectSubtleCrypto","subtle","_detectSubtleMsCrypto","_intToUint8Array","yhex","expected","xhex","createKeyPairGenerationState","eInt","qBits","pBits","pqState","stepKeyPairGenerationState","total","p1","q1","phi","setPrivateKey","setPublicKey","modulusLength","publicExponent","publicKeyEncoding","privateKeyEncoding","pair","exportKey","pkcs8","setRsaPublicKey","genOp","oncomplete","exportOp","onerror","generateKeyPairSync","getPrime","_generateKeyPair","schemeOptions","_parseAllDigestBytes","algorithmIdentifier","md2","setRsaPrivateKey","privateKeyModulus","privateKeyPublicExponent","privateKeyPrivateExponent","privateKeyPrime1","privateKeyPrime2","privateKeyExponent1","privateKeyExponent2","privateKeyCoefficient","privateKeyToRSAPrivateKey","rsaPublicKey","publicKeyModulus","publicKeyExponent","publicKeyToSubjectPublicKeyInfo","dbits","fromNumber","fromString","nbi","am3","xl","am","appName","DM","DV","FV","F1","F2","rr","vv","BI_RC","int2char","intAt","nbv","nbits","Classic","Montgomery","mp","invDigit","mpl","mph","um","mt2","op_and","op_xor","op_andnot","lbit","cbit","NullExp","nNop","Barrett","q3","dlShiftTo","mu","divide","convert","revert","divRemTo","mulTo","multiplyTo","sqrTo","squareTo","ZERO","subTo","copyTo","u0","clamp","drShiftTo","fromRadix","lShiftTo","bs","cbs","bm","ds","rShiftTo","pm","pt","ts","ms","nsh","ys","y0","yt","d1","d2","isEven","exp","negate","toRadix","modPowInt","multiplyUpperTo","multiplyLowerTo","lowprimes","lplim","chunkSize","signum","intValue","dMultiply","op","changeBit","addTo","modInt","millerRabin","n1","getLowestSetBit","shiftRight","clone","shortValue","toByteArray","and","or","andNot","not","bitCount","setBit","clearBit","flipBit","remainder","divideAndRemainder","k1","g2","is1","asn1Validator","NativeBuffer","ed25519","messageToNativeBuffer","constants","PUBLIC_KEY_BYTE_LENGTH","PRIVATE_KEY_BYTE_LENGTH","SEED_BYTE_LENGTH","SIGN_BYTE_LENGTH","HASH_BYTE_LENGTH","scalarbase","pack","crypto_sign_keypair","privateKeyOid","ed25519Oid","EdDSA25519","privateKeyBytes","publicKeyBytes","ed25519PublicKey","publicKeyFromPrivateKey","signedMsg","sm","Float64Array","smlen","modL","crypto_sign","sig","chk","den","den2","den4","den6","set25519","gf1","o","unpack25519","pow2523","neq25519","par25519","gf0","unpackneg","scalarmult","crypto_verify_32","crypto_sign_open","D2","msgLen","cswap","sel25519","tx","ty","inv25519","pack25519","car25519","vn","t0","t3","t4","t5","t6","t7","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","b0","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","ns","def","getOwnPropertyNames","definition","globalThis","Function","toStringTag","getOwnPropertySymbols","propertyIsEnumerable","_typeof","toPropertyKey","toPrimitive","Number","_defineProperty","writable","ownKeys","_objectSpread2","getOwnPropertyDescriptors","defineProperties","PopStateEventType","createBrowserHistory","getUrlBasedHistory","window2","globalHistory","pathname","createLocation","usr","to","createPath","invariant","cond","getHistoryState","_objectSpread","parsePath","_ref","path","parsedPath","hashIndex","searchIndex","getLocation","createHref2","validateLocation","v5Compat","history","getIndex","handlePop","nextIndex","delta","createURL","createBrowserURLImpl","replaceState","listen","createHref","encodeLocation","historyState","pushState","DOMException","go","isAbsolute","startsWith","matchRoutes","routes","locationArg","matchRoutesImpl","basename","allowPartial","stripBasename","branches","flattenRoutes","sort","score","siblings","every","compareIndexes","routesMeta","childrenIndex","rankRouteBranches","matches","decoded","decodePath","matchRouteBranch","parentsMeta","parentPath","_hasParentOptionalSegments","flattenRoute","route","hasParentOptionalSegments","relativePath","caseSensitive","joinPaths","computeScore","_route$path","exploded","explodeOptionalSegments","segments","rest","isOptional","endsWith","required","restExploded","subpath","paramRe","dynamicSegmentValue","indexRouteValue","emptySegmentValue","staticSegmentValue","splatPenalty","isSplat","initialScore","some","segment","branch","matchedParams","matchedPathname","remainingPathname","matchPath","pathnameBase","normalizePathname","pattern","matcher","compiledParams","compilePath","captureGroups","memo2","_ref2","paramName","splatValue","regexpSource","_","startIndex","nextChar","getInvalidPathError","field","dest","getPathContributingMatches","getResolveToMatches","pathMatches","resolveTo","toArg","routePathnames","locationPathname","isPathRelative","isEmptyPath","toPathname","routePathnameIndex","toSegments","fromPathname","resolvePathname","normalizeSearch","normalizeHash","resolvePath","hasExplicitTrailingSlash","hasCurrentTrailingSlash","paths","isRouteErrorResponse","status","statusText","internal","validMutationMethodsArr","validRequestMethodsArr","DataRouterContext","React","DataRouterStateContext","RSCRouterContext","ViewTransitionContext","isTransitioning","FetchersContext","AwaitContext","NavigationContext","LocationContext","RouteContext","outlet","isDataRoute","RouteErrorContext","useInRouterContext","React2","useLocation","navigateEffectWarning","useIsomorphicLayoutEffect","static","useNavigate","router","useDataRouterContext","useCurrentRouteId","activeRef","navigate","async","fromRouteId","useNavigateStable","dataRouterContext","routePathnamesJson","relative","useNavigateUnstable","useResolvedPath","useRoutesImpl","dataRouterState","unstable_onError","future","parentMatches","routeMatch","parentParams","parentPathname","parentPathnameBase","parentRoute","warningOnce","locationFromContext","_parsedLocationArg$pa","parsedLocationArg","parentSegments","renderedMatches","_renderMatches","navigationType","DefaultErrorComponent","useRouteError","lightgrey","preStyles","backgroundColor","codeStyles","devInfo","fontStyle","defaultErrorElement","RenderErrorBoundary","super","revalidation","errorInfo","routeContext","component","RenderedRoute","_ref11","staticContext","errorElement","ErrorBoundary","_deepestRenderedBoundaryId","initialized","errorIndex","findIndex","renderFallback","fallbackIndex","HydrateFallback","hydrateFallbackElement","loaderData","errors2","needsToRunLoader","loader","reduceRight","shouldRenderHydrateFallback","matches2","getChildren","getDataRouterConsoleError","hookName","useDataRouterState","useRouteContext","thisRoute","_state$errors","routeId","alreadyWarned","alreadyWarned2","warnOnce","condition","React3","_ref19","Route","Router","_ref22","basenameProp","locationProp","staticProp","navigationContext","locationContext","trailingPathname","Routes","_ref23","createRoutesFromChildren","treePath","middleware","hasErrorBoundary","shouldRevalidate","handle","defaultMethod","defaultEncType","isHtmlElement","object","_formDataSupportsSubmitter","supportedFormEncTypes","getFormEncType","encType","getFormSubmissionInfo","method","formData","isFormElement","FormData","isButtonElement","isInputElement","isFormDataSubmitterSupported","prefix","append","invariant2","singleFetchUrl","reqUrl","loadRouteModule","routeModulesCache","routeModule","import","__reactRouterContext","isSpaMode","reload","isPageLinkDescriptor","page","isHtmlLinkDescriptor","rel","imageSrcSet","imageSizes","getNewMatchesForLinks","nextMatches","currentMatches","manifest","isNew","matchPathChanged","_currentMatches$index","manifestRoute","hasLoader","_currentMatches$","routeChoice","currentUrl","currentParams","nextUrl","nextParams","defaultShouldRevalidate","getModuleLinkHrefs","includeHydrateFallback","hrefs","clientActionModule","clientLoaderModule","hydrateFallbackModule","imports","flat","dedupeLinkDescriptors","descriptors","preloads","preloadsSet","deduped","descriptor","as","sorted","sortKeys","isFogOfWarEnabled","routeDiscovery","ssr","useDataRouterContext2","React8","useDataRouterStateContext","FrameworkContext","useFrameworkContext","composeEventHandlers","theirHandler","ourHandler","getActiveMatches","isHydrated","errorIdx","PrefetchPageLinks","_ref37","linkProps","_objectWithoutProperties","_excluded2","PrefetchPageLinksImpl","useKeyedPrefetchLinks","routeModules","keyedPrefetchLinks","setKeyedPrefetchLinks","interrupted","all","links","getKeyedPrefetchLinks","_ref38","_excluded3","newMatchesForData","newMatchesForAssets","dataHrefs","routesParams","foundOptOutRoute","_routeModules$m$route","hasClientLoader","moduleHrefs","_ref39","nonce","Scripts","scriptProps","serverHandoffString","renderMeta","isStatic","routerMatches","isRSCRouterContext","enableFogOfWar","didRenderScripts","initialScripts","_manifest$hmr","contextScript","routeModulesScript","hmr","runtime","routeIndex","routeVarName","manifestEntry","clientMiddlewareModule","chunks","varName","_ref33","sri","_excluded","routeIds","Boolean","initialRoutes","acc","getPartialManifest","entry","array","integrity","crossOrigin","mergeRefs","_len3","_key3","React9","RemixRootDefaultErrorBoundary","_ref40","isOutsideRemixApp","errorInstance","heyDeveloper","BoundaryShell","title","fontSize","errorString","background","_ref41","_routeModules$root","renderScripts","root","Layout","lang","charSet","fontFamily","isBrowser","__reactRouterVersion","BrowserRouter","_ref42","historyRef","React10","setStateImpl","newState","ABSOLUTE_URL_REGEX2","Link","_ref45","forwardedRef","absoluteHref","discover","prefetch","reloadDocument","replace2","preventScrollReset","viewTransition","_excluded5","isExternal","targetUrl","protocol","joinedPathname","useHref","shouldPrefetch","prefetchRef","prefetchHandlers","theirElementProps","frameworkContext","maybePrefetch","setMaybePrefetch","setShouldPrefetch","onFocus","onBlur","onMouseEnter","onMouseLeave","onTouchStart","observer","IntersectionObserver","entries","isIntersecting","threshold","disconnect","setIntent","cancelIntent","usePrefetchBehavior","internalOnClick","replaceProp","isModifiedEvent","shouldProcessLinkClick","useLinkClickHandler","_ref46","ariaCurrentProp","className","classNameProp","styleProp","_excluded6","routerState","vtContext","useDataRouterContext3","currentPath","currentLocation","nextPath","nextLocation","useViewTransitionState","nextLocationPathname","navigation","endSlashPosition","isActive","isPending","renderProps","ariaCurrent","Form","_ref47","fetcherKey","onSubmit","_excluded7","submit","useSubmit","formAction","URLSearchParams","indexValues","getAll","hasNakedIndexParam","qs","useFormAction","formMethod","submitter","submitMethod","getDataRouterConsoleError2","fetcherId","getUniqueFetcherId","currentRouteId","fetch","formEncType","_taggedTemplateLiteral","freeze","querySelector","_goober","__nonce__","head","theme","resolveValue","matchMedia","reducer","toastLimit","settings","toasts","toast","find","toastId","dismissed","visible","pausedAt","pauseDuration","blank","success","loading","custom","createdAt","ariaProps","role","toasterId","dismiss","dismissAll","remove","removeAll","promise","removeDelay","duration","reverseOrder","gutter","defaultPosition","position","updateHeight","startPause","endPause","calculateOffset","_templateObject","_templateObject2","_templateObject3","_templateObject4","primary","secondary","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject0","_templateObject1","_templateObject10","_templateObject11","$","_ref3","icon","iconTheme","_templateObject12","_templateObject13","_ref4","getAnimationStyle","_ref5","onHeightUpdate","getBoundingClientRect","subtree","childList","characterData","_e","_templateObject14","_ref6","toastOptions","containerStyle","containerClassName","bottom","pointerEvents","getPositionStyle","justifyContent","transform","zt","defaultAttributes","xmlns","viewBox","fill","stroke","strokeLinecap","strokeLinejoin","createLucideIcon$1","createLucideIcon","iconName","iconNode","absoluteStrokeWidth","string","Shield","Scale","Wallet","User","cx","cy","LogOut","points","x1","x2","y1","y2","Key","AlertCircle","_checkPrivateRedeclaration","_classPrivateFieldInitSpec","_assertClassBrand","_classPrivateFieldSet2","checkType","types","argument","resolveProperties","accum","seen","HEX","toJSON","BigInt","isError","isCallException","makeError","shortMessage","details","RangeError","assert","check","assertArgument","assertArgumentCount","expectedCount","_normalizeForms","normalize","assertPrivate","givenGuard","guard","operation","_classPrivateMethodInitSpec","_getBytes","getBytesCopy","isHexString","isBytesLike","HexCharacters","hexlify","datas","dataLength","dataSlice","zeroPad","zeroPadValue","BN_0","BN_1","maxValue","toTwos","_value","_width","getBigInt","getNumber","limit","fault","_bits","getUint","isInteger","Nibbles","toBigInt","toBeHex","toBeArray","toQuantity","WordSize","Padding","passProperties","_guard","resultNames","getNames","setNames","names","throwError","wrapped","toObject","items","deep","item","Result","_names2","_len","wrap","nameCounts","_classPrivateFieldSet","_classPrivateFieldGet","proxy","Proxy","receiver","_len2","_key2","_names","thisArg","fromItems","Coder","localName","dynamic","_throwError","_data","_dataLength","_Writer_brand","Writer","appendWriter","writer","_writeData","writeBytes","paddingOffset","writeValue","writeUpdatableValue","_data2","_offset","_bytesRead","_parent","_maxInflation","_Reader_brand","Reader","allowLoose","maxInflation","consumed","subReader","reader","readBytes","loose","_peekBytes","_incrementBytesRead","readValue","readIndex","_classPrivateFieldGet2","bytesRead","alignedLength","isSafeInteger","outputLen","blockLen","exists","checkFinished","destroyed","U32_MASK64","_32n","fromBig","lst","Al","rotlSH","rotlSL","rotlBH","rotlBL","u64","toBig","shrSH","_l","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","rotr32L","Bl","add3L","Cl","add3H","low","add4L","Dl","add4H","add5H","add5L","El","u8a","createView","rotr","toBytes","TextEncoder","utf8ToBytes","Hash","_cloneInto","wrapConstructor","hashCons","hashC","bytesLength","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","_0n","_1n","_2n","_7n","_256n","_0x71n","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlL","Keccak","suffix","enableXOF","rounds","pos","posOut","state32","keccak","idx1","idx0","B0","B1","Tl","curH","curL","PI","keccakP","take","writeInto","bufferOut","xofInto","xof","digestInto","gen","keccak_256","locked","_keccak256","__keccak256","keccak256","register","BN_36","getChecksumAddress","address","chars","expanded","hashed","ibanLookup","ibanChecksum","checksum","Base36","getAddress","fromBase36","_gaurd","signed","Typed","_typedSymbol","_options","gaurd","minValue","isBigInt","isData","isString","tupleName","arrayLength","uint8","uint16","uint24","uint32","uint40","uint48","uint56","uint64","uint72","uint80","uint88","uint96","uint104","uint112","uint120","uint128","uint136","uint144","uint152","uint160","uint168","uint176","uint184","uint192","uint200","uint208","uint216","uint224","uint232","uint240","uint248","uint256","uint","int8","int16","int24","int32","int40","int48","int56","int64","int72","int80","int88","int96","int104","int112","int120","int128","int136","int144","int152","int160","int168","int176","int184","int192","int200","int208","int216","int224","int232","int240","int248","int256","int","bytes1","bytes2","bytes3","bytes4","bytes5","bytes6","bytes7","bytes8","bytes9","bytes10","bytes11","bytes12","bytes13","bytes14","bytes15","bytes16","bytes17","bytes18","bytes19","bytes20","bytes21","bytes22","bytes23","bytes24","bytes25","bytes26","bytes27","bytes28","bytes29","bytes30","bytes31","bytes32","bool","tuple","overrides","isTyped","dereference","AddressCoder","AnonymousCoder","coder","coders","arrayValues","unique","staticWriter","dynamicWriter","updateFuncs","dynamicOffset","updateFunc","baseOffset","unpack","baseReader","offsetReader","baseType","ArrayCoder","defaultChild","BooleanCoder","DynamicBytesCoder","BytesCoder","FixedBytesCoder","Empty","NullCoder","BN_MAX_UINT256","NumberCoder","maxUintValue","bounds","fromTwos","ignoreFunc","reason","badCodepoint","Utf8ErrorFuncs","ignore","getUtf8CodePoints","_bytes","extraLength","overlongMask","toUtf8Bytes","assertNormalize","toUtf8String","codePoint","StringCoder","TupleCoder","uniqueNames","setify","KwVisibDeploy","_kwVisib","KwVisib","_kwTypes","KwTypes","_kwModifiers","KwModifiers","Keywords","SimpleTokens","regexWhitespacePrefix","regexNumberPrefix","regexIdPrefix","regexId","regexType","_tokens","_TokenString_brand","TokenString","tokens","popKeyword","allowed","peek","popType","popParen","_subTokenString","popParams","linkNext","peekKeyword","peekType","_this$offset","token","linkBack","lex","brackets","commas","cur","allowSingle","included","consumeName","keyword","consumeKeywords","keywords","consumeMutability","modifiers","consumeParams","allowIndexed","ParamType","consumeGas","consumeEoi","_TokenString","regexArrayType","verifyBasicType","ParamTypeInternal","ErrorFragmentInternal","EventFragmentInternal","ConstructorFragmentInternal","FallbackFragmentInternal","FunctionFragmentInternal","StructFragmentInternal","_ParamType_brand","indexed","components","arrayChildren","isTuple","comp","isIndexable","walk","_this","walkAsync","promises","_walkAsync","isParamType","comps","bracket","arrayMatch","childType","_components$index","inputs","ConstructorFragment","ErrorFragment","EventFragment","FallbackFragment","FunctionFragment","StructFragment","isConstructor","isFragment","isEvent","isFunction","isStruct","NamedFragment","joinParams","selector","anonymous","topicHash","getTopicHash","payable","gas","stateMutability","errorObj","mutability","outputs","constant","getSelector","PanicReasons","paramTypeBytes","paramTypeNumber","defaultCoder","defaultMaxInflation","_AbiCoder_brand","AbiCoder","getDefaultValue","_getCoder","_setDefaultMaxInflation","defaultAbiCoder","getBuiltinCallException","abiCoder","transaction","invocation","isAddressable","checkAddress","resolveAddress","resolver","resolveName","BN__1","hexTrue","hexFalse","domainFieldTypes","chainId","verifyingContract","domainFieldNames","checkString","domainChecks","getBaseEncoder","boundsUpper","boundsLower","padOffset","hexPadRight","encodeType","fields","splitArray","_types2","_fullTypes","_encoderCache","_TypedDataEncoder_brand","TypedDataEncoder","_types","subtypes","primaryTypes","primaryType","checkCircular","subtype","getEncoder","encoder","_getEncoder","encodeData","hashStruct","_visit","visit","getPrimaryType","hashDomain","domain","domainFields","EIP712Domain","resolveNames","ensCache","getPayload","domainValues","domainTypes","typesWithDomain","subEncoder","encodedType","accessSetify","addr","storageKeys","storageKey","accessListify","localeCompare","ZeroHash","BN_2","BN_27","BN_28","BN_35","toUint256","_r2","_v2","_networkV","Signature","isValid","networkV","legacyChainId","getChainId","yParity","yParityAndS","compactSerialized","serialized","_type","bv","getChainIdV","getNormalizedV","assertError","_v","authorizationify","auth","createGetUrl","req","_signal","cancelled","credentials","allowInsecureAuthentication","controller","AbortController","timer","abort","timeout","addListener","Headers","signal","resp","_error","respBody","arrayBuffer","statusCode","statusMessage","defaultGetUrlFunc","reData","reIpfs","dataGatewayFunc","FetchResponse","textData","atob","decodeBase64","FetchRequest","getIpfsGatewayFunc","baseUrl","Gateways","fetchSignals","_listeners","_cancelled","FetchCancelSignal","request","checkSignal","_allowInsecure","_gzip","_headers","_method","_timeout","_url","_body","_bodyType","_creds","_preflight","_process","_retry","_throttle","_getUrlFunc","_FetchRequest_brand","hasBody","btoa","encodeBase64","allowGzip","getHeader","setHeader","clearHeaders","setCredentials","username","preflightFunc","preflight","processFunc","retryFunc","retry","getUrlFunc","slotInterval","maxAttempts","setThrottleParams","_send","getTime","cancel","redirect","lockConfig","getGateway","registerGateway","registerGetUrl","getUrl","createGetUrlFunc","createDataGateway","createIpfsGatewayFunc","attempt","expires","_request","_response","makeServerError","wait","response","throttle","stall","assertOk","_req$redirect","_req$clone","retryAfter","trunc","_req$clone2","_statusCode","_statusMessage","_headers2","_body2","_request2","bodyText","bodyJson","throwThrottleError","requestUrl","responseBody","responseStatus","ZeroAddress","LogDescription","topic","TransactionDescription","ErrorDescription","Indexed","isIndexed","_isIndexed","BuiltinErrors","_errors","_events","_functions","_abiCoder","_Interface_brand","Interface","fragments","abi","frags","receive","getAbiCoder","bucket","deploy","minimal","formatJson","getFunctionName","_getFunction","hasFunction","getFunction","forEachFunction","getEventName","_getEvent","hasEvent","getEvent","forEachEvent","getError","matching","matchStr","forEachError","_decodeParams","_encodeParams","encodeDeploy","decodeErrorResult","encodeErrorResult","decodeFunctionData","encodeFunctionData","decodeFunctionResult","parsed","parseTransaction","encodeFunctionResult","encodeFilterTopics","topics","encodeTopic","zeroPadBytes","encodeEventLog","dataTypes","dataValues","decodeEventLog","eventTopic","nonIndexed","resultIndexed","resultNonIndexed","nonIndexedIndex","indexedIndex","parseCallResult","parseLog","parseError","hexData","forceUnique","lastValue","valueLength","allowOptions","lastArg","toJson","FeeData","gasPrice","maxFeePerGas","maxPriorityFeePerGas","copyRequest","bigIntKeys","numberKeys","accessList","authorizationList","blockTag","enableCcipRead","customData","blobVersionedHashes","kzg","blobs","_transactions","Block","provider","transactions","TransactionResponse","parentHash","parentBeaconBlockRoot","difficulty","gasLimit","gasUsed","blobGasUsed","excessBlobGas","miner","prevRandao","extraData","baseFeePerGas","stateRoot","receiptsRoot","prefetchedTransactions","txs","getTransaction","indexOrHash","getPrefetchedTransaction","isMined","isLondon","orphanedEvent","orphan","Log","transactionHash","blockHash","blockNumber","removed","transactionIndex","getBlock","getTransactionReceipt","receipt","removedEvent","_logs","TransactionReceipt","logs","effectiveGasPrice","contractAddress","logsBloom","cumulativeGasUsed","blobGasPrice","fee","getResult","getTransactionResult","confirmations","getBlockNumber","createRemovedTransactionFilter","reorderedEvent","other","createReorderedTransactionFilter","_startBlock","maxFeePerBlobGas","_confirms","confirms","startBlock","nextScan","stopScanning","checkReplacement","getTransactionCount","mined","replacement","replaceableTransaction","checkReceipt","waiter","reject","cancellers","txListener","off","on","replaceListener","once","isLegacy","isBerlin","isCancun","_listener","EventPayload","emitter","removeListener","EventLog","iface","interface","eventName","eventSignature","UndecodedEventLog","_iface","ContractTransactionReceipt","_iface2","ContractTransactionResponse","ContractUnknownEventPayload","contract","ContractEventPayload","_log","canCall","canEstimate","estimateGas","canResolve","canSend","sendTransaction","getResolver","_filter","PreparedTopicFilter","runner","getRunner","resolvedArgs","getTopicFilter","feature","getProvider","copyOverrides","arg","_overrides","buildWrappedFallback","populateTransaction","noValue","noData","_contract","staticCall","buildWrappedMethod","getFragment","_runner","resolveArgs","staticCallResult","internalValues","getInternal","getSubInfo","topicHashify","hasSub","subs","getSub","foundFragment","_foundFragment","emit","starting","stop","started","lastEmit","payloadFunc","resultPromise","passArgs","_emit","BaseContract","_deployTx","addrPromise","deployTx","filters","connect","attach","getDeployedCode","getCode","waitForDeployment","deploymentTransaction","checkCode","_len4","_key4","buildWrappedEvent","queryTransaction","queryFilter","fromBlock","toBlock","getLogs","_len5","_key5","listenerCount","removeAllListeners","buildClass","Contract","_ContractBase","FENCED","read_compressed_payload","read_payload","u16","symbol_count","skip","pos_payload","read_width","read_buffer","read_bit","FULL","HALF","QRTR","MASK","symbols","decode_arithmetic","lookup","unsafe_atob","read_deltas","read_sorted","prev","read_sorted_arrays","read_array_while","read_mapped","read_linear_table","read_replacement_table","read_transposed","dx","dy","vN","flatMap","j_dy","quote_cp","cp","padStart","hex_cp","explode_cp","cps","codePointAt","str_from_cps","fromCodePoint","compare_arrays","S0","L0","V0","T0","T_COUNT","N_COUNT","V_COUNT","unpack_cc","packed","unpack_cp","SHIFTED_RANK","EXCLUSIONS","DECOMP","RECOMP","is_hangul","compose_pair","recomp","decomposed","init$1","check_order","s_index","v_index","t_index","mapped","prev_cc","nfd","nfc","prev_cp","composed_from_decomposed","STOP_CH","Array_from","group_has_cp","Emoji","is_emoji","MAPPED","IGNORED","CM","NSM","ESCAPE","NFC_CHECK","GROUPS","WHOLE_VALID","WHOLE_MAP","VALID","EMOJI_LIST","EMOJI_ROOT","read_sorted_array","read_sorted_set","set_add_many","unrestricted","read_chunked","wholes","recs","gs","union","complement","multi","add_to_union","expand","saved","read_trie","quoted_cp","should_escape","bidi_qq","safe_str_from_cps","quoter","tokens_from_str","token_count","norm","lastIndexOf","check_leading_underscore","emoji","check_label_extension","error_placement","check_fenced","groups","error_group_member","error_disallowed","determine_group","check_group","maker","whole","check_whole","flatten","quoted","where","consume_emoji_reversed","filter_fe0f","eaten","Zeros","checkComponent","ensNameSplit","ens_normalize","ensNormalize","namehash","dnsEncode","_maxLength","SHA2","isLE","dataView","roundClean","setBigUint64","_u32_max","wl","setUint32","oview","outLen","Chi","Maj","SHA256_K","IV","SHA256_W","SHA256","getUint32","W15","W2","T2","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA512","Fl","Gl","Hl","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","CHIl","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","anyGlobal","getGlobal","createHash","algo","_sha256","_sha512","__sha256","__sha512","locked256","locked512","hexes","hexToNumber","hexByte","byte","bytesToNumberBE","bytesToNumberLE","numberToBytesBE","numberToBytesLE","ensureBytes","concatBytes","arrays","sum","bitMask","u8n","u8fr","createHmacDrbg","hashLen","qByteLen","hmacFn","reseed","genUntil","pred","validatorFns","bigint","function","boolean","stringOrUint8Array","Fp","validateObject","validators","optValidators","checkField","fieldName","checkVal","_3n","_4n","_5n","_8n","power","modulo","pow2","invert","FpSqrt","p1div4","eql","sqr","c1","n2","mul","nv","legendreC","Q1div2","neg","tonelliShanks","FIELD_FIELDS","nLength","nBitLength","_nBitLength","nByteLength","getFieldBytesLength","fieldOrder","getMinHashLength","HMAC","assertHash","iHash","oHash","assertExists","assertBytes","validateBasic","curve","ORDER","BYTES","BITS","Gx","Gy","b2n","h2b","ut","DER","Err","_parseInt","toSig","sBytes","rBytesLeft","hexFromSig","shl","rhl","weierstrassPoints","CURVE","allowedPrivateKeyLengths","wrapPrivateKey","isTorsionFree","clearCofactor","allowInfinityPoint","fromBytes","endo","beta","splitScalar","validatePointOpts","_c","point","_isCompressed","toAffine","weierstrassEquation","x3","isWithinCurveOrder","assertGE","normPrivateKeyToScalar","pointPrecomputes","assertPrjPoint","Point","px","py","pz","fromAffine","is0","normalizeZ","toInv","invertBatch","fromHex","assertValidity","fromPrivateKey","BASE","_setWindowSize","windowSize","_WINDOW_SIZE","hasEvenY","isOdd","X1","Y1","Z1","X2","Y2","Z2","U1","U2","double","X3","Y3","Z3","wNAF","wnaf","wNAFCached","multiplyUnsafe","unsafeLadder","k1neg","k2neg","k2","k1p","k2p","scalar","fake","f1p","f2p","constTimeNegate","multiplyAndAddUnsafe","iz","inv","ax","ay","zz","cofactor","toRawBytes","isCompressed","windows","elm","precomputeWindow","precomputes","maxNumber","shiftBy","wbits","offset1","offset2","cond1","cond2","precomputesMap","ProjectivePoint","weierstrass","curveDef","bits2int","bits2int_modN","lowS","validateOpts","CURVE_ORDER","compressedLen","uncompressedLen","modN","invN","cat","sqrt","numToNByteStr","isBiggerThanHalfOrder","slcNum","recovery","fromCompact","fromDER","addRecoveryBit","recoverPublicKey","msgHash","radj","ir","u1","u2","hasHighS","normalizeS","toDERRawBytes","toDERHex","toCompactRawBytes","toCompactHex","utils","isValidPrivateKey","randomPrivateKey","fieldLen","minLen","reduced","precompute","isProbPub","ORDER_MASK","int2octets","prepSig","defaultSigOpts","prehash","extraEntropy","ent","h1int","seedArgs","k2sig","kBytes","normS","defaultVerOpts","getSharedSecret","privateA","publicB","drbg","_Point$BASE$multiplyA","_sig","derError","getHash","msgs","secp256k1P","secp256k1N","divNearest","sqrtMod","_6n","_11n","_22n","_23n","_44n","_88n","b22","b44","b88","b176","b220","b223","bitLen","redef","sqrtP","lhs","rhs","FpPow","sqrN","addN","subN","mulN","nums","lastMultiplied","inverted","FpInvertBatch","cmov","Field","secp256k1","defHash","createCurve","a1","POW_2_128","_privateKey","SigningKey","computePublicKey","compressedPublicKey","computeSharedSecret","pubKey","compressed","secpSig","addPoints","p0","pub0","pub1","hexlifyByte","unarrayifyInteger","_decodeChildren","childOffset","_decode","checkOffset","lengthLength","decodeRlp","arrayifyInteger","_encode","nibbles","encodeRlp","recoverAddress","pubkey","computeAddress","BN_MAX_UINT","BLOB_SIZE","getVersionedHash","versioned","handleAddress","handleAccessList","handleAuthorizationList","handleUint","handleNumber","formatAccessList","formatHashes","_parseEipSignature","_to","_nonce","_gasLimit","_gasPrice","_maxPriorityFeePerGas","_maxFeePerGas","_value2","_chainId","_accessList","_maxFeePerBlobGas","_blobVersionedHashes","_kzg","_blobs2","_auths","_Transaction_brand","Transaction","typeName","auths","_blobs","versionedHashes","blob","padded","commit","blobToKzgCommitment","proof","computeBlobKzgProof","commitment","blobToKZGCommitment","computeBlobProof","computeBlobKZGProof","getKzgLibrary","_getSerialized","unsignedHash","unsignedSerialized","fromPublicKey","isSigned","inferType","inferTypes","hasGasPrice","hasFee","hasAccessList","hasBlob","_parseLegacy","_parseEip2930","_parseEip1559","fBlobs","fCommits","fProofs","_parseEip4844","_parseEip7702","sidecar","_serializeLegacy","_serializeEip2930","_serializeEip1559","_serializeEip4844","_serializeEip7702","Alphabet","BN_58","getIpfsLink","MulticoinProviderPlugin","proivder","supportsCoinType","coinType","encodeAddress","decodeAddress","matcherIpfs","matchers","_supports","_resolver","_EnsResolver_brand","EnsResolver","supportsWildcard","supportsInterface","_fetch","ethCoinType","coinPlugin","plugins","getText","getContentHash","ipfs","encodeBase58","swarm","getAvatar","_getAvatar","linkage","avatar","owner","tokenId","tokenOwner","ownerOf","balance","balanceOf","metadataUrl","metadata","imageUrl","image","getEnsAddress","network","getNetwork","ensPlugin","getPlugin","fromName","currentName","_getResolver","funcName","ensAddr","_EnsResolver","allowNull","nullValue","arrayOf","srcKey","formatData","formatHash","_formatLog","_formatBlock","_formatReceiptLog","_formatTransactionReceipt","formatTransactionResponse","creates","nonceHex","getCreateAddress","NetworkPlugin","GasCostPlugin","effectiveBlock","costs","nullish","EnsPlugin","targetNetwork","_processFunc","FetchUrlFeeDataNetworkPlugin","Networks","_name","_plugins","Network","attachPlugin","getPlugins","computeIntrinsicGas","txBase","txCreate","txDataZero","txDataNonzero","txAccessListAddress","txAccessListStorageKey","injected","registerEth","ensNetwork","getGasStationPlugin","injectCommonNetworks","networkFunc","ensAddress","nameOrChainId","existing","parseUnits","frac","fetchFeeData","_feeData","maxFee","maxPriorityFee","_provider","_poller","_interval","_blockNumber","_PollingBlockSubscriber_brand","PollingBlockSubscriber","pollingInterval","_setTimeout","_poll","_clearTimeout","pause","dropWhilePaused","resume","_provider2","_poll2","_running","OnBlockSubscriber","_lastBlock","PollingBlockTagSubscriber","PollingOrphanSubscriber","_hash","PollingTransactionSubscriber","_provider3","_filter2","_poller2","_running2","_blockNumber2","_PollingEventSubscriber_brand","PollingEventSubscriber","_poll3","isPromise","getTag","UnmanagedSubscriber","concisify","getSubscription","_event","addresses","addAddress","defaultOptions","cacheTimeout","_subs","_pausedState","_destroyed","_networkPromise","_anyNetwork","_performCache","_lastBlockNumber","_nextTimer","_timers","_disableCcipRead","_AbstractProvider_brand","AbstractProvider","_network","disableCcipRead","ccipReadFetch","calldata","urls","sender","errorMessages","errorMessage","_wrapBlock","formatBlock","_wrapLog","formatLog","_wrapTransactionReceipt","formatTransactionReceipt","_wrapTransactionResponse","_detectNetwork","_perform","_getAddress","_getBlockTag","_getFilter","_address","_getTransactionRequest","detectNetwork","networkPromise","actual","getFeeData","getFeeDataFunc","_block","priorityFee","_getBlock","feeData","_tx","_checkNetwork","_call","getBalance","_getAccountValue","getStorage","_position","broadcastTransaction","signedTx","signedTransaction","prefetchTxs","_getProvider","lookupAddress","ensContract","resolverContract","waitForTransaction","waitForBlock","timerId","_func","_this$nextTimer","_this$nextTimer2","paused","_forEachSubscriber","subscriber","_getSubscriber","_recoverSubscriber","oldSub","newSub","_getSub","_hasSub","perform","txSender","ccipArgs","errorArgs","urlsOffset","urlsLength","urlsData","_parseString","_parseBytes","parseOffchainLookup","ccipResult","encodeBytes","_blockTag","includeTransactions","emitArgs","subscription","addressableMap","nameMap","numPad","bytesPad","checkProvider","populate","AbstractSigner","getNonce","populateCall","hasEip1559","populateAuthorization","_auth","txObj","signTransaction","authorize","authorization","_filterIdPromise","_hault","_FilterIdSubscriber_brand","FilterIdSubscriber","_subscribe","_emitResults","_recover","_teardown","filterId","filterIdPromise","FilterIdEventSubscriber","FilterIdPendingSubscriber","Primitive","deepCopy","getLowerCase","isPollable","polling","staticNetwork","batchStallTime","batchMaxSize","batchMaxCount","JsonRpcSigner","sendUncheckedTransaction","_from","hexTx","getRpcTransaction","timeouts","invalids","checkTx","sendTransactionHash","signMessage","_message","signTypedData","populated","unlock","_legacySignMessage","_nextId","_payloads","_drainTimer","_notReady","_pendingDetectNetwork","_JsonRpcApiProvider_brand","JsonRpcApiProvider","_resolve","_getOption","getRpcRequest","_this$nextId","_this$nextId2","jsonrpc","getRpcError","_start","_scheduleDrain","_waitUntilReady","dstKey","_a","spelunkData","_spelunkMessage","spelunkMessage","eth_sign","personal_sign","eth_signTypedData_v4","eth_signTransaction","eth_sendTransaction","eth_requestAccounts","wallet_requestAccounts","unsupported","_this$nextId3","_this$nextId4","getSigner","accountsPromise","accounts","account","listAccounts","stallTime","payloads","batch","_pollingInterval","JsonRpcApiPollingProvider","_providerInfo","BrowserProvider","ethereum","providerInfo","hasSigner","anyProvider","addProvider","finalize","filtered","uuid","Event","AuthContext","useAuth","AuthProvider","user","setUser","setLoading","setError","isAuthenticated","jwt","savedUser","parsedUser","validateToken","getApiBase","connectWallet","ethers","login","nonceResponse","json","loginResponse","updatedUser","logout","_jsx","CheckCircle","Download","Trash2","clsx","Button","variant","leftIcon","rightIcon","_jsxs","outline","danger","ghost","_Fragment","Card","hover","RSAManager","onClose","hasKeys","setHasKeys","isRegistered","setIsRegistered","checkRegistrationStatus","has_public_key","checkKeyStatus","hasLocalKeys","public_key_pem","downloadKeys","toISOString","download","click","deleteKeys","confirm","Header","_user$address","_user$address2","_user$address3","_user$address4","showRSAManager","setShowRSAManager","hasRSAKeys","setHasRSAKeys","Upload","Search","Plus","FolderOpen","Share2","FileContext","useFiles","FileProvider","files","setFiles","sharedFiles","setSharedFiles","outgoingShares","setOutgoingShares","getAuthHeaders","getAuthHeadersWithContentType","refreshFiles","refreshSharedFiles","shares","refreshOutgoingShares","uploadFile","file","aad","folder","Authorization","handleApiError","downloadFile","fileId","isSharedFile","encryptedKey","actualPassphrase","hasEncryptedKey","privateKeyObj","encryptedBytes","decryptError","deleteFile","shareFile","recipientAddress","revokeShare","shareId","File","Lock","rx","ry","Folder","Input","FileUpload","setFile","setPassphrase","setAad","setFolder","dragActive","setDragActive","fileInputRef","handleDrag","onDragEnter","onDragLeave","onDragOver","onDrop","formatFileSize","onChange","_fileInputRef$current","placeholder","Clock","HardDrive","Calendar","FileList","onShare","selectedFile","setSelectedFile","selectedFileData","setSelectedFileData","showPassphraseModal","setShowPassphraseModal","sizes","formatDate","dateString","toLocaleDateString","day","hour","minute","handleDownload","getFileIcon","fileName","normalizedName","share","share_id","file_name","sharedWith","shared_with","created_at","handleRevokeShare","fileSize","file_size","file_id","handleDelete","encrypted_key","actualFileId","Check","Copy","ShareModal","setRecipientAddress","copied","setCopied","isPublicKeyRegistered","setIsPublicKeyRegistered","checkRSAStatus","copyToClipboard","clipboard","writeText","Dashboard","activeTab","setActiveTab","searchQuery","setSearchQuery","showUpload","setShowUpload","showShareModal","setShowShareModal","filteredFiles","filteredSharedFiles","filteredOutgoingShares","Users","FileText","PenTool","Brain","PenSquare","groth16","wasmPath","zkeyPath","pi_a","pi_b","pi_c","publicSignals","ZKCircuitManager","generateIntegrityProof","fileData","fileHash","circuitInputs","file_chunks","chunkDataForCircuit","file_hash","generateZKPTProof","originalData","transformedData","originalHash","transformedHash","transformed","original_hash","transformed_hash","generateZKMLProof","inputData","modelParams","expectedOutput","formatProofForContract","argv","publicInputs","uint8ArrayToHex","poseidonHash","DocumentTransformer","performToyRedaction","redactionRules","redactedData","removeChunks","chunkIndex","endIndex","replaceWith","createTransformationRecord","transformationType","verifiable","AIModelManager","runToyLinearModel","verifyModelExecution","actualOutput","NotarizeDocumentModal","onSuccess","step","setStep","documentHash","setDocumentHash","uploadToIpfs","registerDocumentOnChain","cid","note","getStepIcon","stepName","_event$target$files","accept","htmlFor","zkManager","formattedProof","legalDocument","docHash","blockchainHash","ipfsCid","zkProof","existingDocs","AlertTriangle","RedactionModal","setRedactionRules","customRules","setTransformedHash","handleRedactionRuleChange","rule","getDocumentData","uploadRedactedDocument","registerTransformationOnChain","addRedactedDocumentToLegalList","redactedDocument","originalDocumentId","chainEntry","documentId","documentName","existingChain","CustomEvent","rows","redactedCid","ESignatureModal","signatureRequest","setSignatureRequest","escrowAmount","deadline","customMessage","signatureStatus","setSignatureStatus","completed","signDocumentHash","_signer$signature","canSign","REACT_APP_API_URL","signerAddress","updatedSigners","requestedBy","expiresAt","BarChart3","Zap","ZKMLAnalysisModal","analysisConfig","setAnalysisConfig","modelType","analysisResult","setAnalysisResult","handleAnalysisConfigChange","verifyMLInferenceOnChain","proofHash","MessageSquare","ExternalLink","SignatureRequests","signatureRequests","setSignatureRequests","loadSignatureRequests","getStatusColor","getStatusIcon","isExpired","signDocument","requestId","declineSignature","SentSignatureRequests","loadSentSignatureRequests","_request$signedBy","_request$signedBy2","signedBy","signedAt","CaseContext","CaseProvider","cases","setCases","currentCase","setCurrentCase","dashboard","setDashboard","tasks","setTasks","documents","setDocuments","deadlines","teamMembers","setTeamMembers","annotations","setAnnotations","bundles","setBundles","auditTrail","setAuditTrail","getCase","caseId","getCases","queryParams","loadCurrentCase","caseData","getDashboard","getTasks","getDocuments","getAuditTrail","updateTask","taskId","updates","updatedTask","updateTeamMember","memberId","updatedMember","walletAddress","createCase","newCase","updateCase","updatedCase","deleteCase","addDocumentToCase","newDocument","updateDocument","updatedDocument","deleteDocument","createTask","task","newTask","completeTask","completedAt","deleteTask","addTeamMember","member","newMember","removeTeamMember","updatePermissions","permissions","addAnnotation","annotation","newAnnotation","updateAnnotation","annotationId","updatedAnnotation","deleteAnnotation","getAnnotations","createBundle","bundle","newBundle","shareBundle","bundleId","verifyBundle","generateAuditReport","reportUrl","refreshData","clearError","ROLE_PERMISSIONS","canViewCase","canCreateCase","canEditCaseDetails","canAddRemoveMembers","canNotarizeDocuments","canViewAllDocuments","canCreateRedactions","canGrantRevokeAccess","canViewSharedByMe","canViewReceivedDocs","canRequestSignatures","canFundEscrow","canSignDocuments","canRunZKMLAnalysis","associate","paralegal","getPermissionsForRole","getRoleDisplayName","saveUserProfile","profile","loadUserProfile","profileData","lastLoginAt","RBACContext","RBACProvider","currentUser","setCurrentUser","currentCaseMembers","setCurrentCaseMembers","currentCaseId","setCurrentCaseId","userPermissions","setUserPermissions","userProfile","setUserProfile","isOnboarded","setIsOnboarded","currentRole","userContext","loadUserProfileFromStorage","hasPermission","permission","members","userMember","updateUserRole","newRole","addCaseMember","removeCaseMember","updateUserProfile","profileUpdate","updatedProfile","completeOnboarding","firmName","newProfile","createUserProfile","onboardedAt","preferences","notifications","autoSave","canPerformAction","getUserRole","isCaseOwner","isTeamMember","useRBAC","CreateCaseModal","useCase","setFormData","clientName","matterNumber","practiceArea","team","accessControl","roleAssignments","updatedAt","setNewMember","handleInputChange","addedAt","addedBy","updateMemberRole","allTeamMembers","ApiTester","testBackendHealth","testAuthFlow","testFileUpload","testFile","runAllTests","backendHealth","authFlow","fileUpload","demoAutomation","currentStep","isRunning","demoData","setupDemoData","team_members","wallet","documents_count","tasks_count","completion_percentage","ipfs_cid","blockchain_hash","zk_proof","case_id","upload_date","verification_status","zkpt_proof","original_doc_id","redaction_rules","signature_requests","document_id","document_name","sender_wallet","recipient_wallet","created_date","ai_analyses","analysis_type","model_type","model_parameters","private_input","expected_output","actual_output","zkml_proof","confidence_score","risk_level","analysis_date","analyst","getDemoScenarios","getCaseManagementDemo","getDocumentNotarizationDemo","getVerifiableRedactionDemo","getVerifiableAIAnalysisDemo","getESignatureDemo","getCompleteWorkflowDemo","totalDuration","steps","simulateDelay","runDemo","scenarioId","scenario","runAllDemos","scenarios","getDemoData","isDemoRunning","getCurrentStep","setScenarios","selectedScenario","setSelectedScenario","setIsRunning","demoLog","setDemoLog","demoScenarios","selectedScenarioData","originalLog","clearLog","DemoLauncher","showDemo","setShowDemo","SimpleDemoInterface","Building2","UserOnboarding","onComplete","userAddress","selectedRole","setSelectedRole","setFirmName","handleRoleSelection","handleComplete","finalRole","getRoleDescription","getRoleIcon","ArrowRight","WalletConnection","onConnect","connecting","setConnecting","actionPermissionMap","LegalDashboard","selectedTab","setSelectedTab","chainOfCustody","setChainOfCustody","showNotarizeModal","setShowNotarizeModal","showRedactionModal","setShowRedactionModal","showESignatureModal","setShowESignatureModal","showZKMLModal","setShowZKMLModal","showCreateCaseModal","setShowCreateCaseModal","showRequestSignatureModal","setShowRequestSignatureModal","selectedDocument","setSelectedDocument","showDebugPanel","setShowDebugPanel","debugResults","setDebugResults","legalDocuments","setLegalDocuments","filteredDocuments","doc","refreshDocuments","storedDocs","buildChainOfCustody","signatures","aiAnalysis","model","handleStorageChange","handleDocumentsUpdated","handleChainOfCustodyUpdated","handleDocumentAction","tabs","debugUserPermissions","runPermissionTests","runPermissionMappingTests","testPermissionMapping","testRole","tab","Icon","Edit","toLocaleString","Toaster","border","backdropFilter","ReactDOM","getElementById","App"],"sourceRoot":""}